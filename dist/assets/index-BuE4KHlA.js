(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var dNe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function X5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var AC={exports:{}},Qp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _N;function V9(){if(_N)return Qp;_N=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,a,s){var i=null;if(s!==void 0&&(i=""+s),a.key!==void 0&&(i=""+a.key),"key"in a){s={};for(var o in a)o!=="key"&&(s[o]=a[o])}else s=a;return a=s.ref,{$$typeof:t,type:n,key:i,ref:a!==void 0?a:null,props:s}}return Qp.Fragment=e,Qp.jsx=r,Qp.jsxs=r,Qp}var SN;function z9(){return SN||(SN=1,AC.exports=V9()),AC.exports}var c=z9(),dC={exports:{}},jr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TN;function G9(){if(TN)return jr;TN=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function m(W){return W===null||typeof W!="object"?null:(W=h&&W[h]||W["@@iterator"],typeof W=="function"?W:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function _(W,ce,j){this.props=W,this.context=ce,this.refs=w,this.updater=j||g}_.prototype.isReactComponent={},_.prototype.setState=function(W,ce){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,ce,"setState")},_.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function N(){}N.prototype=_.prototype;function k(W,ce,j){this.props=W,this.context=ce,this.refs=w,this.updater=j||g}var I=k.prototype=new N;I.constructor=k,b(I,_.prototype),I.isPureReactComponent=!0;var P=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function C(W,ce,j,K,X,te){return j=te.ref,{$$typeof:t,type:W,key:ce,ref:j!==void 0?j:null,props:te}}function B(W,ce){return C(W.type,ce,void 0,void 0,void 0,W.props)}function T(W){return typeof W=="object"&&W!==null&&W.$$typeof===t}function O(W){var ce={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(j){return ce[j]})}var F=/\/+/g;function L(W,ce){return typeof W=="object"&&W!==null&&W.key!=null?O(""+W.key):ce.toString(36)}function Q(){}function q(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(Q,Q):(W.status="pending",W.then(function(ce){W.status==="pending"&&(W.status="fulfilled",W.value=ce)},function(ce){W.status==="pending"&&(W.status="rejected",W.reason=ce)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function ie(W,ce,j,K,X){var te=typeof W;(te==="undefined"||te==="boolean")&&(W=null);var le=!1;if(W===null)le=!0;else switch(te){case"bigint":case"string":case"number":le=!0;break;case"object":switch(W.$$typeof){case t:case e:le=!0;break;case d:return le=W._init,ie(le(W._payload),ce,j,K,X)}}if(le)return X=X(W),le=K===""?"."+L(W,0):K,P(X)?(j="",le!=null&&(j=le.replace(F,"$&/")+"/"),ie(X,ce,j,"",function(ge){return ge})):X!=null&&(T(X)&&(X=B(X,j+(X.key==null||W&&W.key===X.key?"":(""+X.key).replace(F,"$&/")+"/")+le)),ce.push(X)),1;le=0;var de=K===""?".":K+":";if(P(W))for(var me=0;me<W.length;me++)K=W[me],te=de+L(K,me),le+=ie(K,ce,j,te,X);else if(me=m(W),typeof me=="function")for(W=me.call(W),me=0;!(K=W.next()).done;)K=K.value,te=de+L(K,me++),le+=ie(K,ce,j,te,X);else if(te==="object"){if(typeof W.then=="function")return ie(q(W),ce,j,K,X);throw ce=String(W),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.")}return le}function Z(W,ce,j){if(W==null)return W;var K=[],X=0;return ie(W,K,"","",function(te){return ce.call(j,te,X++)}),K}function ee(W){if(W._status===-1){var ce=W._result;ce=ce(),ce.then(function(j){(W._status===0||W._status===-1)&&(W._status=1,W._result=j)},function(j){(W._status===0||W._status===-1)&&(W._status=2,W._result=j)}),W._status===-1&&(W._status=0,W._result=ce)}if(W._status===1)return W._result.default;throw W._result}var ne=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ce=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(ce))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)};function z(){}return jr.Children={map:Z,forEach:function(W,ce,j){Z(W,function(){ce.apply(this,arguments)},j)},count:function(W){var ce=0;return Z(W,function(){ce++}),ce},toArray:function(W){return Z(W,function(ce){return ce})||[]},only:function(W){if(!T(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},jr.Component=_,jr.Fragment=r,jr.Profiler=a,jr.PureComponent=k,jr.StrictMode=n,jr.Suspense=l,jr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,jr.__COMPILER_RUNTIME={__proto__:null,c:function(W){return M.H.useMemoCache(W)}},jr.cache=function(W){return function(){return W.apply(null,arguments)}},jr.cloneElement=function(W,ce,j){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var K=b({},W.props),X=W.key,te=void 0;if(ce!=null)for(le in ce.ref!==void 0&&(te=void 0),ce.key!==void 0&&(X=""+ce.key),ce)!D.call(ce,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&ce.ref===void 0||(K[le]=ce[le]);var le=arguments.length-2;if(le===1)K.children=j;else if(1<le){for(var de=Array(le),me=0;me<le;me++)de[me]=arguments[me+2];K.children=de}return C(W.type,X,void 0,void 0,te,K)},jr.createContext=function(W){return W={$$typeof:i,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:s,_context:W},W},jr.createElement=function(W,ce,j){var K,X={},te=null;if(ce!=null)for(K in ce.key!==void 0&&(te=""+ce.key),ce)D.call(ce,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(X[K]=ce[K]);var le=arguments.length-2;if(le===1)X.children=j;else if(1<le){for(var de=Array(le),me=0;me<le;me++)de[me]=arguments[me+2];X.children=de}if(W&&W.defaultProps)for(K in le=W.defaultProps,le)X[K]===void 0&&(X[K]=le[K]);return C(W,te,void 0,void 0,null,X)},jr.createRef=function(){return{current:null}},jr.forwardRef=function(W){return{$$typeof:o,render:W}},jr.isValidElement=T,jr.lazy=function(W){return{$$typeof:d,_payload:{_status:-1,_result:W},_init:ee}},jr.memo=function(W,ce){return{$$typeof:A,type:W,compare:ce===void 0?null:ce}},jr.startTransition=function(W){var ce=M.T,j={};M.T=j;try{var K=W(),X=M.S;X!==null&&X(j,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(z,ne)}catch(te){ne(te)}finally{M.T=ce}},jr.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},jr.use=function(W){return M.H.use(W)},jr.useActionState=function(W,ce,j){return M.H.useActionState(W,ce,j)},jr.useCallback=function(W,ce){return M.H.useCallback(W,ce)},jr.useContext=function(W){return M.H.useContext(W)},jr.useDebugValue=function(){},jr.useDeferredValue=function(W,ce){return M.H.useDeferredValue(W,ce)},jr.useEffect=function(W,ce,j){var K=M.H;if(typeof j=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(W,ce)},jr.useId=function(){return M.H.useId()},jr.useImperativeHandle=function(W,ce,j){return M.H.useImperativeHandle(W,ce,j)},jr.useInsertionEffect=function(W,ce){return M.H.useInsertionEffect(W,ce)},jr.useLayoutEffect=function(W,ce){return M.H.useLayoutEffect(W,ce)},jr.useMemo=function(W,ce){return M.H.useMemo(W,ce)},jr.useOptimistic=function(W,ce){return M.H.useOptimistic(W,ce)},jr.useReducer=function(W,ce,j){return M.H.useReducer(W,ce,j)},jr.useRef=function(W){return M.H.useRef(W)},jr.useState=function(W){return M.H.useState(W)},jr.useSyncExternalStore=function(W,ce,j){return M.H.useSyncExternalStore(W,ce,j)},jr.useTransition=function(){return M.H.useTransition()},jr.version="19.1.1",jr}var BN;function kx(){return BN||(BN=1,dC.exports=G9()),dC.exports}var J=kx();const At=X5(J);var fC={exports:{}},Hp={},hC={exports:{}},mC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NN;function q9(){return NN||(NN=1,function(t){function e(Z,ee){var ne=Z.length;Z.push(ee);e:for(;0<ne;){var z=ne-1>>>1,W=Z[z];if(0<a(W,ee))Z[z]=ee,Z[ne]=W,ne=z;else break e}}function r(Z){return Z.length===0?null:Z[0]}function n(Z){if(Z.length===0)return null;var ee=Z[0],ne=Z.pop();if(ne!==ee){Z[0]=ne;e:for(var z=0,W=Z.length,ce=W>>>1;z<ce;){var j=2*(z+1)-1,K=Z[j],X=j+1,te=Z[X];if(0>a(K,ne))X<W&&0>a(te,K)?(Z[z]=te,Z[X]=ne,z=X):(Z[z]=K,Z[j]=ne,z=j);else if(X<W&&0>a(te,ne))Z[z]=te,Z[X]=ne,z=X;else break e}}return ee}function a(Z,ee){var ne=Z.sortIndex-ee.sortIndex;return ne!==0?ne:Z.id-ee.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var l=[],A=[],d=1,h=null,m=3,g=!1,b=!1,w=!1,_=!1,N=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function P(Z){for(var ee=r(A);ee!==null;){if(ee.callback===null)n(A);else if(ee.startTime<=Z)n(A),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=r(A)}}function M(Z){if(w=!1,P(Z),!b)if(r(l)!==null)b=!0,D||(D=!0,L());else{var ee=r(A);ee!==null&&ie(M,ee.startTime-Z)}}var D=!1,C=-1,B=5,T=-1;function O(){return _?!0:!(t.unstable_now()-T<B)}function F(){if(_=!1,D){var Z=t.unstable_now();T=Z;var ee=!0;try{e:{b=!1,w&&(w=!1,k(C),C=-1),g=!0;var ne=m;try{t:{for(P(Z),h=r(l);h!==null&&!(h.expirationTime>Z&&O());){var z=h.callback;if(typeof z=="function"){h.callback=null,m=h.priorityLevel;var W=z(h.expirationTime<=Z);if(Z=t.unstable_now(),typeof W=="function"){h.callback=W,P(Z),ee=!0;break t}h===r(l)&&n(l),P(Z)}else n(l);h=r(l)}if(h!==null)ee=!0;else{var ce=r(A);ce!==null&&ie(M,ce.startTime-Z),ee=!1}}break e}finally{h=null,m=ne,g=!1}ee=void 0}}finally{ee?L():D=!1}}}var L;if(typeof I=="function")L=function(){I(F)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,q=Q.port2;Q.port1.onmessage=F,L=function(){q.postMessage(null)}}else L=function(){N(F,0)};function ie(Z,ee){C=N(function(){Z(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(Z){switch(m){case 1:case 2:case 3:var ee=3;break;default:ee=m}var ne=m;m=ee;try{return Z()}finally{m=ne}},t.unstable_requestPaint=function(){_=!0},t.unstable_runWithPriority=function(Z,ee){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ne=m;m=Z;try{return ee()}finally{m=ne}},t.unstable_scheduleCallback=function(Z,ee,ne){var z=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?z+ne:z):ne=z,Z){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ne+W,Z={id:d++,callback:ee,priorityLevel:Z,startTime:ne,expirationTime:W,sortIndex:-1},ne>z?(Z.sortIndex=ne,e(A,Z),r(l)===null&&Z===r(A)&&(w?(k(C),C=-1):w=!0,ie(M,ne-z))):(Z.sortIndex=W,e(l,Z),b||g||(b=!0,D||(D=!0,L()))),Z},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(Z){var ee=m;return function(){var ne=m;m=ee;try{return Z.apply(this,arguments)}finally{m=ne}}}}(mC)),mC}var kN;function K9(){return kN||(kN=1,hC.exports=q9()),hC.exports}var pC={exports:{}},Ei={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IN;function W9(){if(IN)return Ei;IN=1;var t=kx();function e(l){var A="https://react.dev/errors/"+l;if(1<arguments.length){A+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)A+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(l,A,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:l,containerInfo:A,implementation:d}}var i=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,A){if(l==="font")return"";if(typeof A=="string")return A==="use-credentials"?A:""}return Ei.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ei.createPortal=function(l,A){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)throw Error(e(299));return s(l,A,null,d)},Ei.flushSync=function(l){var A=i.T,d=n.p;try{if(i.T=null,n.p=2,l)return l()}finally{i.T=A,n.p=d,n.d.f()}},Ei.preconnect=function(l,A){typeof l=="string"&&(A?(A=A.crossOrigin,A=typeof A=="string"?A==="use-credentials"?A:"":void 0):A=null,n.d.C(l,A))},Ei.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},Ei.preinit=function(l,A){if(typeof l=="string"&&A&&typeof A.as=="string"){var d=A.as,h=o(d,A.crossOrigin),m=typeof A.integrity=="string"?A.integrity:void 0,g=typeof A.fetchPriority=="string"?A.fetchPriority:void 0;d==="style"?n.d.S(l,typeof A.precedence=="string"?A.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:g}):d==="script"&&n.d.X(l,{crossOrigin:h,integrity:m,fetchPriority:g,nonce:typeof A.nonce=="string"?A.nonce:void 0})}},Ei.preinitModule=function(l,A){if(typeof l=="string")if(typeof A=="object"&&A!==null){if(A.as==null||A.as==="script"){var d=o(A.as,A.crossOrigin);n.d.M(l,{crossOrigin:d,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0})}}else A==null&&n.d.M(l)},Ei.preload=function(l,A){if(typeof l=="string"&&typeof A=="object"&&A!==null&&typeof A.as=="string"){var d=A.as,h=o(d,A.crossOrigin);n.d.L(l,d,{crossOrigin:h,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0,type:typeof A.type=="string"?A.type:void 0,fetchPriority:typeof A.fetchPriority=="string"?A.fetchPriority:void 0,referrerPolicy:typeof A.referrerPolicy=="string"?A.referrerPolicy:void 0,imageSrcSet:typeof A.imageSrcSet=="string"?A.imageSrcSet:void 0,imageSizes:typeof A.imageSizes=="string"?A.imageSizes:void 0,media:typeof A.media=="string"?A.media:void 0})}},Ei.preloadModule=function(l,A){if(typeof l=="string")if(A){var d=o(A.as,A.crossOrigin);n.d.m(l,{as:typeof A.as=="string"&&A.as!=="script"?A.as:void 0,crossOrigin:d,integrity:typeof A.integrity=="string"?A.integrity:void 0})}else n.d.m(l)},Ei.requestFormReset=function(l){n.d.r(l)},Ei.unstable_batchedUpdates=function(l,A){return l(A)},Ei.useFormState=function(l,A,d){return i.H.useFormState(l,A,d)},Ei.useFormStatus=function(){return i.H.useHostTransitionStatus()},Ei.version="19.1.1",Ei}var FN;function XD(){if(FN)return pC.exports;FN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),pC.exports=W9(),pC.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RN;function $9(){if(RN)return Hp;RN=1;var t=K9(),e=kx(),r=XD();function n(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function s(u){var f=u,p=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,(f.flags&4098)!==0&&(p=f.return),u=f.return;while(u)}return f.tag===3?p:null}function i(u){if(u.tag===13){var f=u.memoizedState;if(f===null&&(u=u.alternate,u!==null&&(f=u.memoizedState)),f!==null)return f.dehydrated}return null}function o(u){if(s(u)!==u)throw Error(n(188))}function l(u){var f=u.alternate;if(!f){if(f=s(u),f===null)throw Error(n(188));return f!==u?null:u}for(var p=u,y=f;;){var R=p.return;if(R===null)break;var H=R.alternate;if(H===null){if(y=R.return,y!==null){p=y;continue}break}if(R.child===H.child){for(H=R.child;H;){if(H===p)return o(R),u;if(H===y)return o(R),f;H=H.sibling}throw Error(n(188))}if(p.return!==y.return)p=R,y=H;else{for(var oe=!1,we=R.child;we;){if(we===p){oe=!0,p=R,y=H;break}if(we===y){oe=!0,y=R,p=H;break}we=we.sibling}if(!oe){for(we=H.child;we;){if(we===p){oe=!0,p=H,y=R;break}if(we===y){oe=!0,y=H,p=R;break}we=we.sibling}if(!oe)throw Error(n(189))}}if(p.alternate!==y)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?u:f}function A(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(f=A(u),f!==null)return f;u=u.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),I=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function L(u){return u===null||typeof u!="object"?null:(u=F&&u[F]||u["@@iterator"],typeof u=="function"?u:null)}var Q=Symbol.for("react.client.reference");function q(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===Q?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case b:return"Fragment";case _:return"Profiler";case w:return"StrictMode";case M:return"Suspense";case D:return"SuspenseList";case T:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case g:return"Portal";case I:return(u.displayName||"Context")+".Provider";case k:return(u._context.displayName||"Context")+".Consumer";case P:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case C:return f=u.displayName||null,f!==null?f:q(u.type)||"Memo";case B:f=u._payload,u=u._init;try{return q(u(f))}catch{}}return null}var ie=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},z=[],W=-1;function ce(u){return{current:u}}function j(u){0>W||(u.current=z[W],z[W]=null,W--)}function K(u,f){W++,z[W]=u.current,u.current=f}var X=ce(null),te=ce(null),le=ce(null),de=ce(null);function me(u,f){switch(K(le,f),K(te,u),K(X,null),f.nodeType){case 9:case 11:u=(u=f.documentElement)&&(u=u.namespaceURI)?ZB(u):0;break;default:if(u=f.tagName,f=f.namespaceURI)f=ZB(f),u=eN(f,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}j(X),K(X,u)}function ge(){j(X),j(te),j(le)}function Se(u){u.memoizedState!==null&&K(de,u);var f=X.current,p=eN(f,u.type);f!==p&&(K(te,u),K(X,p))}function xe(u){te.current===u&&(j(X),j(te)),de.current===u&&(j(de),Up._currentValue=ne)}var ae=Object.prototype.hasOwnProperty,Fe=t.unstable_scheduleCallback,Xe=t.unstable_cancelCallback,De=t.unstable_shouldYield,Ce=t.unstable_requestPaint,ze=t.unstable_now,tt=t.unstable_getCurrentPriorityLevel,it=t.unstable_ImmediatePriority,dt=t.unstable_UserBlockingPriority,Ct=t.unstable_NormalPriority,ut=t.unstable_LowPriority,Nt=t.unstable_IdlePriority,It=t.log,Kt=t.unstable_setDisableYieldValue,Ut=null,Ht=null;function Yt(u){if(typeof It=="function"&&Kt(u),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(Ut,u)}catch{}}var Mt=Math.clz32?Math.clz32:vr,kt=Math.log,xt=Math.LN2;function vr(u){return u>>>=0,u===0?32:31-(kt(u)/xt|0)|0}var Wt=256,un=4194304;function pr(u){var f=u&42;if(f!==0)return f;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function Rr(u,f,p){var y=u.pendingLanes;if(y===0)return 0;var R=0,H=u.suspendedLanes,oe=u.pingedLanes;u=u.warmLanes;var we=y&134217727;return we!==0?(y=we&~H,y!==0?R=pr(y):(oe&=we,oe!==0?R=pr(oe):p||(p=we&~u,p!==0&&(R=pr(p))))):(we=y&~H,we!==0?R=pr(we):oe!==0?R=pr(oe):p||(p=y&~u,p!==0&&(R=pr(p)))),R===0?0:f!==0&&f!==R&&(f&H)===0&&(H=R&-R,p=f&-f,H>=p||H===32&&(p&4194048)!==0)?f:R}function kn(u,f){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&f)===0}function Nr(u,f){switch(u){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ls(){var u=Wt;return Wt<<=1,(Wt&4194048)===0&&(Wt=256),u}function en(){var u=un;return un<<=1,(un&62914560)===0&&(un=4194304),u}function ea(u){for(var f=[],p=0;31>p;p++)f.push(u);return f}function ha(u,f){u.pendingLanes|=f,f!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function Lr(u,f,p,y,R,H){var oe=u.pendingLanes;u.pendingLanes=p,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=p,u.entangledLanes&=p,u.errorRecoveryDisabledLanes&=p,u.shellSuspendCounter=0;var we=u.entanglements,Re=u.expirationTimes,et=u.hiddenUpdates;for(p=oe&~p;0<p;){var ft=31-Mt(p),wt=1<<ft;we[ft]=0,Re[ft]=-1;var nt=et[ft];if(nt!==null)for(et[ft]=null,ft=0;ft<nt.length;ft++){var at=nt[ft];at!==null&&(at.lane&=-536870913)}p&=~wt}y!==0&&tr(u,y,0),H!==0&&R===0&&u.tag!==0&&(u.suspendedLanes|=H&~(oe&~f))}function tr(u,f,p){u.pendingLanes|=f,u.suspendedLanes&=~f;var y=31-Mt(f);u.entangledLanes|=f,u.entanglements[y]=u.entanglements[y]|1073741824|p&4194090}function Qr(u,f){var p=u.entangledLanes|=f;for(u=u.entanglements;p;){var y=31-Mt(p),R=1<<y;R&f|u[y]&f&&(u[y]|=f),p&=~R}}function cs(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function qn(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function wa(){var u=ee.p;return u!==0?u:(u=window.event,u===void 0?32:vN(u.type))}function Es(u,f){var p=ee.p;try{return ee.p=u,f()}finally{ee.p=p}}var Qt=Math.random().toString(36).slice(2),An="__reactFiber$"+Qt,tn="__reactProps$"+Qt,In="__reactContainer$"+Qt,Un="__reactEvents$"+Qt,Kn="__reactListeners$"+Qt,fe="__reactHandles$"+Qt,Ne="__reactResources$"+Qt,Ee="__reactMarker$"+Qt;function _e(u){delete u[An],delete u[tn],delete u[Un],delete u[Kn],delete u[fe]}function Te(u){var f=u[An];if(f)return f;for(var p=u.parentNode;p;){if(f=p[In]||p[An]){if(p=f.alternate,f.child!==null||p!==null&&p.child!==null)for(u=aN(u);u!==null;){if(p=u[An])return p;u=aN(u)}return f}u=p,p=u.parentNode}return null}function ke(u){if(u=u[An]||u[In]){var f=u.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return u}return null}function qe(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u.stateNode;throw Error(n(33))}function rt(u){var f=u[Ne];return f||(f=u[Ne]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Qe(u){u[Ee]=!0}var We=new Set,Je={};function yt(u,f){Bt(u,f),Bt(u+"Capture",f)}function Bt(u,f){for(Je[u]=f,u=0;u<f.length;u++)We.add(f[u])}var Pt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Tt={},Ft={};function cr(u){return ae.call(Ft,u)?!0:ae.call(Tt,u)?!1:Pt.test(u)?Ft[u]=!0:(Tt[u]=!0,!1)}function Ur(u,f,p){if(cr(f))if(p===null)u.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":u.removeAttribute(f);return;case"boolean":var y=f.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){u.removeAttribute(f);return}}u.setAttribute(f,""+p)}}function Mr(u,f,p){if(p===null)u.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(f);return}u.setAttribute(f,""+p)}}function Hr(u,f,p,y){if(y===null)u.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(p);return}u.setAttributeNS(f,p,""+y)}}var Ia,fi;function Fa(u){if(Ia===void 0)try{throw Error()}catch(p){var f=p.stack.trim().match(/\n( *(at )?)/);Ia=f&&f[1]||"",fi=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ia+u+fi}var us=!1;function Ga(u,f){if(!u||us)return"";us=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(f){var wt=function(){throw Error()};if(Object.defineProperty(wt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(wt,[])}catch(at){var nt=at}Reflect.construct(u,[],wt)}else{try{wt.call()}catch(at){nt=at}u.call(wt.prototype)}}else{try{throw Error()}catch(at){nt=at}(wt=u())&&typeof wt.catch=="function"&&wt.catch(function(){})}}catch(at){if(at&&nt&&typeof at.stack=="string")return[at.stack,nt.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var H=y.DetermineComponentFrameRoot(),oe=H[0],we=H[1];if(oe&&we){var Re=oe.split(`
`),et=we.split(`
`);for(R=y=0;y<Re.length&&!Re[y].includes("DetermineComponentFrameRoot");)y++;for(;R<et.length&&!et[R].includes("DetermineComponentFrameRoot");)R++;if(y===Re.length||R===et.length)for(y=Re.length-1,R=et.length-1;1<=y&&0<=R&&Re[y]!==et[R];)R--;for(;1<=y&&0<=R;y--,R--)if(Re[y]!==et[R]){if(y!==1||R!==1)do if(y--,R--,0>R||Re[y]!==et[R]){var ft=`
`+Re[y].replace(" at new "," at ");return u.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",u.displayName)),ft}while(1<=y&&0<=R);break}}}finally{us=!1,Error.prepareStackTrace=p}return(p=u?u.displayName||u.name:"")?Fa(p):""}function _s(u){switch(u.tag){case 26:case 27:case 5:return Fa(u.type);case 16:return Fa("Lazy");case 13:return Fa("Suspense");case 19:return Fa("SuspenseList");case 0:case 15:return Ga(u.type,!1);case 11:return Ga(u.type.render,!1);case 1:return Ga(u.type,!0);case 31:return Fa("Activity");default:return""}}function Wn(u){try{var f="";do f+=_s(u),u=u.return;while(u);return f}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function As(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Mc(u){var f=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function GA(u){var f=Mc(u)?"checked":"value",p=Object.getOwnPropertyDescriptor(u.constructor.prototype,f),y=""+u[f];if(!u.hasOwnProperty(f)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var R=p.get,H=p.set;return Object.defineProperty(u,f,{configurable:!0,get:function(){return R.call(this)},set:function(oe){y=""+oe,H.call(this,oe)}}),Object.defineProperty(u,f,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(oe){y=""+oe},stopTracking:function(){u._valueTracker=null,delete u[f]}}}}function sl(u){u._valueTracker||(u._valueTracker=GA(u))}function Pu(u){if(!u)return!1;var f=u._valueTracker;if(!f)return!0;var p=f.getValue(),y="";return u&&(y=Mc(u)?u.checked?"true":"false":u.value),u=y,u!==p?(f.setValue(u),!0):!1}function Ss(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var Pc=/[\n"\\]/g;function dn(u){return u.replace(Pc,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Ts(u,f,p,y,R,H,oe,we){u.name="",oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?u.type=oe:u.removeAttribute("type"),f!=null?oe==="number"?(f===0&&u.value===""||u.value!=f)&&(u.value=""+As(f)):u.value!==""+As(f)&&(u.value=""+As(f)):oe!=="submit"&&oe!=="reset"||u.removeAttribute("value"),f!=null?ol(u,oe,As(f)):p!=null?ol(u,oe,As(p)):y!=null&&u.removeAttribute("value"),R==null&&H!=null&&(u.defaultChecked=!!H),R!=null&&(u.checked=R&&typeof R!="function"&&typeof R!="symbol"),we!=null&&typeof we!="function"&&typeof we!="symbol"&&typeof we!="boolean"?u.name=""+As(we):u.removeAttribute("name")}function il(u,f,p,y,R,H,oe,we){if(H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(u.type=H),f!=null||p!=null){if(!(H!=="submit"&&H!=="reset"||f!=null))return;p=p!=null?""+As(p):"",f=f!=null?""+As(f):p,we||f===u.value||(u.value=f),u.defaultValue=f}y=y??R,y=typeof y!="function"&&typeof y!="symbol"&&!!y,u.checked=we?u.checked:!!y,u.defaultChecked=!!y,oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"&&(u.name=oe)}function ol(u,f,p){f==="number"&&Ss(u.ownerDocument)===u||u.defaultValue===""+p||(u.defaultValue=""+p)}function ro(u,f,p,y){if(u=u.options,f){f={};for(var R=0;R<p.length;R++)f["$"+p[R]]=!0;for(p=0;p<u.length;p++)R=f.hasOwnProperty("$"+u[p].value),u[p].selected!==R&&(u[p].selected=R),R&&y&&(u[p].defaultSelected=!0)}else{for(p=""+As(p),f=null,R=0;R<u.length;R++){if(u[R].value===p){u[R].selected=!0,y&&(u[R].defaultSelected=!0);return}f!==null||u[R].disabled||(f=u[R])}f!==null&&(f.selected=!0)}}function Cn(u,f,p){if(f!=null&&(f=""+As(f),f!==u.value&&(u.value=f),p==null)){u.defaultValue!==f&&(u.defaultValue=f);return}u.defaultValue=p!=null?""+As(p):""}function ll(u,f,p,y){if(f==null){if(y!=null){if(p!=null)throw Error(n(92));if(ie(y)){if(1<y.length)throw Error(n(93));y=y[0]}p=y}p==null&&(p=""),f=p}p=As(f),u.defaultValue=p,y=u.textContent,y===p&&y!==""&&y!==null&&(u.value=y)}function hi(u,f){if(f){var p=u.firstChild;if(p&&p===u.lastChild&&p.nodeType===3){p.nodeValue=f;return}}u.textContent=f}var ko=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qA(u,f,p){var y=f.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?u.setProperty(f,""):f==="float"?u.cssFloat="":u[f]="":y?u.setProperty(f,p):typeof p!="number"||p===0||ko.has(f)?f==="float"?u.cssFloat=p:u[f]=(""+p).trim():u[f]=p+"px"}function ju(u,f,p){if(f!=null&&typeof f!="object")throw Error(n(62));if(u=u.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||f!=null&&f.hasOwnProperty(y)||(y.indexOf("--")===0?u.setProperty(y,""):y==="float"?u.cssFloat="":u[y]="");for(var R in f)y=f[R],f.hasOwnProperty(R)&&p[R]!==y&&qA(u,R,y)}else for(var H in f)f.hasOwnProperty(H)&&qA(u,H,f[H])}function Ou(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Io=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fo(u){return jc.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var no=null;function Mn(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var Ro=null,ao=null;function fr(u){var f=ke(u);if(f&&(u=f.stateNode)){var p=u[tn]||null;e:switch(u=f.stateNode,f.type){case"input":if(Ts(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),f=p.name,p.type==="radio"&&f!=null){for(p=u;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+dn(""+f)+'"][type="radio"]'),f=0;f<p.length;f++){var y=p[f];if(y!==u&&y.form===u.form){var R=y[tn]||null;if(!R)throw Error(n(90));Ts(y,R.value,R.defaultValue,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name)}}for(f=0;f<p.length;f++)y=p[f],y.form===u.form&&Pu(y)}break e;case"textarea":Cn(u,p.value,p.defaultValue);break e;case"select":f=p.value,f!=null&&ro(u,!!p.multiple,f,!1)}}}var so=!1;function KA(u,f,p){if(so)return u(f,p);so=!0;try{var y=u(f);return y}finally{if(so=!1,(Ro!==null||ao!==null)&&(R1(),Ro&&(f=Ro,u=ao,ao=Ro=null,fr(f),u)))for(f=0;f<u.length;f++)fr(u[f])}}function Us(u,f){var p=u.stateNode;if(p===null)return null;var y=p[tn]||null;if(y===null)return null;p=y[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(u=u.type,y=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!y;break e;default:u=!1}if(u)return null;if(p&&typeof p!="function")throw Error(n(231,f,typeof p));return p}var mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xs=!1;if(mi)try{var io={};Object.defineProperty(io,"passive",{get:function(){Xs=!0}}),window.addEventListener("test",io,io),window.removeEventListener("test",io,io)}catch{Xs=!1}var pi=null,cl=null,Do=null;function Qu(){if(Do)return Do;var u,f=cl,p=f.length,y,R="value"in pi?pi.value:pi.textContent,H=R.length;for(u=0;u<p&&f[u]===R[u];u++);var oe=p-u;for(y=1;y<=oe&&f[p-y]===R[H-y];y++);return Do=R.slice(u,1<y?1-y:void 0)}function gi(u){var f=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&f===13&&(u=13)):u=f,u===10&&(u=13),32<=u||u===13?u:0}function Ms(){return!0}function oo(){return!1}function Ra(u){function f(p,y,R,H,oe){this._reactName=p,this._targetInst=R,this.type=y,this.nativeEvent=H,this.target=oe,this.currentTarget=null;for(var we in u)u.hasOwnProperty(we)&&(p=u[we],this[we]=p?p(H):H[we]);return this.isDefaultPrevented=(H.defaultPrevented!=null?H.defaultPrevented:H.returnValue===!1)?Ms:oo,this.isPropagationStopped=oo,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Ms)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Ms)},persist:function(){},isPersistent:Ms}),f}var $r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ul=Ra($r),lo=d({},$r,{view:0,detail:0}),Hu=Ra(lo),Wl,$l,qi,Ps=d({},lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hl,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==qi&&(qi&&u.type==="mousemove"?(Wl=u.screenX-qi.screenX,$l=u.screenY-qi.screenY):$l=Wl=0,qi=u),Wl)},movementY:function(u){return"movementY"in u?u.movementY:$l}}),Da=Ra(Ps),WA=d({},Ps,{dataTransfer:0}),Al=Ra(WA),Bs=d({},lo,{relatedTarget:0}),dl=Ra(Bs),Lo=d({},$r,{animationName:0,elapsedTime:0,pseudoElement:0}),Oc=Ra(Lo),Yl=d({},$r,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),Qc=Ra(Yl),Vu=d({},$r,{data:0}),Xl=Ra(Vu),fl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zl(u){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(u):(u=Hc[u])?!!f[u]:!1}function hl(){return Zl}var $A=d({},lo,{key:function(u){if(u.key){var f=fl[u.key]||u.key;if(f!=="Unidentified")return f}return u.type==="keypress"?(u=gi(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?Jl[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hl,charCode:function(u){return u.type==="keypress"?gi(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?gi(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),Uo=Ra($A),ml=d({},Ps,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ec=Ra(ml),js=d({},lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hl}),Vc=Ra(js),V=d({},$r,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ae=Ra(V),Ie=d({},Ps,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=Ra(Ie),He=d({},$r,{newState:0,oldState:0}),ot=Ra(He),_t=[9,13,27,32],jt=mi&&"CompositionEvent"in window,S=null;mi&&"documentMode"in document&&(S=document.documentMode);var Y=mi&&"TextEvent"in window&&!S,se=mi&&(!jt||S&&8<S&&11>=S),ye=" ",Oe=!1;function Ze(u,f){switch(u){case"keyup":return _t.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function St(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var hr=!1;function Yr(u,f){switch(u){case"compositionend":return St(f);case"keypress":return f.which!==32?null:(Oe=!0,ye);case"textInput":return u=f.data,u===ye&&Oe?null:u;default:return null}}function Tr(u,f){if(hr)return u==="compositionend"||!jt&&Ze(u,f)?(u=Qu(),Do=cl=pi=null,hr=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return se&&f.locale!=="ko"?null:f.data;default:return null}}var En={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fn(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f==="input"?!!En[u.type]:f==="textarea"}function co(u,f,p,y){Ro?ao?ao.push(y):ao=[y]:Ro=y,f=j1(f,"onChange"),0<f.length&&(p=new ul("onChange","change",null,p,y),u.push({event:p,listeners:f}))}var ba=null,xi=null;function pl(u){WB(u,0)}function zc(u){var f=qe(u);if(Pu(f))return u}function YA(u,f){if(u==="change")return f}var zu=!1;if(mi){var qa;if(mi){var Gc="oninput"in document;if(!Gc){var Gu=document.createElement("div");Gu.setAttribute("oninput","return;"),Gc=typeof Gu.oninput=="function"}qa=Gc}else qa=!1;zu=qa&&(!document.documentMode||9<document.documentMode)}function qu(){ba&&(ba.detachEvent("onpropertychange",XA),xi=ba=null)}function XA(u){if(u.propertyName==="value"&&zc(xi)){var f=[];co(f,xi,u,Mn(u)),KA(pl,f)}}function vi(u,f,p){u==="focusin"?(qu(),ba=f,xi=p,ba.attachEvent("onpropertychange",XA)):u==="focusout"&&qu()}function np(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return zc(xi)}function Tf(u,f){if(u==="click")return zc(f)}function qh(u,f){if(u==="input"||u==="change")return zc(f)}function uo(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var ds=typeof Object.is=="function"?Object.is:uo;function qc(u,f){if(ds(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var p=Object.keys(u),y=Object.keys(f);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var R=p[y];if(!ae.call(f,R)||!ds(u[R],f[R]))return!1}return!0}function Bf(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function tc(u,f){var p=Bf(u);u=0;for(var y;p;){if(p.nodeType===3){if(y=u+p.textContent.length,u<=f&&y>=f)return{node:p,offset:f-u};u=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Bf(p)}}function Kc(u,f){return u&&f?u===f?!0:u&&u.nodeType===3?!1:f&&f.nodeType===3?Kc(u,f.parentNode):"contains"in u?u.contains(f):u.compareDocumentPosition?!!(u.compareDocumentPosition(f)&16):!1:!1}function Js(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var f=Ss(u.document);f instanceof u.HTMLIFrameElement;){try{var p=typeof f.contentWindow.location.href=="string"}catch{p=!1}if(p)u=f.contentWindow;else break;f=Ss(u.document)}return f}function Ns(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f&&(f==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||f==="textarea"||u.contentEditable==="true")}var Wc=mi&&"documentMode"in document&&11>=document.documentMode,yi=null,Mo=null,gl=null,Po=!1;function ma(u,f,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Po||yi==null||yi!==Ss(y)||(y=yi,"selectionStart"in y&&Ns(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),gl&&qc(gl,y)||(gl=y,y=j1(Mo,"onSelect"),0<y.length&&(f=new ul("onSelect","select",null,f,p),u.push({event:f,listeners:y}),f.target=yi)))}function jo(u,f){var p={};return p[u.toLowerCase()]=f.toLowerCase(),p["Webkit"+u]="webkit"+f,p["Moz"+u]="moz"+f,p}var La={animationend:jo("Animation","AnimationEnd"),animationiteration:jo("Animation","AnimationIteration"),animationstart:jo("Animation","AnimationStart"),transitionrun:jo("Transition","TransitionRun"),transitionstart:jo("Transition","TransitionStart"),transitioncancel:jo("Transition","TransitionCancel"),transitionend:jo("Transition","TransitionEnd")},wi={},Ku={};mi&&(Ku=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function xl(u){if(wi[u])return wi[u];if(!La[u])return u;var f=La[u],p;for(p in f)if(f.hasOwnProperty(p)&&p in Ku)return wi[u]=f[p];return u}var JA=xl("animationend"),$c=xl("animationiteration"),Yc=xl("animationstart"),Xc=xl("transitionrun"),Wu=xl("transitionstart"),ZA=xl("transitioncancel"),Jc=xl("transitionend"),rc=new Map,$u="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$u.push("scrollEnd");function pa(u,f){rc.set(u,f),yt(f,[u])}var Ki=new WeakMap;function zr(u,f){if(typeof u=="object"&&u!==null){var p=Ki.get(u);return p!==void 0?p:(f={value:u,source:f,stack:Wn(f)},Ki.set(u,f),f)}return{value:u,source:f,stack:Wn(f)}}var Gr=[],$n=0,Ca=0;function Ao(){for(var u=$n,f=Ca=$n=0;f<u;){var p=Gr[f];Gr[f++]=null;var y=Gr[f];Gr[f++]=null;var R=Gr[f];Gr[f++]=null;var H=Gr[f];if(Gr[f++]=null,y!==null&&R!==null){var oe=y.pending;oe===null?R.next=R:(R.next=oe.next,oe.next=R),y.pending=R}H!==0&&Kh(p,R,H)}}function Zc(u,f,p,y){Gr[$n++]=u,Gr[$n++]=f,Gr[$n++]=p,Gr[$n++]=y,Ca|=y,u.lanes|=y,u=u.alternate,u!==null&&(u.lanes|=y)}function eu(u,f,p,y){return Zc(u,f,p,y),Yu(u)}function nc(u,f){return Zc(u,null,null,f),Yu(u)}function Kh(u,f,p){u.lanes|=p;var y=u.alternate;y!==null&&(y.lanes|=p);for(var R=!1,H=u.return;H!==null;)H.childLanes|=p,y=H.alternate,y!==null&&(y.childLanes|=p),H.tag===22&&(u=H.stateNode,u===null||u._visibility&1||(R=!0)),u=H,H=H.return;return u.tag===3?(H=u.stateNode,R&&f!==null&&(R=31-Mt(p),u=H.hiddenUpdates,y=u[R],y===null?u[R]=[f]:y.push(f),f.lane=p|536870912),H):null}function Yu(u){if(50<Bp)throw Bp=0,Lb=null,Error(n(185));for(var f=u.return;f!==null;)u=f,f=u.return;return u.tag===3?u.stateNode:null}var fs={};function fo(u,f,p,y){this.tag=u,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Os(u,f,p,y){return new fo(u,f,p,y)}function ed(u){return u=u.prototype,!(!u||!u.isReactComponent)}function vl(u,f){var p=u.alternate;return p===null?(p=Os(u.tag,f,u.key,u.mode),p.elementType=u.elementType,p.type=u.type,p.stateNode=u.stateNode,p.alternate=u,u.alternate=p):(p.pendingProps=f,p.type=u.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=u.flags&65011712,p.childLanes=u.childLanes,p.lanes=u.lanes,p.child=u.child,p.memoizedProps=u.memoizedProps,p.memoizedState=u.memoizedState,p.updateQueue=u.updateQueue,f=u.dependencies,p.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},p.sibling=u.sibling,p.index=u.index,p.ref=u.ref,p.refCleanup=u.refCleanup,p}function Nf(u,f){u.flags&=65011714;var p=u.alternate;return p===null?(u.childLanes=0,u.lanes=f,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=p.childLanes,u.lanes=p.lanes,u.child=p.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=p.memoizedProps,u.memoizedState=p.memoizedState,u.updateQueue=p.updateQueue,u.type=p.type,f=p.dependencies,u.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),u}function Xu(u,f,p,y,R,H){var oe=0;if(y=u,typeof u=="function")ed(u)&&(oe=1);else if(typeof u=="string")oe=k9(u,p,X.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case T:return u=Os(31,p,f,R),u.elementType=T,u.lanes=H,u;case b:return ac(p.children,R,H,f);case w:oe=8,R|=24;break;case _:return u=Os(12,p,f,R|2),u.elementType=_,u.lanes=H,u;case M:return u=Os(13,p,f,R),u.elementType=M,u.lanes=H,u;case D:return u=Os(19,p,f,R),u.elementType=D,u.lanes=H,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case N:case I:oe=10;break e;case k:oe=9;break e;case P:oe=11;break e;case C:oe=14;break e;case B:oe=16,y=null;break e}oe=29,p=Error(n(130,u===null?"null":typeof u,"")),y=null}return f=Os(oe,p,f,R),f.elementType=u,f.type=y,f.lanes=H,f}function ac(u,f,p,y){return u=Os(7,u,y,f),u.lanes=p,u}function Wh(u,f,p){return u=Os(6,u,null,f),u.lanes=p,u}function kf(u,f,p){return f=Os(4,u.children!==null?u.children:[],u.key,f),f.lanes=p,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}var tu=[],sc=0,td=null,$h=0,ho=[],Wi=0,Ju=null,ic=1,oc="";function Zu(u,f){tu[sc++]=$h,tu[sc++]=td,td=u,$h=f}function n1(u,f,p){ho[Wi++]=ic,ho[Wi++]=oc,ho[Wi++]=Ju,Ju=u;var y=ic;u=oc;var R=32-Mt(y)-1;y&=~(1<<R),p+=1;var H=32-Mt(f)+R;if(30<H){var oe=R-R%5;H=(y&(1<<oe)-1).toString(32),y>>=oe,R-=oe,ic=1<<32-Mt(f)+R|p<<R|y,oc=H+u}else ic=1<<H|p<<R|y,oc=u}function If(u){u.return!==null&&(Zu(u,1),n1(u,1,0))}function Ff(u){for(;u===td;)td=tu[--sc],tu[sc]=null,$h=tu[--sc],tu[sc]=null;for(;u===Ju;)Ju=ho[--Wi],ho[Wi]=null,oc=ho[--Wi],ho[Wi]=null,ic=ho[--Wi],ho[Wi]=null}var Ka=null,ga=null,vn=!1,ru=null,yl=!1,ap=Error(n(519));function eA(u){var f=Error(n(418,""));throw rd(zr(f,u)),ap}function a1(u){var f=u.stateNode,p=u.type,y=u.memoizedProps;switch(f[An]=u,f[tn]=y,p){case"dialog":nn("cancel",f),nn("close",f);break;case"iframe":case"object":case"embed":nn("load",f);break;case"video":case"audio":for(p=0;p<kp.length;p++)nn(kp[p],f);break;case"source":nn("error",f);break;case"img":case"image":case"link":nn("error",f),nn("load",f);break;case"details":nn("toggle",f);break;case"input":nn("invalid",f),il(f,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),sl(f);break;case"select":nn("invalid",f);break;case"textarea":nn("invalid",f),ll(f,y.value,y.defaultValue,y.children),sl(f)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||f.textContent===""+p||y.suppressHydrationWarning===!0||JB(f.textContent,p)?(y.popover!=null&&(nn("beforetoggle",f),nn("toggle",f)),y.onScroll!=null&&nn("scroll",f),y.onScrollEnd!=null&&nn("scrollend",f),y.onClick!=null&&(f.onclick=O1),f=!0):f=!1,f||eA(u)}function lc(u){for(Ka=u.return;Ka;)switch(Ka.tag){case 5:case 13:yl=!1;return;case 27:case 3:yl=!0;return;default:Ka=Ka.return}}function Zs(u){if(u!==Ka)return!1;if(!vn)return lc(u),vn=!0,!1;var f=u.tag,p;if((p=f!==3&&f!==27)&&((p=f===5)&&(p=u.type,p=!(p!=="form"&&p!=="button")||Xb(u.type,u.memoizedProps)),p=!p),p&&ga&&eA(u),lc(u),f===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));e:{for(u=u.nextSibling,f=0;u;){if(u.nodeType===8)if(p=u.data,p==="/$"){if(f===0){ga=pc(u.nextSibling);break e}f--}else p!=="$"&&p!=="$!"&&p!=="$?"||f++;u=u.nextSibling}ga=null}}else f===27?(f=ga,vd(u.type)?(u=tC,tC=null,ga=u):ga=f):ga=Ka?pc(u.stateNode.nextSibling):null;return!0}function $i(){ga=Ka=null,vn=!1}function s1(){var u=ru;return u!==null&&(go===null?go=u:go.push.apply(go,u),ru=null),u}function rd(u){ru===null?ru=[u]:ru.push(u)}var wl=ce(null),hs=null,cc=null;function nu(u,f,p){K(wl,f._currentValue),f._currentValue=p}function bl(u){u._currentValue=wl.current,j(wl)}function Yh(u,f,p){for(;u!==null;){var y=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,y!==null&&(y.childLanes|=f)):y!==null&&(y.childLanes&f)!==f&&(y.childLanes|=f),u===p)break;u=u.return}}function Xh(u,f,p,y){var R=u.child;for(R!==null&&(R.return=u);R!==null;){var H=R.dependencies;if(H!==null){var oe=R.child;H=H.firstContext;e:for(;H!==null;){var we=H;H=R;for(var Re=0;Re<f.length;Re++)if(we.context===f[Re]){H.lanes|=p,we=H.alternate,we!==null&&(we.lanes|=p),Yh(H.return,p,u),y||(oe=null);break e}H=we.next}}else if(R.tag===18){if(oe=R.return,oe===null)throw Error(n(341));oe.lanes|=p,H=oe.alternate,H!==null&&(H.lanes|=p),Yh(oe,p,u),oe=null}else oe=R.child;if(oe!==null)oe.return=R;else for(oe=R;oe!==null;){if(oe===u){oe=null;break}if(R=oe.sibling,R!==null){R.return=oe.return,oe=R;break}oe=oe.return}R=oe}}function nd(u,f,p,y){u=null;for(var R=f,H=!1;R!==null;){if(!H){if((R.flags&524288)!==0)H=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var oe=R.alternate;if(oe===null)throw Error(n(387));if(oe=oe.memoizedProps,oe!==null){var we=R.type;ds(R.pendingProps.value,oe.value)||(u!==null?u.push(we):u=[we])}}else if(R===de.current){if(oe=R.alternate,oe===null)throw Error(n(387));oe.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(u!==null?u.push(Up):u=[Up])}R=R.return}u!==null&&Xh(f,u,p,y),f.flags|=262144}function Jh(u){for(u=u.firstContext;u!==null;){if(!ds(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function Cl(u){hs=u,cc=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Wa(u){return Zh(hs,u)}function au(u,f){return hs===null&&Cl(u),Zh(u,f)}function Zh(u,f){var p=f._currentValue;if(f={context:f,memoizedValue:p,next:null},cc===null){if(u===null)throw Error(n(308));cc=f,u.dependencies={lanes:0,firstContext:f},u.flags|=524288}else cc=cc.next=f;return p}var ib=typeof AbortController<"u"?AbortController:function(){var u=[],f=this.signal={aborted:!1,addEventListener:function(p,y){u.push(y)}};this.abort=function(){f.aborted=!0,u.forEach(function(p){return p()})}},i1=t.unstable_scheduleCallback,ob=t.unstable_NormalPriority,$a={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sp(){return{controller:new ib,data:new Map,refCount:0}}function Rf(u){u.refCount--,u.refCount===0&&i1(ob,function(){u.controller.abort()})}var Df=null,ip=0,tA=0,uc=null;function lb(u,f){if(Df===null){var p=Df=[];ip=0,tA=Hb(),uc={status:"pending",value:void 0,then:function(y){p.push(y)}}}return ip++,f.then(o1,o1),f}function o1(){if(--ip===0&&Df!==null){uc!==null&&(uc.status="fulfilled");var u=Df;Df=null,tA=0,uc=null;for(var f=0;f<u.length;f++)(0,u[f])()}}function l1(u,f){var p=[],y={status:"pending",value:null,reason:null,then:function(R){p.push(R)}};return u.then(function(){y.status="fulfilled",y.value=f;for(var R=0;R<p.length;R++)(0,p[R])(f)},function(R){for(y.status="rejected",y.reason=R,R=0;R<p.length;R++)(0,p[R])(void 0)}),y}var E=Z.S;Z.S=function(u,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&lb(u,f),E!==null&&E(u,f)};var U=ce(null);function G(){var u=U.current;return u!==null?u:sa.pooledCache}function re(u,f){f===null?K(U,U.current):K(U,f.pool)}function ue(){var u=G();return u===null?null:{parent:$a._currentValue,pool:u}}var he=Error(n(460)),pe=Error(n(474)),ve=Error(n(542)),be={then:function(){}};function Be(u){return u=u.status,u==="fulfilled"||u==="rejected"}function Ue(){}function Ye(u,f,p){switch(p=u[p],p===void 0?u.push(f):p!==f&&(f.then(Ue,Ue),f=p),f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,gt(u),u;default:if(typeof f.status=="string")f.then(Ue,Ue);else{if(u=sa,u!==null&&100<u.shellSuspendCounter)throw Error(n(482));u=f,u.status="pending",u.then(function(y){if(f.status==="pending"){var R=f;R.status="fulfilled",R.value=y}},function(y){if(f.status==="pending"){var R=f;R.status="rejected",R.reason=y}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,gt(u),u}throw Ke=f,he}}var Ke=null;function Ve(){if(Ke===null)throw Error(n(459));var u=Ke;return Ke=null,u}function gt(u){if(u===he||u===ve)throw Error(n(483))}var st=!1;function Me(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function je(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function ct(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function vt(u,f,p){var y=u.updateQueue;if(y===null)return null;if(y=y.shared,(jn&2)!==0){var R=y.pending;return R===null?f.next=f:(f.next=R.next,R.next=f),y.pending=f,f=Yu(u),Kh(u,null,p),f}return Zc(u,y,f,p),Yu(u)}function ht(u,f,p){if(f=f.updateQueue,f!==null&&(f=f.shared,(p&4194048)!==0)){var y=f.lanes;y&=u.pendingLanes,p|=y,f.lanes=p,Qr(u,p)}}function Vt(u,f){var p=u.updateQueue,y=u.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var R=null,H=null;if(p=p.firstBaseUpdate,p!==null){do{var oe={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};H===null?R=H=oe:H=H.next=oe,p=p.next}while(p!==null);H===null?R=H=f:H=H.next=f}else R=H=f;p={baseState:y.baseState,firstBaseUpdate:R,lastBaseUpdate:H,shared:y.shared,callbacks:y.callbacks},u.updateQueue=p;return}u=p.lastBaseUpdate,u===null?p.firstBaseUpdate=f:u.next=f,p.lastBaseUpdate=f}var Lt=!1;function rr(){if(Lt){var u=uc;if(u!==null)throw u}}function Ot(u,f,p,y){Lt=!1;var R=u.updateQueue;st=!1;var H=R.firstBaseUpdate,oe=R.lastBaseUpdate,we=R.shared.pending;if(we!==null){R.shared.pending=null;var Re=we,et=Re.next;Re.next=null,oe===null?H=et:oe.next=et,oe=Re;var ft=u.alternate;ft!==null&&(ft=ft.updateQueue,we=ft.lastBaseUpdate,we!==oe&&(we===null?ft.firstBaseUpdate=et:we.next=et,ft.lastBaseUpdate=Re))}if(H!==null){var wt=R.baseState;oe=0,ft=et=Re=null,we=H;do{var nt=we.lane&-536870913,at=nt!==we.lane;if(at?(gn&nt)===nt:(y&nt)===nt){nt!==0&&nt===tA&&(Lt=!0),ft!==null&&(ft=ft.next={lane:0,tag:we.tag,payload:we.payload,callback:null,next:null});e:{var _r=u,mr=we;nt=f;var Xn=p;switch(mr.tag){case 1:if(_r=mr.payload,typeof _r=="function"){wt=_r.call(Xn,wt,nt);break e}wt=_r;break e;case 3:_r.flags=_r.flags&-65537|128;case 0:if(_r=mr.payload,nt=typeof _r=="function"?_r.call(Xn,wt,nt):_r,nt==null)break e;wt=d({},wt,nt);break e;case 2:st=!0}}nt=we.callback,nt!==null&&(u.flags|=64,at&&(u.flags|=8192),at=R.callbacks,at===null?R.callbacks=[nt]:at.push(nt))}else at={lane:nt,tag:we.tag,payload:we.payload,callback:we.callback,next:null},ft===null?(et=ft=at,Re=wt):ft=ft.next=at,oe|=nt;if(we=we.next,we===null){if(we=R.shared.pending,we===null)break;at=we,we=at.next,at.next=null,R.lastBaseUpdate=at,R.shared.pending=null}}while(!0);ft===null&&(Re=wt),R.baseState=Re,R.firstBaseUpdate=et,R.lastBaseUpdate=ft,H===null&&(R.shared.lanes=0),md|=oe,u.lanes=oe,u.memoizedState=wt}}function mn(u,f){if(typeof u!="function")throw Error(n(191,u));u.call(f)}function _n(u,f){var p=u.callbacks;if(p!==null)for(u.callbacks=null,u=0;u<p.length;u++)mn(p[u],f)}var Vr=ce(null),Pr=ce(0);function Rn(u,f){u=AA,K(Pr,u),K(Vr,f),AA=u|f.baseLanes}function Sn(){K(Pr,AA),K(Vr,Vr.current)}function Br(){AA=Pr.current,j(Vr),j(Pr)}var Pn=0,ur=null,yr=null,fn=null,pn=!1,ms=!1,Ya=!1,Ea=0,_a=0,Ua=null,mo=0;function Tn(){throw Error(n(321))}function Ma(u,f){if(f===null)return!1;for(var p=0;p<f.length&&p<u.length;p++)if(!ds(u[p],f[p]))return!1;return!0}function Oo(u,f,p,y,R,H){return Pn=H,ur=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Z.H=u===null||u.memoizedState===null?FT:RT,Ya=!1,H=p(y,R),Ya=!1,ms&&(H=rA(f,p,y,R)),su(u),H}function su(u){Z.H=y1;var f=yr!==null&&yr.next!==null;if(Pn=0,fn=yr=ur=null,pn=!1,_a=0,Ua=null,f)throw Error(n(300));u===null||Qs||(u=u.dependencies,u!==null&&Jh(u)&&(Qs=!0))}function rA(u,f,p,y){ur=u;var R=0;do{if(ms&&(Ua=null),_a=0,ms=!1,25<=R)throw Error(n(301));if(R+=1,fn=yr=null,u.updateQueue!=null){var H=u.updateQueue;H.lastEffect=null,H.events=null,H.stores=null,H.memoCache!=null&&(H.memoCache.index=0)}Z.H=QQ,H=f(p,y)}while(ms);return H}function iu(){var u=Z.H,f=u.useState()[0];return f=typeof f.then=="function"?ou(f):f,u=u.useState()[0],(yr!==null?yr.memoizedState:null)!==u&&(ur.flags|=1024),f}function aa(){var u=Ea!==0;return Ea=0,u}function Lf(u,f,p){f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~p}function e0(u){if(pn){for(u=u.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}pn=!1}Pn=0,fn=yr=ur=null,ms=!1,_a=Ea=0,Ua=null}function ei(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?ur.memoizedState=fn=u:fn=fn.next=u,fn}function la(){if(yr===null){var u=ur.alternate;u=u!==null?u.memoizedState:null}else u=yr.next;var f=fn===null?ur.memoizedState:fn.next;if(f!==null)fn=f,yr=u;else{if(u===null)throw ur.alternate===null?Error(n(467)):Error(n(310));yr=u,u={memoizedState:yr.memoizedState,baseState:yr.baseState,baseQueue:yr.baseQueue,queue:yr.queue,next:null},fn===null?ur.memoizedState=fn=u:fn=fn.next=u}return fn}function nA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ou(u){var f=_a;return _a+=1,Ua===null&&(Ua=[]),u=Ye(Ua,u,f),f=ur,(fn===null?f.memoizedState:fn.next)===null&&(f=f.alternate,Z.H=f===null||f.memoizedState===null?FT:RT),u}function bi(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return ou(u);if(u.$$typeof===I)return Wa(u)}throw Error(n(438,String(u)))}function lu(u){var f=null,p=ur.updateQueue;if(p!==null&&(f=p.memoCache),f==null){var y=ur.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(f={data:y.data.map(function(R){return R.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),p===null&&(p=nA(),ur.updateQueue=p),p.memoCache=f,p=f.data[f.index],p===void 0)for(p=f.data[f.index]=Array(u),y=0;y<u;y++)p[y]=O;return f.index++,p}function Ci(u,f){return typeof f=="function"?f(u):f}function Uf(u){var f=la();return ad(f,yr,u)}function ad(u,f,p){var y=u.queue;if(y===null)throw Error(n(311));y.lastRenderedReducer=p;var R=u.baseQueue,H=y.pending;if(H!==null){if(R!==null){var oe=R.next;R.next=H.next,H.next=oe}f.baseQueue=R=H,y.pending=null}if(H=u.baseState,R===null)u.memoizedState=H;else{f=R.next;var we=oe=null,Re=null,et=f,ft=!1;do{var wt=et.lane&-536870913;if(wt!==et.lane?(gn&wt)===wt:(Pn&wt)===wt){var nt=et.revertLane;if(nt===0)Re!==null&&(Re=Re.next={lane:0,revertLane:0,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),wt===tA&&(ft=!0);else if((Pn&nt)===nt){et=et.next,nt===tA&&(ft=!0);continue}else wt={lane:0,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},Re===null?(we=Re=wt,oe=H):Re=Re.next=wt,ur.lanes|=nt,md|=nt;wt=et.action,Ya&&p(H,wt),H=et.hasEagerState?et.eagerState:p(H,wt)}else nt={lane:wt,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},Re===null?(we=Re=nt,oe=H):Re=Re.next=nt,ur.lanes|=wt,md|=wt;et=et.next}while(et!==null&&et!==f);if(Re===null?oe=H:Re.next=we,!ds(H,u.memoizedState)&&(Qs=!0,ft&&(p=uc,p!==null)))throw p;u.memoizedState=H,u.baseState=oe,u.baseQueue=Re,y.lastRenderedState=H}return R===null&&(y.lanes=0),[u.memoizedState,y.dispatch]}function t0(u){var f=la(),p=f.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=u;var y=p.dispatch,R=p.pending,H=f.memoizedState;if(R!==null){p.pending=null;var oe=R=R.next;do H=u(H,oe.action),oe=oe.next;while(oe!==R);ds(H,f.memoizedState)||(Qs=!0),f.memoizedState=H,f.baseQueue===null&&(f.baseState=H),p.lastRenderedState=H}return[H,y]}function Mf(u,f,p){var y=ur,R=la(),H=vn;if(H){if(p===void 0)throw Error(n(407));p=p()}else p=f();var oe=!ds((yr||R).memoizedState,p);oe&&(R.memoizedState=p,Qs=!0),R=R.queue;var we=sd.bind(null,y,R,u);if(ld(2048,8,we,[u]),R.getSnapshot!==f||oe||fn!==null&&fn.memoizedState.tag&1){if(y.flags|=2048,dc(9,Qf(),Pf.bind(null,y,R,p,f),null),sa===null)throw Error(n(349));H||(Pn&124)!==0||r0(y,f,p)}return p}function r0(u,f,p){u.flags|=16384,u={getSnapshot:f,value:p},f=ur.updateQueue,f===null?(f=nA(),ur.updateQueue=f,f.stores=[u]):(p=f.stores,p===null?f.stores=[u]:p.push(u))}function Pf(u,f,p,y){f.value=p,f.getSnapshot=y,c1(f)&&u1(u)}function sd(u,f,p){return p(function(){c1(f)&&u1(u)})}function c1(u){var f=u.getSnapshot;u=u.value;try{var p=f();return!ds(u,p)}catch{return!0}}function u1(u){var f=nc(u,2);f!==null&&qo(f,u,2)}function jf(u){var f=ei();if(typeof u=="function"){var p=u;if(u=p(),Ya){Yt(!0);try{p()}finally{Yt(!1)}}}return f.memoizedState=f.baseState=u,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:u},f}function Ac(u,f,p,y){return u.baseState=p,ad(u,yr,typeof y=="function"?y:Ci)}function cb(u,f,p,y,R){if(v1(u))throw Error(n(485));if(u=f.action,u!==null){var H={payload:R,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(oe){H.listeners.push(oe)}};Z.T!==null?p(!0):H.isTransition=!1,y(H),p=f.pending,p===null?(H.next=f.pending=H,A1(f,H)):(H.next=p.next,f.pending=p.next=H)}}function A1(u,f){var p=f.action,y=f.payload,R=u.state;if(f.isTransition){var H=Z.T,oe={};Z.T=oe;try{var we=p(R,y),Re=Z.S;Re!==null&&Re(oe,we),d1(u,f,we)}catch(et){id(u,f,et)}finally{Z.T=H}}else try{H=p(R,y),d1(u,f,H)}catch(et){id(u,f,et)}}function d1(u,f,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){op(u,f,y)},function(y){return id(u,f,y)}):op(u,f,p)}function op(u,f,p){f.status="fulfilled",f.value=p,lp(f),u.state=p,f=u.pending,f!==null&&(p=f.next,p===f?u.pending=null:(p=p.next,f.next=p,A1(u,p)))}function id(u,f,p){var y=u.pending;if(u.pending=null,y!==null){y=y.next;do f.status="rejected",f.reason=p,lp(f),f=f.next;while(f!==y)}u.action=null}function lp(u){u=u.listeners;for(var f=0;f<u.length;f++)(0,u[f])()}function cp(u,f){return f}function Of(u,f){if(vn){var p=sa.formState;if(p!==null){e:{var y=ur;if(vn){if(ga){t:{for(var R=ga,H=yl;R.nodeType!==8;){if(!H){R=null;break t}if(R=pc(R.nextSibling),R===null){R=null;break t}}H=R.data,R=H==="F!"||H==="F"?R:null}if(R){ga=pc(R.nextSibling),y=R.data==="F!";break e}}eA(y)}y=!1}y&&(f=p[0])}}return p=ei(),p.memoizedState=p.baseState=f,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cp,lastRenderedState:f},p.queue=y,p=NT.bind(null,ur,y),y.dispatch=p,y=jf(!1),H=ub.bind(null,ur,!1,y.queue),y=ei(),R={state:f,dispatch:null,action:u,pending:null},y.queue=R,p=cb.bind(null,ur,R,H,p),R.dispatch=p,y.memoizedState=u,[f,p,!1]}function n0(u){var f=la();return od(f,yr,u)}function od(u,f,p){if(f=ad(u,f,cp)[0],u=Uf(Ci)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var y=ou(f)}catch(oe){throw oe===he?ve:oe}else y=f;f=la();var R=f.queue,H=R.dispatch;return p!==f.memoizedState&&(ur.flags|=2048,dc(9,Qf(),f1.bind(null,R,p),null)),[y,H,u]}function f1(u,f){u.action=f}function h1(u){var f=la(),p=yr;if(p!==null)return od(f,p,u);la(),f=f.memoizedState,p=la();var y=p.queue.dispatch;return p.memoizedState=u,[f,y,!1]}function dc(u,f,p,y){return u={tag:u,create:p,deps:y,inst:f,next:null},f=ur.updateQueue,f===null&&(f=nA(),ur.updateQueue=f),p=f.lastEffect,p===null?f.lastEffect=u.next=u:(y=p.next,p.next=u,u.next=y,f.lastEffect=u),u}function Qf(){return{destroy:void 0,resource:void 0}}function a0(){return la().memoizedState}function Qo(u,f,p,y){var R=ei();y=y===void 0?null:y,ur.flags|=u,R.memoizedState=dc(1|f,Qf(),p,y)}function ld(u,f,p,y){var R=la();y=y===void 0?null:y;var H=R.memoizedState.inst;yr!==null&&y!==null&&Ma(y,yr.memoizedState.deps)?R.memoizedState=dc(f,H,p,y):(ur.flags|=u,R.memoizedState=dc(1|f,H,p,y))}function up(u,f){Qo(8390656,8,u,f)}function m1(u,f){ld(2048,8,u,f)}function Ap(u,f){return ld(4,2,u,f)}function aA(u,f){return ld(4,4,u,f)}function p1(u,f){if(typeof f=="function"){u=u();var p=f(u);return function(){typeof p=="function"?p():f(null)}}if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function dp(u,f,p){p=p!=null?p.concat([u]):null,ld(4,4,p1.bind(null,f,u),p)}function fp(){}function hp(u,f){var p=la();f=f===void 0?null:f;var y=p.memoizedState;return f!==null&&Ma(f,y[1])?y[0]:(p.memoizedState=[u,f],u)}function g1(u,f){var p=la();f=f===void 0?null:f;var y=p.memoizedState;if(f!==null&&Ma(f,y[1]))return y[0];if(y=u(),Ya){Yt(!0);try{u()}finally{Yt(!1)}}return p.memoizedState=[y,f],y}function sA(u,f,p){return p===void 0||(Pn&1073741824)!==0?u.memoizedState=f:(u.memoizedState=p,u=_B(),ur.lanes|=u,md|=u,p)}function s0(u,f,p,y){return ds(p,f)?p:Vr.current!==null?(u=sA(u,p,y),ds(u,f)||(Qs=!0),u):(Pn&42)===0?(Qs=!0,u.memoizedState=p):(u=_B(),ur.lanes|=u,md|=u,f)}function Hf(u,f,p,y,R){var H=ee.p;ee.p=H!==0&&8>H?H:8;var oe=Z.T,we={};Z.T=we,ub(u,!1,f,p);try{var Re=R(),et=Z.S;if(et!==null&&et(we,Re),Re!==null&&typeof Re=="object"&&typeof Re.then=="function"){var ft=l1(Re,y);xp(u,f,ft,Go(u))}else xp(u,f,y,Go(u))}catch(wt){xp(u,f,{then:function(){},status:"rejected",reason:wt},Go())}finally{ee.p=H,Z.T=oe}}function fc(){}function El(u,f,p,y){if(u.tag!==5)throw Error(n(476));var R=hc(u).queue;Hf(u,R,f,ne,p===null?fc:function(){return Vf(u),p(y)})}function hc(u){var f=u.memoizedState;if(f!==null)return f;f={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:ne},next:null};var p={};return f.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:p},next:null},u.memoizedState=f,u=u.alternate,u!==null&&(u.memoizedState=f),f}function Vf(u){var f=hc(u).next.queue;xp(u,f,{},Go())}function zf(){return Wa(Up)}function mp(){return la().memoizedState}function x1(){return la().memoizedState}function pp(u){for(var f=u.return;f!==null;){switch(f.tag){case 24:case 3:var p=Go();u=ct(p);var y=vt(f,u,p);y!==null&&(qo(y,f,p),ht(y,f,p)),f={cache:sp()},u.payload=f;return}f=f.return}}function gp(u,f,p){var y=Go();p={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},v1(u)?kT(f,p):(p=eu(u,f,p,y),p!==null&&(qo(p,u,y),IT(p,f,y)))}function NT(u,f,p){var y=Go();xp(u,f,p,y)}function xp(u,f,p,y){var R={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(v1(u))kT(f,R);else{var H=u.alternate;if(u.lanes===0&&(H===null||H.lanes===0)&&(H=f.lastRenderedReducer,H!==null))try{var oe=f.lastRenderedState,we=H(oe,p);if(R.hasEagerState=!0,R.eagerState=we,ds(we,oe))return Zc(u,f,R,0),sa===null&&Ao(),!1}catch{}finally{}if(p=eu(u,f,R,y),p!==null)return qo(p,u,y),IT(p,f,y),!0}return!1}function ub(u,f,p,y){if(y={lane:2,revertLane:Hb(),action:y,hasEagerState:!1,eagerState:null,next:null},v1(u)){if(f)throw Error(n(479))}else f=eu(u,p,y,2),f!==null&&qo(f,u,2)}function v1(u){var f=u.alternate;return u===ur||f!==null&&f===ur}function kT(u,f){ms=pn=!0;var p=u.pending;p===null?f.next=f:(f.next=p.next,p.next=f),u.pending=f}function IT(u,f,p){if((p&4194048)!==0){var y=f.lanes;y&=u.pendingLanes,p|=y,f.lanes=p,Qr(u,p)}}var y1={readContext:Wa,use:bi,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useLayoutEffect:Tn,useInsertionEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useSyncExternalStore:Tn,useId:Tn,useHostTransitionStatus:Tn,useFormState:Tn,useActionState:Tn,useOptimistic:Tn,useMemoCache:Tn,useCacheRefresh:Tn},FT={readContext:Wa,use:bi,useCallback:function(u,f){return ei().memoizedState=[u,f===void 0?null:f],u},useContext:Wa,useEffect:up,useImperativeHandle:function(u,f,p){p=p!=null?p.concat([u]):null,Qo(4194308,4,p1.bind(null,f,u),p)},useLayoutEffect:function(u,f){return Qo(4194308,4,u,f)},useInsertionEffect:function(u,f){Qo(4,2,u,f)},useMemo:function(u,f){var p=ei();f=f===void 0?null:f;var y=u();if(Ya){Yt(!0);try{u()}finally{Yt(!1)}}return p.memoizedState=[y,f],y},useReducer:function(u,f,p){var y=ei();if(p!==void 0){var R=p(f);if(Ya){Yt(!0);try{p(f)}finally{Yt(!1)}}}else R=f;return y.memoizedState=y.baseState=R,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:R},y.queue=u,u=u.dispatch=gp.bind(null,ur,u),[y.memoizedState,u]},useRef:function(u){var f=ei();return u={current:u},f.memoizedState=u},useState:function(u){u=jf(u);var f=u.queue,p=NT.bind(null,ur,f);return f.dispatch=p,[u.memoizedState,p]},useDebugValue:fp,useDeferredValue:function(u,f){var p=ei();return sA(p,u,f)},useTransition:function(){var u=jf(!1);return u=Hf.bind(null,ur,u.queue,!0,!1),ei().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,f,p){var y=ur,R=ei();if(vn){if(p===void 0)throw Error(n(407));p=p()}else{if(p=f(),sa===null)throw Error(n(349));(gn&124)!==0||r0(y,f,p)}R.memoizedState=p;var H={value:p,getSnapshot:f};return R.queue=H,up(sd.bind(null,y,H,u),[u]),y.flags|=2048,dc(9,Qf(),Pf.bind(null,y,H,p,f),null),p},useId:function(){var u=ei(),f=sa.identifierPrefix;if(vn){var p=oc,y=ic;p=(y&~(1<<32-Mt(y)-1)).toString(32)+p,f="«"+f+"R"+p,p=Ea++,0<p&&(f+="H"+p.toString(32)),f+="»"}else p=mo++,f="«"+f+"r"+p.toString(32)+"»";return u.memoizedState=f},useHostTransitionStatus:zf,useFormState:Of,useActionState:Of,useOptimistic:function(u){var f=ei();f.memoizedState=f.baseState=u;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=p,f=ub.bind(null,ur,!0,p),p.dispatch=f,[u,f]},useMemoCache:lu,useCacheRefresh:function(){return ei().memoizedState=pp.bind(null,ur)}},RT={readContext:Wa,use:bi,useCallback:hp,useContext:Wa,useEffect:m1,useImperativeHandle:dp,useInsertionEffect:Ap,useLayoutEffect:aA,useMemo:g1,useReducer:Uf,useRef:a0,useState:function(){return Uf(Ci)},useDebugValue:fp,useDeferredValue:function(u,f){var p=la();return s0(p,yr.memoizedState,u,f)},useTransition:function(){var u=Uf(Ci)[0],f=la().memoizedState;return[typeof u=="boolean"?u:ou(u),f]},useSyncExternalStore:Mf,useId:mp,useHostTransitionStatus:zf,useFormState:n0,useActionState:n0,useOptimistic:function(u,f){var p=la();return Ac(p,yr,u,f)},useMemoCache:lu,useCacheRefresh:x1},QQ={readContext:Wa,use:bi,useCallback:hp,useContext:Wa,useEffect:m1,useImperativeHandle:dp,useInsertionEffect:Ap,useLayoutEffect:aA,useMemo:g1,useReducer:t0,useRef:a0,useState:function(){return t0(Ci)},useDebugValue:fp,useDeferredValue:function(u,f){var p=la();return yr===null?sA(p,u,f):s0(p,yr.memoizedState,u,f)},useTransition:function(){var u=t0(Ci)[0],f=la().memoizedState;return[typeof u=="boolean"?u:ou(u),f]},useSyncExternalStore:Mf,useId:mp,useHostTransitionStatus:zf,useFormState:h1,useActionState:h1,useOptimistic:function(u,f){var p=la();return yr!==null?Ac(p,yr,u,f):(p.baseState=u,[u,p.queue.dispatch])},useMemoCache:lu,useCacheRefresh:x1},i0=null,vp=0;function w1(u){var f=vp;return vp+=1,i0===null&&(i0=[]),Ye(i0,u,f)}function yp(u,f){f=f.props.ref,u.ref=f!==void 0?f:null}function b1(u,f){throw f.$$typeof===h?Error(n(525)):(u=Object.prototype.toString.call(f),Error(n(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u)))}function DT(u){var f=u._init;return f(u._payload)}function LT(u){function f(Ge,Pe){if(u){var $e=Ge.deletions;$e===null?(Ge.deletions=[Pe],Ge.flags|=16):$e.push(Pe)}}function p(Ge,Pe){if(!u)return null;for(;Pe!==null;)f(Ge,Pe),Pe=Pe.sibling;return null}function y(Ge){for(var Pe=new Map;Ge!==null;)Ge.key!==null?Pe.set(Ge.key,Ge):Pe.set(Ge.index,Ge),Ge=Ge.sibling;return Pe}function R(Ge,Pe){return Ge=vl(Ge,Pe),Ge.index=0,Ge.sibling=null,Ge}function H(Ge,Pe,$e){return Ge.index=$e,u?($e=Ge.alternate,$e!==null?($e=$e.index,$e<Pe?(Ge.flags|=67108866,Pe):$e):(Ge.flags|=67108866,Pe)):(Ge.flags|=1048576,Pe)}function oe(Ge){return u&&Ge.alternate===null&&(Ge.flags|=67108866),Ge}function we(Ge,Pe,$e,pt){return Pe===null||Pe.tag!==6?(Pe=Wh($e,Ge.mode,pt),Pe.return=Ge,Pe):(Pe=R(Pe,$e),Pe.return=Ge,Pe)}function Re(Ge,Pe,$e,pt){var Xt=$e.type;return Xt===b?ft(Ge,Pe,$e.props.children,pt,$e.key):Pe!==null&&(Pe.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===B&&DT(Xt)===Pe.type)?(Pe=R(Pe,$e.props),yp(Pe,$e),Pe.return=Ge,Pe):(Pe=Xu($e.type,$e.key,$e.props,null,Ge.mode,pt),yp(Pe,$e),Pe.return=Ge,Pe)}function et(Ge,Pe,$e,pt){return Pe===null||Pe.tag!==4||Pe.stateNode.containerInfo!==$e.containerInfo||Pe.stateNode.implementation!==$e.implementation?(Pe=kf($e,Ge.mode,pt),Pe.return=Ge,Pe):(Pe=R(Pe,$e.children||[]),Pe.return=Ge,Pe)}function ft(Ge,Pe,$e,pt,Xt){return Pe===null||Pe.tag!==7?(Pe=ac($e,Ge.mode,pt,Xt),Pe.return=Ge,Pe):(Pe=R(Pe,$e),Pe.return=Ge,Pe)}function wt(Ge,Pe,$e){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return Pe=Wh(""+Pe,Ge.mode,$e),Pe.return=Ge,Pe;if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case m:return $e=Xu(Pe.type,Pe.key,Pe.props,null,Ge.mode,$e),yp($e,Pe),$e.return=Ge,$e;case g:return Pe=kf(Pe,Ge.mode,$e),Pe.return=Ge,Pe;case B:var pt=Pe._init;return Pe=pt(Pe._payload),wt(Ge,Pe,$e)}if(ie(Pe)||L(Pe))return Pe=ac(Pe,Ge.mode,$e,null),Pe.return=Ge,Pe;if(typeof Pe.then=="function")return wt(Ge,w1(Pe),$e);if(Pe.$$typeof===I)return wt(Ge,au(Ge,Pe),$e);b1(Ge,Pe)}return null}function nt(Ge,Pe,$e,pt){var Xt=Pe!==null?Pe.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return Xt!==null?null:we(Ge,Pe,""+$e,pt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case m:return $e.key===Xt?Re(Ge,Pe,$e,pt):null;case g:return $e.key===Xt?et(Ge,Pe,$e,pt):null;case B:return Xt=$e._init,$e=Xt($e._payload),nt(Ge,Pe,$e,pt)}if(ie($e)||L($e))return Xt!==null?null:ft(Ge,Pe,$e,pt,null);if(typeof $e.then=="function")return nt(Ge,Pe,w1($e),pt);if($e.$$typeof===I)return nt(Ge,Pe,au(Ge,$e),pt);b1(Ge,$e)}return null}function at(Ge,Pe,$e,pt,Xt){if(typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint")return Ge=Ge.get($e)||null,we(Pe,Ge,""+pt,Xt);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case m:return Ge=Ge.get(pt.key===null?$e:pt.key)||null,Re(Pe,Ge,pt,Xt);case g:return Ge=Ge.get(pt.key===null?$e:pt.key)||null,et(Pe,Ge,pt,Xt);case B:var Xr=pt._init;return pt=Xr(pt._payload),at(Ge,Pe,$e,pt,Xt)}if(ie(pt)||L(pt))return Ge=Ge.get($e)||null,ft(Pe,Ge,pt,Xt,null);if(typeof pt.then=="function")return at(Ge,Pe,$e,w1(pt),Xt);if(pt.$$typeof===I)return at(Ge,Pe,$e,au(Pe,pt),Xt);b1(Pe,pt)}return null}function _r(Ge,Pe,$e,pt){for(var Xt=null,Xr=null,ar=Pe,gr=Pe=0,Vs=null;ar!==null&&gr<$e.length;gr++){ar.index>gr?(Vs=ar,ar=null):Vs=ar.sibling;var Bn=nt(Ge,ar,$e[gr],pt);if(Bn===null){ar===null&&(ar=Vs);break}u&&ar&&Bn.alternate===null&&f(Ge,ar),Pe=H(Bn,Pe,gr),Xr===null?Xt=Bn:Xr.sibling=Bn,Xr=Bn,ar=Vs}if(gr===$e.length)return p(Ge,ar),vn&&Zu(Ge,gr),Xt;if(ar===null){for(;gr<$e.length;gr++)ar=wt(Ge,$e[gr],pt),ar!==null&&(Pe=H(ar,Pe,gr),Xr===null?Xt=ar:Xr.sibling=ar,Xr=ar);return vn&&Zu(Ge,gr),Xt}for(ar=y(ar);gr<$e.length;gr++)Vs=at(ar,Ge,gr,$e[gr],pt),Vs!==null&&(u&&Vs.alternate!==null&&ar.delete(Vs.key===null?gr:Vs.key),Pe=H(Vs,Pe,gr),Xr===null?Xt=Vs:Xr.sibling=Vs,Xr=Vs);return u&&ar.forEach(function(Ed){return f(Ge,Ed)}),vn&&Zu(Ge,gr),Xt}function mr(Ge,Pe,$e,pt){if($e==null)throw Error(n(151));for(var Xt=null,Xr=null,ar=Pe,gr=Pe=0,Vs=null,Bn=$e.next();ar!==null&&!Bn.done;gr++,Bn=$e.next()){ar.index>gr?(Vs=ar,ar=null):Vs=ar.sibling;var Ed=nt(Ge,ar,Bn.value,pt);if(Ed===null){ar===null&&(ar=Vs);break}u&&ar&&Ed.alternate===null&&f(Ge,ar),Pe=H(Ed,Pe,gr),Xr===null?Xt=Ed:Xr.sibling=Ed,Xr=Ed,ar=Vs}if(Bn.done)return p(Ge,ar),vn&&Zu(Ge,gr),Xt;if(ar===null){for(;!Bn.done;gr++,Bn=$e.next())Bn=wt(Ge,Bn.value,pt),Bn!==null&&(Pe=H(Bn,Pe,gr),Xr===null?Xt=Bn:Xr.sibling=Bn,Xr=Bn);return vn&&Zu(Ge,gr),Xt}for(ar=y(ar);!Bn.done;gr++,Bn=$e.next())Bn=at(ar,Ge,gr,Bn.value,pt),Bn!==null&&(u&&Bn.alternate!==null&&ar.delete(Bn.key===null?gr:Bn.key),Pe=H(Bn,Pe,gr),Xr===null?Xt=Bn:Xr.sibling=Bn,Xr=Bn);return u&&ar.forEach(function(H9){return f(Ge,H9)}),vn&&Zu(Ge,gr),Xt}function Xn(Ge,Pe,$e,pt){if(typeof $e=="object"&&$e!==null&&$e.type===b&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case m:e:{for(var Xt=$e.key;Pe!==null;){if(Pe.key===Xt){if(Xt=$e.type,Xt===b){if(Pe.tag===7){p(Ge,Pe.sibling),pt=R(Pe,$e.props.children),pt.return=Ge,Ge=pt;break e}}else if(Pe.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===B&&DT(Xt)===Pe.type){p(Ge,Pe.sibling),pt=R(Pe,$e.props),yp(pt,$e),pt.return=Ge,Ge=pt;break e}p(Ge,Pe);break}else f(Ge,Pe);Pe=Pe.sibling}$e.type===b?(pt=ac($e.props.children,Ge.mode,pt,$e.key),pt.return=Ge,Ge=pt):(pt=Xu($e.type,$e.key,$e.props,null,Ge.mode,pt),yp(pt,$e),pt.return=Ge,Ge=pt)}return oe(Ge);case g:e:{for(Xt=$e.key;Pe!==null;){if(Pe.key===Xt)if(Pe.tag===4&&Pe.stateNode.containerInfo===$e.containerInfo&&Pe.stateNode.implementation===$e.implementation){p(Ge,Pe.sibling),pt=R(Pe,$e.children||[]),pt.return=Ge,Ge=pt;break e}else{p(Ge,Pe);break}else f(Ge,Pe);Pe=Pe.sibling}pt=kf($e,Ge.mode,pt),pt.return=Ge,Ge=pt}return oe(Ge);case B:return Xt=$e._init,$e=Xt($e._payload),Xn(Ge,Pe,$e,pt)}if(ie($e))return _r(Ge,Pe,$e,pt);if(L($e)){if(Xt=L($e),typeof Xt!="function")throw Error(n(150));return $e=Xt.call($e),mr(Ge,Pe,$e,pt)}if(typeof $e.then=="function")return Xn(Ge,Pe,w1($e),pt);if($e.$$typeof===I)return Xn(Ge,Pe,au(Ge,$e),pt);b1(Ge,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint"?($e=""+$e,Pe!==null&&Pe.tag===6?(p(Ge,Pe.sibling),pt=R(Pe,$e),pt.return=Ge,Ge=pt):(p(Ge,Pe),pt=Wh($e,Ge.mode,pt),pt.return=Ge,Ge=pt),oe(Ge)):p(Ge,Pe)}return function(Ge,Pe,$e,pt){try{vp=0;var Xt=Xn(Ge,Pe,$e,pt);return i0=null,Xt}catch(ar){if(ar===he||ar===ve)throw ar;var Xr=Os(29,ar,null,Ge.mode);return Xr.lanes=pt,Xr.return=Ge,Xr}finally{}}}var o0=LT(!0),UT=LT(!1),_l=ce(null),cu=null;function cd(u){var f=u.alternate;K(ks,ks.current&1),K(_l,u),cu===null&&(f===null||Vr.current!==null||f.memoizedState!==null)&&(cu=u)}function MT(u){if(u.tag===22){if(K(ks,ks.current),K(_l,u),cu===null){var f=u.alternate;f!==null&&f.memoizedState!==null&&(cu=u)}}else ud()}function ud(){K(ks,ks.current),K(_l,_l.current)}function iA(u){j(_l),cu===u&&(cu=null),j(ks)}var ks=ce(0);function C1(u){for(var f=u;f!==null;){if(f.tag===13){var p=f.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||eC(p)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function Ab(u,f,p,y){f=u.memoizedState,p=p(y,f),p=p==null?f:d({},f,p),u.memoizedState=p,u.lanes===0&&(u.updateQueue.baseState=p)}var db={enqueueSetState:function(u,f,p){u=u._reactInternals;var y=Go(),R=ct(y);R.payload=f,p!=null&&(R.callback=p),f=vt(u,R,y),f!==null&&(qo(f,u,y),ht(f,u,y))},enqueueReplaceState:function(u,f,p){u=u._reactInternals;var y=Go(),R=ct(y);R.tag=1,R.payload=f,p!=null&&(R.callback=p),f=vt(u,R,y),f!==null&&(qo(f,u,y),ht(f,u,y))},enqueueForceUpdate:function(u,f){u=u._reactInternals;var p=Go(),y=ct(p);y.tag=2,f!=null&&(y.callback=f),f=vt(u,y,p),f!==null&&(qo(f,u,p),ht(f,u,p))}};function PT(u,f,p,y,R,H,oe){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(y,H,oe):f.prototype&&f.prototype.isPureReactComponent?!qc(p,y)||!qc(R,H):!0}function jT(u,f,p,y){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(p,y),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(p,y),f.state!==u&&db.enqueueReplaceState(f,f.state,null)}function Gf(u,f){var p=f;if("ref"in f){p={};for(var y in f)y!=="ref"&&(p[y]=f[y])}if(u=u.defaultProps){p===f&&(p=d({},p));for(var R in u)p[R]===void 0&&(p[R]=u[R])}return p}var E1=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function OT(u){E1(u)}function QT(u){console.error(u)}function HT(u){E1(u)}function _1(u,f){try{var p=u.onUncaughtError;p(f.value,{componentStack:f.stack})}catch(y){setTimeout(function(){throw y})}}function VT(u,f,p){try{var y=u.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function fb(u,f,p){return p=ct(p),p.tag=3,p.payload={element:null},p.callback=function(){_1(u,f)},p}function zT(u){return u=ct(u),u.tag=3,u}function GT(u,f,p,y){var R=p.type.getDerivedStateFromError;if(typeof R=="function"){var H=y.value;u.payload=function(){return R(H)},u.callback=function(){VT(f,p,y)}}var oe=p.stateNode;oe!==null&&typeof oe.componentDidCatch=="function"&&(u.callback=function(){VT(f,p,y),typeof R!="function"&&(pd===null?pd=new Set([this]):pd.add(this));var we=y.stack;this.componentDidCatch(y.value,{componentStack:we!==null?we:""})})}function HQ(u,f,p,y,R){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(f=p.alternate,f!==null&&nd(f,p,R,!0),p=_l.current,p!==null){switch(p.tag){case 13:return cu===null?Mb():p.alternate===null&&Pa===0&&(Pa=3),p.flags&=-257,p.flags|=65536,p.lanes=R,y===be?p.flags|=16384:(f=p.updateQueue,f===null?p.updateQueue=new Set([y]):f.add(y),jb(u,y,R)),!1;case 22:return p.flags|=65536,y===be?p.flags|=16384:(f=p.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=f):(p=f.retryQueue,p===null?f.retryQueue=new Set([y]):p.add(y)),jb(u,y,R)),!1}throw Error(n(435,p.tag))}return jb(u,y,R),Mb(),!1}if(vn)return f=_l.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=R,y!==ap&&(u=Error(n(422),{cause:y}),rd(zr(u,p)))):(y!==ap&&(f=Error(n(423),{cause:y}),rd(zr(f,p))),u=u.current.alternate,u.flags|=65536,R&=-R,u.lanes|=R,y=zr(y,p),R=fb(u.stateNode,y,R),Vt(u,R),Pa!==4&&(Pa=2)),!1;var H=Error(n(520),{cause:y});if(H=zr(H,p),Tp===null?Tp=[H]:Tp.push(H),Pa!==4&&(Pa=2),f===null)return!0;y=zr(y,p),p=f;do{switch(p.tag){case 3:return p.flags|=65536,u=R&-R,p.lanes|=u,u=fb(p.stateNode,y,u),Vt(p,u),!1;case 1:if(f=p.type,H=p.stateNode,(p.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(pd===null||!pd.has(H))))return p.flags|=65536,R&=-R,p.lanes|=R,R=zT(R),GT(R,u,p,y),Vt(p,R),!1}p=p.return}while(p!==null);return!1}var qT=Error(n(461)),Qs=!1;function ti(u,f,p,y){f.child=u===null?UT(f,null,p,y):o0(f,u.child,p,y)}function KT(u,f,p,y,R){p=p.render;var H=f.ref;if("ref"in y){var oe={};for(var we in y)we!=="ref"&&(oe[we]=y[we])}else oe=y;return Cl(f),y=Oo(u,f,p,oe,H,R),we=aa(),u!==null&&!Qs?(Lf(u,f,R),oA(u,f,R)):(vn&&we&&If(f),f.flags|=1,ti(u,f,y,R),f.child)}function WT(u,f,p,y,R){if(u===null){var H=p.type;return typeof H=="function"&&!ed(H)&&H.defaultProps===void 0&&p.compare===null?(f.tag=15,f.type=H,$T(u,f,H,y,R)):(u=Xu(p.type,null,y,f,f.mode,R),u.ref=f.ref,u.return=f,f.child=u)}if(H=u.child,!wb(u,R)){var oe=H.memoizedProps;if(p=p.compare,p=p!==null?p:qc,p(oe,y)&&u.ref===f.ref)return oA(u,f,R)}return f.flags|=1,u=vl(H,y),u.ref=f.ref,u.return=f,f.child=u}function $T(u,f,p,y,R){if(u!==null){var H=u.memoizedProps;if(qc(H,y)&&u.ref===f.ref)if(Qs=!1,f.pendingProps=y=H,wb(u,R))(u.flags&131072)!==0&&(Qs=!0);else return f.lanes=u.lanes,oA(u,f,R)}return hb(u,f,p,y,R)}function YT(u,f,p){var y=f.pendingProps,R=y.children,H=u!==null?u.memoizedState:null;if(y.mode==="hidden"){if((f.flags&128)!==0){if(y=H!==null?H.baseLanes|p:p,u!==null){for(R=f.child=u.child,H=0;R!==null;)H=H|R.lanes|R.childLanes,R=R.sibling;f.childLanes=H&~y}else f.childLanes=0,f.child=null;return XT(u,f,y,p)}if((p&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},u!==null&&re(f,H!==null?H.cachePool:null),H!==null?Rn(f,H):Sn(),MT(f);else return f.lanes=f.childLanes=536870912,XT(u,f,H!==null?H.baseLanes|p:p,p)}else H!==null?(re(f,H.cachePool),Rn(f,H),ud(),f.memoizedState=null):(u!==null&&re(f,null),Sn(),ud());return ti(u,f,R,p),f.child}function XT(u,f,p,y){var R=G();return R=R===null?null:{parent:$a._currentValue,pool:R},f.memoizedState={baseLanes:p,cachePool:R},u!==null&&re(f,null),Sn(),MT(f),u!==null&&nd(u,f,y,!0),null}function S1(u,f){var p=f.ref;if(p===null)u!==null&&u.ref!==null&&(f.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(n(284));(u===null||u.ref!==p)&&(f.flags|=4194816)}}function hb(u,f,p,y,R){return Cl(f),p=Oo(u,f,p,y,void 0,R),y=aa(),u!==null&&!Qs?(Lf(u,f,R),oA(u,f,R)):(vn&&y&&If(f),f.flags|=1,ti(u,f,p,R),f.child)}function JT(u,f,p,y,R,H){return Cl(f),f.updateQueue=null,p=rA(f,y,p,R),su(u),y=aa(),u!==null&&!Qs?(Lf(u,f,H),oA(u,f,H)):(vn&&y&&If(f),f.flags|=1,ti(u,f,p,H),f.child)}function ZT(u,f,p,y,R){if(Cl(f),f.stateNode===null){var H=fs,oe=p.contextType;typeof oe=="object"&&oe!==null&&(H=Wa(oe)),H=new p(y,H),f.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,H.updater=db,f.stateNode=H,H._reactInternals=f,H=f.stateNode,H.props=y,H.state=f.memoizedState,H.refs={},Me(f),oe=p.contextType,H.context=typeof oe=="object"&&oe!==null?Wa(oe):fs,H.state=f.memoizedState,oe=p.getDerivedStateFromProps,typeof oe=="function"&&(Ab(f,p,oe,y),H.state=f.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(oe=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),oe!==H.state&&db.enqueueReplaceState(H,H.state,null),Ot(f,y,H,R),rr(),H.state=f.memoizedState),typeof H.componentDidMount=="function"&&(f.flags|=4194308),y=!0}else if(u===null){H=f.stateNode;var we=f.memoizedProps,Re=Gf(p,we);H.props=Re;var et=H.context,ft=p.contextType;oe=fs,typeof ft=="object"&&ft!==null&&(oe=Wa(ft));var wt=p.getDerivedStateFromProps;ft=typeof wt=="function"||typeof H.getSnapshotBeforeUpdate=="function",we=f.pendingProps!==we,ft||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(we||et!==oe)&&jT(f,H,y,oe),st=!1;var nt=f.memoizedState;H.state=nt,Ot(f,y,H,R),rr(),et=f.memoizedState,we||nt!==et||st?(typeof wt=="function"&&(Ab(f,p,wt,y),et=f.memoizedState),(Re=st||PT(f,p,Re,y,nt,et,oe))?(ft||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(f.flags|=4194308)):(typeof H.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=y,f.memoizedState=et),H.props=y,H.state=et,H.context=oe,y=Re):(typeof H.componentDidMount=="function"&&(f.flags|=4194308),y=!1)}else{H=f.stateNode,je(u,f),oe=f.memoizedProps,ft=Gf(p,oe),H.props=ft,wt=f.pendingProps,nt=H.context,et=p.contextType,Re=fs,typeof et=="object"&&et!==null&&(Re=Wa(et)),we=p.getDerivedStateFromProps,(et=typeof we=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(oe!==wt||nt!==Re)&&jT(f,H,y,Re),st=!1,nt=f.memoizedState,H.state=nt,Ot(f,y,H,R),rr();var at=f.memoizedState;oe!==wt||nt!==at||st||u!==null&&u.dependencies!==null&&Jh(u.dependencies)?(typeof we=="function"&&(Ab(f,p,we,y),at=f.memoizedState),(ft=st||PT(f,p,ft,y,nt,at,Re)||u!==null&&u.dependencies!==null&&Jh(u.dependencies))?(et||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(y,at,Re),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(y,at,Re)),typeof H.componentDidUpdate=="function"&&(f.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof H.componentDidUpdate!="function"||oe===u.memoizedProps&&nt===u.memoizedState||(f.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||oe===u.memoizedProps&&nt===u.memoizedState||(f.flags|=1024),f.memoizedProps=y,f.memoizedState=at),H.props=y,H.state=at,H.context=Re,y=ft):(typeof H.componentDidUpdate!="function"||oe===u.memoizedProps&&nt===u.memoizedState||(f.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||oe===u.memoizedProps&&nt===u.memoizedState||(f.flags|=1024),y=!1)}return H=y,S1(u,f),y=(f.flags&128)!==0,H||y?(H=f.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:H.render(),f.flags|=1,u!==null&&y?(f.child=o0(f,u.child,null,R),f.child=o0(f,null,p,R)):ti(u,f,p,R),f.memoizedState=H.state,u=f.child):u=oA(u,f,R),u}function eB(u,f,p,y){return $i(),f.flags|=256,ti(u,f,p,y),f.child}var mb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pb(u){return{baseLanes:u,cachePool:ue()}}function gb(u,f,p){return u=u!==null?u.childLanes&~p:0,f&&(u|=Sl),u}function tB(u,f,p){var y=f.pendingProps,R=!1,H=(f.flags&128)!==0,oe;if((oe=H)||(oe=u!==null&&u.memoizedState===null?!1:(ks.current&2)!==0),oe&&(R=!0,f.flags&=-129),oe=(f.flags&32)!==0,f.flags&=-33,u===null){if(vn){if(R?cd(f):ud(),vn){var we=ga,Re;if(Re=we){e:{for(Re=we,we=yl;Re.nodeType!==8;){if(!we){we=null;break e}if(Re=pc(Re.nextSibling),Re===null){we=null;break e}}we=Re}we!==null?(f.memoizedState={dehydrated:we,treeContext:Ju!==null?{id:ic,overflow:oc}:null,retryLane:536870912,hydrationErrors:null},Re=Os(18,null,null,0),Re.stateNode=we,Re.return=f,f.child=Re,Ka=f,ga=null,Re=!0):Re=!1}Re||eA(f)}if(we=f.memoizedState,we!==null&&(we=we.dehydrated,we!==null))return eC(we)?f.lanes=32:f.lanes=536870912,null;iA(f)}return we=y.children,y=y.fallback,R?(ud(),R=f.mode,we=T1({mode:"hidden",children:we},R),y=ac(y,R,p,null),we.return=f,y.return=f,we.sibling=y,f.child=we,R=f.child,R.memoizedState=pb(p),R.childLanes=gb(u,oe,p),f.memoizedState=mb,y):(cd(f),xb(f,we))}if(Re=u.memoizedState,Re!==null&&(we=Re.dehydrated,we!==null)){if(H)f.flags&256?(cd(f),f.flags&=-257,f=vb(u,f,p)):f.memoizedState!==null?(ud(),f.child=u.child,f.flags|=128,f=null):(ud(),R=y.fallback,we=f.mode,y=T1({mode:"visible",children:y.children},we),R=ac(R,we,p,null),R.flags|=2,y.return=f,R.return=f,y.sibling=R,f.child=y,o0(f,u.child,null,p),y=f.child,y.memoizedState=pb(p),y.childLanes=gb(u,oe,p),f.memoizedState=mb,f=R);else if(cd(f),eC(we)){if(oe=we.nextSibling&&we.nextSibling.dataset,oe)var et=oe.dgst;oe=et,y=Error(n(419)),y.stack="",y.digest=oe,rd({value:y,source:null,stack:null}),f=vb(u,f,p)}else if(Qs||nd(u,f,p,!1),oe=(p&u.childLanes)!==0,Qs||oe){if(oe=sa,oe!==null&&(y=p&-p,y=(y&42)!==0?1:cs(y),y=(y&(oe.suspendedLanes|p))!==0?0:y,y!==0&&y!==Re.retryLane))throw Re.retryLane=y,nc(u,y),qo(oe,u,y),qT;we.data==="$?"||Mb(),f=vb(u,f,p)}else we.data==="$?"?(f.flags|=192,f.child=u.child,f=null):(u=Re.treeContext,ga=pc(we.nextSibling),Ka=f,vn=!0,ru=null,yl=!1,u!==null&&(ho[Wi++]=ic,ho[Wi++]=oc,ho[Wi++]=Ju,ic=u.id,oc=u.overflow,Ju=f),f=xb(f,y.children),f.flags|=4096);return f}return R?(ud(),R=y.fallback,we=f.mode,Re=u.child,et=Re.sibling,y=vl(Re,{mode:"hidden",children:y.children}),y.subtreeFlags=Re.subtreeFlags&65011712,et!==null?R=vl(et,R):(R=ac(R,we,p,null),R.flags|=2),R.return=f,y.return=f,y.sibling=R,f.child=y,y=R,R=f.child,we=u.child.memoizedState,we===null?we=pb(p):(Re=we.cachePool,Re!==null?(et=$a._currentValue,Re=Re.parent!==et?{parent:et,pool:et}:Re):Re=ue(),we={baseLanes:we.baseLanes|p,cachePool:Re}),R.memoizedState=we,R.childLanes=gb(u,oe,p),f.memoizedState=mb,y):(cd(f),p=u.child,u=p.sibling,p=vl(p,{mode:"visible",children:y.children}),p.return=f,p.sibling=null,u!==null&&(oe=f.deletions,oe===null?(f.deletions=[u],f.flags|=16):oe.push(u)),f.child=p,f.memoizedState=null,p)}function xb(u,f){return f=T1({mode:"visible",children:f},u.mode),f.return=u,u.child=f}function T1(u,f){return u=Os(22,u,null,f),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function vb(u,f,p){return o0(f,u.child,null,p),u=xb(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function rB(u,f,p){u.lanes|=f;var y=u.alternate;y!==null&&(y.lanes|=f),Yh(u.return,f,p)}function yb(u,f,p,y,R){var H=u.memoizedState;H===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:R}:(H.isBackwards=f,H.rendering=null,H.renderingStartTime=0,H.last=y,H.tail=p,H.tailMode=R)}function nB(u,f,p){var y=f.pendingProps,R=y.revealOrder,H=y.tail;if(ti(u,f,y.children,p),y=ks.current,(y&2)!==0)y=y&1|2,f.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&rB(u,p,f);else if(u.tag===19)rB(u,p,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}y&=1}switch(K(ks,y),R){case"forwards":for(p=f.child,R=null;p!==null;)u=p.alternate,u!==null&&C1(u)===null&&(R=p),p=p.sibling;p=R,p===null?(R=f.child,f.child=null):(R=p.sibling,p.sibling=null),yb(f,!1,R,p,H);break;case"backwards":for(p=null,R=f.child,f.child=null;R!==null;){if(u=R.alternate,u!==null&&C1(u)===null){f.child=R;break}u=R.sibling,R.sibling=p,p=R,R=u}yb(f,!0,p,null,H);break;case"together":yb(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function oA(u,f,p){if(u!==null&&(f.dependencies=u.dependencies),md|=f.lanes,(p&f.childLanes)===0)if(u!==null){if(nd(u,f,p,!1),(p&f.childLanes)===0)return null}else return null;if(u!==null&&f.child!==u.child)throw Error(n(153));if(f.child!==null){for(u=f.child,p=vl(u,u.pendingProps),f.child=p,p.return=f;u.sibling!==null;)u=u.sibling,p=p.sibling=vl(u,u.pendingProps),p.return=f;p.sibling=null}return f.child}function wb(u,f){return(u.lanes&f)!==0?!0:(u=u.dependencies,!!(u!==null&&Jh(u)))}function VQ(u,f,p){switch(f.tag){case 3:me(f,f.stateNode.containerInfo),nu(f,$a,u.memoizedState.cache),$i();break;case 27:case 5:Se(f);break;case 4:me(f,f.stateNode.containerInfo);break;case 10:nu(f,f.type,f.memoizedProps.value);break;case 13:var y=f.memoizedState;if(y!==null)return y.dehydrated!==null?(cd(f),f.flags|=128,null):(p&f.child.childLanes)!==0?tB(u,f,p):(cd(f),u=oA(u,f,p),u!==null?u.sibling:null);cd(f);break;case 19:var R=(u.flags&128)!==0;if(y=(p&f.childLanes)!==0,y||(nd(u,f,p,!1),y=(p&f.childLanes)!==0),R){if(y)return nB(u,f,p);f.flags|=128}if(R=f.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),K(ks,ks.current),y)break;return null;case 22:case 23:return f.lanes=0,YT(u,f,p);case 24:nu(f,$a,u.memoizedState.cache)}return oA(u,f,p)}function aB(u,f,p){if(u!==null)if(u.memoizedProps!==f.pendingProps)Qs=!0;else{if(!wb(u,p)&&(f.flags&128)===0)return Qs=!1,VQ(u,f,p);Qs=(u.flags&131072)!==0}else Qs=!1,vn&&(f.flags&1048576)!==0&&n1(f,$h,f.index);switch(f.lanes=0,f.tag){case 16:e:{u=f.pendingProps;var y=f.elementType,R=y._init;if(y=R(y._payload),f.type=y,typeof y=="function")ed(y)?(u=Gf(y,u),f.tag=1,f=ZT(null,f,y,u,p)):(f.tag=0,f=hb(null,f,y,u,p));else{if(y!=null){if(R=y.$$typeof,R===P){f.tag=11,f=KT(null,f,y,u,p);break e}else if(R===C){f.tag=14,f=WT(null,f,y,u,p);break e}}throw f=q(y)||y,Error(n(306,f,""))}}return f;case 0:return hb(u,f,f.type,f.pendingProps,p);case 1:return y=f.type,R=Gf(y,f.pendingProps),ZT(u,f,y,R,p);case 3:e:{if(me(f,f.stateNode.containerInfo),u===null)throw Error(n(387));y=f.pendingProps;var H=f.memoizedState;R=H.element,je(u,f),Ot(f,y,null,p);var oe=f.memoizedState;if(y=oe.cache,nu(f,$a,y),y!==H.cache&&Xh(f,[$a],p,!0),rr(),y=oe.element,H.isDehydrated)if(H={element:y,isDehydrated:!1,cache:oe.cache},f.updateQueue.baseState=H,f.memoizedState=H,f.flags&256){f=eB(u,f,y,p);break e}else if(y!==R){R=zr(Error(n(424)),f),rd(R),f=eB(u,f,y,p);break e}else{switch(u=f.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(ga=pc(u.firstChild),Ka=f,vn=!0,ru=null,yl=!0,p=UT(f,null,y,p),f.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if($i(),y===R){f=oA(u,f,p);break e}ti(u,f,y,p)}f=f.child}return f;case 26:return S1(u,f),u===null?(p=lN(f.type,null,f.pendingProps,null))?f.memoizedState=p:vn||(p=f.type,u=f.pendingProps,y=Q1(le.current).createElement(p),y[An]=f,y[tn]=u,ni(y,p,u),Qe(y),f.stateNode=y):f.memoizedState=lN(f.type,u.memoizedProps,f.pendingProps,u.memoizedState),null;case 27:return Se(f),u===null&&vn&&(y=f.stateNode=sN(f.type,f.pendingProps,le.current),Ka=f,yl=!0,R=ga,vd(f.type)?(tC=R,ga=pc(y.firstChild)):ga=R),ti(u,f,f.pendingProps.children,p),S1(u,f),u===null&&(f.flags|=4194304),f.child;case 5:return u===null&&vn&&((R=y=ga)&&(y=g9(y,f.type,f.pendingProps,yl),y!==null?(f.stateNode=y,Ka=f,ga=pc(y.firstChild),yl=!1,R=!0):R=!1),R||eA(f)),Se(f),R=f.type,H=f.pendingProps,oe=u!==null?u.memoizedProps:null,y=H.children,Xb(R,H)?y=null:oe!==null&&Xb(R,oe)&&(f.flags|=32),f.memoizedState!==null&&(R=Oo(u,f,iu,null,null,p),Up._currentValue=R),S1(u,f),ti(u,f,y,p),f.child;case 6:return u===null&&vn&&((u=p=ga)&&(p=x9(p,f.pendingProps,yl),p!==null?(f.stateNode=p,Ka=f,ga=null,u=!0):u=!1),u||eA(f)),null;case 13:return tB(u,f,p);case 4:return me(f,f.stateNode.containerInfo),y=f.pendingProps,u===null?f.child=o0(f,null,y,p):ti(u,f,y,p),f.child;case 11:return KT(u,f,f.type,f.pendingProps,p);case 7:return ti(u,f,f.pendingProps,p),f.child;case 8:return ti(u,f,f.pendingProps.children,p),f.child;case 12:return ti(u,f,f.pendingProps.children,p),f.child;case 10:return y=f.pendingProps,nu(f,f.type,y.value),ti(u,f,y.children,p),f.child;case 9:return R=f.type._context,y=f.pendingProps.children,Cl(f),R=Wa(R),y=y(R),f.flags|=1,ti(u,f,y,p),f.child;case 14:return WT(u,f,f.type,f.pendingProps,p);case 15:return $T(u,f,f.type,f.pendingProps,p);case 19:return nB(u,f,p);case 31:return y=f.pendingProps,p=f.mode,y={mode:y.mode,children:y.children},u===null?(p=T1(y,p),p.ref=f.ref,f.child=p,p.return=f,f=p):(p=vl(u.child,y),p.ref=f.ref,f.child=p,p.return=f,f=p),f;case 22:return YT(u,f,p);case 24:return Cl(f),y=Wa($a),u===null?(R=G(),R===null&&(R=sa,H=sp(),R.pooledCache=H,H.refCount++,H!==null&&(R.pooledCacheLanes|=p),R=H),f.memoizedState={parent:y,cache:R},Me(f),nu(f,$a,R)):((u.lanes&p)!==0&&(je(u,f),Ot(f,null,null,p),rr()),R=u.memoizedState,H=f.memoizedState,R.parent!==y?(R={parent:y,cache:y},f.memoizedState=R,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=R),nu(f,$a,y)):(y=H.cache,nu(f,$a,y),y!==R.cache&&Xh(f,[$a],p,!0))),ti(u,f,f.pendingProps.children,p),f.child;case 29:throw f.pendingProps}throw Error(n(156,f.tag))}function lA(u){u.flags|=4}function sB(u,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!fN(f)){if(f=_l.current,f!==null&&((gn&4194048)===gn?cu!==null:(gn&62914560)!==gn&&(gn&536870912)===0||f!==cu))throw Ke=be,pe;u.flags|=8192}}function B1(u,f){f!==null&&(u.flags|=4),u.flags&16384&&(f=u.tag!==22?en():536870912,u.lanes|=f,A0|=f)}function wp(u,f){if(!vn)switch(u.tailMode){case"hidden":f=u.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?u.tail=null:p.sibling=null;break;case"collapsed":p=u.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:y.sibling=null}}function Sa(u){var f=u.alternate!==null&&u.alternate.child===u.child,p=0,y=0;if(f)for(var R=u.child;R!==null;)p|=R.lanes|R.childLanes,y|=R.subtreeFlags&65011712,y|=R.flags&65011712,R.return=u,R=R.sibling;else for(R=u.child;R!==null;)p|=R.lanes|R.childLanes,y|=R.subtreeFlags,y|=R.flags,R.return=u,R=R.sibling;return u.subtreeFlags|=y,u.childLanes=p,f}function zQ(u,f,p){var y=f.pendingProps;switch(Ff(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sa(f),null;case 1:return Sa(f),null;case 3:return p=f.stateNode,y=null,u!==null&&(y=u.memoizedState.cache),f.memoizedState.cache!==y&&(f.flags|=2048),bl($a),ge(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(u===null||u.child===null)&&(Zs(f)?lA(f):u===null||u.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,s1())),Sa(f),null;case 26:return p=f.memoizedState,u===null?(lA(f),p!==null?(Sa(f),sB(f,p)):(Sa(f),f.flags&=-16777217)):p?p!==u.memoizedState?(lA(f),Sa(f),sB(f,p)):(Sa(f),f.flags&=-16777217):(u.memoizedProps!==y&&lA(f),Sa(f),f.flags&=-16777217),null;case 27:xe(f),p=le.current;var R=f.type;if(u!==null&&f.stateNode!=null)u.memoizedProps!==y&&lA(f);else{if(!y){if(f.stateNode===null)throw Error(n(166));return Sa(f),null}u=X.current,Zs(f)?a1(f):(u=sN(R,y,p),f.stateNode=u,lA(f))}return Sa(f),null;case 5:if(xe(f),p=f.type,u!==null&&f.stateNode!=null)u.memoizedProps!==y&&lA(f);else{if(!y){if(f.stateNode===null)throw Error(n(166));return Sa(f),null}if(u=X.current,Zs(f))a1(f);else{switch(R=Q1(le.current),u){case 1:u=R.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:u=R.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":u=R.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":u=R.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":u=R.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof y.is=="string"?R.createElement("select",{is:y.is}):R.createElement("select"),y.multiple?u.multiple=!0:y.size&&(u.size=y.size);break;default:u=typeof y.is=="string"?R.createElement(p,{is:y.is}):R.createElement(p)}}u[An]=f,u[tn]=y;e:for(R=f.child;R!==null;){if(R.tag===5||R.tag===6)u.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===f)break e;for(;R.sibling===null;){if(R.return===null||R.return===f)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}f.stateNode=u;e:switch(ni(u,p,y),p){case"button":case"input":case"select":case"textarea":u=!!y.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&lA(f)}}return Sa(f),f.flags&=-16777217,null;case 6:if(u&&f.stateNode!=null)u.memoizedProps!==y&&lA(f);else{if(typeof y!="string"&&f.stateNode===null)throw Error(n(166));if(u=le.current,Zs(f)){if(u=f.stateNode,p=f.memoizedProps,y=null,R=Ka,R!==null)switch(R.tag){case 27:case 5:y=R.memoizedProps}u[An]=f,u=!!(u.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||JB(u.nodeValue,p)),u||eA(f)}else u=Q1(u).createTextNode(y),u[An]=f,f.stateNode=u}return Sa(f),null;case 13:if(y=f.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(R=Zs(f),y!==null&&y.dehydrated!==null){if(u===null){if(!R)throw Error(n(318));if(R=f.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(n(317));R[An]=f}else $i(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Sa(f),R=!1}else R=s1(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=R),R=!0;if(!R)return f.flags&256?(iA(f),f):(iA(f),null)}if(iA(f),(f.flags&128)!==0)return f.lanes=p,f;if(p=y!==null,u=u!==null&&u.memoizedState!==null,p){y=f.child,R=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(R=y.alternate.memoizedState.cachePool.pool);var H=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(H=y.memoizedState.cachePool.pool),H!==R&&(y.flags|=2048)}return p!==u&&p&&(f.child.flags|=8192),B1(f,f.updateQueue),Sa(f),null;case 4:return ge(),u===null&&qb(f.stateNode.containerInfo),Sa(f),null;case 10:return bl(f.type),Sa(f),null;case 19:if(j(ks),R=f.memoizedState,R===null)return Sa(f),null;if(y=(f.flags&128)!==0,H=R.rendering,H===null)if(y)wp(R,!1);else{if(Pa!==0||u!==null&&(u.flags&128)!==0)for(u=f.child;u!==null;){if(H=C1(u),H!==null){for(f.flags|=128,wp(R,!1),u=H.updateQueue,f.updateQueue=u,B1(f,u),f.subtreeFlags=0,u=p,p=f.child;p!==null;)Nf(p,u),p=p.sibling;return K(ks,ks.current&1|2),f.child}u=u.sibling}R.tail!==null&&ze()>I1&&(f.flags|=128,y=!0,wp(R,!1),f.lanes=4194304)}else{if(!y)if(u=C1(H),u!==null){if(f.flags|=128,y=!0,u=u.updateQueue,f.updateQueue=u,B1(f,u),wp(R,!0),R.tail===null&&R.tailMode==="hidden"&&!H.alternate&&!vn)return Sa(f),null}else 2*ze()-R.renderingStartTime>I1&&p!==536870912&&(f.flags|=128,y=!0,wp(R,!1),f.lanes=4194304);R.isBackwards?(H.sibling=f.child,f.child=H):(u=R.last,u!==null?u.sibling=H:f.child=H,R.last=H)}return R.tail!==null?(f=R.tail,R.rendering=f,R.tail=f.sibling,R.renderingStartTime=ze(),f.sibling=null,u=ks.current,K(ks,y?u&1|2:u&1),f):(Sa(f),null);case 22:case 23:return iA(f),Br(),y=f.memoizedState!==null,u!==null?u.memoizedState!==null!==y&&(f.flags|=8192):y&&(f.flags|=8192),y?(p&536870912)!==0&&(f.flags&128)===0&&(Sa(f),f.subtreeFlags&6&&(f.flags|=8192)):Sa(f),p=f.updateQueue,p!==null&&B1(f,p.retryQueue),p=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),y=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),y!==p&&(f.flags|=2048),u!==null&&j(U),null;case 24:return p=null,u!==null&&(p=u.memoizedState.cache),f.memoizedState.cache!==p&&(f.flags|=2048),bl($a),Sa(f),null;case 25:return null;case 30:return null}throw Error(n(156,f.tag))}function GQ(u,f){switch(Ff(f),f.tag){case 1:return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return bl($a),ge(),u=f.flags,(u&65536)!==0&&(u&128)===0?(f.flags=u&-65537|128,f):null;case 26:case 27:case 5:return xe(f),null;case 13:if(iA(f),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(n(340));$i()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return j(ks),null;case 4:return ge(),null;case 10:return bl(f.type),null;case 22:case 23:return iA(f),Br(),u!==null&&j(U),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 24:return bl($a),null;case 25:return null;default:return null}}function iB(u,f){switch(Ff(f),f.tag){case 3:bl($a),ge();break;case 26:case 27:case 5:xe(f);break;case 4:ge();break;case 13:iA(f);break;case 19:j(ks);break;case 10:bl(f.type);break;case 22:case 23:iA(f),Br(),u!==null&&j(U);break;case 24:bl($a)}}function bp(u,f){try{var p=f.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var R=y.next;p=R;do{if((p.tag&u)===u){y=void 0;var H=p.create,oe=p.inst;y=H(),oe.destroy=y}p=p.next}while(p!==R)}}catch(we){ta(f,f.return,we)}}function Ad(u,f,p){try{var y=f.updateQueue,R=y!==null?y.lastEffect:null;if(R!==null){var H=R.next;y=H;do{if((y.tag&u)===u){var oe=y.inst,we=oe.destroy;if(we!==void 0){oe.destroy=void 0,R=f;var Re=p,et=we;try{et()}catch(ft){ta(R,Re,ft)}}}y=y.next}while(y!==H)}}catch(ft){ta(f,f.return,ft)}}function oB(u){var f=u.updateQueue;if(f!==null){var p=u.stateNode;try{_n(f,p)}catch(y){ta(u,u.return,y)}}}function lB(u,f,p){p.props=Gf(u.type,u.memoizedProps),p.state=u.memoizedState;try{p.componentWillUnmount()}catch(y){ta(u,f,y)}}function Cp(u,f){try{var p=u.ref;if(p!==null){switch(u.tag){case 26:case 27:case 5:var y=u.stateNode;break;case 30:y=u.stateNode;break;default:y=u.stateNode}typeof p=="function"?u.refCleanup=p(y):p.current=y}}catch(R){ta(u,f,R)}}function uu(u,f){var p=u.ref,y=u.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(R){ta(u,f,R)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(R){ta(u,f,R)}else p.current=null}function cB(u){var f=u.type,p=u.memoizedProps,y=u.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break e;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(R){ta(u,u.return,R)}}function bb(u,f,p){try{var y=u.stateNode;d9(y,u.type,p,f),y[tn]=f}catch(R){ta(u,u.return,R)}}function uB(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&vd(u.type)||u.tag===4}function Cb(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||uB(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&vd(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Eb(u,f,p){var y=u.tag;if(y===5||y===6)u=u.stateNode,f?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(u,f):(f=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,f.appendChild(u),p=p._reactRootContainer,p!=null||f.onclick!==null||(f.onclick=O1));else if(y!==4&&(y===27&&vd(u.type)&&(p=u.stateNode,f=null),u=u.child,u!==null))for(Eb(u,f,p),u=u.sibling;u!==null;)Eb(u,f,p),u=u.sibling}function N1(u,f,p){var y=u.tag;if(y===5||y===6)u=u.stateNode,f?p.insertBefore(u,f):p.appendChild(u);else if(y!==4&&(y===27&&vd(u.type)&&(p=u.stateNode),u=u.child,u!==null))for(N1(u,f,p),u=u.sibling;u!==null;)N1(u,f,p),u=u.sibling}function AB(u){var f=u.stateNode,p=u.memoizedProps;try{for(var y=u.type,R=f.attributes;R.length;)f.removeAttributeNode(R[0]);ni(f,y,p),f[An]=u,f[tn]=p}catch(H){ta(u,u.return,H)}}var cA=!1,Xa=!1,_b=!1,dB=typeof WeakSet=="function"?WeakSet:Set,Hs=null;function qQ(u,f){if(u=u.containerInfo,$b=K1,u=Js(u),Ns(u)){if("selectionStart"in u)var p={start:u.selectionStart,end:u.selectionEnd};else e:{p=(p=u.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var R=y.anchorOffset,H=y.focusNode;y=y.focusOffset;try{p.nodeType,H.nodeType}catch{p=null;break e}var oe=0,we=-1,Re=-1,et=0,ft=0,wt=u,nt=null;t:for(;;){for(var at;wt!==p||R!==0&&wt.nodeType!==3||(we=oe+R),wt!==H||y!==0&&wt.nodeType!==3||(Re=oe+y),wt.nodeType===3&&(oe+=wt.nodeValue.length),(at=wt.firstChild)!==null;)nt=wt,wt=at;for(;;){if(wt===u)break t;if(nt===p&&++et===R&&(we=oe),nt===H&&++ft===y&&(Re=oe),(at=wt.nextSibling)!==null)break;wt=nt,nt=wt.parentNode}wt=at}p=we===-1||Re===-1?null:{start:we,end:Re}}else p=null}p=p||{start:0,end:0}}else p=null;for(Yb={focusedElem:u,selectionRange:p},K1=!1,Hs=f;Hs!==null;)if(f=Hs,u=f.child,(f.subtreeFlags&1024)!==0&&u!==null)u.return=f,Hs=u;else for(;Hs!==null;){switch(f=Hs,H=f.alternate,u=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&H!==null){u=void 0,p=f,R=H.memoizedProps,H=H.memoizedState,y=p.stateNode;try{var _r=Gf(p.type,R,p.elementType===p.type);u=y.getSnapshotBeforeUpdate(_r,H),y.__reactInternalSnapshotBeforeUpdate=u}catch(mr){ta(p,p.return,mr)}}break;case 3:if((u&1024)!==0){if(u=f.stateNode.containerInfo,p=u.nodeType,p===9)Zb(u);else if(p===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":Zb(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(n(163))}if(u=f.sibling,u!==null){u.return=f.return,Hs=u;break}Hs=f.return}}function fB(u,f,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:dd(u,p),y&4&&bp(5,p);break;case 1:if(dd(u,p),y&4)if(u=p.stateNode,f===null)try{u.componentDidMount()}catch(oe){ta(p,p.return,oe)}else{var R=Gf(p.type,f.memoizedProps);f=f.memoizedState;try{u.componentDidUpdate(R,f,u.__reactInternalSnapshotBeforeUpdate)}catch(oe){ta(p,p.return,oe)}}y&64&&oB(p),y&512&&Cp(p,p.return);break;case 3:if(dd(u,p),y&64&&(u=p.updateQueue,u!==null)){if(f=null,p.child!==null)switch(p.child.tag){case 27:case 5:f=p.child.stateNode;break;case 1:f=p.child.stateNode}try{_n(u,f)}catch(oe){ta(p,p.return,oe)}}break;case 27:f===null&&y&4&&AB(p);case 26:case 5:dd(u,p),f===null&&y&4&&cB(p),y&512&&Cp(p,p.return);break;case 12:dd(u,p);break;case 13:dd(u,p),y&4&&pB(u,p),y&64&&(u=p.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(p=t9.bind(null,p),v9(u,p))));break;case 22:if(y=p.memoizedState!==null||cA,!y){f=f!==null&&f.memoizedState!==null||Xa,R=cA;var H=Xa;cA=y,(Xa=f)&&!H?fd(u,p,(p.subtreeFlags&8772)!==0):dd(u,p),cA=R,Xa=H}break;case 30:break;default:dd(u,p)}}function hB(u){var f=u.alternate;f!==null&&(u.alternate=null,hB(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&_e(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var xa=null,po=!1;function uA(u,f,p){for(p=p.child;p!==null;)mB(u,f,p),p=p.sibling}function mB(u,f,p){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(Ut,p)}catch{}switch(p.tag){case 26:Xa||uu(p,f),uA(u,f,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Xa||uu(p,f);var y=xa,R=po;vd(p.type)&&(xa=p.stateNode,po=!1),uA(u,f,p),Fp(p.stateNode),xa=y,po=R;break;case 5:Xa||uu(p,f);case 6:if(y=xa,R=po,xa=null,uA(u,f,p),xa=y,po=R,xa!==null)if(po)try{(xa.nodeType===9?xa.body:xa.nodeName==="HTML"?xa.ownerDocument.body:xa).removeChild(p.stateNode)}catch(H){ta(p,f,H)}else try{xa.removeChild(p.stateNode)}catch(H){ta(p,f,H)}break;case 18:xa!==null&&(po?(u=xa,nN(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,p.stateNode),Op(u)):nN(xa,p.stateNode));break;case 4:y=xa,R=po,xa=p.stateNode.containerInfo,po=!0,uA(u,f,p),xa=y,po=R;break;case 0:case 11:case 14:case 15:Xa||Ad(2,p,f),Xa||Ad(4,p,f),uA(u,f,p);break;case 1:Xa||(uu(p,f),y=p.stateNode,typeof y.componentWillUnmount=="function"&&lB(p,f,y)),uA(u,f,p);break;case 21:uA(u,f,p);break;case 22:Xa=(y=Xa)||p.memoizedState!==null,uA(u,f,p),Xa=y;break;default:uA(u,f,p)}}function pB(u,f){if(f.memoizedState===null&&(u=f.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Op(u)}catch(p){ta(f,f.return,p)}}function KQ(u){switch(u.tag){case 13:case 19:var f=u.stateNode;return f===null&&(f=u.stateNode=new dB),f;case 22:return u=u.stateNode,f=u._retryCache,f===null&&(f=u._retryCache=new dB),f;default:throw Error(n(435,u.tag))}}function Sb(u,f){var p=KQ(u);f.forEach(function(y){var R=r9.bind(null,u,y);p.has(y)||(p.add(y),y.then(R,R))})}function Ho(u,f){var p=f.deletions;if(p!==null)for(var y=0;y<p.length;y++){var R=p[y],H=u,oe=f,we=oe;e:for(;we!==null;){switch(we.tag){case 27:if(vd(we.type)){xa=we.stateNode,po=!1;break e}break;case 5:xa=we.stateNode,po=!1;break e;case 3:case 4:xa=we.stateNode.containerInfo,po=!0;break e}we=we.return}if(xa===null)throw Error(n(160));mB(H,oe,R),xa=null,po=!1,H=R.alternate,H!==null&&(H.return=null),R.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)gB(f,u),f=f.sibling}var mc=null;function gB(u,f){var p=u.alternate,y=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Ho(f,u),Vo(u),y&4&&(Ad(3,u,u.return),bp(3,u),Ad(5,u,u.return));break;case 1:Ho(f,u),Vo(u),y&512&&(Xa||p===null||uu(p,p.return)),y&64&&cA&&(u=u.updateQueue,u!==null&&(y=u.callbacks,y!==null&&(p=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var R=mc;if(Ho(f,u),Vo(u),y&512&&(Xa||p===null||uu(p,p.return)),y&4){var H=p!==null?p.memoizedState:null;if(y=u.memoizedState,p===null)if(y===null)if(u.stateNode===null){e:{y=u.type,p=u.memoizedProps,R=R.ownerDocument||R;t:switch(y){case"title":H=R.getElementsByTagName("title")[0],(!H||H[Ee]||H[An]||H.namespaceURI==="http://www.w3.org/2000/svg"||H.hasAttribute("itemprop"))&&(H=R.createElement(y),R.head.insertBefore(H,R.querySelector("head > title"))),ni(H,y,p),H[An]=u,Qe(H),y=H;break e;case"link":var oe=AN("link","href",R).get(y+(p.href||""));if(oe){for(var we=0;we<oe.length;we++)if(H=oe[we],H.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&H.getAttribute("rel")===(p.rel==null?null:p.rel)&&H.getAttribute("title")===(p.title==null?null:p.title)&&H.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){oe.splice(we,1);break t}}H=R.createElement(y),ni(H,y,p),R.head.appendChild(H);break;case"meta":if(oe=AN("meta","content",R).get(y+(p.content||""))){for(we=0;we<oe.length;we++)if(H=oe[we],H.getAttribute("content")===(p.content==null?null:""+p.content)&&H.getAttribute("name")===(p.name==null?null:p.name)&&H.getAttribute("property")===(p.property==null?null:p.property)&&H.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&H.getAttribute("charset")===(p.charSet==null?null:p.charSet)){oe.splice(we,1);break t}}H=R.createElement(y),ni(H,y,p),R.head.appendChild(H);break;default:throw Error(n(468,y))}H[An]=u,Qe(H),y=H}u.stateNode=y}else dN(R,u.type,u.stateNode);else u.stateNode=uN(R,y,u.memoizedProps);else H!==y?(H===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):H.count--,y===null?dN(R,u.type,u.stateNode):uN(R,y,u.memoizedProps)):y===null&&u.stateNode!==null&&bb(u,u.memoizedProps,p.memoizedProps)}break;case 27:Ho(f,u),Vo(u),y&512&&(Xa||p===null||uu(p,p.return)),p!==null&&y&4&&bb(u,u.memoizedProps,p.memoizedProps);break;case 5:if(Ho(f,u),Vo(u),y&512&&(Xa||p===null||uu(p,p.return)),u.flags&32){R=u.stateNode;try{hi(R,"")}catch(at){ta(u,u.return,at)}}y&4&&u.stateNode!=null&&(R=u.memoizedProps,bb(u,R,p!==null?p.memoizedProps:R)),y&1024&&(_b=!0);break;case 6:if(Ho(f,u),Vo(u),y&4){if(u.stateNode===null)throw Error(n(162));y=u.memoizedProps,p=u.stateNode;try{p.nodeValue=y}catch(at){ta(u,u.return,at)}}break;case 3:if(z1=null,R=mc,mc=H1(f.containerInfo),Ho(f,u),mc=R,Vo(u),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Op(f.containerInfo)}catch(at){ta(u,u.return,at)}_b&&(_b=!1,xB(u));break;case 4:y=mc,mc=H1(u.stateNode.containerInfo),Ho(f,u),Vo(u),mc=y;break;case 12:Ho(f,u),Vo(u);break;case 13:Ho(f,u),Vo(u),u.child.flags&8192&&u.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Fb=ze()),y&4&&(y=u.updateQueue,y!==null&&(u.updateQueue=null,Sb(u,y)));break;case 22:R=u.memoizedState!==null;var Re=p!==null&&p.memoizedState!==null,et=cA,ft=Xa;if(cA=et||R,Xa=ft||Re,Ho(f,u),Xa=ft,cA=et,Vo(u),y&8192)e:for(f=u.stateNode,f._visibility=R?f._visibility&-2:f._visibility|1,R&&(p===null||Re||cA||Xa||qf(u)),p=null,f=u;;){if(f.tag===5||f.tag===26){if(p===null){Re=p=f;try{if(H=Re.stateNode,R)oe=H.style,typeof oe.setProperty=="function"?oe.setProperty("display","none","important"):oe.display="none";else{we=Re.stateNode;var wt=Re.memoizedProps.style,nt=wt!=null&&wt.hasOwnProperty("display")?wt.display:null;we.style.display=nt==null||typeof nt=="boolean"?"":(""+nt).trim()}}catch(at){ta(Re,Re.return,at)}}}else if(f.tag===6){if(p===null){Re=f;try{Re.stateNode.nodeValue=R?"":Re.memoizedProps}catch(at){ta(Re,Re.return,at)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===u)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break e;for(;f.sibling===null;){if(f.return===null||f.return===u)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}y&4&&(y=u.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,Sb(u,p))));break;case 19:Ho(f,u),Vo(u),y&4&&(y=u.updateQueue,y!==null&&(u.updateQueue=null,Sb(u,y)));break;case 30:break;case 21:break;default:Ho(f,u),Vo(u)}}function Vo(u){var f=u.flags;if(f&2){try{for(var p,y=u.return;y!==null;){if(uB(y)){p=y;break}y=y.return}if(p==null)throw Error(n(160));switch(p.tag){case 27:var R=p.stateNode,H=Cb(u);N1(u,H,R);break;case 5:var oe=p.stateNode;p.flags&32&&(hi(oe,""),p.flags&=-33);var we=Cb(u);N1(u,we,oe);break;case 3:case 4:var Re=p.stateNode.containerInfo,et=Cb(u);Eb(u,et,Re);break;default:throw Error(n(161))}}catch(ft){ta(u,u.return,ft)}u.flags&=-3}f&4096&&(u.flags&=-4097)}function xB(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var f=u;xB(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),u=u.sibling}}function dd(u,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)fB(u,f.alternate,f),f=f.sibling}function qf(u){for(u=u.child;u!==null;){var f=u;switch(f.tag){case 0:case 11:case 14:case 15:Ad(4,f,f.return),qf(f);break;case 1:uu(f,f.return);var p=f.stateNode;typeof p.componentWillUnmount=="function"&&lB(f,f.return,p),qf(f);break;case 27:Fp(f.stateNode);case 26:case 5:uu(f,f.return),qf(f);break;case 22:f.memoizedState===null&&qf(f);break;case 30:qf(f);break;default:qf(f)}u=u.sibling}}function fd(u,f,p){for(p=p&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var y=f.alternate,R=u,H=f,oe=H.flags;switch(H.tag){case 0:case 11:case 15:fd(R,H,p),bp(4,H);break;case 1:if(fd(R,H,p),y=H,R=y.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(et){ta(y,y.return,et)}if(y=H,R=y.updateQueue,R!==null){var we=y.stateNode;try{var Re=R.shared.hiddenCallbacks;if(Re!==null)for(R.shared.hiddenCallbacks=null,R=0;R<Re.length;R++)mn(Re[R],we)}catch(et){ta(y,y.return,et)}}p&&oe&64&&oB(H),Cp(H,H.return);break;case 27:AB(H);case 26:case 5:fd(R,H,p),p&&y===null&&oe&4&&cB(H),Cp(H,H.return);break;case 12:fd(R,H,p);break;case 13:fd(R,H,p),p&&oe&4&&pB(R,H);break;case 22:H.memoizedState===null&&fd(R,H,p),Cp(H,H.return);break;case 30:break;default:fd(R,H,p)}f=f.sibling}}function Tb(u,f){var p=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),u=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(u=f.memoizedState.cachePool.pool),u!==p&&(u!=null&&u.refCount++,p!=null&&Rf(p))}function Bb(u,f){u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Rf(u))}function Au(u,f,p,y){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)vB(u,f,p,y),f=f.sibling}function vB(u,f,p,y){var R=f.flags;switch(f.tag){case 0:case 11:case 15:Au(u,f,p,y),R&2048&&bp(9,f);break;case 1:Au(u,f,p,y);break;case 3:Au(u,f,p,y),R&2048&&(u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Rf(u)));break;case 12:if(R&2048){Au(u,f,p,y),u=f.stateNode;try{var H=f.memoizedProps,oe=H.id,we=H.onPostCommit;typeof we=="function"&&we(oe,f.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(Re){ta(f,f.return,Re)}}else Au(u,f,p,y);break;case 13:Au(u,f,p,y);break;case 23:break;case 22:H=f.stateNode,oe=f.alternate,f.memoizedState!==null?H._visibility&2?Au(u,f,p,y):Ep(u,f):H._visibility&2?Au(u,f,p,y):(H._visibility|=2,l0(u,f,p,y,(f.subtreeFlags&10256)!==0)),R&2048&&Tb(oe,f);break;case 24:Au(u,f,p,y),R&2048&&Bb(f.alternate,f);break;default:Au(u,f,p,y)}}function l0(u,f,p,y,R){for(R=R&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var H=u,oe=f,we=p,Re=y,et=oe.flags;switch(oe.tag){case 0:case 11:case 15:l0(H,oe,we,Re,R),bp(8,oe);break;case 23:break;case 22:var ft=oe.stateNode;oe.memoizedState!==null?ft._visibility&2?l0(H,oe,we,Re,R):Ep(H,oe):(ft._visibility|=2,l0(H,oe,we,Re,R)),R&&et&2048&&Tb(oe.alternate,oe);break;case 24:l0(H,oe,we,Re,R),R&&et&2048&&Bb(oe.alternate,oe);break;default:l0(H,oe,we,Re,R)}f=f.sibling}}function Ep(u,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var p=u,y=f,R=y.flags;switch(y.tag){case 22:Ep(p,y),R&2048&&Tb(y.alternate,y);break;case 24:Ep(p,y),R&2048&&Bb(y.alternate,y);break;default:Ep(p,y)}f=f.sibling}}var _p=8192;function c0(u){if(u.subtreeFlags&_p)for(u=u.child;u!==null;)yB(u),u=u.sibling}function yB(u){switch(u.tag){case 26:c0(u),u.flags&_p&&u.memoizedState!==null&&F9(mc,u.memoizedState,u.memoizedProps);break;case 5:c0(u);break;case 3:case 4:var f=mc;mc=H1(u.stateNode.containerInfo),c0(u),mc=f;break;case 22:u.memoizedState===null&&(f=u.alternate,f!==null&&f.memoizedState!==null?(f=_p,_p=16777216,c0(u),_p=f):c0(u));break;default:c0(u)}}function wB(u){var f=u.alternate;if(f!==null&&(u=f.child,u!==null)){f.child=null;do f=u.sibling,u.sibling=null,u=f;while(u!==null)}}function Sp(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var p=0;p<f.length;p++){var y=f[p];Hs=y,CB(y,u)}wB(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)bB(u),u=u.sibling}function bB(u){switch(u.tag){case 0:case 11:case 15:Sp(u),u.flags&2048&&Ad(9,u,u.return);break;case 3:Sp(u);break;case 12:Sp(u);break;case 22:var f=u.stateNode;u.memoizedState!==null&&f._visibility&2&&(u.return===null||u.return.tag!==13)?(f._visibility&=-3,k1(u)):Sp(u);break;default:Sp(u)}}function k1(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var p=0;p<f.length;p++){var y=f[p];Hs=y,CB(y,u)}wB(u)}for(u=u.child;u!==null;){switch(f=u,f.tag){case 0:case 11:case 15:Ad(8,f,f.return),k1(f);break;case 22:p=f.stateNode,p._visibility&2&&(p._visibility&=-3,k1(f));break;default:k1(f)}u=u.sibling}}function CB(u,f){for(;Hs!==null;){var p=Hs;switch(p.tag){case 0:case 11:case 15:Ad(8,p,f);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Rf(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,Hs=y;else e:for(p=u;Hs!==null;){y=Hs;var R=y.sibling,H=y.return;if(hB(y),y===p){Hs=null;break e}if(R!==null){R.return=H,Hs=R;break e}Hs=H}}}var WQ={getCacheForType:function(u){var f=Wa($a),p=f.data.get(u);return p===void 0&&(p=u(),f.data.set(u,p)),p}},$Q=typeof WeakMap=="function"?WeakMap:Map,jn=0,sa=null,rn=null,gn=0,On=0,zo=null,hd=!1,u0=!1,Nb=!1,AA=0,Pa=0,md=0,Kf=0,kb=0,Sl=0,A0=0,Tp=null,go=null,Ib=!1,Fb=0,I1=1/0,F1=null,pd=null,ri=0,gd=null,d0=null,f0=0,Rb=0,Db=null,EB=null,Bp=0,Lb=null;function Go(){if((jn&2)!==0&&gn!==0)return gn&-gn;if(Z.T!==null){var u=tA;return u!==0?u:Hb()}return wa()}function _B(){Sl===0&&(Sl=(gn&536870912)===0||vn?ls():536870912);var u=_l.current;return u!==null&&(u.flags|=32),Sl}function qo(u,f,p){(u===sa&&(On===2||On===9)||u.cancelPendingCommit!==null)&&(h0(u,0),xd(u,gn,Sl,!1)),ha(u,p),((jn&2)===0||u!==sa)&&(u===sa&&((jn&2)===0&&(Kf|=p),Pa===4&&xd(u,gn,Sl,!1)),du(u))}function SB(u,f,p){if((jn&6)!==0)throw Error(n(327));var y=!p&&(f&124)===0&&(f&u.expiredLanes)===0||kn(u,f),R=y?JQ(u,f):Pb(u,f,!0),H=y;do{if(R===0){u0&&!y&&xd(u,f,0,!1);break}else{if(p=u.current.alternate,H&&!YQ(p)){R=Pb(u,f,!1),H=!1;continue}if(R===2){if(H=f,u.errorRecoveryDisabledLanes&H)var oe=0;else oe=u.pendingLanes&-536870913,oe=oe!==0?oe:oe&536870912?536870912:0;if(oe!==0){f=oe;e:{var we=u;R=Tp;var Re=we.current.memoizedState.isDehydrated;if(Re&&(h0(we,oe).flags|=256),oe=Pb(we,oe,!1),oe!==2){if(Nb&&!Re){we.errorRecoveryDisabledLanes|=H,Kf|=H,R=4;break e}H=go,go=R,H!==null&&(go===null?go=H:go.push.apply(go,H))}R=oe}if(H=!1,R!==2)continue}}if(R===1){h0(u,0),xd(u,f,0,!0);break}e:{switch(y=u,H=R,H){case 0:case 1:throw Error(n(345));case 4:if((f&4194048)!==f)break;case 6:xd(y,f,Sl,!hd);break e;case 2:go=null;break;case 3:case 5:break;default:throw Error(n(329))}if((f&62914560)===f&&(R=Fb+300-ze(),10<R)){if(xd(y,f,Sl,!hd),Rr(y,0,!0)!==0)break e;y.timeoutHandle=tN(TB.bind(null,y,p,go,F1,Ib,f,Sl,Kf,A0,hd,H,2,-0,0),R);break e}TB(y,p,go,F1,Ib,f,Sl,Kf,A0,hd,H,0,-0,0)}}break}while(!0);du(u)}function TB(u,f,p,y,R,H,oe,we,Re,et,ft,wt,nt,at){if(u.timeoutHandle=-1,wt=f.subtreeFlags,(wt&8192||(wt&16785408)===16785408)&&(Lp={stylesheets:null,count:0,unsuspend:I9},yB(f),wt=R9(),wt!==null)){u.cancelPendingCommit=wt(DB.bind(null,u,f,H,p,y,R,oe,we,Re,ft,1,nt,at)),xd(u,H,oe,!et);return}DB(u,f,H,p,y,R,oe,we,Re)}function YQ(u){for(var f=u;;){var p=f.tag;if((p===0||p===11||p===15)&&f.flags&16384&&(p=f.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var R=p[y],H=R.getSnapshot;R=R.value;try{if(!ds(H(),R))return!1}catch{return!1}}if(p=f.child,f.subtreeFlags&16384&&p!==null)p.return=f,f=p;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function xd(u,f,p,y){f&=~kb,f&=~Kf,u.suspendedLanes|=f,u.pingedLanes&=~f,y&&(u.warmLanes|=f),y=u.expirationTimes;for(var R=f;0<R;){var H=31-Mt(R),oe=1<<H;y[H]=-1,R&=~oe}p!==0&&tr(u,p,f)}function R1(){return(jn&6)===0?(Np(0),!1):!0}function Ub(){if(rn!==null){if(On===0)var u=rn.return;else u=rn,cc=hs=null,e0(u),i0=null,vp=0,u=rn;for(;u!==null;)iB(u.alternate,u),u=u.return;rn=null}}function h0(u,f){var p=u.timeoutHandle;p!==-1&&(u.timeoutHandle=-1,h9(p)),p=u.cancelPendingCommit,p!==null&&(u.cancelPendingCommit=null,p()),Ub(),sa=u,rn=p=vl(u.current,null),gn=f,On=0,zo=null,hd=!1,u0=kn(u,f),Nb=!1,A0=Sl=kb=Kf=md=Pa=0,go=Tp=null,Ib=!1,(f&8)!==0&&(f|=f&32);var y=u.entangledLanes;if(y!==0)for(u=u.entanglements,y&=f;0<y;){var R=31-Mt(y),H=1<<R;f|=u[R],y&=~H}return AA=f,Ao(),p}function BB(u,f){ur=null,Z.H=y1,f===he||f===ve?(f=Ve(),On=3):f===pe?(f=Ve(),On=4):On=f===qT?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,zo=f,rn===null&&(Pa=1,_1(u,zr(f,u.current)))}function NB(){var u=Z.H;return Z.H=y1,u===null?y1:u}function kB(){var u=Z.A;return Z.A=WQ,u}function Mb(){Pa=4,hd||(gn&4194048)!==gn&&_l.current!==null||(u0=!0),(md&134217727)===0&&(Kf&134217727)===0||sa===null||xd(sa,gn,Sl,!1)}function Pb(u,f,p){var y=jn;jn|=2;var R=NB(),H=kB();(sa!==u||gn!==f)&&(F1=null,h0(u,f)),f=!1;var oe=Pa;e:do try{if(On!==0&&rn!==null){var we=rn,Re=zo;switch(On){case 8:Ub(),oe=6;break e;case 3:case 2:case 9:case 6:_l.current===null&&(f=!0);var et=On;if(On=0,zo=null,m0(u,we,Re,et),p&&u0){oe=0;break e}break;default:et=On,On=0,zo=null,m0(u,we,Re,et)}}XQ(),oe=Pa;break}catch(ft){BB(u,ft)}while(!0);return f&&u.shellSuspendCounter++,cc=hs=null,jn=y,Z.H=R,Z.A=H,rn===null&&(sa=null,gn=0,Ao()),oe}function XQ(){for(;rn!==null;)IB(rn)}function JQ(u,f){var p=jn;jn|=2;var y=NB(),R=kB();sa!==u||gn!==f?(F1=null,I1=ze()+500,h0(u,f)):u0=kn(u,f);e:do try{if(On!==0&&rn!==null){f=rn;var H=zo;t:switch(On){case 1:On=0,zo=null,m0(u,f,H,1);break;case 2:case 9:if(Be(H)){On=0,zo=null,FB(f);break}f=function(){On!==2&&On!==9||sa!==u||(On=7),du(u)},H.then(f,f);break e;case 3:On=7;break e;case 4:On=5;break e;case 7:Be(H)?(On=0,zo=null,FB(f)):(On=0,zo=null,m0(u,f,H,7));break;case 5:var oe=null;switch(rn.tag){case 26:oe=rn.memoizedState;case 5:case 27:var we=rn;if(!oe||fN(oe)){On=0,zo=null;var Re=we.sibling;if(Re!==null)rn=Re;else{var et=we.return;et!==null?(rn=et,D1(et)):rn=null}break t}}On=0,zo=null,m0(u,f,H,5);break;case 6:On=0,zo=null,m0(u,f,H,6);break;case 8:Ub(),Pa=6;break e;default:throw Error(n(462))}}ZQ();break}catch(ft){BB(u,ft)}while(!0);return cc=hs=null,Z.H=y,Z.A=R,jn=p,rn!==null?0:(sa=null,gn=0,Ao(),Pa)}function ZQ(){for(;rn!==null&&!De();)IB(rn)}function IB(u){var f=aB(u.alternate,u,AA);u.memoizedProps=u.pendingProps,f===null?D1(u):rn=f}function FB(u){var f=u,p=f.alternate;switch(f.tag){case 15:case 0:f=JT(p,f,f.pendingProps,f.type,void 0,gn);break;case 11:f=JT(p,f,f.pendingProps,f.type.render,f.ref,gn);break;case 5:e0(f);default:iB(p,f),f=rn=Nf(f,AA),f=aB(p,f,AA)}u.memoizedProps=u.pendingProps,f===null?D1(u):rn=f}function m0(u,f,p,y){cc=hs=null,e0(f),i0=null,vp=0;var R=f.return;try{if(HQ(u,R,f,p,gn)){Pa=1,_1(u,zr(p,u.current)),rn=null;return}}catch(H){if(R!==null)throw rn=R,H;Pa=1,_1(u,zr(p,u.current)),rn=null;return}f.flags&32768?(vn||y===1?u=!0:u0||(gn&536870912)!==0?u=!1:(hd=u=!0,(y===2||y===9||y===3||y===6)&&(y=_l.current,y!==null&&y.tag===13&&(y.flags|=16384))),RB(f,u)):D1(f)}function D1(u){var f=u;do{if((f.flags&32768)!==0){RB(f,hd);return}u=f.return;var p=zQ(f.alternate,f,AA);if(p!==null){rn=p;return}if(f=f.sibling,f!==null){rn=f;return}rn=f=u}while(f!==null);Pa===0&&(Pa=5)}function RB(u,f){do{var p=GQ(u.alternate,u);if(p!==null){p.flags&=32767,rn=p;return}if(p=u.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!f&&(u=u.sibling,u!==null)){rn=u;return}rn=u=p}while(u!==null);Pa=6,rn=null}function DB(u,f,p,y,R,H,oe,we,Re){u.cancelPendingCommit=null;do L1();while(ri!==0);if((jn&6)!==0)throw Error(n(327));if(f!==null){if(f===u.current)throw Error(n(177));if(H=f.lanes|f.childLanes,H|=Ca,Lr(u,p,H,oe,we,Re),u===sa&&(rn=sa=null,gn=0),d0=f,gd=u,f0=p,Rb=H,Db=R,EB=y,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,n9(Ct,function(){return jB(),null})):(u.callbackNode=null,u.callbackPriority=0),y=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||y){y=Z.T,Z.T=null,R=ee.p,ee.p=2,oe=jn,jn|=4;try{qQ(u,f,p)}finally{jn=oe,ee.p=R,Z.T=y}}ri=1,LB(),UB(),MB()}}function LB(){if(ri===1){ri=0;var u=gd,f=d0,p=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||p){p=Z.T,Z.T=null;var y=ee.p;ee.p=2;var R=jn;jn|=4;try{gB(f,u);var H=Yb,oe=Js(u.containerInfo),we=H.focusedElem,Re=H.selectionRange;if(oe!==we&&we&&we.ownerDocument&&Kc(we.ownerDocument.documentElement,we)){if(Re!==null&&Ns(we)){var et=Re.start,ft=Re.end;if(ft===void 0&&(ft=et),"selectionStart"in we)we.selectionStart=et,we.selectionEnd=Math.min(ft,we.value.length);else{var wt=we.ownerDocument||document,nt=wt&&wt.defaultView||window;if(nt.getSelection){var at=nt.getSelection(),_r=we.textContent.length,mr=Math.min(Re.start,_r),Xn=Re.end===void 0?mr:Math.min(Re.end,_r);!at.extend&&mr>Xn&&(oe=Xn,Xn=mr,mr=oe);var Ge=tc(we,mr),Pe=tc(we,Xn);if(Ge&&Pe&&(at.rangeCount!==1||at.anchorNode!==Ge.node||at.anchorOffset!==Ge.offset||at.focusNode!==Pe.node||at.focusOffset!==Pe.offset)){var $e=wt.createRange();$e.setStart(Ge.node,Ge.offset),at.removeAllRanges(),mr>Xn?(at.addRange($e),at.extend(Pe.node,Pe.offset)):($e.setEnd(Pe.node,Pe.offset),at.addRange($e))}}}}for(wt=[],at=we;at=at.parentNode;)at.nodeType===1&&wt.push({element:at,left:at.scrollLeft,top:at.scrollTop});for(typeof we.focus=="function"&&we.focus(),we=0;we<wt.length;we++){var pt=wt[we];pt.element.scrollLeft=pt.left,pt.element.scrollTop=pt.top}}K1=!!$b,Yb=$b=null}finally{jn=R,ee.p=y,Z.T=p}}u.current=f,ri=2}}function UB(){if(ri===2){ri=0;var u=gd,f=d0,p=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||p){p=Z.T,Z.T=null;var y=ee.p;ee.p=2;var R=jn;jn|=4;try{fB(u,f.alternate,f)}finally{jn=R,ee.p=y,Z.T=p}}ri=3}}function MB(){if(ri===4||ri===3){ri=0,Ce();var u=gd,f=d0,p=f0,y=EB;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?ri=5:(ri=0,d0=gd=null,PB(u,u.pendingLanes));var R=u.pendingLanes;if(R===0&&(pd=null),qn(p),f=f.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(Ut,f,void 0,(f.current.flags&128)===128)}catch{}if(y!==null){f=Z.T,R=ee.p,ee.p=2,Z.T=null;try{for(var H=u.onRecoverableError,oe=0;oe<y.length;oe++){var we=y[oe];H(we.value,{componentStack:we.stack})}}finally{Z.T=f,ee.p=R}}(f0&3)!==0&&L1(),du(u),R=u.pendingLanes,(p&4194090)!==0&&(R&42)!==0?u===Lb?Bp++:(Bp=0,Lb=u):Bp=0,Np(0)}}function PB(u,f){(u.pooledCacheLanes&=f)===0&&(f=u.pooledCache,f!=null&&(u.pooledCache=null,Rf(f)))}function L1(u){return LB(),UB(),MB(),jB()}function jB(){if(ri!==5)return!1;var u=gd,f=Rb;Rb=0;var p=qn(f0),y=Z.T,R=ee.p;try{ee.p=32>p?32:p,Z.T=null,p=Db,Db=null;var H=gd,oe=f0;if(ri=0,d0=gd=null,f0=0,(jn&6)!==0)throw Error(n(331));var we=jn;if(jn|=4,bB(H.current),vB(H,H.current,oe,p),jn=we,Np(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(Ut,H)}catch{}return!0}finally{ee.p=R,Z.T=y,PB(u,f)}}function OB(u,f,p){f=zr(p,f),f=fb(u.stateNode,f,2),u=vt(u,f,2),u!==null&&(ha(u,2),du(u))}function ta(u,f,p){if(u.tag===3)OB(u,u,p);else for(;f!==null;){if(f.tag===3){OB(f,u,p);break}else if(f.tag===1){var y=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(pd===null||!pd.has(y))){u=zr(p,u),p=zT(2),y=vt(f,p,2),y!==null&&(GT(p,y,f,u),ha(y,2),du(y));break}}f=f.return}}function jb(u,f,p){var y=u.pingCache;if(y===null){y=u.pingCache=new $Q;var R=new Set;y.set(f,R)}else R=y.get(f),R===void 0&&(R=new Set,y.set(f,R));R.has(p)||(Nb=!0,R.add(p),u=e9.bind(null,u,f,p),f.then(u,u))}function e9(u,f,p){var y=u.pingCache;y!==null&&y.delete(f),u.pingedLanes|=u.suspendedLanes&p,u.warmLanes&=~p,sa===u&&(gn&p)===p&&(Pa===4||Pa===3&&(gn&62914560)===gn&&300>ze()-Fb?(jn&2)===0&&h0(u,0):kb|=p,A0===gn&&(A0=0)),du(u)}function QB(u,f){f===0&&(f=en()),u=nc(u,f),u!==null&&(ha(u,f),du(u))}function t9(u){var f=u.memoizedState,p=0;f!==null&&(p=f.retryLane),QB(u,p)}function r9(u,f){var p=0;switch(u.tag){case 13:var y=u.stateNode,R=u.memoizedState;R!==null&&(p=R.retryLane);break;case 19:y=u.stateNode;break;case 22:y=u.stateNode._retryCache;break;default:throw Error(n(314))}y!==null&&y.delete(f),QB(u,p)}function n9(u,f){return Fe(u,f)}var U1=null,p0=null,Ob=!1,M1=!1,Qb=!1,Wf=0;function du(u){u!==p0&&u.next===null&&(p0===null?U1=p0=u:p0=p0.next=u),M1=!0,Ob||(Ob=!0,s9())}function Np(u,f){if(!Qb&&M1){Qb=!0;do for(var p=!1,y=U1;y!==null;){if(u!==0){var R=y.pendingLanes;if(R===0)var H=0;else{var oe=y.suspendedLanes,we=y.pingedLanes;H=(1<<31-Mt(42|u)+1)-1,H&=R&~(oe&~we),H=H&201326741?H&201326741|1:H?H|2:0}H!==0&&(p=!0,GB(y,H))}else H=gn,H=Rr(y,y===sa?H:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(H&3)===0||kn(y,H)||(p=!0,GB(y,H));y=y.next}while(p);Qb=!1}}function a9(){HB()}function HB(){M1=Ob=!1;var u=0;Wf!==0&&(f9()&&(u=Wf),Wf=0);for(var f=ze(),p=null,y=U1;y!==null;){var R=y.next,H=VB(y,f);H===0?(y.next=null,p===null?U1=R:p.next=R,R===null&&(p0=p)):(p=y,(u!==0||(H&3)!==0)&&(M1=!0)),y=R}Np(u)}function VB(u,f){for(var p=u.suspendedLanes,y=u.pingedLanes,R=u.expirationTimes,H=u.pendingLanes&-62914561;0<H;){var oe=31-Mt(H),we=1<<oe,Re=R[oe];Re===-1?((we&p)===0||(we&y)!==0)&&(R[oe]=Nr(we,f)):Re<=f&&(u.expiredLanes|=we),H&=~we}if(f=sa,p=gn,p=Rr(u,u===f?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),y=u.callbackNode,p===0||u===f&&(On===2||On===9)||u.cancelPendingCommit!==null)return y!==null&&y!==null&&Xe(y),u.callbackNode=null,u.callbackPriority=0;if((p&3)===0||kn(u,p)){if(f=p&-p,f===u.callbackPriority)return f;switch(y!==null&&Xe(y),qn(p)){case 2:case 8:p=dt;break;case 32:p=Ct;break;case 268435456:p=Nt;break;default:p=Ct}return y=zB.bind(null,u),p=Fe(p,y),u.callbackPriority=f,u.callbackNode=p,f}return y!==null&&y!==null&&Xe(y),u.callbackPriority=2,u.callbackNode=null,2}function zB(u,f){if(ri!==0&&ri!==5)return u.callbackNode=null,u.callbackPriority=0,null;var p=u.callbackNode;if(L1()&&u.callbackNode!==p)return null;var y=gn;return y=Rr(u,u===sa?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),y===0?null:(SB(u,y,f),VB(u,ze()),u.callbackNode!=null&&u.callbackNode===p?zB.bind(null,u):null)}function GB(u,f){if(L1())return null;SB(u,f,!0)}function s9(){m9(function(){(jn&6)!==0?Fe(it,a9):HB()})}function Hb(){return Wf===0&&(Wf=ls()),Wf}function qB(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Fo(""+u)}function KB(u,f){var p=f.ownerDocument.createElement("input");return p.name=f.name,p.value=f.value,u.id&&p.setAttribute("form",u.id),f.parentNode.insertBefore(p,f),u=new FormData(u),p.parentNode.removeChild(p),u}function i9(u,f,p,y,R){if(f==="submit"&&p&&p.stateNode===R){var H=qB((R[tn]||null).action),oe=y.submitter;oe&&(f=(f=oe[tn]||null)?qB(f.formAction):oe.getAttribute("formAction"),f!==null&&(H=f,oe=null));var we=new ul("action","action",null,y,R);u.push({event:we,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Wf!==0){var Re=oe?KB(R,oe):new FormData(R);El(p,{pending:!0,data:Re,method:R.method,action:H},null,Re)}}else typeof H=="function"&&(we.preventDefault(),Re=oe?KB(R,oe):new FormData(R),El(p,{pending:!0,data:Re,method:R.method,action:H},H,Re))},currentTarget:R}]})}}for(var Vb=0;Vb<$u.length;Vb++){var zb=$u[Vb],o9=zb.toLowerCase(),l9=zb[0].toUpperCase()+zb.slice(1);pa(o9,"on"+l9)}pa(JA,"onAnimationEnd"),pa($c,"onAnimationIteration"),pa(Yc,"onAnimationStart"),pa("dblclick","onDoubleClick"),pa("focusin","onFocus"),pa("focusout","onBlur"),pa(Xc,"onTransitionRun"),pa(Wu,"onTransitionStart"),pa(ZA,"onTransitionCancel"),pa(Jc,"onTransitionEnd"),Bt("onMouseEnter",["mouseout","mouseover"]),Bt("onMouseLeave",["mouseout","mouseover"]),Bt("onPointerEnter",["pointerout","pointerover"]),Bt("onPointerLeave",["pointerout","pointerover"]),yt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yt("onBeforeInput",["compositionend","keypress","textInput","paste"]),yt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kp));function WB(u,f){f=(f&4)!==0;for(var p=0;p<u.length;p++){var y=u[p],R=y.event;y=y.listeners;e:{var H=void 0;if(f)for(var oe=y.length-1;0<=oe;oe--){var we=y[oe],Re=we.instance,et=we.currentTarget;if(we=we.listener,Re!==H&&R.isPropagationStopped())break e;H=we,R.currentTarget=et;try{H(R)}catch(ft){E1(ft)}R.currentTarget=null,H=Re}else for(oe=0;oe<y.length;oe++){if(we=y[oe],Re=we.instance,et=we.currentTarget,we=we.listener,Re!==H&&R.isPropagationStopped())break e;H=we,R.currentTarget=et;try{H(R)}catch(ft){E1(ft)}R.currentTarget=null,H=Re}}}}function nn(u,f){var p=f[Un];p===void 0&&(p=f[Un]=new Set);var y=u+"__bubble";p.has(y)||($B(f,u,2,!1),p.add(y))}function Gb(u,f,p){var y=0;f&&(y|=4),$B(p,u,y,f)}var P1="_reactListening"+Math.random().toString(36).slice(2);function qb(u){if(!u[P1]){u[P1]=!0,We.forEach(function(p){p!=="selectionchange"&&(c9.has(p)||Gb(p,!1,u),Gb(p,!0,u))});var f=u.nodeType===9?u:u.ownerDocument;f===null||f[P1]||(f[P1]=!0,Gb("selectionchange",!1,f))}}function $B(u,f,p,y){switch(vN(f)){case 2:var R=U9;break;case 8:R=M9;break;default:R=iC}p=R.bind(null,f,p,u),R=void 0,!Xs||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(R=!0),y?R!==void 0?u.addEventListener(f,p,{capture:!0,passive:R}):u.addEventListener(f,p,!0):R!==void 0?u.addEventListener(f,p,{passive:R}):u.addEventListener(f,p,!1)}function Kb(u,f,p,y,R){var H=y;if((f&1)===0&&(f&2)===0&&y!==null)e:for(;;){if(y===null)return;var oe=y.tag;if(oe===3||oe===4){var we=y.stateNode.containerInfo;if(we===R)break;if(oe===4)for(oe=y.return;oe!==null;){var Re=oe.tag;if((Re===3||Re===4)&&oe.stateNode.containerInfo===R)return;oe=oe.return}for(;we!==null;){if(oe=Te(we),oe===null)return;if(Re=oe.tag,Re===5||Re===6||Re===26||Re===27){y=H=oe;continue e}we=we.parentNode}}y=y.return}KA(function(){var et=H,ft=Mn(p),wt=[];e:{var nt=rc.get(u);if(nt!==void 0){var at=ul,_r=u;switch(u){case"keypress":if(gi(p)===0)break e;case"keydown":case"keyup":at=Uo;break;case"focusin":_r="focus",at=dl;break;case"focusout":_r="blur",at=dl;break;case"beforeblur":case"afterblur":at=dl;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=Da;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=Al;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=Vc;break;case JA:case $c:case Yc:at=Oc;break;case Jc:at=Ae;break;case"scroll":case"scrollend":at=Hu;break;case"wheel":at=Le;break;case"copy":case"cut":case"paste":at=Qc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=ec;break;case"toggle":case"beforetoggle":at=ot}var mr=(f&4)!==0,Xn=!mr&&(u==="scroll"||u==="scrollend"),Ge=mr?nt!==null?nt+"Capture":null:nt;mr=[];for(var Pe=et,$e;Pe!==null;){var pt=Pe;if($e=pt.stateNode,pt=pt.tag,pt!==5&&pt!==26&&pt!==27||$e===null||Ge===null||(pt=Us(Pe,Ge),pt!=null&&mr.push(Ip(Pe,pt,$e))),Xn)break;Pe=Pe.return}0<mr.length&&(nt=new at(nt,_r,null,p,ft),wt.push({event:nt,listeners:mr}))}}if((f&7)===0){e:{if(nt=u==="mouseover"||u==="pointerover",at=u==="mouseout"||u==="pointerout",nt&&p!==no&&(_r=p.relatedTarget||p.fromElement)&&(Te(_r)||_r[In]))break e;if((at||nt)&&(nt=ft.window===ft?ft:(nt=ft.ownerDocument)?nt.defaultView||nt.parentWindow:window,at?(_r=p.relatedTarget||p.toElement,at=et,_r=_r?Te(_r):null,_r!==null&&(Xn=s(_r),mr=_r.tag,_r!==Xn||mr!==5&&mr!==27&&mr!==6)&&(_r=null)):(at=null,_r=et),at!==_r)){if(mr=Da,pt="onMouseLeave",Ge="onMouseEnter",Pe="mouse",(u==="pointerout"||u==="pointerover")&&(mr=ec,pt="onPointerLeave",Ge="onPointerEnter",Pe="pointer"),Xn=at==null?nt:qe(at),$e=_r==null?nt:qe(_r),nt=new mr(pt,Pe+"leave",at,p,ft),nt.target=Xn,nt.relatedTarget=$e,pt=null,Te(ft)===et&&(mr=new mr(Ge,Pe+"enter",_r,p,ft),mr.target=$e,mr.relatedTarget=Xn,pt=mr),Xn=pt,at&&_r)t:{for(mr=at,Ge=_r,Pe=0,$e=mr;$e;$e=g0($e))Pe++;for($e=0,pt=Ge;pt;pt=g0(pt))$e++;for(;0<Pe-$e;)mr=g0(mr),Pe--;for(;0<$e-Pe;)Ge=g0(Ge),$e--;for(;Pe--;){if(mr===Ge||Ge!==null&&mr===Ge.alternate)break t;mr=g0(mr),Ge=g0(Ge)}mr=null}else mr=null;at!==null&&YB(wt,nt,at,mr,!1),_r!==null&&Xn!==null&&YB(wt,Xn,_r,mr,!0)}}e:{if(nt=et?qe(et):window,at=nt.nodeName&&nt.nodeName.toLowerCase(),at==="select"||at==="input"&&nt.type==="file")var Xt=YA;else if(Fn(nt))if(zu)Xt=qh;else{Xt=np;var Xr=vi}else at=nt.nodeName,!at||at.toLowerCase()!=="input"||nt.type!=="checkbox"&&nt.type!=="radio"?et&&Ou(et.elementType)&&(Xt=YA):Xt=Tf;if(Xt&&(Xt=Xt(u,et))){co(wt,Xt,p,ft);break e}Xr&&Xr(u,nt,et),u==="focusout"&&et&&nt.type==="number"&&et.memoizedProps.value!=null&&ol(nt,"number",nt.value)}switch(Xr=et?qe(et):window,u){case"focusin":(Fn(Xr)||Xr.contentEditable==="true")&&(yi=Xr,Mo=et,gl=null);break;case"focusout":gl=Mo=yi=null;break;case"mousedown":Po=!0;break;case"contextmenu":case"mouseup":case"dragend":Po=!1,ma(wt,p,ft);break;case"selectionchange":if(Wc)break;case"keydown":case"keyup":ma(wt,p,ft)}var ar;if(jt)e:{switch(u){case"compositionstart":var gr="onCompositionStart";break e;case"compositionend":gr="onCompositionEnd";break e;case"compositionupdate":gr="onCompositionUpdate";break e}gr=void 0}else hr?Ze(u,p)&&(gr="onCompositionEnd"):u==="keydown"&&p.keyCode===229&&(gr="onCompositionStart");gr&&(se&&p.locale!=="ko"&&(hr||gr!=="onCompositionStart"?gr==="onCompositionEnd"&&hr&&(ar=Qu()):(pi=ft,cl="value"in pi?pi.value:pi.textContent,hr=!0)),Xr=j1(et,gr),0<Xr.length&&(gr=new Xl(gr,u,null,p,ft),wt.push({event:gr,listeners:Xr}),ar?gr.data=ar:(ar=St(p),ar!==null&&(gr.data=ar)))),(ar=Y?Yr(u,p):Tr(u,p))&&(gr=j1(et,"onBeforeInput"),0<gr.length&&(Xr=new Xl("onBeforeInput","beforeinput",null,p,ft),wt.push({event:Xr,listeners:gr}),Xr.data=ar)),i9(wt,u,et,p,ft)}WB(wt,f)})}function Ip(u,f,p){return{instance:u,listener:f,currentTarget:p}}function j1(u,f){for(var p=f+"Capture",y=[];u!==null;){var R=u,H=R.stateNode;if(R=R.tag,R!==5&&R!==26&&R!==27||H===null||(R=Us(u,p),R!=null&&y.unshift(Ip(u,R,H)),R=Us(u,f),R!=null&&y.push(Ip(u,R,H))),u.tag===3)return y;u=u.return}return[]}function g0(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function YB(u,f,p,y,R){for(var H=f._reactName,oe=[];p!==null&&p!==y;){var we=p,Re=we.alternate,et=we.stateNode;if(we=we.tag,Re!==null&&Re===y)break;we!==5&&we!==26&&we!==27||et===null||(Re=et,R?(et=Us(p,H),et!=null&&oe.unshift(Ip(p,et,Re))):R||(et=Us(p,H),et!=null&&oe.push(Ip(p,et,Re)))),p=p.return}oe.length!==0&&u.push({event:f,listeners:oe})}var u9=/\r\n?/g,A9=/\u0000|\uFFFD/g;function XB(u){return(typeof u=="string"?u:""+u).replace(u9,`
`).replace(A9,"")}function JB(u,f){return f=XB(f),XB(u)===f}function O1(){}function Yn(u,f,p,y,R,H){switch(p){case"children":typeof y=="string"?f==="body"||f==="textarea"&&y===""||hi(u,y):(typeof y=="number"||typeof y=="bigint")&&f!=="body"&&hi(u,""+y);break;case"className":Mr(u,"class",y);break;case"tabIndex":Mr(u,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Mr(u,p,y);break;case"style":ju(u,y,H);break;case"data":if(f!=="object"){Mr(u,"data",y);break}case"src":case"href":if(y===""&&(f!=="a"||p!=="href")){u.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){u.removeAttribute(p);break}y=Fo(""+y),u.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){u.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof H=="function"&&(p==="formAction"?(f!=="input"&&Yn(u,f,"name",R.name,R,null),Yn(u,f,"formEncType",R.formEncType,R,null),Yn(u,f,"formMethod",R.formMethod,R,null),Yn(u,f,"formTarget",R.formTarget,R,null)):(Yn(u,f,"encType",R.encType,R,null),Yn(u,f,"method",R.method,R,null),Yn(u,f,"target",R.target,R,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){u.removeAttribute(p);break}y=Fo(""+y),u.setAttribute(p,y);break;case"onClick":y!=null&&(u.onclick=O1);break;case"onScroll":y!=null&&nn("scroll",u);break;case"onScrollEnd":y!=null&&nn("scrollend",u);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(p=y.__html,p!=null){if(R.children!=null)throw Error(n(60));u.innerHTML=p}}break;case"multiple":u.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":u.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){u.removeAttribute("xlink:href");break}p=Fo(""+y),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?u.setAttribute(p,""+y):u.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?u.setAttribute(p,""):u.removeAttribute(p);break;case"capture":case"download":y===!0?u.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?u.setAttribute(p,y):u.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?u.setAttribute(p,y):u.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?u.removeAttribute(p):u.setAttribute(p,y);break;case"popover":nn("beforetoggle",u),nn("toggle",u),Ur(u,"popover",y);break;case"xlinkActuate":Hr(u,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":Hr(u,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":Hr(u,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":Hr(u,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":Hr(u,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":Hr(u,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":Hr(u,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":Hr(u,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":Hr(u,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Ur(u,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Io.get(p)||p,Ur(u,p,y))}}function Wb(u,f,p,y,R,H){switch(p){case"style":ju(u,y,H);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(p=y.__html,p!=null){if(R.children!=null)throw Error(n(60));u.innerHTML=p}}break;case"children":typeof y=="string"?hi(u,y):(typeof y=="number"||typeof y=="bigint")&&hi(u,""+y);break;case"onScroll":y!=null&&nn("scroll",u);break;case"onScrollEnd":y!=null&&nn("scrollend",u);break;case"onClick":y!=null&&(u.onclick=O1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Je.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(R=p.endsWith("Capture"),f=p.slice(2,R?p.length-7:void 0),H=u[tn]||null,H=H!=null?H[p]:null,typeof H=="function"&&u.removeEventListener(f,H,R),typeof y=="function")){typeof H!="function"&&H!==null&&(p in u?u[p]=null:u.hasAttribute(p)&&u.removeAttribute(p)),u.addEventListener(f,y,R);break e}p in u?u[p]=y:y===!0?u.setAttribute(p,""):Ur(u,p,y)}}}function ni(u,f,p){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nn("error",u),nn("load",u);var y=!1,R=!1,H;for(H in p)if(p.hasOwnProperty(H)){var oe=p[H];if(oe!=null)switch(H){case"src":y=!0;break;case"srcSet":R=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:Yn(u,f,H,oe,p,null)}}R&&Yn(u,f,"srcSet",p.srcSet,p,null),y&&Yn(u,f,"src",p.src,p,null);return;case"input":nn("invalid",u);var we=H=oe=R=null,Re=null,et=null;for(y in p)if(p.hasOwnProperty(y)){var ft=p[y];if(ft!=null)switch(y){case"name":R=ft;break;case"type":oe=ft;break;case"checked":Re=ft;break;case"defaultChecked":et=ft;break;case"value":H=ft;break;case"defaultValue":we=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(n(137,f));break;default:Yn(u,f,y,ft,p,null)}}il(u,H,we,Re,et,oe,R,!1),sl(u);return;case"select":nn("invalid",u),y=oe=H=null;for(R in p)if(p.hasOwnProperty(R)&&(we=p[R],we!=null))switch(R){case"value":H=we;break;case"defaultValue":oe=we;break;case"multiple":y=we;default:Yn(u,f,R,we,p,null)}f=H,p=oe,u.multiple=!!y,f!=null?ro(u,!!y,f,!1):p!=null&&ro(u,!!y,p,!0);return;case"textarea":nn("invalid",u),H=R=y=null;for(oe in p)if(p.hasOwnProperty(oe)&&(we=p[oe],we!=null))switch(oe){case"value":y=we;break;case"defaultValue":R=we;break;case"children":H=we;break;case"dangerouslySetInnerHTML":if(we!=null)throw Error(n(91));break;default:Yn(u,f,oe,we,p,null)}ll(u,y,R,H),sl(u);return;case"option":for(Re in p)if(p.hasOwnProperty(Re)&&(y=p[Re],y!=null))switch(Re){case"selected":u.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Yn(u,f,Re,y,p,null)}return;case"dialog":nn("beforetoggle",u),nn("toggle",u),nn("cancel",u),nn("close",u);break;case"iframe":case"object":nn("load",u);break;case"video":case"audio":for(y=0;y<kp.length;y++)nn(kp[y],u);break;case"image":nn("error",u),nn("load",u);break;case"details":nn("toggle",u);break;case"embed":case"source":case"link":nn("error",u),nn("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(et in p)if(p.hasOwnProperty(et)&&(y=p[et],y!=null))switch(et){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:Yn(u,f,et,y,p,null)}return;default:if(Ou(f)){for(ft in p)p.hasOwnProperty(ft)&&(y=p[ft],y!==void 0&&Wb(u,f,ft,y,p,void 0));return}}for(we in p)p.hasOwnProperty(we)&&(y=p[we],y!=null&&Yn(u,f,we,y,p,null))}function d9(u,f,p,y){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var R=null,H=null,oe=null,we=null,Re=null,et=null,ft=null;for(at in p){var wt=p[at];if(p.hasOwnProperty(at)&&wt!=null)switch(at){case"checked":break;case"value":break;case"defaultValue":Re=wt;default:y.hasOwnProperty(at)||Yn(u,f,at,null,y,wt)}}for(var nt in y){var at=y[nt];if(wt=p[nt],y.hasOwnProperty(nt)&&(at!=null||wt!=null))switch(nt){case"type":H=at;break;case"name":R=at;break;case"checked":et=at;break;case"defaultChecked":ft=at;break;case"value":oe=at;break;case"defaultValue":we=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(n(137,f));break;default:at!==wt&&Yn(u,f,nt,at,y,wt)}}Ts(u,oe,we,Re,et,ft,H,R);return;case"select":at=oe=we=nt=null;for(H in p)if(Re=p[H],p.hasOwnProperty(H)&&Re!=null)switch(H){case"value":break;case"multiple":at=Re;default:y.hasOwnProperty(H)||Yn(u,f,H,null,y,Re)}for(R in y)if(H=y[R],Re=p[R],y.hasOwnProperty(R)&&(H!=null||Re!=null))switch(R){case"value":nt=H;break;case"defaultValue":we=H;break;case"multiple":oe=H;default:H!==Re&&Yn(u,f,R,H,y,Re)}f=we,p=oe,y=at,nt!=null?ro(u,!!p,nt,!1):!!y!=!!p&&(f!=null?ro(u,!!p,f,!0):ro(u,!!p,p?[]:"",!1));return;case"textarea":at=nt=null;for(we in p)if(R=p[we],p.hasOwnProperty(we)&&R!=null&&!y.hasOwnProperty(we))switch(we){case"value":break;case"children":break;default:Yn(u,f,we,null,y,R)}for(oe in y)if(R=y[oe],H=p[oe],y.hasOwnProperty(oe)&&(R!=null||H!=null))switch(oe){case"value":nt=R;break;case"defaultValue":at=R;break;case"children":break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(n(91));break;default:R!==H&&Yn(u,f,oe,R,y,H)}Cn(u,nt,at);return;case"option":for(var _r in p)if(nt=p[_r],p.hasOwnProperty(_r)&&nt!=null&&!y.hasOwnProperty(_r))switch(_r){case"selected":u.selected=!1;break;default:Yn(u,f,_r,null,y,nt)}for(Re in y)if(nt=y[Re],at=p[Re],y.hasOwnProperty(Re)&&nt!==at&&(nt!=null||at!=null))switch(Re){case"selected":u.selected=nt&&typeof nt!="function"&&typeof nt!="symbol";break;default:Yn(u,f,Re,nt,y,at)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mr in p)nt=p[mr],p.hasOwnProperty(mr)&&nt!=null&&!y.hasOwnProperty(mr)&&Yn(u,f,mr,null,y,nt);for(et in y)if(nt=y[et],at=p[et],y.hasOwnProperty(et)&&nt!==at&&(nt!=null||at!=null))switch(et){case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(n(137,f));break;default:Yn(u,f,et,nt,y,at)}return;default:if(Ou(f)){for(var Xn in p)nt=p[Xn],p.hasOwnProperty(Xn)&&nt!==void 0&&!y.hasOwnProperty(Xn)&&Wb(u,f,Xn,void 0,y,nt);for(ft in y)nt=y[ft],at=p[ft],!y.hasOwnProperty(ft)||nt===at||nt===void 0&&at===void 0||Wb(u,f,ft,nt,y,at);return}}for(var Ge in p)nt=p[Ge],p.hasOwnProperty(Ge)&&nt!=null&&!y.hasOwnProperty(Ge)&&Yn(u,f,Ge,null,y,nt);for(wt in y)nt=y[wt],at=p[wt],!y.hasOwnProperty(wt)||nt===at||nt==null&&at==null||Yn(u,f,wt,nt,y,at)}var $b=null,Yb=null;function Q1(u){return u.nodeType===9?u:u.ownerDocument}function ZB(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eN(u,f){if(u===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&f==="foreignObject"?0:u}function Xb(u,f){return u==="textarea"||u==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var Jb=null;function f9(){var u=window.event;return u&&u.type==="popstate"?u===Jb?!1:(Jb=u,!0):(Jb=null,!1)}var tN=typeof setTimeout=="function"?setTimeout:void 0,h9=typeof clearTimeout=="function"?clearTimeout:void 0,rN=typeof Promise=="function"?Promise:void 0,m9=typeof queueMicrotask=="function"?queueMicrotask:typeof rN<"u"?function(u){return rN.resolve(null).then(u).catch(p9)}:tN;function p9(u){setTimeout(function(){throw u})}function vd(u){return u==="head"}function nN(u,f){var p=f,y=0,R=0;do{var H=p.nextSibling;if(u.removeChild(p),H&&H.nodeType===8)if(p=H.data,p==="/$"){if(0<y&&8>y){p=y;var oe=u.ownerDocument;if(p&1&&Fp(oe.documentElement),p&2&&Fp(oe.body),p&4)for(p=oe.head,Fp(p),oe=p.firstChild;oe;){var we=oe.nextSibling,Re=oe.nodeName;oe[Ee]||Re==="SCRIPT"||Re==="STYLE"||Re==="LINK"&&oe.rel.toLowerCase()==="stylesheet"||p.removeChild(oe),oe=we}}if(R===0){u.removeChild(H),Op(f);return}R--}else p==="$"||p==="$?"||p==="$!"?R++:y=p.charCodeAt(0)-48;else y=0;p=H}while(p);Op(f)}function Zb(u){var f=u.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var p=f;switch(f=f.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":Zb(p),_e(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}u.removeChild(p)}}function g9(u,f,p,y){for(;u.nodeType===1;){var R=p;if(u.nodeName.toLowerCase()!==f.toLowerCase()){if(!y&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(y){if(!u[Ee])switch(f){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(H=u.getAttribute("rel"),H==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(H!==R.rel||u.getAttribute("href")!==(R.href==null||R.href===""?null:R.href)||u.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin)||u.getAttribute("title")!==(R.title==null?null:R.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(H=u.getAttribute("src"),(H!==(R.src==null?null:R.src)||u.getAttribute("type")!==(R.type==null?null:R.type)||u.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin))&&H&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(f==="input"&&u.type==="hidden"){var H=R.name==null?null:""+R.name;if(R.type==="hidden"&&u.getAttribute("name")===H)return u}else return u;if(u=pc(u.nextSibling),u===null)break}return null}function x9(u,f,p){if(f==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!p||(u=pc(u.nextSibling),u===null))return null;return u}function eC(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function v9(u,f){var p=u.ownerDocument;if(u.data!=="$?"||p.readyState==="complete")f();else{var y=function(){f(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),u._reactRetry=y}}function pc(u){for(;u!=null;u=u.nextSibling){var f=u.nodeType;if(f===1||f===3)break;if(f===8){if(f=u.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return u}var tC=null;function aN(u){u=u.previousSibling;for(var f=0;u;){if(u.nodeType===8){var p=u.data;if(p==="$"||p==="$!"||p==="$?"){if(f===0)return u;f--}else p==="/$"&&f++}u=u.previousSibling}return null}function sN(u,f,p){switch(f=Q1(p),u){case"html":if(u=f.documentElement,!u)throw Error(n(452));return u;case"head":if(u=f.head,!u)throw Error(n(453));return u;case"body":if(u=f.body,!u)throw Error(n(454));return u;default:throw Error(n(451))}}function Fp(u){for(var f=u.attributes;f.length;)u.removeAttributeNode(f[0]);_e(u)}var Tl=new Map,iN=new Set;function H1(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var dA=ee.d;ee.d={f:y9,r:w9,D:b9,C:C9,L:E9,m:_9,X:T9,S:S9,M:B9};function y9(){var u=dA.f(),f=R1();return u||f}function w9(u){var f=ke(u);f!==null&&f.tag===5&&f.type==="form"?Vf(f):dA.r(u)}var x0=typeof document>"u"?null:document;function oN(u,f,p){var y=x0;if(y&&typeof f=="string"&&f){var R=dn(f);R='link[rel="'+u+'"][href="'+R+'"]',typeof p=="string"&&(R+='[crossorigin="'+p+'"]'),iN.has(R)||(iN.add(R),u={rel:u,crossOrigin:p,href:f},y.querySelector(R)===null&&(f=y.createElement("link"),ni(f,"link",u),Qe(f),y.head.appendChild(f)))}}function b9(u){dA.D(u),oN("dns-prefetch",u,null)}function C9(u,f){dA.C(u,f),oN("preconnect",u,f)}function E9(u,f,p){dA.L(u,f,p);var y=x0;if(y&&u&&f){var R='link[rel="preload"][as="'+dn(f)+'"]';f==="image"&&p&&p.imageSrcSet?(R+='[imagesrcset="'+dn(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(R+='[imagesizes="'+dn(p.imageSizes)+'"]')):R+='[href="'+dn(u)+'"]';var H=R;switch(f){case"style":H=v0(u);break;case"script":H=y0(u)}Tl.has(H)||(u=d({rel:"preload",href:f==="image"&&p&&p.imageSrcSet?void 0:u,as:f},p),Tl.set(H,u),y.querySelector(R)!==null||f==="style"&&y.querySelector(Rp(H))||f==="script"&&y.querySelector(Dp(H))||(f=y.createElement("link"),ni(f,"link",u),Qe(f),y.head.appendChild(f)))}}function _9(u,f){dA.m(u,f);var p=x0;if(p&&u){var y=f&&typeof f.as=="string"?f.as:"script",R='link[rel="modulepreload"][as="'+dn(y)+'"][href="'+dn(u)+'"]',H=R;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":H=y0(u)}if(!Tl.has(H)&&(u=d({rel:"modulepreload",href:u},f),Tl.set(H,u),p.querySelector(R)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Dp(H)))return}y=p.createElement("link"),ni(y,"link",u),Qe(y),p.head.appendChild(y)}}}function S9(u,f,p){dA.S(u,f,p);var y=x0;if(y&&u){var R=rt(y).hoistableStyles,H=v0(u);f=f||"default";var oe=R.get(H);if(!oe){var we={loading:0,preload:null};if(oe=y.querySelector(Rp(H)))we.loading=5;else{u=d({rel:"stylesheet",href:u,"data-precedence":f},p),(p=Tl.get(H))&&rC(u,p);var Re=oe=y.createElement("link");Qe(Re),ni(Re,"link",u),Re._p=new Promise(function(et,ft){Re.onload=et,Re.onerror=ft}),Re.addEventListener("load",function(){we.loading|=1}),Re.addEventListener("error",function(){we.loading|=2}),we.loading|=4,V1(oe,f,y)}oe={type:"stylesheet",instance:oe,count:1,state:we},R.set(H,oe)}}}function T9(u,f){dA.X(u,f);var p=x0;if(p&&u){var y=rt(p).hoistableScripts,R=y0(u),H=y.get(R);H||(H=p.querySelector(Dp(R)),H||(u=d({src:u,async:!0},f),(f=Tl.get(R))&&nC(u,f),H=p.createElement("script"),Qe(H),ni(H,"link",u),p.head.appendChild(H)),H={type:"script",instance:H,count:1,state:null},y.set(R,H))}}function B9(u,f){dA.M(u,f);var p=x0;if(p&&u){var y=rt(p).hoistableScripts,R=y0(u),H=y.get(R);H||(H=p.querySelector(Dp(R)),H||(u=d({src:u,async:!0,type:"module"},f),(f=Tl.get(R))&&nC(u,f),H=p.createElement("script"),Qe(H),ni(H,"link",u),p.head.appendChild(H)),H={type:"script",instance:H,count:1,state:null},y.set(R,H))}}function lN(u,f,p,y){var R=(R=le.current)?H1(R):null;if(!R)throw Error(n(446));switch(u){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(f=v0(p.href),p=rt(R).hoistableStyles,y=p.get(f),y||(y={type:"style",instance:null,count:0,state:null},p.set(f,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){u=v0(p.href);var H=rt(R).hoistableStyles,oe=H.get(u);if(oe||(R=R.ownerDocument||R,oe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},H.set(u,oe),(H=R.querySelector(Rp(u)))&&!H._p&&(oe.instance=H,oe.state.loading=5),Tl.has(u)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Tl.set(u,p),H||N9(R,u,p,oe.state))),f&&y===null)throw Error(n(528,""));return oe}if(f&&y!==null)throw Error(n(529,""));return null;case"script":return f=p.async,p=p.src,typeof p=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=y0(p),p=rt(R).hoistableScripts,y=p.get(f),y||(y={type:"script",instance:null,count:0,state:null},p.set(f,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,u))}}function v0(u){return'href="'+dn(u)+'"'}function Rp(u){return'link[rel="stylesheet"]['+u+"]"}function cN(u){return d({},u,{"data-precedence":u.precedence,precedence:null})}function N9(u,f,p,y){u.querySelector('link[rel="preload"][as="style"]['+f+"]")?y.loading=1:(f=u.createElement("link"),y.preload=f,f.addEventListener("load",function(){return y.loading|=1}),f.addEventListener("error",function(){return y.loading|=2}),ni(f,"link",p),Qe(f),u.head.appendChild(f))}function y0(u){return'[src="'+dn(u)+'"]'}function Dp(u){return"script[async]"+u}function uN(u,f,p){if(f.count++,f.instance===null)switch(f.type){case"style":var y=u.querySelector('style[data-href~="'+dn(p.href)+'"]');if(y)return f.instance=y,Qe(y),y;var R=d({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(u.ownerDocument||u).createElement("style"),Qe(y),ni(y,"style",R),V1(y,p.precedence,u),f.instance=y;case"stylesheet":R=v0(p.href);var H=u.querySelector(Rp(R));if(H)return f.state.loading|=4,f.instance=H,Qe(H),H;y=cN(p),(R=Tl.get(R))&&rC(y,R),H=(u.ownerDocument||u).createElement("link"),Qe(H);var oe=H;return oe._p=new Promise(function(we,Re){oe.onload=we,oe.onerror=Re}),ni(H,"link",y),f.state.loading|=4,V1(H,p.precedence,u),f.instance=H;case"script":return H=y0(p.src),(R=u.querySelector(Dp(H)))?(f.instance=R,Qe(R),R):(y=p,(R=Tl.get(H))&&(y=d({},p),nC(y,R)),u=u.ownerDocument||u,R=u.createElement("script"),Qe(R),ni(R,"link",y),u.head.appendChild(R),f.instance=R);case"void":return null;default:throw Error(n(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(y=f.instance,f.state.loading|=4,V1(y,p.precedence,u));return f.instance}function V1(u,f,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),R=y.length?y[y.length-1]:null,H=R,oe=0;oe<y.length;oe++){var we=y[oe];if(we.dataset.precedence===f)H=we;else if(H!==R)break}H?H.parentNode.insertBefore(u,H.nextSibling):(f=p.nodeType===9?p.head:p,f.insertBefore(u,f.firstChild))}function rC(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.title==null&&(u.title=f.title)}function nC(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.integrity==null&&(u.integrity=f.integrity)}var z1=null;function AN(u,f,p){if(z1===null){var y=new Map,R=z1=new Map;R.set(p,y)}else R=z1,y=R.get(p),y||(y=new Map,R.set(p,y));if(y.has(u))return y;for(y.set(u,null),p=p.getElementsByTagName(u),R=0;R<p.length;R++){var H=p[R];if(!(H[Ee]||H[An]||u==="link"&&H.getAttribute("rel")==="stylesheet")&&H.namespaceURI!=="http://www.w3.org/2000/svg"){var oe=H.getAttribute(f)||"";oe=u+oe;var we=y.get(oe);we?we.push(H):y.set(oe,[H])}}return y}function dN(u,f,p){u=u.ownerDocument||u,u.head.insertBefore(p,f==="title"?u.querySelector("head > title"):null)}function k9(u,f,p){if(p===1||f.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return u=f.disabled,typeof f.precedence=="string"&&u==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function fN(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var Lp=null;function I9(){}function F9(u,f,p){if(Lp===null)throw Error(n(475));var y=Lp;if(f.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var R=v0(p.href),H=u.querySelector(Rp(R));if(H){u=H._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(y.count++,y=G1.bind(y),u.then(y,y)),f.state.loading|=4,f.instance=H,Qe(H);return}H=u.ownerDocument||u,p=cN(p),(R=Tl.get(R))&&rC(p,R),H=H.createElement("link"),Qe(H);var oe=H;oe._p=new Promise(function(we,Re){oe.onload=we,oe.onerror=Re}),ni(H,"link",p),f.instance=H}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(y.count++,f=G1.bind(y),u.addEventListener("load",f),u.addEventListener("error",f))}}function R9(){if(Lp===null)throw Error(n(475));var u=Lp;return u.stylesheets&&u.count===0&&aC(u,u.stylesheets),0<u.count?function(f){var p=setTimeout(function(){if(u.stylesheets&&aC(u,u.stylesheets),u.unsuspend){var y=u.unsuspend;u.unsuspend=null,y()}},6e4);return u.unsuspend=f,function(){u.unsuspend=null,clearTimeout(p)}}:null}function G1(){if(this.count--,this.count===0){if(this.stylesheets)aC(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var q1=null;function aC(u,f){u.stylesheets=null,u.unsuspend!==null&&(u.count++,q1=new Map,f.forEach(D9,u),q1=null,G1.call(u))}function D9(u,f){if(!(f.state.loading&4)){var p=q1.get(u);if(p)var y=p.get(null);else{p=new Map,q1.set(u,p);for(var R=u.querySelectorAll("link[data-precedence],style[data-precedence]"),H=0;H<R.length;H++){var oe=R[H];(oe.nodeName==="LINK"||oe.getAttribute("media")!=="not all")&&(p.set(oe.dataset.precedence,oe),y=oe)}y&&p.set(null,y)}R=f.instance,oe=R.getAttribute("data-precedence"),H=p.get(oe)||y,H===y&&p.set(null,R),p.set(oe,R),this.count++,y=G1.bind(this),R.addEventListener("load",y),R.addEventListener("error",y),H?H.parentNode.insertBefore(R,H.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(R,u.firstChild)),f.state.loading|=4}}var Up={$$typeof:I,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function L9(u,f,p,y,R,H,oe,we){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ea(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ea(0),this.hiddenUpdates=ea(null),this.identifierPrefix=y,this.onUncaughtError=R,this.onCaughtError=H,this.onRecoverableError=oe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=we,this.incompleteTransitions=new Map}function hN(u,f,p,y,R,H,oe,we,Re,et,ft,wt){return u=new L9(u,f,p,oe,we,Re,et,wt),f=1,H===!0&&(f|=24),H=Os(3,null,null,f),u.current=H,H.stateNode=u,f=sp(),f.refCount++,u.pooledCache=f,f.refCount++,H.memoizedState={element:y,isDehydrated:p,cache:f},Me(H),u}function mN(u){return u?(u=fs,u):fs}function pN(u,f,p,y,R,H){R=mN(R),y.context===null?y.context=R:y.pendingContext=R,y=ct(f),y.payload={element:p},H=H===void 0?null:H,H!==null&&(y.callback=H),p=vt(u,y,f),p!==null&&(qo(p,u,f),ht(p,u,f))}function gN(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var p=u.retryLane;u.retryLane=p!==0&&p<f?p:f}}function sC(u,f){gN(u,f),(u=u.alternate)&&gN(u,f)}function xN(u){if(u.tag===13){var f=nc(u,67108864);f!==null&&qo(f,u,67108864),sC(u,67108864)}}var K1=!0;function U9(u,f,p,y){var R=Z.T;Z.T=null;var H=ee.p;try{ee.p=2,iC(u,f,p,y)}finally{ee.p=H,Z.T=R}}function M9(u,f,p,y){var R=Z.T;Z.T=null;var H=ee.p;try{ee.p=8,iC(u,f,p,y)}finally{ee.p=H,Z.T=R}}function iC(u,f,p,y){if(K1){var R=oC(y);if(R===null)Kb(u,f,y,W1,p),yN(u,y);else if(j9(R,u,f,p,y))y.stopPropagation();else if(yN(u,y),f&4&&-1<P9.indexOf(u)){for(;R!==null;){var H=ke(R);if(H!==null)switch(H.tag){case 3:if(H=H.stateNode,H.current.memoizedState.isDehydrated){var oe=pr(H.pendingLanes);if(oe!==0){var we=H;for(we.pendingLanes|=2,we.entangledLanes|=2;oe;){var Re=1<<31-Mt(oe);we.entanglements[1]|=Re,oe&=~Re}du(H),(jn&6)===0&&(I1=ze()+500,Np(0))}}break;case 13:we=nc(H,2),we!==null&&qo(we,H,2),R1(),sC(H,2)}if(H=oC(y),H===null&&Kb(u,f,y,W1,p),H===R)break;R=H}R!==null&&y.stopPropagation()}else Kb(u,f,y,null,p)}}function oC(u){return u=Mn(u),lC(u)}var W1=null;function lC(u){if(W1=null,u=Te(u),u!==null){var f=s(u);if(f===null)u=null;else{var p=f.tag;if(p===13){if(u=i(f),u!==null)return u;u=null}else if(p===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;u=null}else f!==u&&(u=null)}}return W1=u,null}function vN(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tt()){case it:return 2;case dt:return 8;case Ct:case ut:return 32;case Nt:return 268435456;default:return 32}default:return 32}}var cC=!1,yd=null,wd=null,bd=null,Mp=new Map,Pp=new Map,Cd=[],P9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yN(u,f){switch(u){case"focusin":case"focusout":yd=null;break;case"dragenter":case"dragleave":wd=null;break;case"mouseover":case"mouseout":bd=null;break;case"pointerover":case"pointerout":Mp.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pp.delete(f.pointerId)}}function jp(u,f,p,y,R,H){return u===null||u.nativeEvent!==H?(u={blockedOn:f,domEventName:p,eventSystemFlags:y,nativeEvent:H,targetContainers:[R]},f!==null&&(f=ke(f),f!==null&&xN(f)),u):(u.eventSystemFlags|=y,f=u.targetContainers,R!==null&&f.indexOf(R)===-1&&f.push(R),u)}function j9(u,f,p,y,R){switch(f){case"focusin":return yd=jp(yd,u,f,p,y,R),!0;case"dragenter":return wd=jp(wd,u,f,p,y,R),!0;case"mouseover":return bd=jp(bd,u,f,p,y,R),!0;case"pointerover":var H=R.pointerId;return Mp.set(H,jp(Mp.get(H)||null,u,f,p,y,R)),!0;case"gotpointercapture":return H=R.pointerId,Pp.set(H,jp(Pp.get(H)||null,u,f,p,y,R)),!0}return!1}function wN(u){var f=Te(u.target);if(f!==null){var p=s(f);if(p!==null){if(f=p.tag,f===13){if(f=i(p),f!==null){u.blockedOn=f,Es(u.priority,function(){if(p.tag===13){var y=Go();y=cs(y);var R=nc(p,y);R!==null&&qo(R,p,y),sC(p,y)}});return}}else if(f===3&&p.stateNode.current.memoizedState.isDehydrated){u.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}u.blockedOn=null}function $1(u){if(u.blockedOn!==null)return!1;for(var f=u.targetContainers;0<f.length;){var p=oC(u.nativeEvent);if(p===null){p=u.nativeEvent;var y=new p.constructor(p.type,p);no=y,p.target.dispatchEvent(y),no=null}else return f=ke(p),f!==null&&xN(f),u.blockedOn=p,!1;f.shift()}return!0}function bN(u,f,p){$1(u)&&p.delete(f)}function O9(){cC=!1,yd!==null&&$1(yd)&&(yd=null),wd!==null&&$1(wd)&&(wd=null),bd!==null&&$1(bd)&&(bd=null),Mp.forEach(bN),Pp.forEach(bN)}function Y1(u,f){u.blockedOn===f&&(u.blockedOn=null,cC||(cC=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,O9)))}var X1=null;function CN(u){X1!==u&&(X1=u,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){X1===u&&(X1=null);for(var f=0;f<u.length;f+=3){var p=u[f],y=u[f+1],R=u[f+2];if(typeof y!="function"){if(lC(y||p)===null)continue;break}var H=ke(p);H!==null&&(u.splice(f,3),f-=3,El(H,{pending:!0,data:R,method:p.method,action:y},y,R))}}))}function Op(u){function f(Re){return Y1(Re,u)}yd!==null&&Y1(yd,u),wd!==null&&Y1(wd,u),bd!==null&&Y1(bd,u),Mp.forEach(f),Pp.forEach(f);for(var p=0;p<Cd.length;p++){var y=Cd[p];y.blockedOn===u&&(y.blockedOn=null)}for(;0<Cd.length&&(p=Cd[0],p.blockedOn===null);)wN(p),p.blockedOn===null&&Cd.shift();if(p=(u.ownerDocument||u).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var R=p[y],H=p[y+1],oe=R[tn]||null;if(typeof H=="function")oe||CN(p);else if(oe){var we=null;if(H&&H.hasAttribute("formAction")){if(R=H,oe=H[tn]||null)we=oe.formAction;else if(lC(R)!==null)continue}else we=oe.action;typeof we=="function"?p[y+1]=we:(p.splice(y,3),y-=3),CN(p)}}}function uC(u){this._internalRoot=u}J1.prototype.render=uC.prototype.render=function(u){var f=this._internalRoot;if(f===null)throw Error(n(409));var p=f.current,y=Go();pN(p,y,u,f,null,null)},J1.prototype.unmount=uC.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var f=u.containerInfo;pN(u.current,2,null,u,null,null),R1(),f[In]=null}};function J1(u){this._internalRoot=u}J1.prototype.unstable_scheduleHydration=function(u){if(u){var f=wa();u={blockedOn:null,target:u,priority:f};for(var p=0;p<Cd.length&&f!==0&&f<Cd[p].priority;p++);Cd.splice(p,0,u),p===0&&wN(u)}};var EN=e.version;if(EN!=="19.1.1")throw Error(n(527,EN,"19.1.1"));ee.findDOMNode=function(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(n(188)):(u=Object.keys(u).join(","),Error(n(268,u)));return u=l(f),u=u!==null?A(u):null,u=u===null?null:u.stateNode,u};var Q9={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Z1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Z1.isDisabled&&Z1.supportsFiber)try{Ut=Z1.inject(Q9),Ht=Z1}catch{}}return Hp.createRoot=function(u,f){if(!a(u))throw Error(n(299));var p=!1,y="",R=OT,H=QT,oe=HT,we=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(R=f.onUncaughtError),f.onCaughtError!==void 0&&(H=f.onCaughtError),f.onRecoverableError!==void 0&&(oe=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(we=f.unstable_transitionCallbacks)),f=hN(u,1,!1,null,null,p,y,R,H,oe,we,null),u[In]=f.current,qb(u),new uC(f)},Hp.hydrateRoot=function(u,f,p){if(!a(u))throw Error(n(299));var y=!1,R="",H=OT,oe=QT,we=HT,Re=null,et=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(R=p.identifierPrefix),p.onUncaughtError!==void 0&&(H=p.onUncaughtError),p.onCaughtError!==void 0&&(oe=p.onCaughtError),p.onRecoverableError!==void 0&&(we=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(Re=p.unstable_transitionCallbacks),p.formState!==void 0&&(et=p.formState)),f=hN(u,1,!0,f,p??null,y,R,H,oe,we,Re,et),f.context=mN(null),p=f.current,y=Go(),y=cs(y),R=ct(y),R.callback=null,vt(p,R,y),p=y,f.current.lanes=p,ha(f,p),du(f),u[In]=f.current,qb(u),new J1(f)},Hp.version="19.1.1",Hp}var DN;function Y9(){if(DN)return fC.exports;DN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),fC.exports=$9(),fC.exports}var X9=Y9();const J9=X5(X9),Z9=()=>{};var LN={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},eH=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=t[r++];e[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=t[r++],i=t[r++],o=t[r++],l=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const s=t[r++],i=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return e.join("")},ZD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const s=t[a],i=a+1<t.length,o=i?t[a+1]:0,l=a+2<t.length,A=l?t[a+2]:0,d=s>>2,h=(s&3)<<4|o>>4;let m=(o&15)<<2|A>>6,g=A&63;l||(g=64,i||(m=64)),n.push(r[d],r[h],r[m],r[g])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(JD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eH(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const s=r[t.charAt(a++)],o=a<t.length?r[t.charAt(a)]:0;++a;const A=a<t.length?r[t.charAt(a)]:64;++a;const h=a<t.length?r[t.charAt(a)]:64;if(++a,s==null||o==null||A==null||h==null)throw new tH;const m=s<<2|o>>4;if(n.push(m),A!==64){const g=o<<4&240|A>>2;if(n.push(g),h!==64){const b=A<<6&192|h;n.push(b)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rH=function(t){const e=JD(t);return ZD.encodeByteArray(e,!0)},I2=function(t){return rH(t).replace(/\./g,"")},eL=function(t){try{return ZD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nH(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aH=()=>nH().__FIREBASE_DEFAULTS__,sH=()=>{if(typeof process>"u"||typeof LN>"u")return;const t=LN.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iH=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&eL(t[1]);return e&&JSON.parse(e)},Hy=()=>{try{return Z9()||aH()||sH()||iH()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},tL=t=>{var e,r;return(r=(e=Hy())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},oH=t=>{const e=tL(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},rL=()=>{var t;return(t=Hy())==null?void 0:t.config},nL=t=>{var e;return(e=Hy())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function aL(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cH(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[I2(JSON.stringify(r)),I2(JSON.stringify(i)),""].join(".")}const _g={};function uH(){const t={prod:[],emulator:[]};for(const e of Object.keys(_g))_g[e]?t.emulator.push(e):t.prod.push(e);return t}function AH(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let UN=!1;function sL(t,e){if(typeof window>"u"||typeof document>"u"||!Pm(window.location.host)||_g[t]===e||_g[t]||UN)return;_g[t]=e;function r(m){return`__firebase__banner__${m}`}const n="__firebase__banner",s=uH().prod.length>0;function i(){const m=document.getElementById(n);m&&m.remove()}function o(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function A(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{UN=!0,i()},m}function d(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function h(){const m=AH(n),g=r("text"),b=document.getElementById(g)||document.createElement("span"),w=r("learnmore"),_=document.getElementById(w)||document.createElement("a"),N=r("preprendIcon"),k=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const I=m.element;o(I),d(_,w);const P=A();l(k,N),I.append(k,b,_,P),document.body.appendChild(I)}s?(b.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hi())}function fH(){var e;const t=(e=Hy())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hH(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mH(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pH(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gH(){const t=Hi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xH(){return!fH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vH(){try{return typeof indexedDB=="object"}catch{return!1}}function yH(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;e(((s=a.error)==null?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wH="FirebaseError";class MA extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=wH,Object.setPrototypeOf(this,MA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ix.prototype.create)}}class Ix{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,s=this.errors[e],i=s?bH(s,n):"Error",o=`${this.serviceName}: ${i} (${a}).`;return new MA(a,o,n)}}function bH(t,e){return t.replace(CH,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const CH=/\{\$([^}]+)}/g;function EH(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function of(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const s=t[a],i=e[a];if(MN(s)&&MN(i)){if(!of(s,i))return!1}else if(s!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function MN(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function ag(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(s)}}),e}function sg(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function _H(t,e){const r=new SH(t,e);return r.subscribe.bind(r)}class SH{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");TH(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=gC),a.error===void 0&&(a.error=gC),a.complete===void 0&&(a.complete=gC);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TH(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function gC(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(t){return t&&t._delegate?t._delegate:t}class wh{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BH=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new lH;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kH(e))try{this.getOrInitializeService({instanceIdentifier:Jf})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(e=Jf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jf){return this.instances.has(e)}getOptions(e=Jf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&i.resolve(a)}return a}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(e),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&e(s,n),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:NH(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Jf){return this.component?this.component.multipleInstances?e:Jf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function NH(t){return t===Jf?void 0:t}function kH(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IH{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new BH(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var on;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(on||(on={}));const FH={debug:on.DEBUG,verbose:on.VERBOSE,info:on.INFO,warn:on.WARN,error:on.ERROR,silent:on.SILENT},RH=on.INFO,DH={[on.DEBUG]:"log",[on.VERBOSE]:"log",[on.INFO]:"info",[on.WARN]:"warn",[on.ERROR]:"error"},LH=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=DH[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let J5=class{constructor(e){this.name=e,this._logLevel=RH,this._logHandler=LH,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in on))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?FH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,on.DEBUG,...e),this._logHandler(this,on.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,on.VERBOSE,...e),this._logHandler(this,on.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,on.INFO,...e),this._logHandler(this,on.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,on.WARN,...e),this._logHandler(this,on.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,on.ERROR,...e),this._logHandler(this,on.ERROR,...e)}};const UH=(t,e)=>e.some(r=>t instanceof r);let PN,jN;function MH(){return PN||(PN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PH(){return jN||(jN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iL=new WeakMap,XE=new WeakMap,oL=new WeakMap,xC=new WeakMap,Z5=new WeakMap;function jH(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{r($d(t.result)),a()},i=()=>{n(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&iL.set(r,t)}).catch(()=>{}),Z5.set(e,t),e}function OH(t){if(XE.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{r(),a()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});XE.set(t,e)}let JE={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return XE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||oL.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return $d(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function QH(t){JE=t(JE)}function HH(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(vC(this),e,...r);return oL.set(n,e.sort?e.sort():[e]),$d(n)}:PH().includes(t)?function(...e){return t.apply(vC(this),e),$d(iL.get(this))}:function(...e){return $d(t.apply(vC(this),e))}}function VH(t){return typeof t=="function"?HH(t):(t instanceof IDBTransaction&&OH(t),UH(t,MH())?new Proxy(t,JE):t)}function $d(t){if(t instanceof IDBRequest)return jH(t);if(xC.has(t))return xC.get(t);const e=VH(t);return e!==t&&(xC.set(t,e),Z5.set(e,t)),e}const vC=t=>Z5.get(t);function zH(t,e,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const i=indexedDB.open(t,e),o=$d(i);return n&&i.addEventListener("upgradeneeded",l=>{n($d(i.result),l.oldVersion,l.newVersion,$d(i.transaction),l)}),r&&i.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),a&&l.addEventListener("versionchange",A=>a(A.oldVersion,A.newVersion,A))}).catch(()=>{}),o}const GH=["get","getKey","getAll","getAllKeys","count"],qH=["put","add","delete","clear"],yC=new Map;function ON(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yC.get(e))return yC.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=qH.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||GH.includes(r)))return;const s=async function(i,...o){const l=this.transaction(i,a?"readwrite":"readonly");let A=l.store;return n&&(A=A.index(o.shift())),(await Promise.all([A[r](...o),a&&l.done]))[0]};return yC.set(e,s),s}QH(t=>({...t,get:(e,r,n)=>ON(e,r)||t.get(e,r,n),has:(e,r)=>!!ON(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KH{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(WH(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function WH(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ZE="@firebase/app",QN="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=new J5("@firebase/app"),$H="@firebase/app-compat",YH="@firebase/analytics-compat",XH="@firebase/analytics",JH="@firebase/app-check-compat",ZH="@firebase/app-check",eV="@firebase/auth",tV="@firebase/auth-compat",rV="@firebase/database",nV="@firebase/data-connect",aV="@firebase/database-compat",sV="@firebase/functions",iV="@firebase/functions-compat",oV="@firebase/installations",lV="@firebase/installations-compat",cV="@firebase/messaging",uV="@firebase/messaging-compat",AV="@firebase/performance",dV="@firebase/performance-compat",fV="@firebase/remote-config",hV="@firebase/remote-config-compat",mV="@firebase/storage",pV="@firebase/storage-compat",gV="@firebase/firestore",xV="@firebase/ai",vV="@firebase/firestore-compat",yV="firebase",wV="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="[DEFAULT]",bV={[ZE]:"fire-core",[$H]:"fire-core-compat",[XH]:"fire-analytics",[YH]:"fire-analytics-compat",[ZH]:"fire-app-check",[JH]:"fire-app-check-compat",[eV]:"fire-auth",[tV]:"fire-auth-compat",[rV]:"fire-rtdb",[nV]:"fire-data-connect",[aV]:"fire-rtdb-compat",[sV]:"fire-fn",[iV]:"fire-fn-compat",[oV]:"fire-iid",[lV]:"fire-iid-compat",[cV]:"fire-fcm",[uV]:"fire-fcm-compat",[AV]:"fire-perf",[dV]:"fire-perf-compat",[fV]:"fire-rc",[hV]:"fire-rc-compat",[mV]:"fire-gcs",[pV]:"fire-gcs-compat",[gV]:"fire-fst",[vV]:"fire-fst-compat",[xV]:"fire-vertex","fire-js":"fire-js",[yV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg=new Map,CV=new Map,t_=new Map;function HN(t,e){try{t.container.addComponent(e)}catch(r){TA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function wm(t){const e=t.name;if(t_.has(e))return TA.debug(`There were multiple attempts to register component ${e}.`),!1;t_.set(e,t);for(const r of Wg.values())HN(r,t);for(const r of CV.values())HN(r,t);return!0}function eS(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function bc(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yd=new Ix("app","Firebase",EV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new wh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yd.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm=wV;function tS(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:e_,automaticDataCollectionEnabled:!0,...e},a=n.name;if(typeof a!="string"||!a)throw Yd.create("bad-app-name",{appName:String(a)});if(r||(r=rL()),!r)throw Yd.create("no-options");const s=Wg.get(a);if(s){if(of(r,s.options)&&of(n,s.config))return s;throw Yd.create("duplicate-app",{appName:a})}const i=new IH(a);for(const l of t_.values())i.addComponent(l);const o=new _V(r,n,i);return Wg.set(a,o),o}function lL(t=e_){const e=Wg.get(t);if(!e&&t===e_&&rL())return tS();if(!e)throw Yd.create("no-app",{appName:t});return e}function VN(){return Array.from(Wg.values())}function Xd(t,e,r){let n=bV[t]??t;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const i=[`Unable to register library "${n}" with version "${e}":`];a&&i.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&i.push("and"),s&&i.push(`version name "${e}" contains illegal characters (whitespace or "/")`),TA.warn(i.join(" "));return}wm(new wh(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV="firebase-heartbeat-database",TV=1,$g="firebase-heartbeat-store";let wC=null;function cL(){return wC||(wC=zH(SV,TV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($g)}catch(r){console.warn(r)}}}}).catch(t=>{throw Yd.create("idb-open",{originalErrorMessage:t.message})})),wC}async function BV(t){try{const r=(await cL()).transaction($g),n=await r.objectStore($g).get(uL(t));return await r.done,n}catch(e){if(e instanceof MA)TA.warn(e.message);else{const r=Yd.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});TA.warn(r.message)}}}async function zN(t,e){try{const n=(await cL()).transaction($g,"readwrite");await n.objectStore($g).put(e,uL(t)),await n.done}catch(r){if(r instanceof MA)TA.warn(r.message);else{const n=Yd.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});TA.warn(n.message)}}}function uL(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=1024,kV=30;class IV{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new RV(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=GN();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>kV){const i=DV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){TA.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=GN(),{heartbeatsToSend:n,unsentEntries:a}=FV(this._heartbeatsCache.heartbeats),s=I2(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return TA.warn(r),""}}}function GN(){return new Date().toISOString().substring(0,10)}function FV(t,e=NV){const r=[];let n=t.slice();for(const a of t){const s=r.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),qN(r)>e){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),qN(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class RV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vH()?yH().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await BV(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return zN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return zN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function qN(t){return I2(JSON.stringify({version:2,heartbeats:t})).length}function DV(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(t){wm(new wh("platform-logger",e=>new KH(e),"PRIVATE")),wm(new wh("heartbeat",e=>new IV(e),"PRIVATE")),Xd(ZE,QN,t),Xd(ZE,QN,"esm2020"),Xd("fire-js","")}LV("");function AL(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UV=AL,dL=new Ix("auth","Firebase",AL());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=new J5("@firebase/auth");function MV(t,...e){F2.logLevel<=on.WARN&&F2.warn(`Auth (${jm}): ${t}`,...e)}function s2(t,...e){F2.logLevel<=on.ERROR&&F2.error(`Auth (${jm}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(t,...e){throw rS(t,...e)}function Cu(t,...e){return rS(t,...e)}function fL(t,e,r){const n={...UV(),[e]:r};return new Ix("auth","Firebase",n).create(e,{appName:t.name})}function Jd(t){return fL(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rS(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return dL.create(t,...e)}function Cr(t,e,...r){if(!t)throw rS(e,...r)}function gA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw s2(e),new Error(e)}function BA(t,e){t||gA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function PV(){return KN()==="http:"||KN()==="https:"}function KN(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PV()||mH()||"connection"in navigator)?navigator.onLine:!0}function OV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,r){this.shortDelay=e,this.longDelay=r,BA(r>e,"Short delay should be less than long delay!"),this.isMobile=dH()||pH()}get(){return jV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t,e){BA(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],VV=new Rx(3e4,6e4);function wf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function PA(t,e,r,n,a={}){return mL(t,a,async()=>{let s={},i={};n&&(e==="GET"?i=n:s={body:JSON.stringify(n)});const o=Fx({key:t.config.apiKey,...i}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const A={method:e,headers:l,...s};return hH()||(A.referrerPolicy="no-referrer"),t.emulatorConfig&&Pm(t.emulatorConfig.host)&&(A.credentials="include"),hL.fetch()(await pL(t,t.config.apiHost,r,o),A)})}async function mL(t,e,r){t._canInitEmulator=!1;const n={...QV,...e};try{const a=new GV(t),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw ev(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[l,A]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ev(t,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw ev(t,"email-already-in-use",i);if(l==="USER_DISABLED")throw ev(t,"user-disabled",i);const d=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(A)throw fL(t,d,A);Ic(t,d)}}catch(a){if(a instanceof MA)throw a;Ic(t,"network-request-failed",{message:String(a)})}}async function Vy(t,e,r,n,a={}){const s=await PA(t,e,r,n,a);return"mfaPendingCredential"in s&&Ic(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function pL(t,e,r,n){const a=`${e}${r}?${n}`,s=t,i=s.config.emulator?nS(t.config,a):`${t.config.apiScheme}://${a}`;return HV.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(i).toString():i}function zV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class GV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Cu(this.auth,"network-request-failed")),VV.get())})}}function ev(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Cu(t,e,n);return a.customData._tokenResponse=r,a}function WN(t){return t!==void 0&&t.enterprise!==void 0}class qV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return zV(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function KV(t,e){return PA(t,"GET","/v2/recaptchaConfig",wf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WV(t,e){return PA(t,"POST","/v1/accounts:delete",e)}async function R2(t,e){return PA(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $V(t,e=!1){const r=Ds(t),n=await r.getIdToken(e),a=aS(n);Cr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:Sg(bC(a.auth_time)),issuedAtTime:Sg(bC(a.iat)),expirationTime:Sg(bC(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function bC(t){return Number(t)*1e3}function aS(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return s2("JWT malformed, contained fewer than 3 sections"),null;try{const a=eL(r);return a?JSON.parse(a):(s2("Failed to decode base64 JWT payload"),null)}catch(a){return s2("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function $N(t){const e=aS(t);return Cr(e,"internal-error"),Cr(typeof e.exp<"u","internal-error"),Cr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yg(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof MA&&YV(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function YV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sg(this.lastLoginAt),this.creationTime=Sg(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D2(t){var h;const e=t.auth,r=await t.getIdToken(),n=await Yg(t,R2(e,{idToken:r}));Cr(n==null?void 0:n.users.length,e,"internal-error");const a=n.users[0];t._notifyReloadListener(a);const s=(h=a.providerUserInfo)!=null&&h.length?gL(a.providerUserInfo):[],i=ZV(t.providerData,s),o=t.isAnonymous,l=!(t.email&&a.passwordHash)&&!(i!=null&&i.length),A=o?l:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new n_(a.createdAt,a.lastLoginAt),isAnonymous:A};Object.assign(t,d)}async function JV(t){const e=Ds(t);await D2(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ZV(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function gL(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ez(t,e){const r=await mL(t,{},async()=>{const n=Fx({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:s}=t.config,i=await pL(t,a,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return t.emulatorConfig&&Pm(t.emulatorConfig.host)&&(l.credentials="include"),hL.fetch()(i,l)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function tz(t,e){return PA(t,"POST","/v2/accounts:revokeToken",wf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Cr(e.idToken,"internal-error"),Cr(typeof e.idToken<"u","internal-error"),Cr(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$N(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Cr(e.length!==0,"internal-error");const r=$N(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Cr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await ez(e,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,i=new em;return n&&(Cr(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),a&&(Cr(typeof a=="string","internal-error",{appName:e}),i.accessToken=a),s&&(Cr(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new em,this.toJSON())}_performRefresh(){return gA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(t,e){Cr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _c{constructor({uid:e,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new XV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new n_(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await Yg(this,this.stsTokenManager.getToken(this.auth,e));return Cr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return $V(this,e)}reload(){return JV(this)}_assign(e){this!==e&&(Cr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new _c({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){Cr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await D2(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bc(this.auth.app))return Promise.reject(Jd(this.auth));const e=await this.getIdToken();return await Yg(this,WV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,i=r.photoURL??void 0,o=r.tenantId??void 0,l=r._redirectEventId??void 0,A=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:h,emailVerified:m,isAnonymous:g,providerData:b,stsTokenManager:w}=r;Cr(h&&w,e,"internal-error");const _=em.fromJSON(this.name,w);Cr(typeof h=="string",e,"internal-error"),_d(n,e.name),_d(a,e.name),Cr(typeof m=="boolean",e,"internal-error"),Cr(typeof g=="boolean",e,"internal-error"),_d(s,e.name),_d(i,e.name),_d(o,e.name),_d(l,e.name),_d(A,e.name),_d(d,e.name);const N=new _c({uid:h,auth:e,email:a,emailVerified:m,displayName:n,isAnonymous:g,photoURL:i,phoneNumber:s,tenantId:o,stsTokenManager:_,createdAt:A,lastLoginAt:d});return b&&Array.isArray(b)&&(N.providerData=b.map(k=>({...k}))),l&&(N._redirectEventId=l),N}static async _fromIdTokenResponse(e,r,n=!1){const a=new em;a.updateFromServerResponse(r);const s=new _c({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await D2(s),s}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];Cr(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?gL(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),o=new em;o.updateFromIdToken(n);const l=new _c({uid:a.localId,auth:e,stsTokenManager:o,isAnonymous:i}),A={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new n_(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,A),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=new Map;function xA(t){BA(t instanceof Function,"Expected a class definition");let e=YN.get(t);return e?(BA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,YN.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}xL.type="NONE";const XN=xL;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(t,e,r){return`firebase:${t}:${e}:${r}`}class tm{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=i2(this.userKey,a.apiKey,s),this.fullPersistenceKey=i2("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await R2(this.auth,{idToken:e}).catch(()=>{});return r?_c._fromGetAccountInfoResponse(this.auth,r,e):null}return _c._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new tm(xA(XN),e,n);const a=(await Promise.all(r.map(async A=>{if(await A._isAvailable())return A}))).filter(A=>A);let s=a[0]||xA(XN);const i=i2(n,e.config.apiKey,e.name);let o=null;for(const A of r)try{const d=await A._get(i);if(d){let h;if(typeof d=="string"){const m=await R2(e,{idToken:d}).catch(()=>{});if(!m)break;h=await _c._fromGetAccountInfoResponse(e,m,d)}else h=_c._fromJSON(e,d);A!==s&&(o=h),s=A;break}}catch{}const l=a.filter(A=>A._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new tm(s,e,n):(s=l[0],o&&await s._set(i,o.toJSON()),await Promise.all(r.map(async A=>{if(A!==s)try{await A._remove(i)}catch{}})),new tm(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bL(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vL(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(EL(e))return"Blackberry";if(_L(e))return"Webos";if(yL(e))return"Safari";if((e.includes("chrome/")||wL(e))&&!e.includes("edge/"))return"Chrome";if(CL(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function vL(t=Hi()){return/firefox\//i.test(t)}function yL(t=Hi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wL(t=Hi()){return/crios\//i.test(t)}function bL(t=Hi()){return/iemobile/i.test(t)}function CL(t=Hi()){return/android/i.test(t)}function EL(t=Hi()){return/blackberry/i.test(t)}function _L(t=Hi()){return/webos/i.test(t)}function sS(t=Hi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rz(t=Hi()){var e;return sS(t)&&!!((e=window.navigator)!=null&&e.standalone)}function nz(){return gH()&&document.documentMode===10}function SL(t=Hi()){return sS(t)||CL(t)||_L(t)||EL(t)||/windows phone/i.test(t)||bL(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(t,e=[]){let r;switch(t){case"Browser":r=JN(Hi());break;case"Worker":r=`${JN(Hi())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${jm}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((i,o)=>{try{const l=e(s);i(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sz(t,e={}){return PA(t,"GET","/v2/passwordPolicy",wf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz=6;class oz{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??iz,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lz{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ZN(this),this.idTokenSubscription=new ZN(this),this.beforeStateQueue=new az(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dL,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=xA(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await tm.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await R2(this,{idToken:e}),n=await _c._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(bc(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=n==null?void 0:n._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&(l!=null&&l.user)&&(n=l.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Cr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await D2(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=OV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bc(this.app))return Promise.reject(Jd(this));const r=e?Ds(e):null;return r&&Cr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Cr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bc(this.app)?Promise.reject(Jd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bc(this.app)?Promise.reject(Jd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xA(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sz(this),r=new oz(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ix("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await tz(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&xA(e)||this._popupRedirectResolver;Cr(r,this,"argument-error"),this.redirectPersistenceManager=await tm.create(this,[xA(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Cr(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,a);return()=>{i=!0,l()}}else{const l=e.addObserver(r);return()=>{i=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Cr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var r;if(bc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&MV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Dh(t){return Ds(t)}class ZN{constructor(e){this.auth=e,this.observer=null,this.addObserver=_H(r=>this.observer=r)}get next(){return Cr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cz(t){zy=t}function BL(t){return zy.loadJS(t)}function uz(){return zy.recaptchaEnterpriseScript}function Az(){return zy.gapiScript}function dz(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class fz{constructor(){this.enterprise=new hz}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class hz{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const mz="recaptcha-enterprise",NL="NO_RECAPTCHA";class pz{constructor(e){this.type=mz,this.auth=Dh(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,o)=>{KV(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const A=new qV(l);return s.tenantId==null?s._agentRecaptchaConfig=A:s._tenantRecaptchaConfigs[s.tenantId]=A,i(A.siteKey)}}).catch(l=>{o(l)})})}function a(s,i,o){const l=window.grecaptcha;WN(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(A=>{i(A)}).catch(()=>{i(NL)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new fz().execute("siteKey",{action:"verify"}):new Promise((s,i)=>{n(this.auth).then(o=>{if(!r&&WN(window.grecaptcha))a(o,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let l=uz();l.length!==0&&(l+=o),BL(l).then(()=>{a(o,s,i)}).catch(A=>{i(A)})}}).catch(o=>{i(o)})})}}async function ek(t,e,r,n=!1,a=!1){const s=new pz(t);let i;if(a)i=NL;else try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const o={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,A=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:A,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function a_(t,e,r,n,a){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ek(t,e,r,r==="getOobCode");return n(t,i)}else return n(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await ek(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gz(t,e){const r=eS(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(of(s,e??{}))return a;Ic(a,"already-initialized")}return r.initialize({options:e})}function xz(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(xA);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function vz(t,e,r){const n=Dh(t);Cr(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,s=kL(e),{host:i,port:o}=yz(e),l=o===null?"":`:${o}`,A={url:`${s}//${i}${l}/`},d=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){Cr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Cr(of(A,n.config.emulator)&&of(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=A,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Pm(i)?(aL(`${s}//${i}${l}`),sL("Auth",!0)):wz()}function kL(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yz(t){const e=kL(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:tk(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:tk(i)}}}function tk(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function wz(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return gA("not implemented")}_getIdTokenResponse(e){return gA("not implemented")}_linkToIdToken(e,r){return gA("not implemented")}_getReauthenticationResolver(e){return gA("not implemented")}}async function bz(t,e){return PA(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cz(t,e){return Vy(t,"POST","/v1/accounts:signInWithPassword",wf(t,e))}async function Ez(t,e){return PA(t,"POST","/v1/accounts:sendOobCode",wf(t,e))}async function _z(t,e){return Ez(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sz(t,e){return Vy(t,"POST","/v1/accounts:signInWithEmailLink",wf(t,e))}async function Tz(t,e){return Vy(t,"POST","/v1/accounts:signInWithEmailLink",wf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg extends iS{constructor(e,r,n,a=null){super("password",n),this._email=e,this._password=r,this._tenantId=a}static _fromEmailAndPassword(e,r){return new Xg(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Xg(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return a_(e,r,"signInWithPassword",Cz);case"emailLink":return Sz(e,{email:this._email,oobCode:this._password});default:Ic(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return a_(e,n,"signUpPassword",bz);case"emailLink":return Tz(e,{idToken:r,email:this._email,oobCode:this._password});default:Ic(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rm(t,e){return Vy(t,"POST","/v1/accounts:signInWithIdp",wf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bz="http://localhost";class bh extends iS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new bh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Ic("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const i=new bh(n,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return rm(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,rm(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,rm(e,r)}buildRequest(){const e={requestUri:Bz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Fx(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nz(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kz(t){const e=ag(sg(t)).link,r=e?ag(sg(e)).deep_link_id:null,n=ag(sg(t)).deep_link_id;return(n?ag(sg(n)).link:null)||n||r||e||t}class oS{constructor(e){const r=ag(sg(e)),n=r.apiKey??null,a=r.oobCode??null,s=Nz(r.mode??null);Cr(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=kz(e);try{return new oS(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(){this.providerId=Om.PROVIDER_ID}static credential(e,r){return Xg._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=oS.parseLink(r);return Cr(n,"argument-error"),Xg._fromEmailAndCode(e,n.code,n.tenantId)}}Om.PROVIDER_ID="password";Om.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Om.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx extends IL{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud extends Dx{constructor(){super("facebook.com")}static credential(e){return bh._fromParams({providerId:Ud.PROVIDER_ID,signInMethod:Ud.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ud.credentialFromTaggedObject(e)}static credentialFromError(e){return Ud.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ud.credential(e.oauthAccessToken)}catch{return null}}}Ud.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ud.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md extends Dx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return bh._fromParams({providerId:Md.PROVIDER_ID,signInMethod:Md.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Md.credentialFromTaggedObject(e)}static credentialFromError(e){return Md.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Md.credential(r,n)}catch{return null}}}Md.GOOGLE_SIGN_IN_METHOD="google.com";Md.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd extends Dx{constructor(){super("github.com")}static credential(e){return bh._fromParams({providerId:Pd.PROVIDER_ID,signInMethod:Pd.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pd.credentialFromTaggedObject(e)}static credentialFromError(e){return Pd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pd.credential(e.oauthAccessToken)}catch{return null}}}Pd.GITHUB_SIGN_IN_METHOD="github.com";Pd.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends Dx{constructor(){super("twitter.com")}static credential(e,r){return bh._fromParams({providerId:jd.PROVIDER_ID,signInMethod:jd.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return jd.credentialFromTaggedObject(e)}static credentialFromError(e){return jd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return jd.credential(r,n)}catch{return null}}}jd.TWITTER_SIGN_IN_METHOD="twitter.com";jd.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const s=await _c._fromIdTokenResponse(e,n,a),i=rk(n);return new bm({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=rk(n);return new bm({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function rk(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2 extends MA{constructor(e,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,L2.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new L2(e,r,n,a)}}function FL(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?L2._fromErrorAndOperation(t,s,e,n):s})}async function Iz(t,e,r=!1){const n=await Yg(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return bm._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fz(t,e,r=!1){const{auth:n}=t;if(bc(n.app))return Promise.reject(Jd(n));const a="reauthenticate";try{const s=await Yg(t,FL(n,a,e,t),r);Cr(s.idToken,n,"internal-error");const i=aS(s.idToken);Cr(i,n,"internal-error");const{sub:o}=i;return Cr(t.uid===o,n,"user-mismatch"),bm._forOperation(t,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ic(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RL(t,e,r=!1){if(bc(t.app))return Promise.reject(Jd(t));const n="signIn",a=await FL(t,n,e),s=await bm._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(s.user),s}async function Rz(t,e){return RL(Dh(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dz(t){const e=Dh(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Lz(t,e,r){const n=Dh(t);await a_(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",_z)}function Uz(t,e,r){return bc(t.app)?Promise.reject(Jd(t)):Rz(Ds(t),Om.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Dz(t),n})}function Mz(t,e,r,n){return Ds(t).onIdTokenChanged(e,r,n)}function Pz(t,e,r){return Ds(t).beforeAuthStateChanged(e,r)}function jz(t,e,r,n){return Ds(t).onAuthStateChanged(e,r,n)}function nk(t){return Ds(t).signOut()}const U2="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(U2,"1"),this.storage.removeItem(U2),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oz=1e3,Qz=10;class LL extends DL{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=SL(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,o,l)=>{this.notifyListeners(i,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);nz()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Qz):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},Oz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}LL.type="LOCAL";const Hz=LL;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL extends DL{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}UL.type="SESSION";const ML=UL;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vz(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new Gy(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:s}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const o=Array.from(i).map(async A=>A(r.origin,s)),l=await Vz(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zz{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((o,l)=>{const A=lS("",20);a.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(h){const m=h;if(m.data.eventId===A)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:A,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(){return window}function Gz(t){Eu().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(){return typeof Eu().WorkerGlobalScope<"u"&&typeof Eu().importScripts=="function"}async function qz(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Kz(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Wz(){return PL()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL="firebaseLocalStorageDb",$z=1,M2="firebaseLocalStorage",OL="fbase_key";class Lx{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function qy(t,e){return t.transaction([M2],e?"readwrite":"readonly").objectStore(M2)}function Yz(){const t=indexedDB.deleteDatabase(jL);return new Lx(t).toPromise()}function s_(){const t=indexedDB.open(jL,$z);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(M2,{keyPath:OL})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(M2)?e(n):(n.close(),await Yz(),e(await s_()))})})}async function ak(t,e,r){const n=qy(t,!0).put({[OL]:e,value:r});return new Lx(n).toPromise()}async function Xz(t,e){const r=qy(t,!1).get(e),n=await new Lx(r).toPromise();return n===void 0?null:n.value}function sk(t,e){const r=qy(t,!0).delete(e);return new Lx(r).toPromise()}const Jz=800,Zz=3;class QL{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await s_(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>Zz)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return PL()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gy._getInstance(Wz()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await qz(),!this.activeServiceWorker)return;this.sender=new zz(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Kz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await s_();return await ak(e,U2,"1"),await sk(e,U2),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>ak(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>Xz(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>sk(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const s=qy(a,!1).getAll();return new Lx(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:s}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Jz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}QL.type="LOCAL";const eG=QL;new Rx(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tG(t,e){return e?xA(e):(Cr(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS extends iS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rm(e,this._buildIdpRequest())}_linkToIdToken(e,r){return rm(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return rm(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function rG(t){return RL(t.auth,new cS(t),t.bypassAuthState)}function nG(t){const{auth:e,user:r}=t;return Cr(r,e,"internal-error"),Fz(r,new cS(t),t.bypassAuthState)}async function aG(t){const{auth:e,user:r}=t;return Cr(r,e,"internal-error"),Iz(r,new cS(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e,r,n,a,s=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:i,type:o}=e;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(A){this.reject(A)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rG;case"linkViaPopup":case"linkViaRedirect":return aG;case"reauthViaPopup":case"reauthViaRedirect":return nG;default:Ic(this.auth,"internal-error")}}resolve(e){BA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){BA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sG=new Rx(2e3,1e4);class W0 extends HL{constructor(e,r,n,a,s){super(e,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,W0.currentPopupAction&&W0.currentPopupAction.cancel(),W0.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Cr(e,this.auth,"internal-error"),e}async onExecution(){BA(this.filter.length===1,"Popup operations only handle one event");const e=lS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Cu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Cu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,W0.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sG.get())};e()}}W0.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iG="pendingRedirect",o2=new Map;class oG extends HL{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=o2.get(this.auth._key());if(!e){try{const n=await lG(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}o2.set(this.auth._key(),e)}return this.bypassAuthState||o2.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lG(t,e){const r=AG(e),n=uG(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function cG(t,e){o2.set(t._key(),e)}function uG(t){return xA(t._redirectPersistence)}function AG(t){return i2(iG,t.config.apiKey,t.name)}async function dG(t,e,r=!1){if(bc(t.app))return Promise.reject(Jd(t));const n=Dh(t),a=tG(n,e),i=await new oG(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fG=600*1e3;class hG{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mG(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!VL(e)){const a=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(Cu(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fG&&this.cachedEventUids.clear(),this.cachedEventUids.has(ik(e))}saveEventToCache(e){this.cachedEventUids.add(ik(e)),this.lastProcessedEventTime=Date.now()}}function ik(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function VL({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function mG(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VL(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pG(t,e={}){return PA(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xG=/^https?/;async function vG(t){if(t.config.emulator)return;const{authorizedDomains:e}=await pG(t);for(const r of e)try{if(yG(r))return}catch{}Ic(t,"unauthorized-domain")}function yG(t){const e=r_(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!xG.test(r))return!1;if(gG.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wG=new Rx(3e4,6e4);function ok(){const t=Eu().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function bG(t){return new Promise((e,r)=>{var a,s,i;function n(){ok(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ok(),r(Cu(t,"network-request-failed"))},timeout:wG.get()})}if((s=(a=Eu().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((i=Eu().gapi)!=null&&i.load)n();else{const o=dz("iframefcb");return Eu()[o]=()=>{gapi.load?n():r(Cu(t,"network-request-failed"))},BL(`${Az()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw l2=null,e})}let l2=null;function CG(t){return l2=l2||bG(t),l2}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EG=new Rx(5e3,15e3),_G="__/auth/iframe",SG="emulator/auth/iframe",TG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function NG(t){const e=t.config;Cr(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?nS(e,SG):`https://${t.config.authDomain}/${_G}`,n={apiKey:e.apiKey,appName:t.name,v:jm},a=BG.get(t.config.apiHost);a&&(n.eid=a);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${Fx(n).slice(1)}`}async function kG(t){const e=await CG(t),r=Eu().gapi;return Cr(r,t,"internal-error"),e.open({where:document.body,url:NG(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TG,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const i=Cu(t,"network-request-failed"),o=Eu().setTimeout(()=>{s(i)},EG.get());function l(){Eu().clearTimeout(o),a(n)}n.ping(l).then(l,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FG=500,RG=600,DG="_blank",LG="http://localhost";class lk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UG(t,e,r,n=FG,a=RG){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l={...IG,width:n.toString(),height:a.toString(),top:s,left:i},A=Hi().toLowerCase();r&&(o=wL(A)?DG:r),vL(A)&&(e=e||LG,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[g,b])=>`${m}${g}=${b},`,"");if(rz(A)&&o!=="_self")return MG(e||"",o),new lk(null);const h=window.open(e||"",o,d);Cr(h,t,"popup-blocked");try{h.focus()}catch{}return new lk(h)}function MG(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PG="__/auth/handler",jG="emulator/auth/handler",OG=encodeURIComponent("fac");async function ck(t,e,r,n,a,s){Cr(t.config.authDomain,t,"auth-domain-config-required"),Cr(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:jm,eventId:a};if(e instanceof IL){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",EH(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))i[d]=h}if(e instanceof Dx){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await t._getAppCheckToken(),A=l?`#${OG}=${encodeURIComponent(l)}`:"";return`${QG(t)}?${Fx(o).slice(1)}${A}`}function QG({config:t}){return t.emulator?nS(t,jG):`https://${t.authDomain}/${PG}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC="webStorageSupport";class HG{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ML,this._completeRedirectFn=dG,this._overrideRedirectResult=cG}async _openPopup(e,r,n,a){var i;BA((i=this.eventManagers[e._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await ck(e,r,n,r_(),a);return UG(e,s,lS())}async _openRedirect(e,r,n,a){await this._originValidation(e);const s=await ck(e,r,n,r_(),a);return Gz(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(BA(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await kG(e),n=new hG(e);return r.register("authEvent",a=>(Cr(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(CC,{type:CC},a=>{var i;const s=(i=a==null?void 0:a[0])==null?void 0:i[CC];s!==void 0&&r(!!s),Ic(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=vG(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return SL()||yL()||sS()}}const VG=HG;var uk="@firebase/auth",Ak="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zG{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Cr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GG(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qG(t){wm(new wh("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;Cr(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TL(t)},A=new lz(n,a,s,l);return xz(A,r),A},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),wm(new wh("auth-internal",e=>{const r=Dh(e.getProvider("auth").getImmediate());return(n=>new zG(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xd(uk,Ak,GG(t)),Xd(uk,Ak,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KG=300,WG=nL("authIdTokenMaxAge")||KG;let dk=null;const $G=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>WG)return;const a=r==null?void 0:r.token;dk!==a&&(dk=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function zL(t=lL()){const e=eS(t,"auth");if(e.isInitialized())return e.getImmediate();const r=gz(t,{popupRedirectResolver:VG,persistence:[eG,Hz,ML]}),n=nL("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=$G(s.toString());Pz(r,i,()=>i(r.currentUser)),Mz(r,o=>i(o))}}const a=tL("auth");return a&&vz(r,`http://${a}`),r}function YG(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}cz({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const s=Cu("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",YG().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qG("Browser");var XG="firebase",JG="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xd(XG,JG,"app");var fk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zd,GL;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,B){function T(){}T.prototype=B.prototype,C.D=B.prototype,C.prototype=new T,C.prototype.constructor=C,C.C=function(O,F,L){for(var Q=Array(arguments.length-2),q=2;q<arguments.length;q++)Q[q-2]=arguments[q];return B.prototype[F].apply(O,Q)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,B,T){T||(T=0);var O=Array(16);if(typeof B=="string")for(var F=0;16>F;++F)O[F]=B.charCodeAt(T++)|B.charCodeAt(T++)<<8|B.charCodeAt(T++)<<16|B.charCodeAt(T++)<<24;else for(F=0;16>F;++F)O[F]=B[T++]|B[T++]<<8|B[T++]<<16|B[T++]<<24;B=C.g[0],T=C.g[1],F=C.g[2];var L=C.g[3],Q=B+(L^T&(F^L))+O[0]+3614090360&4294967295;B=T+(Q<<7&4294967295|Q>>>25),Q=L+(F^B&(T^F))+O[1]+3905402710&4294967295,L=B+(Q<<12&4294967295|Q>>>20),Q=F+(T^L&(B^T))+O[2]+606105819&4294967295,F=L+(Q<<17&4294967295|Q>>>15),Q=T+(B^F&(L^B))+O[3]+3250441966&4294967295,T=F+(Q<<22&4294967295|Q>>>10),Q=B+(L^T&(F^L))+O[4]+4118548399&4294967295,B=T+(Q<<7&4294967295|Q>>>25),Q=L+(F^B&(T^F))+O[5]+1200080426&4294967295,L=B+(Q<<12&4294967295|Q>>>20),Q=F+(T^L&(B^T))+O[6]+2821735955&4294967295,F=L+(Q<<17&4294967295|Q>>>15),Q=T+(B^F&(L^B))+O[7]+4249261313&4294967295,T=F+(Q<<22&4294967295|Q>>>10),Q=B+(L^T&(F^L))+O[8]+1770035416&4294967295,B=T+(Q<<7&4294967295|Q>>>25),Q=L+(F^B&(T^F))+O[9]+2336552879&4294967295,L=B+(Q<<12&4294967295|Q>>>20),Q=F+(T^L&(B^T))+O[10]+4294925233&4294967295,F=L+(Q<<17&4294967295|Q>>>15),Q=T+(B^F&(L^B))+O[11]+2304563134&4294967295,T=F+(Q<<22&4294967295|Q>>>10),Q=B+(L^T&(F^L))+O[12]+1804603682&4294967295,B=T+(Q<<7&4294967295|Q>>>25),Q=L+(F^B&(T^F))+O[13]+4254626195&4294967295,L=B+(Q<<12&4294967295|Q>>>20),Q=F+(T^L&(B^T))+O[14]+2792965006&4294967295,F=L+(Q<<17&4294967295|Q>>>15),Q=T+(B^F&(L^B))+O[15]+1236535329&4294967295,T=F+(Q<<22&4294967295|Q>>>10),Q=B+(F^L&(T^F))+O[1]+4129170786&4294967295,B=T+(Q<<5&4294967295|Q>>>27),Q=L+(T^F&(B^T))+O[6]+3225465664&4294967295,L=B+(Q<<9&4294967295|Q>>>23),Q=F+(B^T&(L^B))+O[11]+643717713&4294967295,F=L+(Q<<14&4294967295|Q>>>18),Q=T+(L^B&(F^L))+O[0]+3921069994&4294967295,T=F+(Q<<20&4294967295|Q>>>12),Q=B+(F^L&(T^F))+O[5]+3593408605&4294967295,B=T+(Q<<5&4294967295|Q>>>27),Q=L+(T^F&(B^T))+O[10]+38016083&4294967295,L=B+(Q<<9&4294967295|Q>>>23),Q=F+(B^T&(L^B))+O[15]+3634488961&4294967295,F=L+(Q<<14&4294967295|Q>>>18),Q=T+(L^B&(F^L))+O[4]+3889429448&4294967295,T=F+(Q<<20&4294967295|Q>>>12),Q=B+(F^L&(T^F))+O[9]+568446438&4294967295,B=T+(Q<<5&4294967295|Q>>>27),Q=L+(T^F&(B^T))+O[14]+3275163606&4294967295,L=B+(Q<<9&4294967295|Q>>>23),Q=F+(B^T&(L^B))+O[3]+4107603335&4294967295,F=L+(Q<<14&4294967295|Q>>>18),Q=T+(L^B&(F^L))+O[8]+1163531501&4294967295,T=F+(Q<<20&4294967295|Q>>>12),Q=B+(F^L&(T^F))+O[13]+2850285829&4294967295,B=T+(Q<<5&4294967295|Q>>>27),Q=L+(T^F&(B^T))+O[2]+4243563512&4294967295,L=B+(Q<<9&4294967295|Q>>>23),Q=F+(B^T&(L^B))+O[7]+1735328473&4294967295,F=L+(Q<<14&4294967295|Q>>>18),Q=T+(L^B&(F^L))+O[12]+2368359562&4294967295,T=F+(Q<<20&4294967295|Q>>>12),Q=B+(T^F^L)+O[5]+4294588738&4294967295,B=T+(Q<<4&4294967295|Q>>>28),Q=L+(B^T^F)+O[8]+2272392833&4294967295,L=B+(Q<<11&4294967295|Q>>>21),Q=F+(L^B^T)+O[11]+1839030562&4294967295,F=L+(Q<<16&4294967295|Q>>>16),Q=T+(F^L^B)+O[14]+4259657740&4294967295,T=F+(Q<<23&4294967295|Q>>>9),Q=B+(T^F^L)+O[1]+2763975236&4294967295,B=T+(Q<<4&4294967295|Q>>>28),Q=L+(B^T^F)+O[4]+1272893353&4294967295,L=B+(Q<<11&4294967295|Q>>>21),Q=F+(L^B^T)+O[7]+4139469664&4294967295,F=L+(Q<<16&4294967295|Q>>>16),Q=T+(F^L^B)+O[10]+3200236656&4294967295,T=F+(Q<<23&4294967295|Q>>>9),Q=B+(T^F^L)+O[13]+681279174&4294967295,B=T+(Q<<4&4294967295|Q>>>28),Q=L+(B^T^F)+O[0]+3936430074&4294967295,L=B+(Q<<11&4294967295|Q>>>21),Q=F+(L^B^T)+O[3]+3572445317&4294967295,F=L+(Q<<16&4294967295|Q>>>16),Q=T+(F^L^B)+O[6]+76029189&4294967295,T=F+(Q<<23&4294967295|Q>>>9),Q=B+(T^F^L)+O[9]+3654602809&4294967295,B=T+(Q<<4&4294967295|Q>>>28),Q=L+(B^T^F)+O[12]+3873151461&4294967295,L=B+(Q<<11&4294967295|Q>>>21),Q=F+(L^B^T)+O[15]+530742520&4294967295,F=L+(Q<<16&4294967295|Q>>>16),Q=T+(F^L^B)+O[2]+3299628645&4294967295,T=F+(Q<<23&4294967295|Q>>>9),Q=B+(F^(T|~L))+O[0]+4096336452&4294967295,B=T+(Q<<6&4294967295|Q>>>26),Q=L+(T^(B|~F))+O[7]+1126891415&4294967295,L=B+(Q<<10&4294967295|Q>>>22),Q=F+(B^(L|~T))+O[14]+2878612391&4294967295,F=L+(Q<<15&4294967295|Q>>>17),Q=T+(L^(F|~B))+O[5]+4237533241&4294967295,T=F+(Q<<21&4294967295|Q>>>11),Q=B+(F^(T|~L))+O[12]+1700485571&4294967295,B=T+(Q<<6&4294967295|Q>>>26),Q=L+(T^(B|~F))+O[3]+2399980690&4294967295,L=B+(Q<<10&4294967295|Q>>>22),Q=F+(B^(L|~T))+O[10]+4293915773&4294967295,F=L+(Q<<15&4294967295|Q>>>17),Q=T+(L^(F|~B))+O[1]+2240044497&4294967295,T=F+(Q<<21&4294967295|Q>>>11),Q=B+(F^(T|~L))+O[8]+1873313359&4294967295,B=T+(Q<<6&4294967295|Q>>>26),Q=L+(T^(B|~F))+O[15]+4264355552&4294967295,L=B+(Q<<10&4294967295|Q>>>22),Q=F+(B^(L|~T))+O[6]+2734768916&4294967295,F=L+(Q<<15&4294967295|Q>>>17),Q=T+(L^(F|~B))+O[13]+1309151649&4294967295,T=F+(Q<<21&4294967295|Q>>>11),Q=B+(F^(T|~L))+O[4]+4149444226&4294967295,B=T+(Q<<6&4294967295|Q>>>26),Q=L+(T^(B|~F))+O[11]+3174756917&4294967295,L=B+(Q<<10&4294967295|Q>>>22),Q=F+(B^(L|~T))+O[2]+718787259&4294967295,F=L+(Q<<15&4294967295|Q>>>17),Q=T+(L^(F|~B))+O[9]+3951481745&4294967295,C.g[0]=C.g[0]+B&4294967295,C.g[1]=C.g[1]+(F+(Q<<21&4294967295|Q>>>11))&4294967295,C.g[2]=C.g[2]+F&4294967295,C.g[3]=C.g[3]+L&4294967295}n.prototype.u=function(C,B){B===void 0&&(B=C.length);for(var T=B-this.blockSize,O=this.B,F=this.h,L=0;L<B;){if(F==0)for(;L<=T;)a(this,C,L),L+=this.blockSize;if(typeof C=="string"){for(;L<B;)if(O[F++]=C.charCodeAt(L++),F==this.blockSize){a(this,O),F=0;break}}else for(;L<B;)if(O[F++]=C[L++],F==this.blockSize){a(this,O),F=0;break}}this.h=F,this.o+=B},n.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var B=1;B<C.length-8;++B)C[B]=0;var T=8*this.o;for(B=C.length-8;B<C.length;++B)C[B]=T&255,T/=256;for(this.u(C),C=Array(16),B=T=0;4>B;++B)for(var O=0;32>O;O+=8)C[T++]=this.g[B]>>>O&255;return C};function s(C,B){var T=o;return Object.prototype.hasOwnProperty.call(T,C)?T[C]:T[C]=B(C)}function i(C,B){this.h=B;for(var T=[],O=!0,F=C.length-1;0<=F;F--){var L=C[F]|0;O&&L==B||(T[F]=L,O=!1)}this.g=T}var o={};function l(C){return-128<=C&&128>C?s(C,function(B){return new i([B|0],0>B?-1:0)}):new i([C|0],0>C?-1:0)}function A(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return _(A(-C));for(var B=[],T=1,O=0;C>=T;O++)B[O]=C/T|0,T*=4294967296;return new i(B,0)}function d(C,B){if(C.length==0)throw Error("number format error: empty string");if(B=B||10,2>B||36<B)throw Error("radix out of range: "+B);if(C.charAt(0)=="-")return _(d(C.substring(1),B));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=A(Math.pow(B,8)),O=h,F=0;F<C.length;F+=8){var L=Math.min(8,C.length-F),Q=parseInt(C.substring(F,F+L),B);8>L?(L=A(Math.pow(B,L)),O=O.j(L).add(A(Q))):(O=O.j(T),O=O.add(A(Q)))}return O}var h=l(0),m=l(1),g=l(16777216);t=i.prototype,t.m=function(){if(w(this))return-_(this).m();for(var C=0,B=1,T=0;T<this.g.length;T++){var O=this.i(T);C+=(0<=O?O:4294967296+O)*B,B*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(b(this))return"0";if(w(this))return"-"+_(this).toString(C);for(var B=A(Math.pow(C,6)),T=this,O="";;){var F=P(T,B).g;T=N(T,F.j(B));var L=((0<T.g.length?T.g[0]:T.h)>>>0).toString(C);if(T=F,b(T))return L+O;for(;6>L.length;)L="0"+L;O=L+O}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function b(C){if(C.h!=0)return!1;for(var B=0;B<C.g.length;B++)if(C.g[B]!=0)return!1;return!0}function w(C){return C.h==-1}t.l=function(C){return C=N(this,C),w(C)?-1:b(C)?0:1};function _(C){for(var B=C.g.length,T=[],O=0;O<B;O++)T[O]=~C.g[O];return new i(T,~C.h).add(m)}t.abs=function(){return w(this)?_(this):this},t.add=function(C){for(var B=Math.max(this.g.length,C.g.length),T=[],O=0,F=0;F<=B;F++){var L=O+(this.i(F)&65535)+(C.i(F)&65535),Q=(L>>>16)+(this.i(F)>>>16)+(C.i(F)>>>16);O=Q>>>16,L&=65535,Q&=65535,T[F]=Q<<16|L}return new i(T,T[T.length-1]&-2147483648?-1:0)};function N(C,B){return C.add(_(B))}t.j=function(C){if(b(this)||b(C))return h;if(w(this))return w(C)?_(this).j(_(C)):_(_(this).j(C));if(w(C))return _(this.j(_(C)));if(0>this.l(g)&&0>C.l(g))return A(this.m()*C.m());for(var B=this.g.length+C.g.length,T=[],O=0;O<2*B;O++)T[O]=0;for(O=0;O<this.g.length;O++)for(var F=0;F<C.g.length;F++){var L=this.i(O)>>>16,Q=this.i(O)&65535,q=C.i(F)>>>16,ie=C.i(F)&65535;T[2*O+2*F]+=Q*ie,k(T,2*O+2*F),T[2*O+2*F+1]+=L*ie,k(T,2*O+2*F+1),T[2*O+2*F+1]+=Q*q,k(T,2*O+2*F+1),T[2*O+2*F+2]+=L*q,k(T,2*O+2*F+2)}for(O=0;O<B;O++)T[O]=T[2*O+1]<<16|T[2*O];for(O=B;O<2*B;O++)T[O]=0;return new i(T,0)};function k(C,B){for(;(C[B]&65535)!=C[B];)C[B+1]+=C[B]>>>16,C[B]&=65535,B++}function I(C,B){this.g=C,this.h=B}function P(C,B){if(b(B))throw Error("division by zero");if(b(C))return new I(h,h);if(w(C))return B=P(_(C),B),new I(_(B.g),_(B.h));if(w(B))return B=P(C,_(B)),new I(_(B.g),B.h);if(30<C.g.length){if(w(C)||w(B))throw Error("slowDivide_ only works with positive integers.");for(var T=m,O=B;0>=O.l(C);)T=M(T),O=M(O);var F=D(T,1),L=D(O,1);for(O=D(O,2),T=D(T,2);!b(O);){var Q=L.add(O);0>=Q.l(C)&&(F=F.add(T),L=Q),O=D(O,1),T=D(T,1)}return B=N(C,F.j(B)),new I(F,B)}for(F=h;0<=C.l(B);){for(T=Math.max(1,Math.floor(C.m()/B.m())),O=Math.ceil(Math.log(T)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),L=A(T),Q=L.j(B);w(Q)||0<Q.l(C);)T-=O,L=A(T),Q=L.j(B);b(L)&&(L=m),F=F.add(L),C=N(C,Q)}return new I(F,C)}t.A=function(C){return P(this,C).h},t.and=function(C){for(var B=Math.max(this.g.length,C.g.length),T=[],O=0;O<B;O++)T[O]=this.i(O)&C.i(O);return new i(T,this.h&C.h)},t.or=function(C){for(var B=Math.max(this.g.length,C.g.length),T=[],O=0;O<B;O++)T[O]=this.i(O)|C.i(O);return new i(T,this.h|C.h)},t.xor=function(C){for(var B=Math.max(this.g.length,C.g.length),T=[],O=0;O<B;O++)T[O]=this.i(O)^C.i(O);return new i(T,this.h^C.h)};function M(C){for(var B=C.g.length+1,T=[],O=0;O<B;O++)T[O]=C.i(O)<<1|C.i(O-1)>>>31;return new i(T,C.h)}function D(C,B){var T=B>>5;B%=32;for(var O=C.g.length-T,F=[],L=0;L<O;L++)F[L]=0<B?C.i(L+T)>>>B|C.i(L+T+1)<<32-B:C.i(L+T);return new i(F,C.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,GL=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=A,i.fromString=d,Zd=i}).apply(typeof fk<"u"?fk:typeof self<"u"?self:typeof window<"u"?window:{});var tv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qL,ig,KL,c2,i_,WL,$L,YL;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(S,Y,se){return S==Array.prototype||S==Object.prototype||(S[Y]=se.value),S};function r(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof tv=="object"&&tv];for(var Y=0;Y<S.length;++Y){var se=S[Y];if(se&&se.Math==Math)return se}throw Error("Cannot find global object")}var n=r(this);function a(S,Y){if(Y)e:{var se=n;S=S.split(".");for(var ye=0;ye<S.length-1;ye++){var Oe=S[ye];if(!(Oe in se))break e;se=se[Oe]}S=S[S.length-1],ye=se[S],Y=Y(ye),Y!=ye&&Y!=null&&e(se,S,{configurable:!0,writable:!0,value:Y})}}function s(S,Y){S instanceof String&&(S+="");var se=0,ye=!1,Oe={next:function(){if(!ye&&se<S.length){var Ze=se++;return{value:Y(Ze,S[Ze]),done:!1}}return ye=!0,{done:!0,value:void 0}}};return Oe[Symbol.iterator]=function(){return Oe},Oe}a("Array.prototype.values",function(S){return S||function(){return s(this,function(Y,se){return se})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(S){var Y=typeof S;return Y=Y!="object"?Y:S?Array.isArray(S)?"array":Y:"null",Y=="array"||Y=="object"&&typeof S.length=="number"}function A(S){var Y=typeof S;return Y=="object"&&S!=null||Y=="function"}function d(S,Y,se){return S.call.apply(S.bind,arguments)}function h(S,Y,se){if(!S)throw Error();if(2<arguments.length){var ye=Array.prototype.slice.call(arguments,2);return function(){var Oe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Oe,ye),S.apply(Y,Oe)}}return function(){return S.apply(Y,arguments)}}function m(S,Y,se){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function g(S,Y){var se=Array.prototype.slice.call(arguments,1);return function(){var ye=se.slice();return ye.push.apply(ye,arguments),S.apply(this,ye)}}function b(S,Y){function se(){}se.prototype=Y.prototype,S.aa=Y.prototype,S.prototype=new se,S.prototype.constructor=S,S.Qb=function(ye,Oe,Ze){for(var St=Array(arguments.length-2),hr=2;hr<arguments.length;hr++)St[hr-2]=arguments[hr];return Y.prototype[Oe].apply(ye,St)}}function w(S){const Y=S.length;if(0<Y){const se=Array(Y);for(let ye=0;ye<Y;ye++)se[ye]=S[ye];return se}return[]}function _(S,Y){for(let se=1;se<arguments.length;se++){const ye=arguments[se];if(l(ye)){const Oe=S.length||0,Ze=ye.length||0;S.length=Oe+Ze;for(let St=0;St<Ze;St++)S[Oe+St]=ye[St]}else S.push(ye)}}class N{constructor(Y,se){this.i=Y,this.j=se,this.h=0,this.g=null}get(){let Y;return 0<this.h?(this.h--,Y=this.g,this.g=Y.next,Y.next=null):Y=this.i(),Y}}function k(S){return/^[\s\xa0]*$/.test(S)}function I(){var S=o.navigator;return S&&(S=S.userAgent)?S:""}function P(S){return P[" "](S),S}P[" "]=function(){};var M=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function D(S,Y,se){for(const ye in S)Y.call(se,S[ye],ye,S)}function C(S,Y){for(const se in S)Y.call(void 0,S[se],se,S)}function B(S){const Y={};for(const se in S)Y[se]=S[se];return Y}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(S,Y){let se,ye;for(let Oe=1;Oe<arguments.length;Oe++){ye=arguments[Oe];for(se in ye)S[se]=ye[se];for(let Ze=0;Ze<T.length;Ze++)se=T[Ze],Object.prototype.hasOwnProperty.call(ye,se)&&(S[se]=ye[se])}}function F(S){var Y=1;S=S.split(":");const se=[];for(;0<Y&&S.length;)se.push(S.shift()),Y--;return S.length&&se.push(S.join(":")),se}function L(S){o.setTimeout(()=>{throw S},0)}function Q(){var S=z;let Y=null;return S.g&&(Y=S.g,S.g=S.g.next,S.g||(S.h=null),Y.next=null),Y}class q{constructor(){this.h=this.g=null}add(Y,se){const ye=ie.get();ye.set(Y,se),this.h?this.h.next=ye:this.g=ye,this.h=ye}}var ie=new N(()=>new Z,S=>S.reset());class Z{constructor(){this.next=this.g=this.h=null}set(Y,se){this.h=Y,this.g=se,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,ne=!1,z=new q,W=()=>{const S=o.Promise.resolve(void 0);ee=()=>{S.then(ce)}};var ce=()=>{for(var S;S=Q();){try{S.h.call(S.g)}catch(se){L(se)}var Y=ie;Y.j(S),100>Y.h&&(Y.h++,S.next=Y.g,Y.g=S)}ne=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(S,Y){this.type=S,this.g=this.target=Y,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var X=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var S=!1,Y=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const se=()=>{};o.addEventListener("test",se,Y),o.removeEventListener("test",se,Y)}catch{}return S}();function te(S,Y){if(K.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S){var se=this.type=S.type,ye=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;if(this.target=S.target||S.srcElement,this.g=Y,Y=S.relatedTarget){if(M){e:{try{P(Y.nodeName);var Oe=!0;break e}catch{}Oe=!1}Oe||(Y=null)}}else se=="mouseover"?Y=S.fromElement:se=="mouseout"&&(Y=S.toElement);this.relatedTarget=Y,ye?(this.clientX=ye.clientX!==void 0?ye.clientX:ye.pageX,this.clientY=ye.clientY!==void 0?ye.clientY:ye.pageY,this.screenX=ye.screenX||0,this.screenY=ye.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=typeof S.pointerType=="string"?S.pointerType:le[S.pointerType]||"",this.state=S.state,this.i=S,S.defaultPrevented&&te.aa.h.call(this)}}b(te,K);var le={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var de="closure_listenable_"+(1e6*Math.random()|0),me=0;function ge(S,Y,se,ye,Oe){this.listener=S,this.proxy=null,this.src=Y,this.type=se,this.capture=!!ye,this.ha=Oe,this.key=++me,this.da=this.fa=!1}function Se(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function xe(S){this.src=S,this.g={},this.h=0}xe.prototype.add=function(S,Y,se,ye,Oe){var Ze=S.toString();S=this.g[Ze],S||(S=this.g[Ze]=[],this.h++);var St=Fe(S,Y,ye,Oe);return-1<St?(Y=S[St],se||(Y.fa=!1)):(Y=new ge(Y,this.src,Ze,!!ye,Oe),Y.fa=se,S.push(Y)),Y};function ae(S,Y){var se=Y.type;if(se in S.g){var ye=S.g[se],Oe=Array.prototype.indexOf.call(ye,Y,void 0),Ze;(Ze=0<=Oe)&&Array.prototype.splice.call(ye,Oe,1),Ze&&(Se(Y),S.g[se].length==0&&(delete S.g[se],S.h--))}}function Fe(S,Y,se,ye){for(var Oe=0;Oe<S.length;++Oe){var Ze=S[Oe];if(!Ze.da&&Ze.listener==Y&&Ze.capture==!!se&&Ze.ha==ye)return Oe}return-1}var Xe="closure_lm_"+(1e6*Math.random()|0),De={};function Ce(S,Y,se,ye,Oe){if(Array.isArray(Y)){for(var Ze=0;Ze<Y.length;Ze++)Ce(S,Y[Ze],se,ye,Oe);return null}return se=Kt(se),S&&S[de]?S.K(Y,se,A(ye)?!!ye.capture:!1,Oe):ze(S,Y,se,!1,ye,Oe)}function ze(S,Y,se,ye,Oe,Ze){if(!Y)throw Error("Invalid event type");var St=A(Oe)?!!Oe.capture:!!Oe,hr=Nt(S);if(hr||(S[Xe]=hr=new xe(S)),se=hr.add(Y,se,ye,St,Ze),se.proxy)return se;if(ye=tt(),se.proxy=ye,ye.src=S,ye.listener=se,S.addEventListener)X||(Oe=St),Oe===void 0&&(Oe=!1),S.addEventListener(Y.toString(),ye,Oe);else if(S.attachEvent)S.attachEvent(Ct(Y.toString()),ye);else if(S.addListener&&S.removeListener)S.addListener(ye);else throw Error("addEventListener and attachEvent are unavailable.");return se}function tt(){function S(se){return Y.call(S.src,S.listener,se)}const Y=ut;return S}function it(S,Y,se,ye,Oe){if(Array.isArray(Y))for(var Ze=0;Ze<Y.length;Ze++)it(S,Y[Ze],se,ye,Oe);else ye=A(ye)?!!ye.capture:!!ye,se=Kt(se),S&&S[de]?(S=S.i,Y=String(Y).toString(),Y in S.g&&(Ze=S.g[Y],se=Fe(Ze,se,ye,Oe),-1<se&&(Se(Ze[se]),Array.prototype.splice.call(Ze,se,1),Ze.length==0&&(delete S.g[Y],S.h--)))):S&&(S=Nt(S))&&(Y=S.g[Y.toString()],S=-1,Y&&(S=Fe(Y,se,ye,Oe)),(se=-1<S?Y[S]:null)&&dt(se))}function dt(S){if(typeof S!="number"&&S&&!S.da){var Y=S.src;if(Y&&Y[de])ae(Y.i,S);else{var se=S.type,ye=S.proxy;Y.removeEventListener?Y.removeEventListener(se,ye,S.capture):Y.detachEvent?Y.detachEvent(Ct(se),ye):Y.addListener&&Y.removeListener&&Y.removeListener(ye),(se=Nt(Y))?(ae(se,S),se.h==0&&(se.src=null,Y[Xe]=null)):Se(S)}}}function Ct(S){return S in De?De[S]:De[S]="on"+S}function ut(S,Y){if(S.da)S=!0;else{Y=new te(Y,this);var se=S.listener,ye=S.ha||S.src;S.fa&&dt(S),S=se.call(ye,Y)}return S}function Nt(S){return S=S[Xe],S instanceof xe?S:null}var It="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kt(S){return typeof S=="function"?S:(S[It]||(S[It]=function(Y){return S.handleEvent(Y)}),S[It])}function Ut(){j.call(this),this.i=new xe(this),this.M=this,this.F=null}b(Ut,j),Ut.prototype[de]=!0,Ut.prototype.removeEventListener=function(S,Y,se,ye){it(this,S,Y,se,ye)};function Ht(S,Y){var se,ye=S.F;if(ye)for(se=[];ye;ye=ye.F)se.push(ye);if(S=S.M,ye=Y.type||Y,typeof Y=="string")Y=new K(Y,S);else if(Y instanceof K)Y.target=Y.target||S;else{var Oe=Y;Y=new K(ye,S),O(Y,Oe)}if(Oe=!0,se)for(var Ze=se.length-1;0<=Ze;Ze--){var St=Y.g=se[Ze];Oe=Yt(St,ye,!0,Y)&&Oe}if(St=Y.g=S,Oe=Yt(St,ye,!0,Y)&&Oe,Oe=Yt(St,ye,!1,Y)&&Oe,se)for(Ze=0;Ze<se.length;Ze++)St=Y.g=se[Ze],Oe=Yt(St,ye,!1,Y)&&Oe}Ut.prototype.N=function(){if(Ut.aa.N.call(this),this.i){var S=this.i,Y;for(Y in S.g){for(var se=S.g[Y],ye=0;ye<se.length;ye++)Se(se[ye]);delete S.g[Y],S.h--}}this.F=null},Ut.prototype.K=function(S,Y,se,ye){return this.i.add(String(S),Y,!1,se,ye)},Ut.prototype.L=function(S,Y,se,ye){return this.i.add(String(S),Y,!0,se,ye)};function Yt(S,Y,se,ye){if(Y=S.i.g[String(Y)],!Y)return!0;Y=Y.concat();for(var Oe=!0,Ze=0;Ze<Y.length;++Ze){var St=Y[Ze];if(St&&!St.da&&St.capture==se){var hr=St.listener,Yr=St.ha||St.src;St.fa&&ae(S.i,St),Oe=hr.call(Yr,ye)!==!1&&Oe}}return Oe&&!ye.defaultPrevented}function Mt(S,Y,se){if(typeof S=="function")se&&(S=m(S,se));else if(S&&typeof S.handleEvent=="function")S=m(S.handleEvent,S);else throw Error("Invalid listener argument");return 2147483647<Number(Y)?-1:o.setTimeout(S,Y||0)}function kt(S){S.g=Mt(()=>{S.g=null,S.i&&(S.i=!1,kt(S))},S.l);const Y=S.h;S.h=null,S.m.apply(null,Y)}class xt extends j{constructor(Y,se){super(),this.m=Y,this.l=se,this.h=null,this.i=!1,this.g=null}j(Y){this.h=arguments,this.g?this.i=!0:kt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vr(S){j.call(this),this.h=S,this.g={}}b(vr,j);var Wt=[];function un(S){D(S.g,function(Y,se){this.g.hasOwnProperty(se)&&dt(Y)},S),S.g={}}vr.prototype.N=function(){vr.aa.N.call(this),un(this)},vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pr=o.JSON.stringify,Rr=o.JSON.parse,kn=class{stringify(S){return o.JSON.stringify(S,void 0)}parse(S){return o.JSON.parse(S,void 0)}};function Nr(){}Nr.prototype.h=null;function ls(S){return S.h||(S.h=S.i())}function en(){}var ea={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ha(){K.call(this,"d")}b(ha,K);function Lr(){K.call(this,"c")}b(Lr,K);var tr={},Qr=null;function cs(){return Qr=Qr||new Ut}tr.La="serverreachability";function qn(S){K.call(this,tr.La,S)}b(qn,K);function wa(S){const Y=cs();Ht(Y,new qn(Y))}tr.STAT_EVENT="statevent";function Es(S,Y){K.call(this,tr.STAT_EVENT,S),this.stat=Y}b(Es,K);function Qt(S){const Y=cs();Ht(Y,new Es(Y,S))}tr.Ma="timingevent";function An(S,Y){K.call(this,tr.Ma,S),this.size=Y}b(An,K);function tn(S,Y){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){S()},Y)}function In(){this.g=!0}In.prototype.xa=function(){this.g=!1};function Un(S,Y,se,ye,Oe,Ze){S.info(function(){if(S.g)if(Ze)for(var St="",hr=Ze.split("&"),Yr=0;Yr<hr.length;Yr++){var Tr=hr[Yr].split("=");if(1<Tr.length){var En=Tr[0];Tr=Tr[1];var Fn=En.split("_");St=2<=Fn.length&&Fn[1]=="type"?St+(En+"="+Tr+"&"):St+(En+"=redacted&")}}else St=null;else St=Ze;return"XMLHTTP REQ ("+ye+") [attempt "+Oe+"]: "+Y+`
`+se+`
`+St})}function Kn(S,Y,se,ye,Oe,Ze,St){S.info(function(){return"XMLHTTP RESP ("+ye+") [ attempt "+Oe+"]: "+Y+`
`+se+`
`+Ze+" "+St})}function fe(S,Y,se,ye){S.info(function(){return"XMLHTTP TEXT ("+Y+"): "+Ee(S,se)+(ye?" "+ye:"")})}function Ne(S,Y){S.info(function(){return"TIMEOUT: "+Y})}In.prototype.info=function(){};function Ee(S,Y){if(!S.g)return Y;if(!Y)return null;try{var se=JSON.parse(Y);if(se){for(S=0;S<se.length;S++)if(Array.isArray(se[S])){var ye=se[S];if(!(2>ye.length)){var Oe=ye[1];if(Array.isArray(Oe)&&!(1>Oe.length)){var Ze=Oe[0];if(Ze!="noop"&&Ze!="stop"&&Ze!="close")for(var St=1;St<Oe.length;St++)Oe[St]=""}}}}return pr(se)}catch{return Y}}var _e={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Te={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ke;function qe(){}b(qe,Nr),qe.prototype.g=function(){return new XMLHttpRequest},qe.prototype.i=function(){return{}},ke=new qe;function rt(S,Y,se,ye){this.j=S,this.i=Y,this.l=se,this.R=ye||1,this.U=new vr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qe}function Qe(){this.i=null,this.g="",this.h=!1}var We={},Je={};function yt(S,Y,se){S.L=1,S.v=ll(Ts(Y)),S.m=se,S.P=!0,Bt(S,null)}function Bt(S,Y){S.F=Date.now(),Ft(S),S.A=Ts(S.v);var se=S.A,ye=S.R;Array.isArray(ye)||(ye=[String(ye)]),fr(se.i,"t",ye),S.C=0,se=S.j.J,S.h=new Qe,S.g=Ae(S.j,se?Y:null,!S.m),0<S.O&&(S.M=new xt(m(S.Y,S,S.g),S.O)),Y=S.U,se=S.g,ye=S.ca;var Oe="readystatechange";Array.isArray(Oe)||(Oe&&(Wt[0]=Oe.toString()),Oe=Wt);for(var Ze=0;Ze<Oe.length;Ze++){var St=Ce(se,Oe[Ze],ye||Y.handleEvent,!1,Y.h||Y);if(!St)break;Y.g[St.key]=St}Y=S.H?B(S.H):{},S.m?(S.u||(S.u="POST"),Y["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.A,S.u,S.m,Y)):(S.u="GET",S.g.ea(S.A,S.u,null,Y)),wa(),Un(S.i,S.u,S.A,S.l,S.R,S.m)}rt.prototype.ca=function(S){S=S.target;const Y=this.M;Y&&Da(S)==3?Y.j():this.Y(S)},rt.prototype.Y=function(S){try{if(S==this.g)e:{const Fn=Da(this.g);var Y=this.g.Ba();const co=this.g.Z();if(!(3>Fn)&&(Fn!=3||this.g&&(this.h.h||this.g.oa()||WA(this.g)))){this.J||Fn!=4||Y==7||(Y==8||0>=co?wa(3):wa(2)),Ur(this);var se=this.g.Z();this.X=se;t:if(Pt(this)){var ye=WA(this.g);S="";var Oe=ye.length,Ze=Da(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hr(this),Mr(this);var St="";break t}this.h.i=new o.TextDecoder}for(Y=0;Y<Oe;Y++)this.h.h=!0,S+=this.h.i.decode(ye[Y],{stream:!(Ze&&Y==Oe-1)});ye.length=0,this.h.g+=S,this.C=0,St=this.h.g}else St=this.g.oa();if(this.o=se==200,Kn(this.i,this.u,this.A,this.l,this.R,Fn,se),this.o){if(this.T&&!this.K){t:{if(this.g){var hr,Yr=this.g;if((hr=Yr.g?Yr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(hr)){var Tr=hr;break t}}Tr=null}if(se=Tr)fe(this.i,this.l,se,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ia(this,se);else{this.o=!1,this.s=3,Qt(12),Hr(this),Mr(this);break e}}if(this.P){se=!0;let ba;for(;!this.J&&this.C<St.length;)if(ba=Tt(this,St),ba==Je){Fn==4&&(this.s=4,Qt(14),se=!1),fe(this.i,this.l,null,"[Incomplete Response]");break}else if(ba==We){this.s=4,Qt(15),fe(this.i,this.l,St,"[Invalid Chunk]"),se=!1;break}else fe(this.i,this.l,ba,null),Ia(this,ba);if(Pt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fn!=4||St.length!=0||this.h.h||(this.s=1,Qt(16),se=!1),this.o=this.o&&se,!se)fe(this.i,this.l,St,"[Invalid Chunked Response]"),Hr(this),Mr(this);else if(0<St.length&&!this.W){this.W=!0;var En=this.j;En.g==this&&En.ba&&!En.M&&(En.j.info("Great, no buffering proxy detected. Bytes received: "+St.length),hl(En),En.M=!0,Qt(11))}}else fe(this.i,this.l,St,null),Ia(this,St);Fn==4&&Hr(this),this.o&&!this.J&&(Fn==4?ml(this.j,this):(this.o=!1,Ft(this)))}else Al(this.g),se==400&&0<St.indexOf("Unknown SID")?(this.s=3,Qt(12)):(this.s=0,Qt(13)),Hr(this),Mr(this)}}}catch{}finally{}};function Pt(S){return S.g?S.u=="GET"&&S.L!=2&&S.j.Ca:!1}function Tt(S,Y){var se=S.C,ye=Y.indexOf(`
`,se);return ye==-1?Je:(se=Number(Y.substring(se,ye)),isNaN(se)?We:(ye+=1,ye+se>Y.length?Je:(Y=Y.slice(ye,ye+se),S.C=ye+se,Y)))}rt.prototype.cancel=function(){this.J=!0,Hr(this)};function Ft(S){S.S=Date.now()+S.I,cr(S,S.I)}function cr(S,Y){if(S.B!=null)throw Error("WatchDog timer not null");S.B=tn(m(S.ba,S),Y)}function Ur(S){S.B&&(o.clearTimeout(S.B),S.B=null)}rt.prototype.ba=function(){this.B=null;const S=Date.now();0<=S-this.S?(Ne(this.i,this.A),this.L!=2&&(wa(),Qt(17)),Hr(this),this.s=2,Mr(this)):cr(this,this.S-S)};function Mr(S){S.j.G==0||S.J||ml(S.j,S)}function Hr(S){Ur(S);var Y=S.M;Y&&typeof Y.ma=="function"&&Y.ma(),S.M=null,un(S.U),S.g&&(Y=S.g,S.g=null,Y.abort(),Y.ma())}function Ia(S,Y){try{var se=S.j;if(se.G!=0&&(se.g==S||_s(se.h,S))){if(!S.K&&_s(se.h,S)&&se.G==3){try{var ye=se.Da.g.parse(Y)}catch{ye=null}if(Array.isArray(ye)&&ye.length==3){var Oe=ye;if(Oe[0]==0){e:if(!se.u){if(se.g)if(se.g.F+3e3<S.F)Uo(se),Oc(se);else break e;Zl(se),Qt(18)}}else se.za=Oe[1],0<se.za-se.T&&37500>Oe[2]&&se.F&&se.v==0&&!se.C&&(se.C=tn(m(se.Za,se),6e3));if(1>=Ga(se.h)&&se.ca){try{se.ca()}catch{}se.ca=void 0}}else js(se,11)}else if((S.K||se.g==S)&&Uo(se),!k(Y))for(Oe=se.Da.g.parse(Y),Y=0;Y<Oe.length;Y++){let Tr=Oe[Y];if(se.T=Tr[0],Tr=Tr[1],se.G==2)if(Tr[0]=="c"){se.K=Tr[1],se.ia=Tr[2];const En=Tr[3];En!=null&&(se.la=En,se.j.info("VER="+se.la));const Fn=Tr[4];Fn!=null&&(se.Aa=Fn,se.j.info("SVER="+se.Aa));const co=Tr[5];co!=null&&typeof co=="number"&&0<co&&(ye=1.5*co,se.L=ye,se.j.info("backChannelRequestTimeoutMs_="+ye)),ye=se;const ba=S.g;if(ba){const xi=ba.g?ba.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xi){var Ze=ye.h;Ze.g||xi.indexOf("spdy")==-1&&xi.indexOf("quic")==-1&&xi.indexOf("h2")==-1||(Ze.j=Ze.l,Ze.g=new Set,Ze.h&&(Wn(Ze,Ze.h),Ze.h=null))}if(ye.D){const pl=ba.g?ba.g.getResponseHeader("X-HTTP-Session-Id"):null;pl&&(ye.ya=pl,Cn(ye.I,ye.D,pl))}}se.G=3,se.l&&se.l.ua(),se.ba&&(se.R=Date.now()-S.F,se.j.info("Handshake RTT: "+se.R+"ms")),ye=se;var St=S;if(ye.qa=V(ye,ye.J?ye.ia:null,ye.W),St.K){As(ye.h,St);var hr=St,Yr=ye.L;Yr&&(hr.I=Yr),hr.B&&(Ur(hr),Ft(hr)),ye.g=St}else Hc(ye);0<se.i.length&&Qc(se)}else Tr[0]!="stop"&&Tr[0]!="close"||js(se,7);else se.G==3&&(Tr[0]=="stop"||Tr[0]=="close"?Tr[0]=="stop"?js(se,7):Lo(se):Tr[0]!="noop"&&se.l&&se.l.ta(Tr),se.v=0)}}wa(4)}catch{}}var fi=class{constructor(S,Y){this.g=S,this.map=Y}};function Fa(S){this.l=S||10,o.PerformanceNavigationTiming?(S=o.performance.getEntriesByType("navigation"),S=0<S.length&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function us(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function Ga(S){return S.h?1:S.g?S.g.size:0}function _s(S,Y){return S.h?S.h==Y:S.g?S.g.has(Y):!1}function Wn(S,Y){S.g?S.g.add(Y):S.h=Y}function As(S,Y){S.h&&S.h==Y?S.h=null:S.g&&S.g.has(Y)&&S.g.delete(Y)}Fa.prototype.cancel=function(){if(this.i=Mc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function Mc(S){if(S.h!=null)return S.i.concat(S.h.D);if(S.g!=null&&S.g.size!==0){let Y=S.i;for(const se of S.g.values())Y=Y.concat(se.D);return Y}return w(S.i)}function GA(S){if(S.V&&typeof S.V=="function")return S.V();if(typeof Map<"u"&&S instanceof Map||typeof Set<"u"&&S instanceof Set)return Array.from(S.values());if(typeof S=="string")return S.split("");if(l(S)){for(var Y=[],se=S.length,ye=0;ye<se;ye++)Y.push(S[ye]);return Y}Y=[],se=0;for(ye in S)Y[se++]=S[ye];return Y}function sl(S){if(S.na&&typeof S.na=="function")return S.na();if(!S.V||typeof S.V!="function"){if(typeof Map<"u"&&S instanceof Map)return Array.from(S.keys());if(!(typeof Set<"u"&&S instanceof Set)){if(l(S)||typeof S=="string"){var Y=[];S=S.length;for(var se=0;se<S;se++)Y.push(se);return Y}Y=[],se=0;for(const ye in S)Y[se++]=ye;return Y}}}function Pu(S,Y){if(S.forEach&&typeof S.forEach=="function")S.forEach(Y,void 0);else if(l(S)||typeof S=="string")Array.prototype.forEach.call(S,Y,void 0);else for(var se=sl(S),ye=GA(S),Oe=ye.length,Ze=0;Ze<Oe;Ze++)Y.call(void 0,ye[Ze],se&&se[Ze],S)}var Ss=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pc(S,Y){if(S){S=S.split("&");for(var se=0;se<S.length;se++){var ye=S[se].indexOf("="),Oe=null;if(0<=ye){var Ze=S[se].substring(0,ye);Oe=S[se].substring(ye+1)}else Ze=S[se];Y(Ze,Oe?decodeURIComponent(Oe.replace(/\+/g," ")):"")}}}function dn(S){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,S instanceof dn){this.h=S.h,il(this,S.j),this.o=S.o,this.g=S.g,ol(this,S.s),this.l=S.l;var Y=S.i,se=new no;se.i=Y.i,Y.g&&(se.g=new Map(Y.g),se.h=Y.h),ro(this,se),this.m=S.m}else S&&(Y=String(S).match(Ss))?(this.h=!1,il(this,Y[1]||"",!0),this.o=hi(Y[2]||""),this.g=hi(Y[3]||"",!0),ol(this,Y[4]),this.l=hi(Y[5]||"",!0),ro(this,Y[6]||"",!0),this.m=hi(Y[7]||"")):(this.h=!1,this.i=new no(null,this.h))}dn.prototype.toString=function(){var S=[],Y=this.j;Y&&S.push(ko(Y,ju,!0),":");var se=this.g;return(se||Y=="file")&&(S.push("//"),(Y=this.o)&&S.push(ko(Y,ju,!0),"@"),S.push(encodeURIComponent(String(se)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),se=this.s,se!=null&&S.push(":",String(se))),(se=this.l)&&(this.g&&se.charAt(0)!="/"&&S.push("/"),S.push(ko(se,se.charAt(0)=="/"?Io:Ou,!0))),(se=this.i.toString())&&S.push("?",se),(se=this.m)&&S.push("#",ko(se,Fo)),S.join("")};function Ts(S){return new dn(S)}function il(S,Y,se){S.j=se?hi(Y,!0):Y,S.j&&(S.j=S.j.replace(/:$/,""))}function ol(S,Y){if(Y){if(Y=Number(Y),isNaN(Y)||0>Y)throw Error("Bad port number "+Y);S.s=Y}else S.s=null}function ro(S,Y,se){Y instanceof no?(S.i=Y,KA(S.i,S.h)):(se||(Y=ko(Y,jc)),S.i=new no(Y,S.h))}function Cn(S,Y,se){S.i.set(Y,se)}function ll(S){return Cn(S,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),S}function hi(S,Y){return S?Y?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function ko(S,Y,se){return typeof S=="string"?(S=encodeURI(S).replace(Y,qA),se&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function qA(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var ju=/[#\/\?@]/g,Ou=/[#\?:]/g,Io=/[#\?]/g,jc=/[#\?@]/g,Fo=/#/g;function no(S,Y){this.h=this.g=null,this.i=S||null,this.j=!!Y}function Mn(S){S.g||(S.g=new Map,S.h=0,S.i&&Pc(S.i,function(Y,se){S.add(decodeURIComponent(Y.replace(/\+/g," ")),se)}))}t=no.prototype,t.add=function(S,Y){Mn(this),this.i=null,S=so(this,S);var se=this.g.get(S);return se||this.g.set(S,se=[]),se.push(Y),this.h+=1,this};function Ro(S,Y){Mn(S),Y=so(S,Y),S.g.has(Y)&&(S.i=null,S.h-=S.g.get(Y).length,S.g.delete(Y))}function ao(S,Y){return Mn(S),Y=so(S,Y),S.g.has(Y)}t.forEach=function(S,Y){Mn(this),this.g.forEach(function(se,ye){se.forEach(function(Oe){S.call(Y,Oe,ye,this)},this)},this)},t.na=function(){Mn(this);const S=Array.from(this.g.values()),Y=Array.from(this.g.keys()),se=[];for(let ye=0;ye<Y.length;ye++){const Oe=S[ye];for(let Ze=0;Ze<Oe.length;Ze++)se.push(Y[ye])}return se},t.V=function(S){Mn(this);let Y=[];if(typeof S=="string")ao(this,S)&&(Y=Y.concat(this.g.get(so(this,S))));else{S=Array.from(this.g.values());for(let se=0;se<S.length;se++)Y=Y.concat(S[se])}return Y},t.set=function(S,Y){return Mn(this),this.i=null,S=so(this,S),ao(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[Y]),this.h+=1,this},t.get=function(S,Y){return S?(S=this.V(S),0<S.length?String(S[0]):Y):Y};function fr(S,Y,se){Ro(S,Y),0<se.length&&(S.i=null,S.g.set(so(S,Y),w(se)),S.h+=se.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],Y=Array.from(this.g.keys());for(var se=0;se<Y.length;se++){var ye=Y[se];const Ze=encodeURIComponent(String(ye)),St=this.V(ye);for(ye=0;ye<St.length;ye++){var Oe=Ze;St[ye]!==""&&(Oe+="="+encodeURIComponent(String(St[ye]))),S.push(Oe)}}return this.i=S.join("&")};function so(S,Y){return Y=String(Y),S.j&&(Y=Y.toLowerCase()),Y}function KA(S,Y){Y&&!S.j&&(Mn(S),S.i=null,S.g.forEach(function(se,ye){var Oe=ye.toLowerCase();ye!=Oe&&(Ro(this,ye),fr(this,Oe,se))},S)),S.j=Y}function Us(S,Y){const se=new In;if(o.Image){const ye=new Image;ye.onload=g(Xs,se,"TestLoadImage: loaded",!0,Y,ye),ye.onerror=g(Xs,se,"TestLoadImage: error",!1,Y,ye),ye.onabort=g(Xs,se,"TestLoadImage: abort",!1,Y,ye),ye.ontimeout=g(Xs,se,"TestLoadImage: timeout",!1,Y,ye),o.setTimeout(function(){ye.ontimeout&&ye.ontimeout()},1e4),ye.src=S}else Y(!1)}function mi(S,Y){const se=new In,ye=new AbortController,Oe=setTimeout(()=>{ye.abort(),Xs(se,"TestPingServer: timeout",!1,Y)},1e4);fetch(S,{signal:ye.signal}).then(Ze=>{clearTimeout(Oe),Ze.ok?Xs(se,"TestPingServer: ok",!0,Y):Xs(se,"TestPingServer: server error",!1,Y)}).catch(()=>{clearTimeout(Oe),Xs(se,"TestPingServer: error",!1,Y)})}function Xs(S,Y,se,ye,Oe){try{Oe&&(Oe.onload=null,Oe.onerror=null,Oe.onabort=null,Oe.ontimeout=null),ye(se)}catch{}}function io(){this.g=new kn}function pi(S,Y,se){const ye=se||"";try{Pu(S,function(Oe,Ze){let St=Oe;A(Oe)&&(St=pr(Oe)),Y.push(ye+Ze+"="+encodeURIComponent(St))})}catch(Oe){throw Y.push(ye+"type="+encodeURIComponent("_badmap")),Oe}}function cl(S){this.l=S.Ub||null,this.j=S.eb||!1}b(cl,Nr),cl.prototype.g=function(){return new Do(this.l,this.j)},cl.prototype.i=function(S){return function(){return S}}({});function Do(S,Y){Ut.call(this),this.D=S,this.o=Y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Do,Ut),t=Do.prototype,t.open=function(S,Y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=S,this.A=Y,this.readyState=1,Ms(this)},t.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const Y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};S&&(Y.body=S),(this.D||o).fetch(new Request(this.A,Y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gi(this)),this.readyState=0},t.Sa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,Ms(this)),this.g&&(this.readyState=3,Ms(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qu(this)}else S.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qu(S){S.j.read().then(S.Pa.bind(S)).catch(S.ga.bind(S))}t.Pa=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var Y=S.value?S.value:new Uint8Array(0);(Y=this.v.decode(Y,{stream:!S.done}))&&(this.response=this.responseText+=Y)}S.done?gi(this):Ms(this),this.readyState==3&&Qu(this)}},t.Ra=function(S){this.g&&(this.response=this.responseText=S,gi(this))},t.Qa=function(S){this.g&&(this.response=S,gi(this))},t.ga=function(){this.g&&gi(this)};function gi(S){S.readyState=4,S.l=null,S.j=null,S.v=null,Ms(S)}t.setRequestHeader=function(S,Y){this.u.append(S,Y)},t.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],Y=this.h.entries();for(var se=Y.next();!se.done;)se=se.value,S.push(se[0]+": "+se[1]),se=Y.next();return S.join(`\r
`)};function Ms(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty(Do.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function oo(S){let Y="";return D(S,function(se,ye){Y+=ye,Y+=":",Y+=se,Y+=`\r
`}),Y}function Ra(S,Y,se){e:{for(ye in se){var ye=!1;break e}ye=!0}ye||(se=oo(se),typeof S=="string"?se!=null&&encodeURIComponent(String(se)):Cn(S,Y,se))}function $r(S){Ut.call(this),this.headers=new Map,this.o=S||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b($r,Ut);var ul=/^https?$/i,lo=["POST","PUT"];t=$r.prototype,t.Ha=function(S){this.J=S},t.ea=function(S,Y,se,ye){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);Y=Y?Y.toUpperCase():"GET",this.D=S,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ke.g(),this.v=this.o?ls(this.o):ls(ke),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(Y,String(S),!0),this.B=!1}catch(Ze){Hu(this,Ze);return}if(S=se||"",se=new Map(this.headers),ye)if(Object.getPrototypeOf(ye)===Object.prototype)for(var Oe in ye)se.set(Oe,ye[Oe]);else if(typeof ye.keys=="function"&&typeof ye.get=="function")for(const Ze of ye.keys())se.set(Ze,ye.get(Ze));else throw Error("Unknown input type for opt_headers: "+String(ye));ye=Array.from(se.keys()).find(Ze=>Ze.toLowerCase()=="content-type"),Oe=o.FormData&&S instanceof o.FormData,!(0<=Array.prototype.indexOf.call(lo,Y,void 0))||ye||Oe||se.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ze,St]of se)this.g.setRequestHeader(Ze,St);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ps(this),this.u=!0,this.g.send(S),this.u=!1}catch(Ze){Hu(this,Ze)}};function Hu(S,Y){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=Y,S.m=5,Wl(S),qi(S)}function Wl(S){S.A||(S.A=!0,Ht(S,"complete"),Ht(S,"error"))}t.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=S||7,Ht(this,"complete"),Ht(this,"abort"),qi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qi(this,!0)),$r.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?$l(this):this.bb())},t.bb=function(){$l(this)};function $l(S){if(S.h&&typeof i<"u"&&(!S.v[1]||Da(S)!=4||S.Z()!=2)){if(S.u&&Da(S)==4)Mt(S.Ea,0,S);else if(Ht(S,"readystatechange"),Da(S)==4){S.h=!1;try{const St=S.Z();e:switch(St){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var Y=!0;break e;default:Y=!1}var se;if(!(se=Y)){var ye;if(ye=St===0){var Oe=String(S.D).match(Ss)[1]||null;!Oe&&o.self&&o.self.location&&(Oe=o.self.location.protocol.slice(0,-1)),ye=!ul.test(Oe?Oe.toLowerCase():"")}se=ye}if(se)Ht(S,"complete"),Ht(S,"success");else{S.m=6;try{var Ze=2<Da(S)?S.g.statusText:""}catch{Ze=""}S.l=Ze+" ["+S.Z()+"]",Wl(S)}}finally{qi(S)}}}}function qi(S,Y){if(S.g){Ps(S);const se=S.g,ye=S.v[0]?()=>{}:null;S.g=null,S.v=null,Y||Ht(S,"ready");try{se.onreadystatechange=ye}catch{}}}function Ps(S){S.I&&(o.clearTimeout(S.I),S.I=null)}t.isActive=function(){return!!this.g};function Da(S){return S.g?S.g.readyState:0}t.Z=function(){try{return 2<Da(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(S){if(this.g){var Y=this.g.responseText;return S&&Y.indexOf(S)==0&&(Y=Y.substring(S.length)),Rr(Y)}};function WA(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.H){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function Al(S){const Y={};S=(S.g&&2<=Da(S)&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let ye=0;ye<S.length;ye++){if(k(S[ye]))continue;var se=F(S[ye]);const Oe=se[0];if(se=se[1],typeof se!="string")continue;se=se.trim();const Ze=Y[Oe]||[];Y[Oe]=Ze,Ze.push(se)}C(Y,function(ye){return ye.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bs(S,Y,se){return se&&se.internalChannelParams&&se.internalChannelParams[S]||Y}function dl(S){this.Aa=0,this.i=[],this.j=new In,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bs("failFast",!1,S),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bs("baseRetryDelayMs",5e3,S),this.cb=Bs("retryDelaySeedMs",1e4,S),this.Wa=Bs("forwardChannelMaxRetries",2,S),this.wa=Bs("forwardChannelRequestTimeoutMs",2e4,S),this.pa=S&&S.xmlHttpFactory||void 0,this.Xa=S&&S.Tb||void 0,this.Ca=S&&S.useFetchStreams||!1,this.L=void 0,this.J=S&&S.supportsCrossDomainXhr||!1,this.K="",this.h=new Fa(S&&S.concurrentRequestLimit),this.Da=new io,this.P=S&&S.fastHandshake||!1,this.O=S&&S.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=S&&S.Rb||!1,S&&S.xa&&this.j.xa(),S&&S.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&S&&S.detectBufferingProxy||!1,this.ja=void 0,S&&S.longPollingTimeout&&0<S.longPollingTimeout&&(this.ja=S.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=dl.prototype,t.la=8,t.G=1,t.connect=function(S,Y,se,ye){Qt(0),this.W=S,this.H=Y||{},se&&ye!==void 0&&(this.H.OSID=se,this.H.OAID=ye),this.F=this.X,this.I=V(this,null,this.W),Qc(this)};function Lo(S){if(Yl(S),S.G==3){var Y=S.U++,se=Ts(S.I);if(Cn(se,"SID",S.K),Cn(se,"RID",Y),Cn(se,"TYPE","terminate"),fl(S,se),Y=new rt(S,S.j,Y),Y.L=2,Y.v=ll(Ts(se)),se=!1,o.navigator&&o.navigator.sendBeacon)try{se=o.navigator.sendBeacon(Y.v.toString(),"")}catch{}!se&&o.Image&&(new Image().src=Y.v,se=!0),se||(Y.g=Ae(Y.j,null),Y.g.ea(Y.v)),Y.F=Date.now(),Ft(Y)}Vc(S)}function Oc(S){S.g&&(hl(S),S.g.cancel(),S.g=null)}function Yl(S){Oc(S),S.u&&(o.clearTimeout(S.u),S.u=null),Uo(S),S.h.cancel(),S.s&&(typeof S.s=="number"&&o.clearTimeout(S.s),S.s=null)}function Qc(S){if(!us(S.h)&&!S.s){S.s=!0;var Y=S.Ga;ee||W(),ne||(ee(),ne=!0),z.add(Y,S),S.B=0}}function Vu(S,Y){return Ga(S.h)>=S.h.j-(S.s?1:0)?!1:S.s?(S.i=Y.D.concat(S.i),!0):S.G==1||S.G==2||S.B>=(S.Va?0:S.Wa)?!1:(S.s=tn(m(S.Ga,S,Y),ec(S,S.B)),S.B++,!0)}t.Ga=function(S){if(this.s)if(this.s=null,this.G==1){if(!S){this.U=Math.floor(1e5*Math.random()),S=this.U++;const Oe=new rt(this,this.j,S);let Ze=this.o;if(this.S&&(Ze?(Ze=B(Ze),O(Ze,this.S)):Ze=this.S),this.m!==null||this.O||(Oe.H=Ze,Ze=null),this.P)e:{for(var Y=0,se=0;se<this.i.length;se++){t:{var ye=this.i[se];if("__data__"in ye.map&&(ye=ye.map.__data__,typeof ye=="string")){ye=ye.length;break t}ye=void 0}if(ye===void 0)break;if(Y+=ye,4096<Y){Y=se;break e}if(Y===4096||se===this.i.length-1){Y=se+1;break e}}Y=1e3}else Y=1e3;Y=Jl(this,Oe,Y),se=Ts(this.I),Cn(se,"RID",S),Cn(se,"CVER",22),this.D&&Cn(se,"X-HTTP-Session-Id",this.D),fl(this,se),Ze&&(this.O?Y="headers="+encodeURIComponent(String(oo(Ze)))+"&"+Y:this.m&&Ra(se,this.m,Ze)),Wn(this.h,Oe),this.Ua&&Cn(se,"TYPE","init"),this.P?(Cn(se,"$req",Y),Cn(se,"SID","null"),Oe.T=!0,yt(Oe,se,null)):yt(Oe,se,Y),this.G=2}}else this.G==3&&(S?Xl(this,S):this.i.length==0||us(this.h)||Xl(this))};function Xl(S,Y){var se;Y?se=Y.l:se=S.U++;const ye=Ts(S.I);Cn(ye,"SID",S.K),Cn(ye,"RID",se),Cn(ye,"AID",S.T),fl(S,ye),S.m&&S.o&&Ra(ye,S.m,S.o),se=new rt(S,S.j,se,S.B+1),S.m===null&&(se.H=S.o),Y&&(S.i=Y.D.concat(S.i)),Y=Jl(S,se,1e3),se.I=Math.round(.5*S.wa)+Math.round(.5*S.wa*Math.random()),Wn(S.h,se),yt(se,ye,Y)}function fl(S,Y){S.H&&D(S.H,function(se,ye){Cn(Y,ye,se)}),S.l&&Pu({},function(se,ye){Cn(Y,ye,se)})}function Jl(S,Y,se){se=Math.min(S.i.length,se);var ye=S.l?m(S.l.Na,S.l,S):null;e:{var Oe=S.i;let Ze=-1;for(;;){const St=["count="+se];Ze==-1?0<se?(Ze=Oe[0].g,St.push("ofs="+Ze)):Ze=0:St.push("ofs="+Ze);let hr=!0;for(let Yr=0;Yr<se;Yr++){let Tr=Oe[Yr].g;const En=Oe[Yr].map;if(Tr-=Ze,0>Tr)Ze=Math.max(0,Oe[Yr].g-100),hr=!1;else try{pi(En,St,"req"+Tr+"_")}catch{ye&&ye(En)}}if(hr){ye=St.join("&");break e}}}return S=S.i.splice(0,se),Y.D=S,ye}function Hc(S){if(!S.g&&!S.u){S.Y=1;var Y=S.Fa;ee||W(),ne||(ee(),ne=!0),z.add(Y,S),S.v=0}}function Zl(S){return S.g||S.u||3<=S.v?!1:(S.Y++,S.u=tn(m(S.Fa,S),ec(S,S.v)),S.v++,!0)}t.Fa=function(){if(this.u=null,$A(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var S=2*this.R;this.j.info("BP detection timer enabled: "+S),this.A=tn(m(this.ab,this),S)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qt(10),Oc(this),$A(this))};function hl(S){S.A!=null&&(o.clearTimeout(S.A),S.A=null)}function $A(S){S.g=new rt(S,S.j,"rpc",S.Y),S.m===null&&(S.g.H=S.o),S.g.O=0;var Y=Ts(S.qa);Cn(Y,"RID","rpc"),Cn(Y,"SID",S.K),Cn(Y,"AID",S.T),Cn(Y,"CI",S.F?"0":"1"),!S.F&&S.ja&&Cn(Y,"TO",S.ja),Cn(Y,"TYPE","xmlhttp"),fl(S,Y),S.m&&S.o&&Ra(Y,S.m,S.o),S.L&&(S.g.I=S.L);var se=S.g;S=S.ia,se.L=1,se.v=ll(Ts(Y)),se.m=null,se.P=!0,Bt(se,S)}t.Za=function(){this.C!=null&&(this.C=null,Oc(this),Zl(this),Qt(19))};function Uo(S){S.C!=null&&(o.clearTimeout(S.C),S.C=null)}function ml(S,Y){var se=null;if(S.g==Y){Uo(S),hl(S),S.g=null;var ye=2}else if(_s(S.h,Y))se=Y.D,As(S.h,Y),ye=1;else return;if(S.G!=0){if(Y.o)if(ye==1){se=Y.m?Y.m.length:0,Y=Date.now()-Y.F;var Oe=S.B;ye=cs(),Ht(ye,new An(ye,se)),Qc(S)}else Hc(S);else if(Oe=Y.s,Oe==3||Oe==0&&0<Y.X||!(ye==1&&Vu(S,Y)||ye==2&&Zl(S)))switch(se&&0<se.length&&(Y=S.h,Y.i=Y.i.concat(se)),Oe){case 1:js(S,5);break;case 4:js(S,10);break;case 3:js(S,6);break;default:js(S,2)}}}function ec(S,Y){let se=S.Ta+Math.floor(Math.random()*S.cb);return S.isActive()||(se*=2),se*Y}function js(S,Y){if(S.j.info("Error code "+Y),Y==2){var se=m(S.fb,S),ye=S.Xa;const Oe=!ye;ye=new dn(ye||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||il(ye,"https"),ll(ye),Oe?Us(ye.toString(),se):mi(ye.toString(),se)}else Qt(2);S.G=0,S.l&&S.l.sa(Y),Vc(S),Yl(S)}t.fb=function(S){S?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function Vc(S){if(S.G=0,S.ka=[],S.l){const Y=Mc(S.h);(Y.length!=0||S.i.length!=0)&&(_(S.ka,Y),_(S.ka,S.i),S.h.i.length=0,w(S.i),S.i.length=0),S.l.ra()}}function V(S,Y,se){var ye=se instanceof dn?Ts(se):new dn(se);if(ye.g!="")Y&&(ye.g=Y+"."+ye.g),ol(ye,ye.s);else{var Oe=o.location;ye=Oe.protocol,Y=Y?Y+"."+Oe.hostname:Oe.hostname,Oe=+Oe.port;var Ze=new dn(null);ye&&il(Ze,ye),Y&&(Ze.g=Y),Oe&&ol(Ze,Oe),se&&(Ze.l=se),ye=Ze}return se=S.D,Y=S.ya,se&&Y&&Cn(ye,se,Y),Cn(ye,"VER",S.la),fl(S,ye),ye}function Ae(S,Y,se){if(Y&&!S.J)throw Error("Can't create secondary domain capable XhrIo object.");return Y=S.Ca&&!S.pa?new $r(new cl({eb:se})):new $r(S.pa),Y.Ha(S.J),Y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ie(){}t=Ie.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Le(){}Le.prototype.g=function(S,Y){return new He(S,Y)};function He(S,Y){Ut.call(this),this.g=new dl(Y),this.l=S,this.h=Y&&Y.messageUrlParams||null,S=Y&&Y.messageHeaders||null,Y&&Y.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=Y&&Y.initMessageHeaders||null,Y&&Y.messageContentType&&(S?S["X-WebChannel-Content-Type"]=Y.messageContentType:S={"X-WebChannel-Content-Type":Y.messageContentType}),Y&&Y.va&&(S?S["X-WebChannel-Client-Profile"]=Y.va:S={"X-WebChannel-Client-Profile":Y.va}),this.g.S=S,(S=Y&&Y.Sb)&&!k(S)&&(this.g.m=S),this.v=Y&&Y.supportsCrossDomainXhr||!1,this.u=Y&&Y.sendRawJson||!1,(Y=Y&&Y.httpSessionIdParam)&&!k(Y)&&(this.g.D=Y,S=this.h,S!==null&&Y in S&&(S=this.h,Y in S&&delete S[Y])),this.j=new jt(this)}b(He,Ut),He.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},He.prototype.close=function(){Lo(this.g)},He.prototype.o=function(S){var Y=this.g;if(typeof S=="string"){var se={};se.__data__=S,S=se}else this.u&&(se={},se.__data__=pr(S),S=se);Y.i.push(new fi(Y.Ya++,S)),Y.G==3&&Qc(Y)},He.prototype.N=function(){this.g.l=null,delete this.j,Lo(this.g),delete this.g,He.aa.N.call(this)};function ot(S){ha.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var Y=S.__sm__;if(Y){e:{for(const se in Y){S=se;break e}S=void 0}(this.i=S)&&(S=this.i,Y=Y!==null&&S in Y?Y[S]:void 0),this.data=Y}else this.data=S}b(ot,ha);function _t(){Lr.call(this),this.status=1}b(_t,Lr);function jt(S){this.g=S}b(jt,Ie),jt.prototype.ua=function(){Ht(this.g,"a")},jt.prototype.ta=function(S){Ht(this.g,new ot(S))},jt.prototype.sa=function(S){Ht(this.g,new _t)},jt.prototype.ra=function(){Ht(this.g,"b")},Le.prototype.createWebChannel=Le.prototype.g,He.prototype.send=He.prototype.o,He.prototype.open=He.prototype.m,He.prototype.close=He.prototype.close,YL=function(){return new Le},$L=function(){return cs()},WL=tr,i_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_e.NO_ERROR=0,_e.TIMEOUT=8,_e.HTTP_ERROR=6,c2=_e,Te.COMPLETE="complete",KL=Te,en.EventType=ea,ea.OPEN="a",ea.CLOSE="b",ea.ERROR="c",ea.MESSAGE="d",Ut.prototype.listen=Ut.prototype.K,ig=en,$r.prototype.listenOnce=$r.prototype.L,$r.prototype.getLastError=$r.prototype.Ka,$r.prototype.getLastErrorCode=$r.prototype.Ba,$r.prototype.getStatus=$r.prototype.Z,$r.prototype.getResponseJson=$r.prototype.Oa,$r.prototype.getResponseText=$r.prototype.oa,$r.prototype.send=$r.prototype.ea,$r.prototype.setWithCredentials=$r.prototype.Ha,qL=$r}).apply(typeof tv<"u"?tv:typeof self<"u"?self:typeof window<"u"?window:{});const hk="@firebase/firestore",mk="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fi.UNAUTHENTICATED=new Fi(null),Fi.GOOGLE_CREDENTIALS=new Fi("google-credentials-uid"),Fi.FIRST_PARTY=new Fi("first-party-uid"),Fi.MOCK_USER=new Fi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qm="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch=new J5("@firebase/firestore");function j0(){return Ch.logLevel}function $t(t,...e){if(Ch.logLevel<=on.DEBUG){const r=e.map(uS);Ch.debug(`Firestore (${Qm}): ${t}`,...r)}}function NA(t,...e){if(Ch.logLevel<=on.ERROR){const r=e.map(uS);Ch.error(`Firestore (${Qm}): ${t}`,...r)}}function Cm(t,...e){if(Ch.logLevel<=on.WARN){const r=e.map(uS);Ch.warn(`Firestore (${Qm}): ${t}`,...r)}}function uS(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,XL(t,n,r)}function XL(t,e,r){let n=`FIRESTORE (${Qm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw NA(n),new Error(n)}function Ln(t,e,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,t||XL(e,a,n)}function Fr(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class zt extends MA{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZG{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Fi.UNAUTHENTICATED))}shutdown(){}}class eq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class tq{constructor(e){this.t=e,this.currentUser=Fi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Ln(this.o===void 0,42304);let n=this.i;const a=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let s=new bA;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new bA,e.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await a(this.currentUser)})},o=l=>{$t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):($t("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new bA)}},0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?($t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ln(typeof n.accessToken=="string",31837,{l:n}),new JL(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ln(e===null||typeof e=="string",2055,{h:e}),new Fi(e)}}class rq{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=Fi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nq{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new rq(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(Fi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aq{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bc(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Ln(this.o===void 0,3512);const n=s=>{s.error!=null&&$t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.m;return this.m=s.token,$t("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const a=s=>{$t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):$t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new pk(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Ln(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new pk(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sq(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=sq(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=e.charAt(a[s]%62))}return n}}function ln(t,e){return t<e?-1:t>e?1:0}function o_(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const a=t.charAt(n),s=e.charAt(n);if(a!==s)return EC(a)===EC(s)?ln(a,s):EC(a)?1:-1}return ln(t.length,e.length)}const iq=55296,oq=57343;function EC(t){const e=t.charCodeAt(0);return e>=iq&&e<=oq}function Em(t,e,r){return t.length===e.length&&t.every((n,a)=>r(n,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk="__name__";class vu{constructor(e,r,n){r===void 0?r=0:r>e.length&&Er(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&Er(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return vu.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof vu?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const s=vu.compareSegments(e.get(a),r.get(a));if(s!==0)return s}return ln(e.length,r.length)}static compareSegments(e,r){const n=vu.isNumericId(e),a=vu.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?vu.extractNumericId(e).compare(vu.extractNumericId(r)):o_(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zd.fromString(e.substring(4,e.length-2))}}class ia extends vu{construct(e,r,n){return new ia(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new zt(mt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new ia(r)}static emptyPath(){return new ia([])}}const lq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class li extends vu{construct(e,r,n){return new li(e,r,n)}static isValidIdentifier(e){return lq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),li.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gk}static keyField(){return new li([gk])}static fromServerFormat(e){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new zt(mt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;a<e.length;){const o=e[a];if(o==="\\"){if(a+1===e.length)throw new zt(mt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[a+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new zt(mt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,a+=2}else o==="`"?(i=!i,a++):o!=="."||i?(n+=o,a++):(s(),a++)}if(s(),i)throw new zt(mt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new li(r)}static emptyPath(){return new li([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.path=e}static fromPath(e){return new lr(ia.fromString(e))}static fromName(e){return new lr(ia.fromString(e).popFirst(5))}static empty(){return new lr(ia.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ia.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ia.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new lr(new ia(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(t,e,r){if(!r)throw new zt(mt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function cq(t,e,r,n){if(e===!0&&n===!0)throw new zt(mt.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function xk(t){if(!lr.isDocumentKey(t))throw new zt(mt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vk(t){if(lr.isDocumentKey(t))throw new zt(mt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function eU(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ky(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Er(12329,{type:typeof t})}function Co(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new zt(mt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Ky(t);throw new zt(mt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function uq(t,e){if(e<=0)throw new zt(mt.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(t,e){const r={typeString:t};return e&&(r.value=e),r}function Ux(t,e){if(!eU(t))throw new zt(mt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const a=e[n].typeString,s="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const i=t[n];if(a&&typeof i!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&i!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new zt(mt.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=-62135596800,wk=1e6;class Wr{static now(){return Wr.fromMillis(Date.now())}static fromDate(e){return Wr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*wk);return new Wr(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new zt(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new zt(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<yk)throw new zt(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new zt(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wk}_compareTo(e){return this.seconds===e.seconds?ln(this.nanoseconds,e.nanoseconds):ln(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Wr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ux(e,Wr._jsonSchema))return new Wr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yk;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Wr._jsonSchemaVersion="firestore/timestamp/1.0",Wr._jsonSchema={type:bs("string",Wr._jsonSchemaVersion),seconds:bs("number"),nanoseconds:bs("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{static fromTimestamp(e){return new kr(e)}static min(){return new kr(new Wr(0,0))}static max(){return new kr(new Wr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg=-1;function Aq(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=kr.fromTimestamp(n===1e9?new Wr(r+1,0):new Wr(r,n));return new lf(a,lr.empty(),e)}function dq(t){return new lf(t.readTime,t.key,Jg)}class lf{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new lf(kr.min(),lr.empty(),Jg)}static max(){return new lf(kr.max(),lr.empty(),Jg)}}function fq(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=lr.comparator(t.documentKey,e.documentKey),r!==0?r:ln(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mq{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hm(t){if(t.code!==mt.FAILED_PRECONDITION||t.message!==hq)throw t;$t("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Er(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new bt((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof bt?r:bt.resolve(r)}catch(r){return bt.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):bt.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):bt.reject(r)}static resolve(e){return new bt((r,n)=>{r(e)})}static reject(e){return new bt((r,n)=>{n(e)})}static waitFor(e){return new bt((r,n)=>{let a=0,s=0,i=!1;e.forEach(o=>{++a,o.next(()=>{++s,i&&s===a&&r()},l=>n(l))}),i=!0,s===a&&r()})}static or(e){let r=bt.resolve(!1);for(const n of e)r=r.next(a=>a?bt.resolve(a):n());return r}static forEach(e,r){const n=[];return e.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(e,r){return new bt((n,a)=>{const s=e.length,i=new Array(s);let o=0;for(let l=0;l<s;l++){const A=l;r(e[A]).next(d=>{i[A]=d,++o,o===s&&n(i)},d=>a(d))}})}static doWhile(e,r){return new bt((n,a)=>{const s=()=>{e()===!0?r().next(()=>{s()},a):n()};s()})}}function pq(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Vm(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wy.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=-1;function $y(t){return t==null}function P2(t){return t===0&&1/t==-1/0}function gq(t){return typeof t=="number"&&Number.isInteger(t)&&!P2(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tU="";function xq(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=bk(e)),e=vq(t.get(r),e);return bk(e)}function vq(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const s=t.charAt(a);switch(s){case"\0":r+="";break;case tU:r+="";break;default:r+=s}}return r}function bk(t){return t+tU+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function bf(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function rU(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,r){this.comparator=e,this.root=r||ii.EMPTY}insert(e,r){return new Na(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ii.BLACK,null,null))}remove(e){return new Na(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ii.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rv(this.root,e,this.comparator,!1)}getReverseIterator(){return new rv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rv(this.root,e,this.comparator,!0)}}class rv{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&a&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ii{constructor(e,r,n,a,s){this.key=e,this.value=r,this.color=n??ii.RED,this.left=a??ii.EMPTY,this.right=s??ii.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,s){return new ii(e??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const s=n(e,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(e,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ii.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return ii.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ii.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ii.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Er(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Er(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Er(27949);return e+(this.isRed()?0:1)}}ii.EMPTY=null,ii.RED=!0,ii.BLACK=!1;ii.EMPTY=new class{constructor(){this.size=0}get key(){throw Er(57766)}get value(){throw Er(16141)}get color(){throw Er(16727)}get left(){throw Er(29726)}get right(){throw Er(36894)}copy(e,r,n,a,s){return this}insert(e,r,n){return new ii(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this.comparator=e,this.data=new Na(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Ek(this.data.getIterator())}getIteratorFrom(e){return new Ek(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Rs)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Rs(this.comparator);return r.data=e,r}}class Ek{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e){this.fields=e,e.sort(li.comparator)}static empty(){return new Zo([])}unionWith(e){let r=new Rs(li.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Zo(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Em(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new nU("Invalid base64 string: "+s):s}}(e);return new di(r)}static fromUint8Array(e){const r=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(e);return new di(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ln(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}di.EMPTY_BYTE_STRING=new di("");const yq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cf(t){if(Ln(!!t,39018),typeof t=="string"){let e=0;const r=yq.exec(t);if(Ln(!!r,46558,{timestamp:t}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:ts(t.seconds),nanos:ts(t.nanos)}}function ts(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function uf(t){return typeof t=="string"?di.fromBase64String(t):di.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU="server_timestamp",sU="__type__",iU="__previous_value__",oU="__local_write_time__";function fS(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[sU])==null?void 0:n.stringValue)===aU}function Yy(t){const e=t.mapValue.fields[iU];return fS(e)?Yy(e):e}function Zg(t){const e=cf(t.mapValue.fields[oU].timestampValue);return new Wr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wq{constructor(e,r,n,a,s,i,o,l,A,d){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=A,this.isUsingEmulator=d}}const j2="(default)";class ex{constructor(e,r){this.projectId=e,this.database=r||j2}static empty(){return new ex("","")}get isDefaultDatabase(){return this.database===j2}isEqual(e){return e instanceof ex&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU="__type__",bq="__max__",nv={mapValue:{}},cU="__vector__",O2="value";function Af(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fS(t)?4:Eq(t)?9007199254740991:Cq(t)?10:11:Er(28295,{value:t})}function Iu(t,e){if(t===e)return!0;const r=Af(t);if(r!==Af(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zg(t).isEqual(Zg(e));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=cf(a.timestampValue),o=cf(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,s){return uf(a.bytesValue).isEqual(uf(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,s){return ts(a.geoPointValue.latitude)===ts(s.geoPointValue.latitude)&&ts(a.geoPointValue.longitude)===ts(s.geoPointValue.longitude)}(t,e);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return ts(a.integerValue)===ts(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=ts(a.doubleValue),o=ts(s.doubleValue);return i===o?P2(i)===P2(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Em(t.arrayValue.values||[],e.arrayValue.values||[],Iu);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},o=s.mapValue.fields||{};if(Ck(i)!==Ck(o))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(o[l]===void 0||!Iu(i[l],o[l])))return!1;return!0}(t,e);default:return Er(52216,{left:t})}}function tx(t,e){return(t.values||[]).find(r=>Iu(r,e))!==void 0}function _m(t,e){if(t===e)return 0;const r=Af(t),n=Af(e);if(r!==n)return ln(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return ln(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=ts(s.integerValue||s.doubleValue),l=ts(i.integerValue||i.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return _k(t.timestampValue,e.timestampValue);case 4:return _k(Zg(t),Zg(e));case 5:return o_(t.stringValue,e.stringValue);case 6:return function(s,i){const o=uf(s),l=uf(i);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),l=i.split("/");for(let A=0;A<o.length&&A<l.length;A++){const d=ln(o[A],l[A]);if(d!==0)return d}return ln(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=ln(ts(s.latitude),ts(i.latitude));return o!==0?o:ln(ts(s.longitude),ts(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Sk(t.arrayValue,e.arrayValue);case 10:return function(s,i){var m,g,b,w;const o=s.fields||{},l=i.fields||{},A=(m=o[O2])==null?void 0:m.arrayValue,d=(g=l[O2])==null?void 0:g.arrayValue,h=ln(((b=A==null?void 0:A.values)==null?void 0:b.length)||0,((w=d==null?void 0:d.values)==null?void 0:w.length)||0);return h!==0?h:Sk(A,d)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===nv.mapValue&&i===nv.mapValue)return 0;if(s===nv.mapValue)return 1;if(i===nv.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),A=i.fields||{},d=Object.keys(A);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const m=o_(l[h],d[h]);if(m!==0)return m;const g=_m(o[l[h]],A[d[h]]);if(g!==0)return g}return ln(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Er(23264,{he:r})}}function _k(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ln(t,e);const r=cf(t),n=cf(e),a=ln(r.seconds,n.seconds);return a!==0?a:ln(r.nanos,n.nanos)}function Sk(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=_m(r[a],n[a]);if(s)return s}return ln(r.length,n.length)}function Sm(t){return l_(t)}function l_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=cf(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return uf(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return lr.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=l_(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const i of n)s?s=!1:a+=",",a+=`${i}:${l_(r.fields[i])}`;return a+"}"}(t.mapValue):Er(61005,{value:t})}function u2(t){switch(Af(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yy(t);return e?16+u2(e):16;case 5:return 2*t.stringValue.length;case 6:return uf(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+u2(s),0)}(t.arrayValue);case 10:case 11:return function(n){let a=0;return bf(n.fields,(s,i)=>{a+=s.length+u2(i)}),a}(t.mapValue);default:throw Er(13486,{value:t})}}function Tk(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function c_(t){return!!t&&"integerValue"in t}function hS(t){return!!t&&"arrayValue"in t}function Bk(t){return!!t&&"nullValue"in t}function Nk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function A2(t){return!!t&&"mapValue"in t}function Cq(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[lU])==null?void 0:n.stringValue)===cU}function Tg(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return bf(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Tg(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Tg(t.arrayValue.values[r]);return e}return{...t}}function Eq(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===bq}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this.value=e}static empty(){return new wo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!A2(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tg(r)}setAll(e){let r=li.emptyPath(),n={},a=[];e.forEach((i,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,a),n={},a=[],r=o.popLast()}i?n[o.lastSegment()]=Tg(i):a.push(o.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(e){const r=this.field(e.popLast());A2(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Iu(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];A2(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){bf(r,(a,s)=>e[a]=s);for(const a of n)delete e[a]}clone(){return new wo(Tg(this.value))}}function uU(t){const e=[];return bf(t.fields,(r,n)=>{const a=new li([r]);if(A2(n)){const s=uU(n.mapValue).fields;if(s.length===0)e.push(a);else for(const i of s)e.push(a.child(i))}else e.push(a)}),new Zo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,r,n,a,s,i,o){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Ui(e,0,kr.min(),kr.min(),kr.min(),wo.empty(),0)}static newFoundDocument(e,r,n,a){return new Ui(e,1,r,kr.min(),n,a,0)}static newNoDocument(e,r){return new Ui(e,2,r,kr.min(),kr.min(),wo.empty(),0)}static newUnknownDocument(e,r){return new Ui(e,3,r,kr.min(),kr.min(),wo.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(kr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ui&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ui(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,r){this.position=e,this.inclusive=r}}function kk(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const s=e[a],i=t.position[a];if(s.field.isKeyField()?n=lr.comparator(lr.fromName(i.referenceValue),r.key):n=_m(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function Ik(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Iu(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,r="asc"){this.field=e,this.dir=r}}function _q(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{}class ws extends AU{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new Tq(e,r,n):r==="array-contains"?new kq(e,n):r==="in"?new Iq(e,n):r==="not-in"?new Fq(e,n):r==="array-contains-any"?new Rq(e,n):new ws(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new Bq(e,n):new Nq(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(_m(r,this.value)):r!==null&&Af(this.value)===Af(r)&&this.matchesComparison(_m(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Er(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fc extends AU{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Fc(e,r)}matches(e){return dU(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dU(t){return t.op==="and"}function fU(t){return Sq(t)&&dU(t)}function Sq(t){for(const e of t.filters)if(e instanceof Fc)return!1;return!0}function u_(t){if(t instanceof ws)return t.field.canonicalString()+t.op.toString()+Sm(t.value);if(fU(t))return t.filters.map(e=>u_(e)).join(",");{const e=t.filters.map(r=>u_(r)).join(",");return`${t.op}(${e})`}}function hU(t,e){return t instanceof ws?function(n,a){return a instanceof ws&&n.op===a.op&&n.field.isEqual(a.field)&&Iu(n.value,a.value)}(t,e):t instanceof Fc?function(n,a){return a instanceof Fc&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,i,o)=>s&&hU(i,a.filters[o]),!0):!1}(t,e):void Er(19439)}function mU(t){return t instanceof ws?function(r){return`${r.field.canonicalString()} ${r.op} ${Sm(r.value)}`}(t):t instanceof Fc?function(r){return r.op.toString()+" {"+r.getFilters().map(mU).join(" ,")+"}"}(t):"Filter"}class Tq extends ws{constructor(e,r,n){super(e,r,n),this.key=lr.fromName(n.referenceValue)}matches(e){const r=lr.comparator(e.key,this.key);return this.matchesComparison(r)}}class Bq extends ws{constructor(e,r){super(e,"in",r),this.keys=pU("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Nq extends ws{constructor(e,r){super(e,"not-in",r),this.keys=pU("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function pU(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>lr.fromName(n.referenceValue))}class kq extends ws{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return hS(r)&&tx(r.arrayValue,this.value)}}class Iq extends ws{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&tx(this.value.arrayValue,r)}}class Fq extends ws{constructor(e,r){super(e,"not-in",r)}matches(e){if(tx(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!tx(this.value.arrayValue,r)}}class Rq extends ws{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!hS(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>tx(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dq{constructor(e,r=null,n=[],a=[],s=null,i=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=i,this.endAt=o,this.Te=null}}function Fk(t,e=null,r=[],n=[],a=null,s=null,i=null){return new Dq(t,e,r,n,a,s,i)}function mS(t){const e=Fr(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>u_(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),$y(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Sm(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Sm(n)).join(",")),e.Te=r}return e.Te}function pS(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!_q(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!hU(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ik(t.startAt,e.startAt)&&Ik(t.endAt,e.endAt)}function A_(t){return lr.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,r=null,n=[],a=[],s=null,i="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Lq(t,e,r,n,a,s,i,o){return new zm(t,e,r,n,a,s,i,o)}function Xy(t){return new zm(t)}function Rk(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gU(t){return t.collectionGroup!==null}function Bg(t){const e=Fr(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new Rs(li.comparator);return i.filters.forEach(l=>{l.getFlattenedFilters().forEach(A=>{A.isInequality()&&(o=o.add(A.field))})}),o})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new rx(s,n))}),r.has(li.keyField().canonicalString())||e.Ie.push(new rx(li.keyField(),n))}return e.Ie}function _u(t){const e=Fr(t);return e.Ee||(e.Ee=Uq(e,Bg(t))),e.Ee}function Uq(t,e){if(t.limitType==="F")return Fk(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new rx(a.field,s)});const r=t.endAt?new Q2(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Q2(t.startAt.position,t.startAt.inclusive):null;return Fk(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function d_(t,e){const r=t.filters.concat([e]);return new zm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function H2(t,e,r){return new zm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Jy(t,e){return pS(_u(t),_u(e))&&t.limitType===e.limitType}function xU(t){return`${mS(_u(t))}|lt:${t.limitType}`}function O0(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>mU(a)).join(", ")}]`),$y(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>Sm(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>Sm(a)).join(",")),`Target(${n})`}(_u(t))}; limitType=${t.limitType})`}function Zy(t,e){return e.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):lr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,a){for(const s of Bg(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(t,e)&&function(n,a){return!(n.startAt&&!function(i,o,l){const A=kk(i,o,l);return i.inclusive?A<=0:A<0}(n.startAt,Bg(n),a)||n.endAt&&!function(i,o,l){const A=kk(i,o,l);return i.inclusive?A>=0:A>0}(n.endAt,Bg(n),a))}(t,e)}function Mq(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vU(t){return(e,r)=>{let n=!1;for(const a of Bg(t)){const s=Pq(a,e,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function Pq(t,e,r){const n=t.field.isKeyField()?lr.comparator(e.key,r.key):function(s,i,o){const l=i.data.field(s),A=o.data.field(s);return l!==null&&A!==null?_m(l,A):Er(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Er(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return void(a[s]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){bf(this.inner,(r,n)=>{for(const[a,s]of n)e(a,s)})}isEmpty(){return rU(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jq=new Na(lr.comparator);function kA(){return jq}const yU=new Na(lr.comparator);function og(...t){let e=yU;for(const r of t)e=e.insert(r.key,r);return e}function wU(t){let e=yU;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function sh(){return Ng()}function bU(){return Ng()}function Ng(){return new Lh(t=>t.toString(),(t,e)=>t.isEqual(e))}const Oq=new Na(lr.comparator),Qq=new Rs(lr.comparator);function cn(...t){let e=Qq;for(const r of t)e=e.add(r);return e}const Hq=new Rs(ln);function Vq(){return Hq}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:P2(e)?"-0":e}}function CU(t){return{integerValue:""+t}}function zq(t,e){return gq(e)?CU(e):gS(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(){this._=void 0}}function Gq(t,e,r){return t instanceof V2?function(a,s){const i={fields:{[sU]:{stringValue:aU},[oU]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&fS(s)&&(s=Yy(s)),s&&(i.fields[iU]=s),{mapValue:i}}(r,e):t instanceof Tm?_U(t,e):t instanceof nx?SU(t,e):function(a,s){const i=EU(a,s),o=Dk(i)+Dk(a.Ae);return c_(i)&&c_(a.Ae)?CU(o):gS(a.serializer,o)}(t,e)}function qq(t,e,r){return t instanceof Tm?_U(t,e):t instanceof nx?SU(t,e):r}function EU(t,e){return t instanceof z2?function(n){return c_(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class V2 extends ew{}class Tm extends ew{constructor(e){super(),this.elements=e}}function _U(t,e){const r=TU(e);for(const n of t.elements)r.some(a=>Iu(a,n))||r.push(n);return{arrayValue:{values:r}}}class nx extends ew{constructor(e){super(),this.elements=e}}function SU(t,e){let r=TU(e);for(const n of t.elements)r=r.filter(a=>!Iu(a,n));return{arrayValue:{values:r}}}class z2 extends ew{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function Dk(t){return ts(t.integerValue||t.doubleValue)}function TU(t){return hS(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kq{constructor(e,r){this.field=e,this.transform=r}}function Wq(t,e){return t.field.isEqual(e.field)&&function(n,a){return n instanceof Tm&&a instanceof Tm||n instanceof nx&&a instanceof nx?Em(n.elements,a.elements,Iu):n instanceof z2&&a instanceof z2?Iu(n.Ae,a.Ae):n instanceof V2&&a instanceof V2}(t.transform,e.transform)}class $q{constructor(e,r){this.version=e,this.transformResults=r}}class Ql{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Ql}static exists(e){return new Ql(void 0,e)}static updateTime(e){return new Ql(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function d2(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class tw{}function BU(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xS(t.key,Ql.none()):new Mx(t.key,t.data,Ql.none());{const r=t.data,n=wo.empty();let a=new Rs(li.comparator);for(let s of e.fields)if(!a.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),a=a.add(s)}return new Cf(t.key,n,new Zo(a.toArray()),Ql.none())}}function Yq(t,e,r){t instanceof Mx?function(a,s,i){const o=a.value.clone(),l=Uk(a.fieldTransforms,s,i.transformResults);o.setAll(l),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,r):t instanceof Cf?function(a,s,i){if(!d2(a.precondition,s))return void s.convertToUnknownDocument(i.version);const o=Uk(a.fieldTransforms,s,i.transformResults),l=s.data;l.setAll(NU(a)),l.setAll(o),s.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,r):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,r)}function kg(t,e,r,n){return t instanceof Mx?function(s,i,o,l){if(!d2(s.precondition,i))return o;const A=s.value.clone(),d=Mk(s.fieldTransforms,l,i);return A.setAll(d),i.convertToFoundDocument(i.version,A).setHasLocalMutations(),null}(t,e,r,n):t instanceof Cf?function(s,i,o,l){if(!d2(s.precondition,i))return o;const A=Mk(s.fieldTransforms,l,i),d=i.data;return d.setAll(NU(s)),d.setAll(A),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(s,i,o){return d2(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,r)}function Xq(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),s=EU(n.transform,a||null);s!=null&&(r===null&&(r=wo.empty()),r.set(n.field,s))}return r||null}function Lk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Em(n,a,(s,i)=>Wq(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Mx extends tw{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Cf extends tw{constructor(e,r,n,a,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function NU(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function Uk(t,e,r){const n=new Map;Ln(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let a=0;a<r.length;a++){const s=t[a],i=s.transform,o=e.data.field(s.field);n.set(s.field,qq(i,o,r[a]))}return n}function Mk(t,e,r){const n=new Map;for(const a of t){const s=a.transform,i=r.data.field(a.field);n.set(a.field,Gq(s,i,e))}return n}class xS extends tw{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jq extends tw{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zq{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(e.key)&&Yq(s,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=kg(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=kg(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=bU();return this.mutations.forEach(a=>{const s=e.get(a.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=r.has(a.key)?null:o;const l=BU(i,o);l!==null&&n.set(a.key,l),i.isValidDocument()||i.convertToNoDocument(kr.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),cn())}isEqual(e){return this.batchId===e.batchId&&Em(this.mutations,e.mutations,(r,n)=>Lk(r,n))&&Em(this.baseMutations,e.baseMutations,(r,n)=>Lk(r,n))}}class vS{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Ln(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let a=function(){return Oq}();const s=e.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,n[i].version);return new vS(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tK{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gs,xn;function rK(t){switch(t){case mt.OK:return Er(64938);case mt.CANCELLED:case mt.UNKNOWN:case mt.DEADLINE_EXCEEDED:case mt.RESOURCE_EXHAUSTED:case mt.INTERNAL:case mt.UNAVAILABLE:case mt.UNAUTHENTICATED:return!1;case mt.INVALID_ARGUMENT:case mt.NOT_FOUND:case mt.ALREADY_EXISTS:case mt.PERMISSION_DENIED:case mt.FAILED_PRECONDITION:case mt.ABORTED:case mt.OUT_OF_RANGE:case mt.UNIMPLEMENTED:case mt.DATA_LOSS:return!0;default:return Er(15467,{code:t})}}function kU(t){if(t===void 0)return NA("GRPC error has no .code"),mt.UNKNOWN;switch(t){case gs.OK:return mt.OK;case gs.CANCELLED:return mt.CANCELLED;case gs.UNKNOWN:return mt.UNKNOWN;case gs.DEADLINE_EXCEEDED:return mt.DEADLINE_EXCEEDED;case gs.RESOURCE_EXHAUSTED:return mt.RESOURCE_EXHAUSTED;case gs.INTERNAL:return mt.INTERNAL;case gs.UNAVAILABLE:return mt.UNAVAILABLE;case gs.UNAUTHENTICATED:return mt.UNAUTHENTICATED;case gs.INVALID_ARGUMENT:return mt.INVALID_ARGUMENT;case gs.NOT_FOUND:return mt.NOT_FOUND;case gs.ALREADY_EXISTS:return mt.ALREADY_EXISTS;case gs.PERMISSION_DENIED:return mt.PERMISSION_DENIED;case gs.FAILED_PRECONDITION:return mt.FAILED_PRECONDITION;case gs.ABORTED:return mt.ABORTED;case gs.OUT_OF_RANGE:return mt.OUT_OF_RANGE;case gs.UNIMPLEMENTED:return mt.UNIMPLEMENTED;case gs.DATA_LOSS:return mt.DATA_LOSS;default:return Er(39323,{code:t})}}(xn=gs||(gs={}))[xn.OK=0]="OK",xn[xn.CANCELLED=1]="CANCELLED",xn[xn.UNKNOWN=2]="UNKNOWN",xn[xn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xn[xn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xn[xn.NOT_FOUND=5]="NOT_FOUND",xn[xn.ALREADY_EXISTS=6]="ALREADY_EXISTS",xn[xn.PERMISSION_DENIED=7]="PERMISSION_DENIED",xn[xn.UNAUTHENTICATED=16]="UNAUTHENTICATED",xn[xn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xn[xn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xn[xn.ABORTED=10]="ABORTED",xn[xn.OUT_OF_RANGE=11]="OUT_OF_RANGE",xn[xn.UNIMPLEMENTED=12]="UNIMPLEMENTED",xn[xn.INTERNAL=13]="INTERNAL",xn[xn.UNAVAILABLE=14]="UNAVAILABLE",xn[xn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nK(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aK=new Zd([4294967295,4294967295],0);function Pk(t){const e=nK().encode(t),r=new GL;return r.update(e),new Uint8Array(r.digest())}function jk(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Zd([r,n],0),new Zd([a,s],0)]}class yS{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new lg(`Invalid padding: ${r}`);if(n<0)throw new lg(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new lg(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new lg(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=Zd.fromNumber(this.ge)}ye(e,r,n){let a=e.add(r.multiply(Zd.fromNumber(n)));return a.compare(aK)===1&&(a=new Zd([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=Pk(e),[n,a]=jk(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);if(!this.we(i))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new yS(s,a,r);return n.forEach(o=>i.insert(o)),i}insert(e){if(this.ge===0)return;const r=Pk(e),[n,a]=jk(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);this.Se(i)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class lg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,r,n,a,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,Px.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new rw(kr.min(),a,new Na(ln),kA(),cn())}}class Px{constructor(e,r,n,a,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Px(n,r,cn(),cn(),cn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,r,n,a){this.be=e,this.removedTargetIds=r,this.key=n,this.De=a}}class IU{constructor(e,r){this.targetId=e,this.Ce=r}}class FU{constructor(e,r,n=di.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class Ok{constructor(){this.ve=0,this.Fe=Qk(),this.Me=di.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=cn(),r=cn(),n=cn();return this.Fe.forEach((a,s)=>{switch(s){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Er(38017,{changeType:s})}}),new Px(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=Qk()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ln(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class sK{constructor(e){this.Ge=e,this.ze=new Map,this.je=kA(),this.Je=av(),this.He=av(),this.Ye=new Na(ln)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:Er(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(e){const r=e.targetId,n=e.Ce.count,a=this.ot(r);if(a){const s=a.target;if(A_(s))if(n===0){const i=new lr(s.path);this.et(r,i,Ui.newNoDocument(i,kr.min()))}else Ln(n===1,20013,{expectedCount:n});else{const i=this._t(r);if(i!==n){const o=this.ut(e),l=o?this.ct(o,e,i):1;if(l!==0){this.it(r);const A=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,A)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let i,o;try{i=uf(n).toUint8Array()}catch(l){if(l instanceof nU)return Cm("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new yS(i,a,s)}catch(l){return Cm(l instanceof lg?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(r,s,null),a++)}),a}Tt(e){const r=new Map;this.ze.forEach((s,i)=>{const o=this.ot(i);if(o){if(s.current&&A_(o.target)){const l=new lr(o.target.path);this.It(l).has(i)||this.Et(i,l)||this.et(i,l,Ui.newNoDocument(l,e))}s.Be&&(r.set(i,s.ke()),s.qe())}});let n=cn();this.He.forEach((s,i)=>{let o=!0;i.forEachWhile(l=>{const A=this.ot(l);return!A||A.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.je.forEach((s,i)=>i.setReadTime(e));const a=new rw(e,r,this.Ye,this.je,n);return this.je=kA(),this.Je=av(),this.He=av(),this.Ye=new Na(ln),a}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new Ok,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new Rs(ln),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new Rs(ln),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||$t("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ok),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function av(){return new Na(lr.comparator)}function Qk(){return new Na(lr.comparator)}const iK={asc:"ASCENDING",desc:"DESCENDING"},oK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lK={and:"AND",or:"OR"};class cK{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function f_(t,e){return t.useProto3Json||$y(e)?e:{value:e}}function G2(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RU(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function uK(t,e){return G2(t,e.toTimestamp())}function Su(t){return Ln(!!t,49232),kr.fromTimestamp(function(r){const n=cf(r);return new Wr(n.seconds,n.nanos)}(t))}function wS(t,e){return h_(t,e).canonicalString()}function h_(t,e){const r=function(a){return new ia(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?r:r.child(e)}function DU(t){const e=ia.fromString(t);return Ln(jU(e),10190,{key:e.toString()}),e}function m_(t,e){return wS(t.databaseId,e.path)}function _C(t,e){const r=DU(e);if(r.get(1)!==t.databaseId.projectId)throw new zt(mt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new zt(mt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new lr(UU(r))}function LU(t,e){return wS(t.databaseId,e)}function AK(t){const e=DU(t);return e.length===4?ia.emptyPath():UU(e)}function p_(t){return new ia(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function UU(t){return Ln(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Hk(t,e,r){return{name:m_(t,e),fields:r.value.mapValue.fields}}function dK(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(A){return A==="NO_CHANGE"?0:A==="ADD"?1:A==="REMOVE"?2:A==="CURRENT"?3:A==="RESET"?4:Er(39313,{state:A})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],s=function(A,d){return A.useProto3Json?(Ln(d===void 0||typeof d=="string",58123),di.fromBase64String(d||"")):(Ln(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),di.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(A){const d=A.code===void 0?mt.UNKNOWN:kU(A.code);return new zt(d,A.message||"")}(i);r=new FU(n,a,s,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=_C(t,n.document.name),s=Su(n.document.updateTime),i=n.document.createTime?Su(n.document.createTime):kr.min(),o=new wo({mapValue:{fields:n.document.fields}}),l=Ui.newFoundDocument(a,s,i,o),A=n.targetIds||[],d=n.removedTargetIds||[];r=new f2(A,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=_C(t,n.document),s=n.readTime?Su(n.readTime):kr.min(),i=Ui.newNoDocument(a,s),o=n.removedTargetIds||[];r=new f2([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=_C(t,n.document),s=n.removedTargetIds||[];r=new f2([],s,a,null)}else{if(!("filter"in e))return Er(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,i=new tK(a,s),o=n.targetId;r=new IU(o,i)}}return r}function fK(t,e){let r;if(e instanceof Mx)r={update:Hk(t,e.key,e.value)};else if(e instanceof xS)r={delete:m_(t,e.key)};else if(e instanceof Cf)r={update:Hk(t,e.key,e.data),updateMask:bK(e.fieldMask)};else{if(!(e instanceof Jq))return Er(16599,{Vt:e.type});r={verify:m_(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,i){const o=i.transform;if(o instanceof V2)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Tm)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof nx)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof z2)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw Er(20930,{transform:i.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:uK(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Er(27497)}(t,e.precondition)),r}function hK(t,e){return t&&t.length>0?(Ln(e!==void 0,14353),t.map(r=>function(a,s){let i=a.updateTime?Su(a.updateTime):Su(s);return i.isEqual(kr.min())&&(i=Su(s)),new $q(i,a.transformResults||[])}(r,e))):[]}function mK(t,e){return{documents:[LU(t,e.path)]}}function pK(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=LU(t,a);const s=function(A){if(A.length!==0)return PU(Fc.create(A,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const i=function(A){if(A.length!==0)return A.map(d=>function(m){return{field:Q0(m.field),direction:vK(m.dir)}}(d))}(e.orderBy);i&&(r.structuredQuery.orderBy=i);const o=f_(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(A){return{before:A.inclusive,values:A.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(A){return{before:!A.inclusive,values:A.position}}(e.endAt)),{ft:r,parent:a}}function gK(t){let e=AK(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Ln(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:e=e.child(d.collectionId)}let s=[];r.where&&(s=function(h){const m=MU(h);return m instanceof Fc&&fU(m)?m.getFilters():[m]}(r.where));let i=[];r.orderBy&&(i=function(h){return h.map(m=>function(b){return new rx(H0(b.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(r.orderBy));let o=null;r.limit&&(o=function(h){let m;return m=typeof h=="object"?h.value:h,$y(m)?null:m}(r.limit));let l=null;r.startAt&&(l=function(h){const m=!!h.before,g=h.values||[];return new Q2(g,m)}(r.startAt));let A=null;return r.endAt&&(A=function(h){const m=!h.before,g=h.values||[];return new Q2(g,m)}(r.endAt)),Lq(e,a,i,s,o,"F",l,A)}function xK(t,e){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Er(28987,{purpose:a})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function MU(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=H0(r.unaryFilter.field);return ws.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=H0(r.unaryFilter.field);return ws.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=H0(r.unaryFilter.field);return ws.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=H0(r.unaryFilter.field);return ws.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Er(61313);default:return Er(60726)}}(t):t.fieldFilter!==void 0?function(r){return ws.create(H0(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Er(58110);default:return Er(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Fc.create(r.compositeFilter.filters.map(n=>MU(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Er(1026)}}(r.compositeFilter.op))}(t):Er(30097,{filter:t})}function vK(t){return iK[t]}function yK(t){return oK[t]}function wK(t){return lK[t]}function Q0(t){return{fieldPath:t.canonicalString()}}function H0(t){return li.fromServerFormat(t.fieldPath)}function PU(t){return t instanceof ws?function(r){if(r.op==="=="){if(Nk(r.value))return{unaryFilter:{field:Q0(r.field),op:"IS_NAN"}};if(Bk(r.value))return{unaryFilter:{field:Q0(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Nk(r.value))return{unaryFilter:{field:Q0(r.field),op:"IS_NOT_NAN"}};if(Bk(r.value))return{unaryFilter:{field:Q0(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Q0(r.field),op:yK(r.op),value:r.value}}}(t):t instanceof Fc?function(r){const n=r.getFilters().map(a=>PU(a));return n.length===1?n[0]:{compositeFilter:{op:wK(r.op),filters:n}}}(t):Er(54877,{filter:t})}function bK(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function jU(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,r,n,a,s=kr.min(),i=kr.min(),o=di.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Hd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Hd(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CK{constructor(e){this.yt=e}}function EK(t){const e=gK({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?H2(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _K{constructor(){this.Cn=new SK}addToCollectionParentIndex(e,r){return this.Cn.add(r),bt.resolve()}getCollectionParents(e,r){return bt.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return bt.resolve()}deleteFieldIndex(e,r){return bt.resolve()}deleteAllFieldIndexes(e){return bt.resolve()}createTargetIndexes(e,r){return bt.resolve()}getDocumentsMatchingTarget(e,r){return bt.resolve(null)}getIndexType(e,r){return bt.resolve(0)}getFieldIndexes(e,r){return bt.resolve([])}getNextCollectionGroupToUpdate(e){return bt.resolve(null)}getMinOffset(e,r){return bt.resolve(lf.min())}getMinOffsetFromCollectionGroup(e,r){return bt.resolve(lf.min())}updateCollectionGroup(e,r,n){return bt.resolve()}updateIndexEntries(e,r){return bt.resolve()}}class SK{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new Rs(ia.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new Rs(ia.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OU=41943040;class vo{static withCacheSize(e){return new vo(e,vo.DEFAULT_COLLECTION_PERCENTILE,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vo.DEFAULT_COLLECTION_PERCENTILE=10,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vo.DEFAULT=new vo(OU,vo.DEFAULT_COLLECTION_PERCENTILE,vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vo.DISABLED=new vo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Bm(0)}static cr(){return new Bm(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk="LruGarbageCollector",TK=1048576;function Gk([t,e],[r,n]){const a=ln(t,r);return a===0?ln(e,n):a}class BK{constructor(e){this.Ir=e,this.buffer=new Rs(Gk),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();Gk(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class NK{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$t(zk,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Vm(r)?$t(zk,"Ignoring IndexedDB error during garbage collection: ",r):await Hm(r)}await this.Vr(3e5)})}}class kK{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return bt.resolve(Wy.ce);const n=new BK(r);return this.mr.forEachTarget(e,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?($t("LruGarbageCollector","Garbage collection skipped; disabled"),bt.resolve(Vk)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?($t("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vk):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,a,s,i,o,l,A;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?($t("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),a=this.params.maximumSequenceNumbersToCollect):a=h,i=Date.now(),this.nthSequenceNumber(e,a))).next(h=>(n=h,o=Date.now(),this.removeTargets(e,n,r))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(A=Date.now(),j0()<=on.DEBUG&&$t("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${a} in `+(o-i)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${h} documents in `+(A-l)+`ms
Total Duration: ${A-d}ms`),bt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:h})))}}function IK(t,e){return new kK(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FK{constructor(){this.changes=new Lh(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Ui.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?bt.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RK{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DK{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,r))).next(a=>(n!==null&&kg(n.mutation,a,Zo.empty(),Wr.now()),a))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,cn()).next(()=>n))}getLocalViewOfDocuments(e,r,n=cn()){const a=sh();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,n).next(s=>{let i=og();return s.forEach((o,l)=>{i=i.insert(o,l.overlayedDocument)}),i}))}getOverlayedDocuments(e,r){const n=sh();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,cn()))}populateOverlays(e,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(e,a).next(s=>{s.forEach((i,o)=>{r.set(i,o)})})}computeViews(e,r,n,a){let s=kA();const i=Ng(),o=function(){return Ng()}();return r.forEach((l,A)=>{const d=n.get(A.key);a.has(A.key)&&(d===void 0||d.mutation instanceof Cf)?s=s.insert(A.key,A):d!==void 0?(i.set(A.key,d.mutation.getFieldMask()),kg(d.mutation,A,d.mutation.getFieldMask(),Wr.now())):i.set(A.key,Zo.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((A,d)=>i.set(A,d)),r.forEach((A,d)=>o.set(A,new RK(d,i.get(A)??null))),o))}recalculateAndSaveOverlays(e,r){const n=Ng();let a=new Na((i,o)=>i-o),s=cn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>{for(const o of i)o.keys().forEach(l=>{const A=r.get(l);if(A===null)return;let d=n.get(l)||Zo.empty();d=o.applyToLocalView(A,d),n.set(l,d);const h=(a.get(o.batchId)||cn()).add(l);a=a.insert(o.batchId,h)})}).next(()=>{const i=[],o=a.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),A=l.key,d=l.value,h=bU();d.forEach(m=>{if(!s.has(m)){const g=BU(r.get(m),n.get(m));g!==null&&h.set(m,g),s=s.add(m)}}),i.push(this.documentOverlayCache.saveOverlays(e,A,h))}return bt.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,a){return function(i){return lr.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):gU(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-s.size):bt.resolve(sh());let o=Jg,l=s;return i.next(A=>bt.forEach(A,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(d)?bt.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,A,s)).next(()=>this.computeViews(e,l,A,cn())).next(d=>({batchId:o,changes:wU(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new lr(r)).next(n=>{let a=og();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const s=r.collectionGroup;let i=og();return this.indexManager.getCollectionParents(e,s).next(o=>bt.forEach(o,l=>{const A=function(h,m){return new zm(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,A,n,a).next(d=>{d.forEach((h,m)=>{i=i.insert(h,m)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,a))).next(i=>{s.forEach((l,A)=>{const d=A.getKey();i.get(d)===null&&(i=i.insert(d,Ui.newInvalidDocument(d)))});let o=og();return i.forEach((l,A)=>{const d=s.get(l);d!==void 0&&kg(d.mutation,A,Zo.empty(),Wr.now()),Zy(r,A)&&(o=o.insert(l,A))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LK{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return bt.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:Su(a.createTime)}}(r)),bt.resolve()}getNamedQuery(e,r){return bt.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(a){return{name:a.name,query:EK(a.bundledQuery),readTime:Su(a.readTime)}}(r)),bt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UK{constructor(){this.overlays=new Na(lr.comparator),this.qr=new Map}getOverlay(e,r){return bt.resolve(this.overlays.get(r))}getOverlays(e,r){const n=sh();return bt.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((a,s)=>{this.St(e,r,s)}),bt.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),bt.resolve()}getOverlaysForCollection(e,r,n){const a=sh(),s=r.length+1,i=new lr(r.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const l=o.getNext().value,A=l.getKey();if(!r.isPrefixOf(A.path))break;A.path.length===s&&l.largestBatchId>n&&a.set(l.getKey(),l)}return bt.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let s=new Na((A,d)=>A-d);const i=this.overlays.getIterator();for(;i.hasNext();){const A=i.getNext().value;if(A.getKey().getCollectionGroup()===r&&A.largestBatchId>n){let d=s.get(A.largestBatchId);d===null&&(d=sh(),s=s.insert(A.largestBatchId,d)),d.set(A.getKey(),A)}}const o=sh(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((A,d)=>o.set(A,d)),!(o.size()>=a)););return bt.resolve(o)}St(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const i=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new eK(r,n));let s=this.qr.get(r);s===void 0&&(s=cn(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MK{constructor(){this.sessionToken=di.EMPTY_BYTE_STRING}getSessionToken(e){return bt.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,bt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(){this.Qr=new Rs(Gs.$r),this.Ur=new Rs(Gs.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new Gs(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new Gs(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new lr(new ia([])),n=new Gs(r,e),a=new Gs(r,e+1),s=[];return this.Ur.forEachInRange([n,a],i=>{this.Gr(i),s.push(i.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new lr(new ia([])),n=new Gs(r,e),a=new Gs(r,e+1);let s=cn();return this.Ur.forEachInRange([n,a],i=>{s=s.add(i.key)}),s}containsKey(e){const r=new Gs(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Gs{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return lr.comparator(e.key,r.key)||ln(e.Yr,r.Yr)}static Kr(e,r){return ln(e.Yr,r.Yr)||lr.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PK{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Rs(Gs.$r)}checkEmpty(e){return bt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Zq(s,r,n,a);this.mutationQueue.push(i);for(const o of a)this.Zr=this.Zr.add(new Gs(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return bt.resolve(i)}lookupMutationBatch(e,r){return bt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return bt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return bt.resolve(this.mutationQueue.length===0?dS:this.tr-1)}getAllMutationBatches(e){return bt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Gs(r,0),a=new Gs(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],i=>{const o=this.Xr(i.Yr);s.push(o)}),bt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Rs(ln);return r.forEach(a=>{const s=new Gs(a,0),i=new Gs(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,i],o=>{n=n.add(o.Yr)})}),bt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let s=n;lr.isDocumentKey(s)||(s=s.child(""));const i=new Gs(new lr(s),0);let o=new Rs(ln);return this.Zr.forEachWhile(l=>{const A=l.key.path;return!!n.isPrefixOf(A)&&(A.length===a&&(o=o.add(l.Yr)),!0)},i),bt.resolve(this.ti(o))}ti(e){const r=[];return e.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(e,r){Ln(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return bt.forEach(r.mutations,a=>{const s=new Gs(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new Gs(r,0),a=this.Zr.firstAfterOrEqual(n);return bt.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,bt.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jK{constructor(e){this.ri=e,this.docs=function(){return new Na(lr.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,i=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return bt.resolve(n?n.document.mutableCopy():Ui.newInvalidDocument(r))}getEntries(e,r){let n=kA();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():Ui.newInvalidDocument(a))}),bt.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let s=kA();const i=r.path,o=new lr(i.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:A,value:{document:d}}=l.getNext();if(!i.isPrefixOf(A.path))break;A.path.length>i.length+1||fq(dq(d),n)<=0||(a.has(d.key)||Zy(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return bt.resolve(s)}getAllFromCollectionGroup(e,r,n,a){Er(9500)}ii(e,r){return bt.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new OK(this)}getSize(e){return bt.resolve(this.size)}}class OK extends FK{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(n)}),bt.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QK{constructor(e){this.persistence=e,this.si=new Lh(r=>mS(r),pS),this.lastRemoteSnapshotVersion=kr.min(),this.highestTargetId=0,this.oi=0,this._i=new bS,this.targetCount=0,this.ai=Bm.ur()}forEachTarget(e,r){return this.si.forEach((n,a)=>r(a)),bt.resolve()}getLastRemoteSnapshotVersion(e){return bt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return bt.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),bt.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),bt.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new Bm(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,bt.resolve()}updateTargetData(e,r){return this.Pr(r),bt.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,bt.resolve()}removeTargets(e,r,n){let a=0;const s=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),a++)}),bt.waitFor(s).next(()=>a)}getTargetCount(e){return bt.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return bt.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),bt.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(i=>{s.push(a.markPotentiallyOrphaned(e,i))}),bt.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),bt.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return bt.resolve(n)}containsKey(e,r){return bt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e,r){this.ui={},this.overlays={},this.ci=new Wy(0),this.li=!1,this.li=!0,this.hi=new MK,this.referenceDelegate=e(this),this.Pi=new QK(this),this.indexManager=new _K,this.remoteDocumentCache=function(a){return new jK(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new CK(r),this.Ii=new LK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new UK,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new PK(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){$t("MemoryPersistence","Starting transaction:",e);const a=new HK(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(e,r){return bt.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class HK extends mq{constructor(e){super(),this.currentSequenceNumber=e}}class CS{constructor(e){this.persistence=e,this.Ri=new bS,this.Vi=null}static mi(e){return new CS(e)}get fi(){if(this.Vi)return this.Vi;throw Er(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),bt.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),bt.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),bt.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bt.forEach(this.fi,n=>{const a=lr.fromPath(n);return this.gi(e,a).next(s=>{s||r.removeEntry(a,kr.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return bt.or([()=>bt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class q2{constructor(e,r){this.persistence=e,this.pi=new Lh(n=>xq(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=IK(this,r)}static mi(e,r){return new q2(e,r)}Ei(){}di(e){return bt.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return bt.forEach(this.pi,(n,a)=>this.br(e,n,a).next(s=>s?bt.resolve():r(a)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(e,i=>this.br(e,i,r).next(o=>{o||(n++,s.removeEntry(i,kr.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),bt.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),bt.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),bt.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),bt.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=u2(e.data.value)),r}br(e,r,n){return bt.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const a=this.pi.get(r);return bt.resolve(a!==void 0&&a>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=a}static As(e,r){let n=cn(),a=cn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new ES(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zK{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return xH()?8:pq(Hi())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,a){const s={result:null};return this.ys(e,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.ws(e,r,a,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new VK;return this.Ss(e,r,i).next(o=>{if(s.result=o,this.Vs)return this.bs(e,r,i,o.size)})}).next(()=>s.result)}bs(e,r,n,a){return n.documentReadCount<this.fs?(j0()<=on.DEBUG&&$t("QueryEngine","SDK will not create cache indexes for query:",O0(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),bt.resolve()):(j0()<=on.DEBUG&&$t("QueryEngine","Query:",O0(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(j0()<=on.DEBUG&&$t("QueryEngine","The SDK decides to create cache indexes for query:",O0(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_u(r))):bt.resolve())}ys(e,r){if(Rk(r))return bt.resolve(null);let n=_u(r);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=H2(r,null,"F"),n=_u(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const i=cn(...s);return this.ps.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const A=this.Ds(r,o);return this.Cs(r,A,i,l.readTime)?this.ys(e,H2(r,null,"F")):this.vs(e,A,r,l)}))})))}ws(e,r,n,a){return Rk(r)||a.isEqual(kr.min())?bt.resolve(null):this.ps.getDocuments(e,n).next(s=>{const i=this.Ds(r,s);return this.Cs(r,i,n,a)?bt.resolve(null):(j0()<=on.DEBUG&&$t("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),O0(r)),this.vs(e,i,r,Aq(a,Jg)).next(o=>o))})}Ds(e,r){let n=new Rs(vU(e));return r.forEach((a,s)=>{Zy(e,s)&&(n=n.add(s))}),n}Cs(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(e,r,n){return j0()<=on.DEBUG&&$t("QueryEngine","Using full collection scan to execute query:",O0(r)),this.ps.getDocumentsMatchingQuery(e,r,lf.min(),n)}vs(e,r,n,a){return this.ps.getDocumentsMatchingQuery(e,n,a).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="LocalStore",GK=3e8;class qK{constructor(e,r,n,a){this.persistence=e,this.Fs=r,this.serializer=a,this.Ms=new Na(ln),this.xs=new Lh(s=>mS(s),pS),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DK(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function KK(t,e,r,n){return new qK(t,e,r,n)}async function HU(t,e){const r=Fr(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],o=[];let l=cn();for(const A of a){i.push(A.batchId);for(const d of A.mutations)l=l.add(d.key)}for(const A of s){o.push(A.batchId);for(const d of A.mutations)l=l.add(d.key)}return r.localDocuments.getDocuments(n,l).next(A=>({Ls:A,removedBatchIds:i,addedBatchIds:o}))})})}function WK(t,e){const r=Fr(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,A,d){const h=A.batch,m=h.keys();let g=bt.resolve();return m.forEach(b=>{g=g.next(()=>d.getEntry(l,b)).next(w=>{const _=A.docVersions.get(b);Ln(_!==null,48541),w.version.compareTo(_)<0&&(h.applyToRemoteDocument(w,A),w.isValidDocument()&&(w.setReadTime(A.commitVersion),d.addEntry(w)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(l,h))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=cn();for(let A=0;A<o.mutationResults.length;++A)o.mutationResults[A].transformResults.length>0&&(l=l.add(o.batch.mutations[A].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,a))})}function VU(t){const e=Fr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function $K(t,e){const r=Fr(t),n=e.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const o=[];e.targetChanges.forEach((d,h)=>{const m=a.get(h);if(!m)return;o.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,h).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,h)));let g=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(di.EMPTY_BYTE_STRING,kr.min()).withLastLimboFreeSnapshotVersion(kr.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,n)),a=a.insert(h,g),function(w,_,N){return w.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=GK?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(m,g,d)&&o.push(r.Pi.updateTargetData(s,g))});let l=kA(),A=cn();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(YK(s,i,e.documentUpdates).next(d=>{l=d.ks,A=d.qs})),!n.isEqual(kr.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(h=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(d)}return bt.waitFor(o).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,l,A)).next(()=>l)}).then(s=>(r.Ms=a,s))}function YK(t,e,r){let n=cn(),a=cn();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let i=kA();return r.forEach((o,l)=>{const A=s.get(o);l.isFoundDocument()!==A.isFoundDocument()&&(a=a.add(o)),l.isNoDocument()&&l.version.isEqual(kr.min())?(e.removeEntry(o,l.readTime),i=i.insert(o,l)):!A.isValidDocument()||l.version.compareTo(A.version)>0||l.version.compareTo(A.version)===0&&A.hasPendingWrites?(e.addEntry(l),i=i.insert(o,l)):$t(_S,"Ignoring outdated watch update for ",o,". Current version:",A.version," Watch version:",l.version)}),{ks:i,qs:a}})}function XK(t,e){const r=Fr(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=dS),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function JK(t,e){const r=Fr(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,e).next(s=>s?(a=s,bt.resolve(a)):r.Pi.allocateTargetId(n).next(i=>(a=new Hd(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function g_(t,e,r){const n=Fr(t),a=n.Ms.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!Vm(i))throw i;$t(_S,`Failed to update sequence numbers for target ${e}: ${i}`)}n.Ms=n.Ms.remove(e),n.xs.delete(a.target)}function qk(t,e,r){const n=Fr(t);let a=kr.min(),s=cn();return n.persistence.runTransaction("Execute query","readwrite",i=>function(l,A,d){const h=Fr(l),m=h.xs.get(d);return m!==void 0?bt.resolve(h.Ms.get(m)):h.Pi.getTargetData(A,d)}(n,i,_u(e)).next(o=>{if(o)return a=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(i,o.targetId).next(l=>{s=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(i,e,r?a:kr.min(),r?s:cn())).next(o=>(ZK(n,Mq(e),o),{documents:o,Qs:s})))}function ZK(t,e,r){let n=t.Os.get(e)||kr.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.Os.set(e,n)}class Kk{constructor(){this.activeTargetIds=Vq()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eW{constructor(){this.Mo=new Kk,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Kk,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tW{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="ConnectivityMonitor";class $k{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$t(Wk,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){$t(Wk,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sv=null;function x_(){return sv===null?sv=function(){return 268435456+Math.round(2147483648*Math.random())}():sv++,"0x"+sv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="RestConnection",rW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nW{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===j2?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(e,r,n,a,s){const i=x_(),o=this.zo(e,r.toUriEncodedString());$t(SC,`Sending RPC '${e}' ${i}:`,o,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,a,s);const{host:A}=new URL(o),d=Pm(A);return this.Jo(e,o,l,n,d).then(h=>($t(SC,`Received RPC '${e}' ${i}: `,h),h),h=>{throw Cm(SC,`RPC '${e}' ${i} failed with error: `,h,"url: ",o,"request:",n),h})}Ho(e,r,n,a,s,i){return this.Go(e,r,n,a,s)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qm}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>e[s]=a),n&&n.headers.forEach((a,s)=>e[s]=a)}zo(e,r){const n=rW[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aW{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i="WebChannelConnection";class sW extends nW{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,a,s){const i=x_();return new Promise((o,l)=>{const A=new qL;A.setWithCredentials(!0),A.listenOnce(KL.COMPLETE,()=>{try{switch(A.getLastErrorCode()){case c2.NO_ERROR:const h=A.getResponseJson();$t(_i,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case c2.TIMEOUT:$t(_i,`RPC '${e}' ${i} timed out`),l(new zt(mt.DEADLINE_EXCEEDED,"Request time out"));break;case c2.HTTP_ERROR:const m=A.getStatus();if($t(_i,`RPC '${e}' ${i} failed with status:`,m,"response text:",A.getResponseText()),m>0){let g=A.getResponseJson();Array.isArray(g)&&(g=g[0]);const b=g==null?void 0:g.error;if(b&&b.status&&b.message){const w=function(N){const k=N.toLowerCase().replace(/_/g,"-");return Object.values(mt).indexOf(k)>=0?k:mt.UNKNOWN}(b.status);l(new zt(w,b.message))}else l(new zt(mt.UNKNOWN,"Server responded with status "+A.getStatus()))}else l(new zt(mt.UNAVAILABLE,"Connection failed."));break;default:Er(9055,{l_:e,streamId:i,h_:A.getLastErrorCode(),P_:A.getLastError()})}}finally{$t(_i,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(a);$t(_i,`RPC '${e}' ${i} sending request:`,a),A.send(r,"POST",d,n,15)})}T_(e,r,n){const a=x_(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=YL(),o=$L(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},A=this.longPollingOptions.timeoutSeconds;A!==void 0&&(l.longPollingTimeout=Math.round(1e3*A)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const d=s.join("");$t(_i,`Creating RPC '${e}' stream ${a}: ${d}`,l);const h=i.createWebChannel(d,l);this.I_(h);let m=!1,g=!1;const b=new aW({Yo:_=>{g?$t(_i,`Not sending because RPC '${e}' stream ${a} is closed:`,_):(m||($t(_i,`Opening RPC '${e}' stream ${a} transport.`),h.open(),m=!0),$t(_i,`RPC '${e}' stream ${a} sending:`,_),h.send(_))},Zo:()=>h.close()}),w=(_,N,k)=>{_.listen(N,I=>{try{k(I)}catch(P){setTimeout(()=>{throw P},0)}})};return w(h,ig.EventType.OPEN,()=>{g||($t(_i,`RPC '${e}' stream ${a} transport opened.`),b.o_())}),w(h,ig.EventType.CLOSE,()=>{g||(g=!0,$t(_i,`RPC '${e}' stream ${a} transport closed`),b.a_(),this.E_(h))}),w(h,ig.EventType.ERROR,_=>{g||(g=!0,Cm(_i,`RPC '${e}' stream ${a} transport errored. Name:`,_.name,"Message:",_.message),b.a_(new zt(mt.UNAVAILABLE,"The operation could not be completed")))}),w(h,ig.EventType.MESSAGE,_=>{var N;if(!g){const k=_.data[0];Ln(!!k,16349);const I=k,P=(I==null?void 0:I.error)||((N=I[0])==null?void 0:N.error);if(P){$t(_i,`RPC '${e}' stream ${a} received error:`,P);const M=P.status;let D=function(T){const O=gs[T];if(O!==void 0)return kU(O)}(M),C=P.message;D===void 0&&(D=mt.INTERNAL,C="Unknown error status: "+M+" with message "+P.message),g=!0,b.a_(new zt(D,C)),h.close()}else $t(_i,`RPC '${e}' stream ${a} received:`,k),b.u_(k)}}),w(o,WL.STAT_EVENT,_=>{_.stat===i_.PROXY?$t(_i,`RPC '${e}' stream ${a} detected buffering proxy`):_.stat===i_.NOPROXY&&$t(_i,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function TC(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(t){return new cK(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e,r,n=1e3,a=1.5,s=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&$t("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk="PersistentStream";class GU{constructor(e,r,n,a,s,i,o,l){this.Mi=e,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new zU(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===mt.RESOURCE_EXHAUSTED?(NA(r.toString()),NA("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===mt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{e(()=>{const a=new zt(mt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return $t(Yk,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():($t(Yk,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iW extends GU{constructor(e,r,n,a,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=dK(this.serializer,e),n=function(s){if(!("targetChange"in s))return kr.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?kr.min():i.readTime?Su(i.readTime):kr.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=p_(this.serializer),r.addTarget=function(s,i){let o;const l=i.target;if(o=A_(l)?{documents:mK(s,l)}:{query:pK(s,l).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=RU(s,i.resumeToken);const A=f_(s,i.expectedCount);A!==null&&(o.expectedCount=A)}else if(i.snapshotVersion.compareTo(kr.min())>0){o.readTime=G2(s,i.snapshotVersion.toTimestamp());const A=f_(s,i.expectedCount);A!==null&&(o.expectedCount=A)}return o}(this.serializer,e);const n=xK(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=p_(this.serializer),r.removeTarget=e,this.q_(r)}}class oW extends GU{constructor(e,r,n,a,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return Ln(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ln(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ln(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=hK(e.writeResults,e.commitTime),n=Su(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=p_(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>fK(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lW{}class cW extends lW{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new zt(mt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Go(e,h_(r,n),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new zt(mt.UNKNOWN,s.toString())})}Ho(e,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(e,h_(r,n),a,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new zt(mt.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class uW{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(NA(r),this.aa=!1):$t("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh="RemoteStore";class AW{constructor(e,r,n,a,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(i=>{n.enqueueAndForget(async()=>{Uh(this)&&($t(Eh,"Restarting streams for network reachability change."),await async function(l){const A=Fr(l);A.Ea.add(4),await jx(A),A.Ra.set("Unknown"),A.Ea.delete(4),await aw(A)}(this))})}),this.Ra=new uW(n,a)}}async function aw(t){if(Uh(t))for(const e of t.da)await e(!0)}async function jx(t){for(const e of t.da)await e(!1)}function qU(t,e){const r=Fr(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),NS(r)?BS(r):Gm(r).O_()&&TS(r,e))}function SS(t,e){const r=Fr(t),n=Gm(r);r.Ia.delete(e),n.O_()&&KU(r,e),r.Ia.size===0&&(n.O_()?n.L_():Uh(r)&&r.Ra.set("Unknown"))}function TS(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(kr.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Gm(t).Y_(e)}function KU(t,e){t.Va.Ue(e),Gm(t).Z_(e)}function BS(t){t.Va=new sK({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Gm(t).start(),t.Ra.ua()}function NS(t){return Uh(t)&&!Gm(t).x_()&&t.Ia.size>0}function Uh(t){return Fr(t).Ea.size===0}function WU(t){t.Va=void 0}async function dW(t){t.Ra.set("Online")}async function fW(t){t.Ia.forEach((e,r)=>{TS(t,e)})}async function hW(t,e){WU(t),NS(t)?(t.Ra.ha(e),BS(t)):t.Ra.set("Unknown")}async function mW(t,e,r){if(t.Ra.set("Online"),e instanceof FU&&e.state===2&&e.cause)try{await async function(a,s){const i=s.cause;for(const o of s.targetIds)a.Ia.has(o)&&(await a.remoteSyncer.rejectListen(o,i),a.Ia.delete(o),a.Va.removeTarget(o))}(t,e)}catch(n){$t(Eh,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await K2(t,n)}else if(e instanceof f2?t.Va.Ze(e):e instanceof IU?t.Va.st(e):t.Va.tt(e),!r.isEqual(kr.min()))try{const n=await VU(t.localStore);r.compareTo(n)>=0&&await function(s,i){const o=s.Va.Tt(i);return o.targetChanges.forEach((l,A)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.Ia.get(A);d&&s.Ia.set(A,d.withResumeToken(l.resumeToken,i))}}),o.targetMismatches.forEach((l,A)=>{const d=s.Ia.get(l);if(!d)return;s.Ia.set(l,d.withResumeToken(di.EMPTY_BYTE_STRING,d.snapshotVersion)),KU(s,l);const h=new Hd(d.target,l,A,d.sequenceNumber);TS(s,h)}),s.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){$t(Eh,"Failed to raise snapshot:",n),await K2(t,n)}}async function K2(t,e,r){if(!Vm(e))throw e;t.Ea.add(1),await jx(t),t.Ra.set("Offline"),r||(r=()=>VU(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$t(Eh,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await aw(t)})}function $U(t,e){return e().catch(r=>K2(t,r,e))}async function sw(t){const e=Fr(t),r=df(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:dS;for(;pW(e);)try{const a=await XK(e.localStore,n);if(a===null){e.Ta.length===0&&r.L_();break}n=a.batchId,gW(e,a)}catch(a){await K2(e,a)}YU(e)&&XU(e)}function pW(t){return Uh(t)&&t.Ta.length<10}function gW(t,e){t.Ta.push(e);const r=df(t);r.O_()&&r.X_&&r.ea(e.mutations)}function YU(t){return Uh(t)&&!df(t).x_()&&t.Ta.length>0}function XU(t){df(t).start()}async function xW(t){df(t).ra()}async function vW(t){const e=df(t);for(const r of t.Ta)e.ea(r.mutations)}async function yW(t,e,r){const n=t.Ta.shift(),a=vS.from(n,e,r);await $U(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await sw(t)}async function wW(t,e){e&&df(t).X_&&await async function(n,a){if(function(i){return rK(i)&&i!==mt.ABORTED}(a.code)){const s=n.Ta.shift();df(n).B_(),await $U(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await sw(n)}}(t,e),YU(t)&&XU(t)}async function Xk(t,e){const r=Fr(t);r.asyncQueue.verifyOperationInProgress(),$t(Eh,"RemoteStore received new credentials");const n=Uh(r);r.Ea.add(3),await jx(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await aw(r)}async function bW(t,e){const r=Fr(t);e?(r.Ea.delete(2),await aw(r)):e||(r.Ea.add(2),await jx(r),r.Ra.set("Unknown"))}function Gm(t){return t.ma||(t.ma=function(r,n,a){const s=Fr(r);return s.sa(),new iW(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Xo:dW.bind(null,t),t_:fW.bind(null,t),r_:hW.bind(null,t),H_:mW.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),NS(t)?BS(t):t.Ra.set("Unknown")):(await t.ma.stop(),WU(t))})),t.ma}function df(t){return t.fa||(t.fa=function(r,n,a){const s=Fr(r);return s.sa(),new oW(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:xW.bind(null,t),r_:wW.bind(null,t),ta:vW.bind(null,t),na:yW.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await sw(t)):(await t.fa.stop(),t.Ta.length>0&&($t(Eh,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,r,n,a,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new bA,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,s){const i=Date.now()+n,o=new kS(e,r,i,a,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new zt(mt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function IS(t,e){if(NA("AsyncQueue",`${e}: ${t}`),Vm(t))return new zt(mt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{static emptySet(e){return new nm(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||lr.comparator(r.key,n.key):(r,n)=>lr.comparator(r.key,n.key),this.keyedMap=og(),this.sortedSet=new Na(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof nm)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new nm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(){this.ga=new Na(lr.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):Er(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class Nm{constructor(e,r,n,a,s,i,o,l,A){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=A}static fromInitialDocuments(e,r,n,a,s){const i=[];return r.forEach(o=>{i.push({type:0,doc:o})}),new Nm(e,r,nm.emptySet(r),i,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CW{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class EW{constructor(){this.queries=Zk(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=Fr(r),s=a.queries;a.queries=Zk(),s.forEach((i,o)=>{for(const l of o.Sa)l.onError(n)})})(this,new zt(mt.ABORTED,"Firestore shutting down"))}}function Zk(){return new Lh(t=>xU(t),Jy)}async function FS(t,e){const r=Fr(t);let n=3;const a=e.query;let s=r.queries.get(a);s?!s.ba()&&e.Da()&&(n=2):(s=new CW,n=e.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(i){const o=IS(i,`Initialization of query '${O0(e.query)}' failed`);return void e.onError(o)}r.queries.set(a,s),s.Sa.push(e),e.va(r.onlineState),s.wa&&e.Fa(s.wa)&&DS(r)}async function RS(t,e){const r=Fr(t),n=e.query;let a=3;const s=r.queries.get(n);if(s){const i=s.Sa.indexOf(e);i>=0&&(s.Sa.splice(i,1),s.Sa.length===0?a=e.Da()?0:1:!s.ba()&&e.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function _W(t,e){const r=Fr(t);let n=!1;for(const a of e){const s=a.query,i=r.queries.get(s);if(i){for(const o of i.Sa)o.Fa(a)&&(n=!0);i.wa=a}}n&&DS(r)}function SW(t,e,r){const n=Fr(t),a=n.queries.get(e);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(e)}function DS(t){t.Ca.forEach(e=>{e.next()})}var v_,e3;(e3=v_||(v_={})).Ma="default",e3.Cache="cache";class LS{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new Nm(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=Nm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==v_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(e){this.key=e}}class ZU{constructor(e){this.key=e}}class TW{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=cn(),this.mutatedKeys=cn(),this.eu=vU(e),this.tu=new nm(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new Jk,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,i=a,o=!1;const l=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,A=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((d,h)=>{const m=a.get(d),g=Zy(this.query,h)?h:null,b=!!m&&this.mutatedKeys.has(m.key),w=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let _=!1;m&&g?m.data.isEqual(g.data)?b!==w&&(n.track({type:3,doc:g}),_=!0):this.su(m,g)||(n.track({type:2,doc:g}),_=!0,(l&&this.eu(g,l)>0||A&&this.eu(g,A)<0)&&(o=!0)):!m&&g?(n.track({type:0,doc:g}),_=!0):m&&!g&&(n.track({type:1,doc:m}),_=!0,(l||A)&&(o=!0)),_&&(g?(i=i.add(g),s=w?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:i,iu:n,Cs:o,mutatedKeys:s}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((d,h)=>function(g,b){const w=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Er(20277,{Rt:_})}};return w(g)-w(b)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(n),a=a??!1;const o=r&&!a?this._u():[],l=this.Xa.size===0&&this.current&&!a?1:0,A=l!==this.Za;return this.Za=l,i.length!==0||A?{snapshot:new Nm(this.query,e.tu,s,i,e.mutatedKeys,l===0,A,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Jk,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=cn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new ZU(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new JU(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=cn();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return Nm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const US="SyncEngine";class BW{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class NW{constructor(e){this.key=e,this.hu=!1}}class kW{constructor(e,r,n,a,s,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Lh(o=>xU(o),Jy),this.Iu=new Map,this.Eu=new Set,this.du=new Na(lr.comparator),this.Au=new Map,this.Ru=new bS,this.Vu={},this.mu=new Map,this.fu=Bm.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function IW(t,e,r=!0){const n=s8(t);let a;const s=n.Tu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await e8(n,e,r,!0),a}async function FW(t,e){const r=s8(t);await e8(r,e,!0,!1)}async function e8(t,e,r,n){const a=await JK(t.localStore,_u(e)),s=a.targetId,i=t.sharedClientState.addLocalQueryTarget(s,r);let o;return n&&(o=await RW(t,e,s,i==="current",a.resumeToken)),t.isPrimaryClient&&r&&qU(t.remoteStore,a),o}async function RW(t,e,r,n,a){t.pu=(h,m,g)=>async function(w,_,N,k){let I=_.view.ru(N);I.Cs&&(I=await qk(w.localStore,_.query,!1).then(({documents:C})=>_.view.ru(C,I)));const P=k&&k.targetChanges.get(_.targetId),M=k&&k.targetMismatches.get(_.targetId)!=null,D=_.view.applyChanges(I,w.isPrimaryClient,P,M);return r3(w,_.targetId,D.au),D.snapshot}(t,h,m,g);const s=await qk(t.localStore,e,!0),i=new TW(e,s.Qs),o=i.ru(s.documents),l=Px.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),A=i.applyChanges(o,t.isPrimaryClient,l);r3(t,r,A.au);const d=new BW(e,r,i);return t.Tu.set(e,d),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),A.snapshot}async function DW(t,e,r){const n=Fr(t),a=n.Tu.get(e),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(i=>!Jy(i,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await g_(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&SS(n.remoteStore,a.targetId),y_(n,a.targetId)}).catch(Hm)):(y_(n,a.targetId),await g_(n.localStore,a.targetId,!0))}async function LW(t,e){const r=Fr(t),n=r.Tu.get(e),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),SS(r.remoteStore,n.targetId))}async function UW(t,e,r){const n=VW(t);try{const a=await function(i,o){const l=Fr(i),A=Wr.now(),d=o.reduce((g,b)=>g.add(b.key),cn());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=kA(),w=cn();return l.Ns.getEntries(g,d).next(_=>{b=_,b.forEach((N,k)=>{k.isValidDocument()||(w=w.add(N))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,b)).next(_=>{h=_;const N=[];for(const k of o){const I=Xq(k,h.get(k.key).overlayedDocument);I!=null&&N.push(new Cf(k.key,I,uU(I.value.mapValue),Ql.exists(!0)))}return l.mutationQueue.addMutationBatch(g,A,N,o)}).next(_=>{m=_;const N=_.applyToLocalDocumentSet(h,w);return l.documentOverlayCache.saveOverlays(g,_.batchId,N)})}).then(()=>({batchId:m.batchId,changes:wU(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(i,o,l){let A=i.Vu[i.currentUser.toKey()];A||(A=new Na(ln)),A=A.insert(o,l),i.Vu[i.currentUser.toKey()]=A}(n,a.batchId,r),await Ox(n,a.changes),await sw(n.remoteStore)}catch(a){const s=IS(a,"Failed to persist write");r.reject(s)}}async function t8(t,e){const r=Fr(t);try{const n=await $K(r.localStore,e);e.targetChanges.forEach((a,s)=>{const i=r.Au.get(s);i&&(Ln(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?i.hu=!0:a.modifiedDocuments.size>0?Ln(i.hu,14607):a.removedDocuments.size>0&&(Ln(i.hu,42227),i.hu=!1))}),await Ox(r,n,e)}catch(n){await Hm(n)}}function t3(t,e,r){const n=Fr(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,i)=>{const o=i.view.va(e);o.snapshot&&a.push(o.snapshot)}),function(i,o){const l=Fr(i);l.onlineState=o;let A=!1;l.queries.forEach((d,h)=>{for(const m of h.Sa)m.va(o)&&(A=!0)}),A&&DS(l)}(n.eventManager,e),a.length&&n.Pu.H_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function MW(t,e,r){const n=Fr(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Au.get(e),s=a&&a.key;if(s){let i=new Na(lr.comparator);i=i.insert(s,Ui.newNoDocument(s,kr.min()));const o=cn().add(s),l=new rw(kr.min(),new Map,new Na(ln),i,o);await t8(n,l),n.du=n.du.remove(s),n.Au.delete(e),MS(n)}else await g_(n.localStore,e,!1).then(()=>y_(n,e,r)).catch(Hm)}async function PW(t,e){const r=Fr(t),n=e.batch.batchId;try{const a=await WK(r.localStore,e);n8(r,n,null),r8(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Ox(r,a)}catch(a){await Hm(a)}}async function jW(t,e,r){const n=Fr(t);try{const a=await function(i,o){const l=Fr(i);return l.persistence.runTransaction("Reject batch","readwrite-primary",A=>{let d;return l.mutationQueue.lookupMutationBatch(A,o).next(h=>(Ln(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(A,h))).next(()=>l.mutationQueue.performConsistencyCheck(A)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(A,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(A,d)).next(()=>l.localDocuments.getDocuments(A,d))})}(n.localStore,e);n8(n,e,r),r8(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Ox(n,a)}catch(a){await Hm(a)}}function r8(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function n8(t,e,r){const n=Fr(t);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(e);s&&(r?s.reject(r):s.resolve(),a=a.remove(e)),n.Vu[n.currentUser.toKey()]=a}}function y_(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||a8(t,n)})}function a8(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(SS(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),MS(t))}function r3(t,e,r){for(const n of r)n instanceof JU?(t.Ru.addReference(n.key,e),OW(t,n)):n instanceof ZU?($t(US,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||a8(t,n.key)):Er(19791,{wu:n})}function OW(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||($t(US,"New document in limbo: "+r),t.Eu.add(n),MS(t))}function MS(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new lr(ia.fromString(e)),n=t.fu.next();t.Au.set(n,new NW(r)),t.du=t.du.insert(r,n),qU(t.remoteStore,new Hd(_u(Xy(r.path)),n,"TargetPurposeLimboResolution",Wy.ce))}}async function Ox(t,e,r){const n=Fr(t),a=[],s=[],i=[];n.Tu.isEmpty()||(n.Tu.forEach((o,l)=>{i.push(n.pu(l,e,r).then(A=>{var d;if((A||r)&&n.isPrimaryClient){const h=A?!A.fromCache:(d=r==null?void 0:r.targetChanges.get(l.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(A){a.push(A);const h=ES.As(l.targetId,A);s.push(h)}}))}),await Promise.all(i),n.Pu.H_(a),await async function(l,A){const d=Fr(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>bt.forEach(A,m=>bt.forEach(m.Es,g=>d.persistence.referenceDelegate.addReference(h,m.targetId,g)).next(()=>bt.forEach(m.ds,g=>d.persistence.referenceDelegate.removeReference(h,m.targetId,g)))))}catch(h){if(!Vm(h))throw h;$t(_S,"Failed to update sequence numbers: "+h)}for(const h of A){const m=h.targetId;if(!h.fromCache){const g=d.Ms.get(m),b=g.snapshotVersion,w=g.withLastLimboFreeSnapshotVersion(b);d.Ms=d.Ms.insert(m,w)}}}(n.localStore,s))}async function QW(t,e){const r=Fr(t);if(!r.currentUser.isEqual(e)){$t(US,"User change. New user:",e.toKey());const n=await HU(r.localStore,e);r.currentUser=e,function(s,i){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new zt(mt.CANCELLED,i))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Ox(r,n.Ls)}}function HW(t,e){const r=Fr(t),n=r.Au.get(e);if(n&&n.hu)return cn().add(n.key);{let a=cn();const s=r.Iu.get(e);if(!s)return a;for(const i of s){const o=r.Tu.get(i);a=a.unionWith(o.view.nu)}return a}}function s8(t){const e=Fr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=t8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MW.bind(null,e),e.Pu.H_=_W.bind(null,e.eventManager),e.Pu.yu=SW.bind(null,e.eventManager),e}function VW(t){const e=Fr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jW.bind(null,e),e}class W2{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nw(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return KK(this.persistence,new zK,e.initialUser,this.serializer)}Cu(e){return new QU(CS.mi,this.serializer)}Du(e){return new eW}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}W2.provider={build:()=>new W2};class zW extends W2{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){Ln(this.persistence.referenceDelegate instanceof q2,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new NK(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?vo.withCacheSize(this.cacheSizeBytes):vo.DEFAULT;return new QU(n=>q2.mi(n,r),this.serializer)}}class w_{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>t3(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=QW.bind(null,this.syncEngine),await bW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new EW}()}createDatastore(e){const r=nw(e.databaseInfo.databaseId),n=function(s){return new sW(s)}(e.databaseInfo);return function(s,i,o,l){return new cW(s,i,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,a,s,i,o){return new AW(n,a,s,i,o)}(this.localStore,this.datastore,e.asyncQueue,r=>t3(this.syncEngine,r,0),function(){return $k.v()?new $k:new tW}())}createSyncEngine(e,r){return function(a,s,i,o,l,A,d){const h=new kW(a,s,i,o,l,A);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(a){const s=Fr(a);$t(Eh,"RemoteStore shutting down."),s.Ea.add(5),await jx(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}w_.provider={build:()=>new w_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):NA("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff="FirestoreClient";class GW{constructor(e,r,n,a,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Fi.UNAUTHENTICATED,this.clientId=AS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{$t(ff,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>($t(ff,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bA;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=IS(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function BC(t,e){t.asyncQueue.verifyOperationInProgress(),$t(ff,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async a=>{n.isEqual(a)||(await HU(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function n3(t,e){t.asyncQueue.verifyOperationInProgress();const r=await qW(t);$t(ff,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>Xk(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,a)=>Xk(e.remoteStore,a)),t._onlineComponents=e}async function qW(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$t(ff,"Using user provided OfflineComponentProvider");try{await BC(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(a){return a.name==="FirebaseError"?a.code===mt.FAILED_PRECONDITION||a.code===mt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;Cm("Error using user provided cache. Falling back to memory cache: "+r),await BC(t,new W2)}}else $t(ff,"Using default OfflineComponentProvider"),await BC(t,new zW(void 0));return t._offlineComponents}async function i8(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($t(ff,"Using user provided OnlineComponentProvider"),await n3(t,t._uninitializedComponentsProvider._online)):($t(ff,"Using default OnlineComponentProvider"),await n3(t,new w_))),t._onlineComponents}function KW(t){return i8(t).then(e=>e.syncEngine)}async function $2(t){const e=await i8(t),r=e.eventManager;return r.onListen=IW.bind(null,e.syncEngine),r.onUnlisten=DW.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=FW.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=LW.bind(null,e.syncEngine),r}function WW(t,e,r={}){const n=new bA;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,l,A){const d=new PS({next:m=>{d.Nu(),i.enqueueAndForget(()=>RS(s,h));const g=m.docs.has(o);!g&&m.fromCache?A.reject(new zt(mt.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?A.reject(new zt(mt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):A.resolve(m)},error:m=>A.reject(m)}),h=new LS(Xy(o.path),d,{includeMetadataChanges:!0,qa:!0});return FS(s,h)}(await $2(t),t.asyncQueue,e,r,n)),n.promise}function $W(t,e,r={}){const n=new bA;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,l,A){const d=new PS({next:m=>{d.Nu(),i.enqueueAndForget(()=>RS(s,h)),m.fromCache&&l.source==="server"?A.reject(new zt(mt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):A.resolve(m)},error:m=>A.reject(m)}),h=new LS(o,d,{includeMetadataChanges:!0,qa:!0});return FS(s,h)}(await $2(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o8(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8="firestore.googleapis.com",s3=!0;class i3{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new zt(mt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=l8,this.ssl=s3}else this.host=e.host,this.ssl=e.ssl??s3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=OU;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TK)throw new zt(mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=o8(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new zt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new zt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new zt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class iw{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i3({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new zt(mt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new zt(mt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i3(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new ZG;switch(n.type){case"firstParty":return new nq(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new zt(mt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=a3.get(r);n&&($t("ComponentProvider","Removing Datastore"),a3.delete(r),n.terminate())}(this),Promise.resolve()}}function YW(t,e,r,n={}){var A;t=Co(t,iw);const a=Pm(e),s=t._getSettings(),i={...s,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${r}`;a&&(aL(`https://${o}`),sL("Firestore",!0)),s.host!==l8&&s.host!==o&&Cm("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:a,emulatorOptions:n};if(!of(l,i)&&(t._setSettings(l),n.mockUserToken)){let d,h;if(typeof n.mockUserToken=="string")d=n.mockUserToken,h=Fi.MOCK_USER;else{d=cH(n.mockUserToken,(A=t._app)==null?void 0:A.options.projectId);const m=n.mockUserToken.sub||n.mockUserToken.user_id;if(!m)throw new zt(mt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Fi(m)}t._authCredentials=new eq(new JL(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new jA(this.firestore,e,this._query)}}class Qa{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ef(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qa(this.firestore,e,this._key)}toJSON(){return{type:Qa._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(Ux(r,Qa._jsonSchema))return new Qa(e,n||null,new lr(ia.fromString(r.referencePath)))}}Qa._jsonSchemaVersion="firestore/documentReference/1.0",Qa._jsonSchema={type:bs("string",Qa._jsonSchemaVersion),referencePath:bs("string")};class ef extends jA{constructor(e,r,n){super(e,r,Xy(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qa(this.firestore,null,new lr(e))}withConverter(e){return new ef(this.firestore,e,this._path)}}function Ar(t,e,...r){if(t=Ds(t),ZL("collection","path",e),t instanceof iw){const n=ia.fromString(e,...r);return vk(n),new ef(t,null,n)}{if(!(t instanceof Qa||t instanceof ef))throw new zt(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ia.fromString(e,...r));return vk(n),new ef(t.firestore,null,n)}}function hn(t,e,...r){if(t=Ds(t),arguments.length===1&&(e=AS.newId()),ZL("doc","path",e),t instanceof iw){const n=ia.fromString(e,...r);return xk(n),new Qa(t,null,new lr(n))}{if(!(t instanceof Qa||t instanceof ef))throw new zt(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ia.fromString(e,...r));return xk(n),new Qa(t.firestore,t instanceof ef?t.converter:null,new lr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3="AsyncQueue";class l3{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new zU(this,"async_queue_retry"),this._c=()=>{const n=TC();n&&$t(o3,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=TC();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=TC();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new bA;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Vm(e))throw e;$t(o3,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,NA("INTERNAL UNHANDLED ERROR: ",c3(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const a=kS.createAndSchedule(this,e,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&Er(47125,{Pc:c3(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function c3(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(t,["next","error","complete"])}class IA extends iw{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new l3,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new l3(e),this._firestoreClient=void 0,await e}}}function c8(t,e){const r=typeof t=="object"?t:lL(),n=typeof t=="string"?t:j2,a=eS(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=oH("firestore");s&&YW(a,...s)}return a}function ow(t){if(t._terminated)throw new zt(mt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||XW(t),t._firestoreClient}function XW(t){var n,a,s;const e=t._freezeSettings(),r=function(o,l,A,d){return new wq(o,l,A,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,o8(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new GW(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ul(di.fromBase64String(e))}catch(r){throw new zt(mt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Ul(di.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ul._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ux(e,Ul._jsonSchema))return Ul.fromBase64String(e.bytes)}}Ul._jsonSchemaVersion="firestore/bytes/1.0",Ul._jsonSchema={type:bs("string",Ul._jsonSchemaVersion),bytes:bs("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new zt(mt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new li(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new zt(mt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new zt(mt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ln(this._lat,e._lat)||ln(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Tu._jsonSchemaVersion}}static fromJSON(e){if(Ux(e,Tu._jsonSchema))return new Tu(e.latitude,e.longitude)}}Tu._jsonSchemaVersion="firestore/geoPoint/1.0",Tu._jsonSchema={type:bs("string",Tu._jsonSchemaVersion),latitude:bs("number"),longitude:bs("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Bu._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ux(e,Bu._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new Bu(e.vectorValues);throw new zt(mt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Bu._jsonSchemaVersion="firestore/vectorValue/1.0",Bu._jsonSchema={type:bs("string",Bu._jsonSchemaVersion),vectorValues:bs("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JW=/^__.*__$/;class ZW{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Cf(e,this.data,this.fieldMask,r,this.fieldTransforms):new Mx(e,this.data,r,this.fieldTransforms)}}class u8{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Cf(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function A8(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Er(40011,{Ac:t})}}class uw{constructor(e,r,n,a,s,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new uw({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const r=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var a;const r=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Y2(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(A8(this.Ac)&&JW.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class e${constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||nw(e)}Cc(e,r,n,a=!1){return new uw({Ac:e,methodName:r,Dc:n,path:li.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Aw(t){const e=t._freezeSettings(),r=nw(t._databaseId);return new e$(t._databaseId,!!e.ignoreUndefinedProperties,r)}function d8(t,e,r,n,a,s={}){const i=t.Cc(s.merge||s.mergeFields?2:0,e,r,a);OS("Data must be an object, but it was:",i,n);const o=f8(n,i);let l,A;if(s.merge)l=new Zo(i.fieldMask),A=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const m=b_(e,h,r);if(!i.contains(m))throw new zt(mt.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);m8(d,m)||d.push(m)}l=new Zo(d),A=i.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,A=i.fieldTransforms;return new ZW(new wo(o),l,A)}class dw extends cw{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dw}}function t$(t,e,r){return new uw({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class jS extends cw{constructor(e,r){super(e),this.vc=r}_toFieldTransform(e){const r=t$(this,e,!0),n=this.vc.map(s=>qm(s,r)),a=new Tm(n);return new Kq(e.path,a)}isEqual(e){return e instanceof jS&&of(this.vc,e.vc)}}function r$(t,e,r,n){const a=t.Cc(1,e,r);OS("Data must be an object, but it was:",a,n);const s=[],i=wo.empty();bf(n,(l,A)=>{const d=QS(e,l,r);A=Ds(A);const h=a.yc(d);if(A instanceof dw)s.push(d);else{const m=qm(A,h);m!=null&&(s.push(d),i.set(d,m))}});const o=new Zo(s);return new u8(i,o,a.fieldTransforms)}function n$(t,e,r,n,a,s){const i=t.Cc(1,e,r),o=[b_(e,n,r)],l=[a];if(s.length%2!=0)throw new zt(mt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)o.push(b_(e,s[m])),l.push(s[m+1]);const A=[],d=wo.empty();for(let m=o.length-1;m>=0;--m)if(!m8(A,o[m])){const g=o[m];let b=l[m];b=Ds(b);const w=i.yc(g);if(b instanceof dw)A.push(g);else{const _=qm(b,w);_!=null&&(A.push(g),d.set(g,_))}}const h=new Zo(A);return new u8(d,h,i.fieldTransforms)}function a$(t,e,r,n=!1){return qm(r,t.Cc(n?4:3,e))}function qm(t,e){if(h8(t=Ds(t)))return OS("Unsupported field value:",e,t),f8(t,e);if(t instanceof cw)return function(n,a){if(!A8(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,a){const s=[];let i=0;for(const o of n){let l=qm(o,a.wc(i));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,a){if((n=Ds(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return zq(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Wr.fromDate(n);return{timestampValue:G2(a.serializer,s)}}if(n instanceof Wr){const s=new Wr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:G2(a.serializer,s)}}if(n instanceof Tu)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ul)return{bytesValue:RU(a.serializer,n._byteString)};if(n instanceof Qa){const s=a.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw a.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:wS(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Bu)return function(i,o){return{mapValue:{fields:{[lU]:{stringValue:cU},[O2]:{arrayValue:{values:i.toArray().map(A=>{if(typeof A!="number")throw o.Sc("VectorValues must only contain numeric values.");return gS(o.serializer,A)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${Ky(n)}`)}(t,e)}function f8(t,e){const r={};return rU(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bf(t,(n,a)=>{const s=qm(a,e.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function h8(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Wr||t instanceof Tu||t instanceof Ul||t instanceof Qa||t instanceof cw||t instanceof Bu)}function OS(t,e,r){if(!h8(r)||!eU(r)){const n=Ky(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function b_(t,e,r){if((e=Ds(e))instanceof lw)return e._internalPath;if(typeof e=="string")return QS(t,e);throw Y2("Field path arguments must be of type string or ",t,!1,void 0,r)}const s$=new RegExp("[~\\*/\\[\\]]");function QS(t,e,r){if(e.search(s$)>=0)throw Y2(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new lw(...e.split("."))._internalPath}catch{throw Y2(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Y2(t,e,r,n,a){const s=n&&!n.isEmpty(),i=a!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||i)&&(l+=" (found",s&&(l+=` in field ${n}`),i&&(l+=` in document ${a}`),l+=")"),new zt(mt.INVALID_ARGUMENT,o+t+l)}function m8(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(e,r,n,a,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Qa(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new i$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(fw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class i$ extends p8{data(){return super.data()}}function fw(t,e){return typeof e=="string"?QS(t,e):e instanceof lw?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g8(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new zt(mt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class HS{}class VS extends HS{}function an(t,e,...r){let n=[];e instanceof HS&&n.push(e),n=n.concat(r),function(s){const i=s.filter(l=>l instanceof zS).length,o=s.filter(l=>l instanceof hw).length;if(i>1||i>0&&o>0)throw new zt(mt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class hw extends VS{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new hw(e,r,n)}_apply(e){const r=this._parse(e);return x8(e._query,r),new jA(e.firestore,e.converter,d_(e._query,r))}_parse(e){const r=Aw(e.firestore);return function(s,i,o,l,A,d,h){let m;if(A.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new zt(mt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){d3(h,d);const b=[];for(const w of h)b.push(A3(l,s,w));m={arrayValue:{values:b}}}else m=A3(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||d3(h,d),m=a$(o,i,h,d==="in"||d==="not-in");return ws.create(A,d,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Ai(t,e,r){const n=e,a=fw("where",t);return hw._create(a,n,r)}class zS extends HS{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new zS(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Fc.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(a,s){let i=a;const o=s.getFlattenedFilters();for(const l of o)x8(i,l),i=d_(i,l)}(e._query,r),new jA(e.firestore,e.converter,d_(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class GS extends VS{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new GS(e,r)}_apply(e){const r=function(a,s,i){if(a.startAt!==null)throw new zt(mt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new zt(mt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rx(s,i)}(e._query,this._field,this._direction);return new jA(e.firestore,e.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new zm(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function ya(t,e="asc"){const r=e,n=fw("orderBy",t);return GS._create(n,r)}class qS extends VS{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new qS(e,r,n)}_apply(e){return new jA(e.firestore,e.converter,H2(e._query,this._limit,this._limitType))}}function KS(t){return uq("limit",t),qS._create("limit",t,"F")}function A3(t,e,r){if(typeof(r=Ds(r))=="string"){if(r==="")throw new zt(mt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gU(e)&&r.indexOf("/")!==-1)throw new zt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(ia.fromString(r));if(!lr.isDocumentKey(n))throw new zt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Tk(t,new lr(n))}if(r instanceof Qa)return Tk(t,r._key);throw new zt(mt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ky(r)}.`)}function d3(t,e){if(!Array.isArray(t)||t.length===0)throw new zt(mt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function x8(t,e){const r=function(a,s){for(const i of a)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new zt(mt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new zt(mt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class o${convertValue(e,r="none"){switch(Af(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ts(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(uf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Er(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return bf(e,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(e){var n,a,s;const r=(s=(a=(n=e.fields)==null?void 0:n[O2].arrayValue)==null?void 0:a.values)==null?void 0:s.map(i=>ts(i.doubleValue));return new Bu(r)}convertGeoPoint(e){return new Tu(ts(e.latitude),ts(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Yy(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Zg(e));default:return null}}convertTimestamp(e){const r=cf(e);return new Wr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=ia.fromString(e);Ln(jU(n),9688,{name:e});const a=new ex(n.get(1),n.get(3)),s=new lr(n.popFirst(5));return a.isEqual(r)||NA(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class cg{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uh extends p8{constructor(e,r,n,a,s,i){super(e,r,n,a,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new h2(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(fw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new zt(mt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=uh._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}uh._jsonSchemaVersion="firestore/documentSnapshot/1.0",uh._jsonSchema={type:bs("string",uh._jsonSchemaVersion),bundleSource:bs("string","DocumentSnapshot"),bundleName:bs("string"),bundle:bs("string")};class h2 extends uh{data(e={}){return super.data(e)}}class Ah{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new cg(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new h2(this._firestore,this._userDataWriter,n.key,n,new cg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new zt(mt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(o=>{const l=new h2(a._firestore,a._userDataWriter,o.doc.key,o.doc,new cg(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new h2(a._firestore,a._userDataWriter,o.doc.key,o.doc,new cg(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);let A=-1,d=-1;return o.type!==0&&(A=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:l$(o.type),doc:l,oldIndex:A,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new zt(mt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ah._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=AS.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function l$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Er(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(t){t=Co(t,Qa);const e=Co(t.firestore,IA);return WW(ow(e),t._key).then(r=>y8(e,t,r))}Ah._jsonSchemaVersion="firestore/querySnapshot/1.0",Ah._jsonSchema={type:bs("string",Ah._jsonSchemaVersion),bundleSource:bs("string","QuerySnapshot"),bundleName:bs("string"),bundle:bs("string")};class WS extends o${constructor(e){super(),this.firestore=e}convertBytes(e){return new Ul(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Qa(this.firestore,null,r)}}function So(t){t=Co(t,jA);const e=Co(t.firestore,IA),r=ow(e),n=new WS(e);return g8(t._query),$W(r,t._query).then(a=>new Ah(e,n,t,a))}function OA(t,e,r){t=Co(t,Qa);const n=Co(t.firestore,IA),a=v8(t.converter,e,r);return mw(n,[d8(Aw(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,Ql.none())])}function Km(t,e,r,...n){t=Co(t,Qa);const a=Co(t.firestore,IA),s=Aw(a);let i;return i=typeof(e=Ds(e))=="string"||e instanceof lw?n$(s,"updateDoc",t._key,e,r,n):r$(s,"updateDoc",t._key,e),mw(a,[i.toMutation(t._key,Ql.exists(!0))])}function Bo(t){return mw(Co(t.firestore,IA),[new xS(t._key,Ql.none())])}function eo(t,e){const r=Co(t.firestore,IA),n=hn(t),a=v8(t.converter,e);return mw(r,[d8(Aw(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,Ql.exists(!1))]).then(()=>n)}function na(t,...e){var l,A,d;t=Ds(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||u3(e[n])||(r=e[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(u3(e[n])){const h=e[n];e[n]=(l=h.next)==null?void 0:l.bind(h),e[n+1]=(A=h.error)==null?void 0:A.bind(h),e[n+2]=(d=h.complete)==null?void 0:d.bind(h)}let s,i,o;if(t instanceof Qa)i=Co(t.firestore,IA),o=Xy(t._key.path),s={next:h=>{e[n]&&e[n](y8(i,t,h))},error:e[n+1],complete:e[n+2]};else{const h=Co(t,jA);i=Co(h.firestore,IA),o=h._query;const m=new WS(i);s={next:g=>{e[n]&&e[n](new Ah(i,m,h,g))},error:e[n+1],complete:e[n+2]},g8(t._query)}return function(m,g,b,w){const _=new PS(w),N=new LS(g,_,b);return m.asyncQueue.enqueueAndForget(async()=>FS(await $2(m),N)),()=>{_.Nu(),m.asyncQueue.enqueueAndForget(async()=>RS(await $2(m),N))}}(ow(i),o,a,s)}function mw(t,e){return function(n,a){const s=new bA;return n.asyncQueue.enqueueAndForget(async()=>UW(await KW(n),a,s)),s.promise}(ow(t),e)}function y8(t,e,r){const n=r.docs.get(e._key),a=new WS(t);return new uh(t,a,e._key,n,new cg(r.hasPendingWrites,r.fromCache),e.converter)}function c$(...t){return new jS("arrayUnion",t)}(function(e,r=!0){(function(a){Qm=a})(jm),wm(new wh("firestore",(n,{instanceIdentifier:a,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new IA(new tq(n.getProvider("auth-internal")),new aq(i,n.getProvider("app-check-internal")),function(A,d){if(!Object.prototype.hasOwnProperty.apply(A.options,["projectId"]))throw new zt(mt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ex(A.options.projectId,d)}(i,a),i);return s={useFetchStreams:r,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Xd(hk,mk,e),Xd(hk,mk,"esm2020")})();const u$={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},w8=tS(u$),Vp=zL(w8),wn=c8(w8);var er=(t=>(t.SUBDIRECCION="SUBDIRECCION",t.PROFESORADO="PROFESORADO",t.COORDINACION_TP="COORDINACION_TP",t.ESTUDIANTE="ESTUDIANTE",t))(er||{}),qr=(t=>(t.EVALUACION="Evaluación",t.ACTO="Acto",t.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",t.SALIDA_PEDAGOGICA="Salida Pedagógica",t))(qr||{}),th=(t=>(t.PRUEBA_PARCIAL="Prueba parcial",t.GUIA_APRENDIZAJE="Guía de Aprendizaje",t.RUBRICA="Rúbrica",t.PAUTA_COTEJO="Pauta de Cotejo",t))(th||{});const Cs="w-6 h-6",pw="w-24 h-24",$S=()=>c.jsxs("svg",{className:"w-32 h-32 text-slate-700 dark:text-slate-300",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M9 14V10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M12 14V8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),A$=()=>c.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M9 18h6"}),c.jsx("path",{d:"M10 22h4"}),c.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),d$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),f$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Cs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),ug=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Cs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),Ag=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Cs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),b8=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),h$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pw,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),m$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),p$=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:pw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),g$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),x$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Cs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),f3=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Cs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),iv=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Cs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),NC=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Cs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),ov=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Cs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),kC=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Cs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),h3=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Cs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),v$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Cs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),y$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Cs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),w$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Cs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),b$=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Cs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),m3=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Cs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),C$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Cs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),IC=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Cs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),E$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Cs,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),_$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Cs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),p3=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Cs,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),S$=[{id:er.SUBDIRECCION,label:"Subdirección Pedagógica",icon:c.jsx(h$,{})},{id:er.PROFESORADO,label:"Profesorado",icon:c.jsx(m$,{})},{id:er.COORDINACION_TP,label:"Coordinación TP",icon:c.jsx(p$,{})},{id:er.ESTUDIANTE,label:"Estudiantes",icon:c.jsx(g$,{})}],T$={[er.SUBDIRECCION]:[{name:"Dashboard",icon:c.jsx(x$,{})},{name:"Administración",icon:c.jsx(b$,{})},{name:"Seguimiento Curricular",icon:c.jsx(_$,{})},{name:"Acompañamiento docente",icon:c.jsx(w$,{})},{name:"Análisis Taxonómico",icon:c.jsx(p3,{})},{name:"Interdisciplinario",icon:c.jsx(IC,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:c.jsx(f3,{})},{name:"Crear horarios",icon:c.jsx(NC,{})},{name:"Seguimiento de acciones pedagógicas",icon:c.jsx(ov,{})},{name:"Inclusión",icon:c.jsx(m3,{})},{name:"Calendario Académico",icon:c.jsx(iv,{})},{name:"Muro de Anuncios",icon:c.jsx(ug,{})},{name:"Mensajería Interna",icon:c.jsx(Ag,{})},{name:"Generador de Actas",icon:c.jsx(kC,{})}],[er.PROFESORADO]:[{name:"Planificación",icon:c.jsx(h3,{})},{name:"Mis Acompañamientos",icon:c.jsx(C$,{})},{name:"Recursos de Aprendizaje",icon:c.jsx(v$,{})},{name:"Análisis Taxonómico",icon:c.jsx(p3,{})},{name:"Interdisciplinario",icon:c.jsx(IC,{})},{name:"Inclusión",icon:c.jsx(m3,{})},{name:"Actividades Remotas",icon:c.jsx(y$,{})},{name:"Evaluación de Aprendizajes",icon:c.jsx(kC,{})},{name:"Evaluaciones Formativas",icon:c.jsx(ov,{})},{name:"Calendario Académico",icon:c.jsx(iv,{})},{name:"Muro de Anuncios",icon:c.jsx(ug,{})},{name:"Mensajería Interna",icon:c.jsx(Ag,{})},{name:"Generador de Actas",icon:c.jsx(f3,{})}],[er.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:c.jsx(ov,{})},{name:"Asistencia Dual",icon:c.jsx(NC,{})},{name:"Pañol",icon:c.jsx(E$,{})},{name:"Calendario Académico",icon:c.jsx(iv,{})},{name:"Muro de Anuncios",icon:c.jsx(ug,{})},{name:"Mensajería Interna",icon:c.jsx(Ag,{})},{name:"Generador de Actas",icon:c.jsx(kC,{})}],[er.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:c.jsx(h3,{})},{name:"Evaluación Formativa",icon:c.jsx(ov,{})},{name:"Tareas Interdisciplinarias",icon:c.jsx(IC,{})},{name:"Asistencia a Empresa",icon:c.jsx(NC,{})},{name:"Calendario Académico",icon:c.jsx(iv,{})},{name:"Muro de Anuncios",icon:c.jsx(ug,{})},{name:"Mensajería Interna",icon:c.jsx(Ag,{})}]},g3=["Currículum y Evaluación","Convivencia Escolar","Orientación","Gestión Pedagógica General"],zp=["Pendiente","En Proceso","Cumplida"],X2=["1º Medio","2º Medio","3º Medio","4º Medio"],rl=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],ss=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],C_=["Juan Pérez","María González","Carlos Soto","Ana Fernández","Luis Rojas","Laura Muñoz","Pedro Castillo","Sofía Reyes","Diego Flores","Valentina Castro"],m2=["Lunes","Martes","Miércoles","Jueves","Viernes"],E_=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],B$={"1º y 2º medio":{"Lengua y Literatura":6,Matemática:6,Inglés:3,"Historia y Geografía":4,"Educación Física":2,Ciencias:4,"Artes/Música":2,Tecnología:2,Orientación:1},"3º y 4º medio (Humanista-Científico)":{"Lengua y Literatura":4,Matemática:4,Inglés:2,"Historia y Geografía":3,"Educación Ciudadana":2,Filosofía:3,"Ciencias para la Ciudadanía":2,"Educación Física":2},"3º y 4º medio (Técnico-Profesional)":{"Lengua y Literatura":2,Matemática:2,Inglés:2,"Historia y Geografía":2,Filosofía:2,"Educación Física":2,"Módulo TP":18}},Od={[qr.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[qr.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[qr.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[qr.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},N$=Object.values(th),FC=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],RC=["Vinculado","Desvinculado","En proceso","Empresa"],dh=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],k$=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],J2=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],Ig=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],C8=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],lv=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],x3=({onLoginAttempt:t,onForgotPasswordRequest:e,error:r})=>{const[n,a]=J.useState(""),[s,i]=J.useState(""),[o,l]=J.useState("login"),A=m=>{m.preventDefault(),t(n,s)},d=m=>{m.preventDefault(),e(n),l("forgot_sent")},h=()=>o==="forgot"?c.jsxs("form",{onSubmit:d,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:m=>a(m.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),c.jsx("div",{className:"text-sm text-center",children:c.jsx("button",{type:"button",onClick:()=>l("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):o==="forgot_sent"?c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),c.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",c.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contraseña."]}),c.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),c.jsx("button",{type:"button",onClick:()=>{l("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):c.jsxs("form",{onSubmit:A,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:m=>a(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:m=>i(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:c.jsx("p",{children:r})}),c.jsx("div",{className:"text-sm text-center",children:c.jsx("button",{type:"button",onClick:()=>l("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx($S,{})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),c.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:h()}),c.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},DC=({trigger:t,children:e,onOpen:r})=>{const[n,a]=J.useState(!1),s=J.useRef(null),i=()=>{const l=!n;a(l),l&&r&&r()},o=l=>{s.current&&!s.current.contains(l.target)&&a(!1)};return J.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),c.jsxs("div",{className:"relative",ref:s,children:[c.jsx("div",{onClick:i,children:t}),n&&c.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:e})]})},v3="usuariosLiceo",I$=({user:t,onClose:e,onSave:r})=>{const[n,a]=J.useState({nombreCompleto:t.nombreCompleto,email:t.email,fotoUrl:t.fotoUrl||""}),s=o=>{a({...n,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const l={...t,...n};try{const A=localStorage.getItem(v3);let d=A?JSON.parse(A):[];const h=d.findIndex(m=>m.id===t.id);h>-1?d[h]=l:d.push(l),localStorage.setItem(v3,JSON.stringify(d)),r(l),e()}catch(A){console.error("Failed to save user profile:",A),alert("No se pudo guardar el perfil.")}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:c.jsxs("form",{onSubmit:i,children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),c.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),c.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),c.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),c.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.profile})]})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},y3="usuariosLiceo",F$=({user:t,onClose:e,onSave:r})=>{const[n,a]=J.useState(""),[s,i]=J.useState(""),[o,l]=J.useState(null),A=d=>{if(d.preventDefault(),l(null),!n){l("La contraseña no puede estar en blanco.");return}if(n!==s){l("Las contraseñas no coinciden.");return}const h={...t,password:n};try{const m=localStorage.getItem(y3);let g=m?JSON.parse(m):[];const b=g.findIndex(w=>w.id===t.id);b>-1?g[b]=h:g.push(h),localStorage.setItem(y3,JSON.stringify(g)),r(h),e()}catch(m){console.error("Failed to save new password:",m),l("No se pudo guardar la nueva contraseña.")}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:c.jsxs("form",{onSubmit:A,children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),c.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.email})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:c.jsx("p",{children:o})})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})},w3="anunciosMuro",b3="mensajesInternos",C3="lir-read-status",R$=({user:t})=>{if(t.fotoUrl)return c.jsx("img",{src:t.fotoUrl,alt:t.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const e=t.nombreCompleto||"",r=String(e).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return c.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},D$=({currentUser:t,onLogout:e,onNavigate:r,onUserUpdate:n,onChangeProfile:a,toggleSidebar:s,unreadMessagesCount:i,refreshUnreadCount:o})=>{const[l,A]=J.useState([]),[d,h]=J.useState([]),[m,g]=J.useState(!1),[b,w]=J.useState(!1),_=J.useCallback(()=>{try{const P=localStorage.getItem(`${C3}-${t.id}`);return P?JSON.parse(P):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[t.id]),N=J.useCallback(P=>{try{localStorage.setItem(`${C3}-${t.id}`,JSON.stringify(P))}catch(M){console.error("Failed to set read status:",M)}},[t.id]);J.useEffect(()=>{const P=JSON.parse(localStorage.getItem(w3)||"[]"),M=_();A(P.filter(C=>!M.announcements.includes(C.id)));const D=JSON.parse(localStorage.getItem(b3)||"[]");h(D.filter(C=>C.para===t.email).sort((C,B)=>new Date(B.fecha).getTime()-new Date(C.fecha).getTime()).slice(0,5))},[t.id,_,i]);const k=()=>{const P=_(),M=JSON.parse(localStorage.getItem(w3)||"[]").map(D=>D.id);P.announcements=M,N(P),A([])},I=()=>{const P=_(),D=JSON.parse(localStorage.getItem(b3)||"[]").filter(C=>C.para===t.email).map(C=>C.id);P.messages=[...new Set([...P.messages,...D])],N(P),o()};return c.jsxs(c.Fragment,{children:[c.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:c.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:s,children:c.jsx(d$,{})}),c.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[c.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),c.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),c.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),c.jsx("div",{className:"flex-1 flex justify-center",children:c.jsx("button",{onClick:()=>r("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:c.jsx(f$,{})})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(DC,{onOpen:k,trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Notificaciones",children:[c.jsx(ug,{}),l.length>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:l.length})]}),children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),c.jsxs("ul",{className:"mt-1",children:[l.slice(0,3).map(P=>c.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[c.jsx("p",{className:"font-bold dark:text-slate-200",children:P.titulo}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:P.mensaje})]},P.id)),l.length===0&&c.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),c.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),c.jsx(DC,{onOpen:I,trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[c.jsx(Ag,{}),i>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:i})]}),children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),c.jsxs("ul",{className:"mt-1",children:[d.slice(0,3).map(P=>c.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[c.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",P.de]}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:P.asunto})]},P.id)),d.length===0&&c.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),c.jsx("button",{onClick:()=>r("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),c.jsx(DC,{trigger:c.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:c.jsx(R$,{user:t})}),children:c.jsxs("div",{className:"p-2",children:[c.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:t.nombreCompleto}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:t.profile})]}),c.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[c.jsx("li",{children:c.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),c.jsx("li",{children:c.jsx("button",{onClick:()=>w(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),t.email==="subdi@lir.cl"&&c.jsx("li",{children:c.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cambiar Perfil"})}),c.jsx("li",{children:c.jsx("button",{onClick:e,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),m&&c.jsx(I$,{user:t,onClose:()=>g(!1),onSave:n}),b&&c.jsx(F$,{user:t,onClose:()=>w(!1),onSave:n})]})};var $f={};const L$={apiKey:$f.NEXT_PUBLIC_FIREBASE_API_KEY||"tu-api-key",authDomain:$f.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"tu-proyecto.firebaseapp.com",projectId:$f.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"tu-proyecto-id",storageBucket:$f.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"tu-proyecto.appspot.com",messagingSenderId:$f.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"123456789",appId:$f.NEXT_PUBLIC_FIREBASE_APP_ID||"1:123456789:web:abcdef",measurementId:$f.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-XXXXXXXXXX"},E8=VN().length===0?tS(L$):VN()[0],dr=c8(E8);zL(E8);const Qx="reemplazos_docentes",U$="usuarios",YS=t=>{var r,n,a,s;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,fechaActualizacion:((s=(a=e.fechaActualizacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||e.fechaActualizacion}},M$=t=>{const e=t.data();return{id:t.id,...e}},P$=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:Wr.fromDate(new Date),fechaActualizacion:Wr.fromDate(new Date)};return(await eo(Ar(dr,Qx),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},j$=async(t,e)=>{try{const r=hn(dr,Qx,t),n=await km(r);if(!n.exists()||n.data().userId!==e)throw new Error("No tienes permisos para eliminar este reemplazo");await Bo(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},O$=(t,e,r=50)=>{try{const n=an(Ar(dr,Qx),Ai("userId","==",t),ya("diaAusencia","desc"),KS(r));return na(n,a=>{const s=a.docs.map(YS);e(s)},a=>{console.error("Error en suscripción a reemplazos:",a),e([])})}catch(n){return console.error("Error al crear la suscripción de reemplazos:",n),()=>{}}},Q$=t=>{try{const e=an(Ar(dr,U$),Ai("profile","==",er.PROFESORADO));return na(e,n=>{const a=n.docs.map(M$);t(a)},n=>{console.error("Error al obtener la lista de profesores:",n),t([])})}catch(e){return console.error("Error al crear la suscripción de profesores:",e),()=>{}}},H$=async t=>{try{const e=an(Ar(dr,Qx),Ai("userId","==",t)),n=(await So(e)).docs.map(YS),a=n.length,s=n.filter(o=>o.resultado==="Hora realizada").length,i=n.filter(o=>o.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:a,horasRealizadas:s,horasCubiertas:i,porcentajeRealizadas:a>0?s/a*100:0}}catch(e){throw console.error("Error al obtener estadísticas:",e),new Error("No se pudieron obtener las estadísticas")}},V$=async(t,e)=>{try{if(!e.trim())return[];const r=an(Ar(dr,Qx),Ai("userId","==",t),ya("diaAusencia","desc"),KS(100)),a=(await So(r)).docs.map(YS),s=e.toLowerCase();return a.filter(i=>i.docenteAusente.toLowerCase().includes(s)||i.docenteReemplazante.toLowerCase().includes(s)||i.curso.toLowerCase().includes(s)||i.diaAusencia.includes(s)||i.asignaturaAusente.toLowerCase().includes(s)||i.asignaturaReemplazante.toLowerCase().includes(s))}catch(r){return console.error("Error en búsqueda de reemplazos:",r),[]}},z$=Array.from({length:12},(t,e)=>e+1),E3={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},G$=t=>{const[e,r]=J.useState([]),[n,a]=J.useState(!0),[s,i]=J.useState(null);J.useEffect(()=>t?O$(t,h=>{r(h),a(!1)}):void 0,[t]);const o=J.useCallback(async d=>{try{return i(null),await P$(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al guardar"),h}},[t]),l=J.useCallback(async d=>{try{i(null),await j$(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al eliminar"),h}},[t]),A=J.useCallback(async d=>{try{return i(null),d.trim()?await V$(t,d):e}catch(h){return i(h instanceof Error?h.message:"Error en la búsqueda"),[]}},[t,e]);return{reemplazos:e,loading:n,error:s,save:o,remove:l,search:A}},q$=()=>{const[t,e]=J.useState([]),[r,n]=J.useState(!0);J.useEffect(()=>Q$(i=>{e(i),n(!1)}),[]);const a=J.useMemo(()=>t.map(s=>s.nombreCompleto).sort(),[t]);return{profesores:t,profesorNames:a,loading:r}},K$=({selectedBlocks:t,onChange:e,legend:r,disabled:n=!1})=>c.jsxs("fieldset",{children:[c.jsx("legend",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:r}),c.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2",children:z$.map(a=>c.jsxs("label",{className:`flex items-center space-x-2 p-2 border rounded-lg transition-colors ${n?"opacity-50 cursor-not-allowed":"hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-700"}`,children:[c.jsx("input",{type:"checkbox",value:a,checked:t.includes(a),onChange:e,disabled:n,className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500 disabled:opacity-50"}),c.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:a})]},a))})]}),W$=({userId:t})=>{const[e,r]=J.useState(null),[n,a]=J.useState(!1),s=J.useCallback(async()=>{try{a(!0);const i=new Date,o=(i.getMonth()+1).toString(),l=i.getFullYear().toString(),A=await H$(t);r(A)}catch(i){console.error("Error al cargar estadísticas:",i)}finally{a(!1)}},[t]);return J.useEffect(()=>{t&&s()},[t,s]),n?c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("div",{className:"animate-pulse flex justify-center",children:c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):e?c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[c.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Estadísticas del Mes"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.totalReemplazos}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Total"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:e.horasRealizadas}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Realizadas"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:e.horasCubiertas}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Cubiertas"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[e.porcentajeRealizadas.toFixed(1),"%"]}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Efectividad"})]})]})]}):null},$$=({currentUser:t})=>{const e=t.email||t.id||"",{reemplazos:r,save:n,remove:a,search:s,loading:i,error:o}=G$(e),{profesorNames:l,loading:A}=q$(),[d,h]=J.useState(E3),[m,g]=J.useState(""),[b,w]=J.useState([]),[_,N]=J.useState(null),[k,I]=J.useState(!1),[P,M]=J.useState(!1);J.useEffect(()=>{(async()=>{if(!m.trim()){w(r);return}M(!0);try{const L=await s(m);w(L)}catch(L){console.error("Error en búsqueda:",L),w(r)}finally{M(!1)}})()},[r,m,s]);const D=J.useCallback(F=>{const{name:L,value:Q}=F.target;h(q=>({...q,[L]:Q}))},[]),C=J.useCallback(F=>{const L=parseInt(F.target.value,10);h(Q=>{const q=Q.bloquesAfectados,ie=q.includes(L)?q.filter(Z=>Z!==L):[...q,L].sort((Z,ee)=>Z-ee);return{...Q,bloquesAfectados:ie}})},[]),B=J.useCallback(async F=>{F.preventDefault(),N(null),I(!0);const{docenteAusente:L,asignaturaAusente:Q,curso:q,diaAusencia:ie,bloquesAfectados:Z,docenteReemplazante:ee,asignaturaReemplazante:ne}=d;if(!L||!Q||!q||!ie||!ee||!ne||Z.length===0){N("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),I(!1);return}if(L===ee){N("El docente ausente y el reemplazante no pueden ser la misma persona."),I(!1);return}const z=new Date(ie),W=new Date;if(W.setHours(0,0,0,0),z<W&&!window.confirm("La fecha seleccionada es anterior a hoy. ¿Desea continuar?")){I(!1);return}try{const ce=Q.trim().toLowerCase()===ne.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",j={...d,resultado:ce};await n(j),h(E3);const K=ce==="Hora realizada"?"✅ Reemplazo registrado - Hora realizada":"⚠️ Reemplazo registrado - Hora cubierta, no realizada",X=document.createElement("div");X.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",X.textContent=K,document.body.appendChild(X),setTimeout(()=>{document.body.contains(X)&&document.body.removeChild(X)},3e3)}catch(ce){console.error("Error al guardar reemplazo:",ce),N("Error al guardar el reemplazo. Por favor, intente nuevamente.")}finally{I(!1)}},[d,n]),T=J.useCallback(async F=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await a(F)}catch(L){console.error("Error al eliminar reemplazo:",L),alert("Error al eliminar el reemplazo. Por favor, intente nuevamente.")}},[a]),O="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400 disabled:opacity-50 disabled:cursor-not-allowed";return!t||!t.email&&!t.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx(W$,{userId:e}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Registro de Inasistencias y Reemplazos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete el formulario para registrar una nueva suplencia."}),A?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando profesores..."})]}):c.jsxs("form",{onSubmit:B,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Ausente"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docenteAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),c.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:D,className:O,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(F=>c.jsx("option",{value:F,children:F},F))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignaturaAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:D,className:O,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),rl.map(F=>c.jsx("option",{value:F,children:F},F))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:d.curso,onChange:D,className:O,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),ss.map(F=>c.jsx("option",{value:F,children:F},F))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"diaAusencia",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Día Ausencia"}),c.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:D,className:O,disabled:k,required:!0})]}),c.jsx(K$,{legend:"Bloques Afectados",selectedBlocks:d.bloquesAfectados,onChange:C,disabled:k})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Reemplazante"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docenteReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),c.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:D,className:O,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(F=>c.jsx("option",{value:F,children:F},F))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignaturaReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:D,className:O,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),rl.map(F=>c.jsx("option",{value:F,children:F},F))]})]}),d.asignaturaAusente&&d.asignaturaReemplazante&&c.jsxs("div",{className:"mt-6 p-4 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600",children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Vista Previa del Resultado:"}),c.jsx("div",{className:`px-3 py-2 rounded-full text-sm font-semibold inline-flex ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"✅ Hora realizada":"⚠️ Hora cubierta, no realizada"}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden - se considera hora realizada":"Las asignaturas no coinciden - se considera hora cubierta pero no realizada"})]})]})]}),(_||o)&&c.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:c.jsx("p",{className:"text-red-600 dark:text-red-400",children:_||o})}),c.jsx("div",{className:"pt-4 text-right",children:c.jsxs("button",{type:"submit",disabled:k||A,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[k&&c.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),k?"Registrando...":"Registrar Reemplazo"]})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Reemplazos"}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)...",value:m,onChange:F=>g(F.target.value),className:`${O} md:w-1/2 pl-10`,disabled:P}),c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:P?c.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"}):c.jsx("svg",{className:"h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),m&&c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:P?"Buscando...":`${b.length} resultado(s) encontrado(s)`})]}),i?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando reemplazos..."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Ausente"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Reemplazante"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Bloques"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Resultado"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:b.length>0?b.map(F=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(F.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:F.curso}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[F.docenteAusente,c.jsx("br",{}),c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:F.asignaturaAusente})]}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[F.docenteReemplazante,c.jsx("br",{}),c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:F.asignaturaReemplazante})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:F.bloquesAfectados.join(", ")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${F.resultado==="Hora realizada"?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:F.resultado})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm",children:c.jsx("button",{onClick:()=>T(F.id),title:"Eliminar registro",className:"p-1 text-red-600 hover:text-red-800 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors disabled:opacity-50",disabled:k,children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},F.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:m?"No se encontraron registros que coincidan con la búsqueda.":"No hay registros de reemplazos."})})})]})}),b.length>0&&!m&&c.jsxs("div",{className:"mt-4 text-sm text-slate-500 dark:text-slate-400 text-center",children:["Mostrando los últimos ",b.length," registros"]})]})]})},Y$=t=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const e=Ar(wn,"reemplazos"),r=an(e,ya("fecha","desc"));return na(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Reemplazos cargados para dashboard:",s.length),t(s)},a=>{throw console.error("❌ Error al cargar reemplazos:",a),a})}catch(e){throw console.error("❌ Error al configurar suscripción a reemplazos:",e),e}},X$=t=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const e=Ar(wn,"acompanamientos"),r=an(e,ya("fecha","desc"));return na(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Acompañamientos cargados para dashboard:",s.length),t(s)},a=>{throw console.error("❌ Error al cargar acompañamientos:",a),a})}catch(e){throw console.error("❌ Error al configurar suscripción a acompañamientos:",e),e}},J$=t=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const e=Ar(wn,"calendar_events"),r=an(e,ya("date","asc"));return na(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Eventos del calendario cargados para dashboard:",s.length),t(s)},a=>{throw console.error("❌ Error al cargar eventos del calendario:",a),a})}catch(e){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",e),e}},fu=({title:t,value:e,description:r,isLoading:n=!1})=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),n?c.jsxs("div",{className:"flex items-center mt-2",children:[c.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:e}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),Yf=({title:t,data:e,colorClass:r,valueFormatter:n=s=>String(s),isLoading:a=!1})=>{const s=J.useMemo(()=>e.map(o=>typeof o.value=="number"?o.value:parseFloat(String(o.value))||0),[e]),i=J.useMemo(()=>Math.max(...s,1),[s]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),a?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):c.jsx("div",{className:"space-y-4",children:e.length>0?e.sort((o,l)=>(typeof l.value=="number"?l.value:0)-(typeof o.value=="number"?o.value:0)).map((o,l)=>{const A=typeof o.value=="number"?o.value:parseFloat(String(o.value))||0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:o.label}),c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(o.value)})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${A/i*100}%`}})})]},o.label+l)}):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},Z$=()=>{const[t,e]=J.useState([]),[r,n]=J.useState([]),[a,s]=J.useState([]),[i,o]=J.useState(!0),[l,A]=J.useState(null);return J.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let d=0;const h=3,m=()=>{d++,d>=h&&(o(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const g=Y$(_=>{e(_),m()}),b=X$(_=>{n(_),m()}),w=J$(_=>{s(_),m()});return()=>{g(),b(),w()}}catch(g){console.error("❌ Error al configurar suscripciones del dashboard:",g),A(g instanceof Error?g.message:"Error al cargar datos del dashboard"),o(!1)}},[]),{registros:t,acompanamientos:r,calendarEvents:a,loading:i,error:l}},eY=({currentUser:t})=>{var h,m;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",t),console.log("🔍 Dashboard - currentUser.profile:",t==null?void 0:t.profile),console.log("🔍 Dashboard - Verificación de perfil:",(t==null?void 0:t.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(t==null?void 0:t.profile)),console.log("🔍 Dashboard - Profile length:",(h=t==null?void 0:t.profile)==null?void 0:h.length),console.log("🔍 Dashboard - Profile con comillas:",`"${t==null?void 0:t.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((m=t==null?void 0:t.profile)==null?void 0:m.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:e,acompanamientos:r,calendarEvents:n,loading:a,error:s}=Z$(),[i,o]=J.useState(Ig);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:e.length,acompanamientos:r.length,calendarEvents:n.length,loading:a,error:s,currentUser:t==null?void 0:t.profile}),J.useEffect(()=>{try{const g=localStorage.getItem("acompanamientoDocenteCustomRubrica");o(g?JSON.parse(g):Ig)}catch(g){console.error("Error al leer rúbrica personalizada",g),o(Ig)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!t),console.log("🔍 Dashboard - profile value:",`"${t==null?void 0:t.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(t==null?void 0:t.profile)==="SUBDIRECCION"),!t)return console.log("❌ Dashboard - currentUser es null/undefined"),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(t.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",t.profile),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),c.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[c.jsx("p",{children:c.jsx("strong",{children:"Debug Info:"})}),c.jsxs("p",{children:['Su perfil actual: "',t.profile,'"']}),c.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),c.jsxs("p",{children:["Usuario: ",t.email||t.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),s)return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),c.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),c.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const l=J.useMemo(()=>{const g=e.length;if(g===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const b=e.filter(M=>M.resultado==="Hora realizada").length,w=g-b,_=`${(b/g*100).toFixed(1)}%`,N=(M,D)=>M.reduce((C,B)=>{const T=B[D];return typeof T=="string"&&(C[T]=(C[T]||0)+1),C},{}),k=N(e,"docenteAusente"),I=N(e,"docenteReemplazante"),P=N(e,"curso");return{totalInasistencias:g,horasRealizadas:b,horasCubiertas:w,tasaCobertura:_,inasistenciasPorDocente:Object.entries(k).map(([M,D])=>({label:M,value:D})),reemplazosPorDocente:Object.entries(I).map(([M,D])=>({label:M,value:D})),inasistenciasPorCurso:Object.entries(P).map(([M,D])=>({label:M,value:D})),distribucionResultados:[{label:"Hora Realizada",value:b},{label:"Hora Cubierta",value:w}]}},[e]),A=J.useMemo(()=>{const g=r.length;if(g===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const b=new Map;i.forEach(D=>{D.criteria.forEach(C=>{b.set(C.name,D.domain)})});let w=0,_=0;const N={},k={};r.forEach(D=>{N[D.docente]||(N[D.docente]={total:0,count:0}),Object.entries(D.rubricaResultados).forEach(([C,B])=>{w+=B,_++,N[D.docente].total+=B,N[D.docente].count++;const T=b.get(C);T&&(k[T]||(k[T]={total:0,count:0}),k[T].total+=B,k[T].count++)})});const I=_>0?(w/_).toFixed(2):"N/A",P=Object.entries(N).map(([D,C])=>({label:D,value:C.count>0?(C.total/C.count).toFixed(2):0})),M=Object.entries(k).map(([D,C])=>({label:D,value:C.count>0?(C.total/C.count).toFixed(2):0}));return{totalAcompanamientos:g,promedioGeneral:I,desempenoPorDocente:P,desempenoPorDominio:M}},[r,i]),d=J.useMemo(()=>{const g={[qr.EVALUACION]:0,[qr.ACTO]:0,[qr.ACTIVIDAD_FOCALIZADA]:0,[qr.SALIDA_PEDAGOGICA]:0};for(const w of n)g.hasOwnProperty(w.type)&&g[w.type]++;const b=Object.entries(g).map(([w,_])=>({label:Od[w].label,value:_}));return{totalEvaluaciones:g[qr.EVALUACION],totalActos:g[qr.ACTO],totalActividadesFocalizadas:g[qr.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:g[qr.SALIDA_PEDAGOGICA],distribucionEventos:b}},[n]);return a?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):l.totalInasistencias===0&&A.totalAcompanamientos===0&&n.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"📊"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),c.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[c.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),c.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),c.jsx("p",{children:"• Calendario Académico"})]})]}):c.jsxs("div",{className:"space-y-12 animate-fade-in",children:[c.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[c.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),c.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),c.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),e.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(fu,{title:"Total Inasistencias",value:l.totalInasistencias,description:"Registros totales",isLoading:a}),c.jsx(fu,{title:"Horas Realizadas",value:l.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),c.jsx(fu,{title:"Horas Cubiertas",value:l.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),c.jsx(fu,{title:"Tasa de Cobertura Efectiva",value:l.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(Yf,{title:"Inasistencias por Docente",data:l.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),c.jsx(Yf,{title:"Reemplazos por Docente",data:l.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),c.jsx(Yf,{title:"Inasistencias por Curso",data:l.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),c.jsx(Yf,{title:"Distribución de Resultados",data:l.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),r.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(fu,{title:"Total Acompañamientos",value:A.totalAcompanamientos,description:"Registros realizados",isLoading:a}),c.jsx(fu,{title:"Promedio General",value:A.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:a})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(Yf,{title:"Desempeño Promedio por Docente",data:A.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:g=>Number(g).toFixed(2),isLoading:a}),c.jsx(Yf,{title:"Desempeño Promedio por Dominio",data:A.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:g=>Number(g).toFixed(2),isLoading:a})]})]}),n.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(fu,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),c.jsx(fu,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:a}),c.jsx(fu,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),c.jsx(fu,{title:"Salidas Pedagógicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(Yf,{title:"Distribución de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),a?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):c.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(g=>new Date(g.date)>=new Date).slice(0,5).map((g,b)=>{var w,_;return c.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:g.responsables||"Evento sin título"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(g.date).toLocaleDateString("es-CL")}),g.ubicacion&&c.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",g.ubicacion]})]}),c.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((w=Od[g.type])==null?void 0:w.color)||"bg-gray-100 text-gray-800"}`,children:((_=Od[g.type])==null?void 0:_.label)||g.type})]})},g.id||b)}),n.filter(g=>new Date(g.date)>=new Date).length===0&&c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),c.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:e.length+r.length+n.length}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...e.map(g=>g.docenteAusente),...r.map(g=>g.docente)]).size}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(e.filter(g=>g.resultado==="Hora realizada").length/Math.max(e.length,1)*100),"%"]}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),c.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[c.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),c.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})},XS="horario_asignaciones",_8="horarios_generados",tY="usuarios",S8=t=>{const e=t.data();return{id:t.id,...e}},rY=t=>{const e=an(Ar(dr,XS));return na(e,n=>{const a=n.docs.map(s=>S8(s));t(a)},n=>{console.error("Error al suscribirse a las asignaciones:",n),t([])})},nY=async t=>{try{return(await eo(Ar(dr,XS),t)).id}catch(e){throw console.error("Error al agregar asignación:",e),new Error("No se pudo agregar la asignación.")}},aY=async t=>{try{const e=hn(dr,XS,t);await Bo(e)}catch(e){throw console.error("Error al eliminar asignación:",e),new Error("No se pudo eliminar la asignación.")}},_3=async t=>{try{const e=hn(dr,_8,"global");await OA(e,{data:t})}catch(e){throw console.error("Error al guardar los horarios:",e),new Error("No se pudieron guardar los horarios generados.")}},sY=t=>{const e=hn(dr,_8,"global");return na(e,n=>{n.exists()?t(n.data().data||{}):t({})},n=>{console.error("Error al suscribirse a los horarios:",n),t({})})},iY=t=>{const e=an(Ar(dr,tY),Ai("profile","==",er.PROFESORADO));return na(e,n=>{const a=n.docs.map(s=>S8(s));t(a)},n=>{console.error("Error al suscribirse a los profesores:",n),t([])})},oY=({horarios:t})=>Object.keys(t).length===0?c.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'Aún no se ha generado ningún horario. Utilice la pestaña de "Configuración" para generar uno.'})}):c.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full border-collapse",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:c.jsxs("tr",{children:[c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),ss.map(e=>c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:e},e))]})}),c.jsx("tbody",{children:m2.map(e=>c.jsxs(At.Fragment,{children:[c.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:c.jsx("th",{colSpan:2+ss.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:e.toUpperCase()})}),E_.map(({bloque:r,inicio:n,fin:a})=>c.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:r}),c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${n} - ${a}`}),ss.map(s=>{var o,l;const i=(l=(o=t[s])==null?void 0:o[e])==null?void 0:l[r];return c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:i!=null&&i.asignatura?c.jsxs("div",{className:"flex flex-col justify-center h-full",children:[c.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:i.asignatura}),c.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",i.profesor,")"]})]}):c.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${s}-${e}-${r}`)})]},`${e}-${r}`))]},e))})]})}),lY=()=>{const[t,e]=J.useState([]),[r,n]=J.useState({curso:"",asignatura:"",profesor:""}),[a,s]=J.useState([]),[i,o]=J.useState({}),[l,A]=J.useState(ss[0]),[d,h]=J.useState(!1),[m,g]=J.useState(!0),[b,w]=J.useState(null),[_,N]=J.useState(null),[k,I]=J.useState(null),[P,M]=J.useState({asignatura:"",profesor:""}),[D,C]=J.useState("edicion"),[B,T]=J.useState("");J.useEffect(()=>{g(!0);const ne=rY(e),z=sY(o),W=iY(ce=>{const j=ce.map(K=>K.nombreCompleto).sort();s(j),g(!1)});return()=>{ne(),z(),W()}},[]);const O=async ne=>{if(ne.preventDefault(),w(null),!r.curso||!r.asignatura||!r.profesor){w("Todos los campos de la asignación son obligatorios.");return}try{await nY({curso:r.curso,asignatura:r.asignatura,profesor:r.profesor}),n({curso:"",asignatura:"",profesor:""})}catch(z){w(z instanceof Error?z.message:"Error al guardar la asignación.")}},F=async ne=>{try{await aY(ne)}catch(z){w(z instanceof Error?z.message:"Error al eliminar la asignación.")}},L=async()=>{if(t.length===0){w("Debe agregar al menos una asignación de profesor antes de generar el horario.");return}h(!0),w(null),N(null);try{const z=new globalThis.GoogleGenerativeAI(""),W=`
                Eres un asistente experto en planificación de horarios escolares para un liceo técnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Días de la semana: ${m2.join(", ")}
                - Bloques horarios por día: 10 bloques con los siguientes horarios: ${JSON.stringify(E_,null,2)}
                - Cursos del liceo: ${ss.join(", ")}

                **Contexto Adicional de Especialidades (3º y 4º Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecánica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecánica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3°/4° Medio Automotriz" y "3°/4° Medio Industrial" correctamente.

                **Reglas de Asignación de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura según el nivel del curso:
                ${JSON.stringify(B$,null,2)}
                Notas sobre las reglas:
                - '1º y 2º medio' aplica a cursos que empiezan con '1º' o '2º'.
                - '3º y 4º medio' aplica a cursos que empiezan con '3º' o '4º'.
                - Algunas reglas aplican a cursos específicos (ej. Mecánica).

                **Asignaciones de Profesores (Input):**
                Aquí está la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(t,null,2)}

                **REGLA CRÍTICA INVIOLABLE:**
                La restricción más importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo día y mismo bloque horario. Es físicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las demás. No deben existir topes de horario para ningún profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${B||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma más balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo día si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un único objeto JSON válido, sin texto adicional antes o después. La estructura del JSON debe ser la siguiente:
                {
                  "1ºA": {
                    "Lunes": { "1": { "asignatura": "Matemática", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemática", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1ºB": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada día de la semana. Cada día tiene claves para cada bloque del 1 al 10. Si un bloque está vacío, usa \`{ "asignatura": null, "profesor": null }\`.
            `,X=(await(await z.getGenerativeModel({model:"gemini-pro"}).generateContent(W)).response).text(),te=JSON.parse(X);await _3(te),N("¡Horario generado y guardado con éxito!")}catch(ne){console.error("Error al generar horario con IA:",ne),w("Ocurrió un error al contactar con la IA o al procesar la respuesta. Por favor, inténtelo de nuevo.")}finally{h(!1)}},Q=(ne,z,W)=>{I({dia:ne,bloque:z}),M({asignatura:(W==null?void 0:W.asignatura)||"",profesor:(W==null?void 0:W.profesor)||""})},q=async()=>{if(!k)return;const{dia:ne,bloque:z}=k,W=JSON.parse(JSON.stringify(i));W[l]||(W[l]={}),W[l][ne]||(W[l][ne]={}),W[l][ne][z]={asignatura:P.asignatura||null,profesor:P.profesor||null};try{await _3(W),I(null)}catch(ce){w(ce instanceof Error?ce.message:"Error al guardar la edición.")}},ie="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",Z=()=>{const ne=i[l]||{};return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[c.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),m2.map(z=>c.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:z},z))]})}),c.jsx("tbody",{children:E_.map(({bloque:z,inicio:W,fin:ce})=>c.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[c.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:z}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${W} - ${ce}`})]}),m2.map(j=>{var te;const K=(k==null?void 0:k.dia)===j&&(k==null?void 0:k.bloque)===z,X=(te=ne[j])==null?void 0:te[z];return c.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!K&&Q(j,z,X),children:K?c.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[c.jsx("input",{type:"text",placeholder:"Asignatura",value:P.asignatura,onChange:le=>M(de=>({...de,asignatura:le.target.value})),className:ie+" text-xs mb-1"}),c.jsx("input",{type:"text",placeholder:"Profesor",value:P.profesor,onChange:le=>M(de=>({...de,profesor:le.target.value})),className:ie+" text-xs"}),c.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[c.jsx("button",{onClick:()=>I(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),c.jsx("button",{onClick:q,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):X!=null&&X.asignatura?c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:X.asignatura}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",X.profesor,")"]})]}):c.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${j}-${z}`)})]},z))})]})})},ee=()=>c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🔧 1. Configuración de Asignaciones"}),c.jsxs("form",{onSubmit:O,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:r.curso,onChange:ne=>n(z=>({...z,curso:ne.target.value})),className:ie,children:[c.jsx("option",{value:"",children:"Seleccione"}),ss.map(ne=>c.jsx("option",{value:ne,children:ne},ne))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignatura",value:r.asignatura,onChange:ne=>n(z=>({...z,asignatura:ne.target.value})),className:ie,children:[c.jsx("option",{value:"",children:"Seleccione"}),rl.map(ne=>c.jsx("option",{value:ne,children:ne},ne))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),c.jsxs("select",{name:"profesor",value:r.profesor,onChange:ne=>n(z=>({...z,profesor:ne.target.value})),className:ie,children:[c.jsx("option",{value:"",children:"Seleccione"}),a.map(ne=>c.jsx("option",{value:ne,children:ne},ne))]})]}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),c.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:c.jsx("ul",{className:"space-y-2",children:t.map(ne=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[c.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[ne.curso," - ",ne.asignatura," - ",c.jsx("strong",{children:ne.profesor})]}),c.jsx("button",{onClick:()=>F(ne.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:"×"})]},ne.id))})})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🧠 2. Generación Automática con IA"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),c.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:B,onChange:ne=>T(ne.target.value),rows:3,placeholder:"Ej: Dejar los módulos teóricos en la mañana y los prácticos en la tarde. Evitar poner 2 bloques de matemática seguidos.",className:ie})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("button",{onClick:L,disabled:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[d&&c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Generando...":"Generar Horario Completo"]}),b&&c.jsx("p",{className:"text-red-600",children:b}),_&&c.jsx("p",{className:"text-green-600",children:_})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"📅 3. Visualización y Edición por Curso"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),c.jsx("select",{id:"selectCurso",value:l,onChange:ne=>A(ne.target.value),className:ie+" md:w-1/3",children:ss.map(ne=>c.jsx("option",{value:ne,children:ne},ne))})]}),Object.keys(i).length>0?Z():c.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Aún no se ha generado ningún horario. Utilice el botón de generación con IA."})})]})]});return m?c.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>C("edicion"),className:`${D==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuración y Edición por Curso"}),c.jsx("button",{onClick:()=>C("global"),className:`${D==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),D==="edicion"?ee():c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),c.jsx(oY,{horarios:i})]})]})},gw="acciones",cY=async()=>{try{const t=an(Ar(wn,gw),ya("fechaRegistro","desc"));return(await So(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener acciones:",t),new Error("No se pudieron cargar las acciones pedagógicas")}},uY=async t=>{try{return{id:(await eo(Ar(wn,gw),{...t,fechaRegistro:t.fechaRegistro||new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear acción:",e),new Error("No se pudo crear la acción pedagógica")}},S3=async(t,e)=>{try{const r=hn(wn,gw,t);await Km(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acción:",r,"ID:",t),new Error("No se pudo actualizar la acción pedagógica")}},AY=async t=>{try{const e=hn(wn,gw,t);await Bo(e)}catch(e){throw console.error("Error al eliminar acción:",e,"ID:",t),new Error("No se pudo eliminar la acción pedagógica")}},T3={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",area:"",descripcion:"",fechaCumplimiento:"",estado:"Pendiente"},dY={Pendiente:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En Proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Cumplida:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300"},fY=()=>{const[t,e]=J.useState([]),[r,n]=J.useState(!1),[a,s]=J.useState(null),[i,o]=J.useState(T3),[l,A]=J.useState(null),[d,h]=J.useState(""),[m,g]=J.useState(""),[b,w]=J.useState(""),_=J.useCallback(async()=>{n(!0);try{const T=await cY();e(T),s(null)}catch(T){console.error("Error al cargar acciones desde Firestore",T),s("No se pudieron cargar las acciones pedagógicas desde la nube.")}finally{n(!1)}},[]);J.useEffect(()=>{_()},[_]);const N=J.useCallback(T=>{const{name:O,value:F}=T.target;o(L=>({...L,[O]:F}))},[]),k=J.useCallback(()=>{o(T3),A(null),s(null)},[]),I=J.useCallback(async T=>{T.preventDefault();const{fechaRegistro:O,responsable:F,area:L,descripcion:Q,fechaCumplimiento:q,estado:ie}=i;if(!O||!F||!L||!Q||!q){s("Todos los campos son obligatorios.");return}try{l?await S3(l,i):await uY(i),await _(),k()}catch(Z){console.error("Error al guardar acción:",Z),s("Error al guardar la acción en la nube.")}},[i,l,_,k]),P=J.useCallback(T=>{window.scrollTo({top:0,behavior:"smooth"}),A(T.id),o(T)},[]),M=J.useCallback(async T=>{if(window.confirm("¿Está seguro de que desea eliminar esta acción?"))try{await AY(T),await _()}catch(O){console.error("Error al eliminar acción:",O),s("No se pudo eliminar la acción en la nube.")}},[_]),D=J.useCallback(async T=>{try{const O=t.find(F=>F.id===T);if(O){const L=(zp.indexOf(O.estado)+1)%zp.length,Q=zp[L];await S3(T,{estado:Q}),await _()}}catch(O){console.error("Error al cambiar estado:",O),s("No se pudo cambiar el estado de la acción en la nube.")}},[t,_]),C=J.useMemo(()=>t.filter(T=>{const O=d===""||T.responsable.toLowerCase().includes(d.toLowerCase())||T.descripcion.toLowerCase().includes(d.toLowerCase()),F=m===""||T.area===m,L=b===""||T.estado===b;return O&&F&&L}),[t,d,m,b]),B="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Acciones Pedagógicas"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:l?"Editando acción existente.":"Registre una nueva acción de seguimiento."}),r&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando acciones desde la nube..."}),a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),c.jsxs("form",{onSubmit:I,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaRegistro",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Registro"}),c.jsx("input",{type:"date",name:"fechaRegistro",value:i.fechaRegistro,onChange:N,className:B})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),c.jsx("input",{type:"text",name:"responsable",value:i.responsable,onChange:N,placeholder:"Nombre del responsable",className:B})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"area",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Área Vinculada"}),c.jsxs("select",{name:"area",value:i.area,onChange:N,className:B,children:[c.jsx("option",{value:"",children:"Seleccione un área"}),g3.map(T=>c.jsx("option",{value:T,children:T},T))]})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Descripción de la Acción"}),c.jsx("textarea",{name:"descripcion",value:i.descripcion,onChange:N,rows:3,placeholder:"Detalle de la acción a realizar...",className:B})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaCumplimiento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Cumplimiento"}),c.jsx("input",{type:"date",name:"fechaCumplimiento",value:i.fechaCumplimiento,onChange:N,className:B})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"estado",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado de Avance"}),c.jsx("select",{name:"estado",value:i.estado,onChange:N,className:B,children:zp.map(T=>c.jsx("option",{value:T,children:T},T))})]})]}),c.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[l&&c.jsx("button",{type:"button",onClick:k,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Acción":"Registrar Acción"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Tabla de Seguimiento"}),!r&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-4",children:"No hay acciones pedagógicas registradas en la nube."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por responsable o palabra clave...",value:d,onChange:T=>h(T.target.value),className:B+" md:col-span-1"}),c.jsxs("select",{value:m,onChange:T=>g(T.target.value),className:B,children:[c.jsx("option",{value:"",children:"Filtrar por Área"}),g3.map(T=>c.jsx("option",{value:T,children:T},T))]}),c.jsxs("select",{value:b,onChange:T=>w(T.target.value),className:B,children:[c.jsx("option",{value:"",children:"Filtrar por Estado"}),zp.map(T=>c.jsx("option",{value:T,children:T},T))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Responsable"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Área"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Descripción"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fechas"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&C.length>0?C.map(T=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:T.responsable}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:T.area}),c.jsx("td",{className:"px-4 py-4 text-sm text-slate-600 dark:text-slate-300 max-w-sm whitespace-normal",children:T.descripcion}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("span",{children:["Reg: ",T.fechaRegistro]}),c.jsxs("span",{className:"font-semibold",children:["Comp: ",T.fechaCumplimiento]})]})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${dY[T.estado]}`,children:T.estado})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[c.jsx("button",{onClick:()=>D(T.id),title:"Cambiar Estado",className:"text-blue-600 hover:text-blue-800 p-1 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/40",children:"🔁"}),c.jsx("button",{onClick:()=>P(T),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),c.jsx("button",{onClick:()=>M(T.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},T.id)):!r&&c.jsx("tr",{children:c.jsx("td",{colSpan:6,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No se encontraron acciones con los filtros actuales."})})})]})})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let hY,mY;function pY(){return{geminiUrl:hY,vertexUrl:mY}}function gY(t,e,r,n){var a,s;if(!(t!=null&&t.baseUrl)){const i=pY();return e?(a=i.vertexUrl)!==null&&a!==void 0?a:r:(s=i.geminiUrl)!==null&&s!==void 0?s:n}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mh{}function nr(t,e){const r=/\{([^}]+)\}/g;return t.replace(r,(n,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const s=e[a];return s!=null?String(s):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function v(t,e,r){for(let s=0;s<e.length-1;s++){const i=e[s];if(i.endsWith("[]")){const o=i.slice(0,-2);if(!(o in t))if(Array.isArray(r))t[o]=Array.from({length:r.length},()=>({}));else throw new Error(`Value must be a list given an array path ${i}`);if(Array.isArray(t[o])){const l=t[o];if(Array.isArray(r))for(let A=0;A<l.length;A++){const d=l[A];v(d,e.slice(s+1),r[A])}else for(const A of l)v(A,e.slice(s+1),r)}return}else if(i.endsWith("[0]")){const o=i.slice(0,-3);o in t||(t[o]=[{}]);const l=t[o];v(l[0],e.slice(s+1),r);return}(!t[i]||typeof t[i]!="object")&&(t[i]={}),t=t[i]}const n=e[e.length-1],a=t[n];if(a!==void 0){if(!r||typeof r=="object"&&Object.keys(r).length===0||r===a)return;if(typeof a=="object"&&typeof r=="object"&&a!==null&&r!==null)Object.assign(a,r);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else t[n]=r}function x(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return;const n=e[r];if(n.endsWith("[]")){const a=n.slice(0,-2);if(a in t){const s=t[a];return Array.isArray(s)?s.map(i=>x(i,e.slice(r+1))):void 0}else return}else t=t[n]}return t}catch(r){if(r instanceof TypeError)return;throw r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function __(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var B3;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(B3||(B3={}));var N3;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(N3||(N3={}));var Zt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Zt||(Zt={}));var k3;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(k3||(k3={}));var I3;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(I3||(I3={}));var F3;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(F3||(F3={}));var R3;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(R3||(R3={}));var D3;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(D3||(D3={}));var L3;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(L3||(L3={}));var U3;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(U3||(U3={}));var M3;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(M3||(M3={}));var P3;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(P3||(P3={}));var j3;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(j3||(j3={}));var O3;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(O3||(O3={}));var Q3;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(Q3||(Q3={}));var H3;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(H3||(H3={}));var Z2;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Z2||(Z2={}));var V3;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(V3||(V3={}));var S_;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(S_||(S_={}));var z3;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(z3||(z3={}));var G3;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(G3||(G3={}));var q3;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(q3||(q3={}));var K3;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(K3||(K3={}));var W3;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(W3||(W3={}));var $3;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})($3||($3={}));var Y3;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Y3||(Y3={}));var X3;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(X3||(X3={}));var J3;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(J3||(J3={}));var Z3;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Z3||(Z3={}));var eI;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(eI||(eI={}));var tI;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(tI||(tI={}));var rI;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(rI||(rI={}));var nI;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(nI||(nI={}));var aI;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(aI||(aI={}));var sI;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(sI||(sI={}));var iI;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(iI||(iI={}));var oI;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(oI||(oI={}));var lI;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(lI||(lI={}));var cI;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(cI||(cI={}));var uI;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(uI||(uI={}));var AI;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(AI||(AI={}));var $0;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})($0||($0={}));class T_{constructor(e){const r={};for(const n of e.headers.entries())r[n[0]]=n[1];this.headers=r,this.responseInternal=e}json(){return this.responseInternal.json()}}class Gp{get text(){var e,r,n,a,s,i,o,l;if(((a=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let A="",d=!1;const h=[];for(const m of(l=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[g,b]of Object.entries(m))g!=="text"&&g!=="thought"&&(b!==null||b!==void 0)&&h.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,A+=m.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?A:void 0}get data(){var e,r,n,a,s,i,o,l;if(((a=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let A="";const d=[];for(const h of(l=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[m,g]of Object.entries(h))m!=="inlineData"&&(g!==null||g!==void 0)&&d.push(m);h.inlineData&&typeof h.inlineData.data=="string"&&(A+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),A.length>0?btoa(A):void 0}get functionCalls(){var e,r,n,a,s,i,o,l;if(((a=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const A=(l=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((A==null?void 0:A.length)!==0)return A}get executableCode(){var e,r,n,a,s,i,o,l,A;if(((a=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(A=d==null?void 0:d[0])===null||A===void 0?void 0:A.code}get codeExecutionResult(){var e,r,n,a,s,i,o,l,A;if(((a=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(A=d==null?void 0:d[0])===null||A===void 0?void 0:A.output}}class dI{}class fI{}class xY{}class vY{}class hI{}class mI{}class pI{}class yY{}class gI{}class xI{}class vI{}class yI{}class wY{}class bY{}class CY{}class wI{}class EY{get text(){var e,r,n;let a="",s=!1;const i=[];for(const o of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(const[l,A]of Object.entries(o))l!=="text"&&l!=="thought"&&A!==null&&i.push(l);if(typeof o.text=="string"){if(typeof o.thought=="boolean"&&o.thought)continue;s=!0,a+=o.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?a:void 0}get data(){var e,r,n;let a="";const s=[];for(const i of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(const[o,l]of Object.entries(i))o!=="inlineData"&&l!==null&&s.push(o);i.inlineData&&typeof i.inlineData.data=="string"&&(a+=atob(i.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class ey{_fromAPIResponse({apiResponse:e,isVertexAI:r}){const n=new ey;if(n.name=e.name,n.metadata=e.metadata,n.done=e.done,n.error=e.error,r){const a=e.response;if(a){const s=new gI,i=a.videos;s.generatedVideos=i==null?void 0:i.map(o=>({video:{uri:o.gcsUri,videoBytes:o.bytesBase64Encoded?__(o.bytesBase64Encoded):void 0,mimeType:o.mimeType}})),s.raiMediaFilteredCount=a.raiMediaFilteredCount,s.raiMediaFilteredReasons=a.raiMediaFilteredReasons,n.response=s}}else{const a=e.response;if(a){const s=new gI,i=a.generateVideoResponse,o=i==null?void 0:i.generatedSamples;s.generatedVideos=o==null?void 0:o.map(l=>{const A=l.video;return{video:{uri:A==null?void 0:A.uri,videoBytes:A!=null&&A.encodedVideo?__(A==null?void 0:A.encodedVideo):void 0,mimeType:l.encoding}}}),s.raiMediaFilteredCount=i==null?void 0:i.raiMediaFilteredCount,s.raiMediaFilteredReasons=i==null?void 0:i.raiMediaFilteredReasons,n.response=s}}return n}}class _Y{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gn(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const r=e.split("/",2);return`publishers/${r[0]}/models/${r[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function T8(t,e){const r=Gn(t,e);return r?r.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}`:r.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${r}`:r:""}function B8(t){return Array.isArray(t)?t.map(e=>ty(e)):[ty(t)]}function ty(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function N8(t){const e=ty(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function k8(t){const e=ty(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function bI(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function I8(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>bI(e)):[bI(t)]}function B_(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function CI(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function EI(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Oi(t){if(t==null)throw new Error("ContentUnion is required");return B_(t)?t:{role:"user",parts:I8(t)}}function F8(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(r=>{const n=Oi(r);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(t.isVertexAI()){const r=Oi(e);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]}return Array.isArray(e)?e.map(r=>Oi(r)):[Oi(e)]}function Hl(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(CI(t)||EI(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Oi(t)]}const e=[],r=[],n=B_(t[0]);for(const a of t){const s=B_(a);if(s!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(a);else{if(CI(a)||EI(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(a)}}return n||e.push({role:"user",parts:I8(r)}),e}function SY(t,e){t.includes("null")&&(e.nullable=!0);const r=t.filter(n=>n!=="null");if(r.length===1)e.type=Object.values(Zt).includes(r[0].toUpperCase())?r[0].toUpperCase():Zt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of r)e.anyOf.push({type:Object.values(Zt).includes(n.toUpperCase())?n.toUpperCase():Zt.TYPE_UNSPECIFIED})}}function am(t){const e={},r=["items"],n=["anyOf"],a=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&SY(t.type,e);for(const[i,o]of Object.entries(t))if(o!=null)if(i=="type"){if(o==="null")throw new Error("type: null can not be the only possible type for the field.");if(o instanceof Array)continue;e.type=Object.values(Zt).includes(o.toUpperCase())?o.toUpperCase():Zt.TYPE_UNSPECIFIED}else if(r.includes(i))e[i]=am(o);else if(n.includes(i)){const l=[];for(const A of o){if(A.type=="null"){e.nullable=!0;continue}l.push(am(A))}e[i]=l}else if(a.includes(i)){const l={};for(const[A,d]of Object.entries(o))l[A]=am(d);e[i]=l}else{if(i==="additionalProperties")continue;e[i]=o}return e}function JS(t){return am(t)}function ZS(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function e4(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Wm(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=am(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=am(e.response));return t}function $m(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const r of t)e.push(r);return e}function TY(t,e,r,n=1){const a=!e.startsWith(`${r}/`)&&e.split("/").length===n;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${r}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:a?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}/${e}`:e:a?`${r}/${e}`:e}function QA(t,e){if(typeof e!="string")throw new Error("name must be a string");return TY(t,e,"cachedContents")}function R8(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ph(t){return __(t)}function BY(t){return t!=null&&typeof t=="object"&&"name"in t}function NY(t){return t!=null&&typeof t=="object"&&"video"in t}function kY(t){return t!=null&&typeof t=="object"&&"uri"in t}function D8(t){var e;let r;if(BY(t)&&(r=t.name),!(kY(t)&&(r=t.uri,r===void 0))&&!(NY(t)&&(r=(e=t.video)===null||e===void 0?void 0:e.uri,r===void 0))){if(typeof t=="string"&&(r=t),r===void 0)throw new Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){const a=r.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${r}`);r=a[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}function L8(t,e){let r;return t.isVertexAI()?r=e?"publishers/google/models":"models":r=e?"models":"tunedModels",r}function U8(t){for(const e of["models","tunedModels","publisherModels"])if(IY(t,e))return t[e];return[]}function IY(t,e){return t!==null&&typeof t=="object"&&e in t}function FY(t,e={}){const r=t,n={name:r.name,description:r.description,parametersJsonSchema:r.inputSchema};return e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function RY(t,e={}){const r=[],n=new Set;for(const a of t){const s=a.name;if(n.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);n.add(s);const i=FY(a,e);i.functionDeclarations&&r.push(...i.functionDeclarations)}return{functionDeclarations:r}}function M8(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function DY(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Ym(t,e){const r=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(r))return r.split("/").pop();throw new Error(`Invalid batch job name: ${r}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(r))return r.split("/").pop();if(/^\d+$/.test(r))return r;throw new Error(`Invalid batch job name: ${r}.`)}function P8(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LY(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function UY(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function MY(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function PY(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],LY(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],UY(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],MY(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function j8(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>PY(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function jY(t){const e={},r=x(t,["anyOf"]);r!=null&&v(e,["anyOf"],r);const n=x(t,["default"]);n!=null&&v(e,["default"],n);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["enum"]);s!=null&&v(e,["enum"],s);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const A=x(t,["maxItems"]);A!=null&&v(e,["maxItems"],A);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const m=x(t,["maximum"]);m!=null&&v(e,["maximum"],m);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const w=x(t,["minProperties"]);w!=null&&v(e,["minProperties"],w);const _=x(t,["minimum"]);_!=null&&v(e,["minimum"],_);const N=x(t,["nullable"]);N!=null&&v(e,["nullable"],N);const k=x(t,["pattern"]);k!=null&&v(e,["pattern"],k);const I=x(t,["properties"]);I!=null&&v(e,["properties"],I);const P=x(t,["propertyOrdering"]);P!=null&&v(e,["propertyOrdering"],P);const M=x(t,["required"]);M!=null&&v(e,["required"],M);const D=x(t,["title"]);D!=null&&v(e,["title"],D);const C=x(t,["type"]);return C!=null&&v(e,["type"],C),e}function OY(t){const e={};if(x(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=x(t,["category"]);r!=null&&v(e,["category"],r);const n=x(t,["threshold"]);return n!=null&&v(e,["threshold"],n),e}function QY(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function HY(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function VY(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],HY(r)),e}function zY(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function GY(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],zY(r)),e}function qY(){return{}}function KY(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(A=>QY(A))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],VY(n));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],GY(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],qY());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function WY(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function $Y(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function YY(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],$Y(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function XY(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],WY(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],YY(n)),e}function JY(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function O8(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],JY(r)),e}function ZY(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],O8(n)),e}function eX(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>ZY(a))),v(e,["speakerVoiceConfigs"],n)}return e}function tX(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],O8(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],eX(n));const a=x(t,["languageCode"]);return a!=null&&v(e,["languageCode"],a),e}function rX(t){const e={},r=x(t,["includeThoughts"]);r!=null&&v(e,["includeThoughts"],r);const n=x(t,["thinkingBudget"]);return n!=null&&v(e,["thinkingBudget"],n),e}function nX(t,e,r){const n={},a=x(e,["systemInstruction"]);r!==void 0&&a!=null&&v(r,["systemInstruction"],j8(Oi(a)));const s=x(e,["temperature"]);s!=null&&v(n,["temperature"],s);const i=x(e,["topP"]);i!=null&&v(n,["topP"],i);const o=x(e,["topK"]);o!=null&&v(n,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(n,["candidateCount"],l);const A=x(e,["maxOutputTokens"]);A!=null&&v(n,["maxOutputTokens"],A);const d=x(e,["stopSequences"]);d!=null&&v(n,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(n,["responseLogprobs"],h);const m=x(e,["logprobs"]);m!=null&&v(n,["logprobs"],m);const g=x(e,["presencePenalty"]);g!=null&&v(n,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(n,["frequencyPenalty"],b);const w=x(e,["seed"]);w!=null&&v(n,["seed"],w);const _=x(e,["responseMimeType"]);_!=null&&v(n,["responseMimeType"],_);const N=x(e,["responseSchema"]);N!=null&&v(n,["responseSchema"],jY(JS(N)));const k=x(e,["responseJsonSchema"]);if(k!=null&&v(n,["responseJsonSchema"],k),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=x(e,["safetySettings"]);if(r!==void 0&&I!=null){let F=I;Array.isArray(F)&&(F=F.map(L=>OY(L))),v(r,["safetySettings"],F)}const P=x(e,["tools"]);if(r!==void 0&&P!=null){let F=$m(P);Array.isArray(F)&&(F=F.map(L=>KY(Wm(L)))),v(r,["tools"],F)}const M=x(e,["toolConfig"]);if(r!==void 0&&M!=null&&v(r,["toolConfig"],XY(M)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=x(e,["cachedContent"]);r!==void 0&&D!=null&&v(r,["cachedContent"],QA(t,D));const C=x(e,["responseModalities"]);C!=null&&v(n,["responseModalities"],C);const B=x(e,["mediaResolution"]);B!=null&&v(n,["mediaResolution"],B);const T=x(e,["speechConfig"]);if(T!=null&&v(n,["speechConfig"],tX(ZS(T))),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=x(e,["thinkingConfig"]);return O!=null&&v(n,["thinkingConfig"],rX(O)),n}function aX(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["request","model"],Gn(t,n));const a=x(e,["contents"]);if(a!=null){let i=Hl(a);Array.isArray(i)&&(i=i.map(o=>j8(o))),v(r,["request","contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["request","generationConfig"],nX(t,s,r)),r}function sX(t,e){const r={};if(x(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(x(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const n=x(e,["fileName"]);n!=null&&v(r,["fileName"],n);const a=x(e,["inlinedRequests"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>aX(t,i))),v(r,["requests","requests"],s)}return r}function iX(t,e){const r={},n=x(t,["displayName"]);if(e!==void 0&&n!=null&&v(e,["batch","displayName"],n),x(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return r}function oX(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Gn(t,n));const a=x(e,["src"]);a!=null&&v(r,["batch","inputConfig"],sX(t,M8(t,a)));const s=x(e,["config"]);return s!=null&&v(r,["config"],iX(s,r)),r}function lX(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Ym(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function cX(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Ym(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function uX(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);if(e!==void 0&&a!=null&&v(e,["_query","pageToken"],a),x(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return r}function AX(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],uX(r,e)),e}function dX(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Ym(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function fX(t){const e={},r=x(t,["format"]);r!=null&&v(e,["instancesFormat"],r);const n=x(t,["gcsUri"]);n!=null&&v(e,["gcsSource","uris"],n);const a=x(t,["bigqueryUri"]);if(a!=null&&v(e,["bigquerySource","inputUri"],a),x(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function hX(t){const e={},r=x(t,["format"]);r!=null&&v(e,["predictionsFormat"],r);const n=x(t,["gcsUri"]);n!=null&&v(e,["gcsDestination","outputUriPrefix"],n);const a=x(t,["bigqueryUri"]);if(a!=null&&v(e,["bigqueryDestination","outputUri"],a),x(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function mX(t,e){const r={},n=x(t,["displayName"]);e!==void 0&&n!=null&&v(e,["displayName"],n);const a=x(t,["dest"]);return e!==void 0&&a!=null&&v(e,["outputConfig"],hX(DY(a))),r}function pX(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["model"],Gn(t,n));const a=x(e,["src"]);a!=null&&v(r,["inputConfig"],fX(M8(t,a)));const s=x(e,["config"]);return s!=null&&v(r,["config"],mX(s,r)),r}function gX(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Ym(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function xX(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Ym(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function vX(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);e!==void 0&&a!=null&&v(e,["_query","pageToken"],a);const s=x(t,["filter"]);return e!==void 0&&s!=null&&v(e,["_query","filter"],s),r}function yX(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],vX(r,e)),e}function wX(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Ym(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function bX(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function CX(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function EX(t){const e={},r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function _X(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],bX(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],CX(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],EX(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function SX(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>_X(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function TX(t){const e={},r=x(t,["citationSources"]);return r!=null&&v(e,["citations"],r),e}function BX(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function NX(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>BX(a))),v(e,["urlMetadata"],n)}return e}function kX(t){const e={},r=x(t,["content"]);r!=null&&v(e,["content"],SX(r));const n=x(t,["citationMetadata"]);n!=null&&v(e,["citationMetadata"],TX(n));const a=x(t,["tokenCount"]);a!=null&&v(e,["tokenCount"],a);const s=x(t,["finishReason"]);s!=null&&v(e,["finishReason"],s);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],NX(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const A=x(t,["index"]);A!=null&&v(e,["index"],A);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function IX(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["candidates"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>kX(l))),v(e,["candidates"],o)}const a=x(t,["modelVersion"]);a!=null&&v(e,["modelVersion"],a);const s=x(t,["promptFeedback"]);s!=null&&v(e,["promptFeedback"],s);const i=x(t,["usageMetadata"]);return i!=null&&v(e,["usageMetadata"],i),e}function Q8(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["code"]);n!=null&&v(e,["code"],n);const a=x(t,["message"]);return a!=null&&v(e,["message"],a),e}function FX(t){const e={},r=x(t,["response"]);r!=null&&v(e,["response"],IX(r));const n=x(t,["error"]);return n!=null&&v(e,["error"],Q8(n)),e}function RX(t){const e={},r=x(t,["responsesFile"]);r!=null&&v(e,["fileName"],r);const n=x(t,["inlinedResponses","inlinedResponses"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>FX(s))),v(e,["inlinedResponses"],a)}return e}function N_(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["metadata","displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["metadata","state"]);a!=null&&v(e,["state"],P8(a));const s=x(t,["metadata","createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["metadata","endTime"]);i!=null&&v(e,["endTime"],i);const o=x(t,["metadata","updateTime"]);o!=null&&v(e,["updateTime"],o);const l=x(t,["metadata","model"]);l!=null&&v(e,["model"],l);const A=x(t,["metadata","output"]);return A!=null&&v(e,["dest"],RX(A)),e}function DX(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["operations"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>N_(i))),v(e,["batchJobs"],s)}return e}function LX(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["done"]);n!=null&&v(e,["done"],n);const a=x(t,["error"]);return a!=null&&v(e,["error"],Q8(a)),e}function H8(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["code"]);n!=null&&v(e,["code"],n);const a=x(t,["message"]);return a!=null&&v(e,["message"],a),e}function UX(t){const e={},r=x(t,["instancesFormat"]);r!=null&&v(e,["format"],r);const n=x(t,["gcsSource","uris"]);n!=null&&v(e,["gcsUri"],n);const a=x(t,["bigquerySource","inputUri"]);return a!=null&&v(e,["bigqueryUri"],a),e}function MX(t){const e={},r=x(t,["predictionsFormat"]);r!=null&&v(e,["format"],r);const n=x(t,["gcsDestination","outputUriPrefix"]);n!=null&&v(e,["gcsUri"],n);const a=x(t,["bigqueryDestination","outputUri"]);return a!=null&&v(e,["bigqueryUri"],a),e}function k_(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["state"]);a!=null&&v(e,["state"],P8(a));const s=x(t,["error"]);s!=null&&v(e,["error"],H8(s));const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["startTime"]);o!=null&&v(e,["startTime"],o);const l=x(t,["endTime"]);l!=null&&v(e,["endTime"],l);const A=x(t,["updateTime"]);A!=null&&v(e,["updateTime"],A);const d=x(t,["model"]);d!=null&&v(e,["model"],d);const h=x(t,["inputConfig"]);h!=null&&v(e,["src"],UX(h));const m=x(t,["outputConfig"]);return m!=null&&v(e,["dest"],MX(m)),e}function PX(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["batchPredictionJobs"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>k_(i))),v(e,["batchJobs"],s)}return e}function jX(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["done"]);n!=null&&v(e,["done"],n);const a=x(t,["error"]);return a!=null&&v(e,["error"],H8(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _h;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(_h||(_h={}));class Hx{constructor(e,r,n,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=r,this.init(e,n,a)}init(e,r,n){var a,s;this.nameInternal=e,this.pageInternal=r[this.nameInternal]||[],this.sdkHttpResponseInternal=r==null?void 0:r.sdkHttpResponse,this.idxInternal=0;let i={config:{}};!n||Object.keys(n).length===0?i={config:{}}:typeof n=="object"?i=Object.assign({},n):i=n,i.config&&(i.config.pageToken=r.nextPageToken),this.paramsInternal=i,this.pageInternalSize=(s=(a=i.config)===null||a===void 0?void 0:a.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OX extends Mh{constructor(e){super(),this.apiClient=e,this.create=async r=>{if(this.apiClient.isVertexAI()){const a=Date.now().toString();if(Array.isArray(r.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(r.config=r.config||{},r.config.displayName===void 0&&(r.config.displayName="genaiBatchJob_${timestampStr}"),r.config.dest===void 0&&typeof r.src=="string")if(r.src.startsWith("gs://")&&r.src.endsWith(".jsonl"))r.config.dest=`${r.src.slice(0,-6)}/dest`;else if(r.src.startsWith("bq://"))r.config.dest=`${r.src}_dest_${a}`;else throw new Error("Unsupported source:"+r.src)}return await this.createInternal(r)},this.list=async(r={})=>new Hx(_h.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(r),r)}async createInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=pX(this.apiClient,e);return o=nr("batchPredictionJobs",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>k_(d))}else{const A=oX(this.apiClient,e);return o=nr("{model}:batchGenerateContent",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>N_(d))}}async get(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=gX(this.apiClient,e);return o=nr("batchPredictionJobs/{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>k_(d))}else{const A=lX(this.apiClient,e);return o=nr("batches/{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>N_(d))}}async cancel(e){var r,n,a,s;let i="",o={};if(this.apiClient.isVertexAI()){const l=xX(this.apiClient,e);i=nr("batchPredictionJobs/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}else{const l=cX(this.apiClient,e);i=nr("batches/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=yX(e);return o=nr("batchPredictionJobs",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=PX(d),m=new wI;return Object.assign(m,h),m})}else{const A=AX(e);return o=nr("batches",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=DX(d),m=new wI;return Object.assign(m,h),m})}}async delete(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=wX(this.apiClient,e);return o=nr("batchPredictionJobs/{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>jX(d))}else{const A=dX(this.apiClient,e);return o=nr("batches/{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>LX(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QX(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function HX(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function VX(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function zX(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],QX(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],HX(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],VX(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function _I(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>zX(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function GX(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function qX(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function KX(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],qX(r)),e}function WX(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function $X(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],WX(r)),e}function YX(){return{}}function XX(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(A=>GX(A))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],KX(n));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],$X(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],YX());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function JX(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function ZX(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function eJ(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],ZX(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function tJ(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],JX(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],eJ(n)),e}function rJ(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const a=x(t,["expireTime"]);e!==void 0&&a!=null&&v(e,["expireTime"],a);const s=x(t,["displayName"]);e!==void 0&&s!=null&&v(e,["displayName"],s);const i=x(t,["contents"]);if(e!==void 0&&i!=null){let d=Hl(i);Array.isArray(d)&&(d=d.map(h=>_I(h))),v(e,["contents"],d)}const o=x(t,["systemInstruction"]);e!==void 0&&o!=null&&v(e,["systemInstruction"],_I(Oi(o)));const l=x(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>XX(h))),v(e,["tools"],d)}const A=x(t,["toolConfig"]);if(e!==void 0&&A!=null&&v(e,["toolConfig"],tJ(A)),x(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return r}function nJ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["model"],T8(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],rJ(a,r)),r}function aJ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],QA(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function sJ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],QA(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function iJ(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const a=x(t,["expireTime"]);return e!==void 0&&a!=null&&v(e,["expireTime"],a),r}function oJ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],QA(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],iJ(a,r)),r}function lJ(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);return e!==void 0&&a!=null&&v(e,["_query","pageToken"],a),r}function cJ(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],lJ(r,e)),e}function uJ(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function AJ(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function dJ(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function fJ(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],uJ(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],AJ(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],dJ(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function SI(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>fJ(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function hJ(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=x(t,["description"]);r!=null&&v(e,["description"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const s=x(t,["parametersJsonSchema"]);s!=null&&v(e,["parametersJsonSchema"],s);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function mJ(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function pJ(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],mJ(r)),e}function gJ(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function xJ(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],gJ(r)),e}function vJ(){return{}}function yJ(t){const e={},r=x(t,["apiKeyString"]);return r!=null&&v(e,["apiKeyString"],r),e}function wJ(t){const e={},r=x(t,["apiKeyConfig"]);r!=null&&v(e,["apiKeyConfig"],yJ(r));const n=x(t,["authType"]);n!=null&&v(e,["authType"],n);const a=x(t,["googleServiceAccountConfig"]);a!=null&&v(e,["googleServiceAccountConfig"],a);const s=x(t,["httpBasicAuthConfig"]);s!=null&&v(e,["httpBasicAuthConfig"],s);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function bJ(t){const e={},r=x(t,["authConfig"]);return r!=null&&v(e,["authConfig"],wJ(r)),e}function CJ(){return{}}function EJ(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(m=>hJ(m))),v(e,["functionDeclarations"],h)}const n=x(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);const a=x(t,["googleSearch"]);a!=null&&v(e,["googleSearch"],pJ(a));const s=x(t,["googleSearchRetrieval"]);s!=null&&v(e,["googleSearchRetrieval"],xJ(s)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],vJ());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],bJ(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],CJ());const A=x(t,["codeExecution"]);A!=null&&v(e,["codeExecution"],A);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function _J(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function SJ(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function TJ(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],SJ(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function BJ(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],_J(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],TJ(n)),e}function NJ(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const a=x(t,["expireTime"]);e!==void 0&&a!=null&&v(e,["expireTime"],a);const s=x(t,["displayName"]);e!==void 0&&s!=null&&v(e,["displayName"],s);const i=x(t,["contents"]);if(e!==void 0&&i!=null){let h=Hl(i);Array.isArray(h)&&(h=h.map(m=>SI(m))),v(e,["contents"],h)}const o=x(t,["systemInstruction"]);e!==void 0&&o!=null&&v(e,["systemInstruction"],SI(Oi(o)));const l=x(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>EJ(m))),v(e,["tools"],h)}const A=x(t,["toolConfig"]);e!==void 0&&A!=null&&v(e,["toolConfig"],BJ(A));const d=x(t,["kmsKeyName"]);return e!==void 0&&d!=null&&v(e,["encryption_spec","kmsKeyName"],d),r}function kJ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["model"],T8(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],NJ(a,r)),r}function IJ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],QA(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function FJ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],QA(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function RJ(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const a=x(t,["expireTime"]);return e!==void 0&&a!=null&&v(e,["expireTime"],a),r}function DJ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],QA(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],RJ(a,r)),r}function LJ(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);return e!==void 0&&a!=null&&v(e,["_query","pageToken"],a),r}function UJ(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],LJ(r,e)),e}function p2(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["model"]);a!=null&&v(e,["model"],a);const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["updateTime"]);i!=null&&v(e,["updateTime"],i);const o=x(t,["expireTime"]);o!=null&&v(e,["expireTime"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function MJ(){return{}}function PJ(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["cachedContents"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>p2(i))),v(e,["cachedContents"],s)}return e}function g2(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["model"]);a!=null&&v(e,["model"],a);const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["updateTime"]);i!=null&&v(e,["updateTime"],i);const o=x(t,["expireTime"]);o!=null&&v(e,["expireTime"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function jJ(){return{}}function OJ(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["cachedContents"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>g2(i))),v(e,["cachedContents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QJ extends Mh{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Hx(_h.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(r),r)}async create(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=kJ(this.apiClient,e);return o=nr("cachedContents",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>g2(d))}else{const A=nJ(this.apiClient,e);return o=nr("cachedContents",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>p2(d))}}async get(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=IJ(this.apiClient,e);return o=nr("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>g2(d))}else{const A=aJ(this.apiClient,e);return o=nr("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>p2(d))}}async delete(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=FJ(this.apiClient,e);return o=nr("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(()=>{const d=jJ(),h=new vI;return Object.assign(h,d),h})}else{const A=sJ(this.apiClient,e);return o=nr("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(()=>{const d=MJ(),h=new vI;return Object.assign(h,d),h})}}async update(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=DJ(this.apiClient,e);return o=nr("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>g2(d))}else{const A=oJ(this.apiClient,e);return o=nr("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>p2(d))}}async listInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=UJ(e);return o=nr("cachedContents",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=OJ(d),m=new yI;return Object.assign(m,h),m})}else{const A=cJ(e);return o=nr("cachedContents",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=PJ(d),m=new yI;return Object.assign(m,h),m})}}}function TI(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ca(t){return this instanceof ca?(this.v=t,this):new ca(t)}function sm(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),a,s=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",i),a[Symbol.asyncIterator]=function(){return this},a;function i(g){return function(b){return Promise.resolve(b).then(g,h)}}function o(g,b){n[g]&&(a[g]=function(w){return new Promise(function(_,N){s.push([g,w,_,N])>1||l(g,w)})},b&&(a[g]=b(a[g])))}function l(g,b){try{A(n[g](b))}catch(w){m(s[0][3],w)}}function A(g){g.value instanceof ca?Promise.resolve(g.value.v).then(d,h):m(s[0][2],g)}function d(g){l("next",g)}function h(g){l("throw",g)}function m(g,b){g(b),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Fg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof TI=="function"?TI(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(i){return new Promise(function(o,l){i=t[s](i),a(o,l,i.done,i.value)})}}function a(s,i,o,l){Promise.resolve(l).then(function(A){s({value:A,done:o})},i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HJ(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const r=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return r===void 0?!1:V8(r)}function V8(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function VJ(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function BI(t){if(t===void 0||t.length===0)return[];const e=[],r=t.length;let n=0;for(;n<r;)if(t[n].role==="user")e.push(t[n]),n++;else{const a=[];let s=!0;for(;n<r&&t[n].role==="model";)a.push(t[n]),s&&!V8(t[n])&&(s=!1),n++;s?e.push(...a):e.pop()}return e}class zJ{constructor(e,r){this.modelsModule=e,this.apiClient=r}create(e){return new GJ(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class GJ{constructor(e,r,n,a={},s=[]){this.apiClient=e,this.modelsModule=r,this.model=n,this.config=a,this.history=s,this.sendPromise=Promise.resolve(),VJ(s)}async sendMessage(e){var r;await this.sendPromise;const n=Oi(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});return this.sendPromise=(async()=>{var s,i,o;const l=await a,A=(i=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content,d=l.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let m=[];d!=null&&(m=(o=d.slice(h))!==null&&o!==void 0?o:[]);const g=A?[A]:[];this.recordHistory(n,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var r;await this.sendPromise;const n=Oi(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const s=await a;return this.processStreamResponse(s,n)}getHistory(e=!1){const r=e?BI(this.history):this.history;return structuredClone(r)}processStreamResponse(e,r){var n,a;return sm(this,arguments,function*(){var i,o,l,A;const d=[];try{for(var h=!0,m=Fg(e),g;g=yield ca(m.next()),i=g.done,!i;h=!0){A=g.value,h=!1;const b=A;if(HJ(b)){const w=(a=(n=b.candidates)===null||n===void 0?void 0:n[0])===null||a===void 0?void 0:a.content;w!==void 0&&d.push(w)}yield yield ca(b)}}catch(b){o={error:b}}finally{try{!h&&!i&&(l=m.return)&&(yield ca(l.call(m)))}finally{if(o)throw o.error}}this.recordHistory(r,d)})}recordHistory(e,r,n){let a=[];r.length>0&&r.every(s=>s.role!==void 0)?a=r:a.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...BI(n)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xw extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,xw.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qJ(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);return e!==void 0&&a!=null&&v(e,["_query","pageToken"],a),r}function KJ(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],qJ(r,e)),e}function WJ(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["message"]);n!=null&&v(e,["message"],n);const a=x(t,["code"]);return a!=null&&v(e,["code"],a),e}function $J(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["mimeType"]);a!=null&&v(e,["mimeType"],a);const s=x(t,["sizeBytes"]);s!=null&&v(e,["sizeBytes"],s);const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["expirationTime"]);o!=null&&v(e,["expirationTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const A=x(t,["sha256Hash"]);A!=null&&v(e,["sha256Hash"],A);const d=x(t,["uri"]);d!=null&&v(e,["uri"],d);const h=x(t,["downloadUri"]);h!=null&&v(e,["downloadUri"],h);const m=x(t,["state"]);m!=null&&v(e,["state"],m);const g=x(t,["source"]);g!=null&&v(e,["source"],g);const b=x(t,["videoMetadata"]);b!=null&&v(e,["videoMetadata"],b);const w=x(t,["error"]);return w!=null&&v(e,["error"],WJ(w)),e}function YJ(t){const e={},r=x(t,["file"]);r!=null&&v(e,["file"],$J(r));const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function XJ(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","file"],D8(r));const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function JJ(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","file"],D8(r));const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function ZJ(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["message"]);n!=null&&v(e,["message"],n);const a=x(t,["code"]);return a!=null&&v(e,["code"],a),e}function I_(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["mimeType"]);a!=null&&v(e,["mimeType"],a);const s=x(t,["sizeBytes"]);s!=null&&v(e,["sizeBytes"],s);const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["expirationTime"]);o!=null&&v(e,["expirationTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const A=x(t,["sha256Hash"]);A!=null&&v(e,["sha256Hash"],A);const d=x(t,["uri"]);d!=null&&v(e,["uri"],d);const h=x(t,["downloadUri"]);h!=null&&v(e,["downloadUri"],h);const m=x(t,["state"]);m!=null&&v(e,["state"],m);const g=x(t,["source"]);g!=null&&v(e,["source"],g);const b=x(t,["videoMetadata"]);b!=null&&v(e,["videoMetadata"],b);const w=x(t,["error"]);return w!=null&&v(e,["error"],ZJ(w)),e}function eZ(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["files"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>I_(i))),v(e,["files"],s)}return e}function tZ(t){const e={},r=x(t,["sdkHttpResponse"]);return r!=null&&v(e,["sdkHttpResponse"],r),e}function rZ(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nZ extends Mh{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Hx(_h.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(r),r)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(r=>I_(r))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=KJ(e);return s=nr("files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(A=>{const d=A;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>{const A=eZ(l),d=new wY;return Object.assign(d,A),d})}}async createInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=YJ(e);return s=nr("upload/v1beta/files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),a.then(l=>{const A=tZ(l),d=new bY;return Object.assign(d,A),d})}}async get(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=XJ(e);return s=nr("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),a.then(l=>I_(l))}}async delete(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=JJ(e);return s=nr("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),a.then(()=>{const l=rZ(),A=new CY;return Object.assign(A,l),A})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aZ(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function z8(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],aZ(r)),e}function sZ(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],z8(n)),e}function iZ(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>sZ(a))),v(e,["speakerVoiceConfigs"],n)}return e}function oZ(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],z8(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],iZ(n));const a=x(t,["languageCode"]);return a!=null&&v(e,["languageCode"],a),e}function lZ(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function cZ(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function uZ(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function AZ(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],lZ(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],cZ(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],uZ(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function dZ(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>AZ(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function fZ(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function hZ(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function mZ(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],hZ(r)),e}function pZ(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function gZ(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],pZ(r)),e}function xZ(){return{}}function vZ(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(A=>fZ(A))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],mZ(n));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],gZ(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],xZ());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function yZ(t){const e={},r=x(t,["handle"]);if(r!=null&&v(e,["handle"],r),x(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function NI(){return{}}function wZ(t){const e={},r=x(t,["disabled"]);r!=null&&v(e,["disabled"],r);const n=x(t,["startOfSpeechSensitivity"]);n!=null&&v(e,["startOfSpeechSensitivity"],n);const a=x(t,["endOfSpeechSensitivity"]);a!=null&&v(e,["endOfSpeechSensitivity"],a);const s=x(t,["prefixPaddingMs"]);s!=null&&v(e,["prefixPaddingMs"],s);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function bZ(t){const e={},r=x(t,["automaticActivityDetection"]);r!=null&&v(e,["automaticActivityDetection"],wZ(r));const n=x(t,["activityHandling"]);n!=null&&v(e,["activityHandling"],n);const a=x(t,["turnCoverage"]);return a!=null&&v(e,["turnCoverage"],a),e}function CZ(t){const e={},r=x(t,["targetTokens"]);return r!=null&&v(e,["targetTokens"],r),e}function EZ(t){const e={},r=x(t,["triggerTokens"]);r!=null&&v(e,["triggerTokens"],r);const n=x(t,["slidingWindow"]);return n!=null&&v(e,["slidingWindow"],CZ(n)),e}function _Z(t){const e={},r=x(t,["proactiveAudio"]);return r!=null&&v(e,["proactiveAudio"],r),e}function SZ(t,e){const r={},n=x(t,["generationConfig"]);e!==void 0&&n!=null&&v(e,["setup","generationConfig"],n);const a=x(t,["responseModalities"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","responseModalities"],a);const s=x(t,["temperature"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","temperature"],s);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const A=x(t,["mediaResolution"]);e!==void 0&&A!=null&&v(e,["setup","generationConfig","mediaResolution"],A);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],oZ(e4(h)));const m=x(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],dZ(Oi(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let M=$m(b);Array.isArray(M)&&(M=M.map(D=>vZ(Wm(D)))),v(e,["setup","tools"],M)}const w=x(t,["sessionResumption"]);e!==void 0&&w!=null&&v(e,["setup","sessionResumption"],yZ(w));const _=x(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&v(e,["setup","inputAudioTranscription"],NI());const N=x(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&v(e,["setup","outputAudioTranscription"],NI());const k=x(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&v(e,["setup","realtimeInputConfig"],bZ(k));const I=x(t,["contextWindowCompression"]);e!==void 0&&I!=null&&v(e,["setup","contextWindowCompression"],EZ(I));const P=x(t,["proactivity"]);return e!==void 0&&P!=null&&v(e,["setup","proactivity"],_Z(P)),r}function TZ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["setup","model"],Gn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],SZ(a,r)),r}function BZ(){return{}}function NZ(){return{}}function kZ(t){const e={},r=x(t,["media"]);r!=null&&v(e,["mediaChunks"],B8(r));const n=x(t,["audio"]);n!=null&&v(e,["audio"],k8(n));const a=x(t,["audioStreamEnd"]);a!=null&&v(e,["audioStreamEnd"],a);const s=x(t,["video"]);s!=null&&v(e,["video"],N8(s));const i=x(t,["text"]);return i!=null&&v(e,["text"],i),x(t,["activityStart"])!=null&&v(e,["activityStart"],BZ()),x(t,["activityEnd"])!=null&&v(e,["activityEnd"],NZ()),e}function G8(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["weight"]);return n!=null&&v(e,["weight"],n),e}function IZ(t){const e={},r=x(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>G8(a))),v(e,["weightedPrompts"],n)}return e}function q8(t){const e={},r=x(t,["temperature"]);r!=null&&v(e,["temperature"],r);const n=x(t,["topK"]);n!=null&&v(e,["topK"],n);const a=x(t,["seed"]);a!=null&&v(e,["seed"],a);const s=x(t,["guidance"]);s!=null&&v(e,["guidance"],s);const i=x(t,["bpm"]);i!=null&&v(e,["bpm"],i);const o=x(t,["density"]);o!=null&&v(e,["density"],o);const l=x(t,["brightness"]);l!=null&&v(e,["brightness"],l);const A=x(t,["scale"]);A!=null&&v(e,["scale"],A);const d=x(t,["muteBass"]);d!=null&&v(e,["muteBass"],d);const h=x(t,["muteDrums"]);h!=null&&v(e,["muteDrums"],h);const m=x(t,["onlyBassAndDrums"]);return m!=null&&v(e,["onlyBassAndDrums"],m),e}function FZ(t){const e={},r=x(t,["musicGenerationConfig"]);return r!=null&&v(e,["musicGenerationConfig"],q8(r)),e}function K8(t){const e={},r=x(t,["model"]);return r!=null&&v(e,["model"],r),e}function W8(t){const e={},r=x(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>G8(a))),v(e,["weightedPrompts"],n)}return e}function F_(t){const e={},r=x(t,["setup"]);r!=null&&v(e,["setup"],K8(r));const n=x(t,["clientContent"]);n!=null&&v(e,["clientContent"],W8(n));const a=x(t,["musicGenerationConfig"]);a!=null&&v(e,["musicGenerationConfig"],q8(a));const s=x(t,["playbackControl"]);return s!=null&&v(e,["playbackControl"],s),e}function RZ(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function DZ(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],RZ(r)),e}function LZ(t){const e={},r=x(t,["voiceConfig"]);if(r!=null&&v(e,["voiceConfig"],DZ(r)),x(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function UZ(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function MZ(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function PZ(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function jZ(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],UZ(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],MZ(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],PZ(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function OZ(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>jZ(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function QZ(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=x(t,["description"]);r!=null&&v(e,["description"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const s=x(t,["parametersJsonSchema"]);s!=null&&v(e,["parametersJsonSchema"],s);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function HZ(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function VZ(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],HZ(r)),e}function zZ(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function GZ(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],zZ(r)),e}function qZ(){return{}}function KZ(t){const e={},r=x(t,["apiKeyString"]);return r!=null&&v(e,["apiKeyString"],r),e}function WZ(t){const e={},r=x(t,["apiKeyConfig"]);r!=null&&v(e,["apiKeyConfig"],KZ(r));const n=x(t,["authType"]);n!=null&&v(e,["authType"],n);const a=x(t,["googleServiceAccountConfig"]);a!=null&&v(e,["googleServiceAccountConfig"],a);const s=x(t,["httpBasicAuthConfig"]);s!=null&&v(e,["httpBasicAuthConfig"],s);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function $Z(t){const e={},r=x(t,["authConfig"]);return r!=null&&v(e,["authConfig"],WZ(r)),e}function YZ(){return{}}function XZ(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(m=>QZ(m))),v(e,["functionDeclarations"],h)}const n=x(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);const a=x(t,["googleSearch"]);a!=null&&v(e,["googleSearch"],VZ(a));const s=x(t,["googleSearchRetrieval"]);s!=null&&v(e,["googleSearchRetrieval"],GZ(s)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],qZ());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],$Z(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],YZ());const A=x(t,["codeExecution"]);A!=null&&v(e,["codeExecution"],A);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function JZ(t){const e={},r=x(t,["handle"]);r!=null&&v(e,["handle"],r);const n=x(t,["transparent"]);return n!=null&&v(e,["transparent"],n),e}function kI(){return{}}function ZZ(t){const e={},r=x(t,["disabled"]);r!=null&&v(e,["disabled"],r);const n=x(t,["startOfSpeechSensitivity"]);n!=null&&v(e,["startOfSpeechSensitivity"],n);const a=x(t,["endOfSpeechSensitivity"]);a!=null&&v(e,["endOfSpeechSensitivity"],a);const s=x(t,["prefixPaddingMs"]);s!=null&&v(e,["prefixPaddingMs"],s);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function eee(t){const e={},r=x(t,["automaticActivityDetection"]);r!=null&&v(e,["automaticActivityDetection"],ZZ(r));const n=x(t,["activityHandling"]);n!=null&&v(e,["activityHandling"],n);const a=x(t,["turnCoverage"]);return a!=null&&v(e,["turnCoverage"],a),e}function tee(t){const e={},r=x(t,["targetTokens"]);return r!=null&&v(e,["targetTokens"],r),e}function ree(t){const e={},r=x(t,["triggerTokens"]);r!=null&&v(e,["triggerTokens"],r);const n=x(t,["slidingWindow"]);return n!=null&&v(e,["slidingWindow"],tee(n)),e}function nee(t){const e={},r=x(t,["proactiveAudio"]);return r!=null&&v(e,["proactiveAudio"],r),e}function aee(t,e){const r={},n=x(t,["generationConfig"]);e!==void 0&&n!=null&&v(e,["setup","generationConfig"],n);const a=x(t,["responseModalities"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","responseModalities"],a);const s=x(t,["temperature"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","temperature"],s);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const A=x(t,["mediaResolution"]);e!==void 0&&A!=null&&v(e,["setup","generationConfig","mediaResolution"],A);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],LZ(e4(h)));const m=x(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],OZ(Oi(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let M=$m(b);Array.isArray(M)&&(M=M.map(D=>XZ(Wm(D)))),v(e,["setup","tools"],M)}const w=x(t,["sessionResumption"]);e!==void 0&&w!=null&&v(e,["setup","sessionResumption"],JZ(w));const _=x(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&v(e,["setup","inputAudioTranscription"],kI());const N=x(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&v(e,["setup","outputAudioTranscription"],kI());const k=x(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&v(e,["setup","realtimeInputConfig"],eee(k));const I=x(t,["contextWindowCompression"]);e!==void 0&&I!=null&&v(e,["setup","contextWindowCompression"],ree(I));const P=x(t,["proactivity"]);return e!==void 0&&P!=null&&v(e,["setup","proactivity"],nee(P)),r}function see(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["setup","model"],Gn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],aee(a,r)),r}function iee(){return{}}function oee(){return{}}function lee(t){const e={},r=x(t,["media"]);r!=null&&v(e,["mediaChunks"],B8(r));const n=x(t,["audio"]);n!=null&&v(e,["audio"],k8(n));const a=x(t,["audioStreamEnd"]);a!=null&&v(e,["audioStreamEnd"],a);const s=x(t,["video"]);s!=null&&v(e,["video"],N8(s));const i=x(t,["text"]);return i!=null&&v(e,["text"],i),x(t,["activityStart"])!=null&&v(e,["activityStart"],iee()),x(t,["activityEnd"])!=null&&v(e,["activityEnd"],oee()),e}function cee(){return{}}function uee(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function Aee(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function dee(t){const e={},r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function fee(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],uee(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],Aee(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],dee(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function hee(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>fee(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function II(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["finished"]);return n!=null&&v(e,["finished"],n),e}function mee(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function pee(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>mee(a))),v(e,["urlMetadata"],n)}return e}function gee(t){const e={},r=x(t,["modelTurn"]);r!=null&&v(e,["modelTurn"],hee(r));const n=x(t,["turnComplete"]);n!=null&&v(e,["turnComplete"],n);const a=x(t,["interrupted"]);a!=null&&v(e,["interrupted"],a);const s=x(t,["groundingMetadata"]);s!=null&&v(e,["groundingMetadata"],s);const i=x(t,["generationComplete"]);i!=null&&v(e,["generationComplete"],i);const o=x(t,["inputTranscription"]);o!=null&&v(e,["inputTranscription"],II(o));const l=x(t,["outputTranscription"]);l!=null&&v(e,["outputTranscription"],II(l));const A=x(t,["urlContextMetadata"]);return A!=null&&v(e,["urlContextMetadata"],pee(A)),e}function xee(t){const e={},r=x(t,["id"]);r!=null&&v(e,["id"],r);const n=x(t,["args"]);n!=null&&v(e,["args"],n);const a=x(t,["name"]);return a!=null&&v(e,["name"],a),e}function vee(t){const e={},r=x(t,["functionCalls"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>xee(a))),v(e,["functionCalls"],n)}return e}function yee(t){const e={},r=x(t,["ids"]);return r!=null&&v(e,["ids"],r),e}function cv(t){const e={},r=x(t,["modality"]);r!=null&&v(e,["modality"],r);const n=x(t,["tokenCount"]);return n!=null&&v(e,["tokenCount"],n),e}function wee(t){const e={},r=x(t,["promptTokenCount"]);r!=null&&v(e,["promptTokenCount"],r);const n=x(t,["cachedContentTokenCount"]);n!=null&&v(e,["cachedContentTokenCount"],n);const a=x(t,["responseTokenCount"]);a!=null&&v(e,["responseTokenCount"],a);const s=x(t,["toolUsePromptTokenCount"]);s!=null&&v(e,["toolUsePromptTokenCount"],s);const i=x(t,["thoughtsTokenCount"]);i!=null&&v(e,["thoughtsTokenCount"],i);const o=x(t,["totalTokenCount"]);o!=null&&v(e,["totalTokenCount"],o);const l=x(t,["promptTokensDetails"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(g=>cv(g))),v(e,["promptTokensDetails"],m)}const A=x(t,["cacheTokensDetails"]);if(A!=null){let m=A;Array.isArray(m)&&(m=m.map(g=>cv(g))),v(e,["cacheTokensDetails"],m)}const d=x(t,["responseTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>cv(g))),v(e,["responseTokensDetails"],m)}const h=x(t,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>cv(g))),v(e,["toolUsePromptTokensDetails"],m)}return e}function bee(t){const e={},r=x(t,["timeLeft"]);return r!=null&&v(e,["timeLeft"],r),e}function Cee(t){const e={},r=x(t,["newHandle"]);r!=null&&v(e,["newHandle"],r);const n=x(t,["resumable"]);n!=null&&v(e,["resumable"],n);const a=x(t,["lastConsumedClientMessageIndex"]);return a!=null&&v(e,["lastConsumedClientMessageIndex"],a),e}function Eee(t){const e={};x(t,["setupComplete"])!=null&&v(e,["setupComplete"],cee());const n=x(t,["serverContent"]);n!=null&&v(e,["serverContent"],gee(n));const a=x(t,["toolCall"]);a!=null&&v(e,["toolCall"],vee(a));const s=x(t,["toolCallCancellation"]);s!=null&&v(e,["toolCallCancellation"],yee(s));const i=x(t,["usageMetadata"]);i!=null&&v(e,["usageMetadata"],wee(i));const o=x(t,["goAway"]);o!=null&&v(e,["goAway"],bee(o));const l=x(t,["sessionResumptionUpdate"]);return l!=null&&v(e,["sessionResumptionUpdate"],Cee(l)),e}function _ee(){return{}}function See(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["weight"]);return n!=null&&v(e,["weight"],n),e}function Tee(t){const e={},r=x(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>See(a))),v(e,["weightedPrompts"],n)}return e}function Bee(t){const e={},r=x(t,["temperature"]);r!=null&&v(e,["temperature"],r);const n=x(t,["topK"]);n!=null&&v(e,["topK"],n);const a=x(t,["seed"]);a!=null&&v(e,["seed"],a);const s=x(t,["guidance"]);s!=null&&v(e,["guidance"],s);const i=x(t,["bpm"]);i!=null&&v(e,["bpm"],i);const o=x(t,["density"]);o!=null&&v(e,["density"],o);const l=x(t,["brightness"]);l!=null&&v(e,["brightness"],l);const A=x(t,["scale"]);A!=null&&v(e,["scale"],A);const d=x(t,["muteBass"]);d!=null&&v(e,["muteBass"],d);const h=x(t,["muteDrums"]);h!=null&&v(e,["muteDrums"],h);const m=x(t,["onlyBassAndDrums"]);return m!=null&&v(e,["onlyBassAndDrums"],m),e}function Nee(t){const e={},r=x(t,["clientContent"]);r!=null&&v(e,["clientContent"],Tee(r));const n=x(t,["musicGenerationConfig"]);return n!=null&&v(e,["musicGenerationConfig"],Bee(n)),e}function kee(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);n!=null&&v(e,["mimeType"],n);const a=x(t,["sourceMetadata"]);return a!=null&&v(e,["sourceMetadata"],Nee(a)),e}function Iee(t){const e={},r=x(t,["audioChunks"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>kee(a))),v(e,["audioChunks"],n)}return e}function Fee(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["filteredReason"]);return n!=null&&v(e,["filteredReason"],n),e}function Ree(t){const e={};x(t,["setupComplete"])!=null&&v(e,["setupComplete"],_ee());const n=x(t,["serverContent"]);n!=null&&v(e,["serverContent"],Iee(n));const a=x(t,["filteredPrompt"]);return a!=null&&v(e,["filteredPrompt"],Fee(a)),e}function Dee(t){const e={},r=x(t,["sessionId"]);return r!=null&&v(e,["sessionId"],r),e}function Lee(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function Uee(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function Mee(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function Pee(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],Lee(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],Uee(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],Mee(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function jee(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>Pee(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function FI(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["finished"]);return n!=null&&v(e,["finished"],n),e}function Oee(t){const e={},r=x(t,["modelTurn"]);r!=null&&v(e,["modelTurn"],jee(r));const n=x(t,["turnComplete"]);n!=null&&v(e,["turnComplete"],n);const a=x(t,["interrupted"]);a!=null&&v(e,["interrupted"],a);const s=x(t,["groundingMetadata"]);s!=null&&v(e,["groundingMetadata"],s);const i=x(t,["generationComplete"]);i!=null&&v(e,["generationComplete"],i);const o=x(t,["inputTranscription"]);o!=null&&v(e,["inputTranscription"],FI(o));const l=x(t,["outputTranscription"]);return l!=null&&v(e,["outputTranscription"],FI(l)),e}function Qee(t){const e={},r=x(t,["args"]);r!=null&&v(e,["args"],r);const n=x(t,["name"]);return n!=null&&v(e,["name"],n),e}function Hee(t){const e={},r=x(t,["functionCalls"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>Qee(a))),v(e,["functionCalls"],n)}return e}function Vee(t){const e={},r=x(t,["ids"]);return r!=null&&v(e,["ids"],r),e}function uv(t){const e={},r=x(t,["modality"]);r!=null&&v(e,["modality"],r);const n=x(t,["tokenCount"]);return n!=null&&v(e,["tokenCount"],n),e}function zee(t){const e={},r=x(t,["promptTokenCount"]);r!=null&&v(e,["promptTokenCount"],r);const n=x(t,["cachedContentTokenCount"]);n!=null&&v(e,["cachedContentTokenCount"],n);const a=x(t,["candidatesTokenCount"]);a!=null&&v(e,["responseTokenCount"],a);const s=x(t,["toolUsePromptTokenCount"]);s!=null&&v(e,["toolUsePromptTokenCount"],s);const i=x(t,["thoughtsTokenCount"]);i!=null&&v(e,["thoughtsTokenCount"],i);const o=x(t,["totalTokenCount"]);o!=null&&v(e,["totalTokenCount"],o);const l=x(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(b=>uv(b))),v(e,["promptTokensDetails"],g)}const A=x(t,["cacheTokensDetails"]);if(A!=null){let g=A;Array.isArray(g)&&(g=g.map(b=>uv(b))),v(e,["cacheTokensDetails"],g)}const d=x(t,["candidatesTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(b=>uv(b))),v(e,["responseTokensDetails"],g)}const h=x(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(b=>uv(b))),v(e,["toolUsePromptTokensDetails"],g)}const m=x(t,["trafficType"]);return m!=null&&v(e,["trafficType"],m),e}function Gee(t){const e={},r=x(t,["timeLeft"]);return r!=null&&v(e,["timeLeft"],r),e}function qee(t){const e={},r=x(t,["newHandle"]);r!=null&&v(e,["newHandle"],r);const n=x(t,["resumable"]);n!=null&&v(e,["resumable"],n);const a=x(t,["lastConsumedClientMessageIndex"]);return a!=null&&v(e,["lastConsumedClientMessageIndex"],a),e}function Kee(t){const e={},r=x(t,["setupComplete"]);r!=null&&v(e,["setupComplete"],Dee(r));const n=x(t,["serverContent"]);n!=null&&v(e,["serverContent"],Oee(n));const a=x(t,["toolCall"]);a!=null&&v(e,["toolCall"],Hee(a));const s=x(t,["toolCallCancellation"]);s!=null&&v(e,["toolCallCancellation"],Vee(s));const i=x(t,["usageMetadata"]);i!=null&&v(e,["usageMetadata"],zee(i));const o=x(t,["goAway"]);o!=null&&v(e,["goAway"],Gee(o));const l=x(t,["sessionResumptionUpdate"]);return l!=null&&v(e,["sessionResumptionUpdate"],qee(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wee(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function $ee(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Yee(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Xee(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],Wee(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],$ee(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],Yee(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function vw(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>Xee(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function Jee(t){const e={},r=x(t,["anyOf"]);r!=null&&v(e,["anyOf"],r);const n=x(t,["default"]);n!=null&&v(e,["default"],n);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["enum"]);s!=null&&v(e,["enum"],s);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const A=x(t,["maxItems"]);A!=null&&v(e,["maxItems"],A);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const m=x(t,["maximum"]);m!=null&&v(e,["maximum"],m);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const w=x(t,["minProperties"]);w!=null&&v(e,["minProperties"],w);const _=x(t,["minimum"]);_!=null&&v(e,["minimum"],_);const N=x(t,["nullable"]);N!=null&&v(e,["nullable"],N);const k=x(t,["pattern"]);k!=null&&v(e,["pattern"],k);const I=x(t,["properties"]);I!=null&&v(e,["properties"],I);const P=x(t,["propertyOrdering"]);P!=null&&v(e,["propertyOrdering"],P);const M=x(t,["required"]);M!=null&&v(e,["required"],M);const D=x(t,["title"]);D!=null&&v(e,["title"],D);const C=x(t,["type"]);return C!=null&&v(e,["type"],C),e}function Zee(t){const e={};if(x(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=x(t,["category"]);r!=null&&v(e,["category"],r);const n=x(t,["threshold"]);return n!=null&&v(e,["threshold"],n),e}function ete(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function tte(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function rte(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],tte(r)),e}function nte(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function ate(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],nte(r)),e}function ste(){return{}}function ite(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(A=>ete(A))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],rte(n));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],ate(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],ste());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function ote(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function lte(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function cte(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],lte(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function ute(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],ote(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],cte(n)),e}function Ate(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function $8(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],Ate(r)),e}function dte(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],$8(n)),e}function fte(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>dte(a))),v(e,["speakerVoiceConfigs"],n)}return e}function hte(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],$8(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],fte(n));const a=x(t,["languageCode"]);return a!=null&&v(e,["languageCode"],a),e}function mte(t){const e={},r=x(t,["includeThoughts"]);r!=null&&v(e,["includeThoughts"],r);const n=x(t,["thinkingBudget"]);return n!=null&&v(e,["thinkingBudget"],n),e}function pte(t,e,r){const n={},a=x(e,["systemInstruction"]);r!==void 0&&a!=null&&v(r,["systemInstruction"],vw(Oi(a)));const s=x(e,["temperature"]);s!=null&&v(n,["temperature"],s);const i=x(e,["topP"]);i!=null&&v(n,["topP"],i);const o=x(e,["topK"]);o!=null&&v(n,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(n,["candidateCount"],l);const A=x(e,["maxOutputTokens"]);A!=null&&v(n,["maxOutputTokens"],A);const d=x(e,["stopSequences"]);d!=null&&v(n,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(n,["responseLogprobs"],h);const m=x(e,["logprobs"]);m!=null&&v(n,["logprobs"],m);const g=x(e,["presencePenalty"]);g!=null&&v(n,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(n,["frequencyPenalty"],b);const w=x(e,["seed"]);w!=null&&v(n,["seed"],w);const _=x(e,["responseMimeType"]);_!=null&&v(n,["responseMimeType"],_);const N=x(e,["responseSchema"]);N!=null&&v(n,["responseSchema"],Jee(JS(N)));const k=x(e,["responseJsonSchema"]);if(k!=null&&v(n,["responseJsonSchema"],k),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=x(e,["safetySettings"]);if(r!==void 0&&I!=null){let F=I;Array.isArray(F)&&(F=F.map(L=>Zee(L))),v(r,["safetySettings"],F)}const P=x(e,["tools"]);if(r!==void 0&&P!=null){let F=$m(P);Array.isArray(F)&&(F=F.map(L=>ite(Wm(L)))),v(r,["tools"],F)}const M=x(e,["toolConfig"]);if(r!==void 0&&M!=null&&v(r,["toolConfig"],ute(M)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=x(e,["cachedContent"]);r!==void 0&&D!=null&&v(r,["cachedContent"],QA(t,D));const C=x(e,["responseModalities"]);C!=null&&v(n,["responseModalities"],C);const B=x(e,["mediaResolution"]);B!=null&&v(n,["mediaResolution"],B);const T=x(e,["speechConfig"]);if(T!=null&&v(n,["speechConfig"],hte(ZS(T))),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=x(e,["thinkingConfig"]);return O!=null&&v(n,["thinkingConfig"],mte(O)),n}function RI(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Gn(t,n));const a=x(e,["contents"]);if(a!=null){let i=Hl(a);Array.isArray(i)&&(i=i.map(o=>vw(o))),v(r,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["generationConfig"],pte(t,s,r)),r}function gte(t,e){const r={},n=x(t,["taskType"]);e!==void 0&&n!=null&&v(e,["requests[]","taskType"],n);const a=x(t,["title"]);e!==void 0&&a!=null&&v(e,["requests[]","title"],a);const s=x(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&v(e,["requests[]","outputDimensionality"],s),x(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function xte(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Gn(t,n));const a=x(e,["contents"]);a!=null&&v(r,["requests[]","content"],F8(t,a));const s=x(e,["config"]);s!=null&&v(r,["config"],gte(s,r));const i=x(e,["model"]);return i!==void 0&&v(r,["requests[]","model"],Gn(t,i)),r}function vte(t,e){const r={};if(x(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=x(t,["numberOfImages"]);e!==void 0&&n!=null&&v(e,["parameters","sampleCount"],n);const a=x(t,["aspectRatio"]);e!==void 0&&a!=null&&v(e,["parameters","aspectRatio"],a);const s=x(t,["guidanceScale"]);if(e!==void 0&&s!=null&&v(e,["parameters","guidanceScale"],s),x(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=x(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&v(e,["parameters","safetySetting"],i);const o=x(t,["personGeneration"]);e!==void 0&&o!=null&&v(e,["parameters","personGeneration"],o);const l=x(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&v(e,["parameters","includeSafetyAttributes"],l);const A=x(t,["includeRaiReason"]);e!==void 0&&A!=null&&v(e,["parameters","includeRaiReason"],A);const d=x(t,["language"]);e!==void 0&&d!=null&&v(e,["parameters","language"],d);const h=x(t,["outputMimeType"]);e!==void 0&&h!=null&&v(e,["parameters","outputOptions","mimeType"],h);const m=x(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&v(e,["parameters","outputOptions","compressionQuality"],m),x(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(x(t,["imageSize"])!==void 0)throw new Error("imageSize parameter is not supported in Gemini API.");if(x(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function yte(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Gn(t,n));const a=x(e,["prompt"]);a!=null&&v(r,["instances[0]","prompt"],a);const s=x(e,["config"]);return s!=null&&v(r,["config"],vte(s,r)),r}function wte(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],Gn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function bte(t,e,r){const n={},a=x(e,["pageSize"]);r!==void 0&&a!=null&&v(r,["_query","pageSize"],a);const s=x(e,["pageToken"]);r!==void 0&&s!=null&&v(r,["_query","pageToken"],s);const i=x(e,["filter"]);r!==void 0&&i!=null&&v(r,["_query","filter"],i);const o=x(e,["queryBase"]);return r!==void 0&&o!=null&&v(r,["_url","models_url"],L8(t,o)),n}function Cte(t,e){const r={},n=x(e,["config"]);return n!=null&&v(r,["config"],bte(t,n,r)),r}function Ete(t,e){const r={},n=x(t,["displayName"]);e!==void 0&&n!=null&&v(e,["displayName"],n);const a=x(t,["description"]);e!==void 0&&a!=null&&v(e,["description"],a);const s=x(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&v(e,["defaultCheckpointId"],s),r}function _te(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],Gn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],Ete(a,r)),r}function Ste(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],Gn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function Tte(t){const e={};if(x(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(x(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(x(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Bte(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Gn(t,n));const a=x(e,["contents"]);if(a!=null){let i=Hl(a);Array.isArray(i)&&(i=i.map(o=>vw(o))),v(r,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["config"],Tte(s)),r}function Nte(t){const e={};if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=x(t,["imageBytes"]);r!=null&&v(e,["bytesBase64Encoded"],Ph(r));const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function kte(t,e){const r={},n=x(t,["numberOfVideos"]);if(e!==void 0&&n!=null&&v(e,["parameters","sampleCount"],n),x(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=x(t,["durationSeconds"]);if(e!==void 0&&a!=null&&v(e,["parameters","durationSeconds"],a),x(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=x(t,["aspectRatio"]);if(e!==void 0&&s!=null&&v(e,["parameters","aspectRatio"],s),x(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const i=x(t,["personGeneration"]);if(e!==void 0&&i!=null&&v(e,["parameters","personGeneration"],i),x(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const o=x(t,["negativePrompt"]);e!==void 0&&o!=null&&v(e,["parameters","negativePrompt"],o);const l=x(t,["enhancePrompt"]);if(e!==void 0&&l!=null&&v(e,["parameters","enhancePrompt"],l),x(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(x(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(x(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function Ite(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Gn(t,n));const a=x(e,["prompt"]);a!=null&&v(r,["instances[0]","prompt"],a);const s=x(e,["image"]);if(s!=null&&v(r,["instances[0]","image"],Nte(s)),x(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const i=x(e,["config"]);return i!=null&&v(r,["config"],kte(i,r)),r}function Fte(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function Rte(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function Dte(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function Lte(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],Fte(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],Rte(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],Dte(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Xm(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>Lte(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function Ute(t){const e={},r=x(t,["anyOf"]);r!=null&&v(e,["anyOf"],r);const n=x(t,["default"]);n!=null&&v(e,["default"],n);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["enum"]);s!=null&&v(e,["enum"],s);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const A=x(t,["maxItems"]);A!=null&&v(e,["maxItems"],A);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const m=x(t,["maximum"]);m!=null&&v(e,["maximum"],m);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const w=x(t,["minProperties"]);w!=null&&v(e,["minProperties"],w);const _=x(t,["minimum"]);_!=null&&v(e,["minimum"],_);const N=x(t,["nullable"]);N!=null&&v(e,["nullable"],N);const k=x(t,["pattern"]);k!=null&&v(e,["pattern"],k);const I=x(t,["properties"]);I!=null&&v(e,["properties"],I);const P=x(t,["propertyOrdering"]);P!=null&&v(e,["propertyOrdering"],P);const M=x(t,["required"]);M!=null&&v(e,["required"],M);const D=x(t,["title"]);D!=null&&v(e,["title"],D);const C=x(t,["type"]);return C!=null&&v(e,["type"],C),e}function Mte(t){const e={},r=x(t,["featureSelectionPreference"]);return r!=null&&v(e,["featureSelectionPreference"],r),e}function Pte(t){const e={},r=x(t,["method"]);r!=null&&v(e,["method"],r);const n=x(t,["category"]);n!=null&&v(e,["category"],n);const a=x(t,["threshold"]);return a!=null&&v(e,["threshold"],a),e}function jte(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=x(t,["description"]);r!=null&&v(e,["description"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const s=x(t,["parametersJsonSchema"]);s!=null&&v(e,["parametersJsonSchema"],s);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function Ote(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function Qte(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],Ote(r)),e}function Hte(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function Vte(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],Hte(r)),e}function zte(){return{}}function Gte(t){const e={},r=x(t,["apiKeyString"]);return r!=null&&v(e,["apiKeyString"],r),e}function qte(t){const e={},r=x(t,["apiKeyConfig"]);r!=null&&v(e,["apiKeyConfig"],Gte(r));const n=x(t,["authType"]);n!=null&&v(e,["authType"],n);const a=x(t,["googleServiceAccountConfig"]);a!=null&&v(e,["googleServiceAccountConfig"],a);const s=x(t,["httpBasicAuthConfig"]);s!=null&&v(e,["httpBasicAuthConfig"],s);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function Kte(t){const e={},r=x(t,["authConfig"]);return r!=null&&v(e,["authConfig"],qte(r)),e}function Wte(){return{}}function Y8(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(m=>jte(m))),v(e,["functionDeclarations"],h)}const n=x(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);const a=x(t,["googleSearch"]);a!=null&&v(e,["googleSearch"],Qte(a));const s=x(t,["googleSearchRetrieval"]);s!=null&&v(e,["googleSearchRetrieval"],Vte(s)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],zte());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],Kte(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],Wte());const A=x(t,["codeExecution"]);A!=null&&v(e,["codeExecution"],A);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function $te(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function Yte(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function Xte(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],Yte(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function Jte(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],$te(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],Xte(n)),e}function Zte(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function ere(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],Zte(r)),e}function tre(t){const e={},r=x(t,["voiceConfig"]);if(r!=null&&v(e,["voiceConfig"],ere(r)),x(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function rre(t){const e={},r=x(t,["includeThoughts"]);r!=null&&v(e,["includeThoughts"],r);const n=x(t,["thinkingBudget"]);return n!=null&&v(e,["thinkingBudget"],n),e}function nre(t,e,r){const n={},a=x(e,["systemInstruction"]);r!==void 0&&a!=null&&v(r,["systemInstruction"],Xm(Oi(a)));const s=x(e,["temperature"]);s!=null&&v(n,["temperature"],s);const i=x(e,["topP"]);i!=null&&v(n,["topP"],i);const o=x(e,["topK"]);o!=null&&v(n,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(n,["candidateCount"],l);const A=x(e,["maxOutputTokens"]);A!=null&&v(n,["maxOutputTokens"],A);const d=x(e,["stopSequences"]);d!=null&&v(n,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(n,["responseLogprobs"],h);const m=x(e,["logprobs"]);m!=null&&v(n,["logprobs"],m);const g=x(e,["presencePenalty"]);g!=null&&v(n,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(n,["frequencyPenalty"],b);const w=x(e,["seed"]);w!=null&&v(n,["seed"],w);const _=x(e,["responseMimeType"]);_!=null&&v(n,["responseMimeType"],_);const N=x(e,["responseSchema"]);N!=null&&v(n,["responseSchema"],Ute(JS(N)));const k=x(e,["responseJsonSchema"]);k!=null&&v(n,["responseJsonSchema"],k);const I=x(e,["routingConfig"]);I!=null&&v(n,["routingConfig"],I);const P=x(e,["modelSelectionConfig"]);P!=null&&v(n,["modelConfig"],Mte(P));const M=x(e,["safetySettings"]);if(r!==void 0&&M!=null){let ie=M;Array.isArray(ie)&&(ie=ie.map(Z=>Pte(Z))),v(r,["safetySettings"],ie)}const D=x(e,["tools"]);if(r!==void 0&&D!=null){let ie=$m(D);Array.isArray(ie)&&(ie=ie.map(Z=>Y8(Wm(Z)))),v(r,["tools"],ie)}const C=x(e,["toolConfig"]);r!==void 0&&C!=null&&v(r,["toolConfig"],Jte(C));const B=x(e,["labels"]);r!==void 0&&B!=null&&v(r,["labels"],B);const T=x(e,["cachedContent"]);r!==void 0&&T!=null&&v(r,["cachedContent"],QA(t,T));const O=x(e,["responseModalities"]);O!=null&&v(n,["responseModalities"],O);const F=x(e,["mediaResolution"]);F!=null&&v(n,["mediaResolution"],F);const L=x(e,["speechConfig"]);L!=null&&v(n,["speechConfig"],tre(ZS(L)));const Q=x(e,["audioTimestamp"]);Q!=null&&v(n,["audioTimestamp"],Q);const q=x(e,["thinkingConfig"]);return q!=null&&v(n,["thinkingConfig"],rre(q)),n}function DI(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Gn(t,n));const a=x(e,["contents"]);if(a!=null){let i=Hl(a);Array.isArray(i)&&(i=i.map(o=>Xm(o))),v(r,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["generationConfig"],nre(t,s,r)),r}function are(t,e){const r={},n=x(t,["taskType"]);e!==void 0&&n!=null&&v(e,["instances[]","task_type"],n);const a=x(t,["title"]);e!==void 0&&a!=null&&v(e,["instances[]","title"],a);const s=x(t,["outputDimensionality"]);e!==void 0&&s!=null&&v(e,["parameters","outputDimensionality"],s);const i=x(t,["mimeType"]);e!==void 0&&i!=null&&v(e,["instances[]","mimeType"],i);const o=x(t,["autoTruncate"]);return e!==void 0&&o!=null&&v(e,["parameters","autoTruncate"],o),r}function sre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Gn(t,n));const a=x(e,["contents"]);a!=null&&v(r,["instances[]","content"],F8(t,a));const s=x(e,["config"]);return s!=null&&v(r,["config"],are(s,r)),r}function ire(t,e){const r={},n=x(t,["outputGcsUri"]);e!==void 0&&n!=null&&v(e,["parameters","storageUri"],n);const a=x(t,["negativePrompt"]);e!==void 0&&a!=null&&v(e,["parameters","negativePrompt"],a);const s=x(t,["numberOfImages"]);e!==void 0&&s!=null&&v(e,["parameters","sampleCount"],s);const i=x(t,["aspectRatio"]);e!==void 0&&i!=null&&v(e,["parameters","aspectRatio"],i);const o=x(t,["guidanceScale"]);e!==void 0&&o!=null&&v(e,["parameters","guidanceScale"],o);const l=x(t,["seed"]);e!==void 0&&l!=null&&v(e,["parameters","seed"],l);const A=x(t,["safetyFilterLevel"]);e!==void 0&&A!=null&&v(e,["parameters","safetySetting"],A);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&v(e,["parameters","includeSafetyAttributes"],h);const m=x(t,["includeRaiReason"]);e!==void 0&&m!=null&&v(e,["parameters","includeRaiReason"],m);const g=x(t,["language"]);e!==void 0&&g!=null&&v(e,["parameters","language"],g);const b=x(t,["outputMimeType"]);e!==void 0&&b!=null&&v(e,["parameters","outputOptions","mimeType"],b);const w=x(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&v(e,["parameters","outputOptions","compressionQuality"],w);const _=x(t,["addWatermark"]);e!==void 0&&_!=null&&v(e,["parameters","addWatermark"],_);const N=x(t,["imageSize"]);e!==void 0&&N!=null&&v(e,["parameters","sampleImageSize"],N);const k=x(t,["enhancePrompt"]);return e!==void 0&&k!=null&&v(e,["parameters","enhancePrompt"],k),r}function ore(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Gn(t,n));const a=x(e,["prompt"]);a!=null&&v(r,["instances[0]","prompt"],a);const s=x(e,["config"]);return s!=null&&v(r,["config"],ire(s,r)),r}function yw(t){const e={},r=x(t,["gcsUri"]);r!=null&&v(e,["gcsUri"],r);const n=x(t,["imageBytes"]);n!=null&&v(e,["bytesBase64Encoded"],Ph(n));const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function lre(t){const e={},r=x(t,["maskMode"]);r!=null&&v(e,["maskMode"],r);const n=x(t,["segmentationClasses"]);n!=null&&v(e,["maskClasses"],n);const a=x(t,["maskDilation"]);return a!=null&&v(e,["dilation"],a),e}function cre(t){const e={},r=x(t,["controlType"]);r!=null&&v(e,["controlType"],r);const n=x(t,["enableControlImageComputation"]);return n!=null&&v(e,["computeControl"],n),e}function ure(t){const e={},r=x(t,["styleDescription"]);return r!=null&&v(e,["styleDescription"],r),e}function Are(t){const e={},r=x(t,["subjectType"]);r!=null&&v(e,["subjectType"],r);const n=x(t,["subjectDescription"]);return n!=null&&v(e,["subjectDescription"],n),e}function dre(t){const e={},r=x(t,["referenceImage"]);r!=null&&v(e,["referenceImage"],yw(r));const n=x(t,["referenceId"]);n!=null&&v(e,["referenceId"],n);const a=x(t,["referenceType"]);a!=null&&v(e,["referenceType"],a);const s=x(t,["maskImageConfig"]);s!=null&&v(e,["maskImageConfig"],lre(s));const i=x(t,["controlImageConfig"]);i!=null&&v(e,["controlImageConfig"],cre(i));const o=x(t,["styleImageConfig"]);o!=null&&v(e,["styleImageConfig"],ure(o));const l=x(t,["subjectImageConfig"]);return l!=null&&v(e,["subjectImageConfig"],Are(l)),e}function fre(t,e){const r={},n=x(t,["outputGcsUri"]);e!==void 0&&n!=null&&v(e,["parameters","storageUri"],n);const a=x(t,["negativePrompt"]);e!==void 0&&a!=null&&v(e,["parameters","negativePrompt"],a);const s=x(t,["numberOfImages"]);e!==void 0&&s!=null&&v(e,["parameters","sampleCount"],s);const i=x(t,["aspectRatio"]);e!==void 0&&i!=null&&v(e,["parameters","aspectRatio"],i);const o=x(t,["guidanceScale"]);e!==void 0&&o!=null&&v(e,["parameters","guidanceScale"],o);const l=x(t,["seed"]);e!==void 0&&l!=null&&v(e,["parameters","seed"],l);const A=x(t,["safetyFilterLevel"]);e!==void 0&&A!=null&&v(e,["parameters","safetySetting"],A);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&v(e,["parameters","includeSafetyAttributes"],h);const m=x(t,["includeRaiReason"]);e!==void 0&&m!=null&&v(e,["parameters","includeRaiReason"],m);const g=x(t,["language"]);e!==void 0&&g!=null&&v(e,["parameters","language"],g);const b=x(t,["outputMimeType"]);e!==void 0&&b!=null&&v(e,["parameters","outputOptions","mimeType"],b);const w=x(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&v(e,["parameters","outputOptions","compressionQuality"],w);const _=x(t,["addWatermark"]);e!==void 0&&_!=null&&v(e,["parameters","addWatermark"],_);const N=x(t,["editMode"]);e!==void 0&&N!=null&&v(e,["parameters","editMode"],N);const k=x(t,["baseSteps"]);return e!==void 0&&k!=null&&v(e,["parameters","editConfig","baseSteps"],k),r}function hre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Gn(t,n));const a=x(e,["prompt"]);a!=null&&v(r,["instances[0]","prompt"],a);const s=x(e,["referenceImages"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>dre(l))),v(r,["instances[0]","referenceImages"],o)}const i=x(e,["config"]);return i!=null&&v(r,["config"],fre(i,r)),r}function mre(t,e){const r={},n=x(t,["includeRaiReason"]);e!==void 0&&n!=null&&v(e,["parameters","includeRaiReason"],n);const a=x(t,["outputMimeType"]);e!==void 0&&a!=null&&v(e,["parameters","outputOptions","mimeType"],a);const s=x(t,["outputCompressionQuality"]);e!==void 0&&s!=null&&v(e,["parameters","outputOptions","compressionQuality"],s);const i=x(t,["enhanceInputImage"]);e!==void 0&&i!=null&&v(e,["parameters","upscaleConfig","enhanceInputImage"],i);const o=x(t,["imagePreservationFactor"]);e!==void 0&&o!=null&&v(e,["parameters","upscaleConfig","imagePreservationFactor"],o);const l=x(t,["numberOfImages"]);e!==void 0&&l!=null&&v(e,["parameters","sampleCount"],l);const A=x(t,["mode"]);return e!==void 0&&A!=null&&v(e,["parameters","mode"],A),r}function pre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Gn(t,n));const a=x(e,["image"]);a!=null&&v(r,["instances[0]","image"],yw(a));const s=x(e,["upscaleFactor"]);s!=null&&v(r,["parameters","upscaleConfig","upscaleFactor"],s);const i=x(e,["config"]);return i!=null&&v(r,["config"],mre(i,r)),r}function gre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],Gn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function xre(t,e,r){const n={},a=x(e,["pageSize"]);r!==void 0&&a!=null&&v(r,["_query","pageSize"],a);const s=x(e,["pageToken"]);r!==void 0&&s!=null&&v(r,["_query","pageToken"],s);const i=x(e,["filter"]);r!==void 0&&i!=null&&v(r,["_query","filter"],i);const o=x(e,["queryBase"]);return r!==void 0&&o!=null&&v(r,["_url","models_url"],L8(t,o)),n}function vre(t,e){const r={},n=x(e,["config"]);return n!=null&&v(r,["config"],xre(t,n,r)),r}function yre(t,e){const r={},n=x(t,["displayName"]);e!==void 0&&n!=null&&v(e,["displayName"],n);const a=x(t,["description"]);e!==void 0&&a!=null&&v(e,["description"],a);const s=x(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&v(e,["defaultCheckpointId"],s),r}function wre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Gn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],yre(a,r)),r}function bre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],Gn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function Cre(t,e){const r={},n=x(t,["systemInstruction"]);e!==void 0&&n!=null&&v(e,["systemInstruction"],Xm(Oi(n)));const a=x(t,["tools"]);if(e!==void 0&&a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>Y8(o))),v(e,["tools"],i)}const s=x(t,["generationConfig"]);return e!==void 0&&s!=null&&v(e,["generationConfig"],s),r}function Ere(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Gn(t,n));const a=x(e,["contents"]);if(a!=null){let i=Hl(a);Array.isArray(i)&&(i=i.map(o=>Xm(o))),v(r,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["config"],Cre(s,r)),r}function _re(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Gn(t,n));const a=x(e,["contents"]);if(a!=null){let i=Hl(a);Array.isArray(i)&&(i=i.map(o=>Xm(o))),v(r,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function Sre(t){const e={},r=x(t,["uri"]);r!=null&&v(e,["gcsUri"],r);const n=x(t,["videoBytes"]);n!=null&&v(e,["bytesBase64Encoded"],Ph(n));const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function Tre(t,e){const r={},n=x(t,["numberOfVideos"]);e!==void 0&&n!=null&&v(e,["parameters","sampleCount"],n);const a=x(t,["outputGcsUri"]);e!==void 0&&a!=null&&v(e,["parameters","storageUri"],a);const s=x(t,["fps"]);e!==void 0&&s!=null&&v(e,["parameters","fps"],s);const i=x(t,["durationSeconds"]);e!==void 0&&i!=null&&v(e,["parameters","durationSeconds"],i);const o=x(t,["seed"]);e!==void 0&&o!=null&&v(e,["parameters","seed"],o);const l=x(t,["aspectRatio"]);e!==void 0&&l!=null&&v(e,["parameters","aspectRatio"],l);const A=x(t,["resolution"]);e!==void 0&&A!=null&&v(e,["parameters","resolution"],A);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["pubsubTopic"]);e!==void 0&&h!=null&&v(e,["parameters","pubsubTopic"],h);const m=x(t,["negativePrompt"]);e!==void 0&&m!=null&&v(e,["parameters","negativePrompt"],m);const g=x(t,["enhancePrompt"]);e!==void 0&&g!=null&&v(e,["parameters","enhancePrompt"],g);const b=x(t,["generateAudio"]);e!==void 0&&b!=null&&v(e,["parameters","generateAudio"],b);const w=x(t,["lastFrame"]);e!==void 0&&w!=null&&v(e,["instances[0]","lastFrame"],yw(w));const _=x(t,["compressionQuality"]);return e!==void 0&&_!=null&&v(e,["parameters","compressionQuality"],_),r}function Bre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],Gn(t,n));const a=x(e,["prompt"]);a!=null&&v(r,["instances[0]","prompt"],a);const s=x(e,["image"]);s!=null&&v(r,["instances[0]","image"],yw(s));const i=x(e,["video"]);i!=null&&v(r,["instances[0]","video"],Sre(i));const o=x(e,["config"]);return o!=null&&v(r,["config"],Tre(o,r)),r}function Nre(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function kre(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Ire(t){const e={},r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Fre(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],Nre(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],kre(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],Ire(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Rre(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>Fre(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function Dre(t){const e={},r=x(t,["citationSources"]);return r!=null&&v(e,["citations"],r),e}function Lre(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function Ure(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>Lre(a))),v(e,["urlMetadata"],n)}return e}function Mre(t){const e={},r=x(t,["content"]);r!=null&&v(e,["content"],Rre(r));const n=x(t,["citationMetadata"]);n!=null&&v(e,["citationMetadata"],Dre(n));const a=x(t,["tokenCount"]);a!=null&&v(e,["tokenCount"],a);const s=x(t,["finishReason"]);s!=null&&v(e,["finishReason"],s);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],Ure(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const A=x(t,["index"]);A!=null&&v(e,["index"],A);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function LI(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["candidates"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Mre(l))),v(e,["candidates"],o)}const a=x(t,["modelVersion"]);a!=null&&v(e,["modelVersion"],a);const s=x(t,["promptFeedback"]);s!=null&&v(e,["promptFeedback"],s);const i=x(t,["usageMetadata"]);return i!=null&&v(e,["usageMetadata"],i),e}function Pre(t){const e={},r=x(t,["values"]);return r!=null&&v(e,["values"],r),e}function jre(){return{}}function Ore(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>Pre(i))),v(e,["embeddings"],s)}return x(t,["metadata"])!=null&&v(e,["metadata"],jre()),e}function Qre(t){const e={},r=x(t,["bytesBase64Encoded"]);r!=null&&v(e,["imageBytes"],Ph(r));const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function X8(t){const e={},r=x(t,["safetyAttributes","categories"]);r!=null&&v(e,["categories"],r);const n=x(t,["safetyAttributes","scores"]);n!=null&&v(e,["scores"],n);const a=x(t,["contentType"]);return a!=null&&v(e,["contentType"],a),e}function Hre(t){const e={},r=x(t,["_self"]);r!=null&&v(e,["image"],Qre(r));const n=x(t,["raiFilteredReason"]);n!=null&&v(e,["raiFilteredReason"],n);const a=x(t,["_self"]);return a!=null&&v(e,["safetyAttributes"],X8(a)),e}function Vre(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>Hre(i))),v(e,["generatedImages"],s)}const a=x(t,["positivePromptSafetyAttributes"]);return a!=null&&v(e,["positivePromptSafetyAttributes"],X8(a)),e}function zre(t){const e={},r=x(t,["baseModel"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["createTime"]);n!=null&&v(e,["createTime"],n);const a=x(t,["updateTime"]);return a!=null&&v(e,["updateTime"],a),e}function R_(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["version"]);s!=null&&v(e,["version"],s);const i=x(t,["_self"]);i!=null&&v(e,["tunedModelInfo"],zre(i));const o=x(t,["inputTokenLimit"]);o!=null&&v(e,["inputTokenLimit"],o);const l=x(t,["outputTokenLimit"]);l!=null&&v(e,["outputTokenLimit"],l);const A=x(t,["supportedGenerationMethods"]);return A!=null&&v(e,["supportedActions"],A),e}function Gre(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["_self"]);if(a!=null){let s=U8(a);Array.isArray(s)&&(s=s.map(i=>R_(i))),v(e,["models"],s)}return e}function qre(){return{}}function Kre(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["totalTokens"]);n!=null&&v(e,["totalTokens"],n);const a=x(t,["cachedContentTokenCount"]);return a!=null&&v(e,["cachedContentTokenCount"],a),e}function Wre(t){const e={},r=x(t,["video","uri"]);r!=null&&v(e,["uri"],r);const n=x(t,["video","encodedVideo"]);n!=null&&v(e,["videoBytes"],Ph(n));const a=x(t,["encoding"]);return a!=null&&v(e,["mimeType"],a),e}function $re(t){const e={},r=x(t,["_self"]);return r!=null&&v(e,["video"],Wre(r)),e}function Yre(t){const e={},r=x(t,["generatedSamples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>$re(i))),v(e,["generatedVideos"],s)}const n=x(t,["raiMediaFilteredCount"]);n!=null&&v(e,["raiMediaFilteredCount"],n);const a=x(t,["raiMediaFilteredReasons"]);return a!=null&&v(e,["raiMediaFilteredReasons"],a),e}function Xre(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["metadata"]);n!=null&&v(e,["metadata"],n);const a=x(t,["done"]);a!=null&&v(e,["done"],a);const s=x(t,["error"]);s!=null&&v(e,["error"],s);const i=x(t,["response","generateVideoResponse"]);return i!=null&&v(e,["response"],Yre(i)),e}function Jre(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function Zre(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function ene(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function tne(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],Jre(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],Zre(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],ene(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function rne(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>tne(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function nne(t){const e={},r=x(t,["citations"]);return r!=null&&v(e,["citations"],r),e}function ane(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function sne(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>ane(a))),v(e,["urlMetadata"],n)}return e}function ine(t){const e={},r=x(t,["content"]);r!=null&&v(e,["content"],rne(r));const n=x(t,["citationMetadata"]);n!=null&&v(e,["citationMetadata"],nne(n));const a=x(t,["finishMessage"]);a!=null&&v(e,["finishMessage"],a);const s=x(t,["finishReason"]);s!=null&&v(e,["finishReason"],s);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],sne(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const A=x(t,["index"]);A!=null&&v(e,["index"],A);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function UI(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["candidates"]);if(n!=null){let A=n;Array.isArray(A)&&(A=A.map(d=>ine(d))),v(e,["candidates"],A)}const a=x(t,["createTime"]);a!=null&&v(e,["createTime"],a);const s=x(t,["responseId"]);s!=null&&v(e,["responseId"],s);const i=x(t,["modelVersion"]);i!=null&&v(e,["modelVersion"],i);const o=x(t,["promptFeedback"]);o!=null&&v(e,["promptFeedback"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function one(t){const e={},r=x(t,["truncated"]);r!=null&&v(e,["truncated"],r);const n=x(t,["token_count"]);return n!=null&&v(e,["tokenCount"],n),e}function lne(t){const e={},r=x(t,["values"]);r!=null&&v(e,["values"],r);const n=x(t,["statistics"]);return n!=null&&v(e,["statistics"],one(n)),e}function cne(t){const e={},r=x(t,["billableCharacterCount"]);return r!=null&&v(e,["billableCharacterCount"],r),e}function une(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions[]","embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>lne(i))),v(e,["embeddings"],s)}const a=x(t,["metadata"]);return a!=null&&v(e,["metadata"],cne(a)),e}function Ane(t){const e={},r=x(t,["gcsUri"]);r!=null&&v(e,["gcsUri"],r);const n=x(t,["bytesBase64Encoded"]);n!=null&&v(e,["imageBytes"],Ph(n));const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function J8(t){const e={},r=x(t,["safetyAttributes","categories"]);r!=null&&v(e,["categories"],r);const n=x(t,["safetyAttributes","scores"]);n!=null&&v(e,["scores"],n);const a=x(t,["contentType"]);return a!=null&&v(e,["contentType"],a),e}function t4(t){const e={},r=x(t,["_self"]);r!=null&&v(e,["image"],Ane(r));const n=x(t,["raiFilteredReason"]);n!=null&&v(e,["raiFilteredReason"],n);const a=x(t,["_self"]);a!=null&&v(e,["safetyAttributes"],J8(a));const s=x(t,["prompt"]);return s!=null&&v(e,["enhancedPrompt"],s),e}function dne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>t4(i))),v(e,["generatedImages"],s)}const a=x(t,["positivePromptSafetyAttributes"]);return a!=null&&v(e,["positivePromptSafetyAttributes"],J8(a)),e}function fne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>t4(s))),v(e,["generatedImages"],a)}return e}function hne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>t4(s))),v(e,["generatedImages"],a)}return e}function mne(t){const e={},r=x(t,["endpoint"]);r!=null&&v(e,["name"],r);const n=x(t,["deployedModelId"]);return n!=null&&v(e,["deployedModelId"],n),e}function pne(t){const e={},r=x(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["createTime"]);n!=null&&v(e,["createTime"],n);const a=x(t,["updateTime"]);return a!=null&&v(e,["updateTime"],a),e}function gne(t){const e={},r=x(t,["checkpointId"]);r!=null&&v(e,["checkpointId"],r);const n=x(t,["epoch"]);n!=null&&v(e,["epoch"],n);const a=x(t,["step"]);return a!=null&&v(e,["step"],a),e}function D_(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["versionId"]);s!=null&&v(e,["version"],s);const i=x(t,["deployedModels"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(m=>mne(m))),v(e,["endpoints"],h)}const o=x(t,["labels"]);o!=null&&v(e,["labels"],o);const l=x(t,["_self"]);l!=null&&v(e,["tunedModelInfo"],pne(l));const A=x(t,["defaultCheckpointId"]);A!=null&&v(e,["defaultCheckpointId"],A);const d=x(t,["checkpoints"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(m=>gne(m))),v(e,["checkpoints"],h)}return e}function xne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["_self"]);if(a!=null){let s=U8(a);Array.isArray(s)&&(s=s.map(i=>D_(i))),v(e,["models"],s)}return e}function vne(){return{}}function yne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["totalTokens"]);return n!=null&&v(e,["totalTokens"],n),e}function wne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["tokensInfo"]);return n!=null&&v(e,["tokensInfo"],n),e}function bne(t){const e={},r=x(t,["gcsUri"]);r!=null&&v(e,["uri"],r);const n=x(t,["bytesBase64Encoded"]);n!=null&&v(e,["videoBytes"],Ph(n));const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function Cne(t){const e={},r=x(t,["_self"]);return r!=null&&v(e,["video"],bne(r)),e}function Ene(t){const e={},r=x(t,["videos"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Cne(i))),v(e,["generatedVideos"],s)}const n=x(t,["raiMediaFilteredCount"]);n!=null&&v(e,["raiMediaFilteredCount"],n);const a=x(t,["raiMediaFilteredReasons"]);return a!=null&&v(e,["raiMediaFilteredReasons"],a),e}function _ne(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["metadata"]);n!=null&&v(e,["metadata"],n);const a=x(t,["done"]);a!=null&&v(e,["done"],a);const s=x(t,["error"]);s!=null&&v(e,["error"],s);const i=x(t,["response"]);return i!=null&&v(e,["response"],Ene(i)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sne="Content-Type",Tne="X-Server-Timeout",Bne="User-Agent",L_="x-goog-api-client",Nne="1.12.0",kne=`google-genai-sdk/${Nne}`,Ine="v1beta1",Fne="v1beta",MI=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Rne{constructor(e){var r,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Ine,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Fne,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),r=new URL(e);return r.protocol=r.protocol=="http:"?"ws":"wss",r.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,r,n){const a=[this.getRequestUrlInternal(r)];return n&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,r,n);if(e.queryParams)for(const[i,o]of Object.entries(e.queryParams))a.searchParams.append(i,String(o));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,r,e.abortSignal),this.unaryApiCall(a,s,e.httpMethod)}patchHttpOptions(e,r){const n=JSON.parse(JSON.stringify(e));for(const[a,s]of Object.entries(r))typeof s=="object"?n[a]=Object.assign(Object.assign({},n[a]),s):s!==void 0&&(n[a]=s);return n}async requestStream(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,r,n);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,r,e.abortSignal),this.streamApiCall(a,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,r,n){if(r&&r.timeout||n){const a=new AbortController,s=a.signal;if(r.timeout&&(r==null?void 0:r.timeout)>0){const i=setTimeout(()=>a.abort(),r.timeout);i&&typeof i.unref=="function"&&i.unref()}n&&n.addEventListener("abort",()=>{a.abort()}),e.signal=s}return r&&r.extraBody!==null&&Dne(e,r.extraBody),e.headers=await this.getHeadersInternal(r),e}async unaryApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async a=>(await PI(a),new T_(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async a=>(await PI(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){var r;return sm(this,arguments,function*(){const a=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),s=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let i="";for(;;){const{done:o,value:l}=yield ca(a.read());if(o){if(i.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const A=s.decode(l,{stream:!0});try{const h=JSON.parse(A);if("error"in h){const m=JSON.parse(JSON.stringify(h.error)),g=m.status,b=m.code,w=`got status: ${g}. ${JSON.stringify(h)}`;if(b>=400&&b<600)throw new xw({message:w,status:b})}}catch(h){if(h.name==="ApiError")throw h}i+=A;let d=i.match(MI);for(;d;){const h=d[1];try{const m=new Response(h,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ca(new T_(m)),i=i.slice(d[0].length),d=i.match(MI)}catch(m){throw new Error(`exception parsing stream chunk ${h}. ${m}`)}}}}finally{a.releaseLock()}})}async apiCall(e,r){return fetch(e,r).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const e={},r=kne+" "+this.clientOptions.userAgentExtra;return e[Bne]=r,e[L_]=r,e[Sne]="application/json",e}async getHeadersInternal(e){const r=new Headers;if(e&&e.headers){for(const[n,a]of Object.entries(e.headers))r.append(n,a);e.timeout&&e.timeout>0&&r.append(Tne,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r),r}async uploadFile(e,r){var n;const a={};r!=null&&(a.mimeType=r.mimeType,a.name=r.name,a.displayName=r.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const s=this.clientOptions.uploader,i=await s.stat(e);a.sizeBytes=String(i.size);const o=(n=r==null?void 0:r.mimeType)!==null&&n!==void 0?n:i.type;if(o===void 0||o==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=o;const l=await this.fetchUploadUrl(a,r);return s.upload(e,l,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,r){var n;let a={};r!=null&&r.httpOptions?a=r.httpOptions:a={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},i=await this.request({path:nr("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:a});if(!i||!(i!=null&&i.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const o=(n=i==null?void 0:i.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(o===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return o}}async function PI(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const r=t.status;let n;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?n=await t.json():n={error:{message:await t.text(),code:t.status,status:t.statusText}};const a=JSON.stringify(n);throw r>=400&&r<600?new xw({message:a,status:r}):new Error(a)}}function Dne(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let r={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))r=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(s,i){const o=Object.assign({},s);for(const l in i)if(Object.prototype.hasOwnProperty.call(i,l)){const A=i[l],d=o[l];A&&typeof A=="object"&&!Array.isArray(A)&&d&&typeof d=="object"&&!Array.isArray(d)?o[l]=n(d,A):(d&&A&&typeof d!=typeof A&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof A}. Overwriting.`),o[l]=A)}return o}const a=n(r,e);t.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Lne="mcp_used/unknown";let Une=!1;function Z8(t){for(const e of t)if(Mne(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Une}function eM(t){var e;const r=(e=t[L_])!==null&&e!==void 0?e:"";t[L_]=(r+` ${Lne}`).trimStart()}function Mne(t){return t!==null&&typeof t=="object"&&t instanceof r4}function Pne(t,e=100){return sm(this,arguments,function*(){let n,a=0;for(;a<e;){const s=yield ca(t.listTools({cursor:n}));for(const i of s.tools)yield yield ca(i),a++;if(!s.nextCursor)break;n=s.nextCursor}})}class r4{constructor(e=[],r){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=r}static create(e,r){return new r4(e,r)}async initialize(){var e,r,n,a;if(this.mcpTools.length>0)return;const s={},i=[];for(const d of this.mcpClients)try{for(var o=!0,l=(r=void 0,Fg(Pne(d))),A;A=await l.next(),e=A.done,!e;o=!0){a=A.value,o=!1;const h=a;i.push(h);const m=h.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=d}}catch(h){r={error:h}}finally{try{!o&&!e&&(n=l.return)&&await n.call(l)}finally{if(r)throw r.error}}this.mcpTools=i,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),RY(this.mcpTools,this.config)}async callTool(e){await this.initialize();const r=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[n.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const i=await a.callTool({name:n.name,arguments:n.args},void 0,s);r.push({functionResponse:{name:n.name,response:i.isError?{error:i}:i}})}return r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function jne(t,e,r){const n=new _Y;let a;r.data instanceof Blob?a=JSON.parse(await r.data.text()):a=JSON.parse(r.data);const s=Ree(a);Object.assign(n,s),e(n)}class One{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n}async connect(e){var r,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),i=Vne(this.apiClient.getDefaultHeaders()),o=this.apiClient.getApiKey(),l=`${a}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${o}`;let A=()=>{};const d=new Promise(I=>{A=I}),h=e.callbacks,m=function(){A({})},g=this.apiClient,b={onopen:m,onmessage:I=>{jne(g,h.onmessage,I)},onerror:(r=h==null?void 0:h.onerror)!==null&&r!==void 0?r:function(I){},onclose:(n=h==null?void 0:h.onclose)!==null&&n!==void 0?n:function(I){}},w=this.webSocketFactory.create(l,Hne(i),b);w.connect(),await d;const _=Gn(this.apiClient,e.model),N=K8({model:_}),k=F_({setup:N});return w.send(JSON.stringify(k)),new Qne(w,this.apiClient)}}class Qne{constructor(e,r){this.conn=e,this.apiClient=r}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const r=IZ(e),n=W8(r);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const r=FZ(e),n=F_(r);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const r=F_({playbackControl:e});this.conn.send(JSON.stringify(r))}play(){this.sendPlaybackControl($0.PLAY)}pause(){this.sendPlaybackControl($0.PAUSE)}stop(){this.sendPlaybackControl($0.STOP)}resetContext(){this.sendPlaybackControl($0.RESET_CONTEXT)}close(){this.conn.close()}}function Hne(t){const e={};return t.forEach((r,n)=>{e[n]=r}),e}function Vne(t){const e=new Headers;for(const[r,n]of Object.entries(t))e.append(r,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zne="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Gne(t,e,r){const n=new EY;let a;r.data instanceof Blob?a=await r.data.text():r.data instanceof ArrayBuffer?a=new TextDecoder().decode(r.data):a=r.data;const s=JSON.parse(a);if(t.isVertexAI()){const i=Kee(s);Object.assign(n,i)}else{const i=Eee(s);Object.assign(n,i)}e(n)}class qne{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n,this.music=new One(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var r,n,a,s,i,o;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),A=this.apiClient.getApiVersion();let d;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&Z8(e.config.tools)&&eM(h);const m=Yne(h);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${A}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const T=this.apiClient.getApiKey();let O="BidiGenerateContent",F="key";T!=null&&T.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),A!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),O="BidiGenerateContentConstrained",F="access_token"),d=`${l}/ws/google.ai.generativelanguage.${A}.GenerativeService.${O}?${F}=${T}`}let g=()=>{};const b=new Promise(T=>{g=T}),w=e.callbacks,_=function(){var T;(T=w==null?void 0:w.onopen)===null||T===void 0||T.call(w),g({})},N=this.apiClient,k={onopen:_,onmessage:T=>{Gne(N,w.onmessage,T)},onerror:(r=w==null?void 0:w.onerror)!==null&&r!==void 0?r:function(T){},onclose:(n=w==null?void 0:w.onclose)!==null&&n!==void 0?n:function(T){}},I=this.webSocketFactory.create(d,$ne(m),k);I.connect(),await b;let P=Gn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&P.startsWith("publishers/")){const T=this.apiClient.getProject(),O=this.apiClient.getLocation();P=`projects/${T}/locations/${O}/`+P}let M={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Z2.AUDIO]}:e.config.responseModalities=[Z2.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const D=(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[],C=[];for(const T of D)if(this.isCallableTool(T)){const O=T;C.push(await O.tool())}else C.push(T);C.length>0&&(e.config.tools=C);const B={model:P,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?M=see(this.apiClient,B):M=TZ(this.apiClient,B),delete M.config,I.send(JSON.stringify(M)),new Wne(I,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Kne={turnComplete:!0};class Wne{constructor(e,r){this.conn=e,this.apiClient=r}tLiveClientContent(e,r){if(r.turns!==null&&r.turns!==void 0){let n=[];try{n=Hl(r.turns),e.isVertexAI()?n=n.map(a=>Xm(a)):n=n.map(a=>vw(a))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof r.turns}'`)}return{clientContent:{turns:n,turnComplete:r.turnComplete}}}return{clientContent:{turnComplete:r.turnComplete}}}tLiveClienttToolResponse(e,r){let n=[];if(r.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(r.functionResponses)?n=r.functionResponses:n=[r.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const s of n){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(zne)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},Kne),e);const r=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(r))}sendRealtimeInput(e){let r={};this.apiClient.isVertexAI()?r={realtimeInput:lee(e)}:r={realtimeInput:kZ(e)},this.conn.send(JSON.stringify(r))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const r=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(r))}close(){this.conn.close()}}function $ne(t){const e={};return t.forEach((r,n)=>{e[n]=r}),e}function Yne(t){const e=new Headers;for(const[r,n]of Object.entries(t))e.append(r,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jI=10;function OI(t){var e,r,n;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const i of(r=t==null?void 0:t.tools)!==null&&r!==void 0?r:[])if(im(i)){a=!0;break}if(!a)return!0;const s=(n=t==null?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function im(t){return"callTool"in t&&typeof t.callTool=="function"}function Xne(t){var e,r,n;return(n=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(a=>im(a)))!==null&&n!==void 0?n:!1}function Jne(t){var e,r,n;return(n=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(a=>!im(a)))!==null&&n!==void 0?n:!1}function QI(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zne extends Mh{constructor(e){super(),this.apiClient=e,this.generateContent=async r=>{var n,a,s,i,o;const l=await this.processParamsMaybeAddMcpUsage(r);if(this.maybeMoveToResponseJsonSchem(r),!Xne(r)||OI(r.config))return await this.generateContentInternal(l);if(Jne(r))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let A,d;const h=Hl(l.contents),m=(s=(a=(n=l.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&s!==void 0?s:jI;let g=0;for(;g<m&&(A=await this.generateContentInternal(l),!(!A.functionCalls||A.functionCalls.length===0));){const b=A.candidates[0].content,w=[];for(const _ of(o=(i=r.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(im(_)){const k=await _.callTool(A.functionCalls);w.push(...k)}g++,d={role:"user",parts:w},l.contents=Hl(l.contents),l.contents.push(b),l.contents.push(d),QI(l.config)&&(h.push(b),h.push(d))}return QI(l.config)&&(A.automaticFunctionCallingHistory=h),A},this.generateContentStream=async r=>{if(this.maybeMoveToResponseJsonSchem(r),OI(r.config)){const n=await this.processParamsMaybeAddMcpUsage(r);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(r)},this.generateImages=async r=>await this.generateImagesInternal(r).then(n=>{var a;let s;const i=[];if(n!=null&&n.generatedImages)for(const l of n.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((a=l==null?void 0:l.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:i.push(l);let o;return s?o={generatedImages:i,positivePromptSafetyAttributes:s,sdkHttpResponse:n.sdkHttpResponse}:o={generatedImages:i,sdkHttpResponse:n.sdkHttpResponse},o}),this.list=async r=>{var n;const i={config:Object.assign(Object.assign({},{queryBase:!0}),r==null?void 0:r.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((n=i.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new Hx(_h.PAGED_ITEM_MODELS,o=>this.listInternal(o),await this.listInternal(i),i)},this.editImage=async r=>{const n={model:r.model,prompt:r.prompt,referenceImages:[],config:r.config};return r.referenceImages&&r.referenceImages&&(n.referenceImages=r.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async r=>{let n={numberOfImages:1,mode:"upscale"};r.config&&(n=Object.assign(Object.assign({},n),r.config));const a={model:r.model,image:r.image,upscaleFactor:r.upscaleFactor,config:n};return await this.upscaleImageInternal(a)},this.generateVideos=async r=>await this.generateVideosInternal(r)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var r,n,a;const s=(r=e.config)===null||r===void 0?void 0:r.tools;if(!s)return e;const i=await Promise.all(s.map(async l=>im(l)?await l.tool():l)),o={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:i})};if(o.config.tools=i,e.config&&e.config.tools&&Z8(e.config.tools)){const l=(a=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&a!==void 0?a:{};let A=Object.assign({},l);Object.keys(A).length===0&&(A=this.apiClient.getDefaultHeaders()),eM(A),o.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:A})}return o}async initAfcToolsMap(e){var r,n,a;const s=new Map;for(const i of(n=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&n!==void 0?n:[])if(im(i)){const o=i,l=await o.tool();for(const A of(a=l.functionDeclarations)!==null&&a!==void 0?a:[]){if(!A.name)throw new Error("Function declaration name is required.");if(s.has(A.name))throw new Error(`Duplicate tool declaration name: ${A.name}`);s.set(A.name,o)}}return s}async processAfcStream(e){var r,n,a;const s=(a=(n=(r=e.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&a!==void 0?a:jI;let i=!1,o=0;const l=await this.initAfcToolsMap(e);return function(A,d,h){var m,g;return sm(this,arguments,function*(){for(var b,w,_,N;o<s;){i&&(o++,i=!1);const M=yield ca(A.processParamsMaybeAddMcpUsage(h)),D=yield ca(A.generateContentStreamInternal(M)),C=[],B=[];try{for(var k=!0,I=(w=void 0,Fg(D)),P;P=yield ca(I.next()),b=P.done,!b;k=!0){N=P.value,k=!1;const T=N;if(yield yield ca(T),T.candidates&&(!((m=T.candidates[0])===null||m===void 0)&&m.content)){B.push(T.candidates[0].content);for(const O of(g=T.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(o<s&&O.functionCall){if(!O.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(O.functionCall.name)){const F=yield ca(d.get(O.functionCall.name).callTool([O.functionCall]));C.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${O.functionCall.name}`)}}}}catch(T){w={error:T}}finally{try{!k&&!b&&(_=I.return)&&(yield ca(_.call(I)))}finally{if(w)throw w.error}}if(C.length>0){i=!0;const T=new Gp;T.candidates=[{content:{role:"user",parts:C}}],yield yield ca(T);const O=[];O.push(...B),O.push({role:"user",parts:C});const F=Hl(h.contents).concat(O);h.contents=F}else break}})}(this,l,e)}async generateContentInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=DI(this.apiClient,e);return o=nr("{model}:generateContent",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=UI(d),m=new Gp;return Object.assign(m,h),m})}else{const A=RI(this.apiClient,e);return o=nr("{model}:generateContent",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=LI(d),m=new Gp;return Object.assign(m,h),m})}}async generateContentStreamInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=DI(this.apiClient,e);return o=nr("{model}:streamGenerateContent?alt=sse",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),i.then(function(h){return sm(this,arguments,function*(){var m,g,b,w;try{for(var _=!0,N=Fg(h),k;k=yield ca(N.next()),m=k.done,!m;_=!0){w=k.value,_=!1;const I=w,P=UI(yield ca(I.json()));P.sdkHttpResponse={headers:I.headers};const M=new Gp;Object.assign(M,P),yield yield ca(M)}}catch(I){g={error:I}}finally{try{!_&&!m&&(b=N.return)&&(yield ca(b.call(N)))}finally{if(g)throw g.error}}})})}else{const A=RI(this.apiClient,e);return o=nr("{model}:streamGenerateContent?alt=sse",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),i.then(function(h){return sm(this,arguments,function*(){var m,g,b,w;try{for(var _=!0,N=Fg(h),k;k=yield ca(N.next()),m=k.done,!m;_=!0){w=k.value,_=!1;const I=w,P=LI(yield ca(I.json()));P.sdkHttpResponse={headers:I.headers};const M=new Gp;Object.assign(M,P),yield yield ca(M)}}catch(I){g={error:I}}finally{try{!_&&!m&&(b=N.return)&&(yield ca(b.call(N)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=sre(this.apiClient,e);return o=nr("{model}:predict",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=une(d),m=new dI;return Object.assign(m,h),m})}else{const A=xte(this.apiClient,e);return o=nr("{model}:batchEmbedContents",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Ore(d),m=new dI;return Object.assign(m,h),m})}}async generateImagesInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=ore(this.apiClient,e);return o=nr("{model}:predict",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=dne(d),m=new fI;return Object.assign(m,h),m})}else{const A=yte(this.apiClient,e);return o=nr("{model}:predict",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Vre(d),m=new fI;return Object.assign(m,h),m})}}async editImageInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=hre(this.apiClient,e);return s=nr("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(A=>{const d=A;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>{const A=fne(l),d=new xY;return Object.assign(d,A),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=pre(this.apiClient,e);return s=nr("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(A=>{const d=A;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>{const A=hne(l),d=new vY;return Object.assign(d,A),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=gre(this.apiClient,e);return o=nr("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>D_(d))}else{const A=wte(this.apiClient,e);return o=nr("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>R_(d))}}async listInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=vre(this.apiClient,e);return o=nr("{models_url}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=xne(d),m=new hI;return Object.assign(m,h),m})}else{const A=Cte(this.apiClient,e);return o=nr("{models_url}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Gre(d),m=new hI;return Object.assign(m,h),m})}}async update(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=wre(this.apiClient,e);return o=nr("{model}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>D_(d))}else{const A=_te(this.apiClient,e);return o=nr("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>R_(d))}}async delete(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=bre(this.apiClient,e);return o=nr("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(()=>{const d=vne(),h=new mI;return Object.assign(h,d),h})}else{const A=Ste(this.apiClient,e);return o=nr("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(()=>{const d=qre(),h=new mI;return Object.assign(h,d),h})}}async countTokens(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=Ere(this.apiClient,e);return o=nr("{model}:countTokens",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=yne(d),m=new pI;return Object.assign(m,h),m})}else{const A=Bte(this.apiClient,e);return o=nr("{model}:countTokens",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Kre(d),m=new pI;return Object.assign(m,h),m})}}async computeTokens(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=_re(this.apiClient,e);return s=nr("{model}:computeTokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(A=>{const d=A;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>{const A=wne(l),d=new yY;return Object.assign(d,A),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=Bre(this.apiClient,e);return o=nr("{model}:predictLongRunning",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>{const h=_ne(d),m=new ey;return Object.assign(m,h),m})}else{const A=Ite(this.apiClient,e);return o=nr("{model}:predictLongRunning",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>{const h=Xre(d),m=new ey;return Object.assign(m,h),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eae(t){const e={},r=x(t,["operationName"]);r!=null&&v(e,["_url","operationName"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function tae(t){const e={},r=x(t,["operationName"]);r!=null&&v(e,["_url","operationName"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function rae(t){const e={},r=x(t,["operationName"]);r!=null&&v(e,["operationName"],r);const n=x(t,["resourceName"]);n!=null&&v(e,["_url","resourceName"],n);const a=x(t,["config"]);return a!=null&&v(e,["config"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nae extends Mh{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=r.name.split("/operations/")[0];let s;n&&"httpOptions"in n&&(s=n.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:a,config:{httpOptions:s}});return r._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:a,isVertexAI:!1})}}async get(e){const r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=r.name.split("/operations/")[0];let s;n&&"httpOptions"in n&&(s=n.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:a,config:{httpOptions:s}});return r._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:a,isVertexAI:!1})}}async getVideosOperationInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=tae(e);return o=nr("{operationName}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i}else{const A=eae(e);return o=nr("{operationName}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i}}async fetchPredictVideosOperationInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=rae(e);return s=nr("{resourceName}:fetchPredictOperation",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aae(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function tM(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],aae(r)),e}function sae(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],tM(n)),e}function iae(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>sae(a))),v(e,["speakerVoiceConfigs"],n)}return e}function oae(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],tM(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],iae(n));const a=x(t,["languageCode"]);return a!=null&&v(e,["languageCode"],a),e}function lae(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function cae(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function uae(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Aae(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],lae(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],cae(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],uae(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const A=x(t,["functionCall"]);A!=null&&v(e,["functionCall"],A);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function dae(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>Aae(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function fae(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function hae(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function mae(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],hae(r)),e}function pae(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function gae(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],pae(r)),e}function xae(){return{}}function vae(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(A=>fae(A))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],mae(n));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],gae(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],xae());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function yae(t){const e={},r=x(t,["handle"]);if(r!=null&&v(e,["handle"],r),x(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function HI(){return{}}function wae(t){const e={},r=x(t,["disabled"]);r!=null&&v(e,["disabled"],r);const n=x(t,["startOfSpeechSensitivity"]);n!=null&&v(e,["startOfSpeechSensitivity"],n);const a=x(t,["endOfSpeechSensitivity"]);a!=null&&v(e,["endOfSpeechSensitivity"],a);const s=x(t,["prefixPaddingMs"]);s!=null&&v(e,["prefixPaddingMs"],s);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function bae(t){const e={},r=x(t,["automaticActivityDetection"]);r!=null&&v(e,["automaticActivityDetection"],wae(r));const n=x(t,["activityHandling"]);n!=null&&v(e,["activityHandling"],n);const a=x(t,["turnCoverage"]);return a!=null&&v(e,["turnCoverage"],a),e}function Cae(t){const e={},r=x(t,["targetTokens"]);return r!=null&&v(e,["targetTokens"],r),e}function Eae(t){const e={},r=x(t,["triggerTokens"]);r!=null&&v(e,["triggerTokens"],r);const n=x(t,["slidingWindow"]);return n!=null&&v(e,["slidingWindow"],Cae(n)),e}function _ae(t){const e={},r=x(t,["proactiveAudio"]);return r!=null&&v(e,["proactiveAudio"],r),e}function Sae(t,e){const r={},n=x(t,["generationConfig"]);e!==void 0&&n!=null&&v(e,["setup","generationConfig"],n);const a=x(t,["responseModalities"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","responseModalities"],a);const s=x(t,["temperature"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","temperature"],s);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const A=x(t,["mediaResolution"]);e!==void 0&&A!=null&&v(e,["setup","generationConfig","mediaResolution"],A);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],oae(e4(h)));const m=x(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],dae(Oi(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let M=$m(b);Array.isArray(M)&&(M=M.map(D=>vae(Wm(D)))),v(e,["setup","tools"],M)}const w=x(t,["sessionResumption"]);e!==void 0&&w!=null&&v(e,["setup","sessionResumption"],yae(w));const _=x(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&v(e,["setup","inputAudioTranscription"],HI());const N=x(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&v(e,["setup","outputAudioTranscription"],HI());const k=x(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&v(e,["setup","realtimeInputConfig"],bae(k));const I=x(t,["contextWindowCompression"]);e!==void 0&&I!=null&&v(e,["setup","contextWindowCompression"],Eae(I));const P=x(t,["proactivity"]);return e!==void 0&&P!=null&&v(e,["setup","proactivity"],_ae(P)),r}function Tae(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["setup","model"],Gn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],Sae(a,r)),r}function Bae(t,e,r){const n={},a=x(e,["expireTime"]);r!==void 0&&a!=null&&v(r,["expireTime"],a);const s=x(e,["newSessionExpireTime"]);r!==void 0&&s!=null&&v(r,["newSessionExpireTime"],s);const i=x(e,["uses"]);r!==void 0&&i!=null&&v(r,["uses"],i);const o=x(e,["liveConnectConstraints"]);r!==void 0&&o!=null&&v(r,["bidiGenerateContentSetup"],Tae(t,o));const l=x(e,["lockAdditionalFields"]);return r!==void 0&&l!=null&&v(r,["fieldMask"],l),n}function Nae(t,e){const r={},n=x(e,["config"]);return n!=null&&v(r,["config"],Bae(t,n,r)),r}function kae(t){const e={},r=x(t,["name"]);return r!=null&&v(e,["name"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Iae(t){const e=[];for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const n=t[r];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const a=Object.keys(n).map(s=>`${r}.${s}`);e.push(...a)}else e.push(r)}return e.join(",")}function Fae(t,e){let r=null;const n=t.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const s=n.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,r=s):delete t.bidiGenerateContentSetup}else n!==void 0&&delete t.bidiGenerateContentSetup;const a=t.fieldMask;if(r){const s=Iae(r);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const i=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let o=[];a.length>0&&(o=a.map(A=>i.includes(A)?`generationConfig.${A}`:A));const l=[];s&&l.push(s),o.length>0&&l.push(...o),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?t.fieldMask=a.join(","):delete t.fieldMask;return t}class Rae extends Mh{constructor(e){super(),this.apiClient=e}async create(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const o=Nae(this.apiClient,e);s=nr("auth_tokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query;const l=Fae(o,e.config);return a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(A=>A.json()),a.then(A=>kae(A))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dae(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","name"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function Lae(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);e!==void 0&&a!=null&&v(e,["_query","pageToken"],a);const s=x(t,["filter"]);return e!==void 0&&s!=null&&v(e,["_query","filter"],s),r}function Uae(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],Lae(r,e)),e}function Mae(t){const e={},r=x(t,["textInput"]);r!=null&&v(e,["textInput"],r);const n=x(t,["output"]);return n!=null&&v(e,["output"],n),e}function Pae(t){const e={};if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=x(t,["examples"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>Mae(a))),v(e,["examples","examples"],n)}return e}function jae(t,e){const r={};if(x(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const n=x(t,["tunedModelDisplayName"]);if(e!==void 0&&n!=null&&v(e,["displayName"],n),x(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=x(t,["epochCount"]);e!==void 0&&a!=null&&v(e,["tuningTask","hyperparameters","epochCount"],a);const s=x(t,["learningRateMultiplier"]);if(s!=null&&v(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),x(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(x(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const i=x(t,["batchSize"]);e!==void 0&&i!=null&&v(e,["tuningTask","hyperparameters","batchSize"],i);const o=x(t,["learningRate"]);return e!==void 0&&o!=null&&v(e,["tuningTask","hyperparameters","learningRate"],o),r}function Oae(t){const e={},r=x(t,["baseModel"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["trainingDataset"]);n!=null&&v(e,["tuningTask","trainingData"],Pae(n));const a=x(t,["config"]);return a!=null&&v(e,["config"],jae(a,e)),e}function Qae(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","name"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function Hae(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);e!==void 0&&a!=null&&v(e,["_query","pageToken"],a);const s=x(t,["filter"]);return e!==void 0&&s!=null&&v(e,["_query","filter"],s),r}function Vae(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],Hae(r,e)),e}function zae(t,e){const r={},n=x(t,["gcsUri"]);e!==void 0&&n!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],n);const a=x(t,["vertexDatasetResource"]);if(e!==void 0&&a!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],a),x(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function Gae(t,e){const r={},n=x(t,["gcsUri"]);n!=null&&v(r,["validationDatasetUri"],n);const a=x(t,["vertexDatasetResource"]);return e!==void 0&&a!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],a),r}function qae(t,e){const r={},n=x(t,["validationDataset"]);e!==void 0&&n!=null&&v(e,["supervisedTuningSpec"],Gae(n,r));const a=x(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&v(e,["tunedModelDisplayName"],a);const s=x(t,["description"]);e!==void 0&&s!=null&&v(e,["description"],s);const i=x(t,["epochCount"]);e!==void 0&&i!=null&&v(e,["supervisedTuningSpec","hyperParameters","epochCount"],i);const o=x(t,["learningRateMultiplier"]);e!==void 0&&o!=null&&v(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],o);const l=x(t,["exportLastCheckpointOnly"]);e!==void 0&&l!=null&&v(e,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const A=x(t,["adapterSize"]);if(e!==void 0&&A!=null&&v(e,["supervisedTuningSpec","hyperParameters","adapterSize"],A),x(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(x(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return r}function Kae(t){const e={},r=x(t,["baseModel"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["trainingDataset"]);n!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],zae(n,e));const a=x(t,["config"]);return a!=null&&v(e,["config"],qae(a,e)),e}function Wae(t){const e={},r=x(t,["name"]);r!=null&&v(e,["model"],r);const n=x(t,["name"]);return n!=null&&v(e,["endpoint"],n),e}function rM(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["state"]);a!=null&&v(e,["state"],R8(a));const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["tuningTask","startTime"]);i!=null&&v(e,["startTime"],i);const o=x(t,["tuningTask","completeTime"]);o!=null&&v(e,["endTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const A=x(t,["description"]);A!=null&&v(e,["description"],A);const d=x(t,["baseModel"]);d!=null&&v(e,["baseModel"],d);const h=x(t,["_self"]);h!=null&&v(e,["tunedModel"],Wae(h));const m=x(t,["distillationSpec"]);m!=null&&v(e,["distillationSpec"],m);const g=x(t,["experiment"]);g!=null&&v(e,["experiment"],g);const b=x(t,["labels"]);b!=null&&v(e,["labels"],b);const w=x(t,["pipelineJob"]);w!=null&&v(e,["pipelineJob"],w);const _=x(t,["satisfiesPzi"]);_!=null&&v(e,["satisfiesPzi"],_);const N=x(t,["satisfiesPzs"]);N!=null&&v(e,["satisfiesPzs"],N);const k=x(t,["serviceAccount"]);k!=null&&v(e,["serviceAccount"],k);const I=x(t,["tunedModelDisplayName"]);return I!=null&&v(e,["tunedModelDisplayName"],I),e}function $ae(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["tunedModels"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>rM(i))),v(e,["tuningJobs"],s)}return e}function Yae(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["metadata"]);a!=null&&v(e,["metadata"],a);const s=x(t,["done"]);s!=null&&v(e,["done"],s);const i=x(t,["error"]);return i!=null&&v(e,["error"],i),e}function Xae(t){const e={},r=x(t,["checkpointId"]);r!=null&&v(e,["checkpointId"],r);const n=x(t,["epoch"]);n!=null&&v(e,["epoch"],n);const a=x(t,["step"]);a!=null&&v(e,["step"],a);const s=x(t,["endpoint"]);return s!=null&&v(e,["endpoint"],s),e}function Jae(t){const e={},r=x(t,["model"]);r!=null&&v(e,["model"],r);const n=x(t,["endpoint"]);n!=null&&v(e,["endpoint"],n);const a=x(t,["checkpoints"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>Xae(i))),v(e,["checkpoints"],s)}return e}function U_(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["state"]);a!=null&&v(e,["state"],R8(a));const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["startTime"]);i!=null&&v(e,["startTime"],i);const o=x(t,["endTime"]);o!=null&&v(e,["endTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const A=x(t,["error"]);A!=null&&v(e,["error"],A);const d=x(t,["description"]);d!=null&&v(e,["description"],d);const h=x(t,["baseModel"]);h!=null&&v(e,["baseModel"],h);const m=x(t,["tunedModel"]);m!=null&&v(e,["tunedModel"],Jae(m));const g=x(t,["supervisedTuningSpec"]);g!=null&&v(e,["supervisedTuningSpec"],g);const b=x(t,["tuningDataStats"]);b!=null&&v(e,["tuningDataStats"],b);const w=x(t,["encryptionSpec"]);w!=null&&v(e,["encryptionSpec"],w);const _=x(t,["partnerModelTuningSpec"]);_!=null&&v(e,["partnerModelTuningSpec"],_);const N=x(t,["distillationSpec"]);N!=null&&v(e,["distillationSpec"],N);const k=x(t,["experiment"]);k!=null&&v(e,["experiment"],k);const I=x(t,["labels"]);I!=null&&v(e,["labels"],I);const P=x(t,["pipelineJob"]);P!=null&&v(e,["pipelineJob"],P);const M=x(t,["satisfiesPzi"]);M!=null&&v(e,["satisfiesPzi"],M);const D=x(t,["satisfiesPzs"]);D!=null&&v(e,["satisfiesPzs"],D);const C=x(t,["serviceAccount"]);C!=null&&v(e,["serviceAccount"],C);const B=x(t,["tunedModelDisplayName"]);return B!=null&&v(e,["tunedModelDisplayName"],B),e}function Zae(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["tuningJobs"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>U_(i))),v(e,["tuningJobs"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ese extends Mh{constructor(e){super(),this.apiClient=e,this.get=async r=>await this.getInternal(r),this.list=async(r={})=>new Hx(_h.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(r),r),this.tune=async r=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(r);{const n=await this.tuneMldevInternal(r);let a="";return n.metadata!==void 0&&n.metadata.tunedModel!==void 0?a=n.metadata.tunedModel:n.name!==void 0&&n.name.includes("/operations/")&&(a=n.name.split("/operations/")[0]),{name:a,state:S_.JOB_STATE_QUEUED}}}}async getInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=Qae(e);return o=nr("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>U_(d))}else{const A=Dae(e);return o=nr("{name}",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>rM(d))}}async listInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const A=Vae(e);return o=nr("tuningJobs",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Zae(d),m=new xI;return Object.assign(m,h),m})}else{const A=Uae(e);return o=nr("tunedModels",A._url),l=A._query,delete A.config,delete A._url,delete A._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(A),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=$ae(d),m=new xI;return Object.assign(m,h),m})}}async tuneInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=Kae(e);return s=nr("tuningJobs",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(A=>{const d=A;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>U_(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Oae(e);return s=nr("tunedModels",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(A=>{const d=A;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>Yae(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tse{async download(e,r){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const rse=1024*1024*8,nse=3,ase=1e3,sse=2,LC="x-goog-upload-status";async function ise(t,e,r){var n,a,s;let i=0,o=0,l=new T_(new Response),A="upload";for(i=t.size;o<i;){const h=Math.min(rse,i-o),m=t.slice(o,o+h);o+h>=i&&(A+=", finalize");let g=0,b=ase;for(;g<nse&&(l=await r.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":A,"X-Goog-Upload-Offset":String(o),"Content-Length":String(h)}}}),!(!((n=l==null?void 0:l.headers)===null||n===void 0)&&n[LC]));)g++,await lse(b),b=b*sse;if(o+=h,((a=l==null?void 0:l.headers)===null||a===void 0?void 0:a[LC])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await(l==null?void 0:l.json());if(((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[LC])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function ose(t){return{size:t.size,type:t.type}}function lse(t){return new Promise(e=>setTimeout(e,t))}class cse{async upload(e,r,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ise(e,r,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ose(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class use{create(e,r,n){return new Ase(e,r,n)}}class Ase{constructor(e,r,n){this.url=e,this.headers=r,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VI="x-goog-api-key";class dse{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(VI)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(VI,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fse="gl-node/";class zl{constructor(e){var r;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(r=e.vertexai)!==null&&r!==void 0?r:!1,this.apiKey=e.apiKey;const n=gY(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion;const a=new dse(this.apiKey);this.apiClient=new Rne({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:fse+"web",uploader:new cse,downloader:new tse}),this.models=new Zne(this.apiClient),this.live=new qne(this.apiClient,a,new use),this.batches=new OX(this.apiClient),this.chats=new zJ(this.models,this.apiClient),this.caches=new QJ(this.apiClient),this.files=new nZ(this.apiClient),this.operations=new nae(this.apiClient),this.authTokens=new Rae(this.apiClient),this.tunings=new ese(this.apiClient)}}const zI="apiCallLogs",hse="lir-sessionUser",Gl=t=>{try{const e=localStorage.getItem(hse);if(!e){console.warn("No se pudo registrar la llamada a la API: no hay usuario en sesión.");return}const r=JSON.parse(e),n=localStorage.getItem(zI),a=n?JSON.parse(n):[],i=[{id:crypto.randomUUID(),timestamp:new Date().toISOString(),userId:r.id,userEmail:r.email,module:t},...a].slice(0,2e3);localStorage.setItem(zI,JSON.stringify(i)),window.dispatchEvent(new Event("storage"))}catch(e){console.error("Error al registrar la llamada a la API:",e)}},ww="planificaciones",nM="actividades_calendario",aM="eventos_calendario",sM=t=>{var r,n,a;const e=t.data();return{id:t.id,...e,fechaCreacion:((a=(n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:a.toISOString())||e.fechaCreacion}},mse=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:Wr.fromDate(new Date),fechaActualizacion:Wr.fromDate(new Date)};return(await eo(Ar(dr,ww),r)).id}catch(r){throw console.error("Error al guardar planificación:",r),new Error("No se pudo guardar la planificación")}},pse=async(t,e,r)=>{try{const n=hn(dr,ww,t),a=await km(n);if(!a.exists()||a.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificación");await Km(n,{...e,fechaActualizacion:Wr.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificación:",n),new Error("No se pudo actualizar la planificación")}},gse=async(t,e)=>{try{const r=hn(dr,ww,t),n=await km(r);if(!n.exists()||n.data().userId!==e)throw new Error("No tienes permisos para eliminar esta planificación");await Bo(r)}catch(r){throw console.error("Error al eliminar planificación:",r),new Error("No se pudo eliminar la planificación")}},xse=(t,e)=>{const r=an(Ar(dr,ww),Ai("userId","==",t),ya("fechaCreacion","desc"));return na(r,n=>{const a=n.docs.map(sM);e(a)},n=>{console.error("Error en suscripción a planificaciones:",n)})},vse=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:Wr.fromDate(new Date),fechaActualizacion:Wr.fromDate(new Date)};return(await eo(Ar(dr,nM),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},yse=(t,e)=>{const r=an(Ar(dr,nM),Ai("userId","==",t),ya("fecha","desc"));return na(r,n=>{const a=n.docs.map(sM);e(a)},n=>{console.error("Error en suscripción a actividades:",n)})},wse=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:Wr.fromDate(new Date)};return(await eo(Ar(dr,aM),r)).id}catch(r){throw console.error("Error al guardar evento:",r),new Error("No se pudo guardar el evento")}},bse=async(t,e,r,n)=>{try{const a=an(Ar(dr,aM),Ai("userId","==",t),Ai("date","==",e),Ai("type","==",qr.ACTIVIDAD_FOCALIZADA),KS(1));return(await So(a)).docs.some(i=>{const o=i.data();return o.responsables===r&&o.ubicacion===n})}catch(a){return console.error("Error al verificar evento existente:",a),!1}},Cse={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_APP_ID:"1:1022861144167:web:7c277dd701dad5986864c2",VITE_FIREBASE_AUTH_DOMAIN:"planificador-145df.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-LKJRFMVC9F",VITE_FIREBASE_MESSAGING_SENDER_ID:"1022861144167",VITE_FIREBASE_PROJECT_ID:"planificador-145df",VITE_FIREBASE_STORAGE_BUCKET:"planificador-145df.appspot.com",VITE_GEMINI_API_KEY:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",VITE_GOOGLE_AI_API_KEY:void 0},Ese=t=>{const[e,r]=J.useState([]),[n,a]=J.useState(!0),[s,i]=J.useState(null);J.useEffect(()=>t?xse(t,h=>{r(h),a(!1)}):void 0,[t]);const o=J.useCallback(async d=>{try{i(null),await mse(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al guardar"),h}},[t]),l=J.useCallback(async(d,h)=>{try{i(null),await pse(d,h,t)}catch(m){throw i(m instanceof Error?m.message:"Error al actualizar"),m}},[t]),A=J.useCallback(async d=>{try{i(null),await gse(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al eliminar"),h}},[t]);return{planificaciones:e,loading:n,error:s,save:o,update:l,remove:A}},_se=t=>{const[e,r]=J.useState([]),[n,a]=J.useState(!0),[s,i]=J.useState(null);J.useEffect(()=>t?yse(t,A=>{r(A),a(!1)}):void 0,[t]);const o=J.useCallback(async l=>{try{return i(null),await vse(l,t)}catch(A){throw i(A instanceof Error?A.message:"Error al guardar actividad"),A}},[t]);return{actividades:e,loading:n,error:s,save:o}},Sse=({lesson:t,onClose:e,onSave:r,isLoading:n=!1})=>{const[a,s]=J.useState(t),i=l=>{s({...a,[l.target.name]:l.target.value})},o=async()=>{try{await r(a),e()}catch(l){console.error("Error al guardar lección:",l)}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),c.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(a).map(([l,A])=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:l.replace(/([A-Z])/g," $1")}),c.jsx("textarea",{name:l,value:A,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},l))}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[c.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),c.jsxs("button",{onClick:o,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},Tse=({plan:t,onEditLesson:e,onUseLesson:r,isLoading:n=!1})=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",t.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Indicadores de Evaluación:"})," ",t.indicadoresEvaluacion]})]}),c.jsx("div",{className:"space-y-4",children:t.detallesLeccion.map((a,s)=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[c.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",s+1,": ",a.actividades]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo:"})," ",a.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Contenidos:"})," ",a.contenidosConceptuales]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Habilidad (Bloom):"})," ",a.habilidadesBloom]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Perfil de Egreso:"})," ",a.perfilEgreso]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Interdisciplinariedad:"})," ",a.asignaturasInterdisciplinariedad]})]}),c.jsxs("div",{className:"flex gap-2 mt-4",children:[c.jsx("button",{onClick:()=>e(s,a),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),c.jsx("button",{onClick:()=>r(a,t),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},s))})]}),Bse=({plan:t,onBack:e,onSave:r,isLoading:n=!1})=>{const[a,s]=J.useState(t),[i,o]=J.useState(!1),l=d=>{const{name:h,value:m}=d.target,[g,b]=h.split(".");s(g==="momentosClase"?w=>({...w,momentosClase:{...w.momentosClase,[b]:m}}):w=>({...w,[h]:m}))},A=async()=>{o(!0);try{await r(a)}catch(d){console.error("Error al guardar plan de clase:",d)}finally{o(!1)}};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:t.nombreClase}),c.jsx("button",{onClick:e,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:n||i,children:"← Volver"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),c.jsx("textarea",{name:"momentosClase.inicio",value:a.momentosClase.inicio,onChange:l,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:n||i})]}),c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),c.jsx("textarea",{name:"momentosClase.desarrollo",value:a.momentosClase.desarrollo,onChange:l,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:n||i})]}),c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),c.jsx("textarea",{name:"momentosClase.cierre",value:a.momentosClase.cierre,onChange:l,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:n||i})]})]}),c.jsx("div",{className:"text-right mt-6",children:c.jsxs("button",{onClick:A,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2 ml-auto",disabled:n||i,children:[i&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})})]})},Nse=({userId:t})=>{const{actividades:e,save:r}=_se(t),[n,a]=J.useState("list"),[s,i]=J.useState(null),[o,l]=J.useState(!1),[A,d]=J.useState(!1),h={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[m,g]=J.useState(h);J.useEffect(()=>{n==="summary"&&s&&b()},[n,s,t]);const b=async()=>{if(s)try{const D=await bse(t,s.fecha,s.nombre,s.ubicacion);d(D)}catch(D){console.error("Error al verificar evento en calendario:",D)}},w=D=>{const{name:C,value:B}=D.target;g(T=>({...T,[C]:B}))},_=(D,C,B)=>{g(T=>({...T,tareas:T.tareas.map(O=>O.id===D?{...O,[C]:B}:O)}))},N=()=>{g(D=>({...D,tareas:[...D.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},k=D=>{g(C=>({...C,tareas:C.tareas.filter(B=>B.id!==D)}))},I=async D=>{D.preventDefault(),l(!0);const C=`Basado en la siguiente información de una actividad, genera un objetivo claro y conciso para esta.
    - Nombre: ${m.nombre}
    - Descripción: ${m.descripcion}
    - Tareas: ${m.tareas.map(B=>B.descripcion).join(", ")}
    El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propósito principal de la actividad.`;try{Gl("Planificación - Actividad Calendario");const T=await new zl({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:C}),O={...m,objetivo:T.text.replace(/(\*\*|\*)/g,"")},F=await r(O),L={...O,id:F};i(L),a("summary")}catch(B){console.error("Error al generar objetivo con IA:",B),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él.");try{const T={...m,objetivo:"No generado"},O=await r(T),F={...T,id:O};i(F),a("summary")}catch(T){console.error("Error al guardar actividad:",T),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{l(!1)}},P=async D=>{if(!D)return;const C={date:D.fecha,type:qr.ACTIVIDAD_FOCALIZADA,responsables:D.nombre,ubicacion:D.ubicacion,horario:D.hora};try{await wse(C,t),d(!0),alert("Actividad añadida al Calendario Académico.")}catch(B){console.error("Error adding to calendar:",B),alert("Hubo un error al agregar la actividad al calendario.")}},M="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white";return n==="form"?c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:c.jsxs("form",{onSubmit:I,className:"space-y-8",children:[c.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-bold mb-4",children:"Información General"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("input",{name:"nombre",value:m.nombre,onChange:w,placeholder:"Nombre de la Actividad",className:M,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{name:"fecha",type:"date",value:m.fecha,onChange:w,className:M,required:!0,disabled:o}),c.jsx("input",{name:"hora",type:"time",value:m.hora,onChange:w,className:M,required:!0,disabled:o})]}),c.jsx("textarea",{name:"descripcion",value:m.descripcion,onChange:w,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:M,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{name:"ubicacion",value:m.ubicacion,onChange:w,placeholder:"Ubicación",className:M,required:!0,disabled:o}),c.jsx("input",{name:"participantes",value:m.participantes,onChange:w,placeholder:"Participantes",className:M,required:!0,disabled:o})]}),c.jsx("textarea",{name:"recursosGenerales",value:m.recursosGenerales,onChange:w,placeholder:"Recursos Generales Necesarios",rows:2,className:M,disabled:o})]})]}),c.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),c.jsx("button",{type:"button",onClick:N,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:o,children:"+ Agregar Tarea"})]}),c.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:m.tareas.map((D,C)=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[c.jsx("button",{type:"button",onClick:()=>k(D.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:o,children:"×"}),c.jsx("textarea",{value:D.descripcion,onChange:B=>_(D.id,"descripcion",B.target.value),placeholder:`Descripción de la Tarea ${C+1}`,rows:2,className:M,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[c.jsx("input",{value:D.responsable,onChange:B=>_(D.id,"responsable",B.target.value),placeholder:"Responsable",className:M,required:!0,disabled:o}),c.jsx("input",{value:D.recursos,onChange:B=>_(D.id,"recursos",B.target.value),placeholder:"Recursos Necesarios",className:M,disabled:o})]})]},D.id))})]}),c.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[c.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),c.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:o,children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:o?c.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[c.jsx("span",{className:"text-2xl",children:"✓"}),c.jsxs("div",{children:[c.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),c.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),c.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),c.jsxs("div",{className:"space-y-4 text-sm",children:[c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),c.jsx("span",{children:s.nombre})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),c.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),c.jsx("p",{children:s.descripcion})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),c.jsx("span",{children:s.ubicacion})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),c.jsx("span",{children:s.participantes})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),c.jsx("p",{children:s.recursosGenerales})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),c.jsx("p",{children:s.objetivo})]})]}),c.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[c.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),c.jsx("button",{onClick:()=>P(s),disabled:A,className:`font-bold px-4 py-2 rounded-lg transition-colors ${A?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:A?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),c.jsx("button",{onClick:()=>{a("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),c.jsx("button",{onClick:()=>{a("form"),g(h)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),c.jsx("div",{className:"space-y-3",children:e.length>0?e.map(D=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:D.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(D.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",D.ubicacion]})]},D.id)):c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},kse=({currentUser:t})=>{const e=t.email||t.id||"",{planificaciones:r,save:n,update:a,remove:s,loading:i}=Ese(e),o={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[l,A]=J.useState(o),[d,h]=J.useState(null),[m,g]=J.useState(!1),[b,w]=J.useState(null),[_,N]=J.useState("unidad"),[k,I]=J.useState(null),[P,M]=J.useState(null),D=J.useMemo(()=>t.asignaturas||[],[t.asignaturas]),C=J.useMemo(()=>{const z=t.cursos||[],W=new Set;return z.forEach(ce=>{ce.startsWith("1º")?W.add("1º Medio"):ce.startsWith("2º")?W.add("2º Medio"):ce.startsWith("3º")?W.add("3º Medio"):ce.startsWith("4º")&&W.add("4º Medio")}),Array.from(W)},[t.cursos]);J.useEffect(()=>{A(z=>({...z,asignatura:D[0]||"",nivel:C[0]||""}))},[D,C]);const B=z=>{const{name:W,value:ce}=z.target;A(j=>({...j,[W]:W==="cantidadClases"?parseInt(ce,10):ce}))},T=()=>{const{asignatura:z,nivel:W,nombreUnidad:ce,contenidos:j,cantidadClases:K,observaciones:X,ideasParaUnidad:te}=l;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica completa en formato JSON estructurado, basándote en la información proporcionada.

    **Información Base:**
    - Asignatura: ${z}
    - Nivel: ${W}
    - Nombre de la Unidad: "${ce}"
    - Contenidos clave a trabajar (insumo principal): "${j}"
    - Cantidad de clases para la unidad: ${K}
    - Ideas y perspectiva del docente para la unidad: "${te||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${X||"Ninguna"}"

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${K} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
        - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},O=async z=>{if(z.preventDefault(),g(!0),w(null),console.log("🔍 Debug API Key:"),console.log("VITE_GOOGLE_AI_API_KEY:",void 0),console.log("VITE_GEMINI_API_KEY:","AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"),console.log("Todas las variables env:",Cse),!l.contenidos||!l.nombreUnidad){w("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),g(!1);return}try{Gl("Planificación - Unidad");const W=new zl({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),ce=T(),j={type:Zt.OBJECT,properties:{objetivosAprendizaje:{type:Zt.STRING},indicadoresEvaluacion:{type:Zt.STRING},detallesLeccion:{type:Zt.ARRAY,items:{type:Zt.OBJECT,properties:{objetivosAprendizaje:{type:Zt.STRING},contenidosConceptuales:{type:Zt.STRING},habilidadesBloom:{type:Zt.STRING},perfilEgreso:{type:Zt.STRING},actividades:{type:Zt.STRING},asignaturasInterdisciplinariedad:{type:Zt.STRING}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},K=await W.models.generateContent({model:"gemini-2.5-flash",contents:ce,config:{responseMimeType:"application/json",responseSchema:j}}),X=JSON.parse(K.text),te={fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Unidad",asignatura:l.asignatura,nivel:l.nivel,nombreUnidad:l.nombreUnidad,contenidos:l.contenidos,cantidadClases:l.cantidadClases,observaciones:l.observaciones,ideasParaUnidad:l.ideasParaUnidad,objetivosAprendizaje:X.objetivosAprendizaje,indicadoresEvaluacion:X.indicadoresEvaluacion,detallesLeccion:X.detallesLeccion};if(d)await a(d.id,te),h({...te,id:d.id});else{const le=await n(te);h({...te,id:le})}}catch(W){console.error("Error al generar planificación con IA",W),w("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{g(!1)}},F=async(z,W)=>{g(!0),w(null);const ce=`A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${W.asignatura}
    - Nivel: ${W.nivel}
    - Objetivo de la clase: ${z.objetivosAprendizaje}
    - Contenidos: ${z.contenidosConceptuales}
    - Actividades sugeridas: ${z.actividades}
    
    Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{Gl("Planificación - Utilizar Clase");const j=new zl({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),K={type:Zt.OBJECT,properties:{inicio:{type:Zt.STRING},desarrollo:{type:Zt.STRING},cierre:{type:Zt.STRING}},required:["inicio","desarrollo","cierre"]},X=await j.models.generateContent({model:"gemini-2.5-flash",contents:ce,config:{responseMimeType:"application/json",responseSchema:K}}),te=JSON.parse(X.text),le={fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Clase",asignatura:W.asignatura,nivel:W.nivel,contenidos:z.contenidosConceptuales,observaciones:"",nombreClase:z.actividades,duracionClase:80,momentosClase:te,detalleLeccionOrigen:z};await n(le),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),N("clase")}catch(j){console.error("Error al generar plan de clase con IA",j),w("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{g(!1)}},L=z=>{z.tipo==="Unidad"&&(A({asignatura:z.asignatura,nivel:z.nivel,nombreUnidad:z.nombreUnidad,contenidos:z.contenidos,cantidadClases:z.cantidadClases,observaciones:z.observaciones,ideasParaUnidad:z.ideasParaUnidad||""}),h(z),window.scrollTo({top:0,behavior:"smooth"}))},Q=async z=>{if(window.confirm("¿Está seguro de que desea eliminar esta planificación?"))try{await s(z),(d==null?void 0:d.id)===z&&(h(null),A(o))}catch(W){console.error("Error al eliminar planificación:",W),alert("Error al eliminar la planificación. Por favor, intente nuevamente.")}},q=(z,W)=>{d&&M({planId:d.id,lessonIndex:z,lessonData:W})},ie=async z=>{if(P)try{const{planId:W,lessonIndex:ce}=P,j=r.find(te=>te.id===W&&te.tipo==="Unidad");if(!j)return;const K=[...j.detallesLeccion];K[ce]=z;const X={...j,detallesLeccion:K};await a(W,X),h(X),M(null)}catch(W){console.error("Error al actualizar lección:",W),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},Z="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",ee=()=>c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsxs("form",{onSubmit:O,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:l.asignatura,onChange:B,className:Z,disabled:m,children:D.length>0?D.map(z=>c.jsx("option",{value:z,children:z},z)):c.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:l.nivel,onChange:B,className:Z,disabled:m,children:C.length>0?C.map(z=>c.jsx("option",{value:z,children:z},z)):c.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"nombreUnidad",value:l.nombreUnidad,onChange:B,className:Z,placeholder:"Ej: La Célula y sus procesos",disabled:m})]}),c.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[c.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenidos",value:l.contenidos,onChange:B,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificación debe abordar.",className:Z,disabled:m})]}),c.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[c.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),c.jsx("textarea",{name:"ideasParaUnidad",value:l.ideasParaUnidad,onChange:B,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:Z,disabled:m})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),c.jsx("input",{type:"number",name:"cantidadClases",value:l.cantidadClases,onChange:B,className:Z,min:"1",max:"20",disabled:m})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),c.jsx("textarea",{name:"observaciones",value:l.observaciones,onChange:B,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:Z,disabled:m})]})]}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:m||i,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[150px] dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:m?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d?"Regenerar":"Generar Plan"})}),b&&c.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:b})]})]}),d&&c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),c.jsx(Tse,{plan:d,onEditLesson:q,onUseLesson:F,isLoading:m})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:"space-y-4",children:r.filter(z=>z.tipo==="Unidad").length>0?r.filter(z=>z.tipo==="Unidad").map(z=>c.jsx("div",{className:`p-4 border rounded-lg ${(d==null?void 0:d.id)===z.id?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:z.nombreUnidad}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(z.fechaCreacion).toLocaleString("es-CL")]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",z.contenidos]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>L(z),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm disabled:opacity-50",disabled:m,children:"Ver y Editar"}),c.jsx("button",{onClick:()=>Q(z.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 disabled:opacity-50",disabled:m,children:"🗑️"})]})]})},z.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),ne=()=>{const z=r.filter(W=>W.tipo==="Clase").sort((W,ce)=>new Date(ce.fechaCreacion).getTime()-new Date(W.fechaCreacion).getTime());return k?c.jsx(Bse,{plan:k,onBack:()=>I(null),onSave:async W=>{try{await a(W.id,W),I(W)}catch(ce){console.error("Error al actualizar plan de clase:",ce),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:m}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Planes de Clase Guardados"}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:"space-y-4",children:z.length>0?z.map(W=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:W.nombreClase}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(W.fechaCreacion).toLocaleString("es-CL")]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",W.contenidos]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:()=>I(W),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},W.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return!t||!t.email&&!t.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>N("unidad"),className:`${_==="unidad"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Unidad"}),c.jsx("button",{onClick:()=>N("clase"),className:`${_==="clase"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Clase"}),c.jsx("button",{onClick:()=>N("calendario"),className:`${_==="calendario"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Actividades Calendario"})]})}),_==="unidad"&&ee(),_==="clase"&&ne(),_==="calendario"&&c.jsx(Nse,{userId:e}),P&&c.jsx(Sse,{lesson:P.lessonData,onClose:()=>M(null),onSave:ie,isLoading:m})]})},bw="events",Ise=async()=>{try{const t=an(Ar(wn,bw),ya("date","asc"));return(await So(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener eventos:",t),new Error("No se pudieron cargar los eventos del calendario")}},Fse=async t=>{try{return{id:(await eo(Ar(wn,bw),{...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear evento:",e),new Error("No se pudo crear el evento del calendario")}},Rse=async(t,e)=>{try{const r=hn(wn,bw,t);await Km(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",t),new Error("No se pudo actualizar el evento del calendario")}},Dse=async t=>{try{const e=hn(wn,bw,t);await Bo(e)}catch(e){throw console.error("Error al eliminar evento:",e,"ID:",t),new Error("No se pudo eliminar el evento del calendario")}},Lse=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],Use=t=>{switch(t.type){case qr.EVALUACION:return`${t.subtype} - ${t.asignatura}`;case qr.ACTO:return`Acto: ${t.ubicacion}`;case qr.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case qr.SALIDA_PEDAGOGICA:return`Salida: ${t.ubicacion}`;default:return"Evento"}},Mse=({isOpen:t,onClose:e,onSave:r,onDelete:n,event:a,date:s,isLoading:i})=>{const[o,l]=J.useState({});J.useEffect(()=>{l(a||{type:qr.EVALUACION,subtype:th.PRUEBA_PARCIAL,asignatura:rl[0],curso:ss[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a,t]);const A="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",d=w=>{const{name:_,value:N}=w.target;l(k=>({...k,[_]:N}))},h=w=>{l(_=>{if(_.type===qr.SALIDA_PEDAGOGICA){const N=_.cursos||[],k=N.includes(w)?N.filter(I=>I!==w):[...N,w];return{..._,cursos:k.sort()}}return _})},m=w=>{var N;w.preventDefault();let _;switch(o.type){case qr.EVALUACION:const k={date:s,type:qr.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos};(o.subtype===th.RUBRICA||o.subtype===th.PAUTA_COTEJO)&&((N=o.enlace)!=null&&N.trim())&&(k.enlace=o.enlace.trim()),_=k;break;case qr.ACTO:_={date:s,type:qr.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case qr.ACTIVIDAD_FOCALIZADA:_={date:s,type:qr.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case qr.SALIDA_PEDAGOGICA:_={date:s,type:qr.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(_)};if(!t)return null;const g=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),b=()=>{switch(o.type){case qr.EVALUACION:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subtipo"}),c.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:d,required:!0,className:A,children:N$.map(w=>c.jsx("option",{value:w,children:w},w))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:d,required:!0,className:A,children:rl.map(w=>c.jsx("option",{value:w,children:w},w))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:d,required:!0,className:A,children:ss.map(w=>c.jsx("option",{value:w,children:w},w))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenidos"}),c.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos||"",onChange:d,required:!0,rows:3,className:A})]}),(o.subtype===th.RUBRICA||o.subtype===th.PAUTA_COTEJO)&&c.jsxs("div",{children:[c.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),c.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace||"",onChange:d,placeholder:"https://...",className:A})]})]});case qr.ACTO:case qr.ACTIVIDAD_FOCALIZADA:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsables"}),c.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables||"",onChange:d,required:!0,className:A})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación"}),c.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:A})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Horario"}),c.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario||"",onChange:d,required:!0,className:A})]})]});case qr.SALIDA_PEDAGOGICA:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),c.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable||"",onChange:d,required:!0,className:A})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),c.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:A})]}),c.jsxs("fieldset",{children:[c.jsx("legend",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),c.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border p-2 rounded-md dark:border-slate-600 text-slate-700 dark:text-slate-300",children:ss.map(w=>c.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[c.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(w),onChange:()=>h(w),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{children:w})]},w))})]})]});default:return null}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:e,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg animate-fade-in-up",onClick:w=>w.stopPropagation(),children:c.jsxs("form",{onSubmit:m,children:[c.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:a?"Editar Evento":"Agregar Evento"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6 font-semibold",children:g}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),c.jsx("select",{id:"type",name:"type",value:o.type,onChange:d,className:A,children:Object.values(qr).map(w=>c.jsx("option",{value:w,children:w},w))})]}),b()]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 px-6 py-4 rounded-b-xl flex justify-between items-center",children:[c.jsx("div",{children:a&&n&&c.jsx("button",{type:"button",onClick:n,disabled:i,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:i?"Eliminando...":"Eliminar"})}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{type:"button",onClick:e,disabled:i,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 disabled:opacity-50",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:i,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50",children:i?"Guardando...":"Guardar"})]})]})]})})})},Pse=({profile:t})=>{const[e,r]=J.useState(new Date),[n,a]=J.useState([]),[s,i]=J.useState(!1),[o,l]=J.useState(null),[A,d]=J.useState(!1),[h,m]=J.useState(Object.values(qr)),[g,b]=J.useState(!1),[w,_]=J.useState(null),[N,k]=J.useState(null),I=J.useCallback(async()=>{i(!0);try{const F=await Ise();a(F),l(null)}catch(F){console.error("Error al cargar eventos desde Firestore",F),l("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);J.useEffect(()=>{I()},[I]);const P=J.useMemo(()=>{const F=e.getFullYear(),L=e.getMonth(),Q=new Date(F,L,1).getDay(),q=new Date(F,L+1,0).getDate(),ie=[];let Z=1;for(let ee=0;ee<6;ee++){const ne=[];for(let z=0;z<7;z++)ee===0&&z<Q||Z>q?ne.push(null):(ne.push(new Date(F,L,Z)),Z++);if(ie.push(ne),Z>q)break}return ie},[e]),M=F=>{m(L=>L.includes(F)?L.filter(Q=>Q!==F):[...L,F])},D=()=>{h.length===Object.values(qr).length?m([]):m(Object.values(qr))},C=F=>{t!==er.ESTUDIANTE&&(_(F.toISOString().split("T")[0]),k(null),b(!0))},B=(F,L)=>{L.stopPropagation(),t!==er.ESTUDIANTE&&(_(F.date),k(F),b(!0))},T=async F=>{d(!0);try{N?await Rse(N.id,F):await Fse(F),await I(),b(!1)}catch(L){console.error("Error al guardar evento:",L);const Q=L instanceof Error?L.message:"Error desconocido";l(`Error al guardar el evento: ${Q}`)}finally{d(!1)}},O=async()=>{if(N){d(!0);try{await Dse(N.id),await I(),b(!1)}catch(F){console.error("Error al eliminar evento:",F);const L=F instanceof Error?F.message:"Error desconocido";l(`No se pudo eliminar el evento: ${L}`)}finally{d(!1)}}};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Calendario Académico"}),s&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando eventos desde la nube..."}),o&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:o}),!s&&n.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay eventos registrados en la nube."}),c.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsx("p",{className:"text-sm",children:"Recuerda que el calendario escolar completo se encuentra disponible en la intranet. Este calendario es de exclusivo uso evaluativo y académico."})})]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Filtrar por tipo de evento:"}),c.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[c.jsx("button",{onClick:D,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-slate-700 text-white hover:bg-slate-600 dark:bg-slate-600 dark:hover:bg-slate-500 transition-colors",children:h.length===Object.values(qr).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(qr).map(F=>c.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2 ${h.includes(F)?`shadow-sm ${Od[F].color}`:"bg-slate-100 text-slate-600 hover:bg-slate-200 opacity-70 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600 dark:opacity-60"}`,children:[c.jsx("input",{type:"checkbox",checked:h.includes(F),onChange:()=>M(F),className:"hidden"}),c.jsx("span",{children:Od[F].icon}),c.jsx("span",{children:Od[F].label})]},F))]})]}),c.jsxs("div",{className:"border dark:border-slate-700 rounded-lg overflow-hidden",children:[c.jsxs("header",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 border-b dark:border-slate-700",children:[c.jsx("button",{onClick:()=>r(new Date(e.setMonth(e.getMonth()-1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:"<"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize",children:e.toLocaleString("es-CL",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>r(new Date(e.setMonth(e.getMonth()+1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:">"}),c.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-slate-800 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Hoy"})]}),c.jsx("div",{className:"grid grid-cols-7",children:Lse.map(F=>c.jsx("div",{className:"text-center font-semibold text-slate-500 dark:text-slate-400 text-sm py-3 bg-slate-50 dark:bg-slate-700/50 border-b border-r dark:border-slate-700",children:F},F))}),c.jsx("div",{className:"grid grid-cols-7 grid-rows-6",children:P.flat().map((F,L)=>{const Q=F&&F.toDateString()===new Date().toDateString(),q=F==null?void 0:F.toISOString().split("T")[0],ie=q?n.filter(Z=>Z.date===q&&h.includes(Z.type)):[];return c.jsx("div",{onClick:()=>F&&C(F),className:`border-b border-r dark:border-slate-700 p-2 h-36 flex flex-col overflow-hidden relative group ${F?t!==er.ESTUDIANTE?"cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50":"":"bg-slate-50 dark:bg-slate-800/50"}`,children:F&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:`self-end text-sm font-semibold ${Q?"bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-600 dark:text-slate-300"}`,children:F.getDate()}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:ie.map(Z=>c.jsxs("div",{onClick:ee=>B(Z,ee),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${Od[Z.type].color}`,children:[c.jsx("span",{children:Od[Z.type].icon}),c.jsx("span",{className:"truncate",children:Use(Z)})]},Z.id))}),t!==er.ESTUDIANTE&&c.jsx("button",{className:"absolute bottom-1 right-1 bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-lg font-bold",children:"+"})]})},L)})})]}),g&&c.jsx(Mse,{isOpen:g,onClose:()=>b(!1),onSave:T,onDelete:O,event:N,date:w,isLoading:A})]})},Cw="anuncios",jse=async()=>{try{const t=an(Ar(wn,Cw),ya("fechaPublicacion","desc"));return(await So(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener anuncios:",t),new Error("No se pudieron cargar los anuncios")}},Ose=async t=>{try{return{id:(await eo(Ar(wn,Cw),{...t,fechaPublicacion:t.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear anuncio:",e),new Error("No se pudo crear el anuncio")}},Qse=async(t,e)=>{try{const r=hn(wn,Cw,t);await Km(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",t),new Error("No se pudo actualizar el anuncio")}},Hse=async t=>{try{const e=hn(wn,Cw,t);await Bo(e)}catch(e){throw console.error("Error al eliminar anuncio:",e,"ID:",t),new Error("No se pudo eliminar el anuncio")}},GI=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],Vse=({currentUser:t})=>{const[e,r]=J.useState([]),[n,a]=J.useState(!1),[s,i]=J.useState(null),[o,l]=J.useState({titulo:"",mensaje:"",adjunto:""}),[A,d]=J.useState({tipo:"Todos",cursos:[]}),h=J.useCallback(async()=>{a(!0);try{const C=await jse();r(C),i(null)}catch(C){console.error("Error al cargar anuncios desde Firestore",C),i("No se pudieron cargar los anuncios desde la nube.")}finally{a(!1)}},[]);J.useEffect(()=>{h()},[h]);const m=C=>{const{name:B,value:T}=C.target;l(O=>({...O,[B]:T}))},g=C=>{d({tipo:C,cursos:C==="Cursos"?[]:void 0})},b=C=>{d(B=>{var O;if(B.tipo!=="Cursos")return B;const T=(O=B.cursos)!=null&&O.includes(C)?B.cursos.filter(F=>F!==C):[...B.cursos||[],C];return{...B,cursos:T}})},w=async C=>{if(C.preventDefault(),!o.titulo||!o.mensaje){alert("Título y mensaje son obligatorios.");return}if(A.tipo==="Cursos"&&(!A.cursos||A.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const B={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:t.nombreCompleto,profileCreador:t.profile,destinatarios:A,...o};await Ose(B),await h(),l({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(B){console.error("Error al crear anuncio:",B),i("Error al publicar el anuncio en la nube.")}},_=async C=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await Hse(C),await h()}catch(B){console.error("Error al eliminar anuncio:",B),i("No se pudo eliminar el anuncio en la nube.")}},N=async C=>{try{const B=e.find(T=>T.id===C);B&&(await Qse(C,{destacado:!B.destacado}),await h())}catch(B){console.error("Error al actualizar anuncio:",B),i("No se pudo actualizar el estado del anuncio en la nube.")}},k=J.useMemo(()=>[...e].sort((C,B)=>C.destacado&&!B.destacado?-1:!C.destacado&&B.destacado?1:new Date(B.fechaPublicacion).getTime()-new Date(C.fechaPublicacion).getTime()),[e]),I=J.useMemo(()=>{const C=t.profile,B=t.curso;return k.filter(T=>{if(C===er.SUBDIRECCION)return!0;if(!T.destinatarios)return C!==er.ESTUDIANTE;const{tipo:O,cursos:F}=T.destinatarios;return O==="Todos"||O==="Profesores"&&C===er.PROFESORADO||O==="Coordinación TP"&&C===er.COORDINACION_TP?!0:O==="Cursos"?C===er.ESTUDIANTE?F==null?void 0:F.includes(B||""):!0:!1})},[k,t]),P=C=>t.profile===er.ESTUDIANTE?!1:t.profile===er.SUBDIRECCION||t.profile===C.profileCreador,M=()=>t.profile===er.SUBDIRECCION||t.profile===er.PROFESORADO,D="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),t.profile!==er.ESTUDIANTE?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),c.jsxs("form",{onSubmit:w,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),c.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:m,required:!0,className:D})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),c.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:m,required:!0,rows:4,className:D})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),c.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(C=>c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"destinatarioTipo",value:C,checked:A.tipo===C,onChange:()=>g(C),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),c.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:C.replace("Coordinación TP","Coord. TP")})]},C))})]}),A.tipo==="Cursos"&&c.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:ss.map(C=>{var B;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(B=A.cursos)==null?void 0:B.includes(C),onChange:()=>b(C),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:C})]},C)})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),c.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:m,placeholder:"https://ejemplo.com/documento.pdf",className:D})]}),c.jsx("div",{className:"pt-2 text-right",children:c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!n&&I.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&I.length>0&&I.map((C,B)=>{const T=GI[B%GI.length];return c.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${T.bg} ${T.rotate}`,children:[C.destacado&&c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:c.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),c.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:C.titulo}),c.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:C.mensaje}),C.adjunto&&c.jsx("div",{className:"font-sans text-sm mb-4",children:c.jsxs("a",{href:C.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),c.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold",children:C.autor}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(C.fechaPublicacion).toLocaleString("es-CL")})]}),c.jsxs("div",{className:"flex items-center",children:[M()&&c.jsx("button",{onClick:()=>N(C.id),title:C.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:c.jsx("span",{className:`text-xl transition-opacity ${C.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),P(C)&&c.jsx("button",{onClick:()=>_(C.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},C.id)})})]})},UC="actasDeReunion",iM=window.SpeechRecognition||window.webkitSpeechRecognition,qI=!!iM,zse=({isListening:t})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),Gse=()=>{const[t,e]=J.useState([]),[r,n]=J.useState(null),[a,s]=J.useState({tipoReunion:FC[0],asistentes:"",textoReunion:""}),[i,o]=J.useState(!1),[l,A]=J.useState(!1),[d,h]=J.useState(null),m=J.useRef(null);J.useEffect(()=>{try{const P=localStorage.getItem(UC);if(P){const M=JSON.parse(P);e(M),M.length>0&&!r&&n(M[0])}}catch(P){console.error("Error al leer actas de localStorage",P)}},[r]);const g=P=>{const{name:M,value:D}=P.target;s(C=>({...C,[M]:D}))},b=J.useCallback(()=>{var P;if(!qI){h("El reconocimiento de voz no es compatible con este navegador.");return}i?(P=m.current)==null||P.stop():(m.current=new iM,m.current.lang="es-CL",m.current.continuous=!0,m.current.interimResults=!0,m.current.onresult=M=>{let D="";for(let C=M.resultIndex;C<M.results.length;++C)M.results[C].isFinal&&(D+=M.results[C][0].transcript+". ");s(C=>({...C,textoReunion:C.textoReunion+D}))},m.current.onstart=()=>o(!0),m.current.onend=()=>o(!1),m.current.onerror=M=>{console.error("Speech recognition error",M.error),h(`Error de reconocimiento: ${M.error}`),o(!1)},m.current.start())},[i]),w=async P=>{P.preventDefault();const{tipoReunion:M,asistentes:D,textoReunion:C}=a;if(!M||!D.trim()||!C.trim()){h("Todos los campos son obligatorios.");return}A(!0),h(null);try{Gl("Generador de Actas");const B=new zl({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),T=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${C}"
                
                Asistentes a la reunión para referencia de nombres: ${D}
            `,O={type:Zt.OBJECT,properties:{temas:{type:Zt.ARRAY,description:"Lista de los principales temas tratados en la reunión.",items:{type:Zt.STRING}},acuerdos:{type:Zt.ARRAY,description:"Lista de los acuerdos o decisiones tomadas.",items:{type:Zt.STRING}},plazos:{type:Zt.ARRAY,description:"Lista de fechas límite o plazos mencionados en el texto.",items:{type:Zt.STRING}},responsables:{type:Zt.ARRAY,description:"Lista de las personas asignadas como responsables de tareas.",items:{type:Zt.STRING}}},required:["temas","acuerdos","plazos","responsables"]},F=await B.models.generateContent({model:"gemini-2.5-flash",contents:T,config:{responseMimeType:"application/json",responseSchema:O}}),L=JSON.parse(F.text),Q={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),...a,...L},q=[Q,...t];e(q),localStorage.setItem(UC,JSON.stringify(q)),s({tipoReunion:FC[0],asistentes:"",textoReunion:""}),n(Q)}catch(B){console.error("Error al analizar acta con IA:",B),h("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{A(!1)}},_=P=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?")){const M=t.filter(D=>D.id!==P);e(M),localStorage.setItem(UC,JSON.stringify(M)),(r==null?void 0:r.id)===P&&n(M.length>0?M[0]:null)}},N=P=>{n(P)},k=P=>P.temas||P.acuerdos||P.plazos||P.responsables?c.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),P.temas&&P.temas.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:P.temas.map((D,C)=>c.jsx("li",{children:D},C))})]}),P.acuerdos&&P.acuerdos.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:P.acuerdos.map((D,C)=>c.jsx("li",{children:D},C))})]}),P.plazos&&P.plazos.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:P.plazos.map((D,C)=>c.jsx("li",{children:D},C))})]}),P.responsables&&P.responsables.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:P.responsables.map((D,C)=>c.jsx("li",{children:D},C))})]})]}):null,I="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[c.jsxs("div",{className:"md:col-span-1 space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),c.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",c.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),c.jsxs("form",{onSubmit:w,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),c.jsx("select",{name:"tipoReunion",value:a.tipoReunion,onChange:g,required:!0,className:I,children:FC.map(P=>c.jsx("option",{value:P,children:P},P))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),c.jsx("textarea",{name:"asistentes",value:a.asistentes,onChange:g,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:I})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{name:"textoReunion",value:a.textoReunion,onChange:g,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:I}),qI&&c.jsx("button",{type:"button",onClick:b,title:i?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${i?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:c.jsx(zse,{isListening:i})})]})]}),d&&c.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:d}),c.jsx("div",{className:"pt-2 text-right",children:c.jsx("button",{type:"submit",disabled:l,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),c.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.sort((P,M)=>new Date(M.fechaCreacion).getTime()-new Date(P.fechaCreacion).getTime()).map(P=>c.jsxs("button",{onClick:()=>N(P),className:`w-full text-left p-3 rounded-lg border transition-colors ${(r==null?void 0:r.id)===P.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:P.tipoReunion}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(P.fechaCreacion).toLocaleDateString("es-CL")})]},P.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),c.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:r?c.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${r.tipoReunion}`}),c.jsx("button",{onClick:()=>_(r.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[c.jsx("strong",{children:"Fecha:"})," ",new Date(r.fechaCreacion).toLocaleString("es-CL")]}),c.jsx("h2",{children:"Asistentes"}),c.jsx("ul",{className:"list-disc pl-5",children:String(r.asistentes||"").split(",").map((P,M)=>P.trim()&&c.jsx("li",{children:P.trim()},M))}),k(r),c.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:c.jsx("p",{children:r.textoReunion})})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[c.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})},qse="modulepreload",Kse=function(t){return"/"+t},KI={},M_=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){let i=function(A){return Promise.all(A.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=i(r.map(A=>{if(A=Kse(A),A in KI)return;KI[A]=!0;const d=A.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":qse,d||(m.as="script"),m.crossOrigin="",m.href=A,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((g,b)=>{m.addEventListener("load",g),m.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${A}`)))})}))}function s(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return a.then(i=>{for(const o of i||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function Vn(t){"@babel/helpers - typeof";return Vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vn(t)}var Pi=Uint8Array,el=Uint16Array,n4=Int32Array,Ew=new Pi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_w=new Pi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),P_=new Pi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),oM=function(t,e){for(var r=new el(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var a=new n4(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},lM=oM(Ew,2),cM=lM.b,j_=lM.r;cM[28]=258,j_[258]=28;var uM=oM(_w,0),Wse=uM.b,WI=uM.r,O_=new el(32768);for(var Aa=0;Aa<32768;++Aa){var Sd=(Aa&43690)>>1|(Aa&21845)<<1;Sd=(Sd&52428)>>2|(Sd&13107)<<2,Sd=(Sd&61680)>>4|(Sd&3855)<<4,O_[Aa]=((Sd&65280)>>8|(Sd&255)<<8)>>1}var Nu=function(t,e,r){for(var n=t.length,a=0,s=new el(e);a<n;++a)t[a]&&++s[t[a]-1];var i=new el(e);for(a=1;a<e;++a)i[a]=i[a-1]+s[a-1]<<1;var o;if(r){o=new el(1<<e);var l=15-e;for(a=0;a<n;++a)if(t[a])for(var A=a<<4|t[a],d=e-t[a],h=i[t[a]-1]++<<d,m=h|(1<<d)-1;h<=m;++h)o[O_[h]>>l]=A}else for(o=new el(n),a=0;a<n;++a)t[a]&&(o[a]=O_[i[t[a]-1]++]>>15-t[a]);return o},hf=new Pi(288);for(var Aa=0;Aa<144;++Aa)hf[Aa]=8;for(var Aa=144;Aa<256;++Aa)hf[Aa]=9;for(var Aa=256;Aa<280;++Aa)hf[Aa]=7;for(var Aa=280;Aa<288;++Aa)hf[Aa]=8;var ax=new Pi(32);for(var Aa=0;Aa<32;++Aa)ax[Aa]=5;var $se=Nu(hf,9,0),Yse=Nu(hf,9,1),Xse=Nu(ax,5,0),Jse=Nu(ax,5,1),MC=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},gc=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},PC=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},a4=function(t){return(t+7)/8|0},AM=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new Pi(t.subarray(e,r))},Zse=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],wc=function(t,e,r){var n=new Error(e||Zse[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,wc),!r)throw n;return n},eie=function(t,e,r,n){var a=t.length,s=0;if(!a||e.f&&!e.l)return r||new Pi(0);var i=!r,o=i||e.i!=2,l=e.i;i&&(r=new Pi(a*3));var A=function(xe){var ae=r.length;if(xe>ae){var Fe=new Pi(Math.max(ae*2,xe));Fe.set(r),r=Fe}},d=e.f||0,h=e.p||0,m=e.b||0,g=e.l,b=e.d,w=e.m,_=e.n,N=a*8;do{if(!g){d=gc(t,h,1);var k=gc(t,h+1,3);if(h+=3,k)if(k==1)g=Yse,b=Jse,w=9,_=5;else if(k==2){var D=gc(t,h,31)+257,C=gc(t,h+10,15)+4,B=D+gc(t,h+5,31)+1;h+=14;for(var T=new Pi(B),O=new Pi(19),F=0;F<C;++F)O[P_[F]]=gc(t,h+F*3,7);h+=C*3;for(var L=MC(O),Q=(1<<L)-1,q=Nu(O,L,1),F=0;F<B;){var ie=q[gc(t,h,Q)];h+=ie&15;var I=ie>>4;if(I<16)T[F++]=I;else{var Z=0,ee=0;for(I==16?(ee=3+gc(t,h,3),h+=2,Z=T[F-1]):I==17?(ee=3+gc(t,h,7),h+=3):I==18&&(ee=11+gc(t,h,127),h+=7);ee--;)T[F++]=Z}}var ne=T.subarray(0,D),z=T.subarray(D);w=MC(ne),_=MC(z),g=Nu(ne,w,1),b=Nu(z,_,1)}else wc(1);else{var I=a4(h)+4,P=t[I-4]|t[I-3]<<8,M=I+P;if(M>a){l&&wc(0);break}o&&A(m+P),r.set(t.subarray(I,M),m),e.b=m+=P,e.p=h=M*8,e.f=d;continue}if(h>N){l&&wc(0);break}}o&&A(m+131072);for(var W=(1<<w)-1,ce=(1<<_)-1,j=h;;j=h){var Z=g[PC(t,h)&W],K=Z>>4;if(h+=Z&15,h>N){l&&wc(0);break}if(Z||wc(2),K<256)r[m++]=K;else if(K==256){j=h,g=null;break}else{var X=K-254;if(K>264){var F=K-257,te=Ew[F];X=gc(t,h,(1<<te)-1)+cM[F],h+=te}var le=b[PC(t,h)&ce],de=le>>4;le||wc(3),h+=le&15;var z=Wse[de];if(de>3){var te=_w[de];z+=PC(t,h)&(1<<te)-1,h+=te}if(h>N){l&&wc(0);break}o&&A(m+131072);var me=m+X;if(m<z){var ge=s-z,Se=Math.min(z,me);for(ge+m<0&&wc(3);m<Se;++m)r[m]=n[ge+m]}for(;m<me;++m)r[m]=r[m-z]}}e.l=g,e.p=j,e.b=m,e.f=d,g&&(d=1,e.m=w,e.d=b,e.n=_)}while(!d);return m!=r.length&&i?AM(r,0,m):r.subarray(0,m)},fA=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},qp=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},jC=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,s=r.slice();if(!a)return{t:fM,l:0};if(a==1){var i=new Pi(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(M,D){return M.f-D.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],A=0,d=1,h=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=a-1;)o=r[r[A].f<r[h].f?A++:h++],l=r[A!=d&&r[A].f<r[h].f?A++:h++],r[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var m=s[0].s,n=1;n<a;++n)s[n].s>m&&(m=s[n].s);var g=new el(m+1),b=Q_(r[d-1],g,0);if(b>e){var n=0,w=0,_=b-e,N=1<<_;for(s.sort(function(D,C){return g[C.s]-g[D.s]||D.f-C.f});n<a;++n){var k=s[n].s;if(g[k]>e)w+=N-(1<<b-g[k]),g[k]=e;else break}for(w>>=_;w>0;){var I=s[n].s;g[I]<e?w-=1<<e-g[I]++-1:++n}for(;n>=0&&w;--n){var P=s[n].s;g[P]==e&&(--g[P],++w)}b=e}return{t:new Pi(g),l:b}},Q_=function(t,e,r){return t.s==-1?Math.max(Q_(t.l,e,r+1),Q_(t.r,e,r+1)):e[t.s]=r},$I=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new el(++e),n=0,a=t[0],s=1,i=function(l){r[n++]=l},o=1;o<=e;++o)if(t[o]==a&&o!=e)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=t[o]}return{c:r.subarray(0,n),n:e}},Kp=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},dM=function(t,e,r){var n=r.length,a=a4(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var s=0;s<n;++s)t[a+s+4]=r[s];return(a+4+n)*8},YI=function(t,e,r,n,a,s,i,o,l,A,d){fA(e,d++,r),++a[256];for(var h=jC(a,15),m=h.t,g=h.l,b=jC(s,15),w=b.t,_=b.l,N=$I(m),k=N.c,I=N.n,P=$I(w),M=P.c,D=P.n,C=new el(19),B=0;B<k.length;++B)++C[k[B]&31];for(var B=0;B<M.length;++B)++C[M[B]&31];for(var T=jC(C,7),O=T.t,F=T.l,L=19;L>4&&!O[P_[L-1]];--L);var Q=A+5<<3,q=Kp(a,hf)+Kp(s,ax)+i,ie=Kp(a,m)+Kp(s,w)+i+14+3*L+Kp(C,O)+2*C[16]+3*C[17]+7*C[18];if(l>=0&&Q<=q&&Q<=ie)return dM(e,d,t.subarray(l,l+A));var Z,ee,ne,z;if(fA(e,d,1+(ie<q)),d+=2,ie<q){Z=Nu(m,g,0),ee=m,ne=Nu(w,_,0),z=w;var W=Nu(O,F,0);fA(e,d,I-257),fA(e,d+5,D-1),fA(e,d+10,L-4),d+=14;for(var B=0;B<L;++B)fA(e,d+3*B,O[P_[B]]);d+=3*L;for(var ce=[k,M],j=0;j<2;++j)for(var K=ce[j],B=0;B<K.length;++B){var X=K[B]&31;fA(e,d,W[X]),d+=O[X],X>15&&(fA(e,d,K[B]>>5&127),d+=K[B]>>12)}}else Z=$se,ee=hf,ne=Xse,z=ax;for(var B=0;B<o;++B){var te=n[B];if(te>255){var X=te>>18&31;qp(e,d,Z[X+257]),d+=ee[X+257],X>7&&(fA(e,d,te>>23&31),d+=Ew[X]);var le=te&31;qp(e,d,ne[le]),d+=z[le],le>3&&(qp(e,d,te>>5&8191),d+=_w[le])}else qp(e,d,Z[te]),d+=ee[te]}return qp(e,d,Z[256]),d+ee[256]},tie=new n4([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),fM=new Pi(0),rie=function(t,e,r,n,a,s){var i=s.z||t.length,o=new Pi(n+i+5*(1+Math.ceil(i/7e3))+a),l=o.subarray(n,o.length-a),A=s.l,d=(s.r||0)&7;if(e){d&&(l[0]=s.r>>3);for(var h=tie[e-1],m=h>>13,g=h&8191,b=(1<<r)-1,w=s.p||new el(32768),_=s.h||new el(b+1),N=Math.ceil(r/3),k=2*N,I=function(Xe){return(t[Xe]^t[Xe+1]<<N^t[Xe+2]<<k)&b},P=new n4(25e3),M=new el(288),D=new el(32),C=0,B=0,T=s.i||0,O=0,F=s.w||0,L=0;T+2<i;++T){var Q=I(T),q=T&32767,ie=_[Q];if(w[q]=ie,_[Q]=q,F<=T){var Z=i-T;if((C>7e3||O>24576)&&(Z>423||!A)){d=YI(t,l,0,P,M,D,B,O,L,T-L,d),O=C=B=0,L=T;for(var ee=0;ee<286;++ee)M[ee]=0;for(var ee=0;ee<30;++ee)D[ee]=0}var ne=2,z=0,W=g,ce=q-ie&32767;if(Z>2&&Q==I(T-ce))for(var j=Math.min(m,Z)-1,K=Math.min(32767,T),X=Math.min(258,Z);ce<=K&&--W&&q!=ie;){if(t[T+ne]==t[T+ne-ce]){for(var te=0;te<X&&t[T+te]==t[T+te-ce];++te);if(te>ne){if(ne=te,z=ce,te>j)break;for(var le=Math.min(ce,te-2),de=0,ee=0;ee<le;++ee){var me=T-ce+ee&32767,ge=w[me],Se=me-ge&32767;Se>de&&(de=Se,ie=me)}}}q=ie,ie=w[q],ce+=q-ie&32767}if(z){P[O++]=268435456|j_[ne]<<18|WI[z];var xe=j_[ne]&31,ae=WI[z]&31;B+=Ew[xe]+_w[ae],++M[257+xe],++D[ae],F=T+ne,++C}else P[O++]=t[T],++M[t[T]]}}for(T=Math.max(T,F);T<i;++T)P[O++]=t[T],++M[t[T]];d=YI(t,l,A,P,M,D,B,O,L,T-L,d),A||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=_,s.p=w,s.i=T,s.w=F)}else{for(var T=s.w||0;T<i+A;T+=65535){var Fe=T+65535;Fe>=i&&(l[d/8|0]=A,Fe=i),d=dM(l,d+1,t.subarray(T,Fe))}s.i=i}return AM(o,0,n+a4(d)+a)},hM=function(){var t=1,e=0;return{p:function(r){for(var n=t,a=e,s=r.length|0,i=0;i!=s;){for(var o=Math.min(i+2655,s);i<o;++i)a+=n+=r[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},nie=function(t,e,r,n,a){if(!a&&(a={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),i=new Pi(s.length+t.length);i.set(s),i.set(t,s.length),t=i,a.w=s.length}return rie(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,a)},mM=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},aie=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=hM();a.p(e.dictionary),mM(t,2,a.d())}},sie=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&wc(6,"invalid zlib data"),(t[1]>>5&1)==1&&wc(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function H_(t,e){e||(e={});var r=hM();r.p(t);var n=nie(t,e,e.dictionary?6:2,4);return aie(n,e),mM(n,n.length-4,r.d()),n}function iie(t,e){return eie(t.subarray(sie(t),-4),{i:2},e,e)}var oie=typeof TextDecoder<"u"&&new TextDecoder,lie=0;try{oie.decode(fM,{stream:!0}),lie=1}catch{}var wr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function OC(){wr.console&&typeof wr.console.log=="function"&&wr.console.log.apply(wr.console,arguments)}var ra={log:OC,warn:function(t){wr.console&&(typeof wr.console.warn=="function"?wr.console.warn.apply(wr.console,arguments):OC.call(null,arguments))},error:function(t){wr.console&&(typeof wr.console.error=="function"?wr.console.error.apply(wr.console,arguments):OC(t))}};function QC(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){Zf(n.response,e,r)},n.onerror=function(){ra.error("could not download file")},n.send()}function XI(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Av(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Rg,V_,Zf=wr.saveAs||((typeof window>"u"?"undefined":Vn(window))!=="object"||window!==wr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=wr.URL||wr.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?XI(a.href)?QC(t,e,r):Av(a,a.target="_blank"):Av(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){Av(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(XI(t))QC(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){Av(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:Vn(s)!=="object"&&(ra.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return QC(t,e,r);var a=t.type==="application/octet-stream",s=/constructor/i.test(wr.HTMLElement)||wr.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":Vn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(t)}else{var l=wr.URL||wr.webkitURL,A=l.createObjectURL(t);n?n.location=A:location.href=A,n=null,setTimeout(function(){l.revokeObjectURL(A)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function pM(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(t);i&&(e=s(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),A=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),A.length==1&&(A="0"+A),"#"+o+l+A}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function HC(t,e){var r=t[0],n=t[1],a=t[2],s=t[3];r=Si(r,n,a,s,e[0],7,-680876936),s=Si(s,r,n,a,e[1],12,-389564586),a=Si(a,s,r,n,e[2],17,606105819),n=Si(n,a,s,r,e[3],22,-1044525330),r=Si(r,n,a,s,e[4],7,-176418897),s=Si(s,r,n,a,e[5],12,1200080426),a=Si(a,s,r,n,e[6],17,-1473231341),n=Si(n,a,s,r,e[7],22,-45705983),r=Si(r,n,a,s,e[8],7,1770035416),s=Si(s,r,n,a,e[9],12,-1958414417),a=Si(a,s,r,n,e[10],17,-42063),n=Si(n,a,s,r,e[11],22,-1990404162),r=Si(r,n,a,s,e[12],7,1804603682),s=Si(s,r,n,a,e[13],12,-40341101),a=Si(a,s,r,n,e[14],17,-1502002290),r=Ti(r,n=Si(n,a,s,r,e[15],22,1236535329),a,s,e[1],5,-165796510),s=Ti(s,r,n,a,e[6],9,-1069501632),a=Ti(a,s,r,n,e[11],14,643717713),n=Ti(n,a,s,r,e[0],20,-373897302),r=Ti(r,n,a,s,e[5],5,-701558691),s=Ti(s,r,n,a,e[10],9,38016083),a=Ti(a,s,r,n,e[15],14,-660478335),n=Ti(n,a,s,r,e[4],20,-405537848),r=Ti(r,n,a,s,e[9],5,568446438),s=Ti(s,r,n,a,e[14],9,-1019803690),a=Ti(a,s,r,n,e[3],14,-187363961),n=Ti(n,a,s,r,e[8],20,1163531501),r=Ti(r,n,a,s,e[13],5,-1444681467),s=Ti(s,r,n,a,e[2],9,-51403784),a=Ti(a,s,r,n,e[7],14,1735328473),r=Bi(r,n=Ti(n,a,s,r,e[12],20,-1926607734),a,s,e[5],4,-378558),s=Bi(s,r,n,a,e[8],11,-2022574463),a=Bi(a,s,r,n,e[11],16,1839030562),n=Bi(n,a,s,r,e[14],23,-35309556),r=Bi(r,n,a,s,e[1],4,-1530992060),s=Bi(s,r,n,a,e[4],11,1272893353),a=Bi(a,s,r,n,e[7],16,-155497632),n=Bi(n,a,s,r,e[10],23,-1094730640),r=Bi(r,n,a,s,e[13],4,681279174),s=Bi(s,r,n,a,e[0],11,-358537222),a=Bi(a,s,r,n,e[3],16,-722521979),n=Bi(n,a,s,r,e[6],23,76029189),r=Bi(r,n,a,s,e[9],4,-640364487),s=Bi(s,r,n,a,e[12],11,-421815835),a=Bi(a,s,r,n,e[15],16,530742520),r=Ni(r,n=Bi(n,a,s,r,e[2],23,-995338651),a,s,e[0],6,-198630844),s=Ni(s,r,n,a,e[7],10,1126891415),a=Ni(a,s,r,n,e[14],15,-1416354905),n=Ni(n,a,s,r,e[5],21,-57434055),r=Ni(r,n,a,s,e[12],6,1700485571),s=Ni(s,r,n,a,e[3],10,-1894986606),a=Ni(a,s,r,n,e[10],15,-1051523),n=Ni(n,a,s,r,e[1],21,-2054922799),r=Ni(r,n,a,s,e[8],6,1873313359),s=Ni(s,r,n,a,e[15],10,-30611744),a=Ni(a,s,r,n,e[6],15,-1560198380),n=Ni(n,a,s,r,e[13],21,1309151649),r=Ni(r,n,a,s,e[4],6,-145523070),s=Ni(s,r,n,a,e[11],10,-1120210379),a=Ni(a,s,r,n,e[2],15,718787259),n=Ni(n,a,s,r,e[9],21,-343485551),t[0]=Vd(r,t[0]),t[1]=Vd(n,t[1]),t[2]=Vd(a,t[2]),t[3]=Vd(s,t[3])}function Sw(t,e,r,n,a,s){return e=Vd(Vd(e,t),Vd(n,s)),Vd(e<<a|e>>>32-a,r)}function Si(t,e,r,n,a,s,i){return Sw(e&r|~e&n,t,e,a,s,i)}function Ti(t,e,r,n,a,s,i){return Sw(e&n|r&~n,t,e,a,s,i)}function Bi(t,e,r,n,a,s,i){return Sw(e^r^n,t,e,a,s,i)}function Ni(t,e,r,n,a,s,i){return Sw(r^(e|~n),t,e,a,s,i)}function gM(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)HC(n,cie(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(HC(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*r,HC(n,a),n}function cie(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}Rg=wr.atob.bind(wr),V_=wr.btoa.bind(wr);var JI="0123456789abcdef".split("");function uie(t){for(var e="",r=0;r<4;r++)e+=JI[t>>8*r+4&15]+JI[t>>8*r&15];return e}function Aie(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function z_(t){return gM(t).map(Aie).join("")}var die=function(t){for(var e=0;e<t.length;e++)t[e]=uie(t[e]);return t.join("")}(gM("hello"))!="5d41402abc4b2a76b9719d911017c592";function Vd(t,e){if(die){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function G_(t,e){var r,n,a,s;if(t!==r){for(var i=(a=t,s=1+(256/t.length>>0),new Array(s+1).join(a)),o=[],l=0;l<256;l++)o[l]=l;var A=0;for(l=0;l<256;l++){var d=o[l];A=(A+d+i.charCodeAt(l))%256,o[l]=o[A],o[A]=d}r=t,n=o}else o=n;var h=e.length,m=0,g=0,b="";for(l=0;l<h;l++)g=(g+(d=o[m=(m+1)%256]))%256,o[m]=o[g],o[g]=d,i=o[(o[m]+o[g])%256],b+=String.fromCharCode(e.charCodeAt(l)^i);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var ZI={print:4,modify:8,copy:16,"annot-forms":32};function V0(t,e,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(o){if(ZI.perm!==void 0)throw new Error("Invalid permission: "+o);a+=ZI[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=z_(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=G_(this.encryptionKey,this.padding)}function z0(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?e+="#"+("0"+a.toString(16)).slice(-2):e+=t[n]}return e}function eF(t){if(Vn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in e[r]){var i=e[r][s];try{i[0].apply(t,n)}catch(o){wr.console&&ra.error("jsPDF PubSub Error",o.message,o)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function ry(t){if(!(this instanceof ry))return new ry(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function xM(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function rh(t,e,r,n,a){if(!(this instanceof rh))return new rh(t,e,r,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,xM.call(this,n,a)}function Y0(t,e,r,n,a){if(!(this instanceof Y0))return new Y0(t,e,r,n,a);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,xM.call(this,n,a)}function sr(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],o=1,l=16,A="S",d=null;Vn(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),A=t.defaultPathOperation||"S"),i=t.filters||(s===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,m={},g={internal:{},__private__:{}};g.__private__.PubSub=eF;var b="1.3",w=g.__private__.getPdfVersion=function(){return b};g.__private__.setPdfVersion=function(V){b=V};var _={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return _};var N=g.__private__.getPageFormat=function(V){return _[V]};a=a||"a4";var k={COMPAT:"compat",ADVANCED:"advanced"},I=k.COMPAT;function P(){this.saveGraphicsState(),Ce(new Qt(xt,0,0,-xt,0,js()*xt).toString()+" cm"),this.setFontSize(this.getFontSize()/xt),A="n",I=k.ADVANCED}function M(){this.restoreGraphicsState(),A="S",I=k.COMPAT}var D=g.__private__.combineFontStyleAndFontWeight=function(V,Ae){if(V=="bold"&&Ae=="normal"||V=="bold"&&Ae==400||V=="normal"&&Ae=="italic"||V=="bold"&&Ae=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ae&&(V=Ae==400||Ae==="normal"?V==="italic"?"italic":"normal":Ae!=700&&Ae!=="bold"||V!=="normal"?(Ae==700?"bold":Ae)+""+V:"bold"),V};g.advancedAPI=function(V){var Ae=I===k.COMPAT;return Ae&&P.call(this),typeof V!="function"||(V(this),Ae&&M.call(this)),this},g.compatAPI=function(V){var Ae=I===k.ADVANCED;return Ae&&M.call(this),typeof V!="function"||(V(this),Ae&&P.call(this)),this},g.isAdvancedAPI=function(){return I===k.ADVANCED};var C,B=function(V){if(I!==k.ADVANCED)throw new Error(V+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},T=g.roundToPrecision=g.__private__.roundToPrecision=function(V,Ae){var Ie=e||Ae;if(isNaN(V)||isNaN(Ie))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return V.toFixed(Ie).replace(/0+$/,"")};C=g.hpf=g.__private__.hpf=typeof l=="number"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return T(V,l)}:l==="smart"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return T(V,V>-1&&V<1?16:5)}:function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return T(V,16)};var O=g.f2=g.__private__.f2=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f2");return T(V,2)},F=g.__private__.f3=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f3");return T(V,3)},L=g.scale=g.__private__.scale=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.scale");return I===k.COMPAT?V*xt:I===k.ADVANCED?V:void 0},Q=function(V){return I===k.COMPAT?js()-V:I===k.ADVANCED?V:void 0},q=function(V){return L(Q(V))};g.__private__.setPrecision=g.setPrecision=function(V){typeof parseInt(V,10)=="number"&&(e=parseInt(V,10))};var ie,Z="00000000000000000000000000000000",ee=g.__private__.getFileId=function(){return Z},ne=g.__private__.setFileId=function(V){return Z=V!==void 0&&/^[a-fA-F0-9]{32}$/.test(V)?V.toUpperCase():Z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Mn=new V0(d.userPermissions,d.userPassword,d.ownerPassword,Z)),Z};g.setFileId=function(V){return ne(V),this},g.getFileId=function(){return ee()};var z=g.__private__.convertDateToPDFDate=function(V){var Ae=V.getTimezoneOffset(),Ie=Ae<0?"+":"-",Le=Math.floor(Math.abs(Ae/60)),He=Math.abs(Ae%60),ot=[Ie,X(Le),"'",X(He),"'"].join("");return["D:",V.getFullYear(),X(V.getMonth()+1),X(V.getDate()),X(V.getHours()),X(V.getMinutes()),X(V.getSeconds()),ot].join("")},W=g.__private__.convertPDFDateToDate=function(V){var Ae=parseInt(V.substr(2,4),10),Ie=parseInt(V.substr(6,2),10)-1,Le=parseInt(V.substr(8,2),10),He=parseInt(V.substr(10,2),10),ot=parseInt(V.substr(12,2),10),_t=parseInt(V.substr(14,2),10);return new Date(Ae,Ie,Le,He,ot,_t,0)},ce=g.__private__.setCreationDate=function(V){var Ae;if(V===void 0&&(V=new Date),V instanceof Date)Ae=z(V);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(V))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ae=V}return ie=Ae},j=g.__private__.getCreationDate=function(V){var Ae=ie;return V==="jsDate"&&(Ae=W(ie)),Ae};g.setCreationDate=function(V){return ce(V),this},g.getCreationDate=function(V){return j(V)};var K,X=g.__private__.padd2=function(V){return("0"+parseInt(V)).slice(-2)},te=g.__private__.padd2Hex=function(V){return("00"+(V=V.toString())).substr(V.length)},le=0,de=[],me=[],ge=0,Se=[],xe=[],ae=!1,Fe=me,Xe=function(){le=0,ge=0,me=[],de=[],Se=[],Ee=Kn(),_e=Kn()};g.__private__.setCustomOutputDestination=function(V){ae=!0,Fe=V};var De=function(V){ae||(Fe=V)};g.__private__.resetCustomOutputDestination=function(){ae=!1,Fe=me};var Ce=g.__private__.out=function(V){return V=V.toString(),ge+=V.length+1,Fe.push(V),Fe},ze=g.__private__.write=function(V){return Ce(arguments.length===1?V.toString():Array.prototype.join.call(arguments," "))},tt=g.__private__.getArrayBuffer=function(V){for(var Ae=V.length,Ie=new ArrayBuffer(Ae),Le=new Uint8Array(Ie);Ae--;)Le[Ae]=V.charCodeAt(Ae);return Ie},it=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return it};var dt=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(V){return dt=I===k.ADVANCED?V/xt:V,this};var Ct,ut=g.__private__.getFontSize=g.getFontSize=function(){return I===k.COMPAT?dt:dt*xt},Nt=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(V){return Nt=V,this},g.__private__.getR2L=g.getR2L=function(){return Nt};var It,Kt=g.__private__.setZoomMode=function(V){var Ae=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(V))Ct=V;else if(isNaN(V)){if(Ae.indexOf(V)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+V+'" is not recognized.');Ct=V}else Ct=parseInt(V,10)};g.__private__.getZoomMode=function(){return Ct};var Ut,Ht=g.__private__.setPageMode=function(V){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(V)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+V+'" is not recognized.');It=V};g.__private__.getPageMode=function(){return It};var Yt=g.__private__.setLayoutMode=function(V){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(V)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+V+'" is not recognized.');Ut=V};g.__private__.getLayoutMode=function(){return Ut},g.__private__.setDisplayMode=g.setDisplayMode=function(V,Ae,Ie){return Kt(V),Yt(Ae),Ht(Ie),this};var Mt={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(V){if(Object.keys(Mt).indexOf(V)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Mt[V]},g.__private__.getDocumentProperties=function(){return Mt},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(V){for(var Ae in Mt)Mt.hasOwnProperty(Ae)&&V[Ae]&&(Mt[Ae]=V[Ae]);return this},g.__private__.setDocumentProperty=function(V,Ae){if(Object.keys(Mt).indexOf(V)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Mt[V]=Ae};var kt,xt,vr,Wt,un,pr={},Rr={},kn=[],Nr={},ls={},en={},ea={},ha=null,Lr=0,tr=[],Qr=new eF(g),cs=t.hotfixes||[],qn={},wa={},Es=[],Qt=function V(Ae,Ie,Le,He,ot,_t){if(!(this instanceof V))return new V(Ae,Ie,Le,He,ot,_t);isNaN(Ae)&&(Ae=1),isNaN(Ie)&&(Ie=0),isNaN(Le)&&(Le=0),isNaN(He)&&(He=1),isNaN(ot)&&(ot=0),isNaN(_t)&&(_t=0),this._matrix=[Ae,Ie,Le,He,ot,_t]};Object.defineProperty(Qt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(Qt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(Qt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(Qt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(Qt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(Qt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(Qt.prototype,"a",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(Qt.prototype,"b",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(Qt.prototype,"c",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(Qt.prototype,"d",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(Qt.prototype,"e",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(Qt.prototype,"f",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(Qt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Qt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Qt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Qt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Qt.prototype.join=function(V){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(V)},Qt.prototype.multiply=function(V){var Ae=V.sx*this.sx+V.shy*this.shx,Ie=V.sx*this.shy+V.shy*this.sy,Le=V.shx*this.sx+V.sy*this.shx,He=V.shx*this.shy+V.sy*this.sy,ot=V.tx*this.sx+V.ty*this.shx+this.tx,_t=V.tx*this.shy+V.ty*this.sy+this.ty;return new Qt(Ae,Ie,Le,He,ot,_t)},Qt.prototype.decompose=function(){var V=this.sx,Ae=this.shy,Ie=this.shx,Le=this.sy,He=this.tx,ot=this.ty,_t=Math.sqrt(V*V+Ae*Ae),jt=(V/=_t)*Ie+(Ae/=_t)*Le;Ie-=V*jt,Le-=Ae*jt;var S=Math.sqrt(Ie*Ie+Le*Le);return jt/=S,V*(Le/=S)<Ae*(Ie/=S)&&(V=-V,Ae=-Ae,jt=-jt,_t=-_t),{scale:new Qt(_t,0,0,S,0,0),translate:new Qt(1,0,0,1,He,ot),rotate:new Qt(V,Ae,-Ae,V,0,0),skew:new Qt(1,0,jt,1,0,0)}},Qt.prototype.toString=function(V){return this.join(" ")},Qt.prototype.inversed=function(){var V=this.sx,Ae=this.shy,Ie=this.shx,Le=this.sy,He=this.tx,ot=this.ty,_t=1/(V*Le-Ae*Ie),jt=Le*_t,S=-Ae*_t,Y=-Ie*_t,se=V*_t;return new Qt(jt,S,Y,se,-jt*He-Y*ot,-S*He-se*ot)},Qt.prototype.applyToPoint=function(V){var Ae=V.x*this.sx+V.y*this.shx+this.tx,Ie=V.x*this.shy+V.y*this.sy+this.ty;return new Jl(Ae,Ie)},Qt.prototype.applyToRectangle=function(V){var Ae=this.applyToPoint(V),Ie=this.applyToPoint(new Jl(V.x+V.w,V.y+V.h));return new Hc(Ae.x,Ae.y,Ie.x-Ae.x,Ie.y-Ae.y)},Qt.prototype.clone=function(){var V=this.sx,Ae=this.shy,Ie=this.shx,Le=this.sy,He=this.tx,ot=this.ty;return new Qt(V,Ae,Ie,Le,He,ot)},g.Matrix=Qt;var An=g.matrixMult=function(V,Ae){return Ae.multiply(V)},tn=new Qt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=tn;var In=function(V,Ae){if(!ls[V]){var Ie=(Ae instanceof rh?"Sh":"P")+(Object.keys(Nr).length+1).toString(10);Ae.id=Ie,ls[V]=Ie,Nr[Ie]=Ae,Qr.publish("addPattern",Ae)}};g.ShadingPattern=rh,g.TilingPattern=Y0,g.addShadingPattern=function(V,Ae){return B("addShadingPattern()"),In(V,Ae),this},g.beginTilingPattern=function(V){B("beginTilingPattern()"),hl(V.boundingBox[0],V.boundingBox[1],V.boundingBox[2]-V.boundingBox[0],V.boundingBox[3]-V.boundingBox[1],V.matrix)},g.endTilingPattern=function(V,Ae){B("endTilingPattern()"),Ae.stream=xe[K].join(`
`),In(V,Ae),Qr.publish("endTilingPattern",Ae),Es.pop().restore()};var Un=g.__private__.newObject=function(){var V=Kn();return fe(V,!0),V},Kn=g.__private__.newObjectDeferred=function(){return le++,de[le]=function(){return ge},le},fe=function(V,Ae){return Ae=typeof Ae=="boolean"&&Ae,de[V]=ge,Ae&&Ce(V+" 0 obj"),V},Ne=g.__private__.newAdditionalObject=function(){var V={objId:Kn(),content:""};return Se.push(V),V},Ee=Kn(),_e=Kn(),Te=g.__private__.decodeColorString=function(V){var Ae=V.split(" ");if(Ae.length!==2||Ae[1]!=="g"&&Ae[1]!=="G")Ae.length===5&&(Ae[4]==="k"||Ae[4]==="K")&&(Ae=[(1-Ae[0])*(1-Ae[3]),(1-Ae[1])*(1-Ae[3]),(1-Ae[2])*(1-Ae[3]),"r"]);else{var Ie=parseFloat(Ae[0]);Ae=[Ie,Ie,Ie,"r"]}for(var Le="#",He=0;He<3;He++)Le+=("0"+Math.floor(255*parseFloat(Ae[He])).toString(16)).slice(-2);return Le},ke=g.__private__.encodeColorString=function(V){var Ae;typeof V=="string"&&(V={ch1:V});var Ie=V.ch1,Le=V.ch2,He=V.ch3,ot=V.ch4,_t=V.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ie=="string"&&Ie.charAt(0)!=="#"){var jt=new pM(Ie);if(jt.ok)Ie=jt.toHex();else if(!/^\d*\.?\d*$/.test(Ie))throw new Error('Invalid color "'+Ie+'" passed to jsPDF.encodeColorString.')}if(typeof Ie=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ie)&&(Ie="#"+Ie[1]+Ie[1]+Ie[2]+Ie[2]+Ie[3]+Ie[3]),typeof Ie=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ie)){var S=parseInt(Ie.substr(1),16);Ie=S>>16&255,Le=S>>8&255,He=255&S}if(Le===void 0||ot===void 0&&Ie===Le&&Le===He)if(typeof Ie=="string")Ae=Ie+" "+_t[0];else switch(V.precision){case 2:Ae=O(Ie/255)+" "+_t[0];break;case 3:default:Ae=F(Ie/255)+" "+_t[0]}else if(ot===void 0||Vn(ot)==="object"){if(ot&&!isNaN(ot.a)&&ot.a===0)return Ae=["1.","1.","1.",_t[1]].join(" ");if(typeof Ie=="string")Ae=[Ie,Le,He,_t[1]].join(" ");else switch(V.precision){case 2:Ae=[O(Ie/255),O(Le/255),O(He/255),_t[1]].join(" ");break;default:case 3:Ae=[F(Ie/255),F(Le/255),F(He/255),_t[1]].join(" ")}}else if(typeof Ie=="string")Ae=[Ie,Le,He,ot,_t[2]].join(" ");else switch(V.precision){case 2:Ae=[O(Ie),O(Le),O(He),O(ot),_t[2]].join(" ");break;case 3:default:Ae=[F(Ie),F(Le),F(He),F(ot),_t[2]].join(" ")}return Ae},qe=g.__private__.getFilters=function(){return i},rt=g.__private__.putStream=function(V){var Ae=(V=V||{}).data||"",Ie=V.filters||qe(),Le=V.alreadyAppliedFilters||[],He=V.addLength1||!1,ot=Ae.length,_t=V.objectId,jt=function(hr){return hr};if(d!==null&&_t===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(jt=Mn.encryptor(_t,0));var S={};Ie===!0&&(Ie=["FlateEncode"]);var Y=V.additionalKeyValues||[],se=(S=sr.API.processDataByFilters!==void 0?sr.API.processDataByFilters(Ae,Ie):{data:Ae,reverseChain:[]}).reverseChain+(Array.isArray(Le)?Le.join(" "):Le.toString());if(S.data.length!==0&&(Y.push({key:"Length",value:S.data.length}),He===!0&&Y.push({key:"Length1",value:ot})),se.length!=0)if(se.split("/").length-1==1)Y.push({key:"Filter",value:se});else{Y.push({key:"Filter",value:"["+se+"]"});for(var ye=0;ye<Y.length;ye+=1)if(Y[ye].key==="DecodeParms"){for(var Oe=[],Ze=0;Ze<S.reverseChain.split("/").length-1;Ze+=1)Oe.push("null");Oe.push(Y[ye].value),Y[ye].value="["+Oe.join(" ")+"]"}}Ce("<<");for(var St=0;St<Y.length;St++)Ce("/"+Y[St].key+" "+Y[St].value);Ce(">>"),S.data.length!==0&&(Ce("stream"),Ce(jt(S.data)),Ce("endstream"))},Qe=g.__private__.putPage=function(V){var Ae=V.number,Ie=V.data,Le=V.objId,He=V.contentsObjId;fe(Le,!0),Ce("<</Type /Page"),Ce("/Parent "+V.rootDictionaryObjId+" 0 R"),Ce("/Resources "+V.resourceDictionaryObjId+" 0 R"),Ce("/MediaBox ["+parseFloat(C(V.mediaBox.bottomLeftX))+" "+parseFloat(C(V.mediaBox.bottomLeftY))+" "+C(V.mediaBox.topRightX)+" "+C(V.mediaBox.topRightY)+"]"),V.cropBox!==null&&Ce("/CropBox ["+C(V.cropBox.bottomLeftX)+" "+C(V.cropBox.bottomLeftY)+" "+C(V.cropBox.topRightX)+" "+C(V.cropBox.topRightY)+"]"),V.bleedBox!==null&&Ce("/BleedBox ["+C(V.bleedBox.bottomLeftX)+" "+C(V.bleedBox.bottomLeftY)+" "+C(V.bleedBox.topRightX)+" "+C(V.bleedBox.topRightY)+"]"),V.trimBox!==null&&Ce("/TrimBox ["+C(V.trimBox.bottomLeftX)+" "+C(V.trimBox.bottomLeftY)+" "+C(V.trimBox.topRightX)+" "+C(V.trimBox.topRightY)+"]"),V.artBox!==null&&Ce("/ArtBox ["+C(V.artBox.bottomLeftX)+" "+C(V.artBox.bottomLeftY)+" "+C(V.artBox.topRightX)+" "+C(V.artBox.topRightY)+"]"),typeof V.userUnit=="number"&&V.userUnit!==1&&Ce("/UserUnit "+V.userUnit),Qr.publish("putPage",{objId:Le,pageContext:tr[Ae],pageNumber:Ae,page:Ie}),Ce("/Contents "+He+" 0 R"),Ce(">>"),Ce("endobj");var ot=Ie.join(`
`);return I===k.ADVANCED&&(ot+=`
Q`),fe(He,!0),rt({data:ot,filters:qe(),objectId:He}),Ce("endobj"),Le},We=g.__private__.putPages=function(){var V,Ae,Ie=[];for(V=1;V<=Lr;V++)tr[V].objId=Kn(),tr[V].contentsObjId=Kn();for(V=1;V<=Lr;V++)Ie.push(Qe({number:V,data:xe[V],objId:tr[V].objId,contentsObjId:tr[V].contentsObjId,mediaBox:tr[V].mediaBox,cropBox:tr[V].cropBox,bleedBox:tr[V].bleedBox,trimBox:tr[V].trimBox,artBox:tr[V].artBox,userUnit:tr[V].userUnit,rootDictionaryObjId:Ee,resourceDictionaryObjId:_e}));fe(Ee,!0),Ce("<</Type /Pages");var Le="/Kids [";for(Ae=0;Ae<Lr;Ae++)Le+=Ie[Ae]+" 0 R ";Ce(Le+"]"),Ce("/Count "+Lr),Ce(">>"),Ce("endobj"),Qr.publish("postPutPages")},Je=function(V){Qr.publish("putFont",{font:V,out:Ce,newObject:Un,putStream:rt}),V.isAlreadyPutted!==!0&&(V.objectNumber=Un(),Ce("<<"),Ce("/Type /Font"),Ce("/BaseFont /"+z0(V.postScriptName)),Ce("/Subtype /Type1"),typeof V.encoding=="string"&&Ce("/Encoding /"+V.encoding),Ce("/FirstChar 32"),Ce("/LastChar 255"),Ce(">>"),Ce("endobj"))},yt=function(){for(var V in pr)pr.hasOwnProperty(V)&&(h===!1||h===!0&&m.hasOwnProperty(V))&&Je(pr[V])},Bt=function(V){V.objectNumber=Un();var Ae=[];Ae.push({key:"Type",value:"/XObject"}),Ae.push({key:"Subtype",value:"/Form"}),Ae.push({key:"BBox",value:"["+[C(V.x),C(V.y),C(V.x+V.width),C(V.y+V.height)].join(" ")+"]"}),Ae.push({key:"Matrix",value:"["+V.matrix.toString()+"]"});var Ie=V.pages[1].join(`
`);rt({data:Ie,additionalKeyValues:Ae,objectId:V.objectNumber}),Ce("endobj")},Pt=function(){for(var V in qn)qn.hasOwnProperty(V)&&Bt(qn[V])},Tt=function(V,Ae){var Ie,Le=[],He=1/(Ae-1);for(Ie=0;Ie<1;Ie+=He)Le.push(Ie);if(Le.push(1),V[0].offset!=0){var ot={offset:0,color:V[0].color};V.unshift(ot)}if(V[V.length-1].offset!=1){var _t={offset:1,color:V[V.length-1].color};V.push(_t)}for(var jt="",S=0,Y=0;Y<Le.length;Y++){for(Ie=Le[Y];Ie>V[S+1].offset;)S++;var se=V[S].offset,ye=(Ie-se)/(V[S+1].offset-se),Oe=V[S].color,Ze=V[S+1].color;jt+=te(Math.round((1-ye)*Oe[0]+ye*Ze[0]).toString(16))+te(Math.round((1-ye)*Oe[1]+ye*Ze[1]).toString(16))+te(Math.round((1-ye)*Oe[2]+ye*Ze[2]).toString(16))}return jt.trim()},Ft=function(V,Ae){Ae||(Ae=21);var Ie=Un(),Le=Tt(V.colors,Ae),He=[];He.push({key:"FunctionType",value:"0"}),He.push({key:"Domain",value:"[0.0 1.0]"}),He.push({key:"Size",value:"["+Ae+"]"}),He.push({key:"BitsPerSample",value:"8"}),He.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),He.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),rt({data:Le,additionalKeyValues:He,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ie}),Ce("endobj"),V.objectNumber=Un(),Ce("<< /ShadingType "+V.type),Ce("/ColorSpace /DeviceRGB");var ot="/Coords ["+C(parseFloat(V.coords[0]))+" "+C(parseFloat(V.coords[1]))+" ";V.type===2?ot+=C(parseFloat(V.coords[2]))+" "+C(parseFloat(V.coords[3])):ot+=C(parseFloat(V.coords[2]))+" "+C(parseFloat(V.coords[3]))+" "+C(parseFloat(V.coords[4]))+" "+C(parseFloat(V.coords[5])),Ce(ot+="]"),V.matrix&&Ce("/Matrix ["+V.matrix.toString()+"]"),Ce("/Function "+Ie+" 0 R"),Ce("/Extend [true true]"),Ce(">>"),Ce("endobj")},cr=function(V,Ae){var Ie=Kn(),Le=Un();Ae.push({resourcesOid:Ie,objectOid:Le}),V.objectNumber=Le;var He=[];He.push({key:"Type",value:"/Pattern"}),He.push({key:"PatternType",value:"1"}),He.push({key:"PaintType",value:"1"}),He.push({key:"TilingType",value:"1"}),He.push({key:"BBox",value:"["+V.boundingBox.map(C).join(" ")+"]"}),He.push({key:"XStep",value:C(V.xStep)}),He.push({key:"YStep",value:C(V.yStep)}),He.push({key:"Resources",value:Ie+" 0 R"}),V.matrix&&He.push({key:"Matrix",value:"["+V.matrix.toString()+"]"}),rt({data:V.stream,additionalKeyValues:He,objectId:V.objectNumber}),Ce("endobj")},Ur=function(V){var Ae;for(Ae in Nr)Nr.hasOwnProperty(Ae)&&(Nr[Ae]instanceof rh?Ft(Nr[Ae]):Nr[Ae]instanceof Y0&&cr(Nr[Ae],V))},Mr=function(V){for(var Ae in V.objectNumber=Un(),Ce("<<"),V)switch(Ae){case"opacity":Ce("/ca "+O(V[Ae]));break;case"stroke-opacity":Ce("/CA "+O(V[Ae]))}Ce(">>"),Ce("endobj")},Hr=function(){var V;for(V in en)en.hasOwnProperty(V)&&Mr(en[V])},Ia=function(){for(var V in Ce("/XObject <<"),qn)qn.hasOwnProperty(V)&&qn[V].objectNumber>=0&&Ce("/"+V+" "+qn[V].objectNumber+" 0 R");Qr.publish("putXobjectDict"),Ce(">>")},fi=function(){Mn.oid=Un(),Ce("<<"),Ce("/Filter /Standard"),Ce("/V "+Mn.v),Ce("/R "+Mn.r),Ce("/U <"+Mn.toHexString(Mn.U)+">"),Ce("/O <"+Mn.toHexString(Mn.O)+">"),Ce("/P "+Mn.P),Ce(">>"),Ce("endobj")},Fa=function(){for(var V in Ce("/Font <<"),pr)pr.hasOwnProperty(V)&&(h===!1||h===!0&&m.hasOwnProperty(V))&&Ce("/"+V+" "+pr[V].objectNumber+" 0 R");Ce(">>")},us=function(){if(Object.keys(Nr).length>0){for(var V in Ce("/Shading <<"),Nr)Nr.hasOwnProperty(V)&&Nr[V]instanceof rh&&Nr[V].objectNumber>=0&&Ce("/"+V+" "+Nr[V].objectNumber+" 0 R");Qr.publish("putShadingPatternDict"),Ce(">>")}},Ga=function(V){if(Object.keys(Nr).length>0){for(var Ae in Ce("/Pattern <<"),Nr)Nr.hasOwnProperty(Ae)&&Nr[Ae]instanceof g.TilingPattern&&Nr[Ae].objectNumber>=0&&Nr[Ae].objectNumber<V&&Ce("/"+Ae+" "+Nr[Ae].objectNumber+" 0 R");Qr.publish("putTilingPatternDict"),Ce(">>")}},_s=function(){if(Object.keys(en).length>0){var V;for(V in Ce("/ExtGState <<"),en)en.hasOwnProperty(V)&&en[V].objectNumber>=0&&Ce("/"+V+" "+en[V].objectNumber+" 0 R");Qr.publish("putGStateDict"),Ce(">>")}},Wn=function(V){fe(V.resourcesOid,!0),Ce("<<"),Ce("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Fa(),us(),Ga(V.objectOid),_s(),Ia(),Ce(">>"),Ce("endobj")},As=function(){var V=[];yt(),Hr(),Pt(),Ur(V),Qr.publish("putResources"),V.forEach(Wn),Wn({resourcesOid:_e,objectOid:Number.MAX_SAFE_INTEGER}),Qr.publish("postPutResources")},Mc=function(){Qr.publish("putAdditionalObjects");for(var V=0;V<Se.length;V++){var Ae=Se[V];fe(Ae.objId,!0),Ce(Ae.content),Ce("endobj")}Qr.publish("postPutAdditionalObjects")},GA=function(V){Rr[V.fontName]=Rr[V.fontName]||{},Rr[V.fontName][V.fontStyle]=V.id},sl=function(V,Ae,Ie,Le,He){var ot={id:"F"+(Object.keys(pr).length+1).toString(10),postScriptName:V,fontName:Ae,fontStyle:Ie,encoding:Le,isStandardFont:He||!1,metadata:{}};return Qr.publish("addFont",{font:ot,instance:this}),pr[ot.id]=ot,GA(ot),ot.id},Pu=function(V){for(var Ae=0,Ie=it.length;Ae<Ie;Ae++){var Le=sl.call(this,V[Ae][0],V[Ae][1],V[Ae][2],it[Ae][3],!0);h===!1&&(m[Le]=!0);var He=V[Ae][0].split("-");GA({id:Le,fontName:He[0],fontStyle:He[1]||""})}Qr.publish("addFonts",{fonts:pr,dictionary:Rr})},Ss=function(V){return V.foo=function(){try{return V.apply(this,arguments)}catch(Le){var Ae=Le.stack||"";~Ae.indexOf(" at ")&&(Ae=Ae.split(" at ")[1]);var Ie="Error in function "+Ae.split(`
`)[0].split("<")[0]+": "+Le.message;if(!wr.console)throw new Error(Ie);wr.console.error(Ie,Le),wr.alert&&alert(Ie)}},V.foo.bar=V,V.foo},Pc=function(V,Ae){var Ie,Le,He,ot,_t,jt,S,Y,se;if(He=(Ae=Ae||{}).sourceEncoding||"Unicode",_t=Ae.outputEncoding,(Ae.autoencode||_t)&&pr[kt].metadata&&pr[kt].metadata[He]&&pr[kt].metadata[He].encoding&&(ot=pr[kt].metadata[He].encoding,!_t&&pr[kt].encoding&&(_t=pr[kt].encoding),!_t&&ot.codePages&&(_t=ot.codePages[0]),typeof _t=="string"&&(_t=ot[_t]),_t)){for(S=!1,jt=[],Ie=0,Le=V.length;Ie<Le;Ie++)(Y=_t[V.charCodeAt(Ie)])?jt.push(String.fromCharCode(Y)):jt.push(V[Ie]),jt[Ie].charCodeAt(0)>>8&&(S=!0);V=jt.join("")}for(Ie=V.length;S===void 0&&Ie!==0;)V.charCodeAt(Ie-1)>>8&&(S=!0),Ie--;if(!S)return V;for(jt=Ae.noBOM?[]:[254,255],Ie=0,Le=V.length;Ie<Le;Ie++){if((se=(Y=V.charCodeAt(Ie))>>8)>>8)throw new Error("Character at position "+Ie+" of string '"+V+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");jt.push(se),jt.push(Y-(se<<8))}return String.fromCharCode.apply(void 0,jt)},dn=g.__private__.pdfEscape=g.pdfEscape=function(V,Ae){return Pc(V,Ae).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ts=g.__private__.beginPage=function(V){xe[++Lr]=[],tr[Lr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(V[0]),topRightY:Number(V[1])}},ro(Lr),De(xe[K])},il=function(V,Ae){var Ie,Le,He;switch(r=Ae||r,typeof V=="string"&&(Ie=N(V.toLowerCase()),Array.isArray(Ie)&&(Le=Ie[0],He=Ie[1])),Array.isArray(V)&&(Le=V[0]*xt,He=V[1]*xt),isNaN(Le)&&(Le=a[0],He=a[1]),(Le>14400||He>14400)&&(ra.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Le=Math.min(14400,Le),He=Math.min(14400,He)),a=[Le,He],r.substr(0,1)){case"l":He>Le&&(a=[He,Le]);break;case"p":Le>He&&(a=[He,Le])}Ts(a),Hu(ul),Ce(Bs),Vu!==0&&Ce(Vu+" J"),Xl!==0&&Ce(Xl+" j"),Qr.publish("addPage",{pageNumber:Lr})},ol=function(V){V>0&&V<=Lr&&(xe.splice(V,1),tr.splice(V,1),Lr--,K>Lr&&(K=Lr),this.setPage(K))},ro=function(V){V>0&&V<=Lr&&(K=V)},Cn=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return xe.length-1},ll=function(V,Ae,Ie){var Le,He=void 0;return Ie=Ie||{},V=V!==void 0?V:pr[kt].fontName,Ae=Ae!==void 0?Ae:pr[kt].fontStyle,Le=V.toLowerCase(),Rr[Le]!==void 0&&Rr[Le][Ae]!==void 0?He=Rr[Le][Ae]:Rr[V]!==void 0&&Rr[V][Ae]!==void 0?He=Rr[V][Ae]:Ie.disableWarning===!1&&ra.warn("Unable to look up font label for font '"+V+"', '"+Ae+"'. Refer to getFontList() for available fonts."),He||Ie.noFallback||(He=Rr.times[Ae])==null&&(He=Rr.times.normal),He},hi=g.__private__.putInfo=function(){var V=Un(),Ae=function(Le){return Le};for(var Ie in d!==null&&(Ae=Mn.encryptor(V,0)),Ce("<<"),Ce("/Producer ("+dn(Ae("jsPDF "+sr.version))+")"),Mt)Mt.hasOwnProperty(Ie)&&Mt[Ie]&&Ce("/"+Ie.substr(0,1).toUpperCase()+Ie.substr(1)+" ("+dn(Ae(Mt[Ie]))+")");Ce("/CreationDate ("+dn(Ae(ie))+")"),Ce(">>"),Ce("endobj")},ko=g.__private__.putCatalog=function(V){var Ae=(V=V||{}).rootDictionaryObjId||Ee;switch(Un(),Ce("<<"),Ce("/Type /Catalog"),Ce("/Pages "+Ae+" 0 R"),Ct||(Ct="fullwidth"),Ct){case"fullwidth":Ce("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ce("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ce("/OpenAction [3 0 R /Fit]");break;case"original":Ce("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ie=""+Ct;Ie.substr(Ie.length-1)==="%"&&(Ct=parseInt(Ct)/100),typeof Ct=="number"&&Ce("/OpenAction [3 0 R /XYZ null null "+O(Ct)+"]")}switch(Ut||(Ut="continuous"),Ut){case"continuous":Ce("/PageLayout /OneColumn");break;case"single":Ce("/PageLayout /SinglePage");break;case"two":case"twoleft":Ce("/PageLayout /TwoColumnLeft");break;case"tworight":Ce("/PageLayout /TwoColumnRight")}It&&Ce("/PageMode /"+It),Qr.publish("putCatalog"),Ce(">>"),Ce("endobj")},qA=g.__private__.putTrailer=function(){Ce("trailer"),Ce("<<"),Ce("/Size "+(le+1)),Ce("/Root "+le+" 0 R"),Ce("/Info "+(le-1)+" 0 R"),d!==null&&Ce("/Encrypt "+Mn.oid+" 0 R"),Ce("/ID [ <"+Z+"> <"+Z+"> ]"),Ce(">>")},ju=g.__private__.putHeader=function(){Ce("%PDF-"+b),Ce("%ºß¬à")},Ou=g.__private__.putXRef=function(){var V="0000000000";Ce("xref"),Ce("0 "+(le+1)),Ce("0000000000 65535 f ");for(var Ae=1;Ae<=le;Ae++)typeof de[Ae]=="function"?Ce((V+de[Ae]()).slice(-10)+" 00000 n "):de[Ae]!==void 0?Ce((V+de[Ae]).slice(-10)+" 00000 n "):Ce("0000000000 00000 n ")},Io=g.__private__.buildDocument=function(){Xe(),De(me),Qr.publish("buildDocument"),ju(),We(),Mc(),As(),d!==null&&fi(),hi(),ko();var V=ge;return Ou(),qA(),Ce("startxref"),Ce(""+V),Ce("%%EOF"),De(xe[K]),me.join(`
`)},jc=g.__private__.getBlob=function(V){return new Blob([tt(V)],{type:"application/pdf"})},Fo=g.output=g.__private__.output=Ss(function(V,Ae){switch(typeof(Ae=Ae||{})=="string"?Ae={filename:Ae}:Ae.filename=Ae.filename||"generated.pdf",V){case void 0:return Io();case"save":g.save(Ae.filename);break;case"arraybuffer":return tt(Io());case"blob":return jc(Io());case"bloburi":case"bloburl":if(wr.URL!==void 0&&typeof wr.URL.createObjectURL=="function")return wr.URL&&wr.URL.createObjectURL(jc(Io()))||void 0;ra.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ie="",Le=Io();try{Ie=V_(Le)}catch{Ie=V_(unescape(encodeURIComponent(Le)))}return"data:application/pdf;filename="+Ae.filename+";base64,"+Ie;case"pdfobjectnewwindow":if(Object.prototype.toString.call(wr)==="[object Window]"){var He="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ot=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ae.pdfObjectUrl&&(He=Ae.pdfObjectUrl,ot="");var _t='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+He+'"'+ot+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ae)+");<\/script></body></html>",jt=wr.open();return jt!==null&&jt.document.write(_t),jt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(wr)==="[object Window]"){var S='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ae.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ae.filename+'" width="500px" height="400px" /></body></html>',Y=wr.open();if(Y!==null){Y.document.write(S);var se=this;Y.document.documentElement.querySelector("#pdfViewer").onload=function(){Y.document.title=Ae.filename,Y.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(se.output("bloburl"))}}return Y}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(wr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ye='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ae)+'"></iframe></body></html>',Oe=wr.open();if(Oe!==null&&(Oe.document.write(ye),Oe.document.title=Ae.filename),Oe||typeof safari>"u")return Oe;break;case"datauri":case"dataurl":return wr.document.location.href=this.output("datauristring",Ae);default:return null}}),no=function(V){return Array.isArray(cs)===!0&&cs.indexOf(V)>-1};switch(n){case"pt":xt=1;break;case"mm":xt=72/25.4;break;case"cm":xt=72/2.54;break;case"in":xt=72;break;case"px":xt=no("px_scaling")==1?.75:96/72;break;case"pc":case"em":xt=12;break;case"ex":xt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);xt=n}var Mn=null;ce(),ne();var Ro=function(V){return d!==null?Mn.encryptor(V,0):function(Ae){return Ae}},ao=g.__private__.getPageInfo=g.getPageInfo=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:tr[V].objId,pageNumber:V,pageContext:tr[V]}},fr=g.__private__.getPageInfoByObjId=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ae in tr)if(tr[Ae].objId===V)break;return ao(Ae)},so=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:tr[K].objId,pageNumber:K,pageContext:tr[K]}};g.addPage=function(){return il.apply(this,arguments),this},g.setPage=function(){return ro.apply(this,arguments),De.call(this,xe[K]),this},g.insertPage=function(V){return this.addPage(),this.movePage(K,V),this},g.movePage=function(V,Ae){var Ie,Le;if(V>Ae){Ie=xe[V],Le=tr[V];for(var He=V;He>Ae;He--)xe[He]=xe[He-1],tr[He]=tr[He-1];xe[Ae]=Ie,tr[Ae]=Le,this.setPage(Ae)}else if(V<Ae){Ie=xe[V],Le=tr[V];for(var ot=V;ot<Ae;ot++)xe[ot]=xe[ot+1],tr[ot]=tr[ot+1];xe[Ae]=Ie,tr[Ae]=Le,this.setPage(Ae)}return this},g.deletePage=function(){return ol.apply(this,arguments),this},g.__private__.text=g.text=function(V,Ae,Ie,Le,He){var ot,_t,jt,S,Y,se,ye,Oe,Ze,St=(Le=Le||{}).scope||this;if(typeof V=="number"&&typeof Ae=="number"&&(typeof Ie=="string"||Array.isArray(Ie))){var hr=Ie;Ie=Ae,Ae=V,V=hr}if(arguments[3]instanceof Qt?(B("The transform parameter of text() with a Matrix value"),Ze=He):(jt=arguments[4],S=arguments[5],Vn(ye=arguments[3])==="object"&&ye!==null||(typeof jt=="string"&&(S=jt,jt=null),typeof ye=="string"&&(S=ye,ye=null),typeof ye=="number"&&(jt=ye,ye=null),Le={flags:ye,angle:jt,align:S})),isNaN(Ae)||isNaN(Ie)||V==null)throw new Error("Invalid arguments passed to jsPDF.text");if(V.length===0)return St;var Yr="",Tr=!1,En=typeof Le.lineHeightFactor=="number"?Le.lineHeightFactor:$r,Fn=St.internal.scaleFactor;function co(zr){return zr=zr.split("	").join(Array(Le.TabLen||9).join(" ")),dn(zr,ye)}function ba(zr){for(var Gr,$n=zr.concat(),Ca=[],Ao=$n.length;Ao--;)typeof(Gr=$n.shift())=="string"?Ca.push(Gr):Array.isArray(zr)&&(Gr.length===1||Gr[1]===void 0&&Gr[2]===void 0)?Ca.push(Gr[0]):Ca.push([Gr[0],Gr[1],Gr[2]]);return Ca}function xi(zr,Gr){var $n;if(typeof zr=="string")$n=Gr(zr)[0];else if(Array.isArray(zr)){for(var Ca,Ao,Zc=zr.concat(),eu=[],nc=Zc.length;nc--;)typeof(Ca=Zc.shift())=="string"?eu.push(Gr(Ca)[0]):Array.isArray(Ca)&&typeof Ca[0]=="string"&&(Ao=Gr(Ca[0],Ca[1],Ca[2]),eu.push([Ao[0],Ao[1],Ao[2]]));$n=eu}return $n}var pl=!1,zc=!0;if(typeof V=="string")pl=!0;else if(Array.isArray(V)){var YA=V.concat();_t=[];for(var zu,qa=YA.length;qa--;)(typeof(zu=YA.shift())!="string"||Array.isArray(zu)&&typeof zu[0]!="string")&&(zc=!1);pl=zc}if(pl===!1)throw new Error('Type of text must be string or Array. "'+V+'" is not recognized.');typeof V=="string"&&(V=V.match(/[\r?\n]/)?V.split(/\r\n|\r|\n/g):[V]);var Gc=dt/St.internal.scaleFactor,Gu=Gc*(En-1);switch(Le.baseline){case"bottom":Ie-=Gu;break;case"top":Ie+=Gc-Gu;break;case"hanging":Ie+=Gc-2*Gu;break;case"middle":Ie+=Gc/2-Gu}if((se=Le.maxWidth||0)>0&&(typeof V=="string"?V=St.splitTextToSize(V,se):Object.prototype.toString.call(V)==="[object Array]"&&(V=V.reduce(function(zr,Gr){return zr.concat(St.splitTextToSize(Gr,se))},[]))),ot={text:V,x:Ae,y:Ie,options:Le,mutex:{pdfEscape:dn,activeFontKey:kt,fonts:pr,activeFontSize:dt}},Qr.publish("preProcessText",ot),V=ot.text,jt=(Le=ot.options).angle,!(Ze instanceof Qt)&&jt&&typeof jt=="number"){jt*=Math.PI/180,Le.rotationDirection===0&&(jt=-jt),I===k.ADVANCED&&(jt=-jt);var qu=Math.cos(jt),XA=Math.sin(jt);Ze=new Qt(qu,XA,-XA,qu,0,0)}else jt&&jt instanceof Qt&&(Ze=jt);I!==k.ADVANCED||Ze||(Ze=tn),(Y=Le.charSpace||Yl)!==void 0&&(Yr+=C(L(Y))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Oe=Le.horizontalScale)!==void 0&&(Yr+=C(100*Oe)+` Tz
`),Le.lang;var vi=-1,np=Le.renderingMode!==void 0?Le.renderingMode:Le.stroke,Tf=St.internal.getCurrentPageInfo().pageContext;switch(np){case 0:case!1:case"fill":vi=0;break;case 1:case!0:case"stroke":vi=1;break;case 2:case"fillThenStroke":vi=2;break;case 3:case"invisible":vi=3;break;case 4:case"fillAndAddForClipping":vi=4;break;case 5:case"strokeAndAddPathForClipping":vi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":vi=6;break;case 7:case"addToPathForClipping":vi=7}var qh=Tf.usedRenderingMode!==void 0?Tf.usedRenderingMode:-1;vi!==-1?Yr+=vi+` Tr
`:qh!==-1&&(Yr+=`0 Tr
`),vi!==-1&&(Tf.usedRenderingMode=vi),S=Le.align||"left";var uo,ds=dt*En,qc=St.internal.pageSize.getWidth(),Bf=pr[kt];Y=Le.charSpace||Yl,se=Le.maxWidth||0,ye=Object.assign({autoencode:!0,noBOM:!0},Le.flags);var tc=[],Kc=function(zr){return St.getStringUnitWidth(zr,{font:Bf,charSpace:Y,fontSize:dt,doKerning:!1})*dt/Fn};if(Object.prototype.toString.call(V)==="[object Array]"){var Js;_t=ba(V),S!=="left"&&(uo=_t.map(Kc));var Ns,Wc=0;if(S==="right"){Ae-=uo[0],V=[],qa=_t.length;for(var yi=0;yi<qa;yi++)yi===0?(Ns=Ps(Ae),Js=Da(Ie)):(Ns=L(Wc-uo[yi]),Js=-ds),V.push([_t[yi],Ns,Js]),Wc=uo[yi]}else if(S==="center"){Ae-=uo[0]/2,V=[],qa=_t.length;for(var Mo=0;Mo<qa;Mo++)Mo===0?(Ns=Ps(Ae),Js=Da(Ie)):(Ns=L((Wc-uo[Mo])/2),Js=-ds),V.push([_t[Mo],Ns,Js]),Wc=uo[Mo]}else if(S==="left"){V=[],qa=_t.length;for(var gl=0;gl<qa;gl++)V.push(_t[gl])}else if(S==="justify"&&Bf.encoding==="Identity-H"){V=[],qa=_t.length,se=se!==0?se:qc;for(var Po=0,ma=0;ma<qa;ma++)if(Js=ma===0?Da(Ie):-ds,Ns=ma===0?Ps(Ae):Po,ma<qa-1){var jo=L((se-uo[ma])/(_t[ma].split(" ").length-1)),La=_t[ma].split(" ");V.push([La[0]+" ",Ns,Js]),Po=0;for(var wi=1;wi<La.length;wi++){var Ku=(Kc(La[wi-1]+" "+La[wi])-Kc(La[wi]))*Fn+jo;wi==La.length-1?V.push([La[wi],Ku,0]):V.push([La[wi]+" ",Ku,0]),Po-=Ku}}else V.push([_t[ma],Ns,Js]);V.push(["",Po,0])}else{if(S!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(V=[],qa=_t.length,se=se!==0?se:qc,ma=0;ma<qa;ma++)Js=ma===0?Da(Ie):-ds,Ns=ma===0?Ps(Ae):0,ma<qa-1?tc.push(C(L((se-uo[ma])/(_t[ma].split(" ").length-1)))):tc.push(0),V.push([_t[ma],Ns,Js])}}var xl=typeof Le.R2L=="boolean"?Le.R2L:Nt;xl===!0&&(V=xi(V,function(zr,Gr,$n){return[zr.split("").reverse().join(""),Gr,$n]})),ot={text:V,x:Ae,y:Ie,options:Le,mutex:{pdfEscape:dn,activeFontKey:kt,fonts:pr,activeFontSize:dt}},Qr.publish("postProcessText",ot),V=ot.text,Tr=ot.mutex.isHex||!1;var JA=pr[kt].encoding;JA!=="WinAnsiEncoding"&&JA!=="StandardEncoding"||(V=xi(V,function(zr,Gr,$n){return[co(zr),Gr,$n]})),_t=ba(V),V=[];for(var $c,Yc,Xc,Wu=0,ZA=1,Jc=Array.isArray(_t[0])?ZA:Wu,rc="",$u=function(zr,Gr,$n){var Ca="";return $n instanceof Qt?($n=typeof Le.angle=="number"?An($n,new Qt(1,0,0,1,zr,Gr)):An(new Qt(1,0,0,1,zr,Gr),$n),I===k.ADVANCED&&($n=An(new Qt(1,0,0,-1,0,0),$n)),Ca=$n.join(" ")+` Tm
`):Ca=C(zr)+" "+C(Gr)+` Td
`,Ca},pa=0;pa<_t.length;pa++){switch(rc="",Jc){case ZA:Xc=(Tr?"<":"(")+_t[pa][0]+(Tr?">":")"),$c=parseFloat(_t[pa][1]),Yc=parseFloat(_t[pa][2]);break;case Wu:Xc=(Tr?"<":"(")+_t[pa]+(Tr?">":")"),$c=Ps(Ae),Yc=Da(Ie)}tc!==void 0&&tc[pa]!==void 0&&(rc=tc[pa]+` Tw
`),pa===0?V.push(rc+$u($c,Yc,Ze)+Xc):Jc===Wu?V.push(rc+Xc):Jc===ZA&&V.push(rc+$u($c,Yc,Ze)+Xc)}V=Jc===Wu?V.join(` Tj
T* `):V.join(` Tj
`),V+=` Tj
`;var Ki=`BT
/`;return Ki+=kt+" "+dt+` Tf
`,Ki+=C(dt*En)+` TL
`,Ki+=Lo+`
`,Ki+=Yr,Ki+=V,Ce(Ki+="ET"),m[kt]=!0,St};var KA=g.__private__.clip=g.clip=function(V){return Ce(V==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return KA("evenodd")},g.__private__.discardPath=g.discardPath=function(){return Ce("n"),this};var Us=g.__private__.isValidStyle=function(V){var Ae=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(V)!==-1&&(Ae=!0),Ae};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(V){return Us(V)&&(A=V),this};var mi=g.__private__.getStyle=g.getStyle=function(V){var Ae=A;switch(V){case"D":case"S":Ae="S";break;case"F":Ae="f";break;case"FD":case"DF":Ae="B";break;case"f":case"f*":case"B":case"B*":Ae=V}return Ae},Xs=g.close=function(){return Ce("h"),this};g.stroke=function(){return Ce("S"),this},g.fill=function(V){return io("f",V),this},g.fillEvenOdd=function(V){return io("f*",V),this},g.fillStroke=function(V){return io("B",V),this},g.fillStrokeEvenOdd=function(V){return io("B*",V),this};var io=function(V,Ae){Vn(Ae)==="object"?Do(Ae,V):Ce(V)},pi=function(V){V===null||I===k.ADVANCED&&V===void 0||(V=mi(V),Ce(V))};function cl(V,Ae,Ie,Le,He){var ot=new Y0(Ae||this.boundingBox,Ie||this.xStep,Le||this.yStep,this.gState,He||this.matrix);ot.stream=this.stream;var _t=V+"$$"+this.cloneIndex+++"$$";return In(_t,ot),ot}var Do=function(V,Ae){var Ie=ls[V.key],Le=Nr[Ie];if(Le instanceof rh)Ce("q"),Ce(Qu(Ae)),Le.gState&&g.setGState(Le.gState),Ce(V.matrix.toString()+" cm"),Ce("/"+Ie+" sh"),Ce("Q");else if(Le instanceof Y0){var He=new Qt(1,0,0,-1,0,js());V.matrix&&(He=He.multiply(V.matrix||tn),Ie=cl.call(Le,V.key,V.boundingBox,V.xStep,V.yStep,He).id),Ce("q"),Ce("/Pattern cs"),Ce("/"+Ie+" scn"),Le.gState&&g.setGState(Le.gState),Ce(Ae),Ce("Q")}},Qu=function(V){switch(V){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},gi=g.moveTo=function(V,Ae){return Ce(C(L(V))+" "+C(q(Ae))+" m"),this},Ms=g.lineTo=function(V,Ae){return Ce(C(L(V))+" "+C(q(Ae))+" l"),this},oo=g.curveTo=function(V,Ae,Ie,Le,He,ot){return Ce([C(L(V)),C(q(Ae)),C(L(Ie)),C(q(Le)),C(L(He)),C(q(ot)),"c"].join(" ")),this};g.__private__.line=g.line=function(V,Ae,Ie,Le,He){if(isNaN(V)||isNaN(Ae)||isNaN(Ie)||isNaN(Le)||!Us(He))throw new Error("Invalid arguments passed to jsPDF.line");return I===k.COMPAT?this.lines([[Ie-V,Le-Ae]],V,Ae,[1,1],He||"S"):this.lines([[Ie-V,Le-Ae]],V,Ae,[1,1]).stroke()},g.__private__.lines=g.lines=function(V,Ae,Ie,Le,He,ot){var _t,jt,S,Y,se,ye,Oe,Ze,St,hr,Yr,Tr;if(typeof V=="number"&&(Tr=Ie,Ie=Ae,Ae=V,V=Tr),Le=Le||[1,1],ot=ot||!1,isNaN(Ae)||isNaN(Ie)||!Array.isArray(V)||!Array.isArray(Le)||!Us(He)||typeof ot!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(gi(Ae,Ie),_t=Le[0],jt=Le[1],Y=V.length,hr=Ae,Yr=Ie,S=0;S<Y;S++)(se=V[S]).length===2?(hr=se[0]*_t+hr,Yr=se[1]*jt+Yr,Ms(hr,Yr)):(ye=se[0]*_t+hr,Oe=se[1]*jt+Yr,Ze=se[2]*_t+hr,St=se[3]*jt+Yr,hr=se[4]*_t+hr,Yr=se[5]*jt+Yr,oo(ye,Oe,Ze,St,hr,Yr));return ot&&Xs(),pi(He),this},g.path=function(V){for(var Ae=0;Ae<V.length;Ae++){var Ie=V[Ae],Le=Ie.c;switch(Ie.op){case"m":gi(Le[0],Le[1]);break;case"l":Ms(Le[0],Le[1]);break;case"c":oo.apply(this,Le);break;case"h":Xs()}}return this},g.__private__.rect=g.rect=function(V,Ae,Ie,Le,He){if(isNaN(V)||isNaN(Ae)||isNaN(Ie)||isNaN(Le)||!Us(He))throw new Error("Invalid arguments passed to jsPDF.rect");return I===k.COMPAT&&(Le=-Le),Ce([C(L(V)),C(q(Ae)),C(L(Ie)),C(L(Le)),"re"].join(" ")),pi(He),this},g.__private__.triangle=g.triangle=function(V,Ae,Ie,Le,He,ot,_t){if(isNaN(V)||isNaN(Ae)||isNaN(Ie)||isNaN(Le)||isNaN(He)||isNaN(ot)||!Us(_t))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ie-V,Le-Ae],[He-Ie,ot-Le],[V-He,Ae-ot]],V,Ae,[1,1],_t,!0),this},g.__private__.roundedRect=g.roundedRect=function(V,Ae,Ie,Le,He,ot,_t){if(isNaN(V)||isNaN(Ae)||isNaN(Ie)||isNaN(Le)||isNaN(He)||isNaN(ot)||!Us(_t))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var jt=4/3*(Math.SQRT2-1);return He=Math.min(He,.5*Ie),ot=Math.min(ot,.5*Le),this.lines([[Ie-2*He,0],[He*jt,0,He,ot-ot*jt,He,ot],[0,Le-2*ot],[0,ot*jt,-He*jt,ot,-He,ot],[2*He-Ie,0],[-He*jt,0,-He,-ot*jt,-He,-ot],[0,2*ot-Le],[0,-ot*jt,He*jt,-ot,He,-ot]],V+He,Ae,[1,1],_t,!0),this},g.__private__.ellipse=g.ellipse=function(V,Ae,Ie,Le,He){if(isNaN(V)||isNaN(Ae)||isNaN(Ie)||isNaN(Le)||!Us(He))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ot=4/3*(Math.SQRT2-1)*Ie,_t=4/3*(Math.SQRT2-1)*Le;return gi(V+Ie,Ae),oo(V+Ie,Ae-_t,V+ot,Ae-Le,V,Ae-Le),oo(V-ot,Ae-Le,V-Ie,Ae-_t,V-Ie,Ae),oo(V-Ie,Ae+_t,V-ot,Ae+Le,V,Ae+Le),oo(V+ot,Ae+Le,V+Ie,Ae+_t,V+Ie,Ae),pi(He),this},g.__private__.circle=g.circle=function(V,Ae,Ie,Le){if(isNaN(V)||isNaN(Ae)||isNaN(Ie)||!Us(Le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(V,Ae,Ie,Ie,Le)},g.setFont=function(V,Ae,Ie){return Ie&&(Ae=D(Ae,Ie)),kt=ll(V,Ae,{disableWarning:!1}),this};var Ra=g.__private__.getFont=g.getFont=function(){return pr[ll.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var V,Ae,Ie={};for(V in Rr)if(Rr.hasOwnProperty(V))for(Ae in Ie[V]=[],Rr[V])Rr[V].hasOwnProperty(Ae)&&Ie[V].push(Ae);return Ie},g.addFont=function(V,Ae,Ie,Le,He){var ot=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ot.indexOf(arguments[3])!==-1?He=arguments[3]:arguments[3]&&ot.indexOf(arguments[3])==-1&&(Ie=D(Ie,Le)),He=He||"Identity-H",sl.call(this,V,Ae,Ie,He)};var $r,ul=t.lineWidth||.200025,lo=g.__private__.getLineWidth=g.getLineWidth=function(){return ul},Hu=g.__private__.setLineWidth=g.setLineWidth=function(V){return ul=V,Ce(C(L(V))+" w"),this};g.__private__.setLineDash=sr.API.setLineDash=sr.API.setLineDashPattern=function(V,Ae){if(V=V||[],Ae=Ae||0,isNaN(Ae)||!Array.isArray(V))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return V=V.map(function(Ie){return C(L(Ie))}).join(" "),Ae=C(L(Ae)),Ce("["+V+"] "+Ae+" d"),this};var Wl=g.__private__.getLineHeight=g.getLineHeight=function(){return dt*$r};g.__private__.getLineHeight=g.getLineHeight=function(){return dt*$r};var $l=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(V){return typeof(V=V||1.15)=="number"&&($r=V),this},qi=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return $r};$l(t.lineHeight);var Ps=g.__private__.getHorizontalCoordinate=function(V){return L(V)},Da=g.__private__.getVerticalCoordinate=function(V){return I===k.ADVANCED?V:tr[K].mediaBox.topRightY-tr[K].mediaBox.bottomLeftY-L(V)},WA=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(V){return C(Ps(V))},Al=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(V){return C(Da(V))},Bs=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Te(Bs)},g.__private__.setStrokeColor=g.setDrawColor=function(V,Ae,Ie,Le){return Bs=ke({ch1:V,ch2:Ae,ch3:Ie,ch4:Le,pdfColorType:"draw",precision:2}),Ce(Bs),this};var dl=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Te(dl)},g.__private__.setFillColor=g.setFillColor=function(V,Ae,Ie,Le){return dl=ke({ch1:V,ch2:Ae,ch3:Ie,ch4:Le,pdfColorType:"fill",precision:2}),Ce(dl),this};var Lo=t.textColor||"0 g",Oc=g.__private__.getTextColor=g.getTextColor=function(){return Te(Lo)};g.__private__.setTextColor=g.setTextColor=function(V,Ae,Ie,Le){return Lo=ke({ch1:V,ch2:Ae,ch3:Ie,ch4:Le,pdfColorType:"text",precision:3}),this};var Yl=t.charSpace,Qc=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Yl||0)};g.__private__.setCharSpace=g.setCharSpace=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Yl=V,this};var Vu=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(V){var Ae=g.CapJoinStyles[V];if(Ae===void 0)throw new Error("Line cap style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Vu=Ae,Ce(Ae+" J"),this};var Xl=0;g.__private__.setLineJoin=g.setLineJoin=function(V){var Ae=g.CapJoinStyles[V];if(Ae===void 0)throw new Error("Line join style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Xl=Ae,Ce(Ae+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(V){if(V=V||0,isNaN(V))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ce(C(L(V))+" M"),this},g.GState=ry,g.setGState=function(V){(V=typeof V=="string"?en[ea[V]]:fl(null,V)).equals(ha)||(Ce("/"+V.id+" gs"),ha=V)};var fl=function(V,Ae){if(!V||!ea[V]){var Ie=!1;for(var Le in en)if(en.hasOwnProperty(Le)&&en[Le].equals(Ae)){Ie=!0;break}if(Ie)Ae=en[Le];else{var He="GS"+(Object.keys(en).length+1).toString(10);en[He]=Ae,Ae.id=He}return V&&(ea[V]=Ae.id),Qr.publish("addGState",Ae),Ae}};g.addGState=function(V,Ae){return fl(V,Ae),this},g.saveGraphicsState=function(){return Ce("q"),kn.push({key:kt,size:dt,color:Lo}),this},g.restoreGraphicsState=function(){Ce("Q");var V=kn.pop();return kt=V.key,dt=V.size,Lo=V.color,ha=null,this},g.setCurrentTransformationMatrix=function(V){return Ce(V.toString()+" cm"),this},g.comment=function(V){return Ce("#"+V),this};var Jl=function(V,Ae){var Ie=V||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ie},set:function(ot){isNaN(ot)||(Ie=parseFloat(ot))}});var Le=Ae||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Le},set:function(ot){isNaN(ot)||(Le=parseFloat(ot))}});var He="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return He},set:function(ot){He=ot.toString()}}),this},Hc=function(V,Ae,Ie,Le){Jl.call(this,V,Ae),this.type="rect";var He=Ie||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return He},set:function(_t){isNaN(_t)||(He=parseFloat(_t))}});var ot=Le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ot},set:function(_t){isNaN(_t)||(ot=parseFloat(_t))}}),this},Zl=function(){this.page=Lr,this.currentPage=K,this.pages=xe.slice(0),this.pagesContext=tr.slice(0),this.x=vr,this.y=Wt,this.matrix=un,this.width=ml(K),this.height=js(K),this.outputDestination=Fe,this.id="",this.objectNumber=-1};Zl.prototype.restore=function(){Lr=this.page,K=this.currentPage,tr=this.pagesContext,xe=this.pages,vr=this.x,Wt=this.y,un=this.matrix,ec(K,this.width),Vc(K,this.height),Fe=this.outputDestination};var hl=function(V,Ae,Ie,Le,He){Es.push(new Zl),Lr=K=0,xe=[],vr=V,Wt=Ae,un=He,Ts([Ie,Le])},$A=function(V){if(wa[V])Es.pop().restore();else{var Ae=new Zl,Ie="Xo"+(Object.keys(qn).length+1).toString(10);Ae.id=Ie,wa[V]=Ie,qn[Ie]=Ae,Qr.publish("addFormObject",Ae),Es.pop().restore()}};for(var Uo in g.beginFormObject=function(V,Ae,Ie,Le,He){return hl(V,Ae,Ie,Le,He),this},g.endFormObject=function(V){return $A(V),this},g.doFormObject=function(V,Ae){var Ie=qn[wa[V]];return Ce("q"),Ce(Ae.toString()+" cm"),Ce("/"+Ie.id+" Do"),Ce("Q"),this},g.getFormObject=function(V){var Ae=qn[wa[V]];return{x:Ae.x,y:Ae.y,width:Ae.width,height:Ae.height,matrix:Ae.matrix}},g.save=function(V,Ae){return V=V||"generated.pdf",(Ae=Ae||{}).returnPromise=Ae.returnPromise||!1,Ae.returnPromise===!1?(Zf(jc(Io()),V),typeof Zf.unload=="function"&&wr.setTimeout&&setTimeout(Zf.unload,911),this):new Promise(function(Ie,Le){try{var He=Zf(jc(Io()),V);typeof Zf.unload=="function"&&wr.setTimeout&&setTimeout(Zf.unload,911),Ie(He)}catch(ot){Le(ot.message)}})},sr.API)sr.API.hasOwnProperty(Uo)&&(Uo==="events"&&sr.API.events.length?function(V,Ae){var Ie,Le,He;for(He=Ae.length-1;He!==-1;He--)Ie=Ae[He][0],Le=Ae[He][1],V.subscribe.apply(V,[Ie].concat(typeof Le=="function"?[Le]:Le))}(Qr,sr.API.events):g[Uo]=sr.API[Uo]);var ml=g.getPageWidth=function(V){return(tr[V=V||K].mediaBox.topRightX-tr[V].mediaBox.bottomLeftX)/xt},ec=g.setPageWidth=function(V,Ae){tr[V].mediaBox.topRightX=Ae*xt+tr[V].mediaBox.bottomLeftX},js=g.getPageHeight=function(V){return(tr[V=V||K].mediaBox.topRightY-tr[V].mediaBox.bottomLeftY)/xt},Vc=g.setPageHeight=function(V,Ae){tr[V].mediaBox.topRightY=Ae*xt+tr[V].mediaBox.bottomLeftY};return g.internal={pdfEscape:dn,getStyle:mi,getFont:Ra,getFontSize:ut,getCharSpace:Qc,getTextColor:Oc,getLineHeight:Wl,getLineHeightFactor:qi,getLineWidth:lo,write:ze,getHorizontalCoordinate:Ps,getVerticalCoordinate:Da,getCoordinateString:WA,getVerticalCoordinateString:Al,collections:{},newObject:Un,newAdditionalObject:Ne,newObjectDeferred:Kn,newObjectDeferredBegin:fe,getFilters:qe,putStream:rt,events:Qr,scaleFactor:xt,pageSize:{getWidth:function(){return ml(K)},setWidth:function(V){ec(K,V)},getHeight:function(){return js(K)},setHeight:function(V){Vc(K,V)}},encryptionOptions:d,encryption:Mn,getEncryptor:Ro,output:Fo,getNumberOfPages:Cn,pages:xe,out:Ce,f2:O,f3:F,getPageInfo:ao,getPageInfoByObjId:fr,getCurrentPageInfo:so,getPDFVersion:w,Point:Jl,Rectangle:Hc,Matrix:Qt,hasHotfix:no},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return ml(K)},set:function(V){ec(K,V)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return js(K)},set:function(V){Vc(K,V)},enumerable:!0,configurable:!0}),Pu.call(g,it),kt="F1",il(a,r),Qr.publish("initialized"),g}V0.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},V0.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},V0.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},V0.prototype.processOwnerPassword=function(t,e){return G_(z_(e).substr(0,5),t)},V0.prototype.encryptor=function(t,e){var r=z_(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return G_(r,n)}},ry.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Vn(t)!==Vn(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},sr.API={events:[]},sr.version="2.5.2";var ja=sr.API,s4=1,jh=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},w0=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ir=function(t){return t.toFixed(2)},Td=function(t){return t.toFixed(5)};ja.__acroform__={};var No=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},tF=function(t){return t*s4},pu=function(t){var e=new yM,r=Jt.internal.getHeight(t)||0,n=Jt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Ir(n)),Number(Ir(r))],e},fie=ja.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},hie=ja.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},mie=ja.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},rs=ja.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return mie(t,e-1)},ns=ja.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return fie(t,e-1)},as=ja.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return hie(t,e-1)},pie=ja.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],s=t[1],i=t[2],o=t[3],l={};return l.lowerLeft_X=r(a)||0,l.lowerLeft_Y=n(s+o)||0,l.upperRight_X=r(a+i)||0,l.upperRight_Y=n(s)||0,[Number(Ir(l.lowerLeft_X)),Number(Ir(l.lowerLeft_Y)),Number(Ir(l.upperRight_X)),Number(Ir(l.upperRight_Y))]},gie=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=q_(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+Ir(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=pu(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},q_=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(F){return F.split(`
`)}):a.map(function(F){return[F]});var s=r,i=Jt.internal.getHeight(t)||0;i=i<0?-i:i;var o=Jt.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(F,L,Q){if(F+1<a.length){var q=L+" "+a[F+1][0];return dv(q,t,Q).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var A,d,h=dv("3",t,s).height,m=t.multiline?i-s:(i-h)/2,g=m+=2,b=0,w=0,_=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+dv(e,t,s=12).width+", FieldWidth:"+o+`
`;break}for(var N="",k=0,I=0;I<a.length;I++)if(a.hasOwnProperty(I)){var P=!1;if(a[I].length!==1&&_!==a[I].length-1){if((h+2)*(k+2)+2>i)continue e;N+=a[I][_],P=!0,w=I,I--}else{N=(N+=a[I][_]+" ").substr(N.length-1)==" "?N.substr(0,N.length-1):N;var M=parseInt(I),D=l(M,N,s),C=I>=a.length-1;if(D&&!C){N+=" ",_=0;continue}if(D||C){if(C)w=M;else if(t.multiline&&(h+2)*(k+2)+2>i)continue e}else{if(!t.multiline||(h+2)*(k+2)+2>i)continue e;w=M}}for(var B="",T=b;T<=w;T++){var O=a[T];if(t.multiline){if(T===w){B+=O[_]+" ",_=(_+1)%O.length;continue}if(T===b){B+=O[O.length-1]+" ";continue}}B+=O[0]+" "}switch(B=B.substr(B.length-1)==" "?B.substr(0,B.length-1):B,d=dv(B,t,s).width,t.textAlign){case"right":A=o-d-2;break;case"center":A=(o-d)/2;break;case"left":default:A=2}e+=Ir(A)+" "+Ir(g)+` Td
`,e+="("+jh(B)+`) Tj
`,e+=-Ir(A)+` 0 Td
`,g=-(s+2),d=0,b=P?w:w+1,k++,N=""}break}return n.text=e,n.fontSize=s,n},dv=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},xie={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},vie=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},yie=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,a=t[r];e.internal.newObjectDeferredBegin(a.objId,!0),Vn(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete t[n]}},wie=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Rc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(xie)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");s4=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new wM,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&vie(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var i in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var o=n[i],l=[],A=o.Rect;if(o.Rect&&(o.Rect=pie(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Jt.createDefaultAppearanceStream(o),Vn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=A,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=gie(o);l.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var h="";for(var m in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(m)){var g=o.appearanceStreamContent[m];if(h+="/"+m+" ",h+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var i in g)if(g.hasOwnProperty(i)){var b=g[i];typeof b=="function"&&(b=b.call(a,o)),h+="/"+i+" "+b+" ",a.internal.acroformPlugin.xForms.indexOf(b)>=0||a.internal.acroformPlugin.xForms.push(b)}}else typeof(b=g)=="function"&&(b=b.call(a,o)),h+="/"+i+" "+b,a.internal.acroformPlugin.xForms.indexOf(b)>=0||a.internal.acroformPlugin.xForms.push(b);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}a.internal.putStream({additionalKeyValues:l,objectId:o.objId}),a.internal.out("endobj")}s&&yie(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},vM=ja.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(i){return i};if(Array.isArray(t)){for(var a="[",s=0;s<t.length;s++)switch(s!==0&&(a+=" "),Vn(t[s])){case"boolean":case"number":case"object":a+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),a+="("+jh(n(t[s].toString()))+")"):a+=t[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},VC=function(t,e,r){var n=function(a){return a};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+jh(n(t))+")"},wu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};wu.prototype.toString=function(){return this.objId+" 0 R"},wu.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},wu.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:vM(a,this.objId,this.scope)}):a instanceof wu?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var yM=function(){wu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};No(yM,wu);var wM=function(){wu.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+jh(r(t))+")"}},set:function(r){t=r}})};No(wM,wu);var Rc=function t(){wu.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute F supplied.');e=N}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!rs(e,3)},set:function(N){N?this.F=ns(e,3):this.F=as(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute Ff supplied.');r=N}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(N){n=N!==void 0?N:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(N){n[0]=N}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(N){n[1]=N}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(N){n[2]=N}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(N){n[3]=N}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(N){switch(N){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=N;break;default:throw new Error('Invalid value "'+N+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof ny)return;s="FieldObject"+t.FieldNum++}var N=function(k){return k};return this.scope&&(N=this.scope.internal.getEncryptor(this.objId)),"("+jh(N(s))+")"},set:function(N){s=N.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(N){s=N}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(N){i=N}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(N){o=N}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(N){l=N}});var A=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return A===void 0?50/s4:A},set:function(N){A=N}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(N){d=N}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof ny||this instanceof fh))return VC(h,this.objId,this.scope)},set:function(N){N=N.toString(),h=N}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Ks?m:VC(m,this.objId,this.scope)},set:function(N){N=N.toString(),m=this instanceof Ks?N:N.substr(0,1)==="("?w0(N.substr(1,N.length-2)):w0(N)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ks?w0(m.substr(1,m.length-1)):m},set:function(N){N=N.toString(),m=this instanceof Ks?"/"+N:N}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(N){this.V=N}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Ks?g:VC(g,this.objId,this.scope)},set:function(N){N=N.toString(),g=this instanceof Ks?N:N.substr(0,1)==="("?w0(N.substr(1,N.length-2)):w0(N)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ks?w0(g.substr(1,g.length-1)):g},set:function(N){N=N.toString(),g=this instanceof Ks?"/"+N:N}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(N){N=!!N,w=N}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(N){b=N}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,1)},set:function(N){N?this.Ff=ns(this.Ff,1):this.Ff=as(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,2)},set:function(N){N?this.Ff=ns(this.Ff,2):this.Ff=as(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,3)},set:function(N){N?this.Ff=ns(this.Ff,3):this.Ff=as(this.Ff,3)}});var _=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(_!==null)return _},set:function(N){if([0,1,2].indexOf(N)===-1)throw new Error('Invalid value "'+N+'" for attribute Q supplied.');_=N}}),Object.defineProperty(this,"textAlign",{get:function(){var N;switch(_){case 0:default:N="left";break;case 1:N="center";break;case 2:N="right"}return N},configurable:!0,enumerable:!0,set:function(N){switch(N){case"right":case 2:_=2;break;case"center":case 1:_=1;break;case"left":case 0:default:_=0}}})};No(Rc,wu);var om=function(){Rc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return vM(e,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,i,o){o||(o=1);for(var l,A=[];l=i.exec(s);)A.push(l[o]);return A}(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,18)},set:function(r){r?this.Ff=ns(this.Ff,18):this.Ff=as(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=ns(this.Ff,19):this.Ff=as(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,20)},set:function(r){r?(this.Ff=ns(this.Ff,20),e.sort()):this.Ff=as(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,22)},set:function(r){r?this.Ff=ns(this.Ff,22):this.Ff=as(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,23)},set:function(r){r?this.Ff=ns(this.Ff,23):this.Ff=as(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,27)},set:function(r){r?this.Ff=ns(this.Ff,27):this.Ff=as(this.Ff,27)}}),this.hasAppearanceStream=!1};No(om,Rc);var lm=function(){om.call(this),this.fontName="helvetica",this.combo=!1};No(lm,om);var cm=function(){lm.call(this),this.combo=!0};No(cm,lm);var x2=function(){cm.call(this),this.edit=!0};No(x2,cm);var Ks=function(){Rc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,15)},set:function(r){r?this.Ff=ns(this.Ff,15):this.Ff=as(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,16)},set:function(r){r?this.Ff=ns(this.Ff,16):this.Ff=as(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,17)},set:function(r){r?this.Ff=ns(this.Ff,17):this.Ff=as(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,26)},set:function(r){r?this.Ff=ns(this.Ff,26):this.Ff=as(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+jh(r(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Vn(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};No(Ks,Rc);var v2=function(){Ks.call(this),this.pushButton=!0};No(v2,Ks);var um=function(){Ks.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};No(um,Ks);var ny=function(){var t,e;Rc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),n)i.push("/"+s+" ("+jh(a(n[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){Vn(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Jt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};No(ny,Rc),um.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},um.prototype.createOption=function(t){var e=new ny;return e.Parent=this,e.optionName=t,this.Kids.push(e),bie.call(this.scope,e),e};var y2=function(){Ks.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Jt.CheckBox.createAppearanceStream()};No(y2,Ks);var fh=function(){Rc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,13)},set:function(e){e?this.Ff=ns(this.Ff,13):this.Ff=as(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,21)},set:function(e){e?this.Ff=ns(this.Ff,21):this.Ff=as(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,23)},set:function(e){e?this.Ff=ns(this.Ff,23):this.Ff=as(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,24)},set:function(e){e?this.Ff=ns(this.Ff,24):this.Ff=as(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,25)},set:function(e){e?this.Ff=ns(this.Ff,25):this.Ff=as(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,26)},set:function(e){e?this.Ff=ns(this.Ff,26):this.Ff=as(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};No(fh,Rc);var w2=function(){fh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,14)},set:function(t){t?this.Ff=ns(this.Ff,14):this.Ff=as(this.Ff,14)}}),this.password=!0};No(w2,fh);var Jt={CheckBox:{createAppearanceStream:function(){return{N:{On:Jt.CheckBox.YesNormal},D:{On:Jt.CheckBox.YesPushDown,Off:Jt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=pu(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),s=q_(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Ir(Jt.internal.getWidth(t))+" "+Ir(Jt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Ir(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=pu(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],s=Jt.internal.getHeight(t),i=Jt.internal.getWidth(t),o=q_(t,t.caption);return a.push("1 g"),a.push("0 0 "+Ir(i)+" "+Ir(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Ir(i-1)+" "+Ir(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Ir(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=pu(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ir(Jt.internal.getWidth(t))+" "+Ir(Jt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Jt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Jt.RadioButton.Circle.YesNormal,e.D[t]=Jt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=pu(t);e.scope=t.scope;var r=[],n=Jt.internal.getWidth(t)<=Jt.internal.getHeight(t)?Jt.internal.getWidth(t)/4:Jt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Jt.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Td(Jt.internal.getWidth(t)/2)+" "+Td(Jt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=pu(t);e.scope=t.scope;var r=[],n=Jt.internal.getWidth(t)<=Jt.internal.getHeight(t)?Jt.internal.getWidth(t)/4:Jt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Jt.internal.Bezier_C).toFixed(5)),i=Number((n*Jt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Td(Jt.internal.getWidth(t)/2)+" "+Td(Jt.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Td(Jt.internal.getWidth(t)/2)+" "+Td(Jt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=pu(t);e.scope=t.scope;var r=[],n=Jt.internal.getWidth(t)<=Jt.internal.getHeight(t)?Jt.internal.getWidth(t)/4:Jt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Jt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Td(Jt.internal.getWidth(t)/2)+" "+Td(Jt.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Jt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Jt.RadioButton.Cross.YesNormal,e.D[t]=Jt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=pu(t);e.scope=t.scope;var r=[],n=Jt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Ir(Jt.internal.getWidth(t)-2)+" "+Ir(Jt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Ir(n.x1.x)+" "+Ir(n.x1.y)+" m"),r.push(Ir(n.x2.x)+" "+Ir(n.x2.y)+" l"),r.push(Ir(n.x4.x)+" "+Ir(n.x4.y)+" m"),r.push(Ir(n.x3.x)+" "+Ir(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=pu(t);e.scope=t.scope;var r=Jt.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Ir(Jt.internal.getWidth(t))+" "+Ir(Jt.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Ir(Jt.internal.getWidth(t)-2)+" "+Ir(Jt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Ir(r.x1.x)+" "+Ir(r.x1.y)+" m"),n.push(Ir(r.x2.x)+" "+Ir(r.x2.y)+" l"),n.push(Ir(r.x4.x)+" "+Ir(r.x4.y)+" m"),n.push(Ir(r.x3.x)+" "+Ir(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=pu(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ir(Jt.internal.getWidth(t))+" "+Ir(Jt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Jt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Jt.internal.getWidth(t),r=Jt.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Jt.internal.getWidth=function(t){var e=0;return Vn(t)==="object"&&(e=tF(t.Rect[2])),e},Jt.internal.getHeight=function(t){var e=0;return Vn(t)==="object"&&(e=tF(t.Rect[3])),e};var bie=ja.addField=function(t){if(wie(this,t),!(t instanceof Rc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ja.AcroFormChoiceField=om,ja.AcroFormListBox=lm,ja.AcroFormComboBox=cm,ja.AcroFormEditBox=x2,ja.AcroFormButton=Ks,ja.AcroFormPushButton=v2,ja.AcroFormRadioButton=um,ja.AcroFormCheckBox=y2,ja.AcroFormTextField=fh,ja.AcroFormPasswordField=w2,ja.AcroFormAppearance=Jt,ja.AcroForm={ChoiceField:om,ListBox:lm,ComboBox:cm,EditBox:x2,Button:Ks,PushButton:v2,RadioButton:um,CheckBox:y2,TextField:fh,PasswordField:w2,Appearance:Jt},sr.AcroForm={ChoiceField:om,ListBox:lm,ComboBox:cm,EditBox:x2,Button:Ks,PushButton:v2,RadioButton:um,CheckBox:y2,TextField:fh,PasswordField:w2,Appearance:Jt};sr.AcroForm;function bM(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(F,L){var Q,q,ie,Z,ee,ne=e;if((L=L||e)==="RGBA"||F.data!==void 0&&F.data instanceof Uint8ClampedArray&&"height"in F&&"width"in F)return"RGBA";if(D(F))for(ee in r)for(ie=r[ee],Q=0;Q<ie.length;Q+=1){for(Z=!0,q=0;q<ie[Q].length;q+=1)if(ie[Q][q]!==void 0&&ie[Q][q]!==F[q]){Z=!1;break}if(Z===!0){ne=ee;break}}else for(ee in r)for(ie=r[ee],Q=0;Q<ie.length;Q+=1){for(Z=!0,q=0;q<ie[Q].length;q+=1)if(ie[Q][q]!==void 0&&ie[Q][q]!==F.charCodeAt(q)){Z=!1;break}if(Z===!0){ne=ee;break}}return ne===e&&L!==e&&(ne=L),ne},a=function F(L){for(var Q=this.internal.write,q=this.internal.putStream,ie=(0,this.internal.getFilters)();ie.indexOf("FlateEncode")!==-1;)ie.splice(ie.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var Z=[];if(Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Image"}),Z.push({key:"Width",value:L.width}),Z.push({key:"Height",value:L.height}),L.colorSpace===_.INDEXED?Z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(Z.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===_.DEVICE_CMYK&&Z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Z.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&Z.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)){for(var ee="",ne=0,z=L.transparency.length;ne<z;ne++)ee+=L.transparency[ne]+" "+L.transparency[ne]+" ";Z.push({key:"Mask",value:"["+ee+"]"})}L.sMask!==void 0&&Z.push({key:"SMask",value:L.objectId+1+" 0 R"});var W=L.filter!==void 0?["/"+L.filter]:void 0;if(q({data:L.data,additionalKeyValues:Z,alreadyAppliedFilters:W,objectId:L.objectId}),Q("endobj"),"sMask"in L&&L.sMask!==void 0){var ce="/Predictor "+L.predictor+" /Colors 1 /BitsPerComponent "+L.bitsPerComponent+" /Columns "+L.width,j={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:L.bitsPerComponent,decodeParameters:ce,data:L.sMask};"filter"in L&&(j.filter=L.filter),F.call(this,j)}if(L.colorSpace===_.INDEXED){var K=this.internal.newObject();q({data:B(new Uint8Array(L.palette)),objectId:K}),Q("endobj")}},s=function(){var F=this.internal.collections.addImage_images;for(var L in F)a.call(this,F[L])},i=function(){var F,L=this.internal.collections.addImage_images,Q=this.internal.write;for(var q in L)Q("/I"+(F=L[q]).index,F.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},l=function(){var F=this.internal.collections.addImage_images;return o.call(this),F},A=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(F){return typeof t["process"+F.toUpperCase()]=="function"},h=function(F){return Vn(F)==="object"&&F.nodeType===1},m=function(F,L){if(F.nodeName==="IMG"&&F.hasAttribute("src")){var Q=""+F.getAttribute("src");if(Q.indexOf("data:image/")===0)return Rg(unescape(Q).split("base64,").pop());var q=t.loadFile(Q,!0);if(q!==void 0)return q}if(F.nodeName==="CANVAS"){if(F.width===0||F.height===0)throw new Error("Given canvas must have data. Canvas width: "+F.width+", height: "+F.height);var ie;switch(L){case"PNG":ie="image/png";break;case"WEBP":ie="image/webp";break;case"JPEG":case"JPG":default:ie="image/jpeg"}return Rg(F.toDataURL(ie,1).split("base64,").pop())}},g=function(F){var L=this.internal.collections.addImage_images;if(L){for(var Q in L)if(F===L[Q].alias)return L[Q]}},b=function(F,L,Q){return F||L||(F=-96,L=-96),F<0&&(F=-1*Q.width*72/F/this.internal.scaleFactor),L<0&&(L=-1*Q.height*72/L/this.internal.scaleFactor),F===0&&(F=L*Q.width/Q.height),L===0&&(L=F*Q.height/Q.width),[F,L]},w=function(F,L,Q,q,ie,Z){var ee=b.call(this,Q,q,ie),ne=this.internal.getCoordinateString,z=this.internal.getVerticalCoordinateString,W=l.call(this);if(Q=ee[0],q=ee[1],W[ie.index]=ie,Z){Z*=Math.PI/180;var ce=Math.cos(Z),j=Math.sin(Z),K=function(te){return te.toFixed(4)},X=[K(ce),K(j),K(-1*j),K(ce),0,0,"cm"]}this.internal.write("q"),Z?(this.internal.write([1,"0","0",1,ne(F),z(L+q),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([ne(Q),"0","0",ne(q),"0","0","cm"].join(" "))):this.internal.write([ne(Q),"0","0",ne(q),ne(F),z(L+q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ie.index+" Do"),this.internal.write("Q")},_=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var N=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=t.__addimage__.sHashCode=function(F){var L,Q,q=0;if(typeof F=="string")for(Q=F.length,L=0;L<Q;L++)q=(q<<5)-q+F.charCodeAt(L),q|=0;else if(D(F))for(Q=F.byteLength/2,L=0;L<Q;L++)q=(q<<5)-q+F[L],q|=0;return q},I=t.__addimage__.validateStringAsBase64=function(F){(F=F||"").toString().trim();var L=!0;return F.length===0&&(L=!1),F.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(F.substr(0,F.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(F.substr(-2))===!1&&(L=!1),L},P=t.__addimage__.extractImageFromDataUrl=function(F){var L=(F=F||"").split("base64,"),Q=null;if(L.length===2){var q=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(L[0]);Array.isArray(q)&&(Q={mimeType:q[1],charset:q[2],data:L[1]})}return Q},M=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(F){return M()&&F instanceof ArrayBuffer};var D=t.__addimage__.isArrayBufferView=function(F){return M()&&typeof Uint32Array<"u"&&(F instanceof Int8Array||F instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&F instanceof Uint8ClampedArray||F instanceof Int16Array||F instanceof Uint16Array||F instanceof Int32Array||F instanceof Uint32Array||F instanceof Float32Array||F instanceof Float64Array)},C=t.__addimage__.binaryStringToUint8Array=function(F){for(var L=F.length,Q=new Uint8Array(L),q=0;q<L;q++)Q[q]=F.charCodeAt(q);return Q},B=t.__addimage__.arrayBufferToBinaryString=function(F){for(var L="",Q=D(F)?F:new Uint8Array(F),q=0;q<Q.length;q+=8192)L+=String.fromCharCode.apply(null,Q.subarray(q,q+8192));return L};t.addImage=function(){var F,L,Q,q,ie,Z,ee,ne,z;if(typeof arguments[1]=="number"?(L=e,Q=arguments[1],q=arguments[2],ie=arguments[3],Z=arguments[4],ee=arguments[5],ne=arguments[6],z=arguments[7]):(L=arguments[1],Q=arguments[2],q=arguments[3],ie=arguments[4],Z=arguments[5],ee=arguments[6],ne=arguments[7],z=arguments[8]),Vn(F=arguments[0])==="object"&&!h(F)&&"imageData"in F){var W=F;F=W.imageData,L=W.format||L||e,Q=W.x||Q||0,q=W.y||q||0,ie=W.w||W.width||ie,Z=W.h||W.height||Z,ee=W.alias||ee,ne=W.compression||ne,z=W.rotation||W.angle||z}var ce=this.internal.getFilters();if(ne===void 0&&ce.indexOf("FlateEncode")!==-1&&(ne="SLOW"),isNaN(Q)||isNaN(q))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var j=T.call(this,F,L,ee,ne);return w.call(this,Q,q,ie,Z,j,z),this};var T=function(F,L,Q,q){var ie,Z,ee;if(typeof F=="string"&&n(F)===e){F=unescape(F);var ne=O(F,!1);(ne!==""||(ne=t.loadFile(F,!0))!==void 0)&&(F=ne)}if(h(F)&&(F=m(F,L)),L=n(F,L),!d(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((ee=Q)==null||ee.length===0)&&(Q=function(z){return typeof z=="string"||D(z)?k(z):D(z.data)?k(z.data):null}(F)),(ie=g.call(this,Q))||(M()&&(F instanceof Uint8Array||L==="RGBA"||(Z=F,F=C(F))),ie=this["process"+L.toUpperCase()](F,A.call(this),Q,function(z){return z&&typeof z=="string"&&(z=z.toUpperCase()),z in t.image_compression?z:N.NONE}(q),Z)),!ie)throw new Error("An unknown error occurred whilst processing the image.");return ie},O=t.__addimage__.convertBase64ToBinaryString=function(F,L){var Q;L=typeof L!="boolean"||L;var q,ie="";if(typeof F=="string"){q=(Q=P(F))!==null?Q.data:F;try{ie=Rg(q)}catch(Z){if(L)throw I(q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ie};t.getImageProperties=function(F){var L,Q,q="";if(h(F)&&(F=m(F)),typeof F=="string"&&n(F)===e&&((q=O(F,!1))===""&&(q=t.loadFile(F)||""),F=q),Q=n(F),!d(Q))throw new Error("addImage does not support files of type '"+Q+"', please ensure that a plugin for '"+Q+"' support is added.");if(!M()||F instanceof Uint8Array||(F=C(F)),!(L=this["process"+Q.toUpperCase()](F)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=Q,L}})(sr.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};sr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,s,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),A=r.pageContext.annotations,d=!1,h=0;h<A.length&&!d;h++)switch((n=A[h]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var m=0;m<A.length;m++){n=A[m];var g=this.internal.pdfEscape,b=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),_=this.internal.newAdditionalObject(),N=this.internal.getEncryptor(w.objId),k=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+g(N(n.contents))+")",s+=" /Popup "+_.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+g(N(k))+") >>",w.content=s;var I=w.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+I,n.open&&(s+=" /Open true"),s+=" >>",_.content=s,this.internal.write(w.objId,"0 R",_.objId,"0 R");break;case"freetext":a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var P=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+g(b(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+P+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var M=this.annotations._nameMap[n.options.name];n.options.pageNumber=M.page,n.options.top=M.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+g(b(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var D=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+D+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,s,i){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,A=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:A(n),w:l(r+a),h:A(n+s)},options:i,type:"link"})},t.textWithLink=function(r,n,a,s){var i,o,l=this.getTextWidth(r),A=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var d=this.splitTextToSize(r,o).length;i=Math.ceil(A*d)}else o=l,i=A;return this.text(r,n,a,s),a+=.2*A,s.align==="center"&&(n-=l/2),s.align==="right"&&(n-=l),this.link(n,a-A,o,i,s),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(sr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(w){return e[w.charCodeAt(0)]!==void 0},i=t.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},o=t.__arabicParser__.isArabicEndLetter=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(w){return i(w)&&a.indexOf(w.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length>=1};var A=t.__arabicParser__.arabicLetterHasFinalForm=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(w){var _=0,N=r,k="",I=0;for(_=0;_<w.length;_+=1)N[w.charCodeAt(_)]!==void 0?(I++,typeof(N=N[w.charCodeAt(_)])=="number"&&(k+=String.fromCharCode(N),N=r,I=0),_===w.length-1&&(N=r,k+=w.charAt(_-(I-1)),_-=I-1,I=0)):(N=r,k+=w.charAt(_-I),_-=I,I=0);return k};t.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&n[w.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(w,_,N){return i(w)?s(w)===!1?-1:!A(w)||!i(_)&&!i(N)||!i(N)&&o(_)||o(w)&&!i(_)||o(w)&&l(_)||o(w)&&o(_)?0:d(w)&&i(_)&&!o(_)&&i(N)&&A(N)?3:o(w)||!i(N)?1:2:-1},g=function(w){var _=0,N=0,k=0,I="",P="",M="",D=(w=w||"").split("\\s+"),C=[];for(_=0;_<D.length;_+=1){for(C.push(""),N=0;N<D[_].length;N+=1)I=D[_][N],P=D[_][N-1],M=D[_][N+1],i(I)?(k=m(I,P,M),C[_]+=k!==-1?String.fromCharCode(e[I.charCodeAt(0)][k]):I):C[_]+=I;C[_]=h(C[_])}return C.join(" ")},b=t.__arabicParser__.processArabic=t.processArabic=function(){var w,_=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,N=[];if(Array.isArray(_)){var k=0;for(N=[],k=0;k<_.length;k+=1)Array.isArray(_[k])?N.push([g(_[k][0]),_[k][1],_[k][2]]):N.push([g(_[k])]);w=N}else w=g(_);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};t.events.push(["preProcessText",b])}(sr.API),sr.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(sr.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(w){l=w}});var A=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return A},set:function(w){A=w}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(w){h=w}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(w){m=w}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(w){g=w}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(w){b=w}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,A){n.call(this);var d=(A=A||{}).fontSize||this.getFontSize(),h=A.font||this.getFont(),m=A.scaleFactor||this.internal.scaleFactor,g=0,b=0,w=0,_=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var N=A.maxWidth;N>0?typeof l=="string"?l=this.splitTextToSize(l,N):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(I,P){return I.concat(_.splitTextToSize(P,N))},[])):l=Array.isArray(l)?l:[l];for(var k=0;k<l.length;k++)g<(w=this.getStringUnitWidth(l[k],{font:h})*d)&&(g=w);return g!==0&&(b=l.length),{w:g/=m,h:Math.max((b*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var A=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return A.lineNumber!==void 0&&(A.lineNumber===l.lineNumber?(l.x=(A.x||0)+(A.width||0),l.y=A.y||0):A.y+A.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,g&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=A.y+A.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,A,d,h,m){if(n.call(this),!d)throw new Error("No data for PDF table.");var g,b,w,_,N=[],k=[],I=[],P={},M={},D=[],C=[],B=(m=m||{}).autoSize||!1,T=m.printHeaders!==!1,O=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,F=m.margins||Object.assign({width:this.getPageWidth()},e),L=typeof m.padding=="number"?m.padding:3,Q=m.headerBackgroundColor||"#c8c8c8",q=m.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=F,this.internal.__cell__.table_font_size=O,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=Q,this.internal.__cell__.headerTextColor=q,this.setFontSize(O),h==null)k=N=Object.keys(d[0]),I=N.map(function(){return"left"});else if(Array.isArray(h)&&Vn(h[0])==="object")for(N=h.map(function(W){return W.name}),k=h.map(function(W){return W.prompt||W.name||""}),I=h.map(function(W){return W.align||"left"}),g=0;g<h.length;g+=1)M[h[g].name]=h[g].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(k=N=h,I=N.map(function(){return"left"}));if(B||Array.isArray(h)&&typeof h[0]=="string")for(g=0;g<N.length;g+=1){for(P[_=N[g]]=d.map(function(W){return W[_]}),this.setFont(void 0,"bold"),D.push(this.getTextDimensions(k[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=P[_],this.setFont(void 0,"normal"),w=0;w<b.length;w+=1)D.push(this.getTextDimensions(b[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);M[_]=Math.max.apply(null,D)+L+L,D=[]}if(T){var ie={};for(g=0;g<N.length;g+=1)ie[N[g]]={},ie[N[g]].text=k[g],ie[N[g]].align=I[g];var Z=o.call(this,ie,M);C=N.map(function(W){return new s(l,A,M[W],Z,ie[W].text,void 0,ie[W].align)}),this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}var ee=h.reduce(function(W,ce){return W[ce.name]=ce.align,W},{});for(g=0;g<d.length;g+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:g,data:d[g]},this);var ne=o.call(this,d[g],M);for(w=0;w<N.length;w+=1){var z=d[g][N[w]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:g,col:w,data:z},this),i.call(this,new s(l,A,M[N[w]],ne,z,g+2,ee[N[w]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=A,this};var o=function(l,A){var d=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(g){var b=l[g];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,A[g]-d-d)},this).map(function(g){return this.getLineHeightFactor()*g.length*h/m+d+d},this).reduce(function(g,b){return Math.max(g,b)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,A){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){d=this.internal.__cell__.tableHeaderRow[g].clone(),A&&(d.y=this.internal.__cell__.margins.top||0,m.push(d)),d.lineNumber=l;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(b)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}}(sr.API);var CM={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},EM=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],K_=bM(EM),_M=[100,200,300,400,500,600,700,800,900],Cie=bM(_M);function W_(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return CM[s=s||"normal"]?s:"normal"}(t.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),a=function(s){return typeof K_[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,r,n].join(" ")}}}function rF(t,e,r,n){var a;for(a=r;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=r;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var Eie={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},nF={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function aF(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function _ie(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},Eie,r.genericFontFamilies||{}),s=null,i=null,o=0;o<e.length;++o)if(a[(s=W_(e[o])).family]&&(s.family=a[s.family]),t.hasOwnProperty(s.family)){i=t[s.family];break}if(!(i=i||t[n]))throw new Error("Could not find a font-family for the rule '"+aF(s)+"' and default family '"+n+"'.");if(i=function(l,A){if(A[l])return A[l];var d=K_[l],h=d<=K_.normal?-1:1,m=rF(A,EM,d,h);if(!m)throw new Error("Could not find a matching font-stretch value for "+l);return m}(s.stretch,i),i=function(l,A){if(A[l])return A[l];for(var d=CM[l],h=0;h<d.length;++h)if(A[d[h]])return A[d[h]];throw new Error("Could not find a matching font-style for "+l)}(s.style,i),!(i=function(l,A){if(A[l])return A[l];if(l===400&&A[500])return A[500];if(l===500&&A[400])return A[400];var d=Cie[l],h=rF(A,_M,d,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+aF(s)+"'.");return i}function sF(t){return t.trimLeft()}function Sie(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Tie(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var fv,iF,oF,zC=["times"];(function(t){var e,r,n,a,s,i,o,l,A,d=function(j){return j=j||{},this.isStrokeTransparent=j.isStrokeTransparent||!1,this.strokeOpacity=j.strokeOpacity||1,this.strokeStyle=j.strokeStyle||"#000000",this.fillStyle=j.fillStyle||"#000000",this.isFillTransparent=j.isFillTransparent||!1,this.fillOpacity=j.fillOpacity||1,this.font=j.font||"10px sans-serif",this.textBaseline=j.textBaseline||"alphabetic",this.textAlign=j.textAlign||"left",this.lineWidth=j.lineWidth||1,this.lineJoin=j.lineJoin||"miter",this.lineCap=j.lineCap||"butt",this.path=j.path||[],this.transform=j.transform!==void 0?j.transform.clone():new l,this.globalCompositeOperation=j.globalCompositeOperation||"normal",this.globalAlpha=j.globalAlpha||1,this.clip_path=j.clip_path||[],this.currentPoint=j.currentPoint||new i,this.miterLimit=j.miterLimit||10,this.lastPoint=j.lastPoint||new i,this.lineDashOffset=j.lineDashOffset||0,this.lineDash=j.lineDash||[],this.margin=j.margin||[0,0,0,0],this.prevPageLastElemOffset=j.prevPageLastElemOffset||0,this.ignoreClearRect=typeof j.ignoreClearRect!="boolean"||j.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,A=new d}]);var h=function(j){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=j;Object.defineProperty(this,"pdf",{get:function(){return K}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(De){X=!!De}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(De){te=!!De}});var le=0;Object.defineProperty(this,"posX",{get:function(){return le},set:function(De){isNaN(De)||(le=De)}});var de=0;Object.defineProperty(this,"posY",{get:function(){return de},set:function(De){isNaN(De)||(de=De)}}),Object.defineProperty(this,"margin",{get:function(){return A.margin},set:function(De){var Ce;typeof De=="number"?Ce=[De,De,De,De]:((Ce=new Array(4))[0]=De[0],Ce[1]=De.length>=2?De[1]:Ce[0],Ce[2]=De.length>=3?De[2]:Ce[0],Ce[3]=De.length>=4?De[3]:Ce[1]),A.margin=Ce}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(De){me=De}});var ge=0;Object.defineProperty(this,"lastBreak",{get:function(){return ge},set:function(De){ge=De}});var Se=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Se},set:function(De){Se=De}}),Object.defineProperty(this,"ctx",{get:function(){return A},set:function(De){De instanceof d&&(A=De)}}),Object.defineProperty(this,"path",{get:function(){return A.path},set:function(De){A.path=De}});var xe=[];Object.defineProperty(this,"ctxStack",{get:function(){return xe},set:function(De){xe=De}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(De){var Ce;Ce=m(De),this.ctx.fillStyle=Ce.style,this.ctx.isFillTransparent=Ce.a===0,this.ctx.fillOpacity=Ce.a,this.pdf.setFillColor(Ce.r,Ce.g,Ce.b,{a:Ce.a}),this.pdf.setTextColor(Ce.r,Ce.g,Ce.b,{a:Ce.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(De){var Ce=m(De);this.ctx.strokeStyle=Ce.style,this.ctx.isStrokeTransparent=Ce.a===0,this.ctx.strokeOpacity=Ce.a,Ce.a===0?this.pdf.setDrawColor(255,255,255):(Ce.a,this.pdf.setDrawColor(Ce.r,Ce.g,Ce.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(De){["butt","round","square"].indexOf(De)!==-1&&(this.ctx.lineCap=De,this.pdf.setLineCap(De))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(De){isNaN(De)||(this.ctx.lineWidth=De,this.pdf.setLineWidth(De))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(De){["bevel","round","miter"].indexOf(De)!==-1&&(this.ctx.lineJoin=De,this.pdf.setLineJoin(De))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(De){isNaN(De)||(this.ctx.miterLimit=De,this.pdf.setMiterLimit(De))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(De){this.ctx.textBaseline=De}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(De){["right","end","center","left","start"].indexOf(De)!==-1&&(this.ctx.textAlign=De)}});var ae=null;function Fe(De,Ce){if(ae===null){var ze=function(tt){var it=[];return Object.keys(tt).forEach(function(dt){tt[dt].forEach(function(Ct){var ut=null;switch(Ct){case"bold":ut={family:dt,weight:"bold"};break;case"italic":ut={family:dt,style:"italic"};break;case"bolditalic":ut={family:dt,weight:"bold",style:"italic"};break;case"":case"normal":ut={family:dt}}ut!==null&&(ut.ref={name:dt,style:Ct},it.push(ut))})}),it}(De.getFontList());ae=function(tt){for(var it={},dt=0;dt<tt.length;++dt){var Ct=W_(tt[dt]),ut=Ct.family,Nt=Ct.stretch,It=Ct.style,Kt=Ct.weight;it[ut]=it[ut]||{},it[ut][Nt]=it[ut][Nt]||{},it[ut][Nt][It]=it[ut][Nt][It]||{},it[ut][Nt][It][Kt]=Ct}return it}(ze.concat(Ce))}return ae}var Xe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Xe},set:function(De){ae=null,Xe=De}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(De){var Ce;if(this.ctx.font=De,(Ce=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(De))!==null){var ze=Ce[1],tt=(Ce[2],Ce[3]),it=Ce[4],dt=(Ce[5],Ce[6]),Ct=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(it)[2];it=Math.floor(Ct==="px"?parseFloat(it)*this.pdf.internal.scaleFactor:Ct==="em"?parseFloat(it)*this.pdf.getFontSize():parseFloat(it)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(it);var ut=function(Mt){var kt,xt,vr=[],Wt=Mt.trim();if(Wt==="")return zC;if(Wt in nF)return[nF[Wt]];for(;Wt!=="";){switch(xt=null,kt=(Wt=sF(Wt)).charAt(0)){case'"':case"'":xt=Sie(Wt.substring(1),kt);break;default:xt=Tie(Wt)}if(xt===null||(vr.push(xt[0]),(Wt=sF(xt[1]))!==""&&Wt.charAt(0)!==","))return zC;Wt=Wt.replace(/^,/,"")}return vr}(dt);if(this.fontFaces){var Nt=_ie(Fe(this.pdf,this.fontFaces),ut.map(function(Mt){return{family:Mt,stretch:"normal",weight:tt,style:ze}}));this.pdf.setFont(Nt.ref.name,Nt.ref.style)}else{var It="";(tt==="bold"||parseInt(tt,10)>=700||ze==="bold")&&(It="bold"),ze==="italic"&&(It+="italic"),It.length===0&&(It="normal");for(var Kt="",Ut={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ht=0;Ht<ut.length;Ht++){if(this.pdf.internal.getFont(ut[Ht],It,{noFallback:!0,disableWarning:!0})!==void 0){Kt=ut[Ht];break}if(It==="bolditalic"&&this.pdf.internal.getFont(ut[Ht],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Kt=ut[Ht],It="bold";else if(this.pdf.internal.getFont(ut[Ht],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Kt=ut[Ht],It="normal";break}}if(Kt===""){for(var Yt=0;Yt<ut.length;Yt++)if(Ut[ut[Yt]]){Kt=Ut[ut[Yt]];break}}Kt=Kt===""?"Times":Kt,this.pdf.setFont(Kt,It)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(De){this.ctx.globalCompositeOperation=De}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(De){this.ctx.globalAlpha=De}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(De){this.ctx.lineDashOffset=De,ce.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(De){this.ctx.lineDash=De,ce.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(De){this.ctx.ignoreClearRect=!!De}})};h.prototype.setLineDash=function(j){this.lineDash=j},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){P.call(this,"fill",!1)},h.prototype.stroke=function(){P.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(j,K){if(isNaN(j)||isNaN(K))throw ra.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new i(j,K));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new i(j,K)},h.prototype.closePath=function(){var j=new i(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&Vn(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){j=new i(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(j.x,j.y)},h.prototype.lineTo=function(j,K){if(isNaN(j)||isNaN(K))throw ra.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new i(j,K));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new i(X.x,X.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),P.call(this,null,!0)},h.prototype.quadraticCurveTo=function(j,K,X,te){if(isNaN(X)||isNaN(te)||isNaN(j)||isNaN(K))throw ra.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var le=this.ctx.transform.applyToPoint(new i(X,te)),de=this.ctx.transform.applyToPoint(new i(j,K));this.path.push({type:"qct",x1:de.x,y1:de.y,x:le.x,y:le.y}),this.ctx.lastPoint=new i(le.x,le.y)},h.prototype.bezierCurveTo=function(j,K,X,te,le,de){if(isNaN(le)||isNaN(de)||isNaN(j)||isNaN(K)||isNaN(X)||isNaN(te))throw ra.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new i(le,de)),ge=this.ctx.transform.applyToPoint(new i(j,K)),Se=this.ctx.transform.applyToPoint(new i(X,te));this.path.push({type:"bct",x1:ge.x,y1:ge.y,x2:Se.x,y2:Se.y,x:me.x,y:me.y}),this.ctx.lastPoint=new i(me.x,me.y)},h.prototype.arc=function(j,K,X,te,le,de){if(isNaN(j)||isNaN(K)||isNaN(X)||isNaN(te)||isNaN(le))throw ra.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(de=!!de,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new i(j,K));j=me.x,K=me.y;var ge=this.ctx.transform.applyToPoint(new i(0,X)),Se=this.ctx.transform.applyToPoint(new i(0,0));X=Math.sqrt(Math.pow(ge.x-Se.x,2)+Math.pow(ge.y-Se.y,2))}Math.abs(le-te)>=2*Math.PI&&(te=0,le=2*Math.PI),this.path.push({type:"arc",x:j,y:K,radius:X,startAngle:te,endAngle:le,counterclockwise:de})},h.prototype.arcTo=function(j,K,X,te,le){throw new Error("arcTo not implemented.")},h.prototype.rect=function(j,K,X,te){if(isNaN(j)||isNaN(K)||isNaN(X)||isNaN(te))throw ra.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(j,K),this.lineTo(j+X,K),this.lineTo(j+X,K+te),this.lineTo(j,K+te),this.lineTo(j,K),this.lineTo(j+X,K),this.lineTo(j,K)},h.prototype.fillRect=function(j,K,X,te){if(isNaN(j)||isNaN(K)||isNaN(X)||isNaN(te))throw ra.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var le={};this.lineCap!=="butt"&&(le.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(le.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(j,K,X,te),this.fill(),le.hasOwnProperty("lineCap")&&(this.lineCap=le.lineCap),le.hasOwnProperty("lineJoin")&&(this.lineJoin=le.lineJoin)}},h.prototype.strokeRect=function(j,K,X,te){if(isNaN(j)||isNaN(K)||isNaN(X)||isNaN(te))throw ra.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(j,K,X,te),this.stroke())},h.prototype.clearRect=function(j,K,X,te){if(isNaN(j)||isNaN(K)||isNaN(X)||isNaN(te))throw ra.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(j,K,X,te))},h.prototype.save=function(j){j=typeof j!="boolean"||j;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),j){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},h.prototype.restore=function(j){j=typeof j!="boolean"||j;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(K),j&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(j){var K,X,te,le;if(j.isCanvasGradient===!0&&(j=j.getColor()),!j)return{r:0,g:0,b:0,a:0,style:j};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(j))K=0,X=0,te=0,le=0;else{var de=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(j);if(de!==null)K=parseInt(de[1]),X=parseInt(de[2]),te=parseInt(de[3]),le=1;else if((de=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(j))!==null)K=parseInt(de[1]),X=parseInt(de[2]),te=parseInt(de[3]),le=parseFloat(de[4]);else{if(le=1,typeof j=="string"&&j.charAt(0)!=="#"){var me=new pM(j);j=me.ok?me.toHex():"#000000"}j.length===4?(K=j.substring(1,2),K+=K,X=j.substring(2,3),X+=X,te=j.substring(3,4),te+=te):(K=j.substring(1,3),X=j.substring(3,5),te=j.substring(5,7)),K=parseInt(K,16),X=parseInt(X,16),te=parseInt(te,16)}}return{r:K,g:X,b:te,a:le,style:j}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(j,K,X,te){if(isNaN(K)||isNaN(X)||typeof j!="string")throw ra.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!g.call(this)){var le=ne(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;L.call(this,{text:j,x:K,y:X,scale:de,angle:le,align:this.textAlign,maxWidth:te})}},h.prototype.strokeText=function(j,K,X,te){if(isNaN(K)||isNaN(X)||typeof j!="string")throw ra.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){te=isNaN(te)?void 0:te;var le=ne(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;L.call(this,{text:j,x:K,y:X,scale:de,renderingMode:"stroke",angle:le,align:this.textAlign,maxWidth:te})}},h.prototype.measureText=function(j){if(typeof j!="string")throw ra.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,X=this.pdf.internal.scaleFactor,te=K.internal.getFontSize(),le=K.getStringUnitWidth(j)*te/K.internal.scaleFactor,de=function(me){var ge=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ge}}),this};return new de({width:le*=Math.round(96*X/72*1e4)/1e4})},h.prototype.scale=function(j,K){if(isNaN(j)||isNaN(K))throw ra.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new l(j,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},h.prototype.rotate=function(j){if(isNaN(j))throw ra.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new l(Math.cos(j),Math.sin(j),-Math.sin(j),Math.cos(j),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},h.prototype.translate=function(j,K){if(isNaN(j)||isNaN(K))throw ra.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new l(1,0,0,1,j,K);this.ctx.transform=this.ctx.transform.multiply(X)},h.prototype.transform=function(j,K,X,te,le,de){if(isNaN(j)||isNaN(K)||isNaN(X)||isNaN(te)||isNaN(le)||isNaN(de))throw ra.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new l(j,K,X,te,le,de);this.ctx.transform=this.ctx.transform.multiply(me)},h.prototype.setTransform=function(j,K,X,te,le,de){j=isNaN(j)?1:j,K=isNaN(K)?0:K,X=isNaN(X)?0:X,te=isNaN(te)?1:te,le=isNaN(le)?0:le,de=isNaN(de)?0:de,this.ctx.transform=new l(j,K,X,te,le,de)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(j,K,X,te,le,de,me,ge,Se){var xe=this.pdf.getImageProperties(j),ae=1,Fe=1,Xe=1,De=1;te!==void 0&&ge!==void 0&&(Xe=ge/te,De=Se/le,ae=xe.width/te*ge/te,Fe=xe.height/le*Se/le),de===void 0&&(de=K,me=X,K=0,X=0),te!==void 0&&ge===void 0&&(ge=te,Se=le),te===void 0&&ge===void 0&&(ge=xe.width,Se=xe.height);for(var Ce,ze=this.ctx.transform.decompose(),tt=ne(ze.rotate.shx),it=new l,dt=(it=(it=(it=it.multiply(ze.translate)).multiply(ze.skew)).multiply(ze.scale)).applyToRectangle(new o(de-K*Xe,me-X*De,te*ae,le*Fe)),Ct=_.call(this,dt),ut=[],Nt=0;Nt<Ct.length;Nt+=1)ut.indexOf(Ct[Nt])===-1&&ut.push(Ct[Nt]);if(I(ut),this.autoPaging)for(var It=ut[0],Kt=ut[ut.length-1],Ut=It;Ut<Kt+1;Ut++){this.pdf.setPage(Ut);var Ht=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Yt=Ut===1?this.posY+this.margin[0]:this.margin[0],Mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],kt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xt=Ut===1?0:Mt+(Ut-2)*kt;if(this.ctx.clip_path.length!==0){var vr=this.path;Ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Ce,this.posX+this.margin[3],-xt+Yt+this.ctx.prevPageLastElemOffset),M.call(this,"fill",!0),this.path=vr}var Wt=JSON.parse(JSON.stringify(dt));Wt=k([Wt],this.posX+this.margin[3],-xt+Yt+this.ctx.prevPageLastElemOffset)[0];var un=(Ut>It||Ut<Kt)&&w.call(this);un&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ht,kt,null).clip().discardPath()),this.pdf.addImage(j,"JPEG",Wt.x,Wt.y,Wt.w,Wt.h,null,null,tt),un&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(j,"JPEG",dt.x,dt.y,dt.w,dt.h,null,null,tt)};var _=function(j,K,X){var te=[];K=K||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var le=this.posY+this.ctx.prevPageLastElemOffset;switch(j.type){default:case"mt":case"lt":te.push(Math.floor((j.y+le)/X)+1);break;case"arc":te.push(Math.floor((j.y+le-j.radius)/X)+1),te.push(Math.floor((j.y+le+j.radius)/X)+1);break;case"qct":var de=z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x,j.y);te.push(Math.floor((de.y+le)/X)+1),te.push(Math.floor((de.y+de.h+le)/X)+1);break;case"bct":var me=W(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x2,j.y2,j.x,j.y);te.push(Math.floor((me.y+le)/X)+1),te.push(Math.floor((me.y+me.h+le)/X)+1);break;case"rect":te.push(Math.floor((j.y+le)/X)+1),te.push(Math.floor((j.y+j.h+le)/X)+1)}for(var ge=0;ge<te.length;ge+=1)for(;this.pdf.internal.getNumberOfPages()<te[ge];)N.call(this);return te},N=function(){var j=this.fillStyle,K=this.strokeStyle,X=this.font,te=this.lineCap,le=this.lineWidth,de=this.lineJoin;this.pdf.addPage(),this.fillStyle=j,this.strokeStyle=K,this.font=X,this.lineCap=te,this.lineWidth=le,this.lineJoin=de},k=function(j,K,X){for(var te=0;te<j.length;te++)switch(j[te].type){case"bct":j[te].x2+=K,j[te].y2+=X;case"qct":j[te].x1+=K,j[te].y1+=X;case"mt":case"lt":case"arc":default:j[te].x+=K,j[te].y+=X}return j},I=function(j){return j.sort(function(K,X){return K-X})},P=function(j,K){for(var X,te,le=this.fillStyle,de=this.strokeStyle,me=this.lineCap,ge=this.lineWidth,Se=Math.abs(ge*this.ctx.transform.scaleX),xe=this.lineJoin,ae=JSON.parse(JSON.stringify(this.path)),Fe=JSON.parse(JSON.stringify(this.path)),Xe=[],De=0;De<Fe.length;De++)if(Fe[De].x!==void 0)for(var Ce=_.call(this,Fe[De]),ze=0;ze<Ce.length;ze+=1)Xe.indexOf(Ce[ze])===-1&&Xe.push(Ce[ze]);for(var tt=0;tt<Xe.length;tt++)for(;this.pdf.internal.getNumberOfPages()<Xe[tt];)N.call(this);if(I(Xe),this.autoPaging)for(var it=Xe[0],dt=Xe[Xe.length-1],Ct=it;Ct<dt+1;Ct++){this.pdf.setPage(Ct),this.fillStyle=le,this.strokeStyle=de,this.lineCap=me,this.lineWidth=Se,this.lineJoin=xe;var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Nt=Ct===1?this.posY+this.margin[0]:this.margin[0],It=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Kt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ut=Ct===1?0:It+(Ct-2)*Kt;if(this.ctx.clip_path.length!==0){var Ht=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(X,this.posX+this.margin[3],-Ut+Nt+this.ctx.prevPageLastElemOffset),M.call(this,j,!0),this.path=Ht}if(te=JSON.parse(JSON.stringify(ae)),this.path=k(te,this.posX+this.margin[3],-Ut+Nt+this.ctx.prevPageLastElemOffset),K===!1||Ct===0){var Yt=(Ct>it||Ct<dt)&&w.call(this);Yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,Kt,null).clip().discardPath()),M.call(this,j,K),Yt&&this.pdf.restoreGraphicsState()}this.lineWidth=ge}else this.lineWidth=Se,M.call(this,j,K),this.lineWidth=ge;this.path=ae},M=function(j,K){if((j!=="stroke"||K||!b.call(this))&&(j==="stroke"||K||!g.call(this))){for(var X,te,le=[],de=this.path,me=0;me<de.length;me++){var ge=de[me];switch(ge.type){case"begin":le.push({begin:!0});break;case"close":le.push({close:!0});break;case"mt":le.push({start:ge,deltas:[],abs:[]});break;case"lt":var Se=le.length;if(de[me-1]&&!isNaN(de[me-1].x)&&(X=[ge.x-de[me-1].x,ge.y-de[me-1].y],Se>0)){for(;Se>=0;Se--)if(le[Se-1].close!==!0&&le[Se-1].begin!==!0){le[Se-1].deltas.push(X),le[Se-1].abs.push(ge);break}}break;case"bct":X=[ge.x1-de[me-1].x,ge.y1-de[me-1].y,ge.x2-de[me-1].x,ge.y2-de[me-1].y,ge.x-de[me-1].x,ge.y-de[me-1].y],le[le.length-1].deltas.push(X);break;case"qct":var xe=de[me-1].x+2/3*(ge.x1-de[me-1].x),ae=de[me-1].y+2/3*(ge.y1-de[me-1].y),Fe=ge.x+2/3*(ge.x1-ge.x),Xe=ge.y+2/3*(ge.y1-ge.y),De=ge.x,Ce=ge.y;X=[xe-de[me-1].x,ae-de[me-1].y,Fe-de[me-1].x,Xe-de[me-1].y,De-de[me-1].x,Ce-de[me-1].y],le[le.length-1].deltas.push(X);break;case"arc":le.push({deltas:[],abs:[],arc:!0}),Array.isArray(le[le.length-1].abs)&&le[le.length-1].abs.push(ge)}}te=K?null:j==="stroke"?"stroke":"fill";for(var ze=!1,tt=0;tt<le.length;tt++)if(le[tt].arc)for(var it=le[tt].abs,dt=0;dt<it.length;dt++){var Ct=it[dt];Ct.type==="arc"?B.call(this,Ct.x,Ct.y,Ct.radius,Ct.startAngle,Ct.endAngle,Ct.counterclockwise,void 0,K,!ze):Q.call(this,Ct.x,Ct.y),ze=!0}else if(le[tt].close===!0)this.pdf.internal.out("h"),ze=!1;else if(le[tt].begin!==!0){var ut=le[tt].start.x,Nt=le[tt].start.y;q.call(this,le[tt].deltas,ut,Nt),ze=!0}te&&T.call(this,te),K&&O.call(this)}},D=function(j){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return j-X;case"top":return j+K-X;case"hanging":return j+K-2*X;case"middle":return j+K/2-X;case"ideographic":return j;case"alphabetic":default:return j}},C=function(j){return j+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var j=function(){};return j.colorStops=[],j.addColorStop=function(K,X){this.colorStops.push([K,X])},j.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},j.isCanvasGradient=!0,j},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var B=function(j,K,X,te,le,de,me,ge,Se){for(var xe=Z.call(this,X,te,le,de),ae=0;ae<xe.length;ae++){var Fe=xe[ae];ae===0&&(Se?F.call(this,Fe.x1+j,Fe.y1+K):Q.call(this,Fe.x1+j,Fe.y1+K)),ie.call(this,j,K,Fe.x2,Fe.y2,Fe.x3,Fe.y3,Fe.x4,Fe.y4)}ge?O.call(this):T.call(this,me)},T=function(j){switch(j){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},O=function(){this.pdf.clip(),this.pdf.discardPath()},F=function(j,K){this.pdf.internal.out(r(j)+" "+n(K)+" m")},L=function(j){var K;switch(j.align){case"right":case"end":K="right";break;case"center":K="center";break;case"left":case"start":default:K="left"}var X=this.pdf.getTextDimensions(j.text),te=D.call(this,j.y),le=C.call(this,te)-X.h,de=this.ctx.transform.applyToPoint(new i(j.x,te)),me=this.ctx.transform.decompose(),ge=new l;ge=(ge=(ge=ge.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var Se,xe,ae,Fe=this.ctx.transform.applyToRectangle(new o(j.x,te,X.w,X.h)),Xe=ge.applyToRectangle(new o(j.x,le,X.w,X.h)),De=_.call(this,Xe),Ce=[],ze=0;ze<De.length;ze+=1)Ce.indexOf(De[ze])===-1&&Ce.push(De[ze]);if(I(Ce),this.autoPaging)for(var tt=Ce[0],it=Ce[Ce.length-1],dt=tt;dt<it+1;dt++){this.pdf.setPage(dt);var Ct=dt===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[2],It=Nt-this.margin[0],Kt=this.pdf.internal.pageSize.width-this.margin[1],Ut=Kt-this.margin[3],Ht=dt===1?0:ut+(dt-2)*It;if(this.ctx.clip_path.length!==0){var Yt=this.path;Se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Se,this.posX+this.margin[3],-1*Ht+Ct),M.call(this,"fill",!0),this.path=Yt}var Mt=k([JSON.parse(JSON.stringify(Xe))],this.posX+this.margin[3],-Ht+Ct+this.ctx.prevPageLastElemOffset)[0];j.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*j.scale),ae=this.lineWidth,this.lineWidth=ae*j.scale);var kt=this.autoPaging!=="text";if(kt||Mt.y+Mt.h<=Nt){if(kt||Mt.y>=Ct&&Mt.x<=Kt){var xt=kt?j.text:this.pdf.splitTextToSize(j.text,j.maxWidth||Kt-Mt.x)[0],vr=k([JSON.parse(JSON.stringify(Fe))],this.posX+this.margin[3],-Ht+Ct+this.ctx.prevPageLastElemOffset)[0],Wt=kt&&(dt>tt||dt<it)&&w.call(this);Wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ut,It,null).clip().discardPath()),this.pdf.text(xt,vr.x,vr.y,{angle:j.angle,align:K,renderingMode:j.renderingMode}),Wt&&this.pdf.restoreGraphicsState()}}else Mt.y<Nt&&(this.ctx.prevPageLastElemOffset+=Nt-Mt.y);j.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=ae)}else j.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*j.scale),ae=this.lineWidth,this.lineWidth=ae*j.scale),this.pdf.text(j.text,de.x+this.posX,de.y+this.posY,{angle:j.angle,align:K,renderingMode:j.renderingMode,maxWidth:j.maxWidth}),j.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=ae)},Q=function(j,K,X,te){X=X||0,te=te||0,this.pdf.internal.out(r(j+X)+" "+n(K+te)+" l")},q=function(j,K,X){return this.pdf.lines(j,K,X,null,null)},ie=function(j,K,X,te,le,de,me,ge){this.pdf.internal.out([e(a(X+j)),e(s(te+K)),e(a(le+j)),e(s(de+K)),e(a(me+j)),e(s(ge+K)),"c"].join(" "))},Z=function(j,K,X,te){for(var le=2*Math.PI,de=Math.PI/2;K>X;)K-=le;var me=Math.abs(X-K);me<le&&te&&(me=le-me);for(var ge=[],Se=te?-1:1,xe=K;me>1e-5;){var ae=xe+Se*Math.min(me,de);ge.push(ee.call(this,j,xe,ae)),me-=Math.abs(ae-xe),xe=ae}return ge},ee=function(j,K,X){var te=(X-K)/2,le=j*Math.cos(te),de=j*Math.sin(te),me=le,ge=-de,Se=me*me+ge*ge,xe=Se+me*le+ge*de,ae=4/3*(Math.sqrt(2*Se*xe)-xe)/(me*de-ge*le),Fe=me-ae*ge,Xe=ge+ae*me,De=Fe,Ce=-Xe,ze=te+K,tt=Math.cos(ze),it=Math.sin(ze);return{x1:j*Math.cos(K),y1:j*Math.sin(K),x2:Fe*tt-Xe*it,y2:Fe*it+Xe*tt,x3:De*tt-Ce*it,y3:De*it+Ce*tt,x4:j*Math.cos(X),y4:j*Math.sin(X)}},ne=function(j){return 180*j/Math.PI},z=function(j,K,X,te,le,de){var me=j+.5*(X-j),ge=K+.5*(te-K),Se=le+.5*(X-le),xe=de+.5*(te-de),ae=Math.min(j,le,me,Se),Fe=Math.max(j,le,me,Se),Xe=Math.min(K,de,ge,xe),De=Math.max(K,de,ge,xe);return new o(ae,Xe,Fe-ae,De-Xe)},W=function(j,K,X,te,le,de,me,ge){var Se,xe,ae,Fe,Xe,De,Ce,ze,tt,it,dt,Ct,ut,Nt,It=X-j,Kt=te-K,Ut=le-X,Ht=de-te,Yt=me-le,Mt=ge-de;for(xe=0;xe<41;xe++)tt=(Ce=(ae=j+(Se=xe/40)*It)+Se*((Xe=X+Se*Ut)-ae))+Se*(Xe+Se*(le+Se*Yt-Xe)-Ce),it=(ze=(Fe=K+Se*Kt)+Se*((De=te+Se*Ht)-Fe))+Se*(De+Se*(de+Se*Mt-De)-ze),xe==0?(dt=tt,Ct=it,ut=tt,Nt=it):(dt=Math.min(dt,tt),Ct=Math.min(Ct,it),ut=Math.max(ut,tt),Nt=Math.max(Nt,it));return new o(Math.round(dt),Math.round(Ct),Math.round(ut-dt),Math.round(Nt-Ct))},ce=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var j,K,X=(j=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:j,lineDashOffset:K}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(sr.API),function(t){var e=function(s){var i,o,l,A,d,h,m,g,b,w;for(o=[],l=0,A=(s+=i="\0\0\0\0".slice(s.length%4||4)).length;A>l;l+=4)(d=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(h=(d=((d=((d=((d=(d-(w=d%85))/85)-(b=d%85))/85)-(g=d%85))/85)-(m=d%85))/85)%85,o.push(h+33,m+33,g+33,b+33,w+33)):o.push(122);return function(_,N){for(var k=N;k>0;k--)_.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},r=function(s){var i,o,l,A,d,h=String,m="length",g=255,b="charCodeAt",w="slice",_="replace";for(s[w](-2),s=s[w](0,-2)[_](/\s/g,"")[_]("z","!!!!!"),l=[],A=0,d=(s+=i="uuuuu"[w](s[m]%5||5))[m];d>A;A+=5)o=52200625*(s[b](A)-33)+614125*(s[b](A+1)-33)+7225*(s[b](A+2)-33)+85*(s[b](A+3)-33)+(s[b](A+4)-33),l.push(g&o>>24,g&o>>16,g&o>>8,g&o);return function(N,k){for(var I=k;I>0;I--)N.pop()}(l,i[m]),h.fromCharCode.apply(h,l)},n=function(s){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),i.test(s)===!1)return"";for(var o="",l=0;l<s.length;l+=2)o+=String.fromCharCode("0x"+(s[l]+s[l+1]));return o},a=function(s){for(var i=new Uint8Array(s.length),o=s.length;o--;)i[o]=s.charCodeAt(o);return s=(i=H_(i)).reduce(function(l,A){return l+String.fromCharCode(A)},"")};t.processDataByFilters=function(s,i){var o=0,l=s||"",A=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":l=r(l),A.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),A.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),A.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",A.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=a(l),A.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:l,reverseChain:A.reverse().join(" ")}}}(sr.API),function(t){t.loadFile=function(e,r,n){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(l,A,d){var h=new XMLHttpRequest,m=0,g=function(b){var w=b.length,_=[],N=String.fromCharCode;for(m=0;m<w;m+=1)_.push(N(255&b.charCodeAt(m)));return _.join("")};if(h.open("GET",l,!A),h.overrideMimeType("text/plain; charset=x-user-defined"),A===!1&&(h.onload=function(){h.status===200?d(g(this.responseText)):d(void 0)}),h.send(null),A&&h.status===200)return g(h.responseText)}(a,s,i)}catch{}return o}(e,r,n)},t.loadImageFile=t.loadFile}(sr.API),function(t){function e(){return(wr.html2canvas?Promise.resolve(wr.html2canvas):M_(()=>Promise.resolve().then(()=>yCe),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function r(){return(wr.DOMPurify?Promise.resolve(wr.DOMPurify):M_(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var n=function(i){var o=Vn(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},a=function(i,o){var l=document.createElement(i);for(var A in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[A]=o.style[A];return l},s=function i(o){var l=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),A=i.convert(Promise.resolve(),l);return A=(A=A.setProgress(1,i,1,[i])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(i,o){return i.__proto__=o||s.prototype,i},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(r).then(function(l){return this.set({src:a("div",{innerHTML:i,dompurify:l})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},s.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(A,d){for(var h=A.nodeType===3?document.createTextNode(A.nodeValue):A.cloneNode(!1),m=A.firstChild;m;m=m.nextSibling)d!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||h.appendChild(l(m,d));return A.nodeType===1&&(A.nodeName==="CANVAS"?(h.width=A.width,h.height=A.height,h.getContext("2d").drawImage(A,0,0)):A.nodeName!=="TEXTAREA"&&A.nodeName!=="SELECT"||(h.value=A.value),h.addEventListener("load",function(){h.scrollTop=A.scrollTop,h.scrollLeft=A.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=this.opt.jsPDF,A=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=A,A)for(var m=0;m<A.length;++m){var g=A[m],b=g.src.find(function(w){return w.format==="truetype"});b&&l.addFont(b.url,g.ref.name,g.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),o(this.prop.container,h)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(i,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},s.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},s.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},s.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(i){if(n(i)!=="object")return this;var o=Object.keys(i||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=i[l]};switch(l){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[l]=i[l]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(i,o){return this.then(function(){var l=i in s.template.prop?this.prop[i]:this.opt[i];return o?o(l):l})},s.prototype.setMargin=function(i){return this.then(function(){switch(n(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},s.prototype.setPageSize=function(i){function o(l,A){return Math.floor(l*A/72*96)}return this.then(function(){(i=i||sr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},s.prototype.setProgress=function(i,o,l,A){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),A!=null&&(this.progress.stack=A),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(i,o,l,A){return this.setProgress(i?this.progress.val+i:null,o||null,l?this.progress.n+l:null,A?this.progress.stack.concat(A):null)},s.prototype.then=function(i,o){var l=this;return this.thenCore(i,o,function(A,d){return l.updateProgress(null,null,1,[A]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,A),h}).then(A,d).then(function(h){return l.updateProgress(1),h})})},s.prototype.thenCore=function(i,o,l){l=l||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var A=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=l.call(A,i,o);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},s.prototype.thenList=function(i){var o=this;return i.forEach(function(l){o=o.thenCore(l)}),o},s.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return s.convert(o,this)},s.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},s.prototype.error=function(i){return this.then(function(){throw new Error(i)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,sr.getPageSize=function(i,o,l){if(Vn(i)==="object"){var A=i;i=A.orientation,o=A.unit||o,l=A.format||l}o=o||"mm",l=l||"a4",i=(""+(i||"P")).toLowerCase();var d,h=(""+l).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var g,b=0,w=0;if(m.hasOwnProperty(h))b=m[h][1]/d,w=m[h][0]/d;else try{b=l[1],w=l[0]}catch{throw new Error("Invalid format: "+l)}if(i==="p"||i==="portrait")i="p",w>b&&(g=w,w=b,b=g);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",b>w&&(g=w,w=b,b=g)}return{width:w,height:b,unit:o,k:d,orientation:i}},t.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(W_):null;var l=new s(o);return o.worker?l:l.from(i).doCallback()}}(sr.API),sr.API.addJS=function(t){return oF=t,this.internal.events.subscribe("postPutResources",function(){fv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(fv+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),iF=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+oF+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){fv!==void 0&&iF!==void 0&&this.internal.out("/Names <</JavaScript "+fv+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],o=n.exec(i);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var A=this.internal.pages.length,d=[];for(s=0;s<A;s++){var h=r.internal.newObject();d.push(h);var m=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var g=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+g+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var i={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var i=n.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var l=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var A=0;A<n.children.length;A++)this.renderItems(n.children[A])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(sr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,s,i,o){var l,A=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(l=function(h){for(var m,g=256*h.charCodeAt(4)+h.charCodeAt(5),b=h.length,w={width:0,height:0,numcomponents:1},_=4;_<b;_+=2){if(_+=g,e.indexOf(h.charCodeAt(_+1))!==-1){m=256*h.charCodeAt(_+5)+h.charCodeAt(_+6),w={width:256*h.charCodeAt(_+7)+h.charCodeAt(_+8),height:m,numcomponents:h.charCodeAt(_+9)};break}g=256*h.charCodeAt(_+2)+h.charCodeAt(_+3)}return w}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:A,index:n,alias:a}}return d}}(sr.API);var b0,hv,lF,cF,uF,Bie=function(){var t,e,r;function n(s){var i,o,l,A,d,h,m,g,b,w,_,N,k,I;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(i=this.readUInt32(),b=(function(){var P,M;for(M=[],P=0;P<4;++P)M.push(String.fromCharCode(this.data[this.pos++]));return M}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),A=this.readUInt16()||100,h.delay=1e3*d/A,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,i-=4),s=(h!=null?h.data:void 0)||this.imgData,N=0;0<=i?N<i:N>i;0<=i?++N:--N)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((w=l-this.transparency.indexed.length)>0)for(k=0;0<=w?k<w:k>w;0<=w?++k:--k)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":m=(_=this.read(i)).indexOf(0),g=String.fromCharCode.apply(String,_.slice(0,m)),this.text[g]=String.fromCharCode.apply(String,_.slice(m+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(I=this.colorType)===4||I===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var i,o;for(o=[],i=0;0<=s?i<s:i>s;0<=s?++i:--i)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),l=0,A=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(h,m,g,b){var w,_,N,k,I,P,M,D,C,B,T,O,F,L,Q,q,ie,Z,ee,ne,z,W=Math.ceil((A.width-h)/g),ce=Math.ceil((A.height-m)/b),j=A.width==W&&A.height==ce;for(L=i*W,O=j?o:new Uint8Array(L*ce),P=s.length,F=0,_=0;F<ce&&l<P;){switch(s[l++]){case 0:for(k=ie=0;ie<L;k=ie+=1)O[_++]=s[l++];break;case 1:for(k=Z=0;Z<L;k=Z+=1)w=s[l++],I=k<i?0:O[_-i],O[_++]=(w+I)%256;break;case 2:for(k=ee=0;ee<L;k=ee+=1)w=s[l++],N=(k-k%i)/i,Q=F&&O[(F-1)*L+N*i+k%i],O[_++]=(Q+w)%256;break;case 3:for(k=ne=0;ne<L;k=ne+=1)w=s[l++],N=(k-k%i)/i,I=k<i?0:O[_-i],Q=F&&O[(F-1)*L+N*i+k%i],O[_++]=(w+Math.floor((I+Q)/2))%256;break;case 4:for(k=z=0;z<L;k=z+=1)w=s[l++],N=(k-k%i)/i,I=k<i?0:O[_-i],F===0?Q=q=0:(Q=O[(F-1)*L+N*i+k%i],q=N&&O[(F-1)*L+(N-1)*i+k%i]),M=I+Q-q,D=Math.abs(M-I),B=Math.abs(M-Q),T=Math.abs(M-q),C=D<=B&&D<=T?I:B<=T?Q:q,O[_++]=(w+C)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!j){var K=((m+F*b)*A.width+h)*i,X=F*L;for(k=0;k<W;k+=1){for(var te=0;te<i;te+=1)o[K++]=O[X++];K+=(g-1)*i}}F++}}return s=iie(s),A.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},n.prototype.decodePalette=function(){var s,i,o,l,A,d,h,m,g;for(o=this.palette,d=this.transparency.indexed||[],A=new Uint8Array((d.length||0)+o.length),l=0,s=0,i=h=0,m=o.length;h<m;i=h+=3)A[l++]=o[i],A[l++]=o[i+1],A[l++]=o[i+2],A[l++]=(g=d[s++])!=null?g:255;return A},n.prototype.copyToImageData=function(s,i){var o,l,A,d,h,m,g,b,w,_,N;if(l=this.colors,w=null,o=this.hasAlphaChannel,this.palette.length&&(w=(N=this._decodedPalette)!=null?N:this._decodedPalette=this.decodePalette(),l=4,o=!0),b=(A=s.data||s).length,h=w||i,d=m=0,l===1)for(;d<b;)g=w?4*i[d/4]:m,_=h[g++],A[d++]=_,A[d++]=_,A[d++]=_,A[d++]=o?h[g++]:255,m=g;else for(;d<b;)g=w?4*i[d/4]:m,A[d++]=h[g++],A[d++]=h[g++],A[d++]=h[g++],A[d++]=o?h[g++]:255,m=g},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(wr)==="[object Window]"){try{e=wr.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return a(),t=function(s){var i;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var i,o,l,A,d,h,m,g;if(this.animation){for(g=[],o=d=0,h=(m=this.animation.frames).length;d<h;o=++d)i=m[o],l=s.createImageData(i.width,i.height),A=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(l,A),i.imageData=l,g.push(i.image=t(l));return g}},n.prototype.renderFrame=function(s,i){var o,l,A;return o=(l=this.animation.frames)[i],A=l[i-1],i===0&&s.clearRect(0,0,this.width,this.height),(A!=null?A.disposeOp:void 0)===1?s.clearRect(A.xOffset,A.yOffset,A.width,A.height):(A!=null?A.disposeOp:void 0)===2&&s.putImageData(A.imageData,A.xOffset,A.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(s){var i,o,l,A,d,h,m=this;return o=0,h=this.animation,A=h.numFrames,l=h.frames,d=h.numPlays,(i=function(){var g,b;if(g=o++%A,b=l[g],m.renderFrame(s,g),A>1&&o/A<d)return m.animation._timeout=setTimeout(i,b.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var i,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,i=s.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Nie(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],s=a>>7,i=1<<(7&a)+1;t[e++],t[e++];var o=null,l=null;s&&(o=e,l=i,e+=3*i);var A=!0,d=[],h=0,m=null,g=0,b=null;for(this.width=r,this.height=n;A&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,b=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var w=t[e++];h=t[e++]|t[e++]<<8,m=t[e++],(1&w)==0&&(m=null),g=w>>2&7,e++;break;case 254:for(;;){if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var _=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,I=t[e++]|t[e++]<<8,P=t[e++],M=P>>6&1,D=1<<(7&P)+1,C=o,B=l,T=!1;P>>7&&(T=!0,C=e,B=D,e+=3*D);var O=e;for(e++;;){var F;if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}d.push({x:_,y:N,width:k,height:I,has_local_palette:T,palette_offset:C,palette_size:B,data_offset:O,data_length:e-O,transparent_index:m,interlaced:!!M,delay:h,disposal:g});break;case 59:A=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return b},this.frameInfo=function(L){if(L<0||L>=d.length)throw new Error("Frame index out of range.");return d[L]},this.decodeAndBlitFrameBGRA=function(L,Q){var q=this.frameInfo(L),ie=q.width*q.height,Z=new Uint8Array(ie);AF(t,q.data_offset,Z,ie);var ee=q.palette_offset,ne=q.transparent_index;ne===null&&(ne=256);var z=q.width,W=r-z,ce=z,j=4*(q.y*r+q.x),K=4*((q.y+q.height)*r+q.x),X=j,te=4*W;q.interlaced===!0&&(te+=4*r*7);for(var le=8,de=0,me=Z.length;de<me;++de){var ge=Z[de];if(ce===0&&(ce=z,(X+=te)>=K&&(te=4*W+4*r*(le-1),X=j+(z+W)*(le<<1),le>>=1)),ge===ne)X+=4;else{var Se=t[ee+3*ge],xe=t[ee+3*ge+1],ae=t[ee+3*ge+2];Q[X++]=ae,Q[X++]=xe,Q[X++]=Se,Q[X++]=255}--ce}},this.decodeAndBlitFrameRGBA=function(L,Q){var q=this.frameInfo(L),ie=q.width*q.height,Z=new Uint8Array(ie);AF(t,q.data_offset,Z,ie);var ee=q.palette_offset,ne=q.transparent_index;ne===null&&(ne=256);var z=q.width,W=r-z,ce=z,j=4*(q.y*r+q.x),K=4*((q.y+q.height)*r+q.x),X=j,te=4*W;q.interlaced===!0&&(te+=4*r*7);for(var le=8,de=0,me=Z.length;de<me;++de){var ge=Z[de];if(ce===0&&(ce=z,(X+=te)>=K&&(te=4*W+4*r*(le-1),X=j+(z+W)*(le<<1),le>>=1)),ge===ne)X+=4;else{var Se=t[ee+3*ge],xe=t[ee+3*ge+1],ae=t[ee+3*ge+2];Q[X++]=Se,Q[X++]=xe,Q[X++]=ae,Q[X++]=255}--ce}}}function AF(t,e,r,n){for(var a=t[e++],s=1<<a,i=s+1,o=i+1,l=a+1,A=(1<<l)-1,d=0,h=0,m=0,g=t[e++],b=new Int32Array(4096),w=null;;){for(;d<16&&g!==0;)h|=t[e++]<<d,d+=8,g===1?g=t[e++]:--g;if(d<l)break;var _=h&A;if(h>>=l,d-=l,_!==s){if(_===i)break;for(var N=_<o?_:w,k=0,I=N;I>s;)I=b[I]>>8,++k;var P=I;if(m+k+(N!==_?1:0)>n)return void ra.log("Warning, gif stream longer than expected.");r[m++]=P;var M=m+=k;for(N!==_&&(r[m++]=P),I=N;k--;)I=b[I],r[--M]=255&I,I>>=8;w!==null&&o<4096&&(b[o++]=w<<8|P,o>=A+1&&l<12&&(++l,A=A<<1|1)),w=_}else o=i+1,A=(1<<(l=a+1))-1,w=null}return m!==n&&ra.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function GC(t){var e,r,n,a,s,i=Math.floor,o=new Array(64),l=new Array(64),A=new Array(64),d=new Array(64),h=new Array(65535),m=new Array(65535),g=new Array(64),b=new Array(64),w=[],_=0,N=7,k=new Array(64),I=new Array(64),P=new Array(64),M=new Array(256),D=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],B=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],F=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ie=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Z(j,K){for(var X=0,te=0,le=new Array,de=1;de<=16;de++){for(var me=1;me<=j[de];me++)le[K[te]]=[],le[K[te]][0]=X,le[K[te]][1]=de,te++,X++;X*=2}return le}function ee(j){for(var K=j[0],X=j[1]-1;X>=0;)K&1<<X&&(_|=1<<N),X--,--N<0&&(_==255?(ne(255),ne(0)):ne(_),N=7,_=0)}function ne(j){w.push(j)}function z(j){ne(j>>8&255),ne(255&j)}function W(j,K,X,te,le){for(var de,me=le[0],ge=le[240],Se=function(it,dt){var Ct,ut,Nt,It,Kt,Ut,Ht,Yt,Mt,kt,xt=0;for(Mt=0;Mt<8;++Mt){Ct=it[xt],ut=it[xt+1],Nt=it[xt+2],It=it[xt+3],Kt=it[xt+4],Ut=it[xt+5],Ht=it[xt+6];var vr=Ct+(Yt=it[xt+7]),Wt=Ct-Yt,un=ut+Ht,pr=ut-Ht,Rr=Nt+Ut,kn=Nt-Ut,Nr=It+Kt,ls=It-Kt,en=vr+Nr,ea=vr-Nr,ha=un+Rr,Lr=un-Rr;it[xt]=en+ha,it[xt+4]=en-ha;var tr=.707106781*(Lr+ea);it[xt+2]=ea+tr,it[xt+6]=ea-tr;var Qr=.382683433*((en=ls+kn)-(Lr=pr+Wt)),cs=.5411961*en+Qr,qn=1.306562965*Lr+Qr,wa=.707106781*(ha=kn+pr),Es=Wt+wa,Qt=Wt-wa;it[xt+5]=Qt+cs,it[xt+3]=Qt-cs,it[xt+1]=Es+qn,it[xt+7]=Es-qn,xt+=8}for(xt=0,Mt=0;Mt<8;++Mt){Ct=it[xt],ut=it[xt+8],Nt=it[xt+16],It=it[xt+24],Kt=it[xt+32],Ut=it[xt+40],Ht=it[xt+48];var An=Ct+(Yt=it[xt+56]),tn=Ct-Yt,In=ut+Ht,Un=ut-Ht,Kn=Nt+Ut,fe=Nt-Ut,Ne=It+Kt,Ee=It-Kt,_e=An+Ne,Te=An-Ne,ke=In+Kn,qe=In-Kn;it[xt]=_e+ke,it[xt+32]=_e-ke;var rt=.707106781*(qe+Te);it[xt+16]=Te+rt,it[xt+48]=Te-rt;var Qe=.382683433*((_e=Ee+fe)-(qe=Un+tn)),We=.5411961*_e+Qe,Je=1.306562965*qe+Qe,yt=.707106781*(ke=fe+Un),Bt=tn+yt,Pt=tn-yt;it[xt+40]=Pt+We,it[xt+24]=Pt-We,it[xt+8]=Bt+Je,it[xt+56]=Bt-Je,xt++}for(Mt=0;Mt<64;++Mt)kt=it[Mt]*dt[Mt],g[Mt]=kt>0?kt+.5|0:kt-.5|0;return g}(j,K),xe=0;xe<64;++xe)b[C[xe]]=Se[xe];var ae=b[0]-X;X=b[0],ae==0?ee(te[0]):(ee(te[m[de=32767+ae]]),ee(h[de]));for(var Fe=63;Fe>0&&b[Fe]==0;)Fe--;if(Fe==0)return ee(me),X;for(var Xe,De=1;De<=Fe;){for(var Ce=De;b[De]==0&&De<=Fe;)++De;var ze=De-Ce;if(ze>=16){Xe=ze>>4;for(var tt=1;tt<=Xe;++tt)ee(ge);ze&=15}de=32767+b[De],ee(le[(ze<<4)+m[de]]),ee(h[de]),De++}return Fe!=63&&ee(me),X}function ce(j){j=Math.min(Math.max(j,1),100),s!=j&&(function(K){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var le=i((X[te]*K+50)/100);le=Math.min(Math.max(le,1),255),o[C[te]]=le}for(var de=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var ge=i((de[me]*K+50)/100);ge=Math.min(Math.max(ge,1),255),l[C[me]]=ge}for(var Se=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],xe=0,ae=0;ae<8;ae++)for(var Fe=0;Fe<8;Fe++)A[xe]=1/(o[C[xe]]*Se[ae]*Se[Fe]*8),d[xe]=1/(l[C[xe]]*Se[ae]*Se[Fe]*8),xe++}(j<50?Math.floor(5e3/j):Math.floor(200-2*j)),s=j)}this.encode=function(j,K){K&&ce(K),w=new Array,_=0,N=7,z(65496),z(65504),z(16),ne(74),ne(70),ne(73),ne(70),ne(0),ne(1),ne(1),ne(0),z(1),z(1),ne(0),ne(0),function(){z(65499),z(132),ne(0);for(var ut=0;ut<64;ut++)ne(o[ut]);ne(1);for(var Nt=0;Nt<64;Nt++)ne(l[Nt])}(),function(ut,Nt){z(65472),z(17),ne(8),z(Nt),z(ut),ne(3),ne(1),ne(17),ne(0),ne(2),ne(17),ne(1),ne(3),ne(17),ne(1)}(j.width,j.height),function(){z(65476),z(418),ne(0);for(var ut=0;ut<16;ut++)ne(B[ut+1]);for(var Nt=0;Nt<=11;Nt++)ne(T[Nt]);ne(16);for(var It=0;It<16;It++)ne(O[It+1]);for(var Kt=0;Kt<=161;Kt++)ne(F[Kt]);ne(1);for(var Ut=0;Ut<16;Ut++)ne(L[Ut+1]);for(var Ht=0;Ht<=11;Ht++)ne(Q[Ht]);ne(17);for(var Yt=0;Yt<16;Yt++)ne(q[Yt+1]);for(var Mt=0;Mt<=161;Mt++)ne(ie[Mt])}(),z(65498),z(12),ne(3),ne(1),ne(0),ne(2),ne(17),ne(3),ne(17),ne(0),ne(63),ne(0);var X=0,te=0,le=0;_=0,N=7,this.encode.displayName="_encode_";for(var de,me,ge,Se,xe,ae,Fe,Xe,De,Ce=j.data,ze=j.width,tt=j.height,it=4*ze,dt=0;dt<tt;){for(de=0;de<it;){for(xe=it*dt+de,Fe=-1,Xe=0,De=0;De<64;De++)ae=xe+(Xe=De>>3)*it+(Fe=4*(7&De)),dt+Xe>=tt&&(ae-=it*(dt+1+Xe-tt)),de+Fe>=it&&(ae-=de+Fe-it+4),me=Ce[ae++],ge=Ce[ae++],Se=Ce[ae++],k[De]=(D[me]+D[ge+256>>0]+D[Se+512>>0]>>16)-128,I[De]=(D[me+768>>0]+D[ge+1024>>0]+D[Se+1280>>0]>>16)-128,P[De]=(D[me+1280>>0]+D[ge+1536>>0]+D[Se+1792>>0]>>16)-128;X=W(k,A,X,e,n),te=W(I,d,te,r,a),le=W(P,d,le,r,a),de+=32}dt+=8}if(N>=0){var Ct=[];Ct[1]=N+1,Ct[0]=(1<<N+1)-1,ee(Ct)}return z(65497),new Uint8Array(w)},t=t||50,function(){for(var j=String.fromCharCode,K=0;K<256;K++)M[K]=j(K)}(),e=Z(B,T),r=Z(L,Q),n=Z(O,F),a=Z(q,ie),function(){for(var j=1,K=2,X=1;X<=15;X++){for(var te=j;te<K;te++)m[32767+te]=X,h[32767+te]=[],h[32767+te][1]=X,h[32767+te][0]=te;for(var le=-(K-1);le<=-j;le++)m[32767+le]=X,h[32767+le]=[],h[32767+le][1]=X,h[32767+le][0]=K-1+le;j<<=1,K<<=1}}(),function(){for(var j=0;j<256;j++)D[j]=19595*j,D[j+256>>0]=38470*j,D[j+512>>0]=7471*j+32768,D[j+768>>0]=-11059*j,D[j+1024>>0]=-21709*j,D[j+1280>>0]=32768*j+8421375,D[j+1536>>0]=-27439*j,D[j+1792>>0]=-5329*j}(),ce(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function xc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function dF(t){function e(B){if(!B)throw Error("assert :P")}function r(B,T,O){for(var F=0;4>F;F++)if(B[T+F]!=O.charCodeAt(F))return!0;return!1}function n(B,T,O,F,L){for(var Q=0;Q<L;Q++)B[T+Q]=O[F+Q]}function a(B,T,O,F){for(var L=0;L<F;L++)B[T+L]=O}function s(B){return new Int32Array(B)}function i(B,T){for(var O=[],F=0;F<B;F++)O.push(new T);return O}function o(B,T){var O=[];return function F(L,Q,q){for(var ie=q[Q],Z=0;Z<ie&&(L.push(q.length>Q+1?[]:new T),!(q.length<Q+1));Z++)F(L[Z],Q+1,q)}(O,0,B),O}var l=function(){var B=this;function T(E,U){for(var G=1<<U-1>>>0;E&G;)G>>>=1;return G?(E&G-1)+G:E}function O(E,U,G,re,ue){e(!(re%G));do E[U+(re-=G)]=ue;while(0<re)}function F(E,U,G,re,ue){if(e(2328>=ue),512>=ue)var he=s(512);else if((he=s(ue))==null)return 0;return function(pe,ve,be,Be,Ue,Ye){var Ke,Ve,gt=ve,st=1<<be,Me=s(16),je=s(16);for(e(Ue!=0),e(Be!=null),e(pe!=null),e(0<be),Ve=0;Ve<Ue;++Ve){if(15<Be[Ve])return 0;++Me[Be[Ve]]}if(Me[0]==Ue)return 0;for(je[1]=0,Ke=1;15>Ke;++Ke){if(Me[Ke]>1<<Ke)return 0;je[Ke+1]=je[Ke]+Me[Ke]}for(Ve=0;Ve<Ue;++Ve)Ke=Be[Ve],0<Be[Ve]&&(Ye[je[Ke]++]=Ve);if(je[15]==1)return(Be=new L).g=0,Be.value=Ye[0],O(pe,gt,1,st,Be),st;var ct,vt=-1,ht=st-1,Vt=0,Lt=1,rr=1,Ot=1<<be;for(Ve=0,Ke=1,Ue=2;Ke<=be;++Ke,Ue<<=1){if(Lt+=rr<<=1,0>(rr-=Me[Ke]))return 0;for(;0<Me[Ke];--Me[Ke])(Be=new L).g=Ke,Be.value=Ye[Ve++],O(pe,gt+Vt,Ue,Ot,Be),Vt=T(Vt,Ke)}for(Ke=be+1,Ue=2;15>=Ke;++Ke,Ue<<=1){if(Lt+=rr<<=1,0>(rr-=Me[Ke]))return 0;for(;0<Me[Ke];--Me[Ke]){if(Be=new L,(Vt&ht)!=vt){for(gt+=Ot,ct=1<<(vt=Ke)-be;15>vt&&!(0>=(ct-=Me[vt]));)++vt,ct<<=1;st+=Ot=1<<(ct=vt-be),pe[ve+(vt=Vt&ht)].g=ct+be,pe[ve+vt].value=gt-ve-vt}Be.g=Ke-be,Be.value=Ye[Ve++],O(pe,gt+(Vt>>be),Ue,Ot,Be),Vt=T(Vt,Ke)}}return Lt!=2*je[15]-1?0:st}(E,U,G,re,ue,he)}function L(){this.value=this.g=0}function Q(){this.value=this.g=0}function q(){this.G=i(5,L),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(qa,Q)}function ie(E,U,G,re){e(E!=null),e(U!=null),e(2147483648>re),E.Ca=254,E.I=0,E.b=-8,E.Ka=0,E.oa=U,E.pa=G,E.Jd=U,E.Yc=G+re,E.Zc=4<=re?G+re-4+1:G,de(E)}function Z(E,U){for(var G=0;0<U--;)G|=ge(E,128)<<U;return G}function ee(E,U){var G=Z(E,U);return me(E)?-G:G}function ne(E,U,G,re){var ue,he=0;for(e(E!=null),e(U!=null),e(4294967288>re),E.Sb=re,E.Ra=0,E.u=0,E.h=0,4<re&&(re=4),ue=0;ue<re;++ue)he+=U[G+ue]<<8*ue;E.Ra=he,E.bb=re,E.oa=U,E.pa=G}function z(E){for(;8<=E.u&&E.bb<E.Sb;)E.Ra>>>=8,E.Ra+=E.oa[E.pa+E.bb]<<qu-8>>>0,++E.bb,E.u-=8;X(E)&&(E.h=1,E.u=0)}function W(E,U){if(e(0<=U),!E.h&&U<=Gu){var G=K(E)&Gc[U];return E.u+=U,z(E),G}return E.h=1,E.u=0}function ce(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function j(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function K(E){return E.Ra>>>(E.u&qu-1)>>>0}function X(E){return e(E.bb<=E.Sb),E.h||E.bb==E.Sb&&E.u>qu}function te(E,U){E.u=U,E.h=X(E)}function le(E){E.u>=XA&&(e(E.u>=XA),z(E))}function de(E){e(E!=null&&E.oa!=null),E.pa<E.Zc?(E.I=(E.oa[E.pa++]|E.I<<8)>>>0,E.b+=8):(e(E!=null&&E.oa!=null),E.pa<E.Yc?(E.b+=8,E.I=E.oa[E.pa++]|E.I<<8):E.Ka?E.b=0:(E.I<<=8,E.b+=8,E.Ka=1))}function me(E){return Z(E,1)}function ge(E,U){var G=E.Ca;0>E.b&&de(E);var re=E.b,ue=G*U>>>8,he=(E.I>>>re>ue)+0;for(he?(G-=ue,E.I-=ue+1<<re>>>0):G=ue+1,re=G,ue=0;256<=re;)ue+=8,re>>=8;return re=7^ue+vi[re],E.b-=re,E.Ca=(G<<re)-1,he}function Se(E,U,G){E[U+0]=G>>24&255,E[U+1]=G>>16&255,E[U+2]=G>>8&255,E[U+3]=G>>0&255}function xe(E,U){return E[U+0]<<0|E[U+1]<<8}function ae(E,U){return xe(E,U)|E[U+2]<<16}function Fe(E,U){return xe(E,U)|xe(E,U+2)<<16}function Xe(E,U){var G=1<<U;return e(E!=null),e(0<U),E.X=s(G),E.X==null?0:(E.Mb=32-U,E.Xa=U,1)}function De(E,U){e(E!=null),e(U!=null),e(E.Xa==U.Xa),n(U.X,0,E.X,0,1<<U.Xa)}function Ce(){this.X=[],this.Xa=this.Mb=0}function ze(E,U,G,re){e(G!=null),e(re!=null);var ue=G[0],he=re[0];return ue==0&&(ue=(E*he+U/2)/U),he==0&&(he=(U*ue+E/2)/E),0>=ue||0>=he?0:(G[0]=ue,re[0]=he,1)}function tt(E,U){return E+(1<<U)-1>>>U}function it(E,U){return((4278255360&E)+(4278255360&U)>>>0&4278255360)+((16711935&E)+(16711935&U)>>>0&16711935)>>>0}function dt(E,U){B[U]=function(G,re,ue,he,pe,ve,be){var Be;for(Be=0;Be<pe;++Be){var Ue=B[E](ve[be+Be-1],ue,he+Be);ve[be+Be]=it(G[re+Be],Ue)}}}function Ct(){this.ud=this.hd=this.jd=0}function ut(E,U){return((4278124286&(E^U))>>>1)+(E&U)>>>0}function Nt(E){return 0<=E&&256>E?E:0>E?0:255<E?255:void 0}function It(E,U){return Nt(E+(E-U+.5>>1))}function Kt(E,U,G){return Math.abs(U-G)-Math.abs(E-G)}function Ut(E,U,G,re,ue,he,pe){for(re=he[pe-1],G=0;G<ue;++G)he[pe+G]=re=it(E[U+G],re)}function Ht(E,U,G,re,ue){var he;for(he=0;he<G;++he){var pe=E[U+he],ve=pe>>8&255,be=16711935&(be=(be=16711935&pe)+((ve<<16)+ve));re[ue+he]=(4278255360&pe)+be>>>0}}function Yt(E,U){U.jd=E>>0&255,U.hd=E>>8&255,U.ud=E>>16&255}function Mt(E,U,G,re,ue,he){var pe;for(pe=0;pe<re;++pe){var ve=U[G+pe],be=ve>>>8,Be=ve,Ue=255&(Ue=(Ue=ve>>>16)+((E.jd<<24>>24)*(be<<24>>24)>>>5));Be=255&(Be=(Be=Be+((E.hd<<24>>24)*(be<<24>>24)>>>5))+((E.ud<<24>>24)*(Ue<<24>>24)>>>5)),ue[he+pe]=(4278255360&ve)+(Ue<<16)+Be}}function kt(E,U,G,re,ue){B[U]=function(he,pe,ve,be,Be,Ue,Ye,Ke,Ve){for(be=Ye;be<Ke;++be)for(Ye=0;Ye<Ve;++Ye)Be[Ue++]=ue(ve[re(he[pe++])])},B[E]=function(he,pe,ve,be,Be,Ue,Ye){var Ke=8>>he.b,Ve=he.Ea,gt=he.K[0],st=he.w;if(8>Ke)for(he=(1<<he.b)-1,st=(1<<Ke)-1;pe<ve;++pe){var Me,je=0;for(Me=0;Me<Ve;++Me)Me&he||(je=re(be[Be++])),Ue[Ye++]=ue(gt[je&st]),je>>=Ke}else B["VP8LMapColor"+G](be,Be,gt,st,Ue,Ye,pe,ve,Ve)}}function xt(E,U,G,re,ue){for(G=U+G;U<G;){var he=E[U++];re[ue++]=he>>16&255,re[ue++]=he>>8&255,re[ue++]=he>>0&255}}function vr(E,U,G,re,ue){for(G=U+G;U<G;){var he=E[U++];re[ue++]=he>>16&255,re[ue++]=he>>8&255,re[ue++]=he>>0&255,re[ue++]=he>>24&255}}function Wt(E,U,G,re,ue){for(G=U+G;U<G;){var he=(pe=E[U++])>>16&240|pe>>12&15,pe=pe>>0&240|pe>>28&15;re[ue++]=he,re[ue++]=pe}}function un(E,U,G,re,ue){for(G=U+G;U<G;){var he=(pe=E[U++])>>16&248|pe>>13&7,pe=pe>>5&224|pe>>3&31;re[ue++]=he,re[ue++]=pe}}function pr(E,U,G,re,ue){for(G=U+G;U<G;){var he=E[U++];re[ue++]=he>>0&255,re[ue++]=he>>8&255,re[ue++]=he>>16&255}}function Rr(E,U,G,re,ue,he){if(he==0)for(G=U+G;U<G;)Se(re,((he=E[U++])[0]>>24|he[1]>>8&65280|he[2]<<8&16711680|he[3]<<24)>>>0),ue+=32;else n(re,ue,E,U,G)}function kn(E,U){B[U][0]=B[E+"0"],B[U][1]=B[E+"1"],B[U][2]=B[E+"2"],B[U][3]=B[E+"3"],B[U][4]=B[E+"4"],B[U][5]=B[E+"5"],B[U][6]=B[E+"6"],B[U][7]=B[E+"7"],B[U][8]=B[E+"8"],B[U][9]=B[E+"9"],B[U][10]=B[E+"10"],B[U][11]=B[E+"11"],B[U][12]=B[E+"12"],B[U][13]=B[E+"13"],B[U][14]=B[E+"0"],B[U][15]=B[E+"0"]}function Nr(E){return E==kf||E==tu||E==sc||E==td}function ls(){this.eb=[],this.size=this.A=this.fb=0}function en(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ea(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ls,this.f.kb=new en,this.sd=null}function ha(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Lr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function tr(E){return alert("todo:WebPSamplerProcessPlane"),E.T}function Qr(E,U){var G=E.T,re=U.ba.f.RGBA,ue=re.eb,he=re.fb+E.ka*re.A,pe=hs[U.ba.S],ve=E.y,be=E.O,Be=E.f,Ue=E.N,Ye=E.ea,Ke=E.W,Ve=U.cc,gt=U.dc,st=U.Mc,Me=U.Nc,je=E.ka,ct=E.ka+E.T,vt=E.U,ht=vt+1>>1;for(je==0?pe(ve,be,null,null,Be,Ue,Ye,Ke,Be,Ue,Ye,Ke,ue,he,null,null,vt):(pe(U.ec,U.fc,ve,be,Ve,gt,st,Me,Be,Ue,Ye,Ke,ue,he-re.A,ue,he,vt),++G);je+2<ct;je+=2)Ve=Be,gt=Ue,st=Ye,Me=Ke,Ue+=E.Rc,Ke+=E.Rc,he+=2*re.A,pe(ve,(be+=2*E.fa)-E.fa,ve,be,Ve,gt,st,Me,Be,Ue,Ye,Ke,ue,he-re.A,ue,he,vt);return be+=E.fa,E.j+ct<E.o?(n(U.ec,U.fc,ve,be,vt),n(U.cc,U.dc,Be,Ue,ht),n(U.Mc,U.Nc,Ye,Ke,ht),G--):1&ct||pe(ve,be,null,null,Be,Ue,Ye,Ke,Be,Ue,Ye,Ke,ue,he+re.A,null,null,vt),G}function cs(E,U,G){var re=E.F,ue=[E.J];if(re!=null){var he=E.U,pe=U.ba.S,ve=pe==Xu||pe==sc;U=U.ba.f.RGBA;var be=[0],Be=E.ka;be[0]=E.T,E.Kb&&(Be==0?--be[0]:(--Be,ue[0]-=E.width),E.j+E.ka+E.T==E.o&&(be[0]=E.o-E.j-Be));var Ue=U.eb;Be=U.fb+Be*U.A,E=Gr(re,ue[0],E.width,he,be,Ue,Be+(ve?0:3),U.A),e(G==be),E&&Nr(pe)&&Ki(Ue,Be,ve,he,be,U.A)}return 0}function qn(E){var U=E.ma,G=U.ba.S,re=11>G,ue=G==ed||G==Nf||G==Xu||G==ac||G==12||Nr(G);if(U.memory=null,U.Ib=null,U.Jb=null,U.Nd=null,!zc(U.Oa,E,ue?11:12))return 0;if(ue&&Nr(G)&&_t(),E.da)alert("todo:use_scaling");else{if(re){if(U.Ib=tr,E.Kb){if(G=E.U+1>>1,U.memory=s(E.U+2*G),U.memory==null)return 0;U.ec=U.memory,U.fc=0,U.cc=U.ec,U.dc=U.fc+E.U,U.Mc=U.cc,U.Nc=U.dc+G,U.Ib=Qr,_t()}}else alert("todo:EmitYUV");ue&&(U.Jb=cs,re&&He())}if(re&&!i1){for(E=0;256>E;++E)ob[E]=89858*(E-128)+Wa>>Cl,Rf[E]=-22014*(E-128)+Wa,sp[E]=-45773*(E-128),$a[E]=113618*(E-128)+Wa>>Cl;for(E=au;E<Zh;++E)U=76283*(E-16)+Wa>>Cl,Df[E-au]=En(U,255),ip[E-au]=En(U+8>>4,15);i1=1}return 1}function wa(E){var U=E.ma,G=E.U,re=E.T;return e(!(1&E.ka)),0>=G||0>=re?0:(G=U.Ib(E,U),U.Jb!=null&&U.Jb(E,U,G),U.Dc+=G,1)}function Es(E){E.ma.memory=null}function Qt(E,U,G,re){return W(E,8)!=47?0:(U[0]=W(E,14)+1,G[0]=W(E,14)+1,re[0]=W(E,1),W(E,3)!=0?0:!E.h)}function An(E,U){if(4>E)return E+1;var G=E-2>>1;return(2+(1&E)<<G)+W(U,G)+1}function tn(E,U){return 120<U?U-120:1<=(G=((G=oc[U-1])>>4)*E+(8-(15&G)))?G:1;var G}function In(E,U,G){var re=K(G),ue=E[U+=255&re].g-8;return 0<ue&&(te(G,G.u+8),re=K(G),U+=E[U].value,U+=re&(1<<ue)-1),te(G,G.u+E[U].g),E[U].value}function Un(E,U,G){return G.g+=E.g,G.value+=E.value<<U>>>0,e(8>=G.g),E.g}function Kn(E,U,G){var re=E.xc;return e((U=re==0?0:E.vc[E.md*(G>>re)+(U>>re)])<E.Wb),E.Ya[U]}function fe(E,U,G,re){var ue=E.ab,he=E.c*U,pe=E.C;U=pe+U;var ve=G,be=re;for(re=E.Ta,G=E.Ua;0<ue--;){var Be=E.gc[ue],Ue=pe,Ye=U,Ke=ve,Ve=be,gt=(be=re,ve=G,Be.Ea);switch(e(Ue<Ye),e(Ye<=Be.nc),Be.hc){case 2:qh(Ke,Ve,(Ye-Ue)*gt,be,ve);break;case 0:var st=Ue,Me=Ye,je=be,ct=ve,vt=(Ot=Be).Ea;st==0&&(np(Ke,Ve,null,null,1,je,ct),Ut(Ke,Ve+1,0,0,vt-1,je,ct+1),Ve+=vt,ct+=vt,++st);for(var ht=1<<Ot.b,Vt=ht-1,Lt=tt(vt,Ot.b),rr=Ot.K,Ot=Ot.w+(st>>Ot.b)*Lt;st<Me;){var mn=rr,_n=Ot,Vr=1;for(Tf(Ke,Ve,je,ct-vt,1,je,ct);Vr<vt;){var Pr=(Vr&~Vt)+ht;Pr>vt&&(Pr=vt),(0,tc[mn[_n++]>>8&15])(Ke,Ve+ +Vr,je,ct+Vr-vt,Pr-Vr,je,ct+Vr),Vr=Pr}Ve+=vt,ct+=vt,++st&Vt||(Ot+=Lt)}Ye!=Be.nc&&n(be,ve-gt,be,ve+(Ye-Ue-1)*gt,gt);break;case 1:for(gt=Ke,Me=Ve,vt=(Ke=Be.Ea)-(ct=Ke&~(je=(Ve=1<<Be.b)-1)),st=tt(Ke,Be.b),ht=Be.K,Be=Be.w+(Ue>>Be.b)*st;Ue<Ye;){for(Vt=ht,Lt=Be,rr=new Ct,Ot=Me+ct,mn=Me+Ke;Me<Ot;)Yt(Vt[Lt++],rr),Kc(rr,gt,Me,Ve,be,ve),Me+=Ve,ve+=Ve;Me<mn&&(Yt(Vt[Lt++],rr),Kc(rr,gt,Me,vt,be,ve),Me+=vt,ve+=vt),++Ue&je||(Be+=st)}break;case 3:if(Ke==be&&Ve==ve&&0<Be.b){for(Me=be,Ke=gt=ve+(Ye-Ue)*gt-(ct=(Ye-Ue)*tt(Be.Ea,Be.b)),Ve=be,je=ve,st=[],ct=(vt=ct)-1;0<=ct;--ct)st[ct]=Ve[je+ct];for(ct=vt-1;0<=ct;--ct)Me[Ke+ct]=st[ct];uo(Be,Ue,Ye,be,gt,be,ve)}else uo(Be,Ue,Ye,Ke,Ve,be,ve)}ve=re,be=G}be!=G&&n(re,G,ve,be,he)}function Ne(E,U){var G=E.V,re=E.Ba+E.c*E.C,ue=U-E.C;if(e(U<=E.l.o),e(16>=ue),0<ue){var he=E.l,pe=E.Ta,ve=E.Ua,be=he.width;if(fe(E,ue,G,re),ue=ve=[ve],e((G=E.C)<(re=U)),e(he.v<he.va),re>he.o&&(re=he.o),G<he.j){var Be=he.j-G;G=he.j,ue[0]+=Be*be}if(G>=re?G=0:(ue[0]+=4*he.v,he.ka=G-he.j,he.U=he.va-he.v,he.T=re-G,G=1),G){if(ve=ve[0],11>(G=E.ca).S){var Ue=G.f.RGBA,Ye=(re=G.S,ue=he.U,he=he.T,Be=Ue.eb,Ue.A),Ke=he;for(Ue=Ue.fb+E.Ma*Ue.A;0<Ke--;){var Ve=pe,gt=ve,st=ue,Me=Be,je=Ue;switch(re){case Os:Js(Ve,gt,st,Me,je);break;case ed:Ns(Ve,gt,st,Me,je);break;case kf:Ns(Ve,gt,st,Me,je),Ki(Me,je,0,st,1,0);break;case vl:Mo(Ve,gt,st,Me,je);break;case Nf:Rr(Ve,gt,st,Me,je,1);break;case tu:Rr(Ve,gt,st,Me,je,1),Ki(Me,je,0,st,1,0);break;case Xu:Rr(Ve,gt,st,Me,je,0);break;case sc:Rr(Ve,gt,st,Me,je,0),Ki(Me,je,1,st,1,0);break;case ac:Wc(Ve,gt,st,Me,je);break;case td:Wc(Ve,gt,st,Me,je),zr(Me,je,st,1,0);break;case Wh:yi(Ve,gt,st,Me,je);break;default:e(0)}ve+=be,Ue+=Ye}E.Ma+=he}else alert("todo:EmitRescaledRowsYUVA");e(E.Ma<=G.height)}}E.C=U,e(E.C<=E.i)}function Ee(E){var U;if(0<E.ua)return 0;for(U=0;U<E.Wb;++U){var G=E.Ya[U].G,re=E.Ya[U].H;if(0<G[1][re[1]+0].g||0<G[2][re[2]+0].g||0<G[3][re[3]+0].g)return 0}return 1}function _e(E,U,G,re,ue,he){if(E.Z!=0){var pe=E.qd,ve=E.rd;for(e(wl[E.Z]!=null);U<G;++U)wl[E.Z](pe,ve,re,ue,re,ue,he),pe=re,ve=ue,ue+=he;E.qd=pe,E.rd=ve}}function Te(E,U){var G=E.l.ma,re=G.Z==0||G.Z==1?E.l.j:E.C;if(re=E.C<re?re:E.C,e(U<=E.l.o),U>re){var ue=E.l.width,he=G.ca,pe=G.tb+ue*re,ve=E.V,be=E.Ba+E.c*re,Be=E.gc;e(E.ab==1),e(Be[0].hc==3),qc(Be[0],re,U,ve,be,he,pe),_e(G,re,U,he,pe,ue)}E.C=E.Ma=U}function ke(E,U,G,re,ue,he,pe){var ve=E.$/re,be=E.$%re,Be=E.m,Ue=E.s,Ye=G+E.$,Ke=Ye;ue=G+re*ue;var Ve=G+re*he,gt=280+Ue.ua,st=E.Pb?ve:16777216,Me=0<Ue.ua?Ue.Wa:null,je=Ue.wc,ct=Ye<Ve?Kn(Ue,be,ve):null;e(E.C<he),e(Ve<=ue);var vt=!1;e:for(;;){for(;vt||Ye<Ve;){var ht=0;if(ve>=st){var Vt=Ye-G;e((st=E).Pb),st.wd=st.m,st.xd=Vt,0<st.s.ua&&De(st.s.Wa,st.s.vb),st=ve+n1}if(be&je||(ct=Kn(Ue,be,ve)),e(ct!=null),ct.Qb&&(U[Ye]=ct.qb,vt=!0),!vt)if(le(Be),ct.jc){ht=Be,Vt=U;var Lt=Ye,rr=ct.pd[K(ht)&qa-1];e(ct.jc),256>rr.g?(te(ht,ht.u+rr.g),Vt[Lt]=rr.value,ht=0):(te(ht,ht.u+rr.g-256),e(256<=rr.value),ht=rr.value),ht==0&&(vt=!0)}else ht=In(ct.G[0],ct.H[0],Be);if(Be.h)break;if(vt||256>ht){if(!vt)if(ct.nd)U[Ye]=(ct.qb|ht<<8)>>>0;else{if(le(Be),vt=In(ct.G[1],ct.H[1],Be),le(Be),Vt=In(ct.G[2],ct.H[2],Be),Lt=In(ct.G[3],ct.H[3],Be),Be.h)break;U[Ye]=(Lt<<24|vt<<16|ht<<8|Vt)>>>0}if(vt=!1,++Ye,++be>=re&&(be=0,++ve,pe!=null&&ve<=he&&!(ve%16)&&pe(E,ve),Me!=null))for(;Ke<Ye;)ht=U[Ke++],Me.X[(506832829*ht&4294967295)>>>Me.Mb]=ht}else if(280>ht){if(ht=An(ht-256,Be),Vt=In(ct.G[4],ct.H[4],Be),le(Be),Vt=tn(re,Vt=An(Vt,Be)),Be.h)break;if(Ye-G<Vt||ue-Ye<ht)break e;for(Lt=0;Lt<ht;++Lt)U[Ye+Lt]=U[Ye+Lt-Vt];for(Ye+=ht,be+=ht;be>=re;)be-=re,++ve,pe!=null&&ve<=he&&!(ve%16)&&pe(E,ve);if(e(Ye<=ue),be&je&&(ct=Kn(Ue,be,ve)),Me!=null)for(;Ke<Ye;)ht=U[Ke++],Me.X[(506832829*ht&4294967295)>>>Me.Mb]=ht}else{if(!(ht<gt))break e;for(vt=ht-280,e(Me!=null);Ke<Ye;)ht=U[Ke++],Me.X[(506832829*ht&4294967295)>>>Me.Mb]=ht;ht=Ye,e(!(vt>>>(Vt=Me).Xa)),U[ht]=Vt.X[vt],vt=!0}vt||e(Be.h==X(Be))}if(E.Pb&&Be.h&&Ye<ue)e(E.m.h),E.a=5,E.m=E.wd,E.$=E.xd,0<E.s.ua&&De(E.s.vb,E.s.Wa);else{if(Be.h)break e;pe!=null&&pe(E,ve>he?he:ve),E.a=0,E.$=Ye-G}return 1}return E.a=3,0}function qe(E){e(E!=null),E.vc=null,E.yc=null,E.Ya=null;var U=E.Wa;U!=null&&(U.X=null),E.vb=null,e(E!=null)}function rt(){var E=new $A;return E==null?null:(E.a=0,E.xb=rd,kn("Predictor","VP8LPredictors"),kn("Predictor","VP8LPredictors_C"),kn("PredictorAdd","VP8LPredictorsAdd"),kn("PredictorAdd","VP8LPredictorsAdd_C"),qh=Ht,Kc=Mt,Js=xt,Ns=vr,Wc=Wt,yi=un,Mo=pr,B.VP8LMapColor32b=ds,B.VP8LMapColor8b=Bf,E)}function Qe(E,U,G,re,ue){var he=1,pe=[E],ve=[U],be=re.m,Be=re.s,Ue=null,Ye=0;e:for(;;){if(G)for(;he&&W(be,1);){var Ke=pe,Ve=ve,gt=re,st=1,Me=gt.m,je=gt.gc[gt.ab],ct=W(Me,2);if(gt.Oc&1<<ct)he=0;else{switch(gt.Oc|=1<<ct,je.hc=ct,je.Ea=Ke[0],je.nc=Ve[0],je.K=[null],++gt.ab,e(4>=gt.ab),ct){case 0:case 1:je.b=W(Me,3)+2,st=Qe(tt(je.Ea,je.b),tt(je.nc,je.b),0,gt,je.K),je.K=je.K[0];break;case 3:var vt,ht=W(Me,8)+1,Vt=16<ht?0:4<ht?1:2<ht?2:3;if(Ke[0]=tt(je.Ea,Vt),je.b=Vt,vt=st=Qe(ht,1,0,gt,je.K)){var Lt,rr=ht,Ot=je,mn=1<<(8>>Ot.b),_n=s(mn);if(_n==null)vt=0;else{var Vr=Ot.K[0],Pr=Ot.w;for(_n[0]=Ot.K[0][0],Lt=1;Lt<1*rr;++Lt)_n[Lt]=it(Vr[Pr+Lt],_n[Lt-1]);for(;Lt<4*mn;++Lt)_n[Lt]=0;Ot.K[0]=null,Ot.K[0]=_n,vt=1}}st=vt;break;case 2:break;default:e(0)}he=st}}if(pe=pe[0],ve=ve[0],he&&W(be,1)&&!(he=1<=(Ye=W(be,4))&&11>=Ye)){re.a=3;break e}var Rn;if(Rn=he)t:{var Sn,Br,Pn,ur=re,yr=pe,fn=ve,pn=Ye,ms=G,Ya=ur.m,Ea=ur.s,_a=[null],Ua=1,mo=0,Tn=Zu[pn];r:for(;;){if(ms&&W(Ya,1)){var Ma=W(Ya,3)+2,Oo=tt(yr,Ma),su=tt(fn,Ma),rA=Oo*su;if(!Qe(Oo,su,0,ur,_a))break r;for(_a=_a[0],Ea.xc=Ma,Sn=0;Sn<rA;++Sn){var iu=_a[Sn]>>8&65535;_a[Sn]=iu,iu>=Ua&&(Ua=iu+1)}}if(Ya.h)break r;for(Br=0;5>Br;++Br){var aa=Wi[Br];!Br&&0<pn&&(aa+=1<<pn),mo<aa&&(mo=aa)}var Lf=i(Ua*Tn,L),e0=Ua,ei=i(e0,q);if(ei==null)var la=null;else e(65536>=e0),la=ei;var nA=s(mo);if(la==null||nA==null||Lf==null){ur.a=1;break r}var ou=Lf;for(Sn=Pn=0;Sn<Ua;++Sn){var bi=la[Sn],lu=bi.G,Ci=bi.H,Uf=0,ad=1,t0=0;for(Br=0;5>Br;++Br){aa=Wi[Br],lu[Br]=ou,Ci[Br]=Pn,!Br&&0<pn&&(aa+=1<<pn);a:{var Mf,r0=aa,Pf=ur,sd=nA,c1=ou,u1=Pn,jf=0,Ac=Pf.m,cb=W(Ac,1);if(a(sd,0,0,r0),cb){var A1=W(Ac,1)+1,d1=W(Ac,1),op=W(Ac,d1==0?1:8);sd[op]=1,A1==2&&(sd[op=W(Ac,8)]=1);var id=1}else{var lp=s(19),cp=W(Ac,4)+4;if(19<cp){Pf.a=3;var Of=0;break a}for(Mf=0;Mf<cp;++Mf)lp[ic[Mf]]=W(Ac,3);var n0=void 0,od=void 0,f1=Pf,h1=lp,dc=r0,Qf=sd,a0=0,Qo=f1.m,ld=8,up=i(128,L);n:for(;F(up,0,7,h1,19);){if(W(Qo,1)){var m1=2+2*W(Qo,3);if((n0=2+W(Qo,m1))>dc)break n}else n0=dc;for(od=0;od<dc&&n0--;){le(Qo);var Ap=up[0+(127&K(Qo))];te(Qo,Qo.u+Ap.g);var aA=Ap.value;if(16>aA)Qf[od++]=aA,aA!=0&&(ld=aA);else{var p1=aA==16,dp=aA-16,fp=ho[dp],hp=W(Qo,$h[dp])+fp;if(od+hp>dc)break n;for(var g1=p1?ld:0;0<hp--;)Qf[od++]=g1}}a0=1;break n}a0||(f1.a=3),id=a0}(id=id&&!Ac.h)&&(jf=F(c1,u1,8,sd,r0)),id&&jf!=0?Of=jf:(Pf.a=3,Of=0)}if(Of==0)break r;if(ad&&Ju[Br]==1&&(ad=ou[Pn].g==0),Uf+=ou[Pn].g,Pn+=Of,3>=Br){var sA,s0=nA[0];for(sA=1;sA<aa;++sA)nA[sA]>s0&&(s0=nA[sA]);t0+=s0}}if(bi.nd=ad,bi.Qb=0,ad&&(bi.qb=(lu[3][Ci[3]+0].value<<24|lu[1][Ci[1]+0].value<<16|lu[2][Ci[2]+0].value)>>>0,Uf==0&&256>lu[0][Ci[0]+0].value&&(bi.Qb=1,bi.qb+=lu[0][Ci[0]+0].value<<8)),bi.jc=!bi.Qb&&6>t0,bi.jc){var Hf,fc=bi;for(Hf=0;Hf<qa;++Hf){var El=Hf,hc=fc.pd[El],Vf=fc.G[0][fc.H[0]+El];256<=Vf.value?(hc.g=Vf.g+256,hc.value=Vf.value):(hc.g=0,hc.value=0,El>>=Un(Vf,8,hc),El>>=Un(fc.G[1][fc.H[1]+El],16,hc),El>>=Un(fc.G[2][fc.H[2]+El],0,hc),Un(fc.G[3][fc.H[3]+El],24,hc))}}}Ea.vc=_a,Ea.Wb=Ua,Ea.Ya=la,Ea.yc=Lf,Rn=1;break t}Rn=0}if(!(he=Rn)){re.a=3;break e}if(0<Ye){if(Be.ua=1<<Ye,!Xe(Be.Wa,Ye)){re.a=1,he=0;break e}}else Be.ua=0;var zf=re,mp=pe,x1=ve,pp=zf.s,gp=pp.xc;if(zf.c=mp,zf.i=x1,pp.md=tt(mp,gp),pp.wc=gp==0?-1:(1<<gp)-1,G){re.xb=s1;break e}if((Ue=s(pe*ve))==null){re.a=1,he=0;break e}he=(he=ke(re,Ue,0,pe,ve,ve,null))&&!be.h;break e}return he?(ue!=null?ue[0]=Ue:(e(Ue==null),e(G)),re.$=0,G||qe(Be)):qe(Be),he}function We(E,U){var G=E.c*E.i,re=G+U+16*U;return e(E.c<=U),E.V=s(re),E.V==null?(E.Ta=null,E.Ua=0,E.a=1,0):(E.Ta=E.V,E.Ua=E.Ba+G+U,1)}function Je(E,U){var G=E.C,re=U-G,ue=E.V,he=E.Ba+E.c*G;for(e(U<=E.l.o);0<re;){var pe=16<re?16:re,ve=E.l.ma,be=E.l.width,Be=be*pe,Ue=ve.ca,Ye=ve.tb+be*G,Ke=E.Ta,Ve=E.Ua;fe(E,pe,ue,he),$n(Ke,Ve,Ue,Ye,Be),_e(ve,G,G+pe,Ue,Ye,be),re-=pe,ue+=pe*E.c,G+=pe}e(G==U),E.C=E.Ma=U}function yt(){this.ub=this.yd=this.td=this.Rb=0}function Bt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Pt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Tt(){this.Yb=function(){var E=[];return function U(G,re,ue){for(var he=ue[re],pe=0;pe<he&&(G.push(ue.length>re+1?[]:0),!(ue.length<re+1));pe++)U(G[pe],re+1,ue)}(E,0,[3,11]),E}()}function Ft(){this.jb=s(3),this.Wc=o([4,8],Tt),this.Xc=o([4,17],Tt)}function cr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Ur(){this.ld=this.La=this.dd=this.tc=0}function Mr(){this.Na=this.la=0}function Hr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ia(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function fi(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ur),this.Y=0,this.ya=Array(new Ia),this.aa=0,this.l=new Ga}function Fa(){this.y=s(16),this.f=s(8),this.ea=s(8)}function us(){this.cb=this.a=0,this.sc="",this.m=new ce,this.Od=new yt,this.Kc=new Bt,this.ed=new cr,this.Qa=new Pt,this.Ic=this.$c=this.Aa=0,this.D=new fi,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,ce),this.ia=0,this.pb=i(4,Hr),this.Pa=new Ft,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Fa),this.Hd=0,this.rb=Array(new Mr),this.sb=0,this.wa=Array(new Ur),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ia),this.L=this.aa=0,this.gd=o([4,2],Ur),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ga(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function _s(){var E=new us;return E!=null&&(E.a=0,E.sc="OK",E.cb=0,E.Xb=0,Ka||(Ka=GA)),E}function Wn(E,U,G){return E.a==0&&(E.a=U,E.sc=G,E.cb=0),0}function As(E,U,G){return 3<=G&&E[U+0]==157&&E[U+1]==1&&E[U+2]==42}function Mc(E,U){if(E==null)return 0;if(E.a=0,E.sc="OK",U==null)return Wn(E,2,"null VP8Io passed to VP8GetHeaders()");var G=U.data,re=U.w,ue=U.ha;if(4>ue)return Wn(E,7,"Truncated header.");var he=G[re+0]|G[re+1]<<8|G[re+2]<<16,pe=E.Od;if(pe.Rb=!(1&he),pe.td=he>>1&7,pe.yd=he>>4&1,pe.ub=he>>5,3<pe.td)return Wn(E,3,"Incorrect keyframe parameters.");if(!pe.yd)return Wn(E,4,"Frame not displayable.");re+=3,ue-=3;var ve=E.Kc;if(pe.Rb){if(7>ue)return Wn(E,7,"cannot parse picture header");if(!As(G,re,ue))return Wn(E,3,"Bad code word");ve.c=16383&(G[re+4]<<8|G[re+3]),ve.Td=G[re+4]>>6,ve.i=16383&(G[re+6]<<8|G[re+5]),ve.Ud=G[re+6]>>6,re+=7,ue-=7,E.za=ve.c+15>>4,E.Ub=ve.i+15>>4,U.width=ve.c,U.height=ve.i,U.Da=0,U.j=0,U.v=0,U.va=U.width,U.o=U.height,U.da=0,U.ib=U.width,U.hb=U.height,U.U=U.width,U.T=U.height,a((he=E.Pa).jb,0,255,he.jb.length),e((he=E.Qa)!=null),he.Cb=0,he.Bb=0,he.Fb=1,a(he.Zb,0,0,he.Zb.length),a(he.Lb,0,0,he.Lb)}if(pe.ub>ue)return Wn(E,7,"bad partition length");ie(he=E.m,G,re,pe.ub),re+=pe.ub,ue-=pe.ub,pe.Rb&&(ve.Ld=me(he),ve.Kd=me(he)),ve=E.Qa;var be,Be=E.Pa;if(e(he!=null),e(ve!=null),ve.Cb=me(he),ve.Cb){if(ve.Bb=me(he),me(he)){for(ve.Fb=me(he),be=0;4>be;++be)ve.Zb[be]=me(he)?ee(he,7):0;for(be=0;4>be;++be)ve.Lb[be]=me(he)?ee(he,6):0}if(ve.Bb)for(be=0;3>be;++be)Be.jb[be]=me(he)?Z(he,8):255}else ve.Bb=0;if(he.Ka)return Wn(E,3,"cannot parse segment header");if((ve=E.ed).zd=me(he),ve.Tb=Z(he,6),ve.wb=Z(he,3),ve.Pc=me(he),ve.Pc&&me(he)){for(Be=0;4>Be;++Be)me(he)&&(ve.vd[Be]=ee(he,6));for(Be=0;4>Be;++Be)me(he)&&(ve.od[Be]=ee(he,6))}if(E.L=ve.Tb==0?0:ve.zd?1:2,he.Ka)return Wn(E,3,"cannot parse filter header");var Ue=ue;if(ue=be=re,re=be+Ue,ve=Ue,E.Xb=(1<<Z(E.m,2))-1,Ue<3*(Be=E.Xb))G=7;else{for(be+=3*Be,ve-=3*Be,Ue=0;Ue<Be;++Ue){var Ye=G[ue+0]|G[ue+1]<<8|G[ue+2]<<16;Ye>ve&&(Ye=ve),ie(E.Jc[+Ue],G,be,Ye),be+=Ye,ve-=Ye,ue+=3}ie(E.Jc[+Be],G,be,ve),G=be<re?0:5}if(G!=0)return Wn(E,G,"cannot parse partitions");for(G=Z(be=E.m,7),ue=me(be)?ee(be,4):0,re=me(be)?ee(be,4):0,ve=me(be)?ee(be,4):0,Be=me(be)?ee(be,4):0,be=me(be)?ee(be,4):0,Ue=E.Qa,Ye=0;4>Ye;++Ye){if(Ue.Cb){var Ke=Ue.Zb[Ye];Ue.Fb||(Ke+=G)}else{if(0<Ye){E.pb[Ye]=E.pb[0];continue}Ke=G}var Ve=E.pb[Ye];Ve.Sc[0]=If[En(Ke+ue,127)],Ve.Sc[1]=Ff[En(Ke+0,127)],Ve.Eb[0]=2*If[En(Ke+re,127)],Ve.Eb[1]=101581*Ff[En(Ke+ve,127)]>>16,8>Ve.Eb[1]&&(Ve.Eb[1]=8),Ve.Qc[0]=If[En(Ke+Be,117)],Ve.Qc[1]=Ff[En(Ke+be,127)],Ve.lc=Ke+be}if(!pe.Rb)return Wn(E,4,"Not a key frame.");for(me(he),pe=E.Pa,G=0;4>G;++G){for(ue=0;8>ue;++ue)for(re=0;3>re;++re)for(ve=0;11>ve;++ve)Be=ge(he,eA[G][ue][re][ve])?Z(he,8):yl[G][ue][re][ve],pe.Wc[G][ue].Yb[re][ve]=Be;for(ue=0;17>ue;++ue)pe.Xc[G][ue]=pe.Wc[G][a1[ue]]}return E.kc=me(he),E.kc&&(E.Bd=Z(he,8)),E.cb=1}function GA(E,U,G,re,ue,he,pe){var ve=U[ue].Yb[G];for(G=0;16>ue;++ue){if(!ge(E,ve[G+0]))return ue;for(;!ge(E,ve[G+1]);)if(ve=U[++ue].Yb[0],G=0,ue==16)return 16;var be=U[ue+1].Yb;if(ge(E,ve[G+2])){var Be=E,Ue=0;if(ge(Be,(Ke=ve)[(Ye=G)+3]))if(ge(Be,Ke[Ye+6])){for(ve=0,Ye=2*(Ue=ge(Be,Ke[Ye+8]))+(Ke=ge(Be,Ke[Ye+9+Ue])),Ue=0,Ke=ga[Ye];Ke[ve];++ve)Ue+=Ue+ge(Be,Ke[ve]);Ue+=3+(8<<Ye)}else ge(Be,Ke[Ye+7])?(Ue=7+2*ge(Be,165),Ue+=ge(Be,145)):Ue=5+ge(Be,159);else Ue=ge(Be,Ke[Ye+4])?3+ge(Be,Ke[Ye+5]):2;ve=be[2]}else Ue=1,ve=be[1];be=pe+vn[ue],0>(Be=E).b&&de(Be);var Ye,Ke=Be.b,Ve=(Ye=Be.Ca>>1)-(Be.I>>Ke)>>31;--Be.b,Be.Ca+=Ve,Be.Ca|=1,Be.I-=(Ye+1&Ve)<<Ke,he[be]=((Ue^Ve)-Ve)*re[(0<ue)+0]}return 16}function sl(E){var U=E.rb[E.sb-1];U.la=0,U.Na=0,a(E.zc,0,0,E.zc.length),E.ja=0}function Pu(E,U){if(E==null)return 0;if(U==null)return Wn(E,2,"NULL VP8Io parameter in VP8Decode().");if(!E.cb&&!Mc(E,U))return 0;if(e(E.cb),U.ac==null||U.ac(U)){U.ob&&(E.L=0);var G=uc[E.L];if(E.L==2?(E.yb=0,E.zb=0):(E.yb=U.v-G>>4,E.zb=U.j-G>>4,0>E.yb&&(E.yb=0),0>E.zb&&(E.zb=0)),E.Va=U.o+15+G>>4,E.Hb=U.va+15+G>>4,E.Hb>E.za&&(E.Hb=E.za),E.Va>E.Ub&&(E.Va=E.Ub),0<E.L){var re=E.ed;for(G=0;4>G;++G){var ue;if(E.Qa.Cb){var he=E.Qa.Lb[G];E.Qa.Fb||(he+=re.Tb)}else he=re.Tb;for(ue=0;1>=ue;++ue){var pe=E.gd[G][ue],ve=he;if(re.Pc&&(ve+=re.vd[0],ue&&(ve+=re.od[0])),0<(ve=0>ve?0:63<ve?63:ve)){var be=ve;0<re.wb&&(be=4<re.wb?be>>2:be>>1)>9-re.wb&&(be=9-re.wb),1>be&&(be=1),pe.dd=be,pe.tc=2*ve+be,pe.ld=40<=ve?2:15<=ve?1:0}else pe.tc=0;pe.La=ue}}}G=0}else Wn(E,6,"Frame setup failed"),G=E.a;if(G=G==0){if(G){E.$c=0,0<E.Aa||(E.Ic=o1);e:{G=E.Ic,re=4*(be=E.za);var Be=32*be,Ue=be+1,Ye=0<E.L?be*(0<E.Aa?2:1):0,Ke=(E.Aa==2?2:1)*be;if((pe=re+832+(ue=3*(16*G+uc[E.L])/2*Be)+(he=E.Fa!=null&&0<E.Fa.length?E.Kc.c*E.Kc.i:0))!=pe)G=0;else{if(pe>E.Vb){if(E.Vb=0,E.Ec=s(pe),E.Fc=0,E.Ec==null){G=Wn(E,1,"no memory during frame initialization.");break e}E.Vb=pe}pe=E.Ec,ve=E.Fc,E.Ac=pe,E.Bc=ve,ve+=re,E.Gd=i(Be,Fa),E.Hd=0,E.rb=i(Ue+1,Mr),E.sb=1,E.wa=Ye?i(Ye,Ur):null,E.Y=0,E.D.Nb=0,E.D.wa=E.wa,E.D.Y=E.Y,0<E.Aa&&(E.D.Y+=be),e(!0),E.oc=pe,E.pc=ve,ve+=832,E.ya=i(Ke,Ia),E.aa=0,E.D.ya=E.ya,E.D.aa=E.aa,E.Aa==2&&(E.D.aa+=be),E.R=16*be,E.B=8*be,be=(Be=uc[E.L])*E.R,Be=Be/2*E.B,E.sa=pe,E.ta=ve+be,E.qa=E.sa,E.ra=E.ta+16*G*E.R+Be,E.Ha=E.qa,E.Ia=E.ra+8*G*E.B+Be,E.$c=0,ve+=ue,E.mb=he?pe:null,E.nb=he?ve:null,e(ve+he<=E.Fc+E.Vb),sl(E),a(E.Ac,E.Bc,0,re),G=1}}if(G){if(U.ka=0,U.y=E.sa,U.O=E.ta,U.f=E.qa,U.N=E.ra,U.ea=E.Ha,U.Vd=E.Ia,U.fa=E.R,U.Rc=E.B,U.F=null,U.J=0,!nc){for(G=-255;255>=G;++G)Ca[255+G]=0>G?-G:G;for(G=-1020;1020>=G;++G)Ao[1020+G]=-128>G?-128:127<G?127:G;for(G=-112;112>=G;++G)Zc[112+G]=-16>G?-16:15<G?15:G;for(G=-255;510>=G;++G)eu[255+G]=0>G?0:255<G?255:G;nc=1}gl=hi,Po=ol,jo=ro,La=Cn,wi=ll,ma=il,Ku=dl,xl=Lo,JA=Qc,$c=Vu,Yc=Oc,Xc=Yl,Wu=Xl,ZA=fl,Jc=qi,rc=Ps,$u=Da,pa=WA,Zs[0]=Us,Zs[1]=qA,Zs[2]=so,Zs[3]=KA,Zs[4]=mi,Zs[5]=io,Zs[6]=Xs,Zs[7]=pi,Zs[8]=Do,Zs[9]=cl,lc[0]=no,lc[1]=Ou,lc[2]=Io,lc[3]=jc,lc[4]=Mn,lc[5]=Ro,lc[6]=ao,$i[0]=oo,$i[1]=ju,$i[2]=Qu,$i[3]=gi,$i[4]=$r,$i[5]=Ra,$i[6]=ul,G=1}else G=0}G&&(G=function(Ve,gt){for(Ve.M=0;Ve.M<Ve.Va;++Ve.M){var st,Me=Ve.Jc[Ve.M&Ve.Xb],je=Ve.m,ct=Ve;for(st=0;st<ct.za;++st){var vt=je,ht=ct,Vt=ht.Ac,Lt=ht.Bc+4*st,rr=ht.zc,Ot=ht.ya[ht.aa+st];if(ht.Qa.Bb?Ot.$b=ge(vt,ht.Pa.jb[0])?2+ge(vt,ht.Pa.jb[2]):ge(vt,ht.Pa.jb[1]):Ot.$b=0,ht.kc&&(Ot.Ad=ge(vt,ht.Bd)),Ot.Za=!ge(vt,145)+0,Ot.Za){var mn=Ot.Ob,_n=0;for(ht=0;4>ht;++ht){var Vr,Pr=rr[0+ht];for(Vr=0;4>Vr;++Vr){Pr=ap[Vt[Lt+Vr]][Pr];for(var Rn=ru[ge(vt,Pr[0])];0<Rn;)Rn=ru[2*Rn+ge(vt,Pr[Rn])];Pr=-Rn,Vt[Lt+Vr]=Pr}n(mn,_n,Vt,Lt,4),_n+=4,rr[0+ht]=Pr}}else Pr=ge(vt,156)?ge(vt,128)?1:3:ge(vt,163)?2:0,Ot.Ob[0]=Pr,a(Vt,Lt,Pr,4),a(rr,0,Pr,4);Ot.Dd=ge(vt,142)?ge(vt,114)?ge(vt,183)?1:3:2:0}if(ct.m.Ka)return Wn(Ve,7,"Premature end-of-partition0 encountered.");for(;Ve.ja<Ve.za;++Ve.ja){if(ct=Me,vt=(je=Ve).rb[je.sb-1],Vt=je.rb[je.sb+je.ja],st=je.ya[je.aa+je.ja],Lt=je.kc?st.Ad:0)vt.la=Vt.la=0,st.Za||(vt.Na=Vt.Na=0),st.Hc=0,st.Gc=0,st.ia=0;else{var Sn,Br;if(vt=Vt,Vt=ct,Lt=je.Pa.Xc,rr=je.ya[je.aa+je.ja],Ot=je.pb[rr.$b],ht=rr.ad,mn=0,_n=je.rb[je.sb-1],Pr=Vr=0,a(ht,mn,0,384),rr.Za)var Pn=0,ur=Lt[3];else{Rn=s(16);var yr=vt.Na+_n.Na;if(yr=Ka(Vt,Lt[1],yr,Ot.Eb,0,Rn,0),vt.Na=_n.Na=(0<yr)+0,1<yr)gl(Rn,0,ht,mn);else{var fn=Rn[0]+3>>3;for(Rn=0;256>Rn;Rn+=16)ht[mn+Rn]=fn}Pn=1,ur=Lt[0]}var pn=15&vt.la,ms=15&_n.la;for(Rn=0;4>Rn;++Rn){var Ya=1&ms;for(fn=Br=0;4>fn;++fn)pn=pn>>1|(Ya=(yr=Ka(Vt,ur,yr=Ya+(1&pn),Ot.Sc,Pn,ht,mn))>Pn)<<7,Br=Br<<2|(3<yr?3:1<yr?2:ht[mn+0]!=0),mn+=16;pn>>=4,ms=ms>>1|Ya<<7,Vr=(Vr<<8|Br)>>>0}for(ur=pn,Pn=ms>>4,Sn=0;4>Sn;Sn+=2){for(Br=0,pn=vt.la>>4+Sn,ms=_n.la>>4+Sn,Rn=0;2>Rn;++Rn){for(Ya=1&ms,fn=0;2>fn;++fn)yr=Ya+(1&pn),pn=pn>>1|(Ya=0<(yr=Ka(Vt,Lt[2],yr,Ot.Qc,0,ht,mn)))<<3,Br=Br<<2|(3<yr?3:1<yr?2:ht[mn+0]!=0),mn+=16;pn>>=2,ms=ms>>1|Ya<<5}Pr|=Br<<4*Sn,ur|=pn<<4<<Sn,Pn|=(240&ms)<<Sn}vt.la=ur,_n.la=Pn,rr.Hc=Vr,rr.Gc=Pr,rr.ia=43690&Pr?0:Ot.ia,Lt=!(Vr|Pr)}if(0<je.L&&(je.wa[je.Y+je.ja]=je.gd[st.$b][st.Za],je.wa[je.Y+je.ja].La|=!Lt),ct.Ka)return Wn(Ve,7,"Premature end-of-file encountered.")}if(sl(Ve),je=gt,ct=1,st=(Me=Ve).D,vt=0<Me.L&&Me.M>=Me.zb&&Me.M<=Me.Va,Me.Aa==0)e:{if(st.M=Me.M,st.uc=vt,xi(Me,st),ct=1,st=(Br=Me.D).Nb,vt=(Pr=uc[Me.L])*Me.R,Vt=Pr/2*Me.B,Rn=16*st*Me.R,fn=8*st*Me.B,Lt=Me.sa,rr=Me.ta-vt+Rn,Ot=Me.qa,ht=Me.ra-Vt+fn,mn=Me.Ha,_n=Me.Ia-Vt+fn,ms=(pn=Br.M)==0,Vr=pn>=Me.Va-1,Me.Aa==2&&xi(Me,Br),Br.uc)for(Ya=(yr=Me).D.M,e(yr.D.uc),Br=yr.yb;Br<yr.Hb;++Br){Pn=Br,ur=Ya;var Ea=(_a=(aa=yr).D).Nb;Sn=aa.R;var _a=_a.wa[_a.Y+Pn],Ua=aa.sa,mo=aa.ta+16*Ea*Sn+16*Pn,Tn=_a.dd,Ma=_a.tc;if(Ma!=0)if(e(3<=Ma),aa.L==1)0<Pn&&rc(Ua,mo,Sn,Ma+4),_a.La&&pa(Ua,mo,Sn,Ma),0<ur&&Jc(Ua,mo,Sn,Ma+4),_a.La&&$u(Ua,mo,Sn,Ma);else{var Oo=aa.B,su=aa.qa,rA=aa.ra+8*Ea*Oo+8*Pn,iu=aa.Ha,aa=aa.Ia+8*Ea*Oo+8*Pn;Ea=_a.ld,0<Pn&&(xl(Ua,mo,Sn,Ma+4,Tn,Ea),$c(su,rA,iu,aa,Oo,Ma+4,Tn,Ea)),_a.La&&(Xc(Ua,mo,Sn,Ma,Tn,Ea),ZA(su,rA,iu,aa,Oo,Ma,Tn,Ea)),0<ur&&(Ku(Ua,mo,Sn,Ma+4,Tn,Ea),JA(su,rA,iu,aa,Oo,Ma+4,Tn,Ea)),_a.La&&(Yc(Ua,mo,Sn,Ma,Tn,Ea),Wu(su,rA,iu,aa,Oo,Ma,Tn,Ea))}}if(Me.ia&&alert("todo:DitherRow"),je.put!=null){if(Br=16*pn,pn=16*(pn+1),ms?(je.y=Me.sa,je.O=Me.ta+Rn,je.f=Me.qa,je.N=Me.ra+fn,je.ea=Me.Ha,je.W=Me.Ia+fn):(Br-=Pr,je.y=Lt,je.O=rr,je.f=Ot,je.N=ht,je.ea=mn,je.W=_n),Vr||(pn-=Pr),pn>je.o&&(pn=je.o),je.F=null,je.J=null,Me.Fa!=null&&0<Me.Fa.length&&Br<pn&&(je.J=Vc(Me,je,Br,pn-Br),je.F=Me.mb,je.F==null&&je.F.length==0)){ct=Wn(Me,3,"Could not decode alpha data.");break e}Br<je.j&&(Pr=je.j-Br,Br=je.j,e(!(1&Pr)),je.O+=Me.R*Pr,je.N+=Me.B*(Pr>>1),je.W+=Me.B*(Pr>>1),je.F!=null&&(je.J+=je.width*Pr)),Br<pn&&(je.O+=je.v,je.N+=je.v>>1,je.W+=je.v>>1,je.F!=null&&(je.J+=je.v),je.ka=Br-je.j,je.U=je.va-je.v,je.T=pn-Br,ct=je.put(je))}st+1!=Me.Ic||Vr||(n(Me.sa,Me.ta-vt,Lt,rr+16*Me.R,vt),n(Me.qa,Me.ra-Vt,Ot,ht+8*Me.B,Vt),n(Me.Ha,Me.Ia-Vt,mn,_n+8*Me.B,Vt))}if(!ct)return Wn(Ve,6,"Output aborted.")}return 1}(E,U)),U.bc!=null&&U.bc(U),G&=1}return G?(E.cb=0,G):0}function Ss(E,U,G,re,ue){ue=E[U+G+32*re]+(ue>>3),E[U+G+32*re]=-256&ue?0>ue?0:255:ue}function Pc(E,U,G,re,ue,he){Ss(E,U,0,G,re+ue),Ss(E,U,1,G,re+he),Ss(E,U,2,G,re-he),Ss(E,U,3,G,re-ue)}function dn(E){return(20091*E>>16)+E}function Ts(E,U,G,re){var ue,he=0,pe=s(16);for(ue=0;4>ue;++ue){var ve=E[U+0]+E[U+8],be=E[U+0]-E[U+8],Be=(35468*E[U+4]>>16)-dn(E[U+12]),Ue=dn(E[U+4])+(35468*E[U+12]>>16);pe[he+0]=ve+Ue,pe[he+1]=be+Be,pe[he+2]=be-Be,pe[he+3]=ve-Ue,he+=4,U++}for(ue=he=0;4>ue;++ue)ve=(E=pe[he+0]+4)+pe[he+8],be=E-pe[he+8],Be=(35468*pe[he+4]>>16)-dn(pe[he+12]),Ss(G,re,0,0,ve+(Ue=dn(pe[he+4])+(35468*pe[he+12]>>16))),Ss(G,re,1,0,be+Be),Ss(G,re,2,0,be-Be),Ss(G,re,3,0,ve-Ue),he++,re+=32}function il(E,U,G,re){var ue=E[U+0]+4,he=35468*E[U+4]>>16,pe=dn(E[U+4]),ve=35468*E[U+1]>>16;Pc(G,re,0,ue+pe,E=dn(E[U+1]),ve),Pc(G,re,1,ue+he,E,ve),Pc(G,re,2,ue-he,E,ve),Pc(G,re,3,ue-pe,E,ve)}function ol(E,U,G,re,ue){Ts(E,U,G,re),ue&&Ts(E,U+16,G,re+4)}function ro(E,U,G,re){Po(E,U+0,G,re,1),Po(E,U+32,G,re+128,1)}function Cn(E,U,G,re){var ue;for(E=E[U+0]+4,ue=0;4>ue;++ue)for(U=0;4>U;++U)Ss(G,re,U,ue,E)}function ll(E,U,G,re){E[U+0]&&La(E,U+0,G,re),E[U+16]&&La(E,U+16,G,re+4),E[U+32]&&La(E,U+32,G,re+128),E[U+48]&&La(E,U+48,G,re+128+4)}function hi(E,U,G,re){var ue,he=s(16);for(ue=0;4>ue;++ue){var pe=E[U+0+ue]+E[U+12+ue],ve=E[U+4+ue]+E[U+8+ue],be=E[U+4+ue]-E[U+8+ue],Be=E[U+0+ue]-E[U+12+ue];he[0+ue]=pe+ve,he[8+ue]=pe-ve,he[4+ue]=Be+be,he[12+ue]=Be-be}for(ue=0;4>ue;++ue)pe=(E=he[0+4*ue]+3)+he[3+4*ue],ve=he[1+4*ue]+he[2+4*ue],be=he[1+4*ue]-he[2+4*ue],Be=E-he[3+4*ue],G[re+0]=pe+ve>>3,G[re+16]=Be+be>>3,G[re+32]=pe-ve>>3,G[re+48]=Be-be>>3,re+=64}function ko(E,U,G){var re,ue=U-32,he=fs,pe=255-E[ue-1];for(re=0;re<G;++re){var ve,be=he,Be=pe+E[U-1];for(ve=0;ve<G;++ve)E[U+ve]=be[Be+E[ue+ve]];U+=32}}function qA(E,U){ko(E,U,4)}function ju(E,U){ko(E,U,8)}function Ou(E,U){ko(E,U,16)}function Io(E,U){var G;for(G=0;16>G;++G)n(E,U+32*G,E,U-32,16)}function jc(E,U){var G;for(G=16;0<G;--G)a(E,U,E[U-1],16),U+=32}function Fo(E,U,G){var re;for(re=0;16>re;++re)a(U,G+32*re,E,16)}function no(E,U){var G,re=16;for(G=0;16>G;++G)re+=E[U-1+32*G]+E[U+G-32];Fo(re>>5,E,U)}function Mn(E,U){var G,re=8;for(G=0;16>G;++G)re+=E[U-1+32*G];Fo(re>>4,E,U)}function Ro(E,U){var G,re=8;for(G=0;16>G;++G)re+=E[U+G-32];Fo(re>>4,E,U)}function ao(E,U){Fo(128,E,U)}function fr(E,U,G){return E+2*U+G+2>>2}function so(E,U){var G,re=U-32;for(re=new Uint8Array([fr(E[re-1],E[re+0],E[re+1]),fr(E[re+0],E[re+1],E[re+2]),fr(E[re+1],E[re+2],E[re+3]),fr(E[re+2],E[re+3],E[re+4])]),G=0;4>G;++G)n(E,U+32*G,re,0,re.length)}function KA(E,U){var G=E[U-1],re=E[U-1+32],ue=E[U-1+64],he=E[U-1+96];Se(E,U+0,16843009*fr(E[U-1-32],G,re)),Se(E,U+32,16843009*fr(G,re,ue)),Se(E,U+64,16843009*fr(re,ue,he)),Se(E,U+96,16843009*fr(ue,he,he))}function Us(E,U){var G,re=4;for(G=0;4>G;++G)re+=E[U+G-32]+E[U-1+32*G];for(re>>=3,G=0;4>G;++G)a(E,U+32*G,re,4)}function mi(E,U){var G=E[U-1+0],re=E[U-1+32],ue=E[U-1+64],he=E[U-1-32],pe=E[U+0-32],ve=E[U+1-32],be=E[U+2-32],Be=E[U+3-32];E[U+0+96]=fr(re,ue,E[U-1+96]),E[U+1+96]=E[U+0+64]=fr(G,re,ue),E[U+2+96]=E[U+1+64]=E[U+0+32]=fr(he,G,re),E[U+3+96]=E[U+2+64]=E[U+1+32]=E[U+0+0]=fr(pe,he,G),E[U+3+64]=E[U+2+32]=E[U+1+0]=fr(ve,pe,he),E[U+3+32]=E[U+2+0]=fr(be,ve,pe),E[U+3+0]=fr(Be,be,ve)}function Xs(E,U){var G=E[U+1-32],re=E[U+2-32],ue=E[U+3-32],he=E[U+4-32],pe=E[U+5-32],ve=E[U+6-32],be=E[U+7-32];E[U+0+0]=fr(E[U+0-32],G,re),E[U+1+0]=E[U+0+32]=fr(G,re,ue),E[U+2+0]=E[U+1+32]=E[U+0+64]=fr(re,ue,he),E[U+3+0]=E[U+2+32]=E[U+1+64]=E[U+0+96]=fr(ue,he,pe),E[U+3+32]=E[U+2+64]=E[U+1+96]=fr(he,pe,ve),E[U+3+64]=E[U+2+96]=fr(pe,ve,be),E[U+3+96]=fr(ve,be,be)}function io(E,U){var G=E[U-1+0],re=E[U-1+32],ue=E[U-1+64],he=E[U-1-32],pe=E[U+0-32],ve=E[U+1-32],be=E[U+2-32],Be=E[U+3-32];E[U+0+0]=E[U+1+64]=he+pe+1>>1,E[U+1+0]=E[U+2+64]=pe+ve+1>>1,E[U+2+0]=E[U+3+64]=ve+be+1>>1,E[U+3+0]=be+Be+1>>1,E[U+0+96]=fr(ue,re,G),E[U+0+64]=fr(re,G,he),E[U+0+32]=E[U+1+96]=fr(G,he,pe),E[U+1+32]=E[U+2+96]=fr(he,pe,ve),E[U+2+32]=E[U+3+96]=fr(pe,ve,be),E[U+3+32]=fr(ve,be,Be)}function pi(E,U){var G=E[U+0-32],re=E[U+1-32],ue=E[U+2-32],he=E[U+3-32],pe=E[U+4-32],ve=E[U+5-32],be=E[U+6-32],Be=E[U+7-32];E[U+0+0]=G+re+1>>1,E[U+1+0]=E[U+0+64]=re+ue+1>>1,E[U+2+0]=E[U+1+64]=ue+he+1>>1,E[U+3+0]=E[U+2+64]=he+pe+1>>1,E[U+0+32]=fr(G,re,ue),E[U+1+32]=E[U+0+96]=fr(re,ue,he),E[U+2+32]=E[U+1+96]=fr(ue,he,pe),E[U+3+32]=E[U+2+96]=fr(he,pe,ve),E[U+3+64]=fr(pe,ve,be),E[U+3+96]=fr(ve,be,Be)}function cl(E,U){var G=E[U-1+0],re=E[U-1+32],ue=E[U-1+64],he=E[U-1+96];E[U+0+0]=G+re+1>>1,E[U+2+0]=E[U+0+32]=re+ue+1>>1,E[U+2+32]=E[U+0+64]=ue+he+1>>1,E[U+1+0]=fr(G,re,ue),E[U+3+0]=E[U+1+32]=fr(re,ue,he),E[U+3+32]=E[U+1+64]=fr(ue,he,he),E[U+3+64]=E[U+2+64]=E[U+0+96]=E[U+1+96]=E[U+2+96]=E[U+3+96]=he}function Do(E,U){var G=E[U-1+0],re=E[U-1+32],ue=E[U-1+64],he=E[U-1+96],pe=E[U-1-32],ve=E[U+0-32],be=E[U+1-32],Be=E[U+2-32];E[U+0+0]=E[U+2+32]=G+pe+1>>1,E[U+0+32]=E[U+2+64]=re+G+1>>1,E[U+0+64]=E[U+2+96]=ue+re+1>>1,E[U+0+96]=he+ue+1>>1,E[U+3+0]=fr(ve,be,Be),E[U+2+0]=fr(pe,ve,be),E[U+1+0]=E[U+3+32]=fr(G,pe,ve),E[U+1+32]=E[U+3+64]=fr(re,G,pe),E[U+1+64]=E[U+3+96]=fr(ue,re,G),E[U+1+96]=fr(he,ue,re)}function Qu(E,U){var G;for(G=0;8>G;++G)n(E,U+32*G,E,U-32,8)}function gi(E,U){var G;for(G=0;8>G;++G)a(E,U,E[U-1],8),U+=32}function Ms(E,U,G){var re;for(re=0;8>re;++re)a(U,G+32*re,E,8)}function oo(E,U){var G,re=8;for(G=0;8>G;++G)re+=E[U+G-32]+E[U-1+32*G];Ms(re>>4,E,U)}function Ra(E,U){var G,re=4;for(G=0;8>G;++G)re+=E[U+G-32];Ms(re>>3,E,U)}function $r(E,U){var G,re=4;for(G=0;8>G;++G)re+=E[U-1+32*G];Ms(re>>3,E,U)}function ul(E,U){Ms(128,E,U)}function lo(E,U,G){var re=E[U-G],ue=E[U+0],he=3*(ue-re)+Kh[1020+E[U-2*G]-E[U+G]],pe=Yu[112+(he+4>>3)];E[U-G]=fs[255+re+Yu[112+(he+3>>3)]],E[U+0]=fs[255+ue-pe]}function Hu(E,U,G,re){var ue=E[U+0],he=E[U+G];return fo[255+E[U-2*G]-E[U-G]]>re||fo[255+he-ue]>re}function Wl(E,U,G,re){return 4*fo[255+E[U-G]-E[U+0]]+fo[255+E[U-2*G]-E[U+G]]<=re}function $l(E,U,G,re,ue){var he=E[U-3*G],pe=E[U-2*G],ve=E[U-G],be=E[U+0],Be=E[U+G],Ue=E[U+2*G],Ye=E[U+3*G];return 4*fo[255+ve-be]+fo[255+pe-Be]>re?0:fo[255+E[U-4*G]-he]<=ue&&fo[255+he-pe]<=ue&&fo[255+pe-ve]<=ue&&fo[255+Ye-Ue]<=ue&&fo[255+Ue-Be]<=ue&&fo[255+Be-be]<=ue}function qi(E,U,G,re){var ue=2*re+1;for(re=0;16>re;++re)Wl(E,U+re,G,ue)&&lo(E,U+re,G)}function Ps(E,U,G,re){var ue=2*re+1;for(re=0;16>re;++re)Wl(E,U+re*G,1,ue)&&lo(E,U+re*G,1)}function Da(E,U,G,re){var ue;for(ue=3;0<ue;--ue)qi(E,U+=4*G,G,re)}function WA(E,U,G,re){var ue;for(ue=3;0<ue;--ue)Ps(E,U+=4,G,re)}function Al(E,U,G,re,ue,he,pe,ve){for(he=2*he+1;0<ue--;){if($l(E,U,G,he,pe))if(Hu(E,U,G,ve))lo(E,U,G);else{var be=E,Be=U,Ue=G,Ye=be[Be-2*Ue],Ke=be[Be-Ue],Ve=be[Be+0],gt=be[Be+Ue],st=be[Be+2*Ue],Me=27*(ct=Kh[1020+3*(Ve-Ke)+Kh[1020+Ye-gt]])+63>>7,je=18*ct+63>>7,ct=9*ct+63>>7;be[Be-3*Ue]=fs[255+be[Be-3*Ue]+ct],be[Be-2*Ue]=fs[255+Ye+je],be[Be-Ue]=fs[255+Ke+Me],be[Be+0]=fs[255+Ve-Me],be[Be+Ue]=fs[255+gt-je],be[Be+2*Ue]=fs[255+st-ct]}U+=re}}function Bs(E,U,G,re,ue,he,pe,ve){for(he=2*he+1;0<ue--;){if($l(E,U,G,he,pe))if(Hu(E,U,G,ve))lo(E,U,G);else{var be=E,Be=U,Ue=G,Ye=be[Be-Ue],Ke=be[Be+0],Ve=be[Be+Ue],gt=Yu[112+((st=3*(Ke-Ye))+4>>3)],st=Yu[112+(st+3>>3)],Me=gt+1>>1;be[Be-2*Ue]=fs[255+be[Be-2*Ue]+Me],be[Be-Ue]=fs[255+Ye+st],be[Be+0]=fs[255+Ke-gt],be[Be+Ue]=fs[255+Ve-Me]}U+=re}}function dl(E,U,G,re,ue,he){Al(E,U,G,1,16,re,ue,he)}function Lo(E,U,G,re,ue,he){Al(E,U,1,G,16,re,ue,he)}function Oc(E,U,G,re,ue,he){var pe;for(pe=3;0<pe;--pe)Bs(E,U+=4*G,G,1,16,re,ue,he)}function Yl(E,U,G,re,ue,he){var pe;for(pe=3;0<pe;--pe)Bs(E,U+=4,1,G,16,re,ue,he)}function Qc(E,U,G,re,ue,he,pe,ve){Al(E,U,ue,1,8,he,pe,ve),Al(G,re,ue,1,8,he,pe,ve)}function Vu(E,U,G,re,ue,he,pe,ve){Al(E,U,1,ue,8,he,pe,ve),Al(G,re,1,ue,8,he,pe,ve)}function Xl(E,U,G,re,ue,he,pe,ve){Bs(E,U+4*ue,ue,1,8,he,pe,ve),Bs(G,re+4*ue,ue,1,8,he,pe,ve)}function fl(E,U,G,re,ue,he,pe,ve){Bs(E,U+4,1,ue,8,he,pe,ve),Bs(G,re+4,1,ue,8,he,pe,ve)}function Jl(){this.ba=new ea,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Lr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Hc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Zl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function hl(){this.ua=0,this.Wa=new Ce,this.vb=new Ce,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new q,this.yc=new L}function $A(){this.xb=this.a=0,this.l=new Ga,this.ca=new ea,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new j,this.Pb=0,this.wd=new j,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new hl,this.ab=0,this.gc=i(4,Zl),this.Oc=0}function Uo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ga,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ml(E,U,G,re,ue,he,pe){for(E=E==null?0:E[U+0],U=0;U<pe;++U)ue[he+U]=E+G[re+U]&255,E=ue[he+U]}function ec(E,U,G,re,ue,he,pe){var ve;if(E==null)ml(null,null,G,re,ue,he,pe);else for(ve=0;ve<pe;++ve)ue[he+ve]=E[U+ve]+G[re+ve]&255}function js(E,U,G,re,ue,he,pe){if(E==null)ml(null,null,G,re,ue,he,pe);else{var ve,be=E[U+0],Be=be,Ue=be;for(ve=0;ve<pe;++ve)Be=Ue+(be=E[U+ve])-Be,Ue=G[re+ve]+(-256&Be?0>Be?0:255:Be)&255,Be=be,ue[he+ve]=Ue}}function Vc(E,U,G,re){var ue=U.width,he=U.o;if(e(E!=null&&U!=null),0>G||0>=re||G+re>he)return null;if(!E.Cc){if(E.ga==null){var pe;if(E.ga=new Uo,(pe=E.ga==null)||(pe=U.width*U.o,e(E.Gb.length==0),E.Gb=s(pe),E.Uc=0,E.Gb==null?pe=0:(E.mb=E.Gb,E.nb=E.Uc,E.rc=null,pe=1),pe=!pe),!pe){pe=E.ga;var ve=E.Fa,be=E.P,Be=E.qc,Ue=E.mb,Ye=E.nb,Ke=be+1,Ve=Be-1,gt=pe.l;if(e(ve!=null&&Ue!=null&&U!=null),wl[0]=null,wl[1]=ml,wl[2]=ec,wl[3]=js,pe.ca=Ue,pe.tb=Ye,pe.c=U.width,pe.i=U.height,e(0<pe.c&&0<pe.i),1>=Be)U=0;else if(pe.$a=ve[be+0]>>0&3,pe.Z=ve[be+0]>>2&3,pe.Lc=ve[be+0]>>4&3,be=ve[be+0]>>6&3,0>pe.$a||1<pe.$a||4<=pe.Z||1<pe.Lc||be)U=0;else if(gt.put=wa,gt.ac=qn,gt.bc=Es,gt.ma=pe,gt.width=U.width,gt.height=U.height,gt.Da=U.Da,gt.v=U.v,gt.va=U.va,gt.j=U.j,gt.o=U.o,pe.$a)e:{e(pe.$a==1),U=rt();t:for(;;){if(U==null){U=0;break e}if(e(pe!=null),pe.mc=U,U.c=pe.c,U.i=pe.i,U.l=pe.l,U.l.ma=pe,U.l.width=pe.c,U.l.height=pe.i,U.a=0,ne(U.m,ve,Ke,Ve),!Qe(pe.c,pe.i,1,U,null)||(U.ab==1&&U.gc[0].hc==3&&Ee(U.s)?(pe.ic=1,ve=U.c*U.i,U.Ta=null,U.Ua=0,U.V=s(ve),U.Ba=0,U.V==null?(U.a=1,U=0):U=1):(pe.ic=0,U=We(U,pe.c)),!U))break t;U=1;break e}pe.mc=null,U=0}else U=Ve>=pe.c*pe.i;pe=!U}if(pe)return null;E.ga.Lc!=1?E.Ga=0:re=he-G}e(E.ga!=null),e(G+re<=he);e:{if(U=(ve=E.ga).c,he=ve.l.o,ve.$a==0){if(Ke=E.rc,Ve=E.Vc,gt=E.Fa,be=E.P+1+G*U,Be=E.mb,Ue=E.nb+G*U,e(be<=E.P+E.qc),ve.Z!=0)for(e(wl[ve.Z]!=null),pe=0;pe<re;++pe)wl[ve.Z](Ke,Ve,gt,be,Be,Ue,U),Ke=Be,Ve=Ue,Ue+=U,be+=U;else for(pe=0;pe<re;++pe)n(Be,Ue,gt,be,U),Ke=Be,Ve=Ue,Ue+=U,be+=U;E.rc=Ke,E.Vc=Ve}else{if(e(ve.mc!=null),U=G+re,e((pe=ve.mc)!=null),e(U<=pe.i),pe.C>=U)U=1;else if(ve.ic||He(),ve.ic){ve=pe.V,Ke=pe.Ba,Ve=pe.c;var st=pe.i,Me=(gt=1,be=pe.$/Ve,Be=pe.$%Ve,Ue=pe.m,Ye=pe.s,pe.$),je=Ve*st,ct=Ve*U,vt=Ye.wc,ht=Me<ct?Kn(Ye,Be,be):null;e(Me<=je),e(U<=st),e(Ee(Ye));t:for(;;){for(;!Ue.h&&Me<ct;){if(Be&vt||(ht=Kn(Ye,Be,be)),e(ht!=null),le(Ue),256>(st=In(ht.G[0],ht.H[0],Ue)))ve[Ke+Me]=st,++Me,++Be>=Ve&&(Be=0,++be<=U&&!(be%16)&&Te(pe,be));else{if(!(280>st)){gt=0;break t}st=An(st-256,Ue);var Vt,Lt=In(ht.G[4],ht.H[4],Ue);if(le(Ue),!(Me>=(Lt=tn(Ve,Lt=An(Lt,Ue)))&&je-Me>=st)){gt=0;break t}for(Vt=0;Vt<st;++Vt)ve[Ke+Me+Vt]=ve[Ke+Me+Vt-Lt];for(Me+=st,Be+=st;Be>=Ve;)Be-=Ve,++be<=U&&!(be%16)&&Te(pe,be);Me<ct&&Be&vt&&(ht=Kn(Ye,Be,be))}e(Ue.h==X(Ue))}Te(pe,be>U?U:be);break t}!gt||Ue.h&&Me<je?(gt=0,pe.a=Ue.h?5:3):pe.$=Me,U=gt}else U=ke(pe,pe.V,pe.Ba,pe.c,pe.i,U,Je);if(!U){re=0;break e}}G+re>=he&&(E.Cc=1),re=1}if(!re)return null;if(E.Cc&&((re=E.ga)!=null&&(re.mc=null),E.ga=null,0<E.Ga))return alert("todo:WebPDequantizeLevels"),null}return E.nb+G*ue}function V(E,U,G,re,ue,he){for(;0<ue--;){var pe,ve=E,be=U+(G?1:0),Be=E,Ue=U+(G?0:3);for(pe=0;pe<re;++pe){var Ye=Be[Ue+4*pe];Ye!=255&&(Ye*=32897,ve[be+4*pe+0]=ve[be+4*pe+0]*Ye>>23,ve[be+4*pe+1]=ve[be+4*pe+1]*Ye>>23,ve[be+4*pe+2]=ve[be+4*pe+2]*Ye>>23)}U+=he}}function Ae(E,U,G,re,ue){for(;0<re--;){var he;for(he=0;he<G;++he){var pe=E[U+2*he+0],ve=15&(Be=E[U+2*he+1]),be=4369*ve,Be=(240&Be|Be>>4)*be>>16;E[U+2*he+0]=(240&pe|pe>>4)*be>>16&240|(15&pe|pe<<4)*be>>16>>4&15,E[U+2*he+1]=240&Be|ve}U+=ue}}function Ie(E,U,G,re,ue,he,pe,ve){var be,Be,Ue=255;for(Be=0;Be<ue;++Be){for(be=0;be<re;++be){var Ye=E[U+be];he[pe+4*be]=Ye,Ue&=Ye}U+=G,pe+=ve}return Ue!=255}function Le(E,U,G,re,ue){var he;for(he=0;he<ue;++he)G[re+he]=E[U+he]>>8}function He(){Ki=V,zr=Ae,Gr=Ie,$n=Le}function ot(E,U,G){B[E]=function(re,ue,he,pe,ve,be,Be,Ue,Ye,Ke,Ve,gt,st,Me,je,ct,vt){var ht,Vt=vt-1>>1,Lt=ve[be+0]|Be[Ue+0]<<16,rr=Ye[Ke+0]|Ve[gt+0]<<16;e(re!=null);var Ot=3*Lt+rr+131074>>2;for(U(re[ue+0],255&Ot,Ot>>16,st,Me),he!=null&&(Ot=3*rr+Lt+131074>>2,U(he[pe+0],255&Ot,Ot>>16,je,ct)),ht=1;ht<=Vt;++ht){var mn=ve[be+ht]|Be[Ue+ht]<<16,_n=Ye[Ke+ht]|Ve[gt+ht]<<16,Vr=Lt+mn+rr+_n+524296,Pr=Vr+2*(mn+rr)>>3;Ot=Pr+Lt>>1,Lt=(Vr=Vr+2*(Lt+_n)>>3)+mn>>1,U(re[ue+2*ht-1],255&Ot,Ot>>16,st,Me+(2*ht-1)*G),U(re[ue+2*ht-0],255&Lt,Lt>>16,st,Me+(2*ht-0)*G),he!=null&&(Ot=Vr+rr>>1,Lt=Pr+_n>>1,U(he[pe+2*ht-1],255&Ot,Ot>>16,je,ct+(2*ht-1)*G),U(he[pe+2*ht+0],255&Lt,Lt>>16,je,ct+(2*ht+0)*G)),Lt=mn,rr=_n}1&vt||(Ot=3*Lt+rr+131074>>2,U(re[ue+vt-1],255&Ot,Ot>>16,st,Me+(vt-1)*G),he!=null&&(Ot=3*rr+Lt+131074>>2,U(he[pe+vt-1],255&Ot,Ot>>16,je,ct+(vt-1)*G)))}}function _t(){hs[Os]=cc,hs[ed]=bl,hs[vl]=nu,hs[Nf]=Yh,hs[Xu]=Xh,hs[ac]=nd,hs[Wh]=Jh,hs[kf]=bl,hs[tu]=Yh,hs[sc]=Xh,hs[td]=nd}function jt(E){return E&-16384?0>E?0:255:E>>ib}function S(E,U){return jt((19077*E>>8)+(26149*U>>8)-14234)}function Y(E,U,G){return jt((19077*E>>8)-(6419*U>>8)-(13320*G>>8)+8708)}function se(E,U){return jt((19077*E>>8)+(33050*U>>8)-17685)}function ye(E,U,G,re,ue){re[ue+0]=S(E,G),re[ue+1]=Y(E,U,G),re[ue+2]=se(E,U)}function Oe(E,U,G,re,ue){re[ue+0]=se(E,U),re[ue+1]=Y(E,U,G),re[ue+2]=S(E,G)}function Ze(E,U,G,re,ue){var he=Y(E,U,G);U=he<<3&224|se(E,U)>>3,re[ue+0]=248&S(E,G)|he>>5,re[ue+1]=U}function St(E,U,G,re,ue){var he=240&se(E,U)|15;re[ue+0]=240&S(E,G)|Y(E,U,G)>>4,re[ue+1]=he}function hr(E,U,G,re,ue){re[ue+0]=255,ye(E,U,G,re,ue+1)}function Yr(E,U,G,re,ue){Oe(E,U,G,re,ue),re[ue+3]=255}function Tr(E,U,G,re,ue){ye(E,U,G,re,ue),re[ue+3]=255}function En(E,U){return 0>E?0:E>U?U:E}function Fn(E,U,G){B[E]=function(re,ue,he,pe,ve,be,Be,Ue,Ye){for(var Ke=Ue+(-2&Ye)*G;Ue!=Ke;)U(re[ue+0],he[pe+0],ve[be+0],Be,Ue),U(re[ue+1],he[pe+0],ve[be+0],Be,Ue+G),ue+=2,++pe,++be,Ue+=2*G;1&Ye&&U(re[ue+0],he[pe+0],ve[be+0],Be,Ue)}}function co(E,U,G){return G==0?E==0?U==0?6:5:U==0?4:0:G}function ba(E,U,G,re,ue){switch(E>>>30){case 3:Po(U,G,re,ue,0);break;case 2:ma(U,G,re,ue);break;case 1:La(U,G,re,ue)}}function xi(E,U){var G,re,ue=U.M,he=U.Nb,pe=E.oc,ve=E.pc+40,be=E.oc,Be=E.pc+584,Ue=E.oc,Ye=E.pc+600;for(G=0;16>G;++G)pe[ve+32*G-1]=129;for(G=0;8>G;++G)be[Be+32*G-1]=129,Ue[Ye+32*G-1]=129;for(0<ue?pe[ve-1-32]=be[Be-1-32]=Ue[Ye-1-32]=129:(a(pe,ve-32-1,127,21),a(be,Be-32-1,127,9),a(Ue,Ye-32-1,127,9)),re=0;re<E.za;++re){var Ke=U.ya[U.aa+re];if(0<re){for(G=-1;16>G;++G)n(pe,ve+32*G-4,pe,ve+32*G+12,4);for(G=-1;8>G;++G)n(be,Be+32*G-4,be,Be+32*G+4,4),n(Ue,Ye+32*G-4,Ue,Ye+32*G+4,4)}var Ve=E.Gd,gt=E.Hd+re,st=Ke.ad,Me=Ke.Hc;if(0<ue&&(n(pe,ve-32,Ve[gt].y,0,16),n(be,Be-32,Ve[gt].f,0,8),n(Ue,Ye-32,Ve[gt].ea,0,8)),Ke.Za){var je=pe,ct=ve-32+16;for(0<ue&&(re>=E.za-1?a(je,ct,Ve[gt].y[15],4):n(je,ct,Ve[gt+1].y,0,4)),G=0;4>G;G++)je[ct+128+G]=je[ct+256+G]=je[ct+384+G]=je[ct+0+G];for(G=0;16>G;++G,Me<<=2)je=pe,ct=ve+tA[G],Zs[Ke.Ob[G]](je,ct),ba(Me,st,16*+G,je,ct)}else if(je=co(re,ue,Ke.Ob[0]),lc[je](pe,ve),Me!=0)for(G=0;16>G;++G,Me<<=2)ba(Me,st,16*+G,pe,ve+tA[G]);for(G=Ke.Gc,je=co(re,ue,Ke.Dd),$i[je](be,Be),$i[je](Ue,Ye),Me=st,je=be,ct=Be,255&(Ke=G>>0)&&(170&Ke?jo(Me,256,je,ct):wi(Me,256,je,ct)),Ke=Ue,Me=Ye,255&(G>>=8)&&(170&G?jo(st,320,Ke,Me):wi(st,320,Ke,Me)),ue<E.Ub-1&&(n(Ve[gt].y,0,pe,ve+480,16),n(Ve[gt].f,0,be,Be+224,8),n(Ve[gt].ea,0,Ue,Ye+224,8)),G=8*he*E.B,Ve=E.sa,gt=E.ta+16*re+16*he*E.R,st=E.qa,Ke=E.ra+8*re+G,Me=E.Ha,je=E.Ia+8*re+G,G=0;16>G;++G)n(Ve,gt+G*E.R,pe,ve+32*G,16);for(G=0;8>G;++G)n(st,Ke+G*E.B,be,Be+32*G,8),n(Me,je+G*E.B,Ue,Ye+32*G,8)}}function pl(E,U,G,re,ue,he,pe,ve,be){var Be=[0],Ue=[0],Ye=0,Ke=be!=null?be.kd:0,Ve=be??new Hc;if(E==null||12>G)return 7;Ve.data=E,Ve.w=U,Ve.ha=G,U=[U],G=[G],Ve.gb=[Ve.gb];e:{var gt=U,st=G,Me=Ve.gb;if(e(E!=null),e(st!=null),e(Me!=null),Me[0]=0,12<=st[0]&&!r(E,gt[0],"RIFF")){if(r(E,gt[0]+8,"WEBP")){Me=3;break e}var je=Fe(E,gt[0]+4);if(12>je||4294967286<je){Me=3;break e}if(Ke&&je>st[0]-8){Me=7;break e}Me[0]=je,gt[0]+=12,st[0]-=12}Me=0}if(Me!=0)return Me;for(je=0<Ve.gb[0],G=G[0];;){e:{var ct=E;st=U,Me=G;var vt=Be,ht=Ue,Vt=gt=[0];if((Ot=Ye=[Ye])[0]=0,8>Me[0])Me=7;else{if(!r(ct,st[0],"VP8X")){if(Fe(ct,st[0]+4)!=10){Me=3;break e}if(18>Me[0]){Me=7;break e}var Lt=Fe(ct,st[0]+8),rr=1+ae(ct,st[0]+12);if(2147483648<=rr*(ct=1+ae(ct,st[0]+15))){Me=3;break e}Vt!=null&&(Vt[0]=Lt),vt!=null&&(vt[0]=rr),ht!=null&&(ht[0]=ct),st[0]+=18,Me[0]-=18,Ot[0]=1}Me=0}}if(Ye=Ye[0],gt=gt[0],Me!=0)return Me;if(st=!!(2&gt),!je&&Ye)return 3;if(he!=null&&(he[0]=!!(16&gt)),pe!=null&&(pe[0]=st),ve!=null&&(ve[0]=0),pe=Be[0],gt=Ue[0],Ye&&st&&be==null){Me=0;break}if(4>G){Me=7;break}if(je&&Ye||!je&&!Ye&&!r(E,U[0],"ALPH")){G=[G],Ve.na=[Ve.na],Ve.P=[Ve.P],Ve.Sa=[Ve.Sa];e:{Lt=E,Me=U,je=G;var Ot=Ve.gb;vt=Ve.na,ht=Ve.P,Vt=Ve.Sa,rr=22,e(Lt!=null),e(je!=null),ct=Me[0];var mn=je[0];for(e(vt!=null),e(Vt!=null),vt[0]=null,ht[0]=null,Vt[0]=0;;){if(Me[0]=ct,je[0]=mn,8>mn){Me=7;break e}var _n=Fe(Lt,ct+4);if(4294967286<_n){Me=3;break e}var Vr=8+_n+1&-2;if(rr+=Vr,0<Ot&&rr>Ot){Me=3;break e}if(!r(Lt,ct,"VP8 ")||!r(Lt,ct,"VP8L")){Me=0;break e}if(mn[0]<Vr){Me=7;break e}r(Lt,ct,"ALPH")||(vt[0]=Lt,ht[0]=ct+8,Vt[0]=_n),ct+=Vr,mn-=Vr}}if(G=G[0],Ve.na=Ve.na[0],Ve.P=Ve.P[0],Ve.Sa=Ve.Sa[0],Me!=0)break}G=[G],Ve.Ja=[Ve.Ja],Ve.xa=[Ve.xa];e:if(Ot=E,Me=U,je=G,vt=Ve.gb[0],ht=Ve.Ja,Vt=Ve.xa,Lt=Me[0],ct=!r(Ot,Lt,"VP8 "),rr=!r(Ot,Lt,"VP8L"),e(Ot!=null),e(je!=null),e(ht!=null),e(Vt!=null),8>je[0])Me=7;else{if(ct||rr){if(Ot=Fe(Ot,Lt+4),12<=vt&&Ot>vt-12){Me=3;break e}if(Ke&&Ot>je[0]-8){Me=7;break e}ht[0]=Ot,Me[0]+=8,je[0]-=8,Vt[0]=rr}else Vt[0]=5<=je[0]&&Ot[Lt+0]==47&&!(Ot[Lt+4]>>5),ht[0]=je[0];Me=0}if(G=G[0],Ve.Ja=Ve.Ja[0],Ve.xa=Ve.xa[0],U=U[0],Me!=0)break;if(4294967286<Ve.Ja)return 3;if(ve==null||st||(ve[0]=Ve.xa?2:1),pe=[pe],gt=[gt],Ve.xa){if(5>G){Me=7;break}ve=pe,Ke=gt,st=he,E==null||5>G?E=0:5<=G&&E[U+0]==47&&!(E[U+4]>>5)?(je=[0],Ot=[0],vt=[0],ne(ht=new j,E,U,G),Qt(ht,je,Ot,vt)?(ve!=null&&(ve[0]=je[0]),Ke!=null&&(Ke[0]=Ot[0]),st!=null&&(st[0]=vt[0]),E=1):E=0):E=0}else{if(10>G){Me=7;break}ve=gt,E==null||10>G||!As(E,U+3,G-3)?E=0:(Ke=E[U+0]|E[U+1]<<8|E[U+2]<<16,st=16383&(E[U+7]<<8|E[U+6]),E=16383&(E[U+9]<<8|E[U+8]),1&Ke||3<(Ke>>1&7)||!(Ke>>4&1)||Ke>>5>=Ve.Ja||!st||!E?E=0:(pe&&(pe[0]=st),ve&&(ve[0]=E),E=1))}if(!E||(pe=pe[0],gt=gt[0],Ye&&(Be[0]!=pe||Ue[0]!=gt)))return 3;be!=null&&(be[0]=Ve,be.offset=U-be.w,e(4294967286>U-be.w),e(be.offset==be.ha-G));break}return Me==0||Me==7&&Ye&&be==null?(he!=null&&(he[0]|=Ve.na!=null&&0<Ve.na.length),re!=null&&(re[0]=pe),ue!=null&&(ue[0]=gt),0):Me}function zc(E,U,G){var re=U.width,ue=U.height,he=0,pe=0,ve=re,be=ue;if(U.Da=E!=null&&0<E.Da,U.Da&&(ve=E.cd,be=E.bd,he=E.v,pe=E.j,11>G||(he&=-2,pe&=-2),0>he||0>pe||0>=ve||0>=be||he+ve>re||pe+be>ue))return 0;if(U.v=he,U.j=pe,U.va=he+ve,U.o=pe+be,U.U=ve,U.T=be,U.da=E!=null&&0<E.da,U.da){if(!ze(ve,be,G=[E.ib],he=[E.hb]))return 0;U.ib=G[0],U.hb=he[0]}return U.ob=E!=null&&E.ob,U.Kb=E==null||!E.Sd,U.da&&(U.ob=U.ib<3*re/4&&U.hb<3*ue/4,U.Kb=0),1}function YA(E){if(E==null)return 2;if(11>E.S){var U=E.f.RGBA;U.fb+=(E.height-1)*U.A,U.A=-U.A}else U=E.f.kb,E=E.height,U.O+=(E-1)*U.fa,U.fa=-U.fa,U.N+=(E-1>>1)*U.Ab,U.Ab=-U.Ab,U.W+=(E-1>>1)*U.Db,U.Db=-U.Db,U.F!=null&&(U.J+=(E-1)*U.lb,U.lb=-U.lb);return 0}function zu(E,U,G,re){if(re==null||0>=E||0>=U)return 2;if(G!=null){if(G.Da){var ue=G.cd,he=G.bd,pe=-2&G.v,ve=-2&G.j;if(0>pe||0>ve||0>=ue||0>=he||pe+ue>E||ve+he>U)return 2;E=ue,U=he}if(G.da){if(!ze(E,U,ue=[G.ib],he=[G.hb]))return 2;E=ue[0],U=he[0]}}re.width=E,re.height=U;e:{var be=re.width,Be=re.height;if(E=re.S,0>=be||0>=Be||!(E>=Os&&13>E))E=2;else{if(0>=re.Rd&&re.sd==null){pe=he=ue=U=0;var Ue=(ve=be*l1[E])*Be;if(11>E||(he=(Be+1)/2*(U=(be+1)/2),E==12&&(pe=(ue=be)*Be)),(Be=s(Ue+2*he+pe))==null){E=1;break e}re.sd=Be,11>E?((be=re.f.RGBA).eb=Be,be.fb=0,be.A=ve,be.size=Ue):((be=re.f.kb).y=Be,be.O=0,be.fa=ve,be.Fd=Ue,be.f=Be,be.N=0+Ue,be.Ab=U,be.Cd=he,be.ea=Be,be.W=0+Ue+he,be.Db=U,be.Ed=he,E==12&&(be.F=Be,be.J=0+Ue+2*he),be.Tc=pe,be.lb=ue)}if(U=1,ue=re.S,he=re.width,pe=re.height,ue>=Os&&13>ue)if(11>ue)E=re.f.RGBA,U&=(ve=Math.abs(E.A))*(pe-1)+he<=E.size,U&=ve>=he*l1[ue],U&=E.eb!=null;else{E=re.f.kb,ve=(he+1)/2,Ue=(pe+1)/2,be=Math.abs(E.fa),Be=Math.abs(E.Ab);var Ye=Math.abs(E.Db),Ke=Math.abs(E.lb),Ve=Ke*(pe-1)+he;U&=be*(pe-1)+he<=E.Fd,U&=Be*(Ue-1)+ve<=E.Cd,U=(U&=Ye*(Ue-1)+ve<=E.Ed)&be>=he&Be>=ve&Ye>=ve,U&=E.y!=null,U&=E.f!=null,U&=E.ea!=null,ue==12&&(U&=Ke>=he,U&=Ve<=E.Tc,U&=E.F!=null)}else U=0;E=U?0:2}}return E!=0||G!=null&&G.fd&&(E=YA(re)),E}var qa=64,Gc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Gu=24,qu=32,XA=8,vi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];dt("Predictor0","PredictorAdd0"),B.Predictor0=function(){return 4278190080},B.Predictor1=function(E){return E},B.Predictor2=function(E,U,G){return U[G+0]},B.Predictor3=function(E,U,G){return U[G+1]},B.Predictor4=function(E,U,G){return U[G-1]},B.Predictor5=function(E,U,G){return ut(ut(E,U[G+1]),U[G+0])},B.Predictor6=function(E,U,G){return ut(E,U[G-1])},B.Predictor7=function(E,U,G){return ut(E,U[G+0])},B.Predictor8=function(E,U,G){return ut(U[G-1],U[G+0])},B.Predictor9=function(E,U,G){return ut(U[G+0],U[G+1])},B.Predictor10=function(E,U,G){return ut(ut(E,U[G-1]),ut(U[G+0],U[G+1]))},B.Predictor11=function(E,U,G){var re=U[G+0];return 0>=Kt(re>>24&255,E>>24&255,(U=U[G-1])>>24&255)+Kt(re>>16&255,E>>16&255,U>>16&255)+Kt(re>>8&255,E>>8&255,U>>8&255)+Kt(255&re,255&E,255&U)?re:E},B.Predictor12=function(E,U,G){var re=U[G+0];return(Nt((E>>24&255)+(re>>24&255)-((U=U[G-1])>>24&255))<<24|Nt((E>>16&255)+(re>>16&255)-(U>>16&255))<<16|Nt((E>>8&255)+(re>>8&255)-(U>>8&255))<<8|Nt((255&E)+(255&re)-(255&U)))>>>0},B.Predictor13=function(E,U,G){var re=U[G-1];return(It((E=ut(E,U[G+0]))>>24&255,re>>24&255)<<24|It(E>>16&255,re>>16&255)<<16|It(E>>8&255,re>>8&255)<<8|It(E>>0&255,re>>0&255))>>>0};var np=B.PredictorAdd0;B.PredictorAdd1=Ut,dt("Predictor2","PredictorAdd2"),dt("Predictor3","PredictorAdd3"),dt("Predictor4","PredictorAdd4"),dt("Predictor5","PredictorAdd5"),dt("Predictor6","PredictorAdd6"),dt("Predictor7","PredictorAdd7"),dt("Predictor8","PredictorAdd8"),dt("Predictor9","PredictorAdd9"),dt("Predictor10","PredictorAdd10"),dt("Predictor11","PredictorAdd11"),dt("Predictor12","PredictorAdd12"),dt("Predictor13","PredictorAdd13");var Tf=B.PredictorAdd2;kt("ColorIndexInverseTransform","MapARGB","32b",function(E){return E>>8&255},function(E){return E}),kt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(E){return E},function(E){return E>>8&255});var qh,uo=B.ColorIndexInverseTransform,ds=B.MapARGB,qc=B.VP8LColorIndexInverseTransformAlpha,Bf=B.MapAlpha,tc=B.VP8LPredictorsAdd=[];tc.length=16,(B.VP8LPredictors=[]).length=16,(B.VP8LPredictorsAdd_C=[]).length=16,(B.VP8LPredictors_C=[]).length=16;var Kc,Js,Ns,Wc,yi,Mo,gl,Po,ma,jo,La,wi,Ku,xl,JA,$c,Yc,Xc,Wu,ZA,Jc,rc,$u,pa,Ki,zr,Gr,$n,Ca=s(511),Ao=s(2041),Zc=s(225),eu=s(767),nc=0,Kh=Ao,Yu=Zc,fs=eu,fo=Ca,Os=0,ed=1,vl=2,Nf=3,Xu=4,ac=5,Wh=6,kf=7,tu=8,sc=9,td=10,$h=[2,3,7],ho=[3,3,11],Wi=[280,256,256,256,40],Ju=[0,1,1,1,0],ic=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],oc=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Zu=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],n1=8,If=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ff=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ka=null,ga=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],vn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ru=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],yl=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ap=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],eA=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],a1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],lc=[],Zs=[],$i=[],s1=1,rd=2,wl=[],hs=[];ot("UpsampleRgbLinePair",ye,3),ot("UpsampleBgrLinePair",Oe,3),ot("UpsampleRgbaLinePair",Tr,4),ot("UpsampleBgraLinePair",Yr,4),ot("UpsampleArgbLinePair",hr,4),ot("UpsampleRgba4444LinePair",St,2),ot("UpsampleRgb565LinePair",Ze,2);var cc=B.UpsampleRgbLinePair,nu=B.UpsampleBgrLinePair,bl=B.UpsampleRgbaLinePair,Yh=B.UpsampleBgraLinePair,Xh=B.UpsampleArgbLinePair,nd=B.UpsampleRgba4444LinePair,Jh=B.UpsampleRgb565LinePair,Cl=16,Wa=1<<Cl-1,au=-227,Zh=482,ib=6,i1=0,ob=s(256),$a=s(256),sp=s(256),Rf=s(256),Df=s(Zh-au),ip=s(Zh-au);Fn("YuvToRgbRow",ye,3),Fn("YuvToBgrRow",Oe,3),Fn("YuvToRgbaRow",Tr,4),Fn("YuvToBgraRow",Yr,4),Fn("YuvToArgbRow",hr,4),Fn("YuvToRgba4444Row",St,2),Fn("YuvToRgb565Row",Ze,2);var tA=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],uc=[0,2,8],lb=[8,7,6,4,4,2,2,2,1,1,1,1],o1=1;this.WebPDecodeRGBA=function(E,U,G,re,ue){var he=ed,pe=new Jl,ve=new ea;pe.ba=ve,ve.S=he,ve.width=[ve.width],ve.height=[ve.height];var be=ve.width,Be=ve.height,Ue=new ha;if(Ue==null||E==null)var Ye=2;else e(Ue!=null),Ye=pl(E,U,G,Ue.width,Ue.height,Ue.Pd,Ue.Qd,Ue.format,null);if(Ye!=0?be=0:(be!=null&&(be[0]=Ue.width[0]),Be!=null&&(Be[0]=Ue.height[0]),be=1),be){ve.width=ve.width[0],ve.height=ve.height[0],re!=null&&(re[0]=ve.width),ue!=null&&(ue[0]=ve.height);e:{if(re=new Ga,(ue=new Hc).data=E,ue.w=U,ue.ha=G,ue.kd=1,U=[0],e(ue!=null),((E=pl(ue.data,ue.w,ue.ha,null,null,null,U,null,ue))==0||E==7)&&U[0]&&(E=4),(U=E)==0){if(e(pe!=null),re.data=ue.data,re.w=ue.w+ue.offset,re.ha=ue.ha-ue.offset,re.put=wa,re.ac=qn,re.bc=Es,re.ma=pe,ue.xa){if((E=rt())==null){pe=1;break e}if(function(Ke,Ve){var gt=[0],st=[0],Me=[0];t:for(;;){if(Ke==null)return 0;if(Ve==null)return Ke.a=2,0;if(Ke.l=Ve,Ke.a=0,ne(Ke.m,Ve.data,Ve.w,Ve.ha),!Qt(Ke.m,gt,st,Me)){Ke.a=3;break t}if(Ke.xb=rd,Ve.width=gt[0],Ve.height=st[0],!Qe(gt[0],st[0],1,Ke,null))break t;return 1}return e(Ke.a!=0),0}(E,re)){if(re=(U=zu(re.width,re.height,pe.Oa,pe.ba))==0){t:{re=E;r:for(;;){if(re==null){re=0;break t}if(e(re.s.yc!=null),e(re.s.Ya!=null),e(0<re.s.Wb),e((G=re.l)!=null),e((ue=G.ma)!=null),re.xb!=0){if(re.ca=ue.ba,re.tb=ue.tb,e(re.ca!=null),!zc(ue.Oa,G,Nf)){re.a=2;break r}if(!We(re,G.width)||G.da)break r;if((G.da||Nr(re.ca.S))&&He(),11>re.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),re.ca.f.kb.F!=null&&He()),re.Pb&&0<re.s.ua&&re.s.vb.X==null&&!Xe(re.s.vb,re.s.Wa.Xa)){re.a=1;break r}re.xb=0}if(!ke(re,re.V,re.Ba,re.c,re.i,G.o,Ne))break r;ue.Dc=re.Ma,re=1;break t}e(re.a!=0),re=0}re=!re}re&&(U=E.a)}else U=E.a}else{if((E=new _s)==null){pe=1;break e}if(E.Fa=ue.na,E.P=ue.P,E.qc=ue.Sa,Mc(E,re)){if((U=zu(re.width,re.height,pe.Oa,pe.ba))==0){if(E.Aa=0,G=pe.Oa,e((ue=E)!=null),G!=null){if(0<(be=0>(be=G.Md)?0:100<be?255:255*be/100)){for(Be=Ue=0;4>Be;++Be)12>(Ye=ue.pb[Be]).lc&&(Ye.ia=be*lb[0>Ye.lc?0:Ye.lc]>>3),Ue|=Ye.ia;Ue&&(alert("todo:VP8InitRandom"),ue.ia=1)}ue.Ga=G.Id,100<ue.Ga?ue.Ga=100:0>ue.Ga&&(ue.Ga=0)}Pu(E,re)||(U=E.a)}}else U=E.a}U==0&&pe.Oa!=null&&pe.Oa.fd&&(U=YA(pe.ba))}pe=U}he=pe!=0?null:11>he?ve.f.RGBA.eb:ve.f.kb.y}else he=null;return he};var l1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function A(B,T){for(var O="",F=0;F<4;F++)O+=String.fromCharCode(B[T++]);return O}function d(B,T){return(B[T+0]<<0|B[T+1]<<8|B[T+2]<<16)>>>0}function h(B,T){return(B[T+0]<<0|B[T+1]<<8|B[T+2]<<16|B[T+3]<<24)>>>0}new l;var m=[0],g=[0],b=[],w=new l,_=t,N=function(B,T){var O={},F=0,L=!1,Q=0,q=0;if(O.frames=[],!function(K,X,te,le){for(var de=0;de<le;de++)if(K[X+de]!=te.charCodeAt(de))return!0;return!1}(B,T,"RIFF",4)){var ie,Z;for(h(B,T+=4),T+=8;T<B.length;){var ee=A(B,T),ne=h(B,T+=4);T+=4;var z=ne+(1&ne);switch(ee){case"VP8 ":case"VP8L":O.frames[F]===void 0&&(O.frames[F]={}),(j=O.frames[F]).src_off=L?q:T-8,j.src_size=Q+ne+8,F++,L&&(L=!1,Q=0,q=0);break;case"VP8X":(j=O.header={}).feature_flags=B[T];var W=T+4;j.canvas_width=1+d(B,W),W+=3,j.canvas_height=1+d(B,W),W+=3;break;case"ALPH":L=!0,Q=z+8,q=T-8;break;case"ANIM":(j=O.header).bgcolor=h(B,T),W=T+4,j.loop_count=(ie=B)[(Z=W)+0]<<0|ie[Z+1]<<8,W+=2;break;case"ANMF":var ce,j;(j=O.frames[F]={}).offset_x=2*d(B,T),T+=3,j.offset_y=2*d(B,T),T+=3,j.width=1+d(B,T),T+=3,j.height=1+d(B,T),T+=3,j.duration=d(B,T),T+=3,ce=B[T++],j.dispose=1&ce,j.blend=ce>>1&1}ee!="ANMF"&&(T+=z)}return O}}(_,0);N.response=_,N.rgbaoutput=!0,N.dataurl=!1;var k=N.header?N.header:null,I=N.frames?N.frames:null;if(k){k.loop_counter=k.loop_count,m=[k.canvas_height],g=[k.canvas_width];for(var P=0;P<I.length&&I[P].blend!=0;P++);}var M=I[0],D=w.WebPDecodeRGBA(_,M.src_off,M.src_size,g,m);M.rgba=D,M.imgwidth=g[0],M.imgheight=m[0];for(var C=0;C<g[0]*m[0]*4;C++)b[C]=D[C];return this.width=g,this.height=m,this.data=b,this}(function(t){var e=function(){return typeof H_=="function"},r=function(m,g,b,w){var _=4,N=i;switch(w){case t.image_compression.FAST:_=1,N=s;break;case t.image_compression.MEDIUM:_=6,N=o;break;case t.image_compression.SLOW:_=9,N=l}m=n(m,g,b,N);var k=H_(m,{level:_});return t.__addimage__.arrayBufferToBinaryString(k)},n=function(m,g,b,w){for(var _,N,k,I=m.length/g,P=new Uint8Array(m.length+I),M=d(),D=0;D<I;D+=1){if(k=D*g,_=m.subarray(k,k+g),w)P.set(w(_,b,N),k+D);else{for(var C,B=M.length,T=[];C<B;C+=1)T[C]=M[C](_,b,N);var O=h(T.concat());P.set(T[O],k+D)}N=_}return P},a=function(m){var g=Array.apply([],m);return g.unshift(0),g},s=function(m,g){var b,w=[],_=m.length;w[0]=1;for(var N=0;N<_;N+=1)b=m[N-g]||0,w[N+1]=m[N]-b+256&255;return w},i=function(m,g,b){var w,_=[],N=m.length;_[0]=2;for(var k=0;k<N;k+=1)w=b&&b[k]||0,_[k+1]=m[k]-w+256&255;return _},o=function(m,g,b){var w,_,N=[],k=m.length;N[0]=3;for(var I=0;I<k;I+=1)w=m[I-g]||0,_=b&&b[I]||0,N[I+1]=m[I]+256-(w+_>>>1)&255;return N},l=function(m,g,b){var w,_,N,k,I=[],P=m.length;I[0]=4;for(var M=0;M<P;M+=1)w=m[M-g]||0,_=b&&b[M]||0,N=b&&b[M-g]||0,k=A(w,_,N),I[M+1]=m[M]-k+256&255;return I},A=function(m,g,b){if(m===g&&g===b)return m;var w=Math.abs(g-b),_=Math.abs(m-b),N=Math.abs(m+g-b-b);return w<=_&&w<=N?m:_<=N?g:b},d=function(){return[a,s,i,o,l]},h=function(m){var g=m.map(function(b){return b.reduce(function(w,_){return w+Math.abs(_)},0)});return g.indexOf(Math.min.apply(null,g))};t.processPNG=function(m,g,b,w){var _,N,k,I,P,M,D,C,B,T,O,F,L,Q,q,ie=this.decode.FLATE_DECODE,Z="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(k=new Bie(m)).imgData,N=k.bits,_=k.colorSpace,P=k.colors,[4,6].indexOf(k.colorType)!==-1){if(k.bits===8){B=(C=k.pixelBitlength==32?new Uint32Array(k.decodePixels().buffer):k.pixelBitlength==16?new Uint16Array(k.decodePixels().buffer):new Uint8Array(k.decodePixels().buffer)).length,O=new Uint8Array(B*k.colors),T=new Uint8Array(B);var ee,ne=k.pixelBitlength-k.bits;for(Q=0,q=0;Q<B;Q++){for(L=C[Q],ee=0;ee<ne;)O[q++]=L>>>ee&255,ee+=k.bits;T[Q]=L>>>ee&255}}if(k.bits===16){B=(C=new Uint32Array(k.decodePixels().buffer)).length,O=new Uint8Array(B*(32/k.pixelBitlength)*k.colors),T=new Uint8Array(B*(32/k.pixelBitlength)),F=k.colors>1,Q=0,q=0;for(var z=0;Q<B;)L=C[Q++],O[q++]=L>>>0&255,F&&(O[q++]=L>>>16&255,L=C[Q++],O[q++]=L>>>0&255),T[z++]=L>>>16&255;N=8}w!==t.image_compression.NONE&&e()?(m=r(O,k.width*k.colors,k.colors,w),D=r(T,k.width,1,w)):(m=O,D=T,ie=void 0)}if(k.colorType===3&&(_=this.color_spaces.INDEXED,M=k.palette,k.transparency.indexed)){var W=k.transparency.indexed,ce=0;for(Q=0,B=W.length;Q<B;++Q)ce+=W[Q];if((ce/=255)===B-1&&W.indexOf(0)!==-1)I=[W.indexOf(0)];else if(ce!==B){for(C=k.decodePixels(),T=new Uint8Array(C.length),Q=0,B=C.length;Q<B;Q++)T[Q]=W[C[Q]];D=r(T,k.width,1)}}var j=function(K){var X;switch(K){case t.image_compression.FAST:X=11;break;case t.image_compression.MEDIUM:X=13;break;case t.image_compression.SLOW:X=14;break;default:X=12}return X}(w);return ie===this.decode.FLATE_DECODE&&(Z="/Predictor "+j+" "),Z+="/Colors "+P+" /BitsPerComponent "+N+" /Columns "+k.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(D&&this.__addimage__.isArrayBuffer(D)||this.__addimage__.isArrayBufferView(D))&&(D=this.__addimage__.arrayBufferToBinaryString(D)),{alias:b,data:m,index:g,filter:ie,decodeParameters:Z,transparency:I,palette:M,sMask:D,predictor:j,width:k.width,height:k.height,bitsPerComponent:N,colorSpace:_}}}})(sr.API),function(t){t.processGIF89A=function(e,r,n,a){var s=new Nie(e),i=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var A={data:l,width:i,height:o},d=new GC(100).encode(A,100);return t.processJPEG.call(this,d,r,n,a)},t.processGIF87A=t.processGIF89A}(sr.API),xc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},xc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){ra.log("bit decode error:"+r)}},xc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}r!==0&&(this.pos+=4-r)}},xc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,o=s>>4,l=15&s,A=this.palette[o];if(this.data[i]=A.blue,this.data[i+1]=A.green,this.data[i+2]=A.red,this.data[i+3]=255,2*a+1>=this.width)break;A=this.palette[l],this.data[i+4]=A.blue,this.data[i+4+1]=A.green,this.data[i+4+2]=A.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},xc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},xc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,A=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=A}this.pos+=t}},xc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,l=(i>>5&r)/r*255|0,A=(i>>11)/e*255|0,d=a*this.width*4+4*s;this.data[d]=A,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},xc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},xc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=i}},xc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,a){var s=new xc(e,!1),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},A=new GC(100).encode(l,100);return t.processJPEG.call(this,A,r,n,a)}}(sr.API),dF.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,a){var s=new dF(e),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},A=new GC(100).encode(l,100);return t.processJPEG.call(this,A,r,n,a)}}(sr.API),sr.API.processRGBA=function(t,e,r){for(var n=t.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),o=0,l=0,A=0;A<a;A+=4){var d=n[A],h=n[A+1],m=n[A+2],g=n[A+3];s[o++]=d,s[o++]=h,s[o++]=m,i[l++]=g}var b=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:b,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},sr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},b0=sr.API,hv=b0.getCharWidthsArray=function(t,e){var r,n,a=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:a.metadata.Unicode.widths,l=o.fof?o.fof:1,A=e.kerning?e.kerning:a.metadata.Unicode.kerning,d=A.fof?A.fof:1,h=e.doKerning!==!1,m=0,g=t.length,b=0,w=o[0]||l,_=[];for(r=0;r<g;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?_.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(m=h&&Vn(A[n])==="object"&&!isNaN(parseInt(A[n][b],10))?A[n][b]/d:0,_.push((o[n]||w)/l+m)),b=n;return _},lF=b0.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return b0.processArabic&&(t=b0.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:hv.apply(this,arguments).reduce(function(s,i){return s+i},0)},cF=function(t,e,r,n){for(var a=[],s=0,i=t.length,o=0;s!==i&&o+e[s]<r;)o+=e[s],s++;a.push(t.slice(0,s));var l=s;for(o=0;s!==i;)o+e[s]>n&&(a.push(t.slice(l,s)),o=0,l=s),o+=e[s],s++;return l!==s&&a.push(t.slice(l,s)),a},uF=function(t,e,r){r||(r={});var n,a,s,i,o,l,A,d=[],h=[d],m=r.textIndent||0,g=0,b=0,w=t.split(" "),_=hv.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?w[0].length+2:r.lineIndent||0){var N=Array(l).join(" "),k=[];w.map(function(P){(P=P.split(/\s*\n/)).length>1?k=k.concat(P.map(function(M,D){return(D&&M.length?`
`:"")+M})):k.push(P[0])}),w=k,l=lF.apply(this,[N,r])}for(s=0,i=w.length;s<i;s++){var I=0;if(n=w[s],l&&n[0]==`
`&&(n=n.substr(1),I=1),m+g+(b=(a=hv.apply(this,[n,r])).reduce(function(P,M){return P+M},0))>e||I){if(b>e){for(o=cF.apply(this,[n,a,e-(m+g),e]),d.push(o.shift()),d=[o.pop()];o.length;)h.push([o.shift()]);b=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(P,M){return P+M},0)}else d=[n];h.push(d),m=b+l,g=_}else d.push(n),m+=g+b,g=_}return A=l?function(P,M){return(M?N:"")+P.join(" ")}:function(P){return P.join(" ")},h.map(A)},b0.splitTextToSize=function(t,e,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var h=this.internal.getFont(d.fontName,d.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var o,l,A=[];for(o=0,l=n.length;o<l;o++)A=A.concat(uF.apply(this,[n[o],i,s]));return A},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},a=0;a<e.length;a++)r[e[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=e[a];var s=function(h){return"0x"+parseInt(h,10).toString(16)},i=t.__fontmetrics__.compress=function(h){var m,g,b,w,_=["{"];for(var N in h){if(m=h[N],isNaN(parseInt(N,10))?g="'"+N+"'":(N=parseInt(N,10),g=(g=s(N).slice(2)).slice(0,-1)+n[g.slice(-1)]),typeof m=="number")m<0?(b=s(m).slice(3),w="-"):(b=s(m).slice(2),w=""),b=w+b.slice(0,-1)+n[b.slice(-1)];else{if(Vn(m)!=="object")throw new Error("Don't know what to do with value type "+Vn(m)+".");b=i(m)}_.push(g+b)}return _.push("}"),_.join("")},o=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,g,b,w,_={},N=1,k=_,I=[],P="",M="",D=h.length-1,C=1;C<D;C+=1)(w=h[C])=="'"?m?(b=m.join(""),m=void 0):m=[]:m?m.push(w):w=="{"?(I.push([k,b]),k={},b=void 0):w=="}"?((g=I.pop())[0][g[1]]=k,b=void 0,k=g[0]):w=="-"?N=-1:b===void 0?r.hasOwnProperty(w)?(P+=r[w],b=parseInt(P,16)*N,N=1,P=""):P+=w:r.hasOwnProperty(w)?(M+=r[w],k[b]=parseInt(M,16)*N,N=1,b=void 0,M=""):M+=w;return _},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},A={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var m=h.font,g=d.Unicode[m.postScriptName];g&&(m.metadata.Unicode={},m.metadata.Unicode.widths=g.widths,m.metadata.Unicode.kerning=g.kerning);var b=A.Unicode[m.postScriptName];b&&(m.metadata.Unicode.encoding=b,m.encoding=b.codePages[0])}])}(sr.API),function(t){var e=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Rg(o)),i.metadata=t.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,n)}}])}(sr),function(t){function e(){return(wr.canvg?Promise.resolve(wr.canvg):M_(()=>import("./index.es-Dctyy9Lx.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}sr.API.addSvgAsImage=function(r,n,a,s,i,o,l,A){if(isNaN(n)||isNaN(a))throw ra.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw ra.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=i;var h=d.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,d.width,d.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(b){return b.fromString(h,r,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(m)}).then(function(){g.addImage(d.toDataURL("image/jpeg",1),n,a,s,i,l,A)})}}(),sr.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,r);return this},sr.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),l=[],A=0,d=0,h=0;function m(b,w){var _,N=!1;for(_=0;_<b.length;_+=1)b[_]===w&&(N=!0);return N}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=o.length;for(h=0;h<g;h+=1)r[o[h]].value=r[o[h]].defaultValue,r[o[h]].explicitSet=!1}if(Vn(t)==="object"){for(a in t)if(s=t[a],m(o,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&m(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(A=0;A<s.length;A+=1)if(n=!0,s[A].length===1&&typeof s[A][0]=="number")l.push(String(s[A]-1));else if(s[A].length>1){for(d=0;d<s[A].length;d+=1)typeof s[A][d]!="number"&&(n=!1);n===!0&&l.push([s[A][0]-1,s[A][1]-1].join(" "))}r[a].value="["+l.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,w=[];for(b in r)r[b].explicitSet===!0&&(r[b].type==="name"?w.push("/"+b+" /"+r[b].value):w.push("/"+b+" "+r[b].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),A=s.length+i.length+o.length+a.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+A+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+o+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(sr.API),function(t){var e=t.API,r=e.pdfEscape16=function(s,i){for(var o,l=i.metadata.Unicode.widths,A=["","0","00","000","0000"],d=[""],h=0,m=s.length;h<m;++h){if(o=i.metadata.characterToGlyph(s.charCodeAt(h)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=s.charCodeAt(h),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(A[4-o.length],o)}return d.join("")},n=function(s){var i,o,l,A,d,h,m;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,m=(o=Object.keys(s).sort(function(g,b){return g-b})).length;h<m;h++)i=o[h],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(A=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),l.push("<"+i+"><"+A+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(i){var o=i.font,l=i.out,A=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var h=o.metadata.Unicode.widths,m=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),g="",b=0;b<m.length;b++)g+=String.fromCharCode(m[b]);var w=A();d({data:g,addLength1:!0,objectId:w}),l("endobj");var _=A();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:_}),l("endobj");var N=A();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+z0(o.fontName)),l("/FontFile2 "+w+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var k=A();l("<<"),l("/Type /Font"),l("/BaseFont /"+z0(o.fontName)),l("/FontDescriptor "+N+" 0 R"),l("/W "+t.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=A(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+_+" 0 R"),l("/BaseFont /"+z0(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+k+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(i){var o=i.font,l=i.out,A=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var h=o.metadata.rawData,m="",g=0;g<h.length;g++)m+=String.fromCharCode(h[g]);var b=A();d({data:m,addLength1:!0,objectId:b}),l("endobj");var w=A();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var _=A();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+b+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+z0(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=A();for(var N=0;N<o.metadata.hmtx.widths.length;N++)o.metadata.hmtx.widths[N]=parseInt(o.metadata.hmtx.widths[N]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+z0(o.fontName)+"/FontDescriptor "+_+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,o=s.text||"",l=s.x,A=s.y,d=s.options||{},h=s.mutex||{},m=h.pdfEscape,g=h.activeFontKey,b=h.fonts,w=g,_="",N=0,k="",I=b[w].encoding;if(b[w].encoding!=="Identity-H")return{text:o,x:l,y:A,options:d,mutex:h};for(k=o,w=g,Array.isArray(o)&&(k=o[0]),N=0;N<k.length;N+=1)b[w].metadata.hasOwnProperty("cmap")&&(i=b[w].metadata.cmap.unicode.codeMap[k[N].charCodeAt(0)]),i||k[N].charCodeAt(0)<256&&b[w].metadata.hasOwnProperty("Unicode")?_+=k[N]:_+="";var P="";return parseInt(w.slice(1))<14||I==="WinAnsiEncoding"?P=m(_,w).split("").map(function(M){return M.charCodeAt(0).toString(16)}).join(""):I==="Identity-H"&&(P=r(_,b[w])),h.isHex=!0,{text:P,x:l,y:A,options:d,mutex:h}};e.events.push(["postProcessText",function(s){var i=s.text||"",o=[],l={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var A=0;for(A=0;A<i.length;A+=1)Array.isArray(i[A])&&i[A].length===3?o.push([a(Object.assign({},l,{text:i[A][0]})).text,i[A][1],i[A][2]]):o.push(a(Object.assign({},l,{text:i[A]})).text);s.text=o}else s.text=a(Object.assign({},l,{text:i})).text}])}(sr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(sr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,s,i,o,l,A,d,h=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},_=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],N=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),k=!1,I=0;this.__bidiEngine__={};var P=function(F){var L=F.charCodeAt(),Q=L>>8,q=w[Q];return q!==void 0?h[256*q+(255&L)]:Q===252||Q===253?"AL":N.test(Q)?"L":Q===8?"R":"N"},M=function(F){for(var L,Q=0;Q<F.length;Q++){if((L=P(F.charAt(Q)))==="L")return!1;if(L==="R")return!0}return!1},D=function(F,L,Q,q){var ie,Z,ee,ne,z=L[q];switch(z){case"L":case"R":k=!1;break;case"N":case"AN":break;case"EN":k&&(z="AN");break;case"AL":k=!0,z="R";break;case"WS":z="N";break;case"CS":q<1||q+1>=L.length||(ie=Q[q-1])!=="EN"&&ie!=="AN"||(Z=L[q+1])!=="EN"&&Z!=="AN"?z="N":k&&(Z="AN"),z=Z===ie?Z:"N";break;case"ES":z=(ie=q>0?Q[q-1]:"B")==="EN"&&q+1<L.length&&L[q+1]==="EN"?"EN":"N";break;case"ET":if(q>0&&Q[q-1]==="EN"){z="EN";break}if(k){z="N";break}for(ee=q+1,ne=L.length;ee<ne&&L[ee]==="ET";)ee++;z=ee<ne&&L[ee]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(ne=L.length,ee=q+1;ee<ne&&L[ee]==="NSM";)ee++;if(ee<ne){var W=F[q],ce=W>=1425&&W<=2303||W===64286;if(ie=L[ee],ce&&(ie==="R"||ie==="AL")){z="R";break}}}z=q<1||(ie=L[q-1])==="B"?"N":Q[q-1];break;case"B":k=!1,a=!0,z=I;break;case"S":s=!0,z="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":k=!1;break;case"BN":z="N"}return z},C=function(F,L,Q){var q=F.split("");return Q&&B(q,Q,{hiLevel:I}),q.reverse(),L&&L.reverse(),q.join("")},B=function(F,L,Q){var q,ie,Z,ee,ne,z=-1,W=F.length,ce=0,j=[],K=I?g:m,X=[];for(k=!1,a=!1,s=!1,ie=0;ie<W;ie++)X[ie]=P(F[ie]);for(Z=0;Z<W;Z++){if(ne=ce,j[Z]=D(F,X,j,Z),q=240&(ce=K[ne][b[j[Z]]]),ce&=15,L[Z]=ee=K[ce][5],q>0)if(q===16){for(ie=z;ie<Z;ie++)L[ie]=1;z=-1}else z=-1;if(K[ce][6])z===-1&&(z=Z);else if(z>-1){for(ie=z;ie<Z;ie++)L[ie]=ee;z=-1}X[Z]==="B"&&(L[Z]=0),Q.hiLevel|=ee}s&&function(te,le,de){for(var me=0;me<de;me++)if(te[me]==="S"){le[me]=I;for(var ge=me-1;ge>=0&&te[ge]==="WS";ge--)le[ge]=I}}(X,L,W)},T=function(F,L,Q,q,ie){if(!(ie.hiLevel<F)){if(F===1&&I===1&&!a)return L.reverse(),void(Q&&Q.reverse());for(var Z,ee,ne,z,W=L.length,ce=0;ce<W;){if(q[ce]>=F){for(ne=ce+1;ne<W&&q[ne]>=F;)ne++;for(z=ce,ee=ne-1;z<ee;z++,ee--)Z=L[z],L[z]=L[ee],L[ee]=Z,Q&&(Z=Q[z],Q[z]=Q[ee],Q[ee]=Z);ce=ne}ce++}}},O=function(F,L,Q){var q=F.split(""),ie={hiLevel:I};return Q||(Q=[]),B(q,Q,ie),function(Z,ee,ne){if(ne.hiLevel!==0&&d)for(var z,W=0;W<Z.length;W++)ee[W]===1&&(z=_.indexOf(Z[W]))>=0&&(Z[W]=_[z+1])}(q,Q,ie),T(2,q,L,Q,ie),T(1,q,L,Q,ie),q.join("")};return this.__bidiEngine__.doBidiReorder=function(F,L,Q){if(function(ie,Z){if(Z)for(var ee=0;ee<ie.length;ee++)Z[ee]=ee;o===void 0&&(o=M(ie)),A===void 0&&(A=M(ie))}(F,L),i||!l||A)if(i&&l&&o^A)I=o?1:0,F=C(F,L,Q);else if(!i&&l&&A)I=o?1:0,F=O(F,L,Q),F=C(F,L);else if(!i||o||l||A){if(i&&!l&&o^A)F=C(F,L),o?(I=0,F=O(F,L,Q)):(I=1,F=O(F,L,Q),F=C(F,L));else if(i&&o&&!l&&A)I=1,F=O(F,L,Q),F=C(F,L);else if(!i&&!l&&o^A){var q=d;o?(I=1,F=O(F,L,Q),I=0,d=!1,F=O(F,L,Q),d=q):(I=0,F=O(F,L,Q),F=C(F,L),I=1,d=!1,F=O(F,L,Q),d=q,F=C(F,L))}}else I=0,F=O(F,L,Q);else I=o?1:0,F=O(F,L,Q);return F},this.__bidiEngine__.setOptions=function(F){F&&(i=F.isInputVisual,l=F.isOutputVisual,o=F.isInputRtl,A=F.isOutputRtl,d=F.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text,s=(n.x,n.y,n.options||{}),i=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(i=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?i.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):i.push([r.doBidiReorder(a[o])]);n.text=i}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(sr),sr.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new mf(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new zie(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new kie(this.contents),this.head=new Fie(this),this.name=new Mie(this),this.cmap=new SM(this),this.toUnicode={},this.hhea=new Rie(this),this.maxp=new Pie(this),this.hmtx=new jie(this),this.post=new Lie(this),this.os2=new Die(this),this.loca=new Vie(this),this.glyf=new Oie(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,l,A;for(A=[],i=0,o=(l=this.bbox).length;i<o;i++)e=l[i],A.push(Math.round(e*this.scaleFactor));return A}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var a,s,i,o;for(i=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)a=e.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return i*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Dc,mf=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,a;for(a=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(e.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,a,s,i,o,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*i+256*o+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,a,s;for(s=[],n=0,a=e.length;n<a;n++)r=e[n],s.push(this.writeByte(r));return s},t}(),kie=function(){var t;function e(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,a,s,i,o,l,A,d,h,m,g,b,w;for(w in g=Object.keys(r).length,l=Math.log(2),h=16*Math.floor(Math.log(g)/l),i=Math.floor(h/l),d=16*g-h,(a=new mf).writeInt(this.scalarType),a.writeShort(g),a.writeShort(h),a.writeShort(i),a.writeShort(d),s=16*g,A=a.pos+s,o=null,b=[],r)for(m=r[w],a.writeString(w),a.writeInt(t(m)),a.writeInt(A),a.writeInt(m.length),b=b.concat(m),w==="head"&&(o=A),A+=m.length;A%4;)b.push(0),A++;return a.write(b),n=2981146554-t(a.data),a.pos=o+8,a.writeUInt32(n),a.data},t=function(r){var n,a,s,i;for(r=TM.call(r);r.length%4;)r.push(0);for(s=new mf(r),a=0,n=0,i=r.length;n<i;n=n+=4)a+=s.readUInt32();return 4294967295&a},e}(),Iie={}.hasOwnProperty,Fu=function(t,e){for(var r in e)Iie.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Dc=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Fie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fu(e,Dc),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new mf).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),fF=function(){function t(e,r){var n,a,s,i,o,l,A,d,h,m,g,b,w,_,N,k,I;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(g=e.readUInt16(),m=g/2,e.pos+=6,s=function(){var P,M;for(M=[],l=P=0;0<=m?P<m:P>m;l=0<=m?++P:--P)M.push(e.readUInt16());return M}(),e.pos+=2,w=function(){var P,M;for(M=[],l=P=0;0<=m?P<m:P>m;l=0<=m?++P:--P)M.push(e.readUInt16());return M}(),A=function(){var P,M;for(M=[],l=P=0;0<=m?P<m:P>m;l=0<=m?++P:--P)M.push(e.readUInt16());return M}(),d=function(){var P,M;for(M=[],l=P=0;0<=m?P<m:P>m;l=0<=m?++P:--P)M.push(e.readUInt16());return M}(),a=(this.length-e.pos+this.offset)/2,o=function(){var P,M;for(M=[],l=P=0;0<=a?P<a:P>a;l=0<=a?++P:--P)M.push(e.readUInt16());return M}(),l=N=0,I=s.length;N<I;l=++N)for(_=s[l],n=k=b=w[l];b<=_?k<=_:k>=_;n=b<=_?++k:--k)d[l]===0?i=n+A[l]:(i=o[d[l]/2+(n-b)-(m-l)]||0)!==0&&(i+=A[l]),this.codeMap[n]=65535&i}e.pos=h}return t.encode=function(e,r){var n,a,s,i,o,l,A,d,h,m,g,b,w,_,N,k,I,P,M,D,C,B,T,O,F,L,Q,q,ie,Z,ee,ne,z,W,ce,j,K,X,te,le,de,me,ge,Se,xe,ae;switch(q=new mf,i=Object.keys(e).sort(function(Fe,Xe){return Fe-Xe}),r){case"macroman":for(w=0,_=function(){var Fe=[];for(b=0;b<256;++b)Fe.push(0);return Fe}(),k={0:0},s={},ie=0,z=i.length;ie<z;ie++)k[ge=e[a=i[ie]]]==null&&(k[ge]=++w),s[a]={old:e[a],new:k[e[a]]},_[a]=k[e[a]];return q.writeUInt16(1),q.writeUInt16(0),q.writeUInt32(12),q.writeUInt16(0),q.writeUInt16(262),q.writeUInt16(0),q.write(_),{charMap:s,subtable:q.data,maxGlyphID:w+1};case"unicode":for(L=[],h=[],I=0,k={},n={},N=A=null,Z=0,W=i.length;Z<W;Z++)k[M=e[a=i[Z]]]==null&&(k[M]=++I),n[a]={old:M,new:k[M]},o=k[M]-a,N!=null&&o===A||(N&&h.push(N),L.push(a),A=o),N=a;for(N&&h.push(N),h.push(65535),L.push(65535),O=2*(T=L.length),B=2*Math.pow(Math.log(T)/Math.LN2,2),m=Math.log(B/2)/Math.LN2,C=2*T-B,l=[],D=[],g=[],b=ee=0,ce=L.length;ee<ce;b=++ee){if(F=L[b],d=h[b],F===65535){l.push(0),D.push(0);break}if(F-(Q=n[F].new)>=32768)for(l.push(0),D.push(2*(g.length+T-b)),a=ne=F;F<=d?ne<=d:ne>=d;a=F<=d?++ne:--ne)g.push(n[a].new);else l.push(Q-F),D.push(0)}for(q.writeUInt16(3),q.writeUInt16(1),q.writeUInt32(12),q.writeUInt16(4),q.writeUInt16(16+8*T+2*g.length),q.writeUInt16(0),q.writeUInt16(O),q.writeUInt16(B),q.writeUInt16(m),q.writeUInt16(C),de=0,j=h.length;de<j;de++)a=h[de],q.writeUInt16(a);for(q.writeUInt16(0),me=0,K=L.length;me<K;me++)a=L[me],q.writeUInt16(a);for(Se=0,X=l.length;Se<X;Se++)o=l[Se],q.writeUInt16(o);for(xe=0,te=D.length;xe<te;xe++)P=D[xe],q.writeUInt16(P);for(ae=0,le=g.length;ae<le;ae++)w=g[ae],q.writeUInt16(w);return{charMap:n,subtable:q.data,maxGlyphID:I+1}}},t}(),SM=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fu(e,Dc),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new fF(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=fF.encode(r,n),(s=new mf).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},e}(),Rie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fu(e,Dc),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),Die=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fu(e,Dc),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),Lie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fu(e,Dc),e.prototype.tag="post",e.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var i;for(a=r.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var o,l,A;for(A=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)A.push(r.readUInt32());return A}).call(this)}},e}(),Uie=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Mie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fu(e,Dc),e.prototype.tag="name",e.prototype.parse=function(r){var n,a,s,i,o,l,A,d,h,m,g;for(r.pos=this.offset,r.readShort(),n=r.readShort(),l=r.readShort(),a=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+l+r.readShort()});for(A={},i=h=0,m=a.length;h<m;i=++h)s=a[i],r.pos=s.offset,d=r.readString(s.length),o=new Uie(d,s),A[g=s.nameID]==null&&(A[g]=[]),A[s.nameID].push(o);this.strings=A,this.copyright=A[0],this.fontFamily=A[1],this.fontSubfamily=A[2],this.uniqueSubfamily=A[3],this.fontName=A[4],this.version=A[5];try{this.postscriptName=A[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=A[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=A[7],this.manufacturer=A[8],this.designer=A[9],this.description=A[10],this.vendorUrl=A[11],this.designerUrl=A[12],this.license=A[13],this.licenseUrl=A[14],this.preferredFamily=A[15],this.preferredSubfamily=A[17],this.compatibleFull=A[18],this.sampleText=A[19]},e}(),Pie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fu(e,Dc),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),jie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fu(e,Dc),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,a,s,i,o,l,A;for(r.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,h;for(h=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)h.push(r.readInt16());return h}(),this.widths=(function(){var d,h,m,g;for(g=[],d=0,h=(m=this.metrics).length;d<h;d++)i=m[d],g.push(i.advance);return g}).call(this),a=this.widths[this.widths.length-1],A=[],n=o=0;0<=s?o<s:o>s;n=0<=s?++o:--o)A.push(this.widths.push(a));return A},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),TM=[].slice,Oie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fu(e,Dc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,a,s,i,o,l,A,d,h,m;return r in this.cache?this.cache[r]:(i=this.file.loca,n=this.file.contents,a=i.indexOf(r),(s=i.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,o=(l=new mf(n.read(s))).readShort(),d=l.readShort(),m=l.readShort(),A=l.readShort(),h=l.readShort(),this.cache[r]=o===-1?new Hie(l,d,m,A,h):new Qie(l,o,d,m,A,h),this.cache[r]))},e.prototype.encode=function(r,n,a){var s,i,o,l,A;for(o=[],i=[],l=0,A=n.length;l<A;l++)s=r[n[l]],i.push(o.length),s&&(o=o.concat(s.encode(a)));return i.push(o.length),{table:o,offsets:i}},e}(),Qie=function(){function t(e,r,n,a,s,i){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Hie=function(){function t(e,r,n,a,s){var i,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new mf(TM.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),Vie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Fu(e,Dc),e.prototype.tag="loca",e.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=2)i.push(2*r.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=4)i.push(r.readUInt32());return i}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,i=0,o=0;o<a.length;++o)if(a[o]=s,i<n.length&&n[i]==o){++i,a[o]=s;var l=this.offsets[o],A=this.offsets[o+1]-l;A>0&&(s+=A)}for(var d=new Array(4*a.length),h=0;h<a.length;++h)d[4*h+3]=255&a[h],d[4*h+2]=(65280&a[h])>>8,d[4*h+1]=(16711680&a[h])>>16,d[4*h]=(4278190080&a[h])>>24;return d},e}(),zie=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=a[n];return e},t.prototype.glyphsFor=function(e){var r,n,a,s,i,o,l;for(a={},i=0,o=e.length;i<o;i++)a[s=e[i]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in l=this.glyphsFor(r))n=l[s],a[s]=n;return a},t.prototype.encode=function(e,r){var n,a,s,i,o,l,A,d,h,m,g,b,w,_,N;for(a in n=SM.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),g={0:0},N=n.charMap)g[(l=N[a]).old]=l.new;for(b in m=n.maxGlyphID,i)b in g||(g[b]=m++);return d=function(k){var I,P;for(I in P={},k)P[k[I]]=I;return P}(g),h=Object.keys(d).sort(function(k,I){return k-I}),w=function(){var k,I,P;for(P=[],k=0,I=h.length;k<I;k++)o=h[k],P.push(d[o]);return P}(),s=this.font.glyf.encode(i,w,g),A=this.font.loca.encode(s.offsets,w),_={cmap:this.font.cmap.raw(),glyf:s.table,loca:A,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(_["OS/2"]=this.font.os2.raw()),this.font.directory.encode(_)},t}();sr.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var o,l,A;for(A=[],o=0,l=r.length;o<l;o++)n=r[o],A.push(e.convert(n));return A}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+e.convert(i));return s.push(">>"),s.join(`
`)}return""+r},e}();function BM(t,e,r,n,a){n=n||{};var s=1.15,i=a.internal.scaleFactor,o=a.internal.getFontSize()/i,l=a.getLineHeightFactor?a.getLineHeightFactor():s,A=o*l,d=/\r\n|\r|\n/g,h="",m=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(h=typeof t=="string"?t.split(d):t,m=h.length||1),r+=o*(2-s),n.valign==="middle"?r-=m/2*A:n.valign==="bottom"&&(r-=m*A),n.halign==="center"||n.halign==="right"){var g=o;if(n.halign==="center"&&(g*=.5),h&&m>=1){for(var b=0;b<h.length;b++)a.text(h[b],e-a.getStringUnitWidth(h[b])*g,r),r+=A;return a}e-=a.getStringUnitWidth(t)*g}return n.halign==="justify"?a.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(t,e,r),a}var hF={},Am=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:hF=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,a,s;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,l=i.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var A=this.getFontList()[l];A&&A.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(A[0]),o=A[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var d=t.unifyColor(e.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=t.unifyColor(e.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=t.unifyColor(e.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,a,s){return this.jsPDFDocument.rect(e,r,n,a,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return hF||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),$_=function(t,e){return $_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},$_(t,e)};function NM(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");$_(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var kM=function(t){NM(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e}(Array);function Gie(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function qie(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function ay(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,i){return Math.max(s,i)},0);return a}function IM(t,e,r,n){var a=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:a,lineColor:s});var i=FM(a,!1);i&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,i)}function FM(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function Tw(t,e){var r,n,a,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(a=t.right)!==null&&a!==void 0?a:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function RM(t,e){var r=Tw(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function Kie(t,e,r,n,a){var s={},i=1.3333333333333333,o=qC(e,function(I){return a.getComputedStyle(I).backgroundColor});o!=null&&(s.fillColor=o);var l=qC(e,function(I){return a.getComputedStyle(I).color});l!=null&&(s.textColor=l);var A=$ie(n,r);A&&(s.cellPadding=A);var d="borderTopColor",h=i*r,m=n.borderTopWidth;if(n.borderBottomWidth===m&&n.borderRightWidth===m&&n.borderLeftWidth===m){var g=(parseFloat(m)||0)/h;g&&(s.lineWidth=g)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/h,right:(parseFloat(n.borderRightWidth)||0)/h,bottom:(parseFloat(n.borderBottomWidth)||0)/h,left:(parseFloat(n.borderLeftWidth)||0)/h},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var b=qC(e,function(I){return a.getComputedStyle(I)[d]});b!=null&&(s.lineColor=b);var w=["left","right","center","justify"];w.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),w=["middle","bottom","top"],w.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var _=parseInt(n.fontSize||"");isNaN(_)||(s.fontSize=_/i);var N=Wie(n);N&&(s.fontStyle=N);var k=(n.fontFamily||"").toLowerCase();return t.indexOf(k)!==-1&&(s.font=k),s}function Wie(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function qC(t,e){var r=DM(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function DM(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:DM(t.parentElement,e):r}function $ie(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),a=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=r.map(function(o){return parseInt(o||"0")/n}),i=Tw(s,0);return a>i.top&&(i.top=a),a>i.bottom&&(i.bottom=a),i}function LM(t,e,r,n,a){var s,i;n===void 0&&(n=!1),a===void 0&&(a=!1);var o;typeof e=="string"?o=r.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),A=t.scaleFactor(),d=[],h=[],m=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:d,body:h,foot:m};for(var g=0;g<o.rows.length;g++){var b=o.rows[g],w=(i=(s=b==null?void 0:b.parentElement)===null||s===void 0?void 0:s.tagName)===null||i===void 0?void 0:i.toLowerCase(),_=Yie(l,A,r,b,n,a);_&&(w==="thead"?d.push(_):w==="tfoot"?m.push(_):h.push(_))}return{head:d,body:h,foot:m}}function Yie(t,e,r,n,a,s){for(var i=new kM(n),o=0;o<n.cells.length;o++){var l=n.cells[o],A=r.getComputedStyle(l);if(a||A.display!=="none"){var d=void 0;s&&(d=Kie(t,l,e,A,r)),i.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:Xie(l)})}}var h=r.getComputedStyle(n);if(i.length>0&&(a||h.display!=="none"))return i}function Xie(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function Jie(t,e,r){for(var n=0,a=[t,e,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function vA(t,e,r,n,a){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(s[l]=o[l])}return s}function UM(t,e){var r=new Am(t),n=r.getDocumentOptions(),a=r.getGlobalOptions();Jie(a,n,e);var s=vA({},a,n,e),i;typeof window<"u"&&(i=window);var o=Zie(a,n,e),l=eoe(a,n,e),A=toe(r,s),d=noe(r,s,i);return{id:e.tableId,content:d,hooks:l,styles:o,settings:A}}function Zie(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(l){if(l==="columnStyles"){var A=t[l],d=e[l],h=r[l];n.columnStyles=vA({},A,d,h)}else{var m=[t,e,r],g=m.map(function(b){return b[l]||{}});n[l]=vA({},g[0],g[1],g[2])}},s=0,i=Object.keys(n);s<i.length;s++){var o=i[s];a(o)}return n}function eoe(t,e,r){for(var n=[t,e,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,i=n;s<i.length;s++){var o=i[s];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}function toe(t,e){var r,n,a,s,i,o,l,A,d,h,m,g,b=Tw(e.margin,40/t.scaleFactor()),w=(r=roe(t,e.startY))!==null&&r!==void 0?r:b.top,_;e.showFoot===!0?_="everyPage":e.showFoot===!1?_="never":_=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var N;e.showHead===!0?N="everyPage":e.showHead===!1?N="never":N=(a=e.showHead)!==null&&a!==void 0?a:"everyPage";var k=(s=e.useCss)!==null&&s!==void 0?s:!1,I=e.theme||(k?"plain":"striped"),P=!!e.horizontalPageBreak,M=(i=e.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:k,theme:I,startY:w,margin:b,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(A=e.rowPageBreak)!==null&&A!==void 0?A:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:N,showFoot:_,tableLineWidth:(h=e.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(m=e.tableLineColor)!==null&&m!==void 0?m:200,horizontalPageBreak:P,horizontalPageBreakRepeat:M,horizontalPageBreakBehaviour:(g=e.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function roe(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),a=t.pageNumber(),s=!1;if(r&&r.startPageNumber){var i=r.startPageNumber+r.pageNumber-1;s=i===a}return typeof e=="number"?e:(e==null||e===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function noe(t,e,r){var n=e.head||[],a=e.body||[],s=e.foot||[];if(e.html){var i=e.includeHiddenHtml;if(r){var o=LM(t,e.html,r,i,e.useCss)||{};n=o.head||n,a=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=e.columns||aoe(n,a,s);return{columns:l,head:n,body:a,foot:s}}function aoe(t,e,r){var n=t[0]||e[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var i=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var l=0;l<i;l++){var A=void 0;Array.isArray(n)?A=a.length:A=s+(l>0?"_".concat(l):"");var d={dataKey:A};a.push(d)}}),a}var Y_=function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t}(),soe=function(t){NM(e,t);function e(r,n,a,s,i,o){var l=t.call(this,r,n,o)||this;return l.cell=a,l.row=s,l.column=i,l.section=s.section,l}return e}(Y_),ioe=function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,a,s,i){for(var o=0,l=r;o<l.length;o++){var A=l[o],d=new soe(e,this,n,a,s,i),h=A(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],h)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new Y_(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new Y_(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t}(),MM=function(){function t(e,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof kM&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(a,s){var i=n.cells[s.index];if(!i)return 0;var o=r.getLineHeight(i.styles.fontSize),l=i.padding("vertical"),A=l+o;return A>a?A:a},0)},t}(),PM=function(){function t(e,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(a=e.content)!==null&&a!==void 0?a:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var i=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/e*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=Tw(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t}(),ooe=function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,a=e.allRows();n<a.length;n++){var s=a[n],i=s.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(r=Math.max(r,i.styles.cellWidth))}return r},t}();function loe(t,e){coe(t,e);var r=[],n=0;e.columns.forEach(function(s){var i=s.getMaxCustomCellWidth(e);i?s.width=i:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=e.getWidth(t.pageSize().width)-n;a&&(a=X_(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=X_(r,a,function(s){return s.minWidth})),a=Math.abs(a),!e.settings.horizontalPageBreak&&a>.1/t.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),Aoe(e),doe(e,t),uoe(e)}function coe(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,a=RM(t,e);e.allRows().forEach(function(s){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],A=s.cells[l.index];if(A){var d=e.hooks.didParseCell;e.callCellHooks(t,d,A,s,l,null);var h=A.padding("horizontal");A.contentWidth=ay(A.text,A.styles,t)+h;var m=ay(A.text.join(" ").split(/[^\S\u00A0]+/),A.styles,t);if(A.minReadableWidth=m+A.padding("horizontal"),typeof A.styles.cellWidth=="number")A.minWidth=A.styles.cellWidth,A.wrappedWidth=A.styles.cellWidth;else if(A.styles.cellWidth==="wrap"||n===!0)A.contentWidth>a?(A.minWidth=a,A.wrappedWidth=a):(A.minWidth=A.contentWidth,A.wrappedWidth=A.contentWidth);else{var g=10/r;A.minWidth=A.styles.minCellWidth||g,A.wrappedWidth=A.contentWidth,A.minWidth>A.wrappedWidth&&(A.wrappedWidth=A.minWidth)}}}}),e.allRows().forEach(function(s){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],A=s.cells[l.index];if(A&&A.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,A.wrappedWidth),l.minWidth=Math.max(l.minWidth,A.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,A.minReadableWidth);else{var d=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},h=d.cellWidth||d.minCellWidth;h&&typeof h=="number"&&(l.minWidth=h,l.wrappedWidth=h)}A&&(A.colSpan>1&&!l.minWidth&&(l.minWidth=A.minWidth),A.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=A.minWidth))}})}function X_(t,e,r){for(var n=e,a=t.reduce(function(g,b){return g+b.wrappedWidth},0),s=0;s<t.length;s++){var i=t[s],o=i.wrappedWidth/a,l=n*o,A=i.width+l,d=r(i),h=A<d?d:A;e-=h-i.width,i.width=h}if(e=Math.round(e*1e10)/1e10,e){var m=t.filter(function(g){return e<0?g.width>r(g):!0});m.length&&(e=X_(m,e,r))}return e}function uoe(t){for(var e={},r=1,n=t.allRows(),a=0;a<n.length;a++)for(var s=n[a],i=0,o=t.columns;i<o.length;i++){var l=o[i],A=e[l.index];if(r>1)r--,delete s.cells[l.index];else if(A)A.cell.height+=s.height,r=A.cell.colSpan,delete s.cells[l.index],A.left--,A.left<=1&&delete e[l.index];else{var d=s.cells[l.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var h=n.length-a,m=d.rowSpan>h?h:d.rowSpan;e[l.index]={cell:d,left:m,row:s}}}}}function Aoe(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],a=null,s=0,i=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(i-=1,i>1&&t.columns[o+1])s+=l.width,delete n.cells[l.index];else if(a){var A=a;delete n.cells[l.index],a=null,A.width=l.width+s}else{var A=n.cells[l.index];if(!A)continue;if(i=A.colSpan,s=0,A.colSpan>1){a=A,s+=l.width;continue}A.width=l.width+s}}}function doe(t,e){for(var r={count:0,height:0},n=0,a=t.allRows();n<a.length;n++){for(var s=a[n],i=0,o=t.columns;i<o.length;i++){var l=o[i],A=s.cells[l.index];if(A){e.applyStyles(A.styles,!0);var d=A.width-A.padding("horizontal");if(A.styles.overflow==="linebreak")A.text=e.splitTextToSize(A.text,d+1/e.scaleFactor(),{fontSize:A.styles.fontSize});else if(A.styles.overflow==="ellipsize")A.text=mF(A.text,d,A.styles,e,"...");else if(A.styles.overflow==="hidden")A.text=mF(A.text,d,A.styles,e,"");else if(typeof A.styles.overflow=="function"){var h=A.styles.overflow(A.text,d);typeof h=="string"?A.text=[h]:A.text=h}A.contentHeight=A.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var m=A.contentHeight/A.rowSpan;A.rowSpan>1&&r.count*r.height<m*A.rowSpan?r={height:m,count:A.rowSpan}:r&&r.count>0&&r.height>m&&(m=r.height),m>s.height&&(s.height=m)}}r.count--}}function mF(t,e,r,n,a){return t.map(function(s){return foe(s,e,r,n,a)})}function foe(t,e,r,n,a){var s=1e4*n.scaleFactor();if(e=Math.ceil(e*s)/s,e>=ay(t,r,n))return t;for(;e<ay(t+a,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+a}function jM(t,e){var r=new Am(t),n=hoe(e,r.scaleFactor()),a=new ioe(e,n);return loe(r,a),r.applyStyles(r.userStyles),a}function hoe(t,e){var r=t.content,n=poe(r.columns);if(r.head.length===0){var a=pF(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=pF(n,"foot");a&&r.foot.push(a)}var s=t.settings.theme,i=t.styles;return{columns:n,head:KC("head",r.head,n,i,s,e),body:KC("body",r.body,n,i,s,e),foot:KC("foot",r.foot,n,i,s,e)}}function KC(t,e,r,n,a,s){var i={},o=e.map(function(l,A){for(var d=0,h={},m=0,g=0,b=0,w=r;b<w.length;b++){var _=w[b];if(i[_.index]==null||i[_.index].left===0)if(g===0){var N=void 0;Array.isArray(l)?N=l[_.index-m-d]:N=l[_.dataKey];var k={};typeof N=="object"&&!Array.isArray(N)&&(k=(N==null?void 0:N.styles)||{});var I=goe(t,_,A,a,n,s,k),P=new PM(N,I,t);h[_.dataKey]=P,h[_.index]=P,g=P.colSpan-1,i[_.index]={left:P.rowSpan-1,times:g}}else g--,m++;else i[_.index].left--,g=i[_.index].times,d++}return new MM(l,A,t,h)});return o}function pF(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var a=moe(e,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function moe(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function poe(t){return t.map(function(e,r){var n,a;return typeof e=="object"?a=(n=e.dataKey)!==null&&n!==void 0?n:r:a=r,new ooe(a,e,r)})}function goe(t,e,r,n,a,s,i){var o=qie(n),l;t==="head"?l=a.headStyles:t==="body"?l=a.bodyStyles:t==="foot"&&(l=a.footStyles);var A=vA({},o.table,o[t],a.styles,l),d=a.columnStyles[e.dataKey]||a.columnStyles[e.index]||{},h=t==="body"?d:{},m=t==="body"&&r%2===0?vA({},o.alternateRow,a.alternateRowStyles):{},g=Gie(s),b=vA({},g,A,m,h);return vA(b,i)}function xoe(t,e,r){var n;r===void 0&&(r={});var a=RM(t,e),s=new Map,i=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(m){var g=e.columns.find(function(b){return b.dataKey===m||b.index===m});g&&!s.has(g.index)&&(s.set(g.index,!0),i.push(g.index),o.push(e.columns[g.index]),a-=g.wrappedWidth)});for(var A=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<e.columns.length;){if(s.has(d)){d++;continue}var h=e.columns[d].wrappedWidth;if(A||a>=h)A=!1,i.push(d),o.push(e.columns[d]),a-=h;else break;d++}return{colIndexes:i,columns:o,lastIndex:d-1}}function voe(t,e){for(var r=[],n=0;n<e.columns.length;n++){var a=xoe(t,e,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function OM(t,e){var r=e.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},i=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=n+a.bottom+i;if(r.pageBreak==="avoid"){var l=e.body,A=l.reduce(function(m,g){return m+g.height},0);o+=A}var d=new Am(t);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(HM(d),s.y=a.top),e.callWillDrawPageHooks(d,s);var h=vA({},s);e.startPageNumber=d.pageNumber(),r.horizontalPageBreak?yoe(d,e,h,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(m){return FA(d,e,m,s,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(m,g){var b=g===e.body.length-1;sy(d,e,m,b,h,s,e.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(m){return FA(d,e,m,s,e.columns)})),IM(d,e,h,s),e.callEndPageHooks(d,s),e.finalY=s.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function yoe(t,e,r,n){var a=voe(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(A,d){t.applyStyles(t.userStyles),d>0?Dg(t,e,r,n,A.columns,!0):gF(t,e,n,A.columns),woe(t,e,r,n,A.columns),WC(t,e,n,A.columns)});else for(var i=-1,o=a[0],l=function(){var A=i;if(o){t.applyStyles(t.userStyles);var d=o.columns;i>=0?Dg(t,e,r,n,d,!0):gF(t,e,n,d),A=xF(t,e,i+1,n,d),WC(t,e,n,d)}var h=A-i;a.slice(1).forEach(function(m){t.applyStyles(t.userStyles),Dg(t,e,r,n,m.columns,!0),xF(t,e,i+1,n,m.columns,h),WC(t,e,n,m.columns)}),i=A};i<e.body.length-1;)l()}function gF(t,e,r,n){var a=e.settings;t.applyStyles(t.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&e.head.forEach(function(s){return FA(t,e,s,r,n)})}function woe(t,e,r,n,a){t.applyStyles(t.userStyles),e.body.forEach(function(s,i){var o=i===e.body.length-1;sy(t,e,s,o,r,n,a)})}function xF(t,e,r,n,a,s){t.applyStyles(t.userStyles),s=s??e.body.length;var i=Math.min(r+s,e.body.length),o=-1;return e.body.slice(r,i).forEach(function(l,A){var d=r+A===e.body.length-1,h=QM(t,e,d,n);l.canEntireRowFit(h,a)&&(FA(t,e,l,n,a),o=r+A)}),o}function WC(t,e,r,n){var a=e.settings;t.applyStyles(t.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&e.foot.forEach(function(s){return FA(t,e,s,r,n)})}function boe(t,e,r){var n=r.getLineHeight(t.styles.fontSize),a=t.padding("vertical"),s=Math.floor((e-a)/n);return Math.max(0,s)}function Coe(t,e,r,n){var a={};t.spansMultiplePages=!0,t.height=0;for(var s=0,i=0,o=r.columns;i<o.length;i++){var l=o[i],A=t.cells[l.index];if(A){Array.isArray(A.text)||(A.text=[A.text]);var d=new PM(A.raw,A.styles,A.section);d=vA(d,A),d.text=[];var h=boe(A,e,n);A.text.length>h&&(d.text=A.text.splice(h,A.text.length));var m=n.scaleFactor(),g=n.getLineHeightFactor();A.contentHeight=A.getContentHeight(m,g),A.contentHeight>=e&&(A.contentHeight=e,d.styles.minCellHeight-=e),A.contentHeight>t.height&&(t.height=A.contentHeight),d.contentHeight=d.getContentHeight(m,g),d.contentHeight>s&&(s=d.contentHeight),a[l.index]=d}}var b=new MM(t.raw,-1,t.section,a,!0);b.height=s;for(var w=0,_=r.columns;w<_.length;w++){var l=_[w],d=b.cells[l.index];d&&(d.height=b.height);var A=t.cells[l.index];A&&(A.height=t.height)}return b}function Eoe(t,e,r,n){var a=t.pageSize().height,s=n.settings.margin,i=s.top+s.bottom,o=a-i;e.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=e.getMinimumRowHeight(n.columns,t),A=l<r;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!A)return!1;var d=e.hasRowSpan(n.columns),h=e.getMaxCellHeight(n.columns)>o;return h?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function sy(t,e,r,n,a,s,i){var o=QM(t,e,n,s);if(r.canEntireRowFit(o,i))FA(t,e,r,s,i);else if(Eoe(t,r,o,e)){var l=Coe(r,o,e,t);FA(t,e,r,s,i),Dg(t,e,a,s,i),sy(t,e,l,n,a,s,i)}else Dg(t,e,a,s,i),sy(t,e,r,n,a,s,i)}function FA(t,e,r,n,a){n.x=e.settings.margin.left;for(var s=0,i=a;s<i.length;s++){var o=i[s],l=r.cells[o.index];if(!l){n.x+=o.width;continue}t.applyStyles(l.styles),l.x=n.x,l.y=n.y;var A=e.callCellHooks(t,e.hooks.willDrawCell,l,r,o,n);if(A===!1){n.x+=o.width;continue}_oe(t,l,n);var d=l.getTextPos();BM(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,r,o,n),n.x+=o.width}n.y+=r.height}function _oe(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=FM(n.lineWidth,n.fillColor);a&&t.rect(e.x,r.y,e.width,e.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),Soe(t,e,r,n.lineWidth))}function Soe(t,e,r,n){var a,s,i,o;n.top&&(a=r.x,s=r.y,i=r.x+e.width,o=r.y,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),l(n.top,a,s,i,o)),n.bottom&&(a=r.x,s=r.y+e.height,i=r.x+e.width,o=r.y+e.height,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),l(n.bottom,a,s,i,o)),n.left&&(a=r.x,s=r.y,i=r.x,o=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,a,s,i,o)),n.right&&(a=r.x+e.width,s=r.y,i=r.x+e.width,o=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,a,s,i,o));function l(A,d,h,m,g){t.getDocument().setLineWidth(A),t.getDocument().line(d,h,m,g,"S")}}function QM(t,e,r,n){var a=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-a}function Dg(t,e,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(o){return FA(t,e,o,n,a)}),e.callEndPageHooks(t,n);var i=e.settings.margin;IM(t,e,r,n),HM(t),e.pageNumber++,n.x=i.left,n.y=i.top,r.y=i.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return FA(t,e,o,n,a)}),t.applyStyles(t.userStyles))}function HM(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function Toe(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],a=UM(this,n),s=jM(this,a);return OM(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,a){BM(e,r,n,a,this)},t.API.autoTableSetDefaults=function(e){return Am.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){Am.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new Am(this),s=LM(a,e,window,r,!1),i=s.head,o=s.body,l=((n=i[0])===null||n===void 0?void 0:n.map(function(A){return A.content}))||[];return{columns:l,rows:o,data:o}}}var $C;function tl(t,e){var r=UM(t,e),n=jM(t,r);OM(t,n)}try{if(typeof window<"u"&&window){var vF=window,yF=vF.jsPDF||(($C=vF.jspdf)===null||$C===void 0?void 0:$C.jsPDF);yF&&Toe(yF)}}catch(t){console.error("Could not apply autoTable plugin",t)}const i4="evaluaciones_pruebas",o4="evaluaciones_rubricas_estaticas",l4="evaluaciones_rubricas_interactivas",Boe="usuarios",Bw=t=>{var r,n;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion}},Noe=t=>{const e=an(Ar(dr,i4),ya("fechaCreacion","desc"));return na(e,n=>{t(n.docs.map(a=>Bw(a)))},n=>{console.error("Error al suscribirse a las pruebas:",n),t([])})},koe=async t=>{try{const{id:e,...r}=t,n=hn(dr,i4,e);await OA(n,{...r,fechaCreacion:Wr.fromDate(new Date(r.fechaCreacion))})}catch(e){throw console.error("Error al guardar la prueba:",e),new Error("No se pudo guardar la prueba.")}},Ioe=async t=>{try{await Bo(hn(dr,i4,t))}catch(e){throw console.error("Error al eliminar la prueba:",e),new Error("No se pudo eliminar la prueba.")}},Foe=t=>{const e=an(Ar(dr,o4),ya("fechaCreacion","desc"));return na(e,n=>{t(n.docs.map(a=>Bw(a)))},n=>{console.error("Error al suscribirse a las rúbricas estáticas:",n),t([])})},Roe=async t=>{try{const{id:e,...r}=t,n=hn(dr,o4,e);await OA(n,{...r,fechaCreacion:Wr.fromDate(new Date(r.fechaCreacion))})}catch(e){throw console.error("Error al guardar la rúbrica estática:",e),new Error("No se pudo guardar la rúbrica.")}},Doe=async t=>{try{await Bo(hn(dr,o4,t))}catch(e){throw console.error("Error al eliminar la rúbrica estática:",e),new Error("No se pudo eliminar la rúbrica.")}},Loe=t=>{const e=an(Ar(dr,l4));return na(e,n=>{t(n.docs.map(a=>Bw(a)))},n=>{console.error("Error al suscribirse a las rúbricas interactivas:",n),t([])})},Uoe=async t=>{try{const{id:e,...r}=t,n=hn(dr,l4,e);await OA(n,r)}catch(e){throw console.error("Error al guardar la rúbrica interactiva:",e),new Error("No se pudo guardar la rúbrica interactiva.")}},Moe=async t=>{try{return(await eo(Ar(dr,l4),t)).id}catch(e){throw console.error("Error al crear la rúbrica interactiva:",e),new Error("No se pudo crear la rúbrica interactiva.")}},Poe=t=>{const e=an(Ar(dr,Boe));return na(e,n=>{t(n.docs.map(a=>Bw(a)))},n=>{console.error("Error al suscribirse a los usuarios:",n),t([])})},joe=["Selección múltiple","Verdadero o Falso","Desarrollo","Términos pareados","Comprensión de lectura"],wF={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},b2=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},Ooe=({open:t})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):c.jsxs(c.Fragment,{children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),Qoe=({item:t,index:e,showAnswers:r})=>{const n=J.useMemo(()=>t.tipo==="Términos pareados"?[...t.pares.map(a=>a.definicion)].sort(()=>Math.random()-.5):[],[t]);return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[e+1,". ",t.pregunta," (",t.puntaje," pts)"]}),t.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:t.habilidadBloom})]}),t.tipo==="Selección múltiple"&&c.jsx("div",{className:"ml-4 mt-2 space-y-2",children:t.opciones.map((a,s)=>{const i=r&&s===t.respuestaCorrecta;return c.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[c.jsx("div",{className:"w-5 h-5 border rounded-full"}),c.jsxs("span",{children:[String.fromCharCode(65+s),") ",a]})]},s)})}),t.tipo==="Desarrollo"&&c.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),t.tipo==="Verdadero o Falso"&&c.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[c.jsx("span",{children:"V ___ F ___"}),r&&c.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",t.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),t.tipo==="Términos pareados"&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),c.jsx("div",{className:"space-y-2",children:t.pares.map((a,s)=>c.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[s+1,". ",a.concepto]},s))})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definición"}),c.jsx("div",{className:"space-y-2",children:n.map((a,s)=>c.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:a},s))})]})]}),r&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[c.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),c.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:t.pares.map((a,s)=>c.jsxs("li",{children:[c.jsx("strong",{children:a.concepto})," → ",a.definicion]},s))})]})]}),t.tipo==="Comprensión de lectura"&&c.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[c.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:t.texto}),t.preguntas.map((a,s)=>{if(a.tipo==="Selección múltiple"){const i=a;return c.jsxs("div",{className:"pt-2",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),c.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,l)=>{const A=r&&l===i.respuestaCorrecta;return c.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${A?"bg-green-100 dark:bg-green-900/50":""}`,children:[c.jsx("div",{className:"w-5 h-5 border rounded-full"}),c.jsxs("span",{children:[String.fromCharCode(65+l),") ",o]})]},l)})})]},a.id)}if(a.tipo==="Desarrollo"){const i=a;return c.jsxs("div",{className:"pt-2",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),c.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},a.id)}return null})]})]},t.id)},Hoe=()=>{const[t,e]=J.useState([]),[r,n]=J.useState(null),[a,s]=J.useState(!1),[i,o]=J.useState(!1),[l,A]=J.useState(null),[d,h]=J.useState(!1),m={nombre:"",asignatura:rl[0],nivel:X2[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[g,b]=J.useState(m);J.useEffect(()=>{const C=Noe(e);return()=>C()},[]);const w=C=>{const{name:B,value:T}=C.target;b(O=>({...O,[B]:T}))},_=C=>{b(B=>{const T={...B.tiposActividad};return T[C]?delete T[C]:T[C]=wF[C][0],{...B,tiposActividad:T}})},N=(C,B)=>{b(T=>({...T,tiposActividad:{...T.tiposActividad,[C]:B}}))},k=C=>{b(B=>{const T=B.selectedNee.includes(C)?B.selectedNee.filter(O=>O!==C):[...B.selectedNee,C];return{...B,selectedNee:T}})},I=async C=>{if(C.preventDefault(),!g.nombre.trim()||!g.contenido.trim()||Object.keys(g.tiposActividad).length===0){A("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}s(!0),A(null);const B=Object.entries(g.tiposActividad).map(([F,L])=>`- ${L} ítem(s) de tipo '${F}'`).join(`
`),T=g.isNee&&g.selectedNee.length>0?`
            **Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes características: ${g.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negación o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes más pequeñas si es posible.
            - Para 'Comprensión de Lectura', usa textos más cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Selección Múltiple', asegúrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",O=`
            Eres un experto en evaluación educativa para la educación media en Chile.
            Genera una prueba o guía de trabajo completa en formato JSON estructurado.
            
            Información base:
            - Nombre de la prueba: ${g.nombre}
            - Asignatura: ${g.asignatura}
            - Nivel: ${g.nivel}
            - Contenido a evaluar: "${g.contenido}"
            - Tipos y cantidad de ítems solicitados:
              ${B}
            - Nivel de Dificultad General: ${g.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
            
            ${T}

            Tu respuesta DEBE ser un único objeto JSON que contenga:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluación.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de ítem solicitado. Cada actividad debe tener:
               - 'id': Un UUID.
               - 'titulo': Un título descriptivo (ej: "Actividad 1: Selección Múltiple").
               - 'instrucciones': Instrucciones para esa actividad específica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID.
                   - 'tipo': El tipo de ítem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numérico.
                   - 'habilidadBloom': La habilidad principal de la Taxonomía de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales según el tipo:
                       - Para 'Selección múltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (índice numérico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Términos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensión de lectura': 'texto' (string con el texto) y 'preguntas' (un array de sub-preguntas que pueden ser 'Selección múltiple' o 'Desarrollo', y cada una debe tener también 'habilidadBloom').
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{Gl("Evaluación - Pruebas");const F="",ee=(await(await new globalThis.GoogleGenerativeAI(F).getGenerativeModel({model:"gemini-pro"}).generateContent(O)).response).text().replace(/^```json\s*|```\s*$/g,""),ne=JSON.parse(ee);let z=0;ne.actividades.forEach(ce=>{ce.items.forEach(j=>{z+=j.puntaje||0,j.tipo==="Comprensión de lectura"&&j.preguntas.forEach(K=>{z+=K.puntaje||0})})});const W={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:g.nombre,asignatura:g.asignatura,nivel:g.nivel,contenidoOriginal:g.contenido,tiposActividadOriginal:g.tiposActividad,objetivo:ne.objetivo,instruccionesGenerales:ne.instruccionesGenerales,puntajeIdeal:z,actividades:ne.actividades,dificultad:g.dificultad,adaptacionNEE:g.isNee?g.selectedNee:void 0};n(W),h(!1)}catch(F){console.error(F),A("Error al generar la prueba con IA. Inténtelo de nuevo.")}finally{s(!1)}},P=async()=>{if(r)try{await koe(r),alert("Prueba guardada con éxito.")}catch(C){console.error(C),alert("No se pudo guardar la prueba.")}},M=async C=>{if(window.confirm("¿Eliminar esta prueba?"))try{await Ioe(C),(r==null?void 0:r.id)===C&&n(null)}catch(B){console.error(B),alert("No se pudo eliminar la prueba.")}},D=async C=>{o(!0);const B=new sr("p","mm","a4"),T=20,O=B.internal.pageSize.getHeight(),F=B.internal.pageSize.getWidth(),L=F-T*2;let Q=T;const q=ee=>{ee.setFillColor(230,230,230),ee.rect(0,0,F,25,"F"),ee.setFontSize(9),ee.setTextColor(0,0,0),ee.text("LICEO INDUSTRIAL DE RECOLETA",T,15,{align:"left"}),ee.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",F-T,15,{align:"right"})};q(B),Q=30,B.setTextColor(0,0,0),B.setFont("helvetica","bold"),B.setFontSize(16),B.text(C.nombre,F/2,Q,{align:"center"}),Q+=10,tl(B,{startY:Q,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},C.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},C.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},C.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:C.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:C.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:ee=>{q(B)}}),Q=B.lastAutoTable.finalY+10;const ie=ee=>{Q+ee>O-T&&(B.addPage(),q(B),Q=T+15,B.setTextColor(0,0,0))},Z=(ee,ne)=>{B.setFont("helvetica",ne.isBold?"bold":"normal"),B.setFontSize(ne.fontSize);const z=Array.isArray(ee)?ee.join(`
`):ee;return B.getTextDimensions(z,{maxWidth:ne.width}).h};for(const ee of C.actividades){let ne=Z(ee.titulo,{fontSize:12,width:L,isBold:!0})+Z(ee.instrucciones,{fontSize:10,width:L})+12;ie(ne),B.setFont("helvetica","bold"),B.setFontSize(12),B.setTextColor(0,0,0),B.text(ee.titulo,T,Q),Q+=8,B.setFont("helvetica","normal"),B.setFontSize(10);const z=B.splitTextToSize(ee.instrucciones,L);B.text(z,T,Q),Q+=z.length*(10*.35*1.15)+4;for(const[W,ce]of ee.items.entries()){let j=0;const K=`${W+1}. ${ce.pregunta} (${ce.puntaje} pts)`;switch(j+=Z(K,{fontSize:10,width:L,isBold:!0}),ce.tipo){case"Selección múltiple":ce.opciones.forEach(le=>{j+=Z(le,{fontSize:10,width:L-5})+3}),j+=7;break;case"Verdadero o Falso":j+=10;break;case"Desarrollo":j+=30;break;case"Términos pareados":j+=ce.pares.length*12+20;break;case"Comprensión de lectura":const te=ce;j+=Z(te.texto,{fontSize:10,width:L-10})+10,te.preguntas.forEach(le=>{const de=`${le.pregunta} (${le.puntaje} pts)`;j+=Z(de,{fontSize:10,width:L-5,isBold:!0}),le.tipo==="Selección múltiple"?(le.opciones.forEach(me=>{j+=Z(me,{fontSize:10,width:L-10})+3}),j+=7):le.tipo==="Desarrollo"&&(j+=30),j+=5}),j+=15;break}ie(j),B.setFont("helvetica","bold"),B.setFontSize(10),B.setTextColor(0,0,0);const X=B.splitTextToSize(K,L);if(B.text(X,T,Q),Q+=X.length*5+4,B.setFont("helvetica","normal"),ce.tipo==="Selección múltiple")ce.opciones.forEach((te,le)=>{B.text(`${String.fromCharCode(65+le)}) ${te}`,T+5,Q),Q+=7});else if(ce.tipo==="Verdadero o Falso")B.text("V ______    F ______",T+5,Q),Q+=10;else if(ce.tipo==="Desarrollo")B.setDrawColor(200,200,200),B.setFillColor(245,245,245),B.rect(T,Q,L,25,"FD"),Q+=30;else if(ce.tipo==="Términos pareados"){const te=[...ce.pares.map(de=>de.definicion)].sort(()=>Math.random()-.5),le=ce.pares.map((de,me)=>[`${me+1}. ${de.concepto}`,`(   ) ${te[me]}`]);tl(B,{startY:Q,head:[["Columna A: Concepto","Columna B: Definición"]],body:le,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:de=>q(B)}),Q=B.lastAutoTable.finalY+10}else if(ce.tipo==="Comprensión de lectura"){const te=ce;B.setFillColor(240,240,240),B.setDrawColor(200,200,200);const le=B.splitTextToSize(te.texto,L-10),de=le.length*(10*.35*1.15)+8;B.rect(T,Q,L,de,"FD"),Q+=4,B.setFont("helvetica","normal"),B.setFontSize(10),B.setTextColor(0,0,0),B.text(le,T+5,Q),Q+=de;for(const[me,ge]of te.preguntas.entries()){const Se=`${me+1}. ${ge.pregunta} (${ge.puntaje} pts)`;B.setFont("helvetica","bold");const xe=B.splitTextToSize(Se,L-5);B.text(xe,T+5,Q),Q+=xe.length*5+4,B.setFont("helvetica","normal"),ge.tipo==="Selección múltiple"?ge.opciones.forEach((ae,Fe)=>{B.text(`${String.fromCharCode(65+Fe)}) ${ae}`,T+10,Q),Q+=7}):ge.tipo==="Desarrollo"&&(B.setDrawColor(200,200,200),B.setFillColor(245,245,245),B.rect(T+5,Q,L-5,25,"FD"),Q+=30)}}Q+=5}}B.save(`${C.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return r?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("button",{onClick:()=>n(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>h(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[c.jsx(Ooe,{open:!d})," ",c.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),c.jsx("button",{onClick:P,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),c.jsxs("button",{onClick:()=>D(r),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":c.jsx(b8,{})," PDF"]})]})]}),c.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[c.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[c.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),c.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),c.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:r.nombre}),c.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Asignatura:"})," ",r.asignatura]}),c.jsxs("p",{className:"text-right",children:[c.jsx("strong",{children:"Puntaje Ideal:"})," ",r.puntajeIdeal]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Nivel:"})," ",r.nivel]})]}),c.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[c.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",r.dificultad||"Intermedio"]}),r.adaptacionNEE&&r.adaptacionNEE.length>0&&c.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",r.adaptacionNEE.join(", ")]})]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",r.objetivo]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Instrucciones Generales:"})," ",r.instruccionesGenerales]})]}),r.actividades.map(C=>c.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:C.titulo}),c.jsx("p",{className:"italic text-sm mb-4",children:C.instrucciones}),c.jsx("div",{className:"space-y-6",children:C.items.map((B,T)=>c.jsx(Qoe,{item:B,index:T,showAnswers:d},B.id))})]},C.id))]})]}):c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),c.jsxs("form",{onSubmit:I,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"nombre",value:g.nombre,onChange:w,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),c.jsx("div",{}),c.jsx("select",{name:"asignatura",value:g.asignatura,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:rl.map(C=>c.jsx("option",{children:C},C))}),c.jsx("select",{name:"nivel",value:g.nivel,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:X2.map(C=>c.jsx("option",{children:C},C))})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),c.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((C,B)=>c.jsx("button",{type:"button",onClick:()=>b(T=>({...T,dificultad:C})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${B===0?"rounded-l-lg":""} ${B===2?"rounded-r-lg":""}
                                            ${g.dificultad===C?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:C},C))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:g.isNee,onChange:C=>b(B=>({...B,isNee:C.target.checked,selectedNee:C.target.checked?B.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),g.isNee&&c.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:J2.map(C=>c.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:g.selectedNee.includes(C),onChange:()=>k(C),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:C})]},C))})]})]})]}),c.jsx("textarea",{name:"contenido",value:g.contenido,onChange:w,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("div",{className:"space-y-3",children:joe.map(C=>c.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:!!g.tiposActividad[C],onChange:()=>_(C),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:C})]}),g.tiposActividad[C]&&c.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),wF[C].map(B=>c.jsx("button",{type:"button",onClick:()=>N(C,B),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${g.tiposActividad[C]===B?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:B},B))]})]},C))}),l&&c.jsx("p",{className:"text-red-500 text-sm",children:l}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:a,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:a?"Generando...":"Generar Prueba"})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),c.jsx("div",{className:"space-y-2",children:t.length>0?t.map(C=>c.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:C.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[C.asignatura," - ",C.nivel," (",new Date(C.fechaCreacion).toLocaleDateString(),")"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>n(C),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),c.jsx("button",{onClick:()=>M(C.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},C.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},Voe=({rubricas:t,onSave:e,onDelete:r,onCreate:n})=>{const[a,s]=J.useState(null),[i,o]=J.useState("list"),[l,A]=J.useState(!1),[d,h]=J.useState(""),m=async(M,D)=>{if(!M.trim()||!D.trim()){alert("El título y la descripción son obligatorios.");return}A(!0);const C=`Crea una rúbrica de evaluación detallada sobre "${M}" con el propósito de "${D}". Genera entre 3 y 5 dimensiones de evaluación. Para cada dimensión, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado.`,B={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{Gl("Evaluación - Rúbricas");const T="",ie=(await(await new globalThis.GoogleGenerativeAI(T).getGenerativeModel({model:"gemini-pro"}).generateContent({contents:[{parts:[{text:C}]}],generationConfig:{responseMimeType:"application/json",responseSchema:B}})).response).text().replace(/^```json\s*|```\s*$/g,""),Z=JSON.parse(ie),ee={id:crypto.randomUUID(),titulo:M,descripcion:D,fechaCreacion:new Date().toISOString(),dimensiones:Z.map(ne=>({id:crypto.randomUUID(),nombre:ne.dimension,niveles:{insuficiente:ne.insuficiente,suficiente:ne.suficiente,competente:ne.competente,avanzado:ne.avanzado}}))};s(ee)}catch(T){console.error(T),alert("Error al generar la rúbrica con IA.")}finally{A(!1)}},g=async()=>{if(!d.trim()||!a)return;const M=crypto.randomUUID(),D={id:M,nombre:d,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};s(T=>T?{...T,dimensiones:[...T.dimensiones,D]}:null),h("");const C=`Para una rúbrica sobre "${a.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensión: "${d}". Considera las dimensiones existentes como contexto: ${a.dimensiones.map(T=>T.nombre).join(", ")}.`,B={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{Gl("Evaluación - Rúbricas (Añadir Dimensión)");const T="",ie=(await(await new globalThis.GoogleGenerativeAI(T).getGenerativeModel({model:"gemini-pro"}).generateContent({contents:[{parts:[{text:C}]}],generationConfig:{responseMimeType:"application/json",responseSchema:B}})).response).text().replace(/^```json\s*|```\s*$/g,""),Z=JSON.parse(ie);s(ee=>ee?{...ee,dimensiones:ee.dimensiones.map(ne=>ne.id===M?{...ne,niveles:Z,isLoading:!1}:ne)}:null)}catch(T){console.error("Error generating dimension descriptors:",T),alert("No se pudieron generar los descriptores."),s(O=>O?{...O,dimensiones:O.dimensiones.filter(F=>F.id!==M)}:null)}},b=()=>{if(!a)return;t.some(D=>D.id===a.id)?e(a):n(a),o("list"),s(null)},w=M=>{s(M),o("form")},_=()=>{s({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),o("form")},N=(M,D,C)=>{a&&s(B=>B?{...B,dimensiones:B.dimensiones.map(T=>T.id!==M?T:D==="nombre"?{...T,nombre:C}:{...T,niveles:{...T.niveles,[D]:C}})}:null)},k=(M,D)=>{s(C=>C?{...C,[M]:D}:null)},I=M=>{a&&s(D=>D?{...D,dimensiones:D.dimensiones.filter(C=>C.id!==M)}:null)},P=()=>{if(!a)return null;const M="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",D=`${M} resize-none text-sm`;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),c.jsx("button",{onClick:()=>o("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),c.jsx("input",{value:a.titulo,onChange:C=>k("titulo",C.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${M} mt-1`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),c.jsx("textarea",{value:a.descripcion,onChange:C=>k("descripcion",C.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${M} mt-1`})]})]}),a.dimensiones.length===0&&c.jsx("div",{className:"text-center py-4",children:c.jsx("button",{onClick:()=>m(a.titulo,a.descripcion),disabled:l||!a.titulo||!a.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:l?"Generando...":"✨ Generar Rúbrica con IA"})}),a.dimensiones.length>0&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:c.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(C=>c.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:C},C))})}),c.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.dimensiones.map(C=>c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 w-1/5",children:c.jsx("textarea",{value:C.nombre,onChange:B=>N(C.id,"nombre",B.target.value),rows:4,className:D})}),Object.keys(C.niveles).map(B=>c.jsx("td",{className:"p-2 w-1/5",children:C.isLoading?c.jsx("div",{className:"flex justify-center items-center h-full",children:c.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):c.jsx("textarea",{value:C.niveles[B],onChange:T=>N(C.id,B,T.target.value),rows:4,className:D})},B)),c.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:c.jsx("button",{onClick:()=>I(C.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},C.id))})]})}),c.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),c.jsx("input",{value:d,onChange:C=>h(C.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${M} mt-1`})]}),c.jsx("button",{onClick:g,disabled:!d.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),c.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:c.jsx("button",{onClick:b,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rúbrica"})})]})};return i==="list"?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),c.jsx("button",{onClick:_,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),t.length>0?t.map(M=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:M.titulo}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:M.descripcion})]}),c.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[c.jsx("button",{onClick:()=>w(M),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),c.jsx("button",{onClick:()=>r(M.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},M.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):P()},zoe=({allUsers:t,rubricasEstaticas:e})=>{const[r,n]=J.useState([]),[a,s]=J.useState(null),[i,o]=J.useState(null),[l,A]=J.useState({rubricaEstaticaId:"",curso:""}),[d,h]=J.useState(null);J.useEffect(()=>{const k=Loe(n);return()=>k()},[]);const m=async k=>{k.preventDefault();const I=e.find(M=>M.id===l.rubricaEstaticaId);if(!I||!l.curso){alert("Debe seleccionar una rúbrica y un curso.");return}const P={nombre:I.titulo,curso:l.curso,asignatura:"N/A",rubricaEstaticaId:I.id,resultados:{}};try{await Moe(P),A({rubricaEstaticaId:"",curso:""})}catch(M){console.error(M),alert("No se pudo crear la evaluación con rúbrica.")}},g=k=>{s(k),o(JSON.parse(JSON.stringify(k)))},b=(k,I,P)=>{i&&o(M=>{if(!M)return null;const D=JSON.parse(JSON.stringify(M));return D.resultados[k]||(D.resultados[k]={puntajes:{},feedback:""}),D.resultados[k].puntajes[I]=P,D})},w=async()=>{if(i)try{await Uoe(i),s(i),alert("Cambios guardados.")}catch(k){console.error(k),alert("No se pudieron guardar los cambios.")}},_=J.useCallback(k=>{const I=i,P=e.find(O=>O.id===(I==null?void 0:I.rubricaEstaticaId));if(!I||!P)return{score:0,maxScore:0,grade:"N/A"};const M=P.dimensiones.length*4,D=I.resultados[k];if(!D)return{score:0,maxScore:M,grade:"1.0"};const C=Object.values(D.puntajes).reduce((O,F)=>O+F,0),B=1+6*(C/M),T=M>0?B.toFixed(1):"1.0";return{score:C,maxScore:M,grade:T}},[i,e]),N=async k=>{if(!i)return;const I=e.find(C=>C.id===i.rubricaEstaticaId),P=i.resultados[k];if(!I||!P||Object.keys(P.puntajes).length===0)return;h(k);const D=`Genera una retroalimentación constructiva para un estudiante basada en estos puntajes de rúbrica (de 1 a 4): ${I.dimensiones.map(C=>`${C.nombre}: ${P.puntajes[C.nombre]||"N/A"}/4`).join("; ")}. Destaca fortalezas y sugiere 1-2 áreas de mejora concretas. Sé breve y motivador.`;try{Gl("Evaluación - Rúbricas Interactivas (Feedback)");const C="",L=(await(await new globalThis.GoogleGenerativeAI(C).getGenerativeModel({model:"gemini-pro"}).generateContent(D)).response).text();o(Q=>{if(!Q)return null;const q=JSON.parse(JSON.stringify(Q));return q.resultados[k].feedback=L.replace(/(\*\*|\*)/g,""),q})}catch(C){console.error(C),alert("Error al generar feedback.")}finally{h(null)}};if(a&&i){const k=e.find(P=>P.id===a.rubricaEstaticaId),I=t.filter(P=>P.profile===er.ESTUDIANTE&&b2(P.curso||"")===a.curso).map(P=>P.nombreCompleto).sort();return k?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:a.nombre}),c.jsx("p",{className:"text-slate-500",children:a.curso})]}),c.jsx("button",{onClick:()=>s(null),className:"font-semibold text-slate-600",children:"← Volver"})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),k.dimensiones.map(P=>c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:P.nombre},P.id)),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentación"})]})}),c.jsx("tbody",{children:I.map(P=>{var B;const{score:M,maxScore:D,grade:C}=_(P);return c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:P}),k.dimensiones.map(T=>c.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:c.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(O=>{var F;return c.jsx("button",{onClick:()=>b(P,T.nombre,O),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((F=i.resultados[P])==null?void 0:F.puntajes[T.nombre])===O?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:O},O)})})},T.id)),c.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[M,"/",D]}),c.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:C}),c.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:c.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[c.jsx("p",{className:"text-xs w-full",children:((B=i.resultados[P])==null?void 0:B.feedback)||"Sin generar"}),c.jsx("button",{onClick:()=>N(P),disabled:d===P,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===P?"...":"Generar IA"})]})})]},P)})})]})}),c.jsx("div",{className:"mt-6 flex justify-end",children:c.jsx("button",{onClick:w,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):c.jsxs("div",{children:["Error: Rúbrica base no encontrada. ",c.jsx("button",{onClick:()=>s(null),children:"Volver"})]})}return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluación con Rúbrica"}),c.jsxs("form",{onSubmit:m,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[c.jsxs("select",{value:l.rubricaEstaticaId,onChange:k=>A({...l,rubricaEstaticaId:k.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una Rúbrica Guardada"}),e.map(k=>c.jsx("option",{value:k.id,children:k.titulo},k.id))]}),c.jsxs("select",{value:l.curso,onChange:k=>A({...l,curso:k.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un Curso"}),ss.map(k=>c.jsx("option",{value:k,children:k},k))]}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluación"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),c.jsx("div",{className:"space-y-2",children:r.map(k=>c.jsxs("button",{onClick:()=>g(k),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[c.jsx("p",{className:"font-semibold",children:k.nombre}),c.jsx("p",{className:"text-sm text-slate-500",children:k.curso})]},k.id))})]})]})},Goe=({allUsers:t})=>{const[e,r]=J.useState(""),n=J.useMemo(()=>Array.from(new Set(t.filter(s=>s.profile===er.ESTUDIANTE&&s.curso).map(s=>b2(s.curso)))).sort(),[t]),a=J.useMemo(()=>{const s=t.filter(i=>i.profile===er.ESTUDIANTE);return e?s.filter(i=>b2(i.curso||"")===e).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):s.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[t,e]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nóminas de Cursos"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nóminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el módulo de ",c.jsx("strong",{className:"font-semibold",children:"Administración"}),"."]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),c.jsxs("select",{id:"curso-filter",value:e,onChange:s=>r(s.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),n.map(s=>c.jsx("option",{value:s,children:s},s))]})]}),c.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:a.length>0?a.map(s=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:s.nombreCompleto}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:b2(s.curso||"")}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:s.email})]},s.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},qoe=()=>{const[t,e]=J.useState("pruebas"),[r,n]=J.useState([]),[a,s]=J.useState([]),[i,o]=J.useState(!0);J.useEffect(()=>{o(!0);const h=Poe(n),m=Foe(g=>{s(g),o(!1)});return()=>{h(),m()}},[]);const l=async h=>{try{await Roe(h)}catch(m){console.error(m),alert("No se pudo guardar la rúbrica.")}},A=async h=>{try{await Doe(h)}catch(m){console.error(m),alert("No se pudo eliminar la rúbrica.")}},d=({tabName:h,label:m})=>c.jsx("button",{onClick:()=>e(h),className:`${t===h?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:m});return i?c.jsx("div",{className:"text-center py-10",children:"Cargando módulo de evaluaciones..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación de Aprendizajes"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx(d,{tabName:"pruebas",label:"Pruebas y Guías"}),c.jsx(d,{tabName:"rubricas",label:"Generador de Rúbricas"}),c.jsx(d,{tabName:"rubricasInteractivas",label:"Rúbricas Interactivas"}),c.jsx(d,{tabName:"nominas",label:"Gestión de Nóminas"})]})}),c.jsxs("div",{className:"mt-6",children:[t==="pruebas"&&c.jsx(Hoe,{}),t==="rubricas"&&c.jsx(Voe,{rubricas:a,onSave:l,onDelete:A,onCreate:l}),t==="rubricasInteractivas"&&c.jsx(zoe,{allUsers:r,rubricasEstaticas:a}),t==="nominas"&&c.jsx(Goe,{allUsers:r})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var iy={};iy.version="0.18.5";var VM=1252,Koe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],c4={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},u4=function(t){Koe.indexOf(t)!=-1&&(VM=c4[0]=t)};function Woe(){u4(1252)}var Sc=function(t){u4(t)};function A4(){Sc(1200),Woe()}function bF(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function $oe(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function zM(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var dg=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?$oe(t.slice(2)):e==254&&r==255?zM(t.slice(2)):e==65279?t.slice(1):t},mv=function(e){return String.fromCharCode(e)},CF=function(e){return String.fromCharCode(e)},sx,zd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function ix(t){for(var e="",r=0,n=0,a=0,s=0,i=0,o=0,l=0,A=0;A<t.length;)r=t.charCodeAt(A++),s=r>>2,n=t.charCodeAt(A++),i=(r&3)<<4|n>>4,a=t.charCodeAt(A++),o=(n&15)<<2|a>>6,l=a&63,isNaN(n)?o=l=64:isNaN(a)&&(l=64),e+=zd.charAt(s)+zd.charAt(i)+zd.charAt(o)+zd.charAt(l);return e}function nl(t){var e="",r=0,n=0,a=0,s=0,i=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var A=0;A<t.length;)s=zd.indexOf(t.charAt(A++)),i=zd.indexOf(t.charAt(A++)),r=s<<2|i>>4,e+=String.fromCharCode(r),o=zd.indexOf(t.charAt(A++)),n=(i&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=zd.indexOf(t.charAt(A++)),a=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(a));return e}var Kr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),HA=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function pf(t){return Kr?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function EF(t){return Kr?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Xo=function(e){return Kr?HA(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function Nw(t){if(typeof ArrayBuffer>"u")return Xo(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function Ef(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function Yoe(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function d4(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return d4(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var Ws=Kr?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:HA(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),a=0;for(e=0,r=0;e<t.length;r+=a,++e)if(a=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function Xoe(t){for(var e=[],r=0,n=t.length+250,a=pf(t.length+255),s=0;s<t.length;++s){var i=t.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=t.charCodeAt(++s)&1023;a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|o>>6&15|(i&3)<<4,a[r++]=128|o&63}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|i&63;r>n&&(e.push(a.slice(0,r)),r=0,a=pf(65535),n=65530)}return e.push(a.slice(0,r)),Ws(e)}var Zi=/\u0000/g,fg=/[\u0001-\u0006]/g;function dm(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function Tc(t,e){var r=""+t;return r.length>=e?r:Oa("0",e-r.length)+r}function f4(t,e){var r=""+t;return r.length>=e?r:Oa(" ",e-r.length)+r}function oy(t,e){var r=""+t;return r.length>=e?r:r+Oa(" ",e-r.length)}function Joe(t,e){var r=""+Math.round(t);return r.length>=e?r:Oa("0",e-r.length)+r}function Zoe(t,e){var r=""+t;return r.length>=e?r:Oa("0",e-r.length)+r}var _F=Math.pow(2,32);function C0(t,e){if(t>_F||t<-_F)return Joe(t,e);var r=Math.round(t);return Zoe(r,e)}function ly(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var SF=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],YC=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function ele(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',t}var xr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},TF={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},tle={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function cy(t,e,r){for(var n=t<0?-1:1,a=t*n,s=0,i=1,o=0,l=1,A=0,d=0,h=Math.floor(a);A<e&&(h=Math.floor(a),o=h*i+s,d=h*A+l,!(a-h<5e-8));)a=1/(a-h),s=i,i=o,l=A,A=d;if(d>e&&(A>e?(d=l,o=s):(d=A,o=i)),!r)return[0,n*o,d];var m=Math.floor(n*o/d);return[m,n*o-m*d,d]}function ih(t,e,r){if(t>2958465||t<0)return null;var n=t|0,a=Math.floor(86400*(t-n)),s=0,i=[],o={D:n,T:a,u:86400*(t-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),n<60&&(s=(s+6)%7),r&&(s=ole(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=s,o}var GM=new Date(1899,11,31,0,0,0),rle=GM.getTime(),nle=new Date(1900,2,1,0,0,0);function qM(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=nle&&(r+=1440*60*1e3),(r-(rle+(t.getTimezoneOffset()-GM.getTimezoneOffset())*6e4))/(1440*60*1e3)}function h4(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function ale(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function sle(t){var e=t<0?12:11,r=h4(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function ile(t){var e=h4(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function ox(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=sle(t):e===10?r=t.toFixed(10).substr(0,12):r=ile(t),h4(ale(r.toUpperCase()))}function Sh(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):ox(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return ql(14,qM(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function ole(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function lle(t,e,r,n){var a="",s=0,i=0,o=r.y,l,A=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,A=2;break;default:l=o%1e4,A=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,A=e.length;break;case 3:return YC[r.m-1][1];case 5:return YC[r.m-1][0];default:return YC[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,A=e.length;break;case 3:return SF[r.q][0];default:return SF[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,A=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,A=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,A=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?Tc(r.S,e.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,s=Math.round(i*(r.S+r.u)),s>=60*i&&(s=0),e==="s"?s===0?"0":""+s/i:(a=Tc(s,2+n),e==="ss"?a.substr(0,2):"."+a.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}A=e.length===3?1:2;break;case 101:l=o,A=1;break}var d=A>0?Tc(l,A):"";return d}function Gd(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var KM=/%/g;function cle(t,e,r){var n=e.replace(KM,""),a=e.length-n.length;return CA(t,n,r*Math.pow(10,2*a))+Oa("%",a)}function ule(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return CA(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function WM(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+WM(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var i=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,A,d){return l+A+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var $M=/# (\?+)( ?)\/( ?)(\d+)/;function Ale(t,e,r){var n=parseInt(t[4],10),a=Math.round(e*n),s=Math.floor(a/n),i=a-s*n,o=n;return r+(s===0?"":""+s)+" "+(i===0?Oa(" ",t[1].length+1+t[4].length):f4(i,t[1].length)+t[2]+"/"+t[3]+Tc(o,t[4].length))}function dle(t,e,r){return r+(e===0?"":""+e)+Oa(" ",t[1].length+2+t[4].length)}var YM=/^#*0*\.([0#]+)/,XM=/\).*[0#]/,JM=/\(###\) ###\\?-####/;function Xi(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function BF(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function NF(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function fle(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function hle(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Nl(t,e,r){if(t.charCodeAt(0)===40&&!e.match(XM)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Nl("n",n,r):"("+Nl("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return ule(t,e,r);if(e.indexOf("%")!==-1)return cle(t,e,r);if(e.indexOf("E")!==-1)return WM(e,r);if(e.charCodeAt(0)===36)return"$"+Nl(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,i,o,l=Math.abs(r),A=r<0?"-":"";if(e.match(/^00+$/))return A+C0(l,e.length);if(e.match(/^[#?]+$/))return a=C0(r,0),a==="0"&&(a=""),a.length>e.length?a:Xi(e.substr(0,e.length-a.length))+a;if(s=e.match($M))return Ale(s,l,A);if(e.match(/^#+0+$/))return A+C0(l,e.length-e.indexOf("0"));if(s=e.match(YM))return a=BF(r,s[1].length).replace(/^([^\.]+)$/,"$1."+Xi(s[1])).replace(/\.$/,"."+Xi(s[1])).replace(/\.(\d*)$/,function(b,w){return"."+w+Oa("0",Xi(s[1]).length-w.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return A+BF(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return A+Gd(C0(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Nl(t,e,-r):Gd(""+(Math.floor(r)+fle(r,s[1].length)))+"."+Tc(NF(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Nl(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=dm(Nl(t,e.replace(/[\\-]/g,""),r)),i=0,dm(dm(e.replace(/\\/g,"")).replace(/[0#]/g,function(b){return i<a.length?a.charAt(i++):b==="0"?"0":""}));if(e.match(JM))return a=Nl(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=cy(l,Math.pow(10,i)-1,!1),a=""+A,d=CA("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=oy(o[2],i),d.length<s[4].length&&(d=Xi(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=cy(l,Math.pow(10,i)-1,!0),A+(o[0]||(o[1]?"":"0"))+" "+(o[1]?f4(o[1],i)+s[2]+"/"+s[3]+oy(o[2],i):Oa(" ",2*i+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=C0(r,0),e.length<=a.length?a:Xi(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var h=e.indexOf(".")-i,m=e.length-a.length-h;return Xi(e.substr(0,h)+a+e.substr(e.length-m))}if(s=e.match(/^00,000\.([#0]*0)$/))return i=NF(r,s[1].length),r<0?"-"+Nl(t,e,-r):Gd(hle(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Tc(0,3-b.length):"")+b})+"."+Tc(i,s[1].length);switch(e){case"###,##0.00":return Nl(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=Gd(C0(l,0));return g!=="0"?A+g:"";case"###,###.00":return Nl(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Nl(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function mle(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return CA(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function ple(t,e,r){var n=e.replace(KM,""),a=e.length-n.length;return CA(t,n,r*Math.pow(10,2*a))+Oa("%",a)}function ZM(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+ZM(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var i=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,A,d){return l+A+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function gu(t,e,r){if(t.charCodeAt(0)===40&&!e.match(XM)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?gu("n",n,r):"("+gu("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return mle(t,e,r);if(e.indexOf("%")!==-1)return ple(t,e,r);if(e.indexOf("E")!==-1)return ZM(e,r);if(e.charCodeAt(0)===36)return"$"+gu(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,i,o,l=Math.abs(r),A=r<0?"-":"";if(e.match(/^00+$/))return A+Tc(l,e.length);if(e.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>e.length?a:Xi(e.substr(0,e.length-a.length))+a;if(s=e.match($M))return dle(s,l,A);if(e.match(/^#+0+$/))return A+Tc(l,e.length-e.indexOf("0"));if(s=e.match(YM))return a=(""+r).replace(/^([^\.]+)$/,"$1."+Xi(s[1])).replace(/\.$/,"."+Xi(s[1])),a=a.replace(/\.(\d*)$/,function(b,w){return"."+w+Oa("0",Xi(s[1]).length-w.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return A+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return A+Gd(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+gu(t,e,-r):Gd(""+r)+"."+Oa("0",s[1].length);if(s=e.match(/^#,#*,#0/))return gu(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=dm(gu(t,e.replace(/[\\-]/g,""),r)),i=0,dm(dm(e.replace(/\\/g,"")).replace(/[0#]/g,function(b){return i<a.length?a.charAt(i++):b==="0"?"0":""}));if(e.match(JM))return a=gu(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=cy(l,Math.pow(10,i)-1,!1),a=""+A,d=CA("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=oy(o[2],i),d.length<s[4].length&&(d=Xi(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=cy(l,Math.pow(10,i)-1,!0),A+(o[0]||(o[1]?"":"0"))+" "+(o[1]?f4(o[1],i)+s[2]+"/"+s[3]+oy(o[2],i):Oa(" ",2*i+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=""+r,e.length<=a.length?a:Xi(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var h=e.indexOf(".")-i,m=e.length-a.length-h;return Xi(e.substr(0,h)+a+e.substr(e.length-m))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+gu(t,e,-r):Gd(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Tc(0,3-b.length):"")+b})+"."+Tc(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var g=Gd(""+l);return g!=="0"?A+g:"";default:if(e.match(/\.[0#?]*$/))return gu(t,e.slice(0,e.lastIndexOf(".")),r)+Xi(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function CA(t,e,r){return(r|0)===r?gu(t,e,r):Nl(t,e,r)}function gle(t){for(var e=[],r=!1,n=0,a=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(a,n-a),a=n+1}if(e[e.length]=t.substr(a),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var eP=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Jm(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":ly(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="上午/下午")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(eP))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function xle(t,e,r,n){for(var a=[],s="",i=0,o="",l="t",A,d,h,m="H";i<t.length;)switch(o=t.charAt(i)){case"G":if(!ly(t,i))throw new Error("unrecognized character "+o+" in "+t);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(h=t.charCodeAt(++i))!==34&&i<t.length;)s+=String.fromCharCode(h);a[a.length]={t:"t",v:s},++i;break;case"\\":var g=t.charAt(++i),b=g==="("||g===")"?g:"t";a[a.length]={t:b,v:g},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:e},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(A==null&&(A=ih(e,r,t.charAt(i+1)==="2"),A==null))return"";a[a.length]={t:"X",v:t.substr(i,2)},l=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||A==null&&(A=ih(e,r),A==null))return"";for(s=o;++i<t.length&&t.charAt(i).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=m),a[a.length]={t:o,v:s},l=o;break;case"A":case"a":case"上":var w={t:o,v:o};if(A==null&&(A=ih(e,r)),t.substr(i,3).toUpperCase()==="A/P"?(A!=null&&(w.v=A.H>=12?"P":"A"),w.t="T",m="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(A!=null&&(w.v=A.H>=12?"PM":"AM"),w.t="T",i+=5,m="h"):t.substr(i,5).toUpperCase()==="上午/下午"?(A!=null&&(w.v=A.H>=12?"下午":"上午"),w.t="T",i+=5,m="h"):(w.t="t",++i),A==null&&w.t==="T")return"";a[a.length]=w,l=o;break;case"[":for(s=o;t.charAt(i++)!=="]"&&i<t.length;)s+=t.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(eP)){if(A==null&&(A=ih(e,r),A==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",Jm(t)||(a[a.length]={t:"t",v:s}));break;case".":if(A!=null){for(s=o;++i<t.length&&(o=t.charAt(i))==="0";)s+=o;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++i<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(i))>-1;)s+=o;a[a.length]={t:"n",v:s};break;case"?":for(s=o;t.charAt(++i)===o;)s+=o;a[a.length]={t:o,v:s},l=o;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)s+=t.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:o,v:o},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);a[a.length]={t:"t",v:o},++i;break}var _=0,N=0,k;for(i=a.length-1,l="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=m,l="h",_<1&&(_=1);break;case"s":(k=a[i].v.match(/\.0+$/))&&(N=Math.max(N,k[0].length-1)),_<3&&(_=3);case"d":case"y":case"M":case"e":l=a[i].t;break;case"m":l==="s"&&(a[i].t="M",_<2&&(_=2));break;case"X":break;case"Z":_<1&&a[i].v.match(/[Hh]/)&&(_=1),_<2&&a[i].v.match(/[Mm]/)&&(_=2),_<3&&a[i].v.match(/[Ss]/)&&(_=3)}switch(_){case 0:break;case 1:A.u>=.5&&(A.u=0,++A.S),A.S>=60&&(A.S=0,++A.M),A.M>=60&&(A.M=0,++A.H);break;case 2:A.u>=.5&&(A.u=0,++A.S),A.S>=60&&(A.S=0,++A.M);break}var I="",P;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=lle(a[i].t.charCodeAt(0),a[i].v,A,N),a[i].t="t";break;case"n":case"?":for(P=i+1;a[P]!=null&&((o=a[P].t)==="?"||o==="D"||(o===" "||o==="t")&&a[P+1]!=null&&(a[P+1].t==="?"||a[P+1].t==="t"&&a[P+1].v==="/")||a[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[P].v==="/"||a[P].v===" "&&a[P+1]!=null&&a[P+1].t=="?"));)a[i].v+=a[P].v,a[P]={v:"",t:";"},++P;I+=a[i].v,i=P-1;break;case"G":a[i].t="t",a[i].v=Sh(e,r);break}var M="",D,C;if(I.length>0){I.charCodeAt(0)==40?(D=e<0&&I.charCodeAt(0)===45?-e:e,C=CA("n",I,D)):(D=e<0&&n>1?-e:e,C=CA("n",I,D),D<0&&a[0]&&a[0].t=="t"&&(C=C.substr(1),a[0].v="-"+a[0].v)),P=C.length-1;var B=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){B=i;break}var T=a.length;if(B===a.length&&C.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(P>=a[i].v.length-1?(P-=a[i].v.length,a[i].v=C.substr(P+1,a[i].v.length)):P<0?a[i].v="":(a[i].v=C.substr(0,P+1),P=-1),a[i].t="t",T=i);P>=0&&T<a.length&&(a[T].v=C.substr(0,P+1)+a[T].v)}else if(B!==a.length&&C.indexOf("E")===-1){for(P=C.indexOf(".")-1,i=B;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(d=a[i].v.indexOf(".")>-1&&i===B?a[i].v.indexOf(".")-1:a[i].v.length-1,M=a[i].v.substr(d+1);d>=0;--d)P>=0&&(a[i].v.charAt(d)==="0"||a[i].v.charAt(d)==="#")&&(M=C.charAt(P--)+M);a[i].v=M,a[i].t="t",T=i}for(P>=0&&T<a.length&&(a[T].v=C.substr(0,P+1)+a[T].v),P=C.indexOf(".")+1,i=B;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==B)){for(d=a[i].v.indexOf(".")>-1&&i===B?a[i].v.indexOf(".")+1:0,M=a[i].v.substr(0,d);d<a[i].v.length;++d)P<C.length&&(M+=C.charAt(P++));a[i].v=M,a[i].t="t",T=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(D=n>1&&e<0&&i>0&&a[i-1].v==="-"?-e:e,a[i].v=CA(a[i].t,a[i].v,D),a[i].t="t");var O="";for(i=0;i!==a.length;++i)a[i]!=null&&(O+=a[i].v);return O}var kF=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function IF(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function vle(t,e){var r=gle(t),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(kF),o=r[1].match(kF);return IF(e,i)?[n,r[0]]:IF(e,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,s]}function ql(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:xr)[t],n==null&&(n=r.table&&r.table[TF[t]]||xr[TF[t]]),n==null&&(n=tle[t]||"General");break}if(ly(n,0))return Sh(e,r);e instanceof Date&&(e=qM(e,r.date1904));var a=vle(n,e);if(ly(a[1]))return Sh(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return xle(a[1],e,r,a[0])}function EA(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(xr[r]==null){e<0&&(e=r);continue}if(xr[r]==t){e=r;break}}e<0&&(e=391)}return xr[e]=t,e}function kw(t){for(var e=0;e!=392;++e)t[e]!==void 0&&EA(t[e],e)}function Zm(){xr=ele()}var yle={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},tP=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function wle(t){var e=typeof t=="number"?xr[t]:t;return e=e.replace(tP,"(\\d+)"),new RegExp("^"+e+"$")}function ble(t,e,r){var n=-1,a=-1,s=-1,i=-1,o=-1,l=-1;(e.match(tP)||[]).forEach(function(h,m){var g=parseInt(r[m+1],10);switch(h.toLowerCase().charAt(0)){case"y":n=g;break;case"d":s=g;break;case"h":i=g;break;case"s":l=g;break;case"m":i>=0?o=g:a=g;break}}),l>=0&&o==-1&&a>=0&&(o=a,a=-1);var A=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);A.length==7&&(A="0"+A),A.length==8&&(A="20"+A);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return i==-1&&o==-1&&l==-1?A:n==-1&&a==-1&&s==-1?d:A+"T"+d}var Cle=function(){var t={};t.version="1.2.0";function e(){for(var C=0,B=new Array(256),T=0;T!=256;++T)C=T,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,B[T]=C;return typeof Int32Array<"u"?new Int32Array(B):B}var r=e();function n(C){var B=0,T=0,O=0,F=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(O=0;O!=256;++O)F[O]=C[O];for(O=0;O!=256;++O)for(T=C[O],B=256+O;B<4096;B+=256)T=F[B]=T>>>8^C[T&255];var L=[];for(O=1;O!=16;++O)L[O-1]=typeof Int32Array<"u"?F.subarray(O*256,O*256+256):F.slice(O*256,O*256+256);return L}var a=n(r),s=a[0],i=a[1],o=a[2],l=a[3],A=a[4],d=a[5],h=a[6],m=a[7],g=a[8],b=a[9],w=a[10],_=a[11],N=a[12],k=a[13],I=a[14];function P(C,B){for(var T=B^-1,O=0,F=C.length;O<F;)T=T>>>8^r[(T^C.charCodeAt(O++))&255];return~T}function M(C,B){for(var T=B^-1,O=C.length-15,F=0;F<O;)T=I[C[F++]^T&255]^k[C[F++]^T>>8&255]^N[C[F++]^T>>16&255]^_[C[F++]^T>>>24]^w[C[F++]]^b[C[F++]]^g[C[F++]]^m[C[F++]]^h[C[F++]]^d[C[F++]]^A[C[F++]]^l[C[F++]]^o[C[F++]]^i[C[F++]]^s[C[F++]]^r[C[F++]];for(O+=15;F<O;)T=T>>>8^r[(T^C[F++])&255];return~T}function D(C,B){for(var T=B^-1,O=0,F=C.length,L=0,Q=0;O<F;)L=C.charCodeAt(O++),L<128?T=T>>>8^r[(T^L)&255]:L<2048?(T=T>>>8^r[(T^(192|L>>6&31))&255],T=T>>>8^r[(T^(128|L&63))&255]):L>=55296&&L<57344?(L=(L&1023)+64,Q=C.charCodeAt(O++)&1023,T=T>>>8^r[(T^(240|L>>8&7))&255],T=T>>>8^r[(T^(128|L>>2&63))&255],T=T>>>8^r[(T^(128|Q>>6&15|(L&3)<<4))&255],T=T>>>8^r[(T^(128|Q&63))&255]):(T=T>>>8^r[(T^(224|L>>12&15))&255],T=T>>>8^r[(T^(128|L>>6&63))&255],T=T>>>8^r[(T^(128|L&63))&255]);return~T}return t.table=r,t.bstr=P,t.buf=M,t.str=D,t}(),or=function(){var e={};e.version="1.2.1";function r(fe,Ne){for(var Ee=fe.split("/"),_e=Ne.split("/"),Te=0,ke=0,qe=Math.min(Ee.length,_e.length);Te<qe;++Te){if(ke=Ee[Te].length-_e[Te].length)return ke;if(Ee[Te]!=_e[Te])return Ee[Te]<_e[Te]?-1:1}return Ee.length-_e.length}function n(fe){if(fe.charAt(fe.length-1)=="/")return fe.slice(0,-1).indexOf("/")===-1?fe:n(fe.slice(0,-1));var Ne=fe.lastIndexOf("/");return Ne===-1?fe:fe.slice(0,Ne+1)}function a(fe){if(fe.charAt(fe.length-1)=="/")return a(fe.slice(0,-1));var Ne=fe.lastIndexOf("/");return Ne===-1?fe:fe.slice(Ne+1)}function s(fe,Ne){typeof Ne=="string"&&(Ne=new Date(Ne));var Ee=Ne.getHours();Ee=Ee<<6|Ne.getMinutes(),Ee=Ee<<5|Ne.getSeconds()>>>1,fe.write_shift(2,Ee);var _e=Ne.getFullYear()-1980;_e=_e<<4|Ne.getMonth()+1,_e=_e<<5|Ne.getDate(),fe.write_shift(2,_e)}function i(fe){var Ne=fe.read_shift(2)&65535,Ee=fe.read_shift(2)&65535,_e=new Date,Te=Ee&31;Ee>>>=5;var ke=Ee&15;Ee>>>=4,_e.setMilliseconds(0),_e.setFullYear(Ee+1980),_e.setMonth(ke-1),_e.setDate(Te);var qe=Ne&31;Ne>>>=5;var rt=Ne&63;return Ne>>>=6,_e.setHours(Ne),_e.setMinutes(rt),_e.setSeconds(qe<<1),_e}function o(fe){oi(fe,0);for(var Ne={},Ee=0;fe.l<=fe.length-4;){var _e=fe.read_shift(2),Te=fe.read_shift(2),ke=fe.l+Te,qe={};switch(_e){case 21589:Ee=fe.read_shift(1),Ee&1&&(qe.mtime=fe.read_shift(4)),Te>5&&(Ee&2&&(qe.atime=fe.read_shift(4)),Ee&4&&(qe.ctime=fe.read_shift(4))),qe.mtime&&(qe.mt=new Date(qe.mtime*1e3));break}fe.l=ke,Ne[_e]=qe}return Ne}var l;function A(){return l||(l={})}function d(fe,Ne){if(fe[0]==80&&fe[1]==75)return en(fe,Ne);if((fe[0]|32)==109&&(fe[1]|32)==105)return Es(fe,Ne);if(fe.length<512)throw new Error("CFB file size "+fe.length+" < 512");var Ee=3,_e=512,Te=0,ke=0,qe=0,rt=0,Qe=0,We=[],Je=fe.slice(0,512);oi(Je,0);var yt=h(Je);switch(Ee=yt[0],Ee){case 3:_e=512;break;case 4:_e=4096;break;case 0:if(yt[1]==0)return en(fe,Ne);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ee)}_e!==512&&(Je=fe.slice(0,_e),oi(Je,28));var Bt=fe.slice(0,_e);m(Je,Ee);var Pt=Je.read_shift(4,"i");if(Ee===3&&Pt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Pt);Je.l+=4,qe=Je.read_shift(4,"i"),Je.l+=4,Je.chk("00100000","Mini Stream Cutoff Size: "),rt=Je.read_shift(4,"i"),Te=Je.read_shift(4,"i"),Qe=Je.read_shift(4,"i"),ke=Je.read_shift(4,"i");for(var Tt=-1,Ft=0;Ft<109&&(Tt=Je.read_shift(4,"i"),!(Tt<0));++Ft)We[Ft]=Tt;var cr=g(fe,_e);_(Qe,ke,cr,_e,We);var Ur=k(cr,qe,We,_e);Ur[qe].name="!Directory",Te>0&&rt!==Q&&(Ur[rt].name="!MiniFAT"),Ur[We[0]].name="!FAT",Ur.fat_addrs=We,Ur.ssz=_e;var Mr={},Hr=[],Ia=[],fi=[];I(qe,Ur,cr,Hr,Te,Mr,Ia,rt),b(Ia,fi,Hr),Hr.shift();var Fa={FileIndex:Ia,FullPaths:fi};return Ne&&Ne.raw&&(Fa.raw={header:Bt,sectors:cr}),Fa}function h(fe){if(fe[fe.l]==80&&fe[fe.l+1]==75)return[0,0];fe.chk(q,"Header Signature: "),fe.l+=16;var Ne=fe.read_shift(2,"u");return[fe.read_shift(2,"u"),Ne]}function m(fe,Ne){var Ee=9;switch(fe.l+=2,Ee=fe.read_shift(2)){case 9:if(Ne!=3)throw new Error("Sector Shift: Expected 9 saw "+Ee);break;case 12:if(Ne!=4)throw new Error("Sector Shift: Expected 12 saw "+Ee);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ee)}fe.chk("0600","Mini Sector Shift: "),fe.chk("000000000000","Reserved: ")}function g(fe,Ne){for(var Ee=Math.ceil(fe.length/Ne)-1,_e=[],Te=1;Te<Ee;++Te)_e[Te-1]=fe.slice(Te*Ne,(Te+1)*Ne);return _e[Ee-1]=fe.slice(Ee*Ne),_e}function b(fe,Ne,Ee){for(var _e=0,Te=0,ke=0,qe=0,rt=0,Qe=Ee.length,We=[],Je=[];_e<Qe;++_e)We[_e]=Je[_e]=_e,Ne[_e]=Ee[_e];for(;rt<Je.length;++rt)_e=Je[rt],Te=fe[_e].L,ke=fe[_e].R,qe=fe[_e].C,We[_e]===_e&&(Te!==-1&&We[Te]!==Te&&(We[_e]=We[Te]),ke!==-1&&We[ke]!==ke&&(We[_e]=We[ke])),qe!==-1&&(We[qe]=_e),Te!==-1&&_e!=We[_e]&&(We[Te]=We[_e],Je.lastIndexOf(Te)<rt&&Je.push(Te)),ke!==-1&&_e!=We[_e]&&(We[ke]=We[_e],Je.lastIndexOf(ke)<rt&&Je.push(ke));for(_e=1;_e<Qe;++_e)We[_e]===_e&&(ke!==-1&&We[ke]!==ke?We[_e]=We[ke]:Te!==-1&&We[Te]!==Te&&(We[_e]=We[Te]));for(_e=1;_e<Qe;++_e)if(fe[_e].type!==0){if(rt=_e,rt!=We[rt])do rt=We[rt],Ne[_e]=Ne[rt]+"/"+Ne[_e];while(rt!==0&&We[rt]!==-1&&rt!=We[rt]);We[_e]=-1}for(Ne[0]+="/",_e=1;_e<Qe;++_e)fe[_e].type!==2&&(Ne[_e]+="/")}function w(fe,Ne,Ee){for(var _e=fe.start,Te=fe.size,ke=[],qe=_e;Ee&&Te>0&&qe>=0;)ke.push(Ne.slice(qe*L,qe*L+L)),Te-=L,qe=nh(Ee,qe*4);return ke.length===0?lt(0):Ws(ke).slice(0,fe.size)}function _(fe,Ne,Ee,_e,Te){var ke=Q;if(fe===Q){if(Ne!==0)throw new Error("DIFAT chain shorter than expected")}else if(fe!==-1){var qe=Ee[fe],rt=(_e>>>2)-1;if(!qe)return;for(var Qe=0;Qe<rt&&(ke=nh(qe,Qe*4))!==Q;++Qe)Te.push(ke);_(nh(qe,_e-4),Ne-1,Ee,_e,Te)}}function N(fe,Ne,Ee,_e,Te){var ke=[],qe=[];Te||(Te=[]);var rt=_e-1,Qe=0,We=0;for(Qe=Ne;Qe>=0;){Te[Qe]=!0,ke[ke.length]=Qe,qe.push(fe[Qe]);var Je=Ee[Math.floor(Qe*4/_e)];if(We=Qe*4&rt,_e<4+We)throw new Error("FAT boundary crossed: "+Qe+" 4 "+_e);if(!fe[Je])break;Qe=nh(fe[Je],We)}return{nodes:ke,data:VF([qe])}}function k(fe,Ne,Ee,_e){var Te=fe.length,ke=[],qe=[],rt=[],Qe=[],We=_e-1,Je=0,yt=0,Bt=0,Pt=0;for(Je=0;Je<Te;++Je)if(rt=[],Bt=Je+Ne,Bt>=Te&&(Bt-=Te),!qe[Bt]){Qe=[];var Tt=[];for(yt=Bt;yt>=0;){Tt[yt]=!0,qe[yt]=!0,rt[rt.length]=yt,Qe.push(fe[yt]);var Ft=Ee[Math.floor(yt*4/_e)];if(Pt=yt*4&We,_e<4+Pt)throw new Error("FAT boundary crossed: "+yt+" 4 "+_e);if(!fe[Ft]||(yt=nh(fe[Ft],Pt),Tt[yt]))break}ke[Bt]={nodes:rt,data:VF([Qe])}}return ke}function I(fe,Ne,Ee,_e,Te,ke,qe,rt){for(var Qe=0,We=_e.length?2:0,Je=Ne[fe].data,yt=0,Bt=0,Pt;yt<Je.length;yt+=128){var Tt=Je.slice(yt,yt+128);oi(Tt,64),Bt=Tt.read_shift(2),Pt=w4(Tt,0,Bt-We),_e.push(Pt);var Ft={name:Pt,type:Tt.read_shift(1),color:Tt.read_shift(1),L:Tt.read_shift(4,"i"),R:Tt.read_shift(4,"i"),C:Tt.read_shift(4,"i"),clsid:Tt.read_shift(16),state:Tt.read_shift(4,"i"),start:0,size:0},cr=Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2);cr!==0&&(Ft.ct=P(Tt,Tt.l-8));var Ur=Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2);Ur!==0&&(Ft.mt=P(Tt,Tt.l-8)),Ft.start=Tt.read_shift(4,"i"),Ft.size=Tt.read_shift(4,"i"),Ft.size<0&&Ft.start<0&&(Ft.size=Ft.type=0,Ft.start=Q,Ft.name=""),Ft.type===5?(Qe=Ft.start,Te>0&&Qe!==Q&&(Ne[Qe].name="!StreamData")):Ft.size>=4096?(Ft.storage="fat",Ne[Ft.start]===void 0&&(Ne[Ft.start]=N(Ee,Ft.start,Ne.fat_addrs,Ne.ssz)),Ne[Ft.start].name=Ft.name,Ft.content=Ne[Ft.start].data.slice(0,Ft.size)):(Ft.storage="minifat",Ft.size<0?Ft.size=0:Qe!==Q&&Ft.start!==Q&&Ne[Qe]&&(Ft.content=w(Ft,Ne[Qe].data,(Ne[rt]||{}).data))),Ft.content&&oi(Ft.content,0),ke[Pt]=Ft,qe.push(Ft)}}function P(fe,Ne){return new Date((Yo(fe,Ne+4)/1e7*Math.pow(2,32)+Yo(fe,Ne)/1e7-11644473600)*1e3)}function M(fe,Ne){return A(),d(l.readFileSync(fe),Ne)}function D(fe,Ne){var Ee=Ne&&Ne.type;switch(Ee||Kr&&Buffer.isBuffer(fe)&&(Ee="buffer"),Ee||"base64"){case"file":return M(fe,Ne);case"base64":return d(Xo(nl(fe)),Ne);case"binary":return d(Xo(fe),Ne)}return d(fe,Ne)}function C(fe,Ne){var Ee=Ne||{},_e=Ee.root||"Root Entry";if(fe.FullPaths||(fe.FullPaths=[]),fe.FileIndex||(fe.FileIndex=[]),fe.FullPaths.length!==fe.FileIndex.length)throw new Error("inconsistent CFB structure");fe.FullPaths.length===0&&(fe.FullPaths[0]=_e+"/",fe.FileIndex[0]={name:_e,type:5}),Ee.CLSID&&(fe.FileIndex[0].clsid=Ee.CLSID),B(fe)}function B(fe){var Ne="Sh33tJ5";if(!or.find(fe,"/"+Ne)){var Ee=lt(4);Ee[0]=55,Ee[1]=Ee[3]=50,Ee[2]=54,fe.FileIndex.push({name:Ne,type:2,content:Ee,size:4,L:69,R:69,C:69}),fe.FullPaths.push(fe.FullPaths[0]+Ne),T(fe)}}function T(fe,Ne){C(fe);for(var Ee=!1,_e=!1,Te=fe.FullPaths.length-1;Te>=0;--Te){var ke=fe.FileIndex[Te];switch(ke.type){case 0:_e?Ee=!0:(fe.FileIndex.pop(),fe.FullPaths.pop());break;case 1:case 2:case 5:_e=!0,isNaN(ke.R*ke.L*ke.C)&&(Ee=!0),ke.R>-1&&ke.L>-1&&ke.R==ke.L&&(Ee=!0);break;default:Ee=!0;break}}if(!(!Ee&&!Ne)){var qe=new Date(1987,1,19),rt=0,Qe=Object.create?Object.create(null):{},We=[];for(Te=0;Te<fe.FullPaths.length;++Te)Qe[fe.FullPaths[Te]]=!0,fe.FileIndex[Te].type!==0&&We.push([fe.FullPaths[Te],fe.FileIndex[Te]]);for(Te=0;Te<We.length;++Te){var Je=n(We[Te][0]);_e=Qe[Je],_e||(We.push([Je,{name:a(Je).replace("/",""),type:1,clsid:Z,ct:qe,mt:qe,content:null}]),Qe[Je]=!0)}for(We.sort(function(Pt,Tt){return r(Pt[0],Tt[0])}),fe.FullPaths=[],fe.FileIndex=[],Te=0;Te<We.length;++Te)fe.FullPaths[Te]=We[Te][0],fe.FileIndex[Te]=We[Te][1];for(Te=0;Te<We.length;++Te){var yt=fe.FileIndex[Te],Bt=fe.FullPaths[Te];if(yt.name=a(Bt).replace("/",""),yt.L=yt.R=yt.C=-(yt.color=1),yt.size=yt.content?yt.content.length:0,yt.start=0,yt.clsid=yt.clsid||Z,Te===0)yt.C=We.length>1?1:-1,yt.size=0,yt.type=5;else if(Bt.slice(-1)=="/"){for(rt=Te+1;rt<We.length&&n(fe.FullPaths[rt])!=Bt;++rt);for(yt.C=rt>=We.length?-1:rt,rt=Te+1;rt<We.length&&n(fe.FullPaths[rt])!=n(Bt);++rt);yt.R=rt>=We.length?-1:rt,yt.type=1}else n(fe.FullPaths[Te+1]||"")==n(Bt)&&(yt.R=Te+1),yt.type=2}}}function O(fe,Ne){var Ee=Ne||{};if(Ee.fileType=="mad")return Qt(fe,Ee);switch(T(fe),Ee.fileType){case"zip":return ha(fe,Ee)}var _e=function(Pt){for(var Tt=0,Ft=0,cr=0;cr<Pt.FileIndex.length;++cr){var Ur=Pt.FileIndex[cr];if(Ur.content){var Mr=Ur.content.length;Mr>0&&(Mr<4096?Tt+=Mr+63>>6:Ft+=Mr+511>>9)}}for(var Hr=Pt.FullPaths.length+3>>2,Ia=Tt+7>>3,fi=Tt+127>>7,Fa=Ia+Ft+Hr+fi,us=Fa+127>>7,Ga=us<=109?0:Math.ceil((us-109)/127);Fa+us+Ga+127>>7>us;)Ga=++us<=109?0:Math.ceil((us-109)/127);var _s=[1,Ga,us,fi,Hr,Ft,Tt,0];return Pt.FileIndex[0].size=Tt<<6,_s[7]=(Pt.FileIndex[0].start=_s[0]+_s[1]+_s[2]+_s[3]+_s[4]+_s[5])+(_s[6]+7>>3),_s}(fe),Te=lt(_e[7]<<9),ke=0,qe=0;{for(ke=0;ke<8;++ke)Te.write_shift(1,ie[ke]);for(ke=0;ke<8;++ke)Te.write_shift(2,0);for(Te.write_shift(2,62),Te.write_shift(2,3),Te.write_shift(2,65534),Te.write_shift(2,9),Te.write_shift(2,6),ke=0;ke<3;++ke)Te.write_shift(2,0);for(Te.write_shift(4,0),Te.write_shift(4,_e[2]),Te.write_shift(4,_e[0]+_e[1]+_e[2]+_e[3]-1),Te.write_shift(4,0),Te.write_shift(4,4096),Te.write_shift(4,_e[3]?_e[0]+_e[1]+_e[2]-1:Q),Te.write_shift(4,_e[3]),Te.write_shift(-4,_e[1]?_e[0]-1:Q),Te.write_shift(4,_e[1]),ke=0;ke<109;++ke)Te.write_shift(-4,ke<_e[2]?_e[1]+ke:-1)}if(_e[1])for(qe=0;qe<_e[1];++qe){for(;ke<236+qe*127;++ke)Te.write_shift(-4,ke<_e[2]?_e[1]+ke:-1);Te.write_shift(-4,qe===_e[1]-1?Q:qe+1)}var rt=function(Pt){for(qe+=Pt;ke<qe-1;++ke)Te.write_shift(-4,ke+1);Pt&&(++ke,Te.write_shift(-4,Q))};for(qe=ke=0,qe+=_e[1];ke<qe;++ke)Te.write_shift(-4,ee.DIFSECT);for(qe+=_e[2];ke<qe;++ke)Te.write_shift(-4,ee.FATSECT);rt(_e[3]),rt(_e[4]);for(var Qe=0,We=0,Je=fe.FileIndex[0];Qe<fe.FileIndex.length;++Qe)Je=fe.FileIndex[Qe],Je.content&&(We=Je.content.length,!(We<4096)&&(Je.start=qe,rt(We+511>>9)));for(rt(_e[6]+7>>3);Te.l&511;)Te.write_shift(-4,ee.ENDOFCHAIN);for(qe=ke=0,Qe=0;Qe<fe.FileIndex.length;++Qe)Je=fe.FileIndex[Qe],Je.content&&(We=Je.content.length,!(!We||We>=4096)&&(Je.start=qe,rt(We+63>>6)));for(;Te.l&511;)Te.write_shift(-4,ee.ENDOFCHAIN);for(ke=0;ke<_e[4]<<2;++ke){var yt=fe.FullPaths[ke];if(!yt||yt.length===0){for(Qe=0;Qe<17;++Qe)Te.write_shift(4,0);for(Qe=0;Qe<3;++Qe)Te.write_shift(4,-1);for(Qe=0;Qe<12;++Qe)Te.write_shift(4,0);continue}Je=fe.FileIndex[ke],ke===0&&(Je.start=Je.size?Je.start-1:Q);var Bt=ke===0&&Ee.root||Je.name;if(We=2*(Bt.length+1),Te.write_shift(64,Bt,"utf16le"),Te.write_shift(2,We),Te.write_shift(1,Je.type),Te.write_shift(1,Je.color),Te.write_shift(-4,Je.L),Te.write_shift(-4,Je.R),Te.write_shift(-4,Je.C),Je.clsid)Te.write_shift(16,Je.clsid,"hex");else for(Qe=0;Qe<4;++Qe)Te.write_shift(4,0);Te.write_shift(4,Je.state||0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,Je.start),Te.write_shift(4,Je.size),Te.write_shift(4,0)}for(ke=1;ke<fe.FileIndex.length;++ke)if(Je=fe.FileIndex[ke],Je.size>=4096)if(Te.l=Je.start+1<<9,Kr&&Buffer.isBuffer(Je.content))Je.content.copy(Te,Te.l,0,Je.size),Te.l+=Je.size+511&-512;else{for(Qe=0;Qe<Je.size;++Qe)Te.write_shift(1,Je.content[Qe]);for(;Qe&511;++Qe)Te.write_shift(1,0)}for(ke=1;ke<fe.FileIndex.length;++ke)if(Je=fe.FileIndex[ke],Je.size>0&&Je.size<4096)if(Kr&&Buffer.isBuffer(Je.content))Je.content.copy(Te,Te.l,0,Je.size),Te.l+=Je.size+63&-64;else{for(Qe=0;Qe<Je.size;++Qe)Te.write_shift(1,Je.content[Qe]);for(;Qe&63;++Qe)Te.write_shift(1,0)}if(Kr)Te.l=Te.length;else for(;Te.l<Te.length;)Te.write_shift(1,0);return Te}function F(fe,Ne){var Ee=fe.FullPaths.map(function(Qe){return Qe.toUpperCase()}),_e=Ee.map(function(Qe){var We=Qe.split("/");return We[We.length-(Qe.slice(-1)=="/"?2:1)]}),Te=!1;Ne.charCodeAt(0)===47?(Te=!0,Ne=Ee[0].slice(0,-1)+Ne):Te=Ne.indexOf("/")!==-1;var ke=Ne.toUpperCase(),qe=Te===!0?Ee.indexOf(ke):_e.indexOf(ke);if(qe!==-1)return fe.FileIndex[qe];var rt=!ke.match(fg);for(ke=ke.replace(Zi,""),rt&&(ke=ke.replace(fg,"!")),qe=0;qe<Ee.length;++qe)if((rt?Ee[qe].replace(fg,"!"):Ee[qe]).replace(Zi,"")==ke||(rt?_e[qe].replace(fg,"!"):_e[qe]).replace(Zi,"")==ke)return fe.FileIndex[qe];return null}var L=64,Q=-2,q="d0cf11e0a1b11ae1",ie=[208,207,17,224,161,177,26,225],Z="00000000000000000000000000000000",ee={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Q,FREESECT:-1,HEADER_SIGNATURE:q,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Z,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ne(fe,Ne,Ee){A();var _e=O(fe,Ee);l.writeFileSync(Ne,_e)}function z(fe){for(var Ne=new Array(fe.length),Ee=0;Ee<fe.length;++Ee)Ne[Ee]=String.fromCharCode(fe[Ee]);return Ne.join("")}function W(fe,Ne){var Ee=O(fe,Ne);switch(Ne&&Ne.type||"buffer"){case"file":return A(),l.writeFileSync(Ne.filename,Ee),Ee;case"binary":return typeof Ee=="string"?Ee:z(Ee);case"base64":return ix(typeof Ee=="string"?Ee:z(Ee));case"buffer":if(Kr)return Buffer.isBuffer(Ee)?Ee:HA(Ee);case"array":return typeof Ee=="string"?Xo(Ee):Ee}return Ee}var ce;function j(fe){try{var Ne=fe.InflateRaw,Ee=new Ne;if(Ee._processChunk(new Uint8Array([3,0]),Ee._finishFlushFlag),Ee.bytesRead)ce=fe;else throw new Error("zlib does not expose bytesRead")}catch(_e){console.error("cannot use native zlib: "+(_e.message||_e))}}function K(fe,Ne){if(!ce)return Nr(fe,Ne);var Ee=ce.InflateRaw,_e=new Ee,Te=_e._processChunk(fe.slice(fe.l),_e._finishFlushFlag);return fe.l+=_e.bytesRead,Te}function X(fe){return ce?ce.deflateRawSync(fe):kt(fe)}var te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],le=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],de=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function me(fe){var Ne=(fe<<1|fe<<11)&139536|(fe<<5|fe<<15)&558144;return(Ne>>16|Ne>>8|Ne)&255}for(var ge=typeof Uint8Array<"u",Se=ge?new Uint8Array(256):[],xe=0;xe<256;++xe)Se[xe]=me(xe);function ae(fe,Ne){var Ee=Se[fe&255];return Ne<=8?Ee>>>8-Ne:(Ee=Ee<<8|Se[fe>>8&255],Ne<=16?Ee>>>16-Ne:(Ee=Ee<<8|Se[fe>>16&255],Ee>>>24-Ne))}function Fe(fe,Ne){var Ee=Ne&7,_e=Ne>>>3;return(fe[_e]|(Ee<=6?0:fe[_e+1]<<8))>>>Ee&3}function Xe(fe,Ne){var Ee=Ne&7,_e=Ne>>>3;return(fe[_e]|(Ee<=5?0:fe[_e+1]<<8))>>>Ee&7}function De(fe,Ne){var Ee=Ne&7,_e=Ne>>>3;return(fe[_e]|(Ee<=4?0:fe[_e+1]<<8))>>>Ee&15}function Ce(fe,Ne){var Ee=Ne&7,_e=Ne>>>3;return(fe[_e]|(Ee<=3?0:fe[_e+1]<<8))>>>Ee&31}function ze(fe,Ne){var Ee=Ne&7,_e=Ne>>>3;return(fe[_e]|(Ee<=1?0:fe[_e+1]<<8))>>>Ee&127}function tt(fe,Ne,Ee){var _e=Ne&7,Te=Ne>>>3,ke=(1<<Ee)-1,qe=fe[Te]>>>_e;return Ee<8-_e||(qe|=fe[Te+1]<<8-_e,Ee<16-_e)||(qe|=fe[Te+2]<<16-_e,Ee<24-_e)||(qe|=fe[Te+3]<<24-_e),qe&ke}function it(fe,Ne,Ee){var _e=Ne&7,Te=Ne>>>3;return _e<=5?fe[Te]|=(Ee&7)<<_e:(fe[Te]|=Ee<<_e&255,fe[Te+1]=(Ee&7)>>8-_e),Ne+3}function dt(fe,Ne,Ee){var _e=Ne&7,Te=Ne>>>3;return Ee=(Ee&1)<<_e,fe[Te]|=Ee,Ne+1}function Ct(fe,Ne,Ee){var _e=Ne&7,Te=Ne>>>3;return Ee<<=_e,fe[Te]|=Ee&255,Ee>>>=8,fe[Te+1]=Ee,Ne+8}function ut(fe,Ne,Ee){var _e=Ne&7,Te=Ne>>>3;return Ee<<=_e,fe[Te]|=Ee&255,Ee>>>=8,fe[Te+1]=Ee&255,fe[Te+2]=Ee>>>8,Ne+16}function Nt(fe,Ne){var Ee=fe.length,_e=2*Ee>Ne?2*Ee:Ne+5,Te=0;if(Ee>=Ne)return fe;if(Kr){var ke=EF(_e);if(fe.copy)fe.copy(ke);else for(;Te<fe.length;++Te)ke[Te]=fe[Te];return ke}else if(ge){var qe=new Uint8Array(_e);if(qe.set)qe.set(fe);else for(;Te<Ee;++Te)qe[Te]=fe[Te];return qe}return fe.length=_e,fe}function It(fe){for(var Ne=new Array(fe),Ee=0;Ee<fe;++Ee)Ne[Ee]=0;return Ne}function Kt(fe,Ne,Ee){var _e=1,Te=0,ke=0,qe=0,rt=0,Qe=fe.length,We=ge?new Uint16Array(32):It(32);for(ke=0;ke<32;++ke)We[ke]=0;for(ke=Qe;ke<Ee;++ke)fe[ke]=0;Qe=fe.length;var Je=ge?new Uint16Array(Qe):It(Qe);for(ke=0;ke<Qe;++ke)We[Te=fe[ke]]++,_e<Te&&(_e=Te),Je[ke]=0;for(We[0]=0,ke=1;ke<=_e;++ke)We[ke+16]=rt=rt+We[ke-1]<<1;for(ke=0;ke<Qe;++ke)rt=fe[ke],rt!=0&&(Je[ke]=We[rt+16]++);var yt=0;for(ke=0;ke<Qe;++ke)if(yt=fe[ke],yt!=0)for(rt=ae(Je[ke],_e)>>_e-yt,qe=(1<<_e+4-yt)-1;qe>=0;--qe)Ne[rt|qe<<yt]=yt&15|ke<<4;return _e}var Ut=ge?new Uint16Array(512):It(512),Ht=ge?new Uint16Array(32):It(32);if(!ge){for(var Yt=0;Yt<512;++Yt)Ut[Yt]=0;for(Yt=0;Yt<32;++Yt)Ht[Yt]=0}(function(){for(var fe=[],Ne=0;Ne<32;Ne++)fe.push(5);Kt(fe,Ht,32);var Ee=[];for(Ne=0;Ne<=143;Ne++)Ee.push(8);for(;Ne<=255;Ne++)Ee.push(9);for(;Ne<=279;Ne++)Ee.push(7);for(;Ne<=287;Ne++)Ee.push(8);Kt(Ee,Ut,288)})();var Mt=function(){for(var Ne=ge?new Uint8Array(32768):[],Ee=0,_e=0;Ee<de.length-1;++Ee)for(;_e<de[Ee+1];++_e)Ne[_e]=Ee;for(;_e<32768;++_e)Ne[_e]=29;var Te=ge?new Uint8Array(259):[];for(Ee=0,_e=0;Ee<le.length-1;++Ee)for(;_e<le[Ee+1];++_e)Te[_e]=Ee;function ke(rt,Qe){for(var We=0;We<rt.length;){var Je=Math.min(65535,rt.length-We),yt=We+Je==rt.length;for(Qe.write_shift(1,+yt),Qe.write_shift(2,Je),Qe.write_shift(2,~Je&65535);Je-- >0;)Qe[Qe.l++]=rt[We++]}return Qe.l}function qe(rt,Qe){for(var We=0,Je=0,yt=ge?new Uint16Array(32768):[];Je<rt.length;){var Bt=Math.min(65535,rt.length-Je);if(Bt<10){for(We=it(Qe,We,+(Je+Bt==rt.length)),We&7&&(We+=8-(We&7)),Qe.l=We/8|0,Qe.write_shift(2,Bt),Qe.write_shift(2,~Bt&65535);Bt-- >0;)Qe[Qe.l++]=rt[Je++];We=Qe.l*8;continue}We=it(Qe,We,+(Je+Bt==rt.length)+2);for(var Pt=0;Bt-- >0;){var Tt=rt[Je];Pt=(Pt<<5^Tt)&32767;var Ft=-1,cr=0;if((Ft=yt[Pt])&&(Ft|=Je&-32768,Ft>Je&&(Ft-=32768),Ft<Je))for(;rt[Ft+cr]==rt[Je+cr]&&cr<250;)++cr;if(cr>2){Tt=Te[cr],Tt<=22?We=Ct(Qe,We,Se[Tt+1]>>1)-1:(Ct(Qe,We,3),We+=5,Ct(Qe,We,Se[Tt-23]>>5),We+=3);var Ur=Tt<8?0:Tt-4>>2;Ur>0&&(ut(Qe,We,cr-le[Tt]),We+=Ur),Tt=Ne[Je-Ft],We=Ct(Qe,We,Se[Tt]>>3),We-=3;var Mr=Tt<4?0:Tt-2>>1;Mr>0&&(ut(Qe,We,Je-Ft-de[Tt]),We+=Mr);for(var Hr=0;Hr<cr;++Hr)yt[Pt]=Je&32767,Pt=(Pt<<5^rt[Je])&32767,++Je;Bt-=cr-1}else Tt<=143?Tt=Tt+48:We=dt(Qe,We,1),We=Ct(Qe,We,Se[Tt]),yt[Pt]=Je&32767,++Je}We=Ct(Qe,We,0)-1}return Qe.l=(We+7)/8|0,Qe.l}return function(Qe,We){return Qe.length<8?ke(Qe,We):qe(Qe,We)}}();function kt(fe){var Ne=lt(50+Math.floor(fe.length*1.1)),Ee=Mt(fe,Ne);return Ne.slice(0,Ee)}var xt=ge?new Uint16Array(32768):It(32768),vr=ge?new Uint16Array(32768):It(32768),Wt=ge?new Uint16Array(128):It(128),un=1,pr=1;function Rr(fe,Ne){var Ee=Ce(fe,Ne)+257;Ne+=5;var _e=Ce(fe,Ne)+1;Ne+=5;var Te=De(fe,Ne)+4;Ne+=4;for(var ke=0,qe=ge?new Uint8Array(19):It(19),rt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Qe=1,We=ge?new Uint8Array(8):It(8),Je=ge?new Uint8Array(8):It(8),yt=qe.length,Bt=0;Bt<Te;++Bt)qe[te[Bt]]=ke=Xe(fe,Ne),Qe<ke&&(Qe=ke),We[ke]++,Ne+=3;var Pt=0;for(We[0]=0,Bt=1;Bt<=Qe;++Bt)Je[Bt]=Pt=Pt+We[Bt-1]<<1;for(Bt=0;Bt<yt;++Bt)(Pt=qe[Bt])!=0&&(rt[Bt]=Je[Pt]++);var Tt=0;for(Bt=0;Bt<yt;++Bt)if(Tt=qe[Bt],Tt!=0){Pt=Se[rt[Bt]]>>8-Tt;for(var Ft=(1<<7-Tt)-1;Ft>=0;--Ft)Wt[Pt|Ft<<Tt]=Tt&7|Bt<<3}var cr=[];for(Qe=1;cr.length<Ee+_e;)switch(Pt=Wt[ze(fe,Ne)],Ne+=Pt&7,Pt>>>=3){case 16:for(ke=3+Fe(fe,Ne),Ne+=2,Pt=cr[cr.length-1];ke-- >0;)cr.push(Pt);break;case 17:for(ke=3+Xe(fe,Ne),Ne+=3;ke-- >0;)cr.push(0);break;case 18:for(ke=11+ze(fe,Ne),Ne+=7;ke-- >0;)cr.push(0);break;default:cr.push(Pt),Qe<Pt&&(Qe=Pt);break}var Ur=cr.slice(0,Ee),Mr=cr.slice(Ee);for(Bt=Ee;Bt<286;++Bt)Ur[Bt]=0;for(Bt=_e;Bt<30;++Bt)Mr[Bt]=0;return un=Kt(Ur,xt,286),pr=Kt(Mr,vr,30),Ne}function kn(fe,Ne){if(fe[0]==3&&!(fe[1]&3))return[pf(Ne),2];for(var Ee=0,_e=0,Te=EF(Ne||1<<18),ke=0,qe=Te.length>>>0,rt=0,Qe=0;(_e&1)==0;){if(_e=Xe(fe,Ee),Ee+=3,_e>>>1)_e>>1==1?(rt=9,Qe=5):(Ee=Rr(fe,Ee),rt=un,Qe=pr);else{Ee&7&&(Ee+=8-(Ee&7));var We=fe[Ee>>>3]|fe[(Ee>>>3)+1]<<8;if(Ee+=32,We>0)for(!Ne&&qe<ke+We&&(Te=Nt(Te,ke+We),qe=Te.length);We-- >0;)Te[ke++]=fe[Ee>>>3],Ee+=8;continue}for(;;){!Ne&&qe<ke+32767&&(Te=Nt(Te,ke+32767),qe=Te.length);var Je=tt(fe,Ee,rt),yt=_e>>>1==1?Ut[Je]:xt[Je];if(Ee+=yt&15,yt>>>=4,(yt>>>8&255)===0)Te[ke++]=yt;else{if(yt==256)break;yt-=257;var Bt=yt<8?0:yt-4>>2;Bt>5&&(Bt=0);var Pt=ke+le[yt];Bt>0&&(Pt+=tt(fe,Ee,Bt),Ee+=Bt),Je=tt(fe,Ee,Qe),yt=_e>>>1==1?Ht[Je]:vr[Je],Ee+=yt&15,yt>>>=4;var Tt=yt<4?0:yt-2>>1,Ft=de[yt];for(Tt>0&&(Ft+=tt(fe,Ee,Tt),Ee+=Tt),!Ne&&qe<Pt&&(Te=Nt(Te,Pt+100),qe=Te.length);ke<Pt;)Te[ke]=Te[ke-Ft],++ke}}}return Ne?[Te,Ee+7>>>3]:[Te.slice(0,ke),Ee+7>>>3]}function Nr(fe,Ne){var Ee=fe.slice(fe.l||0),_e=kn(Ee,Ne);return fe.l+=_e[1],_e[0]}function ls(fe,Ne){if(fe)typeof console<"u"&&console.error(Ne);else throw new Error(Ne)}function en(fe,Ne){var Ee=fe;oi(Ee,0);var _e=[],Te=[],ke={FileIndex:_e,FullPaths:Te};C(ke,{root:Ne.root});for(var qe=Ee.length-4;(Ee[qe]!=80||Ee[qe+1]!=75||Ee[qe+2]!=5||Ee[qe+3]!=6)&&qe>=0;)--qe;Ee.l=qe+4,Ee.l+=4;var rt=Ee.read_shift(2);Ee.l+=6;var Qe=Ee.read_shift(4);for(Ee.l=Qe,qe=0;qe<rt;++qe){Ee.l+=20;var We=Ee.read_shift(4),Je=Ee.read_shift(4),yt=Ee.read_shift(2),Bt=Ee.read_shift(2),Pt=Ee.read_shift(2);Ee.l+=8;var Tt=Ee.read_shift(4),Ft=o(Ee.slice(Ee.l+yt,Ee.l+yt+Bt));Ee.l+=yt+Bt+Pt;var cr=Ee.l;Ee.l=Tt+4,ea(Ee,We,Je,ke,Ft),Ee.l=cr}return ke}function ea(fe,Ne,Ee,_e,Te){fe.l+=2;var ke=fe.read_shift(2),qe=fe.read_shift(2),rt=i(fe);if(ke&8257)throw new Error("Unsupported ZIP encryption");for(var Qe=fe.read_shift(4),We=fe.read_shift(4),Je=fe.read_shift(4),yt=fe.read_shift(2),Bt=fe.read_shift(2),Pt="",Tt=0;Tt<yt;++Tt)Pt+=String.fromCharCode(fe[fe.l++]);if(Bt){var Ft=o(fe.slice(fe.l,fe.l+Bt));(Ft[21589]||{}).mt&&(rt=Ft[21589].mt),((Te||{})[21589]||{}).mt&&(rt=Te[21589].mt)}fe.l+=Bt;var cr=fe.slice(fe.l,fe.l+We);switch(qe){case 8:cr=K(fe,Je);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+qe)}var Ur=!1;ke&8&&(Qe=fe.read_shift(4),Qe==134695760&&(Qe=fe.read_shift(4),Ur=!0),We=fe.read_shift(4),Je=fe.read_shift(4)),We!=Ne&&ls(Ur,"Bad compressed size: "+Ne+" != "+We),Je!=Ee&&ls(Ur,"Bad uncompressed size: "+Ee+" != "+Je),tn(_e,Pt,cr,{unsafe:!0,mt:rt})}function ha(fe,Ne){var Ee=Ne||{},_e=[],Te=[],ke=lt(1),qe=Ee.compression?8:0,rt=0,Qe=0,We=0,Je=0,yt=0,Bt=fe.FullPaths[0],Pt=Bt,Tt=fe.FileIndex[0],Ft=[],cr=0;for(Qe=1;Qe<fe.FullPaths.length;++Qe)if(Pt=fe.FullPaths[Qe].slice(Bt.length),Tt=fe.FileIndex[Qe],!(!Tt.size||!Tt.content||Pt=="Sh33tJ5")){var Ur=Je,Mr=lt(Pt.length);for(We=0;We<Pt.length;++We)Mr.write_shift(1,Pt.charCodeAt(We)&127);Mr=Mr.slice(0,Mr.l),Ft[yt]=Cle.buf(Tt.content,0);var Hr=Tt.content;qe==8&&(Hr=X(Hr)),ke=lt(30),ke.write_shift(4,67324752),ke.write_shift(2,20),ke.write_shift(2,rt),ke.write_shift(2,qe),Tt.mt?s(ke,Tt.mt):ke.write_shift(4,0),ke.write_shift(-4,Ft[yt]),ke.write_shift(4,Hr.length),ke.write_shift(4,Tt.content.length),ke.write_shift(2,Mr.length),ke.write_shift(2,0),Je+=ke.length,_e.push(ke),Je+=Mr.length,_e.push(Mr),Je+=Hr.length,_e.push(Hr),ke=lt(46),ke.write_shift(4,33639248),ke.write_shift(2,0),ke.write_shift(2,20),ke.write_shift(2,rt),ke.write_shift(2,qe),ke.write_shift(4,0),ke.write_shift(-4,Ft[yt]),ke.write_shift(4,Hr.length),ke.write_shift(4,Tt.content.length),ke.write_shift(2,Mr.length),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(4,0),ke.write_shift(4,Ur),cr+=ke.l,Te.push(ke),cr+=Mr.length,Te.push(Mr),++yt}return ke=lt(22),ke.write_shift(4,101010256),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,yt),ke.write_shift(2,yt),ke.write_shift(4,cr),ke.write_shift(4,Je),ke.write_shift(2,0),Ws([Ws(_e),Ws(Te),ke])}var Lr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function tr(fe,Ne){if(fe.ctype)return fe.ctype;var Ee=fe.name||"",_e=Ee.match(/\.([^\.]+)$/);return _e&&Lr[_e[1]]||Ne&&(_e=(Ee=Ne).match(/[\.\\]([^\.\\])+$/),_e&&Lr[_e[1]])?Lr[_e[1]]:"application/octet-stream"}function Qr(fe){for(var Ne=ix(fe),Ee=[],_e=0;_e<Ne.length;_e+=76)Ee.push(Ne.slice(_e,_e+76));return Ee.join(`\r
`)+`\r
`}function cs(fe){var Ne=fe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(We){var Je=We.charCodeAt(0).toString(16).toUpperCase();return"="+(Je.length==1?"0"+Je:Je)});Ne=Ne.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ne.charAt(0)==`
`&&(Ne="=0D"+Ne.slice(1)),Ne=Ne.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ee=[],_e=Ne.split(`\r
`),Te=0;Te<_e.length;++Te){var ke=_e[Te];if(ke.length==0){Ee.push("");continue}for(var qe=0;qe<ke.length;){var rt=76,Qe=ke.slice(qe,qe+rt);Qe.charAt(rt-1)=="="?rt--:Qe.charAt(rt-2)=="="?rt-=2:Qe.charAt(rt-3)=="="&&(rt-=3),Qe=ke.slice(qe,qe+rt),qe+=rt,qe<ke.length&&(Qe+="="),Ee.push(Qe)}}return Ee.join(`\r
`)}function qn(fe){for(var Ne=[],Ee=0;Ee<fe.length;++Ee){for(var _e=fe[Ee];Ee<=fe.length&&_e.charAt(_e.length-1)=="=";)_e=_e.slice(0,_e.length-1)+fe[++Ee];Ne.push(_e)}for(var Te=0;Te<Ne.length;++Te)Ne[Te]=Ne[Te].replace(/[=][0-9A-Fa-f]{2}/g,function(ke){return String.fromCharCode(parseInt(ke.slice(1),16))});return Xo(Ne.join(`\r
`))}function wa(fe,Ne,Ee){for(var _e="",Te="",ke="",qe,rt=0;rt<10;++rt){var Qe=Ne[rt];if(!Qe||Qe.match(/^\s*$/))break;var We=Qe.match(/^(.*?):\s*([^\s].*)$/);if(We)switch(We[1].toLowerCase()){case"content-location":_e=We[2].trim();break;case"content-type":ke=We[2].trim();break;case"content-transfer-encoding":Te=We[2].trim();break}}switch(++rt,Te.toLowerCase()){case"base64":qe=Xo(nl(Ne.slice(rt).join("")));break;case"quoted-printable":qe=qn(Ne.slice(rt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Te)}var Je=tn(fe,_e.slice(Ee.length),qe,{unsafe:!0});ke&&(Je.ctype=ke)}function Es(fe,Ne){if(z(fe.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ee=Ne&&Ne.root||"",_e=(Kr&&Buffer.isBuffer(fe)?fe.toString("binary"):z(fe)).split(`\r
`),Te=0,ke="";for(Te=0;Te<_e.length;++Te)if(ke=_e[Te],!!/^Content-Location:/i.test(ke)&&(ke=ke.slice(ke.indexOf("file")),Ee||(Ee=ke.slice(0,ke.lastIndexOf("/")+1)),ke.slice(0,Ee.length)!=Ee))for(;Ee.length>0&&(Ee=Ee.slice(0,Ee.length-1),Ee=Ee.slice(0,Ee.lastIndexOf("/")+1),ke.slice(0,Ee.length)!=Ee););var qe=(_e[1]||"").match(/boundary="(.*?)"/);if(!qe)throw new Error("MAD cannot find boundary");var rt="--"+(qe[1]||""),Qe=[],We=[],Je={FileIndex:Qe,FullPaths:We};C(Je);var yt,Bt=0;for(Te=0;Te<_e.length;++Te){var Pt=_e[Te];Pt!==rt&&Pt!==rt+"--"||(Bt++&&wa(Je,_e.slice(yt,Te),Ee),yt=Te)}return Je}function Qt(fe,Ne){var Ee=Ne||{},_e=Ee.boundary||"SheetJS";_e="------="+_e;for(var Te=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+_e.slice(2)+'"',"","",""],ke=fe.FullPaths[0],qe=ke,rt=fe.FileIndex[0],Qe=1;Qe<fe.FullPaths.length;++Qe)if(qe=fe.FullPaths[Qe].slice(ke.length),rt=fe.FileIndex[Qe],!(!rt.size||!rt.content||qe=="Sh33tJ5")){qe=qe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(cr){return"_x"+cr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(cr){return"_u"+cr.charCodeAt(0).toString(16)+"_"});for(var We=rt.content,Je=Kr&&Buffer.isBuffer(We)?We.toString("binary"):z(We),yt=0,Bt=Math.min(1024,Je.length),Pt=0,Tt=0;Tt<=Bt;++Tt)(Pt=Je.charCodeAt(Tt))>=32&&Pt<128&&++yt;var Ft=yt>=Bt*4/5;Te.push(_e),Te.push("Content-Location: "+(Ee.root||"file:///C:/SheetJS/")+qe),Te.push("Content-Transfer-Encoding: "+(Ft?"quoted-printable":"base64")),Te.push("Content-Type: "+tr(rt,qe)),Te.push(""),Te.push(Ft?cs(Je):Qr(Je))}return Te.push(_e+`--\r
`),Te.join(`\r
`)}function An(fe){var Ne={};return C(Ne,fe),Ne}function tn(fe,Ne,Ee,_e){var Te=_e&&_e.unsafe;Te||C(fe);var ke=!Te&&or.find(fe,Ne);if(!ke){var qe=fe.FullPaths[0];Ne.slice(0,qe.length)==qe?qe=Ne:(qe.slice(-1)!="/"&&(qe+="/"),qe=(qe+Ne).replace("//","/")),ke={name:a(Ne),type:2},fe.FileIndex.push(ke),fe.FullPaths.push(qe),Te||or.utils.cfb_gc(fe)}return ke.content=Ee,ke.size=Ee?Ee.length:0,_e&&(_e.CLSID&&(ke.clsid=_e.CLSID),_e.mt&&(ke.mt=_e.mt),_e.ct&&(ke.ct=_e.ct)),ke}function In(fe,Ne){C(fe);var Ee=or.find(fe,Ne);if(Ee){for(var _e=0;_e<fe.FileIndex.length;++_e)if(fe.FileIndex[_e]==Ee)return fe.FileIndex.splice(_e,1),fe.FullPaths.splice(_e,1),!0}return!1}function Un(fe,Ne,Ee){C(fe);var _e=or.find(fe,Ne);if(_e){for(var Te=0;Te<fe.FileIndex.length;++Te)if(fe.FileIndex[Te]==_e)return fe.FileIndex[Te].name=a(Ee),fe.FullPaths[Te]=Ee,!0}return!1}function Kn(fe){T(fe,!0)}return e.find=F,e.read=D,e.parse=d,e.write=W,e.writeFile=ne,e.utils={cfb_new:An,cfb_add:tn,cfb_del:In,cfb_mov:Un,cfb_gc:Kn,ReadShift:Lg,CheckField:CP,prep_blob:oi,bconcat:Ws,use_zlib:j,_deflateRaw:kt,_inflateRaw:Nr,consts:ee},e}();function Ele(t){return typeof t=="string"?Nw(t):Array.isArray(t)?Yoe(t):t}function Vx(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=Nw(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?bu(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var a=new Blob([Ele(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,t);if(typeof saveAs<"u")return saveAs(a,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=Ef(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function _le(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function za(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function FF(t,e){for(var r=[],n=za(t),a=0;a!==n.length;++a)r[t[n[a]][e]]==null&&(r[t[n[a]][e]]=n[a]);return r}function Iw(t){for(var e=[],r=za(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function Fw(t){for(var e=[],r=za(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function Sle(t){for(var e=[],r=za(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var uy=new Date(1899,11,30,0,0,0);function Ls(t,e){var r=t.getTime(),n=uy.getTime()+(t.getTimezoneOffset()-uy.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var rP=new Date,Tle=uy.getTime()+(rP.getTimezoneOffset()-uy.getTimezoneOffset())*6e4,RF=rP.getTimezoneOffset();function Rw(t){var e=new Date;return e.setTime(t*24*60*60*1e3+Tle),e.getTimezoneOffset()!==RF&&e.setTime(e.getTime()+(e.getTimezoneOffset()-RF)*6e4),e}function Ble(t){var e=0,r=0,n=!1,a=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(a[s],10)}return e}var DF=new Date("2017-02-19T19:06:09.000Z"),nP=isNaN(DF.getFullYear())?new Date("2/19/17"):DF,Nle=nP.getFullYear()==2017;function da(t,e){var r=new Date(t);if(Nle)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(nP.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Th(t,e){if(Kr&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return bu(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return bu(zM(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return bu(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return bu(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=t.length;++a)n.push(String.fromCharCode(t[a]));return n.join("")}function fa(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=fa(t[r]));return e}function Oa(t,e){for(var r="";r.length<e;)r+=t;return r}function Bc(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var kle=["january","february","march","april","may","june","july","august","september","october","november","december"];function Im(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),a=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&kle.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var Ile=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(t||typeof n=="string")return r.split(n);for(var s=r.split(n),i=[s[0]],o=1;o<s.length;++o)i.push(a),i.push(s[o]);return i}}();function aP(t){return t?t.content&&t.type?Th(t.content,!0):t.data?dg(t.data):t.asNodeBuffer&&Kr?dg(t.asNodeBuffer().toString("binary")):t.asBinary?dg(t.asBinary()):t._data&&t._data.getContent?dg(Th(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function sP(t){if(!t)return null;if(t.data)return bF(t.data);if(t.asNodeBuffer&&Kr)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?bF(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function Fle(t){return t&&t.name.slice(-4)===".bin"?sP(t):aP(t)}function Fl(t,e){for(var r=t.FullPaths||za(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return t.files?t.files[r[s]]:t.FileIndex[s]}return null}function m4(t,e){var r=Fl(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function xs(t,e,r){if(!r)return Fle(m4(t,e));if(!e)return null;try{return xs(t,e)}catch{return null}}function Jo(t,e,r){if(!r)return aP(m4(t,e));if(!e)return null;try{return Jo(t,e)}catch{return null}}function Rle(t,e,r){return sP(m4(t,e))}function LF(t){for(var e=t.FullPaths||za(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Or(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Kr?n=HA(r):n=Xoe(r),or.utils.cfb_add(t,e,n)}or.utils.cfb_add(t,e,r)}else t.file(e,r)}function p4(){return or.utils.cfb_new()}function iP(t,e){switch(e.type){case"base64":return or.read(t,{type:"base64"});case"binary":return or.read(t,{type:"binary"});case"buffer":case"array":return or.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function hg(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var os=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Dle=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,UF=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Lle=/<[^>]*>/g,Gi=os.match(UF)?UF:Lle,Ule=/<\w*:/,Mle=/<(\/?)\w+:/;function Sr(t,e,r){for(var n={},a=0,s=0;a!==t.length&&!((s=t.charCodeAt(a))===32||s===10||s===13);++a);if(e||(n[0]=t.slice(0,a)),a===t.length)return n;var i=t.match(Dle),o=0,l="",A=0,d="",h="",m=1;if(i)for(A=0;A!=i.length;++A){for(h=i[A],s=0;s!=h.length&&h.charCodeAt(s)!==61;++s);for(d=h.slice(0,s).trim();h.charCodeAt(s+1)==32;)++s;for(m=(a=h.charCodeAt(s+1))==34||a==39?1:0,l=h.slice(s+1+m,h.length-m),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=l,n[d.toLowerCase()]=l;else{var g=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[g]&&d.slice(o-3,o)=="ext")continue;n[g]=l,n[g.toLowerCase()]=l}}return n}function Ru(t){return t.replace(Mle,"<$1")}var oP={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},g4=Iw(oP),yn=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(t,function(o,l){return oP[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),x4=/[&<>'"]/g,Ple=/[\u0000-\u0008\u000b-\u001f]/g;function zn(t){var e=t+"";return e.replace(x4,function(r){return g4[r]}).replace(Ple,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function MF(t){return zn(t).replace(/ /g,"_x0020_")}var lP=/[\u0000-\u001f]/g;function v4(t){var e=t+"";return e.replace(x4,function(r){return g4[r]}).replace(/\n/g,"<br/>").replace(lP,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function jle(t){var e=t+"";return e.replace(x4,function(r){return g4[r]}).replace(lP,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var PF=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function Ole(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function ua(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function XC(t){for(var e="",r=0,n=0,a=0,s=0,i=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(a=t.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=a&63,e+=String.fromCharCode(i);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}i=t.charCodeAt(r++),o=((n&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function jF(t){var e=pf(2*t.length),r,n,a=1,s=0,i=0,o;for(n=0;n<t.length;n+=a)a=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),a=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),a=3):(a=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(e[s++]=i&255,e[s++]=i>>>8,i=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function OF(t){return HA(t,"binary").toString("utf8")}var pv="foo bar bazâð£",Zn=Kr&&(OF(pv)==XC(pv)&&OF||jF(pv)==XC(pv)&&jF)||XC,bu=Kr?function(t){return HA(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,a=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(a>>18&7))),e.push(String.fromCharCode(144+(a>>12&63))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},lx=function(){var t={};return function(r,n){var a=r+"|"+(n||"");return t[a]?t[a]:t[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),cP=function(){var t=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<t.length;++a)n=n.replace(t[a][0],t[a][1]);return n}}(),Qle=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),Hle=/<\/?(?:vt:)?variant>/g,Vle=/<(?:vt:)([^>]*)>([\s\S]*)</;function QF(t,e){var r=Sr(t),n=t.match(Qle(r.baseType))||[],a=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var i=s.replace(Hle,"").match(Vle);i&&a.push({v:Zn(i[2]),t:i[1]})}),a}var uP=/(^\s|\s$|\n)/;function ci(t,e){return"<"+t+(e.match(uP)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function cx(t){return za(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Rt(t,e,r){return"<"+t+(r!=null?cx(r):"")+(e!=null?(e.match(uP)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function J_(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function zle(t,e){switch(typeof t){case"string":var r=Rt("vt:lpwstr",zn(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Rt((t|0)==t?"vt:i4":"vt:r8",zn(String(t)));case"boolean":return Rt("vt:bool",t?"true":"false")}if(t instanceof Date)return Rt("vt:filetime",J_(t));throw new Error("Unable to serialize "+t)}function y4(t){if(Kr&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Zn(Ef(d4(t)));throw new Error("Bad input format: expected Buffer or string")}var ux=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Fs={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Oh=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],$o={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Gle(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),a=t[e+6]&15,s=5;s>=0;--s)a=a*256+t[e+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function qle(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,a=0,s=0,i=n?-e:e;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)t[r+o]=s&255;t[r+6]=(a&15)<<4|s&15,t[r+7]=a>>4|n}var HF=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var a=0,s=t[0][n].length;a<s;a+=r)e.push.apply(e,t[0][n].slice(a,a+r));return e},VF=Kr?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:HA(e)})):HF(t)}:HF,zF=function(t,e,r){for(var n=[],a=e;a<r;a+=2)n.push(String.fromCharCode(yA(t,a)));return n.join("").replace(Zi,"")},w4=Kr?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(Zi,""):zF(t,e,r)}:zF,GF=function(t,e,r){for(var n=[],a=e;a<e+r;++a)n.push(("0"+t[a].toString(16)).slice(-2));return n.join("")},AP=Kr?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):GF(t,e,r)}:GF,qF=function(t,e,r){for(var n=[],a=e;a<r;a++)n.push(String.fromCharCode(G0(t,a)));return n.join("")},zx=Kr?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):qF(e,r,n)}:qF,dP=function(t,e){var r=Yo(t,e);return r>0?zx(t,e+4,e+4+r-1):""},fP=dP,hP=function(t,e){var r=Yo(t,e);return r>0?zx(t,e+4,e+4+r-1):""},mP=hP,pP=function(t,e){var r=2*Yo(t,e);return r>0?zx(t,e+4,e+4+r-1):""},gP=pP,xP=function(e,r){var n=Yo(e,r);return n>0?w4(e,r+4,r+4+n):""},vP=xP,yP=function(t,e){var r=Yo(t,e);return r>0?zx(t,e+4,e+4+r):""},wP=yP,bP=function(t,e){return Gle(t,e)},Ay=bP,b4=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Kr&&(fP=function(e,r){if(!Buffer.isBuffer(e))return dP(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},mP=function(e,r){if(!Buffer.isBuffer(e))return hP(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},gP=function(e,r){if(!Buffer.isBuffer(e))return pP(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},vP=function(e,r){if(!Buffer.isBuffer(e))return xP(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},wP=function(e,r){if(!Buffer.isBuffer(e))return yP(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},Ay=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):bP(e,r)},b4=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var G0=function(t,e){return t[e]},yA=function(t,e){return t[e+1]*256+t[e]},Kle=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},Yo=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},nh=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},Wle=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Lg(t,e){var r="",n,a,s=[],i,o,l,A;switch(e){case"dbcs":if(A=this.l,Kr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(yA(this,A)),A+=2;t*=2;break;case"utf8":r=zx(this,this.l,this.l+t);break;case"utf16le":t*=2,r=w4(this,this.l,this.l+t);break;case"wstr":return Lg.call(this,t,"dbcs");case"lpstr-ansi":r=fP(this,this.l),t=4+Yo(this,this.l);break;case"lpstr-cp":r=mP(this,this.l),t=4+Yo(this,this.l);break;case"lpwstr":r=gP(this,this.l),t=4+2*Yo(this,this.l);break;case"lpp4":t=4+Yo(this,this.l),r=vP(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Yo(this,this.l),r=wP(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(i=G0(this,this.l+t++))!==0;)s.push(mv(i));r=s.join("");break;case"_wstr":for(t=0,r="";(i=yA(this,this.l+t))!==0;)s.push(mv(i)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",A=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(A)!==-1)return i=G0(this,A),this.l=A+1,o=Lg.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(mv(yA(this,A))),A+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",A=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(A)!==-1)return i=G0(this,A),this.l=A+1,o=Lg.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(mv(G0(this,A))),A+=1}r=s.join("");break;default:switch(t){case 1:return n=G0(this,this.l),this.l++,n;case 2:return n=(e==="i"?Kle:yA)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(n=(t>0?nh:Wle)(this,this.l),this.l+=4,n):(a=Yo(this,this.l),this.l+=4,a);case 8:case-8:if(e==="f")return t==8?a=Ay(this,this.l):a=Ay([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;t=8;case 16:r=AP(this,this.l,t);break}}return this.l+=t,r}var $le=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},Yle=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},Xle=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function Jle(t,e,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=e.length;++a)Xle(this,e.charCodeAt(a),this.l+2*a);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=e.length;++a)this[this.l+a]=e.charCodeAt(a)&255;n=e.length}else if(r==="hex"){for(;a<t;++a)this[this.l++]=parseInt(e.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(a=0;a<Math.min(e.length,t);++a){var i=e.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,$le(this,e,this.l);break;case 8:if(n=8,r==="f"){qle(this,e,this.l);break}case 16:break;case-4:n=4,Yle(this,e,this.l);break}return this.l+=n,this}function CP(t,e){var r=AP(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function oi(t,e){t.l=e,t.read_shift=Lg,t.chk=CP,t.write_shift=Jle}function Vi(t,e){t.l+=e}function lt(t){var e=pf(t);return oi(e,0),e}function VA(t,e,r){if(t){var n,a,s;oi(t,t.l||0);for(var i=t.length,o=0,l=0;t.l<i;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var A=px[o]||px[65535];for(n=t.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=t.read_shift(1))&127)<<7*a;l=t.l+s;var d=A.f&&A.f(t,s,r);if(t.l=l,e(d,A,o))return}}}function Eo(){var t=[],e=Kr?256:2048,r=function(A){var d=lt(A);return oi(d,0),d},n=r(e),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(A){return n&&A<n.length-n.l?n:(a(),n=r(Math.max(A+1,e)))},i=function(){return a(),Ws(t)},o=function(A){a(),n=A,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:o,end:i,_bufs:t}}function Et(t,e,r,n){var a=+e,s;if(!isNaN(a)){n||(n=px[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=t.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&b4(r)&&t.push(r)}}function Ug(t,e,r){var n=fa(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function KF(t,e,r){var n=fa(t);return n.s=Ug(n.s,e.s,r),n.e=Ug(n.e,e.s,r),n}function Mg(t,e){if(t.cRel&&t.c<0)for(t=fa(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=fa(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=br(t);return!t.cRel&&t.cRel!=null&&(r=tce(r)),!t.rRel&&t.rRel!=null&&(r=Zle(r)),r}function JC(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Ta(t.s.c)+":"+(t.e.cRel?"":"$")+Ta(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+is(t.s.r)+":"+(t.e.rRel?"":"$")+is(t.e.r):Mg(t.s,e.biff)+":"+Mg(t.e,e.biff)}function C4(t){return parseInt(ece(t),10)-1}function is(t){return""+(t+1)}function Zle(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function ece(t){return t.replace(/\$(\d+)$/,"$1")}function E4(t){for(var e=rce(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Ta(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function tce(t){return t.replace(/^([A-Z])/,"$$$1")}function rce(t){return t.replace(/^\$([A-Z])/,"$1")}function nce(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ba(t){for(var e=0,r=0,n=0;n<t.length;++n){var a=t.charCodeAt(n);a>=48&&a<=57?e=10*e+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:e-1}}function br(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function To(t){var e=t.indexOf(":");return e==-1?{s:Ba(t),e:Ba(t)}:{s:Ba(t.slice(0,e)),e:Ba(t.slice(e+1))}}function Dr(t,e){return typeof e>"u"||typeof e=="number"?Dr(t.s,t.e):(typeof t!="string"&&(t=br(t)),typeof e!="string"&&(e=br(e)),t==e?t:t+":"+e)}function bn(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=t.length;for(r=0;n<s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.s.c=--r,r=0;n<s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(e.s.r=--r,n===s||a!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.e.c=--r,r=0;n!=s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return e.e.r=--r,e}function WF(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=ql(t.z,r?Ls(e):e)}catch{}try{return t.w=ql((t.XF||{}).numFmtId||(r?14:0),r?Ls(e):e)}catch{return""+e}}function RA(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?zA[t.v]||t.v:e==null?WF(t,t.v):WF(t,e))}function _f(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function EP(t,e,r){var n=r||{},a=t?Array.isArray(t):n.dense,s=t||(a?[]:{}),i=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?Ba(n.origin):n.origin;i=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var A={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=bn(s["!ref"]);A.s.c=d.s.c,A.s.r=d.s.r,A.e.c=Math.max(A.e.c,d.e.c),A.e.r=Math.max(A.e.r,d.e.r),i==-1&&(A.e.r=i=d.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=e[h].length;++m)if(!(typeof e[h][m]>"u")){var g={v:e[h][m]},b=i+h,w=o+m;if(A.s.r>b&&(A.s.r=b),A.s.c>w&&(A.s.c=w),A.e.r<b&&(A.e.r=b),A.e.c<w&&(A.e.c=w),e[h][m]&&typeof e[h][m]=="object"&&!Array.isArray(e[h][m])&&!(e[h][m]instanceof Date))g=e[h][m];else if(Array.isArray(g.v)&&(g.f=e[h][m][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(n.nullError)g.t="e",g.v=0;else if(n.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=n.dateNF||xr[14],n.cellDates?(g.t="d",g.w=ql(g.z,Ls(g.v))):(g.t="n",g.v=Ls(g.v),g.w=ql(g.z,g.v))):g.t="s";if(a)s[b]||(s[b]=[]),s[b][w]&&s[b][w].z&&(g.z=s[b][w].z),s[b][w]=g;else{var _=br({c:w,r:b});s[_]&&s[_].z&&(g.z=s[_].z),s[_]=g}}}return A.s.c<1e7&&(s["!ref"]=Dr(A)),s}function ep(t,e){return EP(null,t,e)}function ace(t){return t.read_shift(4,"i")}function Nc(t,e){return e||(e=lt(4)),e.write_shift(4,t),e}function Qi(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function $s(t,e){var r=!1;return e==null&&(r=!0,e=lt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function sce(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function ice(t,e){return e||(e=lt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function _4(t,e){var r=t.l,n=t.read_shift(1),a=Qi(t),s=[],i={t:a,h:a};if((n&1)!==0){for(var o=t.read_shift(4),l=0;l!=o;++l)s.push(sce(t));i.r=s}else i.r=[{ich:0,ifnt:0}];return t.l=r+e,i}function oce(t,e){var r=!1;return e==null&&(r=!0,e=lt(15+4*t.t.length)),e.write_shift(1,0),$s(t.t,e),r?e.slice(0,e.l):e}var lce=_4;function cce(t,e){var r=!1;return e==null&&(r=!0,e=lt(23+4*t.t.length)),e.write_shift(1,1),$s(t.t,e),e.write_shift(4,1),ice({},e),r?e.slice(0,e.l):e}function Kl(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function Qh(t,e){return e==null&&(e=lt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Hh(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Vh(t,e){return e==null&&(e=lt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var uce=Qi,_P=$s;function S4(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function dy(t,e){var r=!1;return e==null&&(r=!0,e=lt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var Ace=Qi,Z_=S4,T4=dy;function B4(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var a=n===0?Ay([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):nh(e,0)>>2;return r?a/100:a}function SP(t,e){e==null&&(e=lt(4));var r=0,n=0,a=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?a:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function TP(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function dce(t,e){return e||(e=lt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var zh=TP,tp=dce;function ji(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Bh(t,e){return(e||lt(8)).write_shift(8,t,"f")}function fce(t){var e={},r=t.read_shift(1),n=r>>>1,a=t.read_shift(1),s=t.read_shift(2,"i"),i=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=a;var A=hh[a];A&&(e.rgb=dx(A));break;case 2:e.rgb=dx([i,o,l]);break;case 3:e.theme=a;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function fy(t,e){if(e||(e=lt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function hce(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function mce(t,e){e||(e=lt(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function BP(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function pce(t){return BP(t,1)}function gce(t){return BP(t,2)}var N4=2,xo=3,gv=11,$F=12,hy=19,xv=64,xce=65,vce=71,yce=4108,wce=4126,qs=80,NP=81,bce=[qs,NP],e5={1:{n:"CodePage",t:N4},2:{n:"Category",t:qs},3:{n:"PresentationFormat",t:qs},4:{n:"ByteCount",t:xo},5:{n:"LineCount",t:xo},6:{n:"ParagraphCount",t:xo},7:{n:"SlideCount",t:xo},8:{n:"NoteCount",t:xo},9:{n:"HiddenCount",t:xo},10:{n:"MultimediaClipCount",t:xo},11:{n:"ScaleCrop",t:gv},12:{n:"HeadingPairs",t:yce},13:{n:"TitlesOfParts",t:wce},14:{n:"Manager",t:qs},15:{n:"Company",t:qs},16:{n:"LinksUpToDate",t:gv},17:{n:"CharacterCount",t:xo},19:{n:"SharedDoc",t:gv},22:{n:"HyperlinksChanged",t:gv},23:{n:"AppVersion",t:xo,p:"version"},24:{n:"DigSig",t:xce},26:{n:"ContentType",t:qs},27:{n:"ContentStatus",t:qs},28:{n:"Language",t:qs},29:{n:"Version",t:qs},255:{},2147483648:{n:"Locale",t:hy},2147483651:{n:"Behavior",t:hy},1919054434:{}},t5={1:{n:"CodePage",t:N4},2:{n:"Title",t:qs},3:{n:"Subject",t:qs},4:{n:"Author",t:qs},5:{n:"Keywords",t:qs},6:{n:"Comments",t:qs},7:{n:"Template",t:qs},8:{n:"LastAuthor",t:qs},9:{n:"RevNumber",t:qs},10:{n:"EditTime",t:xv},11:{n:"LastPrinted",t:xv},12:{n:"CreatedDate",t:xv},13:{n:"ModifiedDate",t:xv},14:{n:"PageCount",t:xo},15:{n:"WordCount",t:xo},16:{n:"CharCount",t:xo},17:{n:"Thumbnail",t:vce},18:{n:"Application",t:qs},19:{n:"DocSecurity",t:xo},255:{},2147483648:{n:"Locale",t:hy},2147483651:{n:"Behavior",t:hy},1919054434:{}},YF={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Cce=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Ece(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var _ce=Ece([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),hh=fa(_ce),zA={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},kP={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},r5={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},vv={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function k4(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Sce(t){var e=k4();if(!t||!t.match)return e;var r={};if((t.match(Gi)||[]).forEach(function(n){var a=Sr(n);switch(a[0].replace(Ule,"<")){case"<?xml":break;case"<Types":e.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":e[r5[a.ContentType]]!==void 0&&e[r5[a.ContentType]].push(a.PartName);break}}),e.xmlns!==Fs.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function IP(t,e){var r=Sle(r5),n=[],a;n[n.length]=os,n[n.length]=Rt("Types",null,{xmlns:Fs.CT,"xmlns:xsd":Fs.xsd,"xmlns:xsi":Fs.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Rt("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){t[l]&&t[l].length>0&&(a=t[l][0],n[n.length]=Rt("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:vv[l][e.bookType]||vv[l].xlsx}))},i=function(l){(t[l]||[]).forEach(function(A){n[n.length]=Rt("Override",null,{PartName:(A[0]=="/"?"":"/")+A,ContentType:vv[l][e.bookType]||vv[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(A){n[n.length]=Rt("Override",null,{PartName:(A[0]=="/"?"":"/")+A,ContentType:r[l][0]})})};return s("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Zr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Ax(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Pg(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(Gi)||[]).forEach(function(a){var s=Sr(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:hg(s.Target,e);r[o]=i,n[s.Id]=i}}),r["!id"]=n,r}function fm(t){var e=[os,Rt("Relationships",null,{xmlns:Fs.RELS})];return za(t["!id"]).forEach(function(r){e[e.length]=Rt("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Hn(t,e,r,n,a,s){if(a||(a={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,a.Id="rId"+e,a.Type=n,a.Target=r,[Zr.HLINK,Zr.XPATH,Zr.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),t["!id"][a.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][a.Id]=a,t[("/"+a.Target).replace("//","/")]=a,e}var Tce="application/vnd.oasis.opendocument.spreadsheet";function Bce(t,e){for(var r=y4(t),n,a;n=ux.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=Sr(n[0],!1),a.path=="/"&&a.type!==Tce)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function Nce(t){var e=[os];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function XF(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function kce(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function Ice(t){var e=[os];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(XF(t[r][0],t[r][1])),e.push(kce("",t[r][0]));return e.push(XF("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function FP(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+iy.version+"</meta:generator></office:meta></office:document-meta>"}var Vl=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Fce=function(){for(var t=new Array(Vl.length),e=0;e<Vl.length;++e){var r=Vl[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function RP(t){var e={};t=Zn(t);for(var r=0;r<Vl.length;++r){var n=Vl[r],a=t.match(Fce[r]);a!=null&&a.length>0&&(e[n[1]]=yn(a[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=da(e[n[1]]))}return e}function ZC(t,e,r,n,a){a[t]!=null||e==null||e===""||(a[t]=e,e=zn(e),n[n.length]=r?Rt(t,e,r):ci(t,e))}function DP(t,e){var r=e||{},n=[os,Rt("cp:coreProperties",null,{"xmlns:cp":Fs.CORE_PROPS,"xmlns:dc":Fs.dc,"xmlns:dcterms":Fs.dcterms,"xmlns:dcmitype":Fs.dcmitype,"xmlns:xsi":Fs.xsi})],a={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&ZC("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:J_(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),t.ModifiedDate!=null&&ZC("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:J_(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Vl.length;++s){var i=Vl[s],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:t?t[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&ZC(i[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var mh=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],LP=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function UP(t,e,r,n){var a=[];if(typeof t=="string")a=QF(t,n);else for(var s=0;s<t.length;++s)a=a.concat(t[s].map(function(d){return{v:d}}));var i=typeof e=="string"?QF(e,n).map(function(d){return d.v}):e,o=0,l=0;if(i.length>0)for(var A=0;A!==a.length;A+=2){switch(l=+a[A+1].v,a[A].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=l,r.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=i.slice(o,o+l);break}o+=l}}function Rce(t,e,r){var n={};return e||(e={}),t=Zn(t),mh.forEach(function(a){var s=(t.match(lx(a[0]))||[])[1];switch(a[2]){case"string":s&&(e[a[1]]=yn(s));break;case"bool":e[a[1]]=s==="true";break;case"raw":var i=t.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(n[a[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&UP(n.HeadingPairs,n.TitlesOfParts,e,r),e}function MP(t){var e=[],r=Rt;return t||(t={}),t.Application="SheetJS",e[e.length]=os,e[e.length]=Rt("Properties",null,{xmlns:Fs.EXT_PROPS,"xmlns:vt":Fs.vt}),mh.forEach(function(n){if(t[n[1]]!==void 0){var a;switch(n[2]){case"string":a=zn(String(t[n[1]]));break;case"bool":a=t[n[1]]?"true":"false";break}a!==void 0&&(e[e.length]=r(n[0],a))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+zn(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Dce=/<[^>]+>[^<]*/g;function Lce(t,e){var r={},n="",a=t.match(Dce);if(a)for(var s=0;s!=a.length;++s){var i=a[s],o=Sr(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=yn(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var l=i.split(">"),A=l[0].slice(4),d=l[1];switch(A){case"lpstr":case"bstr":case"lpwstr":r[n]=yn(d);break;case"bool":r[n]=ua(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=da(d);break;case"cy":case"error":r[n]=yn(d);break;default:if(A.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",i,A,l)}}else if(i.slice(0,2)!=="</"){if(e.WTF)throw new Error(i)}}}return r}function PP(t){var e=[os,Rt("Properties",null,{xmlns:Fs.CUST_PROPS,"xmlns:vt":Fs.vt})];if(!t)return e.join("");var r=1;return za(t).forEach(function(a){++r,e[e.length]=Rt("property",zle(t[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:zn(a)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var n5={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},eE;function Uce(t,e,r){eE||(eE=Iw(n5)),e=eE[e]||e,t[e]=r}function Mce(t,e){var r=[];return za(n5).map(function(n){for(var a=0;a<Vl.length;++a)if(Vl[a][1]==n)return Vl[a];for(a=0;a<mh.length;++a)if(mh[a][1]==n)return mh[a];throw n}).forEach(function(n){if(t[n[1]]!=null){var a=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(ci(n5[n[1]]||n[1],a))}}),Rt("DocumentProperties",r.join(""),{xmlns:$o.o})}function Pce(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return t&&za(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var i=0;i<Vl.length;++i)if(s==Vl[i][1])return;for(i=0;i<mh.length;++i)if(s==mh[i][1])return;for(i=0;i<r.length;++i)if(s==r[i])return;var o=t[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),a.push(Rt(MF(s),o,{"dt:dt":l}))}}),e&&za(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var i=e[s],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),a.push(Rt(MF(s),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+$o.o+'">'+a.join("")+"</"+n+">"}function I4(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function jce(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var i=lt(8);return i.write_shift(4,n),i.write_shift(4,a),i}function jP(t,e,r){var n=t.l,a=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return a}function OP(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function QP(t,e,r){return e===31?OP(t):jP(t,e,r)}function a5(t,e,r){return QP(t,e,r===!1?0:4)}function Oce(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return QP(t,e,0)}function Qce(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var a=t.l;r[n]=t.read_shift(0,"lpwstr").replace(Zi,""),t.l-a&2&&(t.l+=2)}return r}function Hce(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(Zi,"");return r}function Vce(t){var e=t.l,r=my(t,NP);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=my(t,xo);return[r,n]}function zce(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(Vce(t));return r}function JF(t,e){for(var r=t.read_shift(4),n={},a=0;a!=r;++a){var s=t.read_shift(4),i=t.read_shift(4);n[s]=t.read_shift(i,e===1200?"utf16le":"utf8").replace(Zi,"").replace(fg,"!"),e===1200&&i%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function HP(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function Gce(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function my(t,e,r){var n=t.read_shift(2),a,s=r||{};if(t.l+=2,e!==$F&&n!==e&&bce.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===$F?n:e){case 2:return a=t.read_shift(2,"i"),s.raw||(t.l+=2),a;case 3:return a=t.read_shift(4,"i"),a;case 11:return t.read_shift(4)!==0;case 19:return a=t.read_shift(4),a;case 30:return jP(t,n,4).replace(Zi,"");case 31:return OP(t);case 64:return I4(t);case 65:return HP(t);case 71:return Gce(t);case 80:return a5(t,n,!s.raw).replace(Zi,"");case 81:return Oce(t,n).replace(Zi,"");case 4108:return zce(t);case 4126:case 4127:return n==4127?Qce(t):Hce(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function ZF(t,e){var r=lt(4),n=lt(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=lt(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=jce(e);break;case 31:case 80:for(n=lt(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Ws([r,n])}function e6(t,e){var r=t.l,n=t.read_shift(4),a=t.read_shift(4),s=[],i=0,o=0,l=-1,A={};for(i=0;i!=a;++i){var d=t.read_shift(4),h=t.read_shift(4);s[i]=[d,h+r]}s.sort(function(k,I){return k[1]-I[1]});var m={};for(i=0;i!=a;++i){if(t.l!==s[i][1]){var g=!0;if(i>0&&e)switch(e[s[i-1][0]].t){case 2:t.l+2===s[i][1]&&(t.l+=2,g=!1);break;case 80:t.l<=s[i][1]&&(t.l=s[i][1],g=!1);break;case 4108:t.l<=s[i][1]&&(t.l=s[i][1],g=!1);break}if((!e||i==0)&&t.l<=s[i][1]&&(g=!1,t.l=s[i][1]),g)throw new Error("Read Error: Expected address "+s[i][1]+" at "+t.l+" :"+i)}if(e){var b=e[s[i][0]];if(m[b.n]=my(t,b.t,{raw:!0}),b.p==="version"&&(m[b.n]=String(m[b.n]>>16)+"."+("0000"+String(m[b.n]&65535)).slice(-4)),b.n=="CodePage")switch(m[b.n]){case 0:m[b.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Sc(o=m[b.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[b.n])}}else if(s[i][0]===1){if(o=m.CodePage=my(t,N4),Sc(o),l!==-1){var w=t.l;t.l=s[l][1],A=JF(t,o),t.l=w}}else if(s[i][0]===0){if(o===0){l=i,t.l=s[i+1][1];continue}A=JF(t,o)}else{var _=A[s[i][0]],N;switch(t[t.l]){case 65:t.l+=4,N=HP(t);break;case 30:t.l+=4,N=a5(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,N=a5(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,N=t.read_shift(4,"i");break;case 19:t.l+=4,N=t.read_shift(4);break;case 5:t.l+=4,N=t.read_shift(8,"f");break;case 11:t.l+=4,N=Za(t,4);break;case 64:t.l+=4,N=da(I4(t));break;default:throw new Error("unparsed value: "+t[t.l])}m[_]=N}}return t.l=r+n,m}var VP=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function qce(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function t6(t,e,r){var n=lt(8),a=[],s=[],i=8,o=0,l=lt(8),A=lt(8);if(l.write_shift(4,2),l.write_shift(4,1200),A.write_shift(4,1),s.push(l),a.push(A),i+=8+l.length,!e){A=lt(8),A.write_shift(4,0),a.unshift(A);var d=[lt(4)];for(d[0].write_shift(4,t.length),o=0;o<t.length;++o){var h=t[o][0];for(l=lt(8+2*(h.length+1)+(h.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,h.length+1),l.write_shift(0,h,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=Ws(d),s.unshift(l),i+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(VP.indexOf(t[o][0])>-1||LP.indexOf(t[o][0])>-1)&&t[o][1]!=null){var m=t[o][1],g=0;if(e){g=+e[t[o][0]];var b=r[g];if(b.p=="version"&&typeof m=="string"){var w=m.split(".");m=(+w[0]<<16)+(+w[1]||0)}l=ZF(b.t,m)}else{var _=qce(m);_==-1&&(_=31,m=String(m)),l=ZF(_,m)}s.push(l),A=lt(8),A.write_shift(4,e?g:2+o),a.push(A),i+=8+l.length}var N=8*(s.length+1);for(o=0;o<s.length;++o)a[o].write_shift(4,N),N+=s[o].length;return n.write_shift(4,i),n.write_shift(4,s.length),Ws([n].concat(a).concat(s))}function r6(t,e,r){var n=t.content;if(!n)return{};oi(n,0);var a,s,i,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var A=n.read_shift(4),d=n.read_shift(16);if(d!==or.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),o=n.read_shift(4),a===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);a===2&&(i=n.read_shift(16),l=n.read_shift(4));var h=e6(n,e),m={SystemIdentifier:A};for(var g in h)m[g]=h[g];if(m.FMTID=s,a===1)return m;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var b;try{b=e6(n,null)}catch{}for(g in b)m[g]=b[g];return m.FMTID=[s,i],m}function n6(t,e,r,n,a,s){var i=lt(a?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,or.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,e,"hex"),i.write_shift(4,a?68:48);var l=t6(t,r,n);if(o.push(l),a){var A=t6(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+l.length),o.push(A)}return Ws(o)}function Bd(t,e){return t.read_shift(e),null}function Kce(t,e){e||(e=lt(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function Wce(t,e,r){for(var n=[],a=t.l+e;t.l<a;)n.push(r(t,a-t.l));if(a!==t.l)throw new Error("Slurp error");return n}function Za(t,e){return t.read_shift(e)===1}function Ji(t,e){return e||(e=lt(2)),e.write_shift(2,+!!t),e}function vs(t){return t.read_shift(2,"u")}function Dl(t,e){return e||(e=lt(2)),e.write_shift(2,t),e}function zP(t,e){return Wce(t,e,vs)}function $ce(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function GP(t,e,r){return r||(r=lt(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function Gx(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?t.read_shift(n,a):"";return i}function Yce(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,a=r&8,s=1+(r&1),i=0,o,l={};a&&(i=t.read_shift(2)),n&&(o=t.read_shift(4));var A=s==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,A);return a&&(t.l+=4*i),n&&(t.l+=o),l.t=d,a||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function Xce(t){var e=t.t||"",r=lt(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=lt(2*e.length);n.write_shift(2*e.length,e,"utf16le");var a=[r,n];return Ws(a)}function Nh(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var a=t.read_shift(1);return a===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function qx(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):Nh(t,n,r)}function Gh(t,e,r){if(r.biff>5)return qx(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function qP(t,e,r){return r||(r=lt(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function Jce(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function Zce(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var a=t.read_shift((n?e-24:e)>>1,"utf16le").replace(Zi,"");return n&&(t.l+=24),a}function eue(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=t.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=t.read_shift(s>>1,"utf16le").replace(Zi,"");return r+i}function tue(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Zce(t);case"0303000000000000c000000000000046":return eue(t);default:throw new Error("Unsupported Moniker "+r)}}function yv(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(Zi,""):"";return r}function a6(t,e){e||(e=lt(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function rue(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=t.read_shift(2);t.l+=2;var s,i,o,l,A="",d,h;a&16&&(s=yv(t,r-t.l)),a&128&&(i=yv(t,r-t.l)),(a&257)===257&&(o=yv(t,r-t.l)),(a&257)===1&&(l=tue(t,r-t.l)),a&8&&(A=yv(t,r-t.l)),a&32&&(d=t.read_shift(16)),a&64&&(h=I4(t)),t.l=r;var m=i||o||l||"";m&&A&&(m+="#"+A),m||(m="#"+A),a&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var g={Target:m};return d&&(g.guid=d),h&&(g.time=h),s&&(g.Tooltip=s),g}function nue(t){var e=lt(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)e.write_shift(4,i[r]);if(s==28)n=n.slice(1),a6(n,e);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));var o=a>-1?n.slice(0,a):n;for(e.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)e.write_shift(2,o.charCodeAt(r));e.write_shift(2,0),s&8&&a6(a>-1?n.slice(a+1):"",e)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)e.write_shift(1,n.charCodeAt(r+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function KP(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),a=t.read_shift(1);return[e,r,n,a]}function WP(t,e){var r=KP(t);return r[3]=0,r}function Du(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function kh(t,e,r,n){return n||(n=lt(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function aue(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function sue(t,e,r){return e===0?"":Gh(t,e,r)}function iue(t,e,r){var n=r.biff>8?4:2,a=t.read_shift(n),s=t.read_shift(n,"i"),i=t.read_shift(n,"i");return[a,s,i]}function $P(t){var e=t.read_shift(2),r=B4(t);return[e,r]}function oue(t,e,r){t.l+=4,e-=4;var n=t.l+e,a=Gx(t,e,r),s=t.read_shift(2);if(n-=t.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return t.l+=s,a}function Dw(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2);return{s:{c:n,r:e},e:{c:a,r}}}function YP(t,e){return e||(e=lt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function XP(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),a=t.read_shift(1);return{s:{c:n,r:e},e:{c:a,r}}}var lue=XP;function JP(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function cue(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function uue(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function ki(t){t.l+=2,t.l+=t.read_shift(2)}var Aue={0:ki,4:ki,5:ki,6:ki,7:uue,8:ki,9:ki,10:ki,11:ki,12:ki,13:cue,14:ki,15:ki,16:ki,17:ki,18:ki,19:ki,20:ki,21:JP};function due(t,e){for(var r=t.l+e,n=[];t.l<r;){var a=t.read_shift(2);t.l-=2;try{n.push(Aue[a](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function wv(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function F4(t,e,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=lt(a);return s.write_shift(2,n),s.write_shift(2,e),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function fue(t,e){return e===0||t.read_shift(2),1200}function hue(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,a=Gh(t,0,r);return t.read_shift(e+n-t.l),a}function mue(t,e){var r=!e||e.biff==8,n=lt(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function pue(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function gue(t,e,r){var n=t.read_shift(4),a=t.read_shift(1)&3,s=t.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=Gx(t,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}function xue(t,e){var r=!e||e.biff>=8?2:1,n=lt(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function vue(t,e){for(var r=t.l+e,n=t.read_shift(4),a=t.read_shift(4),s=[],i=0;i!=a&&t.l<r;++i)s.push(Yce(t));return s.Count=n,s.Unique=a,s}function yue(t,e){var r=lt(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],a=0;a<t.length;++a)n[a]=Xce(t[a]);var s=Ws([r].concat(n));return s.parts=[r.length].concat(n.map(function(i){return i.length})),s}function wue(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function bue(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function Cue(t){var e=aue(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function Eue(t){return t.read_shift(2),t.read_shift(4)}function s6(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var a=t.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function _ue(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),A=t.read_shift(2);return{Pos:[e,r],Dim:[n,a],Flags:s,CurTab:i,FirstTab:o,Selected:l,TabRatio:A}}function Sue(){var t=lt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function Tue(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function Bue(t){var e=lt(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function Nue(){}function kue(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=Gx(t,0,r),n}function Iue(t,e){var r=t.name||"Arial",n=e&&e.biff==5,a=n?15+r.length:16+2*r.length,s=lt(a);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function Fue(t){var e=Du(t);return e.isst=t.read_shift(4),e}function Rue(t,e,r,n){var a=lt(10);return kh(t,e,n,a),a.write_shift(4,r),a}function Due(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,a=Du(t);r.biff==2&&t.l++;var s=qx(t,n-t.l,r);return a.val=s,a}function Lue(t,e,r,n,a){var s=!a||a.biff==8,i=lt(8+ +s+(1+s)*r.length);return kh(t,e,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}function Uue(t,e,r){var n=t.read_shift(2),a=Gh(t,0,r);return[n,a]}function Mue(t,e,r,n){var a=r&&r.biff==5;n||(n=lt(a?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(a?1:2,e.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*e.length,e,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var Pue=Gh;function i6(t,e,r){var n=t.l+e,a=r.biff==8||!r.biff?4:2,s=t.read_shift(a),i=t.read_shift(a),o=t.read_shift(2),l=t.read_shift(2);return t.l=n,{s:{r:s,c:o},e:{r:i,c:l}}}function jue(t,e){var r=e.biff==8||!e.biff?4:2,n=lt(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function Oue(t){var e=t.read_shift(2),r=t.read_shift(2),n=$P(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function Que(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push($P(t));if(t.l!==r)throw new Error("MulRK read error");var i=t.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}function Hue(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var i=t.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}function Vue(t,e,r,n){var a={},s=t.read_shift(4),i=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return a.patternType=Cce[o>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=o&127,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=l&127,a.icvBack=l>>7&127,a.fsxButton=l>>14&1),a}function zue(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=Vue(t,e,n.fStyle,r),n}function o6(t,e,r,n){var a=r&&r.biff==5;n||(n=lt(a?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function Gue(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function que(t){var e=lt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function l6(t,e,r){var n=Du(t);(r.biff==2||e==9)&&++t.l;var a=$ce(t);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function Kue(t,e,r,n,a,s){var i=lt(8);return kh(t,e,n,i),GP(r,s,i),i}function Wue(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Du(t),a=ji(t);return n.val=a,n}function $ue(t,e,r,n){var a=lt(14);return kh(t,e,n,a),Bh(r,a),a}var c6=sue;function Yue(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=Nh(t,s),o=[];n>t.l;)o.push(qx(t));return[s,a,i,o]}function u6(t,e,r){var n=t.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=oue(t,e-2,r)),s.body=a||t.read_shift(e-2),typeof a=="string"&&(s.Name=a),s}var Xue=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function A6(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(1),i=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),l=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var A=Nh(t,i,r);a&32&&(A=Xue[A.charCodeAt(0)]);var d=n-t.l;r&&r.biff==2&&--d;var h=n==t.l||o===0||!(d>0)?[]:d0e(t,d,r,o);return{chKey:s,Name:A,itab:l,rgce:h}}function ZP(t,e,r){if(r.biff<8)return Jue(t,e,r);for(var n=[],a=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(iue(t,r.biff>8?12:6,r));if(t.l!=a)throw new Error("Bad ExternSheet: "+t.l+" != "+a);return n}function Jue(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=Gx(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function Zue(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),a=t.read_shift(2),s=Nh(t,n,r),i=Nh(t,a,r);return[s,i]}function eAe(t,e,r){var n=XP(t);t.l++;var a=t.read_shift(1);return e-=8,[f0e(t,e,r),a,n]}function d6(t,e,r){var n=lue(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,u0e(t,e,r)]}function tAe(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function rAe(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),o=Gh(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:a},o,i,s]}}function nAe(t,e,r){return rAe(t,e,r)}function aAe(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(Dw(t));return r}function sAe(t){var e=lt(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)YP(t[r],e);return e}function iAe(t,e,r){if(r&&r.biff<8)return lAe(t,e,r);var n=JP(t),a=due(t,e-22,n[1]);return{cmo:n,ft:a}}var oAe={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var a=t.read_shift(1);return t.l+=a,t.l=r,{fmt:n}}};function lAe(t,e,r){t.l+=4;var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var i=[];return i.push((oAe[n]||Vi)(t,e,r)),{cmo:[a,n,s],ft:i}}function cAe(t,e,r){var n=t.l,a="";try{t.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?t.l+=6:i=Jce(t,6,r);var o=t.read_shift(2);t.read_shift(2),vs(t,2);var l=t.read_shift(2);t.l+=l;for(var A=1;A<t.lens.length-1;++A){if(t.l-n!=t.lens[A])throw new Error("TxO: bad continue record");var d=t[t.l],h=Nh(t,t.lens[A+1]-t.lens[A]-1);if(a+=h,a.length>=(d?o:2*o))break}if(a.length!==o&&a.length!==o*2)throw new Error("cchText: "+o+" != "+a.length);return t.l=n+e,{t:a}}catch{return t.l=n+e,{t:a}}}function uAe(t,e){var r=Dw(t);t.l+=16;var n=rue(t,e-24);return[r,n]}function AAe(t){var e=lt(24),r=Ba(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)e.write_shift(1,parseInt(n[a],16));return Ws([e,nue(t[1])])}function dAe(t,e){t.read_shift(2);var r=Dw(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(Zi,""),[r,n]}function fAe(t){var e=t[1].Tooltip,r=lt(10+2*(e.length+1));r.write_shift(2,2048);var n=Ba(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<e.length;++a)r.write_shift(2,e.charCodeAt(a));return r.write_shift(2,0),r}function hAe(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=YF[r]||r,r=t.read_shift(2),e[1]=YF[r]||r,e}function mAe(t){return t||(t=lt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function pAe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(WP(t));return r}function gAe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(WP(t));return r}function xAe(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function ej(t,e,r){if(!r.cellStyles)return Vi(t,e);var n=r&&r.biff>=12?4:2,a=t.read_shift(n),s=t.read_shift(n),i=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var A={s:a,e:s,w:i,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(A.level=l>>8&7),A}function vAe(t,e){var r=lt(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function yAe(t,e){var r={};return e<32||(t.l+=16,r.header=ji(t),r.footer=ji(t),t.l+=2),r}function wAe(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var a=t.read_shift(1);return t.l+=3,a&16&&(n.area=!0),n}function bAe(t){for(var e=lt(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var CAe=Du,EAe=zP,_Ae=qx;function SAe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,a}function TAe(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Du(t);++t.l;var a=Gh(t,e-7,r);return n.t="str",n.val=a,n}function BAe(t){var e=Du(t);++t.l;var r=ji(t);return e.t="n",e.val=r,e}function NAe(t,e,r){var n=lt(15);return Yx(n,t,e),n.write_shift(8,r,"f"),n}function kAe(t){var e=Du(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function IAe(t,e,r){var n=lt(9);return Yx(n,t,e),n.write_shift(2,r),n}function FAe(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function RAe(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function DAe(t,e,r){var n=t.l+e,a=Du(t),s=t.read_shift(2),i=Nh(t,s,r);return t.l=n,a.t="str",a.val=i,a}var LAe=[2,3,48,49,131,139,140,245],s5=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=Iw({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var A=[],d=pf(1);switch(l.type){case"base64":d=Xo(nl(o));break;case"binary":d=Xo(o);break;case"buffer":case"array":d=o;break}oi(d,0);var h=d.read_shift(1),m=!!(h&136),g=!1,b=!1;switch(h){case 2:break;case 3:break;case 48:g=!0,m=!0;break;case 49:g=!0,m=!0;break;case 131:break;case 139:break;case 140:b=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var w=0,_=521;h==2&&(w=d.read_shift(2)),d.l+=3,h!=2&&(w=d.read_shift(4)),w>1048576&&(w=1e6),h!=2&&(_=d.read_shift(2));var N=d.read_shift(2),k=l.codepage||1252;h!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(k=t[d[d.l]]),d.l+=1,d.l+=2),b&&(d.l+=36);for(var I=[],P={},M=Math.min(d.length,h==2?521:_-10-(g?264:0)),D=b?32:11;d.l<M&&d[d.l]!=13;)switch(P={},P.name=sx.utils.decode(k,d.slice(d.l,d.l+D)).replace(/[\u0000\r\n].*$/g,""),d.l+=D,P.type=String.fromCharCode(d.read_shift(1)),h!=2&&!b&&(P.offset=d.read_shift(4)),P.len=d.read_shift(1),h==2&&(P.offset=d.read_shift(2)),P.dec=d.read_shift(1),P.name.length&&I.push(P),h!=2&&(d.l+=b?13:14),P.type){case"B":(!g||P.len!=8)&&l.WTF&&console.log("Skipping "+P.name+":"+P.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+P.name+":"+P.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+P.type)}if(d[d.l]!==13&&(d.l=_-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=_;var C=0,B=0;for(A[0]=[],B=0;B!=I.length;++B)A[0][B]=I[B].name;for(;w-- >0;){if(d[d.l]===42){d.l+=N;continue}for(++d.l,A[++C]=[],B=0,B=0;B!=I.length;++B){var T=d.slice(d.l,d.l+I[B].len);d.l+=I[B].len,oi(T,0);var O=sx.utils.decode(k,T);switch(I[B].type){case"C":O.trim().length&&(A[C][B]=O.replace(/\s+$/,""));break;case"D":O.length===8?A[C][B]=new Date(+O.slice(0,4),+O.slice(4,6)-1,+O.slice(6,8)):A[C][B]=O;break;case"F":A[C][B]=parseFloat(O.trim());break;case"+":case"I":A[C][B]=b?T.read_shift(-4,"i")^2147483648:T.read_shift(4,"i");break;case"L":switch(O.trim().toUpperCase()){case"Y":case"T":A[C][B]=!0;break;case"N":case"F":A[C][B]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+O+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));A[C][B]="##MEMO##"+(b?parseInt(O.trim(),10):T.read_shift(4));break;case"N":O=O.replace(/\u0000/g,"").trim(),O&&O!="."&&(A[C][B]=+O||0);break;case"@":A[C][B]=new Date(T.read_shift(-8,"f")-621356832e5);break;case"T":A[C][B]=new Date((T.read_shift(4)-2440588)*864e5+T.read_shift(4));break;case"Y":A[C][B]=T.read_shift(4,"i")/1e4+T.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":A[C][B]=-T.read_shift(-8,"f");break;case"B":if(g&&I[B].len==8){A[C][B]=T.read_shift(8,"f");break}case"G":case"P":T.l+=I[B].len;break;case"0":if(I[B].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+I[B].type)}}}if(h!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(A=A.slice(0,l.sheetRows)),l.DBF=I,A}function n(o,l){var A=l||{};A.dateNF||(A.dateNF="yyyymmdd");var d=ep(r(o,A),A);return d["!cols"]=A.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete A.DBF,d}function a(o,l){try{return _f(n(o,l),l)}catch(A){if(l&&l.WTF)throw A}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,l){var A=l||{};if(+A.codepage>=0&&Sc(+A.codepage),A.type=="string")throw new Error("Cannot write DBF to JS string");var d=Eo(),h=xy(o,{header:1,raw:!0,cellDates:!0}),m=h[0],g=h.slice(1),b=o["!cols"]||[],w=0,_=0,N=0,k=1;for(w=0;w<m.length;++w){if(((b[w]||{}).DBF||{}).name){m[w]=b[w].DBF.name,++N;continue}if(m[w]!=null){if(++N,typeof m[w]=="number"&&(m[w]=m[w].toString(10)),typeof m[w]!="string")throw new Error("DBF Invalid column name "+m[w]+" |"+typeof m[w]+"|");if(m.indexOf(m[w])!==w){for(_=0;_<1024;++_)if(m.indexOf(m[w]+"_"+_)==-1){m[w]+="_"+_;break}}}}var I=bn(o["!ref"]),P=[],M=[],D=[];for(w=0;w<=I.e.c-I.s.c;++w){var C="",B="",T=0,O=[];for(_=0;_<g.length;++_)g[_][w]!=null&&O.push(g[_][w]);if(O.length==0||m[w]==null){P[w]="?";continue}for(_=0;_<O.length;++_){switch(typeof O[_]){case"number":B="B";break;case"string":B="C";break;case"boolean":B="L";break;case"object":B=O[_]instanceof Date?"D":"C";break;default:B="C"}T=Math.max(T,String(O[_]).length),C=C&&C!=B?"C":B}T>250&&(T=250),B=((b[w]||{}).DBF||{}).type,B=="C"&&b[w].DBF.len>T&&(T=b[w].DBF.len),C=="B"&&B=="N"&&(C="N",D[w]=b[w].DBF.dec,T=b[w].DBF.len),M[w]=C=="C"||B=="N"?T:s[C]||0,k+=M[w],P[w]=C}var F=d.next(32);for(F.write_shift(4,318902576),F.write_shift(4,g.length),F.write_shift(2,296+32*N),F.write_shift(2,k),w=0;w<4;++w)F.write_shift(4,0);for(F.write_shift(4,0|(+e[VM]||3)<<8),w=0,_=0;w<m.length;++w)if(m[w]!=null){var L=d.next(32),Q=(m[w].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);L.write_shift(1,Q,"sbcs"),L.write_shift(1,P[w]=="?"?"C":P[w],"sbcs"),L.write_shift(4,_),L.write_shift(1,M[w]||s[P[w]]||0),L.write_shift(1,D[w]||0),L.write_shift(1,2),L.write_shift(4,0),L.write_shift(1,0),L.write_shift(4,0),L.write_shift(4,0),_+=M[w]||s[P[w]]||0}var q=d.next(264);for(q.write_shift(4,13),w=0;w<65;++w)q.write_shift(4,0);for(w=0;w<g.length;++w){var ie=d.next(k);for(ie.write_shift(1,0),_=0;_<m.length;++_)if(m[_]!=null)switch(P[_]){case"L":ie.write_shift(1,g[w][_]==null?63:g[w][_]?84:70);break;case"B":ie.write_shift(8,g[w][_]||0,"f");break;case"N":var Z="0";for(typeof g[w][_]=="number"&&(Z=g[w][_].toFixed(D[_]||0)),N=0;N<M[_]-Z.length;++N)ie.write_shift(1,32);ie.write_shift(1,Z,"sbcs");break;case"D":g[w][_]?(ie.write_shift(4,("0000"+g[w][_].getFullYear()).slice(-4),"sbcs"),ie.write_shift(2,("00"+(g[w][_].getMonth()+1)).slice(-2),"sbcs"),ie.write_shift(2,("00"+g[w][_].getDate()).slice(-2),"sbcs")):ie.write_shift(8,"00000000","sbcs");break;case"C":var ee=String(g[w][_]!=null?g[w][_]:"").slice(0,M[_]);for(ie.write_shift(1,ee,"sbcs"),N=0;N<M[_]-ee.length;++N)ie.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:i}}(),tj=function(){var t={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+za(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,g){var b=t[g];return typeof b=="number"?CF(b):b},n=function(m,g,b){var w=g.charCodeAt(0)-32<<4|b.charCodeAt(0)-48;return w==59?m:CF(w)};t["|"]=254;function a(m,g){switch(g.type){case"base64":return s(nl(m),g);case"binary":return s(m,g);case"buffer":return s(Kr&&Buffer.isBuffer(m)?m.toString("binary"):Ef(m),g);case"array":return s(Th(m),g)}throw new Error("Unrecognized type "+g.type)}function s(m,g){var b=m.split(/[\n\r]+/),w=-1,_=-1,N=0,k=0,I=[],P=[],M=null,D={},C=[],B=[],T=[],O=0,F;for(+g.codepage>=0&&Sc(+g.codepage);N!==b.length;++N){O=0;var L=b[N].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),Q=L.replace(/;;/g,"\0").split(";").map(function(te){return te.replace(/\u0000/g,";")}),q=Q[0],ie;if(L.length>0)switch(q){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":Q[1].charAt(0)=="P"&&P.push(L.slice(3).replace(/;;/g,";"));break;case"C":var Z=!1,ee=!1,ne=!1,z=!1,W=-1,ce=-1;for(k=1;k<Q.length;++k)switch(Q[k].charAt(0)){case"A":break;case"X":_=parseInt(Q[k].slice(1))-1,ee=!0;break;case"Y":for(w=parseInt(Q[k].slice(1))-1,ee||(_=0),F=I.length;F<=w;++F)I[F]=[];break;case"K":ie=Q[k].slice(1),ie.charAt(0)==='"'?ie=ie.slice(1,ie.length-1):ie==="TRUE"?ie=!0:ie==="FALSE"?ie=!1:isNaN(Bc(ie))?isNaN(Im(ie).getDate())||(ie=da(ie)):(ie=Bc(ie),M!==null&&Jm(M)&&(ie=Rw(ie))),Z=!0;break;case"E":z=!0;var j=hm(Q[k].slice(1),{r:w,c:_});I[w][_]=[I[w][_],j];break;case"S":ne=!0,I[w][_]=[I[w][_],"S5S"];break;case"G":break;case"R":W=parseInt(Q[k].slice(1))-1;break;case"C":ce=parseInt(Q[k].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+L)}if(Z&&(I[w][_]&&I[w][_].length==2?I[w][_][0]=ie:I[w][_]=ie,M=null),ne){if(z)throw new Error("SYLK shared formula cannot have own formula");var K=W>-1&&I[W][ce];if(!K||!K[1])throw new Error("SYLK shared formula cannot find base");I[w][_][1]=vj(K[1],{r:w-W,c:_-ce})}break;case"F":var X=0;for(k=1;k<Q.length;++k)switch(Q[k].charAt(0)){case"X":_=parseInt(Q[k].slice(1))-1,++X;break;case"Y":for(w=parseInt(Q[k].slice(1))-1,F=I.length;F<=w;++F)I[F]=[];break;case"M":O=parseInt(Q[k].slice(1))/20;break;case"F":break;case"G":break;case"P":M=P[parseInt(Q[k].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(T=Q[k].slice(1).split(" "),F=parseInt(T[0],10);F<=parseInt(T[1],10);++F)O=parseInt(T[2],10),B[F-1]=O===0?{hidden:!0}:{wch:O},gf(B[F-1]);break;case"C":_=parseInt(Q[k].slice(1))-1,B[_]||(B[_]={});break;case"R":w=parseInt(Q[k].slice(1))-1,C[w]||(C[w]={}),O>0?(C[w].hpt=O,C[w].hpx=Rm(O)):O===0&&(C[w].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+L)}X<1&&(M=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+L)}}return C.length>0&&(D["!rows"]=C),B.length>0&&(D["!cols"]=B),g&&g.sheetRows&&(I=I.slice(0,g.sheetRows)),[I,D]}function i(m,g){var b=a(m,g),w=b[0],_=b[1],N=ep(w,g);return za(_).forEach(function(k){N[k]=_[k]}),N}function o(m,g){return _f(i(m,g),g)}function l(m,g,b,w){var _="C;Y"+(b+1)+";X"+(w+1)+";K";switch(m.t){case"n":_+=m.v||0,m.f&&!m.F&&(_+=";E"+P4(m.f,{r:b,c:w}));break;case"b":_+=m.v?"TRUE":"FALSE";break;case"e":_+=m.w||m.v;break;case"d":_+='"'+(m.w||m.v)+'"';break;case"s":_+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return _}function A(m,g){g.forEach(function(b,w){var _="F;W"+(w+1)+" "+(w+1)+" ";b.hidden?_+="0":(typeof b.width=="number"&&!b.wpx&&(b.wpx=fx(b.width)),typeof b.wpx=="number"&&!b.wch&&(b.wch=hx(b.wpx)),typeof b.wch=="number"&&(_+=Math.round(b.wch))),_.charAt(_.length-1)!=" "&&m.push(_)})}function d(m,g){g.forEach(function(b,w){var _="F;";b.hidden?_+="M0;":b.hpt?_+="M"+20*b.hpt+";":b.hpx&&(_+="M"+20*mx(b.hpx)+";"),_.length>2&&m.push(_+"R"+(w+1))})}function h(m,g){var b=["ID;PWXL;N;E"],w=[],_=bn(m["!ref"]),N,k=Array.isArray(m),I=`\r
`;b.push("P;PGeneral"),b.push("F;P0;DG0G8;M255"),m["!cols"]&&A(b,m["!cols"]),m["!rows"]&&d(b,m["!rows"]),b.push("B;Y"+(_.e.r-_.s.r+1)+";X"+(_.e.c-_.s.c+1)+";D"+[_.s.c,_.s.r,_.e.c,_.e.r].join(" "));for(var P=_.s.r;P<=_.e.r;++P)for(var M=_.s.c;M<=_.e.c;++M){var D=br({r:P,c:M});N=k?(m[P]||[])[M]:m[D],!(!N||N.v==null&&(!N.f||N.F))&&w.push(l(N,m,P,M))}return b.join(I)+I+w.join(I)+I+"E"+I}return{to_workbook:o,to_sheet:i,from_sheet:h}}(),rj=function(){function t(s,i){switch(i.type){case"base64":return e(nl(s),i);case"binary":return e(s,i);case"buffer":return e(Kr&&Buffer.isBuffer(s)?s.toString("binary"):Ef(s),i);case"array":return e(Th(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){for(var o=s.split(`
`),l=-1,A=-1,d=0,h=[];d!==o.length;++d){if(o[d].trim()==="BOT"){h[++l]=[],A=0;continue}if(!(l<0)){var m=o[d].trim().split(","),g=m[0],b=m[1];++d;for(var w=o[d]||"";(w.match(/["]/g)||[]).length&1&&d<o.length-1;)w+=`
`+o[++d];switch(w=w.trim(),+g){case-1:if(w==="BOT"){h[++l]=[],A=0;continue}else if(w!=="EOD")throw new Error("Unrecognized DIF special command "+w);break;case 0:w==="TRUE"?h[l][A]=!0:w==="FALSE"?h[l][A]=!1:isNaN(Bc(b))?isNaN(Im(b).getDate())?h[l][A]=b:h[l][A]=da(b):h[l][A]=Bc(b),++A;break;case 1:w=w.slice(1,w.length-1),w=w.replace(/""/g,'"'),w&&w.match(/^=".*"$/)&&(w=w.slice(2,-1)),h[l][A++]=w!==""?w:null;break}if(w==="EOD")break}}return i&&i.sheetRows&&(h=h.slice(0,i.sheetRows)),h}function r(s,i){return ep(t(s,i),i)}function n(s,i){return _f(r(s,i),i)}var a=function(){var s=function(l,A,d,h,m){l.push(A),l.push(d+","+h),l.push('"'+m.replace(/"/g,'""')+'"')},i=function(l,A,d,h){l.push(A+","+d),l.push(A==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(l){var A=[],d=bn(l["!ref"]),h,m=Array.isArray(l);s(A,"TABLE",0,1,"sheetjs"),s(A,"VECTORS",0,d.e.r-d.s.r+1,""),s(A,"TUPLES",0,d.e.c-d.s.c+1,""),s(A,"DATA",0,0,"");for(var g=d.s.r;g<=d.e.r;++g){i(A,-1,0,"BOT");for(var b=d.s.c;b<=d.e.c;++b){var w=br({r:g,c:b});if(h=m?(l[g]||[])[b]:l[w],!h){i(A,1,0,"");continue}switch(h.t){case"n":var _=h.w;!_&&h.v!=null&&(_=h.v),_==null?h.f&&!h.F?i(A,1,0,"="+h.f):i(A,1,0,""):i(A,0,_,"V");break;case"b":i(A,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":i(A,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=ql(h.z||xr[14],Ls(da(h.v)))),i(A,0,h.w,"V");break;default:i(A,1,0,"")}}}i(A,-1,0,"EOD");var N=`\r
`,k=A.join(N);return k}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),nj=function(){function t(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(h,m){for(var g=h.split(`
`),b=-1,w=-1,_=0,N=[];_!==g.length;++_){var k=g[_].trim().split(":");if(k[0]==="cell"){var I=Ba(k[1]);if(N.length<=I.r)for(b=N.length;b<=I.r;++b)N[b]||(N[b]=[]);switch(b=I.r,w=I.c,k[2]){case"t":N[b][w]=t(k[3]);break;case"v":N[b][w]=+k[3];break;case"vtf":var P=k[k.length-1];case"vtc":switch(k[3]){case"nl":N[b][w]=!!+k[4];break;default:N[b][w]=+k[4];break}k[2]=="vtf"&&(N[b][w]=[N[b][w],P])}}}return m&&m.sheetRows&&(N=N.slice(0,m.sheetRows)),N}function n(h,m){return ep(r(h,m),m)}function a(h,m){return _f(n(h,m),m)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function A(h){if(!h||!h["!ref"])return"";for(var m=[],g=[],b,w="",_=To(h["!ref"]),N=Array.isArray(h),k=_.s.r;k<=_.e.r;++k)for(var I=_.s.c;I<=_.e.c;++I)if(w=br({r:k,c:I}),b=N?(h[k]||[])[I]:h[w],!(!b||b.v==null||b.t==="z")){switch(g=["cell",w,"t"],b.t){case"s":case"str":g.push(e(b.v));break;case"n":b.f?(g[2]="vtf",g[3]="n",g[4]=b.v,g[5]=e(b.f)):(g[2]="v",g[3]=b.v);break;case"b":g[2]="vt"+(b.f?"f":"c"),g[3]="nl",g[4]=b.v?"1":"0",g[5]=e(b.f||(b.v?"TRUE":"FALSE"));break;case"d":var P=Ls(da(b.v));g[2]="vtc",g[3]="nd",g[4]=""+P,g[5]=b.w||ql(b.z||xr[14],P);break;case"e":continue}m.push(g.join(":"))}return m.push("sheet:c:"+(_.e.c-_.s.c+1)+":r:"+(_.e.r-_.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function d(h){return[s,i,o,i,A(h),l].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),Fm=function(){function t(d,h,m,g,b){b.raw?h[m][g]=d:d===""||(d==="TRUE"?h[m][g]=!0:d==="FALSE"?h[m][g]=!1:isNaN(Bc(d))?isNaN(Im(d).getDate())?h[m][g]=d:h[m][g]=da(d):h[m][g]=Bc(d))}function e(d,h){var m=h||{},g=[];if(!d||d.length===0)return g;for(var b=d.split(/[\r\n]/),w=b.length-1;w>=0&&b[w].length===0;)--w;for(var _=10,N=0,k=0;k<=w;++k)N=b[k].indexOf(" "),N==-1?N=b[k].length:N++,_=Math.max(_,N);for(k=0;k<=w;++k){g[k]=[];var I=0;for(t(b[k].slice(0,_).trim(),g,k,I,m),I=1;I<=(b[k].length-_)/10+1;++I)t(b[k].slice(_+(I-1)*10,_+I*10).trim(),g,k,I,m)}return m.sheetRows&&(g=g.slice(0,m.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var h={},m=!1,g=0,b=0;g<d.length;++g)(b=d.charCodeAt(g))==34?m=!m:!m&&b in r&&(h[b]=(h[b]||0)+1);b=[];for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&b.push([h[g],g]);if(!b.length){h=n;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&b.push([h[g],g])}return b.sort(function(w,_){return w[0]-_[0]||n[w[1]]-n[_[1]]}),r[b.pop()[1]]||44}function s(d,h){var m=h||{},g="",b=m.dense?[]:{},w={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(g=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(g=d.charAt(4),d=d.slice(6)):g=a(d.slice(0,1024)):m&&m.FS?g=m.FS:g=a(d.slice(0,1024));var _=0,N=0,k=0,I=0,P=0,M=g.charCodeAt(0),D=!1,C=0,B=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var T=m.dateNF!=null?wle(m.dateNF):null;function O(){var F=d.slice(I,P),L={};if(F.charAt(0)=='"'&&F.charAt(F.length-1)=='"'&&(F=F.slice(1,-1).replace(/""/g,'"')),F.length===0)L.t="z";else if(m.raw)L.t="s",L.v=F;else if(F.trim().length===0)L.t="s",L.v=F;else if(F.charCodeAt(0)==61)F.charCodeAt(1)==34&&F.charCodeAt(F.length-1)==34?(L.t="s",L.v=F.slice(2,-1).replace(/""/g,'"')):Yfe(F)?(L.t="n",L.f=F.slice(1)):(L.t="s",L.v=F);else if(F=="TRUE")L.t="b",L.v=!0;else if(F=="FALSE")L.t="b",L.v=!1;else if(!isNaN(k=Bc(F)))L.t="n",m.cellText!==!1&&(L.w=F),L.v=k;else if(!isNaN(Im(F).getDate())||T&&F.match(T)){L.z=m.dateNF||xr[14];var Q=0;T&&F.match(T)&&(F=ble(F,m.dateNF,F.match(T)||[]),Q=1),m.cellDates?(L.t="d",L.v=da(F,Q)):(L.t="n",L.v=Ls(da(F,Q))),m.cellText!==!1&&(L.w=ql(L.z,L.v instanceof Date?Ls(L.v):L.v)),m.cellNF||delete L.z}else L.t="s",L.v=F;if(L.t=="z"||(m.dense?(b[_]||(b[_]=[]),b[_][N]=L):b[br({c:N,r:_})]=L),I=P+1,B=d.charCodeAt(I),w.e.c<N&&(w.e.c=N),w.e.r<_&&(w.e.r=_),C==M)++N;else if(N=0,++_,m.sheetRows&&m.sheetRows<=_)return!0}e:for(;P<d.length;++P)switch(C=d.charCodeAt(P)){case 34:B===34&&(D=!D);break;case M:case 10:case 13:if(!D&&O())break e;break}return P-I>0&&O(),b["!ref"]=Dr(w),b}function i(d,h){return!(h&&h.PRN)||h.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,h):ep(e(d,h),h)}function o(d,h){var m="",g=h.type=="string"?[0,0,0,0]:q4(d,h);switch(h.type){case"base64":m=nl(d);break;case"binary":m=d;break;case"buffer":h.codepage==65001?m=d.toString("utf8"):h.codepage&&typeof sx<"u"||(m=Kr&&Buffer.isBuffer(d)?d.toString("binary"):Ef(d));break;case"array":m=Th(d);break;case"string":m=d;break;default:throw new Error("Unrecognized type "+h.type)}return g[0]==239&&g[1]==187&&g[2]==191?m=Zn(m.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?m=Zn(m):h.type=="binary"&&typeof sx<"u",m.slice(0,19)=="socialcalc:version:"?nj.to_sheet(h.type=="string"?m:Zn(m),h):i(m,h)}function l(d,h){return _f(o(d,h),h)}function A(d){for(var h=[],m=bn(d["!ref"]),g,b=Array.isArray(d),w=m.s.r;w<=m.e.r;++w){for(var _=[],N=m.s.c;N<=m.e.c;++N){var k=br({r:w,c:N});if(g=b?(d[w]||[])[N]:d[k],!g||g.v==null){_.push("          ");continue}for(var I=(g.w||(RA(g),g.w)||"").slice(0,10);I.length<10;)I+=" ";_.push(I+(N===0?" ":""))}h.push(_.join(""))}return h.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:A}}();function UAe(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var a=tj.to_workbook(t,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return Fm.to_workbook(t,e)}}var ph=function(){function t(j,K,X){if(j){oi(j,j.l||0);for(var te=X.Enum||W;j.l<j.length;){var le=j.read_shift(2),de=te[le]||te[65535],me=j.read_shift(2),ge=j.l+me,Se=de.f&&de.f(j,me,X);if(j.l=ge,K(Se,de,le))return}}}function e(j,K){switch(K.type){case"base64":return r(Xo(nl(j)),K);case"binary":return r(Xo(j),K);case"buffer":case"array":return r(j,K)}throw"Unsupported type "+K.type}function r(j,K){if(!j)return j;var X=K||{},te=X.dense?[]:{},le="Sheet1",de="",me=0,ge={},Se=[],xe=[],ae={s:{r:0,c:0},e:{r:0,c:0}},Fe=X.sheetRows||0;if(j[2]==0&&(j[3]==8||j[3]==9)&&j.length>=16&&j[14]==5&&j[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(j[2]==2)X.Enum=W,t(j,function(ze,tt,it){switch(it){case 0:X.vers=ze,ze>=4096&&(X.qpro=!0);break;case 6:ae=ze;break;case 204:ze&&(de=ze);break;case 222:de=ze;break;case 15:case 51:X.qpro||(ze[1].v=ze[1].v.slice(1));case 13:case 14:case 16:it==14&&(ze[2]&112)==112&&(ze[2]&15)>1&&(ze[2]&15)<15&&(ze[1].z=X.dateNF||xr[14],X.cellDates&&(ze[1].t="d",ze[1].v=Rw(ze[1].v))),X.qpro&&ze[3]>me&&(te["!ref"]=Dr(ae),ge[le]=te,Se.push(le),te=X.dense?[]:{},ae={s:{r:0,c:0},e:{r:0,c:0}},me=ze[3],le=de||"Sheet"+(me+1),de="");var dt=X.dense?(te[ze[0].r]||[])[ze[0].c]:te[br(ze[0])];if(dt){dt.t=ze[1].t,dt.v=ze[1].v,ze[1].z!=null&&(dt.z=ze[1].z),ze[1].f!=null&&(dt.f=ze[1].f);break}X.dense?(te[ze[0].r]||(te[ze[0].r]=[]),te[ze[0].r][ze[0].c]=ze[1]):te[br(ze[0])]=ze[1];break}},X);else if(j[2]==26||j[2]==14)X.Enum=ce,j[2]==14&&(X.qpro=!0,j.l=0),t(j,function(ze,tt,it){switch(it){case 204:le=ze;break;case 22:ze[1].v=ze[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ze[3]>me&&(te["!ref"]=Dr(ae),ge[le]=te,Se.push(le),te=X.dense?[]:{},ae={s:{r:0,c:0},e:{r:0,c:0}},me=ze[3],le="Sheet"+(me+1)),Fe>0&&ze[0].r>=Fe)break;X.dense?(te[ze[0].r]||(te[ze[0].r]=[]),te[ze[0].r][ze[0].c]=ze[1]):te[br(ze[0])]=ze[1],ae.e.c<ze[0].c&&(ae.e.c=ze[0].c),ae.e.r<ze[0].r&&(ae.e.r=ze[0].r);break;case 27:ze[14e3]&&(xe[ze[14e3][0]]=ze[14e3][1]);break;case 1537:xe[ze[0]]=ze[1],ze[0]==me&&(le=ze[1]);break}},X);else throw new Error("Unrecognized LOTUS BOF "+j[2]);if(te["!ref"]=Dr(ae),ge[de||le]=te,Se.push(de||le),!xe.length)return{SheetNames:Se,Sheets:ge};for(var Xe={},De=[],Ce=0;Ce<xe.length;++Ce)ge[Se[Ce]]?(De.push(xe[Ce]||Se[Ce]),Xe[xe[Ce]]=ge[xe[Ce]]||ge[Se[Ce]]):(De.push(xe[Ce]),Xe[xe[Ce]]={"!ref":"A1"});return{SheetNames:De,Sheets:Xe}}function n(j,K){var X=K||{};if(+X.codepage>=0&&Sc(+X.codepage),X.type=="string")throw new Error("Cannot write WK1 to JS string");var te=Eo(),le=bn(j["!ref"]),de=Array.isArray(j),me=[];Dt(te,0,s(1030)),Dt(te,6,l(le));for(var ge=Math.min(le.e.r,8191),Se=le.s.r;Se<=ge;++Se)for(var xe=is(Se),ae=le.s.c;ae<=le.e.c;++ae){Se===le.s.r&&(me[ae]=Ta(ae));var Fe=me[ae]+xe,Xe=de?(j[Se]||[])[ae]:j[Fe];if(!(!Xe||Xe.t=="z"))if(Xe.t=="n")(Xe.v|0)==Xe.v&&Xe.v>=-32768&&Xe.v<=32767?Dt(te,13,g(Se,ae,Xe.v)):Dt(te,14,w(Se,ae,Xe.v));else{var De=RA(Xe);Dt(te,15,h(Se,ae,De.slice(0,239)))}}return Dt(te,1),te.end()}function a(j,K){var X=K||{};if(+X.codepage>=0&&Sc(+X.codepage),X.type=="string")throw new Error("Cannot write WK3 to JS string");var te=Eo();Dt(te,0,i(j));for(var le=0,de=0;le<j.SheetNames.length;++le)(j.Sheets[j.SheetNames[le]]||{})["!ref"]&&Dt(te,27,z(j.SheetNames[le],de++));var me=0;for(le=0;le<j.SheetNames.length;++le){var ge=j.Sheets[j.SheetNames[le]];if(!(!ge||!ge["!ref"])){for(var Se=bn(ge["!ref"]),xe=Array.isArray(ge),ae=[],Fe=Math.min(Se.e.r,8191),Xe=Se.s.r;Xe<=Fe;++Xe)for(var De=is(Xe),Ce=Se.s.c;Ce<=Se.e.c;++Ce){Xe===Se.s.r&&(ae[Ce]=Ta(Ce));var ze=ae[Ce]+De,tt=xe?(ge[Xe]||[])[Ce]:ge[ze];if(!(!tt||tt.t=="z"))if(tt.t=="n")Dt(te,23,O(Xe,Ce,me,tt.v));else{var it=RA(tt);Dt(te,22,C(Xe,Ce,me,it.slice(0,239)))}}++me}}return Dt(te,1),te.end()}function s(j){var K=lt(2);return K.write_shift(2,j),K}function i(j){var K=lt(26);K.write_shift(2,4096),K.write_shift(2,4),K.write_shift(4,0);for(var X=0,te=0,le=0,de=0;de<j.SheetNames.length;++de){var me=j.SheetNames[de],ge=j.Sheets[me];if(!(!ge||!ge["!ref"])){++le;var Se=To(ge["!ref"]);X<Se.e.r&&(X=Se.e.r),te<Se.e.c&&(te=Se.e.c)}}return X>8191&&(X=8191),K.write_shift(2,X),K.write_shift(1,le),K.write_shift(1,te),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(1,1),K.write_shift(1,2),K.write_shift(4,0),K.write_shift(4,0),K}function o(j,K,X){var te={s:{c:0,r:0},e:{c:0,r:0}};return K==8&&X.qpro?(te.s.c=j.read_shift(1),j.l++,te.s.r=j.read_shift(2),te.e.c=j.read_shift(1),j.l++,te.e.r=j.read_shift(2),te):(te.s.c=j.read_shift(2),te.s.r=j.read_shift(2),K==12&&X.qpro&&(j.l+=2),te.e.c=j.read_shift(2),te.e.r=j.read_shift(2),K==12&&X.qpro&&(j.l+=2),te.s.c==65535&&(te.s.c=te.e.c=te.s.r=te.e.r=0),te)}function l(j){var K=lt(8);return K.write_shift(2,j.s.c),K.write_shift(2,j.s.r),K.write_shift(2,j.e.c),K.write_shift(2,j.e.r),K}function A(j,K,X){var te=[{c:0,r:0},{t:"n",v:0},0,0];return X.qpro&&X.vers!=20768?(te[0].c=j.read_shift(1),te[3]=j.read_shift(1),te[0].r=j.read_shift(2),j.l+=2):(te[2]=j.read_shift(1),te[0].c=j.read_shift(2),te[0].r=j.read_shift(2)),te}function d(j,K,X){var te=j.l+K,le=A(j,K,X);if(le[1].t="s",X.vers==20768){j.l++;var de=j.read_shift(1);return le[1].v=j.read_shift(de,"utf8"),le}return X.qpro&&j.l++,le[1].v=j.read_shift(te-j.l,"cstr"),le}function h(j,K,X){var te=lt(7+X.length);te.write_shift(1,255),te.write_shift(2,K),te.write_shift(2,j),te.write_shift(1,39);for(var le=0;le<te.length;++le){var de=X.charCodeAt(le);te.write_shift(1,de>=128?95:de)}return te.write_shift(1,0),te}function m(j,K,X){var te=A(j,K,X);return te[1].v=j.read_shift(2,"i"),te}function g(j,K,X){var te=lt(7);return te.write_shift(1,255),te.write_shift(2,K),te.write_shift(2,j),te.write_shift(2,X,"i"),te}function b(j,K,X){var te=A(j,K,X);return te[1].v=j.read_shift(8,"f"),te}function w(j,K,X){var te=lt(13);return te.write_shift(1,255),te.write_shift(2,K),te.write_shift(2,j),te.write_shift(8,X,"f"),te}function _(j,K,X){var te=j.l+K,le=A(j,K,X);if(le[1].v=j.read_shift(8,"f"),X.qpro)j.l=te;else{var de=j.read_shift(2);P(j.slice(j.l,j.l+de),le),j.l+=de}return le}function N(j,K,X){var te=K&32768;return K&=-32769,K=(te?j:0)+(K>=8192?K-16384:K),(te?"":"$")+(X?Ta(K):is(K))}var k={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},I=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function P(j,K){oi(j,0);for(var X=[],te=0,le="",de="",me="",ge="";j.l<j.length;){var Se=j[j.l++];switch(Se){case 0:X.push(j.read_shift(8,"f"));break;case 1:de=N(K[0].c,j.read_shift(2),!0),le=N(K[0].r,j.read_shift(2),!1),X.push(de+le);break;case 2:{var xe=N(K[0].c,j.read_shift(2),!0),ae=N(K[0].r,j.read_shift(2),!1);de=N(K[0].c,j.read_shift(2),!0),le=N(K[0].r,j.read_shift(2),!1),X.push(xe+ae+":"+de+le)}break;case 3:if(j.l<j.length){console.error("WK1 premature formula end");return}break;case 4:X.push("("+X.pop()+")");break;case 5:X.push(j.read_shift(2));break;case 6:{for(var Fe="";Se=j[j.l++];)Fe+=String.fromCharCode(Se);X.push('"'+Fe.replace(/"/g,'""')+'"')}break;case 8:X.push("-"+X.pop());break;case 23:X.push("+"+X.pop());break;case 22:X.push("NOT("+X.pop()+")");break;case 20:case 21:ge=X.pop(),me=X.pop(),X.push(["AND","OR"][Se-20]+"("+me+","+ge+")");break;default:if(Se<32&&I[Se])ge=X.pop(),me=X.pop(),X.push(me+I[Se]+ge);else if(k[Se]){if(te=k[Se][1],te==69&&(te=j[j.l++]),te>X.length){console.error("WK1 bad formula parse 0x"+Se.toString(16)+":|"+X.join("|")+"|");return}var Xe=X.slice(-te);X.length-=te,X.push(k[Se][0]+"("+Xe.join(",")+")")}else return Se<=7?console.error("WK1 invalid opcode "+Se.toString(16)):Se<=24?console.error("WK1 unsupported op "+Se.toString(16)):Se<=30?console.error("WK1 invalid opcode "+Se.toString(16)):Se<=115?console.error("WK1 unsupported function opcode "+Se.toString(16)):console.error("WK1 unrecognized opcode "+Se.toString(16))}}X.length==1?K[1].f=""+X[0]:console.error("WK1 bad formula parse |"+X.join("|")+"|")}function M(j){var K=[{c:0,r:0},{t:"n",v:0},0];return K[0].r=j.read_shift(2),K[3]=j[j.l++],K[0].c=j[j.l++],K}function D(j,K){var X=M(j);return X[1].t="s",X[1].v=j.read_shift(K-4,"cstr"),X}function C(j,K,X,te){var le=lt(6+te.length);le.write_shift(2,j),le.write_shift(1,X),le.write_shift(1,K),le.write_shift(1,39);for(var de=0;de<te.length;++de){var me=te.charCodeAt(de);le.write_shift(1,me>=128?95:me)}return le.write_shift(1,0),le}function B(j,K){var X=M(j);X[1].v=j.read_shift(2);var te=X[1].v>>1;if(X[1].v&1)switch(te&7){case 0:te=(te>>3)*5e3;break;case 1:te=(te>>3)*500;break;case 2:te=(te>>3)/20;break;case 3:te=(te>>3)/200;break;case 4:te=(te>>3)/2e3;break;case 5:te=(te>>3)/2e4;break;case 6:te=(te>>3)/16;break;case 7:te=(te>>3)/64;break}return X[1].v=te,X}function T(j,K){var X=M(j),te=j.read_shift(4),le=j.read_shift(4),de=j.read_shift(2);if(de==65535)return te===0&&le===3221225472?(X[1].t="e",X[1].v=15):te===0&&le===3489660928?(X[1].t="e",X[1].v=42):X[1].v=0,X;var me=de&32768;return de=(de&32767)-16446,X[1].v=(1-me*2)*(le*Math.pow(2,de+32)+te*Math.pow(2,de)),X}function O(j,K,X,te){var le=lt(14);if(le.write_shift(2,j),le.write_shift(1,X),le.write_shift(1,K),te==0)return le.write_shift(4,0),le.write_shift(4,0),le.write_shift(2,65535),le;var de=0,me=0,ge=0,Se=0;return te<0&&(de=1,te=-te),me=Math.log2(te)|0,te/=Math.pow(2,me-31),Se=te>>>0,(Se&2147483648)==0&&(te/=2,++me,Se=te>>>0),te-=Se,Se|=2147483648,Se>>>=0,te*=Math.pow(2,32),ge=te>>>0,le.write_shift(4,ge),le.write_shift(4,Se),me+=16383+(de?32768:0),le.write_shift(2,me),le}function F(j,K){var X=T(j);return j.l+=K-14,X}function L(j,K){var X=M(j),te=j.read_shift(4);return X[1].v=te>>6,X}function Q(j,K){var X=M(j),te=j.read_shift(8,"f");return X[1].v=te,X}function q(j,K){var X=Q(j);return j.l+=K-10,X}function ie(j,K){return j[j.l+K-1]==0?j.read_shift(K,"cstr"):""}function Z(j,K){var X=j[j.l++];X>K-1&&(X=K-1);for(var te="";te.length<X;)te+=String.fromCharCode(j[j.l++]);return te}function ee(j,K,X){if(!(!X.qpro||K<21)){var te=j.read_shift(1);j.l+=17,j.l+=1,j.l+=2;var le=j.read_shift(K-21,"cstr");return[te,le]}}function ne(j,K){for(var X={},te=j.l+K;j.l<te;){var le=j.read_shift(2);if(le==14e3){for(X[le]=[0,""],X[le][0]=j.read_shift(2);j[j.l];)X[le][1]+=String.fromCharCode(j[j.l]),j.l++;j.l++}}return X}function z(j,K){var X=lt(5+j.length);X.write_shift(2,14e3),X.write_shift(2,K);for(var te=0;te<j.length;++te){var le=j.charCodeAt(te);X[X.l++]=le>127?95:le}return X[X.l++]=0,X}var W={0:{n:"BOF",f:vs},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:b},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:_},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ie},222:{n:"SHEETNAMELP",f:Z},65535:{n:""}},ce={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:D},23:{n:"NUMBER17",f:T},24:{n:"NUMBER18",f:B},25:{n:"FORMULA19",f:F},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ne},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:L},38:{n:"??"},39:{n:"NUMBER27",f:Q},40:{n:"FORMULA28",f:q},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ie},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ee},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:e}}();function MAe(t){var e={},r=t.match(Gi),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=Sr(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=c4[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return e}var PAe=function(){var t=lx("t"),e=lx("rPr");function r(s){var i=s.match(t);if(!i)return{t:"s",v:""};var o={t:"s",v:yn(i[1])},l=s.match(e);return l&&(o.s=MAe(l[1])),o}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(a).map(r).filter(function(o){return o.v})}}(),jAe=function(){var e=/(\r\n|\n)/g;function r(a,s,i){var o=[];a.u&&o.push("text-decoration: underline;"),a.uval&&o.push("text-underline-style:"+a.uval+";"),a.sz&&o.push("font-size:"+a.sz+"pt;"),a.outline&&o.push("text-effect: outline;"),a.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var l=a.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(s.push("<"+l+">"),i.push("</"+l+">")),i.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),OAe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,QAe=/<(?:\w+:)?r>/,HAe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function R4(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=yn(Zn(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Zn(t),r&&(n.h=v4(n.t))):t.match(QAe)&&(n.r=Zn(t),n.t=yn(Zn((t.replace(HAe,"").match(OAe)||[]).join("").replace(Gi,""))),r&&(n.h=jAe(PAe(n.r)))),n):{t:""}}var VAe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,zAe=/<(?:\w+:)?(?:si|sstItem)>/g,GAe=/<\/(?:\w+:)?(?:si|sstItem)>/;function qAe(t,e){var r=[],n="";if(!t)return r;var a=t.match(VAe);if(a){n=a[2].replace(zAe,"").split(GAe);for(var s=0;s!=n.length;++s){var i=R4(n[s].trim(),e);i!=null&&(r[r.length]=i)}a=Sr(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var KAe=/^\s|\s$|[\t\n\r]/;function aj(t,e){if(!e.bookSST)return"";var r=[os];r[r.length]=Rt("sst",null,{xmlns:Oh[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var a=t[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(KAe)&&(s+=' xml:space="preserve"'),s+=">"+zn(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function WAe(t){return[t.read_shift(4),t.read_shift(4)]}function $Ae(t,e){var r=[],n=!1;return VA(t,function(s,i,o){switch(o){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function YAe(t,e){return e||(e=lt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var XAe=oce;function JAe(t){var e=Eo();Et(e,159,YAe(t));for(var r=0;r<t.length;++r)Et(e,19,XAe(t[r]));return Et(e,160),e.end()}function sj(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function _A(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function ZAe(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=_A(t,4),e.U=_A(t,4),e.W=_A(t,4),e}function ede(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},a=t.read_shift(4),s=[];a-- >0;)s.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=s,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function tde(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(ede(t));return e}function rde(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function nde(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=_A(t,4),e.U=_A(t,4),e.W=_A(t,4),e}function ade(t){var e=nde(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function ij(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function oj(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function sde(t){var e=_A(t);switch(e.Minor){case 2:return[e.Minor,ide(t)];case 3:return[e.Minor,ode()];case 4:return[e.Minor,lde(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function ide(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=ij(t,r),a=oj(t,t.length-t.l);return{t:"Std",h:n,v:a}}function ode(){throw new Error("File is password-protected: ECMA-376 Extensible")}function lde(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(Gi,function(s){var i=Sr(s);switch(Ru(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function cde(t,e){var r={},n=r.EncryptionVersionInfo=_A(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var a=t.read_shift(4);return e-=4,r.EncryptionHeader=ij(t,a),e-=a,r.EncryptionVerifier=oj(t,e),r}function ude(t){var e={},r=e.EncryptionVersionInfo=_A(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function D4(t){var e=0,r,n=sj(t),a=n.length+1,s,i,o,l,A;for(r=pf(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)i=r[s],o=(e&16384)===0?0:1,l=e<<1&32767,A=o|l,e=A^i;return e^52811}var lj=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},a=function(i,o){return n(i^o)},s=function(i){for(var o=e[i.length-1],l=104,A=i.length-1;A>=0;--A)for(var d=i[A],h=0;h!=7;++h)d&64&&(o^=r[l]),d*=2,--l;return o};return function(i){for(var o=sj(i),l=s(o),A=o.length,d=pf(16),h=0;h!=16;++h)d[h]=0;var m,g,b;for((A&1)===1&&(m=l>>8,d[A]=a(t[0],m),--A,m=l&255,g=o[o.length-1],d[A]=a(g,m));A>0;)--A,m=l>>8,d[A]=a(o[A],m),--A,m=l&255,d[A]=a(o[A],m);for(A=15,b=15-o.length;b>0;)m=l>>8,d[A]=a(t[b],m),--A,--b,m=l&255,d[A]=a(o[A],m),--A,--b;return d}}(),Ade=function(t,e,r,n,a){a||(a=e),n||(n=lj(t));var s,i;for(s=0;s!=e.length;++s)i=e[s],i^=n[r],i=(i>>5|i<<3)&255,a[s]=i,++r;return[a,r,n]},dde=function(t){var e=0,r=lj(t);return function(n){var a=Ade("",n,e,r);return e=a[1],a[0]}};function fde(t,e,r,n){var a={key:vs(t),verificationBytes:vs(t)};return r.password&&(a.verifier=D4(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=dde(r.password)),a}function hde(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=ude(t):n.Data=cde(t,e),n}function mde(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?hde(t,e-2,n):fde(t,r.biff>=8?e:e-2,r,n),n}var cj=function(){function t(a,s){switch(s.type){case"base64":return e(nl(a),s);case"binary":return e(a,s);case"buffer":return e(Kr&&Buffer.isBuffer(a)?a.toString("binary"):Ef(a),s);case"array":return e(Th(a),s)}throw new Error("Unrecognized type "+s.type)}function e(a,s){var i=s||{},o=i.dense?[]:{},l=a.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var A={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,h){Array.isArray(o)&&(o[h]=[]);for(var m=/\\\w+\b/g,g=0,b,w=-1;b=m.exec(d);){switch(b[0]){case"\\cell":var _=d.slice(g,m.lastIndex-b[0].length);if(_[0]==" "&&(_=_.slice(1)),++w,_.length){var N={v:_,t:"s"};Array.isArray(o)?o[h][w]=N:o[br({r:h,c:w})]=N}break}g=m.lastIndex}w>A.e.c&&(A.e.c=w)}),o["!ref"]=Dr(A),o}function r(a,s){return _f(t(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],i=bn(a["!ref"]),o,l=Array.isArray(a),A=i.s.r;A<=i.e.r;++A){s.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var h=br({r:A,c:d});o=l?(a[A]||[])[d]:a[h],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(RA(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function pde(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function dx(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function gde(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,a=Math.max(e,r,n),s=Math.min(e,r,n),i=a-s;if(i===0)return[0,0,e];var o=0,l=0,A=a+s;switch(l=i/(A>1?2-A:A),a){case e:o=((r-n)/i+6)%6;break;case r:o=(n-e)/i+2;break;case n:o=(e-r)/i+4;break}return[o/6,l,A/2]}function xde(t){var e=t[0],r=t[1],n=t[2],a=r*2*(n<.5?n:1-n),s=n-a/2,i=[s,s,s],o=6*e,l;if(r!==0)switch(o|0){case 0:case 6:l=a*o,i[0]+=a,i[1]+=l;break;case 1:l=a*(2-o),i[0]+=l,i[1]+=a;break;case 2:l=a*(o-2),i[1]+=a,i[2]+=l;break;case 3:l=a*(4-o),i[1]+=l,i[2]+=a;break;case 4:l=a*(o-4),i[2]+=a,i[0]+=l;break;case 5:l=a*(6-o),i[2]+=l,i[0]+=a;break}for(var A=0;A!=3;++A)i[A]=Math.round(i[A]*255);return i}function py(t,e){if(e===0)return t;var r=gde(pde(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),dx(xde(r))}var uj=6,vde=15,yde=1,Mi=uj;function fx(t){return Math.floor((t+Math.round(128/Mi)/256)*Mi)}function hx(t){return Math.floor((t-5)/Mi*100+.5)/100}function gy(t){return Math.round((t*Mi+5)/Mi*256)/256}function tE(t){return gy(hx(fx(t)))}function L4(t){var e=Math.abs(t-tE(t)),r=Mi;if(e>.005)for(Mi=yde;Mi<vde;++Mi)Math.abs(t-tE(t))<=e&&(e=Math.abs(t-tE(t)),r=Mi);Mi=r}function gf(t){t.width?(t.wpx=fx(t.width),t.wch=hx(t.wpx),t.MDW=Mi):t.wpx?(t.wch=hx(t.wpx),t.width=gy(t.wch),t.MDW=Mi):typeof t.wch=="number"&&(t.width=gy(t.wch),t.wpx=fx(t.width),t.MDW=Mi),t.customWidth&&delete t.customWidth}var wde=96,Aj=wde;function mx(t){return t*96/Aj}function Rm(t){return t*Aj/96}var bde={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Cde(t,e,r,n){e.Borders=[];var a={},s=!1;(t[0].match(Gi)||[]).forEach(function(i){var o=Sr(i);switch(Ru(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},o.diagonalUp&&(a.diagonalUp=ua(o.diagonalUp)),o.diagonalDown&&(a.diagonalDown=ua(o.diagonalDown)),e.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function Ede(t,e,r,n){e.Fills=[];var a={},s=!1;(t[0].match(Gi)||[]).forEach(function(i){var o=Sr(i);switch(Ru(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},e.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":o.patternType&&(a.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),o.indexed&&(a.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(a.bgColor.theme=parseInt(o.theme,10)),o.tint&&(a.bgColor.tint=parseFloat(o.tint)),o.rgb&&(a.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),o.theme&&(a.fgColor.theme=parseInt(o.theme,10)),o.tint&&(a.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(a.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function _de(t,e,r,n){e.Fonts=[];var a={},s=!1;(t[0].match(Gi)||[]).forEach(function(i){var o=Sr(i);switch(Ru(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(a),a={};break;case"<name":o.val&&(a.name=Zn(o.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=o.val?ua(o.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=o.val?ua(o.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(o.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=o.val?ua(o.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=o.val?ua(o.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=o.val?ua(o.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=o.val?ua(o.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=o.val?ua(o.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":o.val&&(a.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(a.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(a.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(a.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=c4[parseInt(o.val,10)];break;case"<color":if(a.color||(a.color={}),o.auto&&(a.color.auto=ua(o.auto)),o.rgb)a.color.rgb=o.rgb.slice(-6);else if(o.indexed){a.color.index=parseInt(o.indexed,10);var l=hh[a.color.index];a.color.index==81&&(l=hh[1]),l||(l=hh[1]),a.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(a.color.theme=parseInt(o.theme,10),o.tint&&(a.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=py(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function Sde(t,e,r){e.NumberFmt=[];for(var n=za(xr),a=0;a<n.length;++a)e.NumberFmt[n[a]]=xr[n[a]];var s=t[0].match(Gi);if(s)for(a=0;a<s.length;++a){var i=Sr(s[a]);switch(Ru(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=yn(Zn(i.formatCode)),l=parseInt(i.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}EA(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function Tde(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Rt("numFmt",null,{numFmtId:n,formatCode:zn(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Rt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var bv=["numFmtId","fillId","fontId","borderId","xfId"],Cv=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Bde(t,e,r){e.CellXf=[];var n,a=!1;(t[0].match(Gi)||[]).forEach(function(s){var i=Sr(s),o=0;switch(Ru(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<bv.length;++o)n[bv[o]]&&(n[bv[o]]=parseInt(n[bv[o]],10));for(o=0;o<Cv.length;++o)n[Cv[o]]&&(n[Cv[o]]=ua(n[Cv[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};i.vertical&&(l.vertical=i.vertical),i.horizontal&&(l.horizontal=i.horizontal),i.textRotation!=null&&(l.textRotation=i.textRotation),i.indent&&(l.indent=i.indent),i.wrapText&&(l.wrapText=ua(i.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function Nde(t){var e=[];return e[e.length]=Rt("cellXfs",null),t.forEach(function(r){e[e.length]=Rt("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Rt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var kde=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,A){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var h;return(h=o.match(e))&&Sde(h,d,A),(h=o.match(a))&&_de(h,d,l,A),(h=o.match(n))&&Ede(h,d,l,A),(h=o.match(s))&&Cde(h,d,l,A),(h=o.match(r))&&Bde(h,d,A),d}}();function dj(t,e){var r=[os,Rt("styleSheet",null,{xmlns:Oh[0],"xmlns:vt":Fs.vt})],n;return t.SSF&&(n=Tde(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=Nde(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Ide(t,e){var r=t.read_shift(2),n=Qi(t);return[r,n]}function Fde(t,e,r){r||(r=lt(6+4*e.length)),r.write_shift(2,t),$s(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function Rde(t,e,r){var n={};n.sz=t.read_shift(2)/20;var a=hce(t);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(n.underline=i);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=fce(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Qi(t),n}function Dde(t,e){e||(e=lt(153)),e.write_shift(2,t.sz*20),mce(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),fy(t.color,e);var n=0;return n=2,e.write_shift(1,n),$s(t.name,e),e.length>e.l?e.slice(0,e.l):e}var Lde=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],rE,Ude=Vi;function f6(t,e){e||(e=lt(84)),rE||(rE=Iw(Lde));var r=rE[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(fy({auto:1},e),fy({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function Mde(t,e){var r=t.l+e,n=t.read_shift(2),a=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:a}}function fj(t,e,r){r||(r=lt(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Wp(t,e){return e||(e=lt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var Pde=Vi;function jde(t,e){return e||(e=lt(51)),e.write_shift(1,0),Wp(null,e),Wp(null,e),Wp(null,e),Wp(null,e),Wp(null,e),e.length>e.l?e.slice(0,e.l):e}function Ode(t,e){return e||(e=lt(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),dy(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function Qde(t,e,r){var n=lt(2052);return n.write_shift(4,t),dy(e,n),dy(r,n),n.length>n.l?n.slice(0,n.l):n}function Hde(t,e,r){var n={};n.NumberFmt=[];for(var a in xr)n.NumberFmt[a]=xr[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return VA(t,function(l,A,d){switch(d){case 44:n.NumberFmt[l[0]]=l[1],EA(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=py(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(d),i=!0;break;case 38:s.pop(),i=!1;break;default:if(A.T>0)s.push(d);else if(A.T<0)s.pop();else if(!i||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function Vde(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&++r}),r!=0&&(Et(t,615,Nc(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&Et(t,44,Fde(a,e[a]))}),Et(t,616))}}function zde(t){var e=1;Et(t,611,Nc(e)),Et(t,43,Dde({sz:12,color:{theme:1},name:"Calibri",family:2})),Et(t,612)}function Gde(t){var e=2;Et(t,603,Nc(e)),Et(t,45,f6({patternType:"none"})),Et(t,45,f6({patternType:"gray125"})),Et(t,604)}function qde(t){var e=1;Et(t,613,Nc(e)),Et(t,46,jde()),Et(t,614)}function Kde(t){var e=1;Et(t,626,Nc(e)),Et(t,47,fj({numFmtId:0},65535)),Et(t,627)}function Wde(t,e){Et(t,617,Nc(e.length)),e.forEach(function(r){Et(t,47,fj(r,0))}),Et(t,618)}function $de(t){var e=1;Et(t,619,Nc(e)),Et(t,48,Ode({xfId:0,name:"Normal"})),Et(t,620)}function Yde(t){var e=0;Et(t,505,Nc(e)),Et(t,506)}function Xde(t){var e=0;Et(t,508,Qde(e,"TableStyleMedium9","PivotStyleMedium4")),Et(t,509)}function Jde(t,e){var r=Eo();return Et(r,278),Vde(r,t.SSF),zde(r),Gde(r),qde(r),Kde(r),Wde(r,e.cellXfs),$de(r),Yde(r),Xde(r),Et(r,279),r.end()}var Zde=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function efe(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(Gi)||[]).forEach(function(a){var s=Sr(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[Zde.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function tfe(){}function rfe(){}var nfe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,afe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,sfe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function ife(t,e,r){e.themeElements={};var n;[["clrScheme",nfe,efe],["fontScheme",afe,tfe],["fmtScheme",sfe,rfe]].forEach(function(a){if(!(n=t.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,e,r)})}var ofe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function hj(t,e){(!t||t.length===0)&&(t=U4());var r,n={};if(!(r=t.match(ofe)))throw new Error("themeElements not found in theme");return ife(r[0],n,e),n.raw=t,n}function U4(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[os];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function lfe(t,e,r){var n=t.l+e,a=t.read_shift(4);if(a!==124226){if(!r.cellStyles){t.l=n;return}var s=t.slice(t.l);t.l=n;var i;try{i=iP(s,{type:"array"})}catch{return}var o=Jo(i,"theme/theme/theme1.xml",!0);if(o)return hj(o,r)}}function cfe(t){return t.read_shift(4)}function ufe(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=Afe(t,4);break;case 2:e.xclrValue=KP(t);break;case 3:e.xclrValue=cfe(t);break;case 4:t.l+=4;break}return t.l+=8,e}function Afe(t,e){return Vi(t,e)}function dfe(t,e){return Vi(t,e)}function ffe(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=ufe(t);break;case 6:n[1]=dfe(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function hfe(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var a=t.read_shift(2),s=[];a-- >0;)s.push(ffe(t,r-t.l));return{ixfe:n,ext:s}}function mfe(t,e){e.forEach(function(r){r[0]})}function pfe(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Qi(t)}}function gfe(t){var e=lt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),$s(t.name,e),e.slice(0,e.l)}function xfe(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function vfe(t){var e=lt(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function yfe(t,e){var r=lt(8+2*e.length);return r.write_shift(4,t),$s(e,r),r.slice(0,r.l)}function wfe(t){return t.l+=4,t.read_shift(4)!=0}function bfe(t,e){var r=lt(8);return r.write_shift(4,t),r.write_shift(4,1),r}function Cfe(t,e,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,o=2;return VA(t,function(l,A,d){switch(d){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(h){o==1?n.Cell.push({type:n.Types[h[0]-1].name,index:h[1]}):o==0&&n.Value.push({type:n.Types[h[0]-1].name,index:h[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:s.push(d),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!A.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function Efe(){var t=Eo();return Et(t,332),Et(t,334,Nc(1)),Et(t,335,gfe({name:"XLDAPR",version:12e4,flags:3496657072})),Et(t,336),Et(t,339,yfe(1,"XLDAPR")),Et(t,52),Et(t,35,Nc(514)),Et(t,4096,Nc(0)),Et(t,4097,Dl(1)),Et(t,36),Et(t,53),Et(t,340),Et(t,337,bfe(1)),Et(t,51,vfe([[1,0]])),Et(t,338),Et(t,333),t.end()}function _fe(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var a=!1,s=2,i;return t.replace(Gi,function(o){var l=Sr(o);switch(Ru(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var A=0;A<n.Types.length;++A)n.Types[A].name==l.name&&(i=n.Types[A]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):s==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+l.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function mj(){var t=[os];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function Sfe(t){var e=[];if(!t)return e;var r=1;return(t.match(Gi)||[]).forEach(function(n){var a=Sr(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,e.push(a);break}}),e}function Tfe(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=br(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function Bfe(t,e,r){var n=[];return VA(t,function(s,i,o){switch(o){case 63:n.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function Nfe(t,e,r,n){if(!t)return t;var a=n||{},s=!1;VA(t,function(o,l,A){switch(A){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!l.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}},a)}function kfe(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var X0=1024;function pj(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Rt("xml",null,{"xmlns:v":$o.v,"xmlns:o":$o.o,"xmlns:x":$o.x,"xmlns:mv":$o.mv}).replace(/\/>/,">"),Rt("o:shapelayout",Rt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Rt("v:shapetype",[Rt("v:stroke",null,{joinstyle:"miter"}),Rt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];X0<t*1e3;)X0+=1e3;return e.forEach(function(s){var i=Ba(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Rt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,A=Rt("v:fill",l,o),d={on:"t",obscured:"t"};++X0,a=a.concat(["<v:shape"+cx({id:"_x0000_s"+X0,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",A,Rt("v:shadow",null,d),Rt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",ci("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),ci("x:AutoFill","False"),ci("x:Row",String(i.r)),ci("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function h6(t,e,r,n){var a=Array.isArray(t),s;e.forEach(function(i){var o=Ba(i.ref);if(a?(t[o.r]||(t[o.r]=[]),s=t[o.r][o.c]):s=t[i.ref],!s){s={t:"z"},a?t[o.r][o.c]=s:t[i.ref]=s;var l=bn(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var A=Dr(l);A!==t["!ref"]&&(t["!ref"]=A)}s.c||(s.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var h=s.c.length-1;h>=0;--h){if(!r&&s.c[h].T)return;r&&!s.c[h].T&&s.c.splice(h,1)}if(r&&n){for(h=0;h<n.length;++h)if(d.a==n[h].id){d.a=n[h].name||d.a;break}}s.c.push(d)})}function Ife(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var s=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=Sr(o[0]),A={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=Ba(l.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var h=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!h&&!!h[1]&&R4(h[1])||{r:"",t:"",h:""};A.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),A.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(A.h=m.h),n.push(A)}}}}),n}function gj(t){var e=[os,Rt("comments",null,{xmlns:Oh[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(a){var s=zn(a.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),e.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(a=r.indexOf(zn(l.a))),s.push(l.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)e.push(ci("t",zn(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)i+=`Reply:
    `+s[o]+`
`;e.push(ci("t",zn(i)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function Ffe(t,e){var r=[],n=!1,a={},s=0;return t.replace(Gi,function(o,l){var A=Sr(o);switch(Ru(A[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:A.personId,guid:A.id,ref:A.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=l+o.length;break;case"</text>":a.t=t.slice(s,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+A[0]+" in threaded comments")}return o}),r}function Rfe(t,e,r){var n=[os,Rt("ThreadedComments",null,{xmlns:Fs.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&e.indexOf(i.a)==-1&&e.push(i.a);var l={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=l.id:l.parentId=s,i.ID=l.id,i.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(i.a)).slice(-12)+"}"),n.push(Rt("threadedComment",ci("text",i.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function Dfe(t,e){var r=[],n=!1;return t.replace(Gi,function(s){var i=Sr(s);switch(Ru(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),r}function Lfe(t){var e=[os,Rt("personList",null,{xmlns:Fs.TCMNT,"xmlns:x":Oh[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Rt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function Ufe(t){var e={};e.iauthor=t.read_shift(4);var r=zh(t);return e.rfx=r.s,e.ref=br(r.s),t.l+=16,e}function Mfe(t,e){return e==null&&(e=lt(36)),e.write_shift(4,t[1].iauthor),tp(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var Pfe=Qi;function jfe(t){return $s(t.slice(0,54))}function Ofe(t,e){var r=[],n=[],a={},s=!1;return VA(t,function(o,l,A){switch(A){case 632:n.push(o);break;case 635:a=o;break;case 637:a.t=o.t,a.h=o.h,a.r=o.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,e.sheetRows&&a.rfx&&e.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}}),r}function Qfe(t){var e=Eo(),r=[];return Et(e,628),Et(e,630),t.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Et(e,632,jfe(a.a)))})}),Et(e,631),Et(e,633),t.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:Ba(n[0]),e:Ba(n[0])};Et(e,635,Mfe([s,a])),a.t&&a.t.length>0&&Et(e,637,cce(a)),Et(e,636),delete a.iauthor})}),Et(e,634),Et(e,629),e.end()}var Hfe="application/vnd.ms-office.vbaProject";function Vfe(t){var e=or.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");or.utils.cfb_add(e,a,t.FileIndex[n].content)}}),or.write(e)}function zfe(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&or.utils.cfb_add(t,a,e.FileIndex[n].content)}})}var xj=["xlsb","xlsm","xlam","biff8","xla"];function Gfe(){return{"!type":"dialog"}}function qfe(){return{"!type":"dialog"}}function Kfe(){return{"!type":"macro"}}function Wfe(){return{"!type":"macro"}}var hm=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,a,s,i){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var A=s.length>0?parseInt(s,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=e.c:--d,l?A+=e.r:--A,a+(o?"":"$")+Ta(d)+(l?"":"$")+is(A)}return function(a,s){return e=s,a.replace(t,r)}}(),M4=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,P4=function(){return function(e,r){return e.replace(M4,function(n,a,s,i,o,l){var A=E4(i)-(s?0:r.c),d=C4(l)-(o?0:r.r),h=d==0?"":o?d+1:"["+d+"]",m=A==0?"":s?A+1:"["+A+"]";return a+"R"+h+"C"+m})}}();function vj(t,e){return t.replace(M4,function(r,n,a,s,i,o){return n+(a=="$"?a+s:Ta(E4(s)+e.c))+(i=="$"?i+o:is(C4(o)+e.r))})}function $fe(t,e,r){var n=To(e),a=n.s,s=Ba(r),i={r:s.r-a.r,c:s.c-a.c};return vj(t,i)}function Yfe(t){return t.length!=1}function m6(t){return t.replace(/_xlfn\./g,"")}function ps(t){t.l+=1}function xf(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function yj(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return wj(t);r.biff==12&&(n=4)}var a=t.read_shift(n),s=t.read_shift(n),i=xf(t),o=xf(t);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function wj(t){var e=xf(t),r=xf(t),n=t.read_shift(1),a=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function Xfe(t,e,r){if(r.biff<8)return wj(t);var n=t.read_shift(r.biff==12?4:2),a=t.read_shift(r.biff==12?4:2),s=xf(t),i=xf(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function bj(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return Jfe(t);var n=t.read_shift(r&&r.biff==12?4:2),a=xf(t);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function Jfe(t){var e=xf(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function Zfe(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function ehe(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return the(t);var a=t.read_shift(n>=12?4:2),s=t.read_shift(2),i=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:o}}function the(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,a=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),a==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:a,rRel:n}}function rhe(t,e,r){var n=(t[t.l++]&96)>>5,a=yj(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function nhe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var i=yj(t,s,r);return[n,a,i]}function ahe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function she(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,a]}function ihe(t,e,r){var n=(t[t.l++]&96)>>5,a=Xfe(t,e-1,r);return[n,a]}function ohe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function p6(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function lhe(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(t.read_shift(r&&r.biff==2?1:2));return a}function che(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function uhe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function Ahe(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function dhe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function Cj(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function fhe(t){return t.read_shift(2),Cj(t)}function hhe(t){return t.read_shift(2),Cj(t)}function mhe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=bj(t,0,r);return[n,a]}function phe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=ehe(t,0,r);return[n,a]}function ghe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=bj(t,0,r);return[n,a,s]}function xhe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(r&&r.biff<=3?1:2);return[w0e[a],Sj[a],n]}function vhe(t,e,r){var n=t[t.l++],a=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:yhe(t);return[a,(s[0]===0?Sj:y0e)[s[1]]]}function yhe(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function whe(t,e,r){t.l+=r&&r.biff==2?3:4}function bhe(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function Che(t){return t.l++,zA[t.read_shift(1)]}function Ehe(t){return t.l++,t.read_shift(2)}function _he(t){return t.l++,t.read_shift(1)!==0}function She(t){return t.l++,ji(t)}function The(t,e,r){return t.l++,Gx(t,e-1,r)}function Bhe(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Za(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=zA[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=ji(t);break;case 2:r[1]=Gh(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Nhe(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?zh:Dw)(t));return a}function khe(t,e,r){var n=0,a=0;r.biff==12?(n=t.read_shift(4),a=t.read_shift(4)):(a=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var o=0;o!=a;++o)i[s][o]=Bhe(t,r.biff);return i}function Ihe(t,e,r){var n=t.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=t.read_shift(a);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function Fhe(t,e,r){if(r.biff==5)return Rhe(t);var n=t.read_shift(1)>>>5&3,a=t.read_shift(2),s=t.read_shift(4);return[n,a,s]}function Rhe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function Dhe(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function Lhe(t,e,r){var n=t.read_shift(1)>>>5&3,a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function Uhe(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function Mhe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,a]}var Phe=Vi,jhe=Vi,Ohe=Vi;function Kx(t,e,r){return t.l+=2,[Zfe(t)]}function j4(t){return t.l+=6,[]}var Qhe=Kx,Hhe=j4,Vhe=j4,zhe=Kx;function Ej(t){return t.l+=2,[vs(t),t.read_shift(2)&1]}var Ghe=Kx,qhe=Ej,Khe=j4,Whe=Kx,$he=Kx,Yhe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Xhe(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a=t.read_shift(2),s=t.read_shift(2),i=Yhe[r>>2&31];return{ixti:e,coltype:r&3,rt:i,idx:n,c:a,C:s}}function Jhe(t){return t.l+=2,[t.read_shift(4)]}function Zhe(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function e0e(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function t0e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function r0e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function n0e(t){return t.l+=4,[0,0]}var g6={1:{n:"PtgExp",f:bhe},2:{n:"PtgTbl",f:Ohe},3:{n:"PtgAdd",f:ps},4:{n:"PtgSub",f:ps},5:{n:"PtgMul",f:ps},6:{n:"PtgDiv",f:ps},7:{n:"PtgPower",f:ps},8:{n:"PtgConcat",f:ps},9:{n:"PtgLt",f:ps},10:{n:"PtgLe",f:ps},11:{n:"PtgEq",f:ps},12:{n:"PtgGe",f:ps},13:{n:"PtgGt",f:ps},14:{n:"PtgNe",f:ps},15:{n:"PtgIsect",f:ps},16:{n:"PtgUnion",f:ps},17:{n:"PtgRange",f:ps},18:{n:"PtgUplus",f:ps},19:{n:"PtgUminus",f:ps},20:{n:"PtgPercent",f:ps},21:{n:"PtgParen",f:ps},22:{n:"PtgMissArg",f:ps},23:{n:"PtgStr",f:The},26:{n:"PtgSheet",f:Zhe},27:{n:"PtgEndSheet",f:e0e},28:{n:"PtgErr",f:Che},29:{n:"PtgBool",f:_he},30:{n:"PtgInt",f:Ehe},31:{n:"PtgNum",f:She},32:{n:"PtgArray",f:ohe},33:{n:"PtgFunc",f:xhe},34:{n:"PtgFuncVar",f:vhe},35:{n:"PtgName",f:Ihe},36:{n:"PtgRef",f:mhe},37:{n:"PtgArea",f:rhe},38:{n:"PtgMemArea",f:Dhe},39:{n:"PtgMemErr",f:Phe},40:{n:"PtgMemNoMem",f:jhe},41:{n:"PtgMemFunc",f:Lhe},42:{n:"PtgRefErr",f:Uhe},43:{n:"PtgAreaErr",f:ahe},44:{n:"PtgRefN",f:phe},45:{n:"PtgAreaN",f:ihe},46:{n:"PtgMemAreaN",f:t0e},47:{n:"PtgMemNoMemN",f:r0e},57:{n:"PtgNameX",f:Fhe},58:{n:"PtgRef3d",f:ghe},59:{n:"PtgArea3d",f:nhe},60:{n:"PtgRefErr3d",f:Mhe},61:{n:"PtgAreaErr3d",f:she},255:{}},a0e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},s0e={1:{n:"PtgElfLel",f:Ej},2:{n:"PtgElfRw",f:Whe},3:{n:"PtgElfCol",f:Qhe},6:{n:"PtgElfRwV",f:$he},7:{n:"PtgElfColV",f:zhe},10:{n:"PtgElfRadical",f:Ghe},11:{n:"PtgElfRadicalS",f:Khe},13:{n:"PtgElfColS",f:Hhe},15:{n:"PtgElfColSV",f:Vhe},16:{n:"PtgElfRadicalLel",f:qhe},25:{n:"PtgList",f:Xhe},29:{n:"PtgSxName",f:Jhe},255:{}},i0e={0:{n:"PtgAttrNoop",f:n0e},1:{n:"PtgAttrSemi",f:dhe},2:{n:"PtgAttrIf",f:uhe},4:{n:"PtgAttrChoose",f:lhe},8:{n:"PtgAttrGoto",f:che},16:{n:"PtgAttrSum",f:whe},32:{n:"PtgAttrBaxcel",f:p6},33:{n:"PtgAttrBaxcel",f:p6},64:{n:"PtgAttrSpace",f:fhe},65:{n:"PtgAttrSpaceSemi",f:hhe},128:{n:"PtgAttrIfError",f:Ahe},255:{}};function Wx(t,e,r,n){if(n.biff<8)return Vi(t,e);for(var a=t.l+e,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=khe(t,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=Nhe(t,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=t.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return e=a-t.l,e!==0&&s.push(Vi(t,e)),s}function $x(t,e,r){for(var n=t.l+e,a,s,i=[];n!=t.l;)e=n-t.l,s=t[t.l],a=g6[s]||g6[a0e[s]],(s===24||s===25)&&(a=(s===24?s0e:i0e)[t[t.l+1]]),!a||!a.f?Vi(t,e):i.push([a.n,a.f(t,e,r)]);return i}function o0e(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}e.push(a.join(","))}return e.join(";")}var l0e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function c0e(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function _j(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(t[n[0]][0]){case 357:return a=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(a=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function x6(t,e,r){var n=_j(t,e,r);return n=="#REF"?n:c0e(n,r)}function Di(t,e,r,n,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},o=[],l,A,d,h=0,m=0,g,b="";if(!t[0]||!t[0][0])return"";for(var w=-1,_="",N=0,k=t[0].length;N<k;++N){var I=t[0][N];switch(I[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),A=o.pop(),w>=0){switch(t[0][w][1][0]){case 0:_=Oa(" ",t[0][w][1][1]);break;case 1:_=Oa("\r",t[0][w][1][1]);break;default:if(_="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][w][1][0])}A=A+_,w=-1}o.push(A+l0e[I[0]]+l);break;case"PtgIsect":l=o.pop(),A=o.pop(),o.push(A+" "+l);break;case"PtgUnion":l=o.pop(),A=o.pop(),o.push(A+","+l);break;case"PtgRange":l=o.pop(),A=o.pop(),o.push(A+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Ug(I[1][1],i,a),o.push(Mg(d,s));break;case"PtgRefN":d=r?Ug(I[1][1],r,a):I[1][1],o.push(Mg(d,s));break;case"PtgRef3d":h=I[1][1],d=Ug(I[1][2],i,a),b=x6(n,h,a),o.push(b+"!"+Mg(d,s));break;case"PtgFunc":case"PtgFuncVar":var P=I[1][0],M=I[1][1];P||(P=0),P&=127;var D=P==0?[]:o.slice(-P);o.length-=P,M==="User"&&(M=D.shift()),o.push(M+"("+D.join(",")+")");break;case"PtgBool":o.push(I[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(I[1]);break;case"PtgNum":o.push(String(I[1]));break;case"PtgStr":o.push('"'+I[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(I[1]);break;case"PtgAreaN":g=KF(I[1][1],r?{s:r}:i,a),o.push(JC(g,a));break;case"PtgArea":g=KF(I[1][1],i,a),o.push(JC(g,a));break;case"PtgArea3d":h=I[1][1],g=I[1][2],b=x6(n,h,a),o.push(b+"!"+JC(g,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=I[1][2];var C=(n.names||[])[m-1]||(n[0]||[])[m],B=C?C.Name:"SH33TJSNAME"+String(m);B&&B.slice(0,6)=="_xlfn."&&!a.xlfn&&(B=B.slice(6)),o.push(B);break;case"PtgNameX":var T=I[1][1];m=I[1][2];var O;if(a.biff<=5)T<0&&(T=-T),n[T]&&(O=n[T][m]);else{var F="";if(((n[T]||[])[0]||[])[0]==14849||(((n[T]||[])[0]||[])[0]==1025?n[T][m]&&n[T][m].itab>0&&(F=n.SheetNames[n[T][m].itab-1]+"!"):F=n.SheetNames[m-1]+"!"),n[T]&&n[T][m])F+=n[T][m].Name;else if(n[0]&&n[0][m])F+=n[0][m].Name;else{var L=(_j(n,T,a)||"").split(";;");L[m-1]?F=L[m-1]:F+="SH33TJSERRX"}o.push(F);break}O||(O={Name:"SH33TJSERRY"}),o.push(O.Name);break;case"PtgParen":var Q="(",q=")";if(w>=0){switch(_="",t[0][w][1][0]){case 2:Q=Oa(" ",t[0][w][1][1])+Q;break;case 3:Q=Oa("\r",t[0][w][1][1])+Q;break;case 4:q=Oa(" ",t[0][w][1][1])+q;break;case 5:q=Oa("\r",t[0][w][1][1])+q;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][w][1][0])}w=-1}o.push(Q+o.pop()+q);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:I[1][1],r:I[1][0]};var ie={c:r.c,r:r.r};if(n.sharedf[br(d)]){var Z=n.sharedf[br(d)];o.push(Di(Z,i,ie,n,a))}else{var ee=!1;for(l=0;l!=n.arrayf.length;++l)if(A=n.arrayf[l],!(d.c<A[0].s.c||d.c>A[0].e.c)&&!(d.r<A[0].s.r||d.r>A[0].e.r)){o.push(Di(A[1],i,ie,n,a)),ee=!0;break}ee||o.push(I[1])}break;case"PtgArray":o.push("{"+o0e(I[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":w=N;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+I[1].idx+"[#"+I[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(I));default:throw new Error("Unrecognized Formula Token: "+String(I))}var ne=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&w>=0&&ne.indexOf(t[0][N][0])==-1){I=t[0][w];var z=!0;switch(I[1][0]){case 4:z=!1;case 0:_=Oa(" ",I[1][1]);break;case 5:z=!1;case 1:_=Oa("\r",I[1][1]);break;default:if(_="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+I[1][0])}o.push((z?_:"")+o.pop()+(z?"":_)),w=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function u0e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,i=t.read_shift(a);if(i==65535)return[[],Vi(t,e-2)];var o=$x(t,i,r);return e!==i+a&&(s=Wx(t,e-i-a,o,r)),t.l=n,[o,s]}function A0e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,i=t.read_shift(a);if(i==65535)return[[],Vi(t,e-2)];var o=$x(t,i,r);return e!==i+a&&(s=Wx(t,e-i-a,o,r)),t.l=n,[o,s]}function d0e(t,e,r,n){var a=t.l+e,s=$x(t,n,r),i;return a!==t.l&&(i=Wx(t,a-t.l,s,r)),[s,i]}function f0e(t,e,r){var n=t.l+e,a,s=t.read_shift(2),i=$x(t,s,r);return s==65535?[[],Vi(t,e-2)]:(e!==s+2&&(a=Wx(t,n-s-2,i,r)),[i,a])}function h0e(t){var e;if(yA(t,t.l+6)!==65535)return[ji(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function m0e(t){if(t==null){var e=lt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return Bh(t);return Bh(0)}function nE(t,e,r){var n=t.l+e,a=Du(t);r.biff==2&&++t.l;var s=h0e(t),i=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=A0e(t,n-t.l,r);return{cell:a,val:s[0],formula:o,shared:i>>3&1,tt:s[1]}}function p0e(t,e,r,n,a){var s=kh(e,r,a),i=m0e(t.v),o=lt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var A=lt(t.bf.length),d=0;d<t.bf.length;++d)A[d]=t.bf[d];var h=Ws([s,i,o,A]);return h}function Lw(t,e,r){var n=t.read_shift(4),a=$x(t,n,r),s=t.read_shift(4),i=s>0?Wx(t,s,a,r):null;return[a,i]}var g0e=Lw,Uw=Lw,x0e=Lw,v0e=Lw,y0e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Sj={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},w0e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function v6(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function b0e(t){var e="of:="+t.replace(M4,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function aE(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function C0e(t){return t.replace(/\./,"!")}var jg={},mm={},Og=typeof Map<"u";function O4(t,e,r){var n=0,a=t.length;if(r){if(Og?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=Og?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<a;++n)if(t[n].t===e)return t.Count++,n;return t[a]={t:e},t.Count++,t.Unique++,r&&(Og?(r.has(e)||r.set(e,[]),r.get(e).push(a)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(a))),a}function Mw(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(Mi=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=hx(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=gy(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function gh(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function Sf(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],a=60,s=t.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){EA(e.z,a),r.ssf[a]=e.z,r.revssf[e.z]=n=a;break}}for(a=0;a!=s;++a)if(t[a].numFmtId===n)return a;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Tj(t,e,r,n,a,s){try{n.cellNF&&(t.z=xr[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=da(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(xr[e]==null&&EA(yle[e]||"General",e),t.t==="e")t.w=t.w||zA[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=ox(t.v);else if(t.t==="d"){var i=Ls(t.v);(i|0)===i?t.w=i.toString(10):t.w=ox(i)}else{if(t.v===void 0)return"";t.w=Sh(t.v,mm)}else t.t==="d"?t.w=ql(e,Ls(t.v),mm):t.w=ql(e,t.v,mm)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=s.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=py(a.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=a.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=py(a.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=a.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&s.Fills)throw o}}}function E0e(t,e,r){if(t&&t["!ref"]){var n=bn(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function _0e(t,e){var r=bn(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=Dr(r))}var S0e=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,T0e=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,B0e=/<(?:\w:)?hyperlink [^>]*>/mg,N0e=/"(\w*:\w*)"/,k0e=/<(?:\w:)?col\b[^>]*[\/]?>/g,I0e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,F0e=/<(?:\w:)?pageMargins[^>]*\/>/g,Bj=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,R0e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,D0e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function L0e(t,e,r,n,a,s,i){if(!t)return t;n||(n={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},A="",d="",h=t.match(T0e);h?(A=t.slice(0,h.index),d=t.slice(h.index+h[0].length)):A=d=t;var m=A.match(Bj);m?Q4(m[0],o,a,r):(m=A.match(R0e))&&M0e(m[0],m[1]||"",o,a,r);var g=(A.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var b=A.slice(g,g+50).match(N0e);b&&_0e(o,b[1])}var w=A.match(D0e);w&&w[1]&&Y0e(w[1],a);var _=[];if(e.cellStyles){var N=A.match(k0e);N&&G0e(_,N)}h&&Z0e(h[1],o,e,l,s,i);var k=d.match(I0e);k&&(o["!autofilter"]=K0e(k[0]));var I=[],P=d.match(S0e);if(P)for(g=0;g!=P.length;++g)I[g]=bn(P[g].slice(P[g].indexOf('"')+1));var M=d.match(B0e);M&&H0e(o,M,n);var D=d.match(F0e);if(D&&(o["!margins"]=V0e(Sr(D[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=Dr(l)),e.sheetRows>0&&o["!ref"]){var C=bn(o["!ref"]);e.sheetRows<=+C.e.r&&(C.e.r=e.sheetRows-1,C.e.r>l.e.r&&(C.e.r=l.e.r),C.e.r<C.s.r&&(C.s.r=C.e.r),C.e.c>l.e.c&&(C.e.c=l.e.c),C.e.c<C.s.c&&(C.s.c=C.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Dr(C))}return _.length>0&&(o["!cols"]=_),I.length>0&&(o["!merges"]=I),o}function U0e(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+Dr(t[r])+'"/>';return e+"</mergeCells>"}function Q4(t,e,r,n){var a=Sr(t);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=yn(Zn(a.codeName)))}function M0e(t,e,r,n,a){Q4(t.slice(0,t.indexOf(">")),r,n,a)}function P0e(t,e,r,n,a){var s=!1,i={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[r];try{e.Workbook&&(l=e.Workbook.Sheets[r].CodeName||l)}catch{}s=!0,i.codeName=bu(zn(l))}if(t&&t["!outline"]){var A={summaryBelow:1,summaryRight:1};t["!outline"].above&&(A.summaryBelow=0),t["!outline"].left&&(A.summaryRight=0),o=(o||"")+Rt("outlinePr",null,A)}!s&&!o||(a[a.length]=Rt("sheetPr",o,i))}var j0e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],O0e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Q0e(t){var e={sheet:1};return j0e.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),O0e.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=D4(t.password).toString(16).toUpperCase()),Rt("sheetProtection",null,e)}function H0e(t,e,r){for(var n=Array.isArray(t),a=0;a!=e.length;++a){var s=Sr(Zn(e[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+yn(s.location))):(s.Target="#"+yn(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=bn(s.ref),l=o.s.r;l<=o.e.r;++l)for(var A=o.s.c;A<=o.e.c;++A){var d=br({c:A,r:l});n?(t[l]||(t[l]=[]),t[l][A]||(t[l][A]={t:"z",v:void 0}),t[l][A].l=s):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=s)}}}function V0e(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function z0e(t){return gh(t),Rt("pageMargins",null,t)}function G0e(t,e){for(var r=!1,n=0;n!=e.length;++n){var a=Sr(e[n],!0);a.hidden&&(a.hidden=ua(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,L4(a.width)),gf(a);s<=i;)t[s++]=fa(a)}}function q0e(t,e){for(var r=["<cols>"],n,a=0;a!=e.length;++a)(n=e[a])&&(r[r.length]=Rt("col",null,Mw(a,n)));return r[r.length]="</cols>",r.join("")}function K0e(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function W0e(t,e,r,n){var a=typeof t.ref=="string"?t.ref:Dr(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=To(a);i.s.r==i.e.r&&(i.e.r=To(e["!ref"]).e.r,a=Dr(i));for(var o=0;o<s.length;++o){var l=s[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Rt("autoFilter",null,{ref:a})}var $0e=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Y0e(t,e){e.Views||(e.Views=[{}]),(t.match($0e)||[]).forEach(function(r,n){var a=Sr(r);e.Views[n]||(e.Views[n]={}),+a.zoomScale&&(e.Views[n].zoom=+a.zoomScale),ua(a.rightToLeft)&&(e.Views[n].RTL=!0)})}function X0e(t,e,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Rt("sheetViews",Rt("sheetView",null,a),{})}function J0e(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var a="",s=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":a=t.v?"1":"0";break;case"n":a=""+t.v;break;case"e":a=zA[t.v];break;case"d":n&&n.cellDates?a=da(t.v,-1).toISOString():(t=fa(t),t.t="n",a=""+(t.v=Ls(da(t.v)))),typeof t.z>"u"&&(t.z=xr[14]);break;default:a=t.v;break}var o=ci("v",zn(a)),l={r:e},A=Sf(n.cellXfs,t,n);switch(A!==0&&(l.s=A),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=ci("v",""+O4(n.Strings,t.v,n.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=s&&(t.t=s,t.v=i),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=Rt("f",zn(t.f),d)+(t.v!=null?o:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(l.cm=1),Rt("c",o,l)}var Z0e=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=lx("v"),i=lx("f");return function(l,A,d,h,m,g){for(var b=0,w="",_=[],N=[],k=0,I=0,P=0,M="",D,C,B=0,T=0,O,F,L=0,Q=0,q=Array.isArray(g.CellXf),ie,Z=[],ee=[],ne=Array.isArray(A),z=[],W={},ce=!1,j=!!d.sheetStubs,K=l.split(e),X=0,te=K.length;X!=te;++X){w=K[X].trim();var le=w.length;if(le!==0){var de=0;e:for(b=0;b<le;++b)switch(w[b]){case">":if(w[b-1]!="/"){++b;break e}if(d&&d.cellStyles){if(C=Sr(w.slice(de,b),!0),B=C.r!=null?parseInt(C.r,10):B+1,T=-1,d.sheetRows&&d.sheetRows<B)continue;W={},ce=!1,C.ht&&(ce=!0,W.hpt=parseFloat(C.ht),W.hpx=Rm(W.hpt)),C.hidden=="1"&&(ce=!0,W.hidden=!0),C.outlineLevel!=null&&(ce=!0,W.level=+C.outlineLevel),ce&&(z[B-1]=W)}break;case"<":de=b;break}if(de>=b)break;if(C=Sr(w.slice(de,b),!0),B=C.r!=null?parseInt(C.r,10):B+1,T=-1,!(d.sheetRows&&d.sheetRows<B)){h.s.r>B-1&&(h.s.r=B-1),h.e.r<B-1&&(h.e.r=B-1),d&&d.cellStyles&&(W={},ce=!1,C.ht&&(ce=!0,W.hpt=parseFloat(C.ht),W.hpx=Rm(W.hpt)),C.hidden=="1"&&(ce=!0,W.hidden=!0),C.outlineLevel!=null&&(ce=!0,W.level=+C.outlineLevel),ce&&(z[B-1]=W)),_=w.slice(b).split(t);for(var me=0;me!=_.length&&_[me].trim().charAt(0)=="<";++me);for(_=_.slice(me),b=0;b!=_.length;++b)if(w=_[b].trim(),w.length!==0){if(N=w.match(r),k=b,I=0,P=0,w="<c "+(w.slice(0,1)=="<"?">":"")+w,N!=null&&N.length===2){for(k=0,M=N[1],I=0;I!=M.length&&!((P=M.charCodeAt(I)-64)<1||P>26);++I)k=26*k+P;--k,T=k}else++T;for(I=0;I!=w.length&&w.charCodeAt(I)!==62;++I);if(++I,C=Sr(w.slice(0,I),!0),C.r||(C.r=br({r:B-1,c:T})),M=w.slice(I),D={t:""},(N=M.match(s))!=null&&N[1]!==""&&(D.v=yn(N[1])),d.cellFormula){if((N=M.match(i))!=null&&N[1]!==""){if(D.f=yn(Zn(N[1])).replace(/\r\n/g,`
`),d.xlfn||(D.f=m6(D.f)),N[0].indexOf('t="array"')>-1)D.F=(M.match(a)||[])[1],D.F.indexOf(":")>-1&&Z.push([bn(D.F),D.F]);else if(N[0].indexOf('t="shared"')>-1){F=Sr(N[0]);var ge=yn(Zn(N[1]));d.xlfn||(ge=m6(ge)),ee[parseInt(F.si,10)]=[F,ge,C.r]}}else(N=M.match(/<f[^>]*\/>/))&&(F=Sr(N[0]),ee[F.si]&&(D.f=$fe(ee[F.si][1],ee[F.si][2],C.r)));var Se=Ba(C.r);for(I=0;I<Z.length;++I)Se.r>=Z[I][0].s.r&&Se.r<=Z[I][0].e.r&&Se.c>=Z[I][0].s.c&&Se.c<=Z[I][0].e.c&&(D.F=Z[I][1])}if(C.t==null&&D.v===void 0)if(D.f||D.F)D.v=0,D.t="n";else if(j)D.t="z";else continue;else D.t=C.t||"n";switch(h.s.c>T&&(h.s.c=T),h.e.c<T&&(h.e.c=T),D.t){case"n":if(D.v==""||D.v==null){if(!j)continue;D.t="z"}else D.v=parseFloat(D.v);break;case"s":if(typeof D.v>"u"){if(!j)continue;D.t="z"}else O=jg[parseInt(D.v,10)],D.v=O.t,D.r=O.r,d.cellHTML&&(D.h=O.h);break;case"str":D.t="s",D.v=D.v!=null?Zn(D.v):"",d.cellHTML&&(D.h=v4(D.v));break;case"inlineStr":N=M.match(n),D.t="s",N!=null&&(O=R4(N[1]))?(D.v=O.t,d.cellHTML&&(D.h=O.h)):D.v="";break;case"b":D.v=ua(D.v);break;case"d":d.cellDates?D.v=da(D.v,1):(D.v=Ls(da(D.v,1)),D.t="n");break;case"e":(!d||d.cellText!==!1)&&(D.w=D.v),D.v=kP[D.v];break}if(L=Q=0,ie=null,q&&C.s!==void 0&&(ie=g.CellXf[C.s],ie!=null&&(ie.numFmtId!=null&&(L=ie.numFmtId),d.cellStyles&&ie.fillId!=null&&(Q=ie.fillId))),Tj(D,L,Q,d,m,g),d.cellDates&&q&&D.t=="n"&&Jm(xr[L])&&(D.t="d",D.v=Rw(D.v)),C.cm&&d.xlmeta){var xe=(d.xlmeta.Cell||[])[+C.cm-1];xe&&xe.type=="XLDAPR"&&(D.D=!0)}if(ne){var ae=Ba(C.r);A[ae.r]||(A[ae.r]=[]),A[ae.r][ae.c]=D}else A[C.r]=D}}}}z.length>0&&(A["!rows"]=z)}}();function eme(t,e,r,n){var a=[],s=[],i=bn(t["!ref"]),o="",l,A="",d=[],h=0,m=0,g=t["!rows"],b=Array.isArray(t),w={r:A},_,N=-1;for(m=i.s.c;m<=i.e.c;++m)d[m]=Ta(m);for(h=i.s.r;h<=i.e.r;++h){for(s=[],A=is(h),m=i.s.c;m<=i.e.c;++m){l=d[m]+A;var k=b?(t[h]||[])[m]:t[l];k!==void 0&&(o=J0e(k,l,t,e))!=null&&s.push(o)}(s.length>0||g&&g[h])&&(w={r:A},g&&g[h]&&(_=g[h],_.hidden&&(w.hidden=1),N=-1,_.hpx?N=mx(_.hpx):_.hpt&&(N=_.hpt),N>-1&&(w.ht=N,w.customHeight=1),_.level&&(w.outlineLevel=_.level)),a[a.length]=Rt("row",s.join(""),w))}if(g)for(;h<g.length;++h)g&&g[h]&&(w={r:h+1},_=g[h],_.hidden&&(w.hidden=1),N=-1,_.hpx?N=mx(_.hpx):_.hpt&&(N=_.hpt),N>-1&&(w.ht=N,w.customHeight=1),_.level&&(w.outlineLevel=_.level),a[a.length]=Rt("row","",w));return a.join("")}function Nj(t,e,r,n){var a=[os,Rt("worksheet",null,{xmlns:Oh[0],"xmlns:r":Fs.r})],s=r.SheetNames[t],i=0,o="",l=r.Sheets[s];l==null&&(l={});var A=l["!ref"]||"A1",d=bn(A);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+A+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),A=Dr(d)}n||(n={}),l["!comments"]=[];var h=[];P0e(l,r,t,e,a),a[a.length]=Rt("dimension",null,{ref:A}),a[a.length]=X0e(l,e,t,r),e.sheetFormat&&(a[a.length]=Rt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(a[a.length]=q0e(l,l["!cols"])),a[i=a.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=eme(l,e),o.length>0&&(a[a.length]=o)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),l["!protect"]&&(a[a.length]=Q0e(l["!protect"])),l["!autofilter"]!=null&&(a[a.length]=W0e(l["!autofilter"],l,r,t)),l["!merges"]!=null&&l["!merges"].length>0&&(a[a.length]=U0e(l["!merges"]));var m=-1,g,b=-1;return l["!links"].length>0&&(a[a.length]="<hyperlinks>",l["!links"].forEach(function(w){w[1].Target&&(g={ref:w[0]},w[1].Target.charAt(0)!="#"&&(b=Hn(n,-1,zn(w[1].Target).replace(/#.*$/,""),Zr.HLINK),g["r:id"]="rId"+b),(m=w[1].Target.indexOf("#"))>-1&&(g.location=zn(w[1].Target.slice(m+1))),w[1].Tooltip&&(g.tooltip=zn(w[1].Tooltip)),a[a.length]=Rt("hyperlink",null,g))}),a[a.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(a[a.length]=z0e(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(a[a.length]=ci("ignoredErrors",Rt("ignoredError",null,{numberStoredAsText:1,sqref:A}))),h.length>0&&(b=Hn(n,-1,"../drawings/drawing"+(t+1)+".xml",Zr.DRAW),a[a.length]=Rt("drawing",null,{"r:id":"rId"+b}),l["!drawing"]=h),l["!comments"].length>0&&(b=Hn(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Zr.VML),a[a.length]=Rt("legacyDrawing",null,{"r:id":"rId"+b}),l["!legacy"]=b),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function tme(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var a=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function rme(t,e,r){var n=lt(145),a=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;a.hpx?s=mx(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var A={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var h=-1,m=-1,g=d<<10;g<d+1<<10;++g){A.c=g;var b=Array.isArray(r)?(r[A.r]||[])[A.c]:r[br(A)];b&&(h<0&&(h=g),m=g)}h<0||(++o,n.write_shift(4,h),n.write_shift(4,m))}var w=n.l;return n.l=l,n.write_shift(4,o),n.l=w,n.length>n.l?n.slice(0,n.l):n}function nme(t,e,r,n){var a=rme(n,r,e);(a.length>17||(e["!rows"]||[])[n])&&Et(t,0,a)}var ame=zh,sme=tp;function ime(){}function ome(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=uce(t),r}function lme(t,e,r){r==null&&(r=lt(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return fy({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),_P(t,r),r.slice(0,r.l)}function cme(t){var e=Kl(t);return[e]}function ume(t,e,r){return r==null&&(r=lt(8)),Qh(e,r)}function Ame(t){var e=Hh(t);return[e]}function dme(t,e,r){return r==null&&(r=lt(4)),Vh(e,r)}function fme(t){var e=Kl(t),r=t.read_shift(1);return[e,r,"b"]}function hme(t,e,r){return r==null&&(r=lt(9)),Qh(e,r),r.write_shift(1,t.v?1:0),r}function mme(t){var e=Hh(t),r=t.read_shift(1);return[e,r,"b"]}function pme(t,e,r){return r==null&&(r=lt(5)),Vh(e,r),r.write_shift(1,t.v?1:0),r}function gme(t){var e=Kl(t),r=t.read_shift(1);return[e,r,"e"]}function xme(t,e,r){return r==null&&(r=lt(9)),Qh(e,r),r.write_shift(1,t.v),r}function vme(t){var e=Hh(t),r=t.read_shift(1);return[e,r,"e"]}function yme(t,e,r){return r==null&&(r=lt(8)),Vh(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function wme(t){var e=Kl(t),r=t.read_shift(4);return[e,r,"s"]}function bme(t,e,r){return r==null&&(r=lt(12)),Qh(e,r),r.write_shift(4,e.v),r}function Cme(t){var e=Hh(t),r=t.read_shift(4);return[e,r,"s"]}function Eme(t,e,r){return r==null&&(r=lt(8)),Vh(e,r),r.write_shift(4,e.v),r}function _me(t){var e=Kl(t),r=ji(t);return[e,r,"n"]}function Sme(t,e,r){return r==null&&(r=lt(16)),Qh(e,r),Bh(t.v,r),r}function kj(t){var e=Hh(t),r=ji(t);return[e,r,"n"]}function Tme(t,e,r){return r==null&&(r=lt(12)),Vh(e,r),Bh(t.v,r),r}function Bme(t){var e=Kl(t),r=B4(t);return[e,r,"n"]}function Nme(t,e,r){return r==null&&(r=lt(12)),Qh(e,r),SP(t.v,r),r}function kme(t){var e=Hh(t),r=B4(t);return[e,r,"n"]}function Ime(t,e,r){return r==null&&(r=lt(8)),Vh(e,r),SP(t.v,r),r}function Fme(t){var e=Kl(t),r=_4(t);return[e,r,"is"]}function Rme(t){var e=Kl(t),r=Qi(t);return[e,r,"str"]}function Dme(t,e,r){return r==null&&(r=lt(12+4*t.v.length)),Qh(e,r),$s(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Lme(t){var e=Hh(t),r=Qi(t);return[e,r,"str"]}function Ume(t,e,r){return r==null&&(r=lt(8+4*t.v.length)),Vh(e,r),$s(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Mme(t,e,r){var n=t.l+e,a=Kl(t);a.r=r["!row"];var s=t.read_shift(1),i=[a,s,"b"];if(r.cellFormula){t.l+=2;var o=Uw(t,n-t.l,r);i[3]=Di(o,null,a,r.supbooks,r)}else t.l=n;return i}function Pme(t,e,r){var n=t.l+e,a=Kl(t);a.r=r["!row"];var s=t.read_shift(1),i=[a,s,"e"];if(r.cellFormula){t.l+=2;var o=Uw(t,n-t.l,r);i[3]=Di(o,null,a,r.supbooks,r)}else t.l=n;return i}function jme(t,e,r){var n=t.l+e,a=Kl(t);a.r=r["!row"];var s=ji(t),i=[a,s,"n"];if(r.cellFormula){t.l+=2;var o=Uw(t,n-t.l,r);i[3]=Di(o,null,a,r.supbooks,r)}else t.l=n;return i}function Ome(t,e,r){var n=t.l+e,a=Kl(t);a.r=r["!row"];var s=Qi(t),i=[a,s,"str"];if(r.cellFormula){t.l+=2;var o=Uw(t,n-t.l,r);i[3]=Di(o,null,a,r.supbooks,r)}else t.l=n;return i}var Qme=zh,Hme=tp;function Vme(t,e){return e==null&&(e=lt(4)),e.write_shift(4,t),e}function zme(t,e){var r=t.l+e,n=zh(t),a=S4(t),s=Qi(t),i=Qi(t),o=Qi(t);t.l=r;var l={rfx:n,relId:a,loc:s,display:o};return i&&(l.Tooltip=i),l}function Gme(t,e){var r=lt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));tp({s:Ba(t[0]),e:Ba(t[0])},r),T4("rId"+e,r);var n=t[1].Target.indexOf("#"),a=n==-1?"":t[1].Target.slice(n+1);return $s(a||"",r),$s(t[1].Tooltip||"",r),$s("",r),r.slice(0,r.l)}function qme(){}function Kme(t,e,r){var n=t.l+e,a=TP(t),s=t.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var o=g0e(t,n-t.l,r);i[1]=o}else t.l=n;return i}function Wme(t,e,r){var n=t.l+e,a=zh(t),s=[a];if(r.cellFormula){var i=v0e(t,n-t.l,r);s[1]=i,t.l=n}else t.l=n;return s}function $me(t,e,r){r==null&&(r=lt(18));var n=Mw(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return e.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),e.level&&(a|=e.level<<8),r.write_shift(2,a),r}var Ij=["left","right","top","bottom","header","footer"];function Yme(t){var e={};return Ij.forEach(function(r){e[r]=ji(t)}),e}function Xme(t,e){return e==null&&(e=lt(48)),gh(t),Ij.forEach(function(r){Bh(t[r],e)}),e}function Jme(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function Zme(t,e,r){r==null&&(r=lt(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function epe(t){var e=lt(24);return e.write_shift(4,4),e.write_shift(4,1),tp(t,e),e}function tpe(t,e){return e==null&&(e=lt(66)),e.write_shift(2,t.password?D4(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function rpe(){}function npe(){}function ape(t,e,r,n,a,s,i){if(!t)return t;var o=e||{};n||(n={"!id":{}});var l=o.dense?[]:{},A,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},h=!1,m=!1,g,b,w,_,N,k,I,P,M,D=[];o.biff=12,o["!row"]=0;var C=0,B=!1,T=[],O={},F=o.supbooks||a.supbooks||[[]];if(F.sharedf=O,F.arrayf=T,F.SheetNames=a.SheetNames||a.Sheets.map(function(ne){return ne.name}),!o.supbooks&&(o.supbooks=F,a.Names))for(var L=0;L<a.Names.length;++L)F[0][L+1]=a.Names[L];var Q=[],q=[],ie=!1;px[16]={n:"BrtShortReal",f:kj};var Z;if(VA(t,function(z,W,ce){if(!m)switch(ce){case 148:A=z;break;case 0:g=z,o.sheetRows&&o.sheetRows<=g.r&&(m=!0),P=is(_=g.r),o["!row"]=g.r,(z.hidden||z.hpt||z.level!=null)&&(z.hpt&&(z.hpx=Rm(z.hpt)),q[z.r]=z);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(b={t:z[2]},z[2]){case"n":b.v=z[1];break;case"s":I=jg[z[1]],b.v=I.t,b.r=I.r;break;case"b":b.v=!!z[1];break;case"e":b.v=z[1],o.cellText!==!1&&(b.w=zA[b.v]);break;case"str":b.t="s",b.v=z[1];break;case"is":b.t="s",b.v=z[1].t;break}if((w=i.CellXf[z[0].iStyleRef])&&Tj(b,w.numFmtId,null,o,s,i),N=z[0].c==-1?N+1:z[0].c,o.dense?(l[_]||(l[_]=[]),l[_][N]=b):l[Ta(N)+P]=b,o.cellFormula){for(B=!1,C=0;C<T.length;++C){var j=T[C];g.r>=j[0].s.r&&g.r<=j[0].e.r&&N>=j[0].s.c&&N<=j[0].e.c&&(b.F=Dr(j[0]),B=!0)}!B&&z.length>3&&(b.f=z[3])}if(d.s.r>g.r&&(d.s.r=g.r),d.s.c>N&&(d.s.c=N),d.e.r<g.r&&(d.e.r=g.r),d.e.c<N&&(d.e.c=N),o.cellDates&&w&&b.t=="n"&&Jm(xr[w.numFmtId])){var K=ih(b.v);K&&(b.t="d",b.v=new Date(K.y,K.m-1,K.d,K.H,K.M,K.S,K.u))}Z&&(Z.type=="XLDAPR"&&(b.D=!0),Z=void 0);break;case 1:case 12:if(!o.sheetStubs||h)break;b={t:"z",v:void 0},N=z[0].c==-1?N+1:z[0].c,o.dense?(l[_]||(l[_]=[]),l[_][N]=b):l[Ta(N)+P]=b,d.s.r>g.r&&(d.s.r=g.r),d.s.c>N&&(d.s.c=N),d.e.r<g.r&&(d.e.r=g.r),d.e.c<N&&(d.e.c=N),Z&&(Z.type=="XLDAPR"&&(b.D=!0),Z=void 0);break;case 176:D.push(z);break;case 49:Z=((o.xlmeta||{}).Cell||[])[z-1];break;case 494:var X=n["!id"][z.relId];for(X?(z.Target=X.Target,z.loc&&(z.Target+="#"+z.loc),z.Rel=X):z.relId==""&&(z.Target="#"+z.loc),_=z.rfx.s.r;_<=z.rfx.e.r;++_)for(N=z.rfx.s.c;N<=z.rfx.e.c;++N)o.dense?(l[_]||(l[_]=[]),l[_][N]||(l[_][N]={t:"z",v:void 0}),l[_][N].l=z):(k=br({c:N,r:_}),l[k]||(l[k]={t:"z",v:void 0}),l[k].l=z);break;case 426:if(!o.cellFormula)break;T.push(z),M=o.dense?l[_][N]:l[Ta(N)+P],M.f=Di(z[1],d,{r:g.r,c:N},F,o),M.F=Dr(z[0]);break;case 427:if(!o.cellFormula)break;O[br(z[0].s)]=z[1],M=o.dense?l[_][N]:l[Ta(N)+P],M.f=Di(z[1],d,{r:g.r,c:N},F,o);break;case 60:if(!o.cellStyles)break;for(;z.e>=z.s;)Q[z.e--]={width:z.w/256,hidden:!!(z.flags&1),level:z.level},ie||(ie=!0,L4(z.w/256)),gf(Q[z.e+1]);break;case 161:l["!autofilter"]={ref:Dr(z)};break;case 476:l["!margins"]=z;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),z.name&&(a.Sheets[r].CodeName=z.name),(z.above||z.left)&&(l["!outline"]={above:z.above,left:z.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),z.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:h=!0;break;case 36:h=!1;break;case 37:h=!0;break;case 38:h=!1;break;default:if(!W.T){if(!h||o.WTF)throw new Error("Unexpected record 0x"+ce.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||A&&(A.e.r>0||A.e.c>0||A.s.r>0||A.s.c>0))&&(l["!ref"]=Dr(A||d)),o.sheetRows&&l["!ref"]){var ee=bn(l["!ref"]);o.sheetRows<=+ee.e.r&&(ee.e.r=o.sheetRows-1,ee.e.r>d.e.r&&(ee.e.r=d.e.r),ee.e.r<ee.s.r&&(ee.s.r=ee.e.r),ee.e.c>d.e.c&&(ee.e.c=d.e.c),ee.e.c<ee.s.c&&(ee.s.c=ee.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Dr(ee))}return D.length>0&&(l["!merges"]=D),Q.length>0&&(l["!cols"]=Q),q.length>0&&(l["!rows"]=q),l}function spe(t,e,r,n,a,s,i){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=fa(e),e.z=e.z||xr[14],e.v=Ls(da(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r,c:n};switch(l.s=Sf(a.cellXfs,e,a),e.l&&s["!links"].push([br(l),e.l]),e.c&&s["!comments"].push([br(l),e.c]),e.t){case"s":case"str":return a.bookSST?(o=O4(a.Strings,e.v,a.revStrings),l.t="s",l.v=o,i?Et(t,18,Eme(e,l)):Et(t,7,bme(e,l))):(l.t="str",i?Et(t,17,Ume(e,l)):Et(t,6,Dme(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?i?Et(t,13,Ime(e,l)):Et(t,2,Nme(e,l)):i?Et(t,16,Tme(e,l)):Et(t,5,Sme(e,l)),!0;case"b":return l.t="b",i?Et(t,15,pme(e,l)):Et(t,4,hme(e,l)),!0;case"e":return l.t="e",i?Et(t,14,yme(e,l)):Et(t,3,xme(e,l)),!0}return i?Et(t,12,dme(e,l)):Et(t,1,ume(e,l)),!0}function ipe(t,e,r,n){var a=bn(e["!ref"]||"A1"),s,i="",o=[];Et(t,145);var l=Array.isArray(e),A=a.e.r;e["!rows"]&&(A=Math.max(a.e.r,e["!rows"].length-1));for(var d=a.s.r;d<=A;++d){i=is(d),nme(t,e,a,d);var h=!1;if(d<=a.e.r)for(var m=a.s.c;m<=a.e.c;++m){d===a.s.r&&(o[m]=Ta(m)),s=o[m]+i;var g=l?(e[d]||[])[m]:e[s];if(!g){h=!1;continue}h=spe(t,g,d,m,n,e,h)}}Et(t,146)}function ope(t,e){!e||!e["!merges"]||(Et(t,177,Vme(e["!merges"].length)),e["!merges"].forEach(function(r){Et(t,176,Hme(r))}),Et(t,178))}function lpe(t,e){!e||!e["!cols"]||(Et(t,390),e["!cols"].forEach(function(r,n){r&&Et(t,60,$me(n,r))}),Et(t,391))}function cpe(t,e){!e||!e["!ref"]||(Et(t,648),Et(t,649,epe(bn(e["!ref"]))),Et(t,650))}function upe(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var a=Hn(r,-1,n[1].Target.replace(/#.*$/,""),Zr.HLINK);Et(t,494,Gme(n,a))}}),delete e["!links"]}function Ape(t,e,r,n){if(e["!comments"].length>0){var a=Hn(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Zr.VML);Et(t,551,T4("rId"+a)),e["!legacy"]=a}}function dpe(t,e,r,n){if(e["!autofilter"]){var a=e["!autofilter"],s=typeof a.ref=="string"?a.ref:Dr(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=To(s);o.s.r==o.e.r&&(o.e.r=To(e["!ref"]).e.r,s=Dr(o));for(var l=0;l<i.length;++l){var A=i[l];if(A.Name=="_xlnm._FilterDatabase"&&A.Sheet==n){A.Ref="'"+r.SheetNames[n]+"'!"+s;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Et(t,161,tp(bn(s))),Et(t,162)}}function fpe(t,e,r){Et(t,133),Et(t,137,Zme(e,r)),Et(t,138),Et(t,134)}function hpe(t,e){e["!protect"]&&Et(t,535,tpe(e["!protect"]))}function mpe(t,e,r,n){var a=Eo(),s=r.SheetNames[t],i=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[t].CodeName||o)}catch{}var l=bn(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Et(a,129),(r.vbaraw||i["!outline"])&&Et(a,147,lme(o,i["!outline"])),Et(a,148,sme(l)),fpe(a,i,r.Workbook),lpe(a,i),ipe(a,i,t,e),hpe(a,i),dpe(a,i,r,t),ope(a,i),upe(a,i,n),i["!margins"]&&Et(a,476,Xme(i["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&cpe(a,i),Ape(a,i,t,n),Et(a,130),a.end()}function ppe(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(e[+i[1]]=r?+i[2]:i[2])});var a=yn((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[e,a,n]}function gpe(t,e,r,n,a,s){var i=s||{"!type":"chart"};if(!t)return s;var o=0,l=0,A="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(h){var m=ppe(h);d.s.r=d.s.c=0,d.e.c=o,A=Ta(o),m[0].forEach(function(g,b){i[A+is(b)]={t:"n",v:g,z:m[1]},l=b}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(i["!ref"]=Dr(d)),i}function xpe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,o=t.match(Bj);return o&&Q4(o[0],s,a,r),(i=t.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function vpe(t,e){t.l+=10;var r=Qi(t);return{name:r}}function ype(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return VA(t,function(l,A,d){switch(d){case 550:s["!rel"]=l;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),l.name&&(a.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(A.T>0)){if(!(A.T<0)){if(!i||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var H4=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],wpe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],bpe=[],Cpe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function y6(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],a=0;a!=e.length;++a){var s=e[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=ua(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function w6(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=ua(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function Fj(t){w6(t.WBProps,H4),w6(t.CalcPr,Cpe),y6(t.WBView,wpe),y6(t.Sheets,bpe),mm.date1904=ua(t.WBProps.date1904)}function Epe(t){return!t.Workbook||!t.Workbook.WBProps?"false":ua(t.Workbook.WBProps.date1904)?"true":"false"}var _pe="][*?/\\".split("");function Rj(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return _pe.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function Spe(t,e,r){t.forEach(function(n,a){Rj(n);for(var s=0;s<a;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=e&&e[a]&&e[a].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function Tpe(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];Spe(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)E0e(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var Bpe=/<\w+:workbook/;function Npe(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(t.replace(Gi,function(l,A){var d=Sr(l);switch(Ru(d[0])){case"<?xml":break;case"<workbook":l.match(Bpe)&&(a="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":H4.forEach(function(h){if(d[h[0]]!=null)switch(h[2]){case"bool":r.WBProps[h[0]]=ua(d[h[0]]);break;case"int":r.WBProps[h[0]]=parseInt(d[h[0]],10);break;default:r.WBProps[h[0]]=d[h[0]]}}),d.codeName&&(r.WBProps.CodeName=Zn(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=yn(Zn(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Zn(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),ua(d.hidden||"0")&&(s.Hidden=!0),i=A+l.length;break;case"</definedName>":s.Ref=yn(Zn(t.slice(i,A))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),Oh.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Fj(r),r}function Dj(t){var e=[os];e[e.length]=Rt("workbook",null,{xmlns:Oh[0],"xmlns:r":Fs.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(H4.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Rt("workbookPr",null,n);var a=t.Workbook&&t.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var i={name:zn(t.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}e[e.length]=Rt("sheet",null,i)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=Rt("definedName",zn(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function kpe(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=Z_(t),r.name=Qi(t),r}function Ipe(t,e){return e||(e=lt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),T4(t.strRelID,e),$s(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function Fpe(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var a=e>8?Qi(t):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function Rpe(t,e){e||(e=lt(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),_P(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function Dpe(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function Lpe(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var a=t.read_shift(4),s=Ace(t),i=x0e(t,0,r),o=S4(t);t.l=n;var l={Name:s,Ptg:i};return a<268435455&&(l.Sheet=a),o&&(l.Comment=o),l}function Upe(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;e||(e={}),e.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],px[16]={n:"BrtFRTArchID$",f:Dpe},VA(t,function(l,A,d){switch(d){case 156:i.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=Di(l.Ptg,null,null,i,e),delete e.SID,delete l.Ptg,s.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,l]):i[0]=[d,l],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(l),i.XTI=i.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!A.T){if(!a||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),Fj(r),r.Names=s,r.supbooks=i,r}function Mpe(t,e){Et(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};Et(t,156,Ipe(a))}Et(t,144)}function Ppe(t,e){e||(e=lt(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return $s("SheetJS",e),$s(iy.version,e),$s(iy.version,e),$s("7262",e),e.length>e.l?e.slice(0,e.l):e}function jpe(t,e){e||(e=lt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function Ope(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(Et(t,135),Et(t,158,jpe(a)),Et(t,136))}}function Qpe(t,e){var r=Eo();return Et(r,131),Et(r,128,Ppe()),Et(r,153,Rpe(t.Workbook&&t.Workbook.WBProps||null)),Ope(r,t),Mpe(r,t),Et(r,132),r.end()}function Hpe(t,e,r){return e.slice(-4)===".bin"?Upe(t,r):Npe(t,r)}function Vpe(t,e,r,n,a,s,i,o){return e.slice(-4)===".bin"?ape(t,n,r,a,s,i,o):L0e(t,n,r,a,s,i,o)}function zpe(t,e,r,n,a,s,i,o){return e.slice(-4)===".bin"?ype(t,n,r,a,s):xpe(t,n,r,a,s)}function Gpe(t,e,r,n,a,s,i,o){return e.slice(-4)===".bin"?Kfe():Wfe()}function qpe(t,e,r,n,a,s,i,o){return e.slice(-4)===".bin"?Gfe():qfe()}function Kpe(t,e,r,n){return e.slice(-4)===".bin"?Hde(t,r,n):kde(t,r,n)}function Wpe(t,e,r){return hj(t,r)}function $pe(t,e,r){return e.slice(-4)===".bin"?$Ae(t,r):qAe(t,r)}function Ype(t,e,r){return e.slice(-4)===".bin"?Ofe(t,r):Ife(t,r)}function Xpe(t,e,r){return e.slice(-4)===".bin"?Bfe(t):Sfe(t)}function Jpe(t,e,r,n){return r.slice(-4)===".bin"?Nfe(t,e,r,n):void 0}function Zpe(t,e,r){return e.slice(-4)===".bin"?Cfe(t,e,r):_fe(t,e,r)}function ege(t,e,r){return(e.slice(-4)===".bin"?Qpe:Dj)(t)}function tge(t,e,r,n,a){return(e.slice(-4)===".bin"?mpe:Nj)(t,r,n,a)}function rge(t,e,r){return(e.slice(-4)===".bin"?Jde:dj)(t,r)}function nge(t,e,r){return(e.slice(-4)===".bin"?JAe:aj)(t,r)}function age(t,e,r){return(e.slice(-4)===".bin"?Qfe:gj)(t)}function sge(t){return(t.slice(-4)===".bin"?Efe:mj)()}var Lj=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Uj=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function vc(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=t.match(Lj),s,i,o,l;if(a)for(l=0;l!=a.length;++l)s=a[l].match(Uj),(i=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),n[o]=s[2].slice(1,s[2].length-1));return n}function ige(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(Lj),a,s,i,o;if(n)for(o=0;o!=n.length;++o)a=n[o].match(Uj),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),r[i]=a[2].slice(1,a[2].length-1));return r}var Qg;function oge(t,e){var r=Qg[t]||yn(t);return r==="General"?Sh(e):ql(r,e)}function lge(t,e,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=ua(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=da(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[yn(e)]=a}function cge(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||zA[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=ox(t.v):t.w=Sh(t.v):t.w=oge(e||"General",t.v)}catch(s){if(r.WTF)throw s}try{var n=Qg[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&Jm(n)){var a=ih(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function uge(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=bde[n.Pattern]||n.Pattern)}t[e.ID]=e}function Age(t,e,r,n,a,s,i,o,l,A){var d="General",h=n.StyleID,m={};A=A||{};var g=[],b=0;for(h===void 0&&o&&(h=o.StyleID),h===void 0&&i&&(h=i.StyleID);s[h]!==void 0&&(s[h].nf&&(d=s[h].nf),s[h].Interior&&g.push(s[h].Interior),!!s[h].Parent);)h=s[h].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=ua(t);break;case"String":n.t="s",n.r=PF(yn(t)),n.v=t.indexOf("<")>-1?yn(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(da(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=yn(t):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=kP[t],A.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=PF(e||t));break}if(cge(n,d,A),A.cellFormula!==!1)if(n.Formula){var w=yn(n.Formula);w.charCodeAt(0)==61&&(w=w.slice(1)),n.f=hm(w,a),delete n.Formula,n.ArrayRange=="RC"?n.F=hm("RC:RC",a):n.ArrayRange&&(n.F=hm(n.ArrayRange,a),l.push([bn(n.F),n.F]))}else for(b=0;b<l.length;++b)a.r>=l[b][0].s.r&&a.r<=l[b][0].e.r&&a.c>=l[b][0].s.c&&a.c<=l[b][0].e.c&&(n.F=l[b][1]);A.cellStyles&&(g.forEach(function(_){!m.patternType&&_.patternType&&(m.patternType=_.patternType)}),n.s=m),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function dge(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function sE(t,e){var r=e||{};Zm();var n=dg(y4(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Zn(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=fa(r);return i.type="string",Fm.to_workbook(n,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(tt){a.indexOf("<"+tt)>=0&&(s=!0)}),s)return Xge(n,r);Qg={"General Number":"General","General Date":xr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":xr[15],"Short Date":xr[14],"Long Time":xr[19],"Medium Time":xr[18],"Short Time":xr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:xr[2],Standard:xr[4],Percent:xr[10],Scientific:xr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],A,d={},h=[],m=r.dense?[]:{},g="",b={},w={},_=vc('<Data ss:Type="String">'),N=0,k=0,I=0,P={s:{r:2e6,c:2e6},e:{r:0,c:0}},M={},D={},C="",B=0,T=[],O={},F={},L=0,Q=[],q=[],ie={},Z=[],ee,ne=!1,z=[],W=[],ce={},j=0,K=0,X={Sheets:[],WBProps:{date1904:!1}},te={};ux.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var le="";o=ux.exec(n);)switch(o[3]=(le=o[3]).toLowerCase()){case"data":if(le=="data"){if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?Age(n.slice(N,o.index),C,_,l[l.length-1][0]=="comment"?ie:b,{c:k,r:I},M,Z[k],w,z,r):(C="",_=vc(o[0]),N=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(q.length>0&&(b.c=q),(!r.sheetRows||r.sheetRows>I)&&b.v!==void 0&&(r.dense?(m[I]||(m[I]=[]),m[I][k]=b):m[Ta(k)+is(I)]=b),b.HRef&&(b.l={Target:yn(b.HRef)},b.HRefScreenTip&&(b.l.Tooltip=b.HRefScreenTip),delete b.HRef,delete b.HRefScreenTip),(b.MergeAcross||b.MergeDown)&&(j=k+(parseInt(b.MergeAcross,10)|0),K=I+(parseInt(b.MergeDown,10)|0),T.push({s:{c:k,r:I},e:{c:j,r:K}})),!r.sheetStubs)b.MergeAcross?k=j+1:++k;else if(b.MergeAcross||b.MergeDown){for(var de=k;de<=j;++de)for(var me=I;me<=K;++me)(de>k||me>I)&&(r.dense?(m[me]||(m[me]=[]),m[me][de]={t:"z"}):m[Ta(de)+is(me)]={t:"z"});k=j+1}else++k;else b=ige(o[0]),b.Index&&(k=+b.Index-1),k<P.s.c&&(P.s.c=k),k>P.e.c&&(P.e.c=k),o[0].slice(-2)==="/>"&&++k,q=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(I<P.s.r&&(P.s.r=I),I>P.e.r&&(P.e.r=I),o[0].slice(-2)==="/>"&&(w=vc(o[0]),w.Index&&(I=+w.Index-1)),k=0,++I):(w=vc(o[0]),w.Index&&(I=+w.Index-1),ce={},(w.AutoFitHeight=="0"||w.Height)&&(ce.hpx=parseInt(w.Height,10),ce.hpt=mx(ce.hpx),W[I]=ce),w.Hidden=="1"&&(ce.hidden=!0,W[I]=ce));break;case"worksheet":if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"));h.push(g),P.s.r<=P.e.r&&P.s.c<=P.e.c&&(m["!ref"]=Dr(P),r.sheetRows&&r.sheetRows<=P.e.r&&(m["!fullref"]=m["!ref"],P.e.r=r.sheetRows-1,m["!ref"]=Dr(P))),T.length&&(m["!merges"]=T),Z.length>0&&(m["!cols"]=Z),W.length>0&&(m["!rows"]=W),d[g]=m}else P={s:{r:2e6,c:2e6},e:{r:0,c:0}},I=k=0,l.push([o[3],!1]),A=vc(o[0]),g=yn(A.Name),m=r.dense?[]:{},T=[],z=[],W=[],te={name:g,Hidden:0},X.Sheets.push(te);break;case"table":if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),Z=[],ne=!1}break;case"style":o[1]==="/"?uge(M,D,r):D=vc(o[0]);break;case"numberformat":D.nf=yn(vc(o[0]).Format||"General"),Qg[D.nf]&&(D.nf=Qg[D.nf]);for(var ge=0;ge!=392&&xr[ge]!=D.nf;++ge);if(ge==392){for(ge=57;ge!=392;++ge)if(xr[ge]==null){EA(D.nf,ge);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(ee=vc(o[0]),ee.Hidden&&(ee.hidden=!0,delete ee.Hidden),ee.Width&&(ee.wpx=parseInt(ee.Width,10)),!ne&&ee.wpx>10){ne=!0,Mi=uj;for(var Se=0;Se<Z.length;++Se)Z[Se]&&gf(Z[Se])}ne&&gf(ee),Z[ee.Index-1||Z.length]=ee;for(var xe=0;xe<+ee.Span;++xe)Z[Z.length]=fa(ee);break;case"namedrange":if(o[1]==="/")break;X.Names||(X.Names=[]);var ae=Sr(o[0]),Fe={Name:ae.Name,Ref:hm(ae.RefersTo.slice(1),{r:0,c:0})};X.Sheets.length>0&&(Fe.Sheet=X.Sheets.length-1),X.Names.push(Fe);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?C+=n.slice(B,o.index):B=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;D.Interior=vc(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?Uce(O,le,n.slice(L,o.index)):L=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"));dge(ie),q.push(ie)}else l.push([o[3],!1]),A=vc(o[0]),ie={a:A.Author};break;case"autofilter":if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Xe=vc(o[0]);m["!autofilter"]={ref:hm(Xe.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return S6(n,r);var De=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:De=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:De=!1}break;case"excelworkbook":switch(o[3]){case"date1904":X.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:De=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:De=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(L,o.index)){case"SheetHidden":te.Hidden=1;break;case"SheetVeryHidden":te.Hidden=2;break}else L=o.index+o[0].length;break;case"header":m["!margins"]||gh(m["!margins"]={},"xlml"),isNaN(+Sr(o[0]).Margin)||(m["!margins"].header=+Sr(o[0]).Margin);break;case"footer":m["!margins"]||gh(m["!margins"]={},"xlml"),isNaN(+Sr(o[0]).Margin)||(m["!margins"].footer=+Sr(o[0]).Margin);break;case"pagemargins":var Ce=Sr(o[0]);m["!margins"]||gh(m["!margins"]={},"xlml"),isNaN(+Ce.Top)||(m["!margins"].top=+Ce.Top),isNaN(+Ce.Left)||(m["!margins"].left=+Ce.Left),isNaN(+Ce.Right)||(m["!margins"].right=+Ce.Right),isNaN(+Ce.Bottom)||(m["!margins"].bottom=+Ce.Bottom);break;case"displayrighttoleft":X.Views||(X.Views=[]),X.Views[0]||(X.Views[0]={}),X.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:De=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:De=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:De=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:De=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:De=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:De=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:De=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:De=!1}break;case"smarttags":break;default:De=!1;break}if(De||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?lge(F,le,Q,n.slice(L,o.index)):(Q=o,L=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var ze={};return!r.bookSheets&&!r.bookProps&&(ze.Sheets=d),ze.SheetNames=h,ze.Workbook=X,ze.SSF=fa(xr),ze.Props=O,ze.Custprops=F,ze}function i5(t,e){switch(z4(e=e||{}),e.type||"base64"){case"base64":return sE(nl(t),e);case"binary":case"buffer":case"file":return sE(t,e);case"array":return sE(Ef(t),e)}}function fge(t,e){var r=[];return t.Props&&r.push(Mce(t.Props,e)),t.Custprops&&r.push(Pce(t.Props,t.Custprops)),r.join("")}function hge(){return""}function mge(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,a){var s=[];s.push(Rt("NumberFormat",null,{"ss:Format":zn(xr[n.numFmtId])}));var i={"ss:ID":"s"+(21+a)};r.push(Rt("Style",s.join(""),i))}),Rt("Styles",r.join(""))}function Mj(t){return Rt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+P4(t.Ref,{r:0,c:0})})}function pge(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var a=e[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(Mj(a)))}return Rt("Names",r.join(""))}function gge(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var o=a[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(Mj(o)))}return s.join("")}function xge(t,e,r,n){if(!t)return"";var a=[];if(t["!margins"]&&(a.push("<PageSetup>"),t["!margins"].header&&a.push(Rt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&a.push(Rt("Footer",null,{"x:Margin":t["!margins"].footer})),a.push(Rt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Rt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),t["!protect"]&&(a.push(ci("ProtectContents","True")),t["!protect"].objects&&a.push(ci("ProtectObjects","True")),t["!protect"].scenarios&&a.push(ci("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?a.push(ci("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&a.push(ci("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":Rt("WorksheetOptions",a.join(""),{xmlns:$o.x})}function vge(t){return t.map(function(e){var r=Ole(e.t||""),n=Rt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Rt("Comment",n,{"ss:Author":e.a})}).join("")}function yge(t,e,r,n,a,s,i){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+zn(P4(t.f,i))),t.F&&t.F.slice(0,e.length)==e){var l=Ba(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=zn(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=zn(t.l.Tooltip))),r["!merges"])for(var A=r["!merges"],d=0;d!=A.length;++d)A[d].s.c!=i.c||A[d].s.r!=i.r||(A[d].e.c>A[d].s.c&&(o["ss:MergeAcross"]=A[d].e.c-A[d].s.c),A[d].e.r>A[d].s.r&&(o["ss:MergeDown"]=A[d].e.r-A[d].s.r));var h="",m="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":h="Number",m=String(t.v);break;case"b":h="Boolean",m=t.v?"1":"0";break;case"e":h="Error",m=zA[t.v];break;case"d":h="DateTime",m=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||xr[14]);break;case"s":h="String",m=jle(t.v||"");break}var g=Sf(n.cellXfs,t,n);o["ss:StyleID"]="s"+(21+g),o["ss:Index"]=i.c+1;var b=t.v!=null?m:"",w=t.t=="z"?"":'<Data ss:Type="'+h+'">'+b+"</Data>";return(t.c||[]).length>0&&(w+=vge(t.c)),Rt("Cell",w,o)}function wge(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=Rm(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function bge(t,e,r,n){if(!t["!ref"])return"";var a=bn(t["!ref"]),s=t["!merges"]||[],i=0,o=[];t["!cols"]&&t["!cols"].forEach(function(_,N){gf(_);var k=!!_.width,I=Mw(N,_),P={"ss:Index":N+1};k&&(P["ss:Width"]=fx(I.width)),_.hidden&&(P["ss:Hidden"]="1"),o.push(Rt("Column",null,P))});for(var l=Array.isArray(t),A=a.s.r;A<=a.e.r;++A){for(var d=[wge(A,(t["!rows"]||[])[A])],h=a.s.c;h<=a.e.c;++h){var m=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>h)&&!(s[i].s.r>A)&&!(s[i].e.c<h)&&!(s[i].e.r<A)){(s[i].s.c!=h||s[i].s.r!=A)&&(m=!0);break}if(!m){var g={r:A,c:h},b=br(g),w=l?(t[A]||[])[h]:t[b];d.push(yge(w,b,t,e,r,n,g))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function Cge(t,e,r){var n=[],a=r.SheetNames[t],s=r.Sheets[a],i=s?gge(s,e,t,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?bge(s,e,t,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(xge(s,e,t,r)),n.join("")}function Ege(t,e){e||(e={}),t.SSF||(t.SSF=fa(xr)),t.SSF&&(Zm(),kw(t.SSF),e.revssf=Fw(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Sf(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(fge(t,e)),r.push(hge()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Rt("Worksheet",Cge(n,e,t),{"ss:Name":zn(t.SheetNames[n])}));return r[2]=mge(t,e),r[3]=pge(t),os+Rt("Workbook",r.join(""),{xmlns:$o.ss,"xmlns:o":$o.o,"xmlns:x":$o.x,"xmlns:ss":$o.ss,"xmlns:dt":$o.dt,"xmlns:html":$o.html})}function _ge(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=pce(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=gce(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var Sge=[60,1084,2066,2165,2175];function Tge(t,e,r,n,a){var s=n,i=[],o=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(o)}i.push(o),r.l+=s;for(var l=yA(r,r.l),A=o5[l],d=0;A!=null&&Sge.indexOf(l)>-1;)s=yA(r,r.l+2),d=r.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=r.slice(d,r.l+4+s),i.push(o),r.l+=4+s,A=o5[l=yA(r,r.l)];var h=Ws(i);oi(h,0);var m=0;h.lens=[];for(var g=0;g<i.length;++g)h.lens.push(m),m+=i[g].length;if(h.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+h.length+" < "+n;return e.f(h,h.length,a)}function hu(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=xr[n])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||zA[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=ox(t.v):t.w=Sh(t.v):t.w=ql(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&n&&t.t=="n"&&Jm(xr[n]||String(n))){var a=ih(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function Ev(t,e,r){return{v:t,ixfe:e,t:r}}function Bge(t,e){var r={opts:{}},n={},a=e.dense?[]:{},s={},i={},o=null,l=[],A="",d={},h,m="",g,b,w,_,N={},k=[],I,P,M=[],D=[],C={Sheets:[],WBProps:{date1904:!1},Views:[{}]},B={},T=function(kt){return kt<8?hh[kt]:kt<64&&D[kt-8]||hh[kt]},O=function(kt,xt,vr){var Wt=xt.XF.data;if(!(!Wt||!Wt.patternType||!vr||!vr.cellStyles)){xt.s={},xt.s.patternType=Wt.patternType;var un;(un=dx(T(Wt.icvFore)))&&(xt.s.fgColor={rgb:un}),(un=dx(T(Wt.icvBack)))&&(xt.s.bgColor={rgb:un})}},F=function(kt,xt,vr){if(!(ce>1)&&!(vr.sheetRows&&kt.r>=vr.sheetRows)){if(vr.cellStyles&&xt.XF&&xt.XF.data&&O(kt,xt,vr),delete xt.ixfe,delete xt.XF,h=kt,m=br(kt),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),kt.r<i.s.r&&(i.s.r=kt.r),kt.c<i.s.c&&(i.s.c=kt.c),kt.r+1>i.e.r&&(i.e.r=kt.r+1),kt.c+1>i.e.c&&(i.e.c=kt.c+1),vr.cellFormula&&xt.f){for(var Wt=0;Wt<k.length;++Wt)if(!(k[Wt][0].s.c>kt.c||k[Wt][0].s.r>kt.r)&&!(k[Wt][0].e.c<kt.c||k[Wt][0].e.r<kt.r)){xt.F=Dr(k[Wt][0]),(k[Wt][0].s.c!=kt.c||k[Wt][0].s.r!=kt.r)&&delete xt.f,xt.f&&(xt.f=""+Di(k[Wt][1],i,kt,z,L));break}}vr.dense?(a[kt.r]||(a[kt.r]=[]),a[kt.r][kt.c]=xt):a[m]=xt}},L={enc:!1,sbcch:0,snames:[],sharedf:N,arrayf:k,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(L.password=e.password);var Q,q=[],ie=[],Z=[],ee=[],ne=!1,z=[];z.SheetNames=L.snames,z.sharedf=L.sharedf,z.arrayf=L.arrayf,z.names=[],z.XTI=[];var W=0,ce=0,j=0,K=[],X=[],te;L.codepage=1200,Sc(1200);for(var le=!1;t.l<t.length-1;){var de=t.l,me=t.read_shift(2);if(me===0&&W===10)break;var ge=t.l===t.length?0:t.read_shift(2),Se=o5[me];if(Se&&Se.f){if(e.bookSheets&&W===133&&me!==133)break;if(W=me,Se.r===2||Se.r==12){var xe=t.read_shift(2);if(ge-=2,!L.enc&&xe!==me&&((xe&255)<<8|xe>>8)!==me)throw new Error("rt mismatch: "+xe+"!="+me);Se.r==12&&(t.l+=10,ge-=10)}var ae={};if(me===10?ae=Se.f(t,ge,L):ae=Tge(me,Se,t,ge,L),ce==0&&[9,521,1033,2057].indexOf(W)===-1)continue;switch(me){case 34:r.opts.Date1904=C.WBProps.date1904=ae;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(L.enc||(t.l=0),L.enc=ae,!e.password)throw new Error("File is password-protected");if(ae.valid==null)throw new Error("Encryption scheme unsupported");if(!ae.valid)throw new Error("Password is incorrect");break;case 92:L.lastuser=ae;break;case 66:var Fe=Number(ae);switch(Fe){case 21010:Fe=1200;break;case 32768:Fe=1e4;break;case 32769:Fe=1252;break}Sc(L.codepage=Fe),le=!0;break;case 317:L.rrtabid=ae;break;case 25:L.winlocked=ae;break;case 439:r.opts.RefreshAll=ae;break;case 12:r.opts.CalcCount=ae;break;case 16:r.opts.CalcDelta=ae;break;case 17:r.opts.CalcIter=ae;break;case 13:r.opts.CalcMode=ae;break;case 14:r.opts.CalcPrecision=ae;break;case 95:r.opts.CalcSaveRecalc=ae;break;case 15:L.CalcRefMode=ae;break;case 2211:r.opts.FullCalc=ae;break;case 129:ae.fDialog&&(a["!type"]="dialog"),ae.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),ae.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:M.push(ae);break;case 430:z.push([ae]),z[z.length-1].XTI=[];break;case 35:case 547:z[z.length-1].push(ae);break;case 24:case 536:te={Name:ae.Name,Ref:Di(ae.rgce,i,null,z,L)},ae.itab>0&&(te.Sheet=ae.itab-1),z.names.push(te),z[0]||(z[0]=[],z[0].XTI=[]),z[z.length-1].push(ae),ae.Name=="_xlnm._FilterDatabase"&&ae.itab>0&&ae.rgce&&ae.rgce[0]&&ae.rgce[0][0]&&ae.rgce[0][0][0]=="PtgArea3d"&&(X[ae.itab-1]={ref:Dr(ae.rgce[0][0][1][2])});break;case 22:L.ExternCount=ae;break;case 23:z.length==0&&(z[0]=[],z[0].XTI=[]),z[z.length-1].XTI=z[z.length-1].XTI.concat(ae),z.XTI=z.XTI.concat(ae);break;case 2196:if(L.biff<8)break;te!=null&&(te.Comment=ae[1]);break;case 18:a["!protect"]=ae;break;case 19:ae!==0&&L.WTF&&console.error("Password verifier: "+ae);break;case 133:s[ae.pos]=ae,L.snames.push(ae.name);break;case 10:{if(--ce)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=Dr(i),e.sheetRows&&e.sheetRows<=i.e.r){var Xe=i.e.r;i.e.r=e.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=Dr(i),i.e.r=Xe}i.e.r++,i.e.c++}q.length>0&&(a["!merges"]=q),ie.length>0&&(a["!objects"]=ie),Z.length>0&&(a["!cols"]=Z),ee.length>0&&(a["!rows"]=ee),C.Sheets.push(B)}A===""?d=a:n[A]=a,a=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(L.biff===8&&(L.biff={9:2,521:3,1033:4}[me]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ae.BIFFVer]||8),L.biffguess=ae.BIFFVer==0,ae.BIFFVer==0&&ae.dt==4096&&(L.biff=5,le=!0,Sc(L.codepage=28591)),L.biff==8&&ae.BIFFVer==0&&ae.dt==16&&(L.biff=2),ce++)break;if(a=e.dense?[]:{},L.biff<8&&!le&&(le=!0,Sc(L.codepage=e.codepage||1252)),L.biff<5||ae.BIFFVer==0&&ae.dt==4096){A===""&&(A="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var De={pos:t.l-ge,name:A};s[De.pos]=De,L.snames.push(A)}else A=(s[de]||{name:""}).name;ae.dt==32&&(a["!type"]="chart"),ae.dt==64&&(a["!type"]="macro"),q=[],ie=[],L.arrayf=k=[],Z=[],ee=[],ne=!1,B={Hidden:(s[de]||{hs:0}).hs,name:A}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(e.dense?(a[ae.r]||[])[ae.c]:a[br({c:ae.c,r:ae.r})])&&++ae.c,I={ixfe:ae.ixfe,XF:M[ae.ixfe]||{},v:ae.val,t:"n"},j>0&&(I.z=K[I.ixfe>>8&63]),hu(I,e,r.opts.Date1904),F({c:ae.c,r:ae.r},I,e);break;case 5:case 517:I={ixfe:ae.ixfe,XF:M[ae.ixfe],v:ae.val,t:ae.t},j>0&&(I.z=K[I.ixfe>>8&63]),hu(I,e,r.opts.Date1904),F({c:ae.c,r:ae.r},I,e);break;case 638:I={ixfe:ae.ixfe,XF:M[ae.ixfe],v:ae.rknum,t:"n"},j>0&&(I.z=K[I.ixfe>>8&63]),hu(I,e,r.opts.Date1904),F({c:ae.c,r:ae.r},I,e);break;case 189:for(var Ce=ae.c;Ce<=ae.C;++Ce){var ze=ae.rkrec[Ce-ae.c][0];I={ixfe:ze,XF:M[ze],v:ae.rkrec[Ce-ae.c][1],t:"n"},j>0&&(I.z=K[I.ixfe>>8&63]),hu(I,e,r.opts.Date1904),F({c:Ce,r:ae.r},I,e)}break;case 6:case 518:case 1030:{if(ae.val=="String"){o=ae;break}if(I=Ev(ae.val,ae.cell.ixfe,ae.tt),I.XF=M[I.ixfe],e.cellFormula){var tt=ae.formula;if(tt&&tt[0]&&tt[0][0]&&tt[0][0][0]=="PtgExp"){var it=tt[0][0][1][0],dt=tt[0][0][1][1],Ct=br({r:it,c:dt});N[Ct]?I.f=""+Di(ae.formula,i,ae.cell,z,L):I.F=((e.dense?(a[it]||[])[dt]:a[Ct])||{}).F}else I.f=""+Di(ae.formula,i,ae.cell,z,L)}j>0&&(I.z=K[I.ixfe>>8&63]),hu(I,e,r.opts.Date1904),F(ae.cell,I,e),o=ae}break;case 7:case 519:if(o)o.val=ae,I=Ev(ae,o.cell.ixfe,"s"),I.XF=M[I.ixfe],e.cellFormula&&(I.f=""+Di(o.formula,i,o.cell,z,L)),j>0&&(I.z=K[I.ixfe>>8&63]),hu(I,e,r.opts.Date1904),F(o.cell,I,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{k.push(ae);var ut=br(ae[0].s);if(g=e.dense?(a[ae[0].s.r]||[])[ae[0].s.c]:a[ut],e.cellFormula&&g){if(!o||!ut||!g)break;g.f=""+Di(ae[1],i,ae[0],z,L),g.F=Dr(ae[0])}}break;case 1212:{if(!e.cellFormula)break;if(m){if(!o)break;N[br(o.cell)]=ae[0],g=e.dense?(a[o.cell.r]||[])[o.cell.c]:a[br(o.cell)],(g||{}).f=""+Di(ae[0],i,h,z,L)}}break;case 253:I=Ev(l[ae.isst].t,ae.ixfe,"s"),l[ae.isst].h&&(I.h=l[ae.isst].h),I.XF=M[I.ixfe],j>0&&(I.z=K[I.ixfe>>8&63]),hu(I,e,r.opts.Date1904),F({c:ae.c,r:ae.r},I,e);break;case 513:e.sheetStubs&&(I={ixfe:ae.ixfe,XF:M[ae.ixfe],t:"z"},j>0&&(I.z=K[I.ixfe>>8&63]),hu(I,e,r.opts.Date1904),F({c:ae.c,r:ae.r},I,e));break;case 190:if(e.sheetStubs)for(var Nt=ae.c;Nt<=ae.C;++Nt){var It=ae.ixfe[Nt-ae.c];I={ixfe:It,XF:M[It],t:"z"},j>0&&(I.z=K[I.ixfe>>8&63]),hu(I,e,r.opts.Date1904),F({c:Nt,r:ae.r},I,e)}break;case 214:case 516:case 4:I=Ev(ae.val,ae.ixfe,"s"),I.XF=M[I.ixfe],j>0&&(I.z=K[I.ixfe>>8&63]),hu(I,e,r.opts.Date1904),F({c:ae.c,r:ae.r},I,e);break;case 0:case 512:ce===1&&(i=ae);break;case 252:l=ae;break;case 1054:if(L.biff==4){K[j++]=ae[1];for(var Kt=0;Kt<j+163&&xr[Kt]!=ae[1];++Kt);Kt>=163&&EA(ae[1],j+163)}else EA(ae[1],ae[0]);break;case 30:{K[j++]=ae;for(var Ut=0;Ut<j+163&&xr[Ut]!=ae;++Ut);Ut>=163&&EA(ae,j+163)}break;case 229:q=q.concat(ae);break;case 93:ie[ae.cmo[0]]=L.lastobj=ae;break;case 438:L.lastobj.TxO=ae;break;case 127:L.lastobj.ImData=ae;break;case 440:for(_=ae[0].s.r;_<=ae[0].e.r;++_)for(w=ae[0].s.c;w<=ae[0].e.c;++w)g=e.dense?(a[_]||[])[w]:a[br({c:w,r:_})],g&&(g.l=ae[1]);break;case 2048:for(_=ae[0].s.r;_<=ae[0].e.r;++_)for(w=ae[0].s.c;w<=ae[0].e.c;++w)g=e.dense?(a[_]||[])[w]:a[br({c:w,r:_})],g&&g.l&&(g.l.Tooltip=ae[1]);break;case 28:{if(L.biff<=5&&L.biff>=2)break;g=e.dense?(a[ae[0].r]||[])[ae[0].c]:a[br(ae[0])];var Ht=ie[ae[2]];g||(e.dense?(a[ae[0].r]||(a[ae[0].r]=[]),g=a[ae[0].r][ae[0].c]={t:"z"}):g=a[br(ae[0])]={t:"z"},i.e.r=Math.max(i.e.r,ae[0].r),i.s.r=Math.min(i.s.r,ae[0].r),i.e.c=Math.max(i.e.c,ae[0].c),i.s.c=Math.min(i.s.c,ae[0].c)),g.c||(g.c=[]),b={a:ae[1],t:Ht.TxO.t},g.c.push(b)}break;case 2173:mfe(M[ae.ixfe],ae.ext);break;case 125:{if(!L.cellStyles)break;for(;ae.e>=ae.s;)Z[ae.e--]={width:ae.w/256,level:ae.level||0,hidden:!!(ae.flags&1)},ne||(ne=!0,L4(ae.w/256)),gf(Z[ae.e+1])}break;case 520:{var Yt={};ae.level!=null&&(ee[ae.r]=Yt,Yt.level=ae.level),ae.hidden&&(ee[ae.r]=Yt,Yt.hidden=!0),ae.hpt&&(ee[ae.r]=Yt,Yt.hpt=ae.hpt,Yt.hpx=Rm(ae.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||gh(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[me]]=ae;break;case 161:a["!margins"]||gh(a["!margins"]={}),a["!margins"].header=ae.header,a["!margins"].footer=ae.footer;break;case 574:ae.RTL&&(C.Views[0].RTL=!0);break;case 146:D=ae;break;case 2198:Q=ae;break;case 140:P=ae;break;case 442:A?B.CodeName=ae||B.name:C.WBProps.CodeName=ae||"ThisWorkbook";break}}else Se||console.error("Missing Info for XLS Record 0x"+me.toString(16)),t.l+=ge}return r.SheetNames=za(s).sort(function(Mt,kt){return Number(Mt)-Number(kt)}).map(function(Mt){return s[Mt].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&X.forEach(function(Mt,kt){r.Sheets[r.SheetNames[kt]]["!autofilter"]=Mt}),r.Strings=l,r.SSF=fa(xr),L.enc&&(r.Encryption=L.enc),Q&&(r.Themes=Q),r.Metadata={},P!==void 0&&(r.Metadata.Country=P),z.names.length>0&&(C.Names=z.names),r.Workbook=C,r}var Hg={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Nge(t,e,r){var n=or.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=r6(n,e5,Hg.DSI);for(var s in a)e[s]=a[s]}catch(A){if(r.WTF)throw A}var i=or.find(t,"/!SummaryInformation");if(i&&i.size>0)try{var o=r6(i,t5,Hg.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(A){if(r.WTF)throw A}e.HeadingPairs&&e.TitlesOfParts&&(UP(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function kge(t,e){var r=[],n=[],a=[],s=0,i,o=FF(e5,"n"),l=FF(t5,"n");if(t.Props)for(i=za(t.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(l,i[s])?n:a).push([i[s],t.Props[i[s]]]);if(t.Custprops)for(i=za(t.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(l,i[s])?n:a).push([i[s],t.Custprops[i[s]]]);var A=[];for(s=0;s<a.length;++s)VP.indexOf(a[s][0])>-1||LP.indexOf(a[s][0])>-1||a[s][1]!=null&&A.push(a[s]);n.length&&or.utils.cfb_add(e,"/SummaryInformation",n6(n,Hg.SI,l,t5)),(r.length||A.length)&&or.utils.cfb_add(e,"/DocumentSummaryInformation",n6(r,Hg.DSI,o,e5,A.length?A:null,Hg.UDI))}function Pj(t,e){e||(e={}),z4(e),A4(),e.codepage&&u4(e.codepage);var r,n;if(t.FullPaths){if(or.find(t,"/encryption"))throw new Error("File is password-protected");r=or.find(t,"!CompObj"),n=or.find(t,"/Workbook")||or.find(t,"/Book")}else{switch(e.type){case"base64":t=Xo(nl(t));break;case"binary":t=Xo(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}oi(t,0),n={content:t}}var a,s;if(r&&_ge(r),e.bookProps&&!e.bookSheets)a={};else{var i=Kr?"buffer":"array";if(n&&n.content)a=Bge(n.content,e);else if((s=or.find(t,"PerfectOffice_MAIN"))&&s.content)a=ph.to_workbook(s.content,(e.type=i,e));else if((s=or.find(t,"NativeContent_MAIN"))&&s.content)a=ph.to_workbook(s.content,(e.type=i,e));else throw(s=or.find(t,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&or.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=Vfe(t))}var o={};return t.FullPaths&&Nge(t,o,e),a.Props=a.Custprops=o,e.bookFiles&&(a.cfb=t),a}function Ige(t,e){var r=e||{},n=or.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return or.utils.cfb_add(n,a,jj(t,r)),r.biff==8&&(t.Props||t.Custprops)&&kge(t,n),r.biff==8&&t.vbaraw&&zfe(n,or.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var px={0:{f:tme},1:{f:cme},2:{f:Bme},3:{f:gme},4:{f:fme},5:{f:_me},6:{f:Rme},7:{f:wme},8:{f:Ome},9:{f:jme},10:{f:Mme},11:{f:Pme},12:{f:Ame},13:{f:kme},14:{f:vme},15:{f:mme},16:{f:kj},17:{f:Lme},18:{f:Cme},19:{f:_4},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Lpe},40:{},42:{},43:{f:Rde},44:{f:Ide},45:{f:Ude},46:{f:Pde},47:{f:Mde},48:{},49:{f:ace},50:{},51:{f:xfe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:ej},62:{f:Fme},63:{f:Tfe},64:{f:rpe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Vi,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Jme},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:ome},148:{f:ame,p:16},151:{f:qme},152:{},153:{f:Fpe},154:{},155:{},156:{f:kpe},157:{},158:{},159:{T:1,f:WAe},160:{T:-1},161:{T:1,f:zh},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Qme},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:pfe},336:{T:-1},337:{f:wfe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Z_},357:{},358:{},359:{},360:{T:1},361:{},362:{f:ZP},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Kme},427:{f:Wme},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Yme},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:ime},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:zme},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Z_},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Pfe},633:{T:1},634:{T:-1},635:{T:1,f:Ufe},636:{T:-1},637:{f:lce},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:vpe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:npe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},o5={6:{f:nE},10:{f:Bd},12:{f:vs},13:{f:vs},14:{f:Za},15:{f:Za},16:{f:ji},17:{f:Za},18:{f:Za},19:{f:vs},20:{f:c6},21:{f:c6},23:{f:ZP},24:{f:A6},25:{f:Za},26:{},27:{},28:{f:nAe},29:{},34:{f:Za},35:{f:u6},38:{f:ji},39:{f:ji},40:{f:ji},41:{f:ji},42:{f:Za},43:{f:Za},47:{f:mde},49:{f:kue},51:{f:vs},60:{},61:{f:_ue},64:{f:Za},65:{f:Nue},66:{f:vs},77:{},80:{},81:{},82:{},85:{f:vs},89:{},90:{},91:{},92:{f:hue},93:{f:iAe},94:{},95:{f:Za},96:{},97:{},99:{f:Za},125:{f:ej},128:{f:Gue},129:{f:pue},130:{f:vs},131:{f:Za},132:{f:Za},133:{f:gue},134:{},140:{f:hAe},141:{f:vs},144:{},146:{f:gAe},151:{},152:{},153:{},154:{},155:{},156:{f:vs},157:{},158:{},160:{f:EAe},161:{f:yAe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Que},190:{f:Hue},193:{f:Bd},197:{},198:{},199:{},200:{},201:{},202:{f:Za},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:vs},220:{},221:{f:Za},222:{},224:{f:zue},225:{f:fue},226:{f:Bd},227:{},229:{f:aAe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:vue},253:{f:Fue},255:{f:wue},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:zP},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Za},353:{f:Bd},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Yue},431:{f:Za},432:{},433:{},434:{},437:{},438:{f:cAe},439:{f:Za},440:{f:uAe},441:{},442:{f:qx},443:{},444:{f:vs},445:{},446:{},448:{f:Bd},449:{f:Eue,r:2},450:{f:Bd},512:{f:i6},513:{f:CAe},515:{f:Wue},516:{f:Due},517:{f:l6},519:{f:_Ae},520:{f:bue},523:{},545:{f:d6},549:{f:s6},566:{},574:{f:Tue},638:{f:Oue},659:{},1048:{},1054:{f:Uue},1084:{},1212:{f:eAe},2048:{f:dAe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:wv},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Bd},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:xAe,r:12},2173:{f:hfe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Za,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Zue,r:12},2197:{},2198:{f:lfe,r:12},2199:{},2200:{},2201:{},2202:{f:tAe,r:12},2203:{f:Bd},2204:{},2205:{},2206:{},2207:{},2211:{f:Cue},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:vs},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:wAe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:pAe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:i6},1:{},2:{f:kAe},3:{f:BAe},4:{f:TAe},5:{f:l6},7:{f:FAe},8:{},9:{f:wv},11:{},22:{f:vs},30:{f:Pue},31:{},32:{},33:{f:d6},36:{},37:{f:s6},50:{f:RAe},62:{},52:{},67:{},68:{f:vs},69:{},86:{},126:{},127:{f:SAe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:DAe},223:{},234:{},354:{},421:{},518:{f:nE},521:{f:wv},536:{f:A6},547:{f:u6},561:{},579:{},1030:{f:nE},1033:{f:wv},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Dt(t,e,r,n){var a=e;if(!isNaN(a)){var s=n||(r||[]).length||0,i=t.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&b4(r)&&t.push(r)}}function Fge(t,e,r,n){var a=(r||[]).length||0;if(a<=8224)return Dt(t,e,r,a);var s=e;if(!isNaN(s)){for(var i=r.parts||[],o=0,l=0,A=0;A+(i[o]||8224)<=8224;)A+=i[o]||8224,o++;var d=t.next(4);for(d.write_shift(2,s),d.write_shift(2,A),t.push(r.slice(l,l+A)),l+=A;l<a;){for(d=t.next(4),d.write_shift(2,60),A=0;A+(i[o]||8224)<=8224;)A+=i[o]||8224,o++;d.write_shift(2,A),t.push(r.slice(l,l+A)),l+=A}}}function Yx(t,e,r){return t||(t=lt(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function Rge(t,e,r,n){var a=lt(9);return Yx(a,t,e),GP(r,n||"b",a),a}function Dge(t,e,r){var n=lt(8+2*r.length);return Yx(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function Lge(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var a=e.t=="d"?Ls(da(e.v)):e.v;a==(a|0)&&a>=0&&a<65536?Dt(t,2,IAe(r,n,a)):Dt(t,3,NAe(r,n,a));return;case"b":case"e":Dt(t,5,Rge(r,n,e.v,e.t));return;case"s":case"str":Dt(t,4,Dge(r,n,(e.v||"").slice(0,255)));return}Dt(t,1,Yx(null,r,n))}function Uge(t,e,r,n){var a=Array.isArray(e),s=bn(e["!ref"]||"A1"),i,o="",l=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=Dr(s)}for(var A=s.s.r;A<=s.e.r;++A){o=is(A);for(var d=s.s.c;d<=s.e.c;++d){A===s.s.r&&(l[d]=Ta(d)),i=l[d]+o;var h=a?(e[A]||[])[d]:e[i];h&&Lge(t,h,A,d)}}}function Mge(t,e){for(var r=e||{},n=Eo(),a=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Dt(n,r.biff==4?1033:r.biff==3?521:9,F4(t,16,r)),Uge(n,t.Sheets[t.SheetNames[a]],a,r),Dt(n,10),n.end()}function Pge(t,e,r){Dt(t,49,Iue({sz:12,name:"Arial"},r))}function jge(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&Dt(t,1054,Mue(a,e[a],r))})}function Oge(t,e){var r=lt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Dt(t,2151,r),r=lt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),YP(bn(e["!ref"]||"A1"),r),r.write_shift(4,4),Dt(t,2152,r)}function Qge(t,e){for(var r=0;r<16;++r)Dt(t,224,o6({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Dt(t,224,o6(n,0,e))})}function Hge(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];Dt(t,440,AAe(n)),n[1].Tooltip&&Dt(t,2048,fAe(n))}delete e["!links"]}function Vge(t,e){if(e){var r=0;e.forEach(function(n,a){++r<=256&&n&&Dt(t,125,vAe(Mw(a,n),a))})}}function zge(t,e,r,n,a){var s=16+Sf(a.cellXfs,e,a);if(e.v==null&&!e.bf){Dt(t,513,kh(r,n,s));return}if(e.bf)Dt(t,6,p0e(e,r,n,a,s));else switch(e.t){case"d":case"n":var i=e.t=="d"?Ls(da(e.v)):e.v;Dt(t,515,$ue(r,n,i,s));break;case"b":case"e":Dt(t,517,Kue(r,n,e.v,s,a,e.t));break;case"s":case"str":if(a.bookSST){var o=O4(a.Strings,e.v,a.revStrings);Dt(t,253,Rue(r,n,o,s))}else Dt(t,516,Lue(r,n,(e.v||"").slice(0,255),s,a));break;default:Dt(t,513,kh(r,n,s))}}function Gge(t,e,r){var n=Eo(),a=r.SheetNames[t],s=r.Sheets[a]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[t]||{},l=Array.isArray(s),A=e.biff==8,d,h="",m=[],g=bn(s["!ref"]||"A1"),b=A?65536:16384;if(g.e.c>255||g.e.r>=b){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,b-1)}Dt(n,2057,F4(r,16,e)),Dt(n,13,Dl(1)),Dt(n,12,Dl(100)),Dt(n,15,Ji(!0)),Dt(n,17,Ji(!1)),Dt(n,16,Bh(.001)),Dt(n,95,Ji(!0)),Dt(n,42,Ji(!1)),Dt(n,43,Ji(!1)),Dt(n,130,Dl(1)),Dt(n,128,que()),Dt(n,131,Ji(!1)),Dt(n,132,Ji(!1)),A&&Vge(n,s["!cols"]),Dt(n,512,jue(g,e)),A&&(s["!links"]=[]);for(var w=g.s.r;w<=g.e.r;++w){h=is(w);for(var _=g.s.c;_<=g.e.c;++_){w===g.s.r&&(m[_]=Ta(_)),d=m[_]+h;var N=l?(s[w]||[])[_]:s[d];N&&(zge(n,N,w,_,e),A&&N.l&&s["!links"].push([d,N.l]))}}var k=o.CodeName||o.name||a;return A&&Dt(n,574,Bue((i.Views||[])[0])),A&&(s["!merges"]||[]).length&&Dt(n,229,sAe(s["!merges"])),A&&Hge(n,s),Dt(n,442,qP(k)),A&&Oge(n,s),Dt(n,10),n.end()}function qge(t,e,r){var n=Eo(),a=(t||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},o=r.biff==8,l=r.biff==5;if(Dt(n,2057,F4(t,5,r)),r.bookType=="xla"&&Dt(n,135),Dt(n,225,o?Dl(1200):null),Dt(n,193,Kce(2)),l&&Dt(n,191),l&&Dt(n,192),Dt(n,226),Dt(n,92,mue("SheetJS",r)),Dt(n,66,Dl(o?1200:1252)),o&&Dt(n,353,Dl(0)),o&&Dt(n,448),Dt(n,317,bAe(t.SheetNames.length)),o&&t.vbaraw&&Dt(n,211),o&&t.vbaraw){var A=i.CodeName||"ThisWorkbook";Dt(n,442,qP(A))}Dt(n,156,Dl(17)),Dt(n,25,Ji(!1)),Dt(n,18,Ji(!1)),Dt(n,19,Dl(0)),o&&Dt(n,431,Ji(!1)),o&&Dt(n,444,Dl(0)),Dt(n,61,Sue()),Dt(n,64,Ji(!1)),Dt(n,141,Dl(0)),Dt(n,34,Ji(Epe(t)=="true")),Dt(n,14,Ji(!0)),o&&Dt(n,439,Ji(!1)),Dt(n,218,Dl(0)),Pge(n,t,r),jge(n,t.SSF,r),Qge(n,r),o&&Dt(n,352,Ji(!1));var d=n.end(),h=Eo();o&&Dt(h,140,mAe()),o&&r.Strings&&Fge(h,252,yue(r.Strings)),Dt(h,10);var m=h.end(),g=Eo(),b=0,w=0;for(w=0;w<t.SheetNames.length;++w)b+=(o?12:11)+(o?2:1)*t.SheetNames[w].length;var _=d.length+b+m.length;for(w=0;w<t.SheetNames.length;++w){var N=s[w]||{};Dt(g,133,xue({pos:_,hs:N.Hidden||0,dt:0,name:t.SheetNames[w]},r)),_+=e[w].length}var k=g.end();if(b!=k.length)throw new Error("BS8 "+b+" != "+k.length);var I=[];return d.length&&I.push(d),k.length&&I.push(k),m.length&&I.push(m),Ws(I)}function Kge(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=fa(xr)),t&&t.SSF&&(Zm(),kw(t.SSF),r.revssf=Fw(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,G4(r),r.cellXfs=[],Sf(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var a=0;a<t.SheetNames.length;++a)n[n.length]=Gge(a,r,t);return n.unshift(qge(t,n,r)),Ws(n)}function jj(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var a=To(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return Kge(t,e);case 4:case 3:case 2:return Mge(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function b6(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var a=t.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=t.match(/<\/table/i),i=a.index,o=s&&s.index||t.length,l=Ile(t.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),A=-1,d=0,h=0,m=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},b=[];for(i=0;i<l.length;++i){var w=l[i].trim(),_=w.slice(0,3).toLowerCase();if(_=="<tr"){if(++A,r.sheetRows&&r.sheetRows<=A){--A;break}d=0;continue}if(!(_!="<td"&&_!="<th")){var N=w.split(/<\/t[dh]>/i);for(o=0;o<N.length;++o){var k=N[o].trim();if(k.match(/<t[dh]/i)){for(var I=k,P=0;I.charAt(0)=="<"&&(P=I.indexOf(">"))>-1;)I=I.slice(P+1);for(var M=0;M<b.length;++M){var D=b[M];D.s.c==d&&D.s.r<A&&A<=D.e.r&&(d=D.e.c+1,M=-1)}var C=Sr(k.slice(0,k.indexOf(">")));m=C.colspan?+C.colspan:1,((h=+C.rowspan)>1||m>1)&&b.push({s:{r:A,c:d},e:{r:A+(h||1)-1,c:d+m-1}});var B=C.t||C["data-t"]||"";if(!I.length){d+=m;continue}if(I=cP(I),g.s.r>A&&(g.s.r=A),g.e.r<A&&(g.e.r=A),g.s.c>d&&(g.s.c=d),g.e.c<d&&(g.e.c=d),!I.length){d+=m;continue}var T={t:"s",v:I};r.raw||!I.trim().length||B=="s"||(I==="TRUE"?T={t:"b",v:!0}:I==="FALSE"?T={t:"b",v:!1}:isNaN(Bc(I))?isNaN(Im(I).getDate())||(T={t:"d",v:da(I)},r.cellDates||(T={t:"n",v:Ls(T.v)}),T.z=r.dateNF||xr[14]):T={t:"n",v:Bc(I)}),r.dense?(n[A]||(n[A]=[]),n[A][d]=T):n[br({r:A,c:d})]=T,d+=m}}}}return n["!ref"]=Dr(g),b.length&&(n["!merges"]=b),n}function Wge(t,e,r,n){for(var a=t["!merges"]||[],s=[],i=e.s.c;i<=e.e.c;++i){for(var o=0,l=0,A=0;A<a.length;++A)if(!(a[A].s.r>r||a[A].s.c>i)&&!(a[A].e.r<r||a[A].e.c<i)){if(a[A].s.r<r||a[A].s.c<i){o=-1;break}o=a[A].e.r-a[A].s.r+1,l=a[A].e.c-a[A].s.c+1;break}if(!(o<0)){var d=br({r,c:i}),h=n.dense?(t[r]||[])[i]:t[d],m=h&&h.v!=null&&(h.h||v4(h.w||(RA(h),h.w)||""))||"",g={};o>1&&(g.rowspan=o),l>1&&(g.colspan=l),n.editable?m='<span contenteditable="true">'+m+"</span>":h&&(g["data-t"]=h&&h.t||"z",h.v!=null&&(g["data-v"]=h.v),h.z!=null&&(g["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+h.l.Target+'">'+m+"</a>")),g.id=(n.id||"sjs")+"-"+d,s.push(Rt("td",m,g))}}var b="<tr>";return b+s.join("")+"</tr>"}var $ge='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Yge="</body></html>";function Xge(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return _f(b6(r[0],e),e);var n=$4();return r.forEach(function(a,s){Y4(n,b6(a,e),"Sheet"+(s+1))}),n}function Jge(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Oj(t,e){var r=e||{},n=r.header!=null?r.header:$ge,a=r.footer!=null?r.footer:Yge,s=[n],i=To(t["!ref"]);r.dense=Array.isArray(t),s.push(Jge(t,i,r));for(var o=i.s.r;o<=i.e.r;++o)s.push(Wge(t,i,o,r));return s.push("</table>"+a),s.join("")}function Qj(t,e,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var i=typeof n.origin=="string"?Ba(n.origin):n.origin;a=i.r,s=i.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),A={s:{r:0,c:0},e:{r:a,c:s}};if(t["!ref"]){var d=To(t["!ref"]);A.s.r=Math.min(A.s.r,d.s.r),A.s.c=Math.min(A.s.c,d.s.c),A.e.r=Math.max(A.e.r,d.e.r),A.e.c=Math.max(A.e.c,d.e.c),a==-1&&(A.e.r=a=d.e.r+1)}var h=[],m=0,g=t["!rows"]||(t["!rows"]=[]),b=0,w=0,_=0,N=0,k=0,I=0;for(t["!cols"]||(t["!cols"]=[]);b<o.length&&w<l;++b){var P=o[b];if(C6(P)){if(n.display)continue;g[w]={hidden:!0}}var M=P.children;for(_=N=0;_<M.length;++_){var D=M[_];if(!(n.display&&C6(D))){var C=D.hasAttribute("data-v")?D.getAttribute("data-v"):D.hasAttribute("v")?D.getAttribute("v"):cP(D.innerHTML),B=D.getAttribute("data-z")||D.getAttribute("z");for(m=0;m<h.length;++m){var T=h[m];T.s.c==N+s&&T.s.r<w+a&&w+a<=T.e.r&&(N=T.e.c+1-s,m=-1)}I=+D.getAttribute("colspan")||1,((k=+D.getAttribute("rowspan")||1)>1||I>1)&&h.push({s:{r:w+a,c:N+s},e:{r:w+a+(k||1)-1,c:N+s+(I||1)-1}});var O={t:"s",v:C},F=D.getAttribute("data-t")||D.getAttribute("t")||"";C!=null&&(C.length==0?O.t=F||"z":n.raw||C.trim().length==0||F=="s"||(C==="TRUE"?O={t:"b",v:!0}:C==="FALSE"?O={t:"b",v:!1}:isNaN(Bc(C))?isNaN(Im(C).getDate())||(O={t:"d",v:da(C)},n.cellDates||(O={t:"n",v:Ls(O.v)}),O.z=n.dateNF||xr[14]):O={t:"n",v:Bc(C)})),O.z===void 0&&B!=null&&(O.z=B);var L="",Q=D.getElementsByTagName("A");if(Q&&Q.length)for(var q=0;q<Q.length&&!(Q[q].hasAttribute("href")&&(L=Q[q].getAttribute("href"),L.charAt(0)!="#"));++q);L&&L.charAt(0)!="#"&&(O.l={Target:L}),n.dense?(t[w+a]||(t[w+a]=[]),t[w+a][N+s]=O):t[br({c:N+s,r:w+a})]=O,A.e.c<N+s&&(A.e.c=N+s),N+=I}}++w}return h.length&&(t["!merges"]=(t["!merges"]||[]).concat(h)),A.e.r=Math.max(A.e.r,w-1+a),t["!ref"]=Dr(A),w>=l&&(t["!fullref"]=Dr((A.e.r=o.length-b+w-1+a,A))),t}function Hj(t,e){var r=e||{},n=r.dense?[]:{};return Qj(n,t,e)}function Zge(t,e){return _f(Hj(t,e),e)}function C6(t){var e="",r=exe(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function exe(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function txe(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=yn(e.replace(/<[^>]*>/g,""));return[r]}var E6={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Vj(t,e){var r=e||{},n=y4(t),a=[],s,i,o={name:""},l="",A=0,d,h,m={},g=[],b=r.dense?[]:{},w,_,N={value:""},k="",I=0,P=[],M=-1,D=-1,C={s:{r:1e6,c:1e7},e:{r:0,c:0}},B=0,T={},O=[],F={},L=0,Q=0,q=[],ie=1,Z=1,ee=[],ne={Names:[]},z={},W=["",""],ce=[],j={},K="",X=0,te=!1,le=!1,de=0;for(ux.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");w=ux.exec(n);)switch(w[3]=w[3].replace(/_.*$/,"")){case"table":case"工作表":w[1]==="/"?(C.e.c>=C.s.c&&C.e.r>=C.s.r?b["!ref"]=Dr(C):b["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=C.e.r&&(b["!fullref"]=b["!ref"],C.e.r=r.sheetRows-1,b["!ref"]=Dr(C)),O.length&&(b["!merges"]=O),q.length&&(b["!rows"]=q),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),g.push(d.name),m[d.name]=b,le=!1):w[0].charAt(w[0].length-2)!=="/"&&(d=Sr(w[0],!1),M=D=-1,C.s.r=C.s.c=1e7,C.e.r=C.e.c=0,b=r.dense?[]:{},O=[],q=[],le=!0);break;case"table-row-group":w[1]==="/"?--B:++B;break;case"table-row":case"行":if(w[1]==="/"){M+=ie,ie=1;break}if(h=Sr(w[0],!1),h.行号?M=h.行号-1:M==-1&&(M=0),ie=+h["number-rows-repeated"]||1,ie<10)for(de=0;de<ie;++de)B>0&&(q[M+de]={level:B});D=-1;break;case"covered-table-cell":w[1]!=="/"&&++D,r.sheetStubs&&(r.dense?(b[M]||(b[M]=[]),b[M][D]={t:"z"}):b[br({r:M,c:D})]={t:"z"}),k="",P=[];break;case"table-cell":case"数据":if(w[0].charAt(w[0].length-2)==="/")++D,N=Sr(w[0],!1),Z=parseInt(N["number-columns-repeated"]||"1",10),_={t:"z",v:null},N.formula&&r.cellFormula!=!1&&(_.f=v6(yn(N.formula))),(N.数据类型||N["value-type"])=="string"&&(_.t="s",_.v=yn(N["string-value"]||""),r.dense?(b[M]||(b[M]=[]),b[M][D]=_):b[br({r:M,c:D})]=_),D+=Z-1;else if(w[1]!=="/"){++D,k="",I=0,P=[],Z=1;var me=ie?M+ie-1:M;if(D>C.e.c&&(C.e.c=D),D<C.s.c&&(C.s.c=D),M<C.s.r&&(C.s.r=M),me>C.e.r&&(C.e.r=me),N=Sr(w[0],!1),ce=[],j={},_={t:N.数据类型||N["value-type"],v:null},r.cellFormula)if(N.formula&&(N.formula=yn(N.formula)),N["number-matrix-columns-spanned"]&&N["number-matrix-rows-spanned"]&&(L=parseInt(N["number-matrix-rows-spanned"],10)||0,Q=parseInt(N["number-matrix-columns-spanned"],10)||0,F={s:{r:M,c:D},e:{r:M+L-1,c:D+Q-1}},_.F=Dr(F),ee.push([F,_.F])),N.formula)_.f=v6(N.formula);else for(de=0;de<ee.length;++de)M>=ee[de][0].s.r&&M<=ee[de][0].e.r&&D>=ee[de][0].s.c&&D<=ee[de][0].e.c&&(_.F=ee[de][1]);switch((N["number-columns-spanned"]||N["number-rows-spanned"])&&(L=parseInt(N["number-rows-spanned"],10)||0,Q=parseInt(N["number-columns-spanned"],10)||0,F={s:{r:M,c:D},e:{r:M+L-1,c:D+Q-1}},O.push(F)),N["number-columns-repeated"]&&(Z=parseInt(N["number-columns-repeated"],10)),_.t){case"boolean":_.t="b",_.v=ua(N["boolean-value"]);break;case"float":_.t="n",_.v=parseFloat(N.value);break;case"percentage":_.t="n",_.v=parseFloat(N.value);break;case"currency":_.t="n",_.v=parseFloat(N.value);break;case"date":_.t="d",_.v=da(N["date-value"]),r.cellDates||(_.t="n",_.v=Ls(_.v)),_.z="m/d/yy";break;case"time":_.t="n",_.v=Ble(N["time-value"])/86400,r.cellDates&&(_.t="d",_.v=Rw(_.v)),_.z="HH:MM:SS";break;case"number":_.t="n",_.v=parseFloat(N.数据数值);break;default:if(_.t==="string"||_.t==="text"||!_.t)_.t="s",N["string-value"]!=null&&(k=yn(N["string-value"]),P=[]);else throw new Error("Unsupported value type "+_.t)}}else{if(te=!1,_.t==="s"&&(_.v=k||"",P.length&&(_.R=P),te=I==0),z.Target&&(_.l=z),ce.length>0&&(_.c=ce,ce=[]),k&&r.cellText!==!1&&(_.w=k),te&&(_.t="z",delete _.v),(!te||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=M))for(var ge=0;ge<ie;++ge){if(Z=parseInt(N["number-columns-repeated"]||"1",10),r.dense)for(b[M+ge]||(b[M+ge]=[]),b[M+ge][D]=ge==0?_:fa(_);--Z>0;)b[M+ge][D+Z]=fa(_);else for(b[br({r:M+ge,c:D})]=_;--Z>0;)b[br({r:M+ge,c:D+Z})]=fa(_);C.e.c<=D&&(C.e.c=D)}Z=parseInt(N["number-columns-repeated"]||"1",10),D+=Z-1,Z=0,_={},k="",P=[]}z={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(w[1]==="/"){if((s=a.pop())[0]!==w[3])throw"Bad state: "+s}else w[0].charAt(w[0].length-2)!=="/"&&a.push([w[3],!0]);break;case"annotation":if(w[1]==="/"){if((s=a.pop())[0]!==w[3])throw"Bad state: "+s;j.t=k,P.length&&(j.R=P),j.a=K,ce.push(j)}else w[0].charAt(w[0].length-2)!=="/"&&a.push([w[3],!1]);K="",X=0,k="",I=0,P=[];break;case"creator":w[1]==="/"?K=n.slice(X,w.index):X=w.index+w[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(w[1]==="/"){if((s=a.pop())[0]!==w[3])throw"Bad state: "+s}else w[0].charAt(w[0].length-2)!=="/"&&a.push([w[3],!1]);k="",I=0,P=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(w[1]==="/"){if(T[o.name]=l,(s=a.pop())[0]!==w[3])throw"Bad state: "+s}else w[0].charAt(w[0].length-2)!=="/"&&(l="",o=Sr(w[0],!1),a.push([w[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Sr(w[0],!1),l+=E6[w[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Sr(w[0],!1),l+=E6[w[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(w[0].slice(-2)==="/>")break;if(w[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(A,w.index);break}else A=w.index+w[0].length;break;case"named-range":i=Sr(w[0],!1),W=aE(i["cell-range-address"]);var Se={Name:i.name,Ref:W[0]+"!"+W[1]};le&&(Se.Sheet=g.length),ne.Names.push(Se);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(w[1]==="/"&&(!N||!N["string-value"])){var xe=txe(n.slice(I,w.index));k=(k.length>0?k+`
`:"")+xe[0]}else Sr(w[0],!1),I=w.index+w[0].length;break;case"s":break;case"database-range":if(w[1]==="/")break;try{W=aE(Sr(w[0])["target-range-address"]),m[W[0]]["!autofilter"]={ref:W[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(w[1]!=="/"){if(z=Sr(w[0],!1),!z.href)break;z.Target=yn(z.href),delete z.href,z.Target.charAt(0)=="#"&&z.Target.indexOf(".")>-1?(W=aE(z.Target.slice(1)),z.Target="#"+W[0]+"!"+W[1]):z.Target.match(/^\.\.[\\\/]/)&&(z.Target=z.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(w[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(w)}}var ae={Sheets:m,SheetNames:g,Workbook:ne};return r.bookSheets&&delete ae.Sheets,ae}function _6(t,e){e=e||{},Fl(t,"META-INF/manifest.xml")&&Bce(xs(t,"META-INF/manifest.xml"),e);var r=Jo(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=Vj(Zn(r),e);return Fl(t,"meta.xml")&&(n.Props=RP(xs(t,"meta.xml"))),n}function S6(t,e){return Vj(t,e)}var rxe=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+cx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return os+e}}(),T6=function(){var t=function(s){return zn(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,i,o){var l=[];l.push('      <table:table table:name="'+zn(i.SheetNames[o])+`" table:style-name="ta1">
`);var A=0,d=0,h=To(s["!ref"]||"A1"),m=s["!merges"]||[],g=0,b=Array.isArray(s);if(s["!cols"])for(d=0;d<=h.e.c;++d)l.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var w="",_=s["!rows"]||[];for(A=0;A<h.s.r;++A)w=_[A]?' table:style-name="ro'+_[A].ods+'"':"",l.push("        <table:table-row"+w+`></table:table-row>
`);for(;A<=h.e.r;++A){for(w=_[A]?' table:style-name="ro'+_[A].ods+'"':"",l.push("        <table:table-row"+w+`>
`),d=0;d<h.s.c;++d)l.push(e);for(;d<=h.e.c;++d){var N=!1,k={},I="";for(g=0;g!=m.length;++g)if(!(m[g].s.c>d)&&!(m[g].s.r>A)&&!(m[g].e.c<d)&&!(m[g].e.r<A)){(m[g].s.c!=d||m[g].s.r!=A)&&(N=!0),k["table:number-columns-spanned"]=m[g].e.c-m[g].s.c+1,k["table:number-rows-spanned"]=m[g].e.r-m[g].s.r+1;break}if(N){l.push(r);continue}var P=br({r:A,c:d}),M=b?(s[A]||[])[d]:s[P];if(M&&M.f&&(k["table:formula"]=zn(b0e(M.f)),M.F&&M.F.slice(0,P.length)==P)){var D=To(M.F);k["table:number-matrix-columns-spanned"]=D.e.c-D.s.c+1,k["table:number-matrix-rows-spanned"]=D.e.r-D.s.r+1}if(!M){l.push(e);continue}switch(M.t){case"b":I=M.v?"TRUE":"FALSE",k["office:value-type"]="boolean",k["office:boolean-value"]=M.v?"true":"false";break;case"n":I=M.w||String(M.v||0),k["office:value-type"]="float",k["office:value"]=M.v||0;break;case"s":case"str":I=M.v==null?"":M.v,k["office:value-type"]="string";break;case"d":I=M.w||da(M.v).toISOString(),k["office:value-type"]="date",k["office:date-value"]=da(M.v).toISOString(),k["table:style-name"]="ce1";break;default:l.push(e);continue}var C=t(I);if(M.l&&M.l.Target){var B=M.l.Target;B=B.charAt(0)=="#"?"#"+C0e(B.slice(1)):B,B.charAt(0)!="#"&&!B.match(/^\w+:/)&&(B="../"+B),C=Rt("text:a",C,{"xlink:href":B.replace(/&/g,"&amp;")})}l.push("          "+Rt("table:table-cell",Rt("text:p",C,{}),k)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(A){return i.Sheets[A]}).forEach(function(A){if(A&&A["!cols"]){for(var d=0;d<A["!cols"].length;++d)if(A["!cols"][d]){var h=A["!cols"][d];if(h.width==null&&h.wpx==null&&h.wch==null)continue;gf(h),h.ods=o;var m=A["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+m+`"/>
`),s.push(`  </style:style>
`),++o}}});var l=0;i.SheetNames.map(function(A){return i.Sheets[A]}).forEach(function(A){if(A&&A["!rows"]){for(var d=0;d<A["!rows"].length;++d)if(A["!rows"][d]){A["!rows"][d].ods=l;var h=A["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,o){var l=[os],A=cx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=cx({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+A+d+`>
`),l.push(FP().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+A+`>
`),a(l,i),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var h=0;h!=i.SheetNames.length;++h)l.push(n(i.Sheets[i.SheetNames[h]],i,h));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function zj(t,e){if(e.bookType=="fods")return T6(t,e);var r=p4(),n="",a=[],s=[];return n="mimetype",Or(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Or(r,n,T6(t,e)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",Or(r,n,rxe(t,e)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",Or(r,n,os+FP()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",Or(r,n,Ice(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Or(r,n,Nce(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Ih(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function l5(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Zn(Ef(t))}function nxe(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Xo(bu(t))}function axe(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function vf(t){var e=t.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(a){r.set(a,n),n+=a.length}),r}function B6(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function sxe(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,a=e+13;a>=e;--a)n=n*256+t[a];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function ixe(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)t[e+s]=a&255;t[e+15]|=r>=0?0:128}function gx(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function Qn(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function Va(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Nn(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],a=gx(t,r),s=a&7;a=Math.floor(a/8);var i=0,o;if(a==0)break;switch(s){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:i=4,o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=gx(t,r),o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var A={data:o,type:s};e[a]==null?e[a]=[A]:e[a].push(A)}return e}function ai(t){var e=[];return t.forEach(function(r,n){r.forEach(function(a){a.data&&(e.push(Qn(n*8+a.type)),a.type==2&&e.push(Qn(a.data.length)),e.push(a.data))})}),vf(e)}function V4(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function kl(t){for(var e,r=[],n=[0];n[0]<t.length;){var a=gx(t,n),s=Nn(t.slice(n[0],n[0]+a));n[0]+=a;var i={id:Va(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=Nn(o.data),A=Va(l[3][0].data);i.messages.push({meta:l,data:t.slice(n[0],n[0]+A)}),n[0]+=A}),(e=s[3])!=null&&e[0]&&(i.merge=Va(s[3][0].data)>>>0>0),r.push(i)}return r}function E0(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:Qn(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Qn(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:Qn(i.data.length)}],n[2].push({data:ai(i.meta),type:2})});var s=ai(n);e.push(Qn(s.length)),e.push(s),a.forEach(function(i){return e.push(i)})}),vf(e)}function oxe(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=gx(e,r),a=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var i=e[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=e[r[0]],o>1&&(i|=e[r[0]+1]<<8),o>2&&(i|=e[r[0]+2]<<16),o>3&&(i|=e[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}a.push(e.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var l=0,A=0;if(s==1?(A=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(A=(e[r[0]++]>>2)+1,s==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),a=[vf(a)],l==0)throw new Error("Invalid offset 0");if(l>a[0].length)throw new Error("Invalid offset beyond length");if(A>=l)for(a.push(a[0].slice(-l)),A-=l;A>=a[a.length-1].length;)a.push(a[a.length-1]),A-=a[a.length-1].length;a.push(a[0].slice(-l,-l+A))}}var d=vf(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Il(t){for(var e=[],r=0;r<t.length;){var n=t[r++],a=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(oxe(n,t.slice(r,r+a))),r+=a}if(r!==t.length)throw new Error("data is not a valid framed stream!");return vf(e)}function _0(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),a=new Uint8Array(4);e.push(a);var s=Qn(n),i=s.length;e.push(s),n<=60?(i++,e.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),i+=n,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return vf(e)}function lxe(t,e,r,n){var a=Ih(t),s=a.getUint32(4,!0),i=(n>1?12:8)+B6(s&(n>1?3470:398))*4,o=-1,l=-1,A=NaN,d=new Date(2001,0,1);s&512&&(o=a.getUint32(i,!0),i+=4),i+=B6(s&(n>1?12288:4096))*4,s&16&&(l=a.getUint32(i,!0),i+=4),s&32&&(A=a.getFloat64(i,!0),i+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var h;switch(t[2]){case 0:break;case 2:h={t:"n",v:A};break;case 3:h={t:"s",v:e[l]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:A>0};break;case 7:h={t:"n",v:A/86400};break;case 8:h={t:"e",v:0};break;case 9:if(o>-1)h={t:"s",v:r[o]};else if(l>-1)h={t:"s",v:e[l]};else if(!isNaN(A))h={t:"n",v:A};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return h}function cxe(t,e,r){var n=Ih(t),a=n.getUint32(8,!0),s=12,i=-1,o=-1,l=NaN,A=NaN,d=new Date(2001,0,1);a&1&&(l=sxe(t,s),s+=16),a&2&&(A=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(o=n.getUint32(s,!0),s+=4),a&16&&(i=n.getUint32(s,!0),s+=4);var h;switch(t[1]){case 0:break;case 2:h={t:"n",v:l};break;case 3:h={t:"s",v:e[o]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:A>0};break;case 7:h={t:"n",v:A/86400};break;case 8:h={t:"e",v:0};break;case 9:if(i>-1)h={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)));break;case 10:h={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)))}return h}function iE(t,e){var r=new Uint8Array(32),n=Ih(r),a=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,ixe(r,a,t.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,t.v?1:0,!0),s|=2,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,a)}function oE(t,e){var r=new Uint8Array(32),n=Ih(r),a=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(a,t.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,t.v?1:0,!0),s|=32,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,a)}function uxe(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return lxe(t,e,r,t[0]);case 5:return cxe(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Ri(t){var e=Nn(t);return gx(e[1][0].data)}function N6(t,e){var r=Nn(e.data),n=Va(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(i){var o=Nn(i.data),l=Va(o[1][0].data)>>>0;switch(n){case 1:s[l]=l5(o[3][0].data);break;case 8:{var A=t[Ri(o[9][0].data)][0],d=Nn(A.data),h=t[Ri(d[1][0].data)][0],m=Va(h.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var g=Nn(h.data);s[l]=g[3].map(function(b){return l5(b.data)}).join("")}break}}),s}function Axe(t,e){var r,n,a,s,i,o,l,A,d,h,m,g,b,w,_=Nn(t),N=Va(_[1][0].data)>>>0,k=Va(_[2][0].data)>>>0,I=((n=(r=_[8])==null?void 0:r[0])==null?void 0:n.data)&&Va(_[8][0].data)>0||!1,P,M;if((s=(a=_[7])==null?void 0:a[0])!=null&&s.data&&e!=0)P=(o=(i=_[7])==null?void 0:i[0])==null?void 0:o.data,M=(A=(l=_[6])==null?void 0:l[0])==null?void 0:A.data;else if((h=(d=_[4])==null?void 0:d[0])!=null&&h.data&&e!=1)P=(g=(m=_[4])==null?void 0:m[0])==null?void 0:g.data,M=(w=(b=_[3])==null?void 0:b[0])==null?void 0:w.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var D=I?4:1,C=Ih(P),B=[],T=0;T<P.length/2;++T){var O=C.getUint16(T*2,!0);O<65535&&B.push([T,O])}if(B.length!=k)throw"Expected ".concat(k," cells, found ").concat(B.length);var F=[];for(T=0;T<B.length-1;++T)F[B[T][0]]=M.subarray(B[T][1]*D,B[T+1][1]*D);return B.length>=1&&(F[B[B.length-1][0]]=M.subarray(B[B.length-1][1]*D)),{R:N,cells:F}}function dxe(t,e){var r,n=Nn(e.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Va(n[7][0].data)>>>0>0?1:0:-1,s=V4(n[5],function(i){return Axe(i,a)});return{nrows:Va(n[4][0].data)>>>0,data:s.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(l,A){if(i[o.R][A])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(A));i[o.R][A]=l}),i},[])}}function fxe(t,e,r){var n,a=Nn(e.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Va(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Va(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=Dr(s);var i=Nn(a[4][0].data),o=N6(t,t[Ri(i[4][0].data)][0]),l=(n=i[17])!=null&&n[0]?N6(t,t[Ri(i[17][0].data)][0]):[],A=Nn(i[3][0].data),d=0;A[1].forEach(function(h){var m=Nn(h.data),g=t[Ri(m[2][0].data)][0],b=Va(g.meta[1][0].data);if(b!=6002)throw new Error("6001 unexpected reference to ".concat(b));var w=dxe(t,g);w.data.forEach(function(_,N){_.forEach(function(k,I){var P=br({r:d+N,c:I}),M=uxe(k,o,l);M&&(r[P]=M)})}),d+=w.nrows})}function hxe(t,e){var r=Nn(e.data),n={"!ref":"A1"},a=t[Ri(r[2][0].data)],s=Va(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return fxe(t,a[0],n),n}function mxe(t,e){var r,n=Nn(e.data),a={name:(r=n[1])!=null&&r[0]?l5(n[1][0].data):"",sheets:[]},s=V4(n[2],Ri);return s.forEach(function(i){t[i].forEach(function(o){var l=Va(o.meta[1][0].data);l==6e3&&a.sheets.push(hxe(t,o))})}),a}function pxe(t,e){var r=$4(),n=Nn(e.data),a=V4(n[1],Ri);if(a.forEach(function(s){t[s].forEach(function(i){var o=Va(i.meta[1][0].data);if(o==2){var l=mxe(t,i);l.sheets.forEach(function(A,d){Y4(r,A,d==0?l.name:l.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function lE(t){var e,r,n,a,s={},i=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var A;try{A=Il(l.content)}catch(h){return console.log("?? "+l.content.length+" "+(h.message||h))}var d;try{d=kl(A)}catch(h){return console.log("## "+(h.message||h))}d.forEach(function(h){s[h.id]=h.messages,i.push(h.id)})}}),!i.length)throw new Error("File has no messages");var o=((a=(n=(r=(e=s==null?void 0:s[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Va(s[1][0].meta[1][0].data)==1&&s[1][0];if(o||i.forEach(function(l){s[l].forEach(function(A){var d=Va(A.meta[1][0].data)>>>0;if(d==1)if(!o)o=A;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return pxe(s,o)}function gxe(t,e,r){var n,a,s,i;if(!((n=t[6])!=null&&n[0])||!((a=t[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(s=t[8])==null?void 0:s[0])==null?void 0:i.data)&&Va(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,A=Ih(t[7][0].data),d=0,h=[],m=Ih(t[4][0].data),g=0,b=[],w=0;w<e.length;++w){if(e[w]==null){A.setUint16(w*2,65535,!0),m.setUint16(w*2,65535);continue}A.setUint16(w*2,d,!0),m.setUint16(w*2,g,!0);var _,N;switch(typeof e[w]){case"string":_=iE({t:"s",v:e[w]},r),N=oE({t:"s",v:e[w]},r);break;case"number":_=iE({t:"n",v:e[w]},r),N=oE({t:"n",v:e[w]},r);break;case"boolean":_=iE({t:"b",v:e[w]},r),N=oE({t:"b",v:e[w]},r);break;default:throw new Error("Unsupported value "+e[w])}h.push(_),d+=_.length,b.push(N),g+=N.length,++l}for(t[2][0].data=Qn(l);w<t[7][0].data.length/2;++w)A.setUint16(w*2,65535,!0),m.setUint16(w*2,65535,!0);return t[6][0].data=vf(h),t[3][0].data=vf(b),l}function xxe(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=To(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(Dr(n)));var s=xy(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(K){return K.forEach(function(X){typeof X=="string"&&i.push(X)})});var o={},l=[],A=or.read(e.numbers,{type:"base64"});A.FileIndex.map(function(K,X){return[K,A.FullPaths[X]]}).forEach(function(K){var X=K[0],te=K[1];if(X.type==2&&X.name.match(/\.iwa/)){var le=X.content,de=Il(le),me=kl(de);me.forEach(function(ge){l.push(ge.id),o[ge.id]={deps:[],location:te,type:Va(ge.messages[0].meta[1][0].data)}})}}),l.sort(function(K,X){return K-X});var d=l.filter(function(K){return K>1}).map(function(K){return[K,Qn(K)]});A.FileIndex.map(function(K,X){return[K,A.FullPaths[X]]}).forEach(function(K){var X=K[0];if(K[1],!!X.name.match(/\.iwa/)){var te=kl(Il(X.content));te.forEach(function(le){le.messages.forEach(function(de){d.forEach(function(me){le.messages.some(function(ge){return Va(ge.meta[1][0].data)!=11006&&axe(ge.data,me[1])})&&o[me[0]].deps.push(le.id)})})})}});for(var h=or.find(A,o[1].location),m=kl(Il(h.content)),g,b=0;b<m.length;++b){var w=m[b];w.id==1&&(g=w)}var _=Ri(Nn(g.messages[0].data)[1][0].data);for(h=or.find(A,o[_].location),m=kl(Il(h.content)),b=0;b<m.length;++b)w=m[b],w.id==_&&(g=w);for(_=Ri(Nn(g.messages[0].data)[2][0].data),h=or.find(A,o[_].location),m=kl(Il(h.content)),b=0;b<m.length;++b)w=m[b],w.id==_&&(g=w);for(_=Ri(Nn(g.messages[0].data)[2][0].data),h=or.find(A,o[_].location),m=kl(Il(h.content)),b=0;b<m.length;++b)w=m[b],w.id==_&&(g=w);var N=Nn(g.messages[0].data);{N[6][0].data=Qn(n.e.r+1),N[7][0].data=Qn(n.e.c+1);var k=Ri(N[46][0].data),I=or.find(A,o[k].location),P=kl(Il(I.content));{for(var M=0;M<P.length&&P[M].id!=k;++M);if(P[M].id!=k)throw"Bad ColumnRowUIDMapArchive";var D=Nn(P[M].messages[0].data);D[1]=[],D[2]=[],D[3]=[];for(var C=0;C<=n.e.c;++C){var B=[];B[1]=B[2]=[{type:0,data:Qn(C+420690)}],D[1].push({type:2,data:ai(B)}),D[2].push({type:0,data:Qn(C)}),D[3].push({type:0,data:Qn(C)})}D[4]=[],D[5]=[],D[6]=[];for(var T=0;T<=n.e.r;++T)B=[],B[1]=B[2]=[{type:0,data:Qn(T+726270)}],D[4].push({type:2,data:ai(B)}),D[5].push({type:0,data:Qn(T)}),D[6].push({type:0,data:Qn(T)});P[M].messages[0].data=ai(D)}I.content=_0(E0(P)),I.size=I.content.length,delete N[46];var O=Nn(N[4][0].data);{O[7][0].data=Qn(n.e.r+1);var F=Nn(O[1][0].data),L=Ri(F[2][0].data);I=or.find(A,o[L].location),P=kl(Il(I.content));{if(P[0].id!=L)throw"Bad HeaderStorageBucket";var Q=Nn(P[0].messages[0].data);for(T=0;T<s.length;++T){var q=Nn(Q[2][0].data);q[1][0].data=Qn(T),q[4][0].data=Qn(s[T].length),Q[2][T]={type:Q[2][0].type,data:ai(q)}}P[0].messages[0].data=ai(Q)}I.content=_0(E0(P)),I.size=I.content.length;var ie=Ri(O[2][0].data);I=or.find(A,o[ie].location),P=kl(Il(I.content));{if(P[0].id!=ie)throw"Bad HeaderStorageBucket";for(Q=Nn(P[0].messages[0].data),C=0;C<=n.e.c;++C)q=Nn(Q[2][0].data),q[1][0].data=Qn(C),q[4][0].data=Qn(n.e.r+1),Q[2][C]={type:Q[2][0].type,data:ai(q)};P[0].messages[0].data=ai(Q)}I.content=_0(E0(P)),I.size=I.content.length;var Z=Ri(O[4][0].data);(function(){for(var K=or.find(A,o[Z].location),X=kl(Il(K.content)),te,le=0;le<X.length;++le){var de=X[le];de.id==Z&&(te=de)}var me=Nn(te.messages[0].data);{me[3]=[];var ge=[];i.forEach(function(ae,Fe){ge[1]=[{type:0,data:Qn(Fe)}],ge[2]=[{type:0,data:Qn(1)}],ge[3]=[{type:2,data:nxe(ae)}],me[3].push({type:2,data:ai(ge)})})}te.messages[0].data=ai(me);var Se=E0(X),xe=_0(Se);K.content=xe,K.size=K.content.length})();var ee=Nn(O[3][0].data);{var ne=ee[1][0];delete ee[2];var z=Nn(ne.data);{var W=Ri(z[2][0].data);(function(){for(var K=or.find(A,o[W].location),X=kl(Il(K.content)),te,le=0;le<X.length;++le){var de=X[le];de.id==W&&(te=de)}var me=Nn(te.messages[0].data);{delete me[6],delete ee[7];var ge=new Uint8Array(me[5][0].data);me[5]=[];for(var Se=0,xe=0;xe<=n.e.r;++xe){var ae=Nn(ge);Se+=gxe(ae,s[xe],i),ae[1][0].data=Qn(xe),me[5].push({data:ai(ae),type:2})}me[1]=[{type:0,data:Qn(n.e.c+1)}],me[2]=[{type:0,data:Qn(n.e.r+1)}],me[3]=[{type:0,data:Qn(Se)}],me[4]=[{type:0,data:Qn(n.e.r+1)}]}te.messages[0].data=ai(me);var Fe=E0(X),Xe=_0(Fe);K.content=Xe,K.size=K.content.length})()}ne.data=ai(z)}O[3][0].data=ai(ee)}N[4][0].data=ai(O)}g.messages[0].data=ai(N);var ce=E0(m),j=_0(ce);return h.content=j,h.size=h.content.length,A}function Gj(t){return function(r){for(var n=0;n!=t.length;++n){var a=t[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function z4(t){Gj([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function G4(t){Gj([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function vxe(t){return Zr.WS.indexOf(t)>-1?"sheet":t==Zr.CS?"chart":t==Zr.DS?"dialog":t==Zr.MS?"macro":t&&t.length?t:"sheet"}function yxe(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,vxe(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function wxe(t,e,r,n,a,s,i,o,l,A,d,h){try{s[n]=Pg(Jo(t,r,!0),e);var m=xs(t,e),g;switch(o){case"sheet":g=Vpe(m,e,a,l,s[n],A,d,h);break;case"chart":if(g=zpe(m,e,a,l,s[n],A,d,h),!g||!g["!drawel"])break;var b=hg(g["!drawel"].Target,e),w=Ax(b),_=kfe(Jo(t,b,!0),Pg(Jo(t,w,!0),b)),N=hg(_,b),k=Ax(N);g=gpe(Jo(t,N,!0),N,l,Pg(Jo(t,k,!0),N),A,g);break;case"macro":g=Gpe(m,e,a,l,s[n],A,d,h);break;case"dialog":g=qpe(m,e,a,l,s[n],A,d,h);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=g;var I=[];s&&s[n]&&za(s[n]).forEach(function(P){var M="";if(s[n][P].Type==Zr.CMNT){M=hg(s[n][P].Target,e);var D=Ype(xs(t,M,!0),M,l);if(!D||!D.length)return;h6(g,D,!1)}s[n][P].Type==Zr.TCMNT&&(M=hg(s[n][P].Target,e),I=I.concat(Ffe(xs(t,M,!0),l)))}),I&&I.length&&h6(g,I,!0,l.people||[])}catch(P){if(l.WTF)throw P}}function Bl(t){return t.charAt(0)=="/"?t.slice(1):t}function bxe(t,e){if(Zm(),e=e||{},z4(e),Fl(t,"META-INF/manifest.xml")||Fl(t,"objectdata.xml"))return _6(t,e);if(Fl(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof lE<"u"){if(t.FileIndex)return lE(t);var r=or.utils.cfb_new();return LF(t).forEach(function(q){Or(r,q,Rle(t,q))}),lE(r)}throw new Error("Unsupported NUMBERS file")}if(!Fl(t,"[Content_Types].xml"))throw Fl(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Fl(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=LF(t),a=Sce(Jo(t,"[Content_Types].xml")),s=!1,i,o;if(a.workbooks.length===0&&(o="xl/workbook.xml",xs(t,o,!0)&&a.workbooks.push(o)),a.workbooks.length===0){if(o="xl/workbook.bin",!xs(t,o,!0))throw new Error("Could not find workbook");a.workbooks.push(o),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var l={},A={};if(!e.bookSheets&&!e.bookProps){if(jg=[],a.sst)try{jg=$pe(xs(t,Bl(a.sst)),a.sst,e)}catch(q){if(e.WTF)throw q}e.cellStyles&&a.themes.length&&(l=Wpe(Jo(t,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],e)),a.style&&(A=Kpe(xs(t,Bl(a.style)),a.style,l,e))}a.links.map(function(q){try{var ie=Pg(Jo(t,Ax(Bl(q))),q);return Jpe(xs(t,Bl(q)),ie,q,e)}catch{}});var d=Hpe(xs(t,Bl(a.workbooks[0])),a.workbooks[0],e),h={},m="";a.coreprops.length&&(m=xs(t,Bl(a.coreprops[0]),!0),m&&(h=RP(m)),a.extprops.length!==0&&(m=xs(t,Bl(a.extprops[0]),!0),m&&Rce(m,h,e)));var g={};(!e.bookSheets||e.bookProps)&&a.custprops.length!==0&&(m=Jo(t,Bl(a.custprops[0]),!0),m&&(g=Lce(m,e)));var b={};if((e.bookSheets||e.bookProps)&&(d.Sheets?i=d.Sheets.map(function(ie){return ie.name}):h.Worksheets&&h.SheetNames.length>0&&(i=h.SheetNames),e.bookProps&&(b.Props=h,b.Custprops=g),e.bookSheets&&typeof i<"u"&&(b.SheetNames=i),e.bookSheets?b.SheetNames:e.bookProps))return b;i={};var w={};e.bookDeps&&a.calcchain&&(w=Xpe(xs(t,Bl(a.calcchain)),a.calcchain));var _=0,N={},k,I;{var P=d.Sheets;h.Worksheets=P.length,h.SheetNames=[];for(var M=0;M!=P.length;++M)h.SheetNames[M]=P[M].name}var D=s?"bin":"xml",C=a.workbooks[0].lastIndexOf("/"),B=(a.workbooks[0].slice(0,C+1)+"_rels/"+a.workbooks[0].slice(C+1)+".rels").replace(/^\//,"");Fl(t,B)||(B="xl/_rels/workbook."+D+".rels");var T=Pg(Jo(t,B,!0),B.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(e.xlmeta=Zpe(xs(t,Bl(a.metadata[0])),a.metadata[0],e)),(a.people||[]).length>=1&&(e.people=Dfe(xs(t,Bl(a.people[0])),e)),T&&(T=yxe(T,d.Sheets));var O=xs(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(_=0;_!=h.Worksheets;++_){var F="sheet";if(T&&T[_]?(k="xl/"+T[_][1].replace(/[\/]?xl\//,""),Fl(t,k)||(k=T[_][1]),Fl(t,k)||(k=B.replace(/_rels\/.*$/,"")+T[_][1]),F=T[_][2]):(k="xl/worksheets/sheet"+(_+1-O)+"."+D,k=k.replace(/sheet0\./,"sheet.")),I=k.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(_!=e.sheets)continue e;break;case"string":if(h.SheetNames[_].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var L=!1,Q=0;Q!=e.sheets.length;++Q)typeof e.sheets[Q]=="number"&&e.sheets[Q]==_&&(L=1),typeof e.sheets[Q]=="string"&&e.sheets[Q].toLowerCase()==h.SheetNames[_].toLowerCase()&&(L=1);if(!L)continue e}}wxe(t,k,I,h.SheetNames[_],_,N,i,F,e,d,l,A)}return b={Directory:a,Workbook:d,Props:h,Custprops:g,Deps:w,Sheets:i,SheetNames:h.SheetNames,Strings:jg,Styles:A,Themes:l,SSF:fa(xr)},e&&e.bookFiles&&(t.files?(b.keys=n,b.files=t.files):(b.keys=[],b.files={},t.FullPaths.forEach(function(q,ie){q=q.replace(/^Root Entry[\/]/,""),b.keys.push(q),b.files[q]=t.FileIndex[ie]}))),e&&e.bookVBA&&(a.vba.length>0?b.vbaraw=xs(t,Bl(a.vba[0]),!0):a.defaults&&a.defaults.bin===Hfe&&(b.vbaraw=xs(t,"xl/vbaProject.bin",!0))),b}function Cxe(t,e){var r=e||{},n="Workbook",a=or.find(t,n);try{if(n="/!DataSpaces/Version",a=or.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(ZAe(a.content),n="/!DataSpaces/DataSpaceMap",a=or.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=tde(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=or.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=rde(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=or.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);ade(a.content)}catch{}if(n="/EncryptionInfo",a=or.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=sde(a.content);if(n="/EncryptedPackage",a=or.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],a.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function Exe(t,e){return e.bookType=="ods"?zj(t,e):e.bookType=="numbers"?xxe(t,e):e.bookType=="xlsb"?_xe(t,e):Sxe(t,e)}function _xe(t,e){X0=1024,t&&!t.SSF&&(t.SSF=fa(xr)),t&&t.SSF&&(Zm(),kw(t.SSF),e.revssf=Fw(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Og?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=xj.indexOf(e.bookType)>-1,a=k4();G4(e=e||{});var s=p4(),i="",o=0;if(e.cellXfs=[],Sf(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",Or(s,i,DP(t.Props,e)),a.coreprops.push(i),Hn(e.rels,2,i,Zr.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],A=0;A<t.SheetNames.length;++A)(t.Workbook.Sheets[A]||{}).Hidden!=2&&l.push(t.SheetNames[A]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,Or(s,i,MP(t.Props)),a.extprops.push(i),Hn(e.rels,3,i,Zr.EXT_PROPS),t.Custprops!==t.Props&&za(t.Custprops||{}).length>0&&(i="docProps/custom.xml",Or(s,i,PP(t.Custprops)),a.custprops.push(i),Hn(e.rels,4,i,Zr.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},h=t.Sheets[t.SheetNames[o-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,Or(s,i,tge(o-1,i,e,t,d)),a.sheets.push(i),Hn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,Zr.WS[0])}if(h){var g=h["!comments"],b=!1,w="";g&&g.length>0&&(w="xl/comments"+o+"."+r,Or(s,w,age(g,w)),a.comments.push(w),Hn(d,-1,"../comments"+o+"."+r,Zr.CMNT),b=!0),h["!legacy"]&&b&&Or(s,"xl/drawings/vmlDrawing"+o+".vml",pj(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&Or(s,Ax(i),fm(d))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,Or(s,i,nge(e.Strings,i,e)),a.strs.push(i),Hn(e.wbrels,-1,"sharedStrings."+r,Zr.SST)),i="xl/workbook."+r,Or(s,i,ege(t,i)),a.workbooks.push(i),Hn(e.rels,1,i,Zr.WB),i="xl/theme/theme1.xml",Or(s,i,U4(t.Themes,e)),a.themes.push(i),Hn(e.wbrels,-1,"theme/theme1.xml",Zr.THEME),i="xl/styles."+r,Or(s,i,rge(t,i,e)),a.styles.push(i),Hn(e.wbrels,-1,"styles."+r,Zr.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",Or(s,i,t.vbaraw),a.vba.push(i),Hn(e.wbrels,-1,"vbaProject.bin",Zr.VBA)),i="xl/metadata."+r,Or(s,i,sge(i)),a.metadata.push(i),Hn(e.wbrels,-1,"metadata."+r,Zr.XLMETA),Or(s,"[Content_Types].xml",IP(a,e)),Or(s,"_rels/.rels",fm(e.rels)),Or(s,"xl/_rels/workbook."+r+".rels",fm(e.wbrels)),delete e.revssf,delete e.ssf,s}function Sxe(t,e){X0=1024,t&&!t.SSF&&(t.SSF=fa(xr)),t&&t.SSF&&(Zm(),kw(t.SSF),e.revssf=Fw(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Og?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=xj.indexOf(e.bookType)>-1,a=k4();G4(e=e||{});var s=p4(),i="",o=0;if(e.cellXfs=[],Sf(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",Or(s,i,DP(t.Props,e)),a.coreprops.push(i),Hn(e.rels,2,i,Zr.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],A=0;A<t.SheetNames.length;++A)(t.Workbook.Sheets[A]||{}).Hidden!=2&&l.push(t.SheetNames[A]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,Or(s,i,MP(t.Props)),a.extprops.push(i),Hn(e.rels,3,i,Zr.EXT_PROPS),t.Custprops!==t.Props&&za(t.Custprops||{}).length>0&&(i="docProps/custom.xml",Or(s,i,PP(t.Custprops)),a.custprops.push(i),Hn(e.rels,4,i,Zr.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var h={"!id":{}},m=t.Sheets[t.SheetNames[o-1]],g=(m||{})["!type"]||"sheet";switch(g){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,Or(s,i,Nj(o-1,e,t,h)),a.sheets.push(i),Hn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,Zr.WS[0])}if(m){var b=m["!comments"],w=!1,_="";if(b&&b.length>0){var N=!1;b.forEach(function(k){k[1].forEach(function(I){I.T==!0&&(N=!0)})}),N&&(_="xl/threadedComments/threadedComment"+o+"."+r,Or(s,_,Rfe(b,d,e)),a.threadedcomments.push(_),Hn(h,-1,"../threadedComments/threadedComment"+o+"."+r,Zr.TCMNT)),_="xl/comments"+o+"."+r,Or(s,_,gj(b)),a.comments.push(_),Hn(h,-1,"../comments"+o+"."+r,Zr.CMNT),w=!0}m["!legacy"]&&w&&Or(s,"xl/drawings/vmlDrawing"+o+".vml",pj(o,m["!comments"])),delete m["!comments"],delete m["!legacy"]}h["!id"].rId1&&Or(s,Ax(i),fm(h))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,Or(s,i,aj(e.Strings,e)),a.strs.push(i),Hn(e.wbrels,-1,"sharedStrings."+r,Zr.SST)),i="xl/workbook."+r,Or(s,i,Dj(t)),a.workbooks.push(i),Hn(e.rels,1,i,Zr.WB),i="xl/theme/theme1.xml",Or(s,i,U4(t.Themes,e)),a.themes.push(i),Hn(e.wbrels,-1,"theme/theme1.xml",Zr.THEME),i="xl/styles."+r,Or(s,i,dj(t,e)),a.styles.push(i),Hn(e.wbrels,-1,"styles."+r,Zr.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",Or(s,i,t.vbaraw),a.vba.push(i),Hn(e.wbrels,-1,"vbaProject.bin",Zr.VBA)),i="xl/metadata."+r,Or(s,i,mj()),a.metadata.push(i),Hn(e.wbrels,-1,"metadata."+r,Zr.XLMETA),d.length>1&&(i="xl/persons/person.xml",Or(s,i,Lfe(d)),a.people.push(i),Hn(e.wbrels,-1,"persons/person.xml",Zr.PEOPLE)),Or(s,"[Content_Types].xml",IP(a,e)),Or(s,"_rels/.rels",fm(e.rels)),Or(s,"xl/_rels/workbook."+r+".rels",fm(e.wbrels)),delete e.revssf,delete e.ssf,s}function q4(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=nl(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Txe(t,e){return or.find(t,"EncryptedPackage")?Cxe(t,e):Pj(t,e)}function Bxe(t,e){var r,n=t,a=e||{};return a.type||(a.type=Kr&&Buffer.isBuffer(t)?"buffer":"base64"),r=iP(n,a),bxe(r,a)}function qj(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return i5(t.slice(r),e);default:break e}return Fm.to_workbook(t,e)}function Nxe(t,e){var r="",n=q4(t,e);switch(e.type){case"base64":r=nl(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=Th(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Zn(r)),e.type="binary",qj(r,e)}function kxe(t,e){var r=t;return e.type=="base64"&&(r=nl(r)),r=sx.utils.decode(1200,r.slice(2),"str"),e.type="binary",qj(r,e)}function Ixe(t){return t.match(/[^\x00-\x7F]/)?bu(t):t}function cE(t,e,r,n){return n?(r.type="string",Fm.to_workbook(t,r)):Fm.to_workbook(e,r)}function xx(t,e){A4();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return xx(new Uint8Array(t),(r=fa(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),mm={},r.dateNF&&(mm.dateNF=r.dateNF),r.type||(r.type=Kr&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=Kr?"buffer":"binary",n=_le(t),typeof Uint8Array<"u"&&!Kr&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=Ixe(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=fa(r),r.type="array",xx(d4(n),r)}switch((a=q4(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return Txe(or.read(n,r),r);break;case 9:if(a[1]<=8)return Pj(n,r);break;case 60:return i5(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return UAe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return rj.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?Bxe(n,r):cE(t,n,r,s);case 239:return a[3]===60?i5(n,r):cE(t,n,r,s);case 255:if(a[1]===254)return kxe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return ph.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return ph.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return s5.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return cj.to_workbook(n,r);break;case 10:case 13:case 32:return Nxe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return LAe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?s5.to_workbook(n,r):cE(t,n,r,s)}function Kj(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Vx(e.file,or.write(t,{type:Kr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return or.write(t,e)}function Fxe(t,e){var r=fa(e||{}),n=Exe(t,r);return Rxe(n,r)}function Rxe(t,e){var r={},n=Kr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var a=t.FullPaths?or.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(e.type=="binary"||e.type=="base64")return a;a=new Uint8Array(Nw(a))}return e.password&&typeof encrypt_agile<"u"?Kj(encrypt_agile(a,e.password),e):e.type==="file"?Vx(e.file,a):e.type=="string"?Zn(a):a}function Dxe(t,e){var r=e||{},n=Ige(t,r);return Kj(n,r)}function xu(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return ix(bu(n));case"binary":return bu(n);case"string":return t;case"file":return Vx(e.file,n,"utf8");case"buffer":return Kr?HA(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):xu(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Lxe(t,e){switch(e.type){case"base64":return ix(t);case"binary":return t;case"string":return t;case"file":return Vx(e.file,t,"binary");case"buffer":return Kr?HA(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function _v(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?ix(r):e.type=="string"?Zn(r):r;case"file":return Vx(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function Wj(t,e){A4(),Tpe(t);var r=fa(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=Wj(t,r);return r.type="array",Nw(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=t.SheetNames.indexOf(r.sheet),!t.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return xu(Ege(t,r),r);case"slk":case"sylk":return xu(tj.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"htm":case"html":return xu(Oj(t.Sheets[t.SheetNames[a]],r),r);case"txt":return Lxe($j(t.Sheets[t.SheetNames[a]],r),r);case"csv":return xu(W4(t.Sheets[t.SheetNames[a]],r),r,"\uFEFF");case"dif":return xu(rj.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"dbf":return _v(s5.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"prn":return xu(Fm.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"rtf":return xu(cj.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"eth":return xu(nj.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"fods":return xu(zj(t,r),r);case"wk1":return _v(ph.sheet_to_wk1(t.Sheets[t.SheetNames[a]],r),r);case"wk3":return _v(ph.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),_v(jj(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),Dxe(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Fxe(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function Uxe(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function K4(t,e,r){var n={};return n.type="file",n.file=e,Uxe(n),Wj(t,n)}function Mxe(t,e,r,n,a,s,i,o){var l=is(r),A=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),h=!0,m=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!i||t[r])for(var g=e.s.c;g<=e.e.c;++g){var b=i?t[r][g]:t[n[g]+l];if(b===void 0||b.t===void 0){if(A===void 0)continue;s[g]!=null&&(m[s[g]]=A);continue}var w=b.v;switch(b.t){case"z":if(w==null)break;continue;case"e":w=w==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+b.t)}if(s[g]!=null){if(w==null)if(b.t=="e"&&w===null)m[s[g]]=null;else if(A!==void 0)m[s[g]]=A;else if(d&&w===null)m[s[g]]=null;else continue;else m[s[g]]=d&&(b.t!=="n"||b.t==="n"&&o.rawNumbers!==!1)?w:RA(b,w,o);w!=null&&(h=!1)}}return{row:m,isempty:h}}function xy(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},A=e||{},d=A.range!=null?A.range:t["!ref"];switch(A.header===1?n=1:A.header==="A"?n=2:Array.isArray(A.header)?n=3:A.header==null&&(n=0),typeof d){case"string":l=bn(d);break;case"number":l=bn(t["!ref"]),l.s.r=d;break;default:l=d}n>0&&(a=0);var h=is(l.s.r),m=[],g=[],b=0,w=0,_=Array.isArray(t),N=l.s.r,k=0,I={};_&&!t[N]&&(t[N]=[]);var P=A.skipHidden&&t["!cols"]||[],M=A.skipHidden&&t["!rows"]||[];for(k=l.s.c;k<=l.e.c;++k)if(!(P[k]||{}).hidden)switch(m[k]=Ta(k),r=_?t[N][k]:t[m[k]+h],n){case 1:s[k]=k-l.s.c;break;case 2:s[k]=m[k];break;case 3:s[k]=A.header[k-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=RA(r,null,A),w=I[i]||0,!w)I[i]=1;else{do o=i+"_"+w++;while(I[o]);I[i]=w,I[o]=1}s[k]=o}for(N=l.s.r+a;N<=l.e.r;++N)if(!(M[N]||{}).hidden){var D=Mxe(t,l,N,m,n,s,_,A);(D.isempty===!1||(n===1?A.blankrows!==!1:A.blankrows))&&(g[b++]=D.row)}return g.length=b,g}var k6=/"/g;function Pxe(t,e,r,n,a,s,i,o){for(var l=!0,A=[],d="",h=is(r),m=e.s.c;m<=e.e.c;++m)if(n[m]){var g=o.dense?(t[r]||[])[m]:t[n[m]+h];if(g==null)d="";else if(g.v!=null){l=!1,d=""+(o.rawNumbers&&g.t=="n"?g.v:RA(g,null,o));for(var b=0,w=0;b!==d.length;++b)if((w=d.charCodeAt(b))===a||w===s||w===34||o.forceQuotes){d='"'+d.replace(k6,'""')+'"';break}d=="ID"&&(d='"ID"')}else g.f!=null&&!g.F?(l=!1,d="="+g.f,d.indexOf(",")>=0&&(d='"'+d.replace(k6,'""')+'"')):d="";A.push(d)}return o.blankrows===!1&&l?null:A.join(i)}function W4(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var a=bn(t["!ref"]),s=n.FS!==void 0?n.FS:",",i=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),A=new RegExp((s=="|"?"\\|":s)+"+$"),d="",h=[];n.dense=Array.isArray(t);for(var m=n.skipHidden&&t["!cols"]||[],g=n.skipHidden&&t["!rows"]||[],b=a.s.c;b<=a.e.c;++b)(m[b]||{}).hidden||(h[b]=Ta(b));for(var w=0,_=a.s.r;_<=a.e.r;++_)(g[_]||{}).hidden||(d=Pxe(t,a,_,h,i,l,s,n),d!=null&&(n.strip&&(d=d.replace(A,"")),(d||n.blankrows!==!1)&&r.push((w++?o:"")+d)));return delete n.dense,r.join("")}function $j(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=W4(t,e);return r}function jxe(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var a=bn(t["!ref"]),s="",i=[],o,l=[],A=Array.isArray(t);for(o=a.s.c;o<=a.e.c;++o)i[o]=Ta(o);for(var d=a.s.r;d<=a.e.r;++d)for(s=is(d),o=a.s.c;o<=a.e.c;++o)if(e=i[o]+s,r=A?(t[d]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function Yj(t,e,r){var n=r||{},a=+!n.skipHeader,s=t||{},i=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?Ba(n.origin):n.origin;i=l.r,o=l.c}var A,d={s:{c:0,r:0},e:{c:o,r:i+e.length-1+a}};if(s["!ref"]){var h=bn(s["!ref"]);d.e.c=Math.max(d.e.c,h.e.c),d.e.r=Math.max(d.e.r,h.e.r),i==-1&&(i=h.e.r+1,d.e.r=i+e.length-1+a)}else i==-1&&(i=0,d.e.r=e.length-1+a);var m=n.header||[],g=0;e.forEach(function(w,_){za(w).forEach(function(N){(g=m.indexOf(N))==-1&&(m[g=m.length]=N);var k=w[N],I="z",P="",M=br({c:o+g,r:i+_+a});A=vx(s,M),k&&typeof k=="object"&&!(k instanceof Date)?s[M]=k:(typeof k=="number"?I="n":typeof k=="boolean"?I="b":typeof k=="string"?I="s":k instanceof Date?(I="d",n.cellDates||(I="n",k=Ls(k)),P=n.dateNF||xr[14]):k===null&&n.nullError&&(I="e",k=0),A?(A.t=I,A.v=k,delete A.w,delete A.R,P&&(A.z=P)):s[M]=A={t:I,v:k},P&&(A.z=P))})}),d.e.c=Math.max(d.e.c,o+m.length-1);var b=is(i);if(a)for(g=0;g<m.length;++g)s[Ta(g+o)+b]={t:"s",v:m[g]};return s["!ref"]=Dr(d),s}function Oxe(t,e){return Yj(null,t,e)}function vx(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Ba(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?vx(t,br(e)):vx(t,br({r:e,c:r||0}))}function Qxe(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function $4(){return{SheetNames:[],Sheets:{}}}function Y4(t,e,r,n){var a=1;if(!r)for(;a<=65535&&t.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&t.SheetNames.indexOf(r=i+a)!=-1;++a);}if(Rj(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function Hxe(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=Qxe(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function Vxe(t,e){return t.z=e,t}function Xj(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function zxe(t,e,r){return Xj(t,"#"+e,r)}function Gxe(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function qxe(t,e,r,n){for(var a=typeof e!="string"?e:bn(e),s=typeof e=="string"?e:Dr(e),i=a.s.r;i<=a.e.r;++i)for(var o=a.s.c;o<=a.e.c;++o){var l=vx(t,i,o);l.t="n",l.F=s,delete l.v,i==a.s.r&&o==a.s.c&&(l.f=r,n&&(l.D=!0))}return t}var Ml={encode_col:Ta,encode_row:is,encode_cell:br,encode_range:Dr,decode_col:E4,decode_row:C4,split_cell:nce,decode_cell:Ba,decode_range:To,format_cell:RA,sheet_add_aoa:EP,sheet_add_json:Yj,sheet_add_dom:Qj,aoa_to_sheet:ep,json_to_sheet:Oxe,table_to_sheet:Hj,table_to_book:Zge,sheet_to_csv:W4,sheet_to_txt:$j,sheet_to_json:xy,sheet_to_html:Oj,sheet_to_formulae:jxe,sheet_to_row_object_array:xy,sheet_get_cell:vx,book_new:$4,book_append_sheet:Y4,book_set_sheet_visibility:Hxe,cell_set_number_format:Vxe,cell_set_hyperlink:Xj,cell_set_internal_link:zxe,cell_add_comment:Gxe,sheet_set_array_formula:qxe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Kxe=async()=>{try{const t=an(Ar(wn,"apiLogs"),ya("timestamp","desc"));return(await So(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener logs de API:",t),new Error("No se pudieron cargar los logs de API")}},Wxe=async()=>{try{const t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,a=0;const s=[];for(const l of r)try{const A=Ar(wn,l),d=await So(A),h=d.size;n+=h,s.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:h});let m=0;d.docs.forEach(g=>{const b=g.data();b.createdAt&&new Date(b.createdAt)>=e&&m++}),a+=m}catch(A){console.warn(`Error accediendo a colección ${l}:`,A),s.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:0})}const i=[];try{const l=Ar(wn,"apiLogs"),A=new Date(t.getTime()-10080*60*1e3),d=an(l,Ai("timestamp",">=",A.toISOString()),ya("timestamp","desc")),h=await So(d),m={};h.docs.forEach(g=>{const b=g.data(),w=new Date(b.timestamp).toLocaleDateString("es-CL");m[w]=(m[w]||0)+1}),Object.entries(m).sort(([g],[b])=>new Date(g).getTime()-new Date(b).getTime()).forEach(([g,b])=>{i.push({label:g,value:b})})}catch(l){console.warn("Error calculando actividad diaria:",l)}const o=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:o,writesToday:a,totalDocuments:n,collectionsActivity:s.sort((l,A)=>A.value-l.value),dailyActivity:i}}catch(t){return console.error("Error al obtener estadísticas de Firestore:",t),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},I6=500,S0=({title:t,value:e,description:r,alert:n})=>c.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),c.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:e}),r&&c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),uE=({title:t,data:e,colorClass:r})=>{const n=J.useMemo(()=>Math.max(...e.map(a=>a.value),1),[e]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),c.jsx("div",{className:"space-y-4",children:e.length>0?e.map(a=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/n*100}%`}})})]},a.label)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},$xe=()=>{const[t,e]=J.useState([]),[r,n]=J.useState(!1),[a,s]=J.useState(null),[i,o]=J.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}),l=J.useCallback(async()=>{n(!0);try{const g=await Kxe();e(g),s(null)}catch(g){console.error("Error al cargar logs de la API desde Firestore:",g),s("No se pudieron cargar los logs de API desde la nube.")}finally{n(!1)}},[]),A=J.useCallback(async()=>{try{const g=await Wxe();o(g)}catch(g){console.error("Error al cargar estadísticas de Firestore:",g)}},[]);J.useEffect(()=>{l(),A();const g=setInterval(()=>{l(),A()},300*1e3);return()=>clearInterval(g)},[l,A]);const{stats:d,userStats:h,moduleStats:m}=J.useMemo(()=>{const g=new Date,b=new Date(g.getFullYear(),g.getMonth(),g.getDate()).getTime(),w=b-g.getDay()*24*60*60*1e3,_=new Date(g.getFullYear(),g.getMonth(),1).getTime(),N={today:0,week:0,month:0},k={},I={};t.forEach(D=>{const C=new Date(D.timestamp).getTime();C>=b&&N.today++,C>=w&&N.week++,C>=_&&N.month++,k[D.userId]||(k[D.userId]={email:D.userEmail,today:0,month:0,total:0}),k[D.userId].total++,C>=b&&k[D.userId].today++,C>=_&&k[D.userId].month++,I[D.module]=(I[D.module]||0)+1});const P=Object.values(k).sort((D,C)=>C.total-D.total),M=Object.entries(I).map(([D,C])=>({label:D,value:C})).sort((D,C)=>C.value-D.value);return{stats:N,userStats:P,moduleStats:M}},[t]);return c.jsxs("div",{className:"space-y-8",children:[r&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas desde la nube..."}),a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),!r&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsx(S0,{title:"Llamadas Hoy",value:r?"--":d.today,description:`Límite recomendado: ${I6}`,alert:d.today>I6}),c.jsx(S0,{title:"Llamadas esta Semana",value:r?"--":d.week}),c.jsx(S0,{title:"Llamadas este Mes",value:r?"--":d.month})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[c.jsx(uE,{title:"Uso por Módulo",data:m,colorClass:"bg-sky-500"}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&h.length>0?h.map(g=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:g.email}),c.jsx("td",{className:"px-4 py-2 text-center text-sm",children:g.today}),c.jsx("td",{className:"px-4 py-2 text-center text-sm",children:g.month}),c.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:g.total})]},g.email)):c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore en tiempo real."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(S0,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),c.jsx(S0,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),c.jsx(S0,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[c.jsx(uE,{title:"Actividad por Colección",data:i.collectionsActivity,colorClass:"bg-green-500"}),c.jsx(uE,{title:"Actividad Diaria (Últimos 7 días)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})},Pw=Ar(wn,"usuarios");async function X4(){return(await So(Pw)).docs.map(e=>({id:e.id,...e.data()}))}async function AE(t){await OA(hn(Pw,t.email),t)}async function F6(t,e){await Km(hn(Pw,t),e)}async function Yxe(t){await Bo(hn(Pw,t))}const R6=Object.values(er),Xxe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.629 5.629l-2.371 2.37-1.414-1.414 2.371-2.371A6 6 0 0115 7zm-3.707 5.293L6 17.586V20h2.414l5.293-5.293a1 1 0 00-1.414-1.414z"})}),D6=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},Jxe=()=>{const[t,e]=J.useState([]),[r,n]=J.useState(!1),[a,s]=J.useState("Usuarios"),[i,o]=J.useState({nombreCompleto:"",email:"",rut:"",profile:er.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[l,A]=J.useState(null),[d,h]=J.useState(""),[m,g]=J.useState(""),[b,w]=J.useState(""),[_,N]=J.useState(null),[k,I]=J.useState(null),[P,M]=J.useState(null),D=J.useCallback(async()=>{n(!0);try{const z=await X4();e(z)}catch(z){console.error("Error al cargar usuarios desde Firestore",z),N("No se pudieron cargar los usuarios desde la nube.")}finally{n(!1)}},[]);J.useEffect(()=>{D()},[D]);const C=J.useCallback(z=>{const{name:W,value:ce}=z.target;o(j=>({...j,[W]:ce,curso:W==="profile"&&ce!==er.ESTUDIANTE?"":j.curso}))},[]),B=J.useCallback((z,W)=>{o(ce=>{const j=ce[z]||[],K=j.includes(W)?j.filter(X=>X!==W):[...j,W];return{...ce,[z]:K}})},[]),T=J.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:er.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),A(null),N(null)},[]),O=J.useCallback(async z=>{var Fe,Xe;z.preventDefault();const{nombreCompleto:W,email:ce,profile:j,curso:K,cursos:X,asignaturas:te}=i;if(!W.trim()||!ce.trim()){N("Nombre Completo y Email son obligatorios.");return}if(j===er.ESTUDIANTE&&!K){N('El campo "Curso" es obligatorio para el perfil de Estudiante.');return}const le=j===er.ESTUDIANTE?D6(K||""):void 0,de=j===er.PROFESORADO?X:void 0,me=j===er.PROFESORADO?te:void 0,ge=(Fe=i.password)!=null&&Fe.trim()?i.password.trim():void 0,Se=(Xe=i.rut)!=null&&Xe.trim()?i.rut.trim():void 0,ae={...{nombreCompleto:i.nombreCompleto,email:i.email,profile:i.profile}};ge!==void 0&&(ae.password=ge),Se!==void 0&&(ae.rut=Se),le!==void 0&&(ae.curso=le),de!==void 0&&(ae.cursos=de),me!==void 0&&(ae.asignaturas=me);try{l?await F6(i.email,ae):await AE(ae),await D(),T()}catch(De){console.error("Error al guardar usuario:",De),N("Error al guardar el usuario en la nube.")}},[i,l,D,T]),F=J.useCallback(z=>{window.scrollTo({top:0,behavior:"smooth"}),A(z.id),o({nombreCompleto:z.nombreCompleto,email:z.email,rut:z.rut||"",profile:z.profile,password:"",curso:z.curso||"",cursos:z.cursos||[],asignaturas:z.asignaturas||[]})},[]),L=J.useCallback(async z=>{if(window.confirm("¿Está seguro de que desea eliminar este usuario?"))try{await Yxe(z),await D()}catch(W){console.error("Error al eliminar usuario:",W),N("No se pudo borrar el usuario en la nube.")}},[D]),Q=async()=>{if(window.confirm(`ADVERTENCIA: Esta acción es irreversible.

¿Está seguro de que desea restablecer las contraseñas de TODOS los usuarios a la contraseña por defecto ('recoleta')?

Cualquier contraseña personalizada será eliminada.`))try{await Promise.all(t.map(W=>F6(W.email,{password:void 0}))),await D(),alert("Todas las contraseñas han sido restablecidas exitosamente a 'recoleta'.")}catch(W){console.error("Error al restablecer contraseñas:",W),N("Error al restablecer contraseñas en la nube.")}},q=J.useMemo(()=>Array.from(new Set(t.filter(z=>z.profile===er.ESTUDIANTE&&z.curso).map(z=>z.curso))).sort(),[t]),ie=J.useMemo(()=>t.filter(z=>(d===""||z.nombreCompleto.toLowerCase().includes(d.toLowerCase())||z.email.toLowerCase().includes(d.toLowerCase()))&&(m===""||z.profile===m)&&(b===""||z.curso===b)),[t,d,m,b]),Z=async z=>{var j;const W=(j=z.target.files)==null?void 0:j[0];if(!W)return;I({message:"Procesando archivo de estudiantes...",isError:!1});const ce=new FileReader;ce.onload=async K=>{var X;try{const te=new Uint8Array((X=K.target)==null?void 0:X.result),le=xx(te,{type:"array"}),de=le.SheetNames[0],me=le.Sheets[de],ge=Ml.sheet_to_json(me);if(ge.length===0)throw new Error("El archivo Excel está vacío.");const Se=Object.keys(ge[0]).map(Fe=>Fe.trim().toLowerCase());if(!Se.includes("nombre")||!Se.includes("correo")||!Se.includes("curso"))throw new Error("El archivo debe tener las columnas: 'Nombre', 'Correo', y 'Curso'.");const xe={};Object.keys(ge[0]).forEach(Fe=>{xe[Fe.trim().toLowerCase()]=Fe});const ae=ge.map(Fe=>{const Xe=Fe[xe.nombre],De=Fe[xe.correo],Ce=Fe[xe.curso];return!Xe||!De||!Ce?null:{id:crypto.randomUUID(),nombreCompleto:String(Xe).trim(),email:String(De).trim(),profile:er.ESTUDIANTE,curso:D6(String(Ce).trim())}}).filter(Fe=>Fe!==null&&!t.some(Xe=>Xe.email.toLowerCase()===Fe.email.toLowerCase()));ae.length>0&&(await Promise.all(ae.map(Fe=>AE(Fe))),await D()),I({message:`Carga completada. Se agregaron ${ae.length} nuevos estudiantes.`,isError:!1})}catch(te){I({message:`Error: ${te.message}`,isError:!0})}finally{z.target&&(z.target.value="")}},ce.readAsArrayBuffer(W)},ee=async z=>{var j;const W=(j=z.target.files)==null?void 0:j[0];if(!W)return;M({message:"Procesando archivo de personal...",isError:!1});const ce=new FileReader;ce.onload=async K=>{var X;try{const te=new Uint8Array((X=K.target)==null?void 0:X.result),le=xx(te,{type:"array"}),de=le.SheetNames[0],me=le.Sheets[de],ge=Ml.sheet_to_json(me);if(ge.length===0)throw new Error("El archivo Excel está vacío.");const Se=Object.keys(ge[0]).map(Ce=>Ce.trim().toLowerCase());if(!Se.includes("nombre")||!Se.includes("correo")||!Se.includes("perfil"))throw new Error("El archivo debe tener las columnas: 'Nombre', 'Correo' y 'Perfil'.");const xe={};Object.keys(ge[0]).forEach(Ce=>{xe[Ce.trim().toLowerCase()]=Ce});const ae=Se.includes("curso");let Fe=0;const Xe=ge.map(Ce=>{const ze=Ce[xe.nombre],tt=Ce[xe.correo],it=Ce[xe.perfil];if(!ze||!tt||!it)return null;const dt=String(it).trim();return dt===er.ESTUDIANTE||!Object.values(er).includes(dt)?(console.warn(`Perfil inválido o de estudiante omitido: ${dt}`),null):ae&&Ce[xe.curso]?(console.warn(`Fila omitida: El perfil '${dt}' es para personal, pero se encontró una columna 'Curso' con datos. Use la carga de Estudiantes para este tipo de archivo.`),Fe++,null):{id:crypto.randomUUID(),nombreCompleto:String(ze).trim(),email:String(tt).trim(),profile:dt}}).filter(Ce=>Ce!==null&&!t.some(ze=>ze.email.toLowerCase()===Ce.email.toLowerCase()));Xe.length>0&&(await Promise.all(Xe.map(Ce=>AE(Ce))),await D());let De=`Carga completada. Se agregaron ${Xe.length} nuevos miembros del personal.`;Fe>0&&(De+=` Se omitieron ${Fe} filas porque parecían ser de estudiantes (contenían una columna 'Curso'). Por favor, use la opción 'Cargar Estudiantes' para ellas.`),M({message:De,isError:!1})}catch(te){M({message:`Error: ${te.message}`,isError:!0})}finally{z.target&&(z.target.value="")}},ce.readAsArrayBuffer(W)},ne="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>s("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),c.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&c.jsxs("div",{className:"space-y-8",children:[r&&c.jsx("div",{className:"text-center text-amber-600",children:"Cargando usuarios desde la nube..."}),_&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:_}),!r&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay usuarios registrados en la nube."}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:l?"Editando usuario":"Agregar nuevo usuario"}),c.jsxs("form",{onSubmit:O,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),c.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:C,className:ne,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),c.jsx("input",{type:"email",name:"email",value:i.email,onChange:C,className:ne,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),c.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:C,placeholder:"Dejar en blanco para no cambiar",className:ne})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),c.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:C,placeholder:"12.345.678-9",className:ne})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),c.jsx("select",{name:"profile",value:i.profile,onChange:C,className:ne,required:!0,children:R6.map(z=>c.jsx("option",{value:z,children:z},z))})]}),i.profile===er.ESTUDIANTE&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:i.curso,onChange:C,className:ne,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),ss.map(z=>c.jsx("option",{value:z,children:z},z))]})]})]}),i.profile===er.PROFESORADO&&c.jsxs("div",{className:"lg:col-span-3 mt-6 pt-6 border-t dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-semibold mb-3 text-slate-800 dark:text-slate-200",children:"Asignaciones de Profesor"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("fieldset",{className:"p-4 border rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold px-2 text-slate-700 dark:text-slate-300",children:"Cursos Asignados"}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-2 max-h-48 overflow-y-auto mt-2",children:ss.map(z=>c.jsxs("label",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",checked:(i.cursos||[]).includes(z),onChange:()=>B("cursos",z),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300"}),c.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:z})]},z))})]}),c.jsxs("fieldset",{className:"p-4 border rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold px-2 text-slate-700 dark:text-slate-300",children:"Asignaturas Asignadas"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2 max-h-48 overflow-y-auto mt-2",children:rl.map(z=>c.jsxs("label",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",checked:(i.asignaturas||[]).includes(z),onChange:()=>B("asignaturas",z),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300"}),c.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 truncate",title:z,children:z})]},z))})]})]})]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center col-span-full pt-2",children:['Nota: La contraseña por defecto para todos los usuarios es "',c.jsx("strong",{children:"recoleta"}),'".']}),_&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:_}),c.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[l&&c.jsx("button",{type:"button",onClick:T,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cargas Masivas desde Excel"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[c.jsx("h3",{className:"font-semibold mb-2 text-slate-700 dark:text-slate-300",children:"Cargar Estudiantes"}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:["El archivo debe tener las columnas: ",c.jsx("strong",{children:"Nombre"}),", ",c.jsx("strong",{children:"Correo"}),", ",c.jsx("strong",{children:"Curso"}),"."]}),c.jsx("input",{type:"file",onChange:Z,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-sky-50 file:text-sky-700 hover:file:bg-sky-100"}),k&&c.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${k.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:k.message})]}),c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[c.jsx("h3",{className:"font-semibold mb-2 text-slate-700 dark:text-slate-300",children:"Cargar Personal (Profesores, etc.)"}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:["El archivo debe tener las columnas: ",c.jsx("strong",{children:"Nombre"}),", ",c.jsx("strong",{children:"Correo"}),", ",c.jsx("strong",{children:"Perfil"}),"."]}),c.jsx("input",{type:"file",onChange:ee,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100"}),P&&c.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${P.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:P.message})]})]})]}),!r&&t.length>0&&c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:z=>h(z.target.value),className:ne}),c.jsxs("select",{value:m,onChange:z=>g(z.target.value),className:ne,children:[c.jsx("option",{value:"",children:"Filtrar por Perfil"}),R6.map(z=>c.jsx("option",{value:z,children:z},z))]}),c.jsxs("select",{value:b,onChange:z=>w(z.target.value),className:ne,children:[c.jsx("option",{value:"",children:"Filtrar por Curso"}),q.map(z=>c.jsx("option",{value:z,children:z},z))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Nombre Completo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Email"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Perfil / Curso"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:ie.map(z=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:z.nombreCompleto}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:z.email}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:c.jsxs("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-sky-100 text-sky-800 dark:bg-sky-900/50 dark:text-sky-300",children:[z.profile," ",z.curso&&`(${z.curso})`]})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[c.jsx("button",{onClick:()=>F(z),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),c.jsx("button",{onClick:()=>L(z.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},z.id))})]})})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Gestión de Contraseñas Masivas"}),c.jsx("div",{className:"p-4 border-l-4 border-red-500 bg-red-50 dark:bg-red-900/20",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsx("p",{className:"text-sm text-red-700 dark:text-red-200",children:"Esta acción restablecerá las contraseñas de TODOS los usuarios a la contraseña por defecto ('recoleta'). Úselo con precaución."})})]})}),c.jsx("div",{className:"mt-4",children:c.jsxs("button",{onClick:Q,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 flex items-center gap-2",children:[c.jsx(Xxe,{}),"Restablecer Todas las Contraseñas"]})})]})]}),a==="Monitor de Uso"&&c.jsx($xe,{})]})},L6="seguimientoDualRecords",Zxe={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},e1e=({record:t,onSave:e,onClose:r})=>{const[n,a]=J.useState(t),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=l=>{const{name:A,value:d,type:h,checked:m}=l.target;a(g=>({...g,[A]:h==="checkbox"?m:d}))},o=()=>{e(n)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:t.nombreEstudiante}),c.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f1s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),c.jsx("input",{id:`f1s1-${t.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f2s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),c.jsx("input",{id:`f2s1-${t.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f1s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),c.jsx("input",{id:`f1s2-${t.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f2s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),c.jsx("input",{id:`f2s2-${t.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`fex-${t.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),c.jsx("input",{id:`fex-${t.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`mg-nombre-${t.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),c.jsx("input",{id:`mg-nombre-${t.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:i,className:s+" mt-1"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`mg-contacto-${t.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),c.jsx("input",{id:`mg-contacto-${t.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:i,className:s+" mt-1"})]})]})]})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),c.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},t1e=()=>{const[t,e]=J.useState([]),r=J.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:dh[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:RC[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[n,a]=J.useState(r),[s,i]=J.useState(null),[o,l]=J.useState(""),[A,d]=J.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[h,m]=J.useState(null),[g,b]=J.useState(null),[w,_]=J.useState(!1),[N,k]=J.useState(null);J.useEffect(()=>{try{const ee=localStorage.getItem(L6);ee&&e(JSON.parse(ee))}catch(ee){console.error("Error al cargar datos de localStorage",ee)}},[]);const I=J.useCallback(ee=>{e(ee),localStorage.setItem(L6,JSON.stringify(ee))},[]),P=J.useCallback(ee=>{const{name:ne,value:z}=ee.target;a(W=>({...W,[ne]:z}))},[]),M=J.useCallback(ee=>{const{name:ne,value:z}=ee.target;d(W=>({...W,[ne]:z}))},[]),D=J.useCallback(()=>{a(r),i(null),m(null)},[r]),C=J.useCallback(ee=>{ee.preventDefault();const z=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(ce=>!n[ce].trim());if(z){m(`El campo '${z}' es obligatorio.`);return}const W=s?t.map(ce=>ce.id===s?{...ce,...n}:ce):[{...n,id:crypto.randomUUID()},...t];I(W),D()},[n,s,t,I,D]),B=J.useCallback(ee=>{window.scrollTo({top:0,behavior:"smooth"}),i(ee.id),a(ee)},[]),T=J.useCallback(ee=>{window.confirm("¿Está seguro de que desea eliminar este registro?")&&I(t.filter(ne=>ne.id!==ee))},[t,I]),O=ee=>{k(ee),_(!0)},F=()=>{k(null),_(!1)},L=ee=>{const ne=t.map(z=>z.id===ee.id?ee:z);I(ne),F()},Q=()=>{const ee=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],ne=Ml.aoa_to_sheet([ee]),z=Ml.book_new();Ml.book_append_sheet(z,ne,"Plantilla"),K4(z,"Plantilla_Seguimiento_Dual.xlsx")},q=ee=>{var W;const ne=(W=ee.target.files)==null?void 0:W[0];if(!ne)return;b({message:"Procesando archivo...",isError:!1});const z=new FileReader;z.onload=ce=>{var j;try{const K=new Uint8Array((j=ce.target)==null?void 0:j.result),X=xx(K,{type:"array",cellDates:!0}),te=X.SheetNames[0],le=X.Sheets[te],de=Ml.sheet_to_json(le);if(de.length===0)throw new Error("El archivo está vacío.");const me={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},ge=Object.keys(de[0]).map(Fe=>Fe.trim().toLowerCase()),xe=["nombre","rut","curso 2025","empresa","estado"].find(Fe=>!ge.includes(Fe));if(xe)throw new Error(`Falta la columna requerida: '${xe}'`);const ae=de.map(Fe=>{const Xe={id:crypto.randomUUID()};for(const De in Fe){const Ce=me[De.trim().toLowerCase()];if(Ce){let ze=Fe[De];ze instanceof Date&&(ze=ze.toISOString().split("T")[0]),typeof ze=="boolean"||typeof ze=="string"&&(ze.toLowerCase()==="true"||ze.toLowerCase()==="false")?Xe[Ce]=String(ze).toLowerCase()==="true":Xe[Ce]=ze}}return!Xe.nombreEstudiante||!Xe.rutEstudiante?null:Xe}).filter(Boolean);ae.length>0?(I([...ae,...t]),b({message:`Carga exitosa. Se agregaron ${ae.length} nuevos registros.`,isError:!1})):b({message:"No se encontraron nuevos registros válidos para agregar.",isError:!1})}catch(K){console.error(K),b({message:`Error al procesar el archivo: ${K.message}`,isError:!0})}},z.readAsArrayBuffer(ne)},ie="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",Z=J.useMemo(()=>t.filter(ee=>(o===""||ee.nombreEstudiante.toLowerCase().includes(o.toLowerCase())||ee.nombreEmpresa.toLowerCase().includes(o.toLowerCase())||ee.rutEstudiante.includes(o))&&(A.curso===""||ee.curso===A.curso)&&(A.empresa===""||ee.nombreEmpresa===A.empresa)&&(A.estado===""||ee.estado===A.estado)&&(A.comuna===""||ee.comuna===A.comuna)&&(A.profesor===""||ee.profesorTutorEmpresa===A.profesor)).sort((ee,ne)=>ee.nombreEstudiante.localeCompare(ne.nombreEstudiante)),[t,o,A]);return J.useMemo(()=>{const ee=new Set,ne=new Set;return t.forEach(z=>{z.nombreEmpresa&&ee.add(z.nombreEmpresa),z.comuna&&ne.add(z.comuna)}),{empresas:Array.from(ee).sort(),comunas:Array.from(ne).sort()}},[t]),c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Práctica Dual"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:s?"Editando registro existente.":"Registre un nuevo estudiante en práctica."}),c.jsxs("form",{onSubmit:C,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),c.jsx("input",{type:"text",name:"nombreEstudiante",value:n.nombreEstudiante,onChange:P,className:ie,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),c.jsx("input",{type:"text",name:"rutEstudiante",value:n.rutEstudiante,onChange:P,className:ie,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsx("select",{name:"curso",value:n.curso,onChange:P,className:ie,required:!0,children:dh.map(ee=>c.jsx("option",{value:ee,children:ee},ee))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),c.jsxs("select",{name:"profesorTutorEmpresa",value:n.profesorTutorEmpresa,onChange:P,className:ie,children:[c.jsx("option",{value:"",children:"Seleccione un profesor"}),C_.map(ee=>c.jsx("option",{value:ee,children:ee},ee))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),c.jsx("input",{type:"text",name:"nombreEmpresa",value:n.nombreEmpresa,onChange:P,className:ie,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),c.jsx("input",{type:"text",name:"rutEmpresa",value:n.rutEmpresa,onChange:P,className:ie})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),c.jsx("input",{type:"text",name:"direccionEmpresa",value:n.direccionEmpresa,onChange:P,className:ie})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),c.jsx("input",{type:"text",name:"comuna",value:n.comuna,onChange:P,className:ie})]}),c.jsxs("div",{className:"lg:col-span-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),c.jsx("select",{name:"estado",value:n.estado,onChange:P,className:ie,children:RC.map(ee=>c.jsx("option",{value:ee,children:ee},ee))})]})]}),n.estado==="Desvinculado"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),c.jsx("input",{type:"date",name:"fechaDesvinculacion",value:n.fechaDesvinculacion||"",onChange:P,className:`${ie} border-red-300`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),c.jsx("input",{type:"text",name:"motivoDesvinculacion",value:n.motivoDesvinculacion||"",onChange:P,className:`${ie} border-red-300`})]})]}),h&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:h}),c.jsxs("div",{className:"flex justify-end items-center gap-4",children:[s&&c.jsx("button",{type:"button",onClick:D,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:s?"Actualizar":"Agregar"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[c.jsx("button",{onClick:Q,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),c.jsx("input",{type:"file",onChange:q,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),g&&c.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${g.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:g.message})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Registros de Estudiantes"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:o,onChange:ee=>l(ee.target.value),className:`${ie} md:col-span-2 lg:col-span-1`}),c.jsxs("select",{name:"curso",value:A.curso,onChange:M,className:ie,children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),dh.map(ee=>c.jsx("option",{children:ee},ee))]}),c.jsxs("select",{name:"estado",value:A.estado,onChange:M,className:ie,children:[c.jsx("option",{value:"",children:"Todos los Estados"}),RC.map(ee=>c.jsx("option",{children:ee},ee))]}),c.jsxs("select",{name:"profesor",value:A.profesor,onChange:M,className:ie,children:[c.jsx("option",{value:"",children:"Todos los Profesores"}),C_.map(ee=>c.jsx("option",{children:ee},ee))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Z.map(ee=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:ee.nombreEstudiante}),c.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:ee.curso})]}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:ee.nombreEmpresa}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:ee.profesorTutorEmpresa}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Zxe[ee.estado]}`,children:ee.estado})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[c.jsx("button",{onClick:()=>O(ee),className:"text-blue-600 hover:underline",children:"Supervisión"}),c.jsx("button",{onClick:()=>B(ee),className:"text-yellow-600 hover:underline",children:"Editar"}),c.jsx("button",{onClick:()=>T(ee.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},ee.id))})]})})]}),w&&N&&c.jsx(e1e,{record:N,onClose:F,onSave:L})]})},Jj="actividades_remotas",r1e="respuestas_actividades",n1e="usuarios",J4=t=>{var r,n,a,s,i,o;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,plazoEntrega:((s=(a=e.plazoEntrega)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||e.plazoEntrega,fechaCompletado:((o=(i=e.fechaCompletado)==null?void 0:i.toDate)==null?void 0:o.call(i).toISOString())||e.fechaCompletado}},a1e=t=>{const e=an(Ar(dr,Jj),ya("fechaCreacion","desc"));return na(e,n=>{const a=n.docs.map(s=>J4(s));t(a)},n=>{console.error("Error al suscribirse a las actividades:",n),t([])})},s1e=async t=>{try{const e={...t,fechaCreacion:Wr.fromDate(new Date),plazoEntrega:Wr.fromDate(new Date(t.plazoEntrega+"T00:00:00"))};return(await eo(Ar(dr,Jj),e)).id}catch(e){throw console.error("Error al crear la actividad:",e),new Error("No se pudo crear la actividad.")}},i1e=t=>{const e=an(Ar(dr,r1e));return na(e,n=>{const a=n.docs.map(s=>J4(s));t(a)},n=>{console.error("Error al suscribirse a las respuestas:",n),t([])})},o1e=t=>{const e=an(Ar(dr,n1e));return na(e,n=>{const a=n.docs.map(s=>J4(s));t(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},dE={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3]},l1e=t=>new Promise((e,r)=>{const n=new FileReader;n.readAsDataURL(t),n.onload=()=>e(n.result),n.onerror=a=>r(a)}),c1e=()=>{const[t,e]=J.useState([]),[r,n]=J.useState([]),[a,s]=J.useState([]),[i,o]=J.useState(null),[l,A]=J.useState(!1),[d,h]=J.useState(!1),[m,g]=J.useState(!0),[b,w]=J.useState(null),[_,N]=J.useState(""),[k,I]=J.useState(null),[P,M]=J.useState([]),D={asignatura:rl[0],nivel:X2[0],contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[C,B]=J.useState(D);J.useEffect(()=>{g(!0);const de=a1e(e),me=i1e(n),ge=o1e(Se=>{s(Se),g(!1)});return()=>{de(),me(),ge()}},[]);const T=de=>{B(me=>({...me,[de.target.name]:de.target.value}))},O=de=>{B(me=>({...me,recursos:{...me.recursos,[de.target.name]:de.target.value}}))},F=de=>{de.target.files&&M(Array.from(de.target.files))},L=de=>{B(me=>{const ge=me.tipos.includes(de)?me.tipos.filter(xe=>xe!==de):[...me.tipos,de],Se={...me.cantidadPreguntas};return ge.includes(de)?Se[de]||(Se[de]=dE[de][0]):delete Se[de],{...me,tipos:ge,cantidadPreguntas:Se}})},Q=(de,me)=>{B(ge=>({...ge,cantidadPreguntas:{...ge.cantidadPreguntas,[de]:me}}))},q=de=>{B(me=>{var Se;const ge=(Se=me.cursosDestino)!=null&&Se.includes(de)?me.cursosDestino.filter(xe=>xe!==de):[...me.cursosDestino||[],de];return{...me,cursosDestino:ge}})},ie=de=>{B(me=>{var Se;const ge=(Se=me.estudiantesDestino)!=null&&Se.includes(de)?me.estudiantesDestino.filter(xe=>xe!==de):[...me.estudiantesDestino||[],de];return{...me,estudiantesDestino:ge}})},Z=()=>{const{tipos:de,contenido:me,asignatura:ge,nivel:Se,cantidadPreguntas:xe}=C;let ae=`Eres un experto diseñador de actividades pedagógicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${me}"
Asignatura: ${ge}
Nivel: ${Se}

Genera los siguientes elementos:
- **introduccion**: Una breve introducción motivadora para el estudiante sobre el tema: "${me}".
- **actividades**: Un objeto que contiene las actividades. Cada actividad es una propiedad con su nombre como clave:
`;return de.forEach(Fe=>{const Xe=xe[Fe]||dE[Fe][0];switch(Fe){case"Quiz":ae+=`- **Quiz**: Genera un quiz de ${Xe} preguntas de selección múltiple sobre el contenido. Cada una con 4 opciones.
`;break;case"Comprensión de Lectura":ae+=`- **Comprensión de Lectura**: Genera ${Xe} actividad(es) de comprensión. Cada una con un texto de 150-200 palabras y 4 preguntas de selección múltiple.
`;break;case"Términos Pareados":ae+=`- **Términos Pareados**: Genera ${Xe} pares de términos pareados (concepto y definición).
`;break;case"Desarrollo":ae+=`- **Desarrollo**: Genera ${Xe} pregunta(s) de desarrollo con una rúbrica simple en texto.
`;break}}),ae},ee=async de=>{if(de.preventDefault(),!C.contenido.trim()||C.tipos.length===0){w("Contenido y al menos un tipo de actividad son obligatorios.");return}h(!0),w(null);try{const me=await Promise.all(P.map(async it=>({nombre:it.name,url:await l1e(it)}))),ge="",xe=new globalThis.GoogleGenerativeAI(ge).getGenerativeModel({model:"gemini-pro"}),ae=Z(),Ce=(await(await xe.generateContent(ae)).response).text().replace(/^```json\s*|```\s*$/g,""),ze=JSON.parse(Ce),tt={id:"",fechaCreacion:new Date().toISOString(),...C,recursos:{...C.recursos,archivos:me},introduccion:ze.introduccion,generatedContent:ze.actividades};I(tt)}catch(me){console.error("Error al generar actividad con IA",me),w("Error al generar la actividad. Por favor, revise el contenido e inténtelo de nuevo.")}finally{h(!1)}},ne=async()=>{if(k)try{await s1e(k),B(D),M([]),A(!1),I(null)}catch(de){console.error("Error al guardar la actividad:",de),w("No se pudo guardar la actividad en la base de datos.")}},z=J.useMemo(()=>{var ge,Se;if(!i||!a)return[];const de=a.filter(xe=>{var ae;return xe.profile===er.ESTUDIANTE&&((ae=i.cursosDestino)==null?void 0:ae.includes(xe.curso||""))}).map(xe=>xe.nombreCompleto),me=i.estudiantesDestino||[];if(!((ge=i.cursosDestino)!=null&&ge.length)&&!((Se=i.estudiantesDestino)!=null&&Se.length)){const xe=i.nivel.charAt(0);return a.filter(ae=>{var Fe;return ae.profile===er.ESTUDIANTE&&((Fe=ae.curso)==null?void 0:Fe.startsWith(xe))}).map(ae=>ae.nombreCompleto).sort()}return Array.from(new Set([...de,...me])).sort()},[i,a]),W=J.useMemo(()=>r.filter(de=>de.actividadId===(i==null?void 0:i.id)),[r,i]),ce=J.useMemo(()=>a.filter(de=>de.profile===er.ESTUDIANTE).sort((de,me)=>de.nombreCompleto.localeCompare(me.nombreCompleto)),[a]),j=J.useMemo(()=>_.trim()?ce.filter(de=>de.nombreCompleto.toLowerCase().includes(_.toLowerCase())):ce,[ce,_]),K=()=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:[i==null?void 0:i.asignatura," - ",i==null?void 0:i.tipos.join(", ")]}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Nivel: ",i==null?void 0:i.nivel," | Plazo: ",i==null?void 0:i.plazoEntrega]})]}),c.jsx("button",{onClick:()=>o(null),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),c.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:z.map(de=>{const me=W.find(ge=>ge.estudianteId===de);return c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:de}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:me?c.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):c.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:me?`${me.puntaje}/${me.puntajeMaximo}`:"-"}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:me?new Date(me.fechaCompletado).toLocaleString("es-CL"):"-"})]},de)})})]})})]})]}),X=()=>{var de,me;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),c.jsx("button",{onClick:()=>A(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad interactiva para sus estudiantes."}),c.jsxs("form",{onSubmit:ee,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:C.asignatura,onChange:T,className:"w-full border-slate-300 rounded-md shadow-sm",children:rl.map(ge=>c.jsx("option",{value:ge,children:ge},ge))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:C.nivel,onChange:T,className:"w-full border-slate-300 rounded-md shadow-sm",children:X2.map(ge=>c.jsx("option",{value:ge,children:ge},ge))})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos de Aprendizaje (Opcional)"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones de estudio"}),c.jsx("textarea",{name:"instrucciones",value:(de=C.recursos)==null?void 0:de.instrucciones,onChange:O,placeholder:"Ej: Lee el siguiente texto y luego responde...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces (videos, documentos, etc.)"}),c.jsx("textarea",{name:"enlaces",value:(me=C.recursos)==null?void 0:me.enlaces,onChange:O,placeholder:"Pega un enlace por línea...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos (PDF, imágenes, etc.)"}),c.jsx("input",{type:"file",multiple:!0,onChange:F,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Seleccione cursos o estudiantes. Si no selecciona ninguno, la actividad será visible para todo el nivel."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Cursos"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:ss.map(ge=>{var Se;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(Se=C.cursosDestino)==null?void 0:Se.includes(ge),onChange:()=>q(ge),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700",children:ge})]},ge)})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Estudiantes"}),c.jsx("input",{type:"text",placeholder:"Buscar...",value:_,onChange:ge=>N(ge.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:j.map(ge=>{var Se;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(Se=C.estudiantesDestino)==null?void 0:Se.includes(ge.nombreCompleto),onChange:()=>ie(ge.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:ge.nombreCompleto,children:ge.nombreCompleto})]},ge.id)})})]})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),c.jsx("div",{className:"space-y-3",children:k$.map(ge=>c.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:C.tipos.includes(ge),onChange:()=>L(ge),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:ge})]}),C.tipos.includes(ge)&&c.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[c.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),dE[ge].map(Se=>c.jsx("button",{type:"button",onClick:()=>Q(ge,Se),className:`px-3 py-1 rounded-full font-semibold text-xs ${C.cantidadPreguntas[ge]===Se?"bg-amber-500 text-white":"bg-slate-200"}`,children:Se},Se))]})]},ge))})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenido",value:C.contenido,onChange:T,required:!0,rows:4,placeholder:"Ingrese los temas, conceptos clave o el texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),c.jsx("input",{type:"date",name:"plazoEntrega",value:C.plazoEntrega,onChange:T,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),b&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:b}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:d,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:d?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Generar y Previsualizar"})})]})]})},te=()=>{var de;return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar la actividad."}),c.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[c.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:k==null?void 0:k.introduccion})]}),(k==null?void 0:k.recursos)&&(k.recursos.instrucciones||k.recursos.enlaces||((de=k.recursos.archivos)==null?void 0:de.length))&&c.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),c.jsxs("div",{className:"space-y-3",children:[k.recursos.instrucciones&&c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:k.recursos.instrucciones}),k.recursos.enlaces&&c.jsx("div",{children:k.recursos.enlaces.split(`
`).map((me,ge)=>me.trim()&&c.jsx("a",{href:me,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:me},ge))}),k.recursos.archivos&&k.recursos.archivos.length>0&&c.jsx("ul",{className:"list-disc list-inside",children:k.recursos.archivos.map(me=>c.jsx("li",{className:"text-slate-700",children:me.nombre},me.nombre))})]})]}),k==null?void 0:k.tipos.map(me=>{const ge=k.generatedContent[me];return ge?c.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:me}),c.jsxs("div",{className:"space-y-4 text-sm",children:[me==="Quiz"&&ge.map((Se,xe)=>c.jsxs("div",{children:[c.jsxs("p",{className:"font-semibold",children:[xe+1,". ",Se.pregunta]}),c.jsx("ul",{className:"list-disc pl-5 mt-1",children:Se.opciones.map(ae=>c.jsx("li",{children:ae},ae))}),c.jsxs("p",{className:"text-xs text-green-600",children:["R: ",Se.respuestaCorrecta]})]},xe)),me==="Comprensión de Lectura"&&c.jsxs("div",{children:[c.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-2 rounded",children:ge.texto}),ge.preguntas.map((Se,xe)=>c.jsxs("div",{className:"mt-2",children:[c.jsxs("p",{className:"font-semibold",children:[xe+1,". ",Se.pregunta]}),c.jsx("ul",{className:"list-disc pl-5 mt-1",children:Se.opciones.map(ae=>c.jsx("li",{children:ae},ae))}),c.jsxs("p",{className:"text-xs text-green-600",children:["R: ",Se.respuestaCorrecta]})]},xe))]}),me==="Términos Pareados"&&c.jsx("ul",{className:"list-disc pl-5",children:ge.map(Se=>c.jsxs("li",{children:[c.jsxs("strong",{children:[Se.concepto,":"]})," ",Se.definicion]},Se.id))}),me==="Desarrollo"&&ge.map((Se,xe)=>c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold",children:Se.pregunta}),c.jsxs("p",{className:"text-xs italic mt-1",children:["Rúbrica: ",Se.rubrica]})]},xe))]})]},me):null})]}),c.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>I(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:ne,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700",children:"Confirmar y Asignar"})]})]})},le=()=>c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),c.jsx("button",{onClick:()=>A(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva"})]}),c.jsx("div",{className:"space-y-4",children:t.length>0?t.map(de=>{var Se,xe;const me=[];(Se=de.cursosDestino)!=null&&Se.length&&me.push(`Cursos: ${de.cursosDestino.join(", ")}`),(xe=de.estudiantesDestino)!=null&&xe.length&&me.push(`Estudiantes: ${de.estudiantesDestino.length}`);const ge=me.length?me.join(" | "):`Todo ${de.nivel}`;return c.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[de.asignatura," - ",de.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",ge," | Creado: ",new Date(de.fechaCreacion).toLocaleDateString("es-CL")]})]}),c.jsx("button",{onClick:()=>o(de),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},de.id)}):c.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Haga clic en "Crear Nueva" para comenzar.'})})]});return m?c.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):c.jsx("div",{className:"animate-fade-in",children:k?te():i?K():l?X():le()})},u1e="actividadesRemotas",fE="respuestasActividades",A1e=t=>[...t].sort(()=>Math.random()-.5),d1e=(t,e)=>{if(e===0)return"1.0";const n=e*.6;let a;return t>=n?a=4+(t-n)*3/(e-n):a=1+t*3/(n||1),a=Math.max(1,Math.min(7,a)),a.toFixed(1)},U6=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),f1e=({actividad:t,onComplete:e,currentUser:r})=>{var k,I,P,M;const[n,a]=J.useState({}),[s,i]=J.useState(!1),[o,l]=J.useState(!1),[A,d]=J.useState(!1),[h,m]=J.useState({}),g=`progress-${r.id}-${t.id}`;J.useEffect(()=>{const D={};t.tipos.forEach(C=>{if(C==="Términos Pareados"){const B=t.generatedContent[C];B&&(D[C]=A1e(B.map(T=>T.definicion)))}}),m(D);try{const C=localStorage.getItem(g);C&&a(JSON.parse(C))}catch(C){console.error("Could not load saved progress",C)}},[t,g]);const b=(D,C)=>{a(B=>({...B,[D]:C}))},w=()=>{l(!0),d(!1),setTimeout(()=>{try{localStorage.setItem(g,JSON.stringify(n)),d(!0),setTimeout(()=>d(!1),2e3)}catch(D){console.error("Could not save progress",D),alert("Error al guardar el progreso.")}finally{l(!1)}},500)},_=async()=>{i(!0);let D=0,C=0;const B=[],T={};for(const F of t.tipos){const L=t.generatedContent[F],Q=n[F];if(F==="Quiz"||F==="Comprensión de Lectura"){const q=F==="Quiz"?L:L.preguntas,ie=Q||{};let Z=0,ee=0;q.forEach((ne,z)=>{ee+=1,ie[z]===ne.respuestaCorrecta&&(Z+=1)}),D+=Z,C+=ee,B.push(`${F}: ${Z}/${ee} correctas.`),T[F]={puntaje:Z,puntajeMaximo:ee}}else if(F==="Términos Pareados"){const q=L,ie=Q||{};let Z=0,ee=0;q.forEach(ne=>{ee+=2,ie[ne.id]===ne.definicion&&(Z+=2)}),D+=Z,C+=ee,B.push(`${F}: ${Z/2}/${q.length} correctas.`),T[F]={puntaje:Z,puntajeMaximo:ee}}else if(F==="Desarrollo"){const q=L,ie=Q||{};let Z=0,ee=0;for(let ne=0;ne<q.length;ne++){const z=q[ne];ee+=3;try{Gl("Autoaprendizaje - Evaluar Desarrollo");const W=new zl({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),ce=`Evalúa la siguiente respuesta de un estudiante a la pregunta de desarrollo, basándote en la rúbrica proporcionada. Asigna un puntaje de 0 a 3. Pregunta: "${z.pregunta}". Rúbrica: "${z.rubrica}". Respuesta: "${ie[ne]||""}". Proporciona también una frase corta de feedback.`,j={type:Zt.OBJECT,properties:{puntaje:{type:Zt.INTEGER,description:"Un puntaje de 0 a 3."},feedback:{type:Zt.STRING}},required:["puntaje","feedback"]},K=await W.models.generateContent({model:"gemini-2.5-flash",contents:ce,config:{responseMimeType:"application/json",responseSchema:j}}),X=JSON.parse(K.text),te=Math.max(0,Math.min(3,X.puntaje||0));Z+=te,B.push(`${F} #${ne+1}: Puntaje ${te}/3. (${X.feedback})`)}catch(W){console.error(W),B.push(`${F} #${ne+1}: No se pudo evaluar automáticamente.`)}}D+=Z,C+=ee,T[F]={puntaje:Z,puntajeMaximo:ee}}}let O=`¡Buen trabajo! Tu puntaje total es ${D} de ${C}.`;e({respuestas:n,puntaje:D,puntajeMaximo:C,retroalimentacion:O,calificacion:d1e(D,C),puntajesPorSeccion:T}),localStorage.removeItem(g),i(!1)},N=t.recursos&&(t.recursos.instrucciones||t.recursos.enlaces||((k=t.recursos.archivos)==null?void 0:k.length));return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"p-4 bg-sky-50 dark:bg-sky-900/30 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h2",{className:"text-xl font-bold text-sky-800 dark:text-sky-200 mb-2",children:"¡Hola!"}),c.jsx("p",{className:"text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:t.introduccion})]}),N&&c.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/30 border-l-4 border-indigo-400 rounded-r-lg",children:[c.jsx("h2",{className:"text-xl font-bold text-indigo-800 dark:text-indigo-200 mb-3",children:"Material de Estudio"}),c.jsxs("div",{className:"space-y-4",children:[((I=t.recursos)==null?void 0:I.instrucciones)&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Instrucciones:"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:t.recursos.instrucciones})]}),((P=t.recursos)==null?void 0:P.enlaces)&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Enlaces:"}),t.recursos.enlaces.split(`
`).map((D,C)=>D.trim()&&c.jsx("a",{href:D,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-500 hover:underline truncate",children:D},C))]}),((M=t.recursos)==null?void 0:M.archivos)&&t.recursos.archivos.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Archivos:"}),c.jsx("ul",{className:"list-disc list-inside",children:t.recursos.archivos.map((D,C)=>c.jsx("li",{children:c.jsx("a",{href:D.url,download:D.nombre,className:"text-blue-500 hover:underline",children:D.nombre})},C))})]})]})]}),t.tipos.map(D=>{const C=t.generatedContent[D];if(!C)return null;switch(D){case"Quiz":case"Comprensión de Lectura":{const B=D==="Quiz",T=C,O=B?T:T.preguntas;return c.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:D}),!B&&c.jsx("div",{className:"mb-4 whitespace-pre-wrap bg-slate-50 dark:bg-slate-700/50 p-3 rounded text-slate-700 dark:text-slate-300",children:T.texto}),c.jsx("div",{className:"space-y-6",children:O.map((F,L)=>c.jsxs("div",{children:[c.jsxs("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:[L+1,". ",F.pregunta]}),c.jsx("div",{className:"mt-2 space-y-2",children:F.opciones.map((Q,q)=>{var ie;return c.jsxs("label",{className:"flex items-center gap-3 p-3 rounded hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer text-slate-600 dark:text-slate-300",children:[c.jsx("input",{type:"radio",name:`q-${D}-${L}-${t.id}`,value:Q,checked:((ie=n[D])==null?void 0:ie[L])===Q,onChange:()=>b(D,{...n[D]||{},[L]:Q}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400"}),c.jsx("span",{children:Q})]},q)})})]},`${D}-${L}`))})]},D)}case"Términos Pareados":{const B=C,T=h[D]||[];return c.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:D}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Concepto"}),B.map(O=>c.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-700 rounded h-14 flex items-center justify-center text-center font-medium text-slate-700 dark:text-slate-300",children:O.concepto},O.id))]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Definición"}),B.map(O=>{var F;return c.jsx("div",{className:"h-14 flex items-center",children:c.jsxs("select",{value:((F=n[D])==null?void 0:F[O.id])||"",onChange:L=>b(D,{...n[D]||{},[O.id]:L.target.value}),className:"w-full h-full border-slate-300 rounded-md shadow-sm text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300",children:[c.jsx("option",{value:"",children:"Seleccionar definición..."}),T.map((L,Q)=>c.jsx("option",{value:L,children:L},Q))]})},O.id)})]})]})]},D)}case"Desarrollo":{const B=C;return c.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:D}),B.map((T,O)=>{var F;return c.jsxs("div",{className:"mb-6",children:[c.jsx("p",{className:"font-semibold mb-2 text-slate-700 dark:text-slate-300",children:T.pregunta}),c.jsxs("p",{className:"text-sm italic text-slate-500 dark:text-slate-400 mb-4",children:[c.jsx("strong",{children:"Rúbrica:"})," ",T.rubrica]}),c.jsx("textarea",{value:((F=n[D])==null?void 0:F[O])||"",onChange:L=>b(D,{...n[D]||{},[O]:L.target.value}),rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300"})]},O)})]},D)}default:return null}}),c.jsxs("div",{className:"text-right mt-8 flex justify-end gap-4",children:[c.jsx("button",{onClick:w,disabled:s||o||A,className:"bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-700 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center justify-center min-w-[200px] transition-colors duration-200",children:o?c.jsxs(c.Fragment,{children:[c.jsx(U6,{})," Guardando..."]}):A?"✓ Guardado":"Guardar Progreso"}),c.jsx("button",{onClick:_,disabled:s||o,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:s?c.jsxs(c.Fragment,{children:[c.jsx(U6,{})," Evaluando..."]}):"Entregar Actividad"})]})]})},h1e=({currentUser:t})=>{const[e,r]=J.useState([]),[n,a]=J.useState([]),[s,i]=J.useState(null),[o,l]=J.useState("list"),[A,d]=J.useState(null),[h,m]=J.useState(null);J.useEffect(()=>{try{const _=localStorage.getItem(u1e);if(_){const k=JSON.parse(_),I=t.curso||"",P=t.nombreCompleto,M=k.filter(D=>{var O,F,L,Q;const C=!((O=D.cursosDestino)!=null&&O.length)&&!((F=D.estudiantesDestino)!=null&&F.length),B=((L=D.cursosDestino)==null?void 0:L.includes(I))??!1,T=((Q=D.estudiantesDestino)==null?void 0:Q.includes(P))??!1;if(B||T)return!0;if(C&&I){const q=D.nivel.charAt(0),ie=I.charAt(0);return q===ie}return!1});r(M)}const N=localStorage.getItem(fE);if(N){const k=JSON.parse(N).filter(I=>I.estudianteId===t.nombreCompleto);a(k)}}catch(_){console.error("Error loading data",_)}},[t]);const g=_=>{m(_)},b=()=>{h&&(i(h),l("activity"),m(null))},w=J.useCallback(async _=>{if(!s)return;let N;const k=`
            Un estudiante ha completado una actividad sobre "${s.contenido}".
            Su puntaje total fue ${_.puntaje} de ${_.puntajeMaximo}.
            Detalle por sección: ${JSON.stringify(_.puntajesPorSeccion||{})}
            Respuestas de desarrollo: ${JSON.stringify(_.respuestas.Desarrollo||{})}
            
            Genera una retroalimentación detallada y constructiva en español. La respuesta DEBE ser un objeto JSON con la siguiente estructura:
            - "resumenGeneral": Un párrafo breve y motivador sobre el desempeño general.
            - "areasDeFortaleza": Un array de 2 o 3 strings destacando lo que hizo bien.
            - "areasDeMejora": Un array de 2 o 3 strings con áreas a mejorar.
            - "planDeMejora": Un array de 3 objetos, cada uno con "paso" (string, ej: "Repasar conceptos clave") y "detalle" (string, una sugerencia concreta).
            - "feedbackPorSeccion": Un objeto donde cada clave es el tipo de actividad (ej: "Quiz") y el valor es un string con feedback específico para esa sección.
        `;try{Gl("Autoaprendizaje - Retroalimentación Detallada");const C=await new zl({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:k,config:{responseMimeType:"application/json"}});N=JSON.parse(C.text.trim().replace(/(\*\*|\*)/g,""))}catch(D){console.error("Error generating detailed feedback:",D)}const I={id:crypto.randomUUID(),actividadId:s.id,estudianteId:t.nombreCompleto,fechaCompletado:new Date().toISOString(),..._,retroalimentacionDetallada:N},P=JSON.parse(localStorage.getItem(fE)||"[]"),M=[I,...P.filter(D=>!(D.actividadId===I.actividadId&&D.estudianteId===I.estudianteId))];localStorage.setItem(fE,JSON.stringify(M)),a(D=>[I,...D.filter(C=>C.actividadId!==I.actividadId)]),d(I),l("result")},[s,t.nombreCompleto]);if(o==="activity"&&s)return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("h1",{className:"text-3xl font-bold text-slate-800",children:[s.asignatura,": ",s.tipos.join(", ")]}),c.jsxs("p",{className:"text-slate-500 mb-6",children:["Plazo: ",s.plazoEntrega]}),c.jsx(f1e,{actividad:s,onComplete:w,currentUser:t})]});if(o==="result"&&A){const _=A.retroalimentacionDetallada,N=A.puntajesPorSeccion||{},k=(I,P)=>{const M=P>0?I/P:0;return M<.4?"bg-red-100 text-red-800":M<.7?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"};return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Retroalimentación de la Actividad"}),_?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Retroalimentación General"}),c.jsx("p",{className:"text-slate-600 mb-6",children:_.resumenGeneral}),c.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-4 rounded-lg mb-6",children:[c.jsx("span",{className:"text-lg font-bold",children:"Puntaje Total:"}),c.jsxs("span",{className:`px-4 py-2 text-xl font-bold rounded-full ${k(A.puntaje,A.puntajeMaximo)}`,children:[A.puntaje," / ",A.puntajeMaximo]})]}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-green-600 mb-2",children:"✓ Áreas de Fortaleza"}),c.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:_.areasDeFortaleza.map((I,P)=>c.jsx("li",{children:I},P))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-red-600 mb-2",children:"✗ Áreas de Mejora"}),c.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:_.areasDeMejora.map((I,P)=>c.jsx("li",{children:I},P))})]})]})]}),c.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Object.entries(N).map(([I,{puntaje:P,puntajeMaximo:M}])=>{var D;return c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("h3",{className:"text-xl font-bold",children:I}),c.jsxs("span",{className:`px-3 py-1 text-sm font-bold rounded-full ${k(P,M)}`,children:[P," / ",M]})]}),c.jsx("p",{className:"text-slate-500 text-sm",children:(D=_.feedbackPorSeccion)==null?void 0:D[I]})]},I)})}),c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Plan de Mejora Sugerido"}),c.jsx("div",{className:"space-y-4",children:_.planDeMejora.map((I,P)=>c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"bg-blue-500 text-white rounded-full h-8 w-8 flex-shrink-0 flex items-center justify-center font-bold mt-1",children:"✓"}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold",children:I.paso}),c.jsx("p",{className:"text-slate-600 text-sm",children:I.detalle})]})]},P))})]})]}):c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md text-center",children:[c.jsx("h2",{className:"text-3xl font-bold text-green-600 mb-4",children:"¡Actividad Completada!"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-sm mx-auto my-8",children:[c.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-sm text-slate-500",children:"Puntaje"}),c.jsxs("p",{className:"text-2xl font-bold",children:[A.puntaje," / ",A.puntajeMaximo]})]}),c.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-sm text-slate-500",children:"Calificación"}),c.jsx("p",{className:"text-2xl font-bold",children:A.calificacion})]})]}),c.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg text-left",children:[c.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"Retroalimentación"}),c.jsx("p",{className:"text-blue-700 whitespace-pre-wrap",children:A.retroalimentacion})]})]}),c.jsx("button",{onClick:()=>{l("list"),d(null)},className:"w-full mt-4 bg-slate-800 text-white font-bold py-3 px-6 rounded-lg hover:bg-slate-700",children:"Volver a Actividades"})]})}return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[h&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full animate-fade-in-up",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Confirmar inicio de actividad"}),c.jsxs("p",{className:"mt-4 text-slate-600",children:["¿Estás seguro de que deseas comenzar esta actividad? ",c.jsx("strong",{children:"Tendrás solo una oportunidad para responder."})]}),c.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Sin embargo, puedes guardar tu progreso antes de enviarlo. Una vez enviado, no habrá una segunda oportunidad."}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx("button",{onClick:()=>m(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:b,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Sí, comenzar"})]})]})}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Auto-aprendizaje"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades remotas asignadas por tus profesores."}),c.jsx("div",{className:"space-y-4",children:e.length>0?e.map(_=>{const N=n.find(I=>I.actividadId===_.id),k=!!N;return c.jsx("div",{className:`p-4 border rounded-lg ${k?"bg-green-50":"bg-slate-50"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[_.asignatura," - ",_.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",_.plazoEntrega]})]}),k?c.jsxs("div",{className:"text-right",children:[c.jsx("button",{onClick:()=>{d(N),l("result")},className:"font-semibold text-blue-700 hover:underline",children:"Ver Resultados"}),c.jsxs("p",{className:"text-sm text-slate-600",children:["Puntaje: ",N.puntaje,"/",N.puntajeMaximo]})]}):c.jsx("button",{onClick:()=>g(_),className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Comenzar"})]})},_.id)}):c.jsx("p",{className:"text-center text-slate-500 py-10",children:"No hay actividades disponibles en este momento."})})]})},jw="estudiantes_inclusion",m1e="usuarios",Zj=t=>{const e=t.data();return{id:t.id,...e}},p1e=t=>{const e=an(Ar(dr,jw));return na(e,n=>{const a=n.docs.map(s=>Zj(s));t(a)},n=>{console.error("Error al suscribirse a estudiantes de inclusión:",n),t([])})},g1e=t=>{const e=an(Ar(dr,m1e));return na(e,n=>{const a=n.docs.map(s=>Zj(s));t(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},x1e=async t=>{try{return(await eo(Ar(dr,jw),t)).id}catch(e){throw console.error("Error al agregar estudiante a inclusión:",e),new Error("No se pudo agregar al estudiante.")}},v1e=async(t,e)=>{try{const{id:r,...n}=e,a=hn(dr,jw,t);await OA(a,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusión:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},y1e=async t=>{try{const e=hn(dr,jw,t);await Bo(e)}catch(e){throw console.error("Error al eliminar estudiante de inclusión:",e),new Error("No se pudo eliminar al estudiante.")}},w1e=({student:t,onClose:e,onSave:r,profesores:n})=>{const[a,s]=J.useState("intervenciones"),[i,o]=J.useState(t);J.useEffect(()=>{o(t)},[t]);const[l,A]=J.useState(null),d={responsable:"",accion:"",observaciones:""},[h,m]=J.useState(d),[g,b]=J.useState({trimestre:"T1",meta:""}),[w,_]=J.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[N,k]=J.useState(null),[I,P]=J.useState(!1),M={motivo:"",acuerdos:"",asistentes:""},[D,C]=J.useState(M),B=()=>{r(i),e()},T=()=>{if(!h.responsable||!h.accion){alert("Responsable y Acción son campos obligatorios.");return}let xe;l?xe=(i.intervenciones||[]).map(Fe=>Fe.id===l.id?{...Fe,...h}:Fe):xe=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...i.intervenciones||[]];const ae=xe.sort((Fe,Xe)=>new Date(Xe.fecha).getTime()-new Date(Fe.fecha).getTime());o(Fe=>({...Fe,intervenciones:ae})),m(d),A(null)},O=xe=>{A(xe),m({responsable:xe.responsable,accion:xe.accion,observaciones:xe.observaciones})},F=xe=>{window.confirm("¿Eliminar esta intervención?")&&o(ae=>({...ae,intervenciones:(ae.intervenciones||[]).filter(Fe=>Fe.id!==xe)}))},L=xe=>{const{name:ae,value:Fe}=xe.target;o(Xe=>({...Xe,[ae]:Fe,fechaActualizacionApoyos:new Date().toISOString()}))},Q=()=>{if(!g.meta.trim())return;const xe={...g,id:crypto.randomUUID(),cumplida:!1};o(ae=>({...ae,metasProgreso:[...ae.metasProgreso||[],xe]})),b({trimestre:"T1",meta:""})},q=xe=>{o(ae=>({...ae,metasProgreso:(ae.metasProgreso||[]).map(Fe=>Fe.id===xe?{...Fe,cumplida:!Fe.cumplida}:Fe)}))},ie=xe=>{o(ae=>({...ae,metasProgreso:(ae.metasProgreso||[]).filter(Fe=>Fe.id!==xe)}))},Z=J.useMemo(()=>{const xe=i.metasProgreso||[];if(xe.length===0)return{percent:0,color:"bg-slate-300"};const ae=xe.filter(De=>De.cumplida).length,Fe=Math.round(ae/xe.length*100),Xe=Fe<40?"bg-red-500":Fe<75?"bg-yellow-500":"bg-green-500";return{percent:Fe,color:Xe}},[i.metasProgreso]),ee=J.useMemo(()=>{if(!i.fechaActualizacionApoyos)return!0;const xe=new Date(i.fechaActualizacionApoyos),ae=new Date;return ae.setMonth(ae.getMonth()-3),xe<ae},[i.fechaActualizacionApoyos]),ne=()=>{if(!w.titulo.trim()||!w.fecha)return;const xe={...w,id:crypto.randomUUID(),resuelta:!1};o(ae=>({...ae,alertas:[...ae.alertas||[],xe].sort((Fe,Xe)=>new Date(Fe.fecha).getTime()-new Date(Xe.fecha).getTime())})),_({titulo:"",fecha:new Date().toISOString().split("T")[0]})},z=xe=>{o(ae=>({...ae,alertas:(ae.alertas||[]).map(Fe=>Fe.id===xe?{...Fe,resuelta:!Fe.resuelta}:Fe)}))},W=xe=>{o(ae=>({...ae,alertas:(ae.alertas||[]).filter(Fe=>Fe.id!==xe)}))},ce=xe=>{xe.target.files&&xe.target.files[0]&&k(xe.target.files[0])},j=()=>{if(!N)return;P(!0);const xe=new FileReader;xe.readAsDataURL(N),xe.onloadend=()=>{const ae={id:crypto.randomUUID(),nombre:N.name,url:xe.result,fechaSubida:new Date().toISOString()};o(Fe=>({...Fe,archivos:[ae,...Fe.archivos||[]]})),k(null),P(!1)},xe.onerror=()=>{alert("Error al leer el archivo."),P(!1)}},K=xe=>{window.confirm("¿Eliminar este archivo?")&&o(ae=>({...ae,archivos:(ae.archivos||[]).filter(Fe=>Fe.id!==xe)}))},X=()=>{if(!D.motivo.trim()||!D.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const xe={...D,id:crypto.randomUUID(),fecha:new Date().toISOString()};o(ae=>({...ae,reuniones:[xe,...ae.reuniones||[]].sort((Fe,Xe)=>new Date(Xe.fecha).getTime()-new Date(Fe.fecha).getTime())})),C(M)},te=xe=>{window.confirm("¿Eliminar este registro de reunión?")&&o(ae=>({...ae,reuniones:(ae.reuniones||[]).filter(Fe=>Fe.id!==xe)}))},le=()=>{var it,dt,Ct;const xe=new sr("p","mm","a4"),ae=20,Fe=xe.internal.pageSize.getWidth(),Xe=xe.internal.pageSize.getHeight();let De=ae;const Ce=ut=>{ut.setFontSize(10),ut.setTextColor(100),ut.text("Ficha de Seguimiento - Módulo Inclusión",ae,15)};Ce(xe),xe.setFontSize(18),xe.setFont("helvetica","bold"),xe.setTextColor(40),xe.text(i.nombre,ae,De+10),De+=15,xe.setFontSize(11),xe.setFont("helvetica","normal"),xe.setTextColor(80),xe.text(`Curso: ${i.curso}`,ae,De),xe.text(`Dificultad: ${i.dificultad}`,ae,De+6),De+=15;const ze=ut=>{De+ut>Xe-ae&&(xe.addPage(),Ce(xe),De=ae)},tt=ut=>{ze(15),xe.setFontSize(14),xe.setFont("helvetica","bold"),xe.text(ut,ae,De),De+=10};if((it=i.intervenciones)!=null&&it.length&&(tt("Historial de Intervenciones"),tl(xe,{startY:De,head:[["Fecha","Responsable","Acción","Observaciones"]],body:i.intervenciones.map(ut=>[new Date(ut.fecha).toLocaleDateString("es-CL"),ut.responsable,ut.accion,ut.observaciones||""]),theme:"grid",didDrawPage:ut=>Ce(xe)}),De=xe.lastAutoTable.finalY+10),i.adaptacionesCurriculares||i.apoyosRecibidos){ze(30),tt("Seguimiento y Apoyos"),xe.setFontSize(11),xe.setFont("helvetica","normal");const ut=`Adaptaciones: ${i.adaptacionesCurriculares||"No registradas."}
Apoyos: ${i.apoyosRecibidos||"No registrados."}`,Nt=xe.splitTextToSize(ut,Fe-ae*2);xe.text(Nt,ae,De),De+=Nt.length*5+10}(dt=i.metasProgreso)!=null&&dt.length&&(ze(30),tt("Metas de Progreso"),tl(xe,{startY:De,head:[["Trimestre","Meta","Estado"]],body:i.metasProgreso.map(ut=>[ut.trimestre,ut.meta,ut.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:ut=>Ce(xe)}),De=xe.lastAutoTable.finalY+10),(Ct=i.reuniones)!=null&&Ct.length&&(tt("Reuniones con Apoderados"),tl(xe,{startY:De,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:i.reuniones.map(ut=>[new Date(ut.fecha).toLocaleDateString("es-CL"),ut.motivo,ut.acuerdos,ut.asistentes]),theme:"grid",didDrawPage:ut=>Ce(xe)})),xe.save(`Ficha_Inclusion_${i.nombre.replace(/\s/g,"_")}.pdf`)},de=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:l?"Editando Intervención":"Registrar Nueva Intervención"}),c.jsxs("select",{value:h.responsable,onChange:xe=>m(ae=>({...ae,responsable:xe.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(xe=>c.jsx("option",{value:xe,children:xe},xe))]}),c.jsx("textarea",{value:h.accion,onChange:xe=>m(ae=>({...ae,accion:xe.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:h.observaciones,onChange:xe=>m(ae=>({...ae,observaciones:xe.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"flex justify-end gap-2",children:[l&&c.jsx("button",{onClick:()=>{A(null),m(d)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md",children:"Cancelar Edición"}),c.jsx("button",{onClick:T,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:l?"Actualizar":"Guardar"})]})]}),c.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(i.intervenciones||[]).map(xe=>c.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:xe.accion}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:xe.observaciones}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(xe.fecha).toLocaleString("es-CL")," - ",xe.responsable]})]}),c.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[c.jsx("button",{onClick:()=>O(xe),className:"text-blue-500",children:"✏️"}),c.jsx("button",{onClick:()=>F(xe.id),className:"text-red-500",children:"🗑️"})]})]})},xe.id))})]}),me=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),ee&&c.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl",children:"⚠️"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),c.jsx("textarea",{name:"adaptacionesCurriculares",value:i.adaptacionesCurriculares||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),c.jsx("textarea",{name:"apoyosRecibidos",value:i.apoyosRecibidos||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",Z.percent,"%"]}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:c.jsx("div",{className:`${Z.color} h-4 rounded-full transition-all duration-500`,style:{width:`${Z.percent}%`}})})]}),c.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[c.jsxs("select",{value:g.trimestre,onChange:xe=>b(ae=>({...ae,trimestre:xe.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"T1",children:"T1"}),c.jsx("option",{value:"T2",children:"T2"}),c.jsx("option",{value:"T3",children:"T3"})]}),c.jsx("input",{value:g.meta,onChange:xe=>b(ae=>({...ae,meta:xe.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:Q,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm",children:"Agregar"})]}),c.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(i.metasProgreso||[]).map(xe=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[c.jsx("input",{type:"checkbox",checked:xe.cumplida,onChange:()=>q(xe.id),className:"h-5 w-5 rounded text-amber-500"}),c.jsxs("span",{className:`flex-grow text-sm ${xe.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[c.jsxs("strong",{children:[xe.trimestre,":"]})," ",xe.meta]}),c.jsx("button",{onClick:()=>ie(xe.id),className:"text-red-500 text-sm",children:"🗑️"})]},xe.id))})]})]}),ge=()=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),c.jsx("input",{type:"text",value:w.titulo,onChange:xe=>_(ae=>({...ae,titulo:xe.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),c.jsx("input",{type:"date",value:w.fecha,onChange:xe=>_(ae=>({...ae,fecha:xe.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),c.jsx("button",{onClick:ne,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md",children:"Agendar"})]}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.alertas||[]).map(xe=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[c.jsx("input",{type:"checkbox",checked:xe.resuelta,onChange:()=>z(xe.id),className:"h-5 w-5 rounded text-amber-500"}),c.jsxs("span",{className:`flex-grow text-sm ${xe.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[xe.titulo," (",new Date(xe.fecha+"T12:00:00").toLocaleDateString(),")"]}),c.jsx("button",{onClick:()=>W(xe.id),className:"text-red-500 text-sm",children:"🗑️"})]},xe.id))})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),c.jsx("input",{type:"file",onChange:ce,className:"w-full text-sm"}),c.jsx("button",{onClick:j,disabled:!N||I,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400",children:I?"Subiendo...":"Subir"})]}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.archivos||[]).map(xe=>c.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[c.jsx("a",{href:xe.url,download:xe.nombre,className:"text-sm text-blue-600 hover:underline truncate",children:xe.nombre}),c.jsx("button",{onClick:()=>K(xe.id),className:"text-red-500 text-sm ml-2",children:"🗑️"})]},xe.id))})]})]}),Se=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),c.jsx("input",{value:D.motivo,onChange:xe=>C(ae=>({...ae,motivo:xe.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:D.acuerdos,onChange:xe=>C(ae=>({...ae,acuerdos:xe.target.value})),placeholder:"Acuerdos...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{value:D.asistentes,onChange:xe=>C(ae=>({...ae,asistentes:xe.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("div",{className:"text-right",children:c.jsx("button",{onClick:X,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:"Guardar Reunión"})})]}),c.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(i.reuniones||[]).map(xe=>c.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:xe.motivo}),c.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:[c.jsx("strong",{children:"Acuerdos:"})," ",xe.acuerdos]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(xe.fecha).toLocaleString("es-CL")," - Asistentes: ",xe.asistentes]})]}),c.jsx("button",{onClick:()=>te(xe.id),className:"text-red-500 flex-shrink-0 ml-4",children:"🗑️"})]})},xe.id))})]});return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:xe=>xe.stopPropagation(),children:[c.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",t.nombre]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.curso," - ",t.dificultad]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:le,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200",children:"Exportar PDF"}),c.jsx("button",{onClick:e,className:"text-2xl text-slate-500 hover:text-slate-800",children:"×"})]})]}),c.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:c.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(xe=>c.jsx("button",{onClick:()=>s(xe),className:`${a===xe?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize`,children:xe==="alertas"?"Alertas y Archivos":xe==="seguimiento"?"Seguimiento y Metas":xe},xe))})}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[a==="intervenciones"&&de(),a==="seguimiento"&&me(),a==="reuniones"&&Se(),a==="alertas"&&ge()]}),c.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[c.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cerrar"}),c.jsx("button",{onClick:B,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios y Cerrar"})]})]})})},b1e=({student:t,onClose:e,onConfirm:r})=>{const[n,a]=J.useState(J2[0]),s=()=>{r(t,n)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",t.nombreCompleto," al PIE"]}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),c.jsx("select",{id:"dificultad",value:n,onChange:i=>a(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:J2.map(i=>c.jsx("option",{value:i,children:i},i))})]}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Confirmar e Ingresar"})]})]})})},M6=({currentUser:t})=>{const[e,r]=J.useState([]),[n,a]=J.useState([]),[s,i]=J.useState(!0),[o,l]=J.useState(null),[A,d]=J.useState(null),[h,m]=J.useState(""),[g,b]=J.useState(""),[w,_]=J.useState("");J.useEffect(()=>{i(!0);const B=p1e(O=>{r(O),i(!1)}),T=g1e(O=>{a(O)});return()=>{B(),T()}},[]);const N=async(B,T)=>{if(e.some(F=>F.nombre===B.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const O={nombre:B.nombreCompleto,curso:B.curso||"",dificultad:T,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await x1e(O)}catch(F){console.error("Error al agregar estudiante:",F),alert("Hubo un error al agregar al estudiante al programa.")}},k=async B=>{try{await v1e(B.id,B)}catch(T){console.error("Error al actualizar la ficha:",T),alert("Hubo un error al guardar los cambios en la ficha.")}},I=async B=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await y1e(B),(o==null?void 0:o.id)===B&&l(null)}catch(T){console.error("Error al eliminar estudiante:",T),alert("Hubo un error al eliminar al estudiante.")}},P=B=>{if(D.length===0){alert("No hay datos para exportar.");return}const T=D.map(O=>{var F;return{Nombre:O.nombre,Curso:O.curso,Dificultad:O.dificultad,"N° Intervenciones":((F=O.intervenciones)==null?void 0:F.length)||0,"Alertas Pendientes":(O.alertas||[]).filter(L=>!L.resuelta).length}});if(B==="xlsx"){const O=Ml.json_to_sheet(T),F=Ml.book_new();Ml.book_append_sheet(F,O,"Estudiantes_Inclusion"),K4(F,"Estudiantes_Inclusion.xlsx")}else{const O=new sr;O.text("Listado de Estudiantes - Programa de Inclusión",14,15),tl(O,{startY:20,head:[Object.keys(T[0])],body:T.map(Object.values)}),O.save("Estudiantes_Inclusion.pdf")}},M=J.useMemo(()=>n.filter(B=>{var T;return B.profile===er.ESTUDIANTE&&(((T=t.cursos)==null?void 0:T.includes(B.curso||""))||t.profile===er.SUBDIRECCION)}).filter(B=>!e.some(T=>T.nombre===B.nombreCompleto)),[n,e,t]),D=J.useMemo(()=>e.filter(B=>B.nombre.toLowerCase().includes(h.toLowerCase())&&(g===""||B.curso===g)&&(w===""||B.dificultad===w)).sort((B,T)=>B.nombre.localeCompare(T.nombre)),[e,h,g,w]),C=J.useMemo(()=>n.filter(B=>B.profile===er.PROFESORADO).map(B=>B.nombreCompleto).sort(),[n]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),s?c.jsx("div",{className:"text-center py-10",children:"Cargando datos del programa..."}):c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",D.length,")"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>P("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),c.jsx("button",{onClick:()=>P("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por nombre...",value:h,onChange:B=>m(B.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("select",{value:g,onChange:B=>b(B.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),ss.map(B=>c.jsx("option",{children:B},B))]}),c.jsxs("select",{value:w,onChange:B=>_(B.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todas las Dificultades"}),J2.map(B=>c.jsx("option",{children:B},B))]})]}),c.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:D.map(B=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:B.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[B.curso," - ",B.dificultad]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>l(B),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Ficha"}),c.jsx("button",{onClick:()=>I(B.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full text-lg",children:"🗑️"})]})]},B.id))})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante desde Nómina"}),c.jsx("ul",{className:"space-y-2 max-h-[60vh] overflow-y-auto",children:M.map(B=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-sm text-slate-800 dark:text-slate-200",children:B.nombreCompleto}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:B.curso})]}),c.jsx("button",{onClick:()=>d(B),className:"text-2xl text-green-500 hover:text-green-700",children:"+"})]},B.id))})]})]}),A&&c.jsx(b1e,{student:A,onClose:()=>d(null),onConfirm:(B,T)=>{N(B,T),d(null)}}),o&&c.jsx(w1e,{student:o,onClose:()=>l(null),onSave:k,profesores:C})]})},P6="asistenciaDualRecords",C1e=({currentUser:t})=>{const[e,r]=J.useState(t.curso||""),[n,a]=J.useState([]),[s,i]=J.useState(!1),[o,l]=J.useState(null),A=`asistenciaPersonalDual-${t.id}`;J.useEffect(()=>{try{const m=localStorage.getItem(A);m&&a(JSON.parse(m))}catch(m){console.error("Error al cargar historial de asistencia",m),l({text:"No se pudo cargar el historial local.",type:"error"})}},[A]);const d=m=>{const g=[m,...n];a(g),localStorage.setItem(A,JSON.stringify(g));try{const b=localStorage.getItem(P6),w=b?JSON.parse(b):[],_=[m,...w];localStorage.setItem(P6,JSON.stringify(_))}catch(b){console.error("Error al guardar en el historial compartido",b),l({text:"Se registró su asistencia, pero hubo un problema al notificar a coordinación.",type:"error"})}},h=m=>{if(!e){l({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),l(null),navigator.geolocation.getCurrentPosition(g=>{const b={id:crypto.randomUUID(),nombreEstudiante:t.nombreCompleto,emailEstudiante:t.email,curso:e,tipo:m,fechaHora:new Date().toISOString(),ubicacion:{latitud:g.coords.latitude,longitud:g.coords.longitude}};d(b),i(!1),l({text:`¡Marca de ${m} registrada con éxito!`,type:"success"})},g=>{console.error("Geolocation error:",g);let b="No se pudo obtener la ubicación.";switch(g.code){case g.PERMISSION_DENIED:b="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case g.POSITION_UNAVAILABLE:b="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case g.TIMEOUT:b="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:b=`Ocurrió un error desconocido al obtener la ubicación (código: ${g.code}).`;break}l({text:b,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Asistencia a Empresa"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),c.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 mb-1",children:"Seleccione su curso"}),c.jsxs("select",{id:"curso",value:e,onChange:m=>r(m.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2",children:[c.jsx("option",{value:"",children:"-- Mi curso --"}),dh.map(m=>c.jsx("option",{value:m,children:m},m))]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[c.jsx("button",{onClick:()=>h("Entrada"),disabled:s||!e,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),c.jsx("button",{onClick:()=>h("Salida"),disabled:s||!e,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&c.jsxs("div",{className:"text-center text-slate-600 pt-4 flex items-center justify-center gap-2",children:[c.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c.jsx("span",{children:"Obteniendo ubicación..."})]}),o&&c.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${o.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o.text})]})]}),c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mi Historial de Asistencia"}),c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[c.jsx("thead",{className:"bg-slate-50 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Fecha y Hora"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Tipo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Curso"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:n.length>0?n.map(m=>c.jsxs("tr",{className:"hover:bg-slate-50",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:new Date(m.fechaHora).toLocaleString("es-CL")}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${m.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.tipo})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:m.curso})]},m.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},E1e="asistenciaDual",_1e=async(t,e)=>{try{const r=new Date(t,e,1),n=new Date(t,e+1,0,23,59,59,999),a=an(Ar(wn,E1e),Ai("fechaHora",">=",r.toISOString()),Ai("fechaHora","<=",n.toISOString()),ya("fechaHora","asc"));return(await So(a)).docs.map(i=>({id:i.id,...i.data()}))}catch(r){throw console.error("Error al obtener registros por mes:",r),new Error("No se pudieron cargar los registros del mes")}},Sv=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},S1e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),T1e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd",transform:"rotate(180 10 10)"})}),B1e=()=>{const[t,e]=J.useState([]),[r,n]=J.useState([]),[a,s]=J.useState(!1),[i,o]=J.useState(null),[l,A]=J.useState(new Date),[d,h]=J.useState("todos"),[m,g]=J.useState(""),b=J.useCallback(async()=>{s(!0);try{const D=l.getFullYear(),C=l.getMonth(),B=await _1e(D,C);e(B);const T=await X4();n(T),o(null)}catch(D){console.error("Error al cargar datos desde Firestore",D),o("No se pudieron cargar los datos de asistencia desde la nube.")}finally{s(!1)}},[l]);J.useEffect(()=>{b()},[b]);const{monthDays:w,monthName:_,year:N}=J.useMemo(()=>{const D=l.getFullYear(),C=l.getMonth();return{monthDays:new Date(D,C+1,0).getDate(),monthName:l.toLocaleString("es-CL",{month:"long"}),year:D}},[l]),k=J.useMemo(()=>{let D=r.filter(C=>C.profile===er.ESTUDIANTE&&C.curso&&dh.includes(Sv(C.curso)));return d!=="todos"&&(D=D.filter(C=>Sv(C.curso||"")===d)),m&&(D=D.filter(C=>C.nombreCompleto.toLowerCase().includes(m.toLowerCase()))),D.sort((C,B)=>C.nombreCompleto.localeCompare(B.nombreCompleto))},[r,d,m]),I=J.useMemo(()=>{const D=new Map,C=l.getMonth(),B=l.getFullYear();return t.filter(O=>{const F=new Date(O.fechaHora);return F.getMonth()!==C||F.getFullYear()!==B?!1:d==="todos"?dh.includes(Sv(O.curso||"")):Sv(O.curso||"")===d}).forEach(O=>{const F=new Date(O.fechaHora).getDate();D.has(O.nombreEstudiante)||D.set(O.nombreEstudiante,new Map);const L=D.get(O.nombreEstudiante);L.has(F)||L.set(F,{});const Q=L.get(F);O.tipo==="Entrada"?(!Q.entrada||new Date(O.fechaHora)<new Date(Q.entrada.fechaHora))&&(Q.entrada=O):O.tipo==="Salida"&&(!Q.salida||new Date(O.fechaHora)>new Date(Q.salida.fechaHora))&&(Q.salida=O)}),D},[t,l,d]),P=D=>{A(C=>{const B=new Date(C);return B.setMonth(B.getMonth()+D),B})},M=["D","L","M","M","J","V","S"];return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),a&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando datos de asistencia desde la nube..."}),i&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:i}),!a&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay registros de asistencia para este mes en la nube."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[c.jsx("button",{onClick:()=>P(-1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"<"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${_} ${N}`}),c.jsx("button",{onClick:()=>P(1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed",children:">"})]}),c.jsxs("select",{value:d,onChange:D=>h(D.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50",children:[c.jsx("option",{value:"todos",children:"Todos los Cursos"}),dh.map(D=>c.jsx("option",{value:D,children:D},D))]}),c.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:m,onChange:D=>g(D.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50"})]}),!a&&c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:w},(D,C)=>{const T=new Date(N,l.getMonth(),C+1).getDay(),O=T===0||T===6;return c.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${O?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[c.jsx("div",{className:"font-semibold",children:M[T]}),c.jsx("div",{children:C+1})]},C)})]})}),c.jsx("tbody",{children:k.length>0?k.map(D=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[c.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:D.nombreCompleto}),Array.from({length:w},(C,B)=>{var Q;const T=B+1,O=(Q=I.get(D.nombreCompleto))==null?void 0:Q.get(T),F=new Date(N,l.getMonth(),B+1),L=F.getDay()===0||F.getDay()===6;return c.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${L?"bg-slate-100 dark:bg-slate-700/50":""}`,children:c.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(O==null?void 0:O.entrada)&&c.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var q,ie;return window.open(`https://www.google.com/maps?q=${(q=O.entrada)==null?void 0:q.ubicacion.latitud},${(ie=O.entrada)==null?void 0:ie.ubicacion.longitud}`,"_blank")},children:[c.jsx(S1e,{}),c.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(O.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(O==null?void 0:O.salida)&&c.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var q,ie;return window.open(`https://www.google.com/maps?q=${(q=O.salida)==null?void 0:q.ubicacion.latitud},${(ie=O.salida)==null?void 0:ie.ubicacion.longitud}`,"_blank")},children:[c.jsx(T1e,{}),c.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(O.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},T)})]},D.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:w+1,className:"text-center p-8 text-slate-500",children:a?"Cargando...":"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},j6="evaluacionesFormativas",O6="calificacionesFormativas",Q6="trabajosGrupalesFormativos",N1e="usuariosLiceo",e7=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},vy={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},t7=t=>t.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:t.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:t.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:t.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},k1e=({cursos:t,onSelect:e})=>c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),t.length>0?c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:t.map(r=>{const n=t7(r);return c.jsxs("div",{className:"space-y-2 text-center",children:[c.jsxs("button",{onClick:()=>e(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[c.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),c.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[c.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),c.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):c.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),c.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),I1e=({curso:t,asignaturas:e,onSelect:r,onBack:n})=>{const a=t7(t);return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),c.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",t]})]}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),e.length>0?c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:e.map(s=>c.jsxs("button",{onClick:()=>r(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[c.jsx("span",{className:"text-2xl",children:vy[s]||vy.Default}),c.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):c.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),c.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},F1e=({curso:t,asignatura:e,allUsers:r,onBack:n})=>{const[a,s]=J.useState([]),[i,o]=J.useState({}),[l,A]=J.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,h]=J.useState(null),[m,g]=J.useState(null);J.useEffect(()=>{try{const T=localStorage.getItem(j6);T&&s(JSON.parse(T));const O=localStorage.getItem(O6);O&&o(JSON.parse(O))}catch(T){console.error("Error al cargar datos",T)}},[]);const b=T=>{s(T),localStorage.setItem(j6,JSON.stringify(T))},w=T=>{o(T),localStorage.setItem(O6,JSON.stringify(T))},_=J.useMemo(()=>r.filter(T=>T.profile===er.ESTUDIANTE&&e7(T.curso||"")===t).map(T=>T.nombreCompleto).sort((T,O)=>T.localeCompare(O)),[r,t]),N=J.useMemo(()=>a.filter(T=>T.curso===t&&T.asignatura===e).sort((T,O)=>new Date(T.fecha).getTime()-new Date(O.fecha).getTime()),[a,t,e]),k=T=>{const{name:O,value:F}=T.target;d?h(L=>L?{...L,[O]:F}:null):A(L=>({...L,[O]:F}))},I=T=>{if(T.preventDefault(),!l.nombreActividad.trim()){g("El nombre de la actividad es obligatorio.");return}const O={id:crypto.randomUUID(),asignatura:e,curso:t,...l};b([...a,O]);const F=_.reduce((L,Q)=>(L[Q]="trabajado",L),{});w({...i,[O.id]:F}),A({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),g(null)},P=(T,O)=>{var Q;const L=(((Q=i[T])==null?void 0:Q[O])||"trabajado")==="trabajado"?"no trabajado":"trabajado";w({...i,[T]:{...i[T]||{},[O]:L}})},M=T=>h(T),D=()=>{d&&(b(a.map(T=>T.id===d.id?d:T)),h(null))},C=T=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?")){b(a.filter(F=>F.id!==T));const O={...i};delete O[T],w(O)}},B=J.useCallback(T=>{if(N.length===0)return"-";let O=0,F=0;return N.forEach(L=>{var q;const Q=(q=i[L.id])==null?void 0:q[T];Q==="trabajado"?(O+=7,F++):Q==="no trabajado"&&(O+=2,F++)}),F===0?"-":(O/F).toFixed(1)},[i,N]);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),c.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),c.jsxs("form",{onSubmit:I,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),c.jsxs("div",{className:"w-full",children:[c.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),c.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:l.nombreActividad,onChange:k,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"w-full",children:[c.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),c.jsx("input",{id:"fecha",type:"date",name:"fecha",value:l.fecha,onChange:k,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"w-full",children:c.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),m&&c.jsx("p",{className:"text-red-500 text-sm col-span-full",children:m})]}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),N.map(T=>c.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===T.id?c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:k,className:"text-xs p-1 w-full dark:bg-slate-600"}),c.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:k,className:"text-xs p-1 w-full dark:bg-slate-600"}),c.jsx("button",{onClick:D,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"font-semibold",children:T.nombreActividad}),c.jsx("span",{className:"font-normal text-slate-500",children:T.fecha}),c.jsxs("div",{className:"flex gap-2 mt-1",children:[c.jsx("button",{onClick:()=>M(T),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),c.jsx("button",{onClick:()=>C(T.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},T.id)),c.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:_.map(T=>c.jsxs("tr",{children:[c.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:T}),N.map(O=>{var Q;const L=((Q=i[O.id])==null?void 0:Q[T])==="trabajado";return c.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:c.jsx("button",{onClick:()=>P(O.id,T),className:`text-3xl transition-opacity duration-200 ${L?"opacity-100":"opacity-20"}`,children:vy[e]||vy.Default})},O.id)}),c.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:B(T)})]},T))})]})})]})},R1e=({curso:t,asignatura:e,allUsers:r,onBack:n})=>{const[a,s]=J.useState([]),[i,o]=J.useState(null),[l,A]=J.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,h]=J.useState({}),[m,g]=J.useState(2);J.useEffect(()=>{try{const M=localStorage.getItem(Q6);M&&s(JSON.parse(M))}catch(M){console.error("Error al cargar trabajos grupales",M)}},[]);const b=M=>{s(M),localStorage.setItem(Q6,JSON.stringify(M))},w=J.useMemo(()=>r.filter(M=>M.profile===er.ESTUDIANTE&&e7(M.curso||"")===t).sort((M,D)=>M.nombreCompleto.localeCompare(D.nombreCompleto)),[r,t]);J.useEffect(()=>{if(i){const M={};i.grupos.forEach(D=>{D.integrantes.forEach(C=>{M[C.nombre]={groupNumber:String(D.numero),role:C.rol||""}})}),h(M)}else h({})},[i]);const _=M=>{if(M.preventDefault(),!l.nombre.trim())return;const D={id:crypto.randomUUID(),curso:t,asignatura:e,nombreActividad:l.nombre,fechaPresentacion:l.fecha,grupos:[]};b([D,...a]),A({nombre:"",fecha:new Date().toISOString().split("T")[0]})},N=()=>{if(!i)return;const M=new Map;for(const B of w){const T=d[B.nombreCompleto];if(T&&T.groupNumber){const O=parseInt(T.groupNumber,10);isNaN(O)||(M.has(O)||M.set(O,[]),M.get(O).push({nombre:B.nombreCompleto,rol:T.role||void 0}))}}const D=Array.from(M.entries()).map(([B,T])=>({numero:B,integrantes:T})).sort((B,T)=>B.numero-T.numero),C={...i,grupos:D};b(a.map(B=>B.id===C.id?C:B)),o(C),alert("Grupos guardados con éxito.")},k=()=>{if(m<2){alert("Debe haber al menos 2 grupos.");return}const M=[...w].sort(()=>Math.random()-.5),D={};M.forEach((C,B)=>{var T;D[C.nombreCompleto]={groupNumber:String(B%m+1),role:((T=d[C.nombreCompleto])==null?void 0:T.role)||""}}),h(D)},I=(M,D,C)=>{h(B=>({...B,[M]:{...B[M],[D]:C}}))},P=J.useMemo(()=>{const M=new Map;return Object.entries(d).forEach(([D,C])=>{C.groupNumber&&(M.has(C.groupNumber)||M.set(C.groupNumber,[]),M.get(C.groupNumber).push({nombre:D,rol:C.role}))}),Array.from(M.entries()).sort((D,C)=>parseInt(D[0])-parseInt(C[0]))},[d]);return i?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),c.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),c.jsx("button",{onClick:N,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-1 space-y-4",children:[c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",value:m,onChange:M=>g(parseInt(M.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),c.jsx("button",{onClick:k,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),c.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),c.jsx("table",{className:"w-full text-sm",children:c.jsx("tbody",{children:w.map(M=>{var D;return c.jsxs("tr",{children:[c.jsx("td",{className:"py-1 pr-2",children:M.nombreCompleto}),c.jsx("td",{className:"py-1",children:c.jsx("input",{type:"number",value:((D=d[M.nombreCompleto])==null?void 0:D.groupNumber)||"",onChange:C=>I(M.nombreCompleto,"groupNumber",C.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},M.id)})})})]})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:P.map(([M,D])=>c.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[c.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",M]}),c.jsx("ul",{className:"space-y-2",children:D.map(C=>c.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"flex-1 truncate",children:C.nombre}),c.jsxs("select",{value:C.rol||"",onChange:B=>I(C.nombre,"role",B.target.value),className:"p-1 border rounded text-xs w-32",children:[c.jsx("option",{value:"",children:"-- Asignar Rol --"}),C8.map(B=>c.jsx("option",{value:B,children:B},B))]})]},C.nombre))})]},M))})]})]})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),c.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),c.jsxs("form",{onSubmit:_,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[c.jsx("input",{value:l.nombre,onChange:M=>A({...l,nombre:M.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),c.jsx("input",{type:"date",value:l.fecha,onChange:M=>A({...l,fecha:M.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.filter(M=>M.curso===t&&M.asignatura===e).map(M=>c.jsxs("button",{onClick:()=>o(M),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[c.jsx("p",{className:"font-bold",children:M.nombreActividad}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",M.fechaPresentacion]})]},M.id))]})]})},D1e=({currentUser:t})=>{const[e,r]=J.useState("calificaciones"),[n,a]=J.useState(null),[s,i]=J.useState(null),[o,l]=J.useState([]);J.useEffect(()=>{try{const g=localStorage.getItem(N1e);g&&l(JSON.parse(g))}catch(g){console.error("Error al cargar usuarios",g)}},[]);const A=J.useMemo(()=>t.cursos||[],[t.cursos]),d=J.useMemo(()=>t.asignaturas||[],[t.asignaturas]),h=({tab:g,label:b})=>c.jsx("button",{onClick:()=>r(g),className:`${e===g?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:b}),m=()=>{if(!n)return c.jsx(k1e,{cursos:A,onSelect:a});if(!s)return c.jsx(I1e,{curso:n,asignaturas:d,onSelect:i,onBack:()=>a(null)});if(e==="calificaciones")return c.jsx(F1e,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)});if(e==="grupos")return c.jsx(R1e,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx(h,{tab:"calificaciones",label:"Calificaciones"}),c.jsx(h,{tab:"grupos",label:"Trabajos Grupales"})]})}),c.jsx("div",{className:"mt-6",children:m()})]})},Xx="acompanamientos",L1e=async()=>{try{const t=an(Ar(wn,Xx),ya("fecha","desc"));return(await So(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener acompañamientos:",t),new Error("No se pudieron cargar los registros de acompañamiento")}},U1e=async t=>{try{return{id:(await eo(Ar(wn,Xx),{...t,fecha:t.fecha||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear acompañamiento:",e),new Error("No se pudo crear el registro de acompañamiento")}},M1e=async(t,e)=>{try{const r=hn(wn,Xx,t);await Km(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acompañamiento:",r,"ID:",t),new Error("No se pudo actualizar el registro de acompañamiento")}},P1e=async t=>{try{const e=hn(wn,Xx,t);await Bo(e)}catch(e){throw console.error("Error al eliminar acompañamiento:",e,"ID:",t),new Error("No se pudo eliminar el registro de acompañamiento")}},j1e=async t=>{try{const e=an(Ar(wn,Xx),Ai("docente","==",t),ya("fecha","desc"));return(await So(e)).docs.map(n=>({id:n.id,...n.data()}))}catch(e){throw console.error("Error al obtener acompañamientos por docente:",e),new Error("No se pudieron cargar los acompañamientos del docente")}},O1e=async()=>{try{const t=hn(wn,"configuracion","rubricaAcompanamiento"),e=await km(t);return e.exists()?e.data().rubrica:null}catch(t){return console.error("Error al obtener rúbrica personalizada:",t),null}},Q1e=()=>{const[t,e]=J.useState([]),[r,n]=J.useState([]),[a,s]=J.useState(!1),[i,o]=J.useState(!1),[l,A]=J.useState(null),[d,h]=J.useState("list"),[m,g]=J.useState(null),[b,w]=J.useState(!1),[_,N]=J.useState(!1),k=Ig,I=J.useMemo(()=>({fecha:new Date().toISOString(),docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[P,M]=J.useState(I),D=J.useCallback(async()=>{s(!0);try{const ne=await L1e();e(ne),A(null)}catch(ne){console.error("Error al cargar acompañamientos desde Firestore",ne),A("No se pudieron cargar los registros de acompañamiento desde la nube.")}finally{s(!1)}},[]),C=J.useCallback(async()=>{o(!0);try{const z=(await X4()).filter(W=>W.profile===er.PROFESORADO).map(W=>W.nombreCompleto).sort();n(z)}catch(ne){console.error("Error al cargar profesores desde Firestore",ne),A("No se pudieron cargar la lista de profesores desde la nube.")}finally{o(!1)}},[]);J.useEffect(()=>{D(),C()},[D,C]);const B=ne=>{M(z=>({...z,[ne.target.name]:ne.target.value}))},T=(ne,z)=>{M(W=>({...W,rubricaResultados:{...W.rubricaResultados,[ne]:z}}))},O=async()=>{w(!0);const{rubricaResultados:ne,observacionesGenerales:z}=P;let W=`Resultados de la Rúbrica:
`;k.forEach(j=>{j.criteria.forEach(K=>{const X=ne[K.name];if(X&&K.levels[X-1]){const te=K.levels[X-1];W+=`- Criterio: "${K.name}" | Nivel: ${X} (${te})
`}})}),W+=`
Observaciones Generales del Evaluador:
${z||"No se proveyeron observaciones adicionales."}`;const ce=`
            Eres un asesor pedagógico experto. Tu tarea es generar una retroalimentación formal, técnica y constructiva para un docente, basada en una observación de clase.
            La retroalimentación debe ser estructurada y usar un lenguaje pedagógico preciso.

            A continuación, los datos de la observación:
            ${W}

            Genera una retroalimentación que incluya obligatoriamente los siguientes puntos en formato Markdown:
            - ## Fortalezas Observadas: Destaca 2 o 3 puntos positivos clave, conectándolos con los criterios de la rúbrica.
            - ## Áreas de Mejora: Identifica 2 o 3 aspectos donde el docente puede mejorar, explicando el porqué con base en la evidencia.
            - ## Sugerencias y Pasos a Seguir: Ofrece recomendaciones concretas, prácticas y accionables que el docente pueda implementar.
        `;try{Gl("Acompañamiento - Consolidar Feedback");const X=(await new zl({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:ce})).text.replace(/(\*\*|\*)/g,"");M(te=>({...te,retroalimentacionConsolidada:X}))}catch(j){console.error("Error al generar retroalimentación con IA",j),alert("No se pudo generar la retroalimentación. Inténtelo de nuevo.")}finally{w(!1)}},F=async()=>{const ne=m;if(!ne)return;N(!0);const z=t.find(Se=>Se.id===ne);if(!z){N(!1);return}const W=new sr({orientation:"p",unit:"mm",format:"a4"}),ce=20,j=W.internal.pageSize.getWidth(),K=W.internal.pageSize.getHeight(),X=j-ce*2;let te=ce;const le=Se=>{Se.setFont("helvetica","bold"),Se.setFontSize(10),Se.setTextColor(100),Se.text("LICEO INDUSTRIAL DE RECOLETA",j/2,15,{align:"center"})};le(W),W.setFont("helvetica","bold"),W.setFontSize(18),W.setTextColor(40),W.text("Informe de Acompañamiento Docente",j/2,te+10,{align:"center"}),te+=25,tl(W,{startY:te,body:[[{content:"Docente:",styles:{fontStyle:"bold"}},z.docente],[{content:"Fecha:",styles:{fontStyle:"bold"}},new Date(z.fecha).toLocaleDateString("es-CL")],[{content:"Asignatura:",styles:{fontStyle:"bold"}},z.asignatura],[{content:"Curso:",styles:{fontStyle:"bold"}},z.curso]],theme:"plain",styles:{fontSize:11,cellPadding:2,textColor:[50,50,50]},columnStyles:{0:{cellWidth:35}}}),te=W.lastAutoTable.finalY+10;const de=[],me=["Débil","Incipiente","Satisfactorio","Avanzado"];k.forEach(Se=>{de.push([{content:Se.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40],halign:"left"}}]),Se.criteria.forEach(xe=>{const ae=z.rubricaResultados[xe.name],Fe=ae?me[ae-1]:"No evaluado";de.push([xe.name,Fe])})}),tl(W,{startY:te,head:[["Indicador","Nivel de Logro"]],body:de,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},didDrawPage:Se=>{Se.pageNumber>1&&le(W)}}),te=W.lastAutoTable.finalY+15;const ge=(Se,xe)=>{te>K-ce-10&&(W.addPage(),le(W),te=ce),W.setFont("helvetica",xe.style),W.setFontSize(xe.size);const ae=W.splitTextToSize(Se,X),Fe=ae.length*(xe.size*.352778*1.15);te+Fe>K-ce&&(W.addPage(),le(W),te=ce),W.text(ae,ce,te,{align:"left"}),te+=Fe+(xe.isTitle?5:8)};z.retroalimentacionConsolidada?z.retroalimentacionConsolidada.split(/(?=## )/).forEach(xe=>{if(xe.trim()){const ae=xe.trim().split(`
`),Fe=ae[0].replace("## ",""),Xe=ae.slice(1).join(`
`).trim();ge(Fe,{size:14,style:"bold",isTitle:!0}),ge(Xe,{size:11,style:"normal",isTitle:!1})}}):(ge("Retroalimentación Consolidada",{size:14,style:"bold",isTitle:!0}),ge("No se ha generado retroalimentación.",{size:11,style:"normal",isTitle:!1})),W.save(`Acompanamiento_${z.docente.replace(/\s/g,"_")}_${new Date(z.fecha).toLocaleDateString("es-CL")}.pdf`),N(!1)},L=async ne=>{if(ne.preventDefault(),!P.docente||!P.curso||!P.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}try{let z=m;if(m)await M1e(m,P);else{const W=await U1e(P);g(W.id),M({...P}),z=W.id}await D(),z&&alert("¡Guardado correctamente!")}catch(z){console.error("Error al guardar acompañamiento:",z),A("Error al guardar el registro en la nube.")}},Q=()=>{M(I),g(null),h("form"),A(null)},q=ne=>{M(ne),g(ne.id),h("form"),A(null)},ie=async ne=>{if(window.confirm("¿Está seguro de que desea eliminar este registro de acompañamiento?"))try{await P1e(ne),await D()}catch(z){console.error("Error al eliminar acompañamiento:",z),A("No se pudo eliminar el registro en la nube.")}},Z=()=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Acompañamiento"}),c.jsx("button",{onClick:Q,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),a&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando registros desde la nube..."}),l&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:l}),!a&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay registros de acompañamiento en la nube."}),c.jsx("div",{className:"space-y-4",children:!a&&t.length>0&&t.map(ne=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ne.docente}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[ne.curso," - ",ne.asignatura]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(ne.fecha).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>q(ne),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver y Editar"}),c.jsx("button",{onClick:()=>ie(ne.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},ne.id))})]}),ee=()=>c.jsx("div",{className:"animate-fade-in",children:c.jsxs("form",{onSubmit:L,className:"space-y-8",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:m?"Editando Acompañamiento":"Nuevo Acompañamiento Docente"}),c.jsx("button",{type:"button",onClick:()=>h("list"),className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold",children:"← Volver al listado"})]}),l&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:l}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),c.jsxs("select",{name:"docente",value:P.docente,onChange:B,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[c.jsx("option",{value:"",children:i?"Cargando...":"Seleccione"}),r.map(ne=>c.jsx("option",{value:ne,children:ne},ne))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:P.curso,onChange:B,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),ss.map(ne=>c.jsx("option",{value:ne,children:ne},ne))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignatura",value:P.asignatura,onChange:B,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),rl.map(ne=>c.jsx("option",{value:ne,children:ne},ne))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),c.jsx("input",{type:"text",name:"bloques",value:P.bloques,onChange:B,placeholder:"Ej: 3-4",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:k.map(ne=>c.jsx(At.Fragment,{children:ne.criteria.map((z,W)=>c.jsxs("tr",{children:[W===0&&c.jsx("td",{rowSpan:ne.criteria.length,className:"px-3 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600",children:ne.domain}),c.jsx("td",{className:"px-3 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:z.name}),z.levels.map((ce,j)=>{const K=j+1,X=P.rubricaResultados[z.name]===K;return c.jsx("td",{onClick:()=>T(z.name,K),className:`px-3 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${X?"bg-amber-100 dark:bg-amber-900/30":"hover:bg-amber-50 dark:hover:bg-slate-700"}`,children:ce},K)})]},z.name))},ne.domain))})]})}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones Generales"}),c.jsx("textarea",{name:"observacionesGenerales",value:P.observacionesGenerales,onChange:B,rows:5,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("label",{htmlFor:"retroalimentacionConsolidada",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Retroalimentación Consolidada"}),c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("textarea",{name:"retroalimentacionConsolidada",value:P.retroalimentacionConsolidada,onChange:B,rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Haga clic en 'Consolidar' para generar la retroalimentación aquí..."}),c.jsx("button",{type:"button",onClick:O,disabled:b,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:bg-slate-400",children:b?"...":"Consolidar"})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t dark:border-slate-700",children:[c.jsx("button",{type:"button",onClick:F,disabled:!m||_,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400",children:_?"...":"Exportar PDF"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Acompañamiento"})]})]})});return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Acompañamiento Docente"}),c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:d==="list"?Z():ee()})]})},Z4="mensajes_internos",H1e="usuarios",r7="mensajes_read_status",n7=t=>{var r,n;const e=t.data();return{id:t.id,...e,fecha:((n=(r=e.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fecha}},V1e=(t,e)=>{const r=an(Ar(dr,Z4),Ai("participants","array-contains",t),ya("fecha","desc"));return na(r,a=>{const s=a.docs.map(i=>n7(i));e(s)},a=>{console.error("Error al suscribirse a los mensajes:",a),e([])})},z1e=async t=>{try{const e={...t,participants:[t.de,t.para],fecha:Wr.fromDate(new Date)};await eo(Ar(dr,Z4),e)}catch(e){throw console.error("Error al enviar el mensaje:",e),new Error("No se pudo enviar el mensaje.")}},G1e=async t=>{try{const e=hn(dr,Z4,t);await Bo(e)}catch(e){throw console.error("Error al eliminar el mensaje:",e),new Error("No se pudo eliminar el mensaje.")}},q1e=(t,e)=>{const r=hn(dr,r7,t);return na(r,a=>{a.exists()?e(a.data()):e({announcements:[],messages:[]})},a=>{console.error("Error al suscribirse al estado de lectura:",a),e({announcements:[],messages:[]})})},K1e=async(t,e)=>{try{const r=hn(dr,r7,t);await OA(r,{messages:c$(e)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como leído:",r),new Error("No se pudo actualizar el estado de lectura.")}},W1e=t=>{const e=an(Ar(dr,H1e),ya("nombreCompleto","asc"));return na(e,n=>{const a=n.docs.map(s=>n7(s));t(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},$1e=({currentUser:t,refreshUnreadCount:e})=>{const[r,n]=J.useState("inbox"),[a,s]=J.useState([]),[i,o]=J.useState([]),[l,A]=J.useState(null),[d,h]=J.useState({announcements:[],messages:[]}),[m,g]=J.useState(!0),b={para:"",asunto:"",cuerpo:""},[w,_]=J.useState(b);J.useEffect(()=>{if(!t.id||!t.email){g(!1);return}g(!0);const C=V1e(t.email,O=>{s(O),g(!1)}),B=W1e(o),T=q1e(t.id,O=>{h(O),e()});return()=>{C(),B(),T()}},[t.id,t.email,e]);const N=C=>{A(C),r==="inbox"&&!d.messages.includes(C.id)&&K1e(t.id,C.id).catch(B=>{console.error("Failed to mark message as read:",B)})},k=async C=>{if(C.preventDefault(),!w.para||!w.asunto.trim()||!w.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const B={de:t.email,para:w.para,asunto:w.asunto,cuerpo:w.cuerpo};try{await z1e(B),_(b),n("sent")}catch(T){console.error("Error sending message:",T),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},I=async C=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await G1e(C),A(null)}catch(B){console.error("Error deleting message:",B),alert("No se pudo eliminar el mensaje.")}},P=C=>{_({para:C.de,asunto:`Re: ${C.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${C.de}
Fecha: ${new Date(C.fecha).toLocaleString("es-CL")}

${C.cuerpo}`}),n("compose")},M=J.useMemo(()=>a.filter(C=>C.para===t.email),[a,t.email]),D=J.useMemo(()=>a.filter(C=>C.de===t.email),[a,t.email]);return m?c.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[c.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[c.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:c.jsx("button",{onClick:()=>{n("compose"),A(null),_(b)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),c.jsxs("nav",{className:"p-2 space-y-1",children:[c.jsx("button",{onClick:()=>{n("inbox"),A(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),c.jsx("button",{onClick:()=>{n("sent"),A(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&c.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?M:D).map(C=>{const B=r==="inbox"&&!d.messages.includes(C.id);return c.jsxs("div",{onClick:()=>N(C),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(l==null?void 0:l.id)===C.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("p",{className:`font-bold truncate ${B?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?C.de:`Para: ${C.para}`}),B&&c.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),c.jsx("p",{className:`truncate text-sm ${B?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:C.asunto}),c.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(C.fecha).toLocaleString("es-CL")})]},C.id)})}),c.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),c.jsxs("form",{onSubmit:k,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),c.jsxs("select",{id:"para",value:w.para,onChange:C=>_({...w,para:C.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(C=>C.email!==t.email).map(C=>c.jsxs("option",{value:C.email,children:[C.nombreCompleto," (",C.email,")"]},C.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),c.jsx("input",{type:"text",id:"asunto",value:w.asunto,onChange:C=>_({...w,asunto:C.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),c.jsx("textarea",{id:"cuerpo",value:w.cuerpo,onChange:C=>_({...w,cuerpo:C.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):l?c.jsxs("div",{children:[c.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.asunto}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[c.jsx("strong",{children:"De:"})," ",l.de," ",c.jsx("br",{}),c.jsx("strong",{children:"Para:"})," ",l.para," ",c.jsx("br",{}),c.jsx("strong",{children:"Fecha:"})," ",new Date(l.fecha).toLocaleString("es-CL")]})]}),c.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:l.cuerpo}),c.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&c.jsx("button",{onClick:()=>P(l),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),c.jsx("button",{onClick:()=>I(l.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):c.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:c.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var c5=function(t,e){return c5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},c5(t,e)};function Lc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");c5(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var u5=function(){return u5=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},u5.apply(this,arguments)};function Yi(t,e,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function o(d){try{A(n.next(d))}catch(h){i(h)}}function l(d){try{A(n.throw(d))}catch(h){i(h)}}function A(d){d.done?s(d.value):a(d.value).then(o,l)}A((n=n.apply(t,[])).next())})}function Ii(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(A){return function(d){return l([A,d])}}function l(A){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=A[0]&2?a.return:A[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,A[1])).done)return s;switch(a=0,s&&(A=[A[0]&2,s.value]),A[0]){case 0:case 1:s=A;break;case 4:return r.label++,{value:A[1],done:!1};case 5:r.label++,a=A[1],A=[0];continue;case 7:A=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(A[0]===6||A[0]===2)){r=0;continue}if(A[0]===3&&(!s||A[1]>s[0]&&A[1]<s[3])){r.label=A[1];break}if(A[0]===6&&r.label<s[1]){r.label=s[1],s=A;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(A);break}s[2]&&r.ops.pop(),r.trys.pop();continue}A=e.call(t,r)}catch(d){A=[6,d],a=0}finally{n=s=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}function Tv(t,e,r){if(arguments.length===2)for(var n=0,a=e.length,s;n<a;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||e)}var DA=function(){function t(e,r,n,a){this.left=e,this.top=r,this.width=n,this.height=a}return t.prototype.add=function(e,r,n,a){return new t(this.left+e,this.top+r,this.width+n,this.height+a)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Ow=function(t,e){return DA.fromClientRect(t,e.getBoundingClientRect())},Y1e=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),a=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new DA(0,0,n,a)},Qw=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},es=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=t[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},H6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",X1e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Bv=0;Bv<H6.length;Bv++)X1e[H6.charCodeAt(Bv)]=Bv;var V6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Nv=0;Nv<V6.length;Nv++)mg[V6.charCodeAt(Nv)]=Nv;var J1e=function(t){var e=t.length*.75,r=t.length,n,a=0,s,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(A)?A:new Uint8Array(A);for(n=0;n<r;n+=4)s=mg[t.charCodeAt(n)],i=mg[t.charCodeAt(n+1)],o=mg[t.charCodeAt(n+2)],l=mg[t.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|l&63;return A},Z1e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},eve=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},xh=5,eT=11,hE=2,tve=eT-xh,a7=65536>>xh,rve=1<<xh,mE=rve-1,nve=1024>>xh,ave=a7+nve,sve=ave,ive=32,ove=sve+ive,lve=65536>>eT,cve=1<<tve,uve=cve-1,z6=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},Ave=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},dve=function(t,e){var r=J1e(t),n=Array.isArray(r)?eve(r):new Uint32Array(r),a=Array.isArray(r)?Z1e(r):new Uint16Array(r),s=24,i=z6(a,s/2,n[4]/2),o=n[5]===2?z6(a,(s+n[4])/2):Ave(n,Math.ceil((s+n[4])/4));return new fve(n[0],n[1],n[2],n[3],i,o)},fve=function(){function t(e,r,n,a,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>xh],r=(r<<hE)+(e&mE),this.data[r];if(e<=65535)return r=this.index[a7+(e-55296>>xh)],r=(r<<hE)+(e&mE),this.data[r];if(e<this.highStart)return r=ove-lve+(e>>eT),r=this.index[r],r+=e>>xh&uve,r=this.index[r],r=(r<<hE)+(e&mE),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),G6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hve=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var kv=0;kv<G6.length;kv++)hve[G6.charCodeAt(kv)]=kv;var mve="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",q6=50,pve=1,s7=2,i7=3,gve=4,xve=5,K6=7,o7=8,W6=9,qd=10,A5=11,$6=12,d5=13,vve=14,pg=15,f5=16,Iv=17,$p=18,yve=19,Y6=20,h5=21,Yp=22,pE=23,T0=24,Wo=25,gg=26,xg=27,B0=28,wve=29,ah=30,bve=31,Fv=32,Rv=33,m5=34,p5=35,g5=36,yx=37,x5=38,C2=39,E2=40,gE=41,l7=42,Cve=43,Eve=[9001,65288],c7="!",sn="×",Dv="÷",v5=dve(mve),hA=[ah,g5],y5=[pve,s7,i7,xve],u7=[qd,o7],X6=[xg,gg],_ve=y5.concat(u7),J6=[x5,C2,E2,m5,p5],Sve=[pg,d5],Tve=function(t,e){e===void 0&&(e="strict");var r=[],n=[],a=[];return t.forEach(function(s,i){var o=v5.get(s);if(o>q6?(a.push(!0),o-=q6):a.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(f5);if(o===gve||o===A5){if(i===0)return n.push(i),r.push(ah);var l=r[i-1];return _ve.indexOf(l)===-1?(n.push(n[i-1]),r.push(l)):(n.push(i),r.push(ah))}if(n.push(i),o===bve)return r.push(e==="strict"?h5:yx);if(o===l7||o===wve)return r.push(ah);if(o===Cve)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(yx):r.push(ah);r.push(o)}),[n,r,a]},xE=function(t,e,r,n){var a=n[r];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===e)return!0;if(i!==qd)break}if(a===qd)for(var s=r;s>0;){s--;var o=n[s];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var l=r;l<=n.length;){l++;var i=n[l];if(i===e)return!0;if(i!==qd)break}if(o!==qd)break}return!1},Z6=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===qd)r--;else return n}return 0},Bve=function(t,e,r,n,a){if(r[n]===0)return sn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return sn;var i=s-1,o=s+1,l=e[s],A=i>=0?e[i]:0,d=e[o];if(l===s7&&d===i7)return sn;if(y5.indexOf(l)!==-1)return c7;if(y5.indexOf(d)!==-1||u7.indexOf(d)!==-1)return sn;if(Z6(s,e)===o7)return Dv;if(v5.get(t[s])===A5||(l===Fv||l===Rv)&&v5.get(t[o])===A5||l===K6||d===K6||l===W6||[qd,d5,pg].indexOf(l)===-1&&d===W6||[Iv,$p,yve,T0,B0].indexOf(d)!==-1||Z6(s,e)===Yp||xE(pE,Yp,s,e)||xE([Iv,$p],h5,s,e)||xE($6,$6,s,e))return sn;if(l===qd)return Dv;if(l===pE||d===pE)return sn;if(d===f5||l===f5)return Dv;if([d5,pg,h5].indexOf(d)!==-1||l===vve||A===g5&&Sve.indexOf(l)!==-1||l===B0&&d===g5||d===Y6||hA.indexOf(d)!==-1&&l===Wo||hA.indexOf(l)!==-1&&d===Wo||l===xg&&[yx,Fv,Rv].indexOf(d)!==-1||[yx,Fv,Rv].indexOf(l)!==-1&&d===gg||hA.indexOf(l)!==-1&&X6.indexOf(d)!==-1||X6.indexOf(l)!==-1&&hA.indexOf(d)!==-1||[xg,gg].indexOf(l)!==-1&&(d===Wo||[Yp,pg].indexOf(d)!==-1&&e[o+1]===Wo)||[Yp,pg].indexOf(l)!==-1&&d===Wo||l===Wo&&[Wo,B0,T0].indexOf(d)!==-1)return sn;if([Wo,B0,T0,Iv,$p].indexOf(d)!==-1)for(var h=s;h>=0;){var m=e[h];if(m===Wo)return sn;if([B0,T0].indexOf(m)!==-1)h--;else break}if([xg,gg].indexOf(d)!==-1)for(var h=[Iv,$p].indexOf(l)!==-1?i:s;h>=0;){var m=e[h];if(m===Wo)return sn;if([B0,T0].indexOf(m)!==-1)h--;else break}if(x5===l&&[x5,C2,m5,p5].indexOf(d)!==-1||[C2,m5].indexOf(l)!==-1&&[C2,E2].indexOf(d)!==-1||[E2,p5].indexOf(l)!==-1&&d===E2||J6.indexOf(l)!==-1&&[Y6,gg].indexOf(d)!==-1||J6.indexOf(d)!==-1&&l===xg||hA.indexOf(l)!==-1&&hA.indexOf(d)!==-1||l===T0&&hA.indexOf(d)!==-1||hA.concat(Wo).indexOf(l)!==-1&&d===Yp&&Eve.indexOf(t[o])===-1||hA.concat(Wo).indexOf(d)!==-1&&l===$p)return sn;if(l===gE&&d===gE){for(var g=r[s],b=1;g>0&&(g--,e[g]===gE);)b++;if(b%2!==0)return sn}return l===Fv&&d===Rv?sn:Dv},Nve=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=Tve(t,e.lineBreak),n=r[0],a=r[1],s=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(a=a.map(function(o){return[Wo,ah,l7].indexOf(o)!==-1?yx:o}));var i=e.wordBreak==="keep-all"?s.map(function(o,l){return o&&t[l]>=19968&&t[l]<=40959}):void 0;return[n,a,i]},kve=function(){function t(e,r,n,a){this.codePoints=e,this.required=r===c7,this.start=n,this.end=a}return t.prototype.slice=function(){return es.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),Ive=function(t,e){var r=Qw(t),n=Nve(r,e),a=n[0],s=n[1],i=n[2],o=r.length,l=0,A=0;return{next:function(){if(A>=o)return{done:!0,value:null};for(var d=sn;A<o&&(d=Bve(r,s,a,++A,i))===sn;);if(d!==sn||A===o){var h=new kve(r,d,l,A);return l=A,{value:h,done:!1}}return{done:!0,value:null}}}},Fve=1,Rve=2,Jx=4,eR=8,yy=10,tR=47,Vg=92,Dve=9,Lve=32,Lv=34,Xp=61,Uve=35,Mve=36,Pve=37,Uv=39,Mv=40,Jp=41,jve=95,yo=45,Ove=33,Qve=60,Hve=62,Vve=64,zve=91,Gve=93,qve=61,Kve=123,Pv=63,Wve=125,rR=124,$ve=126,Yve=128,nR=65533,vE=42,oh=43,Xve=44,Jve=58,Zve=59,wx=46,e2e=0,t2e=8,r2e=11,n2e=14,a2e=31,s2e=127,mu=-1,A7=48,d7=97,f7=101,i2e=102,o2e=117,l2e=122,h7=65,m7=69,p7=70,c2e=85,u2e=90,Li=function(t){return t>=A7&&t<=57},A2e=function(t){return t>=55296&&t<=57343},N0=function(t){return Li(t)||t>=h7&&t<=p7||t>=d7&&t<=i2e},d2e=function(t){return t>=d7&&t<=l2e},f2e=function(t){return t>=h7&&t<=u2e},h2e=function(t){return d2e(t)||f2e(t)},m2e=function(t){return t>=Yve},jv=function(t){return t===yy||t===Dve||t===Lve},wy=function(t){return h2e(t)||m2e(t)||t===jve},aR=function(t){return wy(t)||Li(t)||t===yo},p2e=function(t){return t>=e2e&&t<=t2e||t===r2e||t>=n2e&&t<=a2e||t===s2e},Rd=function(t,e){return t!==Vg?!1:e!==yy},Ov=function(t,e,r){return t===yo?wy(e)||Rd(e,r):wy(t)?!0:!!(t===Vg&&Rd(t,e))},yE=function(t,e,r){return t===oh||t===yo?Li(e)?!0:e===wx&&Li(r):Li(t===wx?e:t)},g2e=function(t){var e=0,r=1;(t[e]===oh||t[e]===yo)&&(t[e]===yo&&(r=-1),e++);for(var n=[];Li(t[e]);)n.push(t[e++]);var a=n.length?parseInt(es.apply(void 0,n),10):0;t[e]===wx&&e++;for(var s=[];Li(t[e]);)s.push(t[e++]);var i=s.length,o=i?parseInt(es.apply(void 0,s),10):0;(t[e]===m7||t[e]===f7)&&e++;var l=1;(t[e]===oh||t[e]===yo)&&(t[e]===yo&&(l=-1),e++);for(var A=[];Li(t[e]);)A.push(t[e++]);var d=A.length?parseInt(es.apply(void 0,A),10):0;return r*(a+o*Math.pow(10,-i))*Math.pow(10,l*d)},x2e={type:2},v2e={type:3},y2e={type:4},w2e={type:13},b2e={type:8},C2e={type:21},E2e={type:9},_2e={type:10},S2e={type:11},T2e={type:12},B2e={type:14},Qv={type:23},N2e={type:1},k2e={type:25},I2e={type:24},F2e={type:26},R2e={type:27},D2e={type:28},L2e={type:29},U2e={type:31},w5={type:32},g7=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Qw(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==w5;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Lv:return this.consumeStringToken(Lv);case Uve:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(aR(r)||Rd(n,a)){var s=Ov(r,n,a)?Rve:Fve,i=this.consumeName();return{type:5,value:i,flags:s}}break;case Mve:if(this.peekCodePoint(0)===Xp)return this.consumeCodePoint(),w2e;break;case Uv:return this.consumeStringToken(Uv);case Mv:return x2e;case Jp:return v2e;case vE:if(this.peekCodePoint(0)===Xp)return this.consumeCodePoint(),B2e;break;case oh:if(yE(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Xve:return y2e;case yo:var o=e,l=this.peekCodePoint(0),A=this.peekCodePoint(1);if(yE(o,l,A))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Ov(o,l,A))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===yo&&A===Hve)return this.consumeCodePoint(),this.consumeCodePoint(),I2e;break;case wx:if(yE(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case tR:if(this.peekCodePoint(0)===vE)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===vE&&(d=this.consumeCodePoint(),d===tR))return this.consumeToken();if(d===mu)return this.consumeToken()}break;case Jve:return F2e;case Zve:return R2e;case Qve:if(this.peekCodePoint(0)===Ove&&this.peekCodePoint(1)===yo&&this.peekCodePoint(2)===yo)return this.consumeCodePoint(),this.consumeCodePoint(),k2e;break;case Vve:var h=this.peekCodePoint(0),m=this.peekCodePoint(1),g=this.peekCodePoint(2);if(Ov(h,m,g)){var i=this.consumeName();return{type:7,value:i}}break;case zve:return D2e;case Vg:if(Rd(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case Gve:return L2e;case qve:if(this.peekCodePoint(0)===Xp)return this.consumeCodePoint(),b2e;break;case Kve:return S2e;case Wve:return T2e;case o2e:case c2e:var b=this.peekCodePoint(0),w=this.peekCodePoint(1);return b===oh&&(N0(w)||w===Pv)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case rR:if(this.peekCodePoint(0)===Xp)return this.consumeCodePoint(),E2e;if(this.peekCodePoint(0)===rR)return this.consumeCodePoint(),C2e;break;case $ve:if(this.peekCodePoint(0)===Xp)return this.consumeCodePoint(),_2e;break;case mu:return w5}return jv(e)?(this.consumeWhiteSpace(),U2e):Li(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):wy(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:es(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();N0(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===Pv&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(es.apply(void 0,e.map(function(l){return l===Pv?A7:l})),16),s=parseInt(es.apply(void 0,e.map(function(l){return l===Pv?p7:l})),16);return{type:30,start:a,end:s}}var i=parseInt(es.apply(void 0,e),16);if(this.peekCodePoint(0)===yo&&N0(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];N0(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var s=parseInt(es.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Mv?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Mv?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===mu)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===Uv||r===Lv){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===mu||this.peekCodePoint(0)===Jp)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),Qv)}for(;;){var a=this.consumeCodePoint();if(a===mu||a===Jp)return{type:22,value:es.apply(void 0,e)};if(jv(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===mu||this.peekCodePoint(0)===Jp?(this.consumeCodePoint(),{type:22,value:es.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Qv);if(a===Lv||a===Uv||a===Mv||p2e(a))return this.consumeBadUrlRemnants(),Qv;if(a===Vg)if(Rd(a,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Qv;else e.push(a)}},t.prototype.consumeWhiteSpace=function(){for(;jv(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Jp||e===mu)return;Rd(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var a=Math.min(r,e);n+=es.apply(void 0,this._value.splice(0,a)),e-=a}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var a=this._value[n];if(a===mu||a===void 0||a===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===yy)return this._value.splice(0,n),N2e;if(a===Vg){var s=this._value[n+1];s!==mu&&s!==void 0&&(s===yy?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):Rd(a,s)&&(r+=this.consumeStringSlice(n),r+=es(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=Jx,n=this.peekCodePoint(0);for((n===oh||n===yo)&&e.push(this.consumeCodePoint());Li(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===wx&&Li(a))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=eR;Li(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===m7||n===f7)&&((a===oh||a===yo)&&Li(s)||Li(a)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=eR;Li(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[g2e(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Ov(a,s,i)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return a===Pve?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(N0(e)){for(var r=es(e);N0(this.peekCodePoint(0))&&r.length<6;)r+=es(this.consumeCodePoint());jv(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||A2e(n)||n>1114111?nR:n}return e===mu?nR:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(aR(r))e+=es(r);else if(Rd(r,this.peekCodePoint(0)))e+=es(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),x7=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new g7;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||P2e(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?w5:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Zx=function(t){return t.type===15},rp=function(t){return t.type===17},Jn=function(t){return t.type===20},M2e=function(t){return t.type===0},b5=function(t,e){return Jn(t)&&t.value===e},v7=function(t){return t.type!==31},Dm=function(t){return t.type!==31&&t.type!==4},Lu=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},P2e=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},yf=function(t){return t.type===17||t.type===15},ys=function(t){return t.type===16||yf(t)},y7=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},ui={type:17,number:0,flags:Jx},tT={type:16,number:50,flags:Jx},Kd={type:16,number:100,flags:Jx},vg=function(t,e,r){var n=t[0],a=t[1];return[oa(n,e),oa(typeof a<"u"?a:n,r)]},oa=function(t,e){if(t.type===16)return t.number/100*e;if(Zx(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},w7="deg",b7="grad",C7="rad",E7="turn",Hw={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case w7:return Math.PI*e.number/180;case b7:return Math.PI/200*e.number;case C7:return e.number;case E7:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},_7=function(t){return t.type===15&&(t.unit===w7||t.unit===b7||t.unit===C7||t.unit===E7)},S7=function(t){var e=t.filter(Jn).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ui,ui];case"to top":case"bottom":return Pl(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ui,Kd];case"to right":case"left":return Pl(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Kd,Kd];case"to bottom":case"top":return Pl(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Kd,ui];case"to left":case"right":return Pl(270)}return 0},Pl=function(t){return Math.PI*t/180},tf={name:"color",parse:function(t,e){if(e.type===18){var r=j2e[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3);return Wd(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3),i=e.value.substring(3,4);return Wd(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6);return Wd(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6),i=e.value.substring(6,8);return Wd(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(e.type===20){var o=SA[e.value.toUpperCase()];if(typeof o<"u")return o}return SA.TRANSPARENT}},rf=function(t){return(255&t)===0},zs=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,a=255&t>>24;return e<255?"rgba("+a+","+n+","+r+","+e/255+")":"rgb("+a+","+n+","+r+")"},Wd=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},sR=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},iR=function(t,e){var r=e.filter(Dm);if(r.length===3){var n=r.map(sR),a=n[0],s=n[1],i=n[2];return Wd(a,s,i,1)}if(r.length===4){var o=r.map(sR),a=o[0],s=o[1],i=o[2],l=o[3];return Wd(a,s,i,l)}return 0};function wE(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var oR=function(t,e){var r=e.filter(Dm),n=r[0],a=r[1],s=r[2],i=r[3],o=(n.type===17?Pl(n.number):Hw.parse(t,n))/(Math.PI*2),l=ys(a)?a.number/100:0,A=ys(s)?s.number/100:0,d=typeof i<"u"&&ys(i)?oa(i,1):1;if(l===0)return Wd(A*255,A*255,A*255,1);var h=A<=.5?A*(l+1):A+l-A*l,m=A*2-h,g=wE(m,h,o+1/3),b=wE(m,h,o),w=wE(m,h,o-1/3);return Wd(g*255,b*255,w*255,d)},j2e={hsl:oR,hsla:oR,rgb:iR,rgba:iR},zg=function(t,e){return tf.parse(t,x7.create(e).parseComponentValue())},SA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},O2e={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Jn(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Q2e={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Vw=function(t,e){var r=tf.parse(t,e[0]),n=e[1];return n&&ys(n)?{color:r,stop:n}:{color:r,stop:null}},lR=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=ui),n.stop===null&&(n.stop=Kd);for(var a=[],s=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var l=oa(o,e);l>s?a.push(l):a.push(s),s=l}else a.push(null)}for(var A=null,i=0;i<a.length;i++){var d=a[i];if(d===null)A===null&&(A=i);else if(A!==null){for(var h=i-A,m=a[A-1],g=(d-m)/(h+1),b=1;b<=h;b++)a[A+b-1]=g*b;A=null}}return t.map(function(w,_){var N=w.color;return{color:N,stop:Math.max(Math.min(1,a[_]/e),0)}})},H2e=function(t,e,r){var n=e/2,a=r/2,s=oa(t[0],e)-n,i=a-oa(t[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},V2e=function(t,e,r){var n=typeof t=="number"?t:H2e(t,e,r),a=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),s=e/2,i=r/2,o=a/2,l=Math.sin(n-Math.PI/2)*o,A=Math.cos(n-Math.PI/2)*o;return[a,s-A,s+A,i-l,i+l]},yc=function(t,e){return Math.sqrt(t*t+e*e)},cR=function(t,e,r,n,a){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(i,o){var l=o[0],A=o[1],d=yc(r-l,n-A);return(a?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},z2e=function(t,e,r,n,a){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(t.shape===0)s=i=Math.min(yc(e,r),yc(e,r-a),yc(e-n,r),yc(e-n,r-a));else if(t.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(e),Math.abs(e-n)),l=cR(n,a,e,r,!0),A=l[0],d=l[1];s=yc(A-e,(d-r)/o),i=o*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(t.shape===0)s=i=Math.max(yc(e,r),yc(e,r-a),yc(e-n,r),yc(e-n,r-a));else if(t.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(e),Math.abs(e-n)),h=cR(n,a,e,r,!1),A=h[0],d=h[1];s=yc(A-e,(d-r)/o),i=o*s}break}return Array.isArray(t.size)&&(s=oa(t.size[0],n),i=t.size.length===2?oa(t.size[1],a):s),[s,i]},G2e=function(t,e){var r=Pl(180),n=[];return Lu(e).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){r=S7(a);return}else if(_7(i)){r=Hw.parse(t,i);return}}var o=Vw(t,a);n.push(o)}),{angle:r,stops:n,type:1}},Hv=function(t,e){var r=Pl(180),n=[];return Lu(e).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=S7(a);return}else if(_7(i)){r=(Hw.parse(t,i)+Pl(270))%Pl(360);return}}var o=Vw(t,a);n.push(o)}),{angle:r,stops:n,type:1}},q2e=function(t,e){var r=Pl(180),n=[],a=1,s=0,i=3,o=[];return Lu(e).forEach(function(l,A){var d=l[0];if(A===0){if(Jn(d)&&d.value==="linear"){a=1;return}else if(Jn(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var h=tf.parse(t,d.values[0]);n.push({stop:ui,color:h})}else if(d.name==="to"){var h=tf.parse(t,d.values[0]);n.push({stop:Kd,color:h})}else if(d.name==="color-stop"){var m=d.values.filter(Dm);if(m.length===2){var h=tf.parse(t,m[1]),g=m[0];rp(g)&&n.push({stop:{type:16,number:g.number*100,flags:g.flags},color:h})}}}}),a===1?{angle:(r+Pl(180))%Pl(360),stops:n,type:a}:{size:i,shape:s,stops:n,position:o,type:a}},T7="closest-side",B7="farthest-side",N7="closest-corner",k7="farthest-corner",I7="circle",F7="ellipse",R7="cover",D7="contain",K2e=function(t,e){var r=0,n=3,a=[],s=[];return Lu(e).forEach(function(i,o){var l=!0;if(o===0){var A=!1;l=i.reduce(function(h,m){if(A)if(Jn(m))switch(m.value){case"center":return s.push(tT),h;case"top":case"left":return s.push(ui),h;case"right":case"bottom":return s.push(Kd),h}else(ys(m)||yf(m))&&s.push(m);else if(Jn(m))switch(m.value){case I7:return r=0,!1;case F7:return r=1,!1;case"at":return A=!0,!1;case T7:return n=0,!1;case R7:case B7:return n=1,!1;case D7:case N7:return n=2,!1;case k7:return n=3,!1}else if(yf(m)||ys(m))return Array.isArray(n)||(n=[]),n.push(m),!1;return h},l)}if(l){var d=Vw(t,i);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},Vv=function(t,e){var r=0,n=3,a=[],s=[];return Lu(e).forEach(function(i,o){var l=!0;if(o===0?l=i.reduce(function(d,h){if(Jn(h))switch(h.value){case"center":return s.push(tT),!1;case"top":case"left":return s.push(ui),!1;case"right":case"bottom":return s.push(Kd),!1}else if(ys(h)||yf(h))return s.push(h),!1;return d},l):o===1&&(l=i.reduce(function(d,h){if(Jn(h))switch(h.value){case I7:return r=0,!1;case F7:return r=1,!1;case D7:case T7:return n=0,!1;case B7:return n=1,!1;case N7:return n=2,!1;case R7:case k7:return n=3,!1}else if(yf(h)||ys(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return d},l)),l){var A=Vw(t,i);a.push(A)}}),{size:n,shape:r,stops:a,position:s,type:2}},W2e=function(t){return t.type===1},$2e=function(t){return t.type===2},rT={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=L7[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function Y2e(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!L7[t.name])}var L7={"linear-gradient":G2e,"-moz-linear-gradient":Hv,"-ms-linear-gradient":Hv,"-o-linear-gradient":Hv,"-webkit-linear-gradient":Hv,"radial-gradient":K2e,"-moz-radial-gradient":Vv,"-ms-radial-gradient":Vv,"-o-radial-gradient":Vv,"-webkit-radial-gradient":Vv,"-webkit-gradient":q2e},X2e={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Dm(n)&&Y2e(n)}).map(function(n){return rT.parse(t,n)})}},J2e={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Jn(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Z2e={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Lu(e).map(function(r){return r.filter(ys)}).map(y7)}},eye={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Lu(e).map(function(r){return r.filter(Jn).map(function(n){return n.value}).join(" ")}).map(tye)}},tye=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},pm;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(pm||(pm={}));var rye={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Lu(e).map(function(r){return r.filter(nye)})}},nye=function(t){return Jn(t)||ys(t)},zw=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},aye=zw("top"),sye=zw("right"),iye=zw("bottom"),oye=zw("left"),Gw=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return y7(r.filter(ys))}}},lye=Gw("top-left"),cye=Gw("top-right"),uye=Gw("bottom-right"),Aye=Gw("bottom-left"),qw=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},dye=qw("top"),fye=qw("right"),hye=qw("bottom"),mye=qw("left"),Kw=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return Zx(r)?r.number:0}}},pye=Kw("top"),gye=Kw("right"),xye=Kw("bottom"),vye=Kw("left"),yye={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},wye={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},bye={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Jn).reduce(function(r,n){return r|Cye(n.value)},0)}},Cye=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Eye={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},_ye={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},by;(function(t){t.NORMAL="normal",t.STRICT="strict"})(by||(by={}));var Sye={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return by.STRICT;case"normal":default:return by.NORMAL}}},Tye={name:"line-height",initialValue:"normal",prefix:!1,type:4},uR=function(t,e){return Jn(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:ys(t)?oa(t,e):e},Bye={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:rT.parse(t,e)}},Nye={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},C5={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Ww=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},kye=Ww("top"),Iye=Ww("right"),Fye=Ww("bottom"),Rye=Ww("left"),Dye={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Jn).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Lye={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},$w=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Uye=$w("top"),Mye=$w("right"),Pye=$w("bottom"),jye=$w("left"),Oye={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Qye={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Hye={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&b5(e[0],"none")?[]:Lu(e).map(function(r){for(var n={color:SA.TRANSPARENT,offsetX:ui,offsetY:ui,blur:ui},a=0,s=0;s<r.length;s++){var i=r[s];yf(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:n.blur=i,a++):n.color=tf.parse(t,i)}return n})}},Vye={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},zye={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=Kye[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},Gye=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},qye=function(t){var e=t.filter(function(l){return l.type===17}).map(function(l){return l.number}),r=e[0],n=e[1];e[2],e[3];var a=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[r,n,a,s,i,o]:null},Kye={matrix:Gye,matrix3d:qye},AR={type:16,number:50,flags:Jx},Wye=[AR,AR],$ye={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(ys);return r.length!==2?Wye:[r[0],r[1]]}},Yye={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Gg;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Gg||(Gg={}));var Xye={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Gg.BREAK_ALL;case"keep-all":return Gg.KEEP_ALL;case"normal":default:return Gg.NORMAL}}},Jye={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(rp(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},U7={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},Zye={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return rp(e)?e.number:1}},ewe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},twe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Jn).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},rwe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},nwe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},awe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(rp(e))return e.number;if(Jn(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},swe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Jn).map(function(r){return r.value})}},iwe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Is=function(t,e){return(t&e)!==0},owe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},lwe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=e.filter(v7),s=0;s<a.length;s++){var i=a[s],o=a[s+1];if(i.type===20){var l=o&&rp(o)?o.number:1;n.push({counter:i.value,increment:l})}}return n}},cwe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(v7),a=0;a<n.length;a++){var s=n[a],i=n[a+1];if(Jn(s)&&s.value!=="none"){var o=i&&rp(i)?i.number:0;r.push({counter:s.value,reset:o})}}return r}},uwe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Zx).map(function(r){return U7.parse(t,r)})}},Awe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],a=e.filter(M2e);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,o=a[s+1].value;n.push({open:i,close:o})}return n}},dR=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},dwe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&b5(e[0],"none")?[]:Lu(e).map(function(r){for(var n={color:255,offsetX:ui,offsetY:ui,blur:ui,spread:ui,inset:!1},a=0,s=0;s<r.length;s++){var i=r[s];b5(i,"inset")?n.inset=!0:yf(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:a===2?n.blur=i:n.spread=i,a++):n.color=tf.parse(t,i)}return n})}},fwe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Jn).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},hwe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},mwe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Zx(e)?e.number:0}},pwe=function(){function t(e,r){var n,a;this.animationDuration=qt(e,uwe,r.animationDuration),this.backgroundClip=qt(e,O2e,r.backgroundClip),this.backgroundColor=qt(e,Q2e,r.backgroundColor),this.backgroundImage=qt(e,X2e,r.backgroundImage),this.backgroundOrigin=qt(e,J2e,r.backgroundOrigin),this.backgroundPosition=qt(e,Z2e,r.backgroundPosition),this.backgroundRepeat=qt(e,eye,r.backgroundRepeat),this.backgroundSize=qt(e,rye,r.backgroundSize),this.borderTopColor=qt(e,aye,r.borderTopColor),this.borderRightColor=qt(e,sye,r.borderRightColor),this.borderBottomColor=qt(e,iye,r.borderBottomColor),this.borderLeftColor=qt(e,oye,r.borderLeftColor),this.borderTopLeftRadius=qt(e,lye,r.borderTopLeftRadius),this.borderTopRightRadius=qt(e,cye,r.borderTopRightRadius),this.borderBottomRightRadius=qt(e,uye,r.borderBottomRightRadius),this.borderBottomLeftRadius=qt(e,Aye,r.borderBottomLeftRadius),this.borderTopStyle=qt(e,dye,r.borderTopStyle),this.borderRightStyle=qt(e,fye,r.borderRightStyle),this.borderBottomStyle=qt(e,hye,r.borderBottomStyle),this.borderLeftStyle=qt(e,mye,r.borderLeftStyle),this.borderTopWidth=qt(e,pye,r.borderTopWidth),this.borderRightWidth=qt(e,gye,r.borderRightWidth),this.borderBottomWidth=qt(e,xye,r.borderBottomWidth),this.borderLeftWidth=qt(e,vye,r.borderLeftWidth),this.boxShadow=qt(e,dwe,r.boxShadow),this.color=qt(e,yye,r.color),this.direction=qt(e,wye,r.direction),this.display=qt(e,bye,r.display),this.float=qt(e,Eye,r.cssFloat),this.fontFamily=qt(e,rwe,r.fontFamily),this.fontSize=qt(e,nwe,r.fontSize),this.fontStyle=qt(e,iwe,r.fontStyle),this.fontVariant=qt(e,swe,r.fontVariant),this.fontWeight=qt(e,awe,r.fontWeight),this.letterSpacing=qt(e,_ye,r.letterSpacing),this.lineBreak=qt(e,Sye,r.lineBreak),this.lineHeight=qt(e,Tye,r.lineHeight),this.listStyleImage=qt(e,Bye,r.listStyleImage),this.listStylePosition=qt(e,Nye,r.listStylePosition),this.listStyleType=qt(e,C5,r.listStyleType),this.marginTop=qt(e,kye,r.marginTop),this.marginRight=qt(e,Iye,r.marginRight),this.marginBottom=qt(e,Fye,r.marginBottom),this.marginLeft=qt(e,Rye,r.marginLeft),this.opacity=qt(e,Zye,r.opacity);var s=qt(e,Dye,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=qt(e,Lye,r.overflowWrap),this.paddingTop=qt(e,Uye,r.paddingTop),this.paddingRight=qt(e,Mye,r.paddingRight),this.paddingBottom=qt(e,Pye,r.paddingBottom),this.paddingLeft=qt(e,jye,r.paddingLeft),this.paintOrder=qt(e,fwe,r.paintOrder),this.position=qt(e,Qye,r.position),this.textAlign=qt(e,Oye,r.textAlign),this.textDecorationColor=qt(e,ewe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=qt(e,twe,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=qt(e,Hye,r.textShadow),this.textTransform=qt(e,Vye,r.textTransform),this.transform=qt(e,zye,r.transform),this.transformOrigin=qt(e,$ye,r.transformOrigin),this.visibility=qt(e,Yye,r.visibility),this.webkitTextStrokeColor=qt(e,hwe,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=qt(e,mwe,r.webkitTextStrokeWidth),this.wordBreak=qt(e,Xye,r.wordBreak),this.zIndex=qt(e,Jye,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return rf(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Is(this.display,4)||Is(this.display,33554432)||Is(this.display,268435456)||Is(this.display,536870912)||Is(this.display,67108864)||Is(this.display,134217728)},t}(),gwe=function(){function t(e,r){this.content=qt(e,owe,r.content),this.quotes=qt(e,Awe,r.quotes)}return t}(),fR=function(){function t(e,r){this.counterIncrement=qt(e,lwe,r.counterIncrement),this.counterReset=qt(e,cwe,r.counterReset)}return t}(),qt=function(t,e,r){var n=new g7,a=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(a);var s=new x7(n.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(t,Jn(i)?i.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return Hw.parse(t,s.parseComponentValue());case"color":return tf.parse(t,s.parseComponentValue());case"image":return rT.parse(t,s.parseComponentValue());case"length":var o=s.parseComponentValue();return yf(o)?o:ui;case"length-percentage":var l=s.parseComponentValue();return ys(l)?l:ui;case"time":return U7.parse(t,s.parseComponentValue())}break}},xwe="data-html2canvas-debug",vwe=function(t){var e=t.getAttribute(xwe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},E5=function(t,e){var r=vwe(t);return r===1||e===r},Uu=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,E5(r,3))debugger;this.styles=new pwe(e,window.getComputedStyle(r,null)),T5(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=Ow(this.context,r),E5(r,4)&&(this.flags|=16)}return t}(),ywe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",hR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var zv=0;zv<hR.length;zv++)yg[hR.charCodeAt(zv)]=zv;var wwe=function(t){var e=t.length*.75,r=t.length,n,a=0,s,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(A)?A:new Uint8Array(A);for(n=0;n<r;n+=4)s=yg[t.charCodeAt(n)],i=yg[t.charCodeAt(n+1)],o=yg[t.charCodeAt(n+2)],l=yg[t.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|l&63;return A},bwe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},Cwe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},vh=5,nT=11,bE=2,Ewe=nT-vh,M7=65536>>vh,_we=1<<vh,CE=_we-1,Swe=1024>>vh,Twe=M7+Swe,Bwe=Twe,Nwe=32,kwe=Bwe+Nwe,Iwe=65536>>nT,Fwe=1<<Ewe,Rwe=Fwe-1,mR=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},Dwe=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},Lwe=function(t,e){var r=wwe(t),n=Array.isArray(r)?Cwe(r):new Uint32Array(r),a=Array.isArray(r)?bwe(r):new Uint16Array(r),s=24,i=mR(a,s/2,n[4]/2),o=n[5]===2?mR(a,(s+n[4])/2):Dwe(n,Math.ceil((s+n[4])/4));return new Uwe(n[0],n[1],n[2],n[3],i,o)},Uwe=function(){function t(e,r,n,a,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>vh],r=(r<<bE)+(e&CE),this.data[r];if(e<=65535)return r=this.index[M7+(e-55296>>vh)],r=(r<<bE)+(e&CE),this.data[r];if(e<this.highStart)return r=kwe-Iwe+(e>>nT),r=this.index[r],r+=e>>vh&Rwe,r=this.index[r],r=(r<<bE)+(e&CE),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),pR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Mwe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Gv=0;Gv<pR.length;Gv++)Mwe[pR.charCodeAt(Gv)]=Gv;var Pwe=1,EE=2,_E=3,gR=4,xR=5,jwe=7,vR=8,SE=9,TE=10,yR=11,wR=12,bR=13,CR=14,BE=15,Owe=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},Qwe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=t[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},Hwe=Lwe(ywe),Rl="×",NE="÷",Vwe=function(t){return Hwe.get(t)},zwe=function(t,e,r){var n=r-2,a=e[n],s=e[r-1],i=e[r];if(s===EE&&i===_E)return Rl;if(s===EE||s===_E||s===gR||i===EE||i===_E||i===gR)return NE;if(s===vR&&[vR,SE,yR,wR].indexOf(i)!==-1||(s===yR||s===SE)&&(i===SE||i===TE)||(s===wR||s===TE)&&i===TE||i===bR||i===xR||i===jwe||s===Pwe)return Rl;if(s===bR&&i===CR){for(;a===xR;)a=e[--n];if(a===CR)return Rl}if(s===BE&&i===BE){for(var o=0;a===BE;)o++,a=e[--n];if(o%2===0)return Rl}return NE},Gwe=function(t){var e=Owe(t),r=e.length,n=0,a=0,s=e.map(Vwe);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=Rl;n<r&&(i=zwe(e,s,++n))===Rl;);if(i!==Rl||n===r){var o=Qwe.apply(null,e.slice(a,n));return a=n,{value:o,done:!1}}return{done:!0,value:null}}}},qwe=function(t){for(var e=Gwe(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},Kwe=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(t.body.removeChild(n),s===e)return!0}}return!1},Wwe=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,a=Qw(n.data).map(function(l){return es(l)}),s=0,i={},o=a.every(function(l,A){r.setStart(n,s),r.setEnd(n,s+l.length);var d=r.getBoundingClientRect();s+=l.length;var h=d.x>i.x||d.y>i.y;return i=d,A===0?!0:h});return t.body.removeChild(e),o},$we=function(){return typeof new Image().crossOrigin<"u"},Ywe=function(){return typeof new XMLHttpRequest().responseType=="string"},Xwe=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},ER=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},Jwe=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=e.toDataURL();a.src=s;var i=_5(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),_R(i).then(function(o){n.drawImage(o,0,0);var l=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var A=t.createElement("div");return A.style.backgroundImage="url("+s+")",A.style.height=r+"px",ER(l)?_R(_5(r,r,0,0,A)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),ER(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},_5=function(t,e,r,n,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(a),i},_R=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},si={get SUPPORT_RANGE_BOUNDS(){var t=Kwe(document);return Object.defineProperty(si,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=si.SUPPORT_RANGE_BOUNDS&&Wwe(document);return Object.defineProperty(si,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=Xwe(document);return Object.defineProperty(si,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?Jwe(document):Promise.resolve(!1);return Object.defineProperty(si,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=$we();return Object.defineProperty(si,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Ywe();return Object.defineProperty(si,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(si,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(si,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},qg=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),Zwe=function(t,e,r,n){var a=rbe(e,r),s=[],i=0;return a.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(si.SUPPORT_RANGE_BOUNDS){var l=SR(n,i,o.length).getClientRects();if(l.length>1){var A=aT(o),d=0;A.forEach(function(m){s.push(new qg(m,DA.fromDOMRectList(t,SR(n,d+i,m.length).getClientRects()))),d+=m.length})}else s.push(new qg(o,DA.fromDOMRectList(t,l)))}else{var h=n.splitText(o.length);s.push(new qg(o,ebe(t,n))),n=h}else si.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));i+=o.length}),s},ebe=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(n,e);var s=Ow(t,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return DA.EMPTY},SR=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(t,e),a.setEnd(t,e+r),a},aT=function(t){if(si.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return qwe(t)},tbe=function(t,e){if(si.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return abe(t,e)},rbe=function(t,e){return e.letterSpacing!==0?aT(t):tbe(t,e)},nbe=[32,160,4961,65792,65793,4153,4241],abe=function(t,e){for(var r=Ive(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],a,s=function(){if(a.value){var i=a.value.slice(),o=Qw(i),l="";o.forEach(function(A){nbe.indexOf(A)===-1?l+=es(A):(l.length&&n.push(l),n.push(es(A)),l="")}),l.length&&n.push(l)}};!(a=r.next()).done;)s();return n},sbe=function(){function t(e,r,n){this.text=ibe(r.data,n.textTransform),this.textBounds=Zwe(e,this.text,n,r)}return t}(),ibe=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(obe,lbe);case 2:return t.toUpperCase();default:return t}},obe=/(^|\s|:|-|\(|\))([a-z])/g,lbe=function(t,e,r){return t.length>0?e+r.toUpperCase():t},P7=function(t){Lc(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return e}(Uu),j7=function(t){Lc(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return e}(Uu),O7=function(t){Lc(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=new XMLSerializer,i=Ow(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return e}(Uu),Q7=function(t){Lc(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(Uu),S5=function(t){Lc(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return e}(Uu),cbe=[{type:15,flags:0,unit:"px",number:3}],ube=[{type:16,flags:0,number:50}],Abe=function(t){return t.width>t.height?new DA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new DA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},dbe=function(t){var e=t.type===fbe?new Array(t.value.length+1).join("•"):t.value;return e.length===0?t.placeholder||"":e},Cy="checkbox",Ey="radio",fbe="password",TR=707406591,sT=function(t){Lc(e,t);function e(r,n){var a=t.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=dbe(n),(a.type===Cy||a.type===Ey)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=Abe(a.bounds)),a.type){case Cy:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=cbe;break;case Ey:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=ube;break}return a}return e}(Uu),H7=function(t){Lc(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return e}(Uu),V7=function(t){Lc(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(Uu),z7=function(t){Lc(e,t);function e(r,n){var a=t.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=q7(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?zg(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):SA.TRANSPARENT,i=n.contentWindow.document.body?zg(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):SA.TRANSPARENT;a.backgroundColor=rf(s)?rf(i)?a.styles.backgroundColor:i:s}}catch{}return a}return e}(Uu),hbe=["OL","UL","MENU"],_2=function(t,e,r,n){for(var a=e.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,K7(a)&&a.data.trim().length>0)r.textNodes.push(new sbe(t,a,r.styles));else if(J0(a))if(X7(a)&&a.assignedNodes)a.assignedNodes().forEach(function(o){return _2(t,o,r,n)});else{var i=G7(t,a);i.styles.isVisible()&&(mbe(a,i,n)?i.flags|=4:pbe(i.styles)&&(i.flags|=2),hbe.indexOf(a.tagName)!==-1&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?_2(t,a.shadowRoot,i,n):!_y(a)&&!W7(a)&&!Sy(a)&&_2(t,a,i,n))}},G7=function(t,e){return B5(e)?new P7(t,e):$7(e)?new j7(t,e):W7(e)?new O7(t,e):gbe(e)?new Q7(t,e):xbe(e)?new S5(t,e):vbe(e)?new sT(t,e):Sy(e)?new H7(t,e):_y(e)?new V7(t,e):Y7(e)?new z7(t,e):new Uu(t,e)},q7=function(t,e){var r=G7(t,e);return r.flags|=4,_2(t,e,r,r),r},mbe=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||iT(t)&&r.styles.isTransparent()},pbe=function(t){return t.isPositioned()||t.isFloating()},K7=function(t){return t.nodeType===Node.TEXT_NODE},J0=function(t){return t.nodeType===Node.ELEMENT_NODE},T5=function(t){return J0(t)&&typeof t.style<"u"&&!S2(t)},S2=function(t){return typeof t.className=="object"},gbe=function(t){return t.tagName==="LI"},xbe=function(t){return t.tagName==="OL"},vbe=function(t){return t.tagName==="INPUT"},ybe=function(t){return t.tagName==="HTML"},W7=function(t){return t.tagName==="svg"},iT=function(t){return t.tagName==="BODY"},$7=function(t){return t.tagName==="CANVAS"},BR=function(t){return t.tagName==="VIDEO"},B5=function(t){return t.tagName==="IMG"},Y7=function(t){return t.tagName==="IFRAME"},NR=function(t){return t.tagName==="STYLE"},wbe=function(t){return t.tagName==="SCRIPT"},_y=function(t){return t.tagName==="TEXTAREA"},Sy=function(t){return t.tagName==="SELECT"},X7=function(t){return t.tagName==="SLOT"},kR=function(t){return t.tagName.indexOf("-")>0},bbe=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,a=e.counterReset,s=!0;n!==null&&n.forEach(function(o){var l=r.counters[o.counter];l&&o.increment!==0&&(s=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var i=[];return s&&a.forEach(function(o){var l=r.counters[o.counter];i.push(o.counter),l||(l=r.counters[o.counter]=[]),l.push(o.reset)}),i},t}(),IR={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},FR={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},Cbe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Ebe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},k0=function(t,e,r,n,a,s){return t<e||t>r?bx(t,a,s.length>0):n.integers.reduce(function(i,o,l){for(;t>=o;)t-=o,i+=n.values[l];return i},"")+s},J7=function(t,e,r,n){var a="";do r||t--,a=n(t)+a,t/=e;while(t*e>=e);return a},Ja=function(t,e,r,n,a){var s=r-e+1;return(t<0?"-":"")+(J7(Math.abs(t),s,n,function(i){return es(Math.floor(i%s)+e)})+a)},Xf=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return J7(Math.abs(t),n,!1,function(a){return e[Math.floor(a%n)]})+r},q0=1,Id=2,Fd=4,wg=8,mA=function(t,e,r,n,a,s){if(t<-9999||t>9999)return bx(t,4,a.length>0);var i=Math.abs(t),o=a;if(i===0)return e[0]+o;for(var l=0;i>0&&l<=4;l++){var A=i%10;A===0&&Is(s,q0)&&o!==""?o=e[A]+o:A>1||A===1&&l===0||A===1&&l===1&&Is(s,Id)||A===1&&l===1&&Is(s,Fd)&&t>100||A===1&&l>1&&Is(s,wg)?o=e[A]+(l>0?r[l-1]:"")+o:A===1&&l>0&&(o=r[l-1]+o),i=Math.floor(i/10)}return(t<0?n:"")+o},RR="十百千萬",DR="拾佰仟萬",LR="マイナス",kE="마이너스",bx=function(t,e,r){var n=r?". ":"",a=r?"、":"",s=r?", ":"",i=r?" ":"";switch(e){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var o=Ja(t,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Xf(t,"〇一二三四五六七八九",a);case 6:return k0(t,1,3999,IR,3,n).toLowerCase();case 7:return k0(t,1,3999,IR,3,n);case 8:return Ja(t,945,969,!1,n);case 9:return Ja(t,97,122,!1,n);case 10:return Ja(t,65,90,!1,n);case 11:return Ja(t,1632,1641,!0,n);case 12:case 49:return k0(t,1,9999,FR,3,n);case 35:return k0(t,1,9999,FR,3,n).toLowerCase();case 13:return Ja(t,2534,2543,!0,n);case 14:case 30:return Ja(t,6112,6121,!0,n);case 15:return Xf(t,"子丑寅卯辰巳午未申酉戌亥",a);case 16:return Xf(t,"甲乙丙丁戊己庚辛壬癸",a);case 17:case 48:return mA(t,"零一二三四五六七八九",RR,"負",a,Id|Fd|wg);case 47:return mA(t,"零壹貳參肆伍陸柒捌玖",DR,"負",a,q0|Id|Fd|wg);case 42:return mA(t,"零一二三四五六七八九",RR,"负",a,Id|Fd|wg);case 41:return mA(t,"零壹贰叁肆伍陆柒捌玖",DR,"负",a,q0|Id|Fd|wg);case 26:return mA(t,"〇一二三四五六七八九","十百千万",LR,a,0);case 25:return mA(t,"零壱弐参四伍六七八九","拾百千万",LR,a,q0|Id|Fd);case 31:return mA(t,"영일이삼사오육칠팔구","십백천만",kE,s,q0|Id|Fd);case 33:return mA(t,"零一二三四五六七八九","十百千萬",kE,s,0);case 32:return mA(t,"零壹貳參四五六七八九","拾百千",kE,s,q0|Id|Fd);case 18:return Ja(t,2406,2415,!0,n);case 20:return k0(t,1,19999,Ebe,3,n);case 21:return Ja(t,2790,2799,!0,n);case 22:return Ja(t,2662,2671,!0,n);case 22:return k0(t,1,10999,Cbe,3,n);case 23:return Xf(t,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Xf(t,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Ja(t,3302,3311,!0,n);case 28:return Xf(t,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",a);case 29:return Xf(t,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",a);case 34:return Ja(t,3792,3801,!0,n);case 37:return Ja(t,6160,6169,!0,n);case 38:return Ja(t,4160,4169,!0,n);case 39:return Ja(t,2918,2927,!0,n);case 40:return Ja(t,1776,1785,!0,n);case 43:return Ja(t,3046,3055,!0,n);case 44:return Ja(t,3174,3183,!0,n);case 45:return Ja(t,3664,3673,!0,n);case 46:return Ja(t,3872,3881,!0,n);case 3:default:return Ja(t,48,57,!0,n)}},Z7="data-html2canvas-ignore",UR=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new bbe,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,a=_be(e,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=a.contentWindow,l=o.document,A=Bbe(a).then(function(){return Yi(n,void 0,void 0,function(){var d,h;return Ii(this,function(m){switch(m.label){case 0:return this.scrolledElements.forEach(Fbe),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:m.sent(),m.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Tbe(l)]:[3,4];case 3:m.sent(),m.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(l,h)}).then(function(){return a})]:[2,a]}})})});return l.open(),l.write(kbe(document.doctype)+"<html></html>"),Ibe(this.referenceElement.ownerDocument,s,i),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),A},t.prototype.createElementClone=function(e){if(E5(e,2))debugger;if($7(e))return this.createCanvasClone(e);if(BR(e))return this.createVideoClone(e);if(NR(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return B5(r)&&(B5(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),kR(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return IE(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=e.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var a=e.cloneNode(!1);try{a.width=e.width,a.height=e.height;var s=e.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var o=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return a},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var a=e.ownerDocument.createElement("canvas");return a.width=e.offsetWidth,a.height=e.offsetHeight,a},t.prototype.appendChildNode=function(e,r,n){(!J0(r)||!wbe(r)&&!r.hasAttribute(Z7)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!J0(r)||!NR(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var a=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(J0(s)&&X7(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(o){return a.appendChildNode(r,o,n)})}else this.appendChildNode(r,s,n)},t.prototype.cloneNode=function(e,r){if(K7(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&J0(e)&&(T5(e)||S2(e))){var a=this.createElementClone(e);a.style.transitionProperty="none";var s=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&T5(a)&&(this.clonedReferenceElement=a),iT(a)&&Lbe(a);var l=this.counters.parse(new fR(this.context,s)),A=this.resolvePseudoContent(e,a,i,Kg.BEFORE);kR(e)&&(r=!0),BR(e)||this.cloneChildNodes(e,a,r),A&&a.insertBefore(A,a.firstChild);var d=this.resolvePseudoContent(e,a,o,Kg.AFTER);return d&&a.appendChild(d),this.counters.pop(l),(s&&(this.options.copyStyles||S2(e))&&!Y7(e)||r)&&IE(s,a),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([a,e.scrollLeft,e.scrollTop]),(_y(e)||Sy(e))&&(_y(a)||Sy(a))&&(a.value=e.value),a}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,a){var s=this;if(n){var i=n.content,o=r.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new fR(this.context,n));var l=new gwe(this.context,n),A=o.createElement("html2canvaspseudoelement");IE(n,A),l.content.forEach(function(h){if(h.type===0)A.appendChild(o.createTextNode(h.value));else if(h.type===22){var m=o.createElement("img");m.src=h.value,m.style.opacity="1",A.appendChild(m)}else if(h.type===18){if(h.name==="attr"){var g=h.values.filter(Jn);g.length&&A.appendChild(o.createTextNode(e.getAttribute(g[0].value)||""))}else if(h.name==="counter"){var b=h.values.filter(Dm),w=b[0],_=b[1];if(w&&Jn(w)){var N=s.counters.getCounterValue(w.value),k=_&&Jn(_)?C5.parse(s.context,_.value):3;A.appendChild(o.createTextNode(bx(N,k,!1)))}}else if(h.name==="counters"){var I=h.values.filter(Dm),w=I[0],P=I[1],_=I[2];if(w&&Jn(w)){var M=s.counters.getCounterValues(w.value),D=_&&Jn(_)?C5.parse(s.context,_.value):3,C=P&&P.type===0?P.value:"",B=M.map(function(F){return bx(F,D,!1)}).join(C);A.appendChild(o.createTextNode(B))}}}else if(h.type===20)switch(h.value){case"open-quote":A.appendChild(o.createTextNode(dR(l.quotes,s.quoteDepth++,!0)));break;case"close-quote":A.appendChild(o.createTextNode(dR(l.quotes,--s.quoteDepth,!1)));break;default:A.appendChild(o.createTextNode(h.value))}}),A.className=N5+" "+k5;var d=a===Kg.BEFORE?" "+N5:" "+k5;return S2(r)?r.className.baseValue+=d:r.className+=d,A}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Kg;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Kg||(Kg={}));var _be=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(Z7,"true"),t.body.appendChild(r),r},Sbe=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},Tbe=function(t){return Promise.all([].slice.call(t.images,0).map(Sbe))},Bbe=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},Nbe=["all","d","content"],IE=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);Nbe.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},kbe=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},Ibe=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},Fbe=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},Rbe=":before",Dbe=":after",N5="___html2canvas___pseudoelement_before",k5="___html2canvas___pseudoelement_after",MR=`{
    content: "" !important;
    display: none !important;
}`,Lbe=function(t){Ube(t,"."+N5+Rbe+MR+`
         .`+k5+Dbe+MR)},Ube=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},eO=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),Mbe=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(RE(e)||Qbe(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Yi(this,void 0,void 0,function(){var r,n,a,s,i=this;return Ii(this,function(o){switch(o.label){case 0:return r=eO.isSameOrigin(e),n=!FE(e)&&this._options.useCORS===!0&&si.SUPPORT_CORS_IMAGES&&!r,a=!FE(e)&&!r&&!RE(e)&&typeof this._options.proxy=="string"&&si.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!FE(e)&&!RE(e)&&!a&&!n?[2]:(s=e,a?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,A){var d=new Image;d.onload=function(){return l(d)},d.onerror=A,(Hbe(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return l(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return A("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=e.substring(0,256);return new Promise(function(s,i){var o=si.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")s(l.response);else{var h=new FileReader;h.addEventListener("load",function(){return s(h.result)},!1),h.addEventListener("error",function(m){return i(m)},!1),h.readAsDataURL(l.response)}else i("Failed to proxy resource "+a+" with status code "+l.status)},l.onerror=i;var A=n.indexOf("?")>-1?"&":"?";if(l.open("GET",""+n+A+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),r._options.imageTimeout){var d=r._options.imageTimeout;l.timeout=d,l.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+a)}}l.send()})},t}(),Pbe=/^data:image\/svg\+xml/i,jbe=/^data:image\/.*;base64,/i,Obe=/^data:image\/.*/i,Qbe=function(t){return si.SUPPORT_SVG_DRAWING||!Vbe(t)},FE=function(t){return Obe.test(t)},Hbe=function(t){return jbe.test(t)},RE=function(t){return t.substr(0,4)==="blob"},Vbe=function(t){return t.substr(-3).toLowerCase()==="svg"||Pbe.test(t)},Gt=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),I0=function(t,e,r){return new Gt(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},qv=function(){function t(e,r,n,a){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=a}return t.prototype.subdivide=function(e,r){var n=I0(this.start,this.startControl,e),a=I0(this.startControl,this.endControl,e),s=I0(this.endControl,this.end,e),i=I0(n,a,e),o=I0(a,s,e),l=I0(i,o,e);return r?new t(this.start,n,i,l):new t(l,o,s,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Ll=function(t){return t.type===1},zbe=function(){function t(e){var r=e.styles,n=e.bounds,a=vg(r.borderTopLeftRadius,n.width,n.height),s=a[0],i=a[1],o=vg(r.borderTopRightRadius,n.width,n.height),l=o[0],A=o[1],d=vg(r.borderBottomRightRadius,n.width,n.height),h=d[0],m=d[1],g=vg(r.borderBottomLeftRadius,n.width,n.height),b=g[0],w=g[1],_=[];_.push((s+l)/n.width),_.push((b+h)/n.width),_.push((i+w)/n.height),_.push((A+m)/n.height);var N=Math.max.apply(Math,_);N>1&&(s/=N,i/=N,l/=N,A/=N,h/=N,m/=N,b/=N,w/=N);var k=n.width-l,I=n.height-m,P=n.width-h,M=n.height-w,D=r.borderTopWidth,C=r.borderRightWidth,B=r.borderBottomWidth,T=r.borderLeftWidth,O=oa(r.paddingTop,e.bounds.width),F=oa(r.paddingRight,e.bounds.width),L=oa(r.paddingBottom,e.bounds.width),Q=oa(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?va(n.left+T/3,n.top+D/3,s-T/3,i-D/3,Dn.TOP_LEFT):new Gt(n.left+T/3,n.top+D/3),this.topRightBorderDoubleOuterBox=s>0||i>0?va(n.left+k,n.top+D/3,l-C/3,A-D/3,Dn.TOP_RIGHT):new Gt(n.left+n.width-C/3,n.top+D/3),this.bottomRightBorderDoubleOuterBox=h>0||m>0?va(n.left+P,n.top+I,h-C/3,m-B/3,Dn.BOTTOM_RIGHT):new Gt(n.left+n.width-C/3,n.top+n.height-B/3),this.bottomLeftBorderDoubleOuterBox=b>0||w>0?va(n.left+T/3,n.top+M,b-T/3,w-B/3,Dn.BOTTOM_LEFT):new Gt(n.left+T/3,n.top+n.height-B/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?va(n.left+T*2/3,n.top+D*2/3,s-T*2/3,i-D*2/3,Dn.TOP_LEFT):new Gt(n.left+T*2/3,n.top+D*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?va(n.left+k,n.top+D*2/3,l-C*2/3,A-D*2/3,Dn.TOP_RIGHT):new Gt(n.left+n.width-C*2/3,n.top+D*2/3),this.bottomRightBorderDoubleInnerBox=h>0||m>0?va(n.left+P,n.top+I,h-C*2/3,m-B*2/3,Dn.BOTTOM_RIGHT):new Gt(n.left+n.width-C*2/3,n.top+n.height-B*2/3),this.bottomLeftBorderDoubleInnerBox=b>0||w>0?va(n.left+T*2/3,n.top+M,b-T*2/3,w-B*2/3,Dn.BOTTOM_LEFT):new Gt(n.left+T*2/3,n.top+n.height-B*2/3),this.topLeftBorderStroke=s>0||i>0?va(n.left+T/2,n.top+D/2,s-T/2,i-D/2,Dn.TOP_LEFT):new Gt(n.left+T/2,n.top+D/2),this.topRightBorderStroke=s>0||i>0?va(n.left+k,n.top+D/2,l-C/2,A-D/2,Dn.TOP_RIGHT):new Gt(n.left+n.width-C/2,n.top+D/2),this.bottomRightBorderStroke=h>0||m>0?va(n.left+P,n.top+I,h-C/2,m-B/2,Dn.BOTTOM_RIGHT):new Gt(n.left+n.width-C/2,n.top+n.height-B/2),this.bottomLeftBorderStroke=b>0||w>0?va(n.left+T/2,n.top+M,b-T/2,w-B/2,Dn.BOTTOM_LEFT):new Gt(n.left+T/2,n.top+n.height-B/2),this.topLeftBorderBox=s>0||i>0?va(n.left,n.top,s,i,Dn.TOP_LEFT):new Gt(n.left,n.top),this.topRightBorderBox=l>0||A>0?va(n.left+k,n.top,l,A,Dn.TOP_RIGHT):new Gt(n.left+n.width,n.top),this.bottomRightBorderBox=h>0||m>0?va(n.left+P,n.top+I,h,m,Dn.BOTTOM_RIGHT):new Gt(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=b>0||w>0?va(n.left,n.top+M,b,w,Dn.BOTTOM_LEFT):new Gt(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?va(n.left+T,n.top+D,Math.max(0,s-T),Math.max(0,i-D),Dn.TOP_LEFT):new Gt(n.left+T,n.top+D),this.topRightPaddingBox=l>0||A>0?va(n.left+Math.min(k,n.width-C),n.top+D,k>n.width+C?0:Math.max(0,l-C),Math.max(0,A-D),Dn.TOP_RIGHT):new Gt(n.left+n.width-C,n.top+D),this.bottomRightPaddingBox=h>0||m>0?va(n.left+Math.min(P,n.width-T),n.top+Math.min(I,n.height-B),Math.max(0,h-C),Math.max(0,m-B),Dn.BOTTOM_RIGHT):new Gt(n.left+n.width-C,n.top+n.height-B),this.bottomLeftPaddingBox=b>0||w>0?va(n.left+T,n.top+Math.min(M,n.height-B),Math.max(0,b-T),Math.max(0,w-B),Dn.BOTTOM_LEFT):new Gt(n.left+T,n.top+n.height-B),this.topLeftContentBox=s>0||i>0?va(n.left+T+Q,n.top+D+O,Math.max(0,s-(T+Q)),Math.max(0,i-(D+O)),Dn.TOP_LEFT):new Gt(n.left+T+Q,n.top+D+O),this.topRightContentBox=l>0||A>0?va(n.left+Math.min(k,n.width+T+Q),n.top+D+O,k>n.width+T+Q?0:l-T+Q,A-(D+O),Dn.TOP_RIGHT):new Gt(n.left+n.width-(C+F),n.top+D+O),this.bottomRightContentBox=h>0||m>0?va(n.left+Math.min(P,n.width-(T+Q)),n.top+Math.min(I,n.height+D+O),Math.max(0,h-(C+F)),m-(B+L),Dn.BOTTOM_RIGHT):new Gt(n.left+n.width-(C+F),n.top+n.height-(B+L)),this.bottomLeftContentBox=b>0||w>0?va(n.left+T+Q,n.top+M,Math.max(0,b-(T+Q)),w-(B+L),Dn.BOTTOM_LEFT):new Gt(n.left+T+Q,n.top+n.height-(B+L))}return t}(),Dn;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Dn||(Dn={}));var va=function(t,e,r,n,a){var s=4*((Math.sqrt(2)-1)/3),i=r*s,o=n*s,l=t+r,A=e+n;switch(a){case Dn.TOP_LEFT:return new qv(new Gt(t,A),new Gt(t,A-o),new Gt(l-i,e),new Gt(l,e));case Dn.TOP_RIGHT:return new qv(new Gt(t,e),new Gt(t+i,e),new Gt(l,A-o),new Gt(l,A));case Dn.BOTTOM_RIGHT:return new qv(new Gt(l,e),new Gt(l,e+o),new Gt(t+i,A),new Gt(t,A));case Dn.BOTTOM_LEFT:default:return new qv(new Gt(l,A),new Gt(l-i,A),new Gt(t,e+o),new Gt(t,e))}},Ty=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},Gbe=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},By=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},qbe=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),Kv=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),Kbe=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),Wbe=function(t){return t.type===0},tO=function(t){return t.type===1},$be=function(t){return t.type===2},PR=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},Ybe=function(t,e,r,n,a){return t.map(function(s,i){switch(i){case 0:return s.add(e,r);case 1:return s.add(e+n,r);case 2:return s.add(e+n,r+a);case 3:return s.add(e,r+a)}return s})},rO=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),nO=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new zbe(this.container),this.container.styles.opacity<1&&this.effects.push(new Kbe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new qbe(n,a,s))}if(this.container.styles.overflowX!==0){var i=Ty(this.curves),o=By(this.curves);PR(i,o)?this.effects.push(new Kv(i,6)):(this.effects.push(new Kv(i,2)),this.effects.push(new Kv(o,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(l){return!tO(l)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=Ty(n.curves),o=By(n.curves);PR(i,o)||a.unshift(new Kv(o,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(l){return Is(l.target,e)})},t}(),I5=function(t,e,r,n){t.container.elements.forEach(function(a){var s=Is(a.flags,4),i=Is(a.flags,2),o=new nO(a,t);Is(a.styles.display,2048)&&n.push(o);var l=Is(a.flags,8)?[]:n;if(s||i){var A=s||a.styles.isPositioned()?r:e,d=new rO(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var h=a.styles.zIndex.order;if(h<0){var m=0;A.negativeZIndex.some(function(b,w){return h>b.element.container.styles.zIndex.order?(m=w,!1):m>0}),A.negativeZIndex.splice(m,0,d)}else if(h>0){var g=0;A.positiveZIndex.some(function(b,w){return h>=b.element.container.styles.zIndex.order?(g=w+1,!1):g>0}),A.positiveZIndex.splice(g,0,d)}else A.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?A.nonPositionedFloats.push(d):A.nonPositionedInlineLevel.push(d);I5(o,d,s?d:r,l)}else a.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),I5(o,e,r,l);Is(a.flags,8)&&aO(a,l)})},aO=function(t,e){for(var r=t instanceof S5?t.start:1,n=t instanceof S5?t.reversed:!1,a=0;a<e.length;a++){var s=e[a];s.container instanceof Q7&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=bx(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},Xbe=function(t){var e=new nO(t,null),r=new rO(e),n=[];return I5(e,r,r,n),aO(e.container,n),r},jR=function(t,e){switch(e){case 0:return jl(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return jl(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return jl(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return jl(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},Jbe=function(t,e){switch(e){case 0:return jl(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return jl(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return jl(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return jl(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},Zbe=function(t,e){switch(e){case 0:return jl(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return jl(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return jl(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return jl(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},eCe=function(t,e){switch(e){case 0:return Wv(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Wv(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Wv(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Wv(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Wv=function(t,e){var r=[];return Ll(t)?r.push(t.subdivide(.5,!1)):r.push(t),Ll(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},jl=function(t,e,r,n){var a=[];return Ll(t)?a.push(t.subdivide(.5,!1)):a.push(t),Ll(r)?a.push(r.subdivide(.5,!0)):a.push(r),Ll(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),Ll(e)?a.push(e.subdivide(.5,!1).reverse()):a.push(e),a},sO=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},Ny=function(t){var e=t.styles,r=t.bounds,n=oa(e.paddingLeft,r.width),a=oa(e.paddingRight,r.width),s=oa(e.paddingTop,r.width),i=oa(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+a),-(e.borderTopWidth+e.borderBottomWidth+s+i))},tCe=function(t,e){return t===0?e.bounds:t===2?Ny(e):sO(e)},rCe=function(t,e){return t===0?e.bounds:t===2?Ny(e):sO(e)},DE=function(t,e,r){var n=tCe(K0(t.styles.backgroundOrigin,e),t),a=rCe(K0(t.styles.backgroundClip,e),t),s=nCe(K0(t.styles.backgroundSize,e),r,n),i=s[0],o=s[1],l=vg(K0(t.styles.backgroundPosition,e),n.width-i,n.height-o),A=aCe(K0(t.styles.backgroundRepeat,e),l,s,n,a),d=Math.round(n.left+l[0]),h=Math.round(n.top+l[1]);return[A,d,h,i,o]},F0=function(t){return Jn(t)&&t.value===pm.AUTO},$v=function(t){return typeof t=="number"},nCe=function(t,e,r){var n=e[0],a=e[1],s=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(ys(i)&&o&&ys(o))return[oa(i,r.width),oa(o,r.height)];var l=$v(s);if(Jn(i)&&(i.value===pm.CONTAIN||i.value===pm.COVER)){if($v(s)){var A=r.width/r.height;return A<s!=(i.value===pm.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=$v(n),h=$v(a),m=d||h;if(F0(i)&&(!o||F0(o))){if(d&&h)return[n,a];if(!l&&!m)return[r.width,r.height];if(m&&l){var g=d?n:a*s,b=h?a:n/s;return[g,b]}var w=d?n:r.width,_=h?a:r.height;return[w,_]}if(l){var N=0,k=0;return ys(i)?N=oa(i,r.width):ys(o)&&(k=oa(o,r.height)),F0(i)?N=k*s:(!o||F0(o))&&(k=N/s),[N,k]}var I=null,P=null;if(ys(i)?I=oa(i,r.width):o&&ys(o)&&(P=oa(o,r.height)),I!==null&&(!o||F0(o))&&(P=d&&h?I/n*a:r.height),P!==null&&F0(i)&&(I=d&&h?P/a*n:r.width),I!==null&&P!==null)return[I,P];throw new Error("Unable to calculate background-size for element")},K0=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},aCe=function(t,e,r,n,a){var s=e[0],i=e[1],o=r[0],l=r[1];switch(t){case 2:return[new Gt(Math.round(n.left),Math.round(n.top+i)),new Gt(Math.round(n.left+n.width),Math.round(n.top+i)),new Gt(Math.round(n.left+n.width),Math.round(l+n.top+i)),new Gt(Math.round(n.left),Math.round(l+n.top+i))];case 3:return[new Gt(Math.round(n.left+s),Math.round(n.top)),new Gt(Math.round(n.left+s+o),Math.round(n.top)),new Gt(Math.round(n.left+s+o),Math.round(n.height+n.top)),new Gt(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new Gt(Math.round(n.left+s),Math.round(n.top+i)),new Gt(Math.round(n.left+s+o),Math.round(n.top+i)),new Gt(Math.round(n.left+s+o),Math.round(n.top+i+l)),new Gt(Math.round(n.left+s),Math.round(n.top+i+l))];default:return[new Gt(Math.round(a.left),Math.round(a.top)),new Gt(Math.round(a.left+a.width),Math.round(a.top)),new Gt(Math.round(a.left+a.width),Math.round(a.height+a.top)),new Gt(Math.round(a.left),Math.round(a.height+a.top))]}},sCe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",OR="Hidden Text",iCe=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),a.src=sCe,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(OR)),n.appendChild(s),n.appendChild(a);var o=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(OR)),n.style.lineHeight="normal",a.style.verticalAlign="super";var l=a.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:o,middle:l}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),iO=function(){function t(e,r){this.context=e,this.options=r}return t}(),oCe=1e4,lCe=function(t){Lc(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new iCe(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},e.prototype.applyEffect=function(r){this.ctx.save(),$be(r)&&(this.ctx.globalAlpha=r.opacity),Wbe(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),tO(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return Yi(this,void 0,void 0,function(){var n;return Ii(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return Yi(this,void 0,void 0,function(){return Ii(this,function(n){switch(n.label){case 0:if(Is(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var i=aT(r.text);i.reduce(function(o,l){return s.ctx.fillText(l,o,r.bounds.top+a),o+s.ctx.measureText(l).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=fCe(r.fontFamily).join(", "),s=Zx(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},e.prototype.renderTextNode=function(r,n){return Yi(this,void 0,void 0,function(){var a,s,i,o,l,A,d,h,m=this;return Ii(this,function(g){return a=this.createFontStyle(n),s=a[0],i=a[1],o=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(i,o),A=l.baseline,d=l.middle,h=n.paintOrder,r.textBounds.forEach(function(b){h.forEach(function(w){switch(w){case 0:m.ctx.fillStyle=zs(n.color),m.renderTextWithLetterSpacing(b,n.letterSpacing,A);var _=n.textShadow;_.length&&b.text.trim().length&&(_.slice(0).reverse().forEach(function(N){m.ctx.shadowColor=zs(N.color),m.ctx.shadowOffsetX=N.offsetX.number*m.options.scale,m.ctx.shadowOffsetY=N.offsetY.number*m.options.scale,m.ctx.shadowBlur=N.blur.number,m.renderTextWithLetterSpacing(b,n.letterSpacing,A)}),m.ctx.shadowColor="",m.ctx.shadowOffsetX=0,m.ctx.shadowOffsetY=0,m.ctx.shadowBlur=0),n.textDecorationLine.length&&(m.ctx.fillStyle=zs(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(N){switch(N){case 1:m.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top+A),b.bounds.width,1);break;case 2:m.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top),b.bounds.width,1);break;case 3:m.ctx.fillRect(b.bounds.left,Math.ceil(b.bounds.top+d),b.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&b.text.trim().length&&(m.ctx.strokeStyle=zs(n.webkitTextStrokeColor),m.ctx.lineWidth=n.webkitTextStrokeWidth,m.ctx.lineJoin=window.chrome?"miter":"round",m.ctx.strokeText(b.text,b.bounds.left,b.bounds.top+A)),m.ctx.strokeStyle="",m.ctx.lineWidth=0,m.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=Ny(r),i=By(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return Yi(this,void 0,void 0,function(){var n,a,s,i,o,l,k,k,A,d,h,m,P,g,b,M,w,_,N,k,I,P,M;return Ii(this,function(D){switch(D.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,i=0,o=n.textNodes,D.label=1;case 1:return i<o.length?(l=o[i],[4,this.renderTextNode(l,s)]):[3,4];case 2:D.sent(),D.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof P7))return[3,8];D.label=5;case 5:return D.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return k=D.sent(),this.renderReplacedElement(n,a,k),[3,8];case 7:return D.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof j7&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof O7))return[3,12];D.label=9;case 9:return D.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return k=D.sent(),this.renderReplacedElement(n,a,k),[3,12];case 11:return D.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof z7&&n.tree?(A=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,A.render(n.tree)]):[3,14];case 13:d=D.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),D.label=14;case 14:if(n instanceof sT&&(h=Math.min(n.bounds.width,n.bounds.height),n.type===Cy?n.checked&&(this.ctx.save(),this.path([new Gt(n.bounds.left+h*.39363,n.bounds.top+h*.79),new Gt(n.bounds.left+h*.16,n.bounds.top+h*.5549),new Gt(n.bounds.left+h*.27347,n.bounds.top+h*.44071),new Gt(n.bounds.left+h*.39694,n.bounds.top+h*.5649),new Gt(n.bounds.left+h*.72983,n.bounds.top+h*.23),new Gt(n.bounds.left+h*.84,n.bounds.top+h*.34085),new Gt(n.bounds.left+h*.39363,n.bounds.top+h*.79)]),this.ctx.fillStyle=zs(TR),this.ctx.fill(),this.ctx.restore()):n.type===Ey&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+h/2,n.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=zs(TR),this.ctx.fill(),this.ctx.restore())),cCe(n)&&n.value.length){switch(m=this.createFontStyle(s),P=m[0],g=m[1],b=this.fontMetrics.getMetrics(P,g).baseline,this.ctx.font=P,this.ctx.fillStyle=zs(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=ACe(n.styles.textAlign),M=Ny(n),w=0,n.styles.textAlign){case 1:w+=M.width/2;break;case 2:w+=M.width;break}_=M.add(w,0,0,-M.height/2+1),this.ctx.save(),this.path([new Gt(M.left,M.top),new Gt(M.left+M.width,M.top),new Gt(M.left+M.width,M.top+M.height),new Gt(M.left,M.top+M.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new qg(n.value,_),s.letterSpacing,b),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Is(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(N=n.styles.listStyleImage,N.type!==0)return[3,18];k=void 0,I=N.url,D.label=15;case 15:return D.trys.push([15,17,,18]),[4,this.context.cache.match(I)];case 16:return k=D.sent(),this.ctx.drawImage(k,n.bounds.left-(k.width+10),n.bounds.top),[3,18];case 17:return D.sent(),this.context.logger.error("Error loading list-style-image "+I),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(P=this.createFontStyle(s)[0],this.ctx.font=P,this.ctx.fillStyle=zs(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",M=new DA(n.bounds.left,n.bounds.top+oa(n.styles.paddingTop,n.bounds.width),n.bounds.width,uR(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new qg(r.listValue,M),s.letterSpacing,uR(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),D.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return Yi(this,void 0,void 0,function(){var n,a,N,s,i,N,o,l,N,A,d,N,h,m,N,g,b,N,w,_,N;return Ii(this,function(k){switch(k.label){case 0:if(Is(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:k.sent(),n=0,a=r.negativeZIndex,k.label=2;case 2:return n<a.length?(N=a[n],[4,this.renderStack(N)]):[3,5];case 3:k.sent(),k.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:k.sent(),s=0,i=r.nonInlineLevel,k.label=7;case 7:return s<i.length?(N=i[s],[4,this.renderNode(N)]):[3,10];case 8:k.sent(),k.label=9;case 9:return s++,[3,7];case 10:o=0,l=r.nonPositionedFloats,k.label=11;case 11:return o<l.length?(N=l[o],[4,this.renderStack(N)]):[3,14];case 12:k.sent(),k.label=13;case 13:return o++,[3,11];case 14:A=0,d=r.nonPositionedInlineLevel,k.label=15;case 15:return A<d.length?(N=d[A],[4,this.renderStack(N)]):[3,18];case 16:k.sent(),k.label=17;case 17:return A++,[3,15];case 18:h=0,m=r.inlineLevel,k.label=19;case 19:return h<m.length?(N=m[h],[4,this.renderNode(N)]):[3,22];case 20:k.sent(),k.label=21;case 21:return h++,[3,19];case 22:g=0,b=r.zeroOrAutoZIndexOrTransformedOrOpacity,k.label=23;case 23:return g<b.length?(N=b[g],[4,this.renderStack(N)]):[3,26];case 24:k.sent(),k.label=25;case 25:return g++,[3,23];case 26:w=0,_=r.positiveZIndex,k.label=27;case 27:return w<_.length?(N=_[w],[4,this.renderStack(N)]):[3,30];case 28:k.sent(),k.label=29;case 29:return w++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var i=Ll(a)?a.start:a;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Ll(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},e.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},e.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,a);var l=o.getContext("2d");return l.drawImage(r,0,0,r.width,r.height,0,0,n,a),o},e.prototype.renderBackgroundImage=function(r){return Yi(this,void 0,void 0,function(){var n,a,s,i,o,l;return Ii(this,function(A){switch(A.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var h,m,g,O,Z,ee,Q,q,B,b,O,Z,ee,Q,q,w,_,N,k,I,P,M,D,C,B,T,O,F,L,Q,q,ie,Z,ee,ne,z,W,ce,j,K,X,te;return Ii(this,function(le){switch(le.label){case 0:if(d.type!==0)return[3,5];h=void 0,m=d.url,le.label=1;case 1:return le.trys.push([1,3,,4]),[4,s.context.cache.match(m)];case 2:return h=le.sent(),[3,4];case 3:return le.sent(),s.context.logger.error("Error loading background-image "+m),[3,4];case 4:return h&&(g=DE(r,n,[h.width,h.height,h.width/h.height]),O=g[0],Z=g[1],ee=g[2],Q=g[3],q=g[4],B=s.ctx.createPattern(s.resizeImage(h,Q,q),"repeat"),s.renderRepeat(O,B,Z,ee)),[3,6];case 5:W2e(d)?(b=DE(r,n,[null,null,null]),O=b[0],Z=b[1],ee=b[2],Q=b[3],q=b[4],w=V2e(d.angle,Q,q),_=w[0],N=w[1],k=w[2],I=w[3],P=w[4],M=document.createElement("canvas"),M.width=Q,M.height=q,D=M.getContext("2d"),C=D.createLinearGradient(N,I,k,P),lR(d.stops,_).forEach(function(de){return C.addColorStop(de.stop,zs(de.color))}),D.fillStyle=C,D.fillRect(0,0,Q,q),Q>0&&q>0&&(B=s.ctx.createPattern(M,"repeat"),s.renderRepeat(O,B,Z,ee))):$2e(d)&&(T=DE(r,n,[null,null,null]),O=T[0],F=T[1],L=T[2],Q=T[3],q=T[4],ie=d.position.length===0?[tT]:d.position,Z=oa(ie[0],Q),ee=oa(ie[ie.length-1],q),ne=z2e(d,Z,ee,Q,q),z=ne[0],W=ne[1],z>0&&W>0&&(ce=s.ctx.createRadialGradient(F+Z,L+ee,0,F+Z,L+ee,z),lR(d.stops,z*2).forEach(function(de){return ce.addColorStop(de.stop,zs(de.color))}),s.path(O),s.ctx.fillStyle=ce,z!==W?(j=r.bounds.left+.5*r.bounds.width,K=r.bounds.top+.5*r.bounds.height,X=W/z,te=1/X,s.ctx.save(),s.ctx.translate(j,K),s.ctx.transform(1,0,0,X,0,0),s.ctx.translate(-j,-K),s.ctx.fillRect(F,te*(L-K)+K,Q,q*te),s.ctx.restore()):s.ctx.fill())),le.label=6;case 6:return n--,[2]}})},s=this,i=0,o=r.styles.backgroundImage.slice(0).reverse(),A.label=1;case 1:return i<o.length?(l=o[i],[5,a(l)]):[3,4];case 2:A.sent(),A.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,a){return Yi(this,void 0,void 0,function(){return Ii(this,function(s){return this.path(jR(a,n)),this.ctx.fillStyle=zs(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,a,s){return Yi(this,void 0,void 0,function(){var i,o;return Ii(this,function(l){switch(l.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return l.sent(),[2];case 2:return i=Jbe(s,a),this.path(i),this.ctx.fillStyle=zs(r),this.ctx.fill(),o=Zbe(s,a),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return Yi(this,void 0,void 0,function(){var n,a,s,i,o,l,A,d,h=this;return Ii(this,function(m){switch(m.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!rf(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=uCe(K0(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),rf(n.backgroundColor)||(this.ctx.fillStyle=zs(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:m.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(g){h.ctx.save();var b=Ty(r.curves),w=g.inset?0:oCe,_=Ybe(b,-w+(g.inset?1:-1)*g.spread.number,(g.inset?1:-1)*g.spread.number,g.spread.number*(g.inset?-2:2),g.spread.number*(g.inset?-2:2));g.inset?(h.path(b),h.ctx.clip(),h.mask(_)):(h.mask(b),h.ctx.clip(),h.path(_)),h.ctx.shadowOffsetX=g.offsetX.number+w,h.ctx.shadowOffsetY=g.offsetY.number,h.ctx.shadowColor=zs(g.color),h.ctx.shadowBlur=g.blur.number,h.ctx.fillStyle=g.inset?zs(g.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),m.label=2;case 2:o=0,l=0,A=s,m.label=3;case 3:return l<A.length?(d=A[l],d.style!==0&&!rf(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return m.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,3)];case 6:return m.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,r.curves)];case 8:return m.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,r.curves)];case 10:m.sent(),m.label=11;case 11:o++,m.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,a,s,i){return Yi(this,void 0,void 0,function(){var o,l,A,d,h,m,g,b,w,_,N,k,I,P,M,D,M,D;return Ii(this,function(C){return this.ctx.save(),o=eCe(s,a),l=jR(s,a),i===2&&(this.path(l),this.ctx.clip()),Ll(l[0])?(A=l[0].start.x,d=l[0].start.y):(A=l[0].x,d=l[0].y),Ll(l[1])?(h=l[1].end.x,m=l[1].end.y):(h=l[1].x,m=l[1].y),a===0||a===2?g=Math.abs(A-h):g=Math.abs(d-m),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(l.slice(0,2)),b=n<3?n*3:n*2,w=n<3?n*2:n,i===3&&(b=n,w=n),_=!0,g<=b*2?_=!1:g<=b*2+w?(N=g/(2*b+w),b*=N,w*=N):(k=Math.floor((g+w)/(b+w)),I=(g-k*b)/(k-1),P=(g-(k+1)*b)/k,w=P<=0||Math.abs(w-I)<Math.abs(w-P)?I:P),_&&(i===3?this.ctx.setLineDash([0,b+w]):this.ctx.setLineDash([b,w])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=zs(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Ll(l[0])&&(M=l[3],D=l[0],this.ctx.beginPath(),this.formatPath([new Gt(M.end.x,M.end.y),new Gt(D.start.x,D.start.y)]),this.ctx.stroke()),Ll(l[1])&&(M=l[1],D=l[2],this.ctx.beginPath(),this.formatPath([new Gt(M.end.x,M.end.y),new Gt(D.start.x,D.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return Yi(this,void 0,void 0,function(){var n;return Ii(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=zs(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=Xbe(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(iO),cCe=function(t){return t instanceof V7||t instanceof H7?!0:t instanceof sT&&t.type!==Ey&&t.type!==Cy},uCe=function(t,e){switch(t){case 0:return Ty(e);case 2:return Gbe(e);case 1:default:return By(e)}},ACe=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},dCe=["-apple-system","system-ui"],fCe=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return dCe.indexOf(e)===-1}):t},hCe=function(t){Lc(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return e.prototype.render=function(r){return Yi(this,void 0,void 0,function(){var n,a;return Ii(this,function(s){switch(s.label){case 0:return n=_5(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,mCe(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=zs(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(iO),mCe=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},pCe=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Tv([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Tv([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Tv([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Tv([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),gCe=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new pCe({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new Mbe(this,e)}return t.instanceCount=1,t}(),oO=function(t,e){return e===void 0&&(e={}),xCe(t,e)};typeof window<"u"&&eO.setContext(window);var xCe=function(t,e){return Yi(void 0,void 0,void 0,function(){var r,n,a,s,i,o,l,A,d,h,m,g,b,w,_,N,k,I,P,M,C,D,C,B,T,O,F,L,Q,q,ie,Z,ee,ne,z,W,ce,j,K,X;return Ii(this,function(te){switch(te.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(B=e.allowTaint)!==null&&B!==void 0?B:!1,imageTimeout:(T=e.imageTimeout)!==null&&T!==void 0?T:15e3,proxy:e.proxy,useCORS:(O=e.useCORS)!==null&&O!==void 0?O:!1},s=u5({logging:(F=e.logging)!==null&&F!==void 0?F:!0,cache:e.cache},a),i={windowWidth:(L=e.windowWidth)!==null&&L!==void 0?L:n.innerWidth,windowHeight:(Q=e.windowHeight)!==null&&Q!==void 0?Q:n.innerHeight,scrollX:(q=e.scrollX)!==null&&q!==void 0?q:n.pageXOffset,scrollY:(ie=e.scrollY)!==null&&ie!==void 0?ie:n.pageYOffset},o=new DA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),l=new gCe(s,o),A=(Z=e.foreignObjectRendering)!==null&&Z!==void 0?Z:!1,d={allowTaint:(ee=e.allowTaint)!==null&&ee!==void 0?ee:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:A,copyStyles:A},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new UR(l,t,d),m=h.clonedReferenceElement,m?[4,h.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return g=te.sent(),b=iT(m)||ybe(m)?Y1e(m.ownerDocument):Ow(l,m),w=b.width,_=b.height,N=b.left,k=b.top,I=vCe(l,m,e.backgroundColor),P={canvas:e.canvas,backgroundColor:I,scale:(z=(ne=e.scale)!==null&&ne!==void 0?ne:n.devicePixelRatio)!==null&&z!==void 0?z:1,x:((W=e.x)!==null&&W!==void 0?W:0)+N,y:((ce=e.y)!==null&&ce!==void 0?ce:0)+k,width:(j=e.width)!==null&&j!==void 0?j:Math.ceil(w),height:(K=e.height)!==null&&K!==void 0?K:Math.ceil(_)},A?(l.logger.debug("Document cloned, using foreign object rendering"),C=new hCe(l,P),[4,C.render(m)]):[3,3];case 2:return M=te.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+N+","+k+" with size "+w+"x"+_+" using computed rendering"),l.logger.debug("Starting DOM parsing"),D=q7(l,m),I===D.styles.backgroundColor&&(D.styles.backgroundColor=SA.TRANSPARENT),l.logger.debug("Starting renderer for element at "+P.x+","+P.y+" with size "+P.width+"x"+P.height),C=new lCe(l,P),[4,C.render(D)];case 4:M=te.sent(),te.label=5;case 5:return(!((X=e.removeContainer)!==null&&X!==void 0)||X)&&(UR.destroy(g)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,M]}})})},vCe=function(t,e,r){var n=e.ownerDocument,a=n.documentElement?zg(t,getComputedStyle(n.documentElement).backgroundColor):SA.TRANSPARENT,s=n.body?zg(t,getComputedStyle(n.body).backgroundColor):SA.TRANSPARENT,i=typeof r=="string"?zg(t,r):r===null?SA.TRANSPARENT:4294967295;return e===n.documentElement?rf(a)?rf(s)?i:s:a:i};const yCe=Object.freeze(Object.defineProperty({__proto__:null,default:oO},Symbol.toStringTag,{value:"Module"})),Yw="proyectos_interdisciplinarios",lO="entregas_interdisciplinarias",wCe="usuarios",oT=t=>{const e=t.data();return{id:t.id,...e}},bCe=t=>{const e=an(Ar(dr,Yw),ya("nombreProyecto","asc"));return na(e,n=>{const a=n.docs.map(s=>oT(s));t(a)},n=>{console.error("Error al suscribirse a las planificaciones:",n),t([])})},CCe=async t=>{try{return(await eo(Ar(dr,Yw),t)).id}catch(e){throw console.error("Error al crear la planificación:",e),new Error("No se pudo crear la planificación.")}},QR=async(t,e)=>{try{const{id:r,...n}=e,a=hn(dr,Yw,t);await OA(a,n)}catch(r){throw console.error("Error al actualizar la planificación:",r),new Error("No se pudo actualizar la planificación.")}},ECe=async t=>{try{const e=hn(dr,Yw,t);await Bo(e)}catch(e){throw console.error("Error al eliminar la planificación:",e),new Error("No se pudo eliminar la planificación.")}},_Ce=(t,e)=>{const r=an(Ar(dr,lO),Ai("planificacionId","==",t));return na(r,a=>{const s=a.docs.map(i=>oT(i));e(s)},a=>{console.error("Error al suscribirse a las entregas:",a),e([])})},SCe=async(t,e)=>{try{const r=hn(dr,lO,t);await OA(r,{feedbackProfesor:e,fechaFeedback:Wr.fromDate(new Date)},{merge:!0})}catch(r){throw console.error("Error al guardar la retroalimentación:",r),new Error("No se pudo guardar la retroalimentación.")}},TCe=t=>{const e=an(Ar(dr,wCe));return na(e,n=>{const a=n.docs.map(s=>oT(s));t(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},BCe=({planificaciones:t,onActivityUpdate:e})=>{const[r,n]=J.useState(null),a=J.useMemo(()=>{const l=[];return t.forEach(A=>{(A.actividades||[]).forEach(d=>l.push({...d,planId:A.id,type:"activity"})),(A.fechasClave||[]).forEach(d=>l.push({id:d.id,planId:A.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:A.docentesResponsables,asignaturaPrincipal:"Milestone"}))}),l.sort((A,d)=>new Date(A.fechaInicio).getTime()-new Date(d.fechaInicio).getTime())},[t]),s=J.useCallback(l=>{if(l.type==="keyDate")return{text:"Fecha Clave",color:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-300"};const A=new Date;A.setHours(0,0,0,0);const d=new Date(`${l.fechaInicio}T00:00:00`),h=new Date(`${l.fechaFin}T00:00:00`);return h<A?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=A&&h>=A?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"}},[]),i=({name:l})=>{const A=(l||"").split(" ").map(g=>g[0]).join("").toUpperCase(),d=g=>{let b=0;for(let w=0;w<g.length;w++)b=g.charCodeAt(w)+((b<<5)-b);return b},h=["bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-300","bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300","bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-300","bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300","bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300","bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"],m=Math.abs(d(l))%h.length;return c.jsx("div",{className:`w-9 h-9 rounded-full ${h[m]} flex items-center justify-center font-bold text-sm ring-2 ring-white dark:ring-slate-800`,children:A.slice(0,2)})},o=({data:l,onClose:A,onSave:d})=>{const[h,m]=J.useState(l.activity),g=w=>{m({...h,[w.target.name]:w.target.value})},b=()=>{d(l.planId,h),A()};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-6 animate-fade-in-up",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Editar Actividad"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Nombre"}),c.jsx("input",{name:"nombre",value:h.nombre,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Responsables"}),c.jsx("input",{name:"responsables",value:h.responsables,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Inicio"}),c.jsx("input",{type:"date",name:"fechaInicio",value:h.fechaInicio,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Fin"}),c.jsx("input",{type:"date",name:"fechaFin",value:h.fechaFin,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[c.jsx("button",{onClick:A,className:"px-4 py-2 bg-slate-200 dark:bg-slate-600 rounded-md font-semibold",children:"Cancelar"}),c.jsx("button",{onClick:b,className:"px-4 py-2 bg-amber-500 text-white rounded-md font-semibold",children:"Guardar"})]})]})})};return a.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cronograma del Proyecto"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades para mostrar. Cree una planificación primero."})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-slate-200",children:"Cronograma del Proyecto"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Tarea"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Inicio"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Fin"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Asignado"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.map(l=>{const A=s(l),d=l.type==="activity";return c.jsxs("tr",{className:`${d?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>d&&n({planId:l.planId,activity:l}),children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base font-medium text-slate-900 dark:text-slate-200",children:l.nombre}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${A.color}`,children:A.text})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaInicio}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaFin}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx(i,{name:l.responsables||"N/A"})})]},l.id)})})]})}),r&&c.jsx(o,{data:r,onClose:()=>n(null),onSave:e})]})},NCe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),kCe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 21a6 6 0 006-5.197M15 12a4 4 0 110-8 4 4 0 010 8z"})}),ICe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),c.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5zm0 0v6"})]}),FCe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),RCe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),DCe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6H8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),LCe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),UCe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),HR=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Nd=({icon:t,label:e,children:r,aiButton:n})=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-slate-400 font-medium",children:[t,c.jsx("span",{children:e})]}),n]}),r]}),MCe=({initialPlan:t,onSave:e,onCancel:r})=>{const[n,a]=J.useState(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[s,i]=J.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""}),[o,l]=J.useState({nombre:"",fecha:""}),[A,d]=J.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[h,m]=J.useState(!1),[g,b]=J.useState(!1);J.useEffect(()=>{a(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[t]);const w=async M=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}M==="objetivos"?m(!0):b(!0);let D="";M==="objetivos"?D=`Basado en la siguiente descripción de un proyecto escolar interdisciplinario, genera 3 a 5 objetivos de aprendizaje claros, medibles y concisos. La respuesta debe ser solo el texto de los objetivos, formateado en una lista.
            Descripción del Proyecto: "${n.descripcionProyecto}"`:D=`Basado en la siguiente descripción y objetivos de un proyecto escolar interdisciplinario, genera una lista de 5 a 7 indicadores de logro concretos y observables que permitan evaluar el cumplimiento de los objetivos. La respuesta debe ser solo el texto de los indicadores, formateado en una lista.
            Descripción del Proyecto: "${n.descripcionProyecto}"
            Objetivos (si existen): "${n.objetivos||"Aún no definidos, genéralos a partir de la descripción."}"`;try{const L=(await(await new globalThis.GoogleGenerativeAI("").getGenerativeModel({model:"gemini-pro"}).generateContent(D)).response).text();a(Q=>({...Q,[M]:L.replace(/(\*\*|\*)/g,"")}))}catch(C){console.error(`Error al generar ${M}`,C),alert(`Hubo un error al generar los ${M}. Inténtelo de nuevo.`)}finally{M==="objetivos"?m(!1):b(!1)}},_=M=>{a(D=>({...D,[M.target.name]:M.target.value}))},N=(M,D)=>{a(C=>{const B=C[M],T=B.includes(D)?B.filter(O=>O!==D):[...B,D];return{...C,[M]:T}})},k=()=>{if(!s.nombre||!s.fechaInicio||!s.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}a(M=>({...M,actividades:[...M.actividades||[],{...s,id:crypto.randomUUID()}]})),i({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""})},I=()=>{!o.nombre||!o.fecha||(a(M=>({...M,fechasClave:[...M.fechasClave||[],{...o,id:crypto.randomUUID()}]})),l({nombre:"",fecha:""}))},P=()=>{var D;if(!A.instrucciones||!A.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}const M={id:crypto.randomUUID(),numero:(((D=n.tareas)==null?void 0:D.length)||0)+1,...A};a(C=>({...C,tareas:[...C.tareas||[],M]})),d({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return c.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[c.jsx("div",{className:"text-center mb-12",children:c.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-800 dark:text-slate-200",children:t?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})}),c.jsxs("div",{className:"space-y-6",children:[c.jsx(Nd,{icon:c.jsx(NCe,{}),label:"Nombre del Proyecto",children:c.jsx("input",{name:"nombreProyecto",value:n.nombreProyecto,onChange:_,placeholder:"Ingrese el nombre del proyecto...",className:"w-full mt-1 bg-transparent text-lg font-semibold focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Nd,{icon:c.jsx(kCe,{}),label:"Profesores",children:c.jsx("input",{name:"docentesResponsables",value:n.docentesResponsables,onChange:_,placeholder:"Ingrese nombres separados por comas...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Nd,{icon:c.jsx(ICe,{}),label:"Cursos",children:c.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 mt-2",children:ss.map(M=>c.jsx("button",{type:"button",onClick:()=>N("cursos",M),className:`w-full text-center p-2 rounded-md text-sm transition-colors ${n.cursos.includes(M)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:M},M))})}),c.jsx(Nd,{icon:c.jsx(FCe,{}),label:"Asignaturas",children:c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 mt-2",children:rl.map(M=>c.jsx("button",{type:"button",onClick:()=>N("asignaturas",M),className:`w-full text-left p-2 rounded-md text-sm transition-colors ${n.asignaturas.includes(M)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:M},M))})}),c.jsx(Nd,{icon:c.jsx(RCe,{}),label:"Descripción del Proyecto",children:c.jsx("textarea",{name:"descripcionProyecto",value:n.descripcionProyecto,onChange:_,placeholder:"Detalle aquí la metodología, el producto final esperado y el propósito del proyecto. Esta información es clave para la IA.",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[100px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Nd,{icon:c.jsx(DCe,{}),label:"Objetivos",aiButton:c.jsx("button",{type:"button",onClick:()=>w("objetivos"),disabled:!n.descripcionProyecto.trim()||h,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:c.jsx(HR,{})}),children:h?c.jsx("div",{className:"p-4 text-center",children:"Generando..."}):c.jsx("textarea",{name:"objetivos",value:n.objetivos,onChange:_,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Nd,{icon:c.jsx(LCe,{}),label:"Indicadores de Éxito",aiButton:c.jsx("button",{type:"button",onClick:()=>w("indicadoresLogro"),disabled:!n.descripcionProyecto.trim()||g,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:c.jsx(HR,{})}),children:g?c.jsx("div",{className:"p-4 text-center",children:"Generando..."}):c.jsx("textarea",{name:"indicadoresLogro",value:n.indicadoresLogro,onChange:_,placeholder:"Liste los indicadores de logro o evaluación...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Nd,{icon:c.jsx(UCe,{}),label:"Carta Gantt",children:c.jsxs("div",{className:"space-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Actividades"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-end",children:[c.jsx("input",{value:s.nombre,onChange:M=>i({...s,nombre:M.target.value}),placeholder:"Nombre",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),c.jsx("input",{type:"date",value:s.fechaInicio,onChange:M=>i({...s,fechaInicio:M.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"date",value:s.fechaFin,onChange:M=>i({...s,fechaFin:M.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:k,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:n.actividades.map(M=>c.jsx("li",{children:M.nombre},M.id))})]}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Fechas Clave (Hitos)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[c.jsx("input",{value:o.nombre,onChange:M=>l({...o,nombre:M.target.value}),placeholder:"Hito",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 col-span-1"}),c.jsx("input",{type:"date",value:o.fecha,onChange:M=>l({...o,fecha:M.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:I,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:n.fechasClave.map(M=>c.jsxs("li",{children:[M.nombre," (",M.fecha,")"]},M.id))})]}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Tareas para Estudiantes"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-end",children:[c.jsx("input",{value:A.instrucciones,onChange:M=>d({...A,instrucciones:M.target.value}),placeholder:"Instrucciones",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),c.jsx("input",{type:"date",value:A.fechaEntrega,onChange:M=>d({...A,fechaEntrega:M.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{type:"button",onClick:P,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:(n.tareas||[]).map(M=>c.jsxs("li",{children:[M.numero,". ",M.instrucciones]},M.id))})]})]})}),c.jsxs("div",{className:"flex justify-end gap-4 pt-6",children:[c.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),c.jsx("button",{onClick:()=>e(n),className:"px-8 py-3 bg-slate-800 text-white rounded-lg font-semibold hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:t?"Guardar Cambios":"Guardar Proyecto"})]})]})]})},VR=()=>{const[t,e]=J.useState([]),[r,n]=J.useState(!0),[a,s]=J.useState("list"),[i,o]=J.useState(null),[l,A]=J.useState(null),[d,h]=J.useState(null);J.useEffect(()=>{n(!0);const I=bCe(P=>{e(P),n(!1)});return()=>I()},[]);const m=J.useCallback(async(I,P)=>{const M=t.find(D=>D.id===I);if(M){const D={...M,actividades:(M.actividades||[]).map(C=>C.id===P.id?P:C)};await QR(I,D)}},[t]),g=async I=>{try{"id"in I&&I.id?await QR(I.id,I):await CCe(I),s("list"),o(null)}catch(P){console.error("Error al guardar la planificación:",P),alert("No se pudo guardar la planificación.")}},b=I=>{o(I),s("form")},w=async I=>{if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await ECe(I)}catch(P){console.error("Error al eliminar la planificación:",P),alert("No se pudo eliminar la planificación.")}},_=()=>{o(null),s("form")},N=async I=>{A(I.id);const P=new sr("p","mm","a4"),M=15,D=P.internal.pageSize.getWidth(),C=P.internal.pageSize.getHeight(),B=D-M*2;let T=M;const O=22,F=14,L=11,Q=()=>{P.setFont("helvetica","normal"),P.setFontSize(9),P.setTextColor(150),P.text("Proyecto Interdisciplinario",M,12),P.text("Liceo Industrial de Recoleta",D-M,12,{align:"right"}),P.setDrawColor(220),P.line(M,15,D-M,15)},q=z=>{T+z>C-M&&(P.addPage(),Q(),T=M+15)},ie=(z,W)=>{if(!W||Array.isArray(W)&&W.length===0||typeof W=="string"&&!W.trim())return;const ce=10;P.setFontSize(L);const j=Array.isArray(W)?W.join(", "):String(W),K=P.splitTextToSize(j,B),X=K.length*(L*.35*1.15);q(ce+X+12),P.setFont("helvetica","bold"),P.setFontSize(F),P.setTextColor(40),P.text(z,M,T),T+=6,P.setDrawColor(200),P.line(M,T,M+30,T),T+=8,P.setFont("helvetica","normal"),P.setFontSize(L),P.setTextColor(80),P.text(K,M,T),T+=X+12};Q(),T=M+20,P.setFont("helvetica","bold"),P.setFontSize(O),P.setTextColor(0);const Z=P.splitTextToSize(I.nombreProyecto,B);if(P.text(Z,M,T),T+=Z.length*(O*.4)+10,tl(P,{startY:T,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},I.docentesResponsables],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},I.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},I.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:L,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),T=P.lastAutoTable.finalY+15,ie("Descripción del Proyecto",I.descripcionProyecto),ie("Objetivos de Aprendizaje",I.objetivos),ie("Indicadores de Logro",I.indicadoresLogro),I.tareas&&I.tareas.length>0){const z=I.tareas.map(ce=>[ce.numero.toString(),ce.instrucciones,ce.fechaEntrega]),W=(z.length+1)*10+15;q(W+15),P.setFont("helvetica","bold"),P.setFontSize(F),P.setTextColor(40),P.text("Tareas para Estudiantes",M,T),T+=10,tl(P,{startY:T,head:[["#","Instrucciones","Fecha de Entrega"]],body:z,theme:"striped",headStyles:{fillColor:[52,73,94]}}),T=P.lastAutoTable.finalY+15}const ee=document.getElementById("gantt-container-vertical");if(ee)try{const W=(await oO(ee,{scale:2,backgroundColor:"#ffffff"})).toDataURL("image/png");P.addPage(),Q(),T=M+15,P.setFont("helvetica","bold"),P.setFontSize(F),P.setTextColor(40),P.text("Cronograma del Proyecto",M,T),T+=10;const ce=P.getImageProperties(W),j=B,K=ce.height*j/ce.width;P.addImage(W,"PNG",M,T,j,K)}catch(z){console.error("Error generating timeline image:",z)}const ne=P.internal.pages.length-1;for(let z=1;z<=ne;z++)P.setPage(z),P.setFont("helvetica","normal"),P.setFontSize(9),P.setTextColor(150),P.text(`Página ${z} de ${ne}`,D-M,P.internal.pageSize.getHeight()-10,{align:"right"});P.save(`Proyecto_${I.nombreProyecto.replace(/\s/g,"_")}.pdf`),A(null)},k=({plan:I,onBack:P})=>{var Q,q;const[M,D]=J.useState([]),[C,B]=J.useState([]),[T,O]=J.useState(((Q=I.tareas)==null?void 0:Q[0])||null);J.useEffect(()=>{const ie=TCe(D),Z=_Ce(I.id,B);return()=>{ie(),Z()}},[I.id]);const F=J.useMemo(()=>M.filter(ie=>ie.profile===er.ESTUDIANTE&&I.cursos.includes(ie.curso||"")).sort((ie,Z)=>ie.nombreCompleto.localeCompare(Z.nombreCompleto)),[M,I.cursos]),L=async(ie,Z)=>{try{await SCe(ie,Z)}catch(ee){console.error("Error saving feedback:",ee),alert("No se pudo guardar la retroalimentación.")}};return T?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800",children:["Entregas de Tareas: ",I.nombreProyecto]}),c.jsx("button",{onClick:P,className:"font-semibold",children:"← Volver a Proyectos"})]}),c.jsx("select",{value:T.id,onChange:ie=>{var Z;return O(((Z=I.tareas)==null?void 0:Z.find(ee=>ee.id===ie.target.value))||null)},className:"mb-4 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600",children:(q=I.tareas)==null?void 0:q.map(ie=>c.jsxs("option",{value:ie.id,children:["Tarea ",ie.numero,": ",ie.instrucciones]},ie.id))}),c.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:F.map(ie=>{const Z=C.find(ee=>ee.tareaId===T.id&&ee.estudianteId===ie.id);return c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[ie.nombreCompleto," - ",Z!=null&&Z.completada?c.jsx("span",{className:"text-green-600",children:"Entregado"}):c.jsx("span",{className:"text-red-600",children:"Pendiente"})]}),Z&&c.jsxs("div",{className:"text-sm mt-2 space-y-2",children:[Z.observacionesEstudiante&&c.jsxs("p",{children:[c.jsx("strong",{children:"Comentario:"})," ",Z.observacionesEstudiante]}),Z.enlaceUrl&&c.jsxs("p",{children:[c.jsx("strong",{children:"Enlace:"})," ",c.jsx("a",{href:Z.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:Z.enlaceUrl})]}),Z.archivoAdjunto&&c.jsxs("p",{children:[c.jsx("strong",{children:"Archivo:"})," ",c.jsx("a",{href:Z.archivoAdjunto.url,download:Z.archivoAdjunto.nombre,className:"text-blue-500 hover:underline",children:Z.archivoAdjunto.nombre})]}),c.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:Z.feedbackProfesor||"",onBlur:ee=>L(Z.id,ee.target.value),rows:2,className:"w-full mt-2 p-1 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]},ie.id)})})]}):c.jsx("div",{className:"text-center p-8",children:"Este proyecto no tiene tareas asignadas."})};return r?c.jsx("div",{className:"text-center py-10",children:"Cargando proyectos..."}):d?c.jsx(k,{plan:d,onBack:()=>h(null)}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[a==="list"?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Proyectos Interdisciplinarios"}),c.jsx("button",{onClick:_,className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),c.jsx("div",{className:"space-y-4",children:t.map(I=>c.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:I.nombreProyecto}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Cursos: ",(I.cursos||[]).join(", ")]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsx("button",{onClick:()=>h(I),className:"text-green-600 hover:text-green-800 dark:text-green-400 font-semibold text-sm",children:"Ver Entregas"}),c.jsx("button",{onClick:()=>N(I),disabled:l===I.id,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm disabled:opacity-50",children:l===I.id?"Exportando...":"Exportar PDF"}),c.jsx("button",{onClick:()=>b(I),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>w(I.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]})},I.id))})]}):c.jsx(MCe,{initialPlan:i,onSave:g,onCancel:()=>{s("list"),o(null)}}),t.length>0&&c.jsx("div",{id:"gantt-container-vertical",children:c.jsx(BCe,{planificaciones:t,onActivityUpdate:m})})]})},LE="pañolMaquinas",zR="pañolRegistros",PCe=()=>{const[t,e]=J.useState([]),[r,n]=J.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,i]=J.useState(a),[o,l]=J.useState(null),A={nombre:"",especialidad:"Industrial"},[d,h]=J.useState(A),[m,g]=J.useState(null),[b,w]=J.useState({maquinaId:"",curso:"",profesor:"",fecha:""});J.useEffect(()=>{try{const L=localStorage.getItem(LE);if(L&&JSON.parse(L).length>0)e(JSON.parse(L));else{const q=[{id:crypto.randomUUID(),nombre:"Torno",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Fresadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora MIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora TIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Torno CNC",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Elevador",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Compresor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta de motor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta hidráulica",especialidad:"Automotriz"}];e(q),localStorage.setItem(LE,JSON.stringify(q))}const Q=localStorage.getItem(zR);Q&&n(JSON.parse(Q))}catch(L){console.error("Error al cargar datos de Pañol desde localStorage",L)}},[]);const _=J.useCallback(L=>{e(L),localStorage.setItem(LE,JSON.stringify(L))},[]),N=J.useCallback(L=>{n(L),localStorage.setItem(zR,JSON.stringify(L))},[]),k=L=>{L.preventDefault(),d.nombre.trim()&&(_(m?t.map(Q=>Q.id===m.id?{...m,...d}:Q):[{...d,id:crypto.randomUUID()},...t]),h(A),g(null))},I=J.useCallback(L=>{if(r.some(Q=>Q.maquinaId===L)){alert("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");return}window.confirm("¿Eliminar esta máquina?")&&_(t.filter(Q=>Q.id!==L))},[t,r,_]),P=L=>{L.preventDefault();const Q=o||s;if(!Q.curso||!Q.profesorResponsable.trim()||!Q.maquinaId||Q.totalHoras<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}N(o?r.map(q=>q.id===o.id?o:q):[{...s,id:crypto.randomUUID()},...r]),i(a),l(null)},M=J.useCallback(L=>{window.confirm("¿Eliminar este registro de uso?")&&N(r.filter(Q=>Q.id!==L))},[r,N]),D=J.useMemo(()=>r.filter(L=>(b.maquinaId===""||L.maquinaId===b.maquinaId)&&(b.curso===""||L.curso===b.curso)&&(b.profesor===""||L.profesorResponsable.toLowerCase().includes(b.profesor.toLowerCase()))&&(b.fecha===""||L.fecha===b.fecha)).sort((L,Q)=>new Date(Q.fecha).getTime()-new Date(L.fecha).getTime()),[r,b]),C=J.useMemo(()=>new Map(t.map(L=>[L.id,L])),[t]),B=()=>{const L=D.map(ie=>{var Z,ee;return{Fecha:ie.fecha,Curso:ie.curso,Profesor:ie.profesorResponsable,Máquina:((Z=C.get(ie.maquinaId))==null?void 0:Z.nombre)||"N/A",Especialidad:((ee=C.get(ie.maquinaId))==null?void 0:ee.especialidad)||"N/A","Total Horas":ie.totalHoras,Observaciones:ie.observaciones}}),Q=Ml.json_to_sheet(L),q=Ml.book_new();Ml.book_append_sheet(q,Q,"RegistrosPañol"),K4(q,"Registros_Pañol.xlsx")},T=()=>{const L=new sr;tl(L,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:D.map(Q=>{var q,ie;return[Q.fecha,Q.curso,Q.profesorResponsable,((q=C.get(Q.maquinaId))==null?void 0:q.nombre)||"N/A",((ie=C.get(Q.maquinaId))==null?void 0:ie.especialidad)||"N/A",Q.totalHoras,Q.observaciones]}),margin:{top:20,right:10,bottom:20,left:10},didDrawPage:Q=>{L.setFontSize(10),L.setFont("helvetica","bold"),L.text("LICEO INDUSTRIAL DE RECOLETA",Q.settings.margin.left,15)}}),L.save("Registros_Pañol.pdf")},O="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",F=()=>{const L=o||s,Q=o?l:i;return c.jsxs("form",{onSubmit:P,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Fecha"}),c.jsx("input",{name:"fecha",type:"date",value:L.fecha,onChange:q=>Q({...L,fecha:q.target.value}),className:O,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Curso"}),c.jsxs("select",{name:"curso",value:L.curso,onChange:q=>Q({...L,curso:q.target.value}),className:O,required:!0,children:[c.jsx("option",{value:"",children:"Curso"}),ss.map(q=>c.jsx("option",{children:q},q))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Profesor"}),c.jsxs("select",{name:"profesorResponsable",value:L.profesorResponsable,onChange:q=>Q({...L,profesorResponsable:q.target.value}),className:O,required:!0,children:[c.jsx("option",{value:"",children:"Profesor Responsable"}),C_.map(q=>c.jsx("option",{value:q,children:q},q))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Máquina"}),c.jsxs("select",{name:"maquinaId",value:L.maquinaId,onChange:q=>Q({...L,maquinaId:q.target.value}),className:O,required:!0,children:[c.jsx("option",{value:"",children:"Máquina"}),t.map(q=>c.jsx("option",{value:q.id,children:q.nombre},q.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Total de Horas"}),c.jsx("input",{name:"totalHoras",type:"number",value:L.totalHoras,onChange:q=>Q({...L,totalHoras:Number(q.target.value)}),className:O,required:!0,min:"0.5",step:"0.5"})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),c.jsx("textarea",{name:"observaciones",value:L.observaciones,onChange:q=>Q({...L,observaciones:q.target.value}),placeholder:"Observaciones...",className:`${O}`,rows:1})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&c.jsx("button",{type:"button",onClick:()=>l(null),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:o?"Actualizar":"Registrar"})]})]})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Pañol: Registro de Uso de Máquinas"}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:o?`Editando Registro #${o.id.substring(0,4)}`:"Nuevo Registro de Uso"}),F()]}),c.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Administrar Máquinas"}),c.jsxs("form",{onSubmit:k,className:"flex gap-2 mb-4",children:[c.jsx("input",{value:d.nombre,onChange:L=>h({...d,nombre:L.target.value}),placeholder:"Nombre máquina",className:O}),c.jsxs("select",{value:d.especialidad,onChange:L=>h({...d,especialidad:L.target.value}),className:O,children:[c.jsx("option",{value:"Industrial",children:"Industrial"}),c.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),c.jsx("button",{type:"submit",className:"bg-slate-200 p-2 rounded-lg font-bold",children:m?"✓":"+"})]}),c.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.map(L=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[c.jsxs("span",{children:[L.nombre," ",c.jsxs("span",{className:"text-xs text-slate-500",children:["(",L.especialidad,")"]})]}),c.jsxs("div",{className:"space-x-2",children:[c.jsx("button",{onClick:()=>{g(L),h(L)},className:"text-blue-500",children:"✏️"}),c.jsx("button",{onClick:()=>I(L.id),className:"text-red-500",children:"🗑️"})]})]},L.id))})]}),c.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Historial de Uso"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:B,className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),c.jsx("button",{onClick:T,className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[c.jsx("input",{type:"date",value:b.fecha,onChange:L=>w({...b,fecha:L.target.value}),className:O}),c.jsxs("select",{value:b.curso,onChange:L=>w({...b,curso:L.target.value}),className:O,children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),ss.map(L=>c.jsx("option",{children:L},L))]}),c.jsxs("select",{value:b.maquinaId,onChange:L=>w({...b,maquinaId:L.target.value}),className:O,children:[c.jsx("option",{value:"",children:"Todas las Máquinas"}),t.map(L=>c.jsx("option",{value:L.id,children:L.nombre},L.id))]}),c.jsx("input",{value:b.profesor,onChange:L=>w({...b,profesor:L.target.value}),placeholder:"Buscar profesor...",className:O})]}),c.jsx("div",{className:"max-h-96 overflow-y-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Máquina"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Profesor"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Total Horas"}),c.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-500 uppercase",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:D.map(L=>{var Q;return c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:L.fecha}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((Q=C.get(L.maquinaId))==null?void 0:Q.nombre)||"N/A"}),c.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[L.profesorResponsable," (",L.curso,")"]}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:L.totalHoras}),c.jsxs("td",{className:"px-3 py-2 text-center",children:[c.jsx("button",{onClick:()=>l(L),className:"text-blue-500",children:"✏️"}),c.jsx("button",{onClick:()=>M(L.id),className:"text-red-500 ml-2",children:"🗑️"})]})]},L.id)})})]})})]})]})]})};function to(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let r=0,n;r<t.length;r++)(n=to(t[r]))!==""&&(e+=(e&&" ")+n);else for(let r in t)t[r]&&(e+=(e&&" ")+r);return e}var UE={exports:{}},ME={},PE={exports:{}},jE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GR;function jCe(){if(GR)return jE;GR=1;var t=kx();function e(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,a=t.useEffect,s=t.useLayoutEffect,i=t.useDebugValue;function o(h,m){var g=m(),b=n({inst:{value:g,getSnapshot:m}}),w=b[0].inst,_=b[1];return s(function(){w.value=g,w.getSnapshot=m,l(w)&&_({inst:w})},[h,g,m]),a(function(){return l(w)&&_({inst:w}),h(function(){l(w)&&_({inst:w})})},[h]),i(g),g}function l(h){var m=h.getSnapshot;h=h.value;try{var g=m();return!r(h,g)}catch{return!0}}function A(h,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?A:o;return jE.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,jE}var qR;function OCe(){return qR||(qR=1,PE.exports=jCe()),PE.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KR;function QCe(){if(KR)return ME;KR=1;var t=kx(),e=OCe();function r(A,d){return A===d&&(A!==0||1/A===1/d)||A!==A&&d!==d}var n=typeof Object.is=="function"?Object.is:r,a=e.useSyncExternalStore,s=t.useRef,i=t.useEffect,o=t.useMemo,l=t.useDebugValue;return ME.useSyncExternalStoreWithSelector=function(A,d,h,m,g){var b=s(null);if(b.current===null){var w={hasValue:!1,value:null};b.current=w}else w=b.current;b=o(function(){function N(D){if(!k){if(k=!0,I=D,D=m(D),g!==void 0&&w.hasValue){var C=w.value;if(g(C,D))return P=C}return P=D}if(C=P,n(I,D))return C;var B=m(D);return g!==void 0&&g(C,B)?(I=D,C):(I=D,P=B)}var k=!1,I,P,M=h===void 0?null:h;return[function(){return N(d())},M===null?void 0:function(){return N(M())}]},[d,h,m,g]);var _=a(A,b[0],b[1]);return i(function(){w.hasValue=!0,w.value=_},[_]),l(_),_},ME}var WR;function HCe(){return WR||(WR=1,UE.exports=QCe()),UE.exports}var VCe=HCe();const zCe=X5(VCe),GCe={},$R=t=>{let e;const r=new Set,n=(d,h)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const g=e;e=h??(typeof m!="object"||m===null)?m:Object.assign({},e,m),r.forEach(b=>b(e,g))}},a=()=>e,l={setState:n,getState:a,getInitialState:()=>A,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(GCe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},A=e=t(n,a,l);return l},qCe=t=>t?$R(t):$R,{useDebugValue:KCe}=At,{useSyncExternalStoreWithSelector:WCe}=zCe,$Ce=t=>t;function cO(t,e=$Ce,r){const n=WCe(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return KCe(n),n}const YR=(t,e)=>{const r=qCe(t),n=(a,s=e)=>cO(r,a,s);return Object.assign(n,r),n},YCe=(t,e)=>t?YR(t,e):YR;function zi(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[n,a]of t)if(!Object.is(a,e.get(n)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(e,n)||!Object.is(t[n],e[n]))return!1;return!0}var XCe={value:()=>{}};function Xw(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new T2(r)}function T2(t){this._=t}function JCe(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}T2.prototype=Xw.prototype={constructor:T2,on:function(t,e){var r=this._,n=JCe(t+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(t=n[s]).type)&&(a=ZCe(r[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<i;)if(a=(t=n[s]).type)r[a]=XR(r[a],t.name,e);else if(e==null)for(a in r)r[a]=XR(r[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new T2(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],n=0,a=s.length;n<a;++n)s[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],a=0,s=n.length;a<s;++a)n[a].value.apply(e,r)}};function ZCe(t,e){for(var r=0,n=t.length,a;r<n;++r)if((a=t[r]).name===e)return a.value}function XR(t,e,r){for(var n=0,a=t.length;n<a;++n)if(t[n].name===e){t[n]=XCe,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var F5="http://www.w3.org/1999/xhtml";const JR={svg:"http://www.w3.org/2000/svg",xhtml:F5,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Jw(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),JR.hasOwnProperty(e)?{space:JR[e],local:t}:t}function eEe(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===F5&&e.documentElement.namespaceURI===F5?e.createElement(t):e.createElementNS(r,t)}}function tEe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function uO(t){var e=Jw(t);return(e.local?tEe:eEe)(e)}function rEe(){}function lT(t){return t==null?rEe:function(){return this.querySelector(t)}}function nEe(t){typeof t!="function"&&(t=lT(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var s=e[a],i=s.length,o=n[a]=new Array(i),l,A,d=0;d<i;++d)(l=s[d])&&(A=t.call(l,l.__data__,d,s))&&("__data__"in l&&(A.__data__=l.__data__),o[d]=A);return new al(n,this._parents)}function aEe(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function sEe(){return[]}function AO(t){return t==null?sEe:function(){return this.querySelectorAll(t)}}function iEe(t){return function(){return aEe(t.apply(this,arguments))}}function oEe(t){typeof t=="function"?t=iEe(t):t=AO(t);for(var e=this._groups,r=e.length,n=[],a=[],s=0;s<r;++s)for(var i=e[s],o=i.length,l,A=0;A<o;++A)(l=i[A])&&(n.push(t.call(l,l.__data__,A,i)),a.push(l));return new al(n,a)}function dO(t){return function(){return this.matches(t)}}function fO(t){return function(e){return e.matches(t)}}var lEe=Array.prototype.find;function cEe(t){return function(){return lEe.call(this.children,t)}}function uEe(){return this.firstElementChild}function AEe(t){return this.select(t==null?uEe:cEe(typeof t=="function"?t:fO(t)))}var dEe=Array.prototype.filter;function fEe(){return Array.from(this.children)}function hEe(t){return function(){return dEe.call(this.children,t)}}function mEe(t){return this.selectAll(t==null?fEe:hEe(typeof t=="function"?t:fO(t)))}function pEe(t){typeof t!="function"&&(t=dO(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var s=e[a],i=s.length,o=n[a]=[],l,A=0;A<i;++A)(l=s[A])&&t.call(l,l.__data__,A,s)&&o.push(l);return new al(n,this._parents)}function hO(t){return new Array(t.length)}function gEe(){return new al(this._enter||this._groups.map(hO),this._parents)}function ky(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ky.prototype={constructor:ky,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function xEe(t){return function(){return t}}function vEe(t,e,r,n,a,s){for(var i=0,o,l=e.length,A=s.length;i<A;++i)(o=e[i])?(o.__data__=s[i],n[i]=o):r[i]=new ky(t,s[i]);for(;i<l;++i)(o=e[i])&&(a[i]=o)}function yEe(t,e,r,n,a,s,i){var o,l,A=new Map,d=e.length,h=s.length,m=new Array(d),g;for(o=0;o<d;++o)(l=e[o])&&(m[o]=g=i.call(l,l.__data__,o,e)+"",A.has(g)?a[o]=l:A.set(g,l));for(o=0;o<h;++o)g=i.call(t,s[o],o,s)+"",(l=A.get(g))?(n[o]=l,l.__data__=s[o],A.delete(g)):r[o]=new ky(t,s[o]);for(o=0;o<d;++o)(l=e[o])&&A.get(m[o])===l&&(a[o]=l)}function wEe(t){return t.__data__}function bEe(t,e){if(!arguments.length)return Array.from(this,wEe);var r=e?yEe:vEe,n=this._parents,a=this._groups;typeof t!="function"&&(t=xEe(t));for(var s=a.length,i=new Array(s),o=new Array(s),l=new Array(s),A=0;A<s;++A){var d=n[A],h=a[A],m=h.length,g=CEe(t.call(d,d&&d.__data__,A,n)),b=g.length,w=o[A]=new Array(b),_=i[A]=new Array(b),N=l[A]=new Array(m);r(d,h,w,_,N,g,e);for(var k=0,I=0,P,M;k<b;++k)if(P=w[k]){for(k>=I&&(I=k+1);!(M=_[I])&&++I<b;);P._next=M||null}}return i=new al(i,n),i._enter=o,i._exit=l,i}function CEe(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function EEe(){return new al(this._exit||this._groups.map(hO),this._parents)}function _Ee(t,e,r){var n=this.enter(),a=this,s=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),r==null?s.remove():r(s),n&&a?n.merge(a).order():a}function SEe(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,a=r.length,s=n.length,i=Math.min(a,s),o=new Array(a),l=0;l<i;++l)for(var A=r[l],d=n[l],h=A.length,m=o[l]=new Array(h),g,b=0;b<h;++b)(g=A[b]||d[b])&&(m[b]=g);for(;l<a;++l)o[l]=r[l];return new al(o,this._parents)}function TEe(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],a=n.length-1,s=n[a],i;--a>=0;)(i=n[a])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function BEe(t){t||(t=NEe);function e(h,m){return h&&m?t(h.__data__,m.__data__):!h-!m}for(var r=this._groups,n=r.length,a=new Array(n),s=0;s<n;++s){for(var i=r[s],o=i.length,l=a[s]=new Array(o),A,d=0;d<o;++d)(A=i[d])&&(l[d]=A);l.sort(e)}return new al(a,this._parents).order()}function NEe(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function kEe(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function IEe(){return Array.from(this)}function FEe(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],a=0,s=n.length;a<s;++a){var i=n[a];if(i)return i}return null}function REe(){let t=0;for(const e of this)++t;return t}function DEe(){return!this.node()}function LEe(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var a=e[r],s=0,i=a.length,o;s<i;++s)(o=a[s])&&t.call(o,o.__data__,s,a);return this}function UEe(t){return function(){this.removeAttribute(t)}}function MEe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function PEe(t,e){return function(){this.setAttribute(t,e)}}function jEe(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function OEe(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function QEe(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function HEe(t,e){var r=Jw(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?MEe:UEe:typeof e=="function"?r.local?QEe:OEe:r.local?jEe:PEe)(r,e))}function mO(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function VEe(t){return function(){this.style.removeProperty(t)}}function zEe(t,e,r){return function(){this.style.setProperty(t,e,r)}}function GEe(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function qEe(t,e,r){return arguments.length>1?this.each((e==null?VEe:typeof e=="function"?GEe:zEe)(t,e,r??"")):Lm(this.node(),t)}function Lm(t,e){return t.style.getPropertyValue(e)||mO(t).getComputedStyle(t,null).getPropertyValue(e)}function KEe(t){return function(){delete this[t]}}function WEe(t,e){return function(){this[t]=e}}function $Ee(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function YEe(t,e){return arguments.length>1?this.each((e==null?KEe:typeof e=="function"?$Ee:WEe)(t,e)):this.node()[t]}function pO(t){return t.trim().split(/^|\s+/)}function cT(t){return t.classList||new gO(t)}function gO(t){this._node=t,this._names=pO(t.getAttribute("class")||"")}gO.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function xO(t,e){for(var r=cT(t),n=-1,a=e.length;++n<a;)r.add(e[n])}function vO(t,e){for(var r=cT(t),n=-1,a=e.length;++n<a;)r.remove(e[n])}function XEe(t){return function(){xO(this,t)}}function JEe(t){return function(){vO(this,t)}}function ZEe(t,e){return function(){(e.apply(this,arguments)?xO:vO)(this,t)}}function e_e(t,e){var r=pO(t+"");if(arguments.length<2){for(var n=cT(this.node()),a=-1,s=r.length;++a<s;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof e=="function"?ZEe:e?XEe:JEe)(r,e))}function t_e(){this.textContent=""}function r_e(t){return function(){this.textContent=t}}function n_e(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function a_e(t){return arguments.length?this.each(t==null?t_e:(typeof t=="function"?n_e:r_e)(t)):this.node().textContent}function s_e(){this.innerHTML=""}function i_e(t){return function(){this.innerHTML=t}}function o_e(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function l_e(t){return arguments.length?this.each(t==null?s_e:(typeof t=="function"?o_e:i_e)(t)):this.node().innerHTML}function c_e(){this.nextSibling&&this.parentNode.appendChild(this)}function u_e(){return this.each(c_e)}function A_e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function d_e(){return this.each(A_e)}function f_e(t){var e=typeof t=="function"?t:uO(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function h_e(){return null}function m_e(t,e){var r=typeof t=="function"?t:uO(t),n=e==null?h_e:typeof e=="function"?e:lT(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function p_e(){var t=this.parentNode;t&&t.removeChild(this)}function g_e(){return this.each(p_e)}function x_e(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function v_e(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function y_e(t){return this.select(t?v_e:x_e)}function w_e(t){return arguments.length?this.property("__data__",t):this.node().__data__}function b_e(t){return function(e){t.call(this,e,this.__data__)}}function C_e(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function E_e(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,a=e.length,s;r<a;++r)s=e[r],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++n]=s;++n?e.length=n:delete this.__on}}}function __e(t,e,r){return function(){var n=this.__on,a,s=b_e(e);if(n){for(var i=0,o=n.length;i<o;++i)if((a=n[i]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=e;return}}this.addEventListener(t.type,s,r),a={type:t.type,name:t.name,value:e,listener:s,options:r},n?n.push(a):this.__on=[a]}}function S_e(t,e,r){var n=C_e(t+""),a,s=n.length,i;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,A=o.length,d;l<A;++l)for(a=0,d=o[l];a<s;++a)if((i=n[a]).type===d.type&&i.name===d.name)return d.value}return}for(o=e?__e:E_e,a=0;a<s;++a)this.each(o(n[a],e,r));return this}function yO(t,e,r){var n=mO(t),a=n.CustomEvent;typeof a=="function"?a=new a(e,r):(a=n.document.createEvent("Event"),r?(a.initEvent(e,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function T_e(t,e){return function(){return yO(this,t,e)}}function B_e(t,e){return function(){return yO(this,t,e.apply(this,arguments))}}function N_e(t,e){return this.each((typeof e=="function"?B_e:T_e)(t,e))}function*k_e(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],a=0,s=n.length,i;a<s;++a)(i=n[a])&&(yield i)}var wO=[null];function al(t,e){this._groups=t,this._parents=e}function e1(){return new al([[document.documentElement]],wO)}function I_e(){return this}al.prototype=e1.prototype={constructor:al,select:nEe,selectAll:oEe,selectChild:AEe,selectChildren:mEe,filter:pEe,data:bEe,enter:gEe,exit:EEe,join:_Ee,merge:SEe,selection:I_e,order:TEe,sort:BEe,call:kEe,nodes:IEe,node:FEe,size:REe,empty:DEe,each:LEe,attr:HEe,style:qEe,property:YEe,classed:e_e,text:a_e,html:l_e,raise:u_e,lower:d_e,append:f_e,insert:m_e,remove:g_e,clone:y_e,datum:w_e,on:S_e,dispatch:N_e,[Symbol.iterator]:k_e};function Cc(t){return typeof t=="string"?new al([[document.querySelector(t)]],[document.documentElement]):new al([[t]],wO)}function F_e(t){let e;for(;e=t.sourceEvent;)t=e;return t}function yu(t,e){if(t=F_e(t),e===void 0&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}const R_e={passive:!1},Cx={capture:!0,passive:!1};function OE(t){t.stopImmediatePropagation()}function gm(t){t.preventDefault(),t.stopImmediatePropagation()}function bO(t){var e=t.document.documentElement,r=Cc(t).on("dragstart.drag",gm,Cx);"onselectstart"in e?r.on("selectstart.drag",gm,Cx):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function CO(t,e){var r=t.document.documentElement,n=Cc(t).on("dragstart.drag",null);e&&(n.on("click.drag",gm,Cx),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Yv=t=>()=>t;function R5(t,{sourceEvent:e,subject:r,target:n,identifier:a,active:s,x:i,y:o,dx:l,dy:A,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:A,enumerable:!0,configurable:!0},_:{value:d}})}R5.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function D_e(t){return!t.ctrlKey&&!t.button}function L_e(){return this.parentNode}function U_e(t,e){return e??{x:t.x,y:t.y}}function M_e(){return navigator.maxTouchPoints||"ontouchstart"in this}function P_e(){var t=D_e,e=L_e,r=U_e,n=M_e,a={},s=Xw("start","drag","end"),i=0,o,l,A,d,h=0;function m(P){P.on("mousedown.drag",g).filter(n).on("touchstart.drag",_).on("touchmove.drag",N,R_e).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(P,M){if(!(d||!t.call(this,P,M))){var D=I(this,e.call(this,P,M),P,M,"mouse");D&&(Cc(P.view).on("mousemove.drag",b,Cx).on("mouseup.drag",w,Cx),bO(P.view),OE(P),A=!1,o=P.clientX,l=P.clientY,D("start",P))}}function b(P){if(gm(P),!A){var M=P.clientX-o,D=P.clientY-l;A=M*M+D*D>h}a.mouse("drag",P)}function w(P){Cc(P.view).on("mousemove.drag mouseup.drag",null),CO(P.view,A),gm(P),a.mouse("end",P)}function _(P,M){if(t.call(this,P,M)){var D=P.changedTouches,C=e.call(this,P,M),B=D.length,T,O;for(T=0;T<B;++T)(O=I(this,C,P,M,D[T].identifier,D[T]))&&(OE(P),O("start",P,D[T]))}}function N(P){var M=P.changedTouches,D=M.length,C,B;for(C=0;C<D;++C)(B=a[M[C].identifier])&&(gm(P),B("drag",P,M[C]))}function k(P){var M=P.changedTouches,D=M.length,C,B;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),C=0;C<D;++C)(B=a[M[C].identifier])&&(OE(P),B("end",P,M[C]))}function I(P,M,D,C,B,T){var O=s.copy(),F=yu(T||D,M),L,Q,q;if((q=r.call(P,new R5("beforestart",{sourceEvent:D,target:m,identifier:B,active:i,x:F[0],y:F[1],dx:0,dy:0,dispatch:O}),C))!=null)return L=q.x-F[0]||0,Q=q.y-F[1]||0,function ie(Z,ee,ne){var z=F,W;switch(Z){case"start":a[B]=ie,W=i++;break;case"end":delete a[B],--i;case"drag":F=yu(ne||ee,M),W=i;break}O.call(Z,P,new R5(Z,{sourceEvent:ee,subject:q,target:m,identifier:B,active:W,x:F[0]+L,y:F[1]+Q,dx:F[0]-z[0],dy:F[1]-z[1],dispatch:O}),C)}}return m.filter=function(P){return arguments.length?(t=typeof P=="function"?P:Yv(!!P),m):t},m.container=function(P){return arguments.length?(e=typeof P=="function"?P:Yv(P),m):e},m.subject=function(P){return arguments.length?(r=typeof P=="function"?P:Yv(P),m):r},m.touchable=function(P){return arguments.length?(n=typeof P=="function"?P:Yv(!!P),m):n},m.on=function(){var P=s.on.apply(s,arguments);return P===s?m:P},m.clickDistance=function(P){return arguments.length?(h=(P=+P)*P,m):Math.sqrt(h)},m}function uT(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function EO(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function t1(){}var Ex=.7,Iy=1/Ex,xm="\\s*([+-]?\\d+)\\s*",_x="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ku="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",j_e=/^#([0-9a-f]{3,8})$/,O_e=new RegExp(`^rgb\\(${xm},${xm},${xm}\\)$`),Q_e=new RegExp(`^rgb\\(${ku},${ku},${ku}\\)$`),H_e=new RegExp(`^rgba\\(${xm},${xm},${xm},${_x}\\)$`),V_e=new RegExp(`^rgba\\(${ku},${ku},${ku},${_x}\\)$`),z_e=new RegExp(`^hsl\\(${_x},${ku},${ku}\\)$`),G_e=new RegExp(`^hsla\\(${_x},${ku},${ku},${_x}\\)$`),ZR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};uT(t1,Sx,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:eD,formatHex:eD,formatHex8:q_e,formatHsl:K_e,formatRgb:tD,toString:tD});function eD(){return this.rgb().formatHex()}function q_e(){return this.rgb().formatHex8()}function K_e(){return _O(this).formatHsl()}function tD(){return this.rgb().formatRgb()}function Sx(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=j_e.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?rD(e):r===3?new bo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Xv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Xv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=O_e.exec(t))?new bo(e[1],e[2],e[3],1):(e=Q_e.exec(t))?new bo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=H_e.exec(t))?Xv(e[1],e[2],e[3],e[4]):(e=V_e.exec(t))?Xv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=z_e.exec(t))?sD(e[1],e[2]/100,e[3]/100,1):(e=G_e.exec(t))?sD(e[1],e[2]/100,e[3]/100,e[4]):ZR.hasOwnProperty(t)?rD(ZR[t]):t==="transparent"?new bo(NaN,NaN,NaN,0):null}function rD(t){return new bo(t>>16&255,t>>8&255,t&255,1)}function Xv(t,e,r,n){return n<=0&&(t=e=r=NaN),new bo(t,e,r,n)}function W_e(t){return t instanceof t1||(t=Sx(t)),t?(t=t.rgb(),new bo(t.r,t.g,t.b,t.opacity)):new bo}function D5(t,e,r,n){return arguments.length===1?W_e(t):new bo(t,e,r,n??1)}function bo(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}uT(bo,D5,EO(t1,{brighter(t){return t=t==null?Iy:Math.pow(Iy,t),new bo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ex:Math.pow(Ex,t),new bo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new bo(yh(this.r),yh(this.g),yh(this.b),Fy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:nD,formatHex:nD,formatHex8:$_e,formatRgb:aD,toString:aD}));function nD(){return`#${lh(this.r)}${lh(this.g)}${lh(this.b)}`}function $_e(){return`#${lh(this.r)}${lh(this.g)}${lh(this.b)}${lh((isNaN(this.opacity)?1:this.opacity)*255)}`}function aD(){const t=Fy(this.opacity);return`${t===1?"rgb(":"rgba("}${yh(this.r)}, ${yh(this.g)}, ${yh(this.b)}${t===1?")":`, ${t})`}`}function Fy(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function yh(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function lh(t){return t=yh(t),(t<16?"0":"")+t.toString(16)}function sD(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Ec(t,e,r,n)}function _O(t){if(t instanceof Ec)return new Ec(t.h,t.s,t.l,t.opacity);if(t instanceof t1||(t=Sx(t)),!t)return new Ec;if(t instanceof Ec)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),s=Math.max(e,r,n),i=NaN,o=s-a,l=(s+a)/2;return o?(e===s?i=(r-n)/o+(r<n)*6:r===s?i=(n-e)/o+2:i=(e-r)/o+4,o/=l<.5?s+a:2-s-a,i*=60):o=l>0&&l<1?0:i,new Ec(i,o,l,t.opacity)}function Y_e(t,e,r,n){return arguments.length===1?_O(t):new Ec(t,e,r,n??1)}function Ec(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}uT(Ec,Y_e,EO(t1,{brighter(t){return t=t==null?Iy:Math.pow(Iy,t),new Ec(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ex:Math.pow(Ex,t),new Ec(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new bo(QE(t>=240?t-240:t+120,a,n),QE(t,a,n),QE(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new Ec(iD(this.h),Jv(this.s),Jv(this.l),Fy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Fy(this.opacity);return`${t===1?"hsl(":"hsla("}${iD(this.h)}, ${Jv(this.s)*100}%, ${Jv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function iD(t){return t=(t||0)%360,t<0?t+360:t}function Jv(t){return Math.max(0,Math.min(1,t||0))}function QE(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const SO=t=>()=>t;function X_e(t,e){return function(r){return t+r*e}}function J_e(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Z_e(t){return(t=+t)==1?TO:function(e,r){return r-e?J_e(e,r,t):SO(isNaN(e)?r:e)}}function TO(t,e){var r=e-t;return r?X_e(t,r):SO(isNaN(t)?e:t)}const oD=function t(e){var r=Z_e(e);function n(a,s){var i=r((a=D5(a)).r,(s=D5(s)).r),o=r(a.g,s.g),l=r(a.b,s.b),A=TO(a.opacity,s.opacity);return function(d){return a.r=i(d),a.g=o(d),a.b=l(d),a.opacity=A(d),a+""}}return n.gamma=t,n}(1);function Dd(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var L5=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,HE=new RegExp(L5.source,"g");function e5e(t){return function(){return t}}function t5e(t){return function(e){return t(e)+""}}function r5e(t,e){var r=L5.lastIndex=HE.lastIndex=0,n,a,s,i=-1,o=[],l=[];for(t=t+"",e=e+"";(n=L5.exec(t))&&(a=HE.exec(e));)(s=a.index)>r&&(s=e.slice(r,s),o[i]?o[i]+=s:o[++i]=s),(n=n[0])===(a=a[0])?o[i]?o[i]+=a:o[++i]=a:(o[++i]=null,l.push({i,x:Dd(n,a)})),r=HE.lastIndex;return r<e.length&&(s=e.slice(r),o[i]?o[i]+=s:o[++i]=s),o.length<2?l[0]?t5e(l[0].x):e5e(e):(e=l.length,function(A){for(var d=0,h;d<e;++d)o[(h=l[d]).i]=h.x(A);return o.join("")})}var lD=180/Math.PI,U5={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function BO(t,e,r,n,a,s){var i,o,l;return(i=Math.sqrt(t*t+e*e))&&(t/=i,e/=i),(l=t*r+e*n)&&(r-=t*l,n-=e*l),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,l/=o),t*n<e*r&&(t=-t,e=-e,l=-l,i=-i),{translateX:a,translateY:s,rotate:Math.atan2(e,t)*lD,skewX:Math.atan(l)*lD,scaleX:i,scaleY:o}}var Zv;function n5e(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?U5:BO(e.a,e.b,e.c,e.d,e.e,e.f)}function a5e(t){return t==null||(Zv||(Zv=document.createElementNS("http://www.w3.org/2000/svg","g")),Zv.setAttribute("transform",t),!(t=Zv.transform.baseVal.consolidate()))?U5:(t=t.matrix,BO(t.a,t.b,t.c,t.d,t.e,t.f))}function NO(t,e,r,n){function a(A){return A.length?A.pop()+" ":""}function s(A,d,h,m,g,b){if(A!==h||d!==m){var w=g.push("translate(",null,e,null,r);b.push({i:w-4,x:Dd(A,h)},{i:w-2,x:Dd(d,m)})}else(h||m)&&g.push("translate("+h+e+m+r)}function i(A,d,h,m){A!==d?(A-d>180?d+=360:d-A>180&&(A+=360),m.push({i:h.push(a(h)+"rotate(",null,n)-2,x:Dd(A,d)})):d&&h.push(a(h)+"rotate("+d+n)}function o(A,d,h,m){A!==d?m.push({i:h.push(a(h)+"skewX(",null,n)-2,x:Dd(A,d)}):d&&h.push(a(h)+"skewX("+d+n)}function l(A,d,h,m,g,b){if(A!==h||d!==m){var w=g.push(a(g)+"scale(",null,",",null,")");b.push({i:w-4,x:Dd(A,h)},{i:w-2,x:Dd(d,m)})}else(h!==1||m!==1)&&g.push(a(g)+"scale("+h+","+m+")")}return function(A,d){var h=[],m=[];return A=t(A),d=t(d),s(A.translateX,A.translateY,d.translateX,d.translateY,h,m),i(A.rotate,d.rotate,h,m),o(A.skewX,d.skewX,h,m),l(A.scaleX,A.scaleY,d.scaleX,d.scaleY,h,m),A=d=null,function(g){for(var b=-1,w=m.length,_;++b<w;)h[(_=m[b]).i]=_.x(g);return h.join("")}}}var s5e=NO(n5e,"px, ","px)","deg)"),i5e=NO(a5e,", ",")",")"),o5e=1e-12;function cD(t){return((t=Math.exp(t))+1/t)/2}function l5e(t){return((t=Math.exp(t))-1/t)/2}function c5e(t){return((t=Math.exp(2*t))-1)/(t+1)}const u5e=function t(e,r,n){function a(s,i){var o=s[0],l=s[1],A=s[2],d=i[0],h=i[1],m=i[2],g=d-o,b=h-l,w=g*g+b*b,_,N;if(w<o5e)N=Math.log(m/A)/e,_=function(C){return[o+C*g,l+C*b,A*Math.exp(e*C*N)]};else{var k=Math.sqrt(w),I=(m*m-A*A+n*w)/(2*A*r*k),P=(m*m-A*A-n*w)/(2*m*r*k),M=Math.log(Math.sqrt(I*I+1)-I),D=Math.log(Math.sqrt(P*P+1)-P);N=(D-M)/e,_=function(C){var B=C*N,T=cD(M),O=A/(r*k)*(T*c5e(e*B+M)-l5e(M));return[o+O*g,l+O*b,A*T/cD(e*B+M)]}}return _.duration=N*1e3*e/Math.SQRT2,_}return a.rho=function(s){var i=Math.max(.001,+s),o=i*i,l=o*o;return t(i,o,l)},a}(Math.SQRT2,2,4);var Um=0,bg=0,Zp=0,kO=1e3,Ry,Cg,Dy=0,Fh=0,Zw=0,Tx=typeof performance=="object"&&performance.now?performance:Date,IO=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function AT(){return Fh||(IO(A5e),Fh=Tx.now()+Zw)}function A5e(){Fh=0}function Ly(){this._call=this._time=this._next=null}Ly.prototype=FO.prototype={constructor:Ly,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?AT():+r)+(e==null?0:+e),!this._next&&Cg!==this&&(Cg?Cg._next=this:Ry=this,Cg=this),this._call=t,this._time=r,M5()},stop:function(){this._call&&(this._call=null,this._time=1/0,M5())}};function FO(t,e,r){var n=new Ly;return n.restart(t,e,r),n}function d5e(){AT(),++Um;for(var t=Ry,e;t;)(e=Fh-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Um}function uD(){Fh=(Dy=Tx.now())+Zw,Um=bg=0;try{d5e()}finally{Um=0,h5e(),Fh=0}}function f5e(){var t=Tx.now(),e=t-Dy;e>kO&&(Zw-=e,Dy=t)}function h5e(){for(var t,e=Ry,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:Ry=r);Cg=t,M5(n)}function M5(t){if(!Um){bg&&(bg=clearTimeout(bg));var e=t-Fh;e>24?(t<1/0&&(bg=setTimeout(uD,t-Tx.now()-Zw)),Zp&&(Zp=clearInterval(Zp))):(Zp||(Dy=Tx.now(),Zp=setInterval(f5e,kO)),Um=1,IO(uD))}}function AD(t,e,r){var n=new Ly;return e=e==null?0:+e,n.restart(a=>{n.stop(),t(a+e)},e,r),n}var m5e=Xw("start","end","cancel","interrupt"),p5e=[],RO=0,dD=1,P5=2,B2=3,fD=4,j5=5,N2=6;function eb(t,e,r,n,a,s){var i=t.__transition;if(!i)t.__transition={};else if(r in i)return;g5e(t,r,{name:e,index:n,group:a,on:m5e,tween:p5e,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:RO})}function dT(t,e){var r=Uc(t,e);if(r.state>RO)throw new Error("too late; already scheduled");return r}function Mu(t,e){var r=Uc(t,e);if(r.state>B2)throw new Error("too late; already running");return r}function Uc(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function g5e(t,e,r){var n=t.__transition,a;n[e]=r,r.timer=FO(s,0,r.time);function s(A){r.state=dD,r.timer.restart(i,r.delay,r.time),r.delay<=A&&i(A-r.delay)}function i(A){var d,h,m,g;if(r.state!==dD)return l();for(d in n)if(g=n[d],g.name===r.name){if(g.state===B2)return AD(i);g.state===fD?(g.state=N2,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete n[d]):+d<e&&(g.state=N2,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete n[d])}if(AD(function(){r.state===B2&&(r.state=fD,r.timer.restart(o,r.delay,r.time),o(A))}),r.state=P5,r.on.call("start",t,t.__data__,r.index,r.group),r.state===P5){for(r.state=B2,a=new Array(m=r.tween.length),d=0,h=-1;d<m;++d)(g=r.tween[d].value.call(t,t.__data__,r.index,r.group))&&(a[++h]=g);a.length=h+1}}function o(A){for(var d=A<r.duration?r.ease.call(null,A/r.duration):(r.timer.restart(l),r.state=j5,1),h=-1,m=a.length;++h<m;)a[h].call(t,d);r.state===j5&&(r.on.call("end",t,t.__data__,r.index,r.group),l())}function l(){r.state=N2,r.timer.stop(),delete n[e];for(var A in n)return;delete t.__transition}}function k2(t,e){var r=t.__transition,n,a,s=!0,i;if(r){e=e==null?null:e+"";for(i in r){if((n=r[i]).name!==e){s=!1;continue}a=n.state>P5&&n.state<j5,n.state=N2,n.timer.stop(),n.on.call(a?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[i]}s&&delete t.__transition}}function x5e(t){return this.each(function(){k2(this,t)})}function v5e(t,e){var r,n;return function(){var a=Mu(this,t),s=a.tween;if(s!==r){n=r=s;for(var i=0,o=n.length;i<o;++i)if(n[i].name===e){n=n.slice(),n.splice(i,1);break}}a.tween=n}}function y5e(t,e,r){var n,a;if(typeof r!="function")throw new Error;return function(){var s=Mu(this,t),i=s.tween;if(i!==n){a=(n=i).slice();for(var o={name:e,value:r},l=0,A=a.length;l<A;++l)if(a[l].name===e){a[l]=o;break}l===A&&a.push(o)}s.tween=a}}function w5e(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=Uc(this.node(),r).tween,a=0,s=n.length,i;a<s;++a)if((i=n[a]).name===t)return i.value;return null}return this.each((e==null?v5e:y5e)(r,t,e))}function fT(t,e,r){var n=t._id;return t.each(function(){var a=Mu(this,n);(a.value||(a.value={}))[e]=r.apply(this,arguments)}),function(a){return Uc(a,n).value[e]}}function DO(t,e){var r;return(typeof e=="number"?Dd:e instanceof Sx?oD:(r=Sx(e))?(e=r,oD):r5e)(t,e)}function b5e(t){return function(){this.removeAttribute(t)}}function C5e(t){return function(){this.removeAttributeNS(t.space,t.local)}}function E5e(t,e,r){var n,a=r+"",s;return function(){var i=this.getAttribute(t);return i===a?null:i===n?s:s=e(n=i,r)}}function _5e(t,e,r){var n,a=r+"",s;return function(){var i=this.getAttributeNS(t.space,t.local);return i===a?null:i===n?s:s=e(n=i,r)}}function S5e(t,e,r){var n,a,s;return function(){var i,o=r(this),l;return o==null?void this.removeAttribute(t):(i=this.getAttribute(t),l=o+"",i===l?null:i===n&&l===a?s:(a=l,s=e(n=i,o)))}}function T5e(t,e,r){var n,a,s;return function(){var i,o=r(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(i=this.getAttributeNS(t.space,t.local),l=o+"",i===l?null:i===n&&l===a?s:(a=l,s=e(n=i,o)))}}function B5e(t,e){var r=Jw(t),n=r==="transform"?i5e:DO;return this.attrTween(t,typeof e=="function"?(r.local?T5e:S5e)(r,n,fT(this,"attr."+t,e)):e==null?(r.local?C5e:b5e)(r):(r.local?_5e:E5e)(r,n,e))}function N5e(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function k5e(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function I5e(t,e){var r,n;function a(){var s=e.apply(this,arguments);return s!==n&&(r=(n=s)&&k5e(t,s)),r}return a._value=e,a}function F5e(t,e){var r,n;function a(){var s=e.apply(this,arguments);return s!==n&&(r=(n=s)&&N5e(t,s)),r}return a._value=e,a}function R5e(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=Jw(t);return this.tween(r,(n.local?I5e:F5e)(n,e))}function D5e(t,e){return function(){dT(this,t).delay=+e.apply(this,arguments)}}function L5e(t,e){return e=+e,function(){dT(this,t).delay=e}}function U5e(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?D5e:L5e)(e,t)):Uc(this.node(),e).delay}function M5e(t,e){return function(){Mu(this,t).duration=+e.apply(this,arguments)}}function P5e(t,e){return e=+e,function(){Mu(this,t).duration=e}}function j5e(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?M5e:P5e)(e,t)):Uc(this.node(),e).duration}function O5e(t,e){if(typeof e!="function")throw new Error;return function(){Mu(this,t).ease=e}}function Q5e(t){var e=this._id;return arguments.length?this.each(O5e(e,t)):Uc(this.node(),e).ease}function H5e(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;Mu(this,t).ease=r}}function V5e(t){if(typeof t!="function")throw new Error;return this.each(H5e(this._id,t))}function z5e(t){typeof t!="function"&&(t=dO(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var s=e[a],i=s.length,o=n[a]=[],l,A=0;A<i;++A)(l=s[A])&&t.call(l,l.__data__,A,s)&&o.push(l);return new LA(n,this._parents,this._name,this._id)}function G5e(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,a=r.length,s=Math.min(n,a),i=new Array(n),o=0;o<s;++o)for(var l=e[o],A=r[o],d=l.length,h=i[o]=new Array(d),m,g=0;g<d;++g)(m=l[g]||A[g])&&(h[g]=m);for(;o<n;++o)i[o]=e[o];return new LA(i,this._parents,this._name,this._id)}function q5e(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function K5e(t,e,r){var n,a,s=q5e(e)?dT:Mu;return function(){var i=s(this,t),o=i.on;o!==n&&(a=(n=o).copy()).on(e,r),i.on=a}}function W5e(t,e){var r=this._id;return arguments.length<2?Uc(this.node(),r).on.on(t):this.each(K5e(r,t,e))}function $5e(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function Y5e(){return this.on("end.remove",$5e(this._id))}function X5e(t){var e=this._name,r=this._id;typeof t!="function"&&(t=lT(t));for(var n=this._groups,a=n.length,s=new Array(a),i=0;i<a;++i)for(var o=n[i],l=o.length,A=s[i]=new Array(l),d,h,m=0;m<l;++m)(d=o[m])&&(h=t.call(d,d.__data__,m,o))&&("__data__"in d&&(h.__data__=d.__data__),A[m]=h,eb(A[m],e,r,m,A,Uc(d,r)));return new LA(s,this._parents,e,r)}function J5e(t){var e=this._name,r=this._id;typeof t!="function"&&(t=AO(t));for(var n=this._groups,a=n.length,s=[],i=[],o=0;o<a;++o)for(var l=n[o],A=l.length,d,h=0;h<A;++h)if(d=l[h]){for(var m=t.call(d,d.__data__,h,l),g,b=Uc(d,r),w=0,_=m.length;w<_;++w)(g=m[w])&&eb(g,e,r,w,m,b);s.push(m),i.push(d)}return new LA(s,i,e,r)}var Z5e=e1.prototype.constructor;function eSe(){return new Z5e(this._groups,this._parents)}function tSe(t,e){var r,n,a;return function(){var s=Lm(this,t),i=(this.style.removeProperty(t),Lm(this,t));return s===i?null:s===r&&i===n?a:a=e(r=s,n=i)}}function LO(t){return function(){this.style.removeProperty(t)}}function rSe(t,e,r){var n,a=r+"",s;return function(){var i=Lm(this,t);return i===a?null:i===n?s:s=e(n=i,r)}}function nSe(t,e,r){var n,a,s;return function(){var i=Lm(this,t),o=r(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),Lm(this,t))),i===l?null:i===n&&l===a?s:(a=l,s=e(n=i,o))}}function aSe(t,e){var r,n,a,s="style."+e,i="end."+s,o;return function(){var l=Mu(this,t),A=l.on,d=l.value[s]==null?o||(o=LO(e)):void 0;(A!==r||a!==d)&&(n=(r=A).copy()).on(i,a=d),l.on=n}}function sSe(t,e,r){var n=(t+="")=="transform"?s5e:DO;return e==null?this.styleTween(t,tSe(t,n)).on("end.style."+t,LO(t)):typeof e=="function"?this.styleTween(t,nSe(t,n,fT(this,"style."+t,e))).each(aSe(this._id,t)):this.styleTween(t,rSe(t,n,e),r).on("end.style."+t,null)}function iSe(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function oSe(t,e,r){var n,a;function s(){var i=e.apply(this,arguments);return i!==a&&(n=(a=i)&&iSe(t,i,r)),n}return s._value=e,s}function lSe(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,oSe(t,e,r??""))}function cSe(t){return function(){this.textContent=t}}function uSe(t){return function(){var e=t(this);this.textContent=e??""}}function ASe(t){return this.tween("text",typeof t=="function"?uSe(fT(this,"text",t)):cSe(t==null?"":t+""))}function dSe(t){return function(e){this.textContent=t.call(this,e)}}function fSe(t){var e,r;function n(){var a=t.apply(this,arguments);return a!==r&&(e=(r=a)&&dSe(a)),e}return n._value=t,n}function hSe(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,fSe(t))}function mSe(){for(var t=this._name,e=this._id,r=UO(),n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,l,A=0;A<o;++A)if(l=i[A]){var d=Uc(l,e);eb(l,t,r,A,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new LA(n,this._parents,t,r)}function pSe(){var t,e,r=this,n=r._id,a=r.size();return new Promise(function(s,i){var o={value:i},l={value:function(){--a===0&&s()}};r.each(function(){var A=Mu(this,n),d=A.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),A.on=e}),a===0&&s()})}var gSe=0;function LA(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function UO(){return++gSe}var pA=e1.prototype;LA.prototype={constructor:LA,select:X5e,selectAll:J5e,selectChild:pA.selectChild,selectChildren:pA.selectChildren,filter:z5e,merge:G5e,selection:eSe,transition:mSe,call:pA.call,nodes:pA.nodes,node:pA.node,size:pA.size,empty:pA.empty,each:pA.each,on:W5e,attr:B5e,attrTween:R5e,style:sSe,styleTween:lSe,text:ASe,textTween:hSe,remove:Y5e,tween:w5e,delay:U5e,duration:j5e,ease:Q5e,easeVarying:V5e,end:pSe,[Symbol.iterator]:pA[Symbol.iterator]};function xSe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var vSe={time:null,delay:0,duration:250,ease:xSe};function ySe(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function wSe(t){var e,r;t instanceof LA?(e=t._id,t=t._name):(e=UO(),(r=vSe).time=AT(),t=t==null?null:t+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,l,A=0;A<o;++A)(l=i[A])&&eb(l,t,e,A,i,r||ySe(l,e));return new LA(n,this._parents,t,e)}e1.prototype.interrupt=x5e;e1.prototype.transition=wSe;const e2=t=>()=>t;function bSe(t,{sourceEvent:e,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function wA(t,e,r){this.k=t,this.x=e,this.y=r}wA.prototype={constructor:wA,scale:function(t){return t===1?this:new wA(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new wA(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var nf=new wA(1,0,0);wA.prototype;function VE(t){t.stopImmediatePropagation()}function eg(t){t.preventDefault(),t.stopImmediatePropagation()}function CSe(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function ESe(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function hD(){return this.__zoom||nf}function _Se(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function SSe(){return navigator.maxTouchPoints||"ontouchstart"in this}function TSe(t,e,r){var n=t.invertX(e[0][0])-r[0][0],a=t.invertX(e[1][0])-r[1][0],s=t.invertY(e[0][1])-r[0][1],i=t.invertY(e[1][1])-r[1][1];return t.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function BSe(){var t=CSe,e=ESe,r=TSe,n=_Se,a=SSe,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],o=250,l=u5e,A=Xw("start","zoom","end"),d,h,m,g=500,b=150,w=0,_=10;function N(q){q.property("__zoom",hD).on("wheel.zoom",B,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",O).filter(a).on("touchstart.zoom",F).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",Q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}N.transform=function(q,ie,Z,ee){var ne=q.selection?q.selection():q;ne.property("__zoom",hD),q!==ne?M(q,ie,Z,ee):ne.interrupt().each(function(){D(this,arguments).event(ee).start().zoom(null,typeof ie=="function"?ie.apply(this,arguments):ie).end()})},N.scaleBy=function(q,ie,Z,ee){N.scaleTo(q,function(){var ne=this.__zoom.k,z=typeof ie=="function"?ie.apply(this,arguments):ie;return ne*z},Z,ee)},N.scaleTo=function(q,ie,Z,ee){N.transform(q,function(){var ne=e.apply(this,arguments),z=this.__zoom,W=Z==null?P(ne):typeof Z=="function"?Z.apply(this,arguments):Z,ce=z.invert(W),j=typeof ie=="function"?ie.apply(this,arguments):ie;return r(I(k(z,j),W,ce),ne,i)},Z,ee)},N.translateBy=function(q,ie,Z,ee){N.transform(q,function(){return r(this.__zoom.translate(typeof ie=="function"?ie.apply(this,arguments):ie,typeof Z=="function"?Z.apply(this,arguments):Z),e.apply(this,arguments),i)},null,ee)},N.translateTo=function(q,ie,Z,ee,ne){N.transform(q,function(){var z=e.apply(this,arguments),W=this.__zoom,ce=ee==null?P(z):typeof ee=="function"?ee.apply(this,arguments):ee;return r(nf.translate(ce[0],ce[1]).scale(W.k).translate(typeof ie=="function"?-ie.apply(this,arguments):-ie,typeof Z=="function"?-Z.apply(this,arguments):-Z),z,i)},ee,ne)};function k(q,ie){return ie=Math.max(s[0],Math.min(s[1],ie)),ie===q.k?q:new wA(ie,q.x,q.y)}function I(q,ie,Z){var ee=ie[0]-Z[0]*q.k,ne=ie[1]-Z[1]*q.k;return ee===q.x&&ne===q.y?q:new wA(q.k,ee,ne)}function P(q){return[(+q[0][0]+ +q[1][0])/2,(+q[0][1]+ +q[1][1])/2]}function M(q,ie,Z,ee){q.on("start.zoom",function(){D(this,arguments).event(ee).start()}).on("interrupt.zoom end.zoom",function(){D(this,arguments).event(ee).end()}).tween("zoom",function(){var ne=this,z=arguments,W=D(ne,z).event(ee),ce=e.apply(ne,z),j=Z==null?P(ce):typeof Z=="function"?Z.apply(ne,z):Z,K=Math.max(ce[1][0]-ce[0][0],ce[1][1]-ce[0][1]),X=ne.__zoom,te=typeof ie=="function"?ie.apply(ne,z):ie,le=l(X.invert(j).concat(K/X.k),te.invert(j).concat(K/te.k));return function(de){if(de===1)de=te;else{var me=le(de),ge=K/me[2];de=new wA(ge,j[0]-me[0]*ge,j[1]-me[1]*ge)}W.zoom(null,de)}})}function D(q,ie,Z){return!Z&&q.__zooming||new C(q,ie)}function C(q,ie){this.that=q,this.args=ie,this.active=0,this.sourceEvent=null,this.extent=e.apply(q,ie),this.taps=0}C.prototype={event:function(q){return q&&(this.sourceEvent=q),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(q,ie){return this.mouse&&q!=="mouse"&&(this.mouse[1]=ie.invert(this.mouse[0])),this.touch0&&q!=="touch"&&(this.touch0[1]=ie.invert(this.touch0[0])),this.touch1&&q!=="touch"&&(this.touch1[1]=ie.invert(this.touch1[0])),this.that.__zoom=ie,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(q){var ie=Cc(this.that).datum();A.call(q,this.that,new bSe(q,{sourceEvent:this.sourceEvent,target:N,transform:this.that.__zoom,dispatch:A}),ie)}};function B(q,...ie){if(!t.apply(this,arguments))return;var Z=D(this,ie).event(q),ee=this.__zoom,ne=Math.max(s[0],Math.min(s[1],ee.k*Math.pow(2,n.apply(this,arguments)))),z=yu(q);if(Z.wheel)(Z.mouse[0][0]!==z[0]||Z.mouse[0][1]!==z[1])&&(Z.mouse[1]=ee.invert(Z.mouse[0]=z)),clearTimeout(Z.wheel);else{if(ee.k===ne)return;Z.mouse=[z,ee.invert(z)],k2(this),Z.start()}eg(q),Z.wheel=setTimeout(W,b),Z.zoom("mouse",r(I(k(ee,ne),Z.mouse[0],Z.mouse[1]),Z.extent,i));function W(){Z.wheel=null,Z.end()}}function T(q,...ie){if(m||!t.apply(this,arguments))return;var Z=q.currentTarget,ee=D(this,ie,!0).event(q),ne=Cc(q.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",K,!0),z=yu(q,Z),W=q.clientX,ce=q.clientY;bO(q.view),VE(q),ee.mouse=[z,this.__zoom.invert(z)],k2(this),ee.start();function j(X){if(eg(X),!ee.moved){var te=X.clientX-W,le=X.clientY-ce;ee.moved=te*te+le*le>w}ee.event(X).zoom("mouse",r(I(ee.that.__zoom,ee.mouse[0]=yu(X,Z),ee.mouse[1]),ee.extent,i))}function K(X){ne.on("mousemove.zoom mouseup.zoom",null),CO(X.view,ee.moved),eg(X),ee.event(X).end()}}function O(q,...ie){if(t.apply(this,arguments)){var Z=this.__zoom,ee=yu(q.changedTouches?q.changedTouches[0]:q,this),ne=Z.invert(ee),z=Z.k*(q.shiftKey?.5:2),W=r(I(k(Z,z),ee,ne),e.apply(this,ie),i);eg(q),o>0?Cc(this).transition().duration(o).call(M,W,ee,q):Cc(this).call(N.transform,W,ee,q)}}function F(q,...ie){if(t.apply(this,arguments)){var Z=q.touches,ee=Z.length,ne=D(this,ie,q.changedTouches.length===ee).event(q),z,W,ce,j;for(VE(q),W=0;W<ee;++W)ce=Z[W],j=yu(ce,this),j=[j,this.__zoom.invert(j),ce.identifier],ne.touch0?!ne.touch1&&ne.touch0[2]!==j[2]&&(ne.touch1=j,ne.taps=0):(ne.touch0=j,z=!0,ne.taps=1+!!d);d&&(d=clearTimeout(d)),z&&(ne.taps<2&&(h=j[0],d=setTimeout(function(){d=null},g)),k2(this),ne.start())}}function L(q,...ie){if(this.__zooming){var Z=D(this,ie).event(q),ee=q.changedTouches,ne=ee.length,z,W,ce,j;for(eg(q),z=0;z<ne;++z)W=ee[z],ce=yu(W,this),Z.touch0&&Z.touch0[2]===W.identifier?Z.touch0[0]=ce:Z.touch1&&Z.touch1[2]===W.identifier&&(Z.touch1[0]=ce);if(W=Z.that.__zoom,Z.touch1){var K=Z.touch0[0],X=Z.touch0[1],te=Z.touch1[0],le=Z.touch1[1],de=(de=te[0]-K[0])*de+(de=te[1]-K[1])*de,me=(me=le[0]-X[0])*me+(me=le[1]-X[1])*me;W=k(W,Math.sqrt(de/me)),ce=[(K[0]+te[0])/2,(K[1]+te[1])/2],j=[(X[0]+le[0])/2,(X[1]+le[1])/2]}else if(Z.touch0)ce=Z.touch0[0],j=Z.touch0[1];else return;Z.zoom("touch",r(I(W,ce,j),Z.extent,i))}}function Q(q,...ie){if(this.__zooming){var Z=D(this,ie).event(q),ee=q.changedTouches,ne=ee.length,z,W;for(VE(q),m&&clearTimeout(m),m=setTimeout(function(){m=null},g),z=0;z<ne;++z)W=ee[z],Z.touch0&&Z.touch0[2]===W.identifier?delete Z.touch0:Z.touch1&&Z.touch1[2]===W.identifier&&delete Z.touch1;if(Z.touch1&&!Z.touch0&&(Z.touch0=Z.touch1,delete Z.touch1),Z.touch0)Z.touch0[1]=this.__zoom.invert(Z.touch0[0]);else if(Z.end(),Z.taps===2&&(W=yu(W,this),Math.hypot(h[0]-W[0],h[1]-W[1])<_)){var ce=Cc(this).on("dblclick.zoom");ce&&ce.apply(this,arguments)}}}return N.wheelDelta=function(q){return arguments.length?(n=typeof q=="function"?q:e2(+q),N):n},N.filter=function(q){return arguments.length?(t=typeof q=="function"?q:e2(!!q),N):t},N.touchable=function(q){return arguments.length?(a=typeof q=="function"?q:e2(!!q),N):a},N.extent=function(q){return arguments.length?(e=typeof q=="function"?q:e2([[+q[0][0],+q[0][1]],[+q[1][0],+q[1][1]]]),N):e},N.scaleExtent=function(q){return arguments.length?(s[0]=+q[0],s[1]=+q[1],N):[s[0],s[1]]},N.translateExtent=function(q){return arguments.length?(i[0][0]=+q[0][0],i[1][0]=+q[1][0],i[0][1]=+q[0][1],i[1][1]=+q[1][1],N):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},N.constrain=function(q){return arguments.length?(r=q,N):r},N.duration=function(q){return arguments.length?(o=+q,N):o},N.interpolate=function(q){return arguments.length?(l=q,N):l},N.on=function(){var q=A.on.apply(A,arguments);return q===A?N:q},N.clickDistance=function(q){return arguments.length?(w=(q=+q)*q,N):Math.sqrt(w)},N.tapDistance=function(q){return arguments.length?(_=+q,N):_},N}XD();const tb=J.createContext(null),NSe=tb.Provider,UA={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},MO=UA.error001();function ka(t,e){const r=J.useContext(tb);if(r===null)throw new Error(MO);return cO(r,t,e)}const Ys=()=>{const t=J.useContext(tb);if(t===null)throw new Error(MO);return J.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},kSe=t=>t.userSelectionActive?"none":"all";function PO({position:t,children:e,className:r,style:n,...a}){const s=ka(kSe),i=`${t}`.split("-");return At.createElement("div",{className:to(["react-flow__panel",r,...i]),style:{...n,pointerEvents:s},...a},e)}function ISe({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:At.createElement(PO,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},At.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const FSe=({x:t,y:e,label:r,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:l,className:A,...d})=>{const h=J.useRef(null),[m,g]=J.useState({x:0,y:0,width:0,height:0}),b=to(["react-flow__edge-textwrapper",A]);return J.useEffect(()=>{if(h.current){const w=h.current.getBBox();g({x:w.x,y:w.y,width:w.width,height:w.height})}},[r]),typeof r>"u"||!r?null:At.createElement("g",{transform:`translate(${t-m.width/2} ${e-m.height/2})`,className:b,visibility:m.width?"visible":"hidden",...d},a&&At.createElement("rect",{width:m.width+2*i[0],x:-i[0],y:-i[1],height:m.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:o,ry:o}),At.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:h,style:n},r),l)};var RSe=J.memo(FSe);const hT=t=>({width:t.offsetWidth,height:t.offsetHeight}),Mm=(t,e=0,r=1)=>Math.min(Math.max(t,e),r),mT=(t={x:0,y:0},e)=>({x:Mm(t.x,e[0][0],e[1][0]),y:Mm(t.y,e[0][1],e[1][1])}),mD=(t,e,r)=>t<e?Mm(Math.abs(t-e),1,50)/50:t>r?-Mm(Math.abs(t-r),1,50)/50:0,jO=(t,e)=>{const r=mD(t.x,35,e.width-35)*20,n=mD(t.y,35,e.height-35)*20;return[r,n]},OO=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},DSe=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),pT=({x:t,y:e,width:r,height:n})=>({x:t,y:e,x2:t+r,y2:e+n}),LSe=({x:t,y:e,x2:r,y2:n})=>({x:t,y:e,width:r-t,height:n-e}),pD=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),O5=(t,e)=>{const r=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),n=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(r*n)},USe=t=>Ol(t.width)&&Ol(t.height)&&Ol(t.x)&&Ol(t.y),Ol=t=>!isNaN(t)&&isFinite(t),Ha=Symbol.for("internals"),QO=["Enter"," ","Escape"],MSe=(t,e)=>{},PSe=t=>"nativeEvent"in t;function Q5(t){var a,s;const e=PSe(t)?t.nativeEvent:t,r=((s=(a=e.composedPath)==null?void 0:a.call(e))==null?void 0:s[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const HO=t=>"clientX"in t,af=(t,e)=>{var s,i;const r=HO(t),n=r?t.clientX:(s=t.touches)==null?void 0:s[0].clientX,a=r?t.clientY:(i=t.touches)==null?void 0:i[0].clientY;return{x:n-((e==null?void 0:e.left)??0),y:a-((e==null?void 0:e.top)??0)}},Uy=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},r1=({id:t,path:e,labelX:r,labelY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:A,style:d,markerEnd:h,markerStart:m,interactionWidth:g=20})=>At.createElement(At.Fragment,null,At.createElement("path",{id:t,style:d,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:m}),g&&At.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),a&&Ol(r)&&Ol(n)?At.createElement(RSe,{x:r,y:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:A}):null);r1.displayName="BaseEdge";function tg(t,e,r){return r===void 0?r:n=>{const a=e().edges.find(s=>s.id===t);a&&r(n,{...a})}}function VO({sourceX:t,sourceY:e,targetX:r,targetY:n}){const a=Math.abs(r-t)/2,s=r<t?r+a:r-a,i=Math.abs(n-e)/2,o=n<e?n+i:n-i;return[s,o,a,i]}function zO({sourceX:t,sourceY:e,targetX:r,targetY:n,sourceControlX:a,sourceControlY:s,targetControlX:i,targetControlY:o}){const l=t*.125+a*.375+i*.375+r*.125,A=e*.125+s*.375+o*.375+n*.125,d=Math.abs(l-t),h=Math.abs(A-e);return[l,A,d,h]}var Rh;(function(t){t.Strict="strict",t.Loose="loose"})(Rh||(Rh={}));var ch;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(ch||(ch={}));var Bx;(function(t){t.Partial="partial",t.Full="full"})(Bx||(Bx={}));var Qd;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Qd||(Qd={}));var My;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(My||(My={}));var ir;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(ir||(ir={}));function gD({pos:t,x1:e,y1:r,x2:n,y2:a}){return t===ir.Left||t===ir.Right?[.5*(e+n),r]:[e,.5*(r+a)]}function GO({sourceX:t,sourceY:e,sourcePosition:r=ir.Bottom,targetX:n,targetY:a,targetPosition:s=ir.Top}){const[i,o]=gD({pos:r,x1:t,y1:e,x2:n,y2:a}),[l,A]=gD({pos:s,x1:n,y1:a,x2:t,y2:e}),[d,h,m,g]=zO({sourceX:t,sourceY:e,targetX:n,targetY:a,sourceControlX:i,sourceControlY:o,targetControlX:l,targetControlY:A});return[`M${t},${e} C${i},${o} ${l},${A} ${n},${a}`,d,h,m,g]}const gT=J.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,sourcePosition:a=ir.Bottom,targetPosition:s=ir.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:A,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,interactionWidth:w})=>{const[_,N,k]=GO({sourceX:t,sourceY:e,sourcePosition:a,targetX:r,targetY:n,targetPosition:s});return At.createElement(r1,{path:_,labelX:N,labelY:k,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:A,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,interactionWidth:w})});gT.displayName="SimpleBezierEdge";const xD={[ir.Left]:{x:-1,y:0},[ir.Right]:{x:1,y:0},[ir.Top]:{x:0,y:-1},[ir.Bottom]:{x:0,y:1}},jSe=({source:t,sourcePosition:e=ir.Bottom,target:r})=>e===ir.Left||e===ir.Right?t.x<r.x?{x:1,y:0}:{x:-1,y:0}:t.y<r.y?{x:0,y:1}:{x:0,y:-1},vD=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function OSe({source:t,sourcePosition:e=ir.Bottom,target:r,targetPosition:n=ir.Top,center:a,offset:s}){const i=xD[e],o=xD[n],l={x:t.x+i.x*s,y:t.y+i.y*s},A={x:r.x+o.x*s,y:r.y+o.y*s},d=jSe({source:l,sourcePosition:e,target:A}),h=d.x!==0?"x":"y",m=d[h];let g=[],b,w;const _={x:0,y:0},N={x:0,y:0},[k,I,P,M]=VO({sourceX:t.x,sourceY:t.y,targetX:r.x,targetY:r.y});if(i[h]*o[h]===-1){b=a.x??k,w=a.y??I;const C=[{x:b,y:l.y},{x:b,y:A.y}],B=[{x:l.x,y:w},{x:A.x,y:w}];i[h]===m?g=h==="x"?C:B:g=h==="x"?B:C}else{const C=[{x:l.x,y:A.y}],B=[{x:A.x,y:l.y}];if(h==="x"?g=i.x===m?B:C:g=i.y===m?C:B,e===n){const Q=Math.abs(t[h]-r[h]);if(Q<=s){const q=Math.min(s-1,s-Q);i[h]===m?_[h]=(l[h]>t[h]?-1:1)*q:N[h]=(A[h]>r[h]?-1:1)*q}}if(e!==n){const Q=h==="x"?"y":"x",q=i[h]===o[Q],ie=l[Q]>A[Q],Z=l[Q]<A[Q];(i[h]===1&&(!q&&ie||q&&Z)||i[h]!==1&&(!q&&Z||q&&ie))&&(g=h==="x"?C:B)}const T={x:l.x+_.x,y:l.y+_.y},O={x:A.x+N.x,y:A.y+N.y},F=Math.max(Math.abs(T.x-g[0].x),Math.abs(O.x-g[0].x)),L=Math.max(Math.abs(T.y-g[0].y),Math.abs(O.y-g[0].y));F>=L?(b=(T.x+O.x)/2,w=g[0].y):(b=g[0].x,w=(T.y+O.y)/2)}return[[t,{x:l.x+_.x,y:l.y+_.y},...g,{x:A.x+N.x,y:A.y+N.y},r],b,w,P,M]}function QSe(t,e,r,n){const a=Math.min(vD(t,e)/2,vD(e,r)/2,n),{x:s,y:i}=e;if(t.x===s&&s===r.x||t.y===i&&i===r.y)return`L${s} ${i}`;if(t.y===i){const A=t.x<r.x?-1:1,d=t.y<r.y?1:-1;return`L ${s+a*A},${i}Q ${s},${i} ${s},${i+a*d}`}const o=t.x<r.x?1:-1,l=t.y<r.y?-1:1;return`L ${s},${i+a*l}Q ${s},${i} ${s+a*o},${i}`}function H5({sourceX:t,sourceY:e,sourcePosition:r=ir.Bottom,targetX:n,targetY:a,targetPosition:s=ir.Top,borderRadius:i=5,centerX:o,centerY:l,offset:A=20}){const[d,h,m,g,b]=OSe({source:{x:t,y:e},sourcePosition:r,target:{x:n,y:a},targetPosition:s,center:{x:o,y:l},offset:A});return[d.reduce((_,N,k)=>{let I="";return k>0&&k<d.length-1?I=QSe(d[k-1],N,d[k+1],i):I=`${k===0?"M":"L"}${N.x} ${N.y}`,_+=I,_},""),h,m,g,b]}const rb=J.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:A,style:d,sourcePosition:h=ir.Bottom,targetPosition:m=ir.Top,markerEnd:g,markerStart:b,pathOptions:w,interactionWidth:_})=>{const[N,k,I]=H5({sourceX:t,sourceY:e,sourcePosition:h,targetX:r,targetY:n,targetPosition:m,borderRadius:w==null?void 0:w.borderRadius,offset:w==null?void 0:w.offset});return At.createElement(r1,{path:N,labelX:k,labelY:I,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:A,style:d,markerEnd:g,markerStart:b,interactionWidth:_})});rb.displayName="SmoothStepEdge";const xT=J.memo(t=>{var e;return At.createElement(rb,{...t,pathOptions:J.useMemo(()=>{var r;return{borderRadius:0,offset:(r=t.pathOptions)==null?void 0:r.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});xT.displayName="StepEdge";function HSe({sourceX:t,sourceY:e,targetX:r,targetY:n}){const[a,s,i,o]=VO({sourceX:t,sourceY:e,targetX:r,targetY:n});return[`M ${t},${e}L ${r},${n}`,a,s,i,o]}const vT=J.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:A,style:d,markerEnd:h,markerStart:m,interactionWidth:g})=>{const[b,w,_]=HSe({sourceX:t,sourceY:e,targetX:r,targetY:n});return At.createElement(r1,{path:b,labelX:w,labelY:_,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:A,style:d,markerEnd:h,markerStart:m,interactionWidth:g})});vT.displayName="StraightEdge";function t2(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function yD({pos:t,x1:e,y1:r,x2:n,y2:a,c:s}){switch(t){case ir.Left:return[e-t2(e-n,s),r];case ir.Right:return[e+t2(n-e,s),r];case ir.Top:return[e,r-t2(r-a,s)];case ir.Bottom:return[e,r+t2(a-r,s)]}}function qO({sourceX:t,sourceY:e,sourcePosition:r=ir.Bottom,targetX:n,targetY:a,targetPosition:s=ir.Top,curvature:i=.25}){const[o,l]=yD({pos:r,x1:t,y1:e,x2:n,y2:a,c:i}),[A,d]=yD({pos:s,x1:n,y1:a,x2:t,y2:e,c:i}),[h,m,g,b]=zO({sourceX:t,sourceY:e,targetX:n,targetY:a,sourceControlX:o,sourceControlY:l,targetControlX:A,targetControlY:d});return[`M${t},${e} C${o},${l} ${A},${d} ${n},${a}`,h,m,g,b]}const Py=J.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,sourcePosition:a=ir.Bottom,targetPosition:s=ir.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:A,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,pathOptions:w,interactionWidth:_})=>{const[N,k,I]=qO({sourceX:t,sourceY:e,sourcePosition:a,targetX:r,targetY:n,targetPosition:s,curvature:w==null?void 0:w.curvature});return At.createElement(r1,{path:N,labelX:k,labelY:I,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:A,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,interactionWidth:_})});Py.displayName="BezierEdge";const yT=J.createContext(null),VSe=yT.Provider;yT.Consumer;const zSe=()=>J.useContext(yT),GSe=t=>"id"in t&&"source"in t&&"target"in t,qSe=({source:t,sourceHandle:e,target:r,targetHandle:n})=>`reactflow__edge-${t}${e||""}-${r}${n||""}`,V5=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(n=>`${n}=${t[n]}`).join("&")}`,KSe=(t,e)=>e.some(r=>r.source===t.source&&r.target===t.target&&(r.sourceHandle===t.sourceHandle||!r.sourceHandle&&!t.sourceHandle)&&(r.targetHandle===t.targetHandle||!r.targetHandle&&!t.targetHandle)),WSe=(t,e)=>{if(!t.source||!t.target)return e;let r;return GSe(t)?r={...t}:r={...t,id:qSe(t)},KSe(r,e)?e:e.concat(r)},z5=({x:t,y:e},[r,n,a],s,[i,o])=>{const l={x:(t-r)/a,y:(e-n)/a};return s?{x:i*Math.round(l.x/i),y:o*Math.round(l.y/o)}:l},KO=({x:t,y:e},[r,n,a])=>({x:t*a+r,y:e*a+n}),vm=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(t.width??0)*e[0],n=(t.height??0)*e[1],a={x:t.position.x-r,y:t.position.y-n};return{...a,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-r,y:t.positionAbsolute.y-n}:a}},wT=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const r=t.reduce((n,a)=>{const{x:s,y:i}=vm(a,e).positionAbsolute;return DSe(n,pT({x:s,y:i,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return LSe(r)},WO=(t,e,[r,n,a]=[0,0,1],s=!1,i=!1,o=[0,0])=>{const l={x:(e.x-r)/a,y:(e.y-n)/a,width:e.width/a,height:e.height/a},A=[];return t.forEach(d=>{const{width:h,height:m,selectable:g=!0,hidden:b=!1}=d;if(i&&!g||b)return!1;const{positionAbsolute:w}=vm(d,o),_={x:w.x,y:w.y,width:h||0,height:m||0},N=O5(l,_),k=typeof h>"u"||typeof m>"u"||h===null||m===null,I=s&&N>0,P=(h||0)*(m||0);(k||I||N>=P||d.dragging)&&A.push(d)}),A},$O=(t,e)=>{const r=t.map(n=>n.id);return e.filter(n=>r.includes(n.source)||r.includes(n.target))},YO=(t,e,r,n,a,s=.1)=>{const i=e/(t.width*(1+s)),o=r/(t.height*(1+s)),l=Math.min(i,o),A=Mm(l,n,a),d=t.x+t.width/2,h=t.y+t.height/2,m=e/2-d*A,g=r/2-h*A;return{x:m,y:g,zoom:A}},eh=(t,e=0)=>t.transition().duration(e);function wD(t,e,r,n){return(e[r]||[]).reduce((a,s)=>{var i,o;return`${t.id}-${s.id}-${r}`!==n&&a.push({id:s.id||null,type:r,nodeId:t.id,x:(((i=t.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((o=t.positionAbsolute)==null?void 0:o.y)??0)+s.y+s.height/2}),a},[])}function $Se(t,e,r,n,a,s){const{x:i,y:o}=af(t),A=e.elementsFromPoint(i,o).find(b=>b.classList.contains("react-flow__handle"));if(A){const b=A.getAttribute("data-nodeid");if(b){const w=bT(void 0,A),_=A.getAttribute("data-handleid"),N=s({nodeId:b,id:_,type:w});if(N){const k=a.find(I=>I.nodeId===b&&I.type===w&&I.id===_);return{handle:{id:_,type:w,nodeId:b,x:(k==null?void 0:k.x)||r.x,y:(k==null?void 0:k.y)||r.y},validHandleResult:N}}}}let d=[],h=1/0;if(a.forEach(b=>{const w=Math.sqrt((b.x-r.x)**2+(b.y-r.y)**2);if(w<=n){const _=s(b);w<=h&&(w<h?d=[{handle:b,validHandleResult:_}]:w===h&&d.push({handle:b,validHandleResult:_}),h=w)}}),!d.length)return{handle:null,validHandleResult:XO()};if(d.length===1)return d[0];const m=d.some(({validHandleResult:b})=>b.isValid),g=d.some(({handle:b})=>b.type==="target");return d.find(({handle:b,validHandleResult:w})=>g?b.type==="target":m?w.isValid:!0)||d[0]}const YSe={source:null,target:null,sourceHandle:null,targetHandle:null},XO=()=>({handleDomNode:null,isValid:!1,connection:YSe,endHandle:null});function JO(t,e,r,n,a,s,i){const o=a==="target",l=i.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),A={...XO(),handleDomNode:l};if(l){const d=bT(void 0,l),h=l.getAttribute("data-nodeid"),m=l.getAttribute("data-handleid"),g=l.classList.contains("connectable"),b=l.classList.contains("connectableend"),w={source:o?h:r,sourceHandle:o?m:n,target:o?r:h,targetHandle:o?n:m};A.connection=w,g&&b&&(e===Rh.Strict?o&&d==="source"||!o&&d==="target":h!==r||m!==n)&&(A.endHandle={nodeId:h,handleId:m,type:d},A.isValid=s(w))}return A}function XSe({nodes:t,nodeId:e,handleId:r,handleType:n}){return t.reduce((a,s)=>{if(s[Ha]){const{handleBounds:i}=s[Ha];let o=[],l=[];i&&(o=wD(s,i,"source",`${e}-${r}-${n}`),l=wD(s,i,"target",`${e}-${r}-${n}`)),a.push(...o,...l)}return a},[])}function bT(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function zE(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function JSe(t,e){let r=null;return e?r="valid":t&&!e&&(r="invalid"),r}function ZO({event:t,handleId:e,nodeId:r,onConnect:n,isTarget:a,getState:s,setState:i,isValidConnection:o,edgeUpdaterType:l,onReconnectEnd:A}){const d=OO(t.target),{connectionMode:h,domNode:m,autoPanOnConnect:g,connectionRadius:b,onConnectStart:w,panBy:_,getNodes:N,cancelConnection:k}=s();let I=0,P;const{x:M,y:D}=af(t),C=d==null?void 0:d.elementFromPoint(M,D),B=bT(l,C),T=m==null?void 0:m.getBoundingClientRect();if(!T||!B)return;let O,F=af(t,T),L=!1,Q=null,q=!1,ie=null;const Z=XSe({nodes:N(),nodeId:r,handleId:e,handleType:B}),ee=()=>{if(!g)return;const[W,ce]=jO(F,T);_({x:W,y:ce}),I=requestAnimationFrame(ee)};i({connectionPosition:F,connectionStatus:null,connectionNodeId:r,connectionHandleId:e,connectionHandleType:B,connectionStartHandle:{nodeId:r,handleId:e,type:B},connectionEndHandle:null}),w==null||w(t,{nodeId:r,handleId:e,handleType:B});function ne(W){const{transform:ce}=s();F=af(W,T);const{handle:j,validHandleResult:K}=$Se(W,d,z5(F,ce,!1,[1,1]),b,Z,X=>JO(X,h,r,e,a?"target":"source",o,d));if(P=j,L||(ee(),L=!0),ie=K.handleDomNode,Q=K.connection,q=K.isValid,i({connectionPosition:P&&q?KO({x:P.x,y:P.y},ce):F,connectionStatus:JSe(!!P,q),connectionEndHandle:K.endHandle}),!P&&!q&&!ie)return zE(O);Q.source!==Q.target&&ie&&(zE(O),O=ie,ie.classList.add("connecting","react-flow__handle-connecting"),ie.classList.toggle("valid",q),ie.classList.toggle("react-flow__handle-valid",q))}function z(W){var ce,j;(P||ie)&&Q&&q&&(n==null||n(Q)),(j=(ce=s()).onConnectEnd)==null||j.call(ce,W),l&&(A==null||A(W)),zE(O),k(),cancelAnimationFrame(I),L=!1,q=!1,Q=null,ie=null,d.removeEventListener("mousemove",ne),d.removeEventListener("mouseup",z),d.removeEventListener("touchmove",ne),d.removeEventListener("touchend",z)}d.addEventListener("mousemove",ne),d.addEventListener("mouseup",z),d.addEventListener("touchmove",ne),d.addEventListener("touchend",z)}const bD=()=>!0,ZSe=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),e4e=(t,e,r)=>n=>{const{connectionStartHandle:a,connectionEndHandle:s,connectionClickStartHandle:i}=n;return{connecting:(a==null?void 0:a.nodeId)===t&&(a==null?void 0:a.handleId)===e&&(a==null?void 0:a.type)===r||(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===r,clickConnecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===r}},eQ=J.forwardRef(({type:t="source",position:e=ir.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:i,onConnect:o,children:l,className:A,onMouseDown:d,onTouchStart:h,...m},g)=>{var T,O;const b=i||null,w=t==="target",_=Ys(),N=zSe(),{connectOnClick:k,noPanClassName:I}=ka(ZSe,zi),{connecting:P,clickConnecting:M}=ka(e4e(N,b,t),zi);N||(O=(T=_.getState()).onError)==null||O.call(T,"010",UA.error010());const D=F=>{const{defaultEdgeOptions:L,onConnect:Q,hasDefaultEdges:q}=_.getState(),ie={...L,...F};if(q){const{edges:Z,setEdges:ee}=_.getState();ee(WSe(ie,Z))}Q==null||Q(ie),o==null||o(ie)},C=F=>{if(!N)return;const L=HO(F);a&&(L&&F.button===0||!L)&&ZO({event:F,handleId:b,nodeId:N,onConnect:D,isTarget:w,getState:_.getState,setState:_.setState,isValidConnection:r||_.getState().isValidConnection||bD}),L?d==null||d(F):h==null||h(F)},B=F=>{const{onClickConnectStart:L,onClickConnectEnd:Q,connectionClickStartHandle:q,connectionMode:ie,isValidConnection:Z}=_.getState();if(!N||!q&&!a)return;if(!q){L==null||L(F,{nodeId:N,handleId:b,handleType:t}),_.setState({connectionClickStartHandle:{nodeId:N,type:t,handleId:b}});return}const ee=OO(F.target),ne=r||Z||bD,{connection:z,isValid:W}=JO({nodeId:N,id:b,type:t},ie,q.nodeId,q.handleId||null,q.type,ne,ee);W&&D(z),Q==null||Q(F),_.setState({connectionClickStartHandle:null})};return At.createElement("div",{"data-handleid":b,"data-nodeid":N,"data-handlepos":e,"data-id":`${N}-${b}-${t}`,className:to(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",I,A,{source:!w,target:w,connectable:n,connectablestart:a,connectableend:s,connecting:M,connectionindicator:n&&(a&&!P||s&&P)}]),onMouseDown:C,onTouchStart:C,onClick:k?B:void 0,ref:g,...m},l)});eQ.displayName="Handle";var jy=J.memo(eQ);const tQ=({data:t,isConnectable:e,targetPosition:r=ir.Top,sourcePosition:n=ir.Bottom})=>At.createElement(At.Fragment,null,At.createElement(jy,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label,At.createElement(jy,{type:"source",position:n,isConnectable:e}));tQ.displayName="DefaultNode";var G5=J.memo(tQ);const rQ=({data:t,isConnectable:e,sourcePosition:r=ir.Bottom})=>At.createElement(At.Fragment,null,t==null?void 0:t.label,At.createElement(jy,{type:"source",position:r,isConnectable:e}));rQ.displayName="InputNode";var nQ=J.memo(rQ);const aQ=({data:t,isConnectable:e,targetPosition:r=ir.Top})=>At.createElement(At.Fragment,null,At.createElement(jy,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label);aQ.displayName="OutputNode";var sQ=J.memo(aQ);const CT=()=>null;CT.displayName="GroupNode";const t4e=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),r2=t=>t.id;function r4e(t,e){return zi(t.selectedNodes.map(r2),e.selectedNodes.map(r2))&&zi(t.selectedEdges.map(r2),e.selectedEdges.map(r2))}const iQ=J.memo(({onSelectionChange:t})=>{const e=Ys(),{selectedNodes:r,selectedEdges:n}=ka(t4e,r4e);return J.useEffect(()=>{const a={nodes:r,edges:n};t==null||t(a),e.getState().onSelectionChange.forEach(s=>s(a))},[r,n,t]),null});iQ.displayName="SelectionListener";const n4e=t=>!!t.onSelectionChange;function a4e({onSelectionChange:t}){const e=ka(n4e);return t||e?At.createElement(iQ,{onSelectionChange:t}):null}const s4e=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function R0(t,e){J.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function Jr(t,e,r){J.useEffect(()=>{typeof e<"u"&&r({[t]:e})},[e])}const i4e=({nodes:t,edges:e,defaultNodes:r,defaultEdges:n,onConnect:a,onConnectStart:s,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:l,nodesDraggable:A,nodesConnectable:d,nodesFocusable:h,edgesFocusable:m,edgesUpdatable:g,elevateNodesOnSelect:b,minZoom:w,maxZoom:_,nodeExtent:N,onNodesChange:k,onEdgesChange:I,elementsSelectable:P,connectionMode:M,snapGrid:D,snapToGrid:C,translateExtent:B,connectOnClick:T,defaultEdgeOptions:O,fitView:F,fitViewOptions:L,onNodesDelete:Q,onEdgesDelete:q,onNodeDrag:ie,onNodeDragStart:Z,onNodeDragStop:ee,onSelectionDrag:ne,onSelectionDragStart:z,onSelectionDragStop:W,noPanClassName:ce,nodeOrigin:j,rfId:K,autoPanOnConnect:X,autoPanOnNodeDrag:te,onError:le,connectionRadius:de,isValidConnection:me,nodeDragThreshold:ge})=>{const{setNodes:Se,setEdges:xe,setDefaultNodesAndEdges:ae,setMinZoom:Fe,setMaxZoom:Xe,setTranslateExtent:De,setNodeExtent:Ce,reset:ze}=ka(s4e,zi),tt=Ys();return J.useEffect(()=>{const it=n==null?void 0:n.map(dt=>({...dt,...O}));return ae(r,it),()=>{ze()}},[]),Jr("defaultEdgeOptions",O,tt.setState),Jr("connectionMode",M,tt.setState),Jr("onConnect",a,tt.setState),Jr("onConnectStart",s,tt.setState),Jr("onConnectEnd",i,tt.setState),Jr("onClickConnectStart",o,tt.setState),Jr("onClickConnectEnd",l,tt.setState),Jr("nodesDraggable",A,tt.setState),Jr("nodesConnectable",d,tt.setState),Jr("nodesFocusable",h,tt.setState),Jr("edgesFocusable",m,tt.setState),Jr("edgesUpdatable",g,tt.setState),Jr("elementsSelectable",P,tt.setState),Jr("elevateNodesOnSelect",b,tt.setState),Jr("snapToGrid",C,tt.setState),Jr("snapGrid",D,tt.setState),Jr("onNodesChange",k,tt.setState),Jr("onEdgesChange",I,tt.setState),Jr("connectOnClick",T,tt.setState),Jr("fitViewOnInit",F,tt.setState),Jr("fitViewOnInitOptions",L,tt.setState),Jr("onNodesDelete",Q,tt.setState),Jr("onEdgesDelete",q,tt.setState),Jr("onNodeDrag",ie,tt.setState),Jr("onNodeDragStart",Z,tt.setState),Jr("onNodeDragStop",ee,tt.setState),Jr("onSelectionDrag",ne,tt.setState),Jr("onSelectionDragStart",z,tt.setState),Jr("onSelectionDragStop",W,tt.setState),Jr("noPanClassName",ce,tt.setState),Jr("nodeOrigin",j,tt.setState),Jr("rfId",K,tt.setState),Jr("autoPanOnConnect",X,tt.setState),Jr("autoPanOnNodeDrag",te,tt.setState),Jr("onError",le,tt.setState),Jr("connectionRadius",de,tt.setState),Jr("isValidConnection",me,tt.setState),Jr("nodeDragThreshold",ge,tt.setState),R0(t,Se),R0(e,xe),R0(w,Fe),R0(_,Xe),R0(B,De),R0(N,Ce),null},CD={display:"none"},o4e={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},oQ="react-flow__node-desc",lQ="react-flow__edge-desc",l4e="react-flow__aria-live",c4e=t=>t.ariaLiveMessage;function u4e({rfId:t}){const e=ka(c4e);return At.createElement("div",{id:`${l4e}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:o4e},e)}function A4e({rfId:t,disableKeyboardA11y:e}){return At.createElement(At.Fragment,null,At.createElement("div",{id:`${oQ}-${t}`,style:CD},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),At.createElement("div",{id:`${lQ}-${t}`,style:CD},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&At.createElement(u4e,{rfId:t}))}var Nx=(t=null,e={actInsideInputWithModifier:!0})=>{const[r,n]=J.useState(!1),a=J.useRef(!1),s=J.useRef(new Set([])),[i,o]=J.useMemo(()=>{if(t!==null){const A=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.split("+")),d=A.reduce((h,m)=>h.concat(...m),[]);return[A,d]}return[[],[]]},[t]);return J.useEffect(()=>{const l=typeof document<"u"?document:null,A=(e==null?void 0:e.target)||l;if(t!==null){const d=g=>{if(a.current=g.ctrlKey||g.metaKey||g.shiftKey,(!a.current||a.current&&!e.actInsideInputWithModifier)&&Q5(g))return!1;const w=_D(g.code,o);s.current.add(g[w]),ED(i,s.current,!1)&&(g.preventDefault(),n(!0))},h=g=>{if((!a.current||a.current&&!e.actInsideInputWithModifier)&&Q5(g))return!1;const w=_D(g.code,o);ED(i,s.current,!0)?(n(!1),s.current.clear()):s.current.delete(g[w]),g.key==="Meta"&&s.current.clear(),a.current=!1},m=()=>{s.current.clear(),n(!1)};return A==null||A.addEventListener("keydown",d),A==null||A.addEventListener("keyup",h),window.addEventListener("blur",m),()=>{A==null||A.removeEventListener("keydown",d),A==null||A.removeEventListener("keyup",h),window.removeEventListener("blur",m)}}},[t,n]),r};function ED(t,e,r){return t.filter(n=>r||n.length===e.size).some(n=>n.every(a=>e.has(a)))}function _D(t,e){return e.includes(t)?"code":"key"}function cQ(t,e,r,n){var o,l;const a=t.parentNode||t.parentId;if(!a)return r;const s=e.get(a),i=vm(s,n);return cQ(s,e,{x:(r.x??0)+i.x,y:(r.y??0)+i.y,z:(((o=s[Ha])==null?void 0:o.z)??0)>(r.z??0)?((l=s[Ha])==null?void 0:l.z)??0:r.z??0},n)}function uQ(t,e,r){t.forEach(n=>{var s;const a=n.parentNode||n.parentId;if(a&&!t.has(a))throw new Error(`Parent node ${a} not found`);if(a||r!=null&&r[n.id]){const{x:i,y:o,z:l}=cQ(n,t,{...n.position,z:((s=n[Ha])==null?void 0:s.z)??0},e);n.positionAbsolute={x:i,y:o},n[Ha].z=l,r!=null&&r[n.id]&&(n[Ha].isParent=!0)}})}function GE(t,e,r,n){const a=new Map,s={},i=n?1e3:0;return t.forEach(o=>{var g;const l=(Ol(o.zIndex)?o.zIndex:0)+(o.selected?i:0),A=e.get(o.id),d={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},h=o.parentNode||o.parentId;h&&(s[h]=!0);const m=(A==null?void 0:A.type)&&(A==null?void 0:A.type)!==o.type;Object.defineProperty(d,Ha,{enumerable:!1,value:{handleBounds:m||(g=A==null?void 0:A[Ha])==null?void 0:g.handleBounds,z:l}}),a.set(o.id,d)}),uQ(a,r,s),a}function AQ(t,e={}){const{getNodes:r,width:n,height:a,minZoom:s,maxZoom:i,d3Zoom:o,d3Selection:l,fitViewOnInitDone:A,fitViewOnInit:d,nodeOrigin:h}=t(),m=e.initial&&!A&&d;if(o&&l&&(m||!e.initial)){const b=r().filter(_=>{var k;const N=e.includeHiddenNodes?_.width&&_.height:!_.hidden;return(k=e.nodes)!=null&&k.length?N&&e.nodes.some(I=>I.id===_.id):N}),w=b.every(_=>_.width&&_.height);if(b.length>0&&w){const _=wT(b,h),{x:N,y:k,zoom:I}=YO(_,n,a,e.minZoom??s,e.maxZoom??i,e.padding??.1),P=nf.translate(N,k).scale(I);return typeof e.duration=="number"&&e.duration>0?o.transform(eh(l,e.duration),P):o.transform(l,P),!0}}return!1}function d4e(t,e){return t.forEach(r=>{const n=e.get(r.id);n&&e.set(n.id,{...n,[Ha]:n[Ha],selected:r.selected})}),new Map(e)}function f4e(t,e){return e.map(r=>{const n=t.find(a=>a.id===r.id);return n&&(r.selected=n.selected),r})}function n2({changedNodes:t,changedEdges:e,get:r,set:n}){const{nodeInternals:a,edges:s,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:l,hasDefaultEdges:A}=r();t!=null&&t.length&&(l&&n({nodeInternals:d4e(t,a)}),i==null||i(t)),e!=null&&e.length&&(A&&n({edges:f4e(e,s)}),o==null||o(e))}const D0=()=>{},h4e={zoomIn:D0,zoomOut:D0,zoomTo:D0,getZoom:()=>1,setViewport:D0,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:D0,fitBounds:D0,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},m4e=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),p4e=()=>{const t=Ys(),{d3Zoom:e,d3Selection:r}=ka(m4e,zi);return J.useMemo(()=>r&&e?{zoomIn:a=>e.scaleBy(eh(r,a==null?void 0:a.duration),1.2),zoomOut:a=>e.scaleBy(eh(r,a==null?void 0:a.duration),1/1.2),zoomTo:(a,s)=>e.scaleTo(eh(r,s==null?void 0:s.duration),a),getZoom:()=>t.getState().transform[2],setViewport:(a,s)=>{const[i,o,l]=t.getState().transform,A=nf.translate(a.x??i,a.y??o).scale(a.zoom??l);e.transform(eh(r,s==null?void 0:s.duration),A)},getViewport:()=>{const[a,s,i]=t.getState().transform;return{x:a,y:s,zoom:i}},fitView:a=>AQ(t.getState,a),setCenter:(a,s,i)=>{const{width:o,height:l,maxZoom:A}=t.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:A,h=o/2-a*d,m=l/2-s*d,g=nf.translate(h,m).scale(d);e.transform(eh(r,i==null?void 0:i.duration),g)},fitBounds:(a,s)=>{const{width:i,height:o,minZoom:l,maxZoom:A}=t.getState(),{x:d,y:h,zoom:m}=YO(a,i,o,l,A,(s==null?void 0:s.padding)??.1),g=nf.translate(d,h).scale(m);e.transform(eh(r,s==null?void 0:s.duration),g)},project:a=>{const{transform:s,snapToGrid:i,snapGrid:o}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),z5(a,s,i,o)},screenToFlowPosition:a=>{const{transform:s,snapToGrid:i,snapGrid:o,domNode:l}=t.getState();if(!l)return a;const{x:A,y:d}=l.getBoundingClientRect(),h={x:a.x-A,y:a.y-d};return z5(h,s,i,o)},flowToScreenPosition:a=>{const{transform:s,domNode:i}=t.getState();if(!i)return a;const{x:o,y:l}=i.getBoundingClientRect(),A=KO(a,s);return{x:A.x+o,y:A.y+l}},viewportInitialized:!0}:h4e,[e,r])};function nb(){const t=p4e(),e=Ys(),r=J.useCallback(()=>e.getState().getNodes().map(w=>({...w})),[]),n=J.useCallback(w=>e.getState().nodeInternals.get(w),[]),a=J.useCallback(()=>{const{edges:w=[]}=e.getState();return w.map(_=>({..._}))},[]),s=J.useCallback(w=>{const{edges:_=[]}=e.getState();return _.find(N=>N.id===w)},[]),i=J.useCallback(w=>{const{getNodes:_,setNodes:N,hasDefaultNodes:k,onNodesChange:I}=e.getState(),P=_(),M=typeof w=="function"?w(P):w;if(k)N(M);else if(I){const D=M.length===0?P.map(C=>({type:"remove",id:C.id})):M.map(C=>({item:C,type:"reset"}));I(D)}},[]),o=J.useCallback(w=>{const{edges:_=[],setEdges:N,hasDefaultEdges:k,onEdgesChange:I}=e.getState(),P=typeof w=="function"?w(_):w;if(k)N(P);else if(I){const M=P.length===0?_.map(D=>({type:"remove",id:D.id})):P.map(D=>({item:D,type:"reset"}));I(M)}},[]),l=J.useCallback(w=>{const _=Array.isArray(w)?w:[w],{getNodes:N,setNodes:k,hasDefaultNodes:I,onNodesChange:P}=e.getState();if(I){const D=[...N(),..._];k(D)}else if(P){const M=_.map(D=>({item:D,type:"add"}));P(M)}},[]),A=J.useCallback(w=>{const _=Array.isArray(w)?w:[w],{edges:N=[],setEdges:k,hasDefaultEdges:I,onEdgesChange:P}=e.getState();if(I)k([...N,..._]);else if(P){const M=_.map(D=>({item:D,type:"add"}));P(M)}},[]),d=J.useCallback(()=>{const{getNodes:w,edges:_=[],transform:N}=e.getState(),[k,I,P]=N;return{nodes:w().map(M=>({...M})),edges:_.map(M=>({...M})),viewport:{x:k,y:I,zoom:P}}},[]),h=J.useCallback(({nodes:w,edges:_})=>{const{nodeInternals:N,getNodes:k,edges:I,hasDefaultNodes:P,hasDefaultEdges:M,onNodesDelete:D,onEdgesDelete:C,onNodesChange:B,onEdgesChange:T}=e.getState(),O=(w||[]).map(ie=>ie.id),F=(_||[]).map(ie=>ie.id),L=k().reduce((ie,Z)=>{const ee=Z.parentNode||Z.parentId,ne=!O.includes(Z.id)&&ee&&ie.find(W=>W.id===ee);return(typeof Z.deletable=="boolean"?Z.deletable:!0)&&(O.includes(Z.id)||ne)&&ie.push(Z),ie},[]),Q=I.filter(ie=>typeof ie.deletable=="boolean"?ie.deletable:!0),q=Q.filter(ie=>F.includes(ie.id));if(L||q){const ie=$O(L,Q),Z=[...q,...ie],ee=Z.reduce((ne,z)=>(ne.includes(z.id)||ne.push(z.id),ne),[]);if((M||P)&&(M&&e.setState({edges:I.filter(ne=>!ee.includes(ne.id))}),P&&(L.forEach(ne=>{N.delete(ne.id)}),e.setState({nodeInternals:new Map(N)}))),ee.length>0&&(C==null||C(Z),T&&T(ee.map(ne=>({id:ne,type:"remove"})))),L.length>0&&(D==null||D(L),B)){const ne=L.map(z=>({id:z.id,type:"remove"}));B(ne)}}},[]),m=J.useCallback(w=>{const _=USe(w),N=_?null:e.getState().nodeInternals.get(w.id);return!_&&!N?[null,null,_]:[_?w:pD(N),N,_]},[]),g=J.useCallback((w,_=!0,N)=>{const[k,I,P]=m(w);return k?(N||e.getState().getNodes()).filter(M=>{if(!P&&(M.id===I.id||!M.positionAbsolute))return!1;const D=pD(M),C=O5(D,k);return _&&C>0||C>=k.width*k.height}):[]},[]),b=J.useCallback((w,_,N=!0)=>{const[k]=m(w);if(!k)return!1;const I=O5(k,_);return N&&I>0||I>=k.width*k.height},[]);return J.useMemo(()=>({...t,getNodes:r,getNode:n,getEdges:a,getEdge:s,setNodes:i,setEdges:o,addNodes:l,addEdges:A,toObject:d,deleteElements:h,getIntersectingNodes:g,isNodeIntersecting:b}),[t,r,n,a,s,i,o,l,A,d,h,g,b])}const g4e={actInsideInputWithModifier:!1};var x4e=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const r=Ys(),{deleteElements:n}=nb(),a=Nx(t,g4e),s=Nx(e);J.useEffect(()=>{if(a){const{edges:i,getNodes:o}=r.getState(),l=o().filter(d=>d.selected),A=i.filter(d=>d.selected);n({nodes:l,edges:A}),r.setState({nodesSelectionActive:!1})}},[a]),J.useEffect(()=>{r.setState({multiSelectionActive:s})},[s])};function v4e(t){const e=Ys();J.useEffect(()=>{let r;const n=()=>{var s,i;if(!t.current)return;const a=hT(t.current);(a.height===0||a.width===0)&&((i=(s=e.getState()).onError)==null||i.call(s,"004",UA.error004())),e.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),t.current&&(r=new ResizeObserver(()=>n()),r.observe(t.current)),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}},[])}const ET={position:"absolute",width:"100%",height:"100%",top:0,left:0},y4e=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,a2=t=>({x:t.x,y:t.y,zoom:t.k}),L0=(t,e)=>t.target.closest(`.${e}`),SD=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),TD=t=>{const e=t.ctrlKey&&Uy()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},w4e=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),b4e=({onMove:t,onMoveStart:e,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=ch.Free,zoomOnDoubleClick:A=!0,elementsSelectable:d,panOnDrag:h=!0,defaultViewport:m,translateExtent:g,minZoom:b,maxZoom:w,zoomActivationKeyCode:_,preventScrolling:N=!0,children:k,noWheelClassName:I,noPanClassName:P})=>{const M=J.useRef(),D=Ys(),C=J.useRef(!1),B=J.useRef(!1),T=J.useRef(null),O=J.useRef({x:0,y:0,zoom:0}),{d3Zoom:F,d3Selection:L,d3ZoomHandler:Q,userSelectionActive:q}=ka(w4e,zi),ie=Nx(_),Z=J.useRef(0),ee=J.useRef(!1),ne=J.useRef();return v4e(T),J.useEffect(()=>{if(T.current){const z=T.current.getBoundingClientRect(),W=BSe().scaleExtent([b,w]).translateExtent(g),ce=Cc(T.current).call(W),j=nf.translate(m.x,m.y).scale(Mm(m.zoom,b,w)),K=[[0,0],[z.width,z.height]],X=W.constrain()(j,K,g);W.transform(ce,X),W.wheelDelta(TD),D.setState({d3Zoom:W,d3Selection:ce,d3ZoomHandler:ce.on("wheel.zoom"),transform:[X.x,X.y,X.k],domNode:T.current.closest(".react-flow")})}},[]),J.useEffect(()=>{L&&F&&(i&&!ie&&!q?L.on("wheel.zoom",z=>{if(L0(z,I))return!1;z.preventDefault(),z.stopImmediatePropagation();const W=L.property("__zoom").k||1;if(z.ctrlKey&&s){const me=yu(z),ge=TD(z),Se=W*Math.pow(2,ge);F.scaleTo(L,Se,me,z);return}const ce=z.deltaMode===1?20:1;let j=l===ch.Vertical?0:z.deltaX*ce,K=l===ch.Horizontal?0:z.deltaY*ce;!Uy()&&z.shiftKey&&l!==ch.Vertical&&(j=z.deltaY*ce,K=0),F.translateBy(L,-(j/W)*o,-(K/W)*o,{internal:!0});const X=a2(L.property("__zoom")),{onViewportChangeStart:te,onViewportChange:le,onViewportChangeEnd:de}=D.getState();clearTimeout(ne.current),ee.current||(ee.current=!0,e==null||e(z,X),te==null||te(X)),ee.current&&(t==null||t(z,X),le==null||le(X),ne.current=setTimeout(()=>{r==null||r(z,X),de==null||de(X),ee.current=!1},150))},{passive:!1}):typeof Q<"u"&&L.on("wheel.zoom",function(z,W){if(!N&&z.type==="wheel"&&!z.ctrlKey||L0(z,I))return null;z.preventDefault(),Q.call(this,z,W)},{passive:!1}))},[q,i,l,L,F,Q,ie,s,N,I,e,t,r]),J.useEffect(()=>{F&&F.on("start",z=>{var j,K;if(!z.sourceEvent||z.sourceEvent.internal)return null;Z.current=(j=z.sourceEvent)==null?void 0:j.button;const{onViewportChangeStart:W}=D.getState(),ce=a2(z.transform);C.current=!0,O.current=ce,((K=z.sourceEvent)==null?void 0:K.type)==="mousedown"&&D.setState({paneDragging:!0}),W==null||W(ce),e==null||e(z.sourceEvent,ce)})},[F,e]),J.useEffect(()=>{F&&(q&&!C.current?F.on("zoom",null):q||F.on("zoom",z=>{var ce;const{onViewportChange:W}=D.getState();if(D.setState({transform:[z.transform.x,z.transform.y,z.transform.k]}),B.current=!!(n&&SD(h,Z.current??0)),(t||W)&&!((ce=z.sourceEvent)!=null&&ce.internal)){const j=a2(z.transform);W==null||W(j),t==null||t(z.sourceEvent,j)}}))},[q,F,t,h,n]),J.useEffect(()=>{F&&F.on("end",z=>{if(!z.sourceEvent||z.sourceEvent.internal)return null;const{onViewportChangeEnd:W}=D.getState();if(C.current=!1,D.setState({paneDragging:!1}),n&&SD(h,Z.current??0)&&!B.current&&n(z.sourceEvent),B.current=!1,(r||W)&&y4e(O.current,z.transform)){const ce=a2(z.transform);O.current=ce,clearTimeout(M.current),M.current=setTimeout(()=>{W==null||W(ce),r==null||r(z.sourceEvent,ce)},i?150:0)}})},[F,i,h,r,n]),J.useEffect(()=>{F&&F.filter(z=>{const W=ie||a,ce=s&&z.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&z.button===1&&z.type==="mousedown"&&(L0(z,"react-flow__node")||L0(z,"react-flow__edge")))return!0;if(!h&&!W&&!i&&!A&&!s||q||!A&&z.type==="dblclick"||L0(z,I)&&z.type==="wheel"||L0(z,P)&&(z.type!=="wheel"||i&&z.type==="wheel"&&!ie)||!s&&z.ctrlKey&&z.type==="wheel"||!W&&!i&&!ce&&z.type==="wheel"||!h&&(z.type==="mousedown"||z.type==="touchstart")||Array.isArray(h)&&!h.includes(z.button)&&z.type==="mousedown")return!1;const j=Array.isArray(h)&&h.includes(z.button)||!z.button||z.button<=1;return(!z.ctrlKey||z.type==="wheel")&&j})},[q,F,a,s,i,A,h,d,ie]),At.createElement("div",{className:"react-flow__renderer",ref:T,style:ET},k)},C4e=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function E4e(){const{userSelectionActive:t,userSelectionRect:e}=ka(C4e,zi);return t&&e?At.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function BD(t,e){const r=e.parentNode||e.parentId,n=t.find(a=>a.id===r);if(n){const a=e.position.x+e.width-n.width,s=e.position.y+e.height-n.height;if(a>0||s>0||e.position.x<0||e.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),s>0&&(n.style.height+=s),e.position.x<0){const i=Math.abs(e.position.x);n.position.x=n.position.x-i,n.style.width+=i,e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);n.position.y=n.position.y-i,n.style.height+=i,e.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function dQ(t,e){if(t.some(n=>n.type==="reset"))return t.filter(n=>n.type==="reset").map(n=>n.item);const r=t.filter(n=>n.type==="add").map(n=>n.item);return e.reduce((n,a)=>{const s=t.filter(o=>o.id===a.id);if(s.length===0)return n.push(a),n;const i={...a};for(const o of s)if(o)switch(o.type){case"select":{i.selected=o.selected;break}case"position":{typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&BD(n,i);break}case"dimensions":{typeof o.dimensions<"u"&&(i.width=o.dimensions.width,i.height=o.dimensions.height),typeof o.updateStyle<"u"&&(i.style={...i.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(i.resizing=o.resizing),i.expandParent&&BD(n,i);break}case"remove":return n}return n.push(i),n},r)}function fQ(t,e){return dQ(t,e)}function _4e(t,e){return dQ(t,e)}const Ld=(t,e)=>({id:t,type:"select",selected:e});function Z0(t,e){return t.reduce((r,n)=>{const a=e.includes(n.id);return!n.selected&&a?(n.selected=!0,r.push(Ld(n.id,!0))):n.selected&&!a&&(n.selected=!1,r.push(Ld(n.id,!1))),r},[])}const qE=(t,e)=>r=>{r.target===e.current&&(t==null||t(r))},S4e=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),hQ=J.memo(({isSelecting:t,selectionMode:e=Bx.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:l,onPaneMouseMove:A,onPaneMouseLeave:d,children:h})=>{const m=J.useRef(null),g=Ys(),b=J.useRef(0),w=J.useRef(0),_=J.useRef(),{userSelectionActive:N,elementsSelectable:k,dragging:I}=ka(S4e,zi),P=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),b.current=0,w.current=0},M=Q=>{s==null||s(Q),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},D=Q=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){Q.preventDefault();return}i==null||i(Q)},C=o?Q=>o(Q):void 0,B=Q=>{const{resetSelectedElements:q,domNode:ie}=g.getState();if(_.current=ie==null?void 0:ie.getBoundingClientRect(),!k||!t||Q.button!==0||Q.target!==m.current||!_.current)return;const{x:Z,y:ee}=af(Q,_.current);q(),g.setState({userSelectionRect:{width:0,height:0,startX:Z,startY:ee,x:Z,y:ee}}),n==null||n(Q)},T=Q=>{const{userSelectionRect:q,nodeInternals:ie,edges:Z,transform:ee,onNodesChange:ne,onEdgesChange:z,nodeOrigin:W,getNodes:ce}=g.getState();if(!t||!_.current||!q)return;g.setState({userSelectionActive:!0,nodesSelectionActive:!1});const j=af(Q,_.current),K=q.startX??0,X=q.startY??0,te={...q,x:j.x<K?j.x:K,y:j.y<X?j.y:X,width:Math.abs(j.x-K),height:Math.abs(j.y-X)},le=ce(),de=WO(ie,te,ee,e===Bx.Partial,!0,W),me=$O(de,Z).map(Se=>Se.id),ge=de.map(Se=>Se.id);if(b.current!==ge.length){b.current=ge.length;const Se=Z0(le,ge);Se.length&&(ne==null||ne(Se))}if(w.current!==me.length){w.current=me.length;const Se=Z0(Z,me);Se.length&&(z==null||z(Se))}g.setState({userSelectionRect:te})},O=Q=>{if(Q.button!==0)return;const{userSelectionRect:q}=g.getState();!N&&q&&Q.target===m.current&&(M==null||M(Q)),g.setState({nodesSelectionActive:b.current>0}),P(),a==null||a(Q)},F=Q=>{N&&(g.setState({nodesSelectionActive:b.current>0}),a==null||a(Q)),P()},L=k&&(t||N);return At.createElement("div",{className:to(["react-flow__pane",{dragging:I,selection:t}]),onClick:L?void 0:qE(M,m),onContextMenu:qE(D,m),onWheel:qE(C,m),onMouseEnter:L?void 0:l,onMouseDown:L?B:void 0,onMouseMove:L?T:A,onMouseUp:L?O:void 0,onMouseLeave:L?F:d,ref:m,style:ET},h,At.createElement(E4e,null))});hQ.displayName="Pane";function mQ(t,e){const r=t.parentNode||t.parentId;if(!r)return!1;const n=e.get(r);return n?n.selected?!0:mQ(n,e):!1}function ND(t,e,r){let n=t;do{if(n!=null&&n.matches(e))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function T4e(t,e,r,n){return Array.from(t.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!mQ(a,t))&&(a.draggable||e&&typeof a.draggable>"u")).map(a=>{var s,i;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((s=a.positionAbsolute)==null?void 0:s.x)??0),y:r.y-(((i=a.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function B4e(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function pQ(t,e,r,n,a=[0,0],s){const i=B4e(t,t.extent||n);let o=i;const l=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(l&&t.width&&t.height){const h=r.get(l),{x:m,y:g}=vm(h,a).positionAbsolute;o=h&&Ol(m)&&Ol(g)&&Ol(h.width)&&Ol(h.height)?[[m+t.width*a[0],g+t.height*a[1]],[m+h.width-t.width+t.width*a[0],g+h.height-t.height+t.height*a[1]]]:o}else s==null||s("005",UA.error005()),o=i;else if(t.extent&&l&&t.extent!=="parent"){const h=r.get(l),{x:m,y:g}=vm(h,a).positionAbsolute;o=[[t.extent[0][0]+m,t.extent[0][1]+g],[t.extent[1][0]+m,t.extent[1][1]+g]]}let A={x:0,y:0};if(l){const h=r.get(l);A=vm(h,a).positionAbsolute}const d=o&&o!=="parent"?mT(e,o):e;return{position:{x:d.x-A.x,y:d.y-A.y},positionAbsolute:d}}function KE({nodeId:t,dragItems:e,nodeInternals:r}){const n=e.map(a=>({...r.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[t?n.find(a=>a.id===t):n[0],n]}const kD=(t,e,r,n)=>{const a=e.querySelectorAll(t);if(!a||!a.length)return null;const s=Array.from(a),i=e.getBoundingClientRect(),o={x:i.width*n[0],y:i.height*n[1]};return s.map(l=>{const A=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(A.left-i.left-o.x)/r,y:(A.top-i.top-o.y)/r,...hT(l)}})};function rg(t,e,r){return r===void 0?r:n=>{const a=e().nodeInternals.get(t);a&&r(n,{...a})}}function q5({id:t,store:e,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:o,onError:l}=e.getState(),A=o.get(t);if(!A){l==null||l("012",UA.error012(t));return}e.setState({nodesSelectionActive:!1}),A.selected?(r||A.selected&&i)&&(s({nodes:[A],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):a([t])}function N4e(){const t=Ys();return J.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:a,snapToGrid:s}=t.getState(),i=r.touches?r.touches[0].clientX:r.clientX,o=r.touches?r.touches[0].clientY:r.clientY,l={x:(i-n[0])/n[2],y:(o-n[1])/n[2]};return{xSnapped:s?a[0]*Math.round(l.x/a[0]):l.x,ySnapped:s?a[1]*Math.round(l.y/a[1]):l.y,...l}},[])}function WE(t){return(e,r,n)=>t==null?void 0:t(e,n)}function gQ({nodeRef:t,disabled:e=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:s,selectNodesOnDrag:i}){const o=Ys(),[l,A]=J.useState(!1),d=J.useRef([]),h=J.useRef({x:null,y:null}),m=J.useRef(0),g=J.useRef(null),b=J.useRef({x:0,y:0}),w=J.useRef(null),_=J.useRef(!1),N=J.useRef(!1),k=J.useRef(!1),I=N4e();return J.useEffect(()=>{if(t!=null&&t.current){const P=Cc(t.current),M=({x:B,y:T})=>{const{nodeInternals:O,onNodeDrag:F,onSelectionDrag:L,updateNodePositions:Q,nodeExtent:q,snapGrid:ie,snapToGrid:Z,nodeOrigin:ee,onError:ne}=o.getState();h.current={x:B,y:T};let z=!1,W={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&q){const j=wT(d.current,ee);W=pT(j)}if(d.current=d.current.map(j=>{const K={x:B-j.distance.x,y:T-j.distance.y};Z&&(K.x=ie[0]*Math.round(K.x/ie[0]),K.y=ie[1]*Math.round(K.y/ie[1]));const X=[[q[0][0],q[0][1]],[q[1][0],q[1][1]]];d.current.length>1&&q&&!j.extent&&(X[0][0]=j.positionAbsolute.x-W.x+q[0][0],X[1][0]=j.positionAbsolute.x+(j.width??0)-W.x2+q[1][0],X[0][1]=j.positionAbsolute.y-W.y+q[0][1],X[1][1]=j.positionAbsolute.y+(j.height??0)-W.y2+q[1][1]);const te=pQ(j,K,O,X,ee,ne);return z=z||j.position.x!==te.position.x||j.position.y!==te.position.y,j.position=te.position,j.positionAbsolute=te.positionAbsolute,j}),!z)return;Q(d.current,!0,!0),A(!0);const ce=a?F:WE(L);if(ce&&w.current){const[j,K]=KE({nodeId:a,dragItems:d.current,nodeInternals:O});ce(w.current,j,K)}},D=()=>{if(!g.current)return;const[B,T]=jO(b.current,g.current);if(B!==0||T!==0){const{transform:O,panBy:F}=o.getState();h.current.x=(h.current.x??0)-B/O[2],h.current.y=(h.current.y??0)-T/O[2],F({x:B,y:T})&&M(h.current)}m.current=requestAnimationFrame(D)},C=B=>{var ee;const{nodeInternals:T,multiSelectionActive:O,nodesDraggable:F,unselectNodesAndEdges:L,onNodeDragStart:Q,onSelectionDragStart:q}=o.getState();N.current=!0;const ie=a?Q:WE(q);(!i||!s)&&!O&&a&&((ee=T.get(a))!=null&&ee.selected||L()),a&&s&&i&&q5({id:a,store:o,nodeRef:t});const Z=I(B);if(h.current=Z,d.current=T4e(T,F,Z,a),ie&&d.current){const[ne,z]=KE({nodeId:a,dragItems:d.current,nodeInternals:T});ie(B.sourceEvent,ne,z)}};if(e)P.on(".drag",null);else{const B=P_e().on("start",T=>{const{domNode:O,nodeDragThreshold:F}=o.getState();F===0&&C(T),k.current=!1;const L=I(T);h.current=L,g.current=(O==null?void 0:O.getBoundingClientRect())||null,b.current=af(T.sourceEvent,g.current)}).on("drag",T=>{var Q,q;const O=I(T),{autoPanOnNodeDrag:F,nodeDragThreshold:L}=o.getState();if(T.sourceEvent.type==="touchmove"&&T.sourceEvent.touches.length>1&&(k.current=!0),!k.current){if(!_.current&&N.current&&F&&(_.current=!0,D()),!N.current){const ie=O.xSnapped-(((Q=h==null?void 0:h.current)==null?void 0:Q.x)??0),Z=O.ySnapped-(((q=h==null?void 0:h.current)==null?void 0:q.y)??0);Math.sqrt(ie*ie+Z*Z)>L&&C(T)}(h.current.x!==O.xSnapped||h.current.y!==O.ySnapped)&&d.current&&N.current&&(w.current=T.sourceEvent,b.current=af(T.sourceEvent,g.current),M(O))}}).on("end",T=>{if(!(!N.current||k.current)&&(A(!1),_.current=!1,N.current=!1,cancelAnimationFrame(m.current),d.current)){const{updateNodePositions:O,nodeInternals:F,onNodeDragStop:L,onSelectionDragStop:Q}=o.getState(),q=a?L:WE(Q);if(O(d.current,!1,!1),q){const[ie,Z]=KE({nodeId:a,dragItems:d.current,nodeInternals:F});q(T.sourceEvent,ie,Z)}}}).filter(T=>{const O=T.target;return!T.button&&(!r||!ND(O,`.${r}`,t))&&(!n||ND(O,n,t))});return P.call(B),()=>{P.on(".drag",null)}}}},[t,e,r,n,s,o,a,i,I]),l}function xQ(){const t=Ys();return J.useCallback(r=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:s,getNodes:i,snapToGrid:o,snapGrid:l,onError:A,nodesDraggable:d}=t.getState(),h=i().filter(k=>k.selected&&(k.draggable||d&&typeof k.draggable>"u")),m=o?l[0]:5,g=o?l[1]:5,b=r.isShiftPressed?4:1,w=r.x*m*b,_=r.y*g*b,N=h.map(k=>{if(k.positionAbsolute){const I={x:k.positionAbsolute.x+w,y:k.positionAbsolute.y+_};o&&(I.x=l[0]*Math.round(I.x/l[0]),I.y=l[1]*Math.round(I.y/l[1]));const{positionAbsolute:P,position:M}=pQ(k,I,n,a,void 0,A);k.position=M,k.positionAbsolute=P}return k});s(N,!0,!1)},[])}const ym={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var ng=t=>{const e=({id:r,type:n,data:a,xPos:s,yPos:i,xPosOrigin:o,yPosOrigin:l,selected:A,onClick:d,onMouseEnter:h,onMouseMove:m,onMouseLeave:g,onContextMenu:b,onDoubleClick:w,style:_,className:N,isDraggable:k,isSelectable:I,isConnectable:P,isFocusable:M,selectNodesOnDrag:D,sourcePosition:C,targetPosition:B,hidden:T,resizeObserver:O,dragHandle:F,zIndex:L,isParent:Q,noDragClassName:q,noPanClassName:ie,initialized:Z,disableKeyboardA11y:ee,ariaLabel:ne,rfId:z,hasHandleBounds:W})=>{const ce=Ys(),j=J.useRef(null),K=J.useRef(null),X=J.useRef(C),te=J.useRef(B),le=J.useRef(n),de=I||k||d||h||m||g,me=xQ(),ge=rg(r,ce.getState,h),Se=rg(r,ce.getState,m),xe=rg(r,ce.getState,g),ae=rg(r,ce.getState,b),Fe=rg(r,ce.getState,w),Xe=ze=>{const{nodeDragThreshold:tt}=ce.getState();if(I&&(!D||!k||tt>0)&&q5({id:r,store:ce,nodeRef:j}),d){const it=ce.getState().nodeInternals.get(r);it&&d(ze,{...it})}},De=ze=>{if(!Q5(ze)&&!ee)if(QO.includes(ze.key)&&I){const tt=ze.key==="Escape";q5({id:r,store:ce,unselect:tt,nodeRef:j})}else k&&A&&Object.prototype.hasOwnProperty.call(ym,ze.key)&&(ce.setState({ariaLiveMessage:`Moved selected node ${ze.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),me({x:ym[ze.key].x,y:ym[ze.key].y,isShiftPressed:ze.shiftKey}))};J.useEffect(()=>()=>{K.current&&(O==null||O.unobserve(K.current),K.current=null)},[]),J.useEffect(()=>{if(j.current&&!T){const ze=j.current;(!Z||!W||K.current!==ze)&&(K.current&&(O==null||O.unobserve(K.current)),O==null||O.observe(ze),K.current=ze)}},[T,Z,W]),J.useEffect(()=>{const ze=le.current!==n,tt=X.current!==C,it=te.current!==B;j.current&&(ze||tt||it)&&(ze&&(le.current=n),tt&&(X.current=C),it&&(te.current=B),ce.getState().updateNodeDimensions([{id:r,nodeElement:j.current,forceUpdate:!0}]))},[r,n,C,B]);const Ce=gQ({nodeRef:j,disabled:T||!k,noDragClassName:q,handleSelector:F,nodeId:r,isSelectable:I,selectNodesOnDrag:D});return T?null:At.createElement("div",{className:to(["react-flow__node",`react-flow__node-${n}`,{[ie]:k},N,{selected:A,selectable:I,parent:Q,dragging:Ce}]),ref:j,style:{zIndex:L,transform:`translate(${o}px,${l}px)`,pointerEvents:de?"all":"none",visibility:Z?"visible":"hidden",..._},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:ge,onMouseMove:Se,onMouseLeave:xe,onContextMenu:ae,onClick:Xe,onDoubleClick:Fe,onKeyDown:M?De:void 0,tabIndex:M?0:void 0,role:M?"button":void 0,"aria-describedby":ee?void 0:`${oQ}-${z}`,"aria-label":ne},At.createElement(VSe,{value:r},At.createElement(t,{id:r,data:a,type:n,xPos:s,yPos:i,selected:A,isConnectable:P,sourcePosition:C,targetPosition:B,dragging:Ce,dragHandle:F,zIndex:L})))};return e.displayName="NodeWrapper",J.memo(e)};const k4e=t=>{const e=t.getNodes().filter(r=>r.selected);return{...wT(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function I4e({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:r}){const n=Ys(),{width:a,height:s,x:i,y:o,transformString:l,userSelectionActive:A}=ka(k4e,zi),d=xQ(),h=J.useRef(null);if(J.useEffect(()=>{var b;r||(b=h.current)==null||b.focus({preventScroll:!0})},[r]),gQ({nodeRef:h}),A||!a||!s)return null;const m=t?b=>{const w=n.getState().getNodes().filter(_=>_.selected);t(b,w)}:void 0,g=b=>{Object.prototype.hasOwnProperty.call(ym,b.key)&&d({x:ym[b.key].x,y:ym[b.key].y,isShiftPressed:b.shiftKey})};return At.createElement("div",{className:to(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l}},At.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:r?void 0:-1,onKeyDown:r?void 0:g,style:{width:a,height:s,top:o,left:i}}))}var F4e=J.memo(I4e);const R4e=t=>t.nodesSelectionActive,vQ=({children:t,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:o,onMove:l,onMoveStart:A,onMoveEnd:d,selectionKeyCode:h,selectionOnDrag:m,selectionMode:g,onSelectionStart:b,onSelectionEnd:w,multiSelectionKeyCode:_,panActivationKeyCode:N,zoomActivationKeyCode:k,elementsSelectable:I,zoomOnScroll:P,zoomOnPinch:M,panOnScroll:D,panOnScrollSpeed:C,panOnScrollMode:B,zoomOnDoubleClick:T,panOnDrag:O,defaultViewport:F,translateExtent:L,minZoom:Q,maxZoom:q,preventScrolling:ie,onSelectionContextMenu:Z,noWheelClassName:ee,noPanClassName:ne,disableKeyboardA11y:z})=>{const W=ka(R4e),ce=Nx(h),j=Nx(N),K=j||O,X=j||D,te=ce||m&&K!==!0;return x4e({deleteKeyCode:o,multiSelectionKeyCode:_}),At.createElement(b4e,{onMove:l,onMoveStart:A,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:I,zoomOnScroll:P,zoomOnPinch:M,panOnScroll:X,panOnScrollSpeed:C,panOnScrollMode:B,zoomOnDoubleClick:T,panOnDrag:!ce&&K,defaultViewport:F,translateExtent:L,minZoom:Q,maxZoom:q,zoomActivationKeyCode:k,preventScrolling:ie,noWheelClassName:ee,noPanClassName:ne},At.createElement(hQ,{onSelectionStart:b,onSelectionEnd:w,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:K,isSelecting:!!te,selectionMode:g},t,W&&At.createElement(F4e,{onSelectionContextMenu:Z,noPanClassName:ne,disableKeyboardA11y:z})))};vQ.displayName="FlowRenderer";var D4e=J.memo(vQ);function L4e(t){return ka(J.useCallback(r=>t?WO(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[t]))}function U4e(t){const e={input:ng(t.input||nQ),default:ng(t.default||G5),output:ng(t.output||sQ),group:ng(t.group||CT)},r={},n=Object.keys(t).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,s)=>(a[s]=ng(t[s]||G5),a),r);return{...e,...n}}const M4e=({x:t,y:e,width:r,height:n,origin:a})=>!r||!n?{x:t,y:e}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:t,y:e}:{x:t-r*a[0],y:e-n*a[1]},P4e=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),yQ=t=>{const{nodesDraggable:e,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:s,onError:i}=ka(P4e,zi),o=L4e(t.onlyRenderVisibleElements),l=J.useRef(),A=J.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(h=>{const m=h.map(g=>({id:g.target.getAttribute("data-id"),nodeElement:g.target,forceUpdate:!0}));s(m)});return l.current=d,d},[]);return J.useEffect(()=>()=>{var d;(d=l==null?void 0:l.current)==null||d.disconnect()},[]),At.createElement("div",{className:"react-flow__nodes",style:ET},o.map(d=>{var M,D,C;let h=d.type||"default";t.nodeTypes[h]||(i==null||i("003",UA.error003(h)),h="default");const m=t.nodeTypes[h]||t.nodeTypes.default,g=!!(d.draggable||e&&typeof d.draggable>"u"),b=!!(d.selectable||a&&typeof d.selectable>"u"),w=!!(d.connectable||r&&typeof d.connectable>"u"),_=!!(d.focusable||n&&typeof d.focusable>"u"),N=t.nodeExtent?mT(d.positionAbsolute,t.nodeExtent):d.positionAbsolute,k=(N==null?void 0:N.x)??0,I=(N==null?void 0:N.y)??0,P=M4e({x:k,y:I,width:d.width??0,height:d.height??0,origin:t.nodeOrigin});return At.createElement(m,{key:d.id,id:d.id,className:d.className,style:d.style,type:h,data:d.data,sourcePosition:d.sourcePosition||ir.Bottom,targetPosition:d.targetPosition||ir.Top,hidden:d.hidden,xPos:k,yPos:I,xPosOrigin:P.x,yPosOrigin:P.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!d.selected,isDraggable:g,isSelectable:b,isConnectable:w,isFocusable:_,resizeObserver:A,dragHandle:d.dragHandle,zIndex:((M=d[Ha])==null?void 0:M.z)??0,isParent:!!((D=d[Ha])!=null&&D.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!d.width&&!!d.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((C=d[Ha])!=null&&C.handleBounds)})}))};yQ.displayName="NodeRenderer";var j4e=J.memo(yQ);const O4e=(t,e,r)=>r===ir.Left?t-e:r===ir.Right?t+e:t,Q4e=(t,e,r)=>r===ir.Top?t-e:r===ir.Bottom?t+e:t,ID="react-flow__edgeupdater",FD=({position:t,centerX:e,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:s,onMouseOut:i,type:o})=>At.createElement("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:i,className:to([ID,`${ID}-${o}`]),cx:O4e(e,n,t),cy:Q4e(r,n,t),r:n,stroke:"transparent",fill:"transparent"}),H4e=()=>!0;var U0=t=>{const e=({id:r,className:n,type:a,data:s,onClick:i,onEdgeDoubleClick:o,selected:l,animated:A,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:g,labelBgPadding:b,labelBgBorderRadius:w,style:_,source:N,target:k,sourceX:I,sourceY:P,targetX:M,targetY:D,sourcePosition:C,targetPosition:B,elementsSelectable:T,hidden:O,sourceHandleId:F,targetHandleId:L,onContextMenu:Q,onMouseEnter:q,onMouseMove:ie,onMouseLeave:Z,reconnectRadius:ee,onReconnect:ne,onReconnectStart:z,onReconnectEnd:W,markerEnd:ce,markerStart:j,rfId:K,ariaLabel:X,isFocusable:te,isReconnectable:le,pathOptions:de,interactionWidth:me,disableKeyboardA11y:ge})=>{const Se=J.useRef(null),[xe,ae]=J.useState(!1),[Fe,Xe]=J.useState(!1),De=Ys(),Ce=J.useMemo(()=>`url('#${V5(j,K)}')`,[j,K]),ze=J.useMemo(()=>`url('#${V5(ce,K)}')`,[ce,K]);if(O)return null;const tt=xt=>{var kn;const{edges:vr,addSelectedEdges:Wt,unselectNodesAndEdges:un,multiSelectionActive:pr}=De.getState(),Rr=vr.find(Nr=>Nr.id===r);Rr&&(T&&(De.setState({nodesSelectionActive:!1}),Rr.selected&&pr?(un({nodes:[],edges:[Rr]}),(kn=Se.current)==null||kn.blur()):Wt([r])),i&&i(xt,Rr))},it=tg(r,De.getState,o),dt=tg(r,De.getState,Q),Ct=tg(r,De.getState,q),ut=tg(r,De.getState,ie),Nt=tg(r,De.getState,Z),It=(xt,vr)=>{if(xt.button!==0)return;const{edges:Wt,isValidConnection:un}=De.getState(),pr=vr?k:N,Rr=(vr?L:F)||null,kn=vr?"target":"source",Nr=un||H4e,ls=vr,en=Wt.find(Lr=>Lr.id===r);Xe(!0),z==null||z(xt,en,kn);const ea=Lr=>{Xe(!1),W==null||W(Lr,en,kn)};ZO({event:xt,handleId:Rr,nodeId:pr,onConnect:Lr=>ne==null?void 0:ne(en,Lr),isTarget:ls,getState:De.getState,setState:De.setState,isValidConnection:Nr,edgeUpdaterType:kn,onReconnectEnd:ea})},Kt=xt=>It(xt,!0),Ut=xt=>It(xt,!1),Ht=()=>ae(!0),Yt=()=>ae(!1),Mt=!T&&!i,kt=xt=>{var vr;if(!ge&&QO.includes(xt.key)&&T){const{unselectNodesAndEdges:Wt,addSelectedEdges:un,edges:pr}=De.getState();xt.key==="Escape"?((vr=Se.current)==null||vr.blur(),Wt({edges:[pr.find(kn=>kn.id===r)]})):un([r])}};return At.createElement("g",{className:to(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:l,animated:A,inactive:Mt,updating:xe}]),onClick:tt,onDoubleClick:it,onContextMenu:dt,onMouseEnter:Ct,onMouseMove:ut,onMouseLeave:Nt,onKeyDown:te?kt:void 0,tabIndex:te?0:void 0,role:te?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":X===null?void 0:X||`Edge from ${N} to ${k}`,"aria-describedby":te?`${lQ}-${K}`:void 0,ref:Se},!Fe&&At.createElement(t,{id:r,source:N,target:k,selected:l,animated:A,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:g,labelBgPadding:b,labelBgBorderRadius:w,data:s,style:_,sourceX:I,sourceY:P,targetX:M,targetY:D,sourcePosition:C,targetPosition:B,sourceHandleId:F,targetHandleId:L,markerStart:Ce,markerEnd:ze,pathOptions:de,interactionWidth:me}),le&&At.createElement(At.Fragment,null,(le==="source"||le===!0)&&At.createElement(FD,{position:C,centerX:I,centerY:P,radius:ee,onMouseDown:Kt,onMouseEnter:Ht,onMouseOut:Yt,type:"source"}),(le==="target"||le===!0)&&At.createElement(FD,{position:B,centerX:M,centerY:D,radius:ee,onMouseDown:Ut,onMouseEnter:Ht,onMouseOut:Yt,type:"target"})))};return e.displayName="EdgeWrapper",J.memo(e)};function V4e(t){const e={default:U0(t.default||Py),straight:U0(t.bezier||vT),step:U0(t.step||xT),smoothstep:U0(t.step||rb),simplebezier:U0(t.simplebezier||gT)},r={},n=Object.keys(t).filter(a=>!["default","bezier"].includes(a)).reduce((a,s)=>(a[s]=U0(t[s]||Py),a),r);return{...e,...n}}function RD(t,e,r=null){const n=((r==null?void 0:r.x)||0)+e.x,a=((r==null?void 0:r.y)||0)+e.y,s=(r==null?void 0:r.width)||e.width,i=(r==null?void 0:r.height)||e.height;switch(t){case ir.Top:return{x:n+s/2,y:a};case ir.Right:return{x:n+s,y:a+i/2};case ir.Bottom:return{x:n+s/2,y:a+i};case ir.Left:return{x:n,y:a+i/2}}}function DD(t,e){return t?t.length===1||!e?t[0]:e&&t.find(r=>r.id===e)||null:null}const z4e=(t,e,r,n,a,s)=>{const i=RD(r,t,e),o=RD(s,n,a);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}};function G4e({sourcePos:t,targetPos:e,sourceWidth:r,sourceHeight:n,targetWidth:a,targetHeight:s,width:i,height:o,transform:l}){const A={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+r,e.x+a),y2:Math.max(t.y+n,e.y+s)};A.x===A.x2&&(A.x2+=1),A.y===A.y2&&(A.y2+=1);const d=pT({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:o/l[2]}),h=Math.max(0,Math.min(d.x2,A.x2)-Math.max(d.x,A.x)),m=Math.max(0,Math.min(d.y2,A.y2)-Math.max(d.y,A.y));return Math.ceil(h*m)>0}function LD(t){var n,a,s,i,o;const e=((n=t==null?void 0:t[Ha])==null?void 0:n.handleBounds)||null,r=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)||0,y:((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!r]}const q4e=[{level:0,isMaxLevel:!0,edges:[]}];function K4e(t,e,r=!1){let n=-1;const a=t.reduce((i,o)=>{var d,h;const l=Ol(o.zIndex);let A=l?o.zIndex:0;if(r){const m=e.get(o.target),g=e.get(o.source),b=o.selected||(m==null?void 0:m.selected)||(g==null?void 0:g.selected),w=Math.max(((d=g==null?void 0:g[Ha])==null?void 0:d.z)||0,((h=m==null?void 0:m[Ha])==null?void 0:h.z)||0,1e3);A=(l?o.zIndex:0)+(b?w:0)}return i[A]?i[A].push(o):i[A]=[o],n=A>n?A:n,i},{}),s=Object.entries(a).map(([i,o])=>{const l=+i;return{edges:o,level:l,isMaxLevel:l===n}});return s.length===0?q4e:s}function W4e(t,e,r){const n=ka(J.useCallback(a=>t?a.edges.filter(s=>{const i=e.get(s.source),o=e.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&G4e({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:o.width,targetHeight:o.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[t,e]));return K4e(n,e,r)}const $4e=({color:t="none",strokeWidth:e=1})=>At.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Y4e=({color:t="none",strokeWidth:e=1})=>At.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),UD={[My.Arrow]:$4e,[My.ArrowClosed]:Y4e};function X4e(t){const e=Ys();return J.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(UD,t)?UD[t]:((s=(a=e.getState()).onError)==null||s.call(a,"009",UA.error009(t)),null)},[t])}const J4e=({id:t,type:e,color:r,width:n=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const l=X4e(e);return l?At.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:o,refX:"0",refY:"0"},At.createElement(l,{color:r,strokeWidth:i})):null},Z4e=({defaultColor:t,rfId:e})=>r=>{const n=[];return r.edges.reduce((a,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const o=V5(i,e);n.includes(o)||(a.push({id:o,color:i.color||t,...i}),n.push(o))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))},wQ=({defaultColor:t,rfId:e})=>{const r=ka(J.useCallback(Z4e({defaultColor:t,rfId:e}),[t,e]),(n,a)=>!(n.length!==a.length||n.some((s,i)=>s.id!==a[i].id)));return At.createElement("defs",null,r.map(n=>At.createElement(J4e,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};wQ.displayName="MarkerDefinitions";var eTe=J.memo(wQ);const tTe=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),bQ=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:r,rfId:n,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:A,onEdgeClick:d,onEdgeDoubleClick:h,onReconnect:m,onReconnectStart:g,onReconnectEnd:b,reconnectRadius:w,children:_,disableKeyboardA11y:N})=>{const{edgesFocusable:k,edgesUpdatable:I,elementsSelectable:P,width:M,height:D,connectionMode:C,nodeInternals:B,onError:T}=ka(tTe,zi),O=W4e(e,B,r);return M?At.createElement(At.Fragment,null,O.map(({level:F,edges:L,isMaxLevel:Q})=>At.createElement("svg",{key:F,style:{zIndex:F},width:M,height:D,className:"react-flow__edges react-flow__container"},Q&&At.createElement(eTe,{defaultColor:t,rfId:n}),At.createElement("g",null,L.map(q=>{const[ie,Z,ee]=LD(B.get(q.source)),[ne,z,W]=LD(B.get(q.target));if(!ee||!W)return null;let ce=q.type||"default";a[ce]||(T==null||T("011",UA.error011(ce)),ce="default");const j=a[ce]||a.default,K=C===Rh.Strict?z.target:(z.target??[]).concat(z.source??[]),X=DD(Z.source,q.sourceHandle),te=DD(K,q.targetHandle),le=(X==null?void 0:X.position)||ir.Bottom,de=(te==null?void 0:te.position)||ir.Top,me=!!(q.focusable||k&&typeof q.focusable>"u"),ge=q.reconnectable||q.updatable,Se=typeof m<"u"&&(ge||I&&typeof ge>"u");if(!X||!te)return T==null||T("008",UA.error008(X,q)),null;const{sourceX:xe,sourceY:ae,targetX:Fe,targetY:Xe}=z4e(ie,X,le,ne,te,de);return At.createElement(j,{key:q.id,id:q.id,className:to([q.className,s]),type:ce,data:q.data,selected:!!q.selected,animated:!!q.animated,hidden:!!q.hidden,label:q.label,labelStyle:q.labelStyle,labelShowBg:q.labelShowBg,labelBgStyle:q.labelBgStyle,labelBgPadding:q.labelBgPadding,labelBgBorderRadius:q.labelBgBorderRadius,style:q.style,source:q.source,target:q.target,sourceHandleId:q.sourceHandle,targetHandleId:q.targetHandle,markerEnd:q.markerEnd,markerStart:q.markerStart,sourceX:xe,sourceY:ae,targetX:Fe,targetY:Xe,sourcePosition:le,targetPosition:de,elementsSelectable:P,onContextMenu:i,onMouseEnter:o,onMouseMove:l,onMouseLeave:A,onClick:d,onEdgeDoubleClick:h,onReconnect:m,onReconnectStart:g,onReconnectEnd:b,reconnectRadius:w,rfId:n,ariaLabel:q.ariaLabel,isFocusable:me,isReconnectable:Se,pathOptions:"pathOptions"in q?q.pathOptions:void 0,interactionWidth:q.interactionWidth,disableKeyboardA11y:N})})))),_):null};bQ.displayName="EdgeRenderer";var rTe=J.memo(bQ);const nTe=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function aTe({children:t}){const e=ka(nTe);return At.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function sTe(t){const e=nb(),r=J.useRef(!1);J.useEffect(()=>{!r.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),r.current=!0)},[t,e.viewportInitialized])}const iTe={[ir.Left]:ir.Right,[ir.Right]:ir.Left,[ir.Top]:ir.Bottom,[ir.Bottom]:ir.Top},CQ=({nodeId:t,handleType:e,style:r,type:n=Qd.Bezier,CustomComponent:a,connectionStatus:s})=>{var D,C,B;const{fromNode:i,handleId:o,toX:l,toY:A,connectionMode:d}=ka(J.useCallback(T=>({fromNode:T.nodeInternals.get(t),handleId:T.connectionHandleId,toX:(T.connectionPosition.x-T.transform[0])/T.transform[2],toY:(T.connectionPosition.y-T.transform[1])/T.transform[2],connectionMode:T.connectionMode}),[t]),zi),h=(D=i==null?void 0:i[Ha])==null?void 0:D.handleBounds;let m=h==null?void 0:h[e];if(d===Rh.Loose&&(m=m||(h==null?void 0:h[e==="source"?"target":"source"])),!i||!m)return null;const g=o?m.find(T=>T.id===o):m[0],b=g?g.x+g.width/2:(i.width??0)/2,w=g?g.y+g.height/2:i.height??0,_=(((C=i.positionAbsolute)==null?void 0:C.x)??0)+b,N=(((B=i.positionAbsolute)==null?void 0:B.y)??0)+w,k=g==null?void 0:g.position,I=k?iTe[k]:null;if(!k||!I)return null;if(a)return At.createElement(a,{connectionLineType:n,connectionLineStyle:r,fromNode:i,fromHandle:g,fromX:_,fromY:N,toX:l,toY:A,fromPosition:k,toPosition:I,connectionStatus:s});let P="";const M={sourceX:_,sourceY:N,sourcePosition:k,targetX:l,targetY:A,targetPosition:I};return n===Qd.Bezier?[P]=qO(M):n===Qd.Step?[P]=H5({...M,borderRadius:0}):n===Qd.SmoothStep?[P]=H5(M):n===Qd.SimpleBezier?[P]=GO(M):P=`M${_},${N} ${l},${A}`,At.createElement("path",{d:P,fill:"none",className:"react-flow__connection-path",style:r})};CQ.displayName="ConnectionLine";const oTe=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function lTe({containerStyle:t,style:e,type:r,component:n}){const{nodeId:a,handleType:s,nodesConnectable:i,width:o,height:l,connectionStatus:A}=ka(oTe,zi);return!(a&&s&&o&&i)?null:At.createElement("svg",{style:t,width:o,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},At.createElement("g",{className:to(["react-flow__connection",A])},At.createElement(CQ,{nodeId:a,handleType:s,style:e,type:r,CustomComponent:n,connectionStatus:A})))}function MD(t,e){return J.useRef(null),Ys(),J.useMemo(()=>e(t),[t])}const EQ=({nodeTypes:t,edgeTypes:e,onMove:r,onMoveStart:n,onMoveEnd:a,onInit:s,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:l,onEdgeDoubleClick:A,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:m,onNodeContextMenu:g,onSelectionContextMenu:b,onSelectionStart:w,onSelectionEnd:_,connectionLineType:N,connectionLineStyle:k,connectionLineComponent:I,connectionLineContainerStyle:P,selectionKeyCode:M,selectionOnDrag:D,selectionMode:C,multiSelectionKeyCode:B,panActivationKeyCode:T,zoomActivationKeyCode:O,deleteKeyCode:F,onlyRenderVisibleElements:L,elementsSelectable:Q,selectNodesOnDrag:q,defaultViewport:ie,translateExtent:Z,minZoom:ee,maxZoom:ne,preventScrolling:z,defaultMarkerColor:W,zoomOnScroll:ce,zoomOnPinch:j,panOnScroll:K,panOnScrollSpeed:X,panOnScrollMode:te,zoomOnDoubleClick:le,panOnDrag:de,onPaneClick:me,onPaneMouseEnter:ge,onPaneMouseMove:Se,onPaneMouseLeave:xe,onPaneScroll:ae,onPaneContextMenu:Fe,onEdgeContextMenu:Xe,onEdgeMouseEnter:De,onEdgeMouseMove:Ce,onEdgeMouseLeave:ze,onReconnect:tt,onReconnectStart:it,onReconnectEnd:dt,reconnectRadius:Ct,noDragClassName:ut,noWheelClassName:Nt,noPanClassName:It,elevateEdgesOnSelect:Kt,disableKeyboardA11y:Ut,nodeOrigin:Ht,nodeExtent:Yt,rfId:Mt})=>{const kt=MD(t,U4e),xt=MD(e,V4e);return sTe(s),At.createElement(D4e,{onPaneClick:me,onPaneMouseEnter:ge,onPaneMouseMove:Se,onPaneMouseLeave:xe,onPaneContextMenu:Fe,onPaneScroll:ae,deleteKeyCode:F,selectionKeyCode:M,selectionOnDrag:D,selectionMode:C,onSelectionStart:w,onSelectionEnd:_,multiSelectionKeyCode:B,panActivationKeyCode:T,zoomActivationKeyCode:O,elementsSelectable:Q,onMove:r,onMoveStart:n,onMoveEnd:a,zoomOnScroll:ce,zoomOnPinch:j,zoomOnDoubleClick:le,panOnScroll:K,panOnScrollSpeed:X,panOnScrollMode:te,panOnDrag:de,defaultViewport:ie,translateExtent:Z,minZoom:ee,maxZoom:ne,onSelectionContextMenu:b,preventScrolling:z,noDragClassName:ut,noWheelClassName:Nt,noPanClassName:It,disableKeyboardA11y:Ut},At.createElement(aTe,null,At.createElement(rTe,{edgeTypes:xt,onEdgeClick:o,onEdgeDoubleClick:A,onlyRenderVisibleElements:L,onEdgeContextMenu:Xe,onEdgeMouseEnter:De,onEdgeMouseMove:Ce,onEdgeMouseLeave:ze,onReconnect:tt,onReconnectStart:it,onReconnectEnd:dt,reconnectRadius:Ct,defaultMarkerColor:W,noPanClassName:It,elevateEdgesOnSelect:!!Kt,disableKeyboardA11y:Ut,rfId:Mt},At.createElement(lTe,{style:k,type:N,component:I,containerStyle:P})),At.createElement("div",{className:"react-flow__edgelabel-renderer"}),At.createElement(j4e,{nodeTypes:kt,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:m,onNodeContextMenu:g,selectNodesOnDrag:q,onlyRenderVisibleElements:L,noPanClassName:It,noDragClassName:ut,disableKeyboardA11y:Ut,nodeOrigin:Ht,nodeExtent:Yt,rfId:Mt})))};EQ.displayName="GraphView";var cTe=J.memo(EQ);const K5=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],kd={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:K5,nodeExtent:K5,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Rh.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:MSe,isValidConnection:void 0},uTe=()=>YCe((t,e)=>({...kd,setNodes:r=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:s}=e();t({nodeInternals:GE(r,n,a,s)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=e();t({edges:r.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(r,n)=>{const a=typeof r<"u",s=typeof n<"u",i=a?GE(r,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:i,edges:s?n:[],hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:l,nodeOrigin:A}=e(),d=l==null?void 0:l.querySelector(".react-flow__viewport");if(!d)return;const h=window.getComputedStyle(d),{m22:m}=new window.DOMMatrixReadOnly(h.transform),g=r.reduce((w,_)=>{const N=a.get(_.id);if(N!=null&&N.hidden)a.set(N.id,{...N,[Ha]:{...N[Ha],handleBounds:void 0}});else if(N){const k=hT(_.nodeElement);!!(k.width&&k.height&&(N.width!==k.width||N.height!==k.height||_.forceUpdate))&&(a.set(N.id,{...N,[Ha]:{...N[Ha],handleBounds:{source:kD(".source",_.nodeElement,m,A),target:kD(".target",_.nodeElement,m,A)}},...k}),w.push({id:N.id,type:"dimensions",dimensions:k}))}return w},[]);uQ(a,A);const b=i||s&&!i&&AQ(e,{initial:!0,...o});t({nodeInternals:new Map(a),fitViewOnInitDone:b}),(g==null?void 0:g.length)>0&&(n==null||n(g))},updateNodePositions:(r,n=!0,a=!1)=>{const{triggerNodeChanges:s}=e(),i=r.map(o=>{const l={id:o.id,type:"position",dragging:a};return n&&(l.positionAbsolute=o.positionAbsolute,l.position=o.position),l});s(i)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:s,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:l}=e();if(r!=null&&r.length){if(s){const A=fQ(r,o()),d=GE(A,a,i,l);t({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=e();let i,o=null;n?i=r.map(l=>Ld(l,!0)):(i=Z0(s(),r),o=Z0(a,[])),n2({changedNodes:i,changedEdges:o,get:e,set:t})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=e();let i,o=null;n?i=r.map(l=>Ld(l,!0)):(i=Z0(a,r),o=Z0(s(),[])),n2({changedNodes:o,changedEdges:i,get:e,set:t})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:a,getNodes:s}=e(),i=r||s(),o=n||a,l=i.map(d=>(d.selected=!1,Ld(d.id,!1))),A=o.map(d=>Ld(d.id,!1));n2({changedNodes:l,changedEdges:A,get:e,set:t})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:a}=e();n==null||n.scaleExtent([r,a]),t({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:a}=e();n==null||n.scaleExtent([a,r]),t({maxZoom:r})},setTranslateExtent:r=>{var n;(n=e().d3Zoom)==null||n.translateExtent(r),t({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=e(),s=n().filter(o=>o.selected).map(o=>Ld(o.id,!1)),i=r.filter(o=>o.selected).map(o=>Ld(o.id,!1));n2({changedNodes:s,changedEdges:i,get:e,set:t})},setNodeExtent:r=>{const{nodeInternals:n}=e();n.forEach(a=>{a.positionAbsolute=mT(a.position,r)}),t({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:a,height:s,d3Zoom:i,d3Selection:o,translateExtent:l}=e();if(!i||!o||!r.x&&!r.y)return!1;const A=nf.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[a,s]],h=i==null?void 0:i.constrain()(A,d,l);return i.transform(o,h),n[0]!==h.x||n[1]!==h.y||n[2]!==h.k},cancelConnection:()=>t({connectionNodeId:kd.connectionNodeId,connectionHandleId:kd.connectionHandleId,connectionHandleType:kd.connectionHandleType,connectionStatus:kd.connectionStatus,connectionStartHandle:kd.connectionStartHandle,connectionEndHandle:kd.connectionEndHandle}),reset:()=>t({...kd})}),Object.is),_T=({children:t})=>{const e=J.useRef(null);return e.current||(e.current=uTe()),At.createElement(NSe,{value:e.current},t)};_T.displayName="ReactFlowProvider";const _Q=({children:t})=>J.useContext(tb)?At.createElement(At.Fragment,null,t):At.createElement(_T,null,t);_Q.displayName="ReactFlowWrapper";const ATe={input:nQ,default:G5,output:sQ,group:CT},dTe={default:Py,straight:vT,step:xT,smoothstep:rb,simplebezier:gT},fTe=[0,0],hTe=[15,15],mTe={x:0,y:0,zoom:1},pTe={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},SQ=J.forwardRef(({nodes:t,edges:e,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:s=ATe,edgeTypes:i=dTe,onNodeClick:o,onEdgeClick:l,onInit:A,onMove:d,onMoveStart:h,onMoveEnd:m,onConnect:g,onConnectStart:b,onConnectEnd:w,onClickConnectStart:_,onClickConnectEnd:N,onNodeMouseEnter:k,onNodeMouseMove:I,onNodeMouseLeave:P,onNodeContextMenu:M,onNodeDoubleClick:D,onNodeDragStart:C,onNodeDrag:B,onNodeDragStop:T,onNodesDelete:O,onEdgesDelete:F,onSelectionChange:L,onSelectionDragStart:Q,onSelectionDrag:q,onSelectionDragStop:ie,onSelectionContextMenu:Z,onSelectionStart:ee,onSelectionEnd:ne,connectionMode:z=Rh.Strict,connectionLineType:W=Qd.Bezier,connectionLineStyle:ce,connectionLineComponent:j,connectionLineContainerStyle:K,deleteKeyCode:X="Backspace",selectionKeyCode:te="Shift",selectionOnDrag:le=!1,selectionMode:de=Bx.Full,panActivationKeyCode:me="Space",multiSelectionKeyCode:ge=Uy()?"Meta":"Control",zoomActivationKeyCode:Se=Uy()?"Meta":"Control",snapToGrid:xe=!1,snapGrid:ae=hTe,onlyRenderVisibleElements:Fe=!1,selectNodesOnDrag:Xe=!0,nodesDraggable:De,nodesConnectable:Ce,nodesFocusable:ze,nodeOrigin:tt=fTe,edgesFocusable:it,edgesUpdatable:dt,elementsSelectable:Ct,defaultViewport:ut=mTe,minZoom:Nt=.5,maxZoom:It=2,translateExtent:Kt=K5,preventScrolling:Ut=!0,nodeExtent:Ht,defaultMarkerColor:Yt="#b1b1b7",zoomOnScroll:Mt=!0,zoomOnPinch:kt=!0,panOnScroll:xt=!1,panOnScrollSpeed:vr=.5,panOnScrollMode:Wt=ch.Free,zoomOnDoubleClick:un=!0,panOnDrag:pr=!0,onPaneClick:Rr,onPaneMouseEnter:kn,onPaneMouseMove:Nr,onPaneMouseLeave:ls,onPaneScroll:en,onPaneContextMenu:ea,children:ha,onEdgeContextMenu:Lr,onEdgeDoubleClick:tr,onEdgeMouseEnter:Qr,onEdgeMouseMove:cs,onEdgeMouseLeave:qn,onEdgeUpdate:wa,onEdgeUpdateStart:Es,onEdgeUpdateEnd:Qt,onReconnect:An,onReconnectStart:tn,onReconnectEnd:In,reconnectRadius:Un=10,edgeUpdaterRadius:Kn=10,onNodesChange:fe,onEdgesChange:Ne,noDragClassName:Ee="nodrag",noWheelClassName:_e="nowheel",noPanClassName:Te="nopan",fitView:ke=!1,fitViewOptions:qe,connectOnClick:rt=!0,attributionPosition:Qe,proOptions:We,defaultEdgeOptions:Je,elevateNodesOnSelect:yt=!0,elevateEdgesOnSelect:Bt=!1,disableKeyboardA11y:Pt=!1,autoPanOnConnect:Tt=!0,autoPanOnNodeDrag:Ft=!0,connectionRadius:cr=20,isValidConnection:Ur,onError:Mr,style:Hr,id:Ia,nodeDragThreshold:fi,...Fa},us)=>{const Ga=Ia||"1";return At.createElement("div",{...Fa,style:{...Hr,...pTe},ref:us,className:to(["react-flow",a]),"data-testid":"rf__wrapper",id:Ia},At.createElement(_Q,null,At.createElement(cTe,{onInit:A,onMove:d,onMoveStart:h,onMoveEnd:m,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:k,onNodeMouseMove:I,onNodeMouseLeave:P,onNodeContextMenu:M,onNodeDoubleClick:D,nodeTypes:s,edgeTypes:i,connectionLineType:W,connectionLineStyle:ce,connectionLineComponent:j,connectionLineContainerStyle:K,selectionKeyCode:te,selectionOnDrag:le,selectionMode:de,deleteKeyCode:X,multiSelectionKeyCode:ge,panActivationKeyCode:me,zoomActivationKeyCode:Se,onlyRenderVisibleElements:Fe,selectNodesOnDrag:Xe,defaultViewport:ut,translateExtent:Kt,minZoom:Nt,maxZoom:It,preventScrolling:Ut,zoomOnScroll:Mt,zoomOnPinch:kt,zoomOnDoubleClick:un,panOnScroll:xt,panOnScrollSpeed:vr,panOnScrollMode:Wt,panOnDrag:pr,onPaneClick:Rr,onPaneMouseEnter:kn,onPaneMouseMove:Nr,onPaneMouseLeave:ls,onPaneScroll:en,onPaneContextMenu:ea,onSelectionContextMenu:Z,onSelectionStart:ee,onSelectionEnd:ne,onEdgeContextMenu:Lr,onEdgeDoubleClick:tr,onEdgeMouseEnter:Qr,onEdgeMouseMove:cs,onEdgeMouseLeave:qn,onReconnect:An??wa,onReconnectStart:tn??Es,onReconnectEnd:In??Qt,reconnectRadius:Un??Kn,defaultMarkerColor:Yt,noDragClassName:Ee,noWheelClassName:_e,noPanClassName:Te,elevateEdgesOnSelect:Bt,rfId:Ga,disableKeyboardA11y:Pt,nodeOrigin:tt,nodeExtent:Ht}),At.createElement(i4e,{nodes:t,edges:e,defaultNodes:r,defaultEdges:n,onConnect:g,onConnectStart:b,onConnectEnd:w,onClickConnectStart:_,onClickConnectEnd:N,nodesDraggable:De,nodesConnectable:Ce,nodesFocusable:ze,edgesFocusable:it,edgesUpdatable:dt,elementsSelectable:Ct,elevateNodesOnSelect:yt,minZoom:Nt,maxZoom:It,nodeExtent:Ht,onNodesChange:fe,onEdgesChange:Ne,snapToGrid:xe,snapGrid:ae,connectionMode:z,translateExtent:Kt,connectOnClick:rt,defaultEdgeOptions:Je,fitView:ke,fitViewOptions:qe,onNodesDelete:O,onEdgesDelete:F,onNodeDragStart:C,onNodeDrag:B,onNodeDragStop:T,onSelectionDrag:q,onSelectionDragStart:Q,onSelectionDragStop:ie,noPanClassName:Te,nodeOrigin:tt,rfId:Ga,autoPanOnConnect:Tt,autoPanOnNodeDrag:Ft,onError:Mr,connectionRadius:cr,isValidConnection:Ur,nodeDragThreshold:fi}),At.createElement(a4e,{onSelectionChange:L}),ha,At.createElement(ISe,{proOptions:We,position:Qe}),At.createElement(A4e,{rfId:Ga,disableKeyboardA11y:Pt})))});SQ.displayName="ReactFlow";function TQ(t){return e=>{const[r,n]=J.useState(e),a=J.useCallback(s=>n(i=>t(s,i)),[]);return[r,n,a]}}const gTe=TQ(fQ),xTe=TQ(_4e);function vTe(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},At.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function yTe(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},At.createElement("path",{d:"M0 0h32v4.2H0z"}))}function wTe(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},At.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function bTe(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},At.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function CTe(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},At.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Eg=({children:t,className:e,...r})=>At.createElement("button",{type:"button",className:to(["react-flow__controls-button",e]),...r},t);Eg.displayName="ControlButton";const ETe=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),BQ=({style:t,showZoom:e=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:i,onFitView:o,onInteractiveChange:l,className:A,children:d,position:h="bottom-left"})=>{const m=Ys(),[g,b]=J.useState(!1),{isInteractive:w,minZoomReached:_,maxZoomReached:N}=ka(ETe,zi),{zoomIn:k,zoomOut:I,fitView:P}=nb();if(J.useEffect(()=>{b(!0)},[]),!g)return null;const M=()=>{k(),s==null||s()},D=()=>{I(),i==null||i()},C=()=>{P(a),o==null||o()},B=()=>{m.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),l==null||l(!w)};return At.createElement(PO,{className:to(["react-flow__controls",A]),position:h,style:t,"data-testid":"rf__controls"},e&&At.createElement(At.Fragment,null,At.createElement(Eg,{onClick:M,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:N},At.createElement(vTe,null)),At.createElement(Eg,{onClick:D,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:_},At.createElement(yTe,null))),r&&At.createElement(Eg,{className:"react-flow__controls-fitview",onClick:C,title:"fit view","aria-label":"fit view"},At.createElement(wTe,null)),n&&At.createElement(Eg,{className:"react-flow__controls-interactive",onClick:B,title:"toggle interactivity","aria-label":"toggle interactivity"},w?At.createElement(CTe,null):At.createElement(bTe,null)),d)};BQ.displayName="Controls";var _Te=J.memo(BQ),kc;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(kc||(kc={}));function STe({color:t,dimensions:e,lineWidth:r}){return At.createElement("path",{stroke:t,strokeWidth:r,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function TTe({color:t,radius:e}){return At.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const BTe={[kc.Dots]:"#91919a",[kc.Lines]:"#eee",[kc.Cross]:"#e2e2e2"},NTe={[kc.Dots]:1,[kc.Lines]:1,[kc.Cross]:6},kTe=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function NQ({id:t,variant:e=kc.Dots,gap:r=20,size:n,lineWidth:a=1,offset:s=2,color:i,style:o,className:l}){const A=J.useRef(null),{transform:d,patternId:h}=ka(kTe,zi),m=i||BTe[e],g=n||NTe[e],b=e===kc.Dots,w=e===kc.Cross,_=Array.isArray(r)?r:[r,r],N=[_[0]*d[2]||1,_[1]*d[2]||1],k=g*d[2],I=w?[k,k]:N,P=b?[k/s,k/s]:[I[0]/s,I[1]/s];return At.createElement("svg",{className:to(["react-flow__background",l]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:A,"data-testid":"rf__background"},At.createElement("pattern",{id:h+t,x:d[0]%N[0],y:d[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${P[0]},-${P[1]})`},b?At.createElement(TTe,{color:m,radius:k/s}):At.createElement(STe,{dimensions:I,color:m,lineWidth:a})),At.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+t})`}))}NQ.displayName="Background";var ITe=J.memo(NQ);function FTe(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),e&&(n.href=e),a.href=t,a.href}const RTe=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function sf(t){const e=[];for(let r=0,n=t.length;r<n;r++)e.push(t[r]);return e}let M0=null;function kQ(t={}){return M0||(t.includeStyleProperties?(M0=t.includeStyleProperties,M0):(M0=sf(window.getComputedStyle(document.documentElement)),M0))}function Oy(t,e){const n=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function DTe(t){const e=Oy(t,"border-left-width"),r=Oy(t,"border-right-width");return t.clientWidth+e+r}function LTe(t){const e=Oy(t,"border-top-width"),r=Oy(t,"border-bottom-width");return t.clientHeight+e+r}function IQ(t,e={}){const r=e.width||DTe(t),n=e.height||LTe(t);return{width:r,height:n}}function UTe(){let t,e;try{e=process}catch{}const r=e&&e.env?e.env.devicePixelRatio:null;return r&&(t=parseInt(r,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const Ko=16384;function MTe(t){(t.width>Ko||t.height>Ko)&&(t.width>Ko&&t.height>Ko?t.width>t.height?(t.height*=Ko/t.width,t.width=Ko):(t.width*=Ko/t.height,t.height=Ko):t.width>Ko?(t.height*=Ko/t.width,t.width=Ko):(t.width*=Ko/t.height,t.height=Ko))}function Qy(t){return new Promise((e,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>e(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=t})}async function PTe(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function jTe(t,e,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${e}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${e} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(t),PTe(a)}const _o=(t,e)=>{if(t instanceof e)return!0;const r=Object.getPrototypeOf(t);return r===null?!1:r.constructor.name===e.name||_o(r,e)};function OTe(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function QTe(t,e){return kQ(e).map(r=>{const n=t.getPropertyValue(r),a=t.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function HTe(t,e,r,n){const a=`.${t}:${e}`,s=r.cssText?OTe(r):QTe(r,n);return document.createTextNode(`${a}{${s}}`)}function PD(t,e,r,n){const a=window.getComputedStyle(t,r),s=a.getPropertyValue("content");if(s===""||s==="none")return;const i=RTe();try{e.className=`${e.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(HTe(i,r,a,n)),e.appendChild(o)}function VTe(t,e,r){PD(t,e,":before",r),PD(t,e,":after",r)}const jD="application/font-woff",OD="image/jpeg",zTe={woff:jD,woff2:jD,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:OD,jpeg:OD,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function GTe(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function ST(t){const e=GTe(t).toLowerCase();return zTe[e]||""}function qTe(t){return t.split(/,/)[1]}function W5(t){return t.search(/^(data:)/)!==-1}function KTe(t,e){return`data:${e};base64,${t}`}async function FQ(t,e,r){const n=await fetch(t,e);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((s,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{s(r({res:n,result:o.result}))}catch(l){i(l)}},o.readAsDataURL(a)})}const $E={};function WTe(t,e,r){let n=t.replace(/\?.*/,"");return r&&(n=t),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),e?`[${e}]${n}`:n}async function TT(t,e,r){const n=WTe(t,e,r.includeQueryParams);if($E[n]!=null)return $E[n];r.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let a;try{const s=await FQ(t,r.fetchRequestInit,({res:i,result:o})=>(e||(e=i.headers.get("Content-Type")||""),qTe(o)));a=KTe(s,e)}catch(s){a=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${t}`;s&&(i=typeof s=="string"?s:s.message),i&&console.warn(i)}return $E[n]=a,a}async function $Te(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):Qy(e)}async function YTe(t,e){if(t.currentSrc){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=t.clientWidth,s.height=t.clientHeight,i==null||i.drawImage(t,0,0,s.width,s.height);const o=s.toDataURL();return Qy(o)}const r=t.poster,n=ST(r),a=await TT(r,n,e);return Qy(a)}async function XTe(t,e){var r;try{if(!((r=t==null?void 0:t.contentDocument)===null||r===void 0)&&r.body)return await ab(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function JTe(t,e){return _o(t,HTMLCanvasElement)?$Te(t):_o(t,HTMLVideoElement)?YTe(t,e):_o(t,HTMLIFrameElement)?XTe(t,e):t.cloneNode(RQ(t))}const ZTe=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",RQ=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function eBe(t,e,r){var n,a;if(RQ(e))return e;let s=[];return ZTe(t)&&t.assignedNodes?s=sf(t.assignedNodes()):_o(t,HTMLIFrameElement)&&(!((n=t.contentDocument)===null||n===void 0)&&n.body)?s=sf(t.contentDocument.body.childNodes):s=sf(((a=t.shadowRoot)!==null&&a!==void 0?a:t).childNodes),s.length===0||_o(t,HTMLVideoElement)||await s.reduce((i,o)=>i.then(()=>ab(o,r)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function tBe(t,e,r){const n=e.style;if(!n)return;const a=window.getComputedStyle(t);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):kQ(r).forEach(s=>{let i=a.getPropertyValue(s);s==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),_o(t,HTMLIFrameElement)&&s==="display"&&i==="inline"&&(i="block"),s==="d"&&e.getAttribute("d")&&(i=`path(${e.getAttribute("d")})`),n.setProperty(s,i,a.getPropertyPriority(s))})}function rBe(t,e){_o(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),_o(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function nBe(t,e){if(_o(t,HTMLSelectElement)){const r=e,n=Array.from(r.children).find(a=>t.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function aBe(t,e,r){return _o(e,Element)&&(tBe(t,e,r),VTe(t,e,r),rBe(t,e),nBe(t,e)),e}async function sBe(t,e){const r=t.querySelectorAll?t.querySelectorAll("use"):[];if(r.length===0)return t;const n={};for(let s=0;s<r.length;s++){const o=r[s].getAttribute("xlink:href");if(o){const l=t.querySelector(o),A=document.querySelector(o);!l&&A&&!n[o]&&(n[o]=await ab(A,e,!0))}}const a=Object.values(n);if(a.length){const s="http://www.w3.org/1999/xhtml",i=document.createElementNS(s,"svg");i.setAttribute("xmlns",s),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(s,"defs");i.appendChild(o);for(let l=0;l<a.length;l++)o.appendChild(a[l]);t.appendChild(i)}return t}async function ab(t,e,r){return!r&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(n=>JTe(n,e)).then(n=>eBe(t,n,e)).then(n=>aBe(t,n,e)).then(n=>sBe(n,e))}const DQ=/url\((['"]?)([^'"]+?)\1\)/g,iBe=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,oBe=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function lBe(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function cBe(t){const e=[];return t.replace(DQ,(r,n,a)=>(e.push(a),r)),e.filter(r=>!W5(r))}async function uBe(t,e,r,n,a){try{const s=r?FTe(e,r):e,i=ST(e);let o;return a||(o=await TT(s,i,n)),t.replace(lBe(e),`$1${o}$3`)}catch{}return t}function ABe(t,{preferredFontFormat:e}){return e?t.replace(oBe,r=>{for(;;){const[n,,a]=iBe.exec(r)||[];if(!a)return"";if(a===e)return`src: ${n};`}}):t}function LQ(t){return t.search(DQ)!==-1}async function UQ(t,e,r){if(!LQ(t))return t;const n=ABe(t,r);return cBe(n).reduce((s,i)=>s.then(o=>uBe(o,i,e,r)),Promise.resolve(n))}async function P0(t,e,r){var n;const a=(n=e.style)===null||n===void 0?void 0:n.getPropertyValue(t);if(a){const s=await UQ(a,null,r);return e.style.setProperty(t,s,e.style.getPropertyPriority(t)),!0}return!1}async function dBe(t,e){await P0("background",t,e)||await P0("background-image",t,e),await P0("mask",t,e)||await P0("-webkit-mask",t,e)||await P0("mask-image",t,e)||await P0("-webkit-mask-image",t,e)}async function fBe(t,e){const r=_o(t,HTMLImageElement);if(!(r&&!W5(t.src))&&!(_o(t,SVGImageElement)&&!W5(t.href.baseVal)))return;const n=r?t.src:t.href.baseVal,a=await TT(n,ST(n),e);await new Promise((s,i)=>{t.onload=s,t.onerror=e.onImageErrorHandler?(...l)=>{try{s(e.onImageErrorHandler(...l))}catch(A){i(A)}}:i;const o=t;o.decode&&(o.decode=s),o.loading==="lazy"&&(o.loading="eager"),r?(t.srcset="",t.src=a):t.href.baseVal=a})}async function hBe(t,e){const n=sf(t.childNodes).map(a=>MQ(a,e));await Promise.all(n).then(()=>t)}async function MQ(t,e){_o(t,Element)&&(await dBe(t,e),await fBe(t,e),await hBe(t,e))}function mBe(t,e){const{style:r}=t;e.backgroundColor&&(r.backgroundColor=e.backgroundColor),e.width&&(r.width=`${e.width}px`),e.height&&(r.height=`${e.height}px`);const n=e.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),t}const QD={};async function HD(t){let e=QD[t];if(e!=null)return e;const n=await(await fetch(t)).text();return e={url:t,cssText:n},QD[t]=e,e}async function VD(t,e){let r=t.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(n,"$1");return o.startsWith("https://")||(o=new URL(o,t.url).href),FQ(o,e.fetchRequestInit,({result:l})=>(r=r.replace(i,`url(${l})`),[i,l]))});return Promise.all(s).then(()=>r)}function zD(t){if(t==null)return[];const e=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=t.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=a.exec(n);if(l===null)break;e.push(l[0])}n=n.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let l=s.exec(n);if(l===null){if(l=o.exec(n),l===null)break;s.lastIndex=o.lastIndex}else o.lastIndex=s.lastIndex;e.push(l[0])}return e}async function pBe(t,e){const r=[],n=[];return t.forEach(a=>{if("cssRules"in a)try{sf(a.cssRules||[]).forEach((s,i)=>{if(s.type===CSSRule.IMPORT_RULE){let o=i+1;const l=s.href,A=HD(l).then(d=>VD(d,e)).then(d=>zD(d).forEach(h=>{try{a.insertRule(h,h.startsWith("@import")?o+=1:a.cssRules.length)}catch(m){console.error("Error inserting rule from remote css",{rule:h,error:m})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(A)}})}catch(s){const i=t.find(o=>o.href==null)||document.styleSheets[0];a.href!=null&&n.push(HD(a.href).then(o=>VD(o,e)).then(o=>zD(o).forEach(l=>{i.insertRule(l,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(t.forEach(a=>{if("cssRules"in a)try{sf(a.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),r))}function gBe(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>LQ(e.style.getPropertyValue("src")))}async function xBe(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=sf(t.ownerDocument.styleSheets),n=await pBe(r,e);return gBe(n)}function PQ(t){return t.trim().replace(/["']/g,"")}function vBe(t){const e=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{e.add(PQ(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(t),e}async function yBe(t,e){const r=await xBe(t,e),n=vBe(t);return(await Promise.all(r.filter(s=>n.has(PQ(s.style.fontFamily))).map(s=>{const i=s.parentStyleSheet?s.parentStyleSheet.href:null;return UQ(s.cssText,i,e)}))).join(`
`)}async function wBe(t,e){const r=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await yBe(t,e);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)}}async function bBe(t,e={}){const{width:r,height:n}=IQ(t,e),a=await ab(t,e,!0);return await wBe(a,e),await MQ(a,e),mBe(a,e),await jTe(a,r,n)}async function CBe(t,e={}){const{width:r,height:n}=IQ(t,e),a=await bBe(t,e),s=await Qy(a),i=document.createElement("canvas"),o=i.getContext("2d"),l=e.pixelRatio||UTe(),A=e.canvasWidth||r,d=e.canvasHeight||n;return i.width=A*l,i.height=d*l,e.skipAutoScale||MTe(i),i.style.width=`${A}`,i.style.height=`${d}`,e.backgroundColor&&(o.fillStyle=e.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(s,0,0,i.width,i.height),i}async function sb(t,e={}){return(await CBe(t,e)).toDataURL()}const GD="recursosAprendizaje_mindMaps_v2",EBe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1v4m0 0h-4m4-4l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 0h-4m4 4l-5-5"})}),_Be=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),SBe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),TBe=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),$5=(t,e)=>t.children.length===0?e:t.children.reduce((r,n)=>r+$5(n,e),0),Y5=(t,e="tree")=>{const r=[],n=[];if(e==="tree"){const i=(o,l,A,d)=>{const h=l*250;r.push({id:o.id,position:{x:h,y:A},data:{label:o.label},type:l===0?"input":"default",sourcePosition:ir.Right,targetPosition:ir.Left});const m=$5(o,80);let g=A-m/2;o.children.forEach(b=>{const w=$5(b,80),_=g+w/2;n.push({id:`e-${o.id}-${b.id}`,source:o.id,target:b.id,type:"smoothstep",animated:!0}),i(b,l+1,_),g+=w})};i(t,0,0)}else{r.push({id:t.id,position:{x:0,y:0},data:{label:t.label},type:"input"});const i=250,o=450;t.children.forEach((l,A)=>{const d=A/t.children.length*2*Math.PI,h=i*Math.cos(d),m=i*Math.sin(d);r.push({id:l.id,position:{x:h,y:m},data:{label:l.label}}),n.push({id:`e-${t.id}-${l.id}`,source:t.id,target:l.id,type:"smoothstep"}),l.children.forEach((g,b)=>{const w=d+(b-(l.children.length-1)/2)*.2,_=h+o*.5*Math.cos(w),N=m+o*.5*Math.sin(w);r.push({id:g.id,position:{x:_,y:N},data:{label:g.label}}),n.push({id:`e-${l.id}-${g.id}`,source:l.id,target:g.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},jQ=({node:t,onUpdate:e,onAddChild:r,onDelete:n,level:a=0})=>{const s=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return c.jsxs("div",{className:`pl-4 ${a>0?"border-l "+i[a-1%i.length]:""}`,children:[c.jsx("div",{className:`p-2 rounded-lg my-1 ${s[a%s.length]}`,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:t.label,onChange:o=>e(t.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),c.jsx("button",{onClick:()=>r(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),a>0&&c.jsx("button",{onClick:()=>n(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),t.children.map(o=>c.jsx(jQ,{node:o,onUpdate:e,onAddChild:r,onDelete:n,level:a+1},o.id))]})},BBe=({mapData:t,onBack:e,onSave:r})=>{const[n,a]=J.useState(t.treeData),[s,i]=J.useState("tree"),[o,l]=J.useState(!1),[A,d,h]=gTe([]),[m,g,b]=xTe([]),{fitView:w}=nb();J.useEffect(()=>{const{nodes:M,edges:D}=Y5(n,s);d(M),g(D),setTimeout(()=>w({duration:300}),50)},[n,s,d,g,w]);const _=(M,D)=>{const C=JSON.parse(JSON.stringify(n)),B=T=>T.id===M?(T.label=D,!0):T.children.some(B);B(C),a(C)},N=M=>{const D=JSON.parse(JSON.stringify(n)),C=B=>B.id===M?(B.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):B.children.some(C);C(D),a(D)},k=M=>{const D=JSON.parse(JSON.stringify(n)),C=B=>{const T=B.children.findIndex(O=>O.id===M);return T!==-1?(B.children.splice(T,1),!0):B.children.some(C)};C(D),a(D)},I=()=>{l(!0);const{nodes:M,edges:D}=Y5(n,s);r({...t,treeData:n,nodes:M,edges:D}),setTimeout(()=>l(!1),1e3)},P=async M=>{const D=document.querySelector(".react-flow");D&&sb(D,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(C=>{{const B=document.createElement("a");B.download=`${t.tema}.png`,B.href=C,B.click()}}).catch(C=>console.error("oops, something went wrong!",C))};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:t.tema}),c.jsx("button",{onClick:e,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:[c.jsxs(SQ,{nodes:A,edges:m,onNodesChange:h,onEdgesChange:b,fitView:!0,children:[c.jsx(_Te,{}),c.jsx(ITe,{})]}),c.jsx("div",{className:"absolute top-4 right-4 flex gap-2",children:c.jsxs("button",{onClick:()=>{},className:"bg-white/80 backdrop-blur-sm dark:bg-slate-800/80 p-2 rounded-lg shadow border dark:border-slate-700 flex items-center gap-2 text-sm",children:[c.jsx(EBe,{})," Pantalla completa"]})})]}),c.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),c.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[c.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[c.jsx(_Be,{})," Vista en árbol"]}),c.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[c.jsx(SBe,{})," Vista con tema central"]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:c.jsx(jQ,{node:n,onUpdate:_,onAddChild:N,onDelete:k})}),c.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>P(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),c.jsx("button",{onClick:I,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},NBe=({onBack:t})=>{const[e,r]=J.useState("list"),[n,a]=J.useState([]),[s,i]=J.useState(null),[o,l]=J.useState(!1),[A,d]=J.useState(""),[h,m]=J.useState(""),[g,b]=J.useState("");J.useEffect(()=>{try{const M=localStorage.getItem(GD);M&&a(JSON.parse(M))}catch(M){console.error("Error loading mind maps",M)}},[]);const w=M=>{a(M),localStorage.setItem(GD,JSON.stringify(M))},_=async M=>{if(M.preventDefault(),!A.trim()){alert("El tema es obligatorio.");return}l(!0);const D=`Basado en el tema central "${A}", y considerando el contenido adicional "${g}", genera una estructura jerárquica detallada para un mapa mental con al menos 3 niveles de profundidad. La estructura debe ser un desglose lógico del tema en subtemas.

La respuesta DEBE ser un único objeto JSON válido. Cada nodo en el JSON debe tener las propiedades "id" (un string único generado con crypto.randomUUID()), "label" (el texto del nodo), y "children" (un array de nodos hijos con la misma estructura).`;try{const B=await new zl({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:D,config:{responseMimeType:"application/json"}}),T=JSON.parse(B.text.trim()),{nodes:O,edges:F}=Y5(T),L={id:crypto.randomUUID(),tema:A,nivel:h,treeData:T,nodes:O,edges:F,createdAt:new Date().toISOString()};i(L),r("editor")}catch(C){console.error("AI Generation Error:",C),alert("Hubo un error al generar el mapa mental con la IA. Inténtelo de nuevo.")}finally{l(!1)}},N=M=>{const C=n.findIndex(B=>B.id===M.id)>-1?n.map(B=>B.id===M.id?M:B):[M,...n];w(C)},k=M=>{i(M),r("editor")},I=M=>{window.confirm("¿Eliminar este mapa mental?")&&w(n.filter(D=>D.id!==M))},P=()=>{switch(e){case"editor":return s?c.jsx(_T,{children:c.jsx(BBe,{mapData:s,onBack:()=>r("list"),onSave:N})}):null;case"config":return c.jsxs("div",{className:"max-w-2xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),c.jsx("button",{onClick:()=>r("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),c.jsxs("form",{onSubmit:_,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"tema",value:A,onChange:M=>d(M.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),c.jsx("textarea",{id:"contenido",value:g,onChange:M=>b(M.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsx("div",{className:"flex justify-end pt-4",children:c.jsx("button",{type:"submit",disabled:o,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:o?c.jsx(TBe,{}):"Generar Mapa con IA"})})]})]});case"list":default:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),c.jsx("button",{onClick:()=>r("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.length>0?n.map(M=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[c.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:M.tema}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(M.createdAt).toLocaleDateString("es-CL")]}),c.jsxs("div",{className:"mt-4 flex gap-2",children:[c.jsx("button",{onClick:()=>k(M),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>I(M.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},M.id)):c.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("span",{className:"text-4xl",children:"🧠"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),P()]})},kBe=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),IBe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),FBe=({onBack:t})=>{const[e,r]=J.useState("Media"),[n,a]=J.useState(10),[s,i]=J.useState(!1),[o,l]=J.useState(Array(10).fill("")),[A,d]=J.useState(""),[h,m]=J.useState(null),[g,b]=J.useState({ai:!1,puzzle:!1}),w=J.useRef(null);J.useEffect(()=>{l(D=>{const C=Array(n).fill("");for(let B=0;B<Math.min(D.length,n);B++)C[B]=D[B];return C})},[n]);const _=(D,C)=>{const B=[...o];B[D]=C,l(B)},N=async()=>{if(A.trim()){b(D=>({...D,ai:!0}));try{const D=new zl({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),C=`Genera una lista de ${n} palabras clave, en español, relacionadas con el tema "${A}". Las palabras no deben contener espacios ni caracteres especiales.`,B={type:Zt.OBJECT,properties:{palabras:{type:Zt.ARRAY,items:{type:Zt.STRING}}},required:["palabras"]},T=await D.models.generateContent({model:"gemini-2.5-flash",contents:C,config:{responseMimeType:"application/json",responseSchema:B}}),L=[...JSON.parse(T.text).palabras.map(Q=>Q.toUpperCase().replace(/\s/g,"")).slice(0,n)];for(;L.length<n;)L.push("");l(L)}catch(D){console.error("Error generating words with AI:",D),alert("No se pudieron generar las palabras. Inténtelo de nuevo.")}finally{b(D=>({...D,ai:!1}))}}},k=(D,C,B,T,O,F)=>{for(let L=0;L<D.length;L++){const Q=B+L*O.y,q=T+L*O.x;if(Q<0||Q>=F||q<0||q>=F||C[Q][q]&&C[Q][q]!==D[L])return!1}return!0},I=(D,C,B,T,O)=>{for(let F=0;F<D.length;F++)C[B+F*O.y][T+F*O.x]=D[F]},P=()=>{b(D=>({...D,puzzle:!0})),m(null),setTimeout(()=>{const D=o.map(L=>L.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(D.length===0){alert("Por favor, ingrese al menos una palabra válida."),b(L=>({...L,puzzle:!1}));return}const C=Math.max(...D.map(L=>L.length));let B=Math.max(C,D.length)+2;e==="Media"&&(B+=3),e==="Difícil"&&(B+=5),B=Math.min(Math.max(B,10),25);const T=Array(B).fill(null).map(()=>Array(B).fill(null)),O=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];e!=="Fácil"&&O.push({x:1,y:-1}),e==="Difícil"&&O.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const L of D.sort((Q,q)=>q.length-Q.length)){let Q=!1;for(let q=0;q<100;q++){const ie=O[Math.floor(Math.random()*O.length)],Z=Math.floor(Math.random()*B),ee=Math.floor(Math.random()*B);if(k(L,T,Z,ee,ie,B)){I(L,T,Z,ee,ie),Q=!0;break}}Q||console.warn(`No se pudo colocar la palabra: ${L}`)}const F=T.map(L=>L.map(Q=>Q||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)]));m({grid:F,words:D.sort()}),b(L=>({...L,puzzle:!1}))},100)},M=()=>{w.current&&sb(w.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(D=>{const C=document.createElement("a");C.download="sopa-de-letras.png",C.href=D,C.click()}).catch(D=>{console.error("oops, something went wrong!",D),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"🅰️"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!h&&c.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),c.jsxs("select",{value:e,onChange:D=>r(D.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{children:"Fácil"}),c.jsx("option",{children:"Media"}),c.jsx("option",{children:"Difícil"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(D=>c.jsx("button",{onClick:()=>{a(D),i(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!s&&n===D?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:D},D)),c.jsx("button",{onClick:()=>i(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${s?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),s&&c.jsx("input",{type:"number",value:n,onChange:D=>a(parseInt(D.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"ai-theme",type:"text",value:A,onChange:D=>d(D.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:N,disabled:g.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:g.ai?c.jsx(kBe,{}):c.jsxs(c.Fragment,{children:[c.jsx(IBe,{}),c.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:o.map((D,C)=>c.jsx("input",{type:"text",value:D,onChange:B=>_(C,B.target.value),placeholder:`Palabra ${C+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},C))})]}),c.jsx("div",{className:"text-right pt-4",children:c.jsx("button",{onClick:P,disabled:g.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:g.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),h&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{ref:w,className:"p-6 bg-white",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[c.jsx("div",{className:"md:col-span-2",children:c.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${h.grid.length}, minmax(0, 1fr))`},children:h.grid.flat().map((D,C)=>c.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:D},C))})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),c.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:h.words.map(D=>c.jsx("li",{children:D},D))})]})]})}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>m(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),c.jsx("button",{onClick:M,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]})},qD="recursosAprendizaje_timelines",RBe=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),DBe=({timeline:t,onSave:e,onBack:r})=>{const[n,a]=J.useState(t),s=J.useRef(null),i=(d,h,m)=>{a(g=>({...g,events:g.events.map(b=>b.id===d?{...b,[h]:m}:b)}))},o=()=>{const d={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},h=[...n.events,d].sort((m,g)=>parseInt(m.date)-parseInt(g.date));a(m=>({...m,events:h}))},l=d=>{a(h=>({...h,events:h.events.filter(m=>m.id!==d)}))},A=()=>{s.current&&sb(s.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(d=>{const h=document.createElement("a");h.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,h.href=d,h.click()}).catch(d=>{console.error("Error al generar la imagen:",d),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),c.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:c.jsxs("div",{ref:s,className:"relative p-10",children:[c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),c.jsx("div",{className:"relative",children:n.events.sort((d,h)=>parseInt(d.date)-parseInt(h.date)).map((d,h)=>{const m=h%2===0;return c.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[c.jsx("div",{className:"w-1/2",children:m&&c.jsx("div",{className:"text-right pr-8",children:c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[c.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:d.icon}),c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:d.date}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:d.description})]})})}),c.jsx("div",{className:"z-10 flex-shrink-0",children:c.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),c.jsx("div",{className:"w-1/2",children:!m&&c.jsx("div",{className:"text-left pl-8",children:c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[c.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:d.icon}),c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:d.date}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:d.description})]})})})]},d.id)})})]})}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(d=>c.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[c.jsx("input",{type:"text",value:d.date,onChange:h=>i(d.id,"date",h.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),c.jsx("textarea",{value:d.description,onChange:h=>i(d.id,"description",h.target.value),placeholder:"Descripción",rows:2,className:"w-full bg-transparent text-sm dark:text-slate-300"}),c.jsx("button",{onClick:()=>l(d.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},d.id))}),c.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[c.jsx("button",{onClick:o,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:A,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),c.jsx("button",{onClick:()=>e(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},LBe=({onBack:t})=>{const[e,r]=J.useState("list"),[n,a]=J.useState([]),[s,i]=J.useState(null),[o,l]=J.useState(!1),[A,d]=J.useState(""),[h,m]=J.useState(""),[g,b]=J.useState("");J.useEffect(()=>{try{const I=localStorage.getItem(qD);I&&a(JSON.parse(I))}catch(I){console.error("Error al cargar líneas de tiempo",I)}},[]);const w=I=>{a(I),localStorage.setItem(qD,JSON.stringify(I))},_=async I=>{if(I.preventDefault(),!A.trim()){alert("El tema es obligatorio.");return}l(!0);const P=h&&g?`entre ${h} y ${g}`:h?`a partir de ${h}`:g?`hasta ${g}`:"",M=`Genera una línea de tiempo sobre el tema "${A}" ${P}. Crea entre 5 y 10 hitos clave ordenados cronológicamente. Para cada hito, proporciona una fecha o año, una descripción breve y un emoji representativo.`,D={type:Zt.OBJECT,properties:{events:{type:Zt.ARRAY,items:{type:Zt.OBJECT,properties:{date:{type:Zt.STRING},description:{type:Zt.STRING},icon:{type:Zt.STRING}},required:["date","description"]}}},required:["events"]};try{const B=await new zl({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:M,config:{responseMimeType:"application/json",responseSchema:D}}),T=JSON.parse(B.text),O={id:crypto.randomUUID(),tema:A,fechaInicio:h,fechaFin:g,createdAt:new Date().toISOString(),events:T.events.map(F=>({...F,id:crypto.randomUUID()}))};i(O),r("editor")}catch(C){console.error("AI Generation Error:",C),alert("Hubo un error al generar la línea de tiempo. Inténtelo de nuevo.")}finally{l(!1)}},N=I=>{n.findIndex(M=>M.id===I.id)>-1?w(n.map(M=>M.id===I.id?I:M)):w([I,...n]),r("list"),i(null)},k=I=>{window.confirm("¿Eliminar esta línea de tiempo?")&&w(n.filter(P=>P.id!==I))};return e==="editor"&&s?c.jsx(DBe,{timeline:s,onSave:N,onBack:()=>r("list")}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"🕒"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),c.jsxs("form",{onSubmit:_,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"tema",value:A,onChange:I=>d(I.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),c.jsx("input",{type:"text",id:"fechaInicio",value:h,onChange:I=>m(I.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),c.jsx("input",{type:"text",id:"fechaFin",value:g,onChange:I=>b(I.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:o,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:o?c.jsx(RBe,{}):"Generar con IA"})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),n.length>0?n.map(I=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:I.tema}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(I.createdAt).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>{i(I),r("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),c.jsx("button",{onClick:()=>k(I.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},I.id)):c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},UBe=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),MBe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),PBe=({onBack:t})=>{const[e,r]=J.useState(10),[n,a]=J.useState(!1),[s,i]=J.useState(Array(10).fill("")),[o,l]=J.useState(Array(10).fill("")),[A,d]=J.useState(""),[h,m]=J.useState(null),[g,b]=J.useState(!1),[w,_]=J.useState({ai:!1,puzzle:!1}),N=J.useRef(null);J.useEffect(()=>{const T=e;i(O=>Array.from({length:T},(F,L)=>O[L]||"")),l(O=>Array.from({length:T},(F,L)=>O[L]||""))},[e]);const k=(T,O)=>{const F=[...s];F[T]=O,i(F)},I=(T,O)=>{const F=[...o];F[T]=O,l(F)},P=async()=>{if(A.trim()){_(T=>({...T,ai:!0}));try{const T=new zl({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),O=`Genera una lista de ${e} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${A}". Las palabras no deben contener espacios.`,F={type:Zt.OBJECT,properties:{items:{type:Zt.ARRAY,items:{type:Zt.OBJECT,properties:{word:{type:Zt.STRING},clue:{type:Zt.STRING}},required:["word","clue"]}}},required:["items"]},L=await T.models.generateContent({model:"gemini-2.5-flash",contents:O,config:{responseMimeType:"application/json",responseSchema:F}}),Q=JSON.parse(L.text),q=Q.items.map(Z=>Z.word.toUpperCase().replace(/\s/g,"")),ie=Q.items.map(Z=>Z.clue);i(Array.from({length:e},(Z,ee)=>q[ee]||"")),l(Array.from({length:e},(Z,ee)=>ie[ee]||""))}catch(T){console.error("Error generating words/clues with AI:",T),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{_(T=>({...T,ai:!1}))}}},M=J.useCallback(()=>{try{const T=s.map((ae,Fe)=>({word:ae.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:o[Fe]})).filter(ae=>ae.word.length>0);if(T.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;T.sort((ae,Fe)=>Fe.word.length-ae.word.length);const O=T[0].word.length,F=Math.max(O,T.length)*2;let L=Array.from({length:F},()=>Array(F).fill(null));const Q=[],q=T.shift(),ie=Math.floor(F/2),Z=Math.floor((F-q.word.length)/2);for(let ae=0;ae<q.word.length;ae++)L[ie][Z+ae]=q.word[ae];Q.push({word:q.word,clue:q.clue,direction:"across",row:ie,col:Z});for(const ae of T){let Fe={score:-1,row:-1,col:-1,direction:"across"};for(const Xe of Q)for(let De=0;De<Xe.word.length;De++)for(let Ce=0;Ce<ae.word.length;Ce++)if(Xe.word[De]===ae.word[Ce]){let ze=0,tt,it,dt;Xe.direction==="across"?(dt="down",tt=Xe.row-Ce,it=Xe.col+De):(dt="across",tt=Xe.row+De,it=Xe.col-Ce);let Ct=!0;for(let ut=0;ut<ae.word.length;ut++){const Nt=tt+(dt==="down"?ut:0),It=it+(dt==="across"?ut:0);if(Nt<0||Nt>=F||It<0||It>=F){Ct=!1;break}const Kt=L[Nt][It],Ut=Nt===Xe.row+(Xe.direction==="down"?De:0)&&It===Xe.col+(Xe.direction==="across"?De:0);if(Kt&&!Ut){Ct=!1;break}if(Kt&&Ut&&Kt!==ae.word[Ce]){Ct=!1;break}if(!Ut){if(dt==="across"&&(Nt>0&&L[Nt-1][It]||Nt<F-1&&L[Nt+1][It])){Ct=!1;break}if(dt==="down"&&(It>0&&L[Nt][It-1]||It<F-1&&L[Nt][It+1])){Ct=!1;break}}Kt&&ze++}Ct&&ze>Fe.score&&(Fe={score:ze,row:tt,col:it,direction:dt})}if(Fe.score>-1){for(let Xe=0;Xe<ae.word.length;Xe++){const De=Fe.row+(Fe.direction==="down"?Xe:0),Ce=Fe.col+(Fe.direction==="across"?Xe:0);L[De][Ce]=ae.word[Xe]}Q.push({word:ae.word,clue:ae.clue,direction:Fe.direction,row:Fe.row,col:Fe.col})}}let ee=F,ne=-1,z=F,W=-1;Q.forEach(ae=>{ee=Math.min(ee,ae.row),ne=Math.max(ne,ae.row+(ae.direction==="down"?ae.word.length-1:0)),z=Math.min(z,ae.col),W=Math.max(W,ae.col+(ae.direction==="across"?ae.word.length-1:0))}),ne===-1&&(ee=Q[0].row,ne=Q[0].row,z=Q[0].col,W=Q[0].col+Q[0].word.length-1);const ce=1,j=Math.max(0,ee-ce),K=Math.min(F,ne+1+ce),X=Math.max(0,z-ce),te=Math.min(F,W+1+ce),le=L.slice(j,K).map(ae=>ae.slice(X,te)),de=Q.map(ae=>({...ae,row:ae.row-j,col:ae.col-X})).sort((ae,Fe)=>ae.row-Fe.row||ae.col-Fe.col);let me=1;const ge=[],Se=new Map;de.forEach(ae=>{const Fe=`${ae.row},${ae.col}`;Se.has(Fe)||Se.set(Fe,me++),ge.push({...ae,number:Se.get(Fe)})});const xe=le.map(ae=>ae.map(Fe=>({char:Fe,number:null})));return ge.forEach(ae=>{const Fe=`${ae.row},${ae.col}`;xe[ae.row]&&xe[ae.row][ae.col]!==void 0&&(xe[ae.row][ae.col].number=Se.get(Fe))}),{grid:xe,clues:{across:ge.filter(ae=>ae.direction==="across").sort((ae,Fe)=>ae.number-Fe.number),down:ge.filter(ae=>ae.direction==="down").sort((ae,Fe)=>ae.number-Fe.number)}}}catch(T){return console.error("Error generating crossword grid:",T),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[s,o]),D=()=>{_(T=>({...T,puzzle:!0})),m(null),setTimeout(()=>{const T=M();T&&m(T),_(O=>({...O,puzzle:!1}))},100)},C=()=>{N.current&&(b(!1),setTimeout(()=>{sb(N.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(T=>{const O=document.createElement("a");O.download="crucigrama.png",O.href=T,O.click()}).catch(T=>console.error("Error generating image",T))},100))},B=()=>h?c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{ref:N,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsx("div",{children:c.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${h.grid[0].length}, 2rem)`},children:h.grid.flat().map((T,O)=>c.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:T.char?"white":"black"},children:[T.number&&c.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:T.number}),g&&T.char&&c.jsx("span",{children:T.char})]},O))})}),c.jsxs("div",{className:"text-sm",children:[c.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),c.jsx("ul",{className:"space-y-1",children:h.clues.across.map(T=>c.jsxs("li",{children:[c.jsxs("strong",{children:[T.number,"."]})," ",T.clue]},`${T.word}-${T.clue}`))}),c.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),c.jsx("ul",{className:"space-y-1",children:h.clues.down.map(T=>c.jsxs("li",{children:[c.jsxs("strong",{children:[T.number,"."]})," ",T.clue]},`${T.word}-${T.clue}`))})]})]})}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",checked:g,onChange:()=>b(!g),className:"h-5 w-5 rounded"}),c.jsx("span",{children:"Mostrar Solución"})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>m(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),c.jsx("button",{onClick:C,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):null;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"✏️"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),h?B():c.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(T=>c.jsx("button",{onClick:()=>{r(T),a(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!n&&e===T?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:T},T)),c.jsx("button",{onClick:()=>a(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${n?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),n&&c.jsx("input",{type:"number",value:e,onChange:T=>r(parseInt(T.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"ai-theme",type:"text",value:A,onChange:T=>d(T.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:P,disabled:w.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:w.ai?c.jsx(UBe,{}):c.jsxs(c.Fragment,{children:[c.jsx(MBe,{}),c.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),c.jsx("div",{className:"space-y-3",children:Array.from({length:e}).map((T,O)=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[c.jsx("input",{type:"text",value:s[O],onChange:F=>k(O,F.target.value),placeholder:`Palabra ${O+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:o[O],onChange:F=>I(O,F.target.value),placeholder:`Pista ${O+1}`,rows:1,className:"md:col-span-2 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]},O))}),c.jsx("div",{className:"text-right pt-4",children:c.jsx("button",{onClick:D,disabled:w.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:w.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},jBe=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],OBe=({recurso:t,onClick:e})=>c.jsxs("button",{onClick:e,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[c.jsx("div",{className:"text-6xl mb-4",children:t.icon}),c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:t.nombre}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:t.descripcion})]}),QBe=()=>{const[t,e]=J.useState("menu"),r=()=>t==="mapasMentales"?c.jsx(NBe,{onBack:()=>e("menu")}):t==="sopaDeLetras"?c.jsx(FBe,{onBack:()=>e("menu")}):t==="lineasDeTiempo"?c.jsx(LBe,{onBack:()=>e("menu")}):t==="crucigramas"?c.jsx(PBe,{onBack:()=>e("menu")}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:jBe.map(n=>c.jsx(OBe,{recurso:n,onClick:()=>e(n.id)},n.id))})]});return c.jsx("div",{className:"animate-fade-in space-y-6",children:r()})},HBe="evaluacionesFormativas",VBe="calificacionesFormativas",YE="trabajosGrupalesFormativos",zBe=({currentUser:t})=>{const[e,r]=J.useState([]),[n,a]=J.useState({}),[s,i]=J.useState([]),[o,l]=J.useState(null),[A,d]=J.useState(!1),[h,m]=J.useState(null),g=J.useRef(null);J.useEffect(()=>{try{const k=localStorage.getItem(HBe);k&&r(JSON.parse(k));const I=localStorage.getItem(VBe);I&&a(JSON.parse(I));const P=localStorage.getItem(YE);P&&i(JSON.parse(P))}catch(k){console.error("Error al cargar datos desde localStorage",k)}},[]);const b=J.useMemo(()=>{if(!t.curso)return[];const I=e.filter(P=>P.curso===t.curso).reduce((P,M)=>((P[M.asignatura]=P[M.asignatura]||[]).push(M),P),{});return Object.entries(I).map(([P,M])=>{let D=0,C=0;const B=M.map(O=>{var Q;const F=(Q=n[O.id])==null?void 0:Q[t.nombreCompleto];let L="No Trabajado";return F==="trabajado"?(D+=7,C++,L="Trabajado"):F==="no trabajado"&&(D+=2,C++,L="No Trabajado"),{id:O.id,nombreActividad:O.nombreActividad,fecha:O.fecha,estado:L}}).filter(O=>{var F;return(F=n[O.id])==null?void 0:F[t.nombreCompleto]}),T=C>0?(D/C).toFixed(1):"N/A";return{asignatura:P,promedio:T,actividades:B.sort((O,F)=>new Date(F.fecha).getTime()-new Date(O.fecha).getTime())}}).filter(P=>P.actividades.length>0).sort((P,M)=>P.asignatura.localeCompare(M.asignatura))},[e,n,t]);J.useEffect(()=>{if(b.reduce((C,B)=>C+B.actividades.length,0)===0){l(null);return}const I=b.reduce((C,B)=>{const T=parseFloat(B.promedio);return isNaN(T)?C:C+T},0),P=b.length>0?I/b.length:0,M=lv.find(C=>P>=C.promedioMin&&P<=C.promedioMax)||null,D=lv.filter(C=>P>=C.promedioMin);if(l({puntajeTotal:0,promedio:P,rangoActual:M,insigniasGanadas:D}),g.current!==null){const C=lv.find(B=>g.current>=B.promedioMin&&g.current<=B.promedioMax)||null;M&&(!C||M.nombre!==C.nombre)&&m(M)}g.current=P},[b]);const w=J.useMemo(()=>t.curso?s.filter(k=>k.curso===t.curso).map(k=>{const I=k.grupos.find(P=>P.integrantes.some(M=>M.nombre===t.nombreCompleto));return I?{...k,miGrupo:I}:null}).filter(k=>k!==null).sort((k,I)=>new Date(I.fechaPresentacion).getTime()-new Date(k.fechaPresentacion).getTime()):[],[s,t]),_=(k,I)=>{const P=localStorage.getItem(YE),D=(P?JSON.parse(P):[]).map(C=>{if(C.id===k){const B=C.grupos.map(T=>{if(T.integrantes.some(F=>F.nombre===t.nombreCompleto)){const F=T.integrantes.map(L=>L.nombre===t.nombreCompleto?{...L,rol:I||void 0}:L);return{...T,integrantes:F}}return T});return{...C,grupos:B}}return C});localStorage.setItem(YE,JSON.stringify(D)),i(D)},N=k=>{const I=parseFloat(k);return isNaN(I)?"bg-slate-400":I<4?"bg-red-500":I<5.5?"bg-yellow-500":"bg-green-500"};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[h&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>m(null),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:k=>k.stopPropagation(),children:[c.jsx("div",{className:"text-8xl animate-bounce",children:h.emoji}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),c.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:h.nombre}),c.jsx("p",{className:"text-slate-600 mt-4",children:h.mensaje}),c.jsx("button",{onClick:()=>m(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),A&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>d(!1),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:k=>k.stopPropagation(),children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),c.jsx("div",{className:"overflow-y-auto space-y-3",children:lv.map(k=>{const I=o==null?void 0:o.insigniasGanadas.some(P=>P.nombre===k.nombre);return c.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${I?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[c.jsx("div",{className:"text-5xl",children:k.emoji}),c.jsxs("div",{children:[c.jsx("h3",{className:`font-bold ${I?"text-amber-700":"text-slate-600"}`,children:k.nombre}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",k.promedioMin," y ",k.promedioMax]})]})]},k.nombre)})})]})}),c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),o&&o.rangoActual&&c.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),c.jsx("h2",{className:"text-3xl font-bold",children:o.rangoActual.nombre}),c.jsx("button",{onClick:()=>d(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-7xl",children:o.rangoActual.emoji}),c.jsx("p",{className:"font-bold text-2xl mt-2",children:o.promedio.toFixed(1)}),c.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),b.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(k=>c.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:k.asignatura}),c.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),c.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${N(k.promedio)}`,children:k.promedio})]}),c.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),k.actividades.map(I=>c.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-700",children:I.nombreActividad}),c.jsx("p",{className:"text-xs text-slate-500",children:new Date(I.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),c.jsx("span",{className:`font-semibold ${I.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:I.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},I.id))]})]},k.asignatura))}):c.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[c.jsx("span",{className:"text-5xl",children:"📊"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),c.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),w.length>0&&c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),c.jsx("div",{className:"space-y-4",children:w.map(k=>{const I=k.miGrupo.integrantes.filter(M=>M.nombre!==t.nombreCompleto&&M.rol).map(M=>M.rol),P=C8.filter(M=>!I.includes(M));return c.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[c.jsx("h3",{className:"font-bold text-slate-800",children:k.nombreActividad}),c.jsxs("p",{className:"text-sm text-slate-500",children:[k.asignatura," - Presentación: ",new Date(k.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),c.jsxs("div",{className:"mt-3 pt-3 border-t",children:[c.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",k.miGrupo.numero]}),c.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:k.miGrupo.integrantes.map(M=>c.jsxs("li",{className:"grid grid-cols-2 items-center",children:[c.jsx("span",{className:M.nombre===t.nombreCompleto?"font-bold":"",children:M.nombre}),M.nombre===t.nombreCompleto?c.jsxs("select",{value:M.rol||"",onChange:D=>_(k.id,D.target.value),className:"text-sm p-1 border rounded w-full",children:[c.jsx("option",{value:"",children:"-- Seleccionar rol --"}),M.rol&&!P.includes(M.rol)&&c.jsx("option",{value:M.rol,children:M.rol}),P.map(D=>c.jsx("option",{value:D,children:D},D))]}):c.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:M.rol||"Sin rol"})]},M.nombre))})]})]},k.id)})})]})]})},GBe="planificacionesInterdisciplinarias",KD="entregasTareasInterdisciplinarias",qBe=({currentUser:t})=>{const[e,r]=J.useState([]),[n,a]=J.useState([]),[s,i]=J.useState(null);J.useEffect(()=>{const m=()=>{try{const g=localStorage.getItem(GBe);g&&r(JSON.parse(g));const b=localStorage.getItem(KD);b&&a(JSON.parse(b))}catch(g){console.error("Error al cargar datos desde localStorage",g)}};return m(),window.addEventListener("storage",m),()=>window.removeEventListener("storage",m)},[]);const o=J.useMemo(()=>e.filter(m=>m.cursos.includes(t.curso||"")),[e,t.curso]),l=m=>{a(m),localStorage.setItem(KD,JSON.stringify(m)),window.dispatchEvent(new Event("storage"))},A=(m,g)=>{let b=n.find(w=>w.planificacionId===m&&w.tareaId===g&&w.estudianteId===t.id);return b||(b={id:crypto.randomUUID(),planificacionId:m,tareaId:g,estudianteId:t.id,estudianteNombre:t.nombreCompleto,completada:!1}),b},d=m=>{const g=n.findIndex(w=>w.id===m.id);let b;g>-1?b=n.map(w=>w.id===m.id?m:w):b=[...n,m],l(b)},h=({plan:m,tarea:g})=>{const b=J.useMemo(()=>A(m.id,g.id),[m.id,g.id,n]),[w,_]=J.useState(!1),[N,k]=J.useState({observaciones:b.observacionesEstudiante||"",enlace:b.enlaceUrl||""}),I=D=>{var B;const C=(B=D.target.files)==null?void 0:B[0];if(C){const T=new FileReader;T.onloadend=()=>{d({...b,archivoAdjunto:{nombre:C.name,url:T.result},fechaCompletado:new Date().toISOString()})},T.readAsDataURL(C)}},P=()=>{d({...b,observacionesEstudiante:N.observaciones,enlaceUrl:N.enlace,fechaCompletado:new Date().toISOString()})},M=()=>{d({...b,completada:!b.completada,fechaCompletado:new Date().toISOString()})};return c.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("input",{type:"checkbox",checked:b.completada,onChange:M,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("p",{className:`font-semibold ${b.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",g.numero,": ",g.instrucciones]}),c.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",g.fechaEntrega]}),g.recursoUrl&&c.jsx("a",{href:g.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),c.jsx("button",{onClick:()=>_(!w),className:"text-sm font-semibold",children:w?"Ocultar":"Entregar"})]}),w&&c.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[c.jsx("textarea",{value:N.observaciones,onChange:D=>k({...N,observaciones:D.target.value}),onBlur:P,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),c.jsx("input",{type:"url",value:N.enlace,onChange:D=>k({...N,enlace:D.target.value}),onBlur:P,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),c.jsx("input",{type:"file",onChange:I,className:"text-sm"}),b.archivoAdjunto&&c.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",b.archivoAdjunto.nombre]})]}),b.feedbackProfesor&&c.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[c.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),c.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:b.feedbackProfesor})]})]})};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),o.length>0?o.map(m=>{const g=m.tareas||[],w=n.filter(N=>N.planificacionId===m.id&&N.estudianteId===t.id).filter(N=>N.completada).length,_=g.length>0?w/g.length*100:0;return c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[c.jsxs("button",{onClick:()=>i(s===m.id?null:m.id),className:"w-full text-left",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:m.nombreProyecto}),c.jsxs("div",{className:"mt-2 space-y-1",children:[c.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[c.jsx("span",{children:"Progreso"}),c.jsxs("span",{children:[Math.round(_),"%"]})]}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:c.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${_}%`}})})]})]}),s===m.id&&c.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:g.length>0?g.map(N=>c.jsx(h,{plan:m,tarea:N},N.id)):c.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},m.id)}):c.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[c.jsx("span",{className:"text-5xl",children:"🎉"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),c.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},KBe=({data:t})=>c.jsx("div",{className:"space-y-4",children:t.map((r,n)=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),c.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),WBe=({currentUser:t})=>{const[e,r]=J.useState([]),[n,a]=J.useState(!1),[s,i]=J.useState(null),[o,l]=J.useState(null),[A,d]=J.useState(Ig),h=J.useCallback(async()=>{a(!0);try{const _=(await j1e(t.nombreCompleto)).sort((N,k)=>new Date(k.fecha).getTime()-new Date(N.fecha).getTime());r(_),i(null)}catch(w){console.error("Error al cargar acompañamientos desde Firestore",w),i("No se pudieron cargar tus acompañamientos desde la nube.")}finally{a(!1)}},[t.nombreCompleto]),m=J.useCallback(async()=>{try{const w=await O1e();w&&d(w)}catch(w){console.error("Error al cargar rúbrica personalizada",w)}},[]);J.useEffect(()=>{h(),m()},[h,m]);const g=J.useMemo(()=>{if(!o)return[];const w={};return A.forEach(_=>{w[_.domain]={total:0,count:0},_.criteria.forEach(N=>{const k=o.rubricaResultados[N.name];k&&(w[_.domain].total+=k,w[_.domain].count++)})}),Object.entries(w).map(([_,N])=>({label:_,value:N.count>0?N.total/N.count:0}))},[o,A]),b=w=>{const _=new sr;_.setFont("helvetica","bold"),_.setFontSize(10),_.setTextColor(100),_.text("LICEO INDUSTRIAL DE RECOLETA",_.internal.pageSize.getWidth()/2,15,{align:"center"}),_.setFont("helvetica","bold"),_.setFontSize(16),_.setTextColor(40),_.text("Informe de Acompañamiento Docente",_.internal.pageSize.getWidth()/2,25,{align:"center"}),_.setFontSize(12),_.setFont("helvetica","normal"),tl(_,{startY:35,body:[["Docente:",w.docente],["Fecha:",new Date(w.fecha).toLocaleDateString("es-CL")],["Asignatura:",w.asignatura],["Curso:",w.curso],["Bloques:",w.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let N=_.lastAutoTable.finalY+15;if(Object.keys(w.rubricaResultados).length>0){const P=[],M=["Débil","Incipiente","Satisfactorio","Avanzado"];A.forEach(D=>{P.push([{content:D.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),D.criteria.forEach(C=>{const B=w.rubricaResultados[C.name],T=B?M[B-1]:"No evaluado";P.push([C.name,T])})}),tl(_,{startY:N,head:[["Indicador","Nivel de Logro"]],body:P,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),N=_.lastAutoTable.finalY+15}const k=(P,M)=>{if(!M)return;N>250&&(_.addPage(),N=20,_.setFont("helvetica","bold"),_.setFontSize(10),_.setTextColor(100),_.text("LICEO INDUSTRIAL DE RECOLETA",_.internal.pageSize.getWidth()/2,15,{align:"center"}),N=25),_.setFont("helvetica","bold"),_.setFontSize(14),_.setTextColor(40),_.text(P,14,N),N+=8,_.setFont("helvetica","normal"),_.setFontSize(11),_.setTextColor(60);const D=_.splitTextToSize(M.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);_.text(D,14,N),N+=D.length*5+10};k("Observaciones Generales",w.observacionesGenerales),k("Retroalimentación Consolidada",w.retroalimentacionConsolidada);const I=_.getNumberOfPages();for(let P=1;P<=I;P++)_.setPage(P),_.setFontSize(8),_.setTextColor(128),_.text(`Página ${P} de ${I}`,_.internal.pageSize.getWidth()/2,_.internal.pageSize.getHeight()-10,{align:"center"});_.save(`Acompanamiento_${t.nombreCompleto.replace(/\s/g,"_")}_${new Date(w.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),c.jsxs("button",{onClick:()=>b(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[c.jsx(b8,{})," Exportar PDF"]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2 space-y-6",children:c.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[c.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),c.jsx("h3",{children:"Observaciones Generales"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx(KBe,{data:g})})]})]})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!n&&e.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),c.jsx("div",{className:"space-y-4",children:!n&&e.length>0?e.map(w=>c.jsx("button",{onClick:()=>l(w),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[w.curso," - ",w.asignatura]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(w.fecha).toLocaleDateString("es-CL"),w.bloques&&` | Bloques: ${w.bloques}`]}),Object.keys(w.rubricaResultados).length>0&&c.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(w.rubricaResultados).length," criterios"]})]}),c.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},w.id)):!n&&c.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("span",{className:"text-5xl",children:"👍"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},$Be=t=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const e=Ar(wn,"planificaciones"),r=an(e,ya("fechaCreacion","desc"));return na(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Todas las planificaciones cargadas:",s.length),t(s)},a=>{throw console.error("❌ Error al cargar todas las planificaciones:",a),a})}catch(e){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",e),e}},YBe=(t,e)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",t),!t)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const r=Ar(wn,"planificaciones"),n=an(r,Ai("userId","==",t),ya("fechaCreacion","desc"));return na(n,s=>{const i=[];s.forEach(o=>{const l=o.data();i.push({id:o.id,...l})}),console.log("✅ Planificaciones del usuario cargadas:",i.length),e(i)},s=>{throw console.error("❌ Error al cargar planificaciones del usuario:",s),s})}catch(r){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",r),r}},XBe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),JBe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),ZBe=()=>c.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),eNe=({plan:t,onClose:e})=>{const r=a=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-lg",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",a.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Indicadores de Evaluación:"})," ",a.indicadoresEvaluacion]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[c.jsx("strong",{children:"Contenidos Clave:"})," ",a.contenidos]})]}),c.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",a.cantidadClases,")"]}),c.jsx("div",{className:"space-y-3 max-h-[40vh] overflow-y-auto pr-2",children:a.detallesLeccion.map((s,i)=>c.jsxs("div",{className:"p-3 border dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",children:[c.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",i+1,": ",s.actividades]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("span",{children:[c.jsx("strong",{children:"Objetivo:"})," ",s.objetivosAprendizaje]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Contenidos:"})," ",s.contenidosConceptuales]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Habilidad (Bloom):"})," ",s.habilidadesBloom]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Perfil de Egreso:"})," ",s.perfilEgreso]}),c.jsxs("span",{className:"md:col-span-2",children:[c.jsx("strong",{children:"Interdisciplinariedad:"})," ",s.asignaturasInterdisciplinariedad]})]})]},i))})]}),n=a=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("p",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-lg",children:[c.jsx("strong",{children:"Contenidos:"})," ",a.contenidos]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Inicio"}),c.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:a.momentosClase.inicio})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Desarrollo"}),c.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:a.momentosClase.desarrollo})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Cierre"}),c.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:a.momentosClase.cierre})]})]})]});return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:a=>a.stopPropagation(),children:[c.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:t.tipo==="Unidad"?t.nombreUnidad:t.nombreClase}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.asignatura," | ",t.nivel," | Autor: ",t.autor||"N/A"]})]}),c.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:c.jsx(JBe,{})})]}),c.jsx("main",{className:"p-4 flex-1 overflow-y-auto",children:t.tipo==="Unidad"?r(t):n(t)})]})})},tNe=t=>{const[e,r]=J.useState([]),[n,a]=J.useState(!0),[s,i]=J.useState(null),o=J.useMemo(()=>(t==null?void 0:t.profile)==="SUBDIRECCION",[t]);return J.useEffect(()=>{if(!(t!=null&&t.email)&&!(t!=null&&t.id)){i("Usuario no autenticado"),a(!1);return}console.log("🔄 Configurando suscripción a planificaciones..."),console.log("🔍 Usuario actual:",{email:t.email,id:t.id,profile:t.profile,canViewAll:o});try{let l;if(o)console.log("👑 Cargando todas las planificaciones (vista admin)"),l=$Be(A=>{console.log("✅ Planificaciones admin cargadas:",A.length),r(A),a(!1),i(null)});else{const A=t.email||t.id||"";console.log("👤 Cargando planificaciones del usuario:",A),l=YBe(A,d=>{console.log("✅ Planificaciones del usuario cargadas:",d.length),r(d),a(!1),i(null)})}return l}catch(l){console.error("❌ Error al configurar suscripción:",l),i(l instanceof Error?l.message:"Error al conectar con la base de datos"),a(!1)}},[t,o]),{planificaciones:e,loading:n,error:s,canViewAllPlans:o}},rNe=({currentUser:t})=>{console.log("🔍 SeguimientoCurricular - currentUser recibido:",t),console.log("🔍 currentUser.email:",t==null?void 0:t.email),console.log("🔍 currentUser.id:",t==null?void 0:t.id),console.log("🔍 currentUser.profile:",t==null?void 0:t.profile);const{planificaciones:e,loading:r,error:n,canViewAllPlans:a}=tNe(t),[s,i]=J.useState("1º"),[o,l]=J.useState(null),[A,d]=J.useState(null),h=J.useMemo(()=>{const w={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"}[s];return e.filter(_=>_.nivel===w)},[e,s]),m=b=>{l(w=>w===b?null:b)},g=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];return!t||!t.email&&!t.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):r?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-4xl mx-auto",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Seguimiento Curricular"}),c.jsx("div",{className:"flex justify-center items-center py-12",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(ZBe,{}),c.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Cargando planificaciones..."})]})})]}):n?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-4xl mx-auto",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Seguimiento Curricular"}),c.jsx("div",{className:"flex justify-center items-center py-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-red-600 dark:text-red-400 mb-2",children:"Error al cargar las planificaciones"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:n})]})})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-4xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&c.jsx("div",{className:"text-sm text-amber-600 dark:text-amber-400 font-medium",children:"👑 Vista administrativa - Todas las planificaciones"})]}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:c.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(b=>c.jsx("button",{onClick:()=>i(b.key),className:`${s===b.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg transition-colors focus:outline-none`,children:b.label},b.key))})}),e.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay planificaciones disponibles"}),c.jsx("p",{className:"text-sm text-slate-400 dark:text-slate-500 mt-2",children:a?"Ningún profesor ha creado planificaciones aún":"Crea planificaciones desde el módulo de Planificación"})]}):c.jsx("div",{className:"space-y-4",children:rl.map(b=>{const w=h.filter(N=>N.asignatura===b);if(w.length===0)return null;const _=o===b;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[c.jsxs("button",{onClick:()=>m(b),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:b}),c.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[w.length," planificación",w.length!==1?"es":""]})]}),c.jsx("span",{className:`transform transition-transform duration-200 ${_?"rotate-180":""}`,children:c.jsx(XBe,{})})]}),_&&c.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 animate-fade-in-up",children:c.jsx("ul",{className:"space-y-3",children:w.map(N=>c.jsx("li",{children:c.jsx("button",{onClick:()=>d(N),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors group",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600 dark:group-hover:text-amber-400 transition-colors",children:N.tipo==="Unidad"?N.nombreUnidad:N.nombreClase}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[c.jsx("span",{className:"font-medium",children:"Autor:"})," ",N.autor||"No especificado"]}),c.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["Creado: ",new Date(N.fechaCreacion).toLocaleDateString("es-CL")]})]}),c.jsx("div",{className:"ml-3",children:c.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${N.tipo==="Unidad"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"}`,children:N.tipo})})]})})},N.id))})})]},b)})})]}),A&&c.jsx(eNe,{plan:A,onClose:()=>d(null)})]})},BT="analisis",nNe=async()=>{try{const t=an(Ar(wn,BT),ya("uploadDate","desc"));return(await So(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener análisis:",t),new Error("No se pudieron cargar los análisis taxonómicos")}},aNe=async t=>{try{return{id:(await eo(Ar(wn,BT),{...t,uploadDate:t.uploadDate||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear análisis:",e),new Error("No se pudo crear el análisis taxonómico")}},sNe=async t=>{try{const e=hn(wn,BT,t);await Bo(e)}catch(e){throw console.error("Error al eliminar análisis:",e,"ID:",t),new Error("No se pudo eliminar el análisis taxonómico")}},WD=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],$D={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},iNe=()=>c.jsxs("svg",{className:"animate-spin h-5 w-5 text-slate-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),YD=({currentUser:t})=>{const[e,r]=J.useState([]),[n,a]=J.useState(!1),[s,i]=J.useState(null),[o,l]=J.useState(null),[A,d]=J.useState(""),[h,m]=J.useState(!1),[g,b]=J.useState(null),[w,_]=J.useState(null),N=J.useCallback(async()=>{a(!0);try{const D=await nNe();r(D),i(null)}catch(D){console.error("Error al cargar análisis desde Firestore",D),i("No se pudieron cargar los análisis desde la nube.")}finally{a(!1)}},[]);J.useEffect(()=>{N()},[N]);const k=async D=>{var B;const C=(B=D.target.files)==null?void 0:B[0];if(C){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(C.type)){i("Por favor, suba un archivo PDF o DOCX válido."),b(null),_(null),d("");return}b(C),d(C.name),i(null);const O=new FileReader;O.onloadend=()=>{const F=O.result.split(",")[1];if(!F){i("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),_(null);return}_({mimeType:C.type,data:F})},O.onerror=()=>{i("Error al leer el archivo."),_(null)},O.readAsDataURL(C)}},I=async()=>{if(!A.trim()||!w){i("Debe subir un documento PDF o DOCX y asignarle un nombre para analizar.");return}m(!0),i(null);const D=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados.
        `,C={type:Zt.OBJECT,properties:{analysisResults:{type:Zt.ARRAY,description:"Un array con cada pregunta identificada y su clasificación de Bloom.",items:{type:Zt.OBJECT,properties:{question:{type:Zt.STRING,description:"El texto exacto de la pregunta."},habilidadBloom:{type:Zt.STRING,description:"El nivel de Bloom correspondiente.",enum:WD}},required:["question","habilidadBloom"]}},summary:{type:Zt.OBJECT,description:"Un resumen con el conteo de preguntas por cada nivel de Bloom.",properties:{Recordar:{type:Zt.INTEGER},Comprender:{type:Zt.INTEGER},Aplicar:{type:Zt.INTEGER},Analizar:{type:Zt.INTEGER},Evaluar:{type:Zt.INTEGER},Crear:{type:Zt.INTEGER}}}},required:["analysisResults","summary"]};try{Gl("Análisis Taxonómico");const B=new zl({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),T={inlineData:{mimeType:w.mimeType,data:w.data}},O=await B.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{text:D},T]},config:{responseMimeType:"application/json",responseSchema:C}}),F=JSON.parse(O.text),L={documentName:A,uploadDate:new Date().toISOString(),userId:t.id,analysisResults:F.analysisResults,summary:F.summary},Q=await aNe(L);await N(),l(Q),d(""),b(null),_(null)}catch(B){console.error(B),i("Hubo un error al analizar el documento. Asegúrese de que el archivo no esté protegido o vacío. Inténtelo de nuevo.")}finally{m(!1)}},P=async D=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await sNe(D),await N(),(o==null?void 0:o.id)===D&&l(null)}catch(C){console.error("Error al eliminar análisis:",C),i("No se pudo eliminar el análisis en la nube.")}},M=J.useMemo(()=>o?Object.values(o.summary).reduce((D,C)=>D+(C||0),0):0,[o]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonómico de Evaluaciones"}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando análisis desde la nube..."}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),c.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:c.jsxs("div",{className:"space-y-1 text-center",children:[c.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:c.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500 focus-within:outline-none",children:[c.jsx("span",{children:"Cargue un archivo"}),c.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:k,accept:".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"})]}),c.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:g?g.name:"PDF, DOCX hasta 10MB"})]})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento/Prueba"}),c.jsx("input",{type:"text",id:"documentName",value:A,onChange:D=>d(D.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("button",{onClick:I,disabled:h||!w,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:h?c.jsx(iNe,{}):"Analizar con IA"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),!n&&e.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados en la nube."}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:!n&&e.length>0&&e.map(D=>c.jsxs("button",{onClick:()=>l(D),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===D.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/30 dark:border-amber-700":"bg-slate-50 hover:bg-slate-100 dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[c.jsx("p",{className:"font-semibold truncate",children:D.documentName}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(D.uploadDate).toLocaleString("es-CL")})]},D.id))})]})]}),c.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL")]})]}),c.jsx("button",{onClick:()=>P(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado Taxonómico (",M," preguntas)"]}),c.jsx("div",{className:"space-y-3",children:WD.map(D=>{const C=o.summary[D]||0,B=M>0?C/M*100:0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:D}),c.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[C," (",B.toFixed(0),"%)"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:`${$D[D]} h-4 rounded-full`,style:{width:`${B}%`}})})]},D)})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),c.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((D,C)=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:D.question}),c.jsx("td",{className:"px-4 py-3 text-sm",children:c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${$D[D.habilidadBloom]}`,children:D.habilidadBloom})})]},C))})]})})]})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[c.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📊"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})},oNe=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},lNe=({currentUser:t,onLogout:e,onUserUpdate:r,onChangeProfile:n,unreadMessagesCount:a,refreshUnreadCount:s})=>{const i=t.profile,o=J.useMemo(()=>{const _=T$[i]??[];return i!==er.ESTUDIANTE?_:_.filter(N=>{if(N.name==="Asistencia a Empresa"){const k=oNe(t.curso||"");return k.startsWith("3º")||k.startsWith("4º")}return!0})},[i,t.curso]),[l,A]=J.useState(null),[d,h]=J.useState(!1);J.useEffect(()=>{o.length>0?A(o[0]):A(null)},[o]);const m=J.useCallback(_=>{A(_),window.innerWidth<768&&h(!1)},[]),g=J.useCallback(_=>{const N=o.find(k=>k.name===_);N&&m(N)},[o,m]),b=()=>c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-center h-16 border-b border-slate-700 px-4 flex-shrink-0",children:[c.jsx(A$,{}),c.jsx("span",{className:"ml-3 text-white font-bold text-xl whitespace-nowrap",children:"Gestión LIR"})]}),c.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto sidebar-scroll",children:o.map(_=>c.jsxs("button",{onClick:()=>m(_),className:`w-full flex items-center py-3 px-4 rounded-lg transition-colors duration-200 text-left ${(l==null?void 0:l.name)===_.name?"bg-slate-900 text-amber-400 font-semibold":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[_.icon,c.jsx("span",{className:"ml-4",children:_.name})]},_.name))})]}),w=()=>{if(!l)return c.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex items-center justify-center",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xl",children:"Seleccione un módulo del menú para comenzar."})});if(l.name==="Calendario Académico")return c.jsx(Pse,{profile:i});if(l.name==="Muro de Anuncios")return c.jsx(Vse,{currentUser:t});if(l.name==="Mensajería Interna")return c.jsx($1e,{currentUser:t,refreshUnreadCount:s});if(l.name==="Generador de Actas")return c.jsx(Gse,{});if(i===er.SUBDIRECCION){if(l.name==="Dashboard")return console.log("=== DASHBOARD PRINCIPAL DEBUG ==="),console.log("🔍 Dashboard principal - currentUser antes de pasar:",t),console.log("🔍 Dashboard principal - profile del usuario:",t==null?void 0:t.profile),console.log("🔍 Dashboard principal - email del usuario:",t==null?void 0:t.email),console.log("====================================="),c.jsx(eY,{currentUser:t});if(l.name==="Administración")return c.jsx(Jxe,{});if(l.name==="Seguimiento Curricular")return c.jsx(rNe,{currentUser:t});if(l.name==="Acompañamiento docente")return c.jsx(Q1e,{currentUser:t});if(l.name==="Análisis Taxonómico")return c.jsx(YD,{currentUser:t});if(l.name==="Interdisciplinario")return c.jsx(VR,{});if(l.name==="Registro de inasistencias y reemplazos docentes")return c.jsx($$,{currentUser:t});if(l.name==="Crear horarios")return c.jsx(lY,{});if(l.name==="Seguimiento de acciones pedagógicas")return c.jsx(fY,{});if(l.name==="Inclusión")return c.jsx(M6,{currentUser:t})}if(i===er.PROFESORADO){if(l.name==="Planificación")return c.jsx(kse,{currentUser:t});if(l.name==="Mis Acompañamientos")return c.jsx(WBe,{currentUser:t});if(l.name==="Recursos de Aprendizaje")return c.jsx(QBe,{});if(l.name==="Análisis Taxonómico")return c.jsx(YD,{currentUser:t});if(l.name==="Interdisciplinario")return c.jsx(VR,{});if(l.name==="Inclusión")return c.jsx(M6,{currentUser:t});if(l.name==="Actividades Remotas")return c.jsx(c1e,{});if(l.name==="Evaluación de Aprendizajes")return c.jsx(qoe,{});if(l.name==="Evaluaciones Formativas")return c.jsx(D1e,{currentUser:t})}if(i===er.COORDINACION_TP){if(l.name==="Seguimiento Dual")return c.jsx(t1e,{});if(l.name==="Asistencia Dual")return c.jsx(B1e,{});if(l.name==="Pañol")return c.jsx(PCe,{})}if(i===er.ESTUDIANTE){if(l.name==="Auto-aprendizaje")return c.jsx(h1e,{currentUser:t});if(l.name==="Evaluación Formativa")return c.jsx(zBe,{currentUser:t});if(l.name==="Tareas Interdisciplinarias")return c.jsx(qBe,{currentUser:t});if(l.name==="Asistencia a Empresa")return c.jsx(C1e,{currentUser:t})}return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:l.name}),c.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:c.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",c.jsx("span",{className:"font-semibold",children:l.name}),"."]})})]})};return c.jsxs("div",{className:"h-screen flex flex-col bg-slate-100",children:[c.jsx(D$,{currentUser:t,onLogout:e,onNavigate:g,onUserUpdate:r,onChangeProfile:n,toggleSidebar:()=>h(!d),unreadMessagesCount:a,refreshUnreadCount:s}),c.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[d&&c.jsx("div",{onClick:()=>h(!1),className:"fixed inset-0 bg-black opacity-50 z-20 md:hidden"}),c.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 w-72 bg-slate-800 text-white flex flex-col transform md:translate-x-0 ${d?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:c.jsx(b,{})}),c.jsx("main",{className:"flex-1 overflow-y-auto",children:c.jsx("div",{className:"p-6 md:p-8",children:w()})})]})]})},cNe=({onSelectProfile:t,isAdminView:e=!1})=>c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx($S,{})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:e?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:S$.map(r=>c.jsxs("button",{onClick:()=>t(r.id),className:"group bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md hover:shadow-xl hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-amber-400 focus:ring-opacity-50 transition-all duration-300 ease-in-out flex flex-col items-center justify-center text-center",children:[c.jsx("div",{className:"text-slate-700 dark:text-slate-300 group-hover:text-amber-400 transition-colors duration-300",children:r.icon}),c.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-800 dark:text-slate-200",children:r.label})]},r.id))}),c.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),uNe=()=>{const[t,e]=J.useState(null),[r,n]=J.useState(null),[a,s]=J.useState(!0),[i,o]=J.useState(null),[l,A]=J.useState(!1),[d,h]=J.useState(null);J.useEffect(()=>{console.log("🔄 Iniciando listener de Auth...");const N=jz(Vp,async k=>{try{if(console.log("🔄 Auth state changed:",(k==null?void 0:k.email)||"No user"),e(k),!k)console.log("🚪 Usuario no autenticado, limpiando estado"),n(null),h(null),A(!1),o(null);else{console.log("🔄 Cargando datos de Firestore para:",k.email);try{const I=hn(wn,"usuarios",k.email),P=await km(I);if(P.exists()){const M={id:k.email,...P.data()};console.log("✅ Datos de usuario cargados:",{nombre:M.nombreCompleto,profile:M.profile,email:M.email}),n(M),o(null),M.profile===er.SUBDIRECCION&&(console.log("👑 Usuario SUBDIRECCION detectado, habilitando selector de perfil"),A(!0))}else console.log("❌ Usuario no encontrado en Firestore para:",k.email),n(null),o("Usuario no encontrado en la base de datos. Contacte al administrador."),await nk(Vp)}catch(I){console.error("❌ Error específico de Firestore:",I),n(null),o("Error al conectar con la base de datos. Verifique su conexión.")}}}catch(I){console.error("❌ Error general en Auth state change:",I),n(null),e(null),o("Error de autenticación. Intente nuevamente.")}finally{s(!1),console.log("✅ Auth inicialización completada")}});return()=>{console.log("🔄 Limpiando listener de Auth"),N()}},[]);const m=async(N,k)=>{if(o(null),!N.trim()||!k.trim()){o("Por favor ingrese email y contraseña");return}try{console.log("🔄 Intentando login para:",N);const I=hn(wn,"usuarios",N.trim().toLowerCase());if(!(await km(I)).exists()){o("Usuario no registrado en el sistema");return}await Uz(Vp,N.trim().toLowerCase(),k),console.log("✅ Login exitoso")}catch(I){switch(console.error("❌ Error de login:",I),I.code){case"auth/user-not-found":o("No existe una cuenta con este correo electrónico");break;case"auth/wrong-password":o("Contraseña incorrecta");break;case"auth/invalid-email":o("Formato de correo electrónico inválido");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente más tarde o restablezca su contraseña");break;case"auth/network-request-failed":o("Error de conexión. Verifique su internet");break;case"auth/invalid-credential":o("Credenciales inválidas. Verifique su email y contraseña");break;default:o(`Error de autenticación: ${I.message}`)}}},g=async N=>{try{return console.log("🔄 Enviando email de recuperación a:",N),await Lz(Vp,N),console.log("✅ Email de recuperación enviado"),{success:!0,message:"Email de recuperación enviado correctamente"}}catch(k){switch(console.error("❌ Error al enviar email de recuperación:",k),k.code){case"auth/user-not-found":return{success:!1,message:"No existe una cuenta con este correo"};case"auth/invalid-email":return{success:!1,message:"Correo electrónico inválido"};default:return{success:!1,message:"Error al enviar email de recuperación"}}}},b=N=>{console.log("👑 Admin seleccionó perfil:",N),h(N),A(!1)},w=async()=>{try{console.log("🚪 Cerrando sesión..."),await nk(Vp),e(null),n(null),h(null),A(!1),o(null),console.log("✅ Sesión cerrada exitosamente")}catch(N){console.error("❌ Error al cerrar sesión:",N)}};if(a)return c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx($S,{})}),c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."}),c.jsx("p",{className:"mt-2 text-sm text-slate-500 dark:text-slate-500",children:"Verificando autenticación y permisos"})]})});const _=()=>{if(i&&!t)return c.jsx(x3,{onLoginAttempt:m,onForgotPasswordRequest:g,error:i});if(t&&l&&(r==null?void 0:r.profile)===er.SUBDIRECCION)return c.jsx(cNe,{onSelectProfile:b,isAdminView:!0});if(t&&r){const N=d||r.profile;return console.log("🎯 Renderizando Dashboard para:",{user:r.nombreCompleto,originalProfile:r.profile,effectiveProfile:N}),c.jsx(lNe,{currentUser:{...r,profile:N},onLogout:w})}return t&&!r?c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:c.jsxs("div",{className:"text-center p-6 bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[c.jsx("div",{className:"mb-4 text-red-500",children:c.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.232 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error de datos de usuario"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"No se pudieron cargar los datos del usuario desde la base de datos."}),c.jsx("button",{onClick:w,className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Volver al Login"})]})}):c.jsx(x3,{onLoginAttempt:m,onForgotPasswordRequest:g,error:i})};return c.jsx("div",{className:"min-h-screen bg-slate-100 font-sans",children:_()})},OQ=document.getElementById("root");if(!OQ)throw new Error("Could not find root element to mount to");const ANe=J9.createRoot(OQ);ANe.render(c.jsx(At.StrictMode,{children:c.jsx(uNe,{})}));export{Vn as _,dNe as c,X5 as g};
