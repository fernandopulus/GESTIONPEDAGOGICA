var yhe=Object.defineProperty;var whe=(e,t,r)=>t in e?yhe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var P3=(e,t,r)=>whe(e,typeof t!="symbol"?t+"":t,r);function Ehe(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var Xmt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Nhe(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var R3={exports:{}},sy={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u9;function Che(){if(u9)return sy;u9=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,s){var o=null;if(s!==void 0&&(o=""+s),a.key!==void 0&&(o=""+a.key),"key"in a){s={};for(var l in a)l!=="key"&&(s[l]=a[l])}else s=a;return a=s.ref,{$$typeof:e,type:n,key:o,ref:a!==void 0?a:null,props:s}}return sy.Fragment=t,sy.jsx=r,sy.jsxs=r,sy}var d9;function _he(){return d9||(d9=1,R3.exports=Che()),R3.exports}var i=_he(),L3={exports:{}},un={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f9;function She(){if(f9)return un;f9=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function h(ee){return ee===null||typeof ee!="object"?null:(ee=f&&ee[f]||ee["@@iterator"],typeof ee=="function"?ee:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,x={};function v(ee,W,P){this.props=ee,this.context=W,this.refs=x,this.updater=P||m}v.prototype.isReactComponent={},v.prototype.setState=function(ee,W){if(typeof ee!="object"&&typeof ee!="function"&&ee!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ee,W,"setState")},v.prototype.forceUpdate=function(ee){this.updater.enqueueForceUpdate(this,ee,"forceUpdate")};function y(){}y.prototype=v.prototype;function w(ee,W,P){this.props=ee,this.context=W,this.refs=x,this.updater=P||m}var _=w.prototype=new y;_.constructor=w,g(_,v.prototype),_.isPureReactComponent=!0;var T=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function E(ee,W,P,U,z,J){return P=J.ref,{$$typeof:e,type:ee,key:W,ref:P!==void 0?P:null,props:J}}function S(ee,W){return E(ee.type,W,void 0,void 0,void 0,ee.props)}function B(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===e}function M(ee){var W={"=":"=0",":":"=2"};return"$"+ee.replace(/[=:]/g,function(P){return W[P]})}var R=/\/+/g;function k(ee,W){return typeof ee=="object"&&ee!==null&&ee.key!=null?M(""+ee.key):W.toString(36)}function D(){}function L(ee){switch(ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason;default:switch(typeof ee.status=="string"?ee.then(D,D):(ee.status="pending",ee.then(function(W){ee.status==="pending"&&(ee.status="fulfilled",ee.value=W)},function(W){ee.status==="pending"&&(ee.status="rejected",ee.reason=W)})),ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason}}throw ee}function Z(ee,W,P,U,z){var J=typeof ee;(J==="undefined"||J==="boolean")&&(ee=null);var te=!1;if(ee===null)te=!0;else switch(J){case"bigint":case"string":case"number":te=!0;break;case"object":switch(ee.$$typeof){case e:case t:te=!0;break;case d:return te=ee._init,Z(te(ee._payload),W,P,U,z)}}if(te)return z=z(ee),te=U===""?"."+k(ee,0):U,T(z)?(P="",te!=null&&(P=te.replace(R,"$&/")+"/"),Z(z,W,P,"",function(ce){return ce})):z!=null&&(B(z)&&(z=S(z,P+(z.key==null||ee&&ee.key===z.key?"":(""+z.key).replace(R,"$&/")+"/")+te)),W.push(z)),1;te=0;var se=U===""?".":U+":";if(T(ee))for(var ie=0;ie<ee.length;ie++)U=ee[ie],J=se+k(U,ie),te+=Z(U,W,P,J,z);else if(ie=h(ee),typeof ie=="function")for(ee=ie.call(ee),ie=0;!(U=ee.next()).done;)U=U.value,J=se+k(U,ie++),te+=Z(U,W,P,J,z);else if(J==="object"){if(typeof ee.then=="function")return Z(L(ee),W,P,U,z);throw W=String(ee),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(ee).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return te}function V(ee,W,P){if(ee==null)return ee;var U=[],z=0;return Z(ee,U,"","",function(J){return W.call(P,J,z++)}),U}function q(ee){if(ee._status===-1){var W=ee._result;W=W(),W.then(function(P){(ee._status===0||ee._status===-1)&&(ee._status=1,ee._result=P)},function(P){(ee._status===0||ee._status===-1)&&(ee._status=2,ee._result=P)}),ee._status===-1&&(ee._status=0,ee._result=W)}if(ee._status===1)return ee._result.default;throw ee._result}var G=typeof reportError=="function"?reportError:function(ee){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ee=="object"&&ee!==null&&typeof ee.message=="string"?String(ee.message):String(ee),error:ee});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ee);return}console.error(ee)};function K(){}return un.Children={map:V,forEach:function(ee,W,P){V(ee,function(){W.apply(this,arguments)},P)},count:function(ee){var W=0;return V(ee,function(){W++}),W},toArray:function(ee){return V(ee,function(W){return W})||[]},only:function(ee){if(!B(ee))throw Error("React.Children.only expected to receive a single React element child.");return ee}},un.Component=v,un.Fragment=r,un.Profiler=a,un.PureComponent=w,un.StrictMode=n,un.Suspense=c,un.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,un.__COMPILER_RUNTIME={__proto__:null,c:function(ee){return j.H.useMemoCache(ee)}},un.cache=function(ee){return function(){return ee.apply(null,arguments)}},un.cloneElement=function(ee,W,P){if(ee==null)throw Error("The argument must be a React element, but you passed "+ee+".");var U=g({},ee.props),z=ee.key,J=void 0;if(W!=null)for(te in W.ref!==void 0&&(J=void 0),W.key!==void 0&&(z=""+W.key),W)!I.call(W,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&W.ref===void 0||(U[te]=W[te]);var te=arguments.length-2;if(te===1)U.children=P;else if(1<te){for(var se=Array(te),ie=0;ie<te;ie++)se[ie]=arguments[ie+2];U.children=se}return E(ee.type,z,void 0,void 0,J,U)},un.createContext=function(ee){return ee={$$typeof:o,_currentValue:ee,_currentValue2:ee,_threadCount:0,Provider:null,Consumer:null},ee.Provider=ee,ee.Consumer={$$typeof:s,_context:ee},ee},un.createElement=function(ee,W,P){var U,z={},J=null;if(W!=null)for(U in W.key!==void 0&&(J=""+W.key),W)I.call(W,U)&&U!=="key"&&U!=="__self"&&U!=="__source"&&(z[U]=W[U]);var te=arguments.length-2;if(te===1)z.children=P;else if(1<te){for(var se=Array(te),ie=0;ie<te;ie++)se[ie]=arguments[ie+2];z.children=se}if(ee&&ee.defaultProps)for(U in te=ee.defaultProps,te)z[U]===void 0&&(z[U]=te[U]);return E(ee,J,void 0,void 0,null,z)},un.createRef=function(){return{current:null}},un.forwardRef=function(ee){return{$$typeof:l,render:ee}},un.isValidElement=B,un.lazy=function(ee){return{$$typeof:d,_payload:{_status:-1,_result:ee},_init:q}},un.memo=function(ee,W){return{$$typeof:u,type:ee,compare:W===void 0?null:W}},un.startTransition=function(ee){var W=j.T,P={};j.T=P;try{var U=ee(),z=j.S;z!==null&&z(P,U),typeof U=="object"&&U!==null&&typeof U.then=="function"&&U.then(K,G)}catch(J){G(J)}finally{j.T=W}},un.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},un.use=function(ee){return j.H.use(ee)},un.useActionState=function(ee,W,P){return j.H.useActionState(ee,W,P)},un.useCallback=function(ee,W){return j.H.useCallback(ee,W)},un.useContext=function(ee){return j.H.useContext(ee)},un.useDebugValue=function(){},un.useDeferredValue=function(ee,W){return j.H.useDeferredValue(ee,W)},un.useEffect=function(ee,W,P){var U=j.H;if(typeof P=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return U.useEffect(ee,W)},un.useId=function(){return j.H.useId()},un.useImperativeHandle=function(ee,W,P){return j.H.useImperativeHandle(ee,W,P)},un.useInsertionEffect=function(ee,W){return j.H.useInsertionEffect(ee,W)},un.useLayoutEffect=function(ee,W){return j.H.useLayoutEffect(ee,W)},un.useMemo=function(ee,W){return j.H.useMemo(ee,W)},un.useOptimistic=function(ee,W){return j.H.useOptimistic(ee,W)},un.useReducer=function(ee,W,P){return j.H.useReducer(ee,W,P)},un.useRef=function(ee){return j.H.useRef(ee)},un.useState=function(ee){return j.H.useState(ee)},un.useSyncExternalStore=function(ee,W,P){return j.H.useSyncExternalStore(ee,W,P)},un.useTransition=function(){return j.H.useTransition()},un.version="19.1.1",un}var A9;function Rb(){return A9||(A9=1,L3.exports=She()),L3.exports}var C=Rb();const at=jl(C),khe=Ehe({__proto__:null,default:at},[C]);var M3={exports:{}},iy={},U3={exports:{}},Q3={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h9;function jhe(){return h9||(h9=1,function(e){function t(V,q){var G=V.length;V.push(q);e:for(;0<G;){var K=G-1>>>1,ee=V[K];if(0<a(ee,q))V[K]=q,V[G]=ee,G=K;else break e}}function r(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var q=V[0],G=V.pop();if(G!==q){V[0]=G;e:for(var K=0,ee=V.length,W=ee>>>1;K<W;){var P=2*(K+1)-1,U=V[P],z=P+1,J=V[z];if(0>a(U,G))z<ee&&0>a(J,U)?(V[K]=J,V[z]=G,K=z):(V[K]=U,V[P]=G,K=P);else if(z<ee&&0>a(J,G))V[K]=J,V[z]=G,K=z;else break e}}return q}function a(V,q){var G=V.sortIndex-q.sortIndex;return G!==0?G:V.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,g=!1,x=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function T(V){for(var q=r(u);q!==null;){if(q.callback===null)n(u);else if(q.startTime<=V)n(u),q.sortIndex=q.expirationTime,t(c,q);else break;q=r(u)}}function j(V){if(x=!1,T(V),!g)if(r(c)!==null)g=!0,I||(I=!0,k());else{var q=r(u);q!==null&&Z(j,q.startTime-V)}}var I=!1,E=-1,S=5,B=-1;function M(){return v?!0:!(e.unstable_now()-B<S)}function R(){if(v=!1,I){var V=e.unstable_now();B=V;var q=!0;try{e:{g=!1,x&&(x=!1,w(E),E=-1),m=!0;var G=h;try{t:{for(T(V),f=r(c);f!==null&&!(f.expirationTime>V&&M());){var K=f.callback;if(typeof K=="function"){f.callback=null,h=f.priorityLevel;var ee=K(f.expirationTime<=V);if(V=e.unstable_now(),typeof ee=="function"){f.callback=ee,T(V),q=!0;break t}f===r(c)&&n(c),T(V)}else n(c);f=r(c)}if(f!==null)q=!0;else{var W=r(u);W!==null&&Z(j,W.startTime-V),q=!1}}break e}finally{f=null,h=G,m=!1}q=void 0}}finally{q?k():I=!1}}}var k;if(typeof _=="function")k=function(){_(R)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,L=D.port2;D.port1.onmessage=R,k=function(){L.postMessage(null)}}else k=function(){y(R,0)};function Z(V,q){E=y(function(){V(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(V){switch(h){case 1:case 2:case 3:var q=3;break;default:q=h}var G=h;h=q;try{return V()}finally{h=G}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(V,q){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var G=h;h=V;try{return q()}finally{h=G}},e.unstable_scheduleCallback=function(V,q,G){var K=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?K+G:K):G=K,V){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=G+ee,V={id:d++,callback:q,priorityLevel:V,startTime:G,expirationTime:ee,sortIndex:-1},G>K?(V.sortIndex=G,t(u,V),r(c)===null&&V===r(u)&&(x?(w(E),E=-1):x=!0,Z(j,G-K))):(V.sortIndex=ee,t(c,V),g||m||(g=!0,I||(I=!0,k()))),V},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(V){var q=h;return function(){var G=h;h=q;try{return V.apply(this,arguments)}finally{h=G}}}}(Q3)),Q3}var m9;function Bhe(){return m9||(m9=1,U3.exports=jhe()),U3.exports}var H3={exports:{}},Lo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p9;function The(){if(p9)return Lo;p9=1;var e=Rb();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(c,u,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:f==null?null:""+f,children:c,containerInfo:u,implementation:d}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Lo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Lo.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return s(c,u,null,d)},Lo.flushSync=function(c){var u=o.T,d=n.p;try{if(o.T=null,n.p=2,c)return c()}finally{o.T=u,n.p=d,n.d.f()}},Lo.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(c,u))},Lo.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},Lo.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,f=l(d,u.crossOrigin),h=typeof u.integrity=="string"?u.integrity:void 0,m=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?n.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:h,fetchPriority:m}):d==="script"&&n.d.X(c,{crossOrigin:f,integrity:h,fetchPriority:m,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Lo.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=l(u.as,u.crossOrigin);n.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(c)},Lo.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,f=l(d,u.crossOrigin);n.d.L(c,d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Lo.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=l(u.as,u.crossOrigin);n.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(c)},Lo.requestFormReset=function(c){n.d.r(c)},Lo.unstable_batchedUpdates=function(c,u){return c(u)},Lo.useFormState=function(c,u,d){return o.H.useFormState(c,u,d)},Lo.useFormStatus=function(){return o.H.useHostTransitionStatus()},Lo.version="19.1.1",Lo}var g9;function sJ(){if(g9)return H3.exports;g9=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),H3.exports=The(),H3.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x9;function Ihe(){if(x9)return iy;x9=1;var e=Bhe(),t=Rb(),r=sJ();function n(A){var p="https://react.dev/errors/"+A;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+A+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function s(A){var p=A,b=A;if(A.alternate)for(;p.return;)p=p.return;else{A=p;do p=A,(p.flags&4098)!==0&&(b=p.return),A=p.return;while(A)}return p.tag===3?b:null}function o(A){if(A.tag===13){var p=A.memoizedState;if(p===null&&(A=A.alternate,A!==null&&(p=A.memoizedState)),p!==null)return p.dehydrated}return null}function l(A){if(s(A)!==A)throw Error(n(188))}function c(A){var p=A.alternate;if(!p){if(p=s(A),p===null)throw Error(n(188));return p!==A?null:A}for(var b=A,N=p;;){var Q=b.return;if(Q===null)break;var X=Q.alternate;if(X===null){if(N=Q.return,N!==null){b=N;continue}break}if(Q.child===X.child){for(X=Q.child;X;){if(X===b)return l(Q),A;if(X===N)return l(Q),p;X=X.sibling}throw Error(n(188))}if(b.return!==N.return)b=Q,N=X;else{for(var fe=!1,Ee=Q.child;Ee;){if(Ee===b){fe=!0,b=Q,N=X;break}if(Ee===N){fe=!0,N=Q,b=X;break}Ee=Ee.sibling}if(!fe){for(Ee=X.child;Ee;){if(Ee===b){fe=!0,b=X,N=Q;break}if(Ee===N){fe=!0,N=X,b=Q;break}Ee=Ee.sibling}if(!fe)throw Error(n(189))}}if(b.alternate!==N)throw Error(n(190))}if(b.tag!==3)throw Error(n(188));return b.stateNode.current===b?A:p}function u(A){var p=A.tag;if(p===5||p===26||p===27||p===6)return A;for(A=A.child;A!==null;){if(p=u(A),p!==null)return p;A=A.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),_=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function k(A){return A===null||typeof A!="object"?null:(A=R&&A[R]||A["@@iterator"],typeof A=="function"?A:null)}var D=Symbol.for("react.client.reference");function L(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===D?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case g:return"Fragment";case v:return"Profiler";case x:return"StrictMode";case j:return"Suspense";case I:return"SuspenseList";case B:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case m:return"Portal";case _:return(A.displayName||"Context")+".Provider";case w:return(A._context.displayName||"Context")+".Consumer";case T:var p=A.render;return A=A.displayName,A||(A=p.displayName||p.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case E:return p=A.displayName||null,p!==null?p:L(A.type)||"Memo";case S:p=A._payload,A=A._init;try{return L(A(p))}catch{}}return null}var Z=Array.isArray,V=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},K=[],ee=-1;function W(A){return{current:A}}function P(A){0>ee||(A.current=K[ee],K[ee]=null,ee--)}function U(A,p){ee++,K[ee]=A.current,A.current=p}var z=W(null),J=W(null),te=W(null),se=W(null);function ie(A,p){switch(U(te,p),U(J,A),U(z,null),p.nodeType){case 9:case 11:A=(A=p.documentElement)&&(A=A.namespaceURI)?LU(A):0;break;default:if(A=p.tagName,p=p.namespaceURI)p=LU(p),A=MU(p,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}P(z),U(z,A)}function ce(){P(z),P(J),P(te)}function de(A){A.memoizedState!==null&&U(se,A);var p=z.current,b=MU(p,A.type);p!==b&&(U(J,A),U(z,b))}function Be(A){J.current===A&&(P(z),P(J)),se.current===A&&(P(se),ey._currentValue=G)}var ae=Object.prototype.hasOwnProperty,Se=e.unstable_scheduleCallback,ke=e.unstable_cancelCallback,ve=e.unstable_shouldYield,le=e.unstable_requestPaint,be=e.unstable_now,Pe=e.unstable_getCurrentPriorityLevel,Ue=e.unstable_ImmediatePriority,pe=e.unstable_UserBlockingPriority,Oe=e.unstable_NormalPriority,Le=e.unstable_LowPriority,Ge=e.unstable_IdlePriority,et=e.log,ut=e.unstable_setDisableYieldValue,xt=null,It=null;function Mt(A){if(typeof et=="function"&&ut(A),It&&typeof It.setStrictMode=="function")try{It.setStrictMode(xt,A)}catch{}}var Pt=Math.clz32?Math.clz32:Tr,Ht=Math.log,wt=Math.LN2;function Tr(A){return A>>>=0,A===0?32:31-(Ht(A)/wt|0)|0}var tr=256,sn=4194304;function kr(A){var p=A&42;if(p!==0)return p;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function $r(A,p,b){var N=A.pendingLanes;if(N===0)return 0;var Q=0,X=A.suspendedLanes,fe=A.pingedLanes;A=A.warmLanes;var Ee=N&134217727;return Ee!==0?(N=Ee&~X,N!==0?Q=kr(N):(fe&=Ee,fe!==0?Q=kr(fe):b||(b=Ee&~A,b!==0&&(Q=kr(b))))):(Ee=N&~X,Ee!==0?Q=kr(Ee):fe!==0?Q=kr(fe):b||(b=N&~A,b!==0&&(Q=kr(b)))),Q===0?0:p!==0&&p!==Q&&(p&X)===0&&(X=Q&-Q,b=p&-p,X>=b||X===32&&(b&4194048)!==0)?p:Q}function Fn(A,p){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&p)===0}function Pr(A,p){switch(A){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ms(){var A=tr;return tr<<=1,(tr&4194048)===0&&(tr=256),A}function pn(){var A=sn;return sn<<=1,(sn&62914560)===0&&(sn=4194304),A}function la(A){for(var p=[],b=0;31>b;b++)p.push(A);return p}function Ba(A,p){A.pendingLanes|=p,p!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function rn(A,p,b,N,Q,X){var fe=A.pendingLanes;A.pendingLanes=b,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=b,A.entangledLanes&=b,A.errorRecoveryDisabledLanes&=b,A.shellSuspendCounter=0;var Ee=A.entanglements,Re=A.expirationTimes,ct=A.hiddenUpdates;for(b=fe&~b;0<b;){var St=31-Pt(b),Ot=1<<St;Ee[St]=0,Re[St]=-1;var At=ct[St];if(At!==null)for(ct[St]=null,St=0;St<At.length;St++){var ht=At[St];ht!==null&&(ht.lane&=-536870913)}b&=~Ot}N!==0&&gr(A,N,0),X!==0&&Q===0&&A.tag!==0&&(A.suspendedLanes|=X&~(fe&~p))}function gr(A,p,b){A.pendingLanes|=p,A.suspendedLanes&=~p;var N=31-Pt(p);A.entangledLanes|=p,A.entanglements[N]=A.entanglements[N]|1073741824|b&4194090}function Ze(A,p){var b=A.entangledLanes|=p;for(A=A.entanglements;b;){var N=31-Pt(b),Q=1<<N;Q&p|A[N]&p&&(A[N]|=p),b&=~Q}}function mt(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function Je(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function vt(){var A=q.p;return A!==0?A:(A=window.event,A===void 0?32:a9(A.type))}function Et(A,p){var b=q.p;try{return q.p=A,p()}finally{q.p=b}}var bt=Math.random().toString(36).slice(2),ar="__reactFiber$"+bt,xr="__reactProps$"+bt,Wr="__reactContainer$"+bt,Zr="__reactEvents$"+bt,Kr="__reactListeners$"+bt,me="__reactHandles$"+bt,Ie="__reactResources$"+bt,_e="__reactMarker$"+bt;function Ne(A){delete A[ar],delete A[xr],delete A[Zr],delete A[Kr],delete A[me]}function je(A){var p=A[ar];if(p)return p;for(var b=A.parentNode;b;){if(p=b[Wr]||b[ar]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(A=VU(A);A!==null;){if(b=A[ar])return b;A=VU(A)}return p}A=b,b=A.parentNode}return null}function Fe(A){if(A=A[ar]||A[Wr]){var p=A.tag;if(p===5||p===6||p===13||p===26||p===27||p===3)return A}return null}function Ye(A){var p=A.tag;if(p===5||p===26||p===27||p===6)return A.stateNode;throw Error(n(33))}function ft(A){var p=A[Ie];return p||(p=A[Ie]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function qe(A){A[_e]=!0}var rt=new Set,it={};function Ft(A,p){$t(A,p),$t(A+"Capture",p)}function $t(A,p){for(it[A]=p,A=0;A<p.length;A++)rt.add(p[A])}var Jt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zt={},qt={};function jr(A){return ae.call(qt,A)?!0:ae.call(zt,A)?!1:Jt.test(A)?qt[A]=!0:(zt[A]=!0,!1)}function on(A,p,b){if(jr(p))if(b===null)A.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":A.removeAttribute(p);return;case"boolean":var N=p.toLowerCase().slice(0,5);if(N!=="data-"&&N!=="aria-"){A.removeAttribute(p);return}}A.setAttribute(p,""+b)}}function ln(A,p,b){if(b===null)A.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(p);return}A.setAttribute(p,""+b)}}function An(A,p,b,N){if(N===null)A.removeAttribute(b);else{switch(typeof N){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(b);return}A.setAttributeNS(p,b,""+N)}}var ps,So;function gs(A){if(ps===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);ps=p&&p[1]||"",So=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ps+A+So}var ai=!1;function Ls(A,p){if(!A||ai)return"";ai=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var N={DetermineComponentFrameRoot:function(){try{if(p){var Ot=function(){throw Error()};if(Object.defineProperty(Ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ot,[])}catch(ht){var At=ht}Reflect.construct(A,[],Ot)}else{try{Ot.call()}catch(ht){At=ht}A.call(Ot.prototype)}}else{try{throw Error()}catch(ht){At=ht}(Ot=A())&&typeof Ot.catch=="function"&&Ot.catch(function(){})}}catch(ht){if(ht&&At&&typeof ht.stack=="string")return[ht.stack,At.stack]}return[null,null]}};N.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Q=Object.getOwnPropertyDescriptor(N.DetermineComponentFrameRoot,"name");Q&&Q.configurable&&Object.defineProperty(N.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var X=N.DetermineComponentFrameRoot(),fe=X[0],Ee=X[1];if(fe&&Ee){var Re=fe.split(`
`),ct=Ee.split(`
`);for(Q=N=0;N<Re.length&&!Re[N].includes("DetermineComponentFrameRoot");)N++;for(;Q<ct.length&&!ct[Q].includes("DetermineComponentFrameRoot");)Q++;if(N===Re.length||Q===ct.length)for(N=Re.length-1,Q=ct.length-1;1<=N&&0<=Q&&Re[N]!==ct[Q];)Q--;for(;1<=N&&0<=Q;N--,Q--)if(Re[N]!==ct[Q]){if(N!==1||Q!==1)do if(N--,Q--,0>Q||Re[N]!==ct[Q]){var St=`
`+Re[N].replace(" at new "," at ");return A.displayName&&St.includes("<anonymous>")&&(St=St.replace("<anonymous>",A.displayName)),St}while(1<=N&&0<=Q);break}}}finally{ai=!1,Error.prepareStackTrace=b}return(b=A?A.displayName||A.name:"")?gs(b):""}function wi(A){switch(A.tag){case 26:case 27:case 5:return gs(A.type);case 16:return gs("Lazy");case 13:return gs("Suspense");case 19:return gs("SuspenseList");case 0:case 15:return Ls(A.type,!1);case 11:return Ls(A.type.render,!1);case 1:return Ls(A.type,!0);case 31:return gs("Activity");default:return""}}function xa(A){try{var p="";do p+=wi(A),A=A.return;while(A);return p}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function si(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function Zd(A){var p=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function qh(A){var p=Zd(A)?"checked":"value",b=Object.getOwnPropertyDescriptor(A.constructor.prototype,p),N=""+A[p];if(!A.hasOwnProperty(p)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var Q=b.get,X=b.set;return Object.defineProperty(A,p,{configurable:!0,get:function(){return Q.call(this)},set:function(fe){N=""+fe,X.call(this,fe)}}),Object.defineProperty(A,p,{enumerable:b.enumerable}),{getValue:function(){return N},setValue:function(fe){N=""+fe},stopTracking:function(){A._valueTracker=null,delete A[p]}}}}function ru(A){A._valueTracker||(A._valueTracker=qh(A))}function mA(A){if(!A)return!1;var p=A._valueTracker;if(!p)return!0;var b=p.getValue(),N="";return A&&(N=Zd(A)?A.checked?"true":"false":A.value),A=N,A!==b?(p.setValue(A),!0):!1}function Ei(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var ef=/[\n"\\]/g;function On(A){return A.replace(ef,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function Ni(A,p,b,N,Q,X,fe,Ee){A.name="",fe!=null&&typeof fe!="function"&&typeof fe!="symbol"&&typeof fe!="boolean"?A.type=fe:A.removeAttribute("type"),p!=null?fe==="number"?(p===0&&A.value===""||A.value!=p)&&(A.value=""+si(p)):A.value!==""+si(p)&&(A.value=""+si(p)):fe!=="submit"&&fe!=="reset"||A.removeAttribute("value"),p!=null?au(A,fe,si(p)):b!=null?au(A,fe,si(b)):N!=null&&A.removeAttribute("value"),Q==null&&X!=null&&(A.defaultChecked=!!X),Q!=null&&(A.checked=Q&&typeof Q!="function"&&typeof Q!="symbol"),Ee!=null&&typeof Ee!="function"&&typeof Ee!="symbol"&&typeof Ee!="boolean"?A.name=""+si(Ee):A.removeAttribute("name")}function nu(A,p,b,N,Q,X,fe,Ee){if(X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"&&(A.type=X),p!=null||b!=null){if(!(X!=="submit"&&X!=="reset"||p!=null))return;b=b!=null?""+si(b):"",p=p!=null?""+si(p):b,Ee||p===A.value||(A.value=p),A.defaultValue=p}N=N??Q,N=typeof N!="function"&&typeof N!="symbol"&&!!N,A.checked=Ee?A.checked:!!N,A.defaultChecked=!!N,fe!=null&&typeof fe!="function"&&typeof fe!="symbol"&&typeof fe!="boolean"&&(A.name=fe)}function au(A,p,b){p==="number"&&Ei(A.ownerDocument)===A||A.defaultValue===""+b||(A.defaultValue=""+b)}function Il(A,p,b,N){if(A=A.options,p){p={};for(var Q=0;Q<b.length;Q++)p["$"+b[Q]]=!0;for(b=0;b<A.length;b++)Q=p.hasOwnProperty("$"+A[b].value),A[b].selected!==Q&&(A[b].selected=Q),Q&&N&&(A[b].defaultSelected=!0)}else{for(b=""+si(b),p=null,Q=0;Q<A.length;Q++){if(A[Q].value===b){A[Q].selected=!0,N&&(A[Q].defaultSelected=!0);return}p!==null||A[Q].disabled||(p=A[Q])}p!==null&&(p.selected=!0)}}function Vn(A,p,b){if(p!=null&&(p=""+si(p),p!==A.value&&(A.value=p),b==null)){A.defaultValue!==p&&(A.defaultValue=p);return}A.defaultValue=b!=null?""+si(b):""}function su(A,p,b,N){if(p==null){if(N!=null){if(b!=null)throw Error(n(92));if(Z(N)){if(1<N.length)throw Error(n(93));N=N[0]}b=N}b==null&&(b=""),p=b}b=si(p),A.defaultValue=b,N=A.textContent,N===b&&N!==""&&N!==null&&(A.value=N)}function ko(A,p){if(p){var b=A.firstChild;if(b&&b===A.lastChild&&b.nodeType===3){b.nodeValue=p;return}}A.textContent=p}var Ac=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kh(A,p,b){var N=p.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?N?A.setProperty(p,""):p==="float"?A.cssFloat="":A[p]="":N?A.setProperty(p,b):typeof b!="number"||b===0||Ac.has(p)?p==="float"?A.cssFloat=b:A[p]=(""+b).trim():A[p]=b+"px"}function pA(A,p,b){if(p!=null&&typeof p!="object")throw Error(n(62));if(A=A.style,b!=null){for(var N in b)!b.hasOwnProperty(N)||p!=null&&p.hasOwnProperty(N)||(N.indexOf("--")===0?A.setProperty(N,""):N==="float"?A.cssFloat="":A[N]="");for(var Q in p)N=p[Q],p.hasOwnProperty(Q)&&b[Q]!==N&&Kh(A,Q,N)}else for(var X in p)p.hasOwnProperty(X)&&Kh(A,X,p[X])}function gA(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mc(A){return tf.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var Fl=null;function ca(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var pc=null,Ol=null;function Fr(A){var p=Fe(A);if(p&&(A=p.stateNode)){var b=A[xr]||null;e:switch(A=p.stateNode,p.type){case"input":if(Ni(A,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),p=b.name,b.type==="radio"&&p!=null){for(b=A;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+On(""+p)+'"][type="radio"]'),p=0;p<b.length;p++){var N=b[p];if(N!==A&&N.form===A.form){var Q=N[xr]||null;if(!Q)throw Error(n(90));Ni(N,Q.value,Q.defaultValue,Q.defaultValue,Q.checked,Q.defaultChecked,Q.type,Q.name)}}for(p=0;p<b.length;p++)N=b[p],N.form===A.form&&mA(N)}break e;case"textarea":Vn(A,b.value,b.defaultValue);break e;case"select":p=b.value,p!=null&&Il(A,!!b.multiple,p,!1)}}}var Dl=!1;function Wh(A,p,b){if(Dl)return A(p,b);Dl=!0;try{var N=A(p);return N}finally{if(Dl=!1,(pc!==null||Ol!==null)&&(dN(),pc&&(p=pc,A=Ol,Ol=pc=null,Fr(p),A)))for(p=0;p<A.length;p++)Fr(A[p])}}function Li(A,p){var b=A.stateNode;if(b===null)return null;var N=b[xr]||null;if(N===null)return null;b=N[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(A=A.type,N=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!N;break e;default:A=!1}if(A)return null;if(b&&typeof b!="function")throw Error(n(231,p,typeof b));return b}var jo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),io=!1;if(jo)try{var Pl={};Object.defineProperty(Pl,"passive",{get:function(){io=!0}}),window.addEventListener("test",Pl,Pl),window.removeEventListener("test",Pl,Pl)}catch{io=!1}var Bo=null,iu=null,gc=null;function xA(){if(gc)return gc;var A,p=iu,b=p.length,N,Q="value"in Bo?Bo.value:Bo.textContent,X=Q.length;for(A=0;A<b&&p[A]===Q[A];A++);var fe=b-A;for(N=1;N<=fe&&p[b-N]===Q[X-N];N++);return gc=Q.slice(A,1<N?1-N:void 0)}function To(A){var p=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&p===13&&(A=13)):A=p,A===10&&(A=13),32<=A||A===13?A:0}function Mi(){return!0}function Rl(){return!1}function xs(A){function p(b,N,Q,X,fe){this._reactName=b,this._targetInst=Q,this.type=N,this.nativeEvent=X,this.target=fe,this.currentTarget=null;for(var Ee in A)A.hasOwnProperty(Ee)&&(b=A[Ee],this[Ee]=b?b(X):X[Ee]);return this.isDefaultPrevented=(X.defaultPrevented!=null?X.defaultPrevented:X.returnValue===!1)?Mi:Rl,this.isPropagationStopped=Rl,this}return d(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=Mi)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=Mi)},persist:function(){},isPersistent:Mi}),p}var yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ou=xs(yn),Ll=d({},yn,{view:0,detail:0}),vA=xs(Ll),ed,td,fl,Ui=d({},Ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:du,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==fl&&(fl&&A.type==="mousemove"?(ed=A.screenX-fl.screenX,td=A.screenY-fl.screenY):td=ed=0,fl=A),ed)},movementY:function(A){return"movementY"in A?A.movementY:td}}),vs=xs(Ui),Xh=d({},Ui,{dataTransfer:0}),lu=xs(Xh),Ci=d({},Ll,{relatedTarget:0}),cu=xs(Ci),xc=d({},yn,{animationName:0,elapsedTime:0,pseudoElement:0}),rf=xs(xc),rd=d({},yn,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),nf=xs(rd),bA=d({},yn,{data:0}),nd=xs(bA),uu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ad={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},af={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sd(A){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(A):(A=af[A])?!!p[A]:!1}function du(){return sd}var Yh=d({},Ll,{key:function(A){if(A.key){var p=uu[A.key]||A.key;if(p!=="Unidentified")return p}return A.type==="keypress"?(A=To(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?ad[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:du,charCode:function(A){return A.type==="keypress"?To(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?To(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),vc=xs(Yh),fu=d({},Ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),id=xs(fu),Qi=d({},Ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:du}),sf=xs(Qi),Y=d({},yn,{propertyName:0,elapsedTime:0,pseudoElement:0}),he=xs(Y),De=d({},Ui,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Me=xs(De),Ke=d({},yn,{newState:0,oldState:0}),yt=xs(Ke),Lt=[9,13,27,32],Zt=jo&&"CompositionEvent"in window,O=null;jo&&"documentMode"in document&&(O=document.documentMode);var ne=jo&&"TextEvent"in window&&!O,ue=jo&&(!Zt||O&&8<O&&11>=O),we=" ",$e=!1;function ot(A,p){switch(A){case"keyup":return Lt.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ut(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var Or=!1;function wn(A,p){switch(A){case"compositionend":return Ut(p);case"keypress":return p.which!==32?null:($e=!0,we);case"textInput":return A=p.data,A===we&&$e?null:A;default:return null}}function Xr(A,p){if(Or)return A==="compositionend"||!Zt&&ot(A,p)?(A=xA(),gc=iu=Bo=null,Or=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return ue&&p.locale!=="ko"?null:p.data;default:return null}}var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ta(A){var p=A&&A.nodeName&&A.nodeName.toLowerCase();return p==="input"?!!zn[A.type]:p==="textarea"}function Ml(A,p,b,N){pc?Ol?Ol.push(N):Ol=[N]:pc=N,p=gN(p,"onChange"),0<p.length&&(b=new ou("onChange","change",null,b,N),A.push({event:b,listeners:p}))}var rs=null,Io=null;function Au(A){FU(A,0)}function of(A){var p=Ye(A);if(mA(p))return A}function Jh(A,p){if(A==="change")return p}var yA=!1;if(jo){var Ms;if(jo){var lf="oninput"in document;if(!lf){var wA=document.createElement("div");wA.setAttribute("oninput","return;"),lf=typeof wA.oninput=="function"}Ms=lf}else Ms=!1;yA=Ms&&(!document.documentMode||9<document.documentMode)}function EA(){rs&&(rs.detachEvent("onpropertychange",Zh),Io=rs=null)}function Zh(A){if(A.propertyName==="value"&&of(Io)){var p=[];Ml(p,Io,A,ca(A)),Wh(Au,p)}}function Fo(A,p,b){A==="focusin"?(EA(),rs=p,Io=b,rs.attachEvent("onpropertychange",Zh)):A==="focusout"&&EA()}function y1(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return of(Io)}function ep(A,p){if(A==="click")return of(p)}function tx(A,p){if(A==="input"||A==="change")return of(p)}function Ul(A,p){return A===p&&(A!==0||1/A===1/p)||A!==A&&p!==p}var ii=typeof Object.is=="function"?Object.is:Ul;function cf(A,p){if(ii(A,p))return!0;if(typeof A!="object"||A===null||typeof p!="object"||p===null)return!1;var b=Object.keys(A),N=Object.keys(p);if(b.length!==N.length)return!1;for(N=0;N<b.length;N++){var Q=b[N];if(!ae.call(p,Q)||!ii(A[Q],p[Q]))return!1}return!0}function tp(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function od(A,p){var b=tp(A);A=0;for(var N;b;){if(b.nodeType===3){if(N=A+b.textContent.length,A<=p&&N>=p)return{node:b,offset:p-A};A=N}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=tp(b)}}function uf(A,p){return A&&p?A===p?!0:A&&A.nodeType===3?!1:p&&p.nodeType===3?uf(A,p.parentNode):"contains"in A?A.contains(p):A.compareDocumentPosition?!!(A.compareDocumentPosition(p)&16):!1:!1}function oo(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var p=Ei(A.document);p instanceof A.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)A=p.contentWindow;else break;p=Ei(A.document)}return p}function _i(A){var p=A&&A.nodeName&&A.nodeName.toLowerCase();return p&&(p==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||p==="textarea"||A.contentEditable==="true")}var df=jo&&"documentMode"in document&&11>=document.documentMode,Oo=null,bc=null,hu=null,yc=!1;function qa(A,p,b){var N=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;yc||Oo==null||Oo!==Ei(N)||(N=Oo,"selectionStart"in N&&_i(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),hu&&cf(hu,N)||(hu=N,N=gN(bc,"onSelect"),0<N.length&&(p=new ou("onSelect","select",null,p,b),A.push({event:p,listeners:N}),p.target=Oo)))}function wc(A,p){var b={};return b[A.toLowerCase()]=p.toLowerCase(),b["Webkit"+A]="webkit"+p,b["Moz"+A]="moz"+p,b}var bs={animationend:wc("Animation","AnimationEnd"),animationiteration:wc("Animation","AnimationIteration"),animationstart:wc("Animation","AnimationStart"),transitionrun:wc("Transition","TransitionRun"),transitionstart:wc("Transition","TransitionStart"),transitioncancel:wc("Transition","TransitionCancel"),transitionend:wc("Transition","TransitionEnd")},Do={},NA={};jo&&(NA=document.createElement("div").style,"AnimationEvent"in window||(delete bs.animationend.animation,delete bs.animationiteration.animation,delete bs.animationstart.animation),"TransitionEvent"in window||delete bs.transitionend.transition);function mu(A){if(Do[A])return Do[A];if(!bs[A])return A;var p=bs[A],b;for(b in p)if(p.hasOwnProperty(b)&&b in NA)return Do[A]=p[b];return A}var e0=mu("animationend"),ff=mu("animationiteration"),Af=mu("animationstart"),hf=mu("transitionrun"),CA=mu("transitionstart"),t0=mu("transitioncancel"),mf=mu("transitionend"),ld=new Map,_A="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_A.push("scrollEnd");function Ka(A,p){ld.set(A,p),Ft(p,[A])}var Al=new WeakMap;function gn(A,p){if(typeof A=="object"&&A!==null){var b=Al.get(A);return b!==void 0?b:(p={value:A,source:p,stack:xa(p)},Al.set(A,p),p)}return{value:A,source:p,stack:xa(p)}}var xn=[],va=0,ns=0;function Ql(){for(var A=va,p=ns=va=0;p<A;){var b=xn[p];xn[p++]=null;var N=xn[p];xn[p++]=null;var Q=xn[p];xn[p++]=null;var X=xn[p];if(xn[p++]=null,N!==null&&Q!==null){var fe=N.pending;fe===null?Q.next=Q:(Q.next=fe.next,fe.next=Q),N.pending=Q}X!==0&&rx(b,Q,X)}}function pf(A,p,b,N){xn[va++]=A,xn[va++]=p,xn[va++]=b,xn[va++]=N,ns|=N,A.lanes|=N,A=A.alternate,A!==null&&(A.lanes|=N)}function gf(A,p,b,N){return pf(A,p,b,N),SA(A)}function cd(A,p){return pf(A,null,null,p),SA(A)}function rx(A,p,b){A.lanes|=b;var N=A.alternate;N!==null&&(N.lanes|=b);for(var Q=!1,X=A.return;X!==null;)X.childLanes|=b,N=X.alternate,N!==null&&(N.childLanes|=b),X.tag===22&&(A=X.stateNode,A===null||A._visibility&1||(Q=!0)),A=X,X=X.return;return A.tag===3?(X=A.stateNode,Q&&p!==null&&(Q=31-Pt(b),A=X.hiddenUpdates,N=A[Q],N===null?A[Q]=[p]:N.push(p),p.lane=b|536870912),X):null}function SA(A){if(50<G1)throw G1=0,i3=null,Error(n(185));for(var p=A.return;p!==null;)A=p,p=A.return;return A.tag===3?A.stateNode:null}var oi={};function Hl(A,p,b,N){this.tag=A,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(A,p,b,N){return new Hl(A,p,b,N)}function r0(A){return A=A.prototype,!(!A||!A.isReactComponent)}function pu(A,p){var b=A.alternate;return b===null?(b=Hi(A.tag,p,A.key,A.mode),b.elementType=A.elementType,b.type=A.type,b.stateNode=A.stateNode,b.alternate=A,A.alternate=b):(b.pendingProps=p,b.type=A.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=A.flags&65011712,b.childLanes=A.childLanes,b.lanes=A.lanes,b.child=A.child,b.memoizedProps=A.memoizedProps,b.memoizedState=A.memoizedState,b.updateQueue=A.updateQueue,p=A.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=A.sibling,b.index=A.index,b.ref=A.ref,b.refCleanup=A.refCleanup,b}function rp(A,p){A.flags&=65011714;var b=A.alternate;return b===null?(A.childLanes=0,A.lanes=p,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=b.childLanes,A.lanes=b.lanes,A.child=b.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=b.memoizedProps,A.memoizedState=b.memoizedState,A.updateQueue=b.updateQueue,A.type=b.type,p=b.dependencies,A.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),A}function kA(A,p,b,N,Q,X){var fe=0;if(N=A,typeof A=="function")r0(A)&&(fe=1);else if(typeof A=="string")fe=lhe(A,b,z.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case B:return A=Hi(31,b,p,Q),A.elementType=B,A.lanes=X,A;case g:return ud(b.children,Q,X,p);case x:fe=8,Q|=24;break;case v:return A=Hi(12,b,p,Q|2),A.elementType=v,A.lanes=X,A;case j:return A=Hi(13,b,p,Q),A.elementType=j,A.lanes=X,A;case I:return A=Hi(19,b,p,Q),A.elementType=I,A.lanes=X,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case y:case _:fe=10;break e;case w:fe=9;break e;case T:fe=11;break e;case E:fe=14;break e;case S:fe=16,N=null;break e}fe=29,b=Error(n(130,A===null?"null":typeof A,"")),N=null}return p=Hi(fe,b,p,Q),p.elementType=A,p.type=N,p.lanes=X,p}function ud(A,p,b,N){return A=Hi(7,A,N,p),A.lanes=b,A}function nx(A,p,b){return A=Hi(6,A,null,p),A.lanes=b,A}function np(A,p,b){return p=Hi(4,A.children!==null?A.children:[],A.key,p),p.lanes=b,p.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},p}var xf=[],dd=0,n0=null,ax=0,Vl=[],hl=0,jA=null,fd=1,Ad="";function BA(A,p){xf[dd++]=ax,xf[dd++]=n0,n0=A,ax=p}function DE(A,p,b){Vl[hl++]=fd,Vl[hl++]=Ad,Vl[hl++]=jA,jA=A;var N=fd;A=Ad;var Q=32-Pt(N)-1;N&=~(1<<Q),b+=1;var X=32-Pt(p)+Q;if(30<X){var fe=Q-Q%5;X=(N&(1<<fe)-1).toString(32),N>>=fe,Q-=fe,fd=1<<32-Pt(p)+Q|b<<Q|N,Ad=X+A}else fd=1<<X|b<<Q|N,Ad=A}function ap(A){A.return!==null&&(BA(A,1),DE(A,1,0))}function sp(A){for(;A===n0;)n0=xf[--dd],xf[dd]=null,ax=xf[--dd],xf[dd]=null;for(;A===jA;)jA=Vl[--hl],Vl[hl]=null,Ad=Vl[--hl],Vl[hl]=null,fd=Vl[--hl],Vl[hl]=null}var Us=null,Wa=null,Un=!1,vf=null,gu=!1,w1=Error(n(519));function TA(A){var p=Error(n(418,""));throw a0(gn(p,A)),w1}function PE(A){var p=A.stateNode,b=A.type,N=A.memoizedProps;switch(p[ar]=A,p[xr]=N,b){case"dialog":Sn("cancel",p),Sn("close",p);break;case"iframe":case"object":case"embed":Sn("load",p);break;case"video":case"audio":for(b=0;b<K1.length;b++)Sn(K1[b],p);break;case"source":Sn("error",p);break;case"img":case"image":case"link":Sn("error",p),Sn("load",p);break;case"details":Sn("toggle",p);break;case"input":Sn("invalid",p),nu(p,N.value,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name,!0),ru(p);break;case"select":Sn("invalid",p);break;case"textarea":Sn("invalid",p),su(p,N.value,N.defaultValue,N.children),ru(p)}b=N.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||p.textContent===""+b||N.suppressHydrationWarning===!0||RU(p.textContent,b)?(N.popover!=null&&(Sn("beforetoggle",p),Sn("toggle",p)),N.onScroll!=null&&Sn("scroll",p),N.onScrollEnd!=null&&Sn("scrollend",p),N.onClick!=null&&(p.onclick=xN),p=!0):p=!1,p||TA(A)}function hd(A){for(Us=A.return;Us;)switch(Us.tag){case 5:case 13:gu=!1;return;case 27:case 3:gu=!0;return;default:Us=Us.return}}function lo(A){if(A!==Us)return!1;if(!Un)return hd(A),Un=!0,!1;var p=A.tag,b;if((b=p!==3&&p!==27)&&((b=p===5)&&(b=A.type,b=!(b!=="form"&&b!=="button")||w3(A.type,A.memoizedProps)),b=!b),b&&Wa&&TA(A),hd(A),p===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));e:{for(A=A.nextSibling,p=0;A;){if(A.nodeType===8)if(b=A.data,b==="/$"){if(p===0){Wa=wd(A.nextSibling);break e}p--}else b!=="$"&&b!=="$!"&&b!=="$?"||p++;A=A.nextSibling}Wa=null}}else p===27?(p=Wa,y0(A.type)?(A=_3,_3=null,Wa=A):Wa=p):Wa=Us?wd(A.stateNode.nextSibling):null;return!0}function ml(){Wa=Us=null,Un=!1}function RE(){var A=vf;return A!==null&&(Gl===null?Gl=A:Gl.push.apply(Gl,A),vf=null),A}function a0(A){vf===null?vf=[A]:vf.push(A)}var xu=W(null),li=null,md=null;function bf(A,p,b){U(xu,p._currentValue),p._currentValue=b}function vu(A){A._currentValue=xu.current,P(xu)}function sx(A,p,b){for(;A!==null;){var N=A.alternate;if((A.childLanes&p)!==p?(A.childLanes|=p,N!==null&&(N.childLanes|=p)):N!==null&&(N.childLanes&p)!==p&&(N.childLanes|=p),A===b)break;A=A.return}}function ix(A,p,b,N){var Q=A.child;for(Q!==null&&(Q.return=A);Q!==null;){var X=Q.dependencies;if(X!==null){var fe=Q.child;X=X.firstContext;e:for(;X!==null;){var Ee=X;X=Q;for(var Re=0;Re<p.length;Re++)if(Ee.context===p[Re]){X.lanes|=b,Ee=X.alternate,Ee!==null&&(Ee.lanes|=b),sx(X.return,b,A),N||(fe=null);break e}X=Ee.next}}else if(Q.tag===18){if(fe=Q.return,fe===null)throw Error(n(341));fe.lanes|=b,X=fe.alternate,X!==null&&(X.lanes|=b),sx(fe,b,A),fe=null}else fe=Q.child;if(fe!==null)fe.return=Q;else for(fe=Q;fe!==null;){if(fe===A){fe=null;break}if(Q=fe.sibling,Q!==null){Q.return=fe.return,fe=Q;break}fe=fe.return}Q=fe}}function s0(A,p,b,N){A=null;for(var Q=p,X=!1;Q!==null;){if(!X){if((Q.flags&524288)!==0)X=!0;else if((Q.flags&262144)!==0)break}if(Q.tag===10){var fe=Q.alternate;if(fe===null)throw Error(n(387));if(fe=fe.memoizedProps,fe!==null){var Ee=Q.type;ii(Q.pendingProps.value,fe.value)||(A!==null?A.push(Ee):A=[Ee])}}else if(Q===se.current){if(fe=Q.alternate,fe===null)throw Error(n(387));fe.memoizedState.memoizedState!==Q.memoizedState.memoizedState&&(A!==null?A.push(ey):A=[ey])}Q=Q.return}A!==null&&ix(p,A,b,N),p.flags|=262144}function ox(A){for(A=A.firstContext;A!==null;){if(!ii(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function bu(A){li=A,md=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function Qs(A){return lx(li,A)}function yf(A,p){return li===null&&bu(A),lx(A,p)}function lx(A,p){var b=p._currentValue;if(p={context:p,memoizedValue:b,next:null},md===null){if(A===null)throw Error(n(308));md=p,A.dependencies={lanes:0,firstContext:p},A.flags|=524288}else md=md.next=p;return b}var Tj=typeof AbortController<"u"?AbortController:function(){var A=[],p=this.signal={aborted:!1,addEventListener:function(b,N){A.push(N)}};this.abort=function(){p.aborted=!0,A.forEach(function(b){return b()})}},LE=e.unstable_scheduleCallback,Ij=e.unstable_NormalPriority,Hs={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function E1(){return{controller:new Tj,data:new Map,refCount:0}}function ip(A){A.refCount--,A.refCount===0&&LE(Ij,function(){A.controller.abort()})}var op=null,N1=0,IA=0,pd=null;function Fj(A,p){if(op===null){var b=op=[];N1=0,IA=A3(),pd={status:"pending",value:void 0,then:function(N){b.push(N)}}}return N1++,p.then(ME,ME),p}function ME(){if(--N1===0&&op!==null){pd!==null&&(pd.status="fulfilled");var A=op;op=null,IA=0,pd=null;for(var p=0;p<A.length;p++)(0,A[p])()}}function UE(A,p){var b=[],N={status:"pending",value:null,reason:null,then:function(Q){b.push(Q)}};return A.then(function(){N.status="fulfilled",N.value=p;for(var Q=0;Q<b.length;Q++)(0,b[Q])(p)},function(Q){for(N.status="rejected",N.reason=Q,Q=0;Q<b.length;Q++)(0,b[Q])(void 0)}),N}var F=V.S;V.S=function(A,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&Fj(A,p),F!==null&&F(A,p)};var H=W(null);function re(){var A=H.current;return A!==null?A:Ia.pooledCache}function oe(A,p){p===null?U(H,H.current):U(H,p.pool)}function Ae(){var A=re();return A===null?null:{parent:Hs._currentValue,pool:A}}var ge=Error(n(460)),xe=Error(n(474)),ye=Error(n(542)),Ce={then:function(){}};function Te(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Qe(){}function st(A,p,b){switch(b=A[b],b===void 0?A.push(p):b!==p&&(p.then(Qe,Qe),p=b),p.status){case"fulfilled":return p.value;case"rejected":throw A=p.reason,Bt(A),A;default:if(typeof p.status=="string")p.then(Qe,Qe);else{if(A=Ia,A!==null&&100<A.shellSuspendCounter)throw Error(n(482));A=p,A.status="pending",A.then(function(N){if(p.status==="pending"){var Q=p;Q.status="fulfilled",Q.value=N}},function(N){if(p.status==="pending"){var Q=p;Q.status="rejected",Q.reason=N}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw A=p.reason,Bt(A),A}throw tt=p,ge}}var tt=null;function We(){if(tt===null)throw Error(n(459));var A=tt;return tt=null,A}function Bt(A){if(A===ge||A===ye)throw Error(n(483))}var gt=!1;function He(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ze(A,p){A=A.updateQueue,p.updateQueue===A&&(p.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function _t(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function Tt(A,p,b){var N=A.updateQueue;if(N===null)return null;if(N=N.shared,(da&2)!==0){var Q=N.pending;return Q===null?p.next=p:(p.next=Q.next,Q.next=p),N.pending=p,p=SA(A),rx(A,null,b),p}return pf(A,N,p,b),SA(A)}function kt(A,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194048)!==0)){var N=p.lanes;N&=A.pendingLanes,b|=N,p.lanes=b,Ze(A,b)}}function nr(A,p){var b=A.updateQueue,N=A.alternate;if(N!==null&&(N=N.updateQueue,b===N)){var Q=null,X=null;if(b=b.firstBaseUpdate,b!==null){do{var fe={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};X===null?Q=X=fe:X=X.next=fe,b=b.next}while(b!==null);X===null?Q=X=p:X=X.next=p}else Q=X=p;b={baseState:N.baseState,firstBaseUpdate:Q,lastBaseUpdate:X,shared:N.shared,callbacks:N.callbacks},A.updateQueue=b;return}A=b.lastBaseUpdate,A===null?b.firstBaseUpdate=p:A.next=p,b.lastBaseUpdate=p}var Yt=!1;function br(){if(Yt){var A=pd;if(A!==null)throw A}}function er(A,p,b,N){Yt=!1;var Q=A.updateQueue;gt=!1;var X=Q.firstBaseUpdate,fe=Q.lastBaseUpdate,Ee=Q.shared.pending;if(Ee!==null){Q.shared.pending=null;var Re=Ee,ct=Re.next;Re.next=null,fe===null?X=ct:fe.next=ct,fe=Re;var St=A.alternate;St!==null&&(St=St.updateQueue,Ee=St.lastBaseUpdate,Ee!==fe&&(Ee===null?St.firstBaseUpdate=ct:Ee.next=ct,St.lastBaseUpdate=Re))}if(X!==null){var Ot=Q.baseState;fe=0,St=ct=Re=null,Ee=X;do{var At=Ee.lane&-536870913,ht=At!==Ee.lane;if(ht?(Ln&At)===At:(N&At)===At){At!==0&&At===IA&&(Yt=!0),St!==null&&(St=St.next={lane:0,tag:Ee.tag,payload:Ee.payload,callback:null,next:null});e:{var Gr=A,Dr=Ee;At=p;var ya=b;switch(Dr.tag){case 1:if(Gr=Dr.payload,typeof Gr=="function"){Ot=Gr.call(ya,Ot,At);break e}Ot=Gr;break e;case 3:Gr.flags=Gr.flags&-65537|128;case 0:if(Gr=Dr.payload,At=typeof Gr=="function"?Gr.call(ya,Ot,At):Gr,At==null)break e;Ot=d({},Ot,At);break e;case 2:gt=!0}}At=Ee.callback,At!==null&&(A.flags|=64,ht&&(A.flags|=8192),ht=Q.callbacks,ht===null?Q.callbacks=[At]:ht.push(At))}else ht={lane:At,tag:Ee.tag,payload:Ee.payload,callback:Ee.callback,next:null},St===null?(ct=St=ht,Re=Ot):St=St.next=ht,fe|=At;if(Ee=Ee.next,Ee===null){if(Ee=Q.shared.pending,Ee===null)break;ht=Ee,Ee=ht.next,ht.next=null,Q.lastBaseUpdate=ht,Q.shared.pending=null}}while(!0);St===null&&(Re=Ot),Q.baseState=Re,Q.firstBaseUpdate=ct,Q.lastBaseUpdate=St,X===null&&(Q.shared.lanes=0),g0|=fe,A.lanes=fe,A.memoizedState=Ot}}function Pn(A,p){if(typeof A!="function")throw Error(n(191,A));A.call(p)}function $n(A,p){var b=A.callbacks;if(b!==null)for(A.callbacks=null,A=0;A<b.length;A++)Pn(b[A],p)}var hn=W(null),cn=W(0);function ra(A,p){A=HA,U(cn,A),U(hn,p),HA=A|p.baseLanes}function Gn(){U(cn,HA),U(hn,hn.current)}function Yr(){HA=cn.current,P(hn),P(cn)}var ua=0,Br=null,Ur=null,Dn=null,Rn=!1,ci=!1,Vs=!1,as=0,ss=0,ys=null,zl=0;function qn(){throw Error(n(321))}function ws(A,p){if(p===null)return!1;for(var b=0;b<p.length&&b<A.length;b++)if(!ii(A[b],p[b]))return!1;return!0}function Ec(A,p,b,N,Q,X){return ua=X,Br=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,V.H=A===null||A.memoizedState===null?g7:x7,Vs=!1,X=b(N,Q),Vs=!1,ci&&(X=FA(p,b,N,Q)),wf(A),X}function wf(A){V.H=JE;var p=Ur!==null&&Ur.next!==null;if(ua=0,Dn=Ur=Br=null,Rn=!1,ss=0,ys=null,p)throw Error(n(300));A===null||Vi||(A=A.dependencies,A!==null&&ox(A)&&(Vi=!0))}function FA(A,p,b,N){Br=A;var Q=0;do{if(ci&&(ys=null),ss=0,ci=!1,25<=Q)throw Error(n(301));if(Q+=1,Dn=Ur=null,A.updateQueue!=null){var X=A.updateQueue;X.lastEffect=null,X.events=null,X.stores=null,X.memoCache!=null&&(X.memoCache.index=0)}V.H=vAe,X=p(b,N)}while(ci);return X}function Ef(){var A=V.H,p=A.useState()[0];return p=typeof p.then=="function"?Nf(p):p,A=A.useState()[0],(Ur!==null?Ur.memoizedState:null)!==A&&(Br.flags|=1024),p}function Ta(){var A=as!==0;return as=0,A}function lp(A,p,b){p.updateQueue=A.updateQueue,p.flags&=-2053,A.lanes&=~b}function cx(A){if(Rn){for(A=A.memoizedState;A!==null;){var p=A.queue;p!==null&&(p.pending=null),A=A.next}Rn=!1}ua=0,Dn=Ur=Br=null,ci=!1,ss=as=0,ys=null}function co(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?Br.memoizedState=Dn=A:Dn=Dn.next=A,Dn}function La(){if(Ur===null){var A=Br.alternate;A=A!==null?A.memoizedState:null}else A=Ur.next;var p=Dn===null?Br.memoizedState:Dn.next;if(p!==null)Dn=p,Ur=A;else{if(A===null)throw Br.alternate===null?Error(n(467)):Error(n(310));Ur=A,A={memoizedState:Ur.memoizedState,baseState:Ur.baseState,baseQueue:Ur.baseQueue,queue:Ur.queue,next:null},Dn===null?Br.memoizedState=Dn=A:Dn=Dn.next=A}return Dn}function OA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nf(A){var p=ss;return ss+=1,ys===null&&(ys=[]),A=st(ys,A,p),p=Br,(Dn===null?p.memoizedState:Dn.next)===null&&(p=p.alternate,V.H=p===null||p.memoizedState===null?g7:x7),A}function Po(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return Nf(A);if(A.$$typeof===_)return Qs(A)}throw Error(n(438,String(A)))}function Cf(A){var p=null,b=Br.updateQueue;if(b!==null&&(p=b.memoCache),p==null){var N=Br.alternate;N!==null&&(N=N.updateQueue,N!==null&&(N=N.memoCache,N!=null&&(p={data:N.data.map(function(Q){return Q.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),b===null&&(b=OA(),Br.updateQueue=b),b.memoCache=p,b=p.data[p.index],b===void 0)for(b=p.data[p.index]=Array(A),N=0;N<A;N++)b[N]=M;return p.index++,b}function Ro(A,p){return typeof p=="function"?p(A):p}function cp(A){var p=La();return i0(p,Ur,A)}function i0(A,p,b){var N=A.queue;if(N===null)throw Error(n(311));N.lastRenderedReducer=b;var Q=A.baseQueue,X=N.pending;if(X!==null){if(Q!==null){var fe=Q.next;Q.next=X.next,X.next=fe}p.baseQueue=Q=X,N.pending=null}if(X=A.baseState,Q===null)A.memoizedState=X;else{p=Q.next;var Ee=fe=null,Re=null,ct=p,St=!1;do{var Ot=ct.lane&-536870913;if(Ot!==ct.lane?(Ln&Ot)===Ot:(ua&Ot)===Ot){var At=ct.revertLane;if(At===0)Re!==null&&(Re=Re.next={lane:0,revertLane:0,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),Ot===IA&&(St=!0);else if((ua&At)===At){ct=ct.next,At===IA&&(St=!0);continue}else Ot={lane:0,revertLane:ct.revertLane,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null},Re===null?(Ee=Re=Ot,fe=X):Re=Re.next=Ot,Br.lanes|=At,g0|=At;Ot=ct.action,Vs&&b(X,Ot),X=ct.hasEagerState?ct.eagerState:b(X,Ot)}else At={lane:Ot,revertLane:ct.revertLane,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null},Re===null?(Ee=Re=At,fe=X):Re=Re.next=At,Br.lanes|=Ot,g0|=Ot;ct=ct.next}while(ct!==null&&ct!==p);if(Re===null?fe=X:Re.next=Ee,!ii(X,A.memoizedState)&&(Vi=!0,St&&(b=pd,b!==null)))throw b;A.memoizedState=X,A.baseState=fe,A.baseQueue=Re,N.lastRenderedState=X}return Q===null&&(N.lanes=0),[A.memoizedState,N.dispatch]}function ux(A){var p=La(),b=p.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=A;var N=b.dispatch,Q=b.pending,X=p.memoizedState;if(Q!==null){b.pending=null;var fe=Q=Q.next;do X=A(X,fe.action),fe=fe.next;while(fe!==Q);ii(X,p.memoizedState)||(Vi=!0),p.memoizedState=X,p.baseQueue===null&&(p.baseState=X),b.lastRenderedState=X}return[X,N]}function up(A,p,b){var N=Br,Q=La(),X=Un;if(X){if(b===void 0)throw Error(n(407));b=b()}else b=p();var fe=!ii((Ur||Q).memoizedState,b);fe&&(Q.memoizedState=b,Vi=!0),Q=Q.queue;var Ee=o0.bind(null,N,Q,A);if(u0(2048,8,Ee,[A]),Q.getSnapshot!==p||fe||Dn!==null&&Dn.memoizedState.tag&1){if(N.flags|=2048,xd(9,hp(),dp.bind(null,N,Q,b,p),null),Ia===null)throw Error(n(349));X||(ua&124)!==0||dx(N,p,b)}return b}function dx(A,p,b){A.flags|=16384,A={getSnapshot:p,value:b},p=Br.updateQueue,p===null?(p=OA(),Br.updateQueue=p,p.stores=[A]):(b=p.stores,b===null?p.stores=[A]:b.push(A))}function dp(A,p,b,N){p.value=b,p.getSnapshot=N,QE(p)&&HE(A)}function o0(A,p,b){return b(function(){QE(p)&&HE(A)})}function QE(A){var p=A.getSnapshot;A=A.value;try{var b=p();return!ii(A,b)}catch{return!0}}function HE(A){var p=cd(A,2);p!==null&&jc(p,A,2)}function fp(A){var p=co();if(typeof A=="function"){var b=A;if(A=b(),Vs){Mt(!0);try{b()}finally{Mt(!1)}}}return p.memoizedState=p.baseState=A,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ro,lastRenderedState:A},p}function gd(A,p,b,N){return A.baseState=b,i0(A,Ur,typeof N=="function"?N:Ro)}function Oj(A,p,b,N,Q){if(YE(A))throw Error(n(485));if(A=p.action,A!==null){var X={payload:Q,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(fe){X.listeners.push(fe)}};V.T!==null?b(!0):X.isTransition=!1,N(X),b=p.pending,b===null?(X.next=p.pending=X,VE(p,X)):(X.next=b.next,p.pending=b.next=X)}}function VE(A,p){var b=p.action,N=p.payload,Q=A.state;if(p.isTransition){var X=V.T,fe={};V.T=fe;try{var Ee=b(Q,N),Re=V.S;Re!==null&&Re(fe,Ee),zE(A,p,Ee)}catch(ct){l0(A,p,ct)}finally{V.T=X}}else try{X=b(Q,N),zE(A,p,X)}catch(ct){l0(A,p,ct)}}function zE(A,p,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(N){C1(A,p,N)},function(N){return l0(A,p,N)}):C1(A,p,b)}function C1(A,p,b){p.status="fulfilled",p.value=b,_1(p),A.state=b,p=A.pending,p!==null&&(b=p.next,b===p?A.pending=null:(b=b.next,p.next=b,VE(A,b)))}function l0(A,p,b){var N=A.pending;if(A.pending=null,N!==null){N=N.next;do p.status="rejected",p.reason=b,_1(p),p=p.next;while(p!==N)}A.action=null}function _1(A){A=A.listeners;for(var p=0;p<A.length;p++)(0,A[p])()}function S1(A,p){return p}function Ap(A,p){if(Un){var b=Ia.formState;if(b!==null){e:{var N=Br;if(Un){if(Wa){t:{for(var Q=Wa,X=gu;Q.nodeType!==8;){if(!X){Q=null;break t}if(Q=wd(Q.nextSibling),Q===null){Q=null;break t}}X=Q.data,Q=X==="F!"||X==="F"?Q:null}if(Q){Wa=wd(Q.nextSibling),N=Q.data==="F!";break e}}TA(N)}N=!1}N&&(p=b[0])}}return b=co(),b.memoizedState=b.baseState=p,N={pending:null,lanes:0,dispatch:null,lastRenderedReducer:S1,lastRenderedState:p},b.queue=N,b=h7.bind(null,Br,N),N.dispatch=b,N=fp(!1),X=Dj.bind(null,Br,!1,N.queue),N=co(),Q={state:p,dispatch:null,action:A,pending:null},N.queue=Q,b=Oj.bind(null,Br,Q,X,b),Q.dispatch=b,N.memoizedState=A,[p,b,!1]}function fx(A){var p=La();return c0(p,Ur,A)}function c0(A,p,b){if(p=i0(A,p,S1)[0],A=cp(Ro)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var N=Nf(p)}catch(fe){throw fe===ge?ye:fe}else N=p;p=La();var Q=p.queue,X=Q.dispatch;return b!==p.memoizedState&&(Br.flags|=2048,xd(9,hp(),$E.bind(null,Q,b),null)),[N,X,A]}function $E(A,p){A.action=p}function GE(A){var p=La(),b=Ur;if(b!==null)return c0(p,b,A);La(),p=p.memoizedState,b=La();var N=b.queue.dispatch;return b.memoizedState=A,[p,N,!1]}function xd(A,p,b,N){return A={tag:A,create:b,deps:N,inst:p,next:null},p=Br.updateQueue,p===null&&(p=OA(),Br.updateQueue=p),b=p.lastEffect,b===null?p.lastEffect=A.next=A:(N=b.next,b.next=A,A.next=N,p.lastEffect=A),A}function hp(){return{destroy:void 0,resource:void 0}}function Ax(){return La().memoizedState}function Nc(A,p,b,N){var Q=co();N=N===void 0?null:N,Br.flags|=A,Q.memoizedState=xd(1|p,hp(),b,N)}function u0(A,p,b,N){var Q=La();N=N===void 0?null:N;var X=Q.memoizedState.inst;Ur!==null&&N!==null&&ws(N,Ur.memoizedState.deps)?Q.memoizedState=xd(p,X,b,N):(Br.flags|=A,Q.memoizedState=xd(1|p,X,b,N))}function k1(A,p){Nc(8390656,8,A,p)}function qE(A,p){u0(2048,8,A,p)}function j1(A,p){return u0(4,2,A,p)}function DA(A,p){return u0(4,4,A,p)}function KE(A,p){if(typeof p=="function"){A=A();var b=p(A);return function(){typeof b=="function"?b():p(null)}}if(p!=null)return A=A(),p.current=A,function(){p.current=null}}function B1(A,p,b){b=b!=null?b.concat([A]):null,u0(4,4,KE.bind(null,p,A),b)}function T1(){}function I1(A,p){var b=La();p=p===void 0?null:p;var N=b.memoizedState;return p!==null&&ws(p,N[1])?N[0]:(b.memoizedState=[A,p],A)}function WE(A,p){var b=La();p=p===void 0?null:p;var N=b.memoizedState;if(p!==null&&ws(p,N[1]))return N[0];if(N=A(),Vs){Mt(!0);try{A()}finally{Mt(!1)}}return b.memoizedState=[N,p],N}function PA(A,p,b){return b===void 0||(ua&1073741824)!==0?A.memoizedState=p:(A.memoizedState=b,A=uU(),Br.lanes|=A,g0|=A,b)}function hx(A,p,b,N){return ii(b,p)?b:hn.current!==null?(A=PA(A,b,N),ii(A,p)||(Vi=!0),A):(ua&42)===0?(Vi=!0,A.memoizedState=b):(A=uU(),Br.lanes|=A,g0|=A,p)}function mp(A,p,b,N,Q){var X=q.p;q.p=X!==0&&8>X?X:8;var fe=V.T,Ee={};V.T=Ee,Dj(A,!1,p,b);try{var Re=Q(),ct=V.S;if(ct!==null&&ct(Ee,Re),Re!==null&&typeof Re=="object"&&typeof Re.then=="function"){var St=UE(Re,N);P1(A,p,St,kc(A))}else P1(A,p,N,kc(A))}catch(Ot){P1(A,p,{then:function(){},status:"rejected",reason:Ot},kc())}finally{q.p=X,V.T=fe}}function vd(){}function yu(A,p,b,N){if(A.tag!==5)throw Error(n(476));var Q=bd(A).queue;mp(A,Q,p,G,b===null?vd:function(){return pp(A),b(N)})}function bd(A){var p=A.memoizedState;if(p!==null)return p;p={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ro,lastRenderedState:G},next:null};var b={};return p.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ro,lastRenderedState:b},next:null},A.memoizedState=p,A=A.alternate,A!==null&&(A.memoizedState=p),p}function pp(A){var p=bd(A).next.queue;P1(A,p,{},kc())}function gp(){return Qs(ey)}function F1(){return La().memoizedState}function XE(){return La().memoizedState}function O1(A){for(var p=A.return;p!==null;){switch(p.tag){case 24:case 3:var b=kc();A=_t(b);var N=Tt(p,A,b);N!==null&&(jc(N,p,b),kt(N,p,b)),p={cache:E1()},A.payload=p;return}p=p.return}}function D1(A,p,b){var N=kc();b={lane:N,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},YE(A)?m7(p,b):(b=gf(A,p,b,N),b!==null&&(jc(b,A,N),p7(b,p,N)))}function h7(A,p,b){var N=kc();P1(A,p,b,N)}function P1(A,p,b,N){var Q={lane:N,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if(YE(A))m7(p,Q);else{var X=A.alternate;if(A.lanes===0&&(X===null||X.lanes===0)&&(X=p.lastRenderedReducer,X!==null))try{var fe=p.lastRenderedState,Ee=X(fe,b);if(Q.hasEagerState=!0,Q.eagerState=Ee,ii(Ee,fe))return pf(A,p,Q,0),Ia===null&&Ql(),!1}catch{}finally{}if(b=gf(A,p,Q,N),b!==null)return jc(b,A,N),p7(b,p,N),!0}return!1}function Dj(A,p,b,N){if(N={lane:2,revertLane:A3(),action:N,hasEagerState:!1,eagerState:null,next:null},YE(A)){if(p)throw Error(n(479))}else p=gf(A,b,N,2),p!==null&&jc(p,A,2)}function YE(A){var p=A.alternate;return A===Br||p!==null&&p===Br}function m7(A,p){ci=Rn=!0;var b=A.pending;b===null?p.next=p:(p.next=b.next,b.next=p),A.pending=p}function p7(A,p,b){if((b&4194048)!==0){var N=p.lanes;N&=A.pendingLanes,b|=N,p.lanes=b,Ze(A,b)}}var JE={readContext:Qs,use:Po,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useLayoutEffect:qn,useInsertionEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useSyncExternalStore:qn,useId:qn,useHostTransitionStatus:qn,useFormState:qn,useActionState:qn,useOptimistic:qn,useMemoCache:qn,useCacheRefresh:qn},g7={readContext:Qs,use:Po,useCallback:function(A,p){return co().memoizedState=[A,p===void 0?null:p],A},useContext:Qs,useEffect:k1,useImperativeHandle:function(A,p,b){b=b!=null?b.concat([A]):null,Nc(4194308,4,KE.bind(null,p,A),b)},useLayoutEffect:function(A,p){return Nc(4194308,4,A,p)},useInsertionEffect:function(A,p){Nc(4,2,A,p)},useMemo:function(A,p){var b=co();p=p===void 0?null:p;var N=A();if(Vs){Mt(!0);try{A()}finally{Mt(!1)}}return b.memoizedState=[N,p],N},useReducer:function(A,p,b){var N=co();if(b!==void 0){var Q=b(p);if(Vs){Mt(!0);try{b(p)}finally{Mt(!1)}}}else Q=p;return N.memoizedState=N.baseState=Q,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:Q},N.queue=A,A=A.dispatch=D1.bind(null,Br,A),[N.memoizedState,A]},useRef:function(A){var p=co();return A={current:A},p.memoizedState=A},useState:function(A){A=fp(A);var p=A.queue,b=h7.bind(null,Br,p);return p.dispatch=b,[A.memoizedState,b]},useDebugValue:T1,useDeferredValue:function(A,p){var b=co();return PA(b,A,p)},useTransition:function(){var A=fp(!1);return A=mp.bind(null,Br,A.queue,!0,!1),co().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,p,b){var N=Br,Q=co();if(Un){if(b===void 0)throw Error(n(407));b=b()}else{if(b=p(),Ia===null)throw Error(n(349));(Ln&124)!==0||dx(N,p,b)}Q.memoizedState=b;var X={value:b,getSnapshot:p};return Q.queue=X,k1(o0.bind(null,N,X,A),[A]),N.flags|=2048,xd(9,hp(),dp.bind(null,N,X,b,p),null),b},useId:function(){var A=co(),p=Ia.identifierPrefix;if(Un){var b=Ad,N=fd;b=(N&~(1<<32-Pt(N)-1)).toString(32)+b,p="«"+p+"R"+b,b=as++,0<b&&(p+="H"+b.toString(32)),p+="»"}else b=zl++,p="«"+p+"r"+b.toString(32)+"»";return A.memoizedState=p},useHostTransitionStatus:gp,useFormState:Ap,useActionState:Ap,useOptimistic:function(A){var p=co();p.memoizedState=p.baseState=A;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=b,p=Dj.bind(null,Br,!0,b),b.dispatch=p,[A,p]},useMemoCache:Cf,useCacheRefresh:function(){return co().memoizedState=O1.bind(null,Br)}},x7={readContext:Qs,use:Po,useCallback:I1,useContext:Qs,useEffect:qE,useImperativeHandle:B1,useInsertionEffect:j1,useLayoutEffect:DA,useMemo:WE,useReducer:cp,useRef:Ax,useState:function(){return cp(Ro)},useDebugValue:T1,useDeferredValue:function(A,p){var b=La();return hx(b,Ur.memoizedState,A,p)},useTransition:function(){var A=cp(Ro)[0],p=La().memoizedState;return[typeof A=="boolean"?A:Nf(A),p]},useSyncExternalStore:up,useId:F1,useHostTransitionStatus:gp,useFormState:fx,useActionState:fx,useOptimistic:function(A,p){var b=La();return gd(b,Ur,A,p)},useMemoCache:Cf,useCacheRefresh:XE},vAe={readContext:Qs,use:Po,useCallback:I1,useContext:Qs,useEffect:qE,useImperativeHandle:B1,useInsertionEffect:j1,useLayoutEffect:DA,useMemo:WE,useReducer:ux,useRef:Ax,useState:function(){return ux(Ro)},useDebugValue:T1,useDeferredValue:function(A,p){var b=La();return Ur===null?PA(b,A,p):hx(b,Ur.memoizedState,A,p)},useTransition:function(){var A=ux(Ro)[0],p=La().memoizedState;return[typeof A=="boolean"?A:Nf(A),p]},useSyncExternalStore:up,useId:F1,useHostTransitionStatus:gp,useFormState:GE,useActionState:GE,useOptimistic:function(A,p){var b=La();return Ur!==null?gd(b,Ur,A,p):(b.baseState=A,[A,b.queue.dispatch])},useMemoCache:Cf,useCacheRefresh:XE},mx=null,R1=0;function ZE(A){var p=R1;return R1+=1,mx===null&&(mx=[]),st(mx,A,p)}function L1(A,p){p=p.props.ref,A.ref=p!==void 0?p:null}function eN(A,p){throw p.$$typeof===f?Error(n(525)):(A=Object.prototype.toString.call(p),Error(n(31,A==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":A)))}function v7(A){var p=A._init;return p(A._payload)}function b7(A){function p(Xe,Ve){if(A){var nt=Xe.deletions;nt===null?(Xe.deletions=[Ve],Xe.flags|=16):nt.push(Ve)}}function b(Xe,Ve){if(!A)return null;for(;Ve!==null;)p(Xe,Ve),Ve=Ve.sibling;return null}function N(Xe){for(var Ve=new Map;Xe!==null;)Xe.key!==null?Ve.set(Xe.key,Xe):Ve.set(Xe.index,Xe),Xe=Xe.sibling;return Ve}function Q(Xe,Ve){return Xe=pu(Xe,Ve),Xe.index=0,Xe.sibling=null,Xe}function X(Xe,Ve,nt){return Xe.index=nt,A?(nt=Xe.alternate,nt!==null?(nt=nt.index,nt<Ve?(Xe.flags|=67108866,Ve):nt):(Xe.flags|=67108866,Ve)):(Xe.flags|=1048576,Ve)}function fe(Xe){return A&&Xe.alternate===null&&(Xe.flags|=67108866),Xe}function Ee(Xe,Ve,nt,jt){return Ve===null||Ve.tag!==6?(Ve=nx(nt,Xe.mode,jt),Ve.return=Xe,Ve):(Ve=Q(Ve,nt),Ve.return=Xe,Ve)}function Re(Xe,Ve,nt,jt){var mr=nt.type;return mr===g?St(Xe,Ve,nt.props.children,jt,nt.key):Ve!==null&&(Ve.elementType===mr||typeof mr=="object"&&mr!==null&&mr.$$typeof===S&&v7(mr)===Ve.type)?(Ve=Q(Ve,nt.props),L1(Ve,nt),Ve.return=Xe,Ve):(Ve=kA(nt.type,nt.key,nt.props,null,Xe.mode,jt),L1(Ve,nt),Ve.return=Xe,Ve)}function ct(Xe,Ve,nt,jt){return Ve===null||Ve.tag!==4||Ve.stateNode.containerInfo!==nt.containerInfo||Ve.stateNode.implementation!==nt.implementation?(Ve=np(nt,Xe.mode,jt),Ve.return=Xe,Ve):(Ve=Q(Ve,nt.children||[]),Ve.return=Xe,Ve)}function St(Xe,Ve,nt,jt,mr){return Ve===null||Ve.tag!==7?(Ve=ud(nt,Xe.mode,jt,mr),Ve.return=Xe,Ve):(Ve=Q(Ve,nt),Ve.return=Xe,Ve)}function Ot(Xe,Ve,nt){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint")return Ve=nx(""+Ve,Xe.mode,nt),Ve.return=Xe,Ve;if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case h:return nt=kA(Ve.type,Ve.key,Ve.props,null,Xe.mode,nt),L1(nt,Ve),nt.return=Xe,nt;case m:return Ve=np(Ve,Xe.mode,nt),Ve.return=Xe,Ve;case S:var jt=Ve._init;return Ve=jt(Ve._payload),Ot(Xe,Ve,nt)}if(Z(Ve)||k(Ve))return Ve=ud(Ve,Xe.mode,nt,null),Ve.return=Xe,Ve;if(typeof Ve.then=="function")return Ot(Xe,ZE(Ve),nt);if(Ve.$$typeof===_)return Ot(Xe,yf(Xe,Ve),nt);eN(Xe,Ve)}return null}function At(Xe,Ve,nt,jt){var mr=Ve!==null?Ve.key:null;if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return mr!==null?null:Ee(Xe,Ve,""+nt,jt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case h:return nt.key===mr?Re(Xe,Ve,nt,jt):null;case m:return nt.key===mr?ct(Xe,Ve,nt,jt):null;case S:return mr=nt._init,nt=mr(nt._payload),At(Xe,Ve,nt,jt)}if(Z(nt)||k(nt))return mr!==null?null:St(Xe,Ve,nt,jt,null);if(typeof nt.then=="function")return At(Xe,Ve,ZE(nt),jt);if(nt.$$typeof===_)return At(Xe,Ve,yf(Xe,nt),jt);eN(Xe,nt)}return null}function ht(Xe,Ve,nt,jt,mr){if(typeof jt=="string"&&jt!==""||typeof jt=="number"||typeof jt=="bigint")return Xe=Xe.get(nt)||null,Ee(Ve,Xe,""+jt,mr);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case h:return Xe=Xe.get(jt.key===null?nt:jt.key)||null,Re(Ve,Xe,jt,mr);case m:return Xe=Xe.get(jt.key===null?nt:jt.key)||null,ct(Ve,Xe,jt,mr);case S:var En=jt._init;return jt=En(jt._payload),ht(Xe,Ve,nt,jt,mr)}if(Z(jt)||k(jt))return Xe=Xe.get(nt)||null,St(Ve,Xe,jt,mr,null);if(typeof jt.then=="function")return ht(Xe,Ve,nt,ZE(jt),mr);if(jt.$$typeof===_)return ht(Xe,Ve,nt,yf(Ve,jt),mr);eN(Ve,jt)}return null}function Gr(Xe,Ve,nt,jt){for(var mr=null,En=null,Nr=Ve,Rr=Ve=0,$i=null;Nr!==null&&Rr<nt.length;Rr++){Nr.index>Rr?($i=Nr,Nr=null):$i=Nr.sibling;var Kn=At(Xe,Nr,nt[Rr],jt);if(Kn===null){Nr===null&&(Nr=$i);break}A&&Nr&&Kn.alternate===null&&p(Xe,Nr),Ve=X(Kn,Ve,Rr),En===null?mr=Kn:En.sibling=Kn,En=Kn,Nr=$i}if(Rr===nt.length)return b(Xe,Nr),Un&&BA(Xe,Rr),mr;if(Nr===null){for(;Rr<nt.length;Rr++)Nr=Ot(Xe,nt[Rr],jt),Nr!==null&&(Ve=X(Nr,Ve,Rr),En===null?mr=Nr:En.sibling=Nr,En=Nr);return Un&&BA(Xe,Rr),mr}for(Nr=N(Nr);Rr<nt.length;Rr++)$i=ht(Nr,Xe,Rr,nt[Rr],jt),$i!==null&&(A&&$i.alternate!==null&&Nr.delete($i.key===null?Rr:$i.key),Ve=X($i,Ve,Rr),En===null?mr=$i:En.sibling=$i,En=$i);return A&&Nr.forEach(function(_0){return p(Xe,_0)}),Un&&BA(Xe,Rr),mr}function Dr(Xe,Ve,nt,jt){if(nt==null)throw Error(n(151));for(var mr=null,En=null,Nr=Ve,Rr=Ve=0,$i=null,Kn=nt.next();Nr!==null&&!Kn.done;Rr++,Kn=nt.next()){Nr.index>Rr?($i=Nr,Nr=null):$i=Nr.sibling;var _0=At(Xe,Nr,Kn.value,jt);if(_0===null){Nr===null&&(Nr=$i);break}A&&Nr&&_0.alternate===null&&p(Xe,Nr),Ve=X(_0,Ve,Rr),En===null?mr=_0:En.sibling=_0,En=_0,Nr=$i}if(Kn.done)return b(Xe,Nr),Un&&BA(Xe,Rr),mr;if(Nr===null){for(;!Kn.done;Rr++,Kn=nt.next())Kn=Ot(Xe,Kn.value,jt),Kn!==null&&(Ve=X(Kn,Ve,Rr),En===null?mr=Kn:En.sibling=Kn,En=Kn);return Un&&BA(Xe,Rr),mr}for(Nr=N(Nr);!Kn.done;Rr++,Kn=nt.next())Kn=ht(Nr,Xe,Rr,Kn.value,jt),Kn!==null&&(A&&Kn.alternate!==null&&Nr.delete(Kn.key===null?Rr:Kn.key),Ve=X(Kn,Ve,Rr),En===null?mr=Kn:En.sibling=Kn,En=Kn);return A&&Nr.forEach(function(bhe){return p(Xe,bhe)}),Un&&BA(Xe,Rr),mr}function ya(Xe,Ve,nt,jt){if(typeof nt=="object"&&nt!==null&&nt.type===g&&nt.key===null&&(nt=nt.props.children),typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case h:e:{for(var mr=nt.key;Ve!==null;){if(Ve.key===mr){if(mr=nt.type,mr===g){if(Ve.tag===7){b(Xe,Ve.sibling),jt=Q(Ve,nt.props.children),jt.return=Xe,Xe=jt;break e}}else if(Ve.elementType===mr||typeof mr=="object"&&mr!==null&&mr.$$typeof===S&&v7(mr)===Ve.type){b(Xe,Ve.sibling),jt=Q(Ve,nt.props),L1(jt,nt),jt.return=Xe,Xe=jt;break e}b(Xe,Ve);break}else p(Xe,Ve);Ve=Ve.sibling}nt.type===g?(jt=ud(nt.props.children,Xe.mode,jt,nt.key),jt.return=Xe,Xe=jt):(jt=kA(nt.type,nt.key,nt.props,null,Xe.mode,jt),L1(jt,nt),jt.return=Xe,Xe=jt)}return fe(Xe);case m:e:{for(mr=nt.key;Ve!==null;){if(Ve.key===mr)if(Ve.tag===4&&Ve.stateNode.containerInfo===nt.containerInfo&&Ve.stateNode.implementation===nt.implementation){b(Xe,Ve.sibling),jt=Q(Ve,nt.children||[]),jt.return=Xe,Xe=jt;break e}else{b(Xe,Ve);break}else p(Xe,Ve);Ve=Ve.sibling}jt=np(nt,Xe.mode,jt),jt.return=Xe,Xe=jt}return fe(Xe);case S:return mr=nt._init,nt=mr(nt._payload),ya(Xe,Ve,nt,jt)}if(Z(nt))return Gr(Xe,Ve,nt,jt);if(k(nt)){if(mr=k(nt),typeof mr!="function")throw Error(n(150));return nt=mr.call(nt),Dr(Xe,Ve,nt,jt)}if(typeof nt.then=="function")return ya(Xe,Ve,ZE(nt),jt);if(nt.$$typeof===_)return ya(Xe,Ve,yf(Xe,nt),jt);eN(Xe,nt)}return typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint"?(nt=""+nt,Ve!==null&&Ve.tag===6?(b(Xe,Ve.sibling),jt=Q(Ve,nt),jt.return=Xe,Xe=jt):(b(Xe,Ve),jt=nx(nt,Xe.mode,jt),jt.return=Xe,Xe=jt),fe(Xe)):b(Xe,Ve)}return function(Xe,Ve,nt,jt){try{R1=0;var mr=ya(Xe,Ve,nt,jt);return mx=null,mr}catch(Nr){if(Nr===ge||Nr===ye)throw Nr;var En=Hi(29,Nr,null,Xe.mode);return En.lanes=jt,En.return=Xe,En}finally{}}}var px=b7(!0),y7=b7(!1),wu=W(null),_f=null;function d0(A){var p=A.alternate;U(Si,Si.current&1),U(wu,A),_f===null&&(p===null||hn.current!==null||p.memoizedState!==null)&&(_f=A)}function w7(A){if(A.tag===22){if(U(Si,Si.current),U(wu,A),_f===null){var p=A.alternate;p!==null&&p.memoizedState!==null&&(_f=A)}}else f0()}function f0(){U(Si,Si.current),U(wu,wu.current)}function RA(A){P(wu),_f===A&&(_f=null),P(Si)}var Si=W(0);function tN(A){for(var p=A;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||C3(b)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===A)break;for(;p.sibling===null;){if(p.return===null||p.return===A)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function Pj(A,p,b,N){p=A.memoizedState,b=b(N,p),b=b==null?p:d({},p,b),A.memoizedState=b,A.lanes===0&&(A.updateQueue.baseState=b)}var Rj={enqueueSetState:function(A,p,b){A=A._reactInternals;var N=kc(),Q=_t(N);Q.payload=p,b!=null&&(Q.callback=b),p=Tt(A,Q,N),p!==null&&(jc(p,A,N),kt(p,A,N))},enqueueReplaceState:function(A,p,b){A=A._reactInternals;var N=kc(),Q=_t(N);Q.tag=1,Q.payload=p,b!=null&&(Q.callback=b),p=Tt(A,Q,N),p!==null&&(jc(p,A,N),kt(p,A,N))},enqueueForceUpdate:function(A,p){A=A._reactInternals;var b=kc(),N=_t(b);N.tag=2,p!=null&&(N.callback=p),p=Tt(A,N,b),p!==null&&(jc(p,A,b),kt(p,A,b))}};function E7(A,p,b,N,Q,X,fe){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(N,X,fe):p.prototype&&p.prototype.isPureReactComponent?!cf(b,N)||!cf(Q,X):!0}function N7(A,p,b,N){A=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,N),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,N),p.state!==A&&Rj.enqueueReplaceState(p,p.state,null)}function xp(A,p){var b=p;if("ref"in p){b={};for(var N in p)N!=="ref"&&(b[N]=p[N])}if(A=A.defaultProps){b===p&&(b=d({},b));for(var Q in A)b[Q]===void 0&&(b[Q]=A[Q])}return b}var rN=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function C7(A){rN(A)}function _7(A){console.error(A)}function S7(A){rN(A)}function nN(A,p){try{var b=A.onUncaughtError;b(p.value,{componentStack:p.stack})}catch(N){setTimeout(function(){throw N})}}function k7(A,p,b){try{var N=A.onCaughtError;N(b.value,{componentStack:b.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(Q){setTimeout(function(){throw Q})}}function Lj(A,p,b){return b=_t(b),b.tag=3,b.payload={element:null},b.callback=function(){nN(A,p)},b}function j7(A){return A=_t(A),A.tag=3,A}function B7(A,p,b,N){var Q=b.type.getDerivedStateFromError;if(typeof Q=="function"){var X=N.value;A.payload=function(){return Q(X)},A.callback=function(){k7(p,b,N)}}var fe=b.stateNode;fe!==null&&typeof fe.componentDidCatch=="function"&&(A.callback=function(){k7(p,b,N),typeof Q!="function"&&(x0===null?x0=new Set([this]):x0.add(this));var Ee=N.stack;this.componentDidCatch(N.value,{componentStack:Ee!==null?Ee:""})})}function bAe(A,p,b,N,Q){if(b.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){if(p=b.alternate,p!==null&&s0(p,b,Q,!0),b=wu.current,b!==null){switch(b.tag){case 13:return _f===null?l3():b.alternate===null&&Es===0&&(Es=3),b.flags&=-257,b.flags|=65536,b.lanes=Q,N===Ce?b.flags|=16384:(p=b.updateQueue,p===null?b.updateQueue=new Set([N]):p.add(N),u3(A,N,Q)),!1;case 22:return b.flags|=65536,N===Ce?b.flags|=16384:(p=b.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([N])},b.updateQueue=p):(b=p.retryQueue,b===null?p.retryQueue=new Set([N]):b.add(N)),u3(A,N,Q)),!1}throw Error(n(435,b.tag))}return u3(A,N,Q),l3(),!1}if(Un)return p=wu.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=Q,N!==w1&&(A=Error(n(422),{cause:N}),a0(gn(A,b)))):(N!==w1&&(p=Error(n(423),{cause:N}),a0(gn(p,b))),A=A.current.alternate,A.flags|=65536,Q&=-Q,A.lanes|=Q,N=gn(N,b),Q=Lj(A.stateNode,N,Q),nr(A,Q),Es!==4&&(Es=2)),!1;var X=Error(n(520),{cause:N});if(X=gn(X,b),$1===null?$1=[X]:$1.push(X),Es!==4&&(Es=2),p===null)return!0;N=gn(N,b),b=p;do{switch(b.tag){case 3:return b.flags|=65536,A=Q&-Q,b.lanes|=A,A=Lj(b.stateNode,N,A),nr(b,A),!1;case 1:if(p=b.type,X=b.stateNode,(b.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(x0===null||!x0.has(X))))return b.flags|=65536,Q&=-Q,b.lanes|=Q,Q=j7(Q),B7(Q,A,b,N),nr(b,Q),!1}b=b.return}while(b!==null);return!1}var T7=Error(n(461)),Vi=!1;function uo(A,p,b,N){p.child=A===null?y7(p,null,b,N):px(p,A.child,b,N)}function I7(A,p,b,N,Q){b=b.render;var X=p.ref;if("ref"in N){var fe={};for(var Ee in N)Ee!=="ref"&&(fe[Ee]=N[Ee])}else fe=N;return bu(p),N=Ec(A,p,b,fe,X,Q),Ee=Ta(),A!==null&&!Vi?(lp(A,p,Q),LA(A,p,Q)):(Un&&Ee&&ap(p),p.flags|=1,uo(A,p,N,Q),p.child)}function F7(A,p,b,N,Q){if(A===null){var X=b.type;return typeof X=="function"&&!r0(X)&&X.defaultProps===void 0&&b.compare===null?(p.tag=15,p.type=X,O7(A,p,X,N,Q)):(A=kA(b.type,null,N,p,p.mode,Q),A.ref=p.ref,A.return=p,p.child=A)}if(X=A.child,!Gj(A,Q)){var fe=X.memoizedProps;if(b=b.compare,b=b!==null?b:cf,b(fe,N)&&A.ref===p.ref)return LA(A,p,Q)}return p.flags|=1,A=pu(X,N),A.ref=p.ref,A.return=p,p.child=A}function O7(A,p,b,N,Q){if(A!==null){var X=A.memoizedProps;if(cf(X,N)&&A.ref===p.ref)if(Vi=!1,p.pendingProps=N=X,Gj(A,Q))(A.flags&131072)!==0&&(Vi=!0);else return p.lanes=A.lanes,LA(A,p,Q)}return Mj(A,p,b,N,Q)}function D7(A,p,b){var N=p.pendingProps,Q=N.children,X=A!==null?A.memoizedState:null;if(N.mode==="hidden"){if((p.flags&128)!==0){if(N=X!==null?X.baseLanes|b:b,A!==null){for(Q=p.child=A.child,X=0;Q!==null;)X=X|Q.lanes|Q.childLanes,Q=Q.sibling;p.childLanes=X&~N}else p.childLanes=0,p.child=null;return P7(A,p,N,b)}if((b&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},A!==null&&oe(p,X!==null?X.cachePool:null),X!==null?ra(p,X):Gn(),w7(p);else return p.lanes=p.childLanes=536870912,P7(A,p,X!==null?X.baseLanes|b:b,b)}else X!==null?(oe(p,X.cachePool),ra(p,X),f0(),p.memoizedState=null):(A!==null&&oe(p,null),Gn(),f0());return uo(A,p,Q,b),p.child}function P7(A,p,b,N){var Q=re();return Q=Q===null?null:{parent:Hs._currentValue,pool:Q},p.memoizedState={baseLanes:b,cachePool:Q},A!==null&&oe(p,null),Gn(),w7(p),A!==null&&s0(A,p,N,!0),null}function aN(A,p){var b=p.ref;if(b===null)A!==null&&A.ref!==null&&(p.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(n(284));(A===null||A.ref!==b)&&(p.flags|=4194816)}}function Mj(A,p,b,N,Q){return bu(p),b=Ec(A,p,b,N,void 0,Q),N=Ta(),A!==null&&!Vi?(lp(A,p,Q),LA(A,p,Q)):(Un&&N&&ap(p),p.flags|=1,uo(A,p,b,Q),p.child)}function R7(A,p,b,N,Q,X){return bu(p),p.updateQueue=null,b=FA(p,N,b,Q),wf(A),N=Ta(),A!==null&&!Vi?(lp(A,p,X),LA(A,p,X)):(Un&&N&&ap(p),p.flags|=1,uo(A,p,b,X),p.child)}function L7(A,p,b,N,Q){if(bu(p),p.stateNode===null){var X=oi,fe=b.contextType;typeof fe=="object"&&fe!==null&&(X=Qs(fe)),X=new b(N,X),p.memoizedState=X.state!==null&&X.state!==void 0?X.state:null,X.updater=Rj,p.stateNode=X,X._reactInternals=p,X=p.stateNode,X.props=N,X.state=p.memoizedState,X.refs={},He(p),fe=b.contextType,X.context=typeof fe=="object"&&fe!==null?Qs(fe):oi,X.state=p.memoizedState,fe=b.getDerivedStateFromProps,typeof fe=="function"&&(Pj(p,b,fe,N),X.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof X.getSnapshotBeforeUpdate=="function"||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(fe=X.state,typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount(),fe!==X.state&&Rj.enqueueReplaceState(X,X.state,null),er(p,N,X,Q),br(),X.state=p.memoizedState),typeof X.componentDidMount=="function"&&(p.flags|=4194308),N=!0}else if(A===null){X=p.stateNode;var Ee=p.memoizedProps,Re=xp(b,Ee);X.props=Re;var ct=X.context,St=b.contextType;fe=oi,typeof St=="object"&&St!==null&&(fe=Qs(St));var Ot=b.getDerivedStateFromProps;St=typeof Ot=="function"||typeof X.getSnapshotBeforeUpdate=="function",Ee=p.pendingProps!==Ee,St||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(Ee||ct!==fe)&&N7(p,X,N,fe),gt=!1;var At=p.memoizedState;X.state=At,er(p,N,X,Q),br(),ct=p.memoizedState,Ee||At!==ct||gt?(typeof Ot=="function"&&(Pj(p,b,Ot,N),ct=p.memoizedState),(Re=gt||E7(p,b,Re,N,At,ct,fe))?(St||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount()),typeof X.componentDidMount=="function"&&(p.flags|=4194308)):(typeof X.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=N,p.memoizedState=ct),X.props=N,X.state=ct,X.context=fe,N=Re):(typeof X.componentDidMount=="function"&&(p.flags|=4194308),N=!1)}else{X=p.stateNode,ze(A,p),fe=p.memoizedProps,St=xp(b,fe),X.props=St,Ot=p.pendingProps,At=X.context,ct=b.contextType,Re=oi,typeof ct=="object"&&ct!==null&&(Re=Qs(ct)),Ee=b.getDerivedStateFromProps,(ct=typeof Ee=="function"||typeof X.getSnapshotBeforeUpdate=="function")||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(fe!==Ot||At!==Re)&&N7(p,X,N,Re),gt=!1,At=p.memoizedState,X.state=At,er(p,N,X,Q),br();var ht=p.memoizedState;fe!==Ot||At!==ht||gt||A!==null&&A.dependencies!==null&&ox(A.dependencies)?(typeof Ee=="function"&&(Pj(p,b,Ee,N),ht=p.memoizedState),(St=gt||E7(p,b,St,N,At,ht,Re)||A!==null&&A.dependencies!==null&&ox(A.dependencies))?(ct||typeof X.UNSAFE_componentWillUpdate!="function"&&typeof X.componentWillUpdate!="function"||(typeof X.componentWillUpdate=="function"&&X.componentWillUpdate(N,ht,Re),typeof X.UNSAFE_componentWillUpdate=="function"&&X.UNSAFE_componentWillUpdate(N,ht,Re)),typeof X.componentDidUpdate=="function"&&(p.flags|=4),typeof X.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof X.componentDidUpdate!="function"||fe===A.memoizedProps&&At===A.memoizedState||(p.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||fe===A.memoizedProps&&At===A.memoizedState||(p.flags|=1024),p.memoizedProps=N,p.memoizedState=ht),X.props=N,X.state=ht,X.context=Re,N=St):(typeof X.componentDidUpdate!="function"||fe===A.memoizedProps&&At===A.memoizedState||(p.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||fe===A.memoizedProps&&At===A.memoizedState||(p.flags|=1024),N=!1)}return X=N,aN(A,p),N=(p.flags&128)!==0,X||N?(X=p.stateNode,b=N&&typeof b.getDerivedStateFromError!="function"?null:X.render(),p.flags|=1,A!==null&&N?(p.child=px(p,A.child,null,Q),p.child=px(p,null,b,Q)):uo(A,p,b,Q),p.memoizedState=X.state,A=p.child):A=LA(A,p,Q),A}function M7(A,p,b,N){return ml(),p.flags|=256,uo(A,p,b,N),p.child}var Uj={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qj(A){return{baseLanes:A,cachePool:Ae()}}function Hj(A,p,b){return A=A!==null?A.childLanes&~b:0,p&&(A|=Eu),A}function U7(A,p,b){var N=p.pendingProps,Q=!1,X=(p.flags&128)!==0,fe;if((fe=X)||(fe=A!==null&&A.memoizedState===null?!1:(Si.current&2)!==0),fe&&(Q=!0,p.flags&=-129),fe=(p.flags&32)!==0,p.flags&=-33,A===null){if(Un){if(Q?d0(p):f0(),Un){var Ee=Wa,Re;if(Re=Ee){e:{for(Re=Ee,Ee=gu;Re.nodeType!==8;){if(!Ee){Ee=null;break e}if(Re=wd(Re.nextSibling),Re===null){Ee=null;break e}}Ee=Re}Ee!==null?(p.memoizedState={dehydrated:Ee,treeContext:jA!==null?{id:fd,overflow:Ad}:null,retryLane:536870912,hydrationErrors:null},Re=Hi(18,null,null,0),Re.stateNode=Ee,Re.return=p,p.child=Re,Us=p,Wa=null,Re=!0):Re=!1}Re||TA(p)}if(Ee=p.memoizedState,Ee!==null&&(Ee=Ee.dehydrated,Ee!==null))return C3(Ee)?p.lanes=32:p.lanes=536870912,null;RA(p)}return Ee=N.children,N=N.fallback,Q?(f0(),Q=p.mode,Ee=sN({mode:"hidden",children:Ee},Q),N=ud(N,Q,b,null),Ee.return=p,N.return=p,Ee.sibling=N,p.child=Ee,Q=p.child,Q.memoizedState=Qj(b),Q.childLanes=Hj(A,fe,b),p.memoizedState=Uj,N):(d0(p),Vj(p,Ee))}if(Re=A.memoizedState,Re!==null&&(Ee=Re.dehydrated,Ee!==null)){if(X)p.flags&256?(d0(p),p.flags&=-257,p=zj(A,p,b)):p.memoizedState!==null?(f0(),p.child=A.child,p.flags|=128,p=null):(f0(),Q=N.fallback,Ee=p.mode,N=sN({mode:"visible",children:N.children},Ee),Q=ud(Q,Ee,b,null),Q.flags|=2,N.return=p,Q.return=p,N.sibling=Q,p.child=N,px(p,A.child,null,b),N=p.child,N.memoizedState=Qj(b),N.childLanes=Hj(A,fe,b),p.memoizedState=Uj,p=Q);else if(d0(p),C3(Ee)){if(fe=Ee.nextSibling&&Ee.nextSibling.dataset,fe)var ct=fe.dgst;fe=ct,N=Error(n(419)),N.stack="",N.digest=fe,a0({value:N,source:null,stack:null}),p=zj(A,p,b)}else if(Vi||s0(A,p,b,!1),fe=(b&A.childLanes)!==0,Vi||fe){if(fe=Ia,fe!==null&&(N=b&-b,N=(N&42)!==0?1:mt(N),N=(N&(fe.suspendedLanes|b))!==0?0:N,N!==0&&N!==Re.retryLane))throw Re.retryLane=N,cd(A,N),jc(fe,A,N),T7;Ee.data==="$?"||l3(),p=zj(A,p,b)}else Ee.data==="$?"?(p.flags|=192,p.child=A.child,p=null):(A=Re.treeContext,Wa=wd(Ee.nextSibling),Us=p,Un=!0,vf=null,gu=!1,A!==null&&(Vl[hl++]=fd,Vl[hl++]=Ad,Vl[hl++]=jA,fd=A.id,Ad=A.overflow,jA=p),p=Vj(p,N.children),p.flags|=4096);return p}return Q?(f0(),Q=N.fallback,Ee=p.mode,Re=A.child,ct=Re.sibling,N=pu(Re,{mode:"hidden",children:N.children}),N.subtreeFlags=Re.subtreeFlags&65011712,ct!==null?Q=pu(ct,Q):(Q=ud(Q,Ee,b,null),Q.flags|=2),Q.return=p,N.return=p,N.sibling=Q,p.child=N,N=Q,Q=p.child,Ee=A.child.memoizedState,Ee===null?Ee=Qj(b):(Re=Ee.cachePool,Re!==null?(ct=Hs._currentValue,Re=Re.parent!==ct?{parent:ct,pool:ct}:Re):Re=Ae(),Ee={baseLanes:Ee.baseLanes|b,cachePool:Re}),Q.memoizedState=Ee,Q.childLanes=Hj(A,fe,b),p.memoizedState=Uj,N):(d0(p),b=A.child,A=b.sibling,b=pu(b,{mode:"visible",children:N.children}),b.return=p,b.sibling=null,A!==null&&(fe=p.deletions,fe===null?(p.deletions=[A],p.flags|=16):fe.push(A)),p.child=b,p.memoizedState=null,b)}function Vj(A,p){return p=sN({mode:"visible",children:p},A.mode),p.return=A,A.child=p}function sN(A,p){return A=Hi(22,A,null,p),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function zj(A,p,b){return px(p,A.child,null,b),A=Vj(p,p.pendingProps.children),A.flags|=2,p.memoizedState=null,A}function Q7(A,p,b){A.lanes|=p;var N=A.alternate;N!==null&&(N.lanes|=p),sx(A.return,p,b)}function $j(A,p,b,N,Q){var X=A.memoizedState;X===null?A.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:N,tail:b,tailMode:Q}:(X.isBackwards=p,X.rendering=null,X.renderingStartTime=0,X.last=N,X.tail=b,X.tailMode=Q)}function H7(A,p,b){var N=p.pendingProps,Q=N.revealOrder,X=N.tail;if(uo(A,p,N.children,b),N=Si.current,(N&2)!==0)N=N&1|2,p.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=p.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&Q7(A,b,p);else if(A.tag===19)Q7(A,b,p);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===p)break e;for(;A.sibling===null;){if(A.return===null||A.return===p)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}N&=1}switch(U(Si,N),Q){case"forwards":for(b=p.child,Q=null;b!==null;)A=b.alternate,A!==null&&tN(A)===null&&(Q=b),b=b.sibling;b=Q,b===null?(Q=p.child,p.child=null):(Q=b.sibling,b.sibling=null),$j(p,!1,Q,b,X);break;case"backwards":for(b=null,Q=p.child,p.child=null;Q!==null;){if(A=Q.alternate,A!==null&&tN(A)===null){p.child=Q;break}A=Q.sibling,Q.sibling=b,b=Q,Q=A}$j(p,!0,b,null,X);break;case"together":$j(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function LA(A,p,b){if(A!==null&&(p.dependencies=A.dependencies),g0|=p.lanes,(b&p.childLanes)===0)if(A!==null){if(s0(A,p,b,!1),(b&p.childLanes)===0)return null}else return null;if(A!==null&&p.child!==A.child)throw Error(n(153));if(p.child!==null){for(A=p.child,b=pu(A,A.pendingProps),p.child=b,b.return=p;A.sibling!==null;)A=A.sibling,b=b.sibling=pu(A,A.pendingProps),b.return=p;b.sibling=null}return p.child}function Gj(A,p){return(A.lanes&p)!==0?!0:(A=A.dependencies,!!(A!==null&&ox(A)))}function yAe(A,p,b){switch(p.tag){case 3:ie(p,p.stateNode.containerInfo),bf(p,Hs,A.memoizedState.cache),ml();break;case 27:case 5:de(p);break;case 4:ie(p,p.stateNode.containerInfo);break;case 10:bf(p,p.type,p.memoizedProps.value);break;case 13:var N=p.memoizedState;if(N!==null)return N.dehydrated!==null?(d0(p),p.flags|=128,null):(b&p.child.childLanes)!==0?U7(A,p,b):(d0(p),A=LA(A,p,b),A!==null?A.sibling:null);d0(p);break;case 19:var Q=(A.flags&128)!==0;if(N=(b&p.childLanes)!==0,N||(s0(A,p,b,!1),N=(b&p.childLanes)!==0),Q){if(N)return H7(A,p,b);p.flags|=128}if(Q=p.memoizedState,Q!==null&&(Q.rendering=null,Q.tail=null,Q.lastEffect=null),U(Si,Si.current),N)break;return null;case 22:case 23:return p.lanes=0,D7(A,p,b);case 24:bf(p,Hs,A.memoizedState.cache)}return LA(A,p,b)}function V7(A,p,b){if(A!==null)if(A.memoizedProps!==p.pendingProps)Vi=!0;else{if(!Gj(A,b)&&(p.flags&128)===0)return Vi=!1,yAe(A,p,b);Vi=(A.flags&131072)!==0}else Vi=!1,Un&&(p.flags&1048576)!==0&&DE(p,ax,p.index);switch(p.lanes=0,p.tag){case 16:e:{A=p.pendingProps;var N=p.elementType,Q=N._init;if(N=Q(N._payload),p.type=N,typeof N=="function")r0(N)?(A=xp(N,A),p.tag=1,p=L7(null,p,N,A,b)):(p.tag=0,p=Mj(null,p,N,A,b));else{if(N!=null){if(Q=N.$$typeof,Q===T){p.tag=11,p=I7(null,p,N,A,b);break e}else if(Q===E){p.tag=14,p=F7(null,p,N,A,b);break e}}throw p=L(N)||N,Error(n(306,p,""))}}return p;case 0:return Mj(A,p,p.type,p.pendingProps,b);case 1:return N=p.type,Q=xp(N,p.pendingProps),L7(A,p,N,Q,b);case 3:e:{if(ie(p,p.stateNode.containerInfo),A===null)throw Error(n(387));N=p.pendingProps;var X=p.memoizedState;Q=X.element,ze(A,p),er(p,N,null,b);var fe=p.memoizedState;if(N=fe.cache,bf(p,Hs,N),N!==X.cache&&ix(p,[Hs],b,!0),br(),N=fe.element,X.isDehydrated)if(X={element:N,isDehydrated:!1,cache:fe.cache},p.updateQueue.baseState=X,p.memoizedState=X,p.flags&256){p=M7(A,p,N,b);break e}else if(N!==Q){Q=gn(Error(n(424)),p),a0(Q),p=M7(A,p,N,b);break e}else{switch(A=p.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(Wa=wd(A.firstChild),Us=p,Un=!0,vf=null,gu=!0,b=y7(p,null,N,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(ml(),N===Q){p=LA(A,p,b);break e}uo(A,p,N,b)}p=p.child}return p;case 26:return aN(A,p),A===null?(b=qU(p.type,null,p.pendingProps,null))?p.memoizedState=b:Un||(b=p.type,A=p.pendingProps,N=vN(te.current).createElement(b),N[ar]=p,N[xr]=A,Ao(N,b,A),qe(N),p.stateNode=N):p.memoizedState=qU(p.type,A.memoizedProps,p.pendingProps,A.memoizedState),null;case 27:return de(p),A===null&&Un&&(N=p.stateNode=zU(p.type,p.pendingProps,te.current),Us=p,gu=!0,Q=Wa,y0(p.type)?(_3=Q,Wa=wd(N.firstChild)):Wa=Q),uo(A,p,p.pendingProps.children,b),aN(A,p),A===null&&(p.flags|=4194304),p.child;case 5:return A===null&&Un&&((Q=N=Wa)&&(N=WAe(N,p.type,p.pendingProps,gu),N!==null?(p.stateNode=N,Us=p,Wa=wd(N.firstChild),gu=!1,Q=!0):Q=!1),Q||TA(p)),de(p),Q=p.type,X=p.pendingProps,fe=A!==null?A.memoizedProps:null,N=X.children,w3(Q,X)?N=null:fe!==null&&w3(Q,fe)&&(p.flags|=32),p.memoizedState!==null&&(Q=Ec(A,p,Ef,null,null,b),ey._currentValue=Q),aN(A,p),uo(A,p,N,b),p.child;case 6:return A===null&&Un&&((A=b=Wa)&&(b=XAe(b,p.pendingProps,gu),b!==null?(p.stateNode=b,Us=p,Wa=null,A=!0):A=!1),A||TA(p)),null;case 13:return U7(A,p,b);case 4:return ie(p,p.stateNode.containerInfo),N=p.pendingProps,A===null?p.child=px(p,null,N,b):uo(A,p,N,b),p.child;case 11:return I7(A,p,p.type,p.pendingProps,b);case 7:return uo(A,p,p.pendingProps,b),p.child;case 8:return uo(A,p,p.pendingProps.children,b),p.child;case 12:return uo(A,p,p.pendingProps.children,b),p.child;case 10:return N=p.pendingProps,bf(p,p.type,N.value),uo(A,p,N.children,b),p.child;case 9:return Q=p.type._context,N=p.pendingProps.children,bu(p),Q=Qs(Q),N=N(Q),p.flags|=1,uo(A,p,N,b),p.child;case 14:return F7(A,p,p.type,p.pendingProps,b);case 15:return O7(A,p,p.type,p.pendingProps,b);case 19:return H7(A,p,b);case 31:return N=p.pendingProps,b=p.mode,N={mode:N.mode,children:N.children},A===null?(b=sN(N,b),b.ref=p.ref,p.child=b,b.return=p,p=b):(b=pu(A.child,N),b.ref=p.ref,p.child=b,b.return=p,p=b),p;case 22:return D7(A,p,b);case 24:return bu(p),N=Qs(Hs),A===null?(Q=re(),Q===null&&(Q=Ia,X=E1(),Q.pooledCache=X,X.refCount++,X!==null&&(Q.pooledCacheLanes|=b),Q=X),p.memoizedState={parent:N,cache:Q},He(p),bf(p,Hs,Q)):((A.lanes&b)!==0&&(ze(A,p),er(p,null,null,b),br()),Q=A.memoizedState,X=p.memoizedState,Q.parent!==N?(Q={parent:N,cache:N},p.memoizedState=Q,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=Q),bf(p,Hs,N)):(N=X.cache,bf(p,Hs,N),N!==Q.cache&&ix(p,[Hs],b,!0))),uo(A,p,p.pendingProps.children,b),p.child;case 29:throw p.pendingProps}throw Error(n(156,p.tag))}function MA(A){A.flags|=4}function z7(A,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!JU(p)){if(p=wu.current,p!==null&&((Ln&4194048)===Ln?_f!==null:(Ln&62914560)!==Ln&&(Ln&536870912)===0||p!==_f))throw tt=Ce,xe;A.flags|=8192}}function iN(A,p){p!==null&&(A.flags|=4),A.flags&16384&&(p=A.tag!==22?pn():536870912,A.lanes|=p,bx|=p)}function M1(A,p){if(!Un)switch(A.tailMode){case"hidden":p=A.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?A.tail=null:b.sibling=null;break;case"collapsed":b=A.tail;for(var N=null;b!==null;)b.alternate!==null&&(N=b),b=b.sibling;N===null?p||A.tail===null?A.tail=null:A.tail.sibling=null:N.sibling=null}}function is(A){var p=A.alternate!==null&&A.alternate.child===A.child,b=0,N=0;if(p)for(var Q=A.child;Q!==null;)b|=Q.lanes|Q.childLanes,N|=Q.subtreeFlags&65011712,N|=Q.flags&65011712,Q.return=A,Q=Q.sibling;else for(Q=A.child;Q!==null;)b|=Q.lanes|Q.childLanes,N|=Q.subtreeFlags,N|=Q.flags,Q.return=A,Q=Q.sibling;return A.subtreeFlags|=N,A.childLanes=b,p}function wAe(A,p,b){var N=p.pendingProps;switch(sp(p),p.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return is(p),null;case 1:return is(p),null;case 3:return b=p.stateNode,N=null,A!==null&&(N=A.memoizedState.cache),p.memoizedState.cache!==N&&(p.flags|=2048),vu(Hs),ce(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(A===null||A.child===null)&&(lo(p)?MA(p):A===null||A.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,RE())),is(p),null;case 26:return b=p.memoizedState,A===null?(MA(p),b!==null?(is(p),z7(p,b)):(is(p),p.flags&=-16777217)):b?b!==A.memoizedState?(MA(p),is(p),z7(p,b)):(is(p),p.flags&=-16777217):(A.memoizedProps!==N&&MA(p),is(p),p.flags&=-16777217),null;case 27:Be(p),b=te.current;var Q=p.type;if(A!==null&&p.stateNode!=null)A.memoizedProps!==N&&MA(p);else{if(!N){if(p.stateNode===null)throw Error(n(166));return is(p),null}A=z.current,lo(p)?PE(p):(A=zU(Q,N,b),p.stateNode=A,MA(p))}return is(p),null;case 5:if(Be(p),b=p.type,A!==null&&p.stateNode!=null)A.memoizedProps!==N&&MA(p);else{if(!N){if(p.stateNode===null)throw Error(n(166));return is(p),null}if(A=z.current,lo(p))PE(p);else{switch(Q=vN(te.current),A){case 1:A=Q.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:A=Q.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":A=Q.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":A=Q.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":A=Q.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof N.is=="string"?Q.createElement("select",{is:N.is}):Q.createElement("select"),N.multiple?A.multiple=!0:N.size&&(A.size=N.size);break;default:A=typeof N.is=="string"?Q.createElement(b,{is:N.is}):Q.createElement(b)}}A[ar]=p,A[xr]=N;e:for(Q=p.child;Q!==null;){if(Q.tag===5||Q.tag===6)A.appendChild(Q.stateNode);else if(Q.tag!==4&&Q.tag!==27&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===p)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===p)break e;Q=Q.return}Q.sibling.return=Q.return,Q=Q.sibling}p.stateNode=A;e:switch(Ao(A,b,N),b){case"button":case"input":case"select":case"textarea":A=!!N.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&MA(p)}}return is(p),p.flags&=-16777217,null;case 6:if(A&&p.stateNode!=null)A.memoizedProps!==N&&MA(p);else{if(typeof N!="string"&&p.stateNode===null)throw Error(n(166));if(A=te.current,lo(p)){if(A=p.stateNode,b=p.memoizedProps,N=null,Q=Us,Q!==null)switch(Q.tag){case 27:case 5:N=Q.memoizedProps}A[ar]=p,A=!!(A.nodeValue===b||N!==null&&N.suppressHydrationWarning===!0||RU(A.nodeValue,b)),A||TA(p)}else A=vN(A).createTextNode(N),A[ar]=p,p.stateNode=A}return is(p),null;case 13:if(N=p.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(Q=lo(p),N!==null&&N.dehydrated!==null){if(A===null){if(!Q)throw Error(n(318));if(Q=p.memoizedState,Q=Q!==null?Q.dehydrated:null,!Q)throw Error(n(317));Q[ar]=p}else ml(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;is(p),Q=!1}else Q=RE(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=Q),Q=!0;if(!Q)return p.flags&256?(RA(p),p):(RA(p),null)}if(RA(p),(p.flags&128)!==0)return p.lanes=b,p;if(b=N!==null,A=A!==null&&A.memoizedState!==null,b){N=p.child,Q=null,N.alternate!==null&&N.alternate.memoizedState!==null&&N.alternate.memoizedState.cachePool!==null&&(Q=N.alternate.memoizedState.cachePool.pool);var X=null;N.memoizedState!==null&&N.memoizedState.cachePool!==null&&(X=N.memoizedState.cachePool.pool),X!==Q&&(N.flags|=2048)}return b!==A&&b&&(p.child.flags|=8192),iN(p,p.updateQueue),is(p),null;case 4:return ce(),A===null&&g3(p.stateNode.containerInfo),is(p),null;case 10:return vu(p.type),is(p),null;case 19:if(P(Si),Q=p.memoizedState,Q===null)return is(p),null;if(N=(p.flags&128)!==0,X=Q.rendering,X===null)if(N)M1(Q,!1);else{if(Es!==0||A!==null&&(A.flags&128)!==0)for(A=p.child;A!==null;){if(X=tN(A),X!==null){for(p.flags|=128,M1(Q,!1),A=X.updateQueue,p.updateQueue=A,iN(p,A),p.subtreeFlags=0,A=b,b=p.child;b!==null;)rp(b,A),b=b.sibling;return U(Si,Si.current&1|2),p.child}A=A.sibling}Q.tail!==null&&be()>cN&&(p.flags|=128,N=!0,M1(Q,!1),p.lanes=4194304)}else{if(!N)if(A=tN(X),A!==null){if(p.flags|=128,N=!0,A=A.updateQueue,p.updateQueue=A,iN(p,A),M1(Q,!0),Q.tail===null&&Q.tailMode==="hidden"&&!X.alternate&&!Un)return is(p),null}else 2*be()-Q.renderingStartTime>cN&&b!==536870912&&(p.flags|=128,N=!0,M1(Q,!1),p.lanes=4194304);Q.isBackwards?(X.sibling=p.child,p.child=X):(A=Q.last,A!==null?A.sibling=X:p.child=X,Q.last=X)}return Q.tail!==null?(p=Q.tail,Q.rendering=p,Q.tail=p.sibling,Q.renderingStartTime=be(),p.sibling=null,A=Si.current,U(Si,N?A&1|2:A&1),p):(is(p),null);case 22:case 23:return RA(p),Yr(),N=p.memoizedState!==null,A!==null?A.memoizedState!==null!==N&&(p.flags|=8192):N&&(p.flags|=8192),N?(b&536870912)!==0&&(p.flags&128)===0&&(is(p),p.subtreeFlags&6&&(p.flags|=8192)):is(p),b=p.updateQueue,b!==null&&iN(p,b.retryQueue),b=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(b=A.memoizedState.cachePool.pool),N=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(N=p.memoizedState.cachePool.pool),N!==b&&(p.flags|=2048),A!==null&&P(H),null;case 24:return b=null,A!==null&&(b=A.memoizedState.cache),p.memoizedState.cache!==b&&(p.flags|=2048),vu(Hs),is(p),null;case 25:return null;case 30:return null}throw Error(n(156,p.tag))}function EAe(A,p){switch(sp(p),p.tag){case 1:return A=p.flags,A&65536?(p.flags=A&-65537|128,p):null;case 3:return vu(Hs),ce(),A=p.flags,(A&65536)!==0&&(A&128)===0?(p.flags=A&-65537|128,p):null;case 26:case 27:case 5:return Be(p),null;case 13:if(RA(p),A=p.memoizedState,A!==null&&A.dehydrated!==null){if(p.alternate===null)throw Error(n(340));ml()}return A=p.flags,A&65536?(p.flags=A&-65537|128,p):null;case 19:return P(Si),null;case 4:return ce(),null;case 10:return vu(p.type),null;case 22:case 23:return RA(p),Yr(),A!==null&&P(H),A=p.flags,A&65536?(p.flags=A&-65537|128,p):null;case 24:return vu(Hs),null;case 25:return null;default:return null}}function $7(A,p){switch(sp(p),p.tag){case 3:vu(Hs),ce();break;case 26:case 27:case 5:Be(p);break;case 4:ce();break;case 13:RA(p);break;case 19:P(Si);break;case 10:vu(p.type);break;case 22:case 23:RA(p),Yr(),A!==null&&P(H);break;case 24:vu(Hs)}}function U1(A,p){try{var b=p.updateQueue,N=b!==null?b.lastEffect:null;if(N!==null){var Q=N.next;b=Q;do{if((b.tag&A)===A){N=void 0;var X=b.create,fe=b.inst;N=X(),fe.destroy=N}b=b.next}while(b!==Q)}}catch(Ee){Na(p,p.return,Ee)}}function A0(A,p,b){try{var N=p.updateQueue,Q=N!==null?N.lastEffect:null;if(Q!==null){var X=Q.next;N=X;do{if((N.tag&A)===A){var fe=N.inst,Ee=fe.destroy;if(Ee!==void 0){fe.destroy=void 0,Q=p;var Re=b,ct=Ee;try{ct()}catch(St){Na(Q,Re,St)}}}N=N.next}while(N!==X)}}catch(St){Na(p,p.return,St)}}function G7(A){var p=A.updateQueue;if(p!==null){var b=A.stateNode;try{$n(p,b)}catch(N){Na(A,A.return,N)}}}function q7(A,p,b){b.props=xp(A.type,A.memoizedProps),b.state=A.memoizedState;try{b.componentWillUnmount()}catch(N){Na(A,p,N)}}function Q1(A,p){try{var b=A.ref;if(b!==null){switch(A.tag){case 26:case 27:case 5:var N=A.stateNode;break;case 30:N=A.stateNode;break;default:N=A.stateNode}typeof b=="function"?A.refCleanup=b(N):b.current=N}}catch(Q){Na(A,p,Q)}}function Sf(A,p){var b=A.ref,N=A.refCleanup;if(b!==null)if(typeof N=="function")try{N()}catch(Q){Na(A,p,Q)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(Q){Na(A,p,Q)}else b.current=null}function K7(A){var p=A.type,b=A.memoizedProps,N=A.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":b.autoFocus&&N.focus();break e;case"img":b.src?N.src=b.src:b.srcSet&&(N.srcset=b.srcSet)}}catch(Q){Na(A,A.return,Q)}}function qj(A,p,b){try{var N=A.stateNode;zAe(N,A.type,b,p),N[xr]=p}catch(Q){Na(A,A.return,Q)}}function W7(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&y0(A.type)||A.tag===4}function Kj(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||W7(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&y0(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function Wj(A,p,b){var N=A.tag;if(N===5||N===6)A=A.stateNode,p?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(A,p):(p=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,p.appendChild(A),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=xN));else if(N!==4&&(N===27&&y0(A.type)&&(b=A.stateNode,p=null),A=A.child,A!==null))for(Wj(A,p,b),A=A.sibling;A!==null;)Wj(A,p,b),A=A.sibling}function oN(A,p,b){var N=A.tag;if(N===5||N===6)A=A.stateNode,p?b.insertBefore(A,p):b.appendChild(A);else if(N!==4&&(N===27&&y0(A.type)&&(b=A.stateNode),A=A.child,A!==null))for(oN(A,p,b),A=A.sibling;A!==null;)oN(A,p,b),A=A.sibling}function X7(A){var p=A.stateNode,b=A.memoizedProps;try{for(var N=A.type,Q=p.attributes;Q.length;)p.removeAttributeNode(Q[0]);Ao(p,N,b),p[ar]=A,p[xr]=b}catch(X){Na(A,A.return,X)}}var UA=!1,zs=!1,Xj=!1,Y7=typeof WeakSet=="function"?WeakSet:Set,zi=null;function NAe(A,p){if(A=A.containerInfo,b3=CN,A=oo(A),_i(A)){if("selectionStart"in A)var b={start:A.selectionStart,end:A.selectionEnd};else e:{b=(b=A.ownerDocument)&&b.defaultView||window;var N=b.getSelection&&b.getSelection();if(N&&N.rangeCount!==0){b=N.anchorNode;var Q=N.anchorOffset,X=N.focusNode;N=N.focusOffset;try{b.nodeType,X.nodeType}catch{b=null;break e}var fe=0,Ee=-1,Re=-1,ct=0,St=0,Ot=A,At=null;t:for(;;){for(var ht;Ot!==b||Q!==0&&Ot.nodeType!==3||(Ee=fe+Q),Ot!==X||N!==0&&Ot.nodeType!==3||(Re=fe+N),Ot.nodeType===3&&(fe+=Ot.nodeValue.length),(ht=Ot.firstChild)!==null;)At=Ot,Ot=ht;for(;;){if(Ot===A)break t;if(At===b&&++ct===Q&&(Ee=fe),At===X&&++St===N&&(Re=fe),(ht=Ot.nextSibling)!==null)break;Ot=At,At=Ot.parentNode}Ot=ht}b=Ee===-1||Re===-1?null:{start:Ee,end:Re}}else b=null}b=b||{start:0,end:0}}else b=null;for(y3={focusedElem:A,selectionRange:b},CN=!1,zi=p;zi!==null;)if(p=zi,A=p.child,(p.subtreeFlags&1024)!==0&&A!==null)A.return=p,zi=A;else for(;zi!==null;){switch(p=zi,X=p.alternate,A=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&X!==null){A=void 0,b=p,Q=X.memoizedProps,X=X.memoizedState,N=b.stateNode;try{var Gr=xp(b.type,Q,b.elementType===b.type);A=N.getSnapshotBeforeUpdate(Gr,X),N.__reactInternalSnapshotBeforeUpdate=A}catch(Dr){Na(b,b.return,Dr)}}break;case 3:if((A&1024)!==0){if(A=p.stateNode.containerInfo,b=A.nodeType,b===9)N3(A);else if(b===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":N3(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(n(163))}if(A=p.sibling,A!==null){A.return=p.return,zi=A;break}zi=p.return}}function J7(A,p,b){var N=b.flags;switch(b.tag){case 0:case 11:case 15:h0(A,b),N&4&&U1(5,b);break;case 1:if(h0(A,b),N&4)if(A=b.stateNode,p===null)try{A.componentDidMount()}catch(fe){Na(b,b.return,fe)}else{var Q=xp(b.type,p.memoizedProps);p=p.memoizedState;try{A.componentDidUpdate(Q,p,A.__reactInternalSnapshotBeforeUpdate)}catch(fe){Na(b,b.return,fe)}}N&64&&G7(b),N&512&&Q1(b,b.return);break;case 3:if(h0(A,b),N&64&&(A=b.updateQueue,A!==null)){if(p=null,b.child!==null)switch(b.child.tag){case 27:case 5:p=b.child.stateNode;break;case 1:p=b.child.stateNode}try{$n(A,p)}catch(fe){Na(b,b.return,fe)}}break;case 27:p===null&&N&4&&X7(b);case 26:case 5:h0(A,b),p===null&&N&4&&K7(b),N&512&&Q1(b,b.return);break;case 12:h0(A,b);break;case 13:h0(A,b),N&4&&tU(A,b),N&64&&(A=b.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(b=FAe.bind(null,b),YAe(A,b))));break;case 22:if(N=b.memoizedState!==null||UA,!N){p=p!==null&&p.memoizedState!==null||zs,Q=UA;var X=zs;UA=N,(zs=p)&&!X?m0(A,b,(b.subtreeFlags&8772)!==0):h0(A,b),UA=Q,zs=X}break;case 30:break;default:h0(A,b)}}function Z7(A){var p=A.alternate;p!==null&&(A.alternate=null,Z7(p)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(p=A.stateNode,p!==null&&Ne(p)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var Xa=null,$l=!1;function QA(A,p,b){for(b=b.child;b!==null;)eU(A,p,b),b=b.sibling}function eU(A,p,b){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(xt,b)}catch{}switch(b.tag){case 26:zs||Sf(b,p),QA(A,p,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:zs||Sf(b,p);var N=Xa,Q=$l;y0(b.type)&&(Xa=b.stateNode,$l=!1),QA(A,p,b),X1(b.stateNode),Xa=N,$l=Q;break;case 5:zs||Sf(b,p);case 6:if(N=Xa,Q=$l,Xa=null,QA(A,p,b),Xa=N,$l=Q,Xa!==null)if($l)try{(Xa.nodeType===9?Xa.body:Xa.nodeName==="HTML"?Xa.ownerDocument.body:Xa).removeChild(b.stateNode)}catch(X){Na(b,p,X)}else try{Xa.removeChild(b.stateNode)}catch(X){Na(b,p,X)}break;case 18:Xa!==null&&($l?(A=Xa,HU(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,b.stateNode),ay(A)):HU(Xa,b.stateNode));break;case 4:N=Xa,Q=$l,Xa=b.stateNode.containerInfo,$l=!0,QA(A,p,b),Xa=N,$l=Q;break;case 0:case 11:case 14:case 15:zs||A0(2,b,p),zs||A0(4,b,p),QA(A,p,b);break;case 1:zs||(Sf(b,p),N=b.stateNode,typeof N.componentWillUnmount=="function"&&q7(b,p,N)),QA(A,p,b);break;case 21:QA(A,p,b);break;case 22:zs=(N=zs)||b.memoizedState!==null,QA(A,p,b),zs=N;break;default:QA(A,p,b)}}function tU(A,p){if(p.memoizedState===null&&(A=p.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{ay(A)}catch(b){Na(p,p.return,b)}}function CAe(A){switch(A.tag){case 13:case 19:var p=A.stateNode;return p===null&&(p=A.stateNode=new Y7),p;case 22:return A=A.stateNode,p=A._retryCache,p===null&&(p=A._retryCache=new Y7),p;default:throw Error(n(435,A.tag))}}function Yj(A,p){var b=CAe(A);p.forEach(function(N){var Q=OAe.bind(null,A,N);b.has(N)||(b.add(N),N.then(Q,Q))})}function Cc(A,p){var b=p.deletions;if(b!==null)for(var N=0;N<b.length;N++){var Q=b[N],X=A,fe=p,Ee=fe;e:for(;Ee!==null;){switch(Ee.tag){case 27:if(y0(Ee.type)){Xa=Ee.stateNode,$l=!1;break e}break;case 5:Xa=Ee.stateNode,$l=!1;break e;case 3:case 4:Xa=Ee.stateNode.containerInfo,$l=!0;break e}Ee=Ee.return}if(Xa===null)throw Error(n(160));eU(X,fe,Q),Xa=null,$l=!1,X=Q.alternate,X!==null&&(X.return=null),Q.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)rU(p,A),p=p.sibling}var yd=null;function rU(A,p){var b=A.alternate,N=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:Cc(p,A),_c(A),N&4&&(A0(3,A,A.return),U1(3,A),A0(5,A,A.return));break;case 1:Cc(p,A),_c(A),N&512&&(zs||b===null||Sf(b,b.return)),N&64&&UA&&(A=A.updateQueue,A!==null&&(N=A.callbacks,N!==null&&(b=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=b===null?N:b.concat(N))));break;case 26:var Q=yd;if(Cc(p,A),_c(A),N&512&&(zs||b===null||Sf(b,b.return)),N&4){var X=b!==null?b.memoizedState:null;if(N=A.memoizedState,b===null)if(N===null)if(A.stateNode===null){e:{N=A.type,b=A.memoizedProps,Q=Q.ownerDocument||Q;t:switch(N){case"title":X=Q.getElementsByTagName("title")[0],(!X||X[_e]||X[ar]||X.namespaceURI==="http://www.w3.org/2000/svg"||X.hasAttribute("itemprop"))&&(X=Q.createElement(N),Q.head.insertBefore(X,Q.querySelector("head > title"))),Ao(X,N,b),X[ar]=A,qe(X),N=X;break e;case"link":var fe=XU("link","href",Q).get(N+(b.href||""));if(fe){for(var Ee=0;Ee<fe.length;Ee++)if(X=fe[Ee],X.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&X.getAttribute("rel")===(b.rel==null?null:b.rel)&&X.getAttribute("title")===(b.title==null?null:b.title)&&X.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){fe.splice(Ee,1);break t}}X=Q.createElement(N),Ao(X,N,b),Q.head.appendChild(X);break;case"meta":if(fe=XU("meta","content",Q).get(N+(b.content||""))){for(Ee=0;Ee<fe.length;Ee++)if(X=fe[Ee],X.getAttribute("content")===(b.content==null?null:""+b.content)&&X.getAttribute("name")===(b.name==null?null:b.name)&&X.getAttribute("property")===(b.property==null?null:b.property)&&X.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&X.getAttribute("charset")===(b.charSet==null?null:b.charSet)){fe.splice(Ee,1);break t}}X=Q.createElement(N),Ao(X,N,b),Q.head.appendChild(X);break;default:throw Error(n(468,N))}X[ar]=A,qe(X),N=X}A.stateNode=N}else YU(Q,A.type,A.stateNode);else A.stateNode=WU(Q,N,A.memoizedProps);else X!==N?(X===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):X.count--,N===null?YU(Q,A.type,A.stateNode):WU(Q,N,A.memoizedProps)):N===null&&A.stateNode!==null&&qj(A,A.memoizedProps,b.memoizedProps)}break;case 27:Cc(p,A),_c(A),N&512&&(zs||b===null||Sf(b,b.return)),b!==null&&N&4&&qj(A,A.memoizedProps,b.memoizedProps);break;case 5:if(Cc(p,A),_c(A),N&512&&(zs||b===null||Sf(b,b.return)),A.flags&32){Q=A.stateNode;try{ko(Q,"")}catch(ht){Na(A,A.return,ht)}}N&4&&A.stateNode!=null&&(Q=A.memoizedProps,qj(A,Q,b!==null?b.memoizedProps:Q)),N&1024&&(Xj=!0);break;case 6:if(Cc(p,A),_c(A),N&4){if(A.stateNode===null)throw Error(n(162));N=A.memoizedProps,b=A.stateNode;try{b.nodeValue=N}catch(ht){Na(A,A.return,ht)}}break;case 3:if(wN=null,Q=yd,yd=bN(p.containerInfo),Cc(p,A),yd=Q,_c(A),N&4&&b!==null&&b.memoizedState.isDehydrated)try{ay(p.containerInfo)}catch(ht){Na(A,A.return,ht)}Xj&&(Xj=!1,nU(A));break;case 4:N=yd,yd=bN(A.stateNode.containerInfo),Cc(p,A),_c(A),yd=N;break;case 12:Cc(p,A),_c(A);break;case 13:Cc(p,A),_c(A),A.child.flags&8192&&A.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(n3=be()),N&4&&(N=A.updateQueue,N!==null&&(A.updateQueue=null,Yj(A,N)));break;case 22:Q=A.memoizedState!==null;var Re=b!==null&&b.memoizedState!==null,ct=UA,St=zs;if(UA=ct||Q,zs=St||Re,Cc(p,A),zs=St,UA=ct,_c(A),N&8192)e:for(p=A.stateNode,p._visibility=Q?p._visibility&-2:p._visibility|1,Q&&(b===null||Re||UA||zs||vp(A)),b=null,p=A;;){if(p.tag===5||p.tag===26){if(b===null){Re=b=p;try{if(X=Re.stateNode,Q)fe=X.style,typeof fe.setProperty=="function"?fe.setProperty("display","none","important"):fe.display="none";else{Ee=Re.stateNode;var Ot=Re.memoizedProps.style,At=Ot!=null&&Ot.hasOwnProperty("display")?Ot.display:null;Ee.style.display=At==null||typeof At=="boolean"?"":(""+At).trim()}}catch(ht){Na(Re,Re.return,ht)}}}else if(p.tag===6){if(b===null){Re=p;try{Re.stateNode.nodeValue=Q?"":Re.memoizedProps}catch(ht){Na(Re,Re.return,ht)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===A)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===A)break e;for(;p.sibling===null;){if(p.return===null||p.return===A)break e;b===p&&(b=null),p=p.return}b===p&&(b=null),p.sibling.return=p.return,p=p.sibling}N&4&&(N=A.updateQueue,N!==null&&(b=N.retryQueue,b!==null&&(N.retryQueue=null,Yj(A,b))));break;case 19:Cc(p,A),_c(A),N&4&&(N=A.updateQueue,N!==null&&(A.updateQueue=null,Yj(A,N)));break;case 30:break;case 21:break;default:Cc(p,A),_c(A)}}function _c(A){var p=A.flags;if(p&2){try{for(var b,N=A.return;N!==null;){if(W7(N)){b=N;break}N=N.return}if(b==null)throw Error(n(160));switch(b.tag){case 27:var Q=b.stateNode,X=Kj(A);oN(A,X,Q);break;case 5:var fe=b.stateNode;b.flags&32&&(ko(fe,""),b.flags&=-33);var Ee=Kj(A);oN(A,Ee,fe);break;case 3:case 4:var Re=b.stateNode.containerInfo,ct=Kj(A);Wj(A,ct,Re);break;default:throw Error(n(161))}}catch(St){Na(A,A.return,St)}A.flags&=-3}p&4096&&(A.flags&=-4097)}function nU(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var p=A;nU(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),A=A.sibling}}function h0(A,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)J7(A,p.alternate,p),p=p.sibling}function vp(A){for(A=A.child;A!==null;){var p=A;switch(p.tag){case 0:case 11:case 14:case 15:A0(4,p,p.return),vp(p);break;case 1:Sf(p,p.return);var b=p.stateNode;typeof b.componentWillUnmount=="function"&&q7(p,p.return,b),vp(p);break;case 27:X1(p.stateNode);case 26:case 5:Sf(p,p.return),vp(p);break;case 22:p.memoizedState===null&&vp(p);break;case 30:vp(p);break;default:vp(p)}A=A.sibling}}function m0(A,p,b){for(b=b&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var N=p.alternate,Q=A,X=p,fe=X.flags;switch(X.tag){case 0:case 11:case 15:m0(Q,X,b),U1(4,X);break;case 1:if(m0(Q,X,b),N=X,Q=N.stateNode,typeof Q.componentDidMount=="function")try{Q.componentDidMount()}catch(ct){Na(N,N.return,ct)}if(N=X,Q=N.updateQueue,Q!==null){var Ee=N.stateNode;try{var Re=Q.shared.hiddenCallbacks;if(Re!==null)for(Q.shared.hiddenCallbacks=null,Q=0;Q<Re.length;Q++)Pn(Re[Q],Ee)}catch(ct){Na(N,N.return,ct)}}b&&fe&64&&G7(X),Q1(X,X.return);break;case 27:X7(X);case 26:case 5:m0(Q,X,b),b&&N===null&&fe&4&&K7(X),Q1(X,X.return);break;case 12:m0(Q,X,b);break;case 13:m0(Q,X,b),b&&fe&4&&tU(Q,X);break;case 22:X.memoizedState===null&&m0(Q,X,b),Q1(X,X.return);break;case 30:break;default:m0(Q,X,b)}p=p.sibling}}function Jj(A,p){var b=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(b=A.memoizedState.cachePool.pool),A=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(A=p.memoizedState.cachePool.pool),A!==b&&(A!=null&&A.refCount++,b!=null&&ip(b))}function Zj(A,p){A=null,p.alternate!==null&&(A=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==A&&(p.refCount++,A!=null&&ip(A))}function kf(A,p,b,N){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)aU(A,p,b,N),p=p.sibling}function aU(A,p,b,N){var Q=p.flags;switch(p.tag){case 0:case 11:case 15:kf(A,p,b,N),Q&2048&&U1(9,p);break;case 1:kf(A,p,b,N);break;case 3:kf(A,p,b,N),Q&2048&&(A=null,p.alternate!==null&&(A=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==A&&(p.refCount++,A!=null&&ip(A)));break;case 12:if(Q&2048){kf(A,p,b,N),A=p.stateNode;try{var X=p.memoizedProps,fe=X.id,Ee=X.onPostCommit;typeof Ee=="function"&&Ee(fe,p.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(Re){Na(p,p.return,Re)}}else kf(A,p,b,N);break;case 13:kf(A,p,b,N);break;case 23:break;case 22:X=p.stateNode,fe=p.alternate,p.memoizedState!==null?X._visibility&2?kf(A,p,b,N):H1(A,p):X._visibility&2?kf(A,p,b,N):(X._visibility|=2,gx(A,p,b,N,(p.subtreeFlags&10256)!==0)),Q&2048&&Jj(fe,p);break;case 24:kf(A,p,b,N),Q&2048&&Zj(p.alternate,p);break;default:kf(A,p,b,N)}}function gx(A,p,b,N,Q){for(Q=Q&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var X=A,fe=p,Ee=b,Re=N,ct=fe.flags;switch(fe.tag){case 0:case 11:case 15:gx(X,fe,Ee,Re,Q),U1(8,fe);break;case 23:break;case 22:var St=fe.stateNode;fe.memoizedState!==null?St._visibility&2?gx(X,fe,Ee,Re,Q):H1(X,fe):(St._visibility|=2,gx(X,fe,Ee,Re,Q)),Q&&ct&2048&&Jj(fe.alternate,fe);break;case 24:gx(X,fe,Ee,Re,Q),Q&&ct&2048&&Zj(fe.alternate,fe);break;default:gx(X,fe,Ee,Re,Q)}p=p.sibling}}function H1(A,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var b=A,N=p,Q=N.flags;switch(N.tag){case 22:H1(b,N),Q&2048&&Jj(N.alternate,N);break;case 24:H1(b,N),Q&2048&&Zj(N.alternate,N);break;default:H1(b,N)}p=p.sibling}}var V1=8192;function xx(A){if(A.subtreeFlags&V1)for(A=A.child;A!==null;)sU(A),A=A.sibling}function sU(A){switch(A.tag){case 26:xx(A),A.flags&V1&&A.memoizedState!==null&&uhe(yd,A.memoizedState,A.memoizedProps);break;case 5:xx(A);break;case 3:case 4:var p=yd;yd=bN(A.stateNode.containerInfo),xx(A),yd=p;break;case 22:A.memoizedState===null&&(p=A.alternate,p!==null&&p.memoizedState!==null?(p=V1,V1=16777216,xx(A),V1=p):xx(A));break;default:xx(A)}}function iU(A){var p=A.alternate;if(p!==null&&(A=p.child,A!==null)){p.child=null;do p=A.sibling,A.sibling=null,A=p;while(A!==null)}}function z1(A){var p=A.deletions;if((A.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var N=p[b];zi=N,lU(N,A)}iU(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)oU(A),A=A.sibling}function oU(A){switch(A.tag){case 0:case 11:case 15:z1(A),A.flags&2048&&A0(9,A,A.return);break;case 3:z1(A);break;case 12:z1(A);break;case 22:var p=A.stateNode;A.memoizedState!==null&&p._visibility&2&&(A.return===null||A.return.tag!==13)?(p._visibility&=-3,lN(A)):z1(A);break;default:z1(A)}}function lN(A){var p=A.deletions;if((A.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var N=p[b];zi=N,lU(N,A)}iU(A)}for(A=A.child;A!==null;){switch(p=A,p.tag){case 0:case 11:case 15:A0(8,p,p.return),lN(p);break;case 22:b=p.stateNode,b._visibility&2&&(b._visibility&=-3,lN(p));break;default:lN(p)}A=A.sibling}}function lU(A,p){for(;zi!==null;){var b=zi;switch(b.tag){case 0:case 11:case 15:A0(8,b,p);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var N=b.memoizedState.cachePool.pool;N!=null&&N.refCount++}break;case 24:ip(b.memoizedState.cache)}if(N=b.child,N!==null)N.return=b,zi=N;else e:for(b=A;zi!==null;){N=zi;var Q=N.sibling,X=N.return;if(Z7(N),N===b){zi=null;break e}if(Q!==null){Q.return=X,zi=Q;break e}zi=X}}}var _Ae={getCacheForType:function(A){var p=Qs(Hs),b=p.data.get(A);return b===void 0&&(b=A(),p.data.set(A,b)),b}},SAe=typeof WeakMap=="function"?WeakMap:Map,da=0,Ia=null,_n=null,Ln=0,fa=0,Sc=null,p0=!1,vx=!1,e3=!1,HA=0,Es=0,g0=0,bp=0,t3=0,Eu=0,bx=0,$1=null,Gl=null,r3=!1,n3=0,cN=1/0,uN=null,x0=null,fo=0,v0=null,yx=null,wx=0,a3=0,s3=null,cU=null,G1=0,i3=null;function kc(){if((da&2)!==0&&Ln!==0)return Ln&-Ln;if(V.T!==null){var A=IA;return A!==0?A:A3()}return vt()}function uU(){Eu===0&&(Eu=(Ln&536870912)===0||Un?ms():536870912);var A=wu.current;return A!==null&&(A.flags|=32),Eu}function jc(A,p,b){(A===Ia&&(fa===2||fa===9)||A.cancelPendingCommit!==null)&&(Ex(A,0),b0(A,Ln,Eu,!1)),Ba(A,b),((da&2)===0||A!==Ia)&&(A===Ia&&((da&2)===0&&(bp|=b),Es===4&&b0(A,Ln,Eu,!1)),jf(A))}function dU(A,p,b){if((da&6)!==0)throw Error(n(327));var N=!b&&(p&124)===0&&(p&A.expiredLanes)===0||Fn(A,p),Q=N?BAe(A,p):c3(A,p,!0),X=N;do{if(Q===0){vx&&!N&&b0(A,p,0,!1);break}else{if(b=A.current.alternate,X&&!kAe(b)){Q=c3(A,p,!1),X=!1;continue}if(Q===2){if(X=p,A.errorRecoveryDisabledLanes&X)var fe=0;else fe=A.pendingLanes&-536870913,fe=fe!==0?fe:fe&536870912?536870912:0;if(fe!==0){p=fe;e:{var Ee=A;Q=$1;var Re=Ee.current.memoizedState.isDehydrated;if(Re&&(Ex(Ee,fe).flags|=256),fe=c3(Ee,fe,!1),fe!==2){if(e3&&!Re){Ee.errorRecoveryDisabledLanes|=X,bp|=X,Q=4;break e}X=Gl,Gl=Q,X!==null&&(Gl===null?Gl=X:Gl.push.apply(Gl,X))}Q=fe}if(X=!1,Q!==2)continue}}if(Q===1){Ex(A,0),b0(A,p,0,!0);break}e:{switch(N=A,X=Q,X){case 0:case 1:throw Error(n(345));case 4:if((p&4194048)!==p)break;case 6:b0(N,p,Eu,!p0);break e;case 2:Gl=null;break;case 3:case 5:break;default:throw Error(n(329))}if((p&62914560)===p&&(Q=n3+300-be(),10<Q)){if(b0(N,p,Eu,!p0),$r(N,0,!0)!==0)break e;N.timeoutHandle=UU(fU.bind(null,N,b,Gl,uN,r3,p,Eu,bp,bx,p0,X,2,-0,0),Q);break e}fU(N,b,Gl,uN,r3,p,Eu,bp,bx,p0,X,0,-0,0)}}break}while(!0);jf(A)}function fU(A,p,b,N,Q,X,fe,Ee,Re,ct,St,Ot,At,ht){if(A.timeoutHandle=-1,Ot=p.subtreeFlags,(Ot&8192||(Ot&16785408)===16785408)&&(Z1={stylesheets:null,count:0,unsuspend:che},sU(p),Ot=dhe(),Ot!==null)){A.cancelPendingCommit=Ot(vU.bind(null,A,p,X,b,N,Q,fe,Ee,Re,St,1,At,ht)),b0(A,X,fe,!ct);return}vU(A,p,X,b,N,Q,fe,Ee,Re)}function kAe(A){for(var p=A;;){var b=p.tag;if((b===0||b===11||b===15)&&p.flags&16384&&(b=p.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var N=0;N<b.length;N++){var Q=b[N],X=Q.getSnapshot;Q=Q.value;try{if(!ii(X(),Q))return!1}catch{return!1}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===A)break;for(;p.sibling===null;){if(p.return===null||p.return===A)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function b0(A,p,b,N){p&=~t3,p&=~bp,A.suspendedLanes|=p,A.pingedLanes&=~p,N&&(A.warmLanes|=p),N=A.expirationTimes;for(var Q=p;0<Q;){var X=31-Pt(Q),fe=1<<X;N[X]=-1,Q&=~fe}b!==0&&gr(A,b,p)}function dN(){return(da&6)===0?(q1(0),!1):!0}function o3(){if(_n!==null){if(fa===0)var A=_n.return;else A=_n,md=li=null,cx(A),mx=null,R1=0,A=_n;for(;A!==null;)$7(A.alternate,A),A=A.return;_n=null}}function Ex(A,p){var b=A.timeoutHandle;b!==-1&&(A.timeoutHandle=-1,GAe(b)),b=A.cancelPendingCommit,b!==null&&(A.cancelPendingCommit=null,b()),o3(),Ia=A,_n=b=pu(A.current,null),Ln=p,fa=0,Sc=null,p0=!1,vx=Fn(A,p),e3=!1,bx=Eu=t3=bp=g0=Es=0,Gl=$1=null,r3=!1,(p&8)!==0&&(p|=p&32);var N=A.entangledLanes;if(N!==0)for(A=A.entanglements,N&=p;0<N;){var Q=31-Pt(N),X=1<<Q;p|=A[Q],N&=~X}return HA=p,Ql(),b}function AU(A,p){Br=null,V.H=JE,p===ge||p===ye?(p=We(),fa=3):p===xe?(p=We(),fa=4):fa=p===T7?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,Sc=p,_n===null&&(Es=1,nN(A,gn(p,A.current)))}function hU(){var A=V.H;return V.H=JE,A===null?JE:A}function mU(){var A=V.A;return V.A=_Ae,A}function l3(){Es=4,p0||(Ln&4194048)!==Ln&&wu.current!==null||(vx=!0),(g0&134217727)===0&&(bp&134217727)===0||Ia===null||b0(Ia,Ln,Eu,!1)}function c3(A,p,b){var N=da;da|=2;var Q=hU(),X=mU();(Ia!==A||Ln!==p)&&(uN=null,Ex(A,p)),p=!1;var fe=Es;e:do try{if(fa!==0&&_n!==null){var Ee=_n,Re=Sc;switch(fa){case 8:o3(),fe=6;break e;case 3:case 2:case 9:case 6:wu.current===null&&(p=!0);var ct=fa;if(fa=0,Sc=null,Nx(A,Ee,Re,ct),b&&vx){fe=0;break e}break;default:ct=fa,fa=0,Sc=null,Nx(A,Ee,Re,ct)}}jAe(),fe=Es;break}catch(St){AU(A,St)}while(!0);return p&&A.shellSuspendCounter++,md=li=null,da=N,V.H=Q,V.A=X,_n===null&&(Ia=null,Ln=0,Ql()),fe}function jAe(){for(;_n!==null;)pU(_n)}function BAe(A,p){var b=da;da|=2;var N=hU(),Q=mU();Ia!==A||Ln!==p?(uN=null,cN=be()+500,Ex(A,p)):vx=Fn(A,p);e:do try{if(fa!==0&&_n!==null){p=_n;var X=Sc;t:switch(fa){case 1:fa=0,Sc=null,Nx(A,p,X,1);break;case 2:case 9:if(Te(X)){fa=0,Sc=null,gU(p);break}p=function(){fa!==2&&fa!==9||Ia!==A||(fa=7),jf(A)},X.then(p,p);break e;case 3:fa=7;break e;case 4:fa=5;break e;case 7:Te(X)?(fa=0,Sc=null,gU(p)):(fa=0,Sc=null,Nx(A,p,X,7));break;case 5:var fe=null;switch(_n.tag){case 26:fe=_n.memoizedState;case 5:case 27:var Ee=_n;if(!fe||JU(fe)){fa=0,Sc=null;var Re=Ee.sibling;if(Re!==null)_n=Re;else{var ct=Ee.return;ct!==null?(_n=ct,fN(ct)):_n=null}break t}}fa=0,Sc=null,Nx(A,p,X,5);break;case 6:fa=0,Sc=null,Nx(A,p,X,6);break;case 8:o3(),Es=6;break e;default:throw Error(n(462))}}TAe();break}catch(St){AU(A,St)}while(!0);return md=li=null,V.H=N,V.A=Q,da=b,_n!==null?0:(Ia=null,Ln=0,Ql(),Es)}function TAe(){for(;_n!==null&&!ve();)pU(_n)}function pU(A){var p=V7(A.alternate,A,HA);A.memoizedProps=A.pendingProps,p===null?fN(A):_n=p}function gU(A){var p=A,b=p.alternate;switch(p.tag){case 15:case 0:p=R7(b,p,p.pendingProps,p.type,void 0,Ln);break;case 11:p=R7(b,p,p.pendingProps,p.type.render,p.ref,Ln);break;case 5:cx(p);default:$7(b,p),p=_n=rp(p,HA),p=V7(b,p,HA)}A.memoizedProps=A.pendingProps,p===null?fN(A):_n=p}function Nx(A,p,b,N){md=li=null,cx(p),mx=null,R1=0;var Q=p.return;try{if(bAe(A,Q,p,b,Ln)){Es=1,nN(A,gn(b,A.current)),_n=null;return}}catch(X){if(Q!==null)throw _n=Q,X;Es=1,nN(A,gn(b,A.current)),_n=null;return}p.flags&32768?(Un||N===1?A=!0:vx||(Ln&536870912)!==0?A=!1:(p0=A=!0,(N===2||N===9||N===3||N===6)&&(N=wu.current,N!==null&&N.tag===13&&(N.flags|=16384))),xU(p,A)):fN(p)}function fN(A){var p=A;do{if((p.flags&32768)!==0){xU(p,p0);return}A=p.return;var b=wAe(p.alternate,p,HA);if(b!==null){_n=b;return}if(p=p.sibling,p!==null){_n=p;return}_n=p=A}while(p!==null);Es===0&&(Es=5)}function xU(A,p){do{var b=EAe(A.alternate,A);if(b!==null){b.flags&=32767,_n=b;return}if(b=A.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!p&&(A=A.sibling,A!==null)){_n=A;return}_n=A=b}while(A!==null);Es=6,_n=null}function vU(A,p,b,N,Q,X,fe,Ee,Re){A.cancelPendingCommit=null;do AN();while(fo!==0);if((da&6)!==0)throw Error(n(327));if(p!==null){if(p===A.current)throw Error(n(177));if(X=p.lanes|p.childLanes,X|=ns,rn(A,b,X,fe,Ee,Re),A===Ia&&(_n=Ia=null,Ln=0),yx=p,v0=A,wx=b,a3=X,s3=Q,cU=N,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,DAe(Oe,function(){return NU(),null})):(A.callbackNode=null,A.callbackPriority=0),N=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||N){N=V.T,V.T=null,Q=q.p,q.p=2,fe=da,da|=4;try{NAe(A,p,b)}finally{da=fe,q.p=Q,V.T=N}}fo=1,bU(),yU(),wU()}}function bU(){if(fo===1){fo=0;var A=v0,p=yx,b=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||b){b=V.T,V.T=null;var N=q.p;q.p=2;var Q=da;da|=4;try{rU(p,A);var X=y3,fe=oo(A.containerInfo),Ee=X.focusedElem,Re=X.selectionRange;if(fe!==Ee&&Ee&&Ee.ownerDocument&&uf(Ee.ownerDocument.documentElement,Ee)){if(Re!==null&&_i(Ee)){var ct=Re.start,St=Re.end;if(St===void 0&&(St=ct),"selectionStart"in Ee)Ee.selectionStart=ct,Ee.selectionEnd=Math.min(St,Ee.value.length);else{var Ot=Ee.ownerDocument||document,At=Ot&&Ot.defaultView||window;if(At.getSelection){var ht=At.getSelection(),Gr=Ee.textContent.length,Dr=Math.min(Re.start,Gr),ya=Re.end===void 0?Dr:Math.min(Re.end,Gr);!ht.extend&&Dr>ya&&(fe=ya,ya=Dr,Dr=fe);var Xe=od(Ee,Dr),Ve=od(Ee,ya);if(Xe&&Ve&&(ht.rangeCount!==1||ht.anchorNode!==Xe.node||ht.anchorOffset!==Xe.offset||ht.focusNode!==Ve.node||ht.focusOffset!==Ve.offset)){var nt=Ot.createRange();nt.setStart(Xe.node,Xe.offset),ht.removeAllRanges(),Dr>ya?(ht.addRange(nt),ht.extend(Ve.node,Ve.offset)):(nt.setEnd(Ve.node,Ve.offset),ht.addRange(nt))}}}}for(Ot=[],ht=Ee;ht=ht.parentNode;)ht.nodeType===1&&Ot.push({element:ht,left:ht.scrollLeft,top:ht.scrollTop});for(typeof Ee.focus=="function"&&Ee.focus(),Ee=0;Ee<Ot.length;Ee++){var jt=Ot[Ee];jt.element.scrollLeft=jt.left,jt.element.scrollTop=jt.top}}CN=!!b3,y3=b3=null}finally{da=Q,q.p=N,V.T=b}}A.current=p,fo=2}}function yU(){if(fo===2){fo=0;var A=v0,p=yx,b=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||b){b=V.T,V.T=null;var N=q.p;q.p=2;var Q=da;da|=4;try{J7(A,p.alternate,p)}finally{da=Q,q.p=N,V.T=b}}fo=3}}function wU(){if(fo===4||fo===3){fo=0,le();var A=v0,p=yx,b=wx,N=cU;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?fo=5:(fo=0,yx=v0=null,EU(A,A.pendingLanes));var Q=A.pendingLanes;if(Q===0&&(x0=null),Je(b),p=p.stateNode,It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(xt,p,void 0,(p.current.flags&128)===128)}catch{}if(N!==null){p=V.T,Q=q.p,q.p=2,V.T=null;try{for(var X=A.onRecoverableError,fe=0;fe<N.length;fe++){var Ee=N[fe];X(Ee.value,{componentStack:Ee.stack})}}finally{V.T=p,q.p=Q}}(wx&3)!==0&&AN(),jf(A),Q=A.pendingLanes,(b&4194090)!==0&&(Q&42)!==0?A===i3?G1++:(G1=0,i3=A):G1=0,q1(0)}}function EU(A,p){(A.pooledCacheLanes&=p)===0&&(p=A.pooledCache,p!=null&&(A.pooledCache=null,ip(p)))}function AN(A){return bU(),yU(),wU(),NU()}function NU(){if(fo!==5)return!1;var A=v0,p=a3;a3=0;var b=Je(wx),N=V.T,Q=q.p;try{q.p=32>b?32:b,V.T=null,b=s3,s3=null;var X=v0,fe=wx;if(fo=0,yx=v0=null,wx=0,(da&6)!==0)throw Error(n(331));var Ee=da;if(da|=4,oU(X.current),aU(X,X.current,fe,b),da=Ee,q1(0,!1),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(xt,X)}catch{}return!0}finally{q.p=Q,V.T=N,EU(A,p)}}function CU(A,p,b){p=gn(b,p),p=Lj(A.stateNode,p,2),A=Tt(A,p,2),A!==null&&(Ba(A,2),jf(A))}function Na(A,p,b){if(A.tag===3)CU(A,A,b);else for(;p!==null;){if(p.tag===3){CU(p,A,b);break}else if(p.tag===1){var N=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(x0===null||!x0.has(N))){A=gn(b,A),b=j7(2),N=Tt(p,b,2),N!==null&&(B7(b,N,p,A),Ba(N,2),jf(N));break}}p=p.return}}function u3(A,p,b){var N=A.pingCache;if(N===null){N=A.pingCache=new SAe;var Q=new Set;N.set(p,Q)}else Q=N.get(p),Q===void 0&&(Q=new Set,N.set(p,Q));Q.has(b)||(e3=!0,Q.add(b),A=IAe.bind(null,A,p,b),p.then(A,A))}function IAe(A,p,b){var N=A.pingCache;N!==null&&N.delete(p),A.pingedLanes|=A.suspendedLanes&b,A.warmLanes&=~b,Ia===A&&(Ln&b)===b&&(Es===4||Es===3&&(Ln&62914560)===Ln&&300>be()-n3?(da&2)===0&&Ex(A,0):t3|=b,bx===Ln&&(bx=0)),jf(A)}function _U(A,p){p===0&&(p=pn()),A=cd(A,p),A!==null&&(Ba(A,p),jf(A))}function FAe(A){var p=A.memoizedState,b=0;p!==null&&(b=p.retryLane),_U(A,b)}function OAe(A,p){var b=0;switch(A.tag){case 13:var N=A.stateNode,Q=A.memoizedState;Q!==null&&(b=Q.retryLane);break;case 19:N=A.stateNode;break;case 22:N=A.stateNode._retryCache;break;default:throw Error(n(314))}N!==null&&N.delete(p),_U(A,b)}function DAe(A,p){return Se(A,p)}var hN=null,Cx=null,d3=!1,mN=!1,f3=!1,yp=0;function jf(A){A!==Cx&&A.next===null&&(Cx===null?hN=Cx=A:Cx=Cx.next=A),mN=!0,d3||(d3=!0,RAe())}function q1(A,p){if(!f3&&mN){f3=!0;do for(var b=!1,N=hN;N!==null;){if(A!==0){var Q=N.pendingLanes;if(Q===0)var X=0;else{var fe=N.suspendedLanes,Ee=N.pingedLanes;X=(1<<31-Pt(42|A)+1)-1,X&=Q&~(fe&~Ee),X=X&201326741?X&201326741|1:X?X|2:0}X!==0&&(b=!0,BU(N,X))}else X=Ln,X=$r(N,N===Ia?X:0,N.cancelPendingCommit!==null||N.timeoutHandle!==-1),(X&3)===0||Fn(N,X)||(b=!0,BU(N,X));N=N.next}while(b);f3=!1}}function PAe(){SU()}function SU(){mN=d3=!1;var A=0;yp!==0&&($Ae()&&(A=yp),yp=0);for(var p=be(),b=null,N=hN;N!==null;){var Q=N.next,X=kU(N,p);X===0?(N.next=null,b===null?hN=Q:b.next=Q,Q===null&&(Cx=b)):(b=N,(A!==0||(X&3)!==0)&&(mN=!0)),N=Q}q1(A)}function kU(A,p){for(var b=A.suspendedLanes,N=A.pingedLanes,Q=A.expirationTimes,X=A.pendingLanes&-62914561;0<X;){var fe=31-Pt(X),Ee=1<<fe,Re=Q[fe];Re===-1?((Ee&b)===0||(Ee&N)!==0)&&(Q[fe]=Pr(Ee,p)):Re<=p&&(A.expiredLanes|=Ee),X&=~Ee}if(p=Ia,b=Ln,b=$r(A,A===p?b:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),N=A.callbackNode,b===0||A===p&&(fa===2||fa===9)||A.cancelPendingCommit!==null)return N!==null&&N!==null&&ke(N),A.callbackNode=null,A.callbackPriority=0;if((b&3)===0||Fn(A,b)){if(p=b&-b,p===A.callbackPriority)return p;switch(N!==null&&ke(N),Je(b)){case 2:case 8:b=pe;break;case 32:b=Oe;break;case 268435456:b=Ge;break;default:b=Oe}return N=jU.bind(null,A),b=Se(b,N),A.callbackPriority=p,A.callbackNode=b,p}return N!==null&&N!==null&&ke(N),A.callbackPriority=2,A.callbackNode=null,2}function jU(A,p){if(fo!==0&&fo!==5)return A.callbackNode=null,A.callbackPriority=0,null;var b=A.callbackNode;if(AN()&&A.callbackNode!==b)return null;var N=Ln;return N=$r(A,A===Ia?N:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),N===0?null:(dU(A,N,p),kU(A,be()),A.callbackNode!=null&&A.callbackNode===b?jU.bind(null,A):null)}function BU(A,p){if(AN())return null;dU(A,p,!0)}function RAe(){qAe(function(){(da&6)!==0?Se(Ue,PAe):SU()})}function A3(){return yp===0&&(yp=ms()),yp}function TU(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:mc(""+A)}function IU(A,p){var b=p.ownerDocument.createElement("input");return b.name=p.name,b.value=p.value,A.id&&b.setAttribute("form",A.id),p.parentNode.insertBefore(b,p),A=new FormData(A),b.parentNode.removeChild(b),A}function LAe(A,p,b,N,Q){if(p==="submit"&&b&&b.stateNode===Q){var X=TU((Q[xr]||null).action),fe=N.submitter;fe&&(p=(p=fe[xr]||null)?TU(p.formAction):fe.getAttribute("formAction"),p!==null&&(X=p,fe=null));var Ee=new ou("action","action",null,N,Q);A.push({event:Ee,listeners:[{instance:null,listener:function(){if(N.defaultPrevented){if(yp!==0){var Re=fe?IU(Q,fe):new FormData(Q);yu(b,{pending:!0,data:Re,method:Q.method,action:X},null,Re)}}else typeof X=="function"&&(Ee.preventDefault(),Re=fe?IU(Q,fe):new FormData(Q),yu(b,{pending:!0,data:Re,method:Q.method,action:X},X,Re))},currentTarget:Q}]})}}for(var h3=0;h3<_A.length;h3++){var m3=_A[h3],MAe=m3.toLowerCase(),UAe=m3[0].toUpperCase()+m3.slice(1);Ka(MAe,"on"+UAe)}Ka(e0,"onAnimationEnd"),Ka(ff,"onAnimationIteration"),Ka(Af,"onAnimationStart"),Ka("dblclick","onDoubleClick"),Ka("focusin","onFocus"),Ka("focusout","onBlur"),Ka(hf,"onTransitionRun"),Ka(CA,"onTransitionStart"),Ka(t0,"onTransitionCancel"),Ka(mf,"onTransitionEnd"),$t("onMouseEnter",["mouseout","mouseover"]),$t("onMouseLeave",["mouseout","mouseover"]),$t("onPointerEnter",["pointerout","pointerover"]),$t("onPointerLeave",["pointerout","pointerover"]),Ft("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ft("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ft("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ft("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ft("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ft("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var K1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QAe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(K1));function FU(A,p){p=(p&4)!==0;for(var b=0;b<A.length;b++){var N=A[b],Q=N.event;N=N.listeners;e:{var X=void 0;if(p)for(var fe=N.length-1;0<=fe;fe--){var Ee=N[fe],Re=Ee.instance,ct=Ee.currentTarget;if(Ee=Ee.listener,Re!==X&&Q.isPropagationStopped())break e;X=Ee,Q.currentTarget=ct;try{X(Q)}catch(St){rN(St)}Q.currentTarget=null,X=Re}else for(fe=0;fe<N.length;fe++){if(Ee=N[fe],Re=Ee.instance,ct=Ee.currentTarget,Ee=Ee.listener,Re!==X&&Q.isPropagationStopped())break e;X=Ee,Q.currentTarget=ct;try{X(Q)}catch(St){rN(St)}Q.currentTarget=null,X=Re}}}}function Sn(A,p){var b=p[Zr];b===void 0&&(b=p[Zr]=new Set);var N=A+"__bubble";b.has(N)||(OU(p,A,2,!1),b.add(N))}function p3(A,p,b){var N=0;p&&(N|=4),OU(b,A,N,p)}var pN="_reactListening"+Math.random().toString(36).slice(2);function g3(A){if(!A[pN]){A[pN]=!0,rt.forEach(function(b){b!=="selectionchange"&&(QAe.has(b)||p3(b,!1,A),p3(b,!0,A))});var p=A.nodeType===9?A:A.ownerDocument;p===null||p[pN]||(p[pN]=!0,p3("selectionchange",!1,p))}}function OU(A,p,b,N){switch(a9(p)){case 2:var Q=hhe;break;case 8:Q=mhe;break;default:Q=T3}b=Q.bind(null,p,b,A),Q=void 0,!io||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(Q=!0),N?Q!==void 0?A.addEventListener(p,b,{capture:!0,passive:Q}):A.addEventListener(p,b,!0):Q!==void 0?A.addEventListener(p,b,{passive:Q}):A.addEventListener(p,b,!1)}function x3(A,p,b,N,Q){var X=N;if((p&1)===0&&(p&2)===0&&N!==null)e:for(;;){if(N===null)return;var fe=N.tag;if(fe===3||fe===4){var Ee=N.stateNode.containerInfo;if(Ee===Q)break;if(fe===4)for(fe=N.return;fe!==null;){var Re=fe.tag;if((Re===3||Re===4)&&fe.stateNode.containerInfo===Q)return;fe=fe.return}for(;Ee!==null;){if(fe=je(Ee),fe===null)return;if(Re=fe.tag,Re===5||Re===6||Re===26||Re===27){N=X=fe;continue e}Ee=Ee.parentNode}}N=N.return}Wh(function(){var ct=X,St=ca(b),Ot=[];e:{var At=ld.get(A);if(At!==void 0){var ht=ou,Gr=A;switch(A){case"keypress":if(To(b)===0)break e;case"keydown":case"keyup":ht=vc;break;case"focusin":Gr="focus",ht=cu;break;case"focusout":Gr="blur",ht=cu;break;case"beforeblur":case"afterblur":ht=cu;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ht=vs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ht=lu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ht=sf;break;case e0:case ff:case Af:ht=rf;break;case mf:ht=he;break;case"scroll":case"scrollend":ht=vA;break;case"wheel":ht=Me;break;case"copy":case"cut":case"paste":ht=nf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ht=id;break;case"toggle":case"beforetoggle":ht=yt}var Dr=(p&4)!==0,ya=!Dr&&(A==="scroll"||A==="scrollend"),Xe=Dr?At!==null?At+"Capture":null:At;Dr=[];for(var Ve=ct,nt;Ve!==null;){var jt=Ve;if(nt=jt.stateNode,jt=jt.tag,jt!==5&&jt!==26&&jt!==27||nt===null||Xe===null||(jt=Li(Ve,Xe),jt!=null&&Dr.push(W1(Ve,jt,nt))),ya)break;Ve=Ve.return}0<Dr.length&&(At=new ht(At,Gr,null,b,St),Ot.push({event:At,listeners:Dr}))}}if((p&7)===0){e:{if(At=A==="mouseover"||A==="pointerover",ht=A==="mouseout"||A==="pointerout",At&&b!==Fl&&(Gr=b.relatedTarget||b.fromElement)&&(je(Gr)||Gr[Wr]))break e;if((ht||At)&&(At=St.window===St?St:(At=St.ownerDocument)?At.defaultView||At.parentWindow:window,ht?(Gr=b.relatedTarget||b.toElement,ht=ct,Gr=Gr?je(Gr):null,Gr!==null&&(ya=s(Gr),Dr=Gr.tag,Gr!==ya||Dr!==5&&Dr!==27&&Dr!==6)&&(Gr=null)):(ht=null,Gr=ct),ht!==Gr)){if(Dr=vs,jt="onMouseLeave",Xe="onMouseEnter",Ve="mouse",(A==="pointerout"||A==="pointerover")&&(Dr=id,jt="onPointerLeave",Xe="onPointerEnter",Ve="pointer"),ya=ht==null?At:Ye(ht),nt=Gr==null?At:Ye(Gr),At=new Dr(jt,Ve+"leave",ht,b,St),At.target=ya,At.relatedTarget=nt,jt=null,je(St)===ct&&(Dr=new Dr(Xe,Ve+"enter",Gr,b,St),Dr.target=nt,Dr.relatedTarget=ya,jt=Dr),ya=jt,ht&&Gr)t:{for(Dr=ht,Xe=Gr,Ve=0,nt=Dr;nt;nt=_x(nt))Ve++;for(nt=0,jt=Xe;jt;jt=_x(jt))nt++;for(;0<Ve-nt;)Dr=_x(Dr),Ve--;for(;0<nt-Ve;)Xe=_x(Xe),nt--;for(;Ve--;){if(Dr===Xe||Xe!==null&&Dr===Xe.alternate)break t;Dr=_x(Dr),Xe=_x(Xe)}Dr=null}else Dr=null;ht!==null&&DU(Ot,At,ht,Dr,!1),Gr!==null&&ya!==null&&DU(Ot,ya,Gr,Dr,!0)}}e:{if(At=ct?Ye(ct):window,ht=At.nodeName&&At.nodeName.toLowerCase(),ht==="select"||ht==="input"&&At.type==="file")var mr=Jh;else if(ta(At))if(yA)mr=tx;else{mr=y1;var En=Fo}else ht=At.nodeName,!ht||ht.toLowerCase()!=="input"||At.type!=="checkbox"&&At.type!=="radio"?ct&&gA(ct.elementType)&&(mr=Jh):mr=ep;if(mr&&(mr=mr(A,ct))){Ml(Ot,mr,b,St);break e}En&&En(A,At,ct),A==="focusout"&&ct&&At.type==="number"&&ct.memoizedProps.value!=null&&au(At,"number",At.value)}switch(En=ct?Ye(ct):window,A){case"focusin":(ta(En)||En.contentEditable==="true")&&(Oo=En,bc=ct,hu=null);break;case"focusout":hu=bc=Oo=null;break;case"mousedown":yc=!0;break;case"contextmenu":case"mouseup":case"dragend":yc=!1,qa(Ot,b,St);break;case"selectionchange":if(df)break;case"keydown":case"keyup":qa(Ot,b,St)}var Nr;if(Zt)e:{switch(A){case"compositionstart":var Rr="onCompositionStart";break e;case"compositionend":Rr="onCompositionEnd";break e;case"compositionupdate":Rr="onCompositionUpdate";break e}Rr=void 0}else Or?ot(A,b)&&(Rr="onCompositionEnd"):A==="keydown"&&b.keyCode===229&&(Rr="onCompositionStart");Rr&&(ue&&b.locale!=="ko"&&(Or||Rr!=="onCompositionStart"?Rr==="onCompositionEnd"&&Or&&(Nr=xA()):(Bo=St,iu="value"in Bo?Bo.value:Bo.textContent,Or=!0)),En=gN(ct,Rr),0<En.length&&(Rr=new nd(Rr,A,null,b,St),Ot.push({event:Rr,listeners:En}),Nr?Rr.data=Nr:(Nr=Ut(b),Nr!==null&&(Rr.data=Nr)))),(Nr=ne?wn(A,b):Xr(A,b))&&(Rr=gN(ct,"onBeforeInput"),0<Rr.length&&(En=new nd("onBeforeInput","beforeinput",null,b,St),Ot.push({event:En,listeners:Rr}),En.data=Nr)),LAe(Ot,A,ct,b,St)}FU(Ot,p)})}function W1(A,p,b){return{instance:A,listener:p,currentTarget:b}}function gN(A,p){for(var b=p+"Capture",N=[];A!==null;){var Q=A,X=Q.stateNode;if(Q=Q.tag,Q!==5&&Q!==26&&Q!==27||X===null||(Q=Li(A,b),Q!=null&&N.unshift(W1(A,Q,X)),Q=Li(A,p),Q!=null&&N.push(W1(A,Q,X))),A.tag===3)return N;A=A.return}return[]}function _x(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function DU(A,p,b,N,Q){for(var X=p._reactName,fe=[];b!==null&&b!==N;){var Ee=b,Re=Ee.alternate,ct=Ee.stateNode;if(Ee=Ee.tag,Re!==null&&Re===N)break;Ee!==5&&Ee!==26&&Ee!==27||ct===null||(Re=ct,Q?(ct=Li(b,X),ct!=null&&fe.unshift(W1(b,ct,Re))):Q||(ct=Li(b,X),ct!=null&&fe.push(W1(b,ct,Re)))),b=b.return}fe.length!==0&&A.push({event:p,listeners:fe})}var HAe=/\r\n?/g,VAe=/\u0000|\uFFFD/g;function PU(A){return(typeof A=="string"?A:""+A).replace(HAe,`
`).replace(VAe,"")}function RU(A,p){return p=PU(p),PU(A)===p}function xN(){}function ba(A,p,b,N,Q,X){switch(b){case"children":typeof N=="string"?p==="body"||p==="textarea"&&N===""||ko(A,N):(typeof N=="number"||typeof N=="bigint")&&p!=="body"&&ko(A,""+N);break;case"className":ln(A,"class",N);break;case"tabIndex":ln(A,"tabindex",N);break;case"dir":case"role":case"viewBox":case"width":case"height":ln(A,b,N);break;case"style":pA(A,N,X);break;case"data":if(p!=="object"){ln(A,"data",N);break}case"src":case"href":if(N===""&&(p!=="a"||b!=="href")){A.removeAttribute(b);break}if(N==null||typeof N=="function"||typeof N=="symbol"||typeof N=="boolean"){A.removeAttribute(b);break}N=mc(""+N),A.setAttribute(b,N);break;case"action":case"formAction":if(typeof N=="function"){A.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof X=="function"&&(b==="formAction"?(p!=="input"&&ba(A,p,"name",Q.name,Q,null),ba(A,p,"formEncType",Q.formEncType,Q,null),ba(A,p,"formMethod",Q.formMethod,Q,null),ba(A,p,"formTarget",Q.formTarget,Q,null)):(ba(A,p,"encType",Q.encType,Q,null),ba(A,p,"method",Q.method,Q,null),ba(A,p,"target",Q.target,Q,null)));if(N==null||typeof N=="symbol"||typeof N=="boolean"){A.removeAttribute(b);break}N=mc(""+N),A.setAttribute(b,N);break;case"onClick":N!=null&&(A.onclick=xN);break;case"onScroll":N!=null&&Sn("scroll",A);break;case"onScrollEnd":N!=null&&Sn("scrollend",A);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(n(61));if(b=N.__html,b!=null){if(Q.children!=null)throw Error(n(60));A.innerHTML=b}}break;case"multiple":A.multiple=N&&typeof N!="function"&&typeof N!="symbol";break;case"muted":A.muted=N&&typeof N!="function"&&typeof N!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(N==null||typeof N=="function"||typeof N=="boolean"||typeof N=="symbol"){A.removeAttribute("xlink:href");break}b=mc(""+N),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":N!=null&&typeof N!="function"&&typeof N!="symbol"?A.setAttribute(b,""+N):A.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":N&&typeof N!="function"&&typeof N!="symbol"?A.setAttribute(b,""):A.removeAttribute(b);break;case"capture":case"download":N===!0?A.setAttribute(b,""):N!==!1&&N!=null&&typeof N!="function"&&typeof N!="symbol"?A.setAttribute(b,N):A.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":N!=null&&typeof N!="function"&&typeof N!="symbol"&&!isNaN(N)&&1<=N?A.setAttribute(b,N):A.removeAttribute(b);break;case"rowSpan":case"start":N==null||typeof N=="function"||typeof N=="symbol"||isNaN(N)?A.removeAttribute(b):A.setAttribute(b,N);break;case"popover":Sn("beforetoggle",A),Sn("toggle",A),on(A,"popover",N);break;case"xlinkActuate":An(A,"http://www.w3.org/1999/xlink","xlink:actuate",N);break;case"xlinkArcrole":An(A,"http://www.w3.org/1999/xlink","xlink:arcrole",N);break;case"xlinkRole":An(A,"http://www.w3.org/1999/xlink","xlink:role",N);break;case"xlinkShow":An(A,"http://www.w3.org/1999/xlink","xlink:show",N);break;case"xlinkTitle":An(A,"http://www.w3.org/1999/xlink","xlink:title",N);break;case"xlinkType":An(A,"http://www.w3.org/1999/xlink","xlink:type",N);break;case"xmlBase":An(A,"http://www.w3.org/XML/1998/namespace","xml:base",N);break;case"xmlLang":An(A,"http://www.w3.org/XML/1998/namespace","xml:lang",N);break;case"xmlSpace":An(A,"http://www.w3.org/XML/1998/namespace","xml:space",N);break;case"is":on(A,"is",N);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=hc.get(b)||b,on(A,b,N))}}function v3(A,p,b,N,Q,X){switch(b){case"style":pA(A,N,X);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(n(61));if(b=N.__html,b!=null){if(Q.children!=null)throw Error(n(60));A.innerHTML=b}}break;case"children":typeof N=="string"?ko(A,N):(typeof N=="number"||typeof N=="bigint")&&ko(A,""+N);break;case"onScroll":N!=null&&Sn("scroll",A);break;case"onScrollEnd":N!=null&&Sn("scrollend",A);break;case"onClick":N!=null&&(A.onclick=xN);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!it.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(Q=b.endsWith("Capture"),p=b.slice(2,Q?b.length-7:void 0),X=A[xr]||null,X=X!=null?X[b]:null,typeof X=="function"&&A.removeEventListener(p,X,Q),typeof N=="function")){typeof X!="function"&&X!==null&&(b in A?A[b]=null:A.hasAttribute(b)&&A.removeAttribute(b)),A.addEventListener(p,N,Q);break e}b in A?A[b]=N:N===!0?A.setAttribute(b,""):on(A,b,N)}}}function Ao(A,p,b){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Sn("error",A),Sn("load",A);var N=!1,Q=!1,X;for(X in b)if(b.hasOwnProperty(X)){var fe=b[X];if(fe!=null)switch(X){case"src":N=!0;break;case"srcSet":Q=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,p));default:ba(A,p,X,fe,b,null)}}Q&&ba(A,p,"srcSet",b.srcSet,b,null),N&&ba(A,p,"src",b.src,b,null);return;case"input":Sn("invalid",A);var Ee=X=fe=Q=null,Re=null,ct=null;for(N in b)if(b.hasOwnProperty(N)){var St=b[N];if(St!=null)switch(N){case"name":Q=St;break;case"type":fe=St;break;case"checked":Re=St;break;case"defaultChecked":ct=St;break;case"value":X=St;break;case"defaultValue":Ee=St;break;case"children":case"dangerouslySetInnerHTML":if(St!=null)throw Error(n(137,p));break;default:ba(A,p,N,St,b,null)}}nu(A,X,Ee,Re,ct,fe,Q,!1),ru(A);return;case"select":Sn("invalid",A),N=fe=X=null;for(Q in b)if(b.hasOwnProperty(Q)&&(Ee=b[Q],Ee!=null))switch(Q){case"value":X=Ee;break;case"defaultValue":fe=Ee;break;case"multiple":N=Ee;default:ba(A,p,Q,Ee,b,null)}p=X,b=fe,A.multiple=!!N,p!=null?Il(A,!!N,p,!1):b!=null&&Il(A,!!N,b,!0);return;case"textarea":Sn("invalid",A),X=Q=N=null;for(fe in b)if(b.hasOwnProperty(fe)&&(Ee=b[fe],Ee!=null))switch(fe){case"value":N=Ee;break;case"defaultValue":Q=Ee;break;case"children":X=Ee;break;case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(n(91));break;default:ba(A,p,fe,Ee,b,null)}su(A,N,Q,X),ru(A);return;case"option":for(Re in b)if(b.hasOwnProperty(Re)&&(N=b[Re],N!=null))switch(Re){case"selected":A.selected=N&&typeof N!="function"&&typeof N!="symbol";break;default:ba(A,p,Re,N,b,null)}return;case"dialog":Sn("beforetoggle",A),Sn("toggle",A),Sn("cancel",A),Sn("close",A);break;case"iframe":case"object":Sn("load",A);break;case"video":case"audio":for(N=0;N<K1.length;N++)Sn(K1[N],A);break;case"image":Sn("error",A),Sn("load",A);break;case"details":Sn("toggle",A);break;case"embed":case"source":case"link":Sn("error",A),Sn("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ct in b)if(b.hasOwnProperty(ct)&&(N=b[ct],N!=null))switch(ct){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,p));default:ba(A,p,ct,N,b,null)}return;default:if(gA(p)){for(St in b)b.hasOwnProperty(St)&&(N=b[St],N!==void 0&&v3(A,p,St,N,b,void 0));return}}for(Ee in b)b.hasOwnProperty(Ee)&&(N=b[Ee],N!=null&&ba(A,p,Ee,N,b,null))}function zAe(A,p,b,N){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var Q=null,X=null,fe=null,Ee=null,Re=null,ct=null,St=null;for(ht in b){var Ot=b[ht];if(b.hasOwnProperty(ht)&&Ot!=null)switch(ht){case"checked":break;case"value":break;case"defaultValue":Re=Ot;default:N.hasOwnProperty(ht)||ba(A,p,ht,null,N,Ot)}}for(var At in N){var ht=N[At];if(Ot=b[At],N.hasOwnProperty(At)&&(ht!=null||Ot!=null))switch(At){case"type":X=ht;break;case"name":Q=ht;break;case"checked":ct=ht;break;case"defaultChecked":St=ht;break;case"value":fe=ht;break;case"defaultValue":Ee=ht;break;case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(n(137,p));break;default:ht!==Ot&&ba(A,p,At,ht,N,Ot)}}Ni(A,fe,Ee,Re,ct,St,X,Q);return;case"select":ht=fe=Ee=At=null;for(X in b)if(Re=b[X],b.hasOwnProperty(X)&&Re!=null)switch(X){case"value":break;case"multiple":ht=Re;default:N.hasOwnProperty(X)||ba(A,p,X,null,N,Re)}for(Q in N)if(X=N[Q],Re=b[Q],N.hasOwnProperty(Q)&&(X!=null||Re!=null))switch(Q){case"value":At=X;break;case"defaultValue":Ee=X;break;case"multiple":fe=X;default:X!==Re&&ba(A,p,Q,X,N,Re)}p=Ee,b=fe,N=ht,At!=null?Il(A,!!b,At,!1):!!N!=!!b&&(p!=null?Il(A,!!b,p,!0):Il(A,!!b,b?[]:"",!1));return;case"textarea":ht=At=null;for(Ee in b)if(Q=b[Ee],b.hasOwnProperty(Ee)&&Q!=null&&!N.hasOwnProperty(Ee))switch(Ee){case"value":break;case"children":break;default:ba(A,p,Ee,null,N,Q)}for(fe in N)if(Q=N[fe],X=b[fe],N.hasOwnProperty(fe)&&(Q!=null||X!=null))switch(fe){case"value":At=Q;break;case"defaultValue":ht=Q;break;case"children":break;case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(91));break;default:Q!==X&&ba(A,p,fe,Q,N,X)}Vn(A,At,ht);return;case"option":for(var Gr in b)if(At=b[Gr],b.hasOwnProperty(Gr)&&At!=null&&!N.hasOwnProperty(Gr))switch(Gr){case"selected":A.selected=!1;break;default:ba(A,p,Gr,null,N,At)}for(Re in N)if(At=N[Re],ht=b[Re],N.hasOwnProperty(Re)&&At!==ht&&(At!=null||ht!=null))switch(Re){case"selected":A.selected=At&&typeof At!="function"&&typeof At!="symbol";break;default:ba(A,p,Re,At,N,ht)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Dr in b)At=b[Dr],b.hasOwnProperty(Dr)&&At!=null&&!N.hasOwnProperty(Dr)&&ba(A,p,Dr,null,N,At);for(ct in N)if(At=N[ct],ht=b[ct],N.hasOwnProperty(ct)&&At!==ht&&(At!=null||ht!=null))switch(ct){case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(n(137,p));break;default:ba(A,p,ct,At,N,ht)}return;default:if(gA(p)){for(var ya in b)At=b[ya],b.hasOwnProperty(ya)&&At!==void 0&&!N.hasOwnProperty(ya)&&v3(A,p,ya,void 0,N,At);for(St in N)At=N[St],ht=b[St],!N.hasOwnProperty(St)||At===ht||At===void 0&&ht===void 0||v3(A,p,St,At,N,ht);return}}for(var Xe in b)At=b[Xe],b.hasOwnProperty(Xe)&&At!=null&&!N.hasOwnProperty(Xe)&&ba(A,p,Xe,null,N,At);for(Ot in N)At=N[Ot],ht=b[Ot],!N.hasOwnProperty(Ot)||At===ht||At==null&&ht==null||ba(A,p,Ot,At,N,ht)}var b3=null,y3=null;function vN(A){return A.nodeType===9?A:A.ownerDocument}function LU(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function MU(A,p){if(A===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&p==="foreignObject"?0:A}function w3(A,p){return A==="textarea"||A==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var E3=null;function $Ae(){var A=window.event;return A&&A.type==="popstate"?A===E3?!1:(E3=A,!0):(E3=null,!1)}var UU=typeof setTimeout=="function"?setTimeout:void 0,GAe=typeof clearTimeout=="function"?clearTimeout:void 0,QU=typeof Promise=="function"?Promise:void 0,qAe=typeof queueMicrotask=="function"?queueMicrotask:typeof QU<"u"?function(A){return QU.resolve(null).then(A).catch(KAe)}:UU;function KAe(A){setTimeout(function(){throw A})}function y0(A){return A==="head"}function HU(A,p){var b=p,N=0,Q=0;do{var X=b.nextSibling;if(A.removeChild(b),X&&X.nodeType===8)if(b=X.data,b==="/$"){if(0<N&&8>N){b=N;var fe=A.ownerDocument;if(b&1&&X1(fe.documentElement),b&2&&X1(fe.body),b&4)for(b=fe.head,X1(b),fe=b.firstChild;fe;){var Ee=fe.nextSibling,Re=fe.nodeName;fe[_e]||Re==="SCRIPT"||Re==="STYLE"||Re==="LINK"&&fe.rel.toLowerCase()==="stylesheet"||b.removeChild(fe),fe=Ee}}if(Q===0){A.removeChild(X),ay(p);return}Q--}else b==="$"||b==="$?"||b==="$!"?Q++:N=b.charCodeAt(0)-48;else N=0;b=X}while(b);ay(p)}function N3(A){var p=A.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var b=p;switch(p=p.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":N3(b),Ne(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}A.removeChild(b)}}function WAe(A,p,b,N){for(;A.nodeType===1;){var Q=b;if(A.nodeName.toLowerCase()!==p.toLowerCase()){if(!N&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(N){if(!A[_e])switch(p){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(X=A.getAttribute("rel"),X==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(X!==Q.rel||A.getAttribute("href")!==(Q.href==null||Q.href===""?null:Q.href)||A.getAttribute("crossorigin")!==(Q.crossOrigin==null?null:Q.crossOrigin)||A.getAttribute("title")!==(Q.title==null?null:Q.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(X=A.getAttribute("src"),(X!==(Q.src==null?null:Q.src)||A.getAttribute("type")!==(Q.type==null?null:Q.type)||A.getAttribute("crossorigin")!==(Q.crossOrigin==null?null:Q.crossOrigin))&&X&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(p==="input"&&A.type==="hidden"){var X=Q.name==null?null:""+Q.name;if(Q.type==="hidden"&&A.getAttribute("name")===X)return A}else return A;if(A=wd(A.nextSibling),A===null)break}return null}function XAe(A,p,b){if(p==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!b||(A=wd(A.nextSibling),A===null))return null;return A}function C3(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function YAe(A,p){var b=A.ownerDocument;if(A.data!=="$?"||b.readyState==="complete")p();else{var N=function(){p(),b.removeEventListener("DOMContentLoaded",N)};b.addEventListener("DOMContentLoaded",N),A._reactRetry=N}}function wd(A){for(;A!=null;A=A.nextSibling){var p=A.nodeType;if(p===1||p===3)break;if(p===8){if(p=A.data,p==="$"||p==="$!"||p==="$?"||p==="F!"||p==="F")break;if(p==="/$")return null}}return A}var _3=null;function VU(A){A=A.previousSibling;for(var p=0;A;){if(A.nodeType===8){var b=A.data;if(b==="$"||b==="$!"||b==="$?"){if(p===0)return A;p--}else b==="/$"&&p++}A=A.previousSibling}return null}function zU(A,p,b){switch(p=vN(b),A){case"html":if(A=p.documentElement,!A)throw Error(n(452));return A;case"head":if(A=p.head,!A)throw Error(n(453));return A;case"body":if(A=p.body,!A)throw Error(n(454));return A;default:throw Error(n(451))}}function X1(A){for(var p=A.attributes;p.length;)A.removeAttributeNode(p[0]);Ne(A)}var Nu=new Map,$U=new Set;function bN(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var VA=q.d;q.d={f:JAe,r:ZAe,D:ehe,C:the,L:rhe,m:nhe,X:she,S:ahe,M:ihe};function JAe(){var A=VA.f(),p=dN();return A||p}function ZAe(A){var p=Fe(A);p!==null&&p.tag===5&&p.type==="form"?pp(p):VA.r(A)}var Sx=typeof document>"u"?null:document;function GU(A,p,b){var N=Sx;if(N&&typeof p=="string"&&p){var Q=On(p);Q='link[rel="'+A+'"][href="'+Q+'"]',typeof b=="string"&&(Q+='[crossorigin="'+b+'"]'),$U.has(Q)||($U.add(Q),A={rel:A,crossOrigin:b,href:p},N.querySelector(Q)===null&&(p=N.createElement("link"),Ao(p,"link",A),qe(p),N.head.appendChild(p)))}}function ehe(A){VA.D(A),GU("dns-prefetch",A,null)}function the(A,p){VA.C(A,p),GU("preconnect",A,p)}function rhe(A,p,b){VA.L(A,p,b);var N=Sx;if(N&&A&&p){var Q='link[rel="preload"][as="'+On(p)+'"]';p==="image"&&b&&b.imageSrcSet?(Q+='[imagesrcset="'+On(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(Q+='[imagesizes="'+On(b.imageSizes)+'"]')):Q+='[href="'+On(A)+'"]';var X=Q;switch(p){case"style":X=kx(A);break;case"script":X=jx(A)}Nu.has(X)||(A=d({rel:"preload",href:p==="image"&&b&&b.imageSrcSet?void 0:A,as:p},b),Nu.set(X,A),N.querySelector(Q)!==null||p==="style"&&N.querySelector(Y1(X))||p==="script"&&N.querySelector(J1(X))||(p=N.createElement("link"),Ao(p,"link",A),qe(p),N.head.appendChild(p)))}}function nhe(A,p){VA.m(A,p);var b=Sx;if(b&&A){var N=p&&typeof p.as=="string"?p.as:"script",Q='link[rel="modulepreload"][as="'+On(N)+'"][href="'+On(A)+'"]',X=Q;switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":X=jx(A)}if(!Nu.has(X)&&(A=d({rel:"modulepreload",href:A},p),Nu.set(X,A),b.querySelector(Q)===null)){switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(J1(X)))return}N=b.createElement("link"),Ao(N,"link",A),qe(N),b.head.appendChild(N)}}}function ahe(A,p,b){VA.S(A,p,b);var N=Sx;if(N&&A){var Q=ft(N).hoistableStyles,X=kx(A);p=p||"default";var fe=Q.get(X);if(!fe){var Ee={loading:0,preload:null};if(fe=N.querySelector(Y1(X)))Ee.loading=5;else{A=d({rel:"stylesheet",href:A,"data-precedence":p},b),(b=Nu.get(X))&&S3(A,b);var Re=fe=N.createElement("link");qe(Re),Ao(Re,"link",A),Re._p=new Promise(function(ct,St){Re.onload=ct,Re.onerror=St}),Re.addEventListener("load",function(){Ee.loading|=1}),Re.addEventListener("error",function(){Ee.loading|=2}),Ee.loading|=4,yN(fe,p,N)}fe={type:"stylesheet",instance:fe,count:1,state:Ee},Q.set(X,fe)}}}function she(A,p){VA.X(A,p);var b=Sx;if(b&&A){var N=ft(b).hoistableScripts,Q=jx(A),X=N.get(Q);X||(X=b.querySelector(J1(Q)),X||(A=d({src:A,async:!0},p),(p=Nu.get(Q))&&k3(A,p),X=b.createElement("script"),qe(X),Ao(X,"link",A),b.head.appendChild(X)),X={type:"script",instance:X,count:1,state:null},N.set(Q,X))}}function ihe(A,p){VA.M(A,p);var b=Sx;if(b&&A){var N=ft(b).hoistableScripts,Q=jx(A),X=N.get(Q);X||(X=b.querySelector(J1(Q)),X||(A=d({src:A,async:!0,type:"module"},p),(p=Nu.get(Q))&&k3(A,p),X=b.createElement("script"),qe(X),Ao(X,"link",A),b.head.appendChild(X)),X={type:"script",instance:X,count:1,state:null},N.set(Q,X))}}function qU(A,p,b,N){var Q=(Q=te.current)?bN(Q):null;if(!Q)throw Error(n(446));switch(A){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(p=kx(b.href),b=ft(Q).hoistableStyles,N=b.get(p),N||(N={type:"style",instance:null,count:0,state:null},b.set(p,N)),N):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){A=kx(b.href);var X=ft(Q).hoistableStyles,fe=X.get(A);if(fe||(Q=Q.ownerDocument||Q,fe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},X.set(A,fe),(X=Q.querySelector(Y1(A)))&&!X._p&&(fe.instance=X,fe.state.loading=5),Nu.has(A)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},Nu.set(A,b),X||ohe(Q,A,b,fe.state))),p&&N===null)throw Error(n(528,""));return fe}if(p&&N!==null)throw Error(n(529,""));return null;case"script":return p=b.async,b=b.src,typeof b=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=jx(b),b=ft(Q).hoistableScripts,N=b.get(p),N||(N={type:"script",instance:null,count:0,state:null},b.set(p,N)),N):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,A))}}function kx(A){return'href="'+On(A)+'"'}function Y1(A){return'link[rel="stylesheet"]['+A+"]"}function KU(A){return d({},A,{"data-precedence":A.precedence,precedence:null})}function ohe(A,p,b,N){A.querySelector('link[rel="preload"][as="style"]['+p+"]")?N.loading=1:(p=A.createElement("link"),N.preload=p,p.addEventListener("load",function(){return N.loading|=1}),p.addEventListener("error",function(){return N.loading|=2}),Ao(p,"link",b),qe(p),A.head.appendChild(p))}function jx(A){return'[src="'+On(A)+'"]'}function J1(A){return"script[async]"+A}function WU(A,p,b){if(p.count++,p.instance===null)switch(p.type){case"style":var N=A.querySelector('style[data-href~="'+On(b.href)+'"]');if(N)return p.instance=N,qe(N),N;var Q=d({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return N=(A.ownerDocument||A).createElement("style"),qe(N),Ao(N,"style",Q),yN(N,b.precedence,A),p.instance=N;case"stylesheet":Q=kx(b.href);var X=A.querySelector(Y1(Q));if(X)return p.state.loading|=4,p.instance=X,qe(X),X;N=KU(b),(Q=Nu.get(Q))&&S3(N,Q),X=(A.ownerDocument||A).createElement("link"),qe(X);var fe=X;return fe._p=new Promise(function(Ee,Re){fe.onload=Ee,fe.onerror=Re}),Ao(X,"link",N),p.state.loading|=4,yN(X,b.precedence,A),p.instance=X;case"script":return X=jx(b.src),(Q=A.querySelector(J1(X)))?(p.instance=Q,qe(Q),Q):(N=b,(Q=Nu.get(X))&&(N=d({},b),k3(N,Q)),A=A.ownerDocument||A,Q=A.createElement("script"),qe(Q),Ao(Q,"link",N),A.head.appendChild(Q),p.instance=Q);case"void":return null;default:throw Error(n(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(N=p.instance,p.state.loading|=4,yN(N,b.precedence,A));return p.instance}function yN(A,p,b){for(var N=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),Q=N.length?N[N.length-1]:null,X=Q,fe=0;fe<N.length;fe++){var Ee=N[fe];if(Ee.dataset.precedence===p)X=Ee;else if(X!==Q)break}X?X.parentNode.insertBefore(A,X.nextSibling):(p=b.nodeType===9?b.head:b,p.insertBefore(A,p.firstChild))}function S3(A,p){A.crossOrigin==null&&(A.crossOrigin=p.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=p.referrerPolicy),A.title==null&&(A.title=p.title)}function k3(A,p){A.crossOrigin==null&&(A.crossOrigin=p.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=p.referrerPolicy),A.integrity==null&&(A.integrity=p.integrity)}var wN=null;function XU(A,p,b){if(wN===null){var N=new Map,Q=wN=new Map;Q.set(b,N)}else Q=wN,N=Q.get(b),N||(N=new Map,Q.set(b,N));if(N.has(A))return N;for(N.set(A,null),b=b.getElementsByTagName(A),Q=0;Q<b.length;Q++){var X=b[Q];if(!(X[_e]||X[ar]||A==="link"&&X.getAttribute("rel")==="stylesheet")&&X.namespaceURI!=="http://www.w3.org/2000/svg"){var fe=X.getAttribute(p)||"";fe=A+fe;var Ee=N.get(fe);Ee?Ee.push(X):N.set(fe,[X])}}return N}function YU(A,p,b){A=A.ownerDocument||A,A.head.insertBefore(b,p==="title"?A.querySelector("head > title"):null)}function lhe(A,p,b){if(b===1||p.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return A=p.disabled,typeof p.precedence=="string"&&A==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function JU(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var Z1=null;function che(){}function uhe(A,p,b){if(Z1===null)throw Error(n(475));var N=Z1;if(p.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var Q=kx(b.href),X=A.querySelector(Y1(Q));if(X){A=X._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(N.count++,N=EN.bind(N),A.then(N,N)),p.state.loading|=4,p.instance=X,qe(X);return}X=A.ownerDocument||A,b=KU(b),(Q=Nu.get(Q))&&S3(b,Q),X=X.createElement("link"),qe(X);var fe=X;fe._p=new Promise(function(Ee,Re){fe.onload=Ee,fe.onerror=Re}),Ao(X,"link",b),p.instance=X}N.stylesheets===null&&(N.stylesheets=new Map),N.stylesheets.set(p,A),(A=p.state.preload)&&(p.state.loading&3)===0&&(N.count++,p=EN.bind(N),A.addEventListener("load",p),A.addEventListener("error",p))}}function dhe(){if(Z1===null)throw Error(n(475));var A=Z1;return A.stylesheets&&A.count===0&&j3(A,A.stylesheets),0<A.count?function(p){var b=setTimeout(function(){if(A.stylesheets&&j3(A,A.stylesheets),A.unsuspend){var N=A.unsuspend;A.unsuspend=null,N()}},6e4);return A.unsuspend=p,function(){A.unsuspend=null,clearTimeout(b)}}:null}function EN(){if(this.count--,this.count===0){if(this.stylesheets)j3(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var NN=null;function j3(A,p){A.stylesheets=null,A.unsuspend!==null&&(A.count++,NN=new Map,p.forEach(fhe,A),NN=null,EN.call(A))}function fhe(A,p){if(!(p.state.loading&4)){var b=NN.get(A);if(b)var N=b.get(null);else{b=new Map,NN.set(A,b);for(var Q=A.querySelectorAll("link[data-precedence],style[data-precedence]"),X=0;X<Q.length;X++){var fe=Q[X];(fe.nodeName==="LINK"||fe.getAttribute("media")!=="not all")&&(b.set(fe.dataset.precedence,fe),N=fe)}N&&b.set(null,N)}Q=p.instance,fe=Q.getAttribute("data-precedence"),X=b.get(fe)||N,X===N&&b.set(null,Q),b.set(fe,Q),this.count++,N=EN.bind(this),Q.addEventListener("load",N),Q.addEventListener("error",N),X?X.parentNode.insertBefore(Q,X.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(Q,A.firstChild)),p.state.loading|=4}}var ey={$$typeof:_,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function Ahe(A,p,b,N,Q,X,fe,Ee){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=la(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=la(0),this.hiddenUpdates=la(null),this.identifierPrefix=N,this.onUncaughtError=Q,this.onCaughtError=X,this.onRecoverableError=fe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ee,this.incompleteTransitions=new Map}function ZU(A,p,b,N,Q,X,fe,Ee,Re,ct,St,Ot){return A=new Ahe(A,p,b,fe,Ee,Re,ct,Ot),p=1,X===!0&&(p|=24),X=Hi(3,null,null,p),A.current=X,X.stateNode=A,p=E1(),p.refCount++,A.pooledCache=p,p.refCount++,X.memoizedState={element:N,isDehydrated:b,cache:p},He(X),A}function e9(A){return A?(A=oi,A):oi}function t9(A,p,b,N,Q,X){Q=e9(Q),N.context===null?N.context=Q:N.pendingContext=Q,N=_t(p),N.payload={element:b},X=X===void 0?null:X,X!==null&&(N.callback=X),b=Tt(A,N,p),b!==null&&(jc(b,A,p),kt(b,A,p))}function r9(A,p){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var b=A.retryLane;A.retryLane=b!==0&&b<p?b:p}}function B3(A,p){r9(A,p),(A=A.alternate)&&r9(A,p)}function n9(A){if(A.tag===13){var p=cd(A,67108864);p!==null&&jc(p,A,67108864),B3(A,67108864)}}var CN=!0;function hhe(A,p,b,N){var Q=V.T;V.T=null;var X=q.p;try{q.p=2,T3(A,p,b,N)}finally{q.p=X,V.T=Q}}function mhe(A,p,b,N){var Q=V.T;V.T=null;var X=q.p;try{q.p=8,T3(A,p,b,N)}finally{q.p=X,V.T=Q}}function T3(A,p,b,N){if(CN){var Q=I3(N);if(Q===null)x3(A,p,N,_N,b),s9(A,N);else if(ghe(Q,A,p,b,N))N.stopPropagation();else if(s9(A,N),p&4&&-1<phe.indexOf(A)){for(;Q!==null;){var X=Fe(Q);if(X!==null)switch(X.tag){case 3:if(X=X.stateNode,X.current.memoizedState.isDehydrated){var fe=kr(X.pendingLanes);if(fe!==0){var Ee=X;for(Ee.pendingLanes|=2,Ee.entangledLanes|=2;fe;){var Re=1<<31-Pt(fe);Ee.entanglements[1]|=Re,fe&=~Re}jf(X),(da&6)===0&&(cN=be()+500,q1(0))}}break;case 13:Ee=cd(X,2),Ee!==null&&jc(Ee,X,2),dN(),B3(X,2)}if(X=I3(N),X===null&&x3(A,p,N,_N,b),X===Q)break;Q=X}Q!==null&&N.stopPropagation()}else x3(A,p,N,null,b)}}function I3(A){return A=ca(A),F3(A)}var _N=null;function F3(A){if(_N=null,A=je(A),A!==null){var p=s(A);if(p===null)A=null;else{var b=p.tag;if(b===13){if(A=o(p),A!==null)return A;A=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;A=null}else p!==A&&(A=null)}}return _N=A,null}function a9(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pe()){case Ue:return 2;case pe:return 8;case Oe:case Le:return 32;case Ge:return 268435456;default:return 32}default:return 32}}var O3=!1,w0=null,E0=null,N0=null,ty=new Map,ry=new Map,C0=[],phe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function s9(A,p){switch(A){case"focusin":case"focusout":w0=null;break;case"dragenter":case"dragleave":E0=null;break;case"mouseover":case"mouseout":N0=null;break;case"pointerover":case"pointerout":ty.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":ry.delete(p.pointerId)}}function ny(A,p,b,N,Q,X){return A===null||A.nativeEvent!==X?(A={blockedOn:p,domEventName:b,eventSystemFlags:N,nativeEvent:X,targetContainers:[Q]},p!==null&&(p=Fe(p),p!==null&&n9(p)),A):(A.eventSystemFlags|=N,p=A.targetContainers,Q!==null&&p.indexOf(Q)===-1&&p.push(Q),A)}function ghe(A,p,b,N,Q){switch(p){case"focusin":return w0=ny(w0,A,p,b,N,Q),!0;case"dragenter":return E0=ny(E0,A,p,b,N,Q),!0;case"mouseover":return N0=ny(N0,A,p,b,N,Q),!0;case"pointerover":var X=Q.pointerId;return ty.set(X,ny(ty.get(X)||null,A,p,b,N,Q)),!0;case"gotpointercapture":return X=Q.pointerId,ry.set(X,ny(ry.get(X)||null,A,p,b,N,Q)),!0}return!1}function i9(A){var p=je(A.target);if(p!==null){var b=s(p);if(b!==null){if(p=b.tag,p===13){if(p=o(b),p!==null){A.blockedOn=p,Et(A.priority,function(){if(b.tag===13){var N=kc();N=mt(N);var Q=cd(b,N);Q!==null&&jc(Q,b,N),B3(b,N)}});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){A.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}A.blockedOn=null}function SN(A){if(A.blockedOn!==null)return!1;for(var p=A.targetContainers;0<p.length;){var b=I3(A.nativeEvent);if(b===null){b=A.nativeEvent;var N=new b.constructor(b.type,b);Fl=N,b.target.dispatchEvent(N),Fl=null}else return p=Fe(b),p!==null&&n9(p),A.blockedOn=b,!1;p.shift()}return!0}function o9(A,p,b){SN(A)&&b.delete(p)}function xhe(){O3=!1,w0!==null&&SN(w0)&&(w0=null),E0!==null&&SN(E0)&&(E0=null),N0!==null&&SN(N0)&&(N0=null),ty.forEach(o9),ry.forEach(o9)}function kN(A,p){A.blockedOn===p&&(A.blockedOn=null,O3||(O3=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,xhe)))}var jN=null;function l9(A){jN!==A&&(jN=A,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){jN===A&&(jN=null);for(var p=0;p<A.length;p+=3){var b=A[p],N=A[p+1],Q=A[p+2];if(typeof N!="function"){if(F3(N||b)===null)continue;break}var X=Fe(b);X!==null&&(A.splice(p,3),p-=3,yu(X,{pending:!0,data:Q,method:b.method,action:N},N,Q))}}))}function ay(A){function p(Re){return kN(Re,A)}w0!==null&&kN(w0,A),E0!==null&&kN(E0,A),N0!==null&&kN(N0,A),ty.forEach(p),ry.forEach(p);for(var b=0;b<C0.length;b++){var N=C0[b];N.blockedOn===A&&(N.blockedOn=null)}for(;0<C0.length&&(b=C0[0],b.blockedOn===null);)i9(b),b.blockedOn===null&&C0.shift();if(b=(A.ownerDocument||A).$$reactFormReplay,b!=null)for(N=0;N<b.length;N+=3){var Q=b[N],X=b[N+1],fe=Q[xr]||null;if(typeof X=="function")fe||l9(b);else if(fe){var Ee=null;if(X&&X.hasAttribute("formAction")){if(Q=X,fe=X[xr]||null)Ee=fe.formAction;else if(F3(Q)!==null)continue}else Ee=fe.action;typeof Ee=="function"?b[N+1]=Ee:(b.splice(N,3),N-=3),l9(b)}}}function D3(A){this._internalRoot=A}BN.prototype.render=D3.prototype.render=function(A){var p=this._internalRoot;if(p===null)throw Error(n(409));var b=p.current,N=kc();t9(b,N,A,p,null,null)},BN.prototype.unmount=D3.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var p=A.containerInfo;t9(A.current,2,null,A,null,null),dN(),p[Wr]=null}};function BN(A){this._internalRoot=A}BN.prototype.unstable_scheduleHydration=function(A){if(A){var p=vt();A={blockedOn:null,target:A,priority:p};for(var b=0;b<C0.length&&p!==0&&p<C0[b].priority;b++);C0.splice(b,0,A),b===0&&i9(A)}};var c9=t.version;if(c9!=="19.1.1")throw Error(n(527,c9,"19.1.1"));q.findDOMNode=function(A){var p=A._reactInternals;if(p===void 0)throw typeof A.render=="function"?Error(n(188)):(A=Object.keys(A).join(","),Error(n(268,A)));return A=c(p),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var vhe={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var TN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!TN.isDisabled&&TN.supportsFiber)try{xt=TN.inject(vhe),It=TN}catch{}}return iy.createRoot=function(A,p){if(!a(A))throw Error(n(299));var b=!1,N="",Q=C7,X=_7,fe=S7,Ee=null;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(N=p.identifierPrefix),p.onUncaughtError!==void 0&&(Q=p.onUncaughtError),p.onCaughtError!==void 0&&(X=p.onCaughtError),p.onRecoverableError!==void 0&&(fe=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(Ee=p.unstable_transitionCallbacks)),p=ZU(A,1,!1,null,null,b,N,Q,X,fe,Ee,null),A[Wr]=p.current,g3(A),new D3(p)},iy.hydrateRoot=function(A,p,b){if(!a(A))throw Error(n(299));var N=!1,Q="",X=C7,fe=_7,Ee=S7,Re=null,ct=null;return b!=null&&(b.unstable_strictMode===!0&&(N=!0),b.identifierPrefix!==void 0&&(Q=b.identifierPrefix),b.onUncaughtError!==void 0&&(X=b.onUncaughtError),b.onCaughtError!==void 0&&(fe=b.onCaughtError),b.onRecoverableError!==void 0&&(Ee=b.onRecoverableError),b.unstable_transitionCallbacks!==void 0&&(Re=b.unstable_transitionCallbacks),b.formState!==void 0&&(ct=b.formState)),p=ZU(A,1,!0,p,b??null,N,Q,X,fe,Ee,Re,ct),p.context=e9(null),b=p.current,N=kc(),N=mt(N),Q=_t(N),Q.callback=null,Tt(b,Q,N),b=N,p.current.lanes=b,Ba(p,b),jf(p),A[Wr]=p.current,g3(A),new BN(p)},iy.version="19.1.1",iy}var v9;function Fhe(){if(v9)return M3.exports;v9=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),M3.exports=Ihe(),M3.exports}var Ohe=Fhe();const Dhe=jl(Ohe),Phe=()=>{};var b9={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iJ=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},Rhe=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const a=e[r++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[r++];t[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=e[r++],o=e[r++],l=e[r++],c=((a&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;t[n++]=String.fromCharCode(55296+(c>>10)),t[n++]=String.fromCharCode(56320+(c&1023))}else{const s=e[r++],o=e[r++];t[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|o&63)}}return t.join("")},oJ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const s=e[a],o=a+1<e.length,l=o?e[a+1]:0,c=a+2<e.length,u=c?e[a+2]:0,d=s>>2,f=(s&3)<<4|l>>4;let h=(l&15)<<2|u>>6,m=u&63;c||(m=64,o||(h=64)),n.push(r[d],r[f],r[h],r[m])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(iJ(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Rhe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const s=r[e.charAt(a++)],l=a<e.length?r[e.charAt(a)]:0;++a;const u=a<e.length?r[e.charAt(a)]:64;++a;const f=a<e.length?r[e.charAt(a)]:64;if(++a,s==null||l==null||u==null||f==null)throw new Lhe;const h=s<<2|l>>4;if(n.push(h),u!==64){const m=l<<4&240|u>>2;if(n.push(m),f!==64){const g=u<<6&192|f;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Lhe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Mhe=function(e){const t=iJ(e);return oJ.encodeByteArray(t,!0)},e_=function(e){return Mhe(e).replace(/\./g,"")},lJ=function(e){try{return oJ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uhe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qhe=()=>Uhe().__FIREBASE_DEFAULTS__,Hhe=()=>{if(typeof process>"u"||typeof b9>"u")return;const e=b9.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Vhe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&lJ(e[1]);return t&&JSON.parse(t)},fk=()=>{try{return Phe()||Qhe()||Hhe()||Vhe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},cJ=e=>{var t,r;return(r=(t=fk())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},KD=e=>{const t=cJ(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},uJ=()=>{var e;return(e=fk())==null?void 0:e.config},dJ=e=>{var t;return(t=fk())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zhe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ak(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fJ(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",a=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[e_(JSON.stringify(r)),e_(JSON.stringify(o)),""].join(".")}const ow={};function $he(){const e={prod:[],emulator:[]};for(const t of Object.keys(ow))ow[t]?e.emulator.push(t):e.prod.push(t);return e}function Ghe(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let y9=!1;function hk(e,t){if(typeof window>"u"||typeof document>"u"||!Rh(window.location.host)||ow[e]===t||ow[e]||y9)return;ow[e]=t;function r(h){return`__firebase__banner__${h}`}const n="__firebase__banner",s=$he().prod.length>0;function o(){const h=document.getElementById(n);h&&h.remove()}function l(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,m){h.setAttribute("width","24"),h.setAttribute("id",m),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function u(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{y9=!0,o()},h}function d(h,m){h.setAttribute("id",m),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function f(){const h=Ghe(n),m=r("text"),g=document.getElementById(m)||document.createElement("span"),x=r("learnmore"),v=document.getElementById(x)||document.createElement("a"),y=r("preprendIcon"),w=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const _=h.element;l(_),d(v,x);const T=u();c(w,y),_.append(w,g,v,T),document.body.appendChild(_)}s?(g.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qhe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(il())}function Khe(){var t;const e=(t=fk())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Whe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Xhe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Yhe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Jhe(){const e=il();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Zhe(){return!Khe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function e0e(){try{return typeof indexedDB=="object"}catch{return!1}}function t0e(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;t(((s=a.error)==null?void 0:s.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0e="FirebaseError";class Gd extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=r0e,Object.setPrototypeOf(this,Gd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,M2.prototype.create)}}class M2{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},a=`${this.service}/${t}`,s=this.errors[t],o=s?n0e(s,n):"Error",l=`${this.serviceName}: ${o} (${a}).`;return new Gd(a,l,n)}}function n0e(e,t){return e.replace(a0e,(r,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const a0e=/\{\$([^}]+)}/g;function s0e(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function vm(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const a of r){if(!n.includes(a))return!1;const s=e[a],o=t[a];if(w9(s)&&w9(o)){if(!vm(s,o))return!1}else if(s!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function w9(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function Ly(e){const t={};return e.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");t[decodeURIComponent(a)]=decodeURIComponent(s)}}),t}function My(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function i0e(e,t){const r=new o0e(e,t);return r.subscribe.bind(r)}class o0e{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let a;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");l0e(t,["next","error","complete"])?a=t:a={next:t,error:r,complete:n},a.next===void 0&&(a.next=V3),a.error===void 0&&(a.error=V3),a.complete===void 0&&(a.complete=V3);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function l0e(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function V3(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(e){return e&&e._delegate?e._delegate:e}class xh{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c0e=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new zhe;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(d0e(t))try{this.getOrInitializeService({instanceIdentifier:Sp})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(t=Sp){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Sp){return this.instances.has(t)}getOptions(t=Sp){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&o.resolve(a)}return a}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(t),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&t(s,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:u0e(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Sp){return this.component?this.component.multipleInstances?t:Sp:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function u0e(e){return e===Sp?void 0:e}function d0e(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0e{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new c0e(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(jn||(jn={}));const A0e={debug:jn.DEBUG,verbose:jn.VERBOSE,info:jn.INFO,warn:jn.WARN,error:jn.ERROR,silent:jn.SILENT},h0e=jn.INFO,m0e={[jn.DEBUG]:"log",[jn.VERBOSE]:"log",[jn.INFO]:"info",[jn.WARN]:"warn",[jn.ERROR]:"error"},p0e=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),a=m0e[t];if(a)console[a](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let WD=class{constructor(t){this.name=t,this._logLevel=h0e,this._logHandler=p0e,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in jn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?A0e[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,jn.DEBUG,...t),this._logHandler(this,jn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,jn.VERBOSE,...t),this._logHandler(this,jn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,jn.INFO,...t),this._logHandler(this,jn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,jn.WARN,...t),this._logHandler(this,jn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,jn.ERROR,...t),this._logHandler(this,jn.ERROR,...t)}};const g0e=(e,t)=>t.some(r=>e instanceof r);let E9,N9;function x0e(){return E9||(E9=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function v0e(){return N9||(N9=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AJ=new WeakMap,L6=new WeakMap,hJ=new WeakMap,z3=new WeakMap,XD=new WeakMap;function b0e(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{r(am(e.result)),a()},o=()=>{n(e.error),a()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(r=>{r instanceof IDBCursor&&AJ.set(r,e)}).catch(()=>{}),XD.set(t,e),t}function y0e(e){if(L6.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{r(),a()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});L6.set(e,t)}let M6={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return L6.get(e);if(t==="objectStoreNames")return e.objectStoreNames||hJ.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return am(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function w0e(e){M6=e(M6)}function E0e(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call($3(this),t,...r);return hJ.set(n,t.sort?t.sort():[t]),am(n)}:v0e().includes(e)?function(...t){return e.apply($3(this),t),am(AJ.get(this))}:function(...t){return am(e.apply($3(this),t))}}function N0e(e){return typeof e=="function"?E0e(e):(e instanceof IDBTransaction&&y0e(e),g0e(e,x0e())?new Proxy(e,M6):e)}function am(e){if(e instanceof IDBRequest)return b0e(e);if(z3.has(e))return z3.get(e);const t=N0e(e);return t!==e&&(z3.set(e,t),XD.set(t,e)),t}const $3=e=>XD.get(e);function C0e(e,t,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const o=indexedDB.open(e,t),l=am(o);return n&&o.addEventListener("upgradeneeded",c=>{n(am(o.result),c.oldVersion,c.newVersion,am(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const _0e=["get","getKey","getAll","getAllKeys","count"],S0e=["put","add","delete","clear"],G3=new Map;function C9(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(G3.get(t))return G3.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=S0e.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||_0e.includes(r)))return;const s=async function(o,...l){const c=this.transaction(o,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),a&&c.done]))[0]};return G3.set(t,s),s}w0e(e=>({...e,get:(t,r,n)=>C9(t,r)||e.get(t,r,n),has:(t,r)=>!!C9(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0e{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(j0e(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function j0e(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const U6="@firebase/app",_9="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh=new WD("@firebase/app"),B0e="@firebase/app-compat",T0e="@firebase/analytics-compat",I0e="@firebase/analytics",F0e="@firebase/app-check-compat",O0e="@firebase/app-check",D0e="@firebase/auth",P0e="@firebase/auth-compat",R0e="@firebase/database",L0e="@firebase/data-connect",M0e="@firebase/database-compat",U0e="@firebase/functions",Q0e="@firebase/functions-compat",H0e="@firebase/installations",V0e="@firebase/installations-compat",z0e="@firebase/messaging",$0e="@firebase/messaging-compat",G0e="@firebase/performance",q0e="@firebase/performance-compat",K0e="@firebase/remote-config",W0e="@firebase/remote-config-compat",X0e="@firebase/storage",Y0e="@firebase/storage-compat",J0e="@firebase/firestore",Z0e="@firebase/ai",eme="@firebase/firestore-compat",tme="firebase",rme="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6="[DEFAULT]",nme={[U6]:"fire-core",[B0e]:"fire-core-compat",[I0e]:"fire-analytics",[T0e]:"fire-analytics-compat",[O0e]:"fire-app-check",[F0e]:"fire-app-check-compat",[D0e]:"fire-auth",[P0e]:"fire-auth-compat",[R0e]:"fire-rtdb",[L0e]:"fire-data-connect",[M0e]:"fire-rtdb-compat",[U0e]:"fire-fn",[Q0e]:"fire-fn-compat",[H0e]:"fire-iid",[V0e]:"fire-iid-compat",[z0e]:"fire-fcm",[$0e]:"fire-fcm-compat",[G0e]:"fire-perf",[q0e]:"fire-perf-compat",[K0e]:"fire-rc",[W0e]:"fire-rc-compat",[X0e]:"fire-gcs",[Y0e]:"fire-gcs-compat",[J0e]:"fire-fst",[eme]:"fire-fst-compat",[Z0e]:"fire-vertex","fire-js":"fire-js",[tme]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw=new Map,ame=new Map,H6=new Map;function S9(e,t){try{e.container.addComponent(t)}catch(r){vh.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function bm(e){const t=e.name;if(H6.has(t))return vh.debug(`There were multiple attempts to register component ${t}.`),!1;H6.set(t,e);for(const r of Rw.values())S9(r,e);for(const r of ame.values())S9(r,e);return!0}function Q2(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function Lc(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sme={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sm=new M2("app","Firebase",sme);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ime{constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new xh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw sm.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg=rme;function YD(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:Q6,automaticDataCollectionEnabled:!0,...t},a=n.name;if(typeof a!="string"||!a)throw sm.create("bad-app-name",{appName:String(a)});if(r||(r=uJ()),!r)throw sm.create("no-options");const s=Rw.get(a);if(s){if(vm(r,s.options)&&vm(n,s.config))return s;throw sm.create("duplicate-app",{appName:a})}const o=new f0e(a);for(const c of H6.values())o.addComponent(c);const l=new ime(r,n,o);return Rw.set(a,l),l}function mk(e=Q6){const t=Rw.get(e);if(!t&&e===Q6&&uJ())return YD();if(!t)throw sm.create("no-app",{appName:e});return t}function k9(){return Array.from(Rw.values())}function $u(e,t,r){let n=nme[e]??e;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const o=[`Unable to register library "${n}" with version "${t}":`];a&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),vh.warn(o.join(" "));return}bm(new xh(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ome="firebase-heartbeat-database",lme=1,Lw="firebase-heartbeat-store";let q3=null;function mJ(){return q3||(q3=C0e(ome,lme,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Lw)}catch(r){console.warn(r)}}}}).catch(e=>{throw sm.create("idb-open",{originalErrorMessage:e.message})})),q3}async function cme(e){try{const r=(await mJ()).transaction(Lw),n=await r.objectStore(Lw).get(pJ(e));return await r.done,n}catch(t){if(t instanceof Gd)vh.warn(t.message);else{const r=sm.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});vh.warn(r.message)}}}async function j9(e,t){try{const n=(await mJ()).transaction(Lw,"readwrite");await n.objectStore(Lw).put(t,pJ(e)),await n.done}catch(r){if(r instanceof Gd)vh.warn(r.message);else{const n=sm.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});vh.warn(n.message)}}}function pJ(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ume=1024,dme=30;class fme{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new hme(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=B9();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>dme){const o=mme(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){vh.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=B9(),{heartbeatsToSend:n,unsentEntries:a}=Ame(this._heartbeatsCache.heartbeats),s=e_(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return vh.warn(r),""}}}function B9(){return new Date().toISOString().substring(0,10)}function Ame(e,t=ume){const r=[];let n=e.slice();for(const a of e){const s=r.find(o=>o.agent===a.agent);if(s){if(s.dates.push(a.date),T9(r)>t){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),T9(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class hme{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return e0e()?t0e().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await cme(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return j9(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return j9(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function T9(e){return e_(JSON.stringify({version:2,heartbeats:e})).length}function mme(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pme(e){bm(new xh("platform-logger",t=>new k0e(t),"PRIVATE")),bm(new xh("heartbeat",t=>new fme(t),"PRIVATE")),$u(U6,_9,e),$u(U6,_9,"esm2020"),$u("fire-js","")}pme("");function gJ(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gme=gJ,xJ=new M2("auth","Firebase",gJ());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_=new WD("@firebase/auth");function xme(e,...t){t_.logLevel<=jn.WARN&&t_.warn(`Auth (${Dg}): ${e}`,...t)}function d5(e,...t){t_.logLevel<=jn.ERROR&&t_.error(`Auth (${Dg}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(e,...t){throw JD(e,...t)}function Jf(e,...t){return JD(e,...t)}function vJ(e,t,r){const n={...gme(),[t]:r};return new M2("auth","Firebase",n).create(t,{appName:e.name})}function im(e){return vJ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function JD(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return xJ.create(e,...t)}function Vr(e,t,...r){if(!e)throw JD(t,...r)}function eh(e){const t="INTERNAL ASSERTION FAILED: "+e;throw d5(t),new Error(t)}function bh(e,t){e||eh(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function vme(){return I9()==="http:"||I9()==="https:"}function I9(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bme(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vme()||Xhe()||"connection"in navigator)?navigator.onLine:!0}function yme(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(t,r){this.shortDelay=t,this.longDelay=r,bh(r>t,"Short delay should be less than long delay!"),this.isMobile=qhe()||Yhe()}get(){return bme()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(e,t){bh(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bJ{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;eh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;eh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;eh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wme={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eme=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Nme=new H2(3e4,6e4);function Mm(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Lh(e,t,r,n,a={}){return yJ(e,a,async()=>{let s={},o={};n&&(t==="GET"?o=n:s={body:JSON.stringify(n)});const l=U2({key:e.config.apiKey,...o}).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:c,...s};return Whe()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&Rh(e.emulatorConfig.host)&&(u.credentials="include"),bJ.fetch()(await wJ(e,e.config.apiHost,r,l),u)})}async function yJ(e,t,r){e._canInitEmulator=!1;const n={...wme,...t};try{const a=new _me(e),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw IN(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw IN(e,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw IN(e,"email-already-in-use",o);if(c==="USER_DISABLED")throw IN(e,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw vJ(e,d,u);Vd(e,d)}}catch(a){if(a instanceof Gd)throw a;Vd(e,"network-request-failed",{message:String(a)})}}async function pk(e,t,r,n,a={}){const s=await Lh(e,t,r,n,a);return"mfaPendingCredential"in s&&Vd(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function wJ(e,t,r,n){const a=`${t}${r}?${n}`,s=e,o=s.config.emulator?ZD(e.config,a):`${e.config.apiScheme}://${a}`;return Eme.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function Cme(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _me{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Jf(this.auth,"network-request-failed")),Nme.get())})}}function IN(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Jf(e,t,n);return a.customData._tokenResponse=r,a}function F9(e){return e!==void 0&&e.enterprise!==void 0}class Sme{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return Cme(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kme(e,t){return Lh(e,"GET","/v2/recaptchaConfig",Mm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jme(e,t){return Lh(e,"POST","/v1/accounts:delete",t)}async function r_(e,t){return Lh(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Bme(e,t=!1){const r=Yn(e),n=await r.getIdToken(t),a=eP(n);Vr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:lw(K3(a.auth_time)),issuedAtTime:lw(K3(a.iat)),expirationTime:lw(K3(a.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function K3(e){return Number(e)*1e3}function eP(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return d5("JWT malformed, contained fewer than 3 sections"),null;try{const a=lJ(r);return a?JSON.parse(a):(d5("Failed to decode base64 JWT payload"),null)}catch(a){return d5("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function O9(e){const t=eP(e);return Vr(t,"internal-error"),Vr(typeof t.exp<"u","internal-error"),Vr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mw(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof Gd&&Tme(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function Tme({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ime{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=lw(this.lastLoginAt),this.creationTime=lw(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n_(e){var f;const t=e.auth,r=await e.getIdToken(),n=await Mw(e,r_(t,{idToken:r}));Vr(n==null?void 0:n.users.length,t,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const s=(f=a.providerUserInfo)!=null&&f.length?EJ(a.providerUserInfo):[],o=Ome(e.providerData,s),l=e.isAnonymous,c=!(e.email&&a.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new z6(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(e,d)}async function Fme(e){const t=Yn(e);await n_(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Ome(e,t){return[...e.filter(n=>!t.some(a=>a.providerId===n.providerId)),...t]}function EJ(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dme(e,t){const r=await yJ(e,{},async()=>{const n=U2({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:s}=e.config,o=await wJ(e,a,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:n};return e.emulatorConfig&&Rh(e.emulatorConfig.host)&&(c.credentials="include"),bJ.fetch()(o,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Pme(e,t){return Lh(e,"POST","/v2/accounts:revokeToken",Mm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Vr(t.idToken,"internal-error"),Vr(typeof t.idToken<"u","internal-error"),Vr(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):O9(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Vr(t.length!==0,"internal-error");const r=O9(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Vr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await Dme(t,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,o=new kv;return n&&(Vr(typeof n=="string","internal-error",{appName:t}),o.refreshToken=n),a&&(Vr(typeof a=="string","internal-error",{appName:t}),o.accessToken=a),s&&(Vr(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new kv,this.toJSON())}_performRefresh(){return eh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(e,t){Vr(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Id{constructor({uid:t,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new Ime(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new z6(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const r=await Mw(this,this.stsTokenManager.getToken(this.auth,t));return Vr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return Bme(this,t)}reload(){return Fme(this)}_assign(t){this!==t&&(Vr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new Id({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){Vr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await n_(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Lc(this.auth.app))return Promise.reject(im(this.auth));const t=await this.getIdToken();return await Mw(this,jme(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,o=r.photoURL??void 0,l=r.tenantId??void 0,c=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:f,emailVerified:h,isAnonymous:m,providerData:g,stsTokenManager:x}=r;Vr(f&&x,t,"internal-error");const v=kv.fromJSON(this.name,x);Vr(typeof f=="string",t,"internal-error"),S0(n,t.name),S0(a,t.name),Vr(typeof h=="boolean",t,"internal-error"),Vr(typeof m=="boolean",t,"internal-error"),S0(s,t.name),S0(o,t.name),S0(l,t.name),S0(c,t.name),S0(u,t.name),S0(d,t.name);const y=new Id({uid:f,auth:t,email:a,emailVerified:h,displayName:n,isAnonymous:m,photoURL:o,phoneNumber:s,tenantId:l,stsTokenManager:v,createdAt:u,lastLoginAt:d});return g&&Array.isArray(g)&&(y.providerData=g.map(w=>({...w}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(t,r,n=!1){const a=new kv;a.updateFromServerResponse(r);const s=new Id({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:n});return await n_(s),s}static async _fromGetAccountInfoResponse(t,r,n){const a=r.users[0];Vr(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?EJ(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),l=new kv;l.updateFromIdToken(n);const c=new Id({uid:a.localId,auth:t,stsTokenManager:l,isAnonymous:o}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new z6(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D9=new Map;function th(e){bh(e instanceof Function,"Expected a class definition");let t=D9.get(e);return t?(bh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,D9.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NJ{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}NJ.type="NONE";const P9=NJ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f5(e,t,r){return`firebase:${e}:${t}:${r}`}class jv{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=f5(this.userKey,a.apiKey,s),this.fullPersistenceKey=f5("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await r_(this.auth,{idToken:t}).catch(()=>{});return r?Id._fromGetAccountInfoResponse(this.auth,r,t):null}return Id._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new jv(th(P9),t,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||th(P9);const o=f5(n,t.config.apiKey,t.name);let l=null;for(const u of r)try{const d=await u._get(o);if(d){let f;if(typeof d=="string"){const h=await r_(t,{idToken:d}).catch(()=>{});if(!h)break;f=await Id._fromGetAccountInfoResponse(t,h,d)}else f=Id._fromJSON(t,d);u!==s&&(l=f),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new jv(s,t,n):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new jv(s,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R9(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(kJ(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(CJ(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(BJ(t))return"Blackberry";if(TJ(t))return"Webos";if(_J(t))return"Safari";if((t.includes("chrome/")||SJ(t))&&!t.includes("edge/"))return"Chrome";if(jJ(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function CJ(e=il()){return/firefox\//i.test(e)}function _J(e=il()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function SJ(e=il()){return/crios\//i.test(e)}function kJ(e=il()){return/iemobile/i.test(e)}function jJ(e=il()){return/android/i.test(e)}function BJ(e=il()){return/blackberry/i.test(e)}function TJ(e=il()){return/webos/i.test(e)}function tP(e=il()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Rme(e=il()){var t;return tP(e)&&!!((t=window.navigator)!=null&&t.standalone)}function Lme(){return Jhe()&&document.documentMode===10}function IJ(e=il()){return tP(e)||jJ(e)||TJ(e)||BJ(e)||/windows phone/i.test(e)||kJ(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FJ(e,t=[]){let r;switch(e){case"Browser":r=R9(il());break;case"Worker":r=`${R9(il())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${Dg}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mme{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=s=>new Promise((o,l)=>{try{const c=t(s);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ume(e,t={}){return Lh(e,"GET","/v2/passwordPolicy",Mm(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qme=6;class Hme{constructor(t){var n;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??Qme,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),a&&(r.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<t.length;a++)n=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vme{constructor(t,r,n,a){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new L9(this),this.idTokenSubscription=new L9(this),this.beforeStateQueue=new Mme(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xJ,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=th(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await jv.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await r_(this,{idToken:t}),n=await Id._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(Lc(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(t);(!o||o===l)&&(c!=null&&c.user)&&(n=c.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Vr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await n_(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=yme()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Lc(this.app))return Promise.reject(im(this));const r=t?Yn(t):null;return r&&Vr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Vr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Lc(this.app)?Promise.reject(im(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Lc(this.app)?Promise.reject(im(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(th(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Ume(this),r=new Hme(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new M2("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Pme(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&th(t)||this._popupRedirectResolver;Vr(r,this,"argument-error"),this.redirectPersistenceManager=await jv.create(this,[th(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Vr(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof r=="function"){const c=t.addObserver(r,n,a);return()=>{o=!0,c()}}else{const c=t.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Vr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=FJ(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var r;if(Lc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&xme(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Pg(e){return Yn(e)}class L9{constructor(t){this.auth=t,this.observer=null,this.addObserver=i0e(r=>this.observer=r)}get next(){return Vr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gk={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zme(e){gk=e}function OJ(e){return gk.loadJS(e)}function $me(){return gk.recaptchaEnterpriseScript}function Gme(){return gk.gapiScript}function qme(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class Kme{constructor(){this.enterprise=new Wme}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class Wme{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const Xme="recaptcha-enterprise",DJ="NO_RECAPTCHA";class Yme{constructor(t){this.type=Xme,this.auth=Pg(t)}async verify(t="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{kme(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new Sme(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function a(s,o,l){const c=window.grecaptcha;F9(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:t}).then(u=>{o(u)}).catch(()=>{o(DJ)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Kme().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{n(this.auth).then(l=>{if(!r&&F9(window.grecaptcha))a(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=$me();c.length!==0&&(c+=l),OJ(c).then(()=>{a(l,s,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function M9(e,t,r,n=!1,a=!1){const s=new Yme(e);let o;if(a)o=DJ;else try{o=await s.verify(r)}catch{o=await s.verify(r,!0)}const l={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function $6(e,t,r,n,a){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await M9(e,t,r,r==="getOobCode");return n(e,o)}else return n(e,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await M9(e,t,r,r==="getOobCode");return n(e,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jme(e,t){const r=Q2(e,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(vm(s,t??{}))return a;Vd(a,"already-initialized")}return r.initialize({options:t})}function Zme(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(th);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function epe(e,t,r){const n=Pg(e);Vr(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!1,s=PJ(t),{host:o,port:l}=tpe(t),c=l===null?"":`:${l}`,u={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){Vr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Vr(vm(u,n.config.emulator)&&vm(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Rh(o)?(Ak(`${s}//${o}${c}`),hk("Auth",!0)):rpe()}function PJ(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function tpe(e){const t=PJ(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:U9(n.substr(s.length+1))}}else{const[s,o]=n.split(":");return{host:s,port:U9(o)}}}function U9(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function rpe(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return eh("not implemented")}_getIdTokenResponse(t){return eh("not implemented")}_linkToIdToken(t,r){return eh("not implemented")}_getReauthenticationResolver(t){return eh("not implemented")}}async function npe(e,t){return Lh(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ape(e,t){return pk(e,"POST","/v1/accounts:signInWithPassword",Mm(e,t))}async function spe(e,t){return Lh(e,"POST","/v1/accounts:sendOobCode",Mm(e,t))}async function ipe(e,t){return spe(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ope(e,t){return pk(e,"POST","/v1/accounts:signInWithEmailLink",Mm(e,t))}async function lpe(e,t){return pk(e,"POST","/v1/accounts:signInWithEmailLink",Mm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw extends rP{constructor(t,r,n,a=null){super("password",n),this._email=t,this._password=r,this._tenantId=a}static _fromEmailAndPassword(t,r){return new Uw(t,r,"password")}static _fromEmailAndCode(t,r,n=null){return new Uw(t,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $6(t,r,"signInWithPassword",ape);case"emailLink":return ope(t,{email:this._email,oobCode:this._password});default:Vd(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $6(t,n,"signUpPassword",npe);case"emailLink":return lpe(t,{idToken:r,email:this._email,oobCode:this._password});default:Vd(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bv(e,t){return pk(e,"POST","/v1/accounts:signInWithIdp",Mm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cpe="http://localhost";class Ag extends rP{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new Ag(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):Vd("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const o=new Ag(n,a);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const r=this.buildRequest();return Bv(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,Bv(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,Bv(t,r)}buildRequest(){const t={requestUri:cpe,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=U2(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function upe(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dpe(e){const t=Ly(My(e)).link,r=t?Ly(My(t)).deep_link_id:null,n=Ly(My(e)).deep_link_id;return(n?Ly(My(n)).link:null)||n||r||t||e}class nP{constructor(t){const r=Ly(My(t)),n=r.apiKey??null,a=r.oobCode??null,s=upe(r.mode??null);Vr(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=dpe(t);try{return new nP(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(){this.providerId=Lb.PROVIDER_ID}static credential(t,r){return Uw._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const n=nP.parseLink(r);return Vr(n,"argument-error"),Uw._fromEmailAndCode(t,n.code,n.tenantId)}}Lb.PROVIDER_ID="password";Lb.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Lb.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RJ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2 extends RJ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0 extends V2{constructor(){super("facebook.com")}static credential(t){return Ag._fromParams({providerId:z0.PROVIDER_ID,signInMethod:z0.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return z0.credentialFromTaggedObject(t)}static credentialFromError(t){return z0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return z0.credential(t.oauthAccessToken)}catch{return null}}}z0.FACEBOOK_SIGN_IN_METHOD="facebook.com";z0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0 extends V2{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Ag._fromParams({providerId:$0.PROVIDER_ID,signInMethod:$0.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return $0.credentialFromTaggedObject(t)}static credentialFromError(t){return $0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return $0.credential(r,n)}catch{return null}}}$0.GOOGLE_SIGN_IN_METHOD="google.com";$0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0 extends V2{constructor(){super("github.com")}static credential(t){return Ag._fromParams({providerId:G0.PROVIDER_ID,signInMethod:G0.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return G0.credentialFromTaggedObject(t)}static credentialFromError(t){return G0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return G0.credential(t.oauthAccessToken)}catch{return null}}}G0.GITHUB_SIGN_IN_METHOD="github.com";G0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0 extends V2{constructor(){super("twitter.com")}static credential(t,r){return Ag._fromParams({providerId:q0.PROVIDER_ID,signInMethod:q0.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return q0.credentialFromTaggedObject(t)}static credentialFromError(t){return q0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return q0.credential(r,n)}catch{return null}}}q0.TWITTER_SIGN_IN_METHOD="twitter.com";q0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,a=!1){const s=await Id._fromIdTokenResponse(t,n,a),o=Q9(n);return new Jv({user:s,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const a=Q9(n);return new Jv({user:t,providerId:a,_tokenResponse:n,operationType:r})}}function Q9(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_ extends Gd{constructor(t,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,a_.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,a){return new a_(t,r,n,a)}}function LJ(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?a_._fromErrorAndOperation(e,s,t,n):s})}async function fpe(e,t,r=!1){const n=await Mw(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return Jv._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ape(e,t,r=!1){const{auth:n}=e;if(Lc(n.app))return Promise.reject(im(n));const a="reauthenticate";try{const s=await Mw(e,LJ(n,a,t,e),r);Vr(s.idToken,n,"internal-error");const o=eP(s.idToken);Vr(o,n,"internal-error");const{sub:l}=o;return Vr(e.uid===l,n,"user-mismatch"),Jv._forOperation(e,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Vd(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MJ(e,t,r=!1){if(Lc(e.app))return Promise.reject(im(e));const n="signIn",a=await LJ(e,n,t),s=await Jv._fromIdTokenResponse(e,n,a);return r||await e._updateCurrentUser(s.user),s}async function hpe(e,t){return MJ(Pg(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mpe(e){const t=Pg(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ppe(e,t,r){const n=Pg(e);await $6(n,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",ipe)}function gpe(e,t,r){return Lc(e.app)?Promise.reject(im(e)):hpe(Yn(e),Lb.credential(t,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&mpe(e),n})}function xpe(e,t,r,n){return Yn(e).onIdTokenChanged(t,r,n)}function vpe(e,t,r){return Yn(e).beforeAuthStateChanged(t,r)}function UJ(e,t,r,n){return Yn(e).onAuthStateChanged(t,r,n)}function bpe(e){return Yn(e).signOut()}const s_="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QJ{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(s_,"1"),this.storage.removeItem(s_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ype=1e3,wpe=10;class HJ extends QJ{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IJ(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&t(r,a,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=t.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},s=this.storage.getItem(n);Lme()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,wpe):a()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},ype)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}HJ.type="LOCAL";const Epe=HJ;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VJ extends QJ{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}VJ.type="SESSION";const zJ=VJ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Npe(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const n=new xk(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:a,data:s}=r.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(o).map(async u=>u(r.origin,s)),c=await Npe(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xk.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cpe{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const u=aP("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(h.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(){return window}function _pe(e){Zf().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $J(){return typeof Zf().WorkerGlobalScope<"u"&&typeof Zf().importScripts=="function"}async function Spe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kpe(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function jpe(){return $J()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GJ="firebaseLocalStorageDb",Bpe=1,i_="firebaseLocalStorage",qJ="fbase_key";class z2{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function vk(e,t){return e.transaction([i_],t?"readwrite":"readonly").objectStore(i_)}function Tpe(){const e=indexedDB.deleteDatabase(GJ);return new z2(e).toPromise()}function G6(){const e=indexedDB.open(GJ,Bpe);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(i_,{keyPath:qJ})}catch(a){r(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(i_)?t(n):(n.close(),await Tpe(),t(await G6()))})})}async function H9(e,t,r){const n=vk(e,!0).put({[qJ]:t,value:r});return new z2(n).toPromise()}async function Ipe(e,t){const r=vk(e,!1).get(t),n=await new z2(r).toPromise();return n===void 0?null:n.value}function V9(e,t){const r=vk(e,!0).delete(t);return new z2(r).toPromise()}const Fpe=800,Ope=3;class KJ{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await G6(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>Ope)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $J()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xk._getInstance(jpe()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await Spe(),!this.activeServiceWorker)return;this.sender=new Cpe(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||kpe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await G6();return await H9(t,s_,"1"),await V9(t,s_),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>H9(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>Ipe(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>V9(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const s=vk(a,!1).getAll();return new z2(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:a,value:s}of t)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Fpe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KJ.type="LOCAL";const Dpe=KJ;new H2(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ppe(e,t){return t?th(t):(Vr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP extends rP{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Bv(t,this._buildIdpRequest())}_linkToIdToken(t,r){return Bv(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return Bv(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function Rpe(e){return MJ(e.auth,new sP(e),e.bypassAuthState)}function Lpe(e){const{auth:t,user:r}=e;return Vr(r,t,"internal-error"),Ape(r,new sP(e),e.bypassAuthState)}async function Mpe(e){const{auth:t,user:r}=e;return Vr(r,t,"internal-error"),fpe(r,new sP(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WJ{constructor(t,r,n,a,s=!1){this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:o,type:l}=t;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Rpe;case"linkViaPopup":case"linkViaRedirect":return Mpe;case"reauthViaPopup":case"reauthViaRedirect":return Lpe;default:Vd(this.auth,"internal-error")}}resolve(t){bh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){bh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Upe=new H2(2e3,1e4);class hv extends WJ{constructor(t,r,n,a,s){super(t,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,hv.currentPopupAction&&hv.currentPopupAction.cancel(),hv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Vr(t,this.auth,"internal-error"),t}async onExecution(){bh(this.filter.length===1,"Popup operations only handle one event");const t=aP();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Jf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Jf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Upe.get())};t()}}hv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qpe="pendingRedirect",A5=new Map;class Hpe extends WJ{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=A5.get(this.auth._key());if(!t){try{const n=await Vpe(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}A5.set(this.auth._key(),t)}return this.bypassAuthState||A5.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Vpe(e,t){const r=Gpe(t),n=$pe(e);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function zpe(e,t){A5.set(e._key(),t)}function $pe(e){return th(e._redirectPersistence)}function Gpe(e){return f5(Qpe,e.config.apiKey,e.name)}async function qpe(e,t,r=!1){if(Lc(e.app))return Promise.reject(im(e));const n=Pg(e),a=Ppe(n,t),o=await new Hpe(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kpe=600*1e3;class Wpe{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Xpe(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!XJ(t)){const a=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(Jf(this.auth,a))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Kpe&&this.cachedEventUids.clear(),this.cachedEventUids.has(z9(t))}saveEventToCache(t){this.cachedEventUids.add(z9(t)),this.lastProcessedEventTime=Date.now()}}function z9(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function XJ({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Xpe(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XJ(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ype(e,t={}){return Lh(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jpe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zpe=/^https?/;async function ege(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Ype(e);for(const r of t)try{if(tge(r))return}catch{}Vd(e,"unauthorized-domain")}function tge(e){const t=V6(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!Zpe.test(r))return!1;if(Jpe.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rge=new H2(3e4,6e4);function $9(){const e=Zf().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function nge(e){return new Promise((t,r)=>{var a,s,o;function n(){$9(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{$9(),r(Jf(e,"network-request-failed"))},timeout:rge.get()})}if((s=(a=Zf().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((o=Zf().gapi)!=null&&o.load)n();else{const l=qme("iframefcb");return Zf()[l]=()=>{gapi.load?n():r(Jf(e,"network-request-failed"))},OJ(`${Gme()}?onload=${l}`).catch(c=>r(c))}}).catch(t=>{throw h5=null,t})}let h5=null;function age(e){return h5=h5||nge(e),h5}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sge=new H2(5e3,15e3),ige="__/auth/iframe",oge="emulator/auth/iframe",lge={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cge=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uge(e){const t=e.config;Vr(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?ZD(t,oge):`https://${e.config.authDomain}/${ige}`,n={apiKey:t.apiKey,appName:e.name,v:Dg},a=cge.get(e.config.apiHost);a&&(n.eid=a);const s=e._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${U2(n).slice(1)}`}async function dge(e){const t=await age(e),r=Zf().gapi;return Vr(r,e,"internal-error"),t.open({where:document.body,url:uge(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lge,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const o=Jf(e,"network-request-failed"),l=Zf().setTimeout(()=>{s(o)},sge.get());function c(){Zf().clearTimeout(l),a(n)}n.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fge={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Age=500,hge=600,mge="_blank",pge="http://localhost";class G9{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gge(e,t,r,n=Age,a=hge){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c={...fge,width:n.toString(),height:a.toString(),top:s,left:o},u=il().toLowerCase();r&&(l=SJ(u)?mge:r),CJ(u)&&(t=t||pge,c.scrollbars="yes");const d=Object.entries(c).reduce((h,[m,g])=>`${h}${m}=${g},`,"");if(Rme(u)&&l!=="_self")return xge(t||"",l),new G9(null);const f=window.open(t||"",l,d);Vr(f,e,"popup-blocked");try{f.focus()}catch{}return new G9(f)}function xge(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vge="__/auth/handler",bge="emulator/auth/handler",yge=encodeURIComponent("fac");async function q9(e,t,r,n,a,s){Vr(e.config.authDomain,e,"auth-domain-config-required"),Vr(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:Dg,eventId:a};if(t instanceof RJ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",s0e(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(t instanceof V2){const d=t.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await e._getAppCheckToken(),u=c?`#${yge}=${encodeURIComponent(c)}`:"";return`${wge(e)}?${U2(l).slice(1)}${u}`}function wge({config:e}){return e.emulator?ZD(e,bge):`https://${e.authDomain}/${vge}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3="webStorageSupport";class Ege{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zJ,this._completeRedirectFn=qpe,this._overrideRedirectResult=zpe}async _openPopup(t,r,n,a){var o;bh((o=this.eventManagers[t._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await q9(t,r,n,V6(),a);return gge(t,s,aP())}async _openRedirect(t,r,n,a){await this._originValidation(t);const s=await q9(t,r,n,V6(),a);return _pe(s),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(bh(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await dge(t),n=new Wpe(t);return r.register("authEvent",a=>(Vr(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(W3,{type:W3},a=>{var o;const s=(o=a==null?void 0:a[0])==null?void 0:o[W3];s!==void 0&&r(!!s),Vd(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=ege(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return IJ()||_J()||tP()}}const Nge=Ege;var K9="@firebase/auth",W9="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cge{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Vr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ge(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Sge(e){bm(new xh("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;Vr(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FJ(e)},u=new Vme(n,a,s,c);return Zme(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),bm(new xh("auth-internal",t=>{const r=Pg(t.getProvider("auth").getImmediate());return(n=>new Cge(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),$u(K9,W9,_ge(e)),$u(K9,W9,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kge=300,jge=dJ("authIdTokenMaxAge")||kge;let X9=null;const Bge=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>jge)return;const a=r==null?void 0:r.token;X9!==a&&(X9=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function YJ(e=mk()){const t=Q2(e,"auth");if(t.isInitialized())return t.getImmediate();const r=Jme(e,{popupRedirectResolver:Nge,persistence:[Dpe,Epe,zJ]}),n=dJ("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const o=Bge(s.toString());vpe(r,o,()=>o(r.currentUser)),xpe(r,l=>o(l))}}const a=cJ("auth");return a&&epe(r,`http://${a}`),r}function Tge(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}zme({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=a=>{const s=Jf("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",Tge().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Sge("Browser");var Ige="firebase",Fge="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$u(Ige,Fge,"app");var Y9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var om,JJ;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,S){function B(){}B.prototype=S.prototype,E.D=S.prototype,E.prototype=new B,E.prototype.constructor=E,E.C=function(M,R,k){for(var D=Array(arguments.length-2),L=2;L<arguments.length;L++)D[L-2]=arguments[L];return S.prototype[R].apply(M,D)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(E,S,B){B||(B=0);var M=Array(16);if(typeof S=="string")for(var R=0;16>R;++R)M[R]=S.charCodeAt(B++)|S.charCodeAt(B++)<<8|S.charCodeAt(B++)<<16|S.charCodeAt(B++)<<24;else for(R=0;16>R;++R)M[R]=S[B++]|S[B++]<<8|S[B++]<<16|S[B++]<<24;S=E.g[0],B=E.g[1],R=E.g[2];var k=E.g[3],D=S+(k^B&(R^k))+M[0]+3614090360&4294967295;S=B+(D<<7&4294967295|D>>>25),D=k+(R^S&(B^R))+M[1]+3905402710&4294967295,k=S+(D<<12&4294967295|D>>>20),D=R+(B^k&(S^B))+M[2]+606105819&4294967295,R=k+(D<<17&4294967295|D>>>15),D=B+(S^R&(k^S))+M[3]+3250441966&4294967295,B=R+(D<<22&4294967295|D>>>10),D=S+(k^B&(R^k))+M[4]+4118548399&4294967295,S=B+(D<<7&4294967295|D>>>25),D=k+(R^S&(B^R))+M[5]+1200080426&4294967295,k=S+(D<<12&4294967295|D>>>20),D=R+(B^k&(S^B))+M[6]+2821735955&4294967295,R=k+(D<<17&4294967295|D>>>15),D=B+(S^R&(k^S))+M[7]+4249261313&4294967295,B=R+(D<<22&4294967295|D>>>10),D=S+(k^B&(R^k))+M[8]+1770035416&4294967295,S=B+(D<<7&4294967295|D>>>25),D=k+(R^S&(B^R))+M[9]+2336552879&4294967295,k=S+(D<<12&4294967295|D>>>20),D=R+(B^k&(S^B))+M[10]+4294925233&4294967295,R=k+(D<<17&4294967295|D>>>15),D=B+(S^R&(k^S))+M[11]+2304563134&4294967295,B=R+(D<<22&4294967295|D>>>10),D=S+(k^B&(R^k))+M[12]+1804603682&4294967295,S=B+(D<<7&4294967295|D>>>25),D=k+(R^S&(B^R))+M[13]+4254626195&4294967295,k=S+(D<<12&4294967295|D>>>20),D=R+(B^k&(S^B))+M[14]+2792965006&4294967295,R=k+(D<<17&4294967295|D>>>15),D=B+(S^R&(k^S))+M[15]+1236535329&4294967295,B=R+(D<<22&4294967295|D>>>10),D=S+(R^k&(B^R))+M[1]+4129170786&4294967295,S=B+(D<<5&4294967295|D>>>27),D=k+(B^R&(S^B))+M[6]+3225465664&4294967295,k=S+(D<<9&4294967295|D>>>23),D=R+(S^B&(k^S))+M[11]+643717713&4294967295,R=k+(D<<14&4294967295|D>>>18),D=B+(k^S&(R^k))+M[0]+3921069994&4294967295,B=R+(D<<20&4294967295|D>>>12),D=S+(R^k&(B^R))+M[5]+3593408605&4294967295,S=B+(D<<5&4294967295|D>>>27),D=k+(B^R&(S^B))+M[10]+38016083&4294967295,k=S+(D<<9&4294967295|D>>>23),D=R+(S^B&(k^S))+M[15]+3634488961&4294967295,R=k+(D<<14&4294967295|D>>>18),D=B+(k^S&(R^k))+M[4]+3889429448&4294967295,B=R+(D<<20&4294967295|D>>>12),D=S+(R^k&(B^R))+M[9]+568446438&4294967295,S=B+(D<<5&4294967295|D>>>27),D=k+(B^R&(S^B))+M[14]+3275163606&4294967295,k=S+(D<<9&4294967295|D>>>23),D=R+(S^B&(k^S))+M[3]+4107603335&4294967295,R=k+(D<<14&4294967295|D>>>18),D=B+(k^S&(R^k))+M[8]+1163531501&4294967295,B=R+(D<<20&4294967295|D>>>12),D=S+(R^k&(B^R))+M[13]+2850285829&4294967295,S=B+(D<<5&4294967295|D>>>27),D=k+(B^R&(S^B))+M[2]+4243563512&4294967295,k=S+(D<<9&4294967295|D>>>23),D=R+(S^B&(k^S))+M[7]+1735328473&4294967295,R=k+(D<<14&4294967295|D>>>18),D=B+(k^S&(R^k))+M[12]+2368359562&4294967295,B=R+(D<<20&4294967295|D>>>12),D=S+(B^R^k)+M[5]+4294588738&4294967295,S=B+(D<<4&4294967295|D>>>28),D=k+(S^B^R)+M[8]+2272392833&4294967295,k=S+(D<<11&4294967295|D>>>21),D=R+(k^S^B)+M[11]+1839030562&4294967295,R=k+(D<<16&4294967295|D>>>16),D=B+(R^k^S)+M[14]+4259657740&4294967295,B=R+(D<<23&4294967295|D>>>9),D=S+(B^R^k)+M[1]+2763975236&4294967295,S=B+(D<<4&4294967295|D>>>28),D=k+(S^B^R)+M[4]+1272893353&4294967295,k=S+(D<<11&4294967295|D>>>21),D=R+(k^S^B)+M[7]+4139469664&4294967295,R=k+(D<<16&4294967295|D>>>16),D=B+(R^k^S)+M[10]+3200236656&4294967295,B=R+(D<<23&4294967295|D>>>9),D=S+(B^R^k)+M[13]+681279174&4294967295,S=B+(D<<4&4294967295|D>>>28),D=k+(S^B^R)+M[0]+3936430074&4294967295,k=S+(D<<11&4294967295|D>>>21),D=R+(k^S^B)+M[3]+3572445317&4294967295,R=k+(D<<16&4294967295|D>>>16),D=B+(R^k^S)+M[6]+76029189&4294967295,B=R+(D<<23&4294967295|D>>>9),D=S+(B^R^k)+M[9]+3654602809&4294967295,S=B+(D<<4&4294967295|D>>>28),D=k+(S^B^R)+M[12]+3873151461&4294967295,k=S+(D<<11&4294967295|D>>>21),D=R+(k^S^B)+M[15]+530742520&4294967295,R=k+(D<<16&4294967295|D>>>16),D=B+(R^k^S)+M[2]+3299628645&4294967295,B=R+(D<<23&4294967295|D>>>9),D=S+(R^(B|~k))+M[0]+4096336452&4294967295,S=B+(D<<6&4294967295|D>>>26),D=k+(B^(S|~R))+M[7]+1126891415&4294967295,k=S+(D<<10&4294967295|D>>>22),D=R+(S^(k|~B))+M[14]+2878612391&4294967295,R=k+(D<<15&4294967295|D>>>17),D=B+(k^(R|~S))+M[5]+4237533241&4294967295,B=R+(D<<21&4294967295|D>>>11),D=S+(R^(B|~k))+M[12]+1700485571&4294967295,S=B+(D<<6&4294967295|D>>>26),D=k+(B^(S|~R))+M[3]+2399980690&4294967295,k=S+(D<<10&4294967295|D>>>22),D=R+(S^(k|~B))+M[10]+4293915773&4294967295,R=k+(D<<15&4294967295|D>>>17),D=B+(k^(R|~S))+M[1]+2240044497&4294967295,B=R+(D<<21&4294967295|D>>>11),D=S+(R^(B|~k))+M[8]+1873313359&4294967295,S=B+(D<<6&4294967295|D>>>26),D=k+(B^(S|~R))+M[15]+4264355552&4294967295,k=S+(D<<10&4294967295|D>>>22),D=R+(S^(k|~B))+M[6]+2734768916&4294967295,R=k+(D<<15&4294967295|D>>>17),D=B+(k^(R|~S))+M[13]+1309151649&4294967295,B=R+(D<<21&4294967295|D>>>11),D=S+(R^(B|~k))+M[4]+4149444226&4294967295,S=B+(D<<6&4294967295|D>>>26),D=k+(B^(S|~R))+M[11]+3174756917&4294967295,k=S+(D<<10&4294967295|D>>>22),D=R+(S^(k|~B))+M[2]+718787259&4294967295,R=k+(D<<15&4294967295|D>>>17),D=B+(k^(R|~S))+M[9]+3951481745&4294967295,E.g[0]=E.g[0]+S&4294967295,E.g[1]=E.g[1]+(R+(D<<21&4294967295|D>>>11))&4294967295,E.g[2]=E.g[2]+R&4294967295,E.g[3]=E.g[3]+k&4294967295}n.prototype.u=function(E,S){S===void 0&&(S=E.length);for(var B=S-this.blockSize,M=this.B,R=this.h,k=0;k<S;){if(R==0)for(;k<=B;)a(this,E,k),k+=this.blockSize;if(typeof E=="string"){for(;k<S;)if(M[R++]=E.charCodeAt(k++),R==this.blockSize){a(this,M),R=0;break}}else for(;k<S;)if(M[R++]=E[k++],R==this.blockSize){a(this,M),R=0;break}}this.h=R,this.o+=S},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var S=1;S<E.length-8;++S)E[S]=0;var B=8*this.o;for(S=E.length-8;S<E.length;++S)E[S]=B&255,B/=256;for(this.u(E),E=Array(16),S=B=0;4>S;++S)for(var M=0;32>M;M+=8)E[B++]=this.g[S]>>>M&255;return E};function s(E,S){var B=l;return Object.prototype.hasOwnProperty.call(B,E)?B[E]:B[E]=S(E)}function o(E,S){this.h=S;for(var B=[],M=!0,R=E.length-1;0<=R;R--){var k=E[R]|0;M&&k==S||(B[R]=k,M=!1)}this.g=B}var l={};function c(E){return-128<=E&&128>E?s(E,function(S){return new o([S|0],0>S?-1:0)}):new o([E|0],0>E?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return v(u(-E));for(var S=[],B=1,M=0;E>=B;M++)S[M]=E/B|0,B*=4294967296;return new o(S,0)}function d(E,S){if(E.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(E.charAt(0)=="-")return v(d(E.substring(1),S));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=u(Math.pow(S,8)),M=f,R=0;R<E.length;R+=8){var k=Math.min(8,E.length-R),D=parseInt(E.substring(R,R+k),S);8>k?(k=u(Math.pow(S,k)),M=M.j(k).add(u(D))):(M=M.j(B),M=M.add(u(D)))}return M}var f=c(0),h=c(1),m=c(16777216);e=o.prototype,e.m=function(){if(x(this))return-v(this).m();for(var E=0,S=1,B=0;B<this.g.length;B++){var M=this.i(B);E+=(0<=M?M:4294967296+M)*S,S*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(g(this))return"0";if(x(this))return"-"+v(this).toString(E);for(var S=u(Math.pow(E,6)),B=this,M="";;){var R=T(B,S).g;B=y(B,R.j(S));var k=((0<B.g.length?B.g[0]:B.h)>>>0).toString(E);if(B=R,g(B))return k+M;for(;6>k.length;)k="0"+k;M=k+M}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function g(E){if(E.h!=0)return!1;for(var S=0;S<E.g.length;S++)if(E.g[S]!=0)return!1;return!0}function x(E){return E.h==-1}e.l=function(E){return E=y(this,E),x(E)?-1:g(E)?0:1};function v(E){for(var S=E.g.length,B=[],M=0;M<S;M++)B[M]=~E.g[M];return new o(B,~E.h).add(h)}e.abs=function(){return x(this)?v(this):this},e.add=function(E){for(var S=Math.max(this.g.length,E.g.length),B=[],M=0,R=0;R<=S;R++){var k=M+(this.i(R)&65535)+(E.i(R)&65535),D=(k>>>16)+(this.i(R)>>>16)+(E.i(R)>>>16);M=D>>>16,k&=65535,D&=65535,B[R]=D<<16|k}return new o(B,B[B.length-1]&-2147483648?-1:0)};function y(E,S){return E.add(v(S))}e.j=function(E){if(g(this)||g(E))return f;if(x(this))return x(E)?v(this).j(v(E)):v(v(this).j(E));if(x(E))return v(this.j(v(E)));if(0>this.l(m)&&0>E.l(m))return u(this.m()*E.m());for(var S=this.g.length+E.g.length,B=[],M=0;M<2*S;M++)B[M]=0;for(M=0;M<this.g.length;M++)for(var R=0;R<E.g.length;R++){var k=this.i(M)>>>16,D=this.i(M)&65535,L=E.i(R)>>>16,Z=E.i(R)&65535;B[2*M+2*R]+=D*Z,w(B,2*M+2*R),B[2*M+2*R+1]+=k*Z,w(B,2*M+2*R+1),B[2*M+2*R+1]+=D*L,w(B,2*M+2*R+1),B[2*M+2*R+2]+=k*L,w(B,2*M+2*R+2)}for(M=0;M<S;M++)B[M]=B[2*M+1]<<16|B[2*M];for(M=S;M<2*S;M++)B[M]=0;return new o(B,0)};function w(E,S){for(;(E[S]&65535)!=E[S];)E[S+1]+=E[S]>>>16,E[S]&=65535,S++}function _(E,S){this.g=E,this.h=S}function T(E,S){if(g(S))throw Error("division by zero");if(g(E))return new _(f,f);if(x(E))return S=T(v(E),S),new _(v(S.g),v(S.h));if(x(S))return S=T(E,v(S)),new _(v(S.g),S.h);if(30<E.g.length){if(x(E)||x(S))throw Error("slowDivide_ only works with positive integers.");for(var B=h,M=S;0>=M.l(E);)B=j(B),M=j(M);var R=I(B,1),k=I(M,1);for(M=I(M,2),B=I(B,2);!g(M);){var D=k.add(M);0>=D.l(E)&&(R=R.add(B),k=D),M=I(M,1),B=I(B,1)}return S=y(E,R.j(S)),new _(R,S)}for(R=f;0<=E.l(S);){for(B=Math.max(1,Math.floor(E.m()/S.m())),M=Math.ceil(Math.log(B)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),k=u(B),D=k.j(S);x(D)||0<D.l(E);)B-=M,k=u(B),D=k.j(S);g(k)&&(k=h),R=R.add(k),E=y(E,D)}return new _(R,E)}e.A=function(E){return T(this,E).h},e.and=function(E){for(var S=Math.max(this.g.length,E.g.length),B=[],M=0;M<S;M++)B[M]=this.i(M)&E.i(M);return new o(B,this.h&E.h)},e.or=function(E){for(var S=Math.max(this.g.length,E.g.length),B=[],M=0;M<S;M++)B[M]=this.i(M)|E.i(M);return new o(B,this.h|E.h)},e.xor=function(E){for(var S=Math.max(this.g.length,E.g.length),B=[],M=0;M<S;M++)B[M]=this.i(M)^E.i(M);return new o(B,this.h^E.h)};function j(E){for(var S=E.g.length+1,B=[],M=0;M<S;M++)B[M]=E.i(M)<<1|E.i(M-1)>>>31;return new o(B,E.h)}function I(E,S){var B=S>>5;S%=32;for(var M=E.g.length-B,R=[],k=0;k<M;k++)R[k]=0<S?E.i(k+B)>>>S|E.i(k+B+1)<<32-S:E.i(k+B);return new o(R,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,JJ=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,om=o}).apply(typeof Y9<"u"?Y9:typeof self<"u"?self:typeof window<"u"?window:{});var FN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZJ,Uy,eZ,m5,q6,tZ,rZ,nZ;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(O,ne,ue){return O==Array.prototype||O==Object.prototype||(O[ne]=ue.value),O};function r(O){O=[typeof globalThis=="object"&&globalThis,O,typeof window=="object"&&window,typeof self=="object"&&self,typeof FN=="object"&&FN];for(var ne=0;ne<O.length;++ne){var ue=O[ne];if(ue&&ue.Math==Math)return ue}throw Error("Cannot find global object")}var n=r(this);function a(O,ne){if(ne)e:{var ue=n;O=O.split(".");for(var we=0;we<O.length-1;we++){var $e=O[we];if(!($e in ue))break e;ue=ue[$e]}O=O[O.length-1],we=ue[O],ne=ne(we),ne!=we&&ne!=null&&t(ue,O,{configurable:!0,writable:!0,value:ne})}}function s(O,ne){O instanceof String&&(O+="");var ue=0,we=!1,$e={next:function(){if(!we&&ue<O.length){var ot=ue++;return{value:ne(ot,O[ot]),done:!1}}return we=!0,{done:!0,value:void 0}}};return $e[Symbol.iterator]=function(){return $e},$e}a("Array.prototype.values",function(O){return O||function(){return s(this,function(ne,ue){return ue})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(O){var ne=typeof O;return ne=ne!="object"?ne:O?Array.isArray(O)?"array":ne:"null",ne=="array"||ne=="object"&&typeof O.length=="number"}function u(O){var ne=typeof O;return ne=="object"&&O!=null||ne=="function"}function d(O,ne,ue){return O.call.apply(O.bind,arguments)}function f(O,ne,ue){if(!O)throw Error();if(2<arguments.length){var we=Array.prototype.slice.call(arguments,2);return function(){var $e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($e,we),O.apply(ne,$e)}}return function(){return O.apply(ne,arguments)}}function h(O,ne,ue){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function m(O,ne){var ue=Array.prototype.slice.call(arguments,1);return function(){var we=ue.slice();return we.push.apply(we,arguments),O.apply(this,we)}}function g(O,ne){function ue(){}ue.prototype=ne.prototype,O.aa=ne.prototype,O.prototype=new ue,O.prototype.constructor=O,O.Qb=function(we,$e,ot){for(var Ut=Array(arguments.length-2),Or=2;Or<arguments.length;Or++)Ut[Or-2]=arguments[Or];return ne.prototype[$e].apply(we,Ut)}}function x(O){const ne=O.length;if(0<ne){const ue=Array(ne);for(let we=0;we<ne;we++)ue[we]=O[we];return ue}return[]}function v(O,ne){for(let ue=1;ue<arguments.length;ue++){const we=arguments[ue];if(c(we)){const $e=O.length||0,ot=we.length||0;O.length=$e+ot;for(let Ut=0;Ut<ot;Ut++)O[$e+Ut]=we[Ut]}else O.push(we)}}class y{constructor(ne,ue){this.i=ne,this.j=ue,this.h=0,this.g=null}get(){let ne;return 0<this.h?(this.h--,ne=this.g,this.g=ne.next,ne.next=null):ne=this.i(),ne}}function w(O){return/^[\s\xa0]*$/.test(O)}function _(){var O=l.navigator;return O&&(O=O.userAgent)?O:""}function T(O){return T[" "](O),O}T[" "]=function(){};var j=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function I(O,ne,ue){for(const we in O)ne.call(ue,O[we],we,O)}function E(O,ne){for(const ue in O)ne.call(void 0,O[ue],ue,O)}function S(O){const ne={};for(const ue in O)ne[ue]=O[ue];return ne}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(O,ne){let ue,we;for(let $e=1;$e<arguments.length;$e++){we=arguments[$e];for(ue in we)O[ue]=we[ue];for(let ot=0;ot<B.length;ot++)ue=B[ot],Object.prototype.hasOwnProperty.call(we,ue)&&(O[ue]=we[ue])}}function R(O){var ne=1;O=O.split(":");const ue=[];for(;0<ne&&O.length;)ue.push(O.shift()),ne--;return O.length&&ue.push(O.join(":")),ue}function k(O){l.setTimeout(()=>{throw O},0)}function D(){var O=K;let ne=null;return O.g&&(ne=O.g,O.g=O.g.next,O.g||(O.h=null),ne.next=null),ne}class L{constructor(){this.h=this.g=null}add(ne,ue){const we=Z.get();we.set(ne,ue),this.h?this.h.next=we:this.g=we,this.h=we}}var Z=new y(()=>new V,O=>O.reset());class V{constructor(){this.next=this.g=this.h=null}set(ne,ue){this.h=ne,this.g=ue,this.next=null}reset(){this.next=this.g=this.h=null}}let q,G=!1,K=new L,ee=()=>{const O=l.Promise.resolve(void 0);q=()=>{O.then(W)}};var W=()=>{for(var O;O=D();){try{O.h.call(O.g)}catch(ue){k(ue)}var ne=Z;ne.j(O),100>ne.h&&(ne.h++,O.next=ne.g,ne.g=O)}G=!1};function P(){this.s=this.s,this.C=this.C}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(O,ne){this.type=O,this.g=this.target=ne,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var O=!1,ne=Object.defineProperty({},"passive",{get:function(){O=!0}});try{const ue=()=>{};l.addEventListener("test",ue,ne),l.removeEventListener("test",ue,ne)}catch{}return O}();function J(O,ne){if(U.call(this,O?O.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,O){var ue=this.type=O.type,we=O.changedTouches&&O.changedTouches.length?O.changedTouches[0]:null;if(this.target=O.target||O.srcElement,this.g=ne,ne=O.relatedTarget){if(j){e:{try{T(ne.nodeName);var $e=!0;break e}catch{}$e=!1}$e||(ne=null)}}else ue=="mouseover"?ne=O.fromElement:ue=="mouseout"&&(ne=O.toElement);this.relatedTarget=ne,we?(this.clientX=we.clientX!==void 0?we.clientX:we.pageX,this.clientY=we.clientY!==void 0?we.clientY:we.pageY,this.screenX=we.screenX||0,this.screenY=we.screenY||0):(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0),this.button=O.button,this.key=O.key||"",this.ctrlKey=O.ctrlKey,this.altKey=O.altKey,this.shiftKey=O.shiftKey,this.metaKey=O.metaKey,this.pointerId=O.pointerId||0,this.pointerType=typeof O.pointerType=="string"?O.pointerType:te[O.pointerType]||"",this.state=O.state,this.i=O,O.defaultPrevented&&J.aa.h.call(this)}}g(J,U);var te={2:"touch",3:"pen",4:"mouse"};J.prototype.h=function(){J.aa.h.call(this);var O=this.i;O.preventDefault?O.preventDefault():O.returnValue=!1};var se="closure_listenable_"+(1e6*Math.random()|0),ie=0;function ce(O,ne,ue,we,$e){this.listener=O,this.proxy=null,this.src=ne,this.type=ue,this.capture=!!we,this.ha=$e,this.key=++ie,this.da=this.fa=!1}function de(O){O.da=!0,O.listener=null,O.proxy=null,O.src=null,O.ha=null}function Be(O){this.src=O,this.g={},this.h=0}Be.prototype.add=function(O,ne,ue,we,$e){var ot=O.toString();O=this.g[ot],O||(O=this.g[ot]=[],this.h++);var Ut=Se(O,ne,we,$e);return-1<Ut?(ne=O[Ut],ue||(ne.fa=!1)):(ne=new ce(ne,this.src,ot,!!we,$e),ne.fa=ue,O.push(ne)),ne};function ae(O,ne){var ue=ne.type;if(ue in O.g){var we=O.g[ue],$e=Array.prototype.indexOf.call(we,ne,void 0),ot;(ot=0<=$e)&&Array.prototype.splice.call(we,$e,1),ot&&(de(ne),O.g[ue].length==0&&(delete O.g[ue],O.h--))}}function Se(O,ne,ue,we){for(var $e=0;$e<O.length;++$e){var ot=O[$e];if(!ot.da&&ot.listener==ne&&ot.capture==!!ue&&ot.ha==we)return $e}return-1}var ke="closure_lm_"+(1e6*Math.random()|0),ve={};function le(O,ne,ue,we,$e){if(Array.isArray(ne)){for(var ot=0;ot<ne.length;ot++)le(O,ne[ot],ue,we,$e);return null}return ue=ut(ue),O&&O[se]?O.K(ne,ue,u(we)?!!we.capture:!1,$e):be(O,ne,ue,!1,we,$e)}function be(O,ne,ue,we,$e,ot){if(!ne)throw Error("Invalid event type");var Ut=u($e)?!!$e.capture:!!$e,Or=Ge(O);if(Or||(O[ke]=Or=new Be(O)),ue=Or.add(ne,ue,we,Ut,ot),ue.proxy)return ue;if(we=Pe(),ue.proxy=we,we.src=O,we.listener=ue,O.addEventListener)z||($e=Ut),$e===void 0&&($e=!1),O.addEventListener(ne.toString(),we,$e);else if(O.attachEvent)O.attachEvent(Oe(ne.toString()),we);else if(O.addListener&&O.removeListener)O.addListener(we);else throw Error("addEventListener and attachEvent are unavailable.");return ue}function Pe(){function O(ue){return ne.call(O.src,O.listener,ue)}const ne=Le;return O}function Ue(O,ne,ue,we,$e){if(Array.isArray(ne))for(var ot=0;ot<ne.length;ot++)Ue(O,ne[ot],ue,we,$e);else we=u(we)?!!we.capture:!!we,ue=ut(ue),O&&O[se]?(O=O.i,ne=String(ne).toString(),ne in O.g&&(ot=O.g[ne],ue=Se(ot,ue,we,$e),-1<ue&&(de(ot[ue]),Array.prototype.splice.call(ot,ue,1),ot.length==0&&(delete O.g[ne],O.h--)))):O&&(O=Ge(O))&&(ne=O.g[ne.toString()],O=-1,ne&&(O=Se(ne,ue,we,$e)),(ue=-1<O?ne[O]:null)&&pe(ue))}function pe(O){if(typeof O!="number"&&O&&!O.da){var ne=O.src;if(ne&&ne[se])ae(ne.i,O);else{var ue=O.type,we=O.proxy;ne.removeEventListener?ne.removeEventListener(ue,we,O.capture):ne.detachEvent?ne.detachEvent(Oe(ue),we):ne.addListener&&ne.removeListener&&ne.removeListener(we),(ue=Ge(ne))?(ae(ue,O),ue.h==0&&(ue.src=null,ne[ke]=null)):de(O)}}}function Oe(O){return O in ve?ve[O]:ve[O]="on"+O}function Le(O,ne){if(O.da)O=!0;else{ne=new J(ne,this);var ue=O.listener,we=O.ha||O.src;O.fa&&pe(O),O=ue.call(we,ne)}return O}function Ge(O){return O=O[ke],O instanceof Be?O:null}var et="__closure_events_fn_"+(1e9*Math.random()>>>0);function ut(O){return typeof O=="function"?O:(O[et]||(O[et]=function(ne){return O.handleEvent(ne)}),O[et])}function xt(){P.call(this),this.i=new Be(this),this.M=this,this.F=null}g(xt,P),xt.prototype[se]=!0,xt.prototype.removeEventListener=function(O,ne,ue,we){Ue(this,O,ne,ue,we)};function It(O,ne){var ue,we=O.F;if(we)for(ue=[];we;we=we.F)ue.push(we);if(O=O.M,we=ne.type||ne,typeof ne=="string")ne=new U(ne,O);else if(ne instanceof U)ne.target=ne.target||O;else{var $e=ne;ne=new U(we,O),M(ne,$e)}if($e=!0,ue)for(var ot=ue.length-1;0<=ot;ot--){var Ut=ne.g=ue[ot];$e=Mt(Ut,we,!0,ne)&&$e}if(Ut=ne.g=O,$e=Mt(Ut,we,!0,ne)&&$e,$e=Mt(Ut,we,!1,ne)&&$e,ue)for(ot=0;ot<ue.length;ot++)Ut=ne.g=ue[ot],$e=Mt(Ut,we,!1,ne)&&$e}xt.prototype.N=function(){if(xt.aa.N.call(this),this.i){var O=this.i,ne;for(ne in O.g){for(var ue=O.g[ne],we=0;we<ue.length;we++)de(ue[we]);delete O.g[ne],O.h--}}this.F=null},xt.prototype.K=function(O,ne,ue,we){return this.i.add(String(O),ne,!1,ue,we)},xt.prototype.L=function(O,ne,ue,we){return this.i.add(String(O),ne,!0,ue,we)};function Mt(O,ne,ue,we){if(ne=O.i.g[String(ne)],!ne)return!0;ne=ne.concat();for(var $e=!0,ot=0;ot<ne.length;++ot){var Ut=ne[ot];if(Ut&&!Ut.da&&Ut.capture==ue){var Or=Ut.listener,wn=Ut.ha||Ut.src;Ut.fa&&ae(O.i,Ut),$e=Or.call(wn,we)!==!1&&$e}}return $e&&!we.defaultPrevented}function Pt(O,ne,ue){if(typeof O=="function")ue&&(O=h(O,ue));else if(O&&typeof O.handleEvent=="function")O=h(O.handleEvent,O);else throw Error("Invalid listener argument");return 2147483647<Number(ne)?-1:l.setTimeout(O,ne||0)}function Ht(O){O.g=Pt(()=>{O.g=null,O.i&&(O.i=!1,Ht(O))},O.l);const ne=O.h;O.h=null,O.m.apply(null,ne)}class wt extends P{constructor(ne,ue){super(),this.m=ne,this.l=ue,this.h=null,this.i=!1,this.g=null}j(ne){this.h=arguments,this.g?this.i=!0:Ht(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tr(O){P.call(this),this.h=O,this.g={}}g(Tr,P);var tr=[];function sn(O){I(O.g,function(ne,ue){this.g.hasOwnProperty(ue)&&pe(ne)},O),O.g={}}Tr.prototype.N=function(){Tr.aa.N.call(this),sn(this)},Tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kr=l.JSON.stringify,$r=l.JSON.parse,Fn=class{stringify(O){return l.JSON.stringify(O,void 0)}parse(O){return l.JSON.parse(O,void 0)}};function Pr(){}Pr.prototype.h=null;function ms(O){return O.h||(O.h=O.i())}function pn(){}var la={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ba(){U.call(this,"d")}g(Ba,U);function rn(){U.call(this,"c")}g(rn,U);var gr={},Ze=null;function mt(){return Ze=Ze||new xt}gr.La="serverreachability";function Je(O){U.call(this,gr.La,O)}g(Je,U);function vt(O){const ne=mt();It(ne,new Je(ne))}gr.STAT_EVENT="statevent";function Et(O,ne){U.call(this,gr.STAT_EVENT,O),this.stat=ne}g(Et,U);function bt(O){const ne=mt();It(ne,new Et(ne,O))}gr.Ma="timingevent";function ar(O,ne){U.call(this,gr.Ma,O),this.size=ne}g(ar,U);function xr(O,ne){if(typeof O!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){O()},ne)}function Wr(){this.g=!0}Wr.prototype.xa=function(){this.g=!1};function Zr(O,ne,ue,we,$e,ot){O.info(function(){if(O.g)if(ot)for(var Ut="",Or=ot.split("&"),wn=0;wn<Or.length;wn++){var Xr=Or[wn].split("=");if(1<Xr.length){var zn=Xr[0];Xr=Xr[1];var ta=zn.split("_");Ut=2<=ta.length&&ta[1]=="type"?Ut+(zn+"="+Xr+"&"):Ut+(zn+"=redacted&")}}else Ut=null;else Ut=ot;return"XMLHTTP REQ ("+we+") [attempt "+$e+"]: "+ne+`
`+ue+`
`+Ut})}function Kr(O,ne,ue,we,$e,ot,Ut){O.info(function(){return"XMLHTTP RESP ("+we+") [ attempt "+$e+"]: "+ne+`
`+ue+`
`+ot+" "+Ut})}function me(O,ne,ue,we){O.info(function(){return"XMLHTTP TEXT ("+ne+"): "+_e(O,ue)+(we?" "+we:"")})}function Ie(O,ne){O.info(function(){return"TIMEOUT: "+ne})}Wr.prototype.info=function(){};function _e(O,ne){if(!O.g)return ne;if(!ne)return null;try{var ue=JSON.parse(ne);if(ue){for(O=0;O<ue.length;O++)if(Array.isArray(ue[O])){var we=ue[O];if(!(2>we.length)){var $e=we[1];if(Array.isArray($e)&&!(1>$e.length)){var ot=$e[0];if(ot!="noop"&&ot!="stop"&&ot!="close")for(var Ut=1;Ut<$e.length;Ut++)$e[Ut]=""}}}}return kr(ue)}catch{return ne}}var Ne={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},je={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fe;function Ye(){}g(Ye,Pr),Ye.prototype.g=function(){return new XMLHttpRequest},Ye.prototype.i=function(){return{}},Fe=new Ye;function ft(O,ne,ue,we){this.j=O,this.i=ne,this.l=ue,this.R=we||1,this.U=new Tr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qe}function qe(){this.i=null,this.g="",this.h=!1}var rt={},it={};function Ft(O,ne,ue){O.L=1,O.v=su(Ni(ne)),O.m=ue,O.P=!0,$t(O,null)}function $t(O,ne){O.F=Date.now(),qt(O),O.A=Ni(O.v);var ue=O.A,we=O.R;Array.isArray(we)||(we=[String(we)]),Fr(ue.i,"t",we),O.C=0,ue=O.j.J,O.h=new qe,O.g=he(O.j,ue?ne:null,!O.m),0<O.O&&(O.M=new wt(h(O.Y,O,O.g),O.O)),ne=O.U,ue=O.g,we=O.ca;var $e="readystatechange";Array.isArray($e)||($e&&(tr[0]=$e.toString()),$e=tr);for(var ot=0;ot<$e.length;ot++){var Ut=le(ue,$e[ot],we||ne.handleEvent,!1,ne.h||ne);if(!Ut)break;ne.g[Ut.key]=Ut}ne=O.H?S(O.H):{},O.m?(O.u||(O.u="POST"),ne["Content-Type"]="application/x-www-form-urlencoded",O.g.ea(O.A,O.u,O.m,ne)):(O.u="GET",O.g.ea(O.A,O.u,null,ne)),vt(),Zr(O.i,O.u,O.A,O.l,O.R,O.m)}ft.prototype.ca=function(O){O=O.target;const ne=this.M;ne&&vs(O)==3?ne.j():this.Y(O)},ft.prototype.Y=function(O){try{if(O==this.g)e:{const ta=vs(this.g);var ne=this.g.Ba();const Ml=this.g.Z();if(!(3>ta)&&(ta!=3||this.g&&(this.h.h||this.g.oa()||Xh(this.g)))){this.J||ta!=4||ne==7||(ne==8||0>=Ml?vt(3):vt(2)),on(this);var ue=this.g.Z();this.X=ue;t:if(Jt(this)){var we=Xh(this.g);O="";var $e=we.length,ot=vs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){An(this),ln(this);var Ut="";break t}this.h.i=new l.TextDecoder}for(ne=0;ne<$e;ne++)this.h.h=!0,O+=this.h.i.decode(we[ne],{stream:!(ot&&ne==$e-1)});we.length=0,this.h.g+=O,this.C=0,Ut=this.h.g}else Ut=this.g.oa();if(this.o=ue==200,Kr(this.i,this.u,this.A,this.l,this.R,ta,ue),this.o){if(this.T&&!this.K){t:{if(this.g){var Or,wn=this.g;if((Or=wn.g?wn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Or)){var Xr=Or;break t}}Xr=null}if(ue=Xr)me(this.i,this.l,ue,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ps(this,ue);else{this.o=!1,this.s=3,bt(12),An(this),ln(this);break e}}if(this.P){ue=!0;let rs;for(;!this.J&&this.C<Ut.length;)if(rs=zt(this,Ut),rs==it){ta==4&&(this.s=4,bt(14),ue=!1),me(this.i,this.l,null,"[Incomplete Response]");break}else if(rs==rt){this.s=4,bt(15),me(this.i,this.l,Ut,"[Invalid Chunk]"),ue=!1;break}else me(this.i,this.l,rs,null),ps(this,rs);if(Jt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ta!=4||Ut.length!=0||this.h.h||(this.s=1,bt(16),ue=!1),this.o=this.o&&ue,!ue)me(this.i,this.l,Ut,"[Invalid Chunked Response]"),An(this),ln(this);else if(0<Ut.length&&!this.W){this.W=!0;var zn=this.j;zn.g==this&&zn.ba&&!zn.M&&(zn.j.info("Great, no buffering proxy detected. Bytes received: "+Ut.length),du(zn),zn.M=!0,bt(11))}}else me(this.i,this.l,Ut,null),ps(this,Ut);ta==4&&An(this),this.o&&!this.J&&(ta==4?fu(this.j,this):(this.o=!1,qt(this)))}else lu(this.g),ue==400&&0<Ut.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),An(this),ln(this)}}}catch{}finally{}};function Jt(O){return O.g?O.u=="GET"&&O.L!=2&&O.j.Ca:!1}function zt(O,ne){var ue=O.C,we=ne.indexOf(`
`,ue);return we==-1?it:(ue=Number(ne.substring(ue,we)),isNaN(ue)?rt:(we+=1,we+ue>ne.length?it:(ne=ne.slice(we,we+ue),O.C=we+ue,ne)))}ft.prototype.cancel=function(){this.J=!0,An(this)};function qt(O){O.S=Date.now()+O.I,jr(O,O.I)}function jr(O,ne){if(O.B!=null)throw Error("WatchDog timer not null");O.B=xr(h(O.ba,O),ne)}function on(O){O.B&&(l.clearTimeout(O.B),O.B=null)}ft.prototype.ba=function(){this.B=null;const O=Date.now();0<=O-this.S?(Ie(this.i,this.A),this.L!=2&&(vt(),bt(17)),An(this),this.s=2,ln(this)):jr(this,this.S-O)};function ln(O){O.j.G==0||O.J||fu(O.j,O)}function An(O){on(O);var ne=O.M;ne&&typeof ne.ma=="function"&&ne.ma(),O.M=null,sn(O.U),O.g&&(ne=O.g,O.g=null,ne.abort(),ne.ma())}function ps(O,ne){try{var ue=O.j;if(ue.G!=0&&(ue.g==O||wi(ue.h,O))){if(!O.K&&wi(ue.h,O)&&ue.G==3){try{var we=ue.Da.g.parse(ne)}catch{we=null}if(Array.isArray(we)&&we.length==3){var $e=we;if($e[0]==0){e:if(!ue.u){if(ue.g)if(ue.g.F+3e3<O.F)vc(ue),rf(ue);else break e;sd(ue),bt(18)}}else ue.za=$e[1],0<ue.za-ue.T&&37500>$e[2]&&ue.F&&ue.v==0&&!ue.C&&(ue.C=xr(h(ue.Za,ue),6e3));if(1>=Ls(ue.h)&&ue.ca){try{ue.ca()}catch{}ue.ca=void 0}}else Qi(ue,11)}else if((O.K||ue.g==O)&&vc(ue),!w(ne))for($e=ue.Da.g.parse(ne),ne=0;ne<$e.length;ne++){let Xr=$e[ne];if(ue.T=Xr[0],Xr=Xr[1],ue.G==2)if(Xr[0]=="c"){ue.K=Xr[1],ue.ia=Xr[2];const zn=Xr[3];zn!=null&&(ue.la=zn,ue.j.info("VER="+ue.la));const ta=Xr[4];ta!=null&&(ue.Aa=ta,ue.j.info("SVER="+ue.Aa));const Ml=Xr[5];Ml!=null&&typeof Ml=="number"&&0<Ml&&(we=1.5*Ml,ue.L=we,ue.j.info("backChannelRequestTimeoutMs_="+we)),we=ue;const rs=O.g;if(rs){const Io=rs.g?rs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Io){var ot=we.h;ot.g||Io.indexOf("spdy")==-1&&Io.indexOf("quic")==-1&&Io.indexOf("h2")==-1||(ot.j=ot.l,ot.g=new Set,ot.h&&(xa(ot,ot.h),ot.h=null))}if(we.D){const Au=rs.g?rs.g.getResponseHeader("X-HTTP-Session-Id"):null;Au&&(we.ya=Au,Vn(we.I,we.D,Au))}}ue.G=3,ue.l&&ue.l.ua(),ue.ba&&(ue.R=Date.now()-O.F,ue.j.info("Handshake RTT: "+ue.R+"ms")),we=ue;var Ut=O;if(we.qa=Y(we,we.J?we.ia:null,we.W),Ut.K){si(we.h,Ut);var Or=Ut,wn=we.L;wn&&(Or.I=wn),Or.B&&(on(Or),qt(Or)),we.g=Ut}else af(we);0<ue.i.length&&nf(ue)}else Xr[0]!="stop"&&Xr[0]!="close"||Qi(ue,7);else ue.G==3&&(Xr[0]=="stop"||Xr[0]=="close"?Xr[0]=="stop"?Qi(ue,7):xc(ue):Xr[0]!="noop"&&ue.l&&ue.l.ta(Xr),ue.v=0)}}vt(4)}catch{}}var So=class{constructor(O,ne){this.g=O,this.map=ne}};function gs(O){this.l=O||10,l.PerformanceNavigationTiming?(O=l.performance.getEntriesByType("navigation"),O=0<O.length&&(O[0].nextHopProtocol=="hq"||O[0].nextHopProtocol=="h2")):O=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=O?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ai(O){return O.h?!0:O.g?O.g.size>=O.j:!1}function Ls(O){return O.h?1:O.g?O.g.size:0}function wi(O,ne){return O.h?O.h==ne:O.g?O.g.has(ne):!1}function xa(O,ne){O.g?O.g.add(ne):O.h=ne}function si(O,ne){O.h&&O.h==ne?O.h=null:O.g&&O.g.has(ne)&&O.g.delete(ne)}gs.prototype.cancel=function(){if(this.i=Zd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const O of this.g.values())O.cancel();this.g.clear()}};function Zd(O){if(O.h!=null)return O.i.concat(O.h.D);if(O.g!=null&&O.g.size!==0){let ne=O.i;for(const ue of O.g.values())ne=ne.concat(ue.D);return ne}return x(O.i)}function qh(O){if(O.V&&typeof O.V=="function")return O.V();if(typeof Map<"u"&&O instanceof Map||typeof Set<"u"&&O instanceof Set)return Array.from(O.values());if(typeof O=="string")return O.split("");if(c(O)){for(var ne=[],ue=O.length,we=0;we<ue;we++)ne.push(O[we]);return ne}ne=[],ue=0;for(we in O)ne[ue++]=O[we];return ne}function ru(O){if(O.na&&typeof O.na=="function")return O.na();if(!O.V||typeof O.V!="function"){if(typeof Map<"u"&&O instanceof Map)return Array.from(O.keys());if(!(typeof Set<"u"&&O instanceof Set)){if(c(O)||typeof O=="string"){var ne=[];O=O.length;for(var ue=0;ue<O;ue++)ne.push(ue);return ne}ne=[],ue=0;for(const we in O)ne[ue++]=we;return ne}}}function mA(O,ne){if(O.forEach&&typeof O.forEach=="function")O.forEach(ne,void 0);else if(c(O)||typeof O=="string")Array.prototype.forEach.call(O,ne,void 0);else for(var ue=ru(O),we=qh(O),$e=we.length,ot=0;ot<$e;ot++)ne.call(void 0,we[ot],ue&&ue[ot],O)}var Ei=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ef(O,ne){if(O){O=O.split("&");for(var ue=0;ue<O.length;ue++){var we=O[ue].indexOf("="),$e=null;if(0<=we){var ot=O[ue].substring(0,we);$e=O[ue].substring(we+1)}else ot=O[ue];ne(ot,$e?decodeURIComponent($e.replace(/\+/g," ")):"")}}}function On(O){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,O instanceof On){this.h=O.h,nu(this,O.j),this.o=O.o,this.g=O.g,au(this,O.s),this.l=O.l;var ne=O.i,ue=new Fl;ue.i=ne.i,ne.g&&(ue.g=new Map(ne.g),ue.h=ne.h),Il(this,ue),this.m=O.m}else O&&(ne=String(O).match(Ei))?(this.h=!1,nu(this,ne[1]||"",!0),this.o=ko(ne[2]||""),this.g=ko(ne[3]||"",!0),au(this,ne[4]),this.l=ko(ne[5]||"",!0),Il(this,ne[6]||"",!0),this.m=ko(ne[7]||"")):(this.h=!1,this.i=new Fl(null,this.h))}On.prototype.toString=function(){var O=[],ne=this.j;ne&&O.push(Ac(ne,pA,!0),":");var ue=this.g;return(ue||ne=="file")&&(O.push("//"),(ne=this.o)&&O.push(Ac(ne,pA,!0),"@"),O.push(encodeURIComponent(String(ue)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ue=this.s,ue!=null&&O.push(":",String(ue))),(ue=this.l)&&(this.g&&ue.charAt(0)!="/"&&O.push("/"),O.push(Ac(ue,ue.charAt(0)=="/"?hc:gA,!0))),(ue=this.i.toString())&&O.push("?",ue),(ue=this.m)&&O.push("#",Ac(ue,mc)),O.join("")};function Ni(O){return new On(O)}function nu(O,ne,ue){O.j=ue?ko(ne,!0):ne,O.j&&(O.j=O.j.replace(/:$/,""))}function au(O,ne){if(ne){if(ne=Number(ne),isNaN(ne)||0>ne)throw Error("Bad port number "+ne);O.s=ne}else O.s=null}function Il(O,ne,ue){ne instanceof Fl?(O.i=ne,Wh(O.i,O.h)):(ue||(ne=Ac(ne,tf)),O.i=new Fl(ne,O.h))}function Vn(O,ne,ue){O.i.set(ne,ue)}function su(O){return Vn(O,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),O}function ko(O,ne){return O?ne?decodeURI(O.replace(/%25/g,"%2525")):decodeURIComponent(O):""}function Ac(O,ne,ue){return typeof O=="string"?(O=encodeURI(O).replace(ne,Kh),ue&&(O=O.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O):null}function Kh(O){return O=O.charCodeAt(0),"%"+(O>>4&15).toString(16)+(O&15).toString(16)}var pA=/[#\/\?@]/g,gA=/[#\?:]/g,hc=/[#\?]/g,tf=/[#\?@]/g,mc=/#/g;function Fl(O,ne){this.h=this.g=null,this.i=O||null,this.j=!!ne}function ca(O){O.g||(O.g=new Map,O.h=0,O.i&&ef(O.i,function(ne,ue){O.add(decodeURIComponent(ne.replace(/\+/g," ")),ue)}))}e=Fl.prototype,e.add=function(O,ne){ca(this),this.i=null,O=Dl(this,O);var ue=this.g.get(O);return ue||this.g.set(O,ue=[]),ue.push(ne),this.h+=1,this};function pc(O,ne){ca(O),ne=Dl(O,ne),O.g.has(ne)&&(O.i=null,O.h-=O.g.get(ne).length,O.g.delete(ne))}function Ol(O,ne){return ca(O),ne=Dl(O,ne),O.g.has(ne)}e.forEach=function(O,ne){ca(this),this.g.forEach(function(ue,we){ue.forEach(function($e){O.call(ne,$e,we,this)},this)},this)},e.na=function(){ca(this);const O=Array.from(this.g.values()),ne=Array.from(this.g.keys()),ue=[];for(let we=0;we<ne.length;we++){const $e=O[we];for(let ot=0;ot<$e.length;ot++)ue.push(ne[we])}return ue},e.V=function(O){ca(this);let ne=[];if(typeof O=="string")Ol(this,O)&&(ne=ne.concat(this.g.get(Dl(this,O))));else{O=Array.from(this.g.values());for(let ue=0;ue<O.length;ue++)ne=ne.concat(O[ue])}return ne},e.set=function(O,ne){return ca(this),this.i=null,O=Dl(this,O),Ol(this,O)&&(this.h-=this.g.get(O).length),this.g.set(O,[ne]),this.h+=1,this},e.get=function(O,ne){return O?(O=this.V(O),0<O.length?String(O[0]):ne):ne};function Fr(O,ne,ue){pc(O,ne),0<ue.length&&(O.i=null,O.g.set(Dl(O,ne),x(ue)),O.h+=ue.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const O=[],ne=Array.from(this.g.keys());for(var ue=0;ue<ne.length;ue++){var we=ne[ue];const ot=encodeURIComponent(String(we)),Ut=this.V(we);for(we=0;we<Ut.length;we++){var $e=ot;Ut[we]!==""&&($e+="="+encodeURIComponent(String(Ut[we]))),O.push($e)}}return this.i=O.join("&")};function Dl(O,ne){return ne=String(ne),O.j&&(ne=ne.toLowerCase()),ne}function Wh(O,ne){ne&&!O.j&&(ca(O),O.i=null,O.g.forEach(function(ue,we){var $e=we.toLowerCase();we!=$e&&(pc(this,we),Fr(this,$e,ue))},O)),O.j=ne}function Li(O,ne){const ue=new Wr;if(l.Image){const we=new Image;we.onload=m(io,ue,"TestLoadImage: loaded",!0,ne,we),we.onerror=m(io,ue,"TestLoadImage: error",!1,ne,we),we.onabort=m(io,ue,"TestLoadImage: abort",!1,ne,we),we.ontimeout=m(io,ue,"TestLoadImage: timeout",!1,ne,we),l.setTimeout(function(){we.ontimeout&&we.ontimeout()},1e4),we.src=O}else ne(!1)}function jo(O,ne){const ue=new Wr,we=new AbortController,$e=setTimeout(()=>{we.abort(),io(ue,"TestPingServer: timeout",!1,ne)},1e4);fetch(O,{signal:we.signal}).then(ot=>{clearTimeout($e),ot.ok?io(ue,"TestPingServer: ok",!0,ne):io(ue,"TestPingServer: server error",!1,ne)}).catch(()=>{clearTimeout($e),io(ue,"TestPingServer: error",!1,ne)})}function io(O,ne,ue,we,$e){try{$e&&($e.onload=null,$e.onerror=null,$e.onabort=null,$e.ontimeout=null),we(ue)}catch{}}function Pl(){this.g=new Fn}function Bo(O,ne,ue){const we=ue||"";try{mA(O,function($e,ot){let Ut=$e;u($e)&&(Ut=kr($e)),ne.push(we+ot+"="+encodeURIComponent(Ut))})}catch($e){throw ne.push(we+"type="+encodeURIComponent("_badmap")),$e}}function iu(O){this.l=O.Ub||null,this.j=O.eb||!1}g(iu,Pr),iu.prototype.g=function(){return new gc(this.l,this.j)},iu.prototype.i=function(O){return function(){return O}}({});function gc(O,ne){xt.call(this),this.D=O,this.o=ne,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(gc,xt),e=gc.prototype,e.open=function(O,ne){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=O,this.A=ne,this.readyState=1,Mi(this)},e.send=function(O){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const ne={headers:this.u,method:this.B,credentials:this.m,cache:void 0};O&&(ne.body=O),(this.D||l).fetch(new Request(this.A,ne)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,To(this)),this.readyState=0},e.Sa=function(O){if(this.g&&(this.l=O,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=O.headers,this.readyState=2,Mi(this)),this.g&&(this.readyState=3,Mi(this),this.g)))if(this.responseType==="arraybuffer")O.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in O){if(this.j=O.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xA(this)}else O.text().then(this.Ra.bind(this),this.ga.bind(this))};function xA(O){O.j.read().then(O.Pa.bind(O)).catch(O.ga.bind(O))}e.Pa=function(O){if(this.g){if(this.o&&O.value)this.response.push(O.value);else if(!this.o){var ne=O.value?O.value:new Uint8Array(0);(ne=this.v.decode(ne,{stream:!O.done}))&&(this.response=this.responseText+=ne)}O.done?To(this):Mi(this),this.readyState==3&&xA(this)}},e.Ra=function(O){this.g&&(this.response=this.responseText=O,To(this))},e.Qa=function(O){this.g&&(this.response=O,To(this))},e.ga=function(){this.g&&To(this)};function To(O){O.readyState=4,O.l=null,O.j=null,O.v=null,Mi(O)}e.setRequestHeader=function(O,ne){this.u.append(O,ne)},e.getResponseHeader=function(O){return this.h&&this.h.get(O.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const O=[],ne=this.h.entries();for(var ue=ne.next();!ue.done;)ue=ue.value,O.push(ue[0]+": "+ue[1]),ue=ne.next();return O.join(`\r
`)};function Mi(O){O.onreadystatechange&&O.onreadystatechange.call(O)}Object.defineProperty(gc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(O){this.m=O?"include":"same-origin"}});function Rl(O){let ne="";return I(O,function(ue,we){ne+=we,ne+=":",ne+=ue,ne+=`\r
`}),ne}function xs(O,ne,ue){e:{for(we in ue){var we=!1;break e}we=!0}we||(ue=Rl(ue),typeof O=="string"?ue!=null&&encodeURIComponent(String(ue)):Vn(O,ne,ue))}function yn(O){xt.call(this),this.headers=new Map,this.o=O||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(yn,xt);var ou=/^https?$/i,Ll=["POST","PUT"];e=yn.prototype,e.Ha=function(O){this.J=O},e.ea=function(O,ne,ue,we){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+O);ne=ne?ne.toUpperCase():"GET",this.D=O,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fe.g(),this.v=this.o?ms(this.o):ms(Fe),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(ne,String(O),!0),this.B=!1}catch(ot){vA(this,ot);return}if(O=ue||"",ue=new Map(this.headers),we)if(Object.getPrototypeOf(we)===Object.prototype)for(var $e in we)ue.set($e,we[$e]);else if(typeof we.keys=="function"&&typeof we.get=="function")for(const ot of we.keys())ue.set(ot,we.get(ot));else throw Error("Unknown input type for opt_headers: "+String(we));we=Array.from(ue.keys()).find(ot=>ot.toLowerCase()=="content-type"),$e=l.FormData&&O instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Ll,ne,void 0))||we||$e||ue.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ot,Ut]of ue)this.g.setRequestHeader(ot,Ut);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ui(this),this.u=!0,this.g.send(O),this.u=!1}catch(ot){vA(this,ot)}};function vA(O,ne){O.h=!1,O.g&&(O.j=!0,O.g.abort(),O.j=!1),O.l=ne,O.m=5,ed(O),fl(O)}function ed(O){O.A||(O.A=!0,It(O,"complete"),It(O,"error"))}e.abort=function(O){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=O||7,It(this,"complete"),It(this,"abort"),fl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fl(this,!0)),yn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?td(this):this.bb())},e.bb=function(){td(this)};function td(O){if(O.h&&typeof o<"u"&&(!O.v[1]||vs(O)!=4||O.Z()!=2)){if(O.u&&vs(O)==4)Pt(O.Ea,0,O);else if(It(O,"readystatechange"),vs(O)==4){O.h=!1;try{const Ut=O.Z();e:switch(Ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ne=!0;break e;default:ne=!1}var ue;if(!(ue=ne)){var we;if(we=Ut===0){var $e=String(O.D).match(Ei)[1]||null;!$e&&l.self&&l.self.location&&($e=l.self.location.protocol.slice(0,-1)),we=!ou.test($e?$e.toLowerCase():"")}ue=we}if(ue)It(O,"complete"),It(O,"success");else{O.m=6;try{var ot=2<vs(O)?O.g.statusText:""}catch{ot=""}O.l=ot+" ["+O.Z()+"]",ed(O)}}finally{fl(O)}}}}function fl(O,ne){if(O.g){Ui(O);const ue=O.g,we=O.v[0]?()=>{}:null;O.g=null,O.v=null,ne||It(O,"ready");try{ue.onreadystatechange=we}catch{}}}function Ui(O){O.I&&(l.clearTimeout(O.I),O.I=null)}e.isActive=function(){return!!this.g};function vs(O){return O.g?O.g.readyState:0}e.Z=function(){try{return 2<vs(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(O){if(this.g){var ne=this.g.responseText;return O&&ne.indexOf(O)==0&&(ne=ne.substring(O.length)),$r(ne)}};function Xh(O){try{if(!O.g)return null;if("response"in O.g)return O.g.response;switch(O.H){case"":case"text":return O.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in O.g)return O.g.mozResponseArrayBuffer}return null}catch{return null}}function lu(O){const ne={};O=(O.g&&2<=vs(O)&&O.g.getAllResponseHeaders()||"").split(`\r
`);for(let we=0;we<O.length;we++){if(w(O[we]))continue;var ue=R(O[we]);const $e=ue[0];if(ue=ue[1],typeof ue!="string")continue;ue=ue.trim();const ot=ne[$e]||[];ne[$e]=ot,ot.push(ue)}E(ne,function(we){return we.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ci(O,ne,ue){return ue&&ue.internalChannelParams&&ue.internalChannelParams[O]||ne}function cu(O){this.Aa=0,this.i=[],this.j=new Wr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ci("failFast",!1,O),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ci("baseRetryDelayMs",5e3,O),this.cb=Ci("retryDelaySeedMs",1e4,O),this.Wa=Ci("forwardChannelMaxRetries",2,O),this.wa=Ci("forwardChannelRequestTimeoutMs",2e4,O),this.pa=O&&O.xmlHttpFactory||void 0,this.Xa=O&&O.Tb||void 0,this.Ca=O&&O.useFetchStreams||!1,this.L=void 0,this.J=O&&O.supportsCrossDomainXhr||!1,this.K="",this.h=new gs(O&&O.concurrentRequestLimit),this.Da=new Pl,this.P=O&&O.fastHandshake||!1,this.O=O&&O.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=O&&O.Rb||!1,O&&O.xa&&this.j.xa(),O&&O.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&O&&O.detectBufferingProxy||!1,this.ja=void 0,O&&O.longPollingTimeout&&0<O.longPollingTimeout&&(this.ja=O.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=cu.prototype,e.la=8,e.G=1,e.connect=function(O,ne,ue,we){bt(0),this.W=O,this.H=ne||{},ue&&we!==void 0&&(this.H.OSID=ue,this.H.OAID=we),this.F=this.X,this.I=Y(this,null,this.W),nf(this)};function xc(O){if(rd(O),O.G==3){var ne=O.U++,ue=Ni(O.I);if(Vn(ue,"SID",O.K),Vn(ue,"RID",ne),Vn(ue,"TYPE","terminate"),uu(O,ue),ne=new ft(O,O.j,ne),ne.L=2,ne.v=su(Ni(ue)),ue=!1,l.navigator&&l.navigator.sendBeacon)try{ue=l.navigator.sendBeacon(ne.v.toString(),"")}catch{}!ue&&l.Image&&(new Image().src=ne.v,ue=!0),ue||(ne.g=he(ne.j,null),ne.g.ea(ne.v)),ne.F=Date.now(),qt(ne)}sf(O)}function rf(O){O.g&&(du(O),O.g.cancel(),O.g=null)}function rd(O){rf(O),O.u&&(l.clearTimeout(O.u),O.u=null),vc(O),O.h.cancel(),O.s&&(typeof O.s=="number"&&l.clearTimeout(O.s),O.s=null)}function nf(O){if(!ai(O.h)&&!O.s){O.s=!0;var ne=O.Ga;q||ee(),G||(q(),G=!0),K.add(ne,O),O.B=0}}function bA(O,ne){return Ls(O.h)>=O.h.j-(O.s?1:0)?!1:O.s?(O.i=ne.D.concat(O.i),!0):O.G==1||O.G==2||O.B>=(O.Va?0:O.Wa)?!1:(O.s=xr(h(O.Ga,O,ne),id(O,O.B)),O.B++,!0)}e.Ga=function(O){if(this.s)if(this.s=null,this.G==1){if(!O){this.U=Math.floor(1e5*Math.random()),O=this.U++;const $e=new ft(this,this.j,O);let ot=this.o;if(this.S&&(ot?(ot=S(ot),M(ot,this.S)):ot=this.S),this.m!==null||this.O||($e.H=ot,ot=null),this.P)e:{for(var ne=0,ue=0;ue<this.i.length;ue++){t:{var we=this.i[ue];if("__data__"in we.map&&(we=we.map.__data__,typeof we=="string")){we=we.length;break t}we=void 0}if(we===void 0)break;if(ne+=we,4096<ne){ne=ue;break e}if(ne===4096||ue===this.i.length-1){ne=ue+1;break e}}ne=1e3}else ne=1e3;ne=ad(this,$e,ne),ue=Ni(this.I),Vn(ue,"RID",O),Vn(ue,"CVER",22),this.D&&Vn(ue,"X-HTTP-Session-Id",this.D),uu(this,ue),ot&&(this.O?ne="headers="+encodeURIComponent(String(Rl(ot)))+"&"+ne:this.m&&xs(ue,this.m,ot)),xa(this.h,$e),this.Ua&&Vn(ue,"TYPE","init"),this.P?(Vn(ue,"$req",ne),Vn(ue,"SID","null"),$e.T=!0,Ft($e,ue,null)):Ft($e,ue,ne),this.G=2}}else this.G==3&&(O?nd(this,O):this.i.length==0||ai(this.h)||nd(this))};function nd(O,ne){var ue;ne?ue=ne.l:ue=O.U++;const we=Ni(O.I);Vn(we,"SID",O.K),Vn(we,"RID",ue),Vn(we,"AID",O.T),uu(O,we),O.m&&O.o&&xs(we,O.m,O.o),ue=new ft(O,O.j,ue,O.B+1),O.m===null&&(ue.H=O.o),ne&&(O.i=ne.D.concat(O.i)),ne=ad(O,ue,1e3),ue.I=Math.round(.5*O.wa)+Math.round(.5*O.wa*Math.random()),xa(O.h,ue),Ft(ue,we,ne)}function uu(O,ne){O.H&&I(O.H,function(ue,we){Vn(ne,we,ue)}),O.l&&mA({},function(ue,we){Vn(ne,we,ue)})}function ad(O,ne,ue){ue=Math.min(O.i.length,ue);var we=O.l?h(O.l.Na,O.l,O):null;e:{var $e=O.i;let ot=-1;for(;;){const Ut=["count="+ue];ot==-1?0<ue?(ot=$e[0].g,Ut.push("ofs="+ot)):ot=0:Ut.push("ofs="+ot);let Or=!0;for(let wn=0;wn<ue;wn++){let Xr=$e[wn].g;const zn=$e[wn].map;if(Xr-=ot,0>Xr)ot=Math.max(0,$e[wn].g-100),Or=!1;else try{Bo(zn,Ut,"req"+Xr+"_")}catch{we&&we(zn)}}if(Or){we=Ut.join("&");break e}}}return O=O.i.splice(0,ue),ne.D=O,we}function af(O){if(!O.g&&!O.u){O.Y=1;var ne=O.Fa;q||ee(),G||(q(),G=!0),K.add(ne,O),O.v=0}}function sd(O){return O.g||O.u||3<=O.v?!1:(O.Y++,O.u=xr(h(O.Fa,O),id(O,O.v)),O.v++,!0)}e.Fa=function(){if(this.u=null,Yh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var O=2*this.R;this.j.info("BP detection timer enabled: "+O),this.A=xr(h(this.ab,this),O)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),rf(this),Yh(this))};function du(O){O.A!=null&&(l.clearTimeout(O.A),O.A=null)}function Yh(O){O.g=new ft(O,O.j,"rpc",O.Y),O.m===null&&(O.g.H=O.o),O.g.O=0;var ne=Ni(O.qa);Vn(ne,"RID","rpc"),Vn(ne,"SID",O.K),Vn(ne,"AID",O.T),Vn(ne,"CI",O.F?"0":"1"),!O.F&&O.ja&&Vn(ne,"TO",O.ja),Vn(ne,"TYPE","xmlhttp"),uu(O,ne),O.m&&O.o&&xs(ne,O.m,O.o),O.L&&(O.g.I=O.L);var ue=O.g;O=O.ia,ue.L=1,ue.v=su(Ni(ne)),ue.m=null,ue.P=!0,$t(ue,O)}e.Za=function(){this.C!=null&&(this.C=null,rf(this),sd(this),bt(19))};function vc(O){O.C!=null&&(l.clearTimeout(O.C),O.C=null)}function fu(O,ne){var ue=null;if(O.g==ne){vc(O),du(O),O.g=null;var we=2}else if(wi(O.h,ne))ue=ne.D,si(O.h,ne),we=1;else return;if(O.G!=0){if(ne.o)if(we==1){ue=ne.m?ne.m.length:0,ne=Date.now()-ne.F;var $e=O.B;we=mt(),It(we,new ar(we,ue)),nf(O)}else af(O);else if($e=ne.s,$e==3||$e==0&&0<ne.X||!(we==1&&bA(O,ne)||we==2&&sd(O)))switch(ue&&0<ue.length&&(ne=O.h,ne.i=ne.i.concat(ue)),$e){case 1:Qi(O,5);break;case 4:Qi(O,10);break;case 3:Qi(O,6);break;default:Qi(O,2)}}}function id(O,ne){let ue=O.Ta+Math.floor(Math.random()*O.cb);return O.isActive()||(ue*=2),ue*ne}function Qi(O,ne){if(O.j.info("Error code "+ne),ne==2){var ue=h(O.fb,O),we=O.Xa;const $e=!we;we=new On(we||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||nu(we,"https"),su(we),$e?Li(we.toString(),ue):jo(we.toString(),ue)}else bt(2);O.G=0,O.l&&O.l.sa(ne),sf(O),rd(O)}e.fb=function(O){O?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function sf(O){if(O.G=0,O.ka=[],O.l){const ne=Zd(O.h);(ne.length!=0||O.i.length!=0)&&(v(O.ka,ne),v(O.ka,O.i),O.h.i.length=0,x(O.i),O.i.length=0),O.l.ra()}}function Y(O,ne,ue){var we=ue instanceof On?Ni(ue):new On(ue);if(we.g!="")ne&&(we.g=ne+"."+we.g),au(we,we.s);else{var $e=l.location;we=$e.protocol,ne=ne?ne+"."+$e.hostname:$e.hostname,$e=+$e.port;var ot=new On(null);we&&nu(ot,we),ne&&(ot.g=ne),$e&&au(ot,$e),ue&&(ot.l=ue),we=ot}return ue=O.D,ne=O.ya,ue&&ne&&Vn(we,ue,ne),Vn(we,"VER",O.la),uu(O,we),we}function he(O,ne,ue){if(ne&&!O.J)throw Error("Can't create secondary domain capable XhrIo object.");return ne=O.Ca&&!O.pa?new yn(new iu({eb:ue})):new yn(O.pa),ne.Ha(O.J),ne}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function De(){}e=De.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Me(){}Me.prototype.g=function(O,ne){return new Ke(O,ne)};function Ke(O,ne){xt.call(this),this.g=new cu(ne),this.l=O,this.h=ne&&ne.messageUrlParams||null,O=ne&&ne.messageHeaders||null,ne&&ne.clientProtocolHeaderRequired&&(O?O["X-Client-Protocol"]="webchannel":O={"X-Client-Protocol":"webchannel"}),this.g.o=O,O=ne&&ne.initMessageHeaders||null,ne&&ne.messageContentType&&(O?O["X-WebChannel-Content-Type"]=ne.messageContentType:O={"X-WebChannel-Content-Type":ne.messageContentType}),ne&&ne.va&&(O?O["X-WebChannel-Client-Profile"]=ne.va:O={"X-WebChannel-Client-Profile":ne.va}),this.g.S=O,(O=ne&&ne.Sb)&&!w(O)&&(this.g.m=O),this.v=ne&&ne.supportsCrossDomainXhr||!1,this.u=ne&&ne.sendRawJson||!1,(ne=ne&&ne.httpSessionIdParam)&&!w(ne)&&(this.g.D=ne,O=this.h,O!==null&&ne in O&&(O=this.h,ne in O&&delete O[ne])),this.j=new Zt(this)}g(Ke,xt),Ke.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ke.prototype.close=function(){xc(this.g)},Ke.prototype.o=function(O){var ne=this.g;if(typeof O=="string"){var ue={};ue.__data__=O,O=ue}else this.u&&(ue={},ue.__data__=kr(O),O=ue);ne.i.push(new So(ne.Ya++,O)),ne.G==3&&nf(ne)},Ke.prototype.N=function(){this.g.l=null,delete this.j,xc(this.g),delete this.g,Ke.aa.N.call(this)};function yt(O){Ba.call(this),O.__headers__&&(this.headers=O.__headers__,this.statusCode=O.__status__,delete O.__headers__,delete O.__status__);var ne=O.__sm__;if(ne){e:{for(const ue in ne){O=ue;break e}O=void 0}(this.i=O)&&(O=this.i,ne=ne!==null&&O in ne?ne[O]:void 0),this.data=ne}else this.data=O}g(yt,Ba);function Lt(){rn.call(this),this.status=1}g(Lt,rn);function Zt(O){this.g=O}g(Zt,De),Zt.prototype.ua=function(){It(this.g,"a")},Zt.prototype.ta=function(O){It(this.g,new yt(O))},Zt.prototype.sa=function(O){It(this.g,new Lt)},Zt.prototype.ra=function(){It(this.g,"b")},Me.prototype.createWebChannel=Me.prototype.g,Ke.prototype.send=Ke.prototype.o,Ke.prototype.open=Ke.prototype.m,Ke.prototype.close=Ke.prototype.close,nZ=function(){return new Me},rZ=function(){return mt()},tZ=gr,q6={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ne.NO_ERROR=0,Ne.TIMEOUT=8,Ne.HTTP_ERROR=6,m5=Ne,je.COMPLETE="complete",eZ=je,pn.EventType=la,la.OPEN="a",la.CLOSE="b",la.ERROR="c",la.MESSAGE="d",xt.prototype.listen=xt.prototype.K,Uy=pn,yn.prototype.listenOnce=yn.prototype.L,yn.prototype.getLastError=yn.prototype.Ka,yn.prototype.getLastErrorCode=yn.prototype.Ba,yn.prototype.getStatus=yn.prototype.Z,yn.prototype.getResponseJson=yn.prototype.Oa,yn.prototype.getResponseText=yn.prototype.oa,yn.prototype.send=yn.prototype.ea,yn.prototype.setWithCredentials=yn.prototype.Ha,ZJ=yn}).apply(typeof FN<"u"?FN:typeof self<"u"?self:typeof window<"u"?window:{});const J9="@firebase/firestore",Z9="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qo=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};qo.UNAUTHENTICATED=new qo(null),qo.GOOGLE_CREDENTIALS=new qo("google-credentials-uid"),qo.FIRST_PARTY=new qo("first-party-uid"),qo.MOCK_USER=new qo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mb="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg=new WD("@firebase/firestore");function av(){return hg.logLevel}function dr(e,...t){if(hg.logLevel<=jn.DEBUG){const r=t.map(iP);hg.debug(`Firestore (${Mb}): ${e}`,...r)}}function yh(e,...t){if(hg.logLevel<=jn.ERROR){const r=t.map(iP);hg.error(`Firestore (${Mb}): ${e}`,...r)}}function mg(e,...t){if(hg.logLevel<=jn.WARN){const r=t.map(iP);hg.warn(`Firestore (${Mb}): ${e}`,...r)}}function iP(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(e,t,r){let n="Unexpected state";typeof t=="string"?n=t:r=t,aZ(e,n,r)}function aZ(e,t,r){let n=`FIRESTORE (${Mb}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw yh(n),new Error(n)}function ia(e,t,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,e||aZ(t,a,n)}function tn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xt extends Gd{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sZ{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class iZ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(qo.UNAUTHENTICATED))}shutdown(){}}class Oge{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Dge{constructor(t){this.t=t,this.currentUser=qo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){ia(this.o===void 0,42304);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new ch;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ch,t.enqueueRetryable(()=>a(this.currentUser))};const o=()=>{const c=s;t.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{dr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(dr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ch)}},0),o()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(dr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ia(typeof n.accessToken=="string",31837,{l:n}),new sZ(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ia(t===null||typeof t=="string",2055,{h:t}),new qo(t)}}class Pge{constructor(t,r,n){this.P=t,this.T=r,this.I=n,this.type="FirstParty",this.user=qo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Rge{constructor(t,r,n){this.P=t,this.T=r,this.I=n}getToken(){return Promise.resolve(new Pge(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable(()=>r(qo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class eQ{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Lge{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Lc(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){ia(this.o===void 0,3512);const n=s=>{s.error!=null&&dr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,dr("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const a=s=>{dr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):dr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new eQ(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(ia(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new eQ(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mge(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=Mge(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=t.charAt(a[s]%62))}return n}}function Bn(e,t){return e<t?-1:e>t?1:0}function K6(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const a=e.charAt(n),s=t.charAt(n);if(a!==s)return X3(a)===X3(s)?Bn(a,s):X3(a)?1:-1}return Bn(e.length,t.length)}const Uge=55296,Qge=57343;function X3(e){const t=e.charCodeAt(0);return t>=Uge&&t<=Qge}function Zv(e,t,r){return e.length===t.length&&e.every((n,a)=>r(n,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tQ="__name__";class Rf{constructor(t,r,n){r===void 0?r=0:r>t.length&&zr(637,{offset:r,range:t.length}),n===void 0?n=t.length-r:n>t.length-r&&zr(1746,{length:n,range:t.length-r}),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return Rf.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof Rf?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let a=0;a<n;a++){const s=Rf.compareSegments(t.get(a),r.get(a));if(s!==0)return s}return Bn(t.length,r.length)}static compareSegments(t,r){const n=Rf.isNumericId(t),a=Rf.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?Rf.extractNumericId(t).compare(Rf.extractNumericId(r)):K6(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return om.fromString(t.substring(4,t.length-2))}}class _a extends Rf{construct(t,r,n){return new _a(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new Xt(Ct.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new _a(r)}static emptyPath(){return new _a([])}}const Hge=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ji extends Rf{construct(t,r,n){return new Ji(t,r,n)}static isValidIdentifier(t){return Hge.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ji.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tQ}static keyField(){return new Ji([tQ])}static fromServerFormat(t){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Xt(Ct.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<t.length;){const l=t[a];if(l==="\\"){if(a+1===t.length)throw new Xt(Ct.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Xt(Ct.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=c,a+=2}else l==="`"?(o=!o,a++):l!=="."||o?(n+=l,a++):(s(),a++)}if(s(),o)throw new Xt(Ct.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ji(r)}static emptyPath(){return new Ji([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(t){this.path=t}static fromPath(t){return new yr(_a.fromString(t))}static fromName(t){return new yr(_a.fromString(t).popFirst(5))}static empty(){return new yr(_a.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&_a.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return _a.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new yr(new _a(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oZ(e,t,r){if(!r)throw new Xt(Ct.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function lZ(e,t,r,n){if(t===!0&&n===!0)throw new Xt(Ct.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function rQ(e){if(!yr.isDocumentKey(e))throw new Xt(Ct.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function nQ(e){if(yr.isDocumentKey(e))throw new Xt(Ct.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function cZ(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function yk(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":zr(12329,{type:typeof e})}function al(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xt(Ct.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=yk(e);throw new Xt(Ct.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function Vge(e,t){if(t<=0)throw new Xt(Ct.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(e,t){const r={typeString:e};return t&&(r.value=t),r}function $2(e,t){if(!cZ(e))throw new Xt(Ct.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in t)if(t[n]){const a=t[n].typeString,s="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){r=`JSON missing required field: '${n}'`;break}const o=e[n];if(a&&typeof o!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&o!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new Xt(Ct.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aQ=-62135596800,sQ=1e6;class ir{static now(){return ir.fromMillis(Date.now())}static fromDate(t){return ir.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor((t-1e3*r)*sQ);return new ir(r,n)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Xt(Ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Xt(Ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<aQ)throw new Xt(Ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Xt(Ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sQ}_compareTo(t){return this.seconds===t.seconds?Bn(this.nanoseconds,t.nanoseconds):Bn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ir._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if($2(t,ir._jsonSchema))return new ir(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-aQ;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ir._jsonSchemaVersion="firestore/timestamp/1.0",ir._jsonSchema={type:vi("string",ir._jsonSchemaVersion),seconds:vi("number"),nanoseconds:vi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{static fromTimestamp(t){return new Jr(t)}static min(){return new Jr(new ir(0,0))}static max(){return new Jr(new ir(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw=-1;function zge(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,a=Jr.fromTimestamp(n===1e9?new ir(r+1,0):new ir(r,n));return new ym(a,yr.empty(),t)}function $ge(e){return new ym(e.readTime,e.key,Qw)}class ym{constructor(t,r,n){this.readTime=t,this.documentKey=r,this.largestBatchId=n}static min(){return new ym(Jr.min(),yr.empty(),Qw)}static max(){return new ym(Jr.max(),yr.empty(),Qw)}}function Gge(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=yr.comparator(e.documentKey,t.documentKey),r!==0?r:Bn(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qge="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Kge{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ub(e){if(e.code!==Ct.FAILED_PRECONDITION||e.message!==qge)throw e;dr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&zr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Dt((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Dt?r:Dt.resolve(r)}catch(r){return Dt.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Dt.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Dt.reject(r)}static resolve(t){return new Dt((r,n)=>{r(t)})}static reject(t){return new Dt((r,n)=>{n(t)})}static waitFor(t){return new Dt((r,n)=>{let a=0,s=0,o=!1;t.forEach(l=>{++a,l.next(()=>{++s,o&&s===a&&r()},c=>n(c))}),o=!0,s===a&&r()})}static or(t){let r=Dt.resolve(!1);for(const n of t)r=r.next(a=>a?Dt.resolve(a):n());return r}static forEach(t,r){const n=[];return t.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(t,r){return new Dt((n,a)=>{const s=t.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;r(t[u]).next(d=>{o[u]=d,++l,l===s&&n(o)},d=>a(d))}})}static doWhile(t,r){return new Dt((n,a)=>{const s=()=>{t()===!0?r().next(()=>{s()},a):n()};s()})}}function Wge(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Qb(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}wk.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=-1;function Ek(e){return e==null}function o_(e){return e===0&&1/e==-1/0}function Xge(e){return typeof e=="number"&&Number.isInteger(e)&&!o_(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uZ="";function Yge(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=iQ(t)),t=Jge(e.get(r),t);return iQ(t)}function Jge(e,t){let r=t;const n=e.length;for(let a=0;a<n;a++){const s=e.charAt(a);switch(s){case"\0":r+="";break;case uZ:r+="";break;default:r+=s}}return r}function iQ(e){return e+uZ+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oQ(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function Um(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function dZ(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(t,r){this.comparator=t,this.root=r||vo.EMPTY}insert(t,r){return new ds(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,vo.BLACK,null,null))}remove(t){return new ds(this.comparator,this.root.remove(t,this.comparator).copy(null,null,vo.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(t,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){const t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ON(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ON(this.root,t,this.comparator,!1)}getReverseIterator(){return new ON(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ON(this.root,t,this.comparator,!0)}}class ON{constructor(t,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=r?n(t.key,r):1,r&&a&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class vo{constructor(t,r,n,a,s){this.key=t,this.value=r,this.color=n??vo.RED,this.left=a??vo.EMPTY,this.right=s??vo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,n,a,s){return new vo(t??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let a=this;const s=n(t,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(t,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return vo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,a=this;if(r(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(t,a.key)===0){if(a.right.isEmpty())return vo.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,vo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,vo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw zr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw zr(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw zr(27949);return t+(this.isRed()?0:1)}}vo.EMPTY=null,vo.RED=!0,vo.BLACK=!1;vo.EMPTY=new class{constructor(){this.size=0}get key(){throw zr(57766)}get value(){throw zr(16141)}get color(){throw zr(16727)}get left(){throw zr(29726)}get right(){throw zr(36894)}copy(t,r,n,a,s){return this}insert(t,r,n){return new vo(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(t){this.comparator=t,this.data=new ds(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,t[1])>=0)return;r(a.key)}}forEachWhile(t,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new lQ(this.data.getIterator())}getIteratorFrom(t){return new lQ(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof Ii)||this.size!==t.size)return!1;const r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Ii(this.comparator);return r.data=t,r}}class lQ{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(t){this.fields=t,t.sort(Ji.comparator)}static empty(){return new Vc([])}unionWith(t){let r=new Ii(Ji.comparator);for(const n of this.fields)r=r.add(n);for(const n of t)r=r.add(n);return new Vc(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return Zv(this.fields,t.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fZ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new fZ("Invalid base64 string: "+s):s}}(t);return new ro(r)}static fromUint8Array(t){const r=function(a){let s="";for(let o=0;o<a.length;++o)s+=String.fromCharCode(a[o]);return s}(t);return new ro(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Bn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ro.EMPTY_BYTE_STRING=new ro("");const Zge=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wm(e){if(ia(!!e,39018),typeof e=="string"){let t=0;const r=Zge.exec(e);if(ia(!!r,46558,{timestamp:e}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),t=Number(a)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Ws(e.seconds),nanos:Ws(e.nanos)}}function Ws(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Em(e){return typeof e=="string"?ro.fromBase64String(e):ro.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AZ="server_timestamp",hZ="__type__",mZ="__previous_value__",pZ="__local_write_time__";function Nk(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[hZ])==null?void 0:n.stringValue)===AZ}function Ck(e){const t=e.mapValue.fields[mZ];return Nk(t)?Ck(t):t}function Hw(e){const t=wm(e.mapValue.fields[pZ].timestampValue);return new ir(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class exe{constructor(t,r,n,a,s,o,l,c,u,d){this.databaseId=t,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const l_="(default)";class eb{constructor(t,r){this.projectId=t,this.database=r||l_}static empty(){return new eb("","")}get isDefaultDatabase(){return this.database===l_}isEqual(t){return t instanceof eb&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gZ="__type__",txe="__max__",DN={mapValue:{}},xZ="__vector__",c_="value";function Nm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Nk(e)?4:nxe(e)?9007199254740991:rxe(e)?10:11:zr(28295,{value:e})}function iA(e,t){if(e===t)return!0;const r=Nm(e);if(r!==Nm(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Hw(e).isEqual(Hw(t));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const o=wm(a.timestampValue),l=wm(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,s){return Em(a.bytesValue).isEqual(Em(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,s){return Ws(a.geoPointValue.latitude)===Ws(s.geoPointValue.latitude)&&Ws(a.geoPointValue.longitude)===Ws(s.geoPointValue.longitude)}(e,t);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return Ws(a.integerValue)===Ws(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const o=Ws(a.doubleValue),l=Ws(s.doubleValue);return o===l?o_(o)===o_(l):isNaN(o)&&isNaN(l)}return!1}(e,t);case 9:return Zv(e.arrayValue.values||[],t.arrayValue.values||[],iA);case 10:case 11:return function(a,s){const o=a.mapValue.fields||{},l=s.mapValue.fields||{};if(oQ(o)!==oQ(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!iA(o[c],l[c])))return!1;return!0}(e,t);default:return zr(52216,{left:e})}}function Vw(e,t){return(e.values||[]).find(r=>iA(r,t))!==void 0}function tb(e,t){if(e===t)return 0;const r=Nm(e),n=Nm(t);if(r!==n)return Bn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Bn(e.booleanValue,t.booleanValue);case 2:return function(s,o){const l=Ws(s.integerValue||s.doubleValue),c=Ws(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(e,t);case 3:return cQ(e.timestampValue,t.timestampValue);case 4:return cQ(Hw(e),Hw(t));case 5:return K6(e.stringValue,t.stringValue);case 6:return function(s,o){const l=Em(s),c=Em(o);return l.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Bn(l[u],c[u]);if(d!==0)return d}return Bn(l.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const l=Bn(Ws(s.latitude),Ws(o.latitude));return l!==0?l:Bn(Ws(s.longitude),Ws(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return uQ(e.arrayValue,t.arrayValue);case 10:return function(s,o){var h,m,g,x;const l=s.fields||{},c=o.fields||{},u=(h=l[c_])==null?void 0:h.arrayValue,d=(m=c[c_])==null?void 0:m.arrayValue,f=Bn(((g=u==null?void 0:u.values)==null?void 0:g.length)||0,((x=d==null?void 0:d.values)==null?void 0:x.length)||0);return f!==0?f:uQ(u,d)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===DN.mapValue&&o===DN.mapValue)return 0;if(s===DN.mapValue)return 1;if(o===DN.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const h=K6(c[f],d[f]);if(h!==0)return h;const m=tb(l[c[f]],u[d[f]]);if(m!==0)return m}return Bn(c.length,d.length)}(e.mapValue,t.mapValue);default:throw zr(23264,{he:r})}}function cQ(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Bn(e,t);const r=wm(e),n=wm(t),a=Bn(r.seconds,n.seconds);return a!==0?a:Bn(r.nanos,n.nanos)}function uQ(e,t){const r=e.values||[],n=t.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=tb(r[a],n[a]);if(s)return s}return Bn(r.length,n.length)}function rb(e){return W6(e)}function W6(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const n=wm(r);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return Em(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return yr.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=W6(s);return n+"]"}(e.arrayValue):"mapValue"in e?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const o of n)s?s=!1:a+=",",a+=`${o}:${W6(r.fields[o])}`;return a+"}"}(e.mapValue):zr(61005,{value:e})}function p5(e){switch(Nm(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Ck(e);return t?16+p5(t):16;case 5:return 2*e.stringValue.length;case 6:return Em(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+p5(s),0)}(e.arrayValue);case 10:case 11:return function(n){let a=0;return Um(n.fields,(s,o)=>{a+=s.length+p5(o)}),a}(e.mapValue);default:throw zr(13486,{value:e})}}function u_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function X6(e){return!!e&&"integerValue"in e}function lP(e){return!!e&&"arrayValue"in e}function dQ(e){return!!e&&"nullValue"in e}function fQ(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function g5(e){return!!e&&"mapValue"in e}function rxe(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[gZ])==null?void 0:n.stringValue)===xZ}function cw(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Um(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=cw(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=cw(e.arrayValue.values[r]);return t}return{...e}}function nxe(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===txe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(t){this.value=t}static empty(){return new tc({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!g5(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=cw(r)}setAll(t){let r=Ji.emptyPath(),n={},a=[];t.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=l.popLast()}o?n[l.lastSegment()]=cw(o):a.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(t){const r=this.field(t.popLast());g5(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return iA(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let a=r.mapValue.fields[t.get(n)];g5(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(t,r,n){Um(r,(a,s)=>t[a]=s);for(const a of n)delete t[a]}clone(){return new tc(cw(this.value))}}function vZ(e){const t=[];return Um(e.fields,(r,n)=>{const a=new Ji([r]);if(g5(n)){const s=vZ(n.mapValue).fields;if(s.length===0)t.push(a);else for(const o of s)t.push(a.child(o))}else t.push(a)}),new Vc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(t,r,n,a,s,o,l){this.key=t,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(t){return new Yo(t,0,Jr.min(),Jr.min(),Jr.min(),tc.empty(),0)}static newFoundDocument(t,r,n,a){return new Yo(t,1,r,Jr.min(),n,a,0)}static newNoDocument(t,r){return new Yo(t,2,r,Jr.min(),Jr.min(),tc.empty(),0)}static newUnknownDocument(t,r){return new Yo(t,3,r,Jr.min(),Jr.min(),tc.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Jr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=tc.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=tc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Jr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Yo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Yo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(t,r){this.position=t,this.inclusive=r}}function AQ(e,t,r){let n=0;for(let a=0;a<e.position.length;a++){const s=t[a],o=e.position[a];if(s.field.isKeyField()?n=yr.comparator(yr.fromName(o.referenceValue),r.key):n=tb(o,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function hQ(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!iA(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(t,r="asc"){this.field=t,this.dir=r}}function axe(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bZ{}class gi extends bZ{constructor(t,r,n){super(),this.field=t,this.op=r,this.value=n}static create(t,r,n){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,n):new ixe(t,r,n):r==="array-contains"?new cxe(t,n):r==="in"?new uxe(t,n):r==="not-in"?new dxe(t,n):r==="array-contains-any"?new fxe(t,n):new gi(t,r,n)}static createKeyFieldInFilter(t,r,n){return r==="in"?new oxe(t,n):new lxe(t,n)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(tb(r,this.value)):r!==null&&Nm(this.value)===Nm(r)&&this.matchesComparison(tb(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return zr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zd extends bZ{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new zd(t,r)}matches(t){return yZ(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function yZ(e){return e.op==="and"}function wZ(e){return sxe(e)&&yZ(e)}function sxe(e){for(const t of e.filters)if(t instanceof zd)return!1;return!0}function Y6(e){if(e instanceof gi)return e.field.canonicalString()+e.op.toString()+rb(e.value);if(wZ(e))return e.filters.map(t=>Y6(t)).join(",");{const t=e.filters.map(r=>Y6(r)).join(",");return`${e.op}(${t})`}}function EZ(e,t){return e instanceof gi?function(n,a){return a instanceof gi&&n.op===a.op&&n.field.isEqual(a.field)&&iA(n.value,a.value)}(e,t):e instanceof zd?function(n,a){return a instanceof zd&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,o,l)=>s&&EZ(o,a.filters[l]),!0):!1}(e,t):void zr(19439)}function NZ(e){return e instanceof gi?function(r){return`${r.field.canonicalString()} ${r.op} ${rb(r.value)}`}(e):e instanceof zd?function(r){return r.op.toString()+" {"+r.getFilters().map(NZ).join(" ,")+"}"}(e):"Filter"}class ixe extends gi{constructor(t,r,n){super(t,r,n),this.key=yr.fromName(n.referenceValue)}matches(t){const r=yr.comparator(t.key,this.key);return this.matchesComparison(r)}}class oxe extends gi{constructor(t,r){super(t,"in",r),this.keys=CZ("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class lxe extends gi{constructor(t,r){super(t,"not-in",r),this.keys=CZ("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function CZ(e,t){var r;return(((r=t.arrayValue)==null?void 0:r.values)||[]).map(n=>yr.fromName(n.referenceValue))}class cxe extends gi{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return lP(r)&&Vw(r.arrayValue,this.value)}}class uxe extends gi{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Vw(this.value.arrayValue,r)}}class dxe extends gi{constructor(t,r){super(t,"not-in",r)}matches(t){if(Vw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Vw(this.value.arrayValue,r)}}class fxe extends gi{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!lP(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Vw(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Axe{constructor(t,r=null,n=[],a=[],s=null,o=null,l=null){this.path=t,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function mQ(e,t=null,r=[],n=[],a=null,s=null,o=null){return new Axe(e,t,r,n,a,s,o)}function cP(e){const t=tn(e);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>Y6(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),Ek(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>rb(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>rb(n)).join(",")),t.Te=r}return t.Te}function uP(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!axe(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!EZ(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!hQ(e.startAt,t.startAt)&&hQ(e.endAt,t.endAt)}function J6(e){return yr.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(t,r=null,n=[],a=[],s=null,o="F",l=null,c=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function hxe(e,t,r,n,a,s,o,l){return new Rg(e,t,r,n,a,s,o,l)}function _k(e){return new Rg(e)}function pQ(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function dP(e){return e.collectionGroup!==null}function Tv(e){const t=tn(e);if(t.Ie===null){t.Ie=[];const r=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),r.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ii(Ji.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(t).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new zw(s,n))}),r.has(Ji.keyField().canonicalString())||t.Ie.push(new zw(Ji.keyField(),n))}return t.Ie}function eA(e){const t=tn(e);return t.Ee||(t.Ee=mxe(t,Tv(e))),t.Ee}function mxe(e,t){if(e.limitType==="F")return mQ(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new zw(a.field,s)});const r=e.endAt?new nb(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new nb(e.startAt.position,e.startAt.inclusive):null;return mQ(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function Z6(e,t){const r=e.filters.concat([t]);return new Rg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function d_(e,t,r){return new Rg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function Sk(e,t){return uP(eA(e),eA(t))&&e.limitType===t.limitType}function _Z(e){return`${cP(eA(e))}|lt:${e.limitType}`}function sv(e){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>NZ(a)).join(", ")}]`),Ek(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>rb(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>rb(a)).join(",")),`Target(${n})`}(eA(e))}; limitType=${e.limitType})`}function kk(e,t){return t.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):yr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(e,t)&&function(n,a){for(const s of Tv(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(e,t)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(e,t)&&function(n,a){return!(n.startAt&&!function(o,l,c){const u=AQ(o,l,c);return o.inclusive?u<=0:u<0}(n.startAt,Tv(n),a)||n.endAt&&!function(o,l,c){const u=AQ(o,l,c);return o.inclusive?u>=0:u>0}(n.endAt,Tv(n),a))}(e,t)}function pxe(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function SZ(e){return(t,r)=>{let n=!1;for(const a of Tv(e)){const s=gxe(a,t,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function gxe(e,t,r){const n=e.field.isKeyField()?yr.comparator(t.key,r.key):function(s,o,l){const c=o.data.field(s),u=l.data.field(s);return c!==null&&u!==null?tb(c,u):zr(42886)}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return zr(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,t))return s}}has(t){return this.get(t)!==void 0}set(t,r){const n=this.mapKeyFn(t),a=this.inner[n];if(a===void 0)return this.inner[n]=[[t,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],t))return void(a[s]=[t,r]);a.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],t))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(t){Um(this.inner,(r,n)=>{for(const[a,s]of n)t(a,s)})}isEmpty(){return dZ(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xxe=new ds(yr.comparator);function wh(){return xxe}const kZ=new ds(yr.comparator);function Qy(...e){let t=kZ;for(const r of e)t=t.insert(r.key,r);return t}function jZ(e){let t=kZ;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function Mp(){return uw()}function BZ(){return uw()}function uw(){return new Lg(e=>e.toString(),(e,t)=>e.isEqual(t))}const vxe=new ds(yr.comparator),bxe=new Ii(yr.comparator);function Tn(...e){let t=bxe;for(const r of e)t=t.add(r);return t}const yxe=new Ii(Bn);function wxe(){return yxe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:o_(t)?"-0":t}}function TZ(e){return{integerValue:""+e}}function Exe(e,t){return Xge(t)?TZ(t):fP(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(){this._=void 0}}function Nxe(e,t,r){return e instanceof $w?function(a,s){const o={fields:{[hZ]:{stringValue:AZ},[pZ]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&Nk(s)&&(s=Ck(s)),s&&(o.fields[mZ]=s),{mapValue:o}}(r,t):e instanceof ab?FZ(e,t):e instanceof Gw?OZ(e,t):function(a,s){const o=IZ(a,s),l=gQ(o)+gQ(a.Ae);return X6(o)&&X6(a.Ae)?TZ(l):fP(a.serializer,l)}(e,t)}function Cxe(e,t,r){return e instanceof ab?FZ(e,t):e instanceof Gw?OZ(e,t):r}function IZ(e,t){return e instanceof f_?function(n){return X6(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class $w extends jk{}class ab extends jk{constructor(t){super(),this.elements=t}}function FZ(e,t){const r=DZ(t);for(const n of e.elements)r.some(a=>iA(a,n))||r.push(n);return{arrayValue:{values:r}}}class Gw extends jk{constructor(t){super(),this.elements=t}}function OZ(e,t){let r=DZ(t);for(const n of e.elements)r=r.filter(a=>!iA(a,n));return{arrayValue:{values:r}}}class f_ extends jk{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function gQ(e){return Ws(e.integerValue||e.doubleValue)}function DZ(e){return lP(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PZ{constructor(t,r){this.field=t,this.transform=r}}function _xe(e,t){return e.field.isEqual(t.field)&&function(n,a){return n instanceof ab&&a instanceof ab||n instanceof Gw&&a instanceof Gw?Zv(n.elements,a.elements,iA):n instanceof f_&&a instanceof f_?iA(n.Ae,a.Ae):n instanceof $w&&a instanceof $w}(e.transform,t.transform)}class Sxe{constructor(t,r){this.version=t,this.transformResults=r}}class _l{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new _l}static exists(t){return new _l(void 0,t)}static updateTime(t){return new _l(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function x5(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Bk{}function RZ(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Tk(e.key,_l.none()):new G2(e.key,e.data,_l.none());{const r=e.data,n=tc.empty();let a=new Ii(Ji.comparator);for(let s of t.fields)if(!a.has(s)){let o=r.field(s);o===null&&s.length>1&&(s=s.popLast(),o=r.field(s)),o===null?n.delete(s):n.set(s,o),a=a.add(s)}return new Qm(e.key,n,new Vc(a.toArray()),_l.none())}}function kxe(e,t,r){e instanceof G2?function(a,s,o){const l=a.value.clone(),c=vQ(a.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,r):e instanceof Qm?function(a,s,o){if(!x5(a.precondition,s))return void s.convertToUnknownDocument(o.version);const l=vQ(a.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(LZ(a)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(e,t,r):function(a,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,r)}function dw(e,t,r,n){return e instanceof G2?function(s,o,l,c){if(!x5(s.precondition,o))return l;const u=s.value.clone(),d=bQ(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(e,t,r,n):e instanceof Qm?function(s,o,l,c){if(!x5(s.precondition,o))return l;const u=bQ(s.fieldTransforms,c,o),d=o.data;return d.setAll(LZ(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,r,n):function(s,o,l){return x5(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(e,t,r)}function jxe(e,t){let r=null;for(const n of e.fieldTransforms){const a=t.data.field(n.field),s=IZ(n.transform,a||null);s!=null&&(r===null&&(r=tc.empty()),r.set(n.field,s))}return r||null}function xQ(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Zv(n,a,(s,o)=>_xe(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class G2 extends Bk{constructor(t,r,n,a=[]){super(),this.key=t,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Qm extends Bk{constructor(t,r,n,a,s=[]){super(),this.key=t,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function LZ(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function vQ(e,t,r){const n=new Map;ia(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let a=0;a<r.length;a++){const s=e[a],o=s.transform,l=t.data.field(s.field);n.set(s.field,Cxe(o,l,r[a]))}return n}function bQ(e,t,r){const n=new Map;for(const a of e){const s=a.transform,o=r.data.field(a.field);n.set(a.field,Nxe(s,o,t))}return n}class Tk extends Bk{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bxe extends Bk{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Txe{constructor(t,r,n,a){this.batchId=t,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(t,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(t.key)&&kxe(s,t,n[a])}}applyToLocalView(t,r){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(r=dw(n,t,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(r=dw(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const n=BZ();return this.mutations.forEach(a=>{const s=t.get(a.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=r.has(a.key)?null:l;const c=RZ(o,l);c!==null&&n.set(a.key,c),o.isValidDocument()||o.convertToNoDocument(Jr.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Tn())}isEqual(t){return this.batchId===t.batchId&&Zv(this.mutations,t.mutations,(r,n)=>xQ(r,n))&&Zv(this.baseMutations,t.baseMutations,(r,n)=>xQ(r,n))}}class AP{constructor(t,r,n,a){this.batch=t,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(t,r,n){ia(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let a=function(){return vxe}();const s=t.mutations;for(let o=0;o<s.length;o++)a=a.insert(s[o].key,n[o].version);return new AP(t,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ixe{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fxe{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var di,Mn;function Oxe(e){switch(e){case Ct.OK:return zr(64938);case Ct.CANCELLED:case Ct.UNKNOWN:case Ct.DEADLINE_EXCEEDED:case Ct.RESOURCE_EXHAUSTED:case Ct.INTERNAL:case Ct.UNAVAILABLE:case Ct.UNAUTHENTICATED:return!1;case Ct.INVALID_ARGUMENT:case Ct.NOT_FOUND:case Ct.ALREADY_EXISTS:case Ct.PERMISSION_DENIED:case Ct.FAILED_PRECONDITION:case Ct.ABORTED:case Ct.OUT_OF_RANGE:case Ct.UNIMPLEMENTED:case Ct.DATA_LOSS:return!0;default:return zr(15467,{code:e})}}function MZ(e){if(e===void 0)return yh("GRPC error has no .code"),Ct.UNKNOWN;switch(e){case di.OK:return Ct.OK;case di.CANCELLED:return Ct.CANCELLED;case di.UNKNOWN:return Ct.UNKNOWN;case di.DEADLINE_EXCEEDED:return Ct.DEADLINE_EXCEEDED;case di.RESOURCE_EXHAUSTED:return Ct.RESOURCE_EXHAUSTED;case di.INTERNAL:return Ct.INTERNAL;case di.UNAVAILABLE:return Ct.UNAVAILABLE;case di.UNAUTHENTICATED:return Ct.UNAUTHENTICATED;case di.INVALID_ARGUMENT:return Ct.INVALID_ARGUMENT;case di.NOT_FOUND:return Ct.NOT_FOUND;case di.ALREADY_EXISTS:return Ct.ALREADY_EXISTS;case di.PERMISSION_DENIED:return Ct.PERMISSION_DENIED;case di.FAILED_PRECONDITION:return Ct.FAILED_PRECONDITION;case di.ABORTED:return Ct.ABORTED;case di.OUT_OF_RANGE:return Ct.OUT_OF_RANGE;case di.UNIMPLEMENTED:return Ct.UNIMPLEMENTED;case di.DATA_LOSS:return Ct.DATA_LOSS;default:return zr(39323,{code:e})}}(Mn=di||(di={}))[Mn.OK=0]="OK",Mn[Mn.CANCELLED=1]="CANCELLED",Mn[Mn.UNKNOWN=2]="UNKNOWN",Mn[Mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mn[Mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mn[Mn.NOT_FOUND=5]="NOT_FOUND",Mn[Mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mn[Mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mn[Mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mn[Mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mn[Mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mn[Mn.ABORTED=10]="ABORTED",Mn[Mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mn[Mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mn[Mn.INTERNAL=13]="INTERNAL",Mn[Mn.UNAVAILABLE=14]="UNAVAILABLE",Mn[Mn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dxe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pxe=new om([4294967295,4294967295],0);function yQ(e){const t=Dxe().encode(e),r=new JJ;return r.update(t),new Uint8Array(r.digest())}function wQ(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),a=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new om([r,n],0),new om([a,s],0)]}class hP{constructor(t,r,n){if(this.bitmap=t,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Hy(`Invalid padding: ${r}`);if(n<0)throw new Hy(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Hy(`Invalid hash count: ${n}`);if(t.length===0&&r!==0)throw new Hy(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=om.fromNumber(this.ge)}ye(t,r,n){let a=t.add(r.multiply(om.fromNumber(n)));return a.compare(Pxe)===1&&(a=new om([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=yQ(t),[n,a]=wQ(r);for(let s=0;s<this.hashCount;s++){const o=this.ye(n,a,s);if(!this.we(o))return!1}return!0}static create(t,r,n){const a=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new hP(s,a,r);return n.forEach(l=>o.insert(l)),o}insert(t){if(this.ge===0)return;const r=yQ(t),[n,a]=wQ(r);for(let s=0;s<this.hashCount;s++){const o=this.ye(n,a,s);this.Se(o)}}Se(t){const r=Math.floor(t/8),n=t%8;this.bitmap[r]|=1<<n}}class Hy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(t,r,n,a,s){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,r,n){const a=new Map;return a.set(t,q2.createSynthesizedTargetChangeForCurrentChange(t,r,n)),new Ik(Jr.min(),a,new ds(Bn),wh(),Tn())}}class q2{constructor(t,r,n,a,s){this.resumeToken=t,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,r,n){return new q2(n,r,Tn(),Tn(),Tn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(t,r,n,a){this.be=t,this.removedTargetIds=r,this.key=n,this.De=a}}class UZ{constructor(t,r){this.targetId=t,this.Ce=r}}class QZ{constructor(t,r,n=ro.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=r,this.resumeToken=n,this.cause=a}}class EQ{constructor(){this.ve=0,this.Fe=NQ(),this.Me=ro.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Tn(),r=Tn(),n=Tn();return this.Fe.forEach((a,s)=>{switch(s){case 0:t=t.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:zr(38017,{changeType:s})}}),new q2(this.Me,this.xe,t,r,n)}qe(){this.Oe=!1,this.Fe=NQ()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ia(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Rxe{constructor(t){this.Ge=t,this.ze=new Map,this.je=wh(),this.Je=PN(),this.He=PN(),this.Ye=new ds(Bn)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,r=>{const n=this.nt(r);switch(t.state){case 0:this.rt(r)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(t.resumeToken));break;default:zr(56790,{state:t.state})}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(t){const r=t.targetId,n=t.Ce.count,a=this.ot(r);if(a){const s=a.target;if(J6(s))if(n===0){const o=new yr(s.path);this.et(r,o,Yo.newNoDocument(o,Jr.min()))}else ia(n===1,20013,{expectedCount:n});else{const o=this._t(r);if(o!==n){const l=this.ut(t),c=l?this.ct(l,t,o):1;if(c!==0){this.it(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let o,l;try{o=Em(n).toUint8Array()}catch(c){if(c instanceof fZ)return mg("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new hP(o,a,s)}catch(c){return mg(c instanceof Hy?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(t,r,n){return r.Ce.count===n-this.Pt(t,r.targetId)?0:2}Pt(t,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(r,s,null),a++)}),a}Tt(t){const r=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&J6(l.target)){const c=new yr(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Yo.newNoDocument(c,t))}s.Be&&(r.set(o,s.ke()),s.qe())}});let n=Tn();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.je.forEach((s,o)=>o.setReadTime(t));const a=new Ik(t,r,this.Ye,this.je,n);return this.je=wh(),this.Je=PN(),this.He=PN(),this.Ye=new ds(Bn),a}Xe(t,r){if(!this.rt(t))return;const n=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,n){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),n&&(this.je=this.je.insert(r,n))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new EQ,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new Ii(Bn),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new Ii(Bn),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||dr("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new EQ),this.Ge.getRemoteKeysForTarget(t).forEach(r=>{this.et(t,r,null)})}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function PN(){return new ds(yr.comparator)}function NQ(){return new ds(yr.comparator)}const Lxe={asc:"ASCENDING",desc:"DESCENDING"},Mxe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Uxe={and:"AND",or:"OR"};class Qxe{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function eF(e,t){return e.useProto3Json||Ek(t)?t:{value:t}}function A_(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function HZ(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Hxe(e,t){return A_(e,t.toTimestamp())}function tA(e){return ia(!!e,49232),Jr.fromTimestamp(function(r){const n=wm(r);return new ir(n.seconds,n.nanos)}(e))}function mP(e,t){return tF(e,t).canonicalString()}function tF(e,t){const r=function(a){return new _a(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?r:r.child(t)}function VZ(e){const t=_a.fromString(e);return ia(KZ(t),10190,{key:t.toString()}),t}function rF(e,t){return mP(e.databaseId,t.path)}function Y3(e,t){const r=VZ(t);if(r.get(1)!==e.databaseId.projectId)throw new Xt(Ct.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new Xt(Ct.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new yr($Z(r))}function zZ(e,t){return mP(e.databaseId,t)}function Vxe(e){const t=VZ(e);return t.length===4?_a.emptyPath():$Z(t)}function nF(e){return new _a(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function $Z(e){return ia(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function CQ(e,t,r){return{name:rF(e,t),fields:r.value.mapValue.fields}}function zxe(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:zr(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(ia(d===void 0||typeof d=="string",58123),ro.fromBase64String(d||"")):(ia(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ro.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(u){const d=u.code===void 0?Ct.UNKNOWN:MZ(u.code);return new Xt(d,u.message||"")}(o);r=new QZ(n,a,s,l||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const a=Y3(e,n.document.name),s=tA(n.document.updateTime),o=n.document.createTime?tA(n.document.createTime):Jr.min(),l=new tc({mapValue:{fields:n.document.fields}}),c=Yo.newFoundDocument(a,s,o,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new v5(u,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const a=Y3(e,n.document),s=n.readTime?tA(n.readTime):Jr.min(),o=Yo.newNoDocument(a,s),l=n.removedTargetIds||[];r=new v5([],l,o.key,o)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const a=Y3(e,n.document),s=n.removedTargetIds||[];r=new v5([],s,a,null)}else{if(!("filter"in t))return zr(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,o=new Fxe(a,s),l=n.targetId;r=new UZ(l,o)}}return r}function $xe(e,t){let r;if(t instanceof G2)r={update:CQ(e,t.key,t.value)};else if(t instanceof Tk)r={delete:rF(e,t.key)};else if(t instanceof Qm)r={update:CQ(e,t.key,t.data),updateMask:eve(t.fieldMask)};else{if(!(t instanceof Bxe))return zr(16599,{Vt:t.type});r={verify:rF(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(n=>function(s,o){const l=o.transform;if(l instanceof $w)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ab)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Gw)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof f_)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw zr(20930,{transform:o.transform})}(0,n))),t.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:Hxe(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:zr(27497)}(e,t.precondition)),r}function Gxe(e,t){return e&&e.length>0?(ia(t!==void 0,14353),e.map(r=>function(a,s){let o=a.updateTime?tA(a.updateTime):tA(s);return o.isEqual(Jr.min())&&(o=tA(s)),new Sxe(o,a.transformResults||[])}(r,t))):[]}function qxe(e,t){return{documents:[zZ(e,t.path)]}}function Kxe(e,t){const r={structuredQuery:{}},n=t.path;let a;t.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=zZ(e,a);const s=function(u){if(u.length!==0)return qZ(zd.create(u,"and"))}(t.filters);s&&(r.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:iv(h.field),direction:Yxe(h.dir)}}(d))}(t.orderBy);o&&(r.structuredQuery.orderBy=o);const l=eF(e,t.limit);return l!==null&&(r.structuredQuery.limit=l),t.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ft:r,parent:a}}function Wxe(e){let t=Vxe(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){ia(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:t=t.child(d.collectionId)}let s=[];r.where&&(s=function(f){const h=GZ(f);return h instanceof zd&&wZ(h)?h.getFilters():[h]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(h=>function(g){return new zw(ov(g.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(r.orderBy));let l=null;r.limit&&(l=function(f){let h;return h=typeof f=="object"?f.value:f,Ek(h)?null:h}(r.limit));let c=null;r.startAt&&(c=function(f){const h=!!f.before,m=f.values||[];return new nb(m,h)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const h=!f.before,m=f.values||[];return new nb(m,h)}(r.endAt)),hxe(t,a,o,s,l,"F",c,u)}function Xxe(e,t){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zr(28987,{purpose:a})}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function GZ(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=ov(r.unaryFilter.field);return gi.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=ov(r.unaryFilter.field);return gi.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ov(r.unaryFilter.field);return gi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ov(r.unaryFilter.field);return gi.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return zr(61313);default:return zr(60726)}}(e):e.fieldFilter!==void 0?function(r){return gi.create(ov(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return zr(58110);default:return zr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return zd.create(r.compositeFilter.filters.map(n=>GZ(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return zr(1026)}}(r.compositeFilter.op))}(e):zr(30097,{filter:e})}function Yxe(e){return Lxe[e]}function Jxe(e){return Mxe[e]}function Zxe(e){return Uxe[e]}function iv(e){return{fieldPath:e.canonicalString()}}function ov(e){return Ji.fromServerFormat(e.fieldPath)}function qZ(e){return e instanceof gi?function(r){if(r.op==="=="){if(fQ(r.value))return{unaryFilter:{field:iv(r.field),op:"IS_NAN"}};if(dQ(r.value))return{unaryFilter:{field:iv(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(fQ(r.value))return{unaryFilter:{field:iv(r.field),op:"IS_NOT_NAN"}};if(dQ(r.value))return{unaryFilter:{field:iv(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:iv(r.field),op:Jxe(r.op),value:r.value}}}(e):e instanceof zd?function(r){const n=r.getFilters().map(a=>qZ(a));return n.length===1?n[0]:{compositeFilter:{op:Zxe(r.op),filters:n}}}(e):zr(54877,{filter:e})}function eve(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function KZ(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(t,r,n,a,s=Jr.min(),o=Jr.min(),l=ro.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new Y0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new Y0(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Y0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Y0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tve{constructor(t){this.yt=t}}function rve(e){const t=Wxe({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?d_(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nve{constructor(){this.Cn=new ave}addToCollectionParentIndex(t,r){return this.Cn.add(r),Dt.resolve()}getCollectionParents(t,r){return Dt.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return Dt.resolve()}deleteFieldIndex(t,r){return Dt.resolve()}deleteAllFieldIndexes(t){return Dt.resolve()}createTargetIndexes(t,r){return Dt.resolve()}getDocumentsMatchingTarget(t,r){return Dt.resolve(null)}getIndexType(t,r){return Dt.resolve(0)}getFieldIndexes(t,r){return Dt.resolve([])}getNextCollectionGroupToUpdate(t){return Dt.resolve(null)}getMinOffset(t,r){return Dt.resolve(ym.min())}getMinOffsetFromCollectionGroup(t,r){return Dt.resolve(ym.min())}updateCollectionGroup(t,r,n){return Dt.resolve()}updateIndexEntries(t,r){return Dt.resolve()}}class ave{constructor(){this.index={}}add(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r]||new Ii(_a.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(t){return(this.index[t]||new Ii(_a.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Q={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WZ=41943040;class Xl{static withCacheSize(t){return new Xl(t,Xl.DEFAULT_COLLECTION_PERCENTILE,Xl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xl.DEFAULT_COLLECTION_PERCENTILE=10,Xl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xl.DEFAULT=new Xl(WZ,Xl.DEFAULT_COLLECTION_PERCENTILE,Xl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xl.DISABLED=new Xl(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new sb(0)}static cr(){return new sb(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SQ="LruGarbageCollector",sve=1048576;function kQ([e,t],[r,n]){const a=Bn(e,r);return a===0?Bn(t,n):a}class ive{constructor(t){this.Ir=t,this.buffer=new Ii(kQ),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();kQ(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class ove{constructor(t,r,n){this.garbageCollector=t,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){dr(SQ,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Qb(r)?dr(SQ,"Ignoring IndexedDB error during garbage collection: ",r):await Ub(r)}await this.Vr(3e5)})}}class lve{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next(n=>Math.floor(r/100*n))}nthSequenceNumber(t,r){if(r===0)return Dt.resolve(wk.ce);const n=new ive(r);return this.mr.forEachTarget(t,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(t,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(t,r,n){return this.mr.removeTargets(t,r,n)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(dr("LruGarbageCollector","Garbage collection skipped; disabled"),Dt.resolve(_Q)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(dr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_Q):this.yr(t,r))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let n,a,s,o,l,c,u;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(dr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,o=Date.now(),this.nthSequenceNumber(t,a))).next(f=>(n=f,l=Date.now(),this.removeTargets(t,n,r))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(t,n))).next(f=>(u=Date.now(),av()<=jn.DEBUG&&dr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${a} in `+(l-o)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Dt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function cve(e,t){return new lve(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uve{constructor(){this.changes=new Lg(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,Yo.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Dt.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dve{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fve{constructor(t,r,n,a){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(t,r))).next(a=>(n!==null&&dw(n.mutation,a,Vc.empty(),ir.now()),a))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,Tn()).next(()=>n))}getLocalViewOfDocuments(t,r,n=Tn()){const a=Mp();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,n).next(s=>{let o=Qy();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,r){const n=Mp();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,Tn()))}populateOverlays(t,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(t,a).next(s=>{s.forEach((o,l)=>{r.set(o,l)})})}computeViews(t,r,n,a){let s=wh();const o=uw(),l=function(){return uw()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof Qm)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),dw(d.mutation,u,d.mutation.getFieldMask(),ir.now())):o.set(u.key,Vc.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),r.forEach((u,d)=>l.set(u,new dve(d,o.get(u)??null))),l))}recalculateAndSaveOverlays(t,r){const n=uw();let a=new ds((o,l)=>o-l),s=Tn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||Vc.empty();d=l.applyToLocalView(u,d),n.set(c,d);const f=(a.get(l.batchId)||Tn()).add(c);a=a.insert(l.batchId,f)})}).next(()=>{const o=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=BZ();d.forEach(h=>{if(!s.has(h)){const m=RZ(r.get(h),n.get(h));m!==null&&f.set(h,m),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(t,u,f))}return Dt.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n,a){return function(o){return yr.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):dP(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n,a):this.getDocumentsMatchingCollectionQuery(t,r,n,a)}getNextDocuments(t,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,a).next(s=>{const o=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,a-s.size):Dt.resolve(Mp());let l=Qw,c=s;return o.next(u=>Dt.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(d)?Dt.resolve():this.remoteDocumentCache.getEntry(t,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,c,u,Tn())).next(d=>({batchId:l,changes:jZ(d)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new yr(r)).next(n=>{let a=Qy();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(t,r,n,a){const s=r.collectionGroup;let o=Qy();return this.indexManager.getCollectionParents(t,s).next(l=>Dt.forEach(l,c=>{const u=function(f,h){return new Rg(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,n,a).next(d=>{d.forEach((f,h)=>{o=o.insert(f,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,s,a))).next(o=>{s.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Yo.newInvalidDocument(d)))});let l=Qy();return o.forEach((c,u)=>{const d=s.get(c);d!==void 0&&dw(d.mutation,u,Vc.empty(),ir.now()),kk(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ave{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return Dt.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:tA(a.createTime)}}(r)),Dt.resolve()}getNamedQuery(t,r){return Dt.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,function(a){return{name:a.name,query:rve(a.bundledQuery),readTime:tA(a.readTime)}}(r)),Dt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hve{constructor(){this.overlays=new ds(yr.comparator),this.qr=new Map}getOverlay(t,r){return Dt.resolve(this.overlays.get(r))}getOverlays(t,r){const n=Mp();return Dt.forEach(r,a=>this.getOverlay(t,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((a,s)=>{this.St(t,r,s)}),Dt.resolve()}removeOverlaysForBatchId(t,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),Dt.resolve()}getOverlaysForCollection(t,r,n){const a=Mp(),s=r.length+1,o=new yr(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return Dt.resolve(a)}getOverlaysForCollectionGroup(t,r,n,a){let s=new ds((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=Mp(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Mp(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=a)););return Dt.resolve(l)}St(t,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new Ixe(r,n));let s=this.qr.get(r);s===void 0&&(s=Tn(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mve{constructor(){this.sessionToken=ro.EMPTY_BYTE_STRING}getSessionToken(t){return Dt.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Dt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(){this.Qr=new Ii(Ki.$r),this.Ur=new Ii(Ki.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const n=new Ki(t,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.Gr(new Ki(t,r))}zr(t,r){t.forEach(n=>this.removeReference(n,r))}jr(t){const r=new yr(new _a([])),n=new Ki(r,t),a=new Ki(r,t+1),s=[];return this.Ur.forEachInRange([n,a],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new yr(new _a([])),n=new Ki(r,t),a=new Ki(r,t+1);let s=Tn();return this.Ur.forEachInRange([n,a],o=>{s=s.add(o.key)}),s}containsKey(t){const r=new Ki(t,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}}class Ki{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return yr.comparator(t.key,r.key)||Bn(t.Yr,r.Yr)}static Kr(t,r){return Bn(t.Yr,r.Yr)||yr.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pve{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Ii(Ki.$r)}checkEmpty(t){return Dt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Txe(s,r,n,a);this.mutationQueue.push(o);for(const l of a)this.Zr=this.Zr.add(new Ki(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return Dt.resolve(o)}lookupMutationBatch(t,r){return Dt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return Dt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Dt.resolve(this.mutationQueue.length===0?oP:this.tr-1)}getAllMutationBatches(t){return Dt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const n=new Ki(r,0),a=new Ki(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],o=>{const l=this.Xr(o.Yr);s.push(l)}),Dt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new Ii(Bn);return r.forEach(a=>{const s=new Ki(a,0),o=new Ki(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{n=n.add(l.Yr)})}),Dt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,a=n.length+1;let s=n;yr.isDocumentKey(s)||(s=s.child(""));const o=new Ki(new yr(s),0);let l=new Ii(Bn);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(l=l.add(c.Yr)),!0)},o),Dt.resolve(this.ti(l))}ti(t){const r=[];return t.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(t,r){ia(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Dt.forEach(r.mutations,a=>{const s=new Ki(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Zr=n})}ir(t){}containsKey(t,r){const n=new Ki(r,0),a=this.Zr.firstAfterOrEqual(n);return Dt.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,Dt.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gve{constructor(t){this.ri=t,this.docs=function(){return new ds(yr.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,o=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const n=this.docs.get(r);return Dt.resolve(n?n.document.mutableCopy():Yo.newInvalidDocument(r))}getEntries(t,r){let n=wh();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():Yo.newInvalidDocument(a))}),Dt.resolve(n)}getDocumentsMatchingQuery(t,r,n,a){let s=wh();const o=r.path,l=new yr(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Gge($ge(d),n)<=0||(a.has(d.key)||kk(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Dt.resolve(s)}getAllFromCollectionGroup(t,r,n,a){zr(9500)}ii(t,r){return Dt.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new xve(this)}getSize(t){return Dt.resolve(this.size)}}class xve extends uve{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(n)}),Dt.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vve{constructor(t){this.persistence=t,this.si=new Lg(r=>cP(r),uP),this.lastRemoteSnapshotVersion=Jr.min(),this.highestTargetId=0,this.oi=0,this._i=new pP,this.targetCount=0,this.ai=sb.ur()}forEachTarget(t,r){return this.si.forEach((n,a)=>r(a)),Dt.resolve()}getLastRemoteSnapshotVersion(t){return Dt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Dt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Dt.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Dt.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new sb(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,Dt.resolve()}updateTargetData(t,r){return this.Pr(r),Dt.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Dt.resolve()}removeTargets(t,r,n){let a=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),a++)}),Dt.waitFor(s).next(()=>a)}getTargetCount(t){return Dt.resolve(this.targetCount)}getTargetData(t,r){const n=this.si.get(r)||null;return Dt.resolve(n)}addMatchingKeys(t,r,n){return this._i.Wr(r,n),Dt.resolve()}removeMatchingKeys(t,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(o=>{s.push(a.markPotentiallyOrphaned(t,o))}),Dt.waitFor(s)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),Dt.resolve()}getMatchingKeysForTargetId(t,r){const n=this._i.Hr(r);return Dt.resolve(n)}containsKey(t,r){return Dt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XZ{constructor(t,r){this.ui={},this.overlays={},this.ci=new wk(0),this.li=!1,this.li=!0,this.hi=new mve,this.referenceDelegate=t(this),this.Pi=new vve(this),this.indexManager=new nve,this.remoteDocumentCache=function(a){return new gve(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new tve(r),this.Ii=new Ave(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new hve,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.ui[t.toKey()];return n||(n=new pve(r,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,n){dr("MemoryPersistence","Starting transaction:",t);const a=new bve(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(t,r){return Dt.or(Object.values(this.ui).map(n=>()=>n.containsKey(t,r)))}}class bve extends Kge{constructor(t){super(),this.currentSequenceNumber=t}}class gP{constructor(t){this.persistence=t,this.Ri=new pP,this.Vi=null}static mi(t){return new gP(t)}get fi(){if(this.Vi)return this.Vi;throw zr(60996)}addReference(t,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Dt.resolve()}removeReference(t,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Dt.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),Dt.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(t,r))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Dt.forEach(this.fi,n=>{const a=yr.fromPath(n);return this.gi(t,a).next(s=>{s||r.removeEntry(a,Jr.min())})}).next(()=>(this.Vi=null,r.apply(t)))}updateLimboDocument(t,r){return this.gi(t,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(t){return 0}gi(t,r){return Dt.or([()=>Dt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class h_{constructor(t,r){this.persistence=t,this.pi=new Lg(n=>Yge(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=cve(this,r)}static mi(t,r){return new h_(t,r)}Ei(){}di(t){return Dt.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(n=>r.next(a=>n+a))}wr(t){let r=0;return this.pr(t,n=>{r++}).next(()=>r)}pr(t,r){return Dt.forEach(this.pi,(n,a)=>this.br(t,n,a).next(s=>s?Dt.resolve():r(a)))}removeTargets(t,r,n){return this.persistence.getTargetCache().removeTargets(t,r,n)}removeOrphanedDocuments(t,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(t,o=>this.br(t,o,r).next(l=>{l||(n++,s.removeEntry(o,Jr.min()))})).next(()=>s.apply(t)).next(()=>n)}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),Dt.resolve()}removeTarget(t,r){const n=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Dt.resolve()}removeReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Dt.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),Dt.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=p5(t.data.value)),r}br(t,r,n){return Dt.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const a=this.pi.get(r);return Dt.resolve(a!==void 0&&a>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(t,r,n,a){this.targetId=t,this.fromCache=r,this.Es=n,this.ds=a}static As(t,r){let n=Tn(),a=Tn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new xP(t,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yve{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wve{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Zhe()?8:Wge(il())>0?6:4}()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,n,a){const s={result:null};return this.ys(t,r).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(t,r,a,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new yve;return this.Ss(t,r,o).next(l=>{if(s.result=l,this.Vs)return this.bs(t,r,o,l.size)})}).next(()=>s.result)}bs(t,r,n,a){return n.documentReadCount<this.fs?(av()<=jn.DEBUG&&dr("QueryEngine","SDK will not create cache indexes for query:",sv(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Dt.resolve()):(av()<=jn.DEBUG&&dr("QueryEngine","Query:",sv(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(av()<=jn.DEBUG&&dr("QueryEngine","The SDK decides to create cache indexes for query:",sv(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,eA(r))):Dt.resolve())}ys(t,r){if(pQ(r))return Dt.resolve(null);let n=eA(r);return this.indexManager.getIndexType(t,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=d_(r,null,"F"),n=eA(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const o=Tn(...s);return this.ps.getDocuments(t,o).next(l=>this.indexManager.getMinOffset(t,n).next(c=>{const u=this.Ds(r,l);return this.Cs(r,u,o,c.readTime)?this.ys(t,d_(r,null,"F")):this.vs(t,u,r,c)}))})))}ws(t,r,n,a){return pQ(r)||a.isEqual(Jr.min())?Dt.resolve(null):this.ps.getDocuments(t,n).next(s=>{const o=this.Ds(r,s);return this.Cs(r,o,n,a)?Dt.resolve(null):(av()<=jn.DEBUG&&dr("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),sv(r)),this.vs(t,o,r,zge(a,Qw)).next(l=>l))})}Ds(t,r){let n=new Ii(SZ(t));return r.forEach((a,s)=>{kk(t,s)&&(n=n.add(s))}),n}Cs(t,r,n,a){if(t.limit===null)return!1;if(n.size!==r.size)return!0;const s=t.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(t,r,n){return av()<=jn.DEBUG&&dr("QueryEngine","Using full collection scan to execute query:",sv(r)),this.ps.getDocumentsMatchingQuery(t,r,ym.min(),n)}vs(t,r,n,a){return this.ps.getDocumentsMatchingQuery(t,n,a).next(s=>(r.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP="LocalStore",Eve=3e8;class Nve{constructor(t,r,n,a){this.persistence=t,this.Fs=r,this.serializer=a,this.Ms=new ds(Bn),this.xs=new Lg(s=>cP(s),uP),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new fve(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ms))}}function Cve(e,t,r,n){return new Nve(e,t,r,n)}async function YZ(e,t){const r=tn(e);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(t),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],l=[];let c=Tn();for(const u of a){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function _ve(e,t){const r=tn(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=t.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,h=f.keys();let m=Dt.resolve();return h.forEach(g=>{m=m.next(()=>d.getEntry(c,g)).next(x=>{const v=u.docVersions.get(g);ia(v!==null,48541),x.version.compareTo(v)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,n,t,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=Tn();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(t))).next(()=>r.localDocuments.getDocuments(n,a))})}function JZ(e){const t=tn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Pi.getLastRemoteSnapshotVersion(r))}function Sve(e,t){const r=tn(e),n=t.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const l=[];t.targetChanges.forEach((d,f)=>{const h=a.get(f);if(!h)return;l.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,f)));let m=h.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?m=m.withResumeToken(ro.EMPTY_BYTE_STRING,Jr.min()).withLastLimboFreeSnapshotVersion(Jr.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),a=a.insert(f,m),function(x,v,y){return x.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=Eve?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,m,d)&&l.push(r.Pi.updateTargetData(s,m))});let c=wh(),u=Tn();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(kve(s,o,t.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!n.isEqual(Jr.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(f=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(d)}return Dt.waitFor(l).next(()=>o.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.Ms=a,s))}function kve(e,t,r){let n=Tn(),a=Tn();return r.forEach(s=>n=n.add(s)),t.getEntries(e,n).next(s=>{let o=wh();return r.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual(Jr.min())?(t.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),o=o.insert(l,c)):dr(vP,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:a}})}function jve(e,t){const r=tn(e);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=oP),r.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function Bve(e,t){const r=tn(e);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,t).next(s=>s?(a=s,Dt.resolve(a)):r.Pi.allocateTargetId(n).next(o=>(a=new Y0(t,o,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(t,n.targetId)),n})}async function aF(e,t,r){const n=tn(e),a=n.Ms.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,a))}catch(o){if(!Qb(o))throw o;dr(vP,`Failed to update sequence numbers for target ${t}: ${o}`)}n.Ms=n.Ms.remove(t),n.xs.delete(a.target)}function jQ(e,t,r){const n=tn(e);let a=Jr.min(),s=Tn();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=tn(c),h=f.xs.get(d);return h!==void 0?Dt.resolve(f.Ms.get(h)):f.Pi.getTargetData(u,d)}(n,o,eA(t)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>n.Fs.getDocumentsMatchingQuery(o,t,r?a:Jr.min(),r?s:Tn())).next(l=>(Tve(n,pxe(t),l),{documents:l,Qs:s})))}function Tve(e,t,r){let n=e.Os.get(t)||Jr.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),e.Os.set(t,n)}class BQ{constructor(){this.activeTargetIds=wxe()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Ive{constructor(){this.Mo=new BQ,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,n){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new BQ,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fve{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TQ="ConnectivityMonitor";class IQ{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){dr(TQ,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){dr(TQ,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RN=null;function sF(){return RN===null?RN=function(){return 268435456+Math.round(2147483648*Math.random())}():RN++,"0x"+RN.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3="RestConnection",Ove={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Dve{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===l_?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(t,r,n,a,s){const o=sF(),l=this.zo(t,r.toUriEncodedString());dr(J3,`Sending RPC '${t}' ${o}:`,l,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,a,s);const{host:u}=new URL(l),d=Rh(u);return this.Jo(t,l,c,n,d).then(f=>(dr(J3,`Received RPC '${t}' ${o}: `,f),f),f=>{throw mg(J3,`RPC '${t}' ${o} failed with error: `,f,"url: ",l,"request:",n),f})}Ho(t,r,n,a,s,o){return this.Go(t,r,n,a,s)}jo(t,r,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mb}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>t[s]=a),n&&n.headers.forEach((a,s)=>t[s]=a)}zo(t,r){const n=Ove[t];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pve{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo="WebChannelConnection";class Rve extends Dve{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,n,a,s){const o=sF();return new Promise((l,c)=>{const u=new ZJ;u.setWithCredentials(!0),u.listenOnce(eZ.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case m5.NO_ERROR:const f=u.getResponseJson();dr(Mo,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(f)),l(f);break;case m5.TIMEOUT:dr(Mo,`RPC '${t}' ${o} timed out`),c(new Xt(Ct.DEADLINE_EXCEEDED,"Request time out"));break;case m5.HTTP_ERROR:const h=u.getStatus();if(dr(Mo,`RPC '${t}' ${o} failed with status:`,h,"response text:",u.getResponseText()),h>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const x=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(Ct).indexOf(w)>=0?w:Ct.UNKNOWN}(g.status);c(new Xt(x,g.message))}else c(new Xt(Ct.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Xt(Ct.UNAVAILABLE,"Connection failed."));break;default:zr(9055,{l_:t,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{dr(Mo,`RPC '${t}' ${o} completed.`)}});const d=JSON.stringify(a);dr(Mo,`RPC '${t}' ${o} sending request:`,a),u.send(r,"POST",d,n,15)})}T_(t,r,n){const a=sF(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=nZ(),l=rZ(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");dr(Mo,`Creating RPC '${t}' stream ${a}: ${d}`,c);const f=o.createWebChannel(d,c);this.I_(f);let h=!1,m=!1;const g=new Pve({Yo:v=>{m?dr(Mo,`Not sending because RPC '${t}' stream ${a} is closed:`,v):(h||(dr(Mo,`Opening RPC '${t}' stream ${a} transport.`),f.open(),h=!0),dr(Mo,`RPC '${t}' stream ${a} sending:`,v),f.send(v))},Zo:()=>f.close()}),x=(v,y,w)=>{v.listen(y,_=>{try{w(_)}catch(T){setTimeout(()=>{throw T},0)}})};return x(f,Uy.EventType.OPEN,()=>{m||(dr(Mo,`RPC '${t}' stream ${a} transport opened.`),g.o_())}),x(f,Uy.EventType.CLOSE,()=>{m||(m=!0,dr(Mo,`RPC '${t}' stream ${a} transport closed`),g.a_(),this.E_(f))}),x(f,Uy.EventType.ERROR,v=>{m||(m=!0,mg(Mo,`RPC '${t}' stream ${a} transport errored. Name:`,v.name,"Message:",v.message),g.a_(new Xt(Ct.UNAVAILABLE,"The operation could not be completed")))}),x(f,Uy.EventType.MESSAGE,v=>{var y;if(!m){const w=v.data[0];ia(!!w,16349);const _=w,T=(_==null?void 0:_.error)||((y=_[0])==null?void 0:y.error);if(T){dr(Mo,`RPC '${t}' stream ${a} received error:`,T);const j=T.status;let I=function(B){const M=di[B];if(M!==void 0)return MZ(M)}(j),E=T.message;I===void 0&&(I=Ct.INTERNAL,E="Unknown error status: "+j+" with message "+T.message),m=!0,g.a_(new Xt(I,E)),f.close()}else dr(Mo,`RPC '${t}' stream ${a} received:`,w),g.u_(w)}}),x(l,tZ.STAT_EVENT,v=>{v.stat===q6.PROXY?dr(Mo,`RPC '${t}' stream ${a} detected buffering proxy`):v.stat===q6.NOPROXY&&dr(Mo,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(r=>r===t)}}function Z3(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(e){return new Qxe(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZZ{constructor(t,r,n=1e3,a=1.5,s=6e4){this.Mi=t,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&dr("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FQ="PersistentStream";class eee{constructor(t,r,n,a,s,o,l,c){this.Mi=t,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ZZ(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===Ct.RESOURCE_EXHAUSTED?(yh(r.toString()),yh("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===Ct.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{t(()=>{const a=new Xt(Ct.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(t,r){const n=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return dr(FQ,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget(()=>this.D_===t?r():(dr(FQ,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Lve extends eee{constructor(t,r,n,a,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=zxe(this.serializer,t),n=function(s){if(!("targetChange"in s))return Jr.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Jr.min():o.readTime?tA(o.readTime):Jr.min()}(t);return this.listener.H_(r,n)}Y_(t){const r={};r.database=nF(this.serializer),r.addTarget=function(s,o){let l;const c=o.target;if(l=J6(c)?{documents:qxe(s,c)}:{query:Kxe(s,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=HZ(s,o.resumeToken);const u=eF(s,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Jr.min())>0){l.readTime=A_(s,o.snapshotVersion.toTimestamp());const u=eF(s,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,t);const n=Xxe(this.serializer,t);n&&(r.labels=n),this.q_(r)}Z_(t){const r={};r.database=nF(this.serializer),r.removeTarget=t,this.q_(r)}}class Mve extends eee{constructor(t,r,n,a,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return ia(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ia(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ia(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=Gxe(t.writeResults,t.commitTime),n=tA(t.commitTime);return this.listener.na(n,r)}ra(){const t={};t.database=nF(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map(n=>$xe(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uve{}class Qve extends Uve{constructor(t,r,n,a){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Xt(Ct.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(t,tF(r,n),a,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Xt(Ct.UNKNOWN,s.toString())})}Ho(t,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(t,tF(r,n),a,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Xt(Ct.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Hve{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yh(r),this.aa=!1):dr("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="RemoteStore";class Vve{constructor(t,r,n,a,s){this.localStore=t,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{n.enqueueAndForget(async()=>{Mg(this)&&(dr(pg,"Restarting streams for network reachability change."),await async function(c){const u=tn(c);u.Ea.add(4),await K2(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Ok(u)}(this))})}),this.Ra=new Hve(n,a)}}async function Ok(e){if(Mg(e))for(const t of e.da)await t(!0)}async function K2(e){for(const t of e.da)await t(!1)}function tee(e,t){const r=tn(e);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),EP(r)?wP(r):Hb(r).O_()&&yP(r,t))}function bP(e,t){const r=tn(e),n=Hb(r);r.Ia.delete(t),n.O_()&&ree(r,t),r.Ia.size===0&&(n.O_()?n.L_():Mg(r)&&r.Ra.set("Unknown"))}function yP(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Jr.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Hb(e).Y_(t)}function ree(e,t){e.Va.Ue(t),Hb(e).Z_(t)}function wP(e){e.Va=new Rxe({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Hb(e).start(),e.Ra.ua()}function EP(e){return Mg(e)&&!Hb(e).x_()&&e.Ia.size>0}function Mg(e){return tn(e).Ea.size===0}function nee(e){e.Va=void 0}async function zve(e){e.Ra.set("Online")}async function $ve(e){e.Ia.forEach((t,r)=>{yP(e,t)})}async function Gve(e,t){nee(e),EP(e)?(e.Ra.ha(t),wP(e)):e.Ra.set("Unknown")}async function qve(e,t,r){if(e.Ra.set("Online"),t instanceof QZ&&t.state===2&&t.cause)try{await async function(a,s){const o=s.cause;for(const l of s.targetIds)a.Ia.has(l)&&(await a.remoteSyncer.rejectListen(l,o),a.Ia.delete(l),a.Va.removeTarget(l))}(e,t)}catch(n){dr(pg,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await m_(e,n)}else if(t instanceof v5?e.Va.Ze(t):t instanceof UZ?e.Va.st(t):e.Va.tt(t),!r.isEqual(Jr.min()))try{const n=await JZ(e.localStore);r.compareTo(n)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=s.Ia.get(c);if(!d)return;s.Ia.set(c,d.withResumeToken(ro.EMPTY_BYTE_STRING,d.snapshotVersion)),ree(s,c);const f=new Y0(d.target,c,u,d.sequenceNumber);yP(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(e,r)}catch(n){dr(pg,"Failed to raise snapshot:",n),await m_(e,n)}}async function m_(e,t,r){if(!Qb(t))throw t;e.Ea.add(1),await K2(e),e.Ra.set("Offline"),r||(r=()=>JZ(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{dr(pg,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await Ok(e)})}function aee(e,t){return t().catch(r=>m_(e,r,t))}async function Dk(e){const t=tn(e),r=Cm(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:oP;for(;Kve(t);)try{const a=await jve(t.localStore,n);if(a===null){t.Ta.length===0&&r.L_();break}n=a.batchId,Wve(t,a)}catch(a){await m_(t,a)}see(t)&&iee(t)}function Kve(e){return Mg(e)&&e.Ta.length<10}function Wve(e,t){e.Ta.push(t);const r=Cm(e);r.O_()&&r.X_&&r.ea(t.mutations)}function see(e){return Mg(e)&&!Cm(e).x_()&&e.Ta.length>0}function iee(e){Cm(e).start()}async function Xve(e){Cm(e).ra()}async function Yve(e){const t=Cm(e);for(const r of e.Ta)t.ea(r.mutations)}async function Jve(e,t,r){const n=e.Ta.shift(),a=AP.from(n,t,r);await aee(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await Dk(e)}async function Zve(e,t){t&&Cm(e).X_&&await async function(n,a){if(function(o){return Oxe(o)&&o!==Ct.ABORTED}(a.code)){const s=n.Ta.shift();Cm(n).B_(),await aee(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await Dk(n)}}(e,t),see(e)&&iee(e)}async function OQ(e,t){const r=tn(e);r.asyncQueue.verifyOperationInProgress(),dr(pg,"RemoteStore received new credentials");const n=Mg(r);r.Ea.add(3),await K2(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await Ok(r)}async function ebe(e,t){const r=tn(e);t?(r.Ea.delete(2),await Ok(r)):t||(r.Ea.add(2),await K2(r),r.Ra.set("Unknown"))}function Hb(e){return e.ma||(e.ma=function(r,n,a){const s=tn(r);return s.sa(),new Lve(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:zve.bind(null,e),t_:$ve.bind(null,e),r_:Gve.bind(null,e),H_:qve.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),EP(e)?wP(e):e.Ra.set("Unknown")):(await e.ma.stop(),nee(e))})),e.ma}function Cm(e){return e.fa||(e.fa=function(r,n,a){const s=tn(r);return s.sa(),new Mve(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Xve.bind(null,e),r_:Zve.bind(null,e),ta:Yve.bind(null,e),na:Jve.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Dk(e)):(await e.fa.stop(),e.Ta.length>0&&(dr(pg,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(t,r,n,a,s){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new ch,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,a,s){const o=Date.now()+n,l=new NP(t,r,o,a,s);return l.start(n),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xt(Ct.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function CP(e,t){if(yh("AsyncQueue",`${t}: ${e}`),Qb(e))return new Xt(Ct.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{static emptySet(t){return new Iv(t.comparator)}constructor(t){this.comparator=t?(r,n)=>t(r,n)||yr.comparator(r.key,n.key):(r,n)=>yr.comparator(r.key,n.key),this.keyedMap=Qy(),this.sortedSet=new ds(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,n)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof Iv)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const n=new Iv;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DQ{constructor(){this.ga=new ds(yr.comparator)}track(t){const r=t.doc.key,n=this.ga.get(r);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(r,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(r):t.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):zr(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal((r,n)=>{t.push(n)}),t}}class ib{constructor(t,r,n,a,s,o,l,c,u){this.query=t,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,r,n,a,s){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new ib(t,r,Iv.emptySet(r),o,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Sk(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,n=t.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tbe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class rbe{constructor(){this.queries=PQ(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=tn(r),s=a.queries;a.queries=PQ(),s.forEach((o,l)=>{for(const c of l.Sa)c.onError(n)})})(this,new Xt(Ct.ABORTED,"Firestore shutting down"))}}function PQ(){return new Lg(e=>_Z(e),Sk)}async function _P(e,t){const r=tn(e);let n=3;const a=t.query;let s=r.queries.get(a);s?!s.ba()&&t.Da()&&(n=2):(s=new tbe,n=t.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const l=CP(o,`Initialization of query '${sv(t.query)}' failed`);return void t.onError(l)}r.queries.set(a,s),s.Sa.push(t),t.va(r.onlineState),s.wa&&t.Fa(s.wa)&&kP(r)}async function SP(e,t){const r=tn(e),n=t.query;let a=3;const s=r.queries.get(n);if(s){const o=s.Sa.indexOf(t);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?a=t.Da()?0:1:!s.ba()&&t.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function nbe(e,t){const r=tn(e);let n=!1;for(const a of t){const s=a.query,o=r.queries.get(s);if(o){for(const l of o.Sa)l.Fa(a)&&(n=!0);o.wa=a}}n&&kP(r)}function abe(e,t,r){const n=tn(e),a=n.queries.get(t);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(t)}function kP(e){e.Ca.forEach(t=>{t.next()})}var iF,RQ;(RQ=iF||(iF={})).Ma="default",RQ.Cache="cache";class jP{constructor(t,r,n){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const a of t.docChanges)a.type!==3&&n.push(a);t=new ib(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=ib.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==iF.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oee{constructor(t){this.key=t}}class lee{constructor(t){this.key=t}}class sbe{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Tn(),this.mutatedKeys=Tn(),this.eu=SZ(t),this.tu=new Iv(this.eu)}get nu(){return this.Ya}ru(t,r){const n=r?r.iu:new DQ,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,o=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((d,f)=>{const h=a.get(d),m=kk(this.query,f)?f:null,g=!!h&&this.mutatedKeys.has(h.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let v=!1;h&&m?h.data.isEqual(m.data)?g!==x&&(n.track({type:3,doc:m}),v=!0):this.su(h,m)||(n.track({type:2,doc:m}),v=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(l=!0)):!h&&m?(n.track({type:0,doc:m}),v=!0):h&&!m&&(n.track({type:1,doc:h}),v=!0,(c||u)&&(l=!0)),v&&(m?(o=o.add(m),s=x?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:o,iu:n,Cs:l,mutatedKeys:s}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,n,a){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort((d,f)=>function(m,g){const x=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zr(20277,{Rt:v})}};return x(m)-x(g)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(n),a=a??!1;const l=r&&!a?this._u():[],c=this.Xa.size===0&&this.current&&!a?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new ib(this.query,t.tu,s,o,t.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new DQ,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Tn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return t.forEach(n=>{this.Xa.has(n)||r.push(new lee(n))}),this.Xa.forEach(n=>{t.has(n)||r.push(new oee(n))}),r}cu(t){this.Ya=t.Qs,this.Xa=Tn();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return ib.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const BP="SyncEngine";class ibe{constructor(t,r,n){this.query=t,this.targetId=r,this.view=n}}class obe{constructor(t){this.key=t,this.hu=!1}}class lbe{constructor(t,r,n,a,s,o){this.localStore=t,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Lg(l=>_Z(l),Sk),this.Iu=new Map,this.Eu=new Set,this.du=new ds(yr.comparator),this.Au=new Map,this.Ru=new pP,this.Vu={},this.mu=new Map,this.fu=sb.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function cbe(e,t,r=!0){const n=hee(e);let a;const s=n.Tu.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await cee(n,t,r,!0),a}async function ube(e,t){const r=hee(e);await cee(r,t,!0,!1)}async function cee(e,t,r,n){const a=await Bve(e.localStore,eA(t)),s=a.targetId,o=e.sharedClientState.addLocalQueryTarget(s,r);let l;return n&&(l=await dbe(e,t,s,o==="current",a.resumeToken)),e.isPrimaryClient&&r&&tee(e.remoteStore,a),l}async function dbe(e,t,r,n,a){e.pu=(f,h,m)=>async function(x,v,y,w){let _=v.view.ru(y);_.Cs&&(_=await jQ(x.localStore,v.query,!1).then(({documents:E})=>v.view.ru(E,_)));const T=w&&w.targetChanges.get(v.targetId),j=w&&w.targetMismatches.get(v.targetId)!=null,I=v.view.applyChanges(_,x.isPrimaryClient,T,j);return MQ(x,v.targetId,I.au),I.snapshot}(e,f,h,m);const s=await jQ(e.localStore,t,!0),o=new sbe(t,s.Qs),l=o.ru(s.documents),c=q2.createSynthesizedTargetChangeForCurrentChange(r,n&&e.onlineState!=="Offline",a),u=o.applyChanges(l,e.isPrimaryClient,c);MQ(e,r,u.au);const d=new ibe(t,r,o);return e.Tu.set(t,d),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),u.snapshot}async function fbe(e,t,r){const n=tn(e),a=n.Tu.get(t),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(o=>!Sk(o,t))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await aF(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&bP(n.remoteStore,a.targetId),oF(n,a.targetId)}).catch(Ub)):(oF(n,a.targetId),await aF(n.localStore,a.targetId,!0))}async function Abe(e,t){const r=tn(e),n=r.Tu.get(t),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),bP(r.remoteStore,n.targetId))}async function hbe(e,t,r){const n=ybe(e);try{const a=await function(o,l){const c=tn(o),u=ir.now(),d=l.reduce((m,g)=>m.add(g.key),Tn());let f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=wh(),x=Tn();return c.Ns.getEntries(m,d).next(v=>{g=v,g.forEach((y,w)=>{w.isValidDocument()||(x=x.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,g)).next(v=>{f=v;const y=[];for(const w of l){const _=jxe(w,f.get(w.key).overlayedDocument);_!=null&&y.push(new Qm(w.key,_,vZ(_.value.mapValue),_l.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,y,l)}).next(v=>{h=v;const y=v.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(m,v.batchId,y)})}).then(()=>({batchId:h.batchId,changes:jZ(f)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(a.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new ds(Bn)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(n,a.batchId,r),await W2(n,a.changes),await Dk(n.remoteStore)}catch(a){const s=CP(a,"Failed to persist write");r.reject(s)}}async function uee(e,t){const r=tn(e);try{const n=await Sve(r.localStore,t);t.targetChanges.forEach((a,s)=>{const o=r.Au.get(s);o&&(ia(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?o.hu=!0:a.modifiedDocuments.size>0?ia(o.hu,14607):a.removedDocuments.size>0&&(ia(o.hu,42227),o.hu=!1))}),await W2(r,n,t)}catch(n){await Ub(n)}}function LQ(e,t,r){const n=tn(e);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,o)=>{const l=o.view.va(t);l.snapshot&&a.push(l.snapshot)}),function(o,l){const c=tn(o);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const h of f.Sa)h.va(l)&&(u=!0)}),u&&kP(c)}(n.eventManager,t),a.length&&n.Pu.H_(a),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function mbe(e,t,r){const n=tn(e);n.sharedClientState.updateQueryState(t,"rejected",r);const a=n.Au.get(t),s=a&&a.key;if(s){let o=new ds(yr.comparator);o=o.insert(s,Yo.newNoDocument(s,Jr.min()));const l=Tn().add(s),c=new Ik(Jr.min(),new Map,new ds(Bn),o,l);await uee(n,c),n.du=n.du.remove(s),n.Au.delete(t),TP(n)}else await aF(n.localStore,t,!1).then(()=>oF(n,t,r)).catch(Ub)}async function pbe(e,t){const r=tn(e),n=t.batch.batchId;try{const a=await _ve(r.localStore,t);fee(r,n,null),dee(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await W2(r,a)}catch(a){await Ub(a)}}async function gbe(e,t,r){const n=tn(e);try{const a=await function(o,l){const c=tn(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(ia(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,t);fee(n,t,r),dee(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await W2(n,a)}catch(a){await Ub(a)}}function dee(e,t){(e.mu.get(t)||[]).forEach(r=>{r.resolve()}),e.mu.delete(t)}function fee(e,t,r){const n=tn(e);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(t);s&&(r?s.reject(r):s.resolve(),a=a.remove(t)),n.Vu[n.currentUser.toKey()]=a}}function oF(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Iu.get(t))e.Tu.delete(n),r&&e.Pu.yu(n,r);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(n=>{e.Ru.containsKey(n)||Aee(e,n)})}function Aee(e,t){e.Eu.delete(t.path.canonicalString());const r=e.du.get(t);r!==null&&(bP(e.remoteStore,r),e.du=e.du.remove(t),e.Au.delete(r),TP(e))}function MQ(e,t,r){for(const n of r)n instanceof oee?(e.Ru.addReference(n.key,t),xbe(e,n)):n instanceof lee?(dr(BP,"Document no longer in limbo: "+n.key),e.Ru.removeReference(n.key,t),e.Ru.containsKey(n.key)||Aee(e,n.key)):zr(19791,{wu:n})}function xbe(e,t){const r=t.key,n=r.path.canonicalString();e.du.get(r)||e.Eu.has(n)||(dr(BP,"New document in limbo: "+r),e.Eu.add(n),TP(e))}function TP(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const r=new yr(_a.fromString(t)),n=e.fu.next();e.Au.set(n,new obe(r)),e.du=e.du.insert(r,n),tee(e.remoteStore,new Y0(eA(_k(r.path)),n,"TargetPurposeLimboResolution",wk.ce))}}async function W2(e,t,r){const n=tn(e),a=[],s=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach((l,c)=>{o.push(n.pu(c,t,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){a.push(u);const f=xP.As(c.targetId,u);s.push(f)}}))}),await Promise.all(o),n.Pu.H_(a),await async function(c,u){const d=tn(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Dt.forEach(u,h=>Dt.forEach(h.Es,m=>d.persistence.referenceDelegate.addReference(f,h.targetId,m)).next(()=>Dt.forEach(h.ds,m=>d.persistence.referenceDelegate.removeReference(f,h.targetId,m)))))}catch(f){if(!Qb(f))throw f;dr(vP,"Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const m=d.Ms.get(h),g=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(g);d.Ms=d.Ms.insert(h,x)}}}(n.localStore,s))}async function vbe(e,t){const r=tn(e);if(!r.currentUser.isEqual(t)){dr(BP,"User change. New user:",t.toKey());const n=await YZ(r.localStore,t);r.currentUser=t,function(s,o){s.mu.forEach(l=>{l.forEach(c=>{c.reject(new Xt(Ct.CANCELLED,o))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await W2(r,n.Ls)}}function bbe(e,t){const r=tn(e),n=r.Au.get(t);if(n&&n.hu)return Tn().add(n.key);{let a=Tn();const s=r.Iu.get(t);if(!s)return a;for(const o of s){const l=r.Tu.get(o);a=a.unionWith(l.view.nu)}return a}}function hee(e){const t=tn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=uee.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=bbe.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=mbe.bind(null,t),t.Pu.H_=nbe.bind(null,t.eventManager),t.Pu.yu=abe.bind(null,t.eventManager),t}function ybe(e){const t=tn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=pbe.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=gbe.bind(null,t),t}class p_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Fk(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return Cve(this.persistence,new wve,t.initialUser,this.serializer)}Cu(t){return new XZ(gP.mi,this.serializer)}Du(t){return new Ive}async terminate(){var t,r;(t=this.gcScheduler)==null||t.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}p_.provider={build:()=>new p_};class wbe extends p_{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){ia(this.persistence.referenceDelegate instanceof h_,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new ove(n,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?Xl.withCacheSize(this.cacheSizeBytes):Xl.DEFAULT;return new XZ(n=>h_.mi(n,r),this.serializer)}}class lF{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>LQ(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=vbe.bind(null,this.syncEngine),await ebe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new rbe}()}createDatastore(t){const r=Fk(t.databaseInfo.databaseId),n=function(s){return new Rve(s)}(t.databaseInfo);return function(s,o,l,c){return new Qve(s,o,l,c)}(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return function(n,a,s,o,l){return new Vve(n,a,s,o,l)}(this.localStore,this.datastore,t.asyncQueue,r=>LQ(this.syncEngine,r,0),function(){return IQ.v()?new IQ:new Fve}())}createSyncEngine(t,r){return function(a,s,o,l,c,u,d){const f=new lbe(a,s,o,l,c,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(a){const s=tn(a);dr(pg,"RemoteStore shutting down."),s.Ea.add(5),await K2(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(r=this.eventManager)==null||r.terminate()}}lF.provider={build:()=>new lF};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):yh("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="FirestoreClient";class Ebe{constructor(t,r,n,a,s){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=qo.UNAUTHENTICATED,this.clientId=bk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async o=>{dr(_m,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(dr(_m,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ch;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const n=CP(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function eB(e,t){e.asyncQueue.verifyOperationInProgress(),dr(_m,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async a=>{n.isEqual(a)||(await YZ(t.localStore,a),n=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function UQ(e,t){e.asyncQueue.verifyOperationInProgress();const r=await Nbe(e);dr(_m,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(n=>OQ(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,a)=>OQ(t.remoteStore,a)),e._onlineComponents=t}async function Nbe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){dr(_m,"Using user provided OfflineComponentProvider");try{await eB(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(a){return a.name==="FirebaseError"?a.code===Ct.FAILED_PRECONDITION||a.code===Ct.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;mg("Error using user provided cache. Falling back to memory cache: "+r),await eB(e,new p_)}}else dr(_m,"Using default OfflineComponentProvider"),await eB(e,new wbe(void 0));return e._offlineComponents}async function mee(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(dr(_m,"Using user provided OnlineComponentProvider"),await UQ(e,e._uninitializedComponentsProvider._online)):(dr(_m,"Using default OnlineComponentProvider"),await UQ(e,new lF))),e._onlineComponents}function Cbe(e){return mee(e).then(t=>t.syncEngine)}async function g_(e){const t=await mee(e),r=t.eventManager;return r.onListen=cbe.bind(null,t.syncEngine),r.onUnlisten=fbe.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=ube.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=Abe.bind(null,t.syncEngine),r}function _be(e,t,r={}){const n=new ch;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new IP({next:h=>{d.Nu(),o.enqueueAndForget(()=>SP(s,f));const m=h.docs.has(l);!m&&h.fromCache?u.reject(new Xt(Ct.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&h.fromCache&&c&&c.source==="server"?u.reject(new Xt(Ct.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new jP(_k(l.path),d,{includeMetadataChanges:!0,qa:!0});return _P(s,f)}(await g_(e),e.asyncQueue,t,r,n)),n.promise}function Sbe(e,t,r={}){const n=new ch;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new IP({next:h=>{d.Nu(),o.enqueueAndForget(()=>SP(s,f)),h.fromCache&&c.source==="server"?u.reject(new Xt(Ct.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new jP(l,d,{includeMetadataChanges:!0,qa:!0});return _P(s,f)}(await g_(e),e.asyncQueue,t,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pee(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QQ=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gee="firestore.googleapis.com",HQ=!0;class VQ{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Xt(Ct.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gee,this.ssl=HQ}else this.host=t.host,this.ssl=t.ssl??HQ;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=WZ;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<sve)throw new Xt(Ct.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}lZ("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pee(t.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Xt(Ct.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Xt(Ct.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Xt(Ct.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Pk{constructor(t,r,n,a){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VQ({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xt(Ct.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Xt(Ct.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VQ(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new iZ;switch(n.type){case"firstParty":return new Rge(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Xt(Ct.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=QQ.get(r);n&&(dr("ComponentProvider","Removing Datastore"),QQ.delete(r),n.terminate())}(this),Promise.resolve()}}function xee(e,t,r,n={}){var u;e=al(e,Pk);const a=Rh(t),s=e._getSettings(),o={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${r}`;a&&(Ak(`https://${l}`),hk("Firestore",!0)),s.host!==gee&&s.host!==l&&mg("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:l,ssl:a,emulatorOptions:n};if(!vm(c,o)&&(e._setSettings(c),n.mockUserToken)){let d,f;if(typeof n.mockUserToken=="string")d=n.mockUserToken,f=qo.MOCK_USER;else{d=fJ(n.mockUserToken,(u=e._app)==null?void 0:u.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new Xt(Ct.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new qo(h)}e._authCredentials=new Oge(new sZ(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new qd(this.firestore,t,this._query)}}class ls{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uh(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ls(this.firestore,t,this._key)}toJSON(){return{type:ls._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,n){if($2(r,ls._jsonSchema))return new ls(t,n||null,new yr(_a.fromString(r.referencePath)))}}ls._jsonSchemaVersion="firestore/documentReference/1.0",ls._jsonSchema={type:vi("string",ls._jsonSchemaVersion),referencePath:vi("string")};class uh extends qd{constructor(t,r,n){super(t,r,_k(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ls(this.firestore,null,new yr(t))}withConverter(t){return new uh(this.firestore,t,this._path)}}function pt(e,t,...r){if(e=Yn(e),oZ("collection","path",t),e instanceof Pk){const n=_a.fromString(t,...r);return nQ(n),new uh(e,null,n)}{if(!(e instanceof ls||e instanceof uh))throw new Xt(Ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(_a.fromString(t,...r));return nQ(n),new uh(e.firestore,null,n)}}function rr(e,t,...r){if(e=Yn(e),arguments.length===1&&(t=bk.newId()),oZ("doc","path",t),e instanceof Pk){const n=_a.fromString(t,...r);return rQ(n),new ls(e,null,new yr(n))}{if(!(e instanceof ls||e instanceof uh))throw new Xt(Ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(_a.fromString(t,...r));return rQ(n),new ls(e.firestore,e instanceof uh?e.converter:null,new yr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zQ="AsyncQueue";class $Q{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ZZ(this,"async_queue_retry"),this._c=()=>{const n=Z3();n&&dr(zQ,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const r=Z3();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=Z3();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const r=new ch;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Qb(t))throw t;dr(zQ,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const r=this.ac.then(()=>(this.rc=!0,t().catch(n=>{throw this.nc=n,this.rc=!1,yh("INTERNAL UNHANDLED ERROR: ",GQ(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(t,r,n){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const a=NP.createAndSchedule(this,t,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&zr(47125,{Pc:GQ(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function GQ(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qQ(e){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(e,["next","error","complete"])}class $d extends Pk{constructor(t,r,n,a){super(t,r,n,a),this.type="firestore",this._queue=new $Q,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new $Q(t),this._firestoreClient=void 0,await t}}}function FP(e,t){const r=typeof e=="object"?e:mk(),n=typeof e=="string"?e:l_,a=Q2(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=KD("firestore");s&&xee(a,...s)}return a}function Vb(e){if(e._terminated)throw new Xt(Ct.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||kbe(e),e._firestoreClient}function kbe(e){var n,a,s;const t=e._freezeSettings(),r=function(l,c,u,d){return new exe(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,pee(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((n=e._app)==null?void 0:n.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(a=t.localCache)!=null&&a._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Ebe(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Mc(ro.fromBase64String(t))}catch(r){throw new Xt(Ct.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new Mc(ro.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Mc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if($2(t,Mc._jsonSchema))return Mc.fromBase64String(t.bytes)}}Mc._jsonSchemaVersion="firestore/bytes/1.0",Mc._jsonSchema={type:vi("string",Mc._jsonSchemaVersion),bytes:vi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Xt(Ct.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ji(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Xt(Ct.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Xt(Ct.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Bn(this._lat,t._lat)||Bn(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pd._jsonSchemaVersion}}static fromJSON(t){if($2(t,Pd._jsonSchema))return new Pd(t.latitude,t.longitude)}}Pd._jsonSchemaVersion="firestore/geoPoint/1.0",Pd._jsonSchema={type:vi("string",Pd._jsonSchemaVersion),latitude:vi("number"),longitude:vi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Rd._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if($2(t,Rd._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(r=>typeof r=="number"))return new Rd(t.vectorValues);throw new Xt(Ct.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Rd._jsonSchemaVersion="firestore/vectorValue/1.0",Rd._jsonSchema={type:vi("string",Rd._jsonSchemaVersion),vectorValues:vi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jbe=/^__.*__$/;class Bbe{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return this.fieldMask!==null?new Qm(t,this.data,this.fieldMask,r,this.fieldTransforms):new G2(t,this.data,r,this.fieldTransforms)}}class vee{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return new Qm(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function bee(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zr(40011,{Ac:e})}}class Rk{constructor(t,r,n,a,s,o){this.settings=t,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Rk({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.gc(t),n}yc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return x_(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(bee(this.Ac)&&jbe.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Tbe{constructor(t,r,n){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=n||Fk(t)}Cc(t,r,n,a=!1){return new Rk({Ac:t,methodName:r,Dc:n,path:Ji.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gb(e){const t=e._freezeSettings(),r=Fk(e._databaseId);return new Tbe(e._databaseId,!!t.ignoreUndefinedProperties,r)}function OP(e,t,r,n,a,s={}){const o=e.Cc(s.merge||s.mergeFields?2:0,t,r,a);RP("Data must be an object, but it was:",o,n);const l=Nee(n,o);let c,u;if(s.merge)c=new Vc(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const h=cF(t,f,r);if(!o.contains(h))throw new Xt(Ct.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);_ee(d,h)||d.push(h)}c=new Vc(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new Bbe(new tc(l),c,u)}class Lk extends $b{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Lk}}function Ibe(e,t,r){return new Rk({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class DP extends $b{_toFieldTransform(t){return new PZ(t.path,new $w)}isEqual(t){return t instanceof DP}}class PP extends $b{constructor(t,r){super(t),this.vc=r}_toFieldTransform(t){const r=Ibe(this,t,!0),n=this.vc.map(s=>qb(s,r)),a=new ab(n);return new PZ(t.path,a)}isEqual(t){return t instanceof PP&&vm(this.vc,t.vc)}}function yee(e,t,r,n){const a=e.Cc(1,t,r);RP("Data must be an object, but it was:",a,n);const s=[],o=tc.empty();Um(n,(c,u)=>{const d=LP(t,c,r);u=Yn(u);const f=a.yc(d);if(u instanceof Lk)s.push(d);else{const h=qb(u,f);h!=null&&(s.push(d),o.set(d,h))}});const l=new Vc(s);return new vee(o,l,a.fieldTransforms)}function wee(e,t,r,n,a,s){const o=e.Cc(1,t,r),l=[cF(t,n,r)],c=[a];if(s.length%2!=0)throw new Xt(Ct.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)l.push(cF(t,s[h])),c.push(s[h+1]);const u=[],d=tc.empty();for(let h=l.length-1;h>=0;--h)if(!_ee(u,l[h])){const m=l[h];let g=c[h];g=Yn(g);const x=o.yc(m);if(g instanceof Lk)u.push(m);else{const v=qb(g,x);v!=null&&(u.push(m),d.set(m,v))}}const f=new Vc(u);return new vee(d,f,o.fieldTransforms)}function Eee(e,t,r,n=!1){return qb(r,e.Cc(n?4:3,t))}function qb(e,t){if(Cee(e=Yn(e)))return RP("Unsupported field value:",t,e),Nee(e,t);if(e instanceof $b)return function(n,a){if(!bee(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(n,a){const s=[];let o=0;for(const l of n){let c=qb(l,a.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(e,t)}return function(n,a){if((n=Yn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Exe(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=ir.fromDate(n);return{timestampValue:A_(a.serializer,s)}}if(n instanceof ir){const s=new ir(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:A_(a.serializer,s)}}if(n instanceof Pd)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Mc)return{bytesValue:HZ(a.serializer,n._byteString)};if(n instanceof ls){const s=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw a.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:mP(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Rd)return function(o,l){return{mapValue:{fields:{[gZ]:{stringValue:xZ},[c_]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return fP(l.serializer,u)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${yk(n)}`)}(e,t)}function Nee(e,t){const r={};return dZ(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Um(e,(n,a)=>{const s=qb(a,t.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function Cee(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof ir||e instanceof Pd||e instanceof Mc||e instanceof ls||e instanceof $b||e instanceof Rd)}function RP(e,t,r){if(!Cee(r)||!cZ(r)){const n=yk(r);throw n==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+n)}}function cF(e,t,r){if((t=Yn(t))instanceof zb)return t._internalPath;if(typeof t=="string")return LP(e,t);throw x_("Field path arguments must be of type string or ",e,!1,void 0,r)}const Fbe=new RegExp("[~\\*/\\[\\]]");function LP(e,t,r){if(t.search(Fbe)>=0)throw x_(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new zb(...t.split("."))._internalPath}catch{throw x_(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function x_(e,t,r,n,a){const s=n&&!n.isEmpty(),o=a!==void 0;let l=`Function ${t}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${n}`),o&&(c+=` in document ${a}`),c+=")"),new Xt(Ct.INVALID_ARGUMENT,l+e+c)}function _ee(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(t,r,n,a,s){this._firestore=t,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ls(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Obe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(Mk("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Obe extends MP{data(){return super.data()}}function Mk(e,t){return typeof t=="string"?LP(e,t):t instanceof zb?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function See(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Xt(Ct.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class UP{}class X2 extends UP{}function Vt(e,t,...r){let n=[];t instanceof UP&&n.push(t),n=n.concat(r),function(s){const o=s.filter(c=>c instanceof Uk).length,l=s.filter(c=>c instanceof Y2).length;if(o>1||o>0&&l>0)throw new Xt(Ct.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Y2 extends X2{constructor(t,r,n){super(),this._field=t,this._op=r,this._value=n,this.type="where"}static _create(t,r,n){return new Y2(t,r,n)}_apply(t){const r=this._parse(t);return jee(t._query,r),new qd(t.firestore,t.converter,Z6(t._query,r))}_parse(t){const r=Gb(t.firestore);return function(s,o,l,c,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Xt(Ct.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){WQ(f,d);const g=[];for(const x of f)g.push(KQ(c,s,x));h={arrayValue:{values:g}}}else h=KQ(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||WQ(f,d),h=Eee(l,o,f,d==="in"||d==="not-in");return gi.create(u,d,h)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function wr(e,t,r){const n=t,a=Mk("where",e);return Y2._create(a,n,r)}class Uk extends UP{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new Uk(t,r)}_parse(t){const r=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:zd.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(a,s){let o=a;const l=s.getFlattenedFilters();for(const c of l)jee(o,c),o=Z6(o,c)}(t._query,r),new qd(t.firestore,t.converter,Z6(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Qk extends X2{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new Qk(t,r)}_apply(t){const r=function(a,s,o){if(a.startAt!==null)throw new Xt(Ct.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Xt(Ct.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zw(s,o)}(t._query,this._field,this._direction);return new qd(t.firestore,t.converter,function(a,s){const o=a.explicitOrderBy.concat([s]);return new Rg(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,r))}}function cr(e,t="asc"){const r=t,n=Mk("orderBy",e);return Qk._create(n,r)}class Hk extends X2{constructor(t,r,n){super(),this.type=t,this._limit=r,this._limitType=n}static _create(t,r,n){return new Hk(t,r,n)}_apply(t){return new qd(t.firestore,t.converter,d_(t._query,this._limit,this._limitType))}}function Ld(e){return Vge("limit",e),Hk._create("limit",e,"F")}class Vk extends X2{constructor(t,r,n){super(),this.type=t,this._docOrFields=r,this._inclusive=n}static _create(t,r,n){return new Vk(t,r,n)}_apply(t){const r=Dbe(t,this.type,this._docOrFields,this._inclusive);return new qd(t.firestore,t.converter,function(a,s){return new Rg(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,s,a.endAt)}(t._query,r))}}function kee(...e){return Vk._create("startAfter",e,!1)}function Dbe(e,t,r,n){if(r[0]=Yn(r[0]),r[0]instanceof MP)return function(s,o,l,c,u){if(!c)throw new Xt(Ct.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const d=[];for(const f of Tv(s))if(f.field.isKeyField())d.push(u_(o,c.key));else{const h=c.data.field(f.field);if(Nk(h))throw new Xt(Ct.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const m=f.field.canonicalString();throw new Xt(Ct.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(h)}return new nb(d,u)}(e._query,e.firestore._databaseId,t,r[0]._document,n);{const a=Gb(e.firestore);return function(o,l,c,u,d,f){const h=o.explicitOrderBy;if(d.length>h.length)throw new Xt(Ct.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let g=0;g<d.length;g++){const x=d[g];if(h[g].field.isKeyField()){if(typeof x!="string")throw new Xt(Ct.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof x}`);if(!dP(o)&&x.indexOf("/")!==-1)throw new Xt(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${x}' contains a slash.`);const v=o.path.child(_a.fromString(x));if(!yr.isDocumentKey(v))throw new Xt(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const y=new yr(v);m.push(u_(l,y))}else{const v=Eee(c,u,x);m.push(v)}}return new nb(m,f)}(e._query,e.firestore._databaseId,a,t,r,n)}}function KQ(e,t,r){if(typeof(r=Yn(r))=="string"){if(r==="")throw new Xt(Ct.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dP(t)&&r.indexOf("/")!==-1)throw new Xt(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child(_a.fromString(r));if(!yr.isDocumentKey(n))throw new Xt(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return u_(e,new yr(n))}if(r instanceof ls)return u_(e,r._key);throw new Xt(Ct.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yk(r)}.`)}function WQ(e,t){if(!Array.isArray(e)||e.length===0)throw new Xt(Ct.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function jee(e,t){const r=function(a,s){for(const o of a)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Xt(Ct.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Xt(Ct.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class Bee{convertValue(t,r="none"){switch(Nm(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ws(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(Em(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw zr(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const n={};return Um(t,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(t){var n,a,s;const r=(s=(a=(n=t.fields)==null?void 0:n[c_].arrayValue)==null?void 0:a.values)==null?void 0:s.map(o=>Ws(o.doubleValue));return new Rd(r)}convertGeoPoint(t){return new Pd(Ws(t.latitude),Ws(t.longitude))}convertArray(t,r){return(t.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(t,r){switch(r){case"previous":const n=Ck(t);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Hw(t));default:return null}}convertTimestamp(t){const r=wm(t);return new ir(r.seconds,r.nanos)}convertDocumentKey(t,r){const n=_a.fromString(t);ia(KZ(n),9688,{name:t});const a=new eb(n.get(1),n.get(3)),s=new yr(n.popFirst(5));return a.isEqual(r)||yh(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}class mv{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class lm extends MP{constructor(t,r,n,a,s,o){super(t,r,n,a,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new fw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const n=this._document.data.field(Mk("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(Ct.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=lm._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}lm._jsonSchemaVersion="firestore/documentSnapshot/1.0",lm._jsonSchema={type:vi("string",lm._jsonSchemaVersion),bundleSource:vi("string","DocumentSnapshot"),bundleName:vi("string"),bundle:vi("string")};class fw extends lm{data(t={}){return super.data(t)}}class cm{constructor(t,r,n,a){this._firestore=t,this._userDataWriter=r,this._snapshot=a,this.metadata=new mv(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(n=>{t.call(r,new fw(this._firestore,this._userDataWriter,n.key,n,new mv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Xt(Ct.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map(l=>{const c=new fw(a._firestore,a._userDataWriter,l.doc.key,l.doc,new mv(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new fw(a._firestore,a._userDataWriter,l.doc.key,l.doc,new mv(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:Pbe(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(Ct.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=cm._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=bk.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Pbe(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zr(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(e){e=al(e,ls);const t=al(e.firestore,$d);return _be(Vb(t),e._key).then(r=>Tee(t,e,r))}cm._jsonSchemaVersion="firestore/querySnapshot/1.0",cm._jsonSchema={type:vi("string",cm._jsonSchemaVersion),bundleSource:vi("string","QuerySnapshot"),bundleName:vi("string"),bundle:vi("string")};class HP extends Bee{constructor(t){super(),this.firestore=t}convertBytes(t){return new Mc(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new ls(this.firestore,null,r)}}function mn(e){e=al(e,qd);const t=al(e.firestore,$d),r=Vb(t),n=new HP(t);return See(e._query),Sbe(r,e._query).then(a=>new cm(t,n,e,a))}function yi(e,t,r){e=al(e,ls);const n=al(e.firestore,$d),a=QP(e.converter,t,r);return Kb(n,[OP(Gb(n),"setDoc",e._key,a,e.converter!==null,r).toMutation(e._key,_l.none())])}function Bl(e,t,r,...n){e=al(e,ls);const a=al(e.firestore,$d),s=Gb(a);let o;return o=typeof(t=Yn(t))=="string"||t instanceof zb?wee(s,"updateDoc",e._key,t,r,n):yee(s,"updateDoc",e._key,t),Kb(a,[o.toMutation(e._key,_l.exists(!0))])}function ka(e){return Kb(al(e.firestore,$d),[new Tk(e._key,_l.none())])}function an(e,t){const r=al(e.firestore,$d),n=rr(e),a=QP(e.converter,t);return Kb(r,[OP(Gb(e.firestore),"addDoc",n._key,a,e.converter!==null,{}).toMutation(n._key,_l.exists(!1))]).then(()=>n)}function hr(e,...t){var c,u,d;e=Yn(e);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof t[n]!="object"||qQ(t[n])||(r=t[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(qQ(t[n])){const f=t[n];t[n]=(c=f.next)==null?void 0:c.bind(f),t[n+1]=(u=f.error)==null?void 0:u.bind(f),t[n+2]=(d=f.complete)==null?void 0:d.bind(f)}let s,o,l;if(e instanceof ls)o=al(e.firestore,$d),l=_k(e._key.path),s={next:f=>{t[n]&&t[n](Tee(o,e,f))},error:t[n+1],complete:t[n+2]};else{const f=al(e,qd);o=al(f.firestore,$d),l=f._query;const h=new HP(o);s={next:m=>{t[n]&&t[n](new cm(o,h,f,m))},error:t[n+1],complete:t[n+2]},See(e._query)}return function(h,m,g,x){const v=new IP(x),y=new jP(m,v,g);return h.asyncQueue.enqueueAndForget(async()=>_P(await g_(h),y)),()=>{v.Nu(),h.asyncQueue.enqueueAndForget(async()=>SP(await g_(h),y))}}(Vb(o),l,a,s)}function Kb(e,t){return function(n,a){const s=new ch;return n.asyncQueue.enqueueAndForget(async()=>hbe(await Cbe(n),a,s)),s.promise}(Vb(e),t)}function Tee(e,t,r){const n=r.docs.get(t._key),a=new HP(e);return new lm(e,a,t._key,n,new mv(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iee{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Gb(t)}set(t,r,n){this._verifyNotCommitted();const a=tB(t,this._firestore),s=QP(a.converter,r,n),o=OP(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(o.toMutation(a._key,_l.none())),this}update(t,r,n,...a){this._verifyNotCommitted();const s=tB(t,this._firestore);let o;return o=typeof(r=Yn(r))=="string"||r instanceof zb?wee(this._dataReader,"WriteBatch.update",s._key,r,n,a):yee(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(o.toMutation(s._key,_l.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=tB(t,this._firestore);return this._mutations=this._mutations.concat(new Tk(r._key,_l.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xt(Ct.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function tB(e,t){if((e=Yn(e)).firestore!==t)throw new Xt(Ct.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function za(){return new DP("serverTimestamp")}function Fee(...e){return new PP("arrayUnion",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(e){return Vb(e=al(e,$d)),new Iee(e,t=>Kb(e,t))}(function(t,r=!0){(function(a){Mb=a})(Dg),bm(new xh("firestore",(n,{instanceIdentifier:a,options:s})=>{const o=n.getProvider("app").getImmediate(),l=new $d(new Dge(n.getProvider("auth-internal")),new Lge(o,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Xt(Ct.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eb(u.options.projectId,d)}(o,a),o);return s={useFetchStreams:r,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),$u(J9,Z9,t),$u(J9,Z9,"esm2020")})();const v_=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Bee,Bytes:Mc,CollectionReference:uh,DocumentReference:ls,DocumentSnapshot:lm,FieldPath:zb,FieldValue:$b,Firestore:$d,FirestoreError:Xt,GeoPoint:Pd,Query:qd,QueryCompositeFilterConstraint:Uk,QueryConstraint:X2,QueryDocumentSnapshot:fw,QueryFieldFilterConstraint:Y2,QueryLimitConstraint:Hk,QueryOrderByConstraint:Qk,QuerySnapshot:cm,QueryStartAtConstraint:Vk,SnapshotMetadata:mv,Timestamp:ir,VectorValue:Rd,WriteBatch:Iee,_AutoId:bk,_ByteString:ro,_DatabaseId:eb,_DocumentKey:yr,_EmptyAuthCredentialsProvider:iZ,_FieldPath:Ji,_cast:al,_logWarn:mg,_validateIsNotUsedTogether:lZ,addDoc:an,arrayUnion:Fee,collection:pt,connectFirestoreEmulator:xee,deleteDoc:ka,doc:rr,ensureFirestoreConfigured:Vb,executeWrite:Kb,getDoc:Hm,getDocs:mn,getFirestore:FP,limit:Ld,onSnapshot:hr,orderBy:cr,query:Vt,serverTimestamp:za,setDoc:yi,startAfter:kee,updateDoc:Bl,where:wr,writeBatch:Ug},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oee="firebasestorage.googleapis.com",Dee="storageBucket",Rbe=120*1e3,Lbe=600*1e3,Mbe=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends Gd{constructor(t,r,n=0){super(rB(t),`Firebase Storage: ${r} (${rB(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hs.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return rB(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var $a;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})($a||($a={}));function rB(e){return"storage/"+e}function VP(){const e="An unknown error occurred, please check the error payload for server response.";return new hs($a.UNKNOWN,e)}function Ube(e){return new hs($a.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Qbe(e){return new hs($a.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Hbe(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new hs($a.UNAUTHENTICATED,e)}function Vbe(){return new hs($a.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function zbe(e){return new hs($a.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Pee(){return new hs($a.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ree(){return new hs($a.CANCELED,"User canceled the upload/download.")}function $be(e){return new hs($a.INVALID_URL,"Invalid URL '"+e+"'.")}function Gbe(e){return new hs($a.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function qbe(){return new hs($a.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Dee+"' property when initializing the app?")}function Lee(){return new hs($a.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Kbe(){return new hs($a.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Wbe(){return new hs($a.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Xbe(e){return new hs($a.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function uF(e){return new hs($a.INVALID_ARGUMENT,e)}function Mee(){return new hs($a.APP_DELETED,"The Firebase app was deleted.")}function Ybe(e){return new hs($a.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Aw(e,t){return new hs($a.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function oy(e){throw new hs($a.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let n;try{n=El.makeFromUrl(t,r)}catch{return new El(t,"")}if(n.path==="")return n;throw Gbe(t)}static makeFromUrl(t,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+a+o,"i"),c={bucket:1,path:3};function u(T){T.path_=decodeURIComponent(T.path)}const d="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${d}/b/${a}/o${h}`,"i"),g={bucket:1,path:3},x=r===Oee?"(?:storage.googleapis.com|storage.cloud.google.com)":r,v="([^?#]*)",y=new RegExp(`^https?://${x}/${a}/${v}`,"i"),_=[{regex:l,indices:c,postModify:s},{regex:m,indices:g,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let T=0;T<_.length;T++){const j=_[T],I=j.regex.exec(t);if(I){const E=I[j.indices.bucket];let S=I[j.indices.path];S||(S=""),n=new El(E,S),j.postModify(n);break}}if(n==null)throw $be(t);return n}}class Jbe{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zbe(e,t,r){let n=1,a=null,s=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...v){u||(u=!0,t.apply(null,v))}function f(v){a=setTimeout(()=>{a=null,e(m,c())},v)}function h(){s&&clearTimeout(s)}function m(v,...y){if(u){h();return}if(v){h(),d.call(null,v,...y);return}if(c()||o){h(),d.call(null,v,...y);return}n<64&&(n*=2);let _;l===1?(l=2,_=0):_=(n+Math.random())*1e3,f(_)}let g=!1;function x(v){g||(g=!0,h(),!u&&(a!==null?(v||(l=2),clearTimeout(a),f(0)):v||(l=1)))}return f(0),s=setTimeout(()=>{o=!0,x(!0)},r),x}function e1e(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1e(e){return e!==void 0}function r1e(e){return typeof e=="function"}function n1e(e){return typeof e=="object"&&!Array.isArray(e)}function zk(e){return typeof e=="string"||e instanceof String}function XQ(e){return zP()&&e instanceof Blob}function zP(){return typeof Blob<"u"}function dF(e,t,r,n){if(n<t)throw uF(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw uF(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(e,t,r){let n=t;return r==null&&(n=`https://${t}`),`${r}://${n}/v0${e}`}function Uee(e){const t=encodeURIComponent;let r="?";for(const n in e)if(e.hasOwnProperty(n)){const a=t(n)+"="+t(e[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var Wp;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Wp||(Wp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qee(e,t){const r=e>=500&&e<600,a=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return r||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1e{constructor(t,r,n,a,s,o,l,c,u,d,f,h=!0,m=!1){this.url_=t,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=h,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,x)=>{this.resolve_=g,this.reject_=x,this.start_()})}start_(){const t=(n,a)=>{if(a){n(!1,new LN(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===Wp.NO_ERROR,c=s.getStatus();if(!l||Qee(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Wp.ABORT;n(!1,new LN(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new LN(u,s))})},r=(n,a)=>{const s=this.resolve_,o=this.reject_,l=a.connection;if(a.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());t1e(c)?s(c):s()}catch(c){o(c)}else if(l!==null){const c=VP();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(a.canceled){const c=this.appDelete_?Mee():Ree();o(c)}else{const c=Pee();o(c)}};this.canceled_?r(!1,new LN(!1,null,!0)):this.backoffId_=Zbe(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&e1e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class LN{constructor(t,r,n){this.wasSuccessCode=t,this.connection=r,this.canceled=!!n}}function s1e(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function i1e(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function o1e(e,t){t&&(e["X-Firebase-GMPID"]=t)}function l1e(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function c1e(e,t,r,n,a,s,o=!0,l=!1){const c=Uee(e.urlParams),u=e.url+c,d=Object.assign({},e.headers);return o1e(d,t),s1e(d,r),i1e(d,s),l1e(d,n),new a1e(u,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function d1e(...e){const t=u1e();if(t!==void 0){const r=new t;for(let n=0;n<e.length;n++)r.append(e[n]);return r.getBlob()}else{if(zP())return new Blob(e);throw new hs($a.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function f1e(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1e(e){if(typeof atob>"u")throw Xbe("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class nB{constructor(t,r){this.data=t,this.contentType=r||null}}function h1e(e,t){switch(e){case $f.RAW:return new nB(Hee(t));case $f.BASE64:case $f.BASE64URL:return new nB(Vee(e,t));case $f.DATA_URL:return new nB(p1e(t),g1e(t))}throw VP()}function Hee(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<e.length-1&&(e.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const s=n,o=e.charCodeAt(++r);n=65536|(s&1023)<<10|o&1023,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(t)}function m1e(e){let t;try{t=decodeURIComponent(e)}catch{throw Aw($f.DATA_URL,"Malformed data URL.")}return Hee(t)}function Vee(e,t){switch(e){case $f.BASE64:{const a=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(a||s)throw Aw(e,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case $f.BASE64URL:{const a=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(a||s)throw Aw(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=A1e(t)}catch(a){throw a.message.includes("polyfill")?a:Aw(e,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class zee{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw Aw($f.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=x1e(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}function p1e(e){const t=new zee(e);return t.base64?Vee($f.BASE64,t.rest):m1e(t.rest)}function g1e(e){return new zee(e).contentType}function x1e(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(t,r){let n=0,a="";XQ(t)?(this.data_=t,n=t.size,a=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,r){if(XQ(this.data_)){const n=this.data_,a=f1e(n,t,r);return a===null?null:new XA(a)}else{const n=new Uint8Array(this.data_.buffer,t,r-t);return new XA(n,!0)}}static getBlob(...t){if(zP()){const r=t.map(n=>n instanceof XA?n.data_:n);return new XA(d1e.apply(null,r))}else{const r=t.map(o=>zk(o)?h1e($f.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const a=new Uint8Array(n);let s=0;return r.forEach(o=>{for(let l=0;l<o.length;l++)a[s++]=o[l]}),new XA(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(e){let t;try{t=JSON.parse(e)}catch{return null}return n1e(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1e(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function b1e(e,t){const r=t.split("/").filter(n=>n.length>0).join("/");return e.length===0?r:e+"/"+r}function $ee(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1e(e,t){return t}class pl{constructor(t,r,n,a){this.server=t,this.local=r||t,this.writable=!!n,this.xform=a||y1e}}let MN=null;function w1e(e){return!zk(e)||e.length<2?e:$ee(e)}function GP(){if(MN)return MN;const e=[];e.push(new pl("bucket")),e.push(new pl("generation")),e.push(new pl("metageneration")),e.push(new pl("name","fullPath",!0));function t(s,o){return w1e(o)}const r=new pl("name");r.xform=t,e.push(r);function n(s,o){return o!==void 0?Number(o):o}const a=new pl("size");return a.xform=n,e.push(a),e.push(new pl("timeCreated")),e.push(new pl("updated")),e.push(new pl("md5Hash",null,!0)),e.push(new pl("cacheControl",null,!0)),e.push(new pl("contentDisposition",null,!0)),e.push(new pl("contentEncoding",null,!0)),e.push(new pl("contentLanguage",null,!0)),e.push(new pl("contentType",null,!0)),e.push(new pl("metadata","customMetadata",!0)),MN=e,MN}function E1e(e,t){function r(){const n=e.bucket,a=e.fullPath,s=new El(n,a);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:r})}function N1e(e,t,r){const n={};n.type="file";const a=r.length;for(let s=0;s<a;s++){const o=r[s];n[o.local]=o.xform(n,t[o.server])}return E1e(n,e),n}function Gee(e,t,r){const n=$P(t);return n===null?null:N1e(e,n,r)}function C1e(e,t,r,n){const a=$P(t);if(a===null||!zk(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const d=e.bucket,f=e.fullPath,h="/b/"+o(d)+"/o/"+o(f),m=Qg(h,r,n),g=Uee({alt:"media",token:u});return m+g})[0]}function qee(e,t){const r={},n=t.length;for(let a=0;a<n;a++){const s=t[a];s.writable&&(r[s.server]=e[s.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YQ="prefixes",JQ="items";function _1e(e,t,r){const n={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[YQ])for(const a of r[YQ]){const s=a.replace(/\/$/,""),o=e._makeStorageReference(new El(t,s));n.prefixes.push(o)}if(r[JQ])for(const a of r[JQ]){const s=e._makeStorageReference(new El(t,a.name));n.items.push(s)}return n}function S1e(e,t,r){const n=$P(r);return n===null?null:_1e(e,t,n)}class Vm{constructor(t,r,n,a){this.url=t,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(e){if(!e)throw VP()}function qP(e,t){function r(n,a){const s=Gee(e,a,t);return rA(s!==null),s}return r}function k1e(e,t){function r(n,a){const s=S1e(e,t,a);return rA(s!==null),s}return r}function j1e(e,t){function r(n,a){const s=Gee(e,a,t);return rA(s!==null),C1e(s,a,e.host,e._protocol)}return r}function Wb(e){function t(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=Vbe():a=Hbe():r.getStatus()===402?a=Qbe(e.bucket):r.getStatus()===403?a=zbe(e.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return t}function KP(e){const t=Wb(e);function r(n,a){let s=t(n,a);return n.getStatus()===404&&(s=Ube(e.path)),s.serverResponse=a.serverResponse,s}return r}function B1e(e,t,r){const n=t.fullServerUrl(),a=Qg(n,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,l=new Vm(a,s,qP(e,r),o);return l.errorHandler=KP(t),l}function T1e(e,t,r,n,a){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",r.length>0&&(s.delimiter=r),n&&(s.pageToken=n),a&&(s.maxResults=a);const o=t.bucketOnlyServerUrl(),l=Qg(o,e.host,e._protocol),c="GET",u=e.maxOperationRetryTime,d=new Vm(l,c,k1e(e,t.bucket),u);return d.urlParams=s,d.errorHandler=Wb(t),d}function I1e(e,t,r){const n=t.fullServerUrl(),a=Qg(n,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,l=new Vm(a,s,j1e(e,r),o);return l.errorHandler=KP(t),l}function F1e(e,t){const r=t.fullServerUrl(),n=Qg(r,e.host,e._protocol),a="DELETE",s=e.maxOperationRetryTime;function o(c,u){}const l=new Vm(n,a,o,s);return l.successCodes=[200,204],l.errorHandler=KP(t),l}function O1e(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function Kee(e,t,r){const n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=O1e(null,t)),n}function Wee(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let _="";for(let T=0;T<2;T++)_=_+Math.random().toString().slice(2);return _}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=Kee(t,n,a),d=qee(u,r),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+c+"--",m=XA.getBlob(f,n,h);if(m===null)throw Lee();const g={name:u.fullPath},x=Qg(s,e.host,e._protocol),v="POST",y=e.maxUploadRetryTime,w=new Vm(x,v,qP(e,r),y);return w.urlParams=g,w.headers=o,w.body=m.uploadData(),w.errorHandler=Wb(t),w}class b_{constructor(t,r,n,a){this.current=t,this.total=r,this.finalized=!!n,this.metadata=a||null}}function WP(e,t){let r=null;try{r=e.getResponseHeader("X-Goog-Upload-Status")}catch{rA(!1)}return rA(!!r&&(t||["active"]).indexOf(r)!==-1),r}function D1e(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),o=Kee(t,n,a),l={name:o.fullPath},c=Qg(s,e.host,e._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=qee(o,r),h=e.maxUploadRetryTime;function m(x){WP(x);let v;try{v=x.getResponseHeader("X-Goog-Upload-URL")}catch{rA(!1)}return rA(zk(v)),v}const g=new Vm(c,u,m,h);return g.urlParams=l,g.headers=d,g.body=f,g.errorHandler=Wb(t),g}function P1e(e,t,r,n){const a={"X-Goog-Upload-Command":"query"};function s(u){const d=WP(u,["active","final"]);let f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{rA(!1)}f||rA(!1);const h=Number(f);return rA(!isNaN(h)),new b_(h,n.size(),d==="final")}const o="POST",l=e.maxUploadRetryTime,c=new Vm(r,o,s,l);return c.headers=a,c.errorHandler=Wb(t),c}const ZQ=256*1024;function R1e(e,t,r,n,a,s,o,l){const c=new b_(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=n.size()),n.size()!==c.total)throw Kbe();const u=c.total-c.current;let d=u;a>0&&(d=Math.min(d,a));const f=c.current,h=f+d;let m="";d===0?m="finalize":u===d?m="upload, finalize":m="upload";const g={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${c.current}`},x=n.slice(f,h);if(x===null)throw Lee();function v(T,j){const I=WP(T,["active","final"]),E=c.current+d,S=n.size();let B;return I==="final"?B=qP(t,s)(T,j):B=null,new b_(E,S,I==="final",B)}const y="POST",w=t.maxUploadRetryTime,_=new Vm(r,y,v,w);return _.headers=g,_.body=x.uploadData(),_.progressCallback=l||null,_.errorHandler=Wb(e),_}const Yl={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function aB(e){switch(e){case"running":case"pausing":case"canceling":return Yl.RUNNING;case"paused":return Yl.PAUSED;case"success":return Yl.SUCCESS;case"canceled":return Yl.CANCELED;case"error":return Yl.ERROR;default:return Yl.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1e{constructor(t,r,n){if(r1e(t)||r!=null||n!=null)this.next=t,this.error=r??void 0,this.complete=n??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class M1e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Wp.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Wp.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Wp.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,n,a,s){if(this.sent_)throw oy("cannot .send() more than once");if(Rh(t)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,t,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw oy("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw oy("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw oy("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw oy("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class U1e extends M1e{initXhr(){this.xhr_.responseType="text"}}function YA(){return new U1e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1e{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(t,r,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=r,this._metadata=n,this._mappings=GP(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals($a.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(Qee(a.status,[]))if(s)a=Pee();else{this.sleepTime=Math.max(this.sleepTime*2,Mbe),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals($a.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,s)=>{this._resolve=a,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return r=>this._updateProgress(t+r)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,n])=>{switch(this._state){case"running":t(r,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,r)=>{const n=D1e(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,YA,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((r,n)=>{const a=P1e(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(a,YA,r,n);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=ZQ*this._chunkMultiplier,r=new b_(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((a,s)=>{let o;try{o=R1e(this._ref._location,this._ref.storage,n,this._blob,t,this._mappings,r,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(o,YA,a,s,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){ZQ*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,r)=>{const n=B1e(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(n,YA,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,r)=>{const n=Wee(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,YA,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const r=this._transferred;this._transferred=t,this._transferred!==r&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const r=this._state==="paused";this._state=t,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Ree(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=aB(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,r,n,a){const s=new L1e(r||void 0,n||void 0,a||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,r){return this._promise.then(t,r)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const r=this._observers.indexOf(t);r!==-1&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(aB(this._state)){case Yl.SUCCESS:Bx(this._resolve.bind(null,this.snapshot))();break;case Yl.CANCELED:case Yl.ERROR:const r=this._reject;Bx(r.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(aB(this._state)){case Yl.RUNNING:case Yl.PAUSED:t.next&&Bx(t.next.bind(t,this.snapshot))();break;case Yl.SUCCESS:t.complete&&Bx(t.complete.bind(t))();break;case Yl.CANCELED:case Yl.ERROR:t.error&&Bx(t.error.bind(t,this._error))();break;default:t.error&&Bx(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(t,r){this._service=t,r instanceof El?this._location=r:this._location=El.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new gg(t,r)}get root(){const t=new El(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $ee(this._location.path)}get storage(){return this._service}get parent(){const t=v1e(this._location.path);if(t===null)return null;const r=new El(this._location.bucket,t);return new gg(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw Ybe(t)}}function H1e(e,t,r){e._throwIfRoot("uploadBytes");const n=Wee(e.storage,e._location,GP(),new XA(t,!0),r);return e.storage.makeRequestWithTokens(n,YA).then(a=>({metadata:a,ref:e}))}function V1e(e,t,r){return e._throwIfRoot("uploadBytesResumable"),new Q1e(e,new XA(t),r)}function z1e(e){const t={prefixes:[],items:[]};return Xee(e,t).then(()=>t)}async function Xee(e,t,r){const a=await $1e(e,{pageToken:r});t.prefixes.push(...a.prefixes),t.items.push(...a.items),a.nextPageToken!=null&&await Xee(e,t,a.nextPageToken)}function $1e(e,t){t!=null&&typeof t.maxResults=="number"&&dF("options.maxResults",1,1e3,t.maxResults);const r=t||{},n=T1e(e.storage,e._location,"/",r.pageToken,r.maxResults);return e.storage.makeRequestWithTokens(n,YA)}function G1e(e){e._throwIfRoot("getDownloadURL");const t=I1e(e.storage,e._location,GP());return e.storage.makeRequestWithTokens(t,YA).then(r=>{if(r===null)throw Wbe();return r})}function q1e(e){e._throwIfRoot("deleteObject");const t=F1e(e.storage,e._location);return e.storage.makeRequestWithTokens(t,YA)}function K1e(e,t){const r=b1e(e._location.path,t),n=new El(e._location.bucket,r);return new gg(e.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1e(e){return/^[A-Za-z]+:\/\//.test(e)}function X1e(e,t){return new gg(e,t)}function Yee(e,t){if(e instanceof XP){const r=e;if(r._bucket==null)throw qbe();const n=new gg(r,r._bucket);return t!=null?Yee(n,t):n}else return t!==void 0?K1e(e,t):e}function Y1e(e,t){if(t&&W1e(t)){if(e instanceof XP)return X1e(e,t);throw uF("To use ref(service, url), the first argument must be a Storage instance.")}else return Yee(e,t)}function eH(e,t){const r=t==null?void 0:t[Dee];return r==null?null:El.makeFromBucketSpec(r,e)}function J1e(e,t,r,n={}){e.host=`${t}:${r}`;const a=Rh(t);a&&(Ak(`https://${e.host}/b`),hk("Storage",!0)),e._isUsingEmulator=!0,e._protocol=a?"https":"http";const{mockUserToken:s}=n;s&&(e._overrideAuthToken=typeof s=="string"?s:fJ(s,e.app.options.projectId))}class XP{constructor(t,r,n,a,s,o=!1){this.app=t,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=Oee,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Rbe,this._maxUploadRetryTime=Lbe,this._requests=new Set,a!=null?this._bucket=El.makeFromBucketSpec(a,this._host):this._bucket=eH(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=El.makeFromBucketSpec(this._url,t):this._bucket=eH(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){dF("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){dF("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(Lc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new gg(this,t)}_makeRequest(t,r,n,a,s=!0){if(this._deleted)return new Jbe(Mee());{const o=c1e(t,this._appId,n,a,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,n,a).getPromise()}}const tH="@firebase/storage",rH="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jee="storage";function YP(e,t,r){return e=Yn(e),H1e(e,t,r)}function Z1e(e,t,r){return e=Yn(e),V1e(e,t,r)}function eye(e){return e=Yn(e),z1e(e)}function $k(e){return e=Yn(e),G1e(e)}function tye(e){return e=Yn(e),q1e(e)}function J2(e,t){return e=Yn(e),Y1e(e,t)}function JP(e=mk(),t){e=Yn(e);const n=Q2(e,Jee).getImmediate({identifier:t}),a=KD("storage");return a&&rye(n,...a),n}function rye(e,t,r,n={}){J1e(e,t,r,n)}function nye(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new XP(r,n,a,t,Dg)}function aye(){bm(new xh(Jee,nye,"PUBLIC").setMultipleInstances(!0)),$u(tH,rH,""),$u(tH,rH,"esm2020")}aye();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sye="type.googleapis.com/google.protobuf.Int64Value",iye="type.googleapis.com/google.protobuf.UInt64Value";function Zee(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}function y_(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>y_(t));if(typeof e=="function"||typeof e=="object")return Zee(e,t=>y_(t));throw new Error("Data cannot be encoded in JSON: "+e)}function ob(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case sye:case iye:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>ob(t)):typeof e=="function"||typeof e=="object"?Zee(e,t=>ob(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nH={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rc extends Gd{constructor(t,r,n){super(`${ZP}/${t}`,r||""),this.details=n,Object.setPrototypeOf(this,rc.prototype)}}function oye(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function w_(e,t){let r=oye(e),n=r,a;try{const s=t&&t.error;if(s){const o=s.status;if(typeof o=="string"){if(!nH[o])return new rc("internal","internal");r=nH[o],n=o}const l=s.message;typeof l=="string"&&(n=l),a=s.details,a!==void 0&&(a=ob(a))}}catch{}return r==="ok"?null:new rc(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lye{constructor(t,r,n,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Lc(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||a==null||a.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF="us-central1",cye=/^data: (.*?)(?:\n|$)/;function uye(e){let t=null;return{promise:new Promise((r,n)=>{t=setTimeout(()=>{n(new rc("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class dye{constructor(t,r,n,a,s=fF,o=(...l)=>fetch(...l)){this.app=t,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new lye(t,r,n,a),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(s);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=fF}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function fye(e,t,r){const n=Rh(t);e.emulatorOrigin=`http${n?"s":""}://${t}:${r}`,n&&(Ak(e.emulatorOrigin),hk("Functions",!0))}function Aye(e,t,r){const n=a=>mye(e,t,a,{});return n.stream=(a,s)=>gye(e,t,a,s),n}async function hye(e,t,r,n){r["Content-Type"]="application/json";let a;try{a=await n(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function ete(e,t){const r={},n=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function mye(e,t,r,n){const a=e._url(t);return pye(e,a,r,n)}async function pye(e,t,r,n){r=y_(r);const a={data:r},s=await ete(e,n),o=n.timeout||7e4,l=uye(o),c=await Promise.race([hye(t,a,s,e.fetchImpl),l.promise,e.cancelAllRequests]);if(l.cancel(),!c)throw new rc("cancelled","Firebase Functions instance was deleted.");const u=w_(c.status,c.json);if(u)throw u;if(!c.json)throw new rc("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new rc("internal","Response is missing data field.");return{data:ob(d)}}function gye(e,t,r,n){const a=e._url(t);return xye(e,a,r,n||{})}async function xye(e,t,r,n){var h;r=y_(r);const a={data:r},s=await ete(e,n);s["Content-Type"]="application/json",s.Accept="text/event-stream";let o;try{o=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:s,signal:n==null?void 0:n.signal})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const x=new rc("cancelled","Request was cancelled.");return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}const g=w_(0,null);return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}let l,c;const u=new Promise((m,g)=>{l=m,c=g});(h=n==null?void 0:n.signal)==null||h.addEventListener("abort",()=>{const m=new rc("cancelled","Request was cancelled.");c(m)});const d=o.body.getReader(),f=vye(d,l,c,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const m=f.getReader();return{async next(){const{value:g,done:x}=await m.read();return{value:g,done:x}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:u}}function vye(e,t,r,n){const a=(o,l)=>{const c=o.match(cye);if(!c)return;const u=c[1];try{const d=JSON.parse(u);if("result"in d){t(ob(d.result));return}if("message"in d){l.enqueue(ob(d.message));return}if("error"in d){const f=w_(0,d);l.error(f),r(f);return}}catch(d){if(d instanceof rc){l.error(d),r(d);return}}},s=new TextDecoder;return new ReadableStream({start(o){let l="";return c();async function c(){if(n!=null&&n.aborted){const u=new rc("cancelled","Request was cancelled");return o.error(u),r(u),Promise.resolve()}try{const{value:u,done:d}=await e.read();if(d){l.trim()&&a(l.trim(),o),o.close();return}if(n!=null&&n.aborted){const h=new rc("cancelled","Request was cancelled");o.error(h),r(h),await e.cancel();return}l+=s.decode(u,{stream:!0});const f=l.split(`
`);l=f.pop()||"";for(const h of f)h.trim()&&a(h.trim(),o);return c()}catch(u){const d=u instanceof rc?u:w_(0,null);o.error(d),r(d)}}},cancel(){return e.cancel()}})}const aH="@firebase/functions",sH="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bye="auth-internal",yye="app-check-internal",wye="messaging-internal";function Eye(e){const t=(r,{instanceIdentifier:n})=>{const a=r.getProvider("app").getImmediate(),s=r.getProvider(bye),o=r.getProvider(wye),l=r.getProvider(yye);return new dye(a,s,o,l,n)};bm(new xh(ZP,t,"PUBLIC").setMultipleInstances(!0)),$u(aH,sH,e),$u(aH,sH,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(e=mk(),t=fF){const n=Q2(Yn(e),ZP).getImmediate({identifier:t}),a=KD("functions");return a&&Nye(n,...a),n}function Nye(e,t,r){fye(Yn(e),t,r)}function M0(e,t,r){return Aye(Yn(e),t)}Eye();const Cye={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},Gk=YD(Cye),Hg=YJ(Gk),Er=FP(Gk),eR=JP(Gk),tR=lv(Gk,"us-central1"),tte=Object.freeze(Object.defineProperty({__proto__:null,auth:Hg,db:Er,functions:tR,storage:eR},Symbol.toStringTag,{value:"Module"})),_ye=async(e,t)=>{try{return(await gpe(Hg,e,t)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},sB=async()=>{try{await bpe(Hg)}catch(e){throw console.error("Error en logoutUser helper:",e),e}},Sye=async e=>{try{await ppe(Hg,e)}catch(t){throw console.error("Error en resetPassword helper:",t),t}},rte=async e=>{try{const t=rr(Er,"usuarios",e),r=await Hm(t);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontró perfil en Firestore para: ${e}`),null)}catch(t){throw console.error("Error en getUserProfile helper:",t),t}};var Gt=(e=>(e.SUBDIRECCION="SUBDIRECCION",e.PROFESORADO="PROFESORADO",e.COORDINACION_TP="COORDINACION_TP",e.ESTUDIANTE="ESTUDIANTE",e))(Gt||{}),fn=(e=>(e.EVALUACION="Evaluación",e.ACTO="Acto",e.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",e.SALIDA_PEDAGOGICA="Salida Pedagógica",e))(fn||{}),Fp=(e=>(e.PRUEBA_PARCIAL="Prueba parcial",e.GUIA_APRENDIZAJE="Guía de Aprendizaje",e.RUBRICA="Rúbrica",e.PAUTA_COTEJO="Pauta de Cotejo",e))(Fp||{});const kye=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),jye=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 3.75H6A2.25 2.25 0 003.75 6v1.5M16.5 3.75H18A2.25 2.25 0 0120.25 6v1.5m0 9V18A2.25 2.25 0 0118 20.25h-1.5m-9 0H6A2.25 2.25 0 013.75 18v-1.5M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),Rs="w-6 h-6",qk="w-24 h-24",rR=()=>i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-32 h-32 object-contain"}),Bye=()=>i.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M9 18h6"}),i.jsx("path",{d:"M10 22h4"}),i.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),Tye=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),Iye=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Vy=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),zy=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),nte=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Fye=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:qk,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),Oye=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:qk,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),Dye=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:qk,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Pye=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:qk,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),Rye=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),iH=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),UN=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),iB=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),QN=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),oB=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),oH=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),Lye=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),Mye=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),Uye=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),Qye=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),HN=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),Hye=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),lB=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),Vye=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Rs,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),zye=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Rs,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),lH=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Rs,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),VN=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Rs,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),$ye=[{id:Gt.SUBDIRECCION,label:"Subdirección Pedagógica",icon:i.jsx(Fye,{})},{id:Gt.PROFESORADO,label:"Profesorado",icon:i.jsx(Oye,{})},{id:Gt.COORDINACION_TP,label:"Coordinación TP",icon:i.jsx(Dye,{})},{id:Gt.ESTUDIANTE,label:"Estudiantes",icon:i.jsx(Pye,{})}],Gye={[Gt.SUBDIRECCION]:[{name:"Dashboard",icon:i.jsx(Rye,{})},{name:"Administración",icon:i.jsx(Qye,{})},{name:"Seguimiento Curricular",icon:i.jsx(zye,{})},{name:"Acompañamiento docente",icon:i.jsx(Uye,{})},{name:"Análisis Taxonómico",icon:i.jsx(lH,{})},{name:"SIMCE",icon:i.jsx(VN,{})},{name:"Interdisciplinario",icon:i.jsx(lB,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:i.jsx(iH,{})},{name:"Crear horarios",icon:i.jsx(iB,{})},{name:"Seguimiento de acciones pedagógicas",icon:i.jsx(QN,{})},{name:"Inclusión",icon:i.jsx(HN,{})},{name:"Calendario Académico",icon:i.jsx(UN,{})},{name:"Muro de Anuncios",icon:i.jsx(Vy,{})},{name:"Mensajería Interna",icon:i.jsx(zy,{})},{name:"Generador de Actas",icon:i.jsx(oB,{})}],[Gt.PROFESORADO]:[{name:"Planificación",icon:i.jsx(oH,{})},{name:"Mis Acompañamientos",icon:i.jsx(Hye,{})},{name:"Recursos de Aprendizaje",icon:i.jsx(Lye,{})},{name:"Análisis Taxonómico",icon:i.jsx(lH,{})},{name:"SIMCE",icon:i.jsx(VN,{})},{name:"Interdisciplinario",icon:i.jsx(lB,{})},{name:"Inclusión",icon:i.jsx(HN,{})},{name:"Actividades Remotas",icon:i.jsx(Mye,{})},{name:"Evaluación de Aprendizajes",icon:i.jsx(oB,{})},{name:"Evaluaciones Formativas",icon:i.jsx(QN,{})},{name:"Desarrollo Profesional",icon:i.jsx(HN,{})},{name:"Evaluación de Competencias",icon:i.jsx(jye,{})},{name:"Calendario Académico",icon:i.jsx(UN,{})},{name:"Muro de Anuncios",icon:i.jsx(Vy,{})},{name:"Mensajería Interna",icon:i.jsx(zy,{})},{name:"Generador de Actas",icon:i.jsx(iH,{})}],[Gt.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:i.jsx(QN,{})},{name:"Asistencia Dual",icon:i.jsx(iB,{})},{name:"Pañol",icon:i.jsx(Vye,{})},{name:"SIMCE",icon:i.jsx(VN,{})},{name:"Gestión de Empresas",icon:i.jsx(kye,{})},{name:"Calendario Académico",icon:i.jsx(UN,{})},{name:"Muro de Anuncios",icon:i.jsx(Vy,{})},{name:"Mensajería Interna",icon:i.jsx(zy,{})},{name:"Alternancia TP",icon:"🔄"},{name:"Desarrollo Profesional",icon:i.jsx(HN,{})},{name:"Generador de Actas",icon:i.jsx(oB,{})}],[Gt.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:i.jsx(oH,{})},{name:"Evaluación Formativa",icon:i.jsx(QN,{})},{name:"SIMCE",icon:i.jsx(VN,{})},{name:"Tareas Interdisciplinarias",icon:i.jsx(lB,{})},{name:"Asistencia a Empresa",icon:i.jsx(iB,{})},{name:"Calendario Académico",icon:i.jsx(UN,{})},{name:"Muro de Anuncios",icon:i.jsx(Vy,{})},{name:"Mensajería Interna",icon:i.jsx(zy,{})}]},cH=["1º Medio","2º Medio","3º Medio","4º Medio"],Bs=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],os=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],AF=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],Fv={[fn.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[fn.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[fn.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[fn.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},qye=Object.values(Fp),cB=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],uB=["Vinculado","Desvinculado","En proceso","Empresa"],Xp=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],Kye=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],E_=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],hw=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],ate=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],zN=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],Wye=["Mecánica Industrial","Mecánica Automotriz"],Xye=["INACAP","UNAB","DUOC","Universidad de Las Américas"],Yye={"Mecánica Automotriz":["3ºA","3ºB","4ºA","4ºB"],"Mecánica Industrial":["3ºC","3ºD","4ºC","4ºD"]},Jye=["Pasantía","Visita","Certificación","Formación en empresa"],Zye={"Mecánica Industrial":["Soldadura industrial","Mantenimiento de herramientas","Medición y verificación","Mecánica de banco","Torneado de piezas y conjuntos mecánicos","Fresado de piezas mecánicas","Taladrado de piezas mecánicas","Rectificado de piezas mecánicas","Fabricación asistida por computador (CNC)"],"Mecánica Automotriz":["Ajuste de motores","Lectura de planos y manuales técnicos","Manejo de residuos y desechos automotrices","Mantenimiento de sistemas de seguridad y confortabilidad","Mantenimiento de sistemas eléctricos y electrónicos","Mantenimiento de motores","Mantenimiento de sistemas hidráulicos y neumáticos","Mantenimiento de los sistemas de transmisión y frenos","Mantenimiento de sistemas de dirección y suspensión","Emprendimiento y empleabilidad"]},ewe={"Mecánica Automotriz":{"Ajuste de motores":["Reparar y probar el funcionamiento de motores (gasolina, diésel, gas e híbridos), incluyendo sistemas de control de emisiones, lubricación y refrigeración, usando herramientas e instrumentos apropiados y siguiendo especificaciones del fabricante."],"Lectura de planos y manuales técnicos":["Leer e interpretar información técnica (manuales, planos, diagramas y normas de emisiones) para resolver diagnósticos y fallas."],"Manejo de residuos y desechos automotrices":["Aplicar procedimientos y normativas de seguridad, higiene y cuidado ambiental en la manipulación y disposición de residuos y desechos automotrices."],"Mantenimiento de sistemas de seguridad y confortabilidad":["Diagnosticar, reparar y mantener sistemas de seguridad (frenos ABS, airbags) y confortabilidad (climatización, cierre centralizado, asientos eléctricos) según especificaciones técnicas."],"Mantenimiento de sistemas eléctricos y electrónicos":["Reemplazar, ajustar y probar sistemas eléctricos y electrónicos automotrices, siguiendo procedimientos y normas internacionales."],"Mantenimiento de motores":["Realizar mantenimiento preventivo y correctivo de motores y sus sistemas asociados, verificando tolerancias y parámetros operativos según especificaciones."],"Mantenimiento de sistemas hidráulicos y neumáticos":["Inspeccionar, diagnosticar y reparar sistemas hidráulicos y neumáticos de vehículos automotrices."],"Mantenimiento de los sistemas de transmisión y frenos":["Verificar, ajustar o reemplazar componentes de transmisión y frenos, según manual del fabricante."],"Mantenimiento de sistemas de dirección y suspensión":["Diagnosticar, alinear y corregir sistemas de dirección y suspensión, cumpliendo normas de seguridad."],"Emprendimiento y empleabilidad":["Desarrollar un proyecto o plan de negocio relacionado con el sector automotriz, aplicando conceptos de gestión, marketing y normativa vigente."]},"Mecánica Industrial":{"Soldadura industrial":["Ejecutar procesos de corte y soldadura (oxiacetileno, arco manual, TIG, MIG) en distintas posiciones y materiales, aplicando normas de seguridad, higiene y cuidado ambiental."],"Mantenimiento de herramientas":["Mantener y reparar herramientas manuales y de máquinas, asegurando su operatividad y prolongando su vida útil."],"Medición y verificación":["Utilizar instrumentos de medición y verificación para controlar dimensiones y tolerancias según planos y especificaciones técnicas."],"Mecánica de banco":["Realizar operaciones manuales de mecanizado, ajuste, limado, roscado y ensamblaje, siguiendo planos y tolerancias indicadas."],"Torneado de piezas y conjuntos mecánicos":["Operar tornos convencionales para fabricar piezas y conjuntos mecánicos, cumpliendo con las especificaciones técnicas y de seguridad."],"Fresado de piezas mecánicas":["Operar fresadoras para fabricar piezas mecánicas, seleccionando herramientas de corte y parámetros de mecanizado adecuados."],"Taladrado de piezas mecánicas":["Ejecutar operaciones de taladrado, escariado y roscado en taladros de banco o columna, cumpliendo especificaciones técnicas y de seguridad."],"Rectificado de piezas mecánicas":["Utilizar rectificadoras para mejorar el acabado y precisión dimensional de piezas mecánicas, cumpliendo tolerancias indicadas."],"Fabricación asistida por computador (CNC)":["Programar y operar máquinas CNC para fabricar piezas mecánicas con precisión, optimizando procesos y aplicando normas de seguridad."]}},JA={"Liderazgo Curricular":["Planificación y organización del currículo","Asegurar la cobertura y secuenciación de los contenidos","Monitoreo del cumplimiento de los planes de estudio"],"Prácticas Pedagógicas en el Aula":["Estrategias de enseñanza y metodologías activas","Evaluación de los aprendizajes para retroalimentar el proceso","Uso de recursos y tecnologías para apoyar la enseñanza"],"Acompañamiento y Desarrollo Profesional Docente":["Observación de clases y retroalimentación","Planes de formación continua y actualización pedagógica","Fomento de comunidades de aprendizaje docente"],"Monitoreo y Evaluación de los Aprendizajes":["Uso de datos e indicadores para tomar decisiones pedagógicas","Evaluaciones internas y externas","Ajuste de estrategias según resultados y metas de aprendizaje"]},uH=["Pendiente","En Proceso","Cumplida"],dH=["PROFESORADO","SUBDIRECCION","COORDINACION_TP"],twe=({onLoginAttempt:e,onForgotPasswordRequest:t,error:r})=>{const[n,a]=C.useState(""),[s,o]=C.useState(""),[l,c]=C.useState("login"),u=h=>{h.preventDefault(),e(n,s)},d=h=>{h.preventDefault(),t(n),c("forgot_sent")},f=()=>l==="forgot"?i.jsxs("form",{onSubmit:d,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),i.jsx("div",{className:"text-sm text-center",children:i.jsx("button",{type:"button",onClick:()=>c("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):l==="forgot_sent"?i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),i.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",i.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contraseña."]}),i.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),i.jsx("button",{type:"button",onClick:()=>{c("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):i.jsxs("form",{onSubmit:u,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:h=>o(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&i.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:i.jsx("p",{children:r})}),i.jsx("div",{className:"text-sm text-center",children:i.jsx("button",{type:"button",onClick:()=>c("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),i.jsx("div",{children:i.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("div",{className:"mb-4 flex justify-center items-center",children:i.jsx(rR,{})}),i.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:l==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),i.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:f()}),i.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},$N=({trigger:e,children:t,onOpen:r})=>{const[n,a]=C.useState(!1),s=C.useRef(null),o=()=>{const c=!n;a(c),c&&r&&r()},l=c=>{s.current&&!s.current.contains(c.target)&&a(!1)};return C.useEffect(()=>(document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}),[]),i.jsxs("div",{className:"relative",ref:s,children:[i.jsx("div",{onClick:o,children:e}),n&&i.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:t})]})},fH="usuariosLiceo",rwe=({user:e,onClose:t,onSave:r})=>{const[n,a]=C.useState({nombreCompleto:e.nombreCompleto,email:e.email,fotoUrl:e.fotoUrl||""}),s=l=>{a({...n,[l.target.name]:l.target.value})},o=l=>{l.preventDefault();const c={...e,...n};try{const u=localStorage.getItem(fH);let d=u?JSON.parse(u):[];const f=d.findIndex(h=>h.id===e.id);f>-1?d[f]=c:d.push(c),localStorage.setItem(fH,JSON.stringify(d)),r(c),t()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:l=>l.stopPropagation(),children:i.jsxs("form",{onSubmit:o,children:[i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),i.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),i.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),i.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),i.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.profile})]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},AH="usuariosLiceo",nwe=({user:e,onClose:t,onSave:r})=>{const[n,a]=C.useState(""),[s,o]=C.useState(""),[l,c]=C.useState(null),u=d=>{if(d.preventDefault(),c(null),!n){c("La contraseña no puede estar en blanco.");return}if(n!==s){c("Las contraseñas no coinciden.");return}const f={...e,password:n};try{const h=localStorage.getItem(AH);let m=h?JSON.parse(h):[];const g=m.findIndex(x=>x.id===e.id);g>-1?m[g]=f:m.push(f),localStorage.setItem(AH,JSON.stringify(m)),r(f),t()}catch(h){console.error("Failed to save new password:",h),c("No se pudo guardar la nueva contraseña.")}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:i.jsxs("form",{onSubmit:u,children:[i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),i.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.email})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:d=>o(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l&&i.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:i.jsx("p",{children:l})})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const awe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),swe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),hH=e=>{const t=swe(e);return t.charAt(0).toUpperCase()+t.slice(1)},ste=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),iwe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var owe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lwe=C.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:o,...l},c)=>C.createElement("svg",{ref:c,...owe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:ste("lucide",a),...!s&&!iwe(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,d])=>C.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=(e,t)=>{const r=C.forwardRef(({className:n,...a},s)=>C.createElement(lwe,{ref:s,iconNode:t,className:ste(`lucide-${awe(hH(e))}`,`lucide-${e}`,n),...a}));return r.displayName=hH(e),r};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cwe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],uwe=Qt("activity",cwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dwe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],GN=Qt("arrow-left",dwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fwe=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Awe=Qt("award",fwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hwe=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],mwe=Qt("bell-ring",hwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pwe=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],gwe=Qt("book-marked",pwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xwe=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],vwe=Qt("book-open-check",xwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bwe=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ol=Qt("book-open",bwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ywe=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],mH=Qt("book",ywe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wwe=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],Ewe=Qt("brain-circuit",wwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nwe=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],qw=Qt("brain",Nwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cwe=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],N_=Qt("briefcase",Cwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _we=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],C_=Qt("building-2",_we);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Swe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],kwe=Qt("building",Swe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jwe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],nR=Qt("calculator",jwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bwe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],Twe=Qt("calendar-check",Bwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iwe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ic=Qt("calendar",Iwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fwe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],zc=Qt("chart-column",Fwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Owe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],Dwe=Qt("chart-line",Owe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pwe=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],Rwe=Qt("chart-no-axes-column-increasing",Pwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lwe=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],ite=Qt("chart-no-axes-column",Lwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mwe=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],mw=Qt("chart-pie",Mwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uwe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ote=Qt("check",Uwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qwe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Kw=Qt("chevron-left",Qwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hwe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],aR=Qt("chevron-right",Hwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vwe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Gu=Qt("circle-alert",Vwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zwe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],sR=Qt("circle-check-big",zwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $we=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],es=Qt("circle-check",$we);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gwe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],qN=Qt("circle-plus",Gwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qwe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],lte=Qt("circle-question-mark",qwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kwe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ww=Qt("circle-x",Kwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wwe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],Xwe=Qt("clipboard-check",Wwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ywe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],xg=Qt("clipboard-list",Ywe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jwe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Gf=Qt("clock",Jwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zwe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Eh=Qt("download",Zwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2e=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],dB=Qt("external-link",e2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2e=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],cte=Qt("eye",t2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2e=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],n2e=Qt("factory",r2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2e=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],ute=Qt("file-check",a2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2e=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],i2e=Qt("file-pen",s2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2e=[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]],l2e=Qt("file-play",o2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2e=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],iR=Qt("file-spreadsheet",c2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2e=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Md=Qt("file-text",u2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2e=[["path",{d:"M15 2a2 2 0 0 1 1.414.586l4 4A2 2 0 0 1 21 8v7a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z",key:"1vo8kb"}],["path",{d:"M15 2v4a2 2 0 0 0 2 2h4",key:"sud9ri"}],["path",{d:"M5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1",key:"l4dndm"}]],fB=Qt("files",d2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2e=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M2 10h20",key:"1ir3d8"}]],A2e=Qt("folder-closed",f2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2e=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],pH=Qt("folder-open",h2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2e=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Kk=Qt("funnel",m2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2e=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],__=Qt("gauge",p2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2e=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],vg=Qt("graduation-cap",g2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2e=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],v2e=Qt("hash",x2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2e=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],dte=Qt("hourglass",b2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],w2e=Qt("image",y2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],N2e=Qt("info",E2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2e=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],fte=Qt("layout-dashboard",C2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2e=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],oR=Qt("layers",_2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2e=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],k2e=Qt("layout-grid",S2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2e=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],B2e=Qt("layout-list",j2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2e=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],gH=Qt("link-2",T2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2e=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],F2e=Qt("link",I2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2e=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],Ov=Qt("list-checks",O2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2e=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],wl=Qt("loader-circle",D2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2e=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],R2e=Qt("mail",P2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2e=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],S_=Qt("map-pin",L2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2e=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],U2e=Qt("megaphone",M2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2e=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],H2e=Qt("menu",Q2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Ate=Qt("message-square",V2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2e=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],xH=Qt("notebook-pen",z2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2e=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],G2e=Qt("palette",$2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2e=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],k_=Qt("pen-line",q2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2e=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],W2e=Qt("pen-tool",K2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2e=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],lR=Qt("pencil",X2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2e=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],J2e=Qt("percent",Y2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Co=Qt("plus",Z2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eEe=[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]],hF=Qt("presentation",eEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tEe=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],rEe=Qt("puzzle",tEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nEe=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],mF=Qt("refresh-ccw",nEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aEe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],um=Qt("refresh-cw",aEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sEe=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],iEe=Qt("route",sEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oEe=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],lEe=Qt("ruler",oEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cEe=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Kc=Qt("save",cEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uEe=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],Yp=Qt("school",uEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dEe=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],vH=Qt("scroll-text",dEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fEe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Xb=Qt("search",fEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AEe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],hEe=Qt("send",AEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mEe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pEe=Qt("settings",mEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gEe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],xEe=Qt("shield-check",gEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vEe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Jp=Qt("sparkles",vEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bEe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],j_=Qt("square-pen",bEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yEe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],pF=Qt("square-plus",yEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wEe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],EEe=Qt("star",wEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NEe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],lb=Qt("target",NEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CEe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Is=Qt("trash-2",CEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Ee=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],B_=Qt("trending-up",_Ee);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SEe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Xw=Qt("triangle-alert",SEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kEe=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M18 16h.01",key:"plv8zi"}],["path",{d:"M22 7a1 1 0 0 0-1-1h-2a2 2 0 0 1-1.143-.359L13.143 2.36a2 2 0 0 0-2.286-.001L6.143 5.64A2 2 0 0 1 5 6H3a1 1 0 0 0-1 1v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2z",key:"1ogmi3"}],["path",{d:"M6 12h.01",key:"c2rlol"}],["path",{d:"M6 16h.01",key:"1pmjb7"}],["circle",{cx:"12",cy:"10",r:"2",key:"1yojzk"}]],jEe=Qt("university",kEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BEe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Yb=Qt("upload",BEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TEe=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],bH=Qt("user-cog",TEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IEe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],FEe=Qt("user-minus",IEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OEe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],gF=Qt("user-plus",OEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DEe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Yw=Qt("user",DEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PEe=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],ly=Qt("users-round",PEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const REe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],_o=Qt("users",REe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LEe=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Op=Qt("video",LEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MEe=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],UEe=Qt("wand-sparkles",MEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QEe=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],b5=Qt("wrench",QEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HEe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Nh=Qt("x",HEe);async function VEe(e){const t={...e,docenteEmailLower:e.docenteEmail?e.docenteEmail.toLowerCase():e.docenteEmailLower,leida:!1,createdAt:za()};return Object.keys(t).forEach(n=>t[n]===void 0&&delete t[n]),(await an(pt(Er,"notificaciones"),t)).id}function zEe(e,t){const r=[];let n=[],a=[];const s=()=>{const o=new Map;[...n,...a].forEach(c=>{c.id&&(o.has(c.id)||o.set(c.id,c))});const l=Array.from(o.values()).sort((c,u)=>{var h,m;const d=(h=c.createdAt)!=null&&h.toDate?c.createdAt.toDate().getTime():0;return((m=u.createdAt)!=null&&m.toDate?u.createdAt.toDate().getTime():0)-d});t(l)};if(e.email){const o=Vt(pt(Er,"notificaciones"),wr("docenteEmailLower","==",e.email.toLowerCase()),cr("createdAt","desc"));r.push(hr(o,l=>{n=l.docs.map(c=>({id:c.id,...c.data()})),s()}))}if(e.nombreCompleto){const o=Vt(pt(Er,"notificaciones"),wr("docenteNombre","==",e.nombreCompleto),cr("createdAt","desc"));r.push(hr(o,l=>{a=l.docs.map(c=>({id:c.id,...c.data()})),s()}))}return()=>r.forEach(o=>o())}async function $Ee(e){const t=rr(Er,"notificaciones",e);await Bl(t,{leida:!0})}async function GEe(e){const t=rr(Er,"notificaciones",e);await ka(t)}const yH="anunciosMuro",wH="mensajesInternos",EH="lir-read-status",qEe=({user:e})=>{if(e.fotoUrl)return i.jsx("img",{src:e.fotoUrl,alt:e.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const t=e.nombreCompleto||"",r=String(t).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return i.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},KEe=({currentUser:e,onLogout:t,onNavigate:r,onUserUpdate:n,onChangeProfile:a,canChangeProfile:s,toggleSidebar:o,unreadMessagesCount:l,refreshUnreadCount:c})=>{const[u,d]=C.useState([]),[f,h]=C.useState([]),[m,g]=C.useState(!1),[x,v]=C.useState(!1),[y,w]=C.useState([]),_=C.useCallback(()=>{try{const B=localStorage.getItem(`${EH}-${e.id}`);return B?JSON.parse(B):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[e.id]),T=C.useCallback(B=>{try{localStorage.setItem(`${EH}-${e.id}`,JSON.stringify(B))}catch(M){console.error("Failed to set read status:",M)}},[e.id]);C.useEffect(()=>{const B=JSON.parse(localStorage.getItem(yH)||"[]"),M=_();d(B.filter(k=>!M.announcements.includes(k.id)));const R=JSON.parse(localStorage.getItem(wH)||"[]");h(R.filter(k=>k.para===e.email).sort((k,D)=>new Date(D.fecha).getTime()-new Date(k.fecha).getTime()).slice(0,5))},[e.id,_,l]),C.useEffect(()=>{if(!(e!=null&&e.email))return;const B=zEe({email:e.email,nombreCompleto:e.nombreCompleto},M=>{const R=M.filter(k=>k.tipo&&(k.tipo.toLowerCase()==="pie"||k.tipo==="nueva_intervencion"));w(R)});return()=>B()},[e==null?void 0:e.email,e==null?void 0:e.nombreCompleto]);const j=()=>{const B=_(),M=JSON.parse(localStorage.getItem(yH)||"[]").map(R=>R.id);B.announcements=M,T(B),d([])},I=()=>{const B=_(),R=JSON.parse(localStorage.getItem(wH)||"[]").filter(k=>k.para===e.email).map(k=>k.id);B.messages=[...new Set([...B.messages,...R])],T(B),c()},E=y.filter(B=>!B.leida).length,S=B=>{var M;try{const R=(M=B.createdAt)!=null&&M.toDate?B.createdAt.toDate():new Date(B.createdAt);return R?R.toLocaleString("es-CL"):""}catch{return""}};return i.jsxs(i.Fragment,{children:[i.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:i.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:o,children:i.jsx(Tye,{})}),i.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),i.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),i.jsx("div",{className:"flex-1 flex justify-center",children:i.jsx("button",{onClick:()=>r("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:i.jsx(Iye,{})})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($N,{onOpen:j,trigger:i.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Anuncios",children:[i.jsx(Vy,{}),u.length>0&&i.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:i.jsxs("div",{className:"p-2",children:[i.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),i.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(B=>i.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[i.jsx("p",{className:"font-bold dark:text-slate-200",children:B.titulo}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:B.mensaje})]},B.id)),u.length===0&&i.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),i.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),i.jsx($N,{trigger:i.jsxs("button",{className:"relative p-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-700 dark:bg-sky-900/30 dark:hover:bg-sky-900/40 dark:text-sky-300 transition-colors",title:"Notificaciones PIE",children:[i.jsx(rEe,{className:"w-5 h-5"}),E>0&&i.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:E})]}),children:i.jsxs("div",{className:"p-2 w-80",children:[i.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Notificaciones PIE"}),i.jsxs("ul",{className:"mt-1 max-h-80 overflow-y-auto divide-y dark:divide-slate-700",children:[y.length===0&&i.jsx("li",{className:"p-3 text-sm text-slate-500 dark:text-slate-400",children:"No hay notificaciones."}),y.map(B=>i.jsx("li",{className:"p-2 text-sm",children:i.jsxs("div",{className:"flex justify-between items-start gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:B.titulo}),i.jsx("div",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-line",children:B.mensaje}),B.estudianteNombre&&i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Estudiante: ",i.jsx("b",{children:B.estudianteNombre})]}),i.jsx("div",{className:"text-[11px] text-slate-400 mt-1",children:S(B)})]}),i.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-1",children:[!B.leida&&i.jsx("button",{onClick:()=>B.id&&$Ee(B.id),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded hover:bg-green-200",children:"Marcar leída"}),i.jsx("button",{onClick:()=>B.id&&GEe(B.id),className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded hover:bg-red-200",children:"Eliminar"})]})]})},B.id))]})]})}),i.jsx($N,{onOpen:I,trigger:i.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[i.jsx(zy,{}),l>0&&i.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:l})]}),children:i.jsxs("div",{className:"p-2",children:[i.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),i.jsxs("ul",{className:"mt-1",children:[f.slice(0,3).map(B=>i.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[i.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",B.de]}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:B.asunto})]},B.id)),f.length===0&&i.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),i.jsx("button",{onClick:()=>r("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),i.jsx($N,{trigger:i.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(qEe,{user:e})}),children:i.jsxs("div",{className:"p-2",children:[i.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:e.nombreCompleto}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.profile})]}),i.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[i.jsx("li",{children:i.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),i.jsx("li",{children:i.jsx("button",{onClick:()=>v(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),s&&i.jsx("li",{children:i.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"👑 Cambiar Vista"})}),i.jsx("li",{children:i.jsx("button",{onClick:t,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),m&&i.jsx(rwe,{user:e,onClose:()=>g(!1),onSave:n}),x&&i.jsx(nwe,{user:e,onClose:()=>v(!1),onSave:n})]})},WEe={apiKey:void 0,authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},cR=k9().length?k9()[0]:YD(WEe),lt=FP(cR),T_=YJ(cR),hte=JP(cR),mte=Object.freeze(Object.defineProperty({__proto__:null,auth:T_,db:lt,storage:hte},Symbol.toStringTag,{value:"Module"})),Z2="reemplazos_docentes",XEe="usuarios",uR=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaActualizacion:((s=(a=t.fechaActualizacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaActualizacion}},YEe=e=>{const t=e.data();return{id:e.id,...t}},JEe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:ir.fromDate(new Date),fechaActualizacion:ir.fromDate(new Date)};return(await an(pt(lt,Z2),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},ZEe=async(e,t)=>{try{const r=rr(lt,Z2,e),n=await Hm(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar este reemplazo");await ka(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},eNe=(e,t,r=50)=>{try{const n=Vt(pt(lt,Z2),wr("userId","==",e),cr("diaAusencia","desc"),Ld(r));return hr(n,a=>{const s=a.docs.map(uR);t(s)},a=>{console.error("Error en suscripción a reemplazos:",a),t([])})}catch(n){return console.error("Error al crear la suscripción de reemplazos:",n),()=>{}}},tNe=e=>{try{const t=Vt(pt(lt,XEe),wr("profile","==",Gt.PROFESORADO));return hr(t,n=>{const a=n.docs.map(YEe);e(a)},n=>{console.error("Error al obtener la lista de profesores:",n),e([])})}catch(t){return console.error("Error al crear la suscripción de profesores:",t),()=>{}}},rNe=async e=>{try{const t=Vt(pt(lt,Z2),wr("userId","==",e)),n=(await mn(t)).docs.map(uR),a=n.length,s=n.filter(l=>l.resultado==="Hora realizada").length,o=n.filter(l=>l.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:a,horasRealizadas:s,horasCubiertas:o,porcentajeRealizadas:a>0?s/a*100:0}}catch(t){throw console.error("Error al obtener estadísticas:",t),new Error("No se pudieron obtener las estadísticas")}},nNe=async(e,t)=>{try{if(!t.trim())return[];const r=Vt(pt(lt,Z2),wr("userId","==",e),cr("diaAusencia","desc"),Ld(100)),a=(await mn(r)).docs.map(uR),s=t.toLowerCase();return a.filter(o=>o.docenteAusente.toLowerCase().includes(s)||o.docenteReemplazante.toLowerCase().includes(s)||o.curso.toLowerCase().includes(s)||o.diaAusencia.includes(s)||o.asignaturaAusente.toLowerCase().includes(s)||o.asignaturaReemplazante.toLowerCase().includes(s))}catch(r){return console.error("Error en búsqueda de reemplazos:",r),[]}},aNe=Array.from({length:12},(e,t)=>t+1),NH={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},sNe=e=>{const[t,r]=C.useState([]),[n,a]=C.useState(!0),[s,o]=C.useState(null);C.useEffect(()=>e?eNe(e,f=>{r(f),a(!1)}):void 0,[e]);const l=C.useCallback(async d=>{try{return o(null),await JEe(d,e)}catch(f){throw o(f instanceof Error?f.message:"Error al guardar"),f}},[e]),c=C.useCallback(async d=>{try{o(null),await ZEe(d,e)}catch(f){throw o(f instanceof Error?f.message:"Error al eliminar"),f}},[e]),u=C.useCallback(async d=>{try{return o(null),d.trim()?await nNe(e,d):t}catch(f){return o(f instanceof Error?f.message:"Error en la búsqueda"),[]}},[e,t]);return{reemplazos:t,loading:n,error:s,save:l,remove:c,search:u}},iNe=()=>{const[e,t]=C.useState([]),[r,n]=C.useState(!0);C.useEffect(()=>tNe(o=>{t(o),n(!1)}),[]);const a=C.useMemo(()=>e.map(s=>s.nombreCompleto).sort(),[e]);return{profesores:e,profesorNames:a,loading:r}},Tx=({label:e,icon:t,children:r})=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:e}),i.jsxs("div",{className:"relative",children:[t&&i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:t}),r]})]}),oNe="inline-flex items-center justify-center rounded-xl border text-sm px-3 py-2 transition-all",lNe="bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200 dark:border-emerald-700",cNe="bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-700",k0=({title:e,value:t,icon:r})=>i.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsx("div",{className:"grid place-items-center h-12 w-12 rounded-xl bg-gradient-to-br from-slate-100 to-slate-200 text-slate-700 dark:from-slate-700 dark:to-slate-600 dark:text-slate-200",children:r}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:e}),i.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:t})]})]}),uNe=({data:e})=>{const t=Math.max(1,...e.map(r=>r.value));return i.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Distribución (graficable)"}),i.jsx("div",{className:"grid gap-3",children:e.map(r=>i.jsxs("div",{children:[i.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[i.jsx("span",{children:r.label}),i.jsx("span",{children:r.value})]}),i.jsx("div",{className:"h-2 w-full rounded bg-slate-200/60 dark:bg-slate-700",children:i.jsx("div",{className:"h-2 rounded bg-slate-900 dark:bg-amber-500",style:{width:`${r.value/t*100}%`}})})]},r.label))})]})},dNe=({data:e})=>{const t=Math.max(1,...e.map(n=>n.value)),r=["from-indigo-500 to-sky-500","from-emerald-500 to-lime-500","from-amber-500 to-orange-600","from-fuchsia-500 to-pink-500","from-cyan-500 to-teal-500","from-rose-500 to-red-500","from-violet-500 to-purple-500"];return i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[i.jsx(zc,{className:"h-5 w-5 text-slate-400"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Reemplazos / Inasistencias por curso (mes actual)"})]}),e.length===0?i.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No hay registros este mes."}):i.jsx("div",{className:"grid gap-3",children:e.map((n,a)=>i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[i.jsx("span",{className:"font-medium",children:n.label}),i.jsx("span",{children:n.value})]}),i.jsx("div",{className:"h-3 w-full rounded-lg bg-slate-100 dark:bg-slate-700",children:i.jsx("div",{className:`h-3 rounded-lg bg-gradient-to-r ${r[a%r.length]}`,style:{width:`${n.value/t*100}%`}})})]},n.label))})]})},fNe=({userId:e,reemplazos:t})=>{const[r,n]=C.useState(null),[a,s]=C.useState(!1),o=C.useCallback(async()=>{try{s(!0);const v=await rNe(e);n(v)}finally{s(!1)}},[e]);C.useEffect(()=>{e&&o()},[e,o]);const l=new Date,c=l.getMonth(),u=l.getFullYear(),d=C.useMemo(()=>(t||[]).filter(v=>{const y=new Date(v.diaAusencia+"T00:00:00");return y.getMonth()===c&&y.getFullYear()===u}),[t,c,u]),f=new Set(d.map(v=>v.docenteAusente).filter(Boolean)),h=new Set(d.map(v=>v.docenteReemplazante).filter(Boolean)),m=new Set(d.map(v=>v.curso).filter(Boolean)),g=new Set(d.map(v=>v.asignaturaAusente).filter(Boolean)),x=[{label:"Prof. ausentes",value:f.size},{label:"Prof. que reemplazan",value:h.size},{label:"Cursos",value:m.size},{label:"Asignaturas ausentes",value:g.size}];return a||!r?i.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:i.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[i.jsx(wl,{className:"h-5 w-5 animate-spin"}),"Cargando estadísticas…"]})}):i.jsxs("div",{className:"grid gap-4",children:[i.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[i.jsx(k0,{title:"Total",value:r.totalReemplazos,icon:i.jsx(mwe,{className:"h-6 w-6"})}),i.jsx(k0,{title:"Realizadas",value:r.horasRealizadas,icon:i.jsx(es,{className:"h-6 w-6"})}),i.jsx(k0,{title:"Cubiertas",value:r.horasCubiertas,icon:i.jsx(Xwe,{className:"h-6 w-6"})}),i.jsx(k0,{title:"Efectividad",value:`${r.porcentajeRealizadas.toFixed(1)}%`,icon:i.jsx(J2e,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[i.jsx(k0,{title:"Profesores ausentes",value:f.size,icon:i.jsx(FEe,{className:"h-6 w-6"})}),i.jsx(k0,{title:"Profesores que reemplazan",value:h.size,icon:i.jsx(gF,{className:"h-6 w-6"})}),i.jsx(k0,{title:"Cursos (únicos)",value:m.size,icon:i.jsx(_o,{className:"h-6 w-6"})}),i.jsx(k0,{title:"Asignaturas ausentes",value:g.size,icon:i.jsx(ol,{className:"h-6 w-6"})})]}),i.jsx(uNe,{data:x})]})},ANe=({currentUser:e})=>{const t=e.email||e.id||"",{reemplazos:r,save:n,remove:a,search:s,loading:o,error:l}=sNe(t),{profesorNames:c,loading:u}=iNe(),[d,f]=C.useState(NH),[h,m]=C.useState(""),[g,x]=C.useState([]),[v,y]=C.useState(null),[w,_]=C.useState(!1),[T,j]=C.useState(!1);C.useEffect(()=>{(async()=>{if(!h.trim())return x(r);j(!0);try{const G=await s(h);x(G)}finally{j(!1)}})()},[r,h,s]);const I=C.useCallback(q=>{const{name:G,value:K}=q.target;f(ee=>({...ee,[G]:K}))},[]),E=C.useCallback(q=>{f(G=>{const ee=G.bloquesAfectados.includes(q)?G.bloquesAfectados.filter(W=>W!==q):[...G.bloquesAfectados,q].sort((W,P)=>W-P);return{...G,bloquesAfectados:ee}})},[]),S=C.useCallback(async q=>{q.preventDefault(),y(null),_(!0);const{docenteAusente:G,asignaturaAusente:K,curso:ee,diaAusencia:W,bloquesAfectados:P,docenteReemplazante:U,asignaturaReemplazante:z}=d;if(!G||!K||!ee||!W||!U||!z||P.length===0){y("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),_(!1);return}if(G===U){y("El docente ausente y el reemplazante no pueden ser la misma persona."),_(!1);return}try{const J=K.trim().toLowerCase()===z.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",te={...d,resultado:J};await n(te),f(NH);const se=document.createElement("div");se.className="fixed top-4 right-4 z-50 rounded-lg bg-emerald-600 px-4 py-2 text-white shadow-lg",se.textContent=J==="Hora realizada"?"✅ Reemplazo registrado — Hora realizada":"⚠️ Reemplazo registrado — Hora cubierta, no realizada",document.body.appendChild(se),setTimeout(()=>{document.body.contains(se)&&document.body.removeChild(se)},2500)}catch(J){console.error(J),y("Error al guardar el reemplazo. Intente nuevamente.")}finally{_(!1)}},[d,n]),B=C.useCallback(async q=>{if(window.confirm("¿Eliminar este registro?"))try{await a(q)}catch(G){console.error(G),alert("No se pudo eliminar. Intente nuevamente.")}},[a]),M="w-full rounded-lg border bg-white px-10 py-2.5 text-slate-700 placeholder-slate-400 shadow-sm outline-none transition focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100";if(!e||!e.email&&!e.id)return i.jsx("div",{className:"grid place-items-center rounded-xl border border-slate-200 bg-white p-8 text-center shadow-sm dark:border-slate-700 dark:bg-slate-800",children:i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Error: Usuario no autenticado."})});const R=new Date,k=R.getMonth(),D=R.getFullYear(),L=C.useMemo(()=>(r||[]).filter(q=>{if(!q.diaAusencia)return!1;const G=new Date(q.diaAusencia+"T00:00:00");return G.getMonth()===k&&G.getFullYear()===D}),[r,k,D]),Z=C.useMemo(()=>{const q={};for(const G of L){const K=G.curso||"Sin curso";q[K]=(q[K]||0)+1}return q},[L]),V=C.useMemo(()=>Object.entries(Z).sort(([q],[G])=>q.localeCompare(G,"es")).map(([q,G])=>({label:q,value:G})),[Z]);return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"mb-1 text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Estadísticas del Mes"}),i.jsx(fNe,{userId:t,reemplazos:r})]}),i.jsx(dNe,{data:V}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Registro de Inasistencias y Reemplazos"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Complete el formulario para registrar una nueva suplencia."})]}),u?i.jsxs("div",{className:"flex items-center justify-center gap-2 py-8 text-slate-500",children:[i.jsx(wl,{className:"h-5 w-5 animate-spin"})," Cargando profesores…"]}):i.jsxs("form",{onSubmit:S,className:"space-y-8",children:[i.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(_o,{className:"h-5 w-5 text-slate-400"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Ausente"})]}),i.jsx(Tx,{label:"Nombre",icon:i.jsx(vg,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:I,className:M,required:!0,disabled:w,children:[i.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(q=>i.jsx("option",{value:q,children:q},q))]})}),i.jsx(Tx,{label:"Asignatura",icon:i.jsx(ol,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:I,className:M,required:!0,disabled:w,children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),Bs.map(q=>i.jsx("option",{value:q,children:q},q))]})}),i.jsx(Tx,{label:"Curso",icon:i.jsx(_o,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"curso",value:d.curso,onChange:I,className:M,required:!0,disabled:w,children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),os.map(q=>i.jsx("option",{value:q,children:q},q))]})}),i.jsx(Tx,{label:"Día de ausencia",icon:i.jsx(ic,{className:"h-5 w-5"}),children:i.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:I,className:M,required:!0,disabled:w})}),i.jsxs("div",{children:[i.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[i.jsx(Gf,{className:"h-5 w-5 text-slate-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Bloques afectados"})]}),i.jsx("div",{className:"grid grid-cols-4 gap-2 sm:grid-cols-6",children:aNe.map(q=>{const G=d.bloquesAfectados.includes(q);return i.jsx("button",{type:"button",onClick:()=>E(q),disabled:w,className:`${oNe} ${G?lNe:cNe}`,"aria-pressed":G,children:q},q)})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(_o,{className:"h-5 w-5 text-slate-400"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Reemplazante"})]}),i.jsx(Tx,{label:"Nombre",icon:i.jsx(vg,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:I,className:M,required:!0,disabled:w,children:[i.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(q=>i.jsx("option",{value:q,children:q},q))]})}),i.jsx(Tx,{label:"Asignatura",icon:i.jsx(ol,{className:"h-5 w-5"}),children:i.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:I,className:M,required:!0,disabled:w,children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),Bs.map(q=>i.jsx("option",{value:q,children:q},q))]})}),d.asignaturaAusente&&d.asignaturaReemplazante&&i.jsxs("div",{className:"mt-4 rounded-xl border-2 border-dashed border-slate-200 p-4 dark:border-slate-700",children:[i.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Vista previa del resultado"}),i.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[i.jsx(es,{className:"h-4 w-4"}),d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Hora realizada":"Hora cubierta, no realizada"]}),i.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden.":"Las asignaturas no coinciden."})]})]})]}),(v||l)&&i.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 text-red-700 dark:border-red-800 dark:bg-red-900/20 dark:text-red-300",children:v||l}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"submit",disabled:w||u,className:"inline-flex items-center gap-2 rounded-xl bg-slate-900 px-5 py-2.5 font-semibold text-white shadow hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:w?i.jsxs(i.Fragment,{children:[i.jsx(wl,{className:"h-4 w-4 animate-spin"})," Registrando…"]}):i.jsxs(i.Fragment,{children:[i.jsx(Kc,{className:"h-4 w-4"})," Registrar Reemplazo"]})})})]})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"mb-4 flex items-center justify-between gap-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Historial de Reemplazos"}),i.jsxs("div",{className:"relative w-full max-w-md",children:[i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:T?i.jsx(wl,{className:"h-5 w-5 animate-spin"}):i.jsx(Xb,{className:"h-5 w-5"})}),i.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)…",value:h,onChange:q=>m(q.target.value),className:M,disabled:T})]})]}),o?i.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-slate-500",children:[i.jsx(wl,{className:"h-5 w-5 animate-spin"})," Cargando reemplazos…"]}):i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:i.jsx("tr",{children:["Fecha","Curso","Docente Ausente","Docente Reemplazante","Bloques","Resultado","Acciones"].map(q=>i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:q},q))})}),i.jsx("tbody",{className:"divide-y divide-slate-200 bg-white dark:divide-slate-700 dark:bg-slate-800",children:g.length>0?g.map(q=>i.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-200",children:new Date(q.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:q.curso}),i.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[q.docenteAusente,i.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:q.asignaturaAusente})]}),i.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[q.docenteReemplazante,i.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:q.asignaturaReemplazante})]}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:q.bloquesAfectados.join(", ")}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:i.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${q.resultado==="Hora realizada"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[i.jsx(es,{className:"h-4 w-4"}),q.resultado]})}),i.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:i.jsx("button",{onClick:()=>B(q.id),title:"Eliminar registro",className:"rounded-full p-2 text-red-600 hover:bg-red-50 hover:text-red-700 dark:text-red-300 dark:hover:bg-red-900/30",disabled:w,children:i.jsx(Is,{className:"h-4 w-4"})})})]},q.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:h?"No se encontraron resultados para tu búsqueda.":"Aún no hay registros."})})})]}),g.length>0&&!h&&i.jsxs("div",{className:"mt-4 text-center text-sm text-slate-500 dark:text-slate-400",children:["Mostrando los últimos ",g.length," registros"]})]})]})]})},hNe=e=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const t=pt(Er,"reemplazos"),r=Vt(t,cr("fecha","desc"));return hr(r,a=>{const s=[];a.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log("✅ Reemplazos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar reemplazos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a reemplazos:",t),t}},mNe=e=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const t=pt(Er,"acompanamientos"),r=Vt(t,cr("fecha","desc"));return hr(r,a=>{const s=[];a.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log("✅ Acompañamientos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar acompañamientos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a acompañamientos:",t),t}},pNe=e=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const t=pt(Er,"calendar_events"),r=Vt(t,cr("date","asc"));return hr(r,a=>{const s=[];a.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log("✅ Eventos del calendario cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar eventos del calendario:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",t),t}},Bf=({title:e,value:t,description:r,isLoading:n=!1})=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),n?i.jsxs("div",{className:"flex items-center mt-2",children:[i.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),i.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:t}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),wp=({title:e,data:t,colorClass:r,valueFormatter:n=s=>String(s),isLoading:a=!1})=>{const s=C.useMemo(()=>t.map(l=>typeof l.value=="number"?l.value:parseFloat(String(l.value))||0),[t]),o=C.useMemo(()=>Math.max(...s,1),[s]);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),a?i.jsxs("div",{className:"flex justify-center items-center py-8",children:[i.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),i.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):i.jsx("div",{className:"space-y-4",children:t.length>0?t.sort((l,c)=>(typeof c.value=="number"?c.value:0)-(typeof l.value=="number"?l.value:0)).map((l,c)=>{const u=typeof l.value=="number"?l.value:parseFloat(String(l.value))||0;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:l.label}),i.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(l.value)})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:i.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/o*100}%`}})})]},l.label+c)}):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},gNe=()=>{const[e,t]=C.useState([]),[r,n]=C.useState([]),[a,s]=C.useState([]),[o,l]=C.useState(!0),[c,u]=C.useState(null);return C.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let d=0;const f=3,h=()=>{d++,d>=f&&(l(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const m=hNe(v=>{t(v),h()}),g=mNe(v=>{n(v),h()}),x=pNe(v=>{s(v),h()});return()=>{m(),g(),x()}}catch(m){console.error("❌ Error al configurar suscripciones del dashboard:",m),u(m instanceof Error?m.message:"Error al cargar datos del dashboard"),l(!1)}},[]),{registros:e,acompanamientos:r,calendarEvents:a,loading:o,error:c}},xNe=({currentUser:e})=>{var f,h;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",e),console.log("🔍 Dashboard - currentUser.profile:",e==null?void 0:e.profile),console.log("🔍 Dashboard - Verificación de perfil:",(e==null?void 0:e.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(e==null?void 0:e.profile)),console.log("🔍 Dashboard - Profile length:",(f=e==null?void 0:e.profile)==null?void 0:f.length),console.log("🔍 Dashboard - Profile con comillas:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((h=e==null?void 0:e.profile)==null?void 0:h.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:t,acompanamientos:r,calendarEvents:n,loading:a,error:s}=gNe(),[o,l]=C.useState(hw);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:t.length,acompanamientos:r.length,calendarEvents:n.length,loading:a,error:s,currentUser:e==null?void 0:e.profile}),C.useEffect(()=>{try{const m=localStorage.getItem("acompanamientoDocenteCustomRubrica");l(m?JSON.parse(m):hw)}catch(m){console.error("Error al leer rúbrica personalizada",m),l(hw)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!e),console.log("🔍 Dashboard - profile value:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(e==null?void 0:e.profile)==="SUBDIRECCION"),!e)return console.log("❌ Dashboard - currentUser es null/undefined"),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(e.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",e.profile),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),i.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[i.jsx("p",{children:i.jsx("strong",{children:"Debug Info:"})}),i.jsxs("p",{children:['Su perfil actual: "',e.profile,'"']}),i.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),i.jsxs("p",{children:["Usuario: ",e.email||e.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),s)return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),i.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const c=C.useMemo(()=>{const m=t.length;if(m===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const g=t.filter(j=>j.resultado==="Hora realizada").length,x=m-g,v=`${(g/m*100).toFixed(1)}%`,y=(j,I)=>j.reduce((E,S)=>{const B=S[I];return typeof B=="string"&&(E[B]=(E[B]||0)+1),E},{}),w=y(t,"docenteAusente"),_=y(t,"docenteReemplazante"),T=y(t,"curso");return{totalInasistencias:m,horasRealizadas:g,horasCubiertas:x,tasaCobertura:v,inasistenciasPorDocente:Object.entries(w).map(([j,I])=>({label:j,value:I})),reemplazosPorDocente:Object.entries(_).map(([j,I])=>({label:j,value:I})),inasistenciasPorCurso:Object.entries(T).map(([j,I])=>({label:j,value:I})),distribucionResultados:[{label:"Hora Realizada",value:g},{label:"Hora Cubierta",value:x}]}},[t]),u=C.useMemo(()=>{const m=r.length;if(m===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const g=new Map;o.forEach(I=>{I.criteria.forEach(E=>{g.set(E.name,I.domain)})});let x=0,v=0;const y={},w={};r.forEach(I=>{y[I.docente]||(y[I.docente]={total:0,count:0}),Object.entries(I.rubricaResultados).forEach(([E,S])=>{x+=S,v++,y[I.docente].total+=S,y[I.docente].count++;const B=g.get(E);B&&(w[B]||(w[B]={total:0,count:0}),w[B].total+=S,w[B].count++)})});const _=v>0?(x/v).toFixed(2):"N/A",T=Object.entries(y).map(([I,E])=>({label:I,value:E.count>0?(E.total/E.count).toFixed(2):0})),j=Object.entries(w).map(([I,E])=>({label:I,value:E.count>0?(E.total/E.count).toFixed(2):0}));return{totalAcompanamientos:m,promedioGeneral:_,desempenoPorDocente:T,desempenoPorDominio:j}},[r,o]),d=C.useMemo(()=>{const m={[fn.EVALUACION]:0,[fn.ACTO]:0,[fn.ACTIVIDAD_FOCALIZADA]:0,[fn.SALIDA_PEDAGOGICA]:0};for(const x of n)m.hasOwnProperty(x.type)&&m[x.type]++;const g=Object.entries(m).map(([x,v])=>({label:Fv[x].label,value:v}));return{totalEvaluaciones:m[fn.EVALUACION],totalActos:m[fn.ACTO],totalActividadesFocalizadas:m[fn.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:m[fn.SALIDA_PEDAGOGICA],distribucionEventos:g}},[n]);return a?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):c.totalInasistencias===0&&u.totalAcompanamientos===0&&n.length===0?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[i.jsx("span",{className:"text-6xl mb-4",children:"📊"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),i.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[i.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),i.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),i.jsx("p",{children:"• Calendario Académico"})]})]}):i.jsxs("div",{className:"space-y-12 animate-fade-in",children:[i.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),i.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),i.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),t.length>0&&i.jsxs("div",{className:"space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(Bf,{title:"Total Inasistencias",value:c.totalInasistencias,description:"Registros totales",isLoading:a}),i.jsx(Bf,{title:"Horas Realizadas",value:c.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),i.jsx(Bf,{title:"Horas Cubiertas",value:c.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),i.jsx(Bf,{title:"Tasa de Cobertura Efectiva",value:c.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx(wp,{title:"Inasistencias por Docente",data:c.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),i.jsx(wp,{title:"Reemplazos por Docente",data:c.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),i.jsx(wp,{title:"Inasistencias por Curso",data:c.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),i.jsx(wp,{title:"Distribución de Resultados",data:c.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),r.length>0&&i.jsxs("div",{className:"space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(Bf,{title:"Total Acompañamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:a}),i.jsx(Bf,{title:"Promedio General",value:u.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:a})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx(wp,{title:"Desempeño Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:a}),i.jsx(wp,{title:"Desempeño Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:a})]})]}),n.length>0&&i.jsxs("div",{className:"space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(Bf,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),i.jsx(Bf,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:a}),i.jsx(Bf,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),i.jsx(Bf,{title:"Salidas Pedagógicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx(wp,{title:"Distribución de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),a?i.jsxs("div",{className:"flex justify-center items-center py-8",children:[i.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),i.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):i.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(m=>new Date(m.date)>=new Date).slice(0,5).map((m,g)=>{var x,v;return i.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:m.responsables||"Evento sin título"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(m.date).toLocaleDateString("es-CL")}),m.ubicacion&&i.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",m.ubicacion]})]}),i.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((x=Fv[m.type])==null?void 0:x.color)||"bg-gray-100 text-gray-800"}`,children:((v=Fv[m.type])==null?void 0:v.label)||m.type})]})},m.id||g)}),n.filter(m=>new Date(m.date)>=new Date).length===0&&i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),i.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:t.length+r.length+n.length}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...t.map(m=>m.docenteAusente),...r.map(m=>m.docente)]).size}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(t.filter(m=>m.resultado==="Hora realizada").length/Math.max(t.length,1)*100),"%"]}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),i.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[i.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),i.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var I_={};I_.version="0.18.5";var pte=1252,vNe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],dR={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},fR=function(e){vNe.indexOf(e)!=-1&&(pte=dR[0]=e)};function bNe(){fR(1252)}var Fd=function(e){fR(e)};function AR(){Fd(1200),bNe()}function CH(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function yNe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function gte(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var $y=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?yNe(e.slice(2)):t==254&&r==255?gte(e.slice(2)):t==65279?e.slice(1):e},KN=function(t){return String.fromCharCode(t)},_H=function(t){return String.fromCharCode(t)},Jw,J0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Zw(e){for(var t="",r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),s=r>>2,n=e.charCodeAt(u++),o=(r&3)<<4|n>>4,a=e.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),t+=J0.charAt(s)+J0.charAt(o)+J0.charAt(l)+J0.charAt(c);return t}function Wc(e){var t="",r=0,n=0,a=0,s=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)s=J0.indexOf(e.charAt(u++)),o=J0.indexOf(e.charAt(u++)),r=s<<2|o>>4,t+=String.fromCharCode(r),l=J0.indexOf(e.charAt(u++)),n=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),c=J0.indexOf(e.charAt(u++)),a=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var vn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Mh=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Sm(e){return vn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function SH(e){return vn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Uc=function(t){return vn?Mh(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function Wk(e){if(typeof ArrayBuffer>"u")return Uc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function zm(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function wNe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function hR(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return hR(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Zi=vn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Mh(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function ENe(e){for(var t=[],r=0,n=e.length+250,a=Sm(e.length+255),s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o<128)a[r++]=o;else if(o<2048)a[r++]=192|o>>6&31,a[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++s)&1023;a[r++]=240|o>>8&7,a[r++]=128|o>>2&63,a[r++]=128|l>>6&15|(o&3)<<4,a[r++]=128|l&63}else a[r++]=224|o>>12&15,a[r++]=128|o>>6&63,a[r++]=128|o&63;r>n&&(t.push(a.slice(0,r)),r=0,a=Sm(65535),n=65530)}return t.push(a.slice(0,r)),Zi(t)}var Sl=/\u0000/g,Gy=/[\u0001-\u0006]/g;function Dv(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Od(e,t){var r=""+e;return r.length>=t?r:ks("0",t-r.length)+r}function mR(e,t){var r=""+e;return r.length>=t?r:ks(" ",t-r.length)+r}function F_(e,t){var r=""+e;return r.length>=t?r:r+ks(" ",t-r.length)}function NNe(e,t){var r=""+Math.round(e);return r.length>=t?r:ks("0",t-r.length)+r}function CNe(e,t){var r=""+e;return r.length>=t?r:ks("0",t-r.length)+r}var kH=Math.pow(2,32);function Ix(e,t){if(e>kH||e<-kH)return NNe(e,t);var r=Math.round(e);return CNe(r,t)}function O_(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var jH=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],AB=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function _Ne(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var Mr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},BH={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},SNe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function D_(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,o=1,l=0,c=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),l=f*o+s,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),s=o,o=l,c=u,u=d;if(d>t&&(u>t?(d=c,l=s):(d=u,l=o)),!r)return[0,n*l,d];var h=Math.floor(n*l/d);return[h,n*l-h*d,d]}function Up(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),s=0,o=[],l={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=FNe(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=s,l}var xte=new Date(1899,11,31,0,0,0),kNe=xte.getTime(),jNe=new Date(1900,2,1,0,0,0);function vte(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=jNe&&(r+=1440*60*1e3),(r-(kNe+(e.getTimezoneOffset()-xte.getTimezoneOffset())*6e4))/(1440*60*1e3)}function pR(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function BNe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function TNe(e){var t=e<0?12:11,r=pR(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function INe(e){var t=pR(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function e2(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=TNe(e):t===10?r=e.toFixed(10).substr(0,12):r=INe(e),pR(BNe(r.toUpperCase()))}function bg(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):e2(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Ku(14,vte(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function FNe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function ONe(e,t,r,n){var a="",s=0,o=0,l=r.y,c,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return AB[r.m-1][1];case 5:return AB[r.m-1][0];default:return AB[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return jH[r.q][0];default:return jH[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Od(r.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,s=Math.round(o*(r.S+r.u)),s>=60*o&&(s=0),t==="s"?s===0?"0":""+s/o:(a=Od(s,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?Od(c,u):"";return d}function Z0(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var bte=/%/g;function DNe(e,t,r){var n=t.replace(bte,""),a=t.length-n.length;return dh(e,n,r*Math.pow(10,2*a))+ks("%",a)}function PNe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return dh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function yte(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+yte(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var wte=/# (\?+)( ?)\/( ?)(\d+)/;function RNe(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),o=a-s*n,l=n;return r+(s===0?"":""+s)+" "+(o===0?ks(" ",e[1].length+1+e[4].length):mR(o,e[1].length)+e[2]+"/"+e[3]+Od(l,e[4].length))}function LNe(e,t,r){return r+(t===0?"":""+t)+ks(" ",e[1].length+2+e[4].length)}var Ete=/^#*0*\.([0#]+)/,Nte=/\).*[0#]/,Cte=/\(###\) ###\\?-####/;function vl(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function TH(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function IH(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function MNe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function UNe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Bu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Nte)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Bu("n",n,r):"("+Bu("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return PNe(e,t,r);if(t.indexOf("%")!==-1)return DNe(e,t,r);if(t.indexOf("E")!==-1)return yte(t,r);if(t.charCodeAt(0)===36)return"$"+Bu(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Ix(c,t.length);if(t.match(/^[#?]+$/))return a=Ix(r,0),a==="0"&&(a=""),a.length>t.length?a:vl(t.substr(0,t.length-a.length))+a;if(s=t.match(wte))return RNe(s,c,u);if(t.match(/^#+0+$/))return u+Ix(c,t.length-t.indexOf("0"));if(s=t.match(Ete))return a=TH(r,s[1].length).replace(/^([^\.]+)$/,"$1."+vl(s[1])).replace(/\.$/,"."+vl(s[1])).replace(/\.(\d*)$/,function(g,x){return"."+x+ks("0",vl(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+TH(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+Z0(Ix(c,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Bu(e,t,-r):Z0(""+(Math.floor(r)+MNe(r,s[1].length)))+"."+Od(IH(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return Bu(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Dv(Bu(e,t.replace(/[\\-]/g,""),r)),o=0,Dv(Dv(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<a.length?a.charAt(o++):g==="0"?"0":""}));if(t.match(Cte))return a=Bu(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=D_(c,Math.pow(10,o)-1,!1),a=""+u,d=dh("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=F_(l[2],o),d.length<s[4].length&&(d=vl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=D_(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?mR(l[1],o)+s[2]+"/"+s[3]+F_(l[2],o):ks(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=Ix(r,0),t.length<=a.length?a:vl(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=t.indexOf(".")-o,h=t.length-a.length-f;return vl(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return o=IH(r,s[1].length),r<0?"-"+Bu(e,t,-r):Z0(UNe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Od(0,3-g.length):"")+g})+"."+Od(o,s[1].length);switch(t){case"###,##0.00":return Bu(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=Z0(Ix(c,0));return m!=="0"?u+m:"";case"###,###.00":return Bu(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Bu(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function QNe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return dh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function HNe(e,t,r){var n=t.replace(bte,""),a=t.length-n.length;return dh(e,n,r*Math.pow(10,2*a))+ks("%",a)}function _te(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+_te(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Of(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Nte)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Of("n",n,r):"("+Of("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return QNe(e,t,r);if(t.indexOf("%")!==-1)return HNe(e,t,r);if(t.indexOf("E")!==-1)return _te(t,r);if(t.charCodeAt(0)===36)return"$"+Of(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Od(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:vl(t.substr(0,t.length-a.length))+a;if(s=t.match(wte))return LNe(s,c,u);if(t.match(/^#+0+$/))return u+Od(c,t.length-t.indexOf("0"));if(s=t.match(Ete))return a=(""+r).replace(/^([^\.]+)$/,"$1."+vl(s[1])).replace(/\.$/,"."+vl(s[1])),a=a.replace(/\.(\d*)$/,function(g,x){return"."+x+ks("0",vl(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+Z0(""+c);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Of(e,t,-r):Z0(""+r)+"."+ks("0",s[1].length);if(s=t.match(/^#,#*,#0/))return Of(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Dv(Of(e,t.replace(/[\\-]/g,""),r)),o=0,Dv(Dv(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<a.length?a.charAt(o++):g==="0"?"0":""}));if(t.match(Cte))return a=Of(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=D_(c,Math.pow(10,o)-1,!1),a=""+u,d=dh("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=F_(l[2],o),d.length<s[4].length&&(d=vl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=D_(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?mR(l[1],o)+s[2]+"/"+s[3]+F_(l[2],o):ks(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:vl(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=t.indexOf(".")-o,h=t.length-a.length-f;return vl(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Of(e,t,-r):Z0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Od(0,3-g.length):"")+g})+"."+Od(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=Z0(""+c);return m!=="0"?u+m:"";default:if(t.match(/\.[0#?]*$/))return Of(e,t.slice(0,t.lastIndexOf(".")),r)+vl(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function dh(e,t,r){return(r|0)===r?Of(e,t,r):Bu(e,t,r)}function VNe(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var Ste=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Jb(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":O_(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(Ste))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function zNe(e,t,r,n){for(var a=[],s="",o=0,l="",c="t",u,d,f,h="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!O_(e,o))throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(f=e.charCodeAt(++o))!==34&&o<e.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++o;break;case"\\":var m=e.charAt(++o),g=m==="("||m===")"?m:"t";a[a.length]={t:g,v:m},++o;break;case"_":a[a.length]={t:"t",v:" "},o+=2;break;case"@":a[a.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(u==null&&(u=Up(t,r,e.charAt(o+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=Up(t,r),u==null))return"";for(s=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=h),a[a.length]={t:l,v:s},c=l;break;case"A":case"a":case"上":var x={t:l,v:l};if(u==null&&(u=Up(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(x.v=u.H>=12?"P":"A"),x.t="T",h="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(x.v=u.H>=12?"PM":"AM"),x.t="T",o+=5,h="h"):e.substr(o,5).toUpperCase()==="上午/下午"?(u!=null&&(x.v=u.H>=12?"下午":"上午"),x.t="T",o+=5,h="h"):(x.t="t",++o),u==null&&x.t==="T")return"";a[a.length]=x,c=l;break;case"[":for(s=l;e.charAt(o++)!=="]"&&o<e.length;)s+=e.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(Ste)){if(u==null&&(u=Up(t,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",Jb(e)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=l;++o<e.length&&(l=e.charAt(o))==="0";)s+=l;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)s+=l;a[a.length]={t:"n",v:s};break;case"?":for(s=l;e.charAt(++o)===l;)s+=l;a[a.length]={t:l,v:s},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)s+=e.charAt(o);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:l,v:l},++o;break;case"$":a[a.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"t",v:l},++o;break}var v=0,y=0,w;for(o=a.length-1,c="t";o>=0;--o)switch(a[o].t){case"h":case"H":a[o].t=h,c="h",v<1&&(v=1);break;case"s":(w=a[o].v.match(/\.0+$/))&&(y=Math.max(y,w[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":c=a[o].t;break;case"m":c==="s"&&(a[o].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&a[o].v.match(/[Hh]/)&&(v=1),v<2&&a[o].v.match(/[Mm]/)&&(v=2),v<3&&a[o].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var _="",T;for(o=0;o<a.length;++o)switch(a[o].t){case"t":case"T":case" ":case"D":break;case"X":a[o].v="",a[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[o].v=ONe(a[o].t.charCodeAt(0),a[o].v,u,y),a[o].t="t";break;case"n":case"?":for(T=o+1;a[T]!=null&&((l=a[T].t)==="?"||l==="D"||(l===" "||l==="t")&&a[T+1]!=null&&(a[T+1].t==="?"||a[T+1].t==="t"&&a[T+1].v==="/")||a[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[T].v==="/"||a[T].v===" "&&a[T+1]!=null&&a[T+1].t=="?"));)a[o].v+=a[T].v,a[T]={v:"",t:";"},++T;_+=a[o].v,o=T-1;break;case"G":a[o].t="t",a[o].v=bg(t,r);break}var j="",I,E;if(_.length>0){_.charCodeAt(0)==40?(I=t<0&&_.charCodeAt(0)===45?-t:t,E=dh("n",_,I)):(I=t<0&&n>1?-t:t,E=dh("n",_,I),I<0&&a[0]&&a[0].t=="t"&&(E=E.substr(1),a[0].v="-"+a[0].v)),T=E.length-1;var S=a.length;for(o=0;o<a.length;++o)if(a[o]!=null&&a[o].t!="t"&&a[o].v.indexOf(".")>-1){S=o;break}var B=a.length;if(S===a.length&&E.indexOf("E")===-1){for(o=a.length-1;o>=0;--o)a[o]==null||"n?".indexOf(a[o].t)===-1||(T>=a[o].v.length-1?(T-=a[o].v.length,a[o].v=E.substr(T+1,a[o].v.length)):T<0?a[o].v="":(a[o].v=E.substr(0,T+1),T=-1),a[o].t="t",B=o);T>=0&&B<a.length&&(a[B].v=E.substr(0,T+1)+a[B].v)}else if(S!==a.length&&E.indexOf("E")===-1){for(T=E.indexOf(".")-1,o=S;o>=0;--o)if(!(a[o]==null||"n?".indexOf(a[o].t)===-1)){for(d=a[o].v.indexOf(".")>-1&&o===S?a[o].v.indexOf(".")-1:a[o].v.length-1,j=a[o].v.substr(d+1);d>=0;--d)T>=0&&(a[o].v.charAt(d)==="0"||a[o].v.charAt(d)==="#")&&(j=E.charAt(T--)+j);a[o].v=j,a[o].t="t",B=o}for(T>=0&&B<a.length&&(a[B].v=E.substr(0,T+1)+a[B].v),T=E.indexOf(".")+1,o=S;o<a.length;++o)if(!(a[o]==null||"n?(".indexOf(a[o].t)===-1&&o!==S)){for(d=a[o].v.indexOf(".")>-1&&o===S?a[o].v.indexOf(".")+1:0,j=a[o].v.substr(0,d);d<a[o].v.length;++d)T<E.length&&(j+=E.charAt(T++));a[o].v=j,a[o].t="t",B=o}}}for(o=0;o<a.length;++o)a[o]!=null&&"n?".indexOf(a[o].t)>-1&&(I=n>1&&t<0&&o>0&&a[o-1].v==="-"?-t:t,a[o].v=dh(a[o].t,a[o].v,I),a[o].t="t");var M="";for(o=0;o!==a.length;++o)a[o]!=null&&(M+=a[o].v);return M}var FH=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function OH(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function $Ne(e,t){var r=VNe(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(FH),l=r[1].match(FH);return OH(t,o)?[n,r[0]]:OH(t,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,s]}function Ku(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Mr)[e],n==null&&(n=r.table&&r.table[BH[e]]||Mr[BH[e]]),n==null&&(n=SNe[e]||"General");break}if(O_(n,0))return bg(t,r);t instanceof Date&&(t=vte(t,r.date1904));var a=$Ne(n,t);if(O_(a[1]))return bg(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return zNe(a[1],t,r,a[0])}function fh(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Mr[r]==null){t<0&&(t=r);continue}if(Mr[r]==e){t=r;break}}t<0&&(t=391)}return Mr[t]=e,t}function Xk(e){for(var t=0;t!=392;++t)e[t]!==void 0&&fh(e[t],t)}function Zb(){Mr=_Ne()}var GNe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},kte=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function qNe(e){var t=typeof e=="number"?Mr[e]:e;return t=t.replace(kte,"(\\d+)"),new RegExp("^"+t+"$")}function KNe(e,t,r){var n=-1,a=-1,s=-1,o=-1,l=-1,c=-1;(t.match(kte)||[]).forEach(function(f,h){var m=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=m;break;case"d":s=m;break;case"h":o=m;break;case"s":c=m;break;case"m":o>=0?l=m:a=m;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var WNe=function(){var e={};e.version="1.2.0";function t(){for(var E=0,S=new Array(256),B=0;B!=256;++B)E=B,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,S[B]=E;return typeof Int32Array<"u"?new Int32Array(S):S}var r=t();function n(E){var S=0,B=0,M=0,R=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(M=0;M!=256;++M)R[M]=E[M];for(M=0;M!=256;++M)for(B=E[M],S=256+M;S<4096;S+=256)B=R[S]=B>>>8^E[B&255];var k=[];for(M=1;M!=16;++M)k[M-1]=typeof Int32Array<"u"?R.subarray(M*256,M*256+256):R.slice(M*256,M*256+256);return k}var a=n(r),s=a[0],o=a[1],l=a[2],c=a[3],u=a[4],d=a[5],f=a[6],h=a[7],m=a[8],g=a[9],x=a[10],v=a[11],y=a[12],w=a[13],_=a[14];function T(E,S){for(var B=S^-1,M=0,R=E.length;M<R;)B=B>>>8^r[(B^E.charCodeAt(M++))&255];return~B}function j(E,S){for(var B=S^-1,M=E.length-15,R=0;R<M;)B=_[E[R++]^B&255]^w[E[R++]^B>>8&255]^y[E[R++]^B>>16&255]^v[E[R++]^B>>>24]^x[E[R++]]^g[E[R++]]^m[E[R++]]^h[E[R++]]^f[E[R++]]^d[E[R++]]^u[E[R++]]^c[E[R++]]^l[E[R++]]^o[E[R++]]^s[E[R++]]^r[E[R++]];for(M+=15;R<M;)B=B>>>8^r[(B^E[R++])&255];return~B}function I(E,S){for(var B=S^-1,M=0,R=E.length,k=0,D=0;M<R;)k=E.charCodeAt(M++),k<128?B=B>>>8^r[(B^k)&255]:k<2048?(B=B>>>8^r[(B^(192|k>>6&31))&255],B=B>>>8^r[(B^(128|k&63))&255]):k>=55296&&k<57344?(k=(k&1023)+64,D=E.charCodeAt(M++)&1023,B=B>>>8^r[(B^(240|k>>8&7))&255],B=B>>>8^r[(B^(128|k>>2&63))&255],B=B>>>8^r[(B^(128|D>>6&15|(k&3)<<4))&255],B=B>>>8^r[(B^(128|D&63))&255]):(B=B>>>8^r[(B^(224|k>>12&15))&255],B=B>>>8^r[(B^(128|k>>6&63))&255],B=B>>>8^r[(B^(128|k&63))&255]);return~B}return e.table=r,e.bstr=T,e.buf=j,e.str=I,e}(),Sr=function(){var t={};t.version="1.2.1";function r(me,Ie){for(var _e=me.split("/"),Ne=Ie.split("/"),je=0,Fe=0,Ye=Math.min(_e.length,Ne.length);je<Ye;++je){if(Fe=_e[je].length-Ne[je].length)return Fe;if(_e[je]!=Ne[je])return _e[je]<Ne[je]?-1:1}return _e.length-Ne.length}function n(me){if(me.charAt(me.length-1)=="/")return me.slice(0,-1).indexOf("/")===-1?me:n(me.slice(0,-1));var Ie=me.lastIndexOf("/");return Ie===-1?me:me.slice(0,Ie+1)}function a(me){if(me.charAt(me.length-1)=="/")return a(me.slice(0,-1));var Ie=me.lastIndexOf("/");return Ie===-1?me:me.slice(Ie+1)}function s(me,Ie){typeof Ie=="string"&&(Ie=new Date(Ie));var _e=Ie.getHours();_e=_e<<6|Ie.getMinutes(),_e=_e<<5|Ie.getSeconds()>>>1,me.write_shift(2,_e);var Ne=Ie.getFullYear()-1980;Ne=Ne<<4|Ie.getMonth()+1,Ne=Ne<<5|Ie.getDate(),me.write_shift(2,Ne)}function o(me){var Ie=me.read_shift(2)&65535,_e=me.read_shift(2)&65535,Ne=new Date,je=_e&31;_e>>>=5;var Fe=_e&15;_e>>>=4,Ne.setMilliseconds(0),Ne.setFullYear(_e+1980),Ne.setMonth(Fe-1),Ne.setDate(je);var Ye=Ie&31;Ie>>>=5;var ft=Ie&63;return Ie>>>=6,Ne.setHours(Ie),Ne.setMinutes(ft),Ne.setSeconds(Ye<<1),Ne}function l(me){yo(me,0);for(var Ie={},_e=0;me.l<=me.length-4;){var Ne=me.read_shift(2),je=me.read_shift(2),Fe=me.l+je,Ye={};switch(Ne){case 21589:_e=me.read_shift(1),_e&1&&(Ye.mtime=me.read_shift(4)),je>5&&(_e&2&&(Ye.atime=me.read_shift(4)),_e&4&&(Ye.ctime=me.read_shift(4))),Ye.mtime&&(Ye.mt=new Date(Ye.mtime*1e3));break}me.l=Fe,Ie[Ne]=Ye}return Ie}var c;function u(){return c||(c={})}function d(me,Ie){if(me[0]==80&&me[1]==75)return pn(me,Ie);if((me[0]|32)==109&&(me[1]|32)==105)return Et(me,Ie);if(me.length<512)throw new Error("CFB file size "+me.length+" < 512");var _e=3,Ne=512,je=0,Fe=0,Ye=0,ft=0,qe=0,rt=[],it=me.slice(0,512);yo(it,0);var Ft=f(it);switch(_e=Ft[0],_e){case 3:Ne=512;break;case 4:Ne=4096;break;case 0:if(Ft[1]==0)return pn(me,Ie);default:throw new Error("Major Version: Expected 3 or 4 saw "+_e)}Ne!==512&&(it=me.slice(0,Ne),yo(it,28));var $t=me.slice(0,Ne);h(it,_e);var Jt=it.read_shift(4,"i");if(_e===3&&Jt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Jt);it.l+=4,Ye=it.read_shift(4,"i"),it.l+=4,it.chk("00100000","Mini Stream Cutoff Size: "),ft=it.read_shift(4,"i"),je=it.read_shift(4,"i"),qe=it.read_shift(4,"i"),Fe=it.read_shift(4,"i");for(var zt=-1,qt=0;qt<109&&(zt=it.read_shift(4,"i"),!(zt<0));++qt)rt[qt]=zt;var jr=m(me,Ne);v(qe,Fe,jr,Ne,rt);var on=w(jr,Ye,rt,Ne);on[Ye].name="!Directory",je>0&&ft!==D&&(on[ft].name="!MiniFAT"),on[rt[0]].name="!FAT",on.fat_addrs=rt,on.ssz=Ne;var ln={},An=[],ps=[],So=[];_(Ye,on,jr,An,je,ln,ps,ft),g(ps,So,An),An.shift();var gs={FileIndex:ps,FullPaths:So};return Ie&&Ie.raw&&(gs.raw={header:$t,sectors:jr}),gs}function f(me){if(me[me.l]==80&&me[me.l+1]==75)return[0,0];me.chk(L,"Header Signature: "),me.l+=16;var Ie=me.read_shift(2,"u");return[me.read_shift(2,"u"),Ie]}function h(me,Ie){var _e=9;switch(me.l+=2,_e=me.read_shift(2)){case 9:if(Ie!=3)throw new Error("Sector Shift: Expected 9 saw "+_e);break;case 12:if(Ie!=4)throw new Error("Sector Shift: Expected 12 saw "+_e);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+_e)}me.chk("0600","Mini Sector Shift: "),me.chk("000000000000","Reserved: ")}function m(me,Ie){for(var _e=Math.ceil(me.length/Ie)-1,Ne=[],je=1;je<_e;++je)Ne[je-1]=me.slice(je*Ie,(je+1)*Ie);return Ne[_e-1]=me.slice(_e*Ie),Ne}function g(me,Ie,_e){for(var Ne=0,je=0,Fe=0,Ye=0,ft=0,qe=_e.length,rt=[],it=[];Ne<qe;++Ne)rt[Ne]=it[Ne]=Ne,Ie[Ne]=_e[Ne];for(;ft<it.length;++ft)Ne=it[ft],je=me[Ne].L,Fe=me[Ne].R,Ye=me[Ne].C,rt[Ne]===Ne&&(je!==-1&&rt[je]!==je&&(rt[Ne]=rt[je]),Fe!==-1&&rt[Fe]!==Fe&&(rt[Ne]=rt[Fe])),Ye!==-1&&(rt[Ye]=Ne),je!==-1&&Ne!=rt[Ne]&&(rt[je]=rt[Ne],it.lastIndexOf(je)<ft&&it.push(je)),Fe!==-1&&Ne!=rt[Ne]&&(rt[Fe]=rt[Ne],it.lastIndexOf(Fe)<ft&&it.push(Fe));for(Ne=1;Ne<qe;++Ne)rt[Ne]===Ne&&(Fe!==-1&&rt[Fe]!==Fe?rt[Ne]=rt[Fe]:je!==-1&&rt[je]!==je&&(rt[Ne]=rt[je]));for(Ne=1;Ne<qe;++Ne)if(me[Ne].type!==0){if(ft=Ne,ft!=rt[ft])do ft=rt[ft],Ie[Ne]=Ie[ft]+"/"+Ie[Ne];while(ft!==0&&rt[ft]!==-1&&ft!=rt[ft]);rt[Ne]=-1}for(Ie[0]+="/",Ne=1;Ne<qe;++Ne)me[Ne].type!==2&&(Ie[Ne]+="/")}function x(me,Ie,_e){for(var Ne=me.start,je=me.size,Fe=[],Ye=Ne;_e&&je>0&&Ye>=0;)Fe.push(Ie.slice(Ye*k,Ye*k+k)),je-=k,Ye=Dp(_e,Ye*4);return Fe.length===0?Nt(0):Zi(Fe).slice(0,me.size)}function v(me,Ie,_e,Ne,je){var Fe=D;if(me===D){if(Ie!==0)throw new Error("DIFAT chain shorter than expected")}else if(me!==-1){var Ye=_e[me],ft=(Ne>>>2)-1;if(!Ye)return;for(var qe=0;qe<ft&&(Fe=Dp(Ye,qe*4))!==D;++qe)je.push(Fe);v(Dp(Ye,Ne-4),Ie-1,_e,Ne,je)}}function y(me,Ie,_e,Ne,je){var Fe=[],Ye=[];je||(je=[]);var ft=Ne-1,qe=0,rt=0;for(qe=Ie;qe>=0;){je[qe]=!0,Fe[Fe.length]=qe,Ye.push(me[qe]);var it=_e[Math.floor(qe*4/Ne)];if(rt=qe*4&ft,Ne<4+rt)throw new Error("FAT boundary crossed: "+qe+" 4 "+Ne);if(!me[it])break;qe=Dp(me[it],rt)}return{nodes:Fe,data:GH([Ye])}}function w(me,Ie,_e,Ne){var je=me.length,Fe=[],Ye=[],ft=[],qe=[],rt=Ne-1,it=0,Ft=0,$t=0,Jt=0;for(it=0;it<je;++it)if(ft=[],$t=it+Ie,$t>=je&&($t-=je),!Ye[$t]){qe=[];var zt=[];for(Ft=$t;Ft>=0;){zt[Ft]=!0,Ye[Ft]=!0,ft[ft.length]=Ft,qe.push(me[Ft]);var qt=_e[Math.floor(Ft*4/Ne)];if(Jt=Ft*4&rt,Ne<4+Jt)throw new Error("FAT boundary crossed: "+Ft+" 4 "+Ne);if(!me[qt]||(Ft=Dp(me[qt],Jt),zt[Ft]))break}Fe[$t]={nodes:ft,data:GH([qe])}}return Fe}function _(me,Ie,_e,Ne,je,Fe,Ye,ft){for(var qe=0,rt=Ne.length?2:0,it=Ie[me].data,Ft=0,$t=0,Jt;Ft<it.length;Ft+=128){var zt=it.slice(Ft,Ft+128);yo(zt,64),$t=zt.read_shift(2),Jt=ER(zt,0,$t-rt),Ne.push(Jt);var qt={name:Jt,type:zt.read_shift(1),color:zt.read_shift(1),L:zt.read_shift(4,"i"),R:zt.read_shift(4,"i"),C:zt.read_shift(4,"i"),clsid:zt.read_shift(16),state:zt.read_shift(4,"i"),start:0,size:0},jr=zt.read_shift(2)+zt.read_shift(2)+zt.read_shift(2)+zt.read_shift(2);jr!==0&&(qt.ct=T(zt,zt.l-8));var on=zt.read_shift(2)+zt.read_shift(2)+zt.read_shift(2)+zt.read_shift(2);on!==0&&(qt.mt=T(zt,zt.l-8)),qt.start=zt.read_shift(4,"i"),qt.size=zt.read_shift(4,"i"),qt.size<0&&qt.start<0&&(qt.size=qt.type=0,qt.start=D,qt.name=""),qt.type===5?(qe=qt.start,je>0&&qe!==D&&(Ie[qe].name="!StreamData")):qt.size>=4096?(qt.storage="fat",Ie[qt.start]===void 0&&(Ie[qt.start]=y(_e,qt.start,Ie.fat_addrs,Ie.ssz)),Ie[qt.start].name=qt.name,qt.content=Ie[qt.start].data.slice(0,qt.size)):(qt.storage="minifat",qt.size<0?qt.size=0:qe!==D&&qt.start!==D&&Ie[qe]&&(qt.content=x(qt,Ie[qe].data,(Ie[ft]||{}).data))),qt.content&&yo(qt.content,0),Fe[Jt]=qt,Ye.push(qt)}}function T(me,Ie){return new Date((Rc(me,Ie+4)/1e7*Math.pow(2,32)+Rc(me,Ie)/1e7-11644473600)*1e3)}function j(me,Ie){return u(),d(c.readFileSync(me),Ie)}function I(me,Ie){var _e=Ie&&Ie.type;switch(_e||vn&&Buffer.isBuffer(me)&&(_e="buffer"),_e||"base64"){case"file":return j(me,Ie);case"base64":return d(Uc(Wc(me)),Ie);case"binary":return d(Uc(me),Ie)}return d(me,Ie)}function E(me,Ie){var _e=Ie||{},Ne=_e.root||"Root Entry";if(me.FullPaths||(me.FullPaths=[]),me.FileIndex||(me.FileIndex=[]),me.FullPaths.length!==me.FileIndex.length)throw new Error("inconsistent CFB structure");me.FullPaths.length===0&&(me.FullPaths[0]=Ne+"/",me.FileIndex[0]={name:Ne,type:5}),_e.CLSID&&(me.FileIndex[0].clsid=_e.CLSID),S(me)}function S(me){var Ie="Sh33tJ5";if(!Sr.find(me,"/"+Ie)){var _e=Nt(4);_e[0]=55,_e[1]=_e[3]=50,_e[2]=54,me.FileIndex.push({name:Ie,type:2,content:_e,size:4,L:69,R:69,C:69}),me.FullPaths.push(me.FullPaths[0]+Ie),B(me)}}function B(me,Ie){E(me);for(var _e=!1,Ne=!1,je=me.FullPaths.length-1;je>=0;--je){var Fe=me.FileIndex[je];switch(Fe.type){case 0:Ne?_e=!0:(me.FileIndex.pop(),me.FullPaths.pop());break;case 1:case 2:case 5:Ne=!0,isNaN(Fe.R*Fe.L*Fe.C)&&(_e=!0),Fe.R>-1&&Fe.L>-1&&Fe.R==Fe.L&&(_e=!0);break;default:_e=!0;break}}if(!(!_e&&!Ie)){var Ye=new Date(1987,1,19),ft=0,qe=Object.create?Object.create(null):{},rt=[];for(je=0;je<me.FullPaths.length;++je)qe[me.FullPaths[je]]=!0,me.FileIndex[je].type!==0&&rt.push([me.FullPaths[je],me.FileIndex[je]]);for(je=0;je<rt.length;++je){var it=n(rt[je][0]);Ne=qe[it],Ne||(rt.push([it,{name:a(it).replace("/",""),type:1,clsid:V,ct:Ye,mt:Ye,content:null}]),qe[it]=!0)}for(rt.sort(function(Jt,zt){return r(Jt[0],zt[0])}),me.FullPaths=[],me.FileIndex=[],je=0;je<rt.length;++je)me.FullPaths[je]=rt[je][0],me.FileIndex[je]=rt[je][1];for(je=0;je<rt.length;++je){var Ft=me.FileIndex[je],$t=me.FullPaths[je];if(Ft.name=a($t).replace("/",""),Ft.L=Ft.R=Ft.C=-(Ft.color=1),Ft.size=Ft.content?Ft.content.length:0,Ft.start=0,Ft.clsid=Ft.clsid||V,je===0)Ft.C=rt.length>1?1:-1,Ft.size=0,Ft.type=5;else if($t.slice(-1)=="/"){for(ft=je+1;ft<rt.length&&n(me.FullPaths[ft])!=$t;++ft);for(Ft.C=ft>=rt.length?-1:ft,ft=je+1;ft<rt.length&&n(me.FullPaths[ft])!=n($t);++ft);Ft.R=ft>=rt.length?-1:ft,Ft.type=1}else n(me.FullPaths[je+1]||"")==n($t)&&(Ft.R=je+1),Ft.type=2}}}function M(me,Ie){var _e=Ie||{};if(_e.fileType=="mad")return bt(me,_e);switch(B(me),_e.fileType){case"zip":return Ba(me,_e)}var Ne=function(Jt){for(var zt=0,qt=0,jr=0;jr<Jt.FileIndex.length;++jr){var on=Jt.FileIndex[jr];if(on.content){var ln=on.content.length;ln>0&&(ln<4096?zt+=ln+63>>6:qt+=ln+511>>9)}}for(var An=Jt.FullPaths.length+3>>2,ps=zt+7>>3,So=zt+127>>7,gs=ps+qt+An+So,ai=gs+127>>7,Ls=ai<=109?0:Math.ceil((ai-109)/127);gs+ai+Ls+127>>7>ai;)Ls=++ai<=109?0:Math.ceil((ai-109)/127);var wi=[1,Ls,ai,So,An,qt,zt,0];return Jt.FileIndex[0].size=zt<<6,wi[7]=(Jt.FileIndex[0].start=wi[0]+wi[1]+wi[2]+wi[3]+wi[4]+wi[5])+(wi[6]+7>>3),wi}(me),je=Nt(Ne[7]<<9),Fe=0,Ye=0;{for(Fe=0;Fe<8;++Fe)je.write_shift(1,Z[Fe]);for(Fe=0;Fe<8;++Fe)je.write_shift(2,0);for(je.write_shift(2,62),je.write_shift(2,3),je.write_shift(2,65534),je.write_shift(2,9),je.write_shift(2,6),Fe=0;Fe<3;++Fe)je.write_shift(2,0);for(je.write_shift(4,0),je.write_shift(4,Ne[2]),je.write_shift(4,Ne[0]+Ne[1]+Ne[2]+Ne[3]-1),je.write_shift(4,0),je.write_shift(4,4096),je.write_shift(4,Ne[3]?Ne[0]+Ne[1]+Ne[2]-1:D),je.write_shift(4,Ne[3]),je.write_shift(-4,Ne[1]?Ne[0]-1:D),je.write_shift(4,Ne[1]),Fe=0;Fe<109;++Fe)je.write_shift(-4,Fe<Ne[2]?Ne[1]+Fe:-1)}if(Ne[1])for(Ye=0;Ye<Ne[1];++Ye){for(;Fe<236+Ye*127;++Fe)je.write_shift(-4,Fe<Ne[2]?Ne[1]+Fe:-1);je.write_shift(-4,Ye===Ne[1]-1?D:Ye+1)}var ft=function(Jt){for(Ye+=Jt;Fe<Ye-1;++Fe)je.write_shift(-4,Fe+1);Jt&&(++Fe,je.write_shift(-4,D))};for(Ye=Fe=0,Ye+=Ne[1];Fe<Ye;++Fe)je.write_shift(-4,q.DIFSECT);for(Ye+=Ne[2];Fe<Ye;++Fe)je.write_shift(-4,q.FATSECT);ft(Ne[3]),ft(Ne[4]);for(var qe=0,rt=0,it=me.FileIndex[0];qe<me.FileIndex.length;++qe)it=me.FileIndex[qe],it.content&&(rt=it.content.length,!(rt<4096)&&(it.start=Ye,ft(rt+511>>9)));for(ft(Ne[6]+7>>3);je.l&511;)je.write_shift(-4,q.ENDOFCHAIN);for(Ye=Fe=0,qe=0;qe<me.FileIndex.length;++qe)it=me.FileIndex[qe],it.content&&(rt=it.content.length,!(!rt||rt>=4096)&&(it.start=Ye,ft(rt+63>>6)));for(;je.l&511;)je.write_shift(-4,q.ENDOFCHAIN);for(Fe=0;Fe<Ne[4]<<2;++Fe){var Ft=me.FullPaths[Fe];if(!Ft||Ft.length===0){for(qe=0;qe<17;++qe)je.write_shift(4,0);for(qe=0;qe<3;++qe)je.write_shift(4,-1);for(qe=0;qe<12;++qe)je.write_shift(4,0);continue}it=me.FileIndex[Fe],Fe===0&&(it.start=it.size?it.start-1:D);var $t=Fe===0&&_e.root||it.name;if(rt=2*($t.length+1),je.write_shift(64,$t,"utf16le"),je.write_shift(2,rt),je.write_shift(1,it.type),je.write_shift(1,it.color),je.write_shift(-4,it.L),je.write_shift(-4,it.R),je.write_shift(-4,it.C),it.clsid)je.write_shift(16,it.clsid,"hex");else for(qe=0;qe<4;++qe)je.write_shift(4,0);je.write_shift(4,it.state||0),je.write_shift(4,0),je.write_shift(4,0),je.write_shift(4,0),je.write_shift(4,0),je.write_shift(4,it.start),je.write_shift(4,it.size),je.write_shift(4,0)}for(Fe=1;Fe<me.FileIndex.length;++Fe)if(it=me.FileIndex[Fe],it.size>=4096)if(je.l=it.start+1<<9,vn&&Buffer.isBuffer(it.content))it.content.copy(je,je.l,0,it.size),je.l+=it.size+511&-512;else{for(qe=0;qe<it.size;++qe)je.write_shift(1,it.content[qe]);for(;qe&511;++qe)je.write_shift(1,0)}for(Fe=1;Fe<me.FileIndex.length;++Fe)if(it=me.FileIndex[Fe],it.size>0&&it.size<4096)if(vn&&Buffer.isBuffer(it.content))it.content.copy(je,je.l,0,it.size),je.l+=it.size+63&-64;else{for(qe=0;qe<it.size;++qe)je.write_shift(1,it.content[qe]);for(;qe&63;++qe)je.write_shift(1,0)}if(vn)je.l=je.length;else for(;je.l<je.length;)je.write_shift(1,0);return je}function R(me,Ie){var _e=me.FullPaths.map(function(qe){return qe.toUpperCase()}),Ne=_e.map(function(qe){var rt=qe.split("/");return rt[rt.length-(qe.slice(-1)=="/"?2:1)]}),je=!1;Ie.charCodeAt(0)===47?(je=!0,Ie=_e[0].slice(0,-1)+Ie):je=Ie.indexOf("/")!==-1;var Fe=Ie.toUpperCase(),Ye=je===!0?_e.indexOf(Fe):Ne.indexOf(Fe);if(Ye!==-1)return me.FileIndex[Ye];var ft=!Fe.match(Gy);for(Fe=Fe.replace(Sl,""),ft&&(Fe=Fe.replace(Gy,"!")),Ye=0;Ye<_e.length;++Ye)if((ft?_e[Ye].replace(Gy,"!"):_e[Ye]).replace(Sl,"")==Fe||(ft?Ne[Ye].replace(Gy,"!"):Ne[Ye]).replace(Sl,"")==Fe)return me.FileIndex[Ye];return null}var k=64,D=-2,L="d0cf11e0a1b11ae1",Z=[208,207,17,224,161,177,26,225],V="00000000000000000000000000000000",q={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:D,FREESECT:-1,HEADER_SIGNATURE:L,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:V,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function G(me,Ie,_e){u();var Ne=M(me,_e);c.writeFileSync(Ie,Ne)}function K(me){for(var Ie=new Array(me.length),_e=0;_e<me.length;++_e)Ie[_e]=String.fromCharCode(me[_e]);return Ie.join("")}function ee(me,Ie){var _e=M(me,Ie);switch(Ie&&Ie.type||"buffer"){case"file":return u(),c.writeFileSync(Ie.filename,_e),_e;case"binary":return typeof _e=="string"?_e:K(_e);case"base64":return Zw(typeof _e=="string"?_e:K(_e));case"buffer":if(vn)return Buffer.isBuffer(_e)?_e:Mh(_e);case"array":return typeof _e=="string"?Uc(_e):_e}return _e}var W;function P(me){try{var Ie=me.InflateRaw,_e=new Ie;if(_e._processChunk(new Uint8Array([3,0]),_e._finishFlushFlag),_e.bytesRead)W=me;else throw new Error("zlib does not expose bytesRead")}catch(Ne){console.error("cannot use native zlib: "+(Ne.message||Ne))}}function U(me,Ie){if(!W)return Pr(me,Ie);var _e=W.InflateRaw,Ne=new _e,je=Ne._processChunk(me.slice(me.l),Ne._finishFlushFlag);return me.l+=Ne.bytesRead,je}function z(me){return W?W.deflateRawSync(me):Ht(me)}var J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],te=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],se=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ie(me){var Ie=(me<<1|me<<11)&139536|(me<<5|me<<15)&558144;return(Ie>>16|Ie>>8|Ie)&255}for(var ce=typeof Uint8Array<"u",de=ce?new Uint8Array(256):[],Be=0;Be<256;++Be)de[Be]=ie(Be);function ae(me,Ie){var _e=de[me&255];return Ie<=8?_e>>>8-Ie:(_e=_e<<8|de[me>>8&255],Ie<=16?_e>>>16-Ie:(_e=_e<<8|de[me>>16&255],_e>>>24-Ie))}function Se(me,Ie){var _e=Ie&7,Ne=Ie>>>3;return(me[Ne]|(_e<=6?0:me[Ne+1]<<8))>>>_e&3}function ke(me,Ie){var _e=Ie&7,Ne=Ie>>>3;return(me[Ne]|(_e<=5?0:me[Ne+1]<<8))>>>_e&7}function ve(me,Ie){var _e=Ie&7,Ne=Ie>>>3;return(me[Ne]|(_e<=4?0:me[Ne+1]<<8))>>>_e&15}function le(me,Ie){var _e=Ie&7,Ne=Ie>>>3;return(me[Ne]|(_e<=3?0:me[Ne+1]<<8))>>>_e&31}function be(me,Ie){var _e=Ie&7,Ne=Ie>>>3;return(me[Ne]|(_e<=1?0:me[Ne+1]<<8))>>>_e&127}function Pe(me,Ie,_e){var Ne=Ie&7,je=Ie>>>3,Fe=(1<<_e)-1,Ye=me[je]>>>Ne;return _e<8-Ne||(Ye|=me[je+1]<<8-Ne,_e<16-Ne)||(Ye|=me[je+2]<<16-Ne,_e<24-Ne)||(Ye|=me[je+3]<<24-Ne),Ye&Fe}function Ue(me,Ie,_e){var Ne=Ie&7,je=Ie>>>3;return Ne<=5?me[je]|=(_e&7)<<Ne:(me[je]|=_e<<Ne&255,me[je+1]=(_e&7)>>8-Ne),Ie+3}function pe(me,Ie,_e){var Ne=Ie&7,je=Ie>>>3;return _e=(_e&1)<<Ne,me[je]|=_e,Ie+1}function Oe(me,Ie,_e){var Ne=Ie&7,je=Ie>>>3;return _e<<=Ne,me[je]|=_e&255,_e>>>=8,me[je+1]=_e,Ie+8}function Le(me,Ie,_e){var Ne=Ie&7,je=Ie>>>3;return _e<<=Ne,me[je]|=_e&255,_e>>>=8,me[je+1]=_e&255,me[je+2]=_e>>>8,Ie+16}function Ge(me,Ie){var _e=me.length,Ne=2*_e>Ie?2*_e:Ie+5,je=0;if(_e>=Ie)return me;if(vn){var Fe=SH(Ne);if(me.copy)me.copy(Fe);else for(;je<me.length;++je)Fe[je]=me[je];return Fe}else if(ce){var Ye=new Uint8Array(Ne);if(Ye.set)Ye.set(me);else for(;je<_e;++je)Ye[je]=me[je];return Ye}return me.length=Ne,me}function et(me){for(var Ie=new Array(me),_e=0;_e<me;++_e)Ie[_e]=0;return Ie}function ut(me,Ie,_e){var Ne=1,je=0,Fe=0,Ye=0,ft=0,qe=me.length,rt=ce?new Uint16Array(32):et(32);for(Fe=0;Fe<32;++Fe)rt[Fe]=0;for(Fe=qe;Fe<_e;++Fe)me[Fe]=0;qe=me.length;var it=ce?new Uint16Array(qe):et(qe);for(Fe=0;Fe<qe;++Fe)rt[je=me[Fe]]++,Ne<je&&(Ne=je),it[Fe]=0;for(rt[0]=0,Fe=1;Fe<=Ne;++Fe)rt[Fe+16]=ft=ft+rt[Fe-1]<<1;for(Fe=0;Fe<qe;++Fe)ft=me[Fe],ft!=0&&(it[Fe]=rt[ft+16]++);var Ft=0;for(Fe=0;Fe<qe;++Fe)if(Ft=me[Fe],Ft!=0)for(ft=ae(it[Fe],Ne)>>Ne-Ft,Ye=(1<<Ne+4-Ft)-1;Ye>=0;--Ye)Ie[ft|Ye<<Ft]=Ft&15|Fe<<4;return Ne}var xt=ce?new Uint16Array(512):et(512),It=ce?new Uint16Array(32):et(32);if(!ce){for(var Mt=0;Mt<512;++Mt)xt[Mt]=0;for(Mt=0;Mt<32;++Mt)It[Mt]=0}(function(){for(var me=[],Ie=0;Ie<32;Ie++)me.push(5);ut(me,It,32);var _e=[];for(Ie=0;Ie<=143;Ie++)_e.push(8);for(;Ie<=255;Ie++)_e.push(9);for(;Ie<=279;Ie++)_e.push(7);for(;Ie<=287;Ie++)_e.push(8);ut(_e,xt,288)})();var Pt=function(){for(var Ie=ce?new Uint8Array(32768):[],_e=0,Ne=0;_e<se.length-1;++_e)for(;Ne<se[_e+1];++Ne)Ie[Ne]=_e;for(;Ne<32768;++Ne)Ie[Ne]=29;var je=ce?new Uint8Array(259):[];for(_e=0,Ne=0;_e<te.length-1;++_e)for(;Ne<te[_e+1];++Ne)je[Ne]=_e;function Fe(ft,qe){for(var rt=0;rt<ft.length;){var it=Math.min(65535,ft.length-rt),Ft=rt+it==ft.length;for(qe.write_shift(1,+Ft),qe.write_shift(2,it),qe.write_shift(2,~it&65535);it-- >0;)qe[qe.l++]=ft[rt++]}return qe.l}function Ye(ft,qe){for(var rt=0,it=0,Ft=ce?new Uint16Array(32768):[];it<ft.length;){var $t=Math.min(65535,ft.length-it);if($t<10){for(rt=Ue(qe,rt,+(it+$t==ft.length)),rt&7&&(rt+=8-(rt&7)),qe.l=rt/8|0,qe.write_shift(2,$t),qe.write_shift(2,~$t&65535);$t-- >0;)qe[qe.l++]=ft[it++];rt=qe.l*8;continue}rt=Ue(qe,rt,+(it+$t==ft.length)+2);for(var Jt=0;$t-- >0;){var zt=ft[it];Jt=(Jt<<5^zt)&32767;var qt=-1,jr=0;if((qt=Ft[Jt])&&(qt|=it&-32768,qt>it&&(qt-=32768),qt<it))for(;ft[qt+jr]==ft[it+jr]&&jr<250;)++jr;if(jr>2){zt=je[jr],zt<=22?rt=Oe(qe,rt,de[zt+1]>>1)-1:(Oe(qe,rt,3),rt+=5,Oe(qe,rt,de[zt-23]>>5),rt+=3);var on=zt<8?0:zt-4>>2;on>0&&(Le(qe,rt,jr-te[zt]),rt+=on),zt=Ie[it-qt],rt=Oe(qe,rt,de[zt]>>3),rt-=3;var ln=zt<4?0:zt-2>>1;ln>0&&(Le(qe,rt,it-qt-se[zt]),rt+=ln);for(var An=0;An<jr;++An)Ft[Jt]=it&32767,Jt=(Jt<<5^ft[it])&32767,++it;$t-=jr-1}else zt<=143?zt=zt+48:rt=pe(qe,rt,1),rt=Oe(qe,rt,de[zt]),Ft[Jt]=it&32767,++it}rt=Oe(qe,rt,0)-1}return qe.l=(rt+7)/8|0,qe.l}return function(qe,rt){return qe.length<8?Fe(qe,rt):Ye(qe,rt)}}();function Ht(me){var Ie=Nt(50+Math.floor(me.length*1.1)),_e=Pt(me,Ie);return Ie.slice(0,_e)}var wt=ce?new Uint16Array(32768):et(32768),Tr=ce?new Uint16Array(32768):et(32768),tr=ce?new Uint16Array(128):et(128),sn=1,kr=1;function $r(me,Ie){var _e=le(me,Ie)+257;Ie+=5;var Ne=le(me,Ie)+1;Ie+=5;var je=ve(me,Ie)+4;Ie+=4;for(var Fe=0,Ye=ce?new Uint8Array(19):et(19),ft=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],qe=1,rt=ce?new Uint8Array(8):et(8),it=ce?new Uint8Array(8):et(8),Ft=Ye.length,$t=0;$t<je;++$t)Ye[J[$t]]=Fe=ke(me,Ie),qe<Fe&&(qe=Fe),rt[Fe]++,Ie+=3;var Jt=0;for(rt[0]=0,$t=1;$t<=qe;++$t)it[$t]=Jt=Jt+rt[$t-1]<<1;for($t=0;$t<Ft;++$t)(Jt=Ye[$t])!=0&&(ft[$t]=it[Jt]++);var zt=0;for($t=0;$t<Ft;++$t)if(zt=Ye[$t],zt!=0){Jt=de[ft[$t]]>>8-zt;for(var qt=(1<<7-zt)-1;qt>=0;--qt)tr[Jt|qt<<zt]=zt&7|$t<<3}var jr=[];for(qe=1;jr.length<_e+Ne;)switch(Jt=tr[be(me,Ie)],Ie+=Jt&7,Jt>>>=3){case 16:for(Fe=3+Se(me,Ie),Ie+=2,Jt=jr[jr.length-1];Fe-- >0;)jr.push(Jt);break;case 17:for(Fe=3+ke(me,Ie),Ie+=3;Fe-- >0;)jr.push(0);break;case 18:for(Fe=11+be(me,Ie),Ie+=7;Fe-- >0;)jr.push(0);break;default:jr.push(Jt),qe<Jt&&(qe=Jt);break}var on=jr.slice(0,_e),ln=jr.slice(_e);for($t=_e;$t<286;++$t)on[$t]=0;for($t=Ne;$t<30;++$t)ln[$t]=0;return sn=ut(on,wt,286),kr=ut(ln,Tr,30),Ie}function Fn(me,Ie){if(me[0]==3&&!(me[1]&3))return[Sm(Ie),2];for(var _e=0,Ne=0,je=SH(Ie||1<<18),Fe=0,Ye=je.length>>>0,ft=0,qe=0;(Ne&1)==0;){if(Ne=ke(me,_e),_e+=3,Ne>>>1)Ne>>1==1?(ft=9,qe=5):(_e=$r(me,_e),ft=sn,qe=kr);else{_e&7&&(_e+=8-(_e&7));var rt=me[_e>>>3]|me[(_e>>>3)+1]<<8;if(_e+=32,rt>0)for(!Ie&&Ye<Fe+rt&&(je=Ge(je,Fe+rt),Ye=je.length);rt-- >0;)je[Fe++]=me[_e>>>3],_e+=8;continue}for(;;){!Ie&&Ye<Fe+32767&&(je=Ge(je,Fe+32767),Ye=je.length);var it=Pe(me,_e,ft),Ft=Ne>>>1==1?xt[it]:wt[it];if(_e+=Ft&15,Ft>>>=4,(Ft>>>8&255)===0)je[Fe++]=Ft;else{if(Ft==256)break;Ft-=257;var $t=Ft<8?0:Ft-4>>2;$t>5&&($t=0);var Jt=Fe+te[Ft];$t>0&&(Jt+=Pe(me,_e,$t),_e+=$t),it=Pe(me,_e,qe),Ft=Ne>>>1==1?It[it]:Tr[it],_e+=Ft&15,Ft>>>=4;var zt=Ft<4?0:Ft-2>>1,qt=se[Ft];for(zt>0&&(qt+=Pe(me,_e,zt),_e+=zt),!Ie&&Ye<Jt&&(je=Ge(je,Jt+100),Ye=je.length);Fe<Jt;)je[Fe]=je[Fe-qt],++Fe}}}return Ie?[je,_e+7>>>3]:[je.slice(0,Fe),_e+7>>>3]}function Pr(me,Ie){var _e=me.slice(me.l||0),Ne=Fn(_e,Ie);return me.l+=Ne[1],Ne[0]}function ms(me,Ie){if(me)typeof console<"u"&&console.error(Ie);else throw new Error(Ie)}function pn(me,Ie){var _e=me;yo(_e,0);var Ne=[],je=[],Fe={FileIndex:Ne,FullPaths:je};E(Fe,{root:Ie.root});for(var Ye=_e.length-4;(_e[Ye]!=80||_e[Ye+1]!=75||_e[Ye+2]!=5||_e[Ye+3]!=6)&&Ye>=0;)--Ye;_e.l=Ye+4,_e.l+=4;var ft=_e.read_shift(2);_e.l+=6;var qe=_e.read_shift(4);for(_e.l=qe,Ye=0;Ye<ft;++Ye){_e.l+=20;var rt=_e.read_shift(4),it=_e.read_shift(4),Ft=_e.read_shift(2),$t=_e.read_shift(2),Jt=_e.read_shift(2);_e.l+=8;var zt=_e.read_shift(4),qt=l(_e.slice(_e.l+Ft,_e.l+Ft+$t));_e.l+=Ft+$t+Jt;var jr=_e.l;_e.l=zt+4,la(_e,rt,it,Fe,qt),_e.l=jr}return Fe}function la(me,Ie,_e,Ne,je){me.l+=2;var Fe=me.read_shift(2),Ye=me.read_shift(2),ft=o(me);if(Fe&8257)throw new Error("Unsupported ZIP encryption");for(var qe=me.read_shift(4),rt=me.read_shift(4),it=me.read_shift(4),Ft=me.read_shift(2),$t=me.read_shift(2),Jt="",zt=0;zt<Ft;++zt)Jt+=String.fromCharCode(me[me.l++]);if($t){var qt=l(me.slice(me.l,me.l+$t));(qt[21589]||{}).mt&&(ft=qt[21589].mt),((je||{})[21589]||{}).mt&&(ft=je[21589].mt)}me.l+=$t;var jr=me.slice(me.l,me.l+rt);switch(Ye){case 8:jr=U(me,it);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ye)}var on=!1;Fe&8&&(qe=me.read_shift(4),qe==134695760&&(qe=me.read_shift(4),on=!0),rt=me.read_shift(4),it=me.read_shift(4)),rt!=Ie&&ms(on,"Bad compressed size: "+Ie+" != "+rt),it!=_e&&ms(on,"Bad uncompressed size: "+_e+" != "+it),xr(Ne,Jt,jr,{unsafe:!0,mt:ft})}function Ba(me,Ie){var _e=Ie||{},Ne=[],je=[],Fe=Nt(1),Ye=_e.compression?8:0,ft=0,qe=0,rt=0,it=0,Ft=0,$t=me.FullPaths[0],Jt=$t,zt=me.FileIndex[0],qt=[],jr=0;for(qe=1;qe<me.FullPaths.length;++qe)if(Jt=me.FullPaths[qe].slice($t.length),zt=me.FileIndex[qe],!(!zt.size||!zt.content||Jt=="Sh33tJ5")){var on=it,ln=Nt(Jt.length);for(rt=0;rt<Jt.length;++rt)ln.write_shift(1,Jt.charCodeAt(rt)&127);ln=ln.slice(0,ln.l),qt[Ft]=WNe.buf(zt.content,0);var An=zt.content;Ye==8&&(An=z(An)),Fe=Nt(30),Fe.write_shift(4,67324752),Fe.write_shift(2,20),Fe.write_shift(2,ft),Fe.write_shift(2,Ye),zt.mt?s(Fe,zt.mt):Fe.write_shift(4,0),Fe.write_shift(-4,qt[Ft]),Fe.write_shift(4,An.length),Fe.write_shift(4,zt.content.length),Fe.write_shift(2,ln.length),Fe.write_shift(2,0),it+=Fe.length,Ne.push(Fe),it+=ln.length,Ne.push(ln),it+=An.length,Ne.push(An),Fe=Nt(46),Fe.write_shift(4,33639248),Fe.write_shift(2,0),Fe.write_shift(2,20),Fe.write_shift(2,ft),Fe.write_shift(2,Ye),Fe.write_shift(4,0),Fe.write_shift(-4,qt[Ft]),Fe.write_shift(4,An.length),Fe.write_shift(4,zt.content.length),Fe.write_shift(2,ln.length),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(4,0),Fe.write_shift(4,on),jr+=Fe.l,je.push(Fe),jr+=ln.length,je.push(ln),++Ft}return Fe=Nt(22),Fe.write_shift(4,101010256),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(2,Ft),Fe.write_shift(2,Ft),Fe.write_shift(4,jr),Fe.write_shift(4,it),Fe.write_shift(2,0),Zi([Zi(Ne),Zi(je),Fe])}var rn={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function gr(me,Ie){if(me.ctype)return me.ctype;var _e=me.name||"",Ne=_e.match(/\.([^\.]+)$/);return Ne&&rn[Ne[1]]||Ie&&(Ne=(_e=Ie).match(/[\.\\]([^\.\\])+$/),Ne&&rn[Ne[1]])?rn[Ne[1]]:"application/octet-stream"}function Ze(me){for(var Ie=Zw(me),_e=[],Ne=0;Ne<Ie.length;Ne+=76)_e.push(Ie.slice(Ne,Ne+76));return _e.join(`\r
`)+`\r
`}function mt(me){var Ie=me.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(rt){var it=rt.charCodeAt(0).toString(16).toUpperCase();return"="+(it.length==1?"0"+it:it)});Ie=Ie.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ie.charAt(0)==`
`&&(Ie="=0D"+Ie.slice(1)),Ie=Ie.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var _e=[],Ne=Ie.split(`\r
`),je=0;je<Ne.length;++je){var Fe=Ne[je];if(Fe.length==0){_e.push("");continue}for(var Ye=0;Ye<Fe.length;){var ft=76,qe=Fe.slice(Ye,Ye+ft);qe.charAt(ft-1)=="="?ft--:qe.charAt(ft-2)=="="?ft-=2:qe.charAt(ft-3)=="="&&(ft-=3),qe=Fe.slice(Ye,Ye+ft),Ye+=ft,Ye<Fe.length&&(qe+="="),_e.push(qe)}}return _e.join(`\r
`)}function Je(me){for(var Ie=[],_e=0;_e<me.length;++_e){for(var Ne=me[_e];_e<=me.length&&Ne.charAt(Ne.length-1)=="=";)Ne=Ne.slice(0,Ne.length-1)+me[++_e];Ie.push(Ne)}for(var je=0;je<Ie.length;++je)Ie[je]=Ie[je].replace(/[=][0-9A-Fa-f]{2}/g,function(Fe){return String.fromCharCode(parseInt(Fe.slice(1),16))});return Uc(Ie.join(`\r
`))}function vt(me,Ie,_e){for(var Ne="",je="",Fe="",Ye,ft=0;ft<10;++ft){var qe=Ie[ft];if(!qe||qe.match(/^\s*$/))break;var rt=qe.match(/^(.*?):\s*([^\s].*)$/);if(rt)switch(rt[1].toLowerCase()){case"content-location":Ne=rt[2].trim();break;case"content-type":Fe=rt[2].trim();break;case"content-transfer-encoding":je=rt[2].trim();break}}switch(++ft,je.toLowerCase()){case"base64":Ye=Uc(Wc(Ie.slice(ft).join("")));break;case"quoted-printable":Ye=Je(Ie.slice(ft));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+je)}var it=xr(me,Ne.slice(_e.length),Ye,{unsafe:!0});Fe&&(it.ctype=Fe)}function Et(me,Ie){if(K(me.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var _e=Ie&&Ie.root||"",Ne=(vn&&Buffer.isBuffer(me)?me.toString("binary"):K(me)).split(`\r
`),je=0,Fe="";for(je=0;je<Ne.length;++je)if(Fe=Ne[je],!!/^Content-Location:/i.test(Fe)&&(Fe=Fe.slice(Fe.indexOf("file")),_e||(_e=Fe.slice(0,Fe.lastIndexOf("/")+1)),Fe.slice(0,_e.length)!=_e))for(;_e.length>0&&(_e=_e.slice(0,_e.length-1),_e=_e.slice(0,_e.lastIndexOf("/")+1),Fe.slice(0,_e.length)!=_e););var Ye=(Ne[1]||"").match(/boundary="(.*?)"/);if(!Ye)throw new Error("MAD cannot find boundary");var ft="--"+(Ye[1]||""),qe=[],rt=[],it={FileIndex:qe,FullPaths:rt};E(it);var Ft,$t=0;for(je=0;je<Ne.length;++je){var Jt=Ne[je];Jt!==ft&&Jt!==ft+"--"||($t++&&vt(it,Ne.slice(Ft,je),_e),Ft=je)}return it}function bt(me,Ie){var _e=Ie||{},Ne=_e.boundary||"SheetJS";Ne="------="+Ne;for(var je=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Ne.slice(2)+'"',"","",""],Fe=me.FullPaths[0],Ye=Fe,ft=me.FileIndex[0],qe=1;qe<me.FullPaths.length;++qe)if(Ye=me.FullPaths[qe].slice(Fe.length),ft=me.FileIndex[qe],!(!ft.size||!ft.content||Ye=="Sh33tJ5")){Ye=Ye.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(jr){return"_x"+jr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(jr){return"_u"+jr.charCodeAt(0).toString(16)+"_"});for(var rt=ft.content,it=vn&&Buffer.isBuffer(rt)?rt.toString("binary"):K(rt),Ft=0,$t=Math.min(1024,it.length),Jt=0,zt=0;zt<=$t;++zt)(Jt=it.charCodeAt(zt))>=32&&Jt<128&&++Ft;var qt=Ft>=$t*4/5;je.push(Ne),je.push("Content-Location: "+(_e.root||"file:///C:/SheetJS/")+Ye),je.push("Content-Transfer-Encoding: "+(qt?"quoted-printable":"base64")),je.push("Content-Type: "+gr(ft,Ye)),je.push(""),je.push(qt?mt(it):Ze(it))}return je.push(Ne+`--\r
`),je.join(`\r
`)}function ar(me){var Ie={};return E(Ie,me),Ie}function xr(me,Ie,_e,Ne){var je=Ne&&Ne.unsafe;je||E(me);var Fe=!je&&Sr.find(me,Ie);if(!Fe){var Ye=me.FullPaths[0];Ie.slice(0,Ye.length)==Ye?Ye=Ie:(Ye.slice(-1)!="/"&&(Ye+="/"),Ye=(Ye+Ie).replace("//","/")),Fe={name:a(Ie),type:2},me.FileIndex.push(Fe),me.FullPaths.push(Ye),je||Sr.utils.cfb_gc(me)}return Fe.content=_e,Fe.size=_e?_e.length:0,Ne&&(Ne.CLSID&&(Fe.clsid=Ne.CLSID),Ne.mt&&(Fe.mt=Ne.mt),Ne.ct&&(Fe.ct=Ne.ct)),Fe}function Wr(me,Ie){E(me);var _e=Sr.find(me,Ie);if(_e){for(var Ne=0;Ne<me.FileIndex.length;++Ne)if(me.FileIndex[Ne]==_e)return me.FileIndex.splice(Ne,1),me.FullPaths.splice(Ne,1),!0}return!1}function Zr(me,Ie,_e){E(me);var Ne=Sr.find(me,Ie);if(Ne){for(var je=0;je<me.FileIndex.length;++je)if(me.FileIndex[je]==Ne)return me.FileIndex[je].name=a(_e),me.FullPaths[je]=_e,!0}return!1}function Kr(me){B(me,!0)}return t.find=R,t.read=I,t.parse=d,t.write=ee,t.writeFile=G,t.utils={cfb_new:ar,cfb_add:xr,cfb_del:Wr,cfb_mov:Zr,cfb_gc:Kr,ReadShift:pw,CheckField:Xte,prep_blob:yo,bconcat:Zi,use_zlib:P,_deflateRaw:Ht,_inflateRaw:Pr,consts:q},t}();function XNe(e){return typeof e=="string"?Wk(e):Array.isArray(e)?wNe(e):e}function eE(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=Wk(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?qf(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([XNe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=zm(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function YNe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Ds(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function DH(e,t){for(var r=[],n=Ds(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function Yk(e){for(var t=[],r=Ds(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function Jk(e){for(var t=[],r=Ds(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function JNe(e){for(var t=[],r=Ds(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var P_=new Date(1899,11,30,0,0,0);function Fi(e,t){var r=e.getTime(),n=P_.getTime()+(e.getTimezoneOffset()-P_.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var jte=new Date,ZNe=P_.getTime()+(jte.getTimezoneOffset()-P_.getTimezoneOffset())*6e4,PH=jte.getTimezoneOffset();function Zk(e){var t=new Date;return t.setTime(e*24*60*60*1e3+ZNe),t.getTimezoneOffset()!==PH&&t.setTime(t.getTime()+(t.getTimezoneOffset()-PH)*6e4),t}function eCe(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[s],10)}return t}var RH=new Date("2017-02-19T19:06:09.000Z"),Bte=isNaN(RH.getFullYear())?new Date("2/19/17"):RH,tCe=Bte.getFullYear()==2017;function Ha(e,t){var r=new Date(e);if(tCe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(Bte.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function yg(e,t){if(vn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return qf(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return qf(gte(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return qf(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return qf(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function Va(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Va(e[r]));return t}function ks(e,t){for(var r="";r.length<t;)r+=e;return r}function Ud(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(t=Number(n)))?t/r:t}var rCe=["january","february","march","april","may","june","july","august","september","october","november","december"];function cb(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&rCe.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var nCe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var s=r.split(n),o=[s[0]],l=1;l<s.length;++l)o.push(a),o.push(s[l]);return o}}();function Tte(e){return e?e.content&&e.type?yg(e.content,!0):e.data?$y(e.data):e.asNodeBuffer&&vn?$y(e.asNodeBuffer().toString("binary")):e.asBinary?$y(e.asBinary()):e._data&&e._data.getContent?$y(yg(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function Ite(e){if(!e)return null;if(e.data)return CH(e.data);if(e.asNodeBuffer&&vn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?CH(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function aCe(e){return e&&e.name.slice(-4)===".bin"?Ite(e):Tte(e)}function Ou(e,t){for(var r=e.FullPaths||Ds(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var o=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||a==o)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function gR(e,t){var r=Ou(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Ai(e,t,r){if(!r)return aCe(gR(e,t));if(!t)return null;try{return Ai(e,t)}catch{return null}}function Qc(e,t,r){if(!r)return Tte(gR(e,t));if(!t)return null;try{return Qc(e,t)}catch{return null}}function sCe(e,t,r){return Ite(gR(e,t))}function LH(e){for(var t=e.FullPaths||Ds(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function dn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return vn?n=Mh(r):n=ENe(r),Sr.utils.cfb_add(e,t,n)}Sr.utils.cfb_add(e,t,r)}else e.file(t,r)}function xR(){return Sr.utils.cfb_new()}function Fte(e,t){switch(t.type){case"base64":return Sr.read(e,{type:"base64"});case"binary":return Sr.read(e,{type:"binary"});case"buffer":case"array":return Sr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function qy(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var ri=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,iCe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,MH=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,oCe=/<[^>]*>/g,ul=ri.match(MH)?MH:oCe,lCe=/<\w*:/,cCe=/<(\/?)\w+:/;function qr(e,t,r){for(var n={},a=0,s=0;a!==e.length&&!((s=e.charCodeAt(a))===32||s===10||s===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var o=e.match(iCe),l=0,c="",u=0,d="",f="",h=1;if(o)for(u=0;u!=o.length;++u){for(f=o[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(h=(a=f.charCodeAt(s+1))==34||a==39?1:0,c=f.slice(s+1+h,f.length-h),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var m=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(n[m]&&d.slice(l-3,l)=="ext")continue;n[m]=c,n[m.toLowerCase()]=c}}return n}function cA(e){return e.replace(cCe,"<$1")}var Ote={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},vR=Yk(Ote),Qn=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(e,function(l,c){return Ote[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,o)+r(a.slice(o+3))}}(),bR=/[&<>'"]/g,uCe=/[\u0000-\u0008\u000b-\u001f]/g;function pa(e){var t=e+"";return t.replace(bR,function(r){return vR[r]}).replace(uCe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function UH(e){return pa(e).replace(/ /g,"_x0020_")}var Dte=/[\u0000-\u001f]/g;function yR(e){var t=e+"";return t.replace(bR,function(r){return vR[r]}).replace(/\n/g,"<br/>").replace(Dte,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function dCe(e){var t=e+"";return t.replace(bR,function(r){return vR[r]}).replace(Dte,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var QH=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function fCe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ua(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function hB(e){for(var t="",r=0,n=0,a=0,s=0,o=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=a&63,t+=String.fromCharCode(o);continue}if(s=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}o=e.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function HH(e){var t=Sm(2*e.length),r,n,a=1,s=0,o=0,l;for(n=0;n<e.length;n+=a)a=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[s++]=o&255,t[s++]=o>>>8,o=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function VH(e){return Mh(e,"binary").toString("utf8")}var WN="foo bar bazâð£",Ea=vn&&(VH(WN)==hB(WN)&&VH||HH(WN)==hB(WN)&&HH)||hB,qf=vn?function(e){return Mh(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},t2=function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),Pte=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),ACe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),hCe=/<\/?(?:vt:)?variant>/g,mCe=/<(?:vt:)([^>]*)>([\s\S]*)</;function zH(e,t){var r=qr(e),n=e.match(ACe(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var o=s.replace(hCe,"").match(mCe);o&&a.push({v:Ea(o[2]),t:o[1]})}),a}var Rte=/(^\s|\s$|\n)/;function wo(e,t){return"<"+e+(t.match(Rte)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function r2(e){return Ds(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Kt(e,t,r){return"<"+e+(r!=null?r2(r):"")+(t!=null?(t.match(Rte)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function xF(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function pCe(e,t){switch(typeof e){case"string":var r=Kt("vt:lpwstr",pa(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Kt((e|0)==e?"vt:i4":"vt:r8",pa(String(e)));case"boolean":return Kt("vt:bool",e?"true":"false")}if(e instanceof Date)return Kt("vt:filetime",xF(e));throw new Error("Unable to serialize "+e)}function wR(e){if(vn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Ea(zm(hR(e)));throw new Error("Bad input format: expected Buffer or string")}var n2=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Bi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Vg=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Pc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function gCe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,s=5;s>=0;--s)a=a*256+e[t+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function xCe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,o=n?-t:t;isFinite(o)?o==0?a=s=0:(a=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var l=0;l<=5;++l,s/=256)e[r+l]=s&255;e[r+6]=(a&15)<<4|s&15,e[r+7]=a>>4|n}var $H=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,s=e[0][n].length;a<s;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},GH=vn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Mh(t)})):$H(e)}:$H,qH=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(rh(e,a)));return n.join("").replace(Sl,"")},ER=vn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Sl,""):qH(e,t,r)}:qH,KH=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},Lte=vn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):KH(e,t,r)}:KH,WH=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(cv(e,a)));return n.join("")},tE=vn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):WH(t,r,n)}:WH,Mte=function(e,t){var r=Rc(e,t);return r>0?tE(e,t+4,t+4+r-1):""},Ute=Mte,Qte=function(e,t){var r=Rc(e,t);return r>0?tE(e,t+4,t+4+r-1):""},Hte=Qte,Vte=function(e,t){var r=2*Rc(e,t);return r>0?tE(e,t+4,t+4+r-1):""},zte=Vte,$te=function(t,r){var n=Rc(t,r);return n>0?ER(t,r+4,r+4+n):""},Gte=$te,qte=function(e,t){var r=Rc(e,t);return r>0?tE(e,t+4,t+4+r):""},Kte=qte,Wte=function(e,t){return gCe(e,t)},R_=Wte,NR=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};vn&&(Ute=function(t,r){if(!Buffer.isBuffer(t))return Mte(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Hte=function(t,r){if(!Buffer.isBuffer(t))return Qte(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},zte=function(t,r){if(!Buffer.isBuffer(t))return Vte(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},Gte=function(t,r){if(!Buffer.isBuffer(t))return $te(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},Kte=function(t,r){if(!Buffer.isBuffer(t))return qte(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},R_=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):Wte(t,r)},NR=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var cv=function(e,t){return e[t]},rh=function(e,t){return e[t+1]*256+e[t]},vCe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Rc=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Dp=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},bCe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function pw(e,t){var r="",n,a,s=[],o,l,c,u;switch(t){case"dbcs":if(u=this.l,vn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(rh(this,u)),u+=2;e*=2;break;case"utf8":r=tE(this,this.l,this.l+e);break;case"utf16le":e*=2,r=ER(this,this.l,this.l+e);break;case"wstr":return pw.call(this,e,"dbcs");case"lpstr-ansi":r=Ute(this,this.l),e=4+Rc(this,this.l);break;case"lpstr-cp":r=Hte(this,this.l),e=4+Rc(this,this.l);break;case"lpwstr":r=zte(this,this.l),e=4+2*Rc(this,this.l);break;case"lpp4":e=4+Rc(this,this.l),r=Gte(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Rc(this,this.l),r=Kte(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=cv(this,this.l+e++))!==0;)s.push(KN(o));r=s.join("");break;case"_wstr":for(e=0,r="";(o=rh(this,this.l+e))!==0;)s.push(KN(o)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=cv(this,u),this.l=u+1,l=pw.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(KN(rh(this,u))),u+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=cv(this,u),this.l=u+1,l=pw.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(KN(cv(this,u))),u+=1}r=s.join("");break;default:switch(e){case 1:return n=cv(this,this.l),this.l++,n;case 2:return n=(t==="i"?vCe:rh)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Dp:bCe)(this,this.l),this.l+=4,n):(a=Rc(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=R_(this,this.l):a=R_([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=Lte(this,this.l,e);break}}return this.l+=e,r}var yCe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},wCe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},ECe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function NCe(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)ECe(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var o=t.charCodeAt(a);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,yCe(this,t,this.l);break;case 8:if(n=8,r==="f"){xCe(this,t,this.l);break}case 16:break;case-4:n=4,wCe(this,t,this.l);break}return this.l+=n,this}function Xte(e,t){var r=Lte(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function yo(e,t){e.l=t,e.read_shift=pw,e.chk=Xte,e.write_shift=NCe}function ll(e,t){e.l+=t}function Nt(e){var t=Sm(e);return yo(t,0),t}function Uh(e,t,r){if(e){var n,a,s;yo(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var u=c2[l]||c2[65535];for(n=e.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=e.read_shift(1))&127)<<7*a;c=e.l+s;var d=u.f&&u.f(e,s,r);if(e.l=c,t(d,u,l))return}}}function oc(){var e=[],t=vn?256:2048,r=function(u){var d=Nt(u);return yo(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},o=function(){return a(),Zi(e)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(t)};return{next:s,push:l,end:o,_bufs:e}}function Rt(e,t,r,n){var a=+t,s;if(!isNaN(a)){n||(n=c2[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var o=e.next(s);a<=127?o.write_shift(1,a):(o.write_shift(1,(a&127)+128),o.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&NR(r)&&e.push(r)}}function gw(e,t,r){var n=Va(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function XH(e,t,r){var n=Va(e);return n.s=gw(n.s,t.s,r),n.e=gw(n.e,t.s,r),n}function xw(e,t){if(e.cRel&&e.c<0)for(e=Va(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Va(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Hr(e);return!e.cRel&&e.cRel!=null&&(r=SCe(r)),!e.rRel&&e.rRel!=null&&(r=CCe(r)),r}function mB(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+cs(e.s.c)+":"+(e.e.cRel?"":"$")+cs(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+ei(e.s.r)+":"+(e.e.rRel?"":"$")+ei(e.e.r):xw(e.s,t.biff)+":"+xw(e.e,t.biff)}function CR(e){return parseInt(_Ce(e),10)-1}function ei(e){return""+(e+1)}function CCe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function _Ce(e){return e.replace(/\$(\d+)$/,"$1")}function _R(e){for(var t=kCe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function cs(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function SCe(e){return e.replace(/^([A-Z])/,"$$$1")}function kCe(e){return e.replace(/^\$([A-Z])/,"$1")}function jCe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function us(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function Hr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function cc(e){var t=e.indexOf(":");return t==-1?{s:us(e),e:us(e)}:{s:us(e.slice(0,t)),e:us(e.slice(t+1))}}function nn(e,t){return typeof t>"u"||typeof t=="number"?nn(e.s,e.e):(typeof e!="string"&&(e=Hr(e)),typeof t!="string"&&(t=Hr(t)),e==t?e:e+":"+t)}function Hn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function YH(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Ku(e.z,r?Fi(t):t)}catch{}try{return e.w=Ku((e.XF||{}).numFmtId||(r?14:0),r?Fi(t):t)}catch{return""+t}}function Ch(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Qh[e.v]||e.v:t==null?YH(e,e.v):YH(e,t))}function $m(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function Yte(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,s=e||(a?[]:{}),o=0,l=0;if(s&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?us(n.origin):n.origin;o=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Hn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(u.e.r=o=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var m={v:t[f][h]},g=o+f,x=l+h;if(u.s.r>g&&(u.s.r=g),u.s.c>x&&(u.s.c=x),u.e.r<g&&(u.e.r=g),u.e.c<x&&(u.e.c=x),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))m=t[f][h];else if(Array.isArray(m.v)&&(m.f=t[f][h][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||Mr[14],n.cellDates?(m.t="d",m.w=Ku(m.z,Fi(m.v))):(m.t="n",m.v=Fi(m.v),m.w=Ku(m.z,m.v))):m.t="s";if(a)s[g]||(s[g]=[]),s[g][x]&&s[g][x].z&&(m.z=s[g][x].z),s[g][x]=m;else{var v=Hr({c:x,r:g});s[v]&&s[v].z&&(m.z=s[v].z),s[v]=m}}}return u.s.c<1e7&&(s["!ref"]=nn(u)),s}function e1(e,t){return Yte(null,e,t)}function BCe(e){return e.read_shift(4,"i")}function Qd(e,t){return t||(t=Nt(4)),t.write_shift(4,e),t}function sl(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function eo(e,t){var r=!1;return t==null&&(r=!0,t=Nt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function TCe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function ICe(e,t){return t||(t=Nt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function SR(e,t){var r=e.l,n=e.read_shift(1),a=sl(e),s=[],o={t:a,h:a};if((n&1)!==0){for(var l=e.read_shift(4),c=0;c!=l;++c)s.push(TCe(e));o.r=s}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function FCe(e,t){var r=!1;return t==null&&(r=!0,t=Nt(15+4*e.t.length)),t.write_shift(1,0),eo(e.t,t),r?t.slice(0,t.l):t}var OCe=SR;function DCe(e,t){var r=!1;return t==null&&(r=!0,t=Nt(23+4*e.t.length)),t.write_shift(1,1),eo(e.t,t),t.write_shift(4,1),ICe({},t),r?t.slice(0,t.l):t}function Yu(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function zg(e,t){return t==null&&(t=Nt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function $g(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Gg(e,t){return t==null&&(t=Nt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var PCe=sl,Jte=eo;function kR(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function L_(e,t){var r=!1;return t==null&&(r=!0,t=Nt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var RCe=sl,vF=kR,jR=L_;function BR(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?R_([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Dp(t,0)>>2;return r?a/100:a}function Zte(e,t){t==null&&(t=Nt(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function ere(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function LCe(e,t){return t||(t=Nt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var qg=ere,t1=LCe;function tl(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function wg(e,t){return(t||Nt(8)).write_shift(8,e,"f")}function MCe(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),s=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=Zp[a];u&&(t.rgb=s2(u));break;case 2:t.rgb=s2([o,l,c]);break;case 3:t.theme=a;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function M_(e,t){if(t||(t=Nt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function UCe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function QCe(e,t){t||(t=Nt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function tre(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function HCe(e){return tre(e,1)}function VCe(e){return tre(e,2)}var TR=2,Kl=3,XN=11,JH=12,U_=19,YN=64,zCe=65,$Ce=71,GCe=4108,qCe=4126,Wi=80,rre=81,KCe=[Wi,rre],bF={1:{n:"CodePage",t:TR},2:{n:"Category",t:Wi},3:{n:"PresentationFormat",t:Wi},4:{n:"ByteCount",t:Kl},5:{n:"LineCount",t:Kl},6:{n:"ParagraphCount",t:Kl},7:{n:"SlideCount",t:Kl},8:{n:"NoteCount",t:Kl},9:{n:"HiddenCount",t:Kl},10:{n:"MultimediaClipCount",t:Kl},11:{n:"ScaleCrop",t:XN},12:{n:"HeadingPairs",t:GCe},13:{n:"TitlesOfParts",t:qCe},14:{n:"Manager",t:Wi},15:{n:"Company",t:Wi},16:{n:"LinksUpToDate",t:XN},17:{n:"CharacterCount",t:Kl},19:{n:"SharedDoc",t:XN},22:{n:"HyperlinksChanged",t:XN},23:{n:"AppVersion",t:Kl,p:"version"},24:{n:"DigSig",t:zCe},26:{n:"ContentType",t:Wi},27:{n:"ContentStatus",t:Wi},28:{n:"Language",t:Wi},29:{n:"Version",t:Wi},255:{},2147483648:{n:"Locale",t:U_},2147483651:{n:"Behavior",t:U_},1919054434:{}},yF={1:{n:"CodePage",t:TR},2:{n:"Title",t:Wi},3:{n:"Subject",t:Wi},4:{n:"Author",t:Wi},5:{n:"Keywords",t:Wi},6:{n:"Comments",t:Wi},7:{n:"Template",t:Wi},8:{n:"LastAuthor",t:Wi},9:{n:"RevNumber",t:Wi},10:{n:"EditTime",t:YN},11:{n:"LastPrinted",t:YN},12:{n:"CreatedDate",t:YN},13:{n:"ModifiedDate",t:YN},14:{n:"PageCount",t:Kl},15:{n:"WordCount",t:Kl},16:{n:"CharCount",t:Kl},17:{n:"Thumbnail",t:$Ce},18:{n:"Application",t:Wi},19:{n:"DocSecurity",t:Kl},255:{},2147483648:{n:"Locale",t:U_},2147483651:{n:"Behavior",t:U_},1919054434:{}},ZH={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},WCe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function XCe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var YCe=XCe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Zp=Va(YCe),Qh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},nre={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},wF={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},JN={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function IR(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function JCe(e){var t=IR();if(!e||!e.match)return t;var r={};if((e.match(ul)||[]).forEach(function(n){var a=qr(n);switch(a[0].replace(lCe,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[wF[a.ContentType]]!==void 0&&t[wF[a.ContentType]].push(a.PartName);break}}),t.xmlns!==Bi.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function are(e,t){var r=JNe(wF),n=[],a;n[n.length]=ri,n[n.length]=Kt("Types",null,{xmlns:Bi.CT,"xmlns:xsd":Bi.xsd,"xmlns:xsi":Bi.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Kt("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=Kt("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:JN[c][t.bookType]||JN[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Kt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:JN[c][t.bookType]||JN[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Kt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Cn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function a2(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function vw(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(ul)||[]).forEach(function(a){var s=qr(a);if(s[0]==="<Relationship"){var o={};o.Type=s.Type,o.Target=s.Target,o.Id=s.Id,s.TargetMode&&(o.TargetMode=s.TargetMode);var l=s.TargetMode==="External"?s.Target:qy(s.Target,t);r[l]=o,n[s.Id]=o}}),r["!id"]=n,r}function Pv(e){var t=[ri,Kt("Relationships",null,{xmlns:Bi.RELS})];return Ds(e["!id"]).forEach(function(r){t[t.length]=Kt("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function ha(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[Cn.HLINK,Cn.XPATH,Cn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var ZCe="application/vnd.oasis.opendocument.spreadsheet";function e5e(e,t){for(var r=wR(e),n,a;n=n2.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=qr(n[0],!1),a.path=="/"&&a.type!==ZCe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function t5e(e){var t=[ri];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function eV(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function r5e(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function n5e(e){var t=[ri];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(eV(e[r][0],e[r][1])),t.push(r5e("",e[r][0]));return t.push(eV("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function sre(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+I_.version+"</meta:generator></office:meta></office:document-meta>"}var qu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],a5e=function(){for(var e=new Array(qu.length),t=0;t<qu.length;++t){var r=qu[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function ire(e){var t={};e=Ea(e);for(var r=0;r<qu.length;++r){var n=qu[r],a=e.match(a5e[r]);a!=null&&a.length>0&&(t[n[1]]=Qn(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Ha(t[n[1]]))}return t}function pB(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=pa(t),n[n.length]=r?Kt(e,t,r):wo(e,t))}function ore(e,t){var r=t||{},n=[ri,Kt("cp:coreProperties",null,{"xmlns:cp":Bi.CORE_PROPS,"xmlns:dc":Bi.dc,"xmlns:dcterms":Bi.dcterms,"xmlns:dcmitype":Bi.dcmitype,"xmlns:xsi":Bi.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&pB("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:xF(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&pB("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:xF(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=qu.length;++s){var o=qu[s],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&pB(o[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var eg=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],lre=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function cre(e,t,r,n){var a=[];if(typeof e=="string")a=zH(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map(function(d){return{v:d}}));var o=typeof t=="string"?zH(t,n).map(function(d){return d.v}):t,l=0,c=0;if(o.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function s5e(e,t,r){var n={};return t||(t={}),e=Ea(e),eg.forEach(function(a){var s=(e.match(t2(a[0]))||[])[1];switch(a[2]){case"string":s&&(t[a[1]]=Qn(s));break;case"bool":t[a[1]]=s==="true";break;case"raw":var o=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));o&&o.length>0&&(n[a[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&cre(n.HeadingPairs,n.TitlesOfParts,t,r),t}function ure(e){var t=[],r=Kt;return e||(e={}),e.Application="SheetJS",t[t.length]=ri,t[t.length]=Kt("Properties",null,{xmlns:Bi.EXT_PROPS,"xmlns:vt":Bi.vt}),eg.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=pa(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+pa(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var i5e=/<[^>]+>[^<]*/g;function o5e(e,t){var r={},n="",a=e.match(i5e);if(a)for(var s=0;s!=a.length;++s){var o=a[s],l=qr(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Qn(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Qn(d);break;case"bool":r[n]=Ua(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Ha(d);break;case"cy":case"error":r[n]=Qn(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,u,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function dre(e){var t=[ri,Kt("Properties",null,{xmlns:Bi.CUST_PROPS,"xmlns:vt":Bi.vt})];if(!e)return t.join("");var r=1;return Ds(e).forEach(function(a){++r,t[t.length]=Kt("property",pCe(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:pa(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var EF={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},gB;function l5e(e,t,r){gB||(gB=Yk(EF)),t=gB[t]||t,e[t]=r}function c5e(e,t){var r=[];return Ds(EF).map(function(n){for(var a=0;a<qu.length;++a)if(qu[a][1]==n)return qu[a];for(a=0;a<eg.length;++a)if(eg[a][1]==n)return eg[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(wo(EF[n[1]]||n[1],a))}}),Kt("DocumentProperties",r.join(""),{xmlns:Pc.o})}function u5e(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&Ds(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var o=0;o<qu.length;++o)if(s==qu[o][1])return;for(o=0;o<eg.length;++o)if(s==eg[o][1])return;for(o=0;o<r.length;++o)if(s==r[o])return;var l=e[s],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(Kt(UH(s),l,{"dt:dt":c}))}}),t&&Ds(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var o=t[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),a.push(Kt(UH(s),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+Pc.o+'">'+a.join("")+"</"+n+">"}function FR(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function d5e(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var o=Nt(8);return o.write_shift(4,n),o.write_shift(4,a),o}function fre(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function Are(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function hre(e,t,r){return t===31?Are(e):fre(e,t,r)}function NF(e,t,r){return hre(e,t,r===!1?0:4)}function f5e(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return hre(e,t,0)}function A5e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(Sl,""),e.l-a&2&&(e.l+=2)}return r}function h5e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(Sl,"");return r}function m5e(e){var t=e.l,r=Q_(e,rre);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=Q_(e,Kl);return[r,n]}function p5e(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(m5e(e));return r}function tV(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var s=e.read_shift(4),o=e.read_shift(4);n[s]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(Sl,"").replace(Gy,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function mre(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function g5e(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function Q_(e,t,r){var n=e.read_shift(2),a,s=r||{};if(e.l+=2,t!==JH&&n!==t&&KCe.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===JH?n:t){case 2:return a=e.read_shift(2,"i"),s.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return fre(e,n,4).replace(Sl,"");case 31:return Are(e);case 64:return FR(e);case 65:return mre(e);case 71:return g5e(e);case 80:return NF(e,n,!s.raw).replace(Sl,"");case 81:return f5e(e,n).replace(Sl,"");case 4108:return p5e(e);case 4126:case 4127:return n==4127?A5e(e):h5e(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function rV(e,t){var r=Nt(4),n=Nt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Nt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=d5e(t);break;case 31:case 80:for(n=Nt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Zi([r,n])}function nV(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],o=0,l=0,c=-1,u={};for(o=0;o!=a;++o){var d=e.read_shift(4),f=e.read_shift(4);s[o]=[d,f+r]}s.sort(function(w,_){return w[1]-_[1]});var h={};for(o=0;o!=a;++o){if(e.l!==s[o][1]){var m=!0;if(o>0&&t)switch(t[s[o-1][0]].t){case 2:e.l+2===s[o][1]&&(e.l+=2,m=!1);break;case 80:e.l<=s[o][1]&&(e.l=s[o][1],m=!1);break;case 4108:e.l<=s[o][1]&&(e.l=s[o][1],m=!1);break}if((!t||o==0)&&e.l<=s[o][1]&&(m=!1,e.l=s[o][1]),m)throw new Error("Read Error: Expected address "+s[o][1]+" at "+e.l+" :"+o)}if(t){var g=t[s[o][0]];if(h[g.n]=Q_(e,g.t,{raw:!0}),g.p==="version"&&(h[g.n]=String(h[g.n]>>16)+"."+("0000"+String(h[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(h[g.n]){case 0:h[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Fd(l=h[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[g.n])}}else if(s[o][0]===1){if(l=h.CodePage=Q_(e,TR),Fd(l),c!==-1){var x=e.l;e.l=s[c][1],u=tV(e,l),e.l=x}}else if(s[o][0]===0){if(l===0){c=o,e.l=s[o+1][1];continue}u=tV(e,l)}else{var v=u[s[o][0]],y;switch(e[e.l]){case 65:e.l+=4,y=mre(e);break;case 30:e.l+=4,y=NF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=NF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=Gs(e,4);break;case 64:e.l+=4,y=Ha(FR(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[v]=y}}return e.l=r+n,h}var pre=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function x5e(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function aV(e,t,r){var n=Nt(8),a=[],s=[],o=8,l=0,c=Nt(8),u=Nt(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),o+=8+c.length,!t){u=Nt(8),u.write_shift(4,0),a.unshift(u);var d=[Nt(4)];for(d[0].write_shift(4,e.length),l=0;l<e.length;++l){var f=e[l][0];for(c=Nt(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Zi(d),s.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(pre.indexOf(e[l][0])>-1||lre.indexOf(e[l][0])>-1)&&e[l][1]!=null){var h=e[l][1],m=0;if(t){m=+t[e[l][0]];var g=r[m];if(g.p=="version"&&typeof h=="string"){var x=h.split(".");h=(+x[0]<<16)+(+x[1]||0)}c=rV(g.t,h)}else{var v=x5e(h);v==-1&&(v=31,h=String(h)),c=rV(v,h)}s.push(c),u=Nt(8),u.write_shift(4,t?m:2+l),a.push(u),o+=8+c.length}var y=8*(s.length+1);for(l=0;l<s.length;++l)a[l].write_shift(4,y),y+=s[l].length;return n.write_shift(4,o),n.write_shift(4,s.length),Zi([n].concat(a).concat(s))}function sV(e,t,r){var n=e.content;if(!n)return{};yo(n,0);var a,s,o,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Sr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),l=n.read_shift(4),a===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);a===2&&(o=n.read_shift(16),c=n.read_shift(4));var f=nV(n,t),h={SystemIdentifier:u};for(var m in f)h[m]=f[m];if(h.FMTID=s,a===1)return h;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var g;try{g=nV(n,null)}catch{}for(m in g)h[m]=g[m];return h.FMTID=[s,o],h}function iV(e,t,r,n,a,s){var o=Nt(a?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Sr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,a?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,a?68:48);var c=aV(e,r,n);if(l.push(c),a){var u=aV(a,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+c.length),l.push(u)}return Zi(l)}function j0(e,t){return e.read_shift(t),null}function v5e(e,t){t||(t=Nt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function b5e(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function Gs(e,t){return e.read_shift(t)===1}function bl(e,t){return t||(t=Nt(2)),t.write_shift(2,+!!e),t}function hi(e){return e.read_shift(2,"u")}function Pu(e,t){return t||(t=Nt(2)),t.write_shift(2,e),t}function gre(e,t){return b5e(e,t,hi)}function y5e(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function xre(e,t,r){return r||(r=Nt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function rE(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var o=n?e.read_shift(n,a):"";return o}function w5e(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,s=1+(r&1),o=0,l,c={};a&&(o=e.read_shift(2)),n&&(l=e.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return a&&(e.l+=4*o),n&&(e.l+=l),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function E5e(e){var t=e.t||"",r=Nt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Nt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return Zi(a)}function Eg(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function nE(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):Eg(e,n,r)}function Kg(e,t,r){if(r.biff>5)return nE(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function vre(e,t,r){return r||(r=Nt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function N5e(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function C5e(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(Sl,"");return n&&(e.l+=24),a}function _5e(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(s>>1,"utf16le").replace(Sl,"");return r+o}function S5e(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return C5e(e);case"0303000000000000c000000000000046":return _5e(e);default:throw new Error("Unsupported Moniker "+r)}}function ZN(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Sl,""):"";return r}function oV(e,t){t||(t=Nt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function k5e(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,o,l,c,u="",d,f;a&16&&(s=ZN(e,r-e.l)),a&128&&(o=ZN(e,r-e.l)),(a&257)===257&&(l=ZN(e,r-e.l)),(a&257)===1&&(c=S5e(e,r-e.l)),a&8&&(u=ZN(e,r-e.l)),a&32&&(d=e.read_shift(16)),a&64&&(f=FR(e)),e.l=r;var h=o||l||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var m={Target:h};return d&&(m.guid=d),f&&(m.time=f),s&&(m.Tooltip=s),m}function j5e(e){var t=Nt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(s==28)n=n.slice(1),oV(n,t);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),s&8&&oV(a>-1?n.slice(a+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function bre(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function yre(e,t){var r=bre(e);return r[3]=0,r}function uA(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function Ng(e,t,r,n){return n||(n=Nt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function B5e(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function T5e(e,t,r){return t===0?"":Kg(e,t,r)}function I5e(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),s=e.read_shift(n,"i"),o=e.read_shift(n,"i");return[a,s,o]}function wre(e){var t=e.read_shift(2),r=BR(e);return[t,r]}function F5e(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=rE(e,t,r),s=e.read_shift(2);if(n-=e.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}function e4(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function Ere(e,t){return t||(t=Nt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Nre(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var O5e=Nre;function Cre(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function D5e(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function P5e(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Uo(e){e.l+=2,e.l+=e.read_shift(2)}var R5e={0:Uo,4:Uo,5:Uo,6:Uo,7:P5e,8:Uo,9:Uo,10:Uo,11:Uo,12:Uo,13:D5e,14:Uo,15:Uo,16:Uo,17:Uo,18:Uo,19:Uo,20:Uo,21:Cre};function L5e(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(R5e[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function eC(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function OR(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Nt(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function M5e(e,t){return t===0||e.read_shift(2),1200}function U5e(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=Kg(e,0,r);return e.read_shift(t+n-e.l),a}function Q5e(e,t){var r=!t||t.biff==8,n=Nt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function H5e(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function V5e(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var o=rE(e,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:a,dt:s,name:o}}function z5e(e,t){var r=!t||t.biff>=8?2:1,n=Nt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function $5e(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),s=[],o=0;o!=a&&e.l<r;++o)s.push(w5e(e));return s.Count=n,s.Unique=a,s}function G5e(e,t){var r=Nt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=E5e(e[a]);var s=Zi([r].concat(n));return s.parts=[r.length].concat(n.map(function(o){return o.length})),s}function q5e(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function K5e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function W5e(e){var t=B5e(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function X5e(e){return e.read_shift(2),e.read_shift(4)}function lV(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function Y5e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:s,CurTab:o,FirstTab:l,Selected:c,TabRatio:u}}function J5e(){var e=Nt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function Z5e(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function e_e(e){var t=Nt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function t_e(){}function r_e(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=rE(e,0,r),n}function n_e(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,s=Nt(a);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function a_e(e){var t=uA(e);return t.isst=e.read_shift(4),t}function s_e(e,t,r,n){var a=Nt(10);return Ng(e,t,n,a),a.write_shift(4,r),a}function i_e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=uA(e);r.biff==2&&e.l++;var s=nE(e,n-e.l,r);return a.val=s,a}function o_e(e,t,r,n,a){var s=!a||a.biff==8,o=Nt(8+ +s+(1+s)*r.length);return Ng(e,t,n,o),o.write_shift(2,r.length),s&&o.write_shift(1,1),o.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),o}function l_e(e,t,r){var n=e.read_shift(2),a=Kg(e,0,r);return[n,a]}function c_e(e,t,r,n){var a=r&&r.biff==5;n||(n=Nt(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var u_e=Kg;function cV(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,s=e.read_shift(a),o=e.read_shift(a),l=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:s,c:l},e:{r:o,c}}}function d_e(e,t){var r=t.biff==8||!t.biff?4:2,n=Nt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function f_e(e){var t=e.read_shift(2),r=e.read_shift(2),n=wre(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function A_e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(wre(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(s.length!=o-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:o,rkrec:s}}function h_e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(s.length!=o-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:o,ixfe:s}}function m_e(e,t,r,n){var a={},s=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return a.patternType=WCe[l>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=o&15,a.dgRight=o>>4&15,a.dgTop=o>>8&15,a.dgBottom=o>>12&15,a.icvLeft=o>>16&127,a.icvRight=o>>23&127,a.grbitDiag=o>>30&3,a.icvTop=l&127,a.icvBottom=l>>7&127,a.icvDiag=l>>14&127,a.dgDiag=l>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function p_e(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=m_e(e,t,n.fStyle,r),n}function uV(e,t,r,n){var a=r&&r.biff==5;n||(n=Nt(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function g_e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function x_e(e){var t=Nt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function dV(e,t,r){var n=uA(e);(r.biff==2||t==9)&&++e.l;var a=y5e(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function v_e(e,t,r,n,a,s){var o=Nt(8);return Ng(e,t,n,o),xre(r,s,o),o}function b_e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=uA(e),a=tl(e);return n.val=a,n}function y_e(e,t,r,n){var a=Nt(14);return Ng(e,t,n,a),wg(r,a),a}var fV=T5e;function w_e(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var o=Eg(e,s),l=[];n>e.l;)l.push(nE(e));return[s,a,o,l]}function AV(e,t,r){var n=e.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=F5e(e,t-2,r)),s.body=a||e.read_shift(t-2),typeof a=="string"&&(s.Name=a),s}var E_e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function hV(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=Eg(e,o,r);a&32&&(u=E_e[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||l===0||!(d>0)?[]:Lje(e,d,r,l);return{chKey:s,Name:u,itab:c,rgce:f}}function _re(e,t,r){if(r.biff<8)return N_e(e,t,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)n.push(I5e(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function N_e(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=rE(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function C_e(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),s=Eg(e,n,r),o=Eg(e,a,r);return[s,o]}function __e(e,t,r){var n=Nre(e);e.l++;var a=e.read_shift(1);return t-=8,[Mje(e,t,r),a,n]}function mV(e,t,r){var n=O5e(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,Pje(e,t,r)]}function S_e(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function k_e(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),l=Kg(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},l,o,s]}}function j_e(e,t,r){return k_e(e,t,r)}function B_e(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(e4(e));return r}function T_e(e){var t=Nt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)Ere(e[r],t);return t}function I_e(e,t,r){if(r&&r.biff<8)return O_e(e,t,r);var n=Cre(e),a=L5e(e,t-22,n[1]);return{cmo:n,ft:a}}var F_e={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function O_e(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((F_e[n]||ll)(e,t,r)),{cmo:[a,n,s],ft:o}}function D_e(e,t,r){var n=e.l,a="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:o=N5e(e,6,r);var l=e.read_shift(2);e.read_shift(2),hi(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=Eg(e,e.lens[u+1]-e.lens[u]-1);if(a+=f,a.length>=(d?l:2*l))break}if(a.length!==l&&a.length!==l*2)throw new Error("cchText: "+l+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function P_e(e,t){var r=e4(e);e.l+=16;var n=k5e(e,t-24);return[r,n]}function R_e(e){var t=Nt(24),r=us(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return Zi([t,j5e(e[1])])}function L_e(e,t){e.read_shift(2);var r=e4(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(Sl,""),[r,n]}function M_e(e){var t=e[1].Tooltip,r=Nt(10+2*(t.length+1));r.write_shift(2,2048);var n=us(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function U_e(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=ZH[r]||r,r=e.read_shift(2),t[1]=ZH[r]||r,t}function Q_e(e){return e||(e=Nt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function H_e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(yre(e));return r}function V_e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(yre(e));return r}function z_e(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function Sre(e,t,r){if(!r.cellStyles)return ll(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:s,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function $_e(e,t){var r=Nt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function G_e(e,t){var r={};return t<32||(e.l+=16,r.header=tl(e),r.footer=tl(e),e.l+=2),r}function q_e(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function K_e(e){for(var t=Nt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var W_e=uA,X_e=gre,Y_e=nE;function J_e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function Z_e(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=uA(e);++e.l;var a=Kg(e,t-7,r);return n.t="str",n.val=a,n}function eSe(e){var t=uA(e);++e.l;var r=tl(e);return t.t="n",t.val=r,t}function tSe(e,t,r){var n=Nt(15);return oE(n,e,t),n.write_shift(8,r,"f"),n}function rSe(e){var t=uA(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function nSe(e,t,r){var n=Nt(9);return oE(n,e,t),n.write_shift(2,r),n}function aSe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function sSe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function iSe(e,t,r){var n=e.l+t,a=uA(e),s=e.read_shift(2),o=Eg(e,s,r);return e.l=n,a.t="str",a.val=o,a}var oSe=[2,3,48,49,131,139,140,245],CF=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=Yk({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=Sm(1);switch(c.type){case"base64":d=Uc(Wc(l));break;case"binary":d=Uc(l);break;case"buffer":case"array":d=l;break}yo(d,0);var f=d.read_shift(1),h=!!(f&136),m=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:m=!0,h=!0;break;case 49:m=!0,h=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var x=0,v=521;f==2&&(x=d.read_shift(2)),d.l+=3,f!=2&&(x=d.read_shift(4)),x>1048576&&(x=1e6),f!=2&&(v=d.read_shift(2));var y=d.read_shift(2),w=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(w=e[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var _=[],T={},j=Math.min(d.length,f==2?521:v-10-(m?264:0)),I=g?32:11;d.l<j&&d[d.l]!=13;)switch(T={},T.name=Jw.utils.decode(w,d.slice(d.l,d.l+I)).replace(/[\u0000\r\n].*$/g,""),d.l+=I,T.type=String.fromCharCode(d.read_shift(1)),f!=2&&!g&&(T.offset=d.read_shift(4)),T.len=d.read_shift(1),f==2&&(T.offset=d.read_shift(2)),T.dec=d.read_shift(1),T.name.length&&_.push(T),f!=2&&(d.l+=g?13:14),T.type){case"B":(!m||T.len!=8)&&c.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+T.type)}if(d[d.l]!==13&&(d.l=v-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=v;var E=0,S=0;for(u[0]=[],S=0;S!=_.length;++S)u[0][S]=_[S].name;for(;x-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,u[++E]=[],S=0,S=0;S!=_.length;++S){var B=d.slice(d.l,d.l+_[S].len);d.l+=_[S].len,yo(B,0);var M=Jw.utils.decode(w,B);switch(_[S].type){case"C":M.trim().length&&(u[E][S]=M.replace(/\s+$/,""));break;case"D":M.length===8?u[E][S]=new Date(+M.slice(0,4),+M.slice(4,6)-1,+M.slice(6,8)):u[E][S]=M;break;case"F":u[E][S]=parseFloat(M.trim());break;case"+":case"I":u[E][S]=g?B.read_shift(-4,"i")^2147483648:B.read_shift(4,"i");break;case"L":switch(M.trim().toUpperCase()){case"Y":case"T":u[E][S]=!0;break;case"N":case"F":u[E][S]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+M+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[E][S]="##MEMO##"+(g?parseInt(M.trim(),10):B.read_shift(4));break;case"N":M=M.replace(/\u0000/g,"").trim(),M&&M!="."&&(u[E][S]=+M||0);break;case"@":u[E][S]=new Date(B.read_shift(-8,"f")-621356832e5);break;case"T":u[E][S]=new Date((B.read_shift(4)-2440588)*864e5+B.read_shift(4));break;case"Y":u[E][S]=B.read_shift(4,"i")/1e4+B.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[E][S]=-B.read_shift(-8,"f");break;case"B":if(m&&_[S].len==8){u[E][S]=B.read_shift(8,"f");break}case"G":case"P":B.l+=_[S].len;break;case"0":if(_[S].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+_[S].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=_,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=e1(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(l,c){try{return $m(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&Fd(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=oc(),f=z_(l,{header:1,raw:!0,cellDates:!0}),h=f[0],m=f.slice(1),g=l["!cols"]||[],x=0,v=0,y=0,w=1;for(x=0;x<h.length;++x){if(((g[x]||{}).DBF||{}).name){h[x]=g[x].DBF.name,++y;continue}if(h[x]!=null){if(++y,typeof h[x]=="number"&&(h[x]=h[x].toString(10)),typeof h[x]!="string")throw new Error("DBF Invalid column name "+h[x]+" |"+typeof h[x]+"|");if(h.indexOf(h[x])!==x){for(v=0;v<1024;++v)if(h.indexOf(h[x]+"_"+v)==-1){h[x]+="_"+v;break}}}}var _=Hn(l["!ref"]),T=[],j=[],I=[];for(x=0;x<=_.e.c-_.s.c;++x){var E="",S="",B=0,M=[];for(v=0;v<m.length;++v)m[v][x]!=null&&M.push(m[v][x]);if(M.length==0||h[x]==null){T[x]="?";continue}for(v=0;v<M.length;++v){switch(typeof M[v]){case"number":S="B";break;case"string":S="C";break;case"boolean":S="L";break;case"object":S=M[v]instanceof Date?"D":"C";break;default:S="C"}B=Math.max(B,String(M[v]).length),E=E&&E!=S?"C":S}B>250&&(B=250),S=((g[x]||{}).DBF||{}).type,S=="C"&&g[x].DBF.len>B&&(B=g[x].DBF.len),E=="B"&&S=="N"&&(E="N",I[x]=g[x].DBF.dec,B=g[x].DBF.len),j[x]=E=="C"||S=="N"?B:s[E]||0,w+=j[x],T[x]=E}var R=d.next(32);for(R.write_shift(4,318902576),R.write_shift(4,m.length),R.write_shift(2,296+32*y),R.write_shift(2,w),x=0;x<4;++x)R.write_shift(4,0);for(R.write_shift(4,0|(+t[pte]||3)<<8),x=0,v=0;x<h.length;++x)if(h[x]!=null){var k=d.next(32),D=(h[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);k.write_shift(1,D,"sbcs"),k.write_shift(1,T[x]=="?"?"C":T[x],"sbcs"),k.write_shift(4,v),k.write_shift(1,j[x]||s[T[x]]||0),k.write_shift(1,I[x]||0),k.write_shift(1,2),k.write_shift(4,0),k.write_shift(1,0),k.write_shift(4,0),k.write_shift(4,0),v+=j[x]||s[T[x]]||0}var L=d.next(264);for(L.write_shift(4,13),x=0;x<65;++x)L.write_shift(4,0);for(x=0;x<m.length;++x){var Z=d.next(w);for(Z.write_shift(1,0),v=0;v<h.length;++v)if(h[v]!=null)switch(T[v]){case"L":Z.write_shift(1,m[x][v]==null?63:m[x][v]?84:70);break;case"B":Z.write_shift(8,m[x][v]||0,"f");break;case"N":var V="0";for(typeof m[x][v]=="number"&&(V=m[x][v].toFixed(I[v]||0)),y=0;y<j[v]-V.length;++y)Z.write_shift(1,32);Z.write_shift(1,V,"sbcs");break;case"D":m[x][v]?(Z.write_shift(4,("0000"+m[x][v].getFullYear()).slice(-4),"sbcs"),Z.write_shift(2,("00"+(m[x][v].getMonth()+1)).slice(-2),"sbcs"),Z.write_shift(2,("00"+m[x][v].getDate()).slice(-2),"sbcs")):Z.write_shift(8,"00000000","sbcs");break;case"C":var q=String(m[x][v]!=null?m[x][v]:"").slice(0,j[v]);for(Z.write_shift(1,q,"sbcs"),y=0;y<j[v]-q.length;++y)Z.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:o}}(),kre=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Ds(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,m){var g=e[m];return typeof g=="number"?_H(g):g},n=function(h,m,g){var x=m.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return x==59?h:_H(x)};e["|"]=254;function a(h,m){switch(m.type){case"base64":return s(Wc(h),m);case"binary":return s(h,m);case"buffer":return s(vn&&Buffer.isBuffer(h)?h.toString("binary"):zm(h),m);case"array":return s(yg(h),m)}throw new Error("Unrecognized type "+m.type)}function s(h,m){var g=h.split(/[\n\r]+/),x=-1,v=-1,y=0,w=0,_=[],T=[],j=null,I={},E=[],S=[],B=[],M=0,R;for(+m.codepage>=0&&Fd(+m.codepage);y!==g.length;++y){M=0;var k=g[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),D=k.replace(/;;/g,"\0").split(";").map(function(J){return J.replace(/\u0000/g,";")}),L=D[0],Z;if(k.length>0)switch(L){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":D[1].charAt(0)=="P"&&T.push(k.slice(3).replace(/;;/g,";"));break;case"C":var V=!1,q=!1,G=!1,K=!1,ee=-1,W=-1;for(w=1;w<D.length;++w)switch(D[w].charAt(0)){case"A":break;case"X":v=parseInt(D[w].slice(1))-1,q=!0;break;case"Y":for(x=parseInt(D[w].slice(1))-1,q||(v=0),R=_.length;R<=x;++R)_[R]=[];break;case"K":Z=D[w].slice(1),Z.charAt(0)==='"'?Z=Z.slice(1,Z.length-1):Z==="TRUE"?Z=!0:Z==="FALSE"?Z=!1:isNaN(Ud(Z))?isNaN(cb(Z).getDate())||(Z=Ha(Z)):(Z=Ud(Z),j!==null&&Jb(j)&&(Z=Zk(Z))),V=!0;break;case"E":K=!0;var P=Rv(D[w].slice(1),{r:x,c:v});_[x][v]=[_[x][v],P];break;case"S":G=!0,_[x][v]=[_[x][v],"S5S"];break;case"G":break;case"R":ee=parseInt(D[w].slice(1))-1;break;case"C":W=parseInt(D[w].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+k)}if(V&&(_[x][v]&&_[x][v].length==2?_[x][v][0]=Z:_[x][v]=Z,j=null),G){if(K)throw new Error("SYLK shared formula cannot have own formula");var U=ee>-1&&_[ee][W];if(!U||!U[1])throw new Error("SYLK shared formula cannot find base");_[x][v][1]=Gre(U[1],{r:x-ee,c:v-W})}break;case"F":var z=0;for(w=1;w<D.length;++w)switch(D[w].charAt(0)){case"X":v=parseInt(D[w].slice(1))-1,++z;break;case"Y":for(x=parseInt(D[w].slice(1))-1,R=_.length;R<=x;++R)_[R]=[];break;case"M":M=parseInt(D[w].slice(1))/20;break;case"F":break;case"G":break;case"P":j=T[parseInt(D[w].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(B=D[w].slice(1).split(" "),R=parseInt(B[0],10);R<=parseInt(B[1],10);++R)M=parseInt(B[2],10),S[R-1]=M===0?{hidden:!0}:{wch:M},km(S[R-1]);break;case"C":v=parseInt(D[w].slice(1))-1,S[v]||(S[v]={});break;case"R":x=parseInt(D[w].slice(1))-1,E[x]||(E[x]={}),M>0?(E[x].hpt=M,E[x].hpx=db(M)):M===0&&(E[x].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+k)}z<1&&(j=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+k)}}return E.length>0&&(I["!rows"]=E),S.length>0&&(I["!cols"]=S),m&&m.sheetRows&&(_=_.slice(0,m.sheetRows)),[_,I]}function o(h,m){var g=a(h,m),x=g[0],v=g[1],y=e1(x,m);return Ds(v).forEach(function(w){y[w]=v[w]}),y}function l(h,m){return $m(o(h,m),m)}function c(h,m,g,x){var v="C;Y"+(g+1)+";X"+(x+1)+";K";switch(h.t){case"n":v+=h.v||0,h.f&&!h.F&&(v+=";E"+UR(h.f,{r:g,c:x}));break;case"b":v+=h.v?"TRUE":"FALSE";break;case"e":v+=h.w||h.v;break;case"d":v+='"'+(h.w||h.v)+'"';break;case"s":v+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(h,m){m.forEach(function(g,x){var v="F;W"+(x+1)+" "+(x+1)+" ";g.hidden?v+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=i2(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=o2(g.wpx)),typeof g.wch=="number"&&(v+=Math.round(g.wch))),v.charAt(v.length-1)!=" "&&h.push(v)})}function d(h,m){m.forEach(function(g,x){var v="F;";g.hidden?v+="M0;":g.hpt?v+="M"+20*g.hpt+";":g.hpx&&(v+="M"+20*l2(g.hpx)+";"),v.length>2&&h.push(v+"R"+(x+1))})}function f(h,m){var g=["ID;PWXL;N;E"],x=[],v=Hn(h["!ref"]),y,w=Array.isArray(h),_=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),h["!cols"]&&u(g,h["!cols"]),h["!rows"]&&d(g,h["!rows"]),g.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var T=v.s.r;T<=v.e.r;++T)for(var j=v.s.c;j<=v.e.c;++j){var I=Hr({r:T,c:j});y=w?(h[T]||[])[j]:h[I],!(!y||y.v==null&&(!y.f||y.F))&&x.push(c(y,h,T,j))}return g.join(_)+_+x.join(_)+_+"E"+_}return{to_workbook:l,to_sheet:o,from_sheet:f}}(),jre=function(){function e(s,o){switch(o.type){case"base64":return t(Wc(s),o);case"binary":return t(s,o);case"buffer":return t(vn&&Buffer.isBuffer(s)?s.toString("binary"):zm(s),o);case"array":return t(yg(s),o)}throw new Error("Unrecognized type "+o.type)}function t(s,o){for(var l=s.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=l[d].trim().split(","),m=h[0],g=h[1];++d;for(var x=l[d]||"";(x.match(/["]/g)||[]).length&1&&d<l.length-1;)x+=`
`+l[++d];switch(x=x.trim(),+m){case-1:if(x==="BOT"){f[++c]=[],u=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?f[c][u]=!0:x==="FALSE"?f[c][u]=!1:isNaN(Ud(g))?isNaN(cb(g).getDate())?f[c][u]=g:f[c][u]=Ha(g):f[c][u]=Ud(g),++u;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),f[c][u++]=x!==""?x:null;break}if(x==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function r(s,o){return e1(e(s,o),o)}function n(s,o){return $m(r(s,o),o)}var a=function(){var s=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},o=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Hn(c["!ref"]),f,h=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var m=d.s.r;m<=d.e.r;++m){o(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var x=Hr({r:m,c:g});if(f=h?(c[m]||[])[g]:c[x],!f){o(u,1,0,"");continue}switch(f.t){case"n":var v=f.w;!v&&f.v!=null&&(v=f.v),v==null?f.f&&!f.F?o(u,1,0,"="+f.f):o(u,1,0,""):o(u,0,v,"V");break;case"b":o(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Ku(f.z||Mr[14],Fi(Ha(f.v)))),o(u,0,f.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var y=`\r
`,w=u.join(y);return w}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),Bre=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var m=f.split(`
`),g=-1,x=-1,v=0,y=[];v!==m.length;++v){var w=m[v].trim().split(":");if(w[0]==="cell"){var _=us(w[1]);if(y.length<=_.r)for(g=y.length;g<=_.r;++g)y[g]||(y[g]=[]);switch(g=_.r,x=_.c,w[2]){case"t":y[g][x]=e(w[3]);break;case"v":y[g][x]=+w[3];break;case"vtf":var T=w[w.length-1];case"vtc":switch(w[3]){case"nl":y[g][x]=!!+w[4];break;default:y[g][x]=+w[4];break}w[2]=="vtf"&&(y[g][x]=[y[g][x],T])}}}return h&&h.sheetRows&&(y=y.slice(0,h.sheetRows)),y}function n(f,h){return e1(r(f,h),h)}function a(f,h){return $m(n(f,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],m=[],g,x="",v=cc(f["!ref"]),y=Array.isArray(f),w=v.s.r;w<=v.e.r;++w)for(var _=v.s.c;_<=v.e.c;++_)if(x=Hr({r:w,c:_}),g=y?(f[w]||[])[_]:f[x],!(!g||g.v==null||g.t==="z")){switch(m=["cell",x,"t"],g.t){case"s":case"str":m.push(t(g.v));break;case"n":g.f?(m[2]="vtf",m[3]="n",m[4]=g.v,m[5]=t(g.f)):(m[2]="v",m[3]=g.v);break;case"b":m[2]="vt"+(g.f?"f":"c"),m[3]="nl",m[4]=g.v?"1":"0",m[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var T=Fi(Ha(g.v));m[2]="vtc",m[3]="nd",m[4]=""+T,m[5]=g.w||Ku(g.z||Mr[14],T);break;case"e":continue}h.push(m.join(":"))}return h.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[s,o,l,o,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),ub=function(){function e(d,f,h,m,g){g.raw?f[h][m]=d:d===""||(d==="TRUE"?f[h][m]=!0:d==="FALSE"?f[h][m]=!1:isNaN(Ud(d))?isNaN(cb(d).getDate())?f[h][m]=d:f[h][m]=Ha(d):f[h][m]=Ud(d))}function t(d,f){var h=f||{},m=[];if(!d||d.length===0)return m;for(var g=d.split(/[\r\n]/),x=g.length-1;x>=0&&g[x].length===0;)--x;for(var v=10,y=0,w=0;w<=x;++w)y=g[w].indexOf(" "),y==-1?y=g[w].length:y++,v=Math.max(v,y);for(w=0;w<=x;++w){m[w]=[];var _=0;for(e(g[w].slice(0,v).trim(),m,w,_,h),_=1;_<=(g[w].length-v)/10+1;++_)e(g[w].slice(v+(_-1)*10,v+_*10).trim(),m,w,_,h)}return h.sheetRows&&(m=m.slice(0,h.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},h=!1,m=0,g=0;m<d.length;++m)(g=d.charCodeAt(m))==34?h=!h:!h&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m]);if(!g.length){f=n;for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m])}return g.sort(function(x,v){return x[0]-v[0]||n[x[1]]-n[v[1]]}),r[g.pop()[1]]||44}function s(d,f){var h=f||{},m="",g=h.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(m=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(m=d.charAt(4),d=d.slice(6)):m=a(d.slice(0,1024)):h&&h.FS?m=h.FS:m=a(d.slice(0,1024));var v=0,y=0,w=0,_=0,T=0,j=m.charCodeAt(0),I=!1,E=0,S=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var B=h.dateNF!=null?qNe(h.dateNF):null;function M(){var R=d.slice(_,T),k={};if(R.charAt(0)=='"'&&R.charAt(R.length-1)=='"'&&(R=R.slice(1,-1).replace(/""/g,'"')),R.length===0)k.t="z";else if(h.raw)k.t="s",k.v=R;else if(R.trim().length===0)k.t="s",k.v=R;else if(R.charCodeAt(0)==61)R.charCodeAt(1)==34&&R.charCodeAt(R.length-1)==34?(k.t="s",k.v=R.slice(2,-1).replace(/""/g,'"')):w4e(R)?(k.t="n",k.f=R.slice(1)):(k.t="s",k.v=R);else if(R=="TRUE")k.t="b",k.v=!0;else if(R=="FALSE")k.t="b",k.v=!1;else if(!isNaN(w=Ud(R)))k.t="n",h.cellText!==!1&&(k.w=R),k.v=w;else if(!isNaN(cb(R).getDate())||B&&R.match(B)){k.z=h.dateNF||Mr[14];var D=0;B&&R.match(B)&&(R=KNe(R,h.dateNF,R.match(B)||[]),D=1),h.cellDates?(k.t="d",k.v=Ha(R,D)):(k.t="n",k.v=Fi(Ha(R,D))),h.cellText!==!1&&(k.w=Ku(k.z,k.v instanceof Date?Fi(k.v):k.v)),h.cellNF||delete k.z}else k.t="s",k.v=R;if(k.t=="z"||(h.dense?(g[v]||(g[v]=[]),g[v][y]=k):g[Hr({c:y,r:v})]=k),_=T+1,S=d.charCodeAt(_),x.e.c<y&&(x.e.c=y),x.e.r<v&&(x.e.r=v),E==j)++y;else if(y=0,++v,h.sheetRows&&h.sheetRows<=v)return!0}e:for(;T<d.length;++T)switch(E=d.charCodeAt(T)){case 34:S===34&&(I=!I);break;case j:case 10:case 13:if(!I&&M())break e;break}return T-_>0&&M(),g["!ref"]=nn(x),g}function o(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):e1(t(d,f),f)}function l(d,f){var h="",m=f.type=="string"?[0,0,0,0]:KR(d,f);switch(f.type){case"base64":h=Wc(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof Jw<"u"||(h=vn&&Buffer.isBuffer(d)?d.toString("binary"):zm(d));break;case"array":h=yg(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return m[0]==239&&m[1]==187&&m[2]==191?h=Ea(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=Ea(h):f.type=="binary"&&typeof Jw<"u",h.slice(0,19)=="socialcalc:version:"?Bre.to_sheet(f.type=="string"?h:Ea(h),f):o(h,f)}function c(d,f){return $m(l(d,f),f)}function u(d){for(var f=[],h=Hn(d["!ref"]),m,g=Array.isArray(d),x=h.s.r;x<=h.e.r;++x){for(var v=[],y=h.s.c;y<=h.e.c;++y){var w=Hr({r:x,c:y});if(m=g?(d[x]||[])[y]:d[w],!m||m.v==null){v.push("          ");continue}for(var _=(m.w||(Ch(m),m.w)||"").slice(0,10);_.length<10;)_+=" ";v.push(_+(y===0?" ":""))}f.push(v.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function lSe(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=kre.to_workbook(e,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return ub.to_workbook(e,t)}}var tg=function(){function e(P,U,z){if(P){yo(P,P.l||0);for(var J=z.Enum||ee;P.l<P.length;){var te=P.read_shift(2),se=J[te]||J[65535],ie=P.read_shift(2),ce=P.l+ie,de=se.f&&se.f(P,ie,z);if(P.l=ce,U(de,se,te))return}}}function t(P,U){switch(U.type){case"base64":return r(Uc(Wc(P)),U);case"binary":return r(Uc(P),U);case"buffer":case"array":return r(P,U)}throw"Unsupported type "+U.type}function r(P,U){if(!P)return P;var z=U||{},J=z.dense?[]:{},te="Sheet1",se="",ie=0,ce={},de=[],Be=[],ae={s:{r:0,c:0},e:{r:0,c:0}},Se=z.sheetRows||0;if(P[2]==0&&(P[3]==8||P[3]==9)&&P.length>=16&&P[14]==5&&P[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(P[2]==2)z.Enum=ee,e(P,function(be,Pe,Ue){switch(Ue){case 0:z.vers=be,be>=4096&&(z.qpro=!0);break;case 6:ae=be;break;case 204:be&&(se=be);break;case 222:se=be;break;case 15:case 51:z.qpro||(be[1].v=be[1].v.slice(1));case 13:case 14:case 16:Ue==14&&(be[2]&112)==112&&(be[2]&15)>1&&(be[2]&15)<15&&(be[1].z=z.dateNF||Mr[14],z.cellDates&&(be[1].t="d",be[1].v=Zk(be[1].v))),z.qpro&&be[3]>ie&&(J["!ref"]=nn(ae),ce[te]=J,de.push(te),J=z.dense?[]:{},ae={s:{r:0,c:0},e:{r:0,c:0}},ie=be[3],te=se||"Sheet"+(ie+1),se="");var pe=z.dense?(J[be[0].r]||[])[be[0].c]:J[Hr(be[0])];if(pe){pe.t=be[1].t,pe.v=be[1].v,be[1].z!=null&&(pe.z=be[1].z),be[1].f!=null&&(pe.f=be[1].f);break}z.dense?(J[be[0].r]||(J[be[0].r]=[]),J[be[0].r][be[0].c]=be[1]):J[Hr(be[0])]=be[1];break}},z);else if(P[2]==26||P[2]==14)z.Enum=W,P[2]==14&&(z.qpro=!0,P.l=0),e(P,function(be,Pe,Ue){switch(Ue){case 204:te=be;break;case 22:be[1].v=be[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(be[3]>ie&&(J["!ref"]=nn(ae),ce[te]=J,de.push(te),J=z.dense?[]:{},ae={s:{r:0,c:0},e:{r:0,c:0}},ie=be[3],te="Sheet"+(ie+1)),Se>0&&be[0].r>=Se)break;z.dense?(J[be[0].r]||(J[be[0].r]=[]),J[be[0].r][be[0].c]=be[1]):J[Hr(be[0])]=be[1],ae.e.c<be[0].c&&(ae.e.c=be[0].c),ae.e.r<be[0].r&&(ae.e.r=be[0].r);break;case 27:be[14e3]&&(Be[be[14e3][0]]=be[14e3][1]);break;case 1537:Be[be[0]]=be[1],be[0]==ie&&(te=be[1]);break}},z);else throw new Error("Unrecognized LOTUS BOF "+P[2]);if(J["!ref"]=nn(ae),ce[se||te]=J,de.push(se||te),!Be.length)return{SheetNames:de,Sheets:ce};for(var ke={},ve=[],le=0;le<Be.length;++le)ce[de[le]]?(ve.push(Be[le]||de[le]),ke[Be[le]]=ce[Be[le]]||ce[de[le]]):(ve.push(Be[le]),ke[Be[le]]={"!ref":"A1"});return{SheetNames:ve,Sheets:ke}}function n(P,U){var z=U||{};if(+z.codepage>=0&&Fd(+z.codepage),z.type=="string")throw new Error("Cannot write WK1 to JS string");var J=oc(),te=Hn(P["!ref"]),se=Array.isArray(P),ie=[];Wt(J,0,s(1030)),Wt(J,6,c(te));for(var ce=Math.min(te.e.r,8191),de=te.s.r;de<=ce;++de)for(var Be=ei(de),ae=te.s.c;ae<=te.e.c;++ae){de===te.s.r&&(ie[ae]=cs(ae));var Se=ie[ae]+Be,ke=se?(P[de]||[])[ae]:P[Se];if(!(!ke||ke.t=="z"))if(ke.t=="n")(ke.v|0)==ke.v&&ke.v>=-32768&&ke.v<=32767?Wt(J,13,m(de,ae,ke.v)):Wt(J,14,x(de,ae,ke.v));else{var ve=Ch(ke);Wt(J,15,f(de,ae,ve.slice(0,239)))}}return Wt(J,1),J.end()}function a(P,U){var z=U||{};if(+z.codepage>=0&&Fd(+z.codepage),z.type=="string")throw new Error("Cannot write WK3 to JS string");var J=oc();Wt(J,0,o(P));for(var te=0,se=0;te<P.SheetNames.length;++te)(P.Sheets[P.SheetNames[te]]||{})["!ref"]&&Wt(J,27,K(P.SheetNames[te],se++));var ie=0;for(te=0;te<P.SheetNames.length;++te){var ce=P.Sheets[P.SheetNames[te]];if(!(!ce||!ce["!ref"])){for(var de=Hn(ce["!ref"]),Be=Array.isArray(ce),ae=[],Se=Math.min(de.e.r,8191),ke=de.s.r;ke<=Se;++ke)for(var ve=ei(ke),le=de.s.c;le<=de.e.c;++le){ke===de.s.r&&(ae[le]=cs(le));var be=ae[le]+ve,Pe=Be?(ce[ke]||[])[le]:ce[be];if(!(!Pe||Pe.t=="z"))if(Pe.t=="n")Wt(J,23,M(ke,le,ie,Pe.v));else{var Ue=Ch(Pe);Wt(J,22,E(ke,le,ie,Ue.slice(0,239)))}}++ie}}return Wt(J,1),J.end()}function s(P){var U=Nt(2);return U.write_shift(2,P),U}function o(P){var U=Nt(26);U.write_shift(2,4096),U.write_shift(2,4),U.write_shift(4,0);for(var z=0,J=0,te=0,se=0;se<P.SheetNames.length;++se){var ie=P.SheetNames[se],ce=P.Sheets[ie];if(!(!ce||!ce["!ref"])){++te;var de=cc(ce["!ref"]);z<de.e.r&&(z=de.e.r),J<de.e.c&&(J=de.e.c)}}return z>8191&&(z=8191),U.write_shift(2,z),U.write_shift(1,te),U.write_shift(1,J),U.write_shift(2,0),U.write_shift(2,0),U.write_shift(1,1),U.write_shift(1,2),U.write_shift(4,0),U.write_shift(4,0),U}function l(P,U,z){var J={s:{c:0,r:0},e:{c:0,r:0}};return U==8&&z.qpro?(J.s.c=P.read_shift(1),P.l++,J.s.r=P.read_shift(2),J.e.c=P.read_shift(1),P.l++,J.e.r=P.read_shift(2),J):(J.s.c=P.read_shift(2),J.s.r=P.read_shift(2),U==12&&z.qpro&&(P.l+=2),J.e.c=P.read_shift(2),J.e.r=P.read_shift(2),U==12&&z.qpro&&(P.l+=2),J.s.c==65535&&(J.s.c=J.e.c=J.s.r=J.e.r=0),J)}function c(P){var U=Nt(8);return U.write_shift(2,P.s.c),U.write_shift(2,P.s.r),U.write_shift(2,P.e.c),U.write_shift(2,P.e.r),U}function u(P,U,z){var J=[{c:0,r:0},{t:"n",v:0},0,0];return z.qpro&&z.vers!=20768?(J[0].c=P.read_shift(1),J[3]=P.read_shift(1),J[0].r=P.read_shift(2),P.l+=2):(J[2]=P.read_shift(1),J[0].c=P.read_shift(2),J[0].r=P.read_shift(2)),J}function d(P,U,z){var J=P.l+U,te=u(P,U,z);if(te[1].t="s",z.vers==20768){P.l++;var se=P.read_shift(1);return te[1].v=P.read_shift(se,"utf8"),te}return z.qpro&&P.l++,te[1].v=P.read_shift(J-P.l,"cstr"),te}function f(P,U,z){var J=Nt(7+z.length);J.write_shift(1,255),J.write_shift(2,U),J.write_shift(2,P),J.write_shift(1,39);for(var te=0;te<J.length;++te){var se=z.charCodeAt(te);J.write_shift(1,se>=128?95:se)}return J.write_shift(1,0),J}function h(P,U,z){var J=u(P,U,z);return J[1].v=P.read_shift(2,"i"),J}function m(P,U,z){var J=Nt(7);return J.write_shift(1,255),J.write_shift(2,U),J.write_shift(2,P),J.write_shift(2,z,"i"),J}function g(P,U,z){var J=u(P,U,z);return J[1].v=P.read_shift(8,"f"),J}function x(P,U,z){var J=Nt(13);return J.write_shift(1,255),J.write_shift(2,U),J.write_shift(2,P),J.write_shift(8,z,"f"),J}function v(P,U,z){var J=P.l+U,te=u(P,U,z);if(te[1].v=P.read_shift(8,"f"),z.qpro)P.l=J;else{var se=P.read_shift(2);T(P.slice(P.l,P.l+se),te),P.l+=se}return te}function y(P,U,z){var J=U&32768;return U&=-32769,U=(J?P:0)+(U>=8192?U-16384:U),(J?"":"$")+(z?cs(U):ei(U))}var w={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},_=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function T(P,U){yo(P,0);for(var z=[],J=0,te="",se="",ie="",ce="";P.l<P.length;){var de=P[P.l++];switch(de){case 0:z.push(P.read_shift(8,"f"));break;case 1:se=y(U[0].c,P.read_shift(2),!0),te=y(U[0].r,P.read_shift(2),!1),z.push(se+te);break;case 2:{var Be=y(U[0].c,P.read_shift(2),!0),ae=y(U[0].r,P.read_shift(2),!1);se=y(U[0].c,P.read_shift(2),!0),te=y(U[0].r,P.read_shift(2),!1),z.push(Be+ae+":"+se+te)}break;case 3:if(P.l<P.length){console.error("WK1 premature formula end");return}break;case 4:z.push("("+z.pop()+")");break;case 5:z.push(P.read_shift(2));break;case 6:{for(var Se="";de=P[P.l++];)Se+=String.fromCharCode(de);z.push('"'+Se.replace(/"/g,'""')+'"')}break;case 8:z.push("-"+z.pop());break;case 23:z.push("+"+z.pop());break;case 22:z.push("NOT("+z.pop()+")");break;case 20:case 21:ce=z.pop(),ie=z.pop(),z.push(["AND","OR"][de-20]+"("+ie+","+ce+")");break;default:if(de<32&&_[de])ce=z.pop(),ie=z.pop(),z.push(ie+_[de]+ce);else if(w[de]){if(J=w[de][1],J==69&&(J=P[P.l++]),J>z.length){console.error("WK1 bad formula parse 0x"+de.toString(16)+":|"+z.join("|")+"|");return}var ke=z.slice(-J);z.length-=J,z.push(w[de][0]+"("+ke.join(",")+")")}else return de<=7?console.error("WK1 invalid opcode "+de.toString(16)):de<=24?console.error("WK1 unsupported op "+de.toString(16)):de<=30?console.error("WK1 invalid opcode "+de.toString(16)):de<=115?console.error("WK1 unsupported function opcode "+de.toString(16)):console.error("WK1 unrecognized opcode "+de.toString(16))}}z.length==1?U[1].f=""+z[0]:console.error("WK1 bad formula parse |"+z.join("|")+"|")}function j(P){var U=[{c:0,r:0},{t:"n",v:0},0];return U[0].r=P.read_shift(2),U[3]=P[P.l++],U[0].c=P[P.l++],U}function I(P,U){var z=j(P);return z[1].t="s",z[1].v=P.read_shift(U-4,"cstr"),z}function E(P,U,z,J){var te=Nt(6+J.length);te.write_shift(2,P),te.write_shift(1,z),te.write_shift(1,U),te.write_shift(1,39);for(var se=0;se<J.length;++se){var ie=J.charCodeAt(se);te.write_shift(1,ie>=128?95:ie)}return te.write_shift(1,0),te}function S(P,U){var z=j(P);z[1].v=P.read_shift(2);var J=z[1].v>>1;if(z[1].v&1)switch(J&7){case 0:J=(J>>3)*5e3;break;case 1:J=(J>>3)*500;break;case 2:J=(J>>3)/20;break;case 3:J=(J>>3)/200;break;case 4:J=(J>>3)/2e3;break;case 5:J=(J>>3)/2e4;break;case 6:J=(J>>3)/16;break;case 7:J=(J>>3)/64;break}return z[1].v=J,z}function B(P,U){var z=j(P),J=P.read_shift(4),te=P.read_shift(4),se=P.read_shift(2);if(se==65535)return J===0&&te===3221225472?(z[1].t="e",z[1].v=15):J===0&&te===3489660928?(z[1].t="e",z[1].v=42):z[1].v=0,z;var ie=se&32768;return se=(se&32767)-16446,z[1].v=(1-ie*2)*(te*Math.pow(2,se+32)+J*Math.pow(2,se)),z}function M(P,U,z,J){var te=Nt(14);if(te.write_shift(2,P),te.write_shift(1,z),te.write_shift(1,U),J==0)return te.write_shift(4,0),te.write_shift(4,0),te.write_shift(2,65535),te;var se=0,ie=0,ce=0,de=0;return J<0&&(se=1,J=-J),ie=Math.log2(J)|0,J/=Math.pow(2,ie-31),de=J>>>0,(de&2147483648)==0&&(J/=2,++ie,de=J>>>0),J-=de,de|=2147483648,de>>>=0,J*=Math.pow(2,32),ce=J>>>0,te.write_shift(4,ce),te.write_shift(4,de),ie+=16383+(se?32768:0),te.write_shift(2,ie),te}function R(P,U){var z=B(P);return P.l+=U-14,z}function k(P,U){var z=j(P),J=P.read_shift(4);return z[1].v=J>>6,z}function D(P,U){var z=j(P),J=P.read_shift(8,"f");return z[1].v=J,z}function L(P,U){var z=D(P);return P.l+=U-10,z}function Z(P,U){return P[P.l+U-1]==0?P.read_shift(U,"cstr"):""}function V(P,U){var z=P[P.l++];z>U-1&&(z=U-1);for(var J="";J.length<z;)J+=String.fromCharCode(P[P.l++]);return J}function q(P,U,z){if(!(!z.qpro||U<21)){var J=P.read_shift(1);P.l+=17,P.l+=1,P.l+=2;var te=P.read_shift(U-21,"cstr");return[J,te]}}function G(P,U){for(var z={},J=P.l+U;P.l<J;){var te=P.read_shift(2);if(te==14e3){for(z[te]=[0,""],z[te][0]=P.read_shift(2);P[P.l];)z[te][1]+=String.fromCharCode(P[P.l]),P.l++;P.l++}}return z}function K(P,U){var z=Nt(5+P.length);z.write_shift(2,14e3),z.write_shift(2,U);for(var J=0;J<P.length;++J){var te=P.charCodeAt(J);z[z.l++]=te>127?95:te}return z[z.l++]=0,z}var ee={0:{n:"BOF",f:hi},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Z},222:{n:"SHEETNAMELP",f:V},65535:{n:""}},W={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:I},23:{n:"NUMBER17",f:B},24:{n:"NUMBER18",f:S},25:{n:"FORMULA19",f:R},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:G},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:k},38:{n:"??"},39:{n:"NUMBER27",f:D},40:{n:"FORMULA28",f:L},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Z},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:q},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}();function cSe(e){var t={},r=e.match(ul),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=qr(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=dR[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}var uSe=function(){var e=t2("t"),t=t2("rPr");function r(s){var o=s.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:Qn(o[1])},c=s.match(t);return c&&(l.s=cSe(c[1])),l}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(a).map(r).filter(function(l){return l.v})}}(),dSe=function(){var t=/(\r\n|\n)/g;function r(a,s,o){var l=[];a.u&&l.push("text-decoration: underline;"),a.uval&&l.push("text-underline-style:"+a.uval+";"),a.sz&&l.push("font-size:"+a.sz+"pt;"),a.outline&&l.push("text-effect: outline;"),a.shadow&&l.push("text-shadow: auto;"),s.push('<span style="'+l.join("")+'">'),a.b&&(s.push("<b>"),o.push("</b>")),a.i&&(s.push("<i>"),o.push("</i>")),a.strike&&(s.push("<s>"),o.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),fSe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,ASe=/<(?:\w+:)?r>/,hSe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function DR(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Qn(Ea(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ea(e),r&&(n.h=yR(n.t))):e.match(ASe)&&(n.r=Ea(e),n.t=Qn(Ea((e.replace(hSe,"").match(fSe)||[]).join("").replace(ul,""))),r&&(n.h=dSe(uSe(n.r)))),n):{t:""}}var mSe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,pSe=/<(?:\w+:)?(?:si|sstItem)>/g,gSe=/<\/(?:\w+:)?(?:si|sstItem)>/;function xSe(e,t){var r=[],n="";if(!e)return r;var a=e.match(mSe);if(a){n=a[2].replace(pSe,"").split(gSe);for(var s=0;s!=n.length;++s){var o=DR(n[s].trim(),t);o!=null&&(r[r.length]=o)}a=qr(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var vSe=/^\s|\s$|[\t\n\r]/;function Tre(e,t){if(!t.bookSST)return"";var r=[ri];r[r.length]=Kt("sst",null,{xmlns:Vg[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(vSe)&&(s+=' xml:space="preserve"'),s+=">"+pa(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function bSe(e){return[e.read_shift(4),e.read_shift(4)]}function ySe(e,t){var r=[],n=!1;return Uh(e,function(s,o,l){switch(l){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function wSe(e,t){return t||(t=Nt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var ESe=FCe;function NSe(e){var t=oc();Rt(t,159,wSe(e));for(var r=0;r<e.length;++r)Rt(t,19,ESe(e[r]));return Rt(t,160),t.end()}function Ire(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function Ah(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function CSe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Ah(e,4),t.U=Ah(e,4),t.W=Ah(e,4),t}function _Se(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function SSe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(_Se(e));return t}function kSe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function jSe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Ah(e,4),t.U=Ah(e,4),t.W=Ah(e,4),t}function BSe(e){var t=jSe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function Fre(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function Ore(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function TSe(e){var t=Ah(e);switch(t.Minor){case 2:return[t.Minor,ISe(e)];case 3:return[t.Minor,FSe()];case 4:return[t.Minor,OSe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function ISe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=Fre(e,r),a=Ore(e,e.length-e.l);return{t:"Std",h:n,v:a}}function FSe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function OSe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(ul,function(s){var o=qr(s);switch(cA(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function DSe(e,t){var r={},n=r.EncryptionVersionInfo=Ah(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=Fre(e,a),t-=a,r.EncryptionVerifier=Ore(e,t),r}function PSe(e){var t={},r=t.EncryptionVersionInfo=Ah(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function PR(e){var t=0,r,n=Ire(e),a=n.length+1,s,o,l,c,u;for(r=Sm(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)o=r[s],l=(t&16384)===0?0:1,c=t<<1&32767,u=l|c,t=u^o;return t^52811}var Dre=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},a=function(o,l){return n(o^l)},s=function(o){for(var l=t[o.length-1],c=104,u=o.length-1;u>=0;--u)for(var d=o[u],f=0;f!=7;++f)d&64&&(l^=r[c]),d*=2,--c;return l};return function(o){for(var l=Ire(o),c=s(l),u=l.length,d=Sm(16),f=0;f!=16;++f)d[f]=0;var h,m,g;for((u&1)===1&&(h=c>>8,d[u]=a(e[0],h),--u,h=c&255,m=l[l.length-1],d[u]=a(m,h));u>0;)--u,h=c>>8,d[u]=a(l[u],h),--u,h=c&255,d[u]=a(l[u],h);for(u=15,g=15-l.length;g>0;)h=c>>8,d[u]=a(e[g],h),--u,--g,h=c&255,d[u]=a(l[u],h),--u,--g;return d}}(),RSe=function(e,t,r,n,a){a||(a=t),n||(n=Dre(e));var s,o;for(s=0;s!=t.length;++s)o=t[s],o^=n[r],o=(o>>5|o<<3)&255,a[s]=o,++r;return[a,r,n]},LSe=function(e){var t=0,r=Dre(e);return function(n){var a=RSe("",n,t,r);return t=a[1],a[0]}};function MSe(e,t,r,n){var a={key:hi(e),verificationBytes:hi(e)};return r.password&&(a.verifier=PR(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=LSe(r.password)),a}function USe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=PSe(e):n.Data=DSe(e,t),n}function QSe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?USe(e,t-2,n):MSe(e,r.biff>=8?t:t-2,r,n),n}var Pre=function(){function e(a,s){switch(s.type){case"base64":return t(Wc(a),s);case"binary":return t(a,s);case"buffer":return t(vn&&Buffer.isBuffer(a)?a.toString("binary"):zm(a),s);case"array":return t(yg(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){var o=s||{},l=o.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var h=/\\\w+\b/g,m=0,g,x=-1;g=h.exec(d);){switch(g[0]){case"\\cell":var v=d.slice(m,h.lastIndex-g[0].length);if(v[0]==" "&&(v=v.slice(1)),++x,v.length){var y={v,t:"s"};Array.isArray(l)?l[f][x]=y:l[Hr({r:f,c:x})]=y}break}m=h.lastIndex}x>u.e.c&&(u.e.c=x)}),l["!ref"]=nn(u),l}function r(a,s){return $m(e(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],o=Hn(a["!ref"]),l,c=Array.isArray(a),u=o.s.r;u<=o.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var f=Hr({r:u,c:d});l=c?(a[u]||[])[d]:a[f],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(Ch(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function HSe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function s2(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function VSe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),s=Math.min(t,r,n),o=a-s;if(o===0)return[0,0,t];var l=0,c=0,u=a+s;switch(c=o/(u>1?2-u:u),a){case t:l=((r-n)/o+6)%6;break;case r:l=(n-t)/o+2;break;case n:l=(t-r)/o+4;break}return[l/6,c,u/2]}function zSe(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),s=n-a/2,o=[s,s,s],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=a*l,o[0]+=a,o[1]+=c;break;case 1:c=a*(2-l),o[0]+=c,o[1]+=a;break;case 2:c=a*(l-2),o[1]+=a,o[2]+=c;break;case 3:c=a*(4-l),o[1]+=c,o[2]+=a;break;case 4:c=a*(l-4),o[2]+=a,o[0]+=c;break;case 5:c=a*(6-l),o[2]+=c,o[0]+=a;break}for(var u=0;u!=3;++u)o[u]=Math.round(o[u]*255);return o}function H_(e,t){if(t===0)return e;var r=VSe(HSe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),s2(zSe(r))}var Rre=6,$Se=15,GSe=1,Jo=Rre;function i2(e){return Math.floor((e+Math.round(128/Jo)/256)*Jo)}function o2(e){return Math.floor((e-5)/Jo*100+.5)/100}function V_(e){return Math.round((e*Jo+5)/Jo*256)/256}function xB(e){return V_(o2(i2(e)))}function RR(e){var t=Math.abs(e-xB(e)),r=Jo;if(t>.005)for(Jo=GSe;Jo<$Se;++Jo)Math.abs(e-xB(e))<=t&&(t=Math.abs(e-xB(e)),r=Jo);Jo=r}function km(e){e.width?(e.wpx=i2(e.width),e.wch=o2(e.wpx),e.MDW=Jo):e.wpx?(e.wch=o2(e.wpx),e.width=V_(e.wch),e.MDW=Jo):typeof e.wch=="number"&&(e.width=V_(e.wch),e.wpx=i2(e.width),e.MDW=Jo),e.customWidth&&delete e.customWidth}var qSe=96,Lre=qSe;function l2(e){return e*96/Lre}function db(e){return e*Lre/96}var KSe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function WSe(e,t,r,n){t.Borders=[];var a={},s=!1;(e[0].match(ul)||[]).forEach(function(o){var l=qr(o);switch(cA(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},l.diagonalUp&&(a.diagonalUp=Ua(l.diagonalUp)),l.diagonalDown&&(a.diagonalDown=Ua(l.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in borders")}})}function XSe(e,t,r,n){t.Fills=[];var a={},s=!1;(e[0].match(ul)||[]).forEach(function(o){var l=qr(o);switch(cA(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":l.patternType&&(a.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),l.indexed&&(a.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(a.bgColor.theme=parseInt(l.theme,10)),l.tint&&(a.bgColor.tint=parseFloat(l.tint)),l.rgb&&(a.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),l.theme&&(a.fgColor.theme=parseInt(l.theme,10)),l.tint&&(a.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(a.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fills")}})}function YSe(e,t,r,n){t.Fonts=[];var a={},s=!1;(e[0].match(ul)||[]).forEach(function(o){var l=qr(o);switch(cA(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":l.val&&(a.name=Ea(l.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=l.val?Ua(l.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=l.val?Ua(l.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(l.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=l.val?Ua(l.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=l.val?Ua(l.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=l.val?Ua(l.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=l.val?Ua(l.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=l.val?Ua(l.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":l.val&&(a.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(a.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(a.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(a.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=dR[parseInt(l.val,10)];break;case"<color":if(a.color||(a.color={}),l.auto&&(a.color.auto=Ua(l.auto)),l.rgb)a.color.rgb=l.rgb.slice(-6);else if(l.indexed){a.color.index=parseInt(l.indexed,10);var c=Zp[a.color.index];a.color.index==81&&(c=Zp[1]),c||(c=Zp[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(a.color.theme=parseInt(l.theme,10),l.tint&&(a.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=H_(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fonts")}})}function JSe(e,t,r){t.NumberFmt=[];for(var n=Ds(Mr),a=0;a<n.length;++a)t.NumberFmt[n[a]]=Mr[n[a]];var s=e[0].match(ul);if(s)for(a=0;a<s.length;++a){var o=qr(s[a]);switch(cA(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Qn(Ea(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}fh(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function ZSe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Kt("numFmt",null,{numFmtId:n,formatCode:pa(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Kt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var tC=["numFmtId","fillId","fontId","borderId","xfId"],rC=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function eke(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(ul)||[]).forEach(function(s){var o=qr(s),l=0;switch(cA(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<tC.length;++l)n[tC[l]]&&(n[tC[l]]=parseInt(n[tC[l]],10));for(l=0;l<rC.length;++l)n[rC[l]]&&(n[rC[l]]=Ua(n[rC[l]]));if(t.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[l]){n.numFmtId=l;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=Ua(o.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function tke(e){var t=[];return t[t.length]=Kt("cellXfs",null),e.forEach(function(r){t[t.length]=Kt("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Kt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var rke=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(t))&&JSe(f,d,u),(f=l.match(a))&&YSe(f,d,c,u),(f=l.match(n))&&XSe(f,d,c,u),(f=l.match(s))&&WSe(f,d,c,u),(f=l.match(r))&&eke(f,d,u),d}}();function Mre(e,t){var r=[ri,Kt("styleSheet",null,{xmlns:Vg[0],"xmlns:vt":Bi.vt})],n;return e.SSF&&(n=ZSe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=tke(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function nke(e,t){var r=e.read_shift(2),n=sl(e);return[r,n]}function ake(e,t,r){r||(r=Nt(6+4*t.length)),r.write_shift(2,e),eo(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function ske(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=UCe(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=e.read_shift(2);switch(s===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(n.underline=o);var l=e.read_shift(1);l>0&&(n.family=l);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=MCe(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=sl(e),n}function ike(e,t){t||(t=Nt(153)),t.write_shift(2,e.sz*20),QCe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),M_(e.color,t);var n=0;return n=2,t.write_shift(1,n),eo(e.name,t),t.length>t.l?t.slice(0,t.l):t}var oke=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],vB,lke=ll;function pV(e,t){t||(t=Nt(84)),vB||(vB=Yk(oke));var r=vB[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(M_({auto:1},t),M_({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function cke(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function Ure(e,t,r){r||(r=Nt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function cy(e,t){return t||(t=Nt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var uke=ll;function dke(e,t){return t||(t=Nt(51)),t.write_shift(1,0),cy(null,t),cy(null,t),cy(null,t),cy(null,t),cy(null,t),t.length>t.l?t.slice(0,t.l):t}function fke(e,t){return t||(t=Nt(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),L_(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function Ake(e,t,r){var n=Nt(2052);return n.write_shift(4,e),L_(t,n),L_(r,n),n.length>n.l?n.slice(0,n.l):n}function hke(e,t,r){var n={};n.NumberFmt=[];for(var a in Mr)n.NumberFmt[a]=Mr[a];n.CellXf=[],n.Fonts=[];var s=[],o=!1;return Uh(e,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],fh(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=H_(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:s.push(d),o=!0;break;case 38:s.pop(),o=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!o||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function mke(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(Rt(e,615,Qd(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Rt(e,44,ake(a,t[a]))}),Rt(e,616))}}function pke(e){var t=1;Rt(e,611,Qd(t)),Rt(e,43,ike({sz:12,color:{theme:1},name:"Calibri",family:2})),Rt(e,612)}function gke(e){var t=2;Rt(e,603,Qd(t)),Rt(e,45,pV({patternType:"none"})),Rt(e,45,pV({patternType:"gray125"})),Rt(e,604)}function xke(e){var t=1;Rt(e,613,Qd(t)),Rt(e,46,dke()),Rt(e,614)}function vke(e){var t=1;Rt(e,626,Qd(t)),Rt(e,47,Ure({numFmtId:0},65535)),Rt(e,627)}function bke(e,t){Rt(e,617,Qd(t.length)),t.forEach(function(r){Rt(e,47,Ure(r,0))}),Rt(e,618)}function yke(e){var t=1;Rt(e,619,Qd(t)),Rt(e,48,fke({xfId:0,name:"Normal"})),Rt(e,620)}function wke(e){var t=0;Rt(e,505,Qd(t)),Rt(e,506)}function Eke(e){var t=0;Rt(e,508,Ake(t,"TableStyleMedium9","PivotStyleMedium4")),Rt(e,509)}function Nke(e,t){var r=oc();return Rt(r,278),mke(r,e.SSF),pke(r),gke(r),xke(r),vke(r),bke(r,t.cellXfs),yke(r),wke(r),Eke(r),Rt(r,279),r.end()}var Cke=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function _ke(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(ul)||[]).forEach(function(a){var s=qr(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[Cke.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function Ske(){}function kke(){}var jke=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Bke=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Tke=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Ike(e,t,r){t.themeElements={};var n;[["clrScheme",jke,_ke],["fontScheme",Bke,Ske],["fmtScheme",Tke,kke]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var Fke=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Qre(e,t){(!e||e.length===0)&&(e=LR());var r,n={};if(!(r=e.match(Fke)))throw new Error("themeElements not found in theme");return Ike(r[0],n,t),n.raw=e,n}function LR(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[ri];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Oke(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var s=e.slice(e.l);e.l=n;var o;try{o=Fte(s,{type:"array"})}catch{return}var l=Qc(o,"theme/theme/theme1.xml",!0);if(l)return Qre(l,r)}}function Dke(e){return e.read_shift(4)}function Pke(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Rke(e,4);break;case 2:t.xclrValue=bre(e);break;case 3:t.xclrValue=Dke(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Rke(e,t){return ll(e,t)}function Lke(e,t){return ll(e,t)}function Mke(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=Pke(e);break;case 6:n[1]=Lke(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function Uke(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),s=[];a-- >0;)s.push(Mke(e,r-e.l));return{ixfe:n,ext:s}}function Qke(e,t){t.forEach(function(r){r[0]})}function Hke(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:sl(e)}}function Vke(e){var t=Nt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),eo(e.name,t),t.slice(0,t.l)}function zke(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function $ke(e){var t=Nt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function Gke(e,t){var r=Nt(8+2*t.length);return r.write_shift(4,e),eo(t,r),r.slice(0,r.l)}function qke(e){return e.l+=4,e.read_shift(4)!=0}function Kke(e,t){var r=Nt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function Wke(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],o=!1,l=2;return Uh(e,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):l==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:s.push(d),o=!0;break;case 36:s.pop(),o=!1;break;default:if(!u.T){if(!o||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function Xke(){var e=oc();return Rt(e,332),Rt(e,334,Qd(1)),Rt(e,335,Vke({name:"XLDAPR",version:12e4,flags:3496657072})),Rt(e,336),Rt(e,339,Gke(1,"XLDAPR")),Rt(e,52),Rt(e,35,Qd(514)),Rt(e,4096,Qd(0)),Rt(e,4097,Pu(1)),Rt(e,36),Rt(e,53),Rt(e,340),Rt(e,337,Kke(1)),Rt(e,51,$ke([[1,0]])),Rt(e,338),Rt(e,333),e.end()}function Yke(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,s=2,o;return e.replace(ul,function(l){var c=qr(l);switch(cA(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(o=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function Hre(){var e=[ri];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function Jke(e){var t=[];if(!e)return t;var r=1;return(e.match(ul)||[]).forEach(function(n){var a=qr(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function Zke(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Hr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function e4e(e,t,r){var n=[];return Uh(e,function(s,o,l){switch(l){case 63:n.push(s);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function t4e(e,t,r,n){if(!e)return e;var a=n||{},s=!1;Uh(e,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function r4e(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var pv=1024;function Vre(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Kt("xml",null,{"xmlns:v":Pc.v,"xmlns:o":Pc.o,"xmlns:x":Pc.x,"xmlns:mv":Pc.mv}).replace(/\/>/,">"),Kt("o:shapelayout",Kt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Kt("v:shapetype",[Kt("v:stroke",null,{joinstyle:"miter"}),Kt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];pv<e*1e3;)pv+=1e3;return t.forEach(function(s){var o=us(s[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?Kt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Kt("v:fill",c,l),d={on:"t",obscured:"t"};++pv,a=a.concat(["<v:shape"+r2({id:"_x0000_s"+pv,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Kt("v:shadow",null,d),Kt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",wo("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),wo("x:AutoFill","False"),wo("x:Row",String(o.r)),wo("x:Column",String(o.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function gV(e,t,r,n){var a=Array.isArray(e),s;t.forEach(function(o){var l=us(o.ref);if(a?(e[l.r]||(e[l.r]=[]),s=e[l.r][l.c]):s=e[o.ref],!s){s={t:"z"},a?e[l.r][l.c]=s:e[o.ref]=s;var c=Hn(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=nn(c);u!==e["!ref"]&&(e["!ref"]=u)}s.c||(s.c=[]);var d={a:o.author,t:o.t,r:o.r,T:r};o.h&&(d.h=o.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function n4e(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=qr(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=us(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&DR(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function zre(e){var t=[ri,Kt("comments",null,{xmlns:Vg[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var s=pa(a.a);r.indexOf(s)==-1&&(r.push(s),t.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(pa(c.a))),s.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)t.push(wo("t",pa(s[0]||"")));else{for(var o=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)o+=`Reply:
    `+s[l]+`
`;t.push(wo("t",pa(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function a4e(e,t){var r=[],n=!1,a={},s=0;return e.replace(ul,function(l,c){var u=qr(l);switch(cA(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+l.length;break;case"</text>":a.t=e.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function s4e(e,t,r){var n=[ri,Kt("ThreadedComments",null,{xmlns:Bi.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var s="";(a[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?s=c.id:c.parentId=s,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),n.push(Kt("threadedComment",wo("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function i4e(e,t){var r=[],n=!1;return e.replace(ul,function(s){var o=qr(s);switch(cA(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return s}),r}function o4e(e){var t=[ri,Kt("personList",null,{xmlns:Bi.TCMNT,"xmlns:x":Vg[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Kt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function l4e(e){var t={};t.iauthor=e.read_shift(4);var r=qg(e);return t.rfx=r.s,t.ref=Hr(r.s),e.l+=16,t}function c4e(e,t){return t==null&&(t=Nt(36)),t.write_shift(4,e[1].iauthor),t1(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var u4e=sl;function d4e(e){return eo(e.slice(0,54))}function f4e(e,t){var r=[],n=[],a={},s=!1;return Uh(e,function(l,c,u){switch(u){case 632:n.push(l);break;case 635:a=l;break;case 637:a.t=l.t,a.h=l.h,a.r=l.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function A4e(e){var t=oc(),r=[];return Rt(t,628),Rt(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Rt(t,632,d4e(a.a)))})}),Rt(t,631),Rt(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:us(n[0]),e:us(n[0])};Rt(t,635,c4e([s,a])),a.t&&a.t.length>0&&Rt(t,637,DCe(a)),Rt(t,636),delete a.iauthor})}),Rt(t,634),Rt(t,629),t.end()}var h4e="application/vnd.ms-office.vbaProject";function m4e(e){var t=Sr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Sr.utils.cfb_add(t,a,e.FileIndex[n].content)}}),Sr.write(t)}function p4e(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Sr.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var $re=["xlsb","xlsm","xlam","biff8","xla"];function g4e(){return{"!type":"dialog"}}function x4e(){return{"!type":"dialog"}}function v4e(){return{"!type":"macro"}}function b4e(){return{"!type":"macro"}}var Rv=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,s,o){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=t.c:--d,c?u+=t.r:--u,a+(l?"":"$")+cs(d)+(c?"":"$")+ei(u)}return function(a,s){return t=s,a.replace(e,r)}}(),MR=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,UR=function(){return function(t,r){return t.replace(MR,function(n,a,s,o,l,c){var u=_R(o)-(s?0:r.c),d=CR(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",h=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+h})}}();function Gre(e,t){return e.replace(MR,function(r,n,a,s,o,l){return n+(a=="$"?a+s:cs(_R(s)+t.c))+(o=="$"?o+l:ei(CR(l)+t.r))})}function y4e(e,t,r){var n=cc(t),a=n.s,s=us(r),o={r:s.r-a.r,c:s.c-a.c};return Gre(e,o)}function w4e(e){return e.length!=1}function xV(e){return e.replace(/_xlfn\./g,"")}function ui(e){e.l+=1}function jm(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function qre(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Kre(e);r.biff==12&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),o=jm(e),l=jm(e);return{s:{r:a,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function Kre(e){var t=jm(e),r=jm(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function E4e(e,t,r){if(r.biff<8)return Kre(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),s=jm(e),o=jm(e);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function Wre(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return N4e(e);var n=e.read_shift(r&&r.biff==12?4:2),a=jm(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function N4e(e){var t=jm(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function C4e(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function _4e(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return S4e(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),o=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;a>524287;)a-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:o,rRel:l}}function S4e(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function k4e(e,t,r){var n=(e[e.l++]&96)>>5,a=qre(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function j4e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var o=qre(e,s,r);return[n,a,o]}function B4e(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function T4e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[n,a]}function I4e(e,t,r){var n=(e[e.l++]&96)>>5,a=E4e(e,t-1,r);return[n,a]}function F4e(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function vV(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function O4e(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function D4e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function P4e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function R4e(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function L4e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function Xre(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function M4e(e){return e.read_shift(2),Xre(e)}function U4e(e){return e.read_shift(2),Xre(e)}function Q4e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=Wre(e,0,r);return[n,a]}function H4e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=_4e(e,0,r);return[n,a]}function V4e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=Wre(e,0,r);return[n,a,s]}function z4e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[qje[a],Zre[a],n]}function $4e(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:G4e(e);return[a,(s[0]===0?Zre:Gje)[s[1]]]}function G4e(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function q4e(e,t,r){e.l+=r&&r.biff==2?3:4}function K4e(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function W4e(e){return e.l++,Qh[e.read_shift(1)]}function X4e(e){return e.l++,e.read_shift(2)}function Y4e(e){return e.l++,e.read_shift(1)!==0}function J4e(e){return e.l++,tl(e)}function Z4e(e,t,r){return e.l++,rE(e,t-1,r)}function eje(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Gs(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Qh[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=tl(e);break;case 2:r[1]=Kg(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function tje(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?qg:e4)(e));return a}function rje(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,o=[];s!=n&&(o[s]=[]);++s)for(var l=0;l!=a;++l)o[s][l]=eje(e,r.biff);return o}function nje(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,s]}function aje(e,t,r){if(r.biff==5)return sje(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),s=e.read_shift(4);return[n,a,s]}function sje(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function ije(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function oje(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function lje(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function cje(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[n,a]}var uje=ll,dje=ll,fje=ll;function aE(e,t,r){return e.l+=2,[C4e(e)]}function QR(e){return e.l+=6,[]}var Aje=aE,hje=QR,mje=QR,pje=aE;function Yre(e){return e.l+=2,[hi(e),e.read_shift(2)&1]}var gje=aE,xje=Yre,vje=QR,bje=aE,yje=aE,wje=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Eje(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2),o=wje[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:n,c:a,C:s}}function Nje(e){return e.l+=2,[e.read_shift(4)]}function Cje(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function _je(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Sje(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function kje(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function jje(e){return e.l+=4,[0,0]}var bV={1:{n:"PtgExp",f:K4e},2:{n:"PtgTbl",f:fje},3:{n:"PtgAdd",f:ui},4:{n:"PtgSub",f:ui},5:{n:"PtgMul",f:ui},6:{n:"PtgDiv",f:ui},7:{n:"PtgPower",f:ui},8:{n:"PtgConcat",f:ui},9:{n:"PtgLt",f:ui},10:{n:"PtgLe",f:ui},11:{n:"PtgEq",f:ui},12:{n:"PtgGe",f:ui},13:{n:"PtgGt",f:ui},14:{n:"PtgNe",f:ui},15:{n:"PtgIsect",f:ui},16:{n:"PtgUnion",f:ui},17:{n:"PtgRange",f:ui},18:{n:"PtgUplus",f:ui},19:{n:"PtgUminus",f:ui},20:{n:"PtgPercent",f:ui},21:{n:"PtgParen",f:ui},22:{n:"PtgMissArg",f:ui},23:{n:"PtgStr",f:Z4e},26:{n:"PtgSheet",f:Cje},27:{n:"PtgEndSheet",f:_je},28:{n:"PtgErr",f:W4e},29:{n:"PtgBool",f:Y4e},30:{n:"PtgInt",f:X4e},31:{n:"PtgNum",f:J4e},32:{n:"PtgArray",f:F4e},33:{n:"PtgFunc",f:z4e},34:{n:"PtgFuncVar",f:$4e},35:{n:"PtgName",f:nje},36:{n:"PtgRef",f:Q4e},37:{n:"PtgArea",f:k4e},38:{n:"PtgMemArea",f:ije},39:{n:"PtgMemErr",f:uje},40:{n:"PtgMemNoMem",f:dje},41:{n:"PtgMemFunc",f:oje},42:{n:"PtgRefErr",f:lje},43:{n:"PtgAreaErr",f:B4e},44:{n:"PtgRefN",f:H4e},45:{n:"PtgAreaN",f:I4e},46:{n:"PtgMemAreaN",f:Sje},47:{n:"PtgMemNoMemN",f:kje},57:{n:"PtgNameX",f:aje},58:{n:"PtgRef3d",f:V4e},59:{n:"PtgArea3d",f:j4e},60:{n:"PtgRefErr3d",f:cje},61:{n:"PtgAreaErr3d",f:T4e},255:{}},Bje={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Tje={1:{n:"PtgElfLel",f:Yre},2:{n:"PtgElfRw",f:bje},3:{n:"PtgElfCol",f:Aje},6:{n:"PtgElfRwV",f:yje},7:{n:"PtgElfColV",f:pje},10:{n:"PtgElfRadical",f:gje},11:{n:"PtgElfRadicalS",f:vje},13:{n:"PtgElfColS",f:hje},15:{n:"PtgElfColSV",f:mje},16:{n:"PtgElfRadicalLel",f:xje},25:{n:"PtgList",f:Eje},29:{n:"PtgSxName",f:Nje},255:{}},Ije={0:{n:"PtgAttrNoop",f:jje},1:{n:"PtgAttrSemi",f:L4e},2:{n:"PtgAttrIf",f:P4e},4:{n:"PtgAttrChoose",f:O4e},8:{n:"PtgAttrGoto",f:D4e},16:{n:"PtgAttrSum",f:q4e},32:{n:"PtgAttrBaxcel",f:vV},33:{n:"PtgAttrBaxcel",f:vV},64:{n:"PtgAttrSpace",f:M4e},65:{n:"PtgAttrSpaceSemi",f:U4e},128:{n:"PtgAttrIfError",f:R4e},255:{}};function sE(e,t,r,n){if(n.biff<8)return ll(e,t);for(var a=e.l+t,s=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=rje(e,0,n),s.push(r[o][1]);break;case"PtgMemArea":r[o][2]=tje(e,r[o][1],n),s.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=e.read_shift(4),s.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=a-e.l,t!==0&&s.push(ll(e,t)),s}function iE(e,t,r){for(var n=e.l+t,a,s,o=[];n!=e.l;)t=n-e.l,s=e[e.l],a=bV[s]||bV[Bje[s]],(s===24||s===25)&&(a=(s===24?Tje:Ije)[e[e.l+1]]),!a||!a.f?ll(e,t):o.push([a.n,a.f(e,t,r)]);return o}function Fje(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var o=n[s];if(o)switch(o[0]){case 2:a.push('"'+o[1].replace(/"/g,'""')+'"');break;default:a.push(o[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var Oje={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Dje(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function Jre(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function yV(e,t,r){var n=Jre(e,t,r);return n=="#REF"?n:Dje(n,r)}function Wo(e,t,r,n,a){var s=a&&a.biff||8,o={s:{c:0,r:0}},l=[],c,u,d,f=0,h=0,m,g="";if(!e[0]||!e[0][0])return"";for(var x=-1,v="",y=0,w=e[0].length;y<w;++y){var _=e[0][y];switch(_[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),x>=0){switch(e[0][x][1][0]){case 0:v=ks(" ",e[0][x][1][1]);break;case 1:v=ks("\r",e[0][x][1][1]);break;default:if(v="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}u=u+v,x=-1}l.push(u+Oje[_[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=gw(_[1][1],o,a),l.push(xw(d,s));break;case"PtgRefN":d=r?gw(_[1][1],r,a):_[1][1],l.push(xw(d,s));break;case"PtgRef3d":f=_[1][1],d=gw(_[1][2],o,a),g=yV(n,f,a),l.push(g+"!"+xw(d,s));break;case"PtgFunc":case"PtgFuncVar":var T=_[1][0],j=_[1][1];T||(T=0),T&=127;var I=T==0?[]:l.slice(-T);l.length-=T,j==="User"&&(j=I.shift()),l.push(j+"("+I.join(",")+")");break;case"PtgBool":l.push(_[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(_[1]);break;case"PtgNum":l.push(String(_[1]));break;case"PtgStr":l.push('"'+_[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(_[1]);break;case"PtgAreaN":m=XH(_[1][1],r?{s:r}:o,a),l.push(mB(m,a));break;case"PtgArea":m=XH(_[1][1],o,a),l.push(mB(m,a));break;case"PtgArea3d":f=_[1][1],m=_[1][2],g=yV(n,f,a),l.push(g+"!"+mB(m,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=_[1][2];var E=(n.names||[])[h-1]||(n[0]||[])[h],S=E?E.Name:"SH33TJSNAME"+String(h);S&&S.slice(0,6)=="_xlfn."&&!a.xlfn&&(S=S.slice(6)),l.push(S);break;case"PtgNameX":var B=_[1][1];h=_[1][2];var M;if(a.biff<=5)B<0&&(B=-B),n[B]&&(M=n[B][h]);else{var R="";if(((n[B]||[])[0]||[])[0]==14849||(((n[B]||[])[0]||[])[0]==1025?n[B][h]&&n[B][h].itab>0&&(R=n.SheetNames[n[B][h].itab-1]+"!"):R=n.SheetNames[h-1]+"!"),n[B]&&n[B][h])R+=n[B][h].Name;else if(n[0]&&n[0][h])R+=n[0][h].Name;else{var k=(Jre(n,B,a)||"").split(";;");k[h-1]?R=k[h-1]:R+="SH33TJSERRX"}l.push(R);break}M||(M={Name:"SH33TJSERRY"}),l.push(M.Name);break;case"PtgParen":var D="(",L=")";if(x>=0){switch(v="",e[0][x][1][0]){case 2:D=ks(" ",e[0][x][1][1])+D;break;case 3:D=ks("\r",e[0][x][1][1])+D;break;case 4:L=ks(" ",e[0][x][1][1])+L;break;case 5:L=ks("\r",e[0][x][1][1])+L;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}x=-1}l.push(D+l.pop()+L);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:_[1][1],r:_[1][0]};var Z={c:r.c,r:r.r};if(n.sharedf[Hr(d)]){var V=n.sharedf[Hr(d)];l.push(Wo(V,o,Z,n,a))}else{var q=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(Wo(u[1],o,Z,n,a)),q=!0;break}q||l.push(_[1])}break;case"PtgArray":l.push("{"+Fje(_[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+_[1].idx+"[#"+_[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(_));default:throw new Error("Unrecognized Formula Token: "+String(_))}var G=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&x>=0&&G.indexOf(e[0][y][0])==-1){_=e[0][x];var K=!0;switch(_[1][0]){case 4:K=!1;case 0:v=ks(" ",_[1][1]);break;case 5:K=!1;case 1:v=ks("\r",_[1][1]);break;default:if(v="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+_[1][0])}l.push((K?v:"")+l.pop()+(K?"":v)),x=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function Pje(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,o=e.read_shift(a);if(o==65535)return[[],ll(e,t-2)];var l=iE(e,o,r);return t!==o+a&&(s=sE(e,t-o-a,l,r)),e.l=n,[l,s]}function Rje(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,o=e.read_shift(a);if(o==65535)return[[],ll(e,t-2)];var l=iE(e,o,r);return t!==o+a&&(s=sE(e,t-o-a,l,r)),e.l=n,[l,s]}function Lje(e,t,r,n){var a=e.l+t,s=iE(e,n,r),o;return a!==e.l&&(o=sE(e,a-e.l,s,r)),[s,o]}function Mje(e,t,r){var n=e.l+t,a,s=e.read_shift(2),o=iE(e,s,r);return s==65535?[[],ll(e,t-2)]:(t!==s+2&&(a=sE(e,n-s-2,o,r)),[o,a])}function Uje(e){var t;if(rh(e,e.l+6)!==65535)return[tl(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function Qje(e){if(e==null){var t=Nt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return wg(e);return wg(0)}function bB(e,t,r){var n=e.l+t,a=uA(e);r.biff==2&&++e.l;var s=Uje(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=Rje(e,n-e.l,r);return{cell:a,val:s[0],formula:l,shared:o>>3&1,tt:s[1]}}function Hje(e,t,r,n,a){var s=Ng(t,r,a),o=Qje(e.v),l=Nt(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=Nt(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Zi([s,o,l,u]);return f}function t4(e,t,r){var n=e.read_shift(4),a=iE(e,n,r),s=e.read_shift(4),o=s>0?sE(e,s,a,r):null;return[a,o]}var Vje=t4,r4=t4,zje=t4,$je=t4,Gje={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Zre={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},qje={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function wV(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function Kje(e){var t="of:="+e.replace(MR,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function yB(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function Wje(e){return e.replace(/\./,"!")}var bw={},Lv={},yw=typeof Map<"u";function HR(e,t,r){var n=0,a=e.length;if(r){if(yw?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var s=yw?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(yw?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function n4(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(Jo=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=o2(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=V_(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function rg(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Gm(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,s=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){fh(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function ene(e,t,r,n,a,s){try{n.cellNF&&(e.z=Mr[t])}catch(l){if(n.WTF)throw l}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Ha(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Mr[t]==null&&fh(GNe[t]||"General",t),e.t==="e")e.w=e.w||Qh[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=e2(e.v);else if(e.t==="d"){var o=Fi(e.v);(o|0)===o?e.w=o.toString(10):e.w=e2(o)}else{if(e.v===void 0)return"";e.w=bg(e.v,Lv)}else e.t==="d"?e.w=Ku(t,Fi(e.v),Lv):e.w=Ku(t,e.v,Lv)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=H_(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=H_(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&s.Fills)throw l}}}function Xje(e,t,r){if(e&&e["!ref"]){var n=Hn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function Yje(e,t){var r=Hn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=nn(r))}var Jje=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Zje=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,e3e=/<(?:\w:)?hyperlink [^>]*>/mg,t3e=/"(\w*:\w*)"/,r3e=/<(?:\w:)?col\b[^>]*[\/]?>/g,n3e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,a3e=/<(?:\w:)?pageMargins[^>]*\/>/g,tne=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,s3e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,i3e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function o3e(e,t,r,n,a,s,o){if(!e)return e;n||(n={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(Zje);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match(tne);h?VR(h[0],l,a,r):(h=u.match(s3e))&&c3e(h[0],h[1]||"",l,a,r);var m=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var g=u.slice(m,m+50).match(t3e);g&&Yje(l,g[1])}var x=u.match(i3e);x&&x[1]&&w3e(x[1],a);var v=[];if(t.cellStyles){var y=u.match(r3e);y&&g3e(v,y)}f&&C3e(f[1],l,t,c,s,o);var w=d.match(n3e);w&&(l["!autofilter"]=v3e(w[0]));var _=[],T=d.match(Jje);if(T)for(m=0;m!=T.length;++m)_[m]=Hn(T[m].slice(T[m].indexOf('"')+1));var j=d.match(e3e);j&&h3e(l,j,n);var I=d.match(a3e);if(I&&(l["!margins"]=m3e(qr(I[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=nn(c)),t.sheetRows>0&&l["!ref"]){var E=Hn(l["!ref"]);t.sheetRows<=+E.e.r&&(E.e.r=t.sheetRows-1,E.e.r>c.e.r&&(E.e.r=c.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>c.e.c&&(E.e.c=c.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),l["!fullref"]=l["!ref"],l["!ref"]=nn(E))}return v.length>0&&(l["!cols"]=v),_.length>0&&(l["!merges"]=_),l}function l3e(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+nn(e[r])+'"/>';return t+"</mergeCells>"}function VR(e,t,r,n){var a=qr(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Qn(Ea(a.codeName)))}function c3e(e,t,r,n,a){VR(e.slice(0,e.indexOf(">")),r,n,a)}function u3e(e,t,r,n,a){var s=!1,o={},l=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,o.codeName=qf(pa(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),l=(l||"")+Kt("outlinePr",null,u)}!s&&!l||(a[a.length]=Kt("sheetPr",l,o))}var d3e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],f3e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function A3e(e){var t={sheet:1};return d3e.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),f3e.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=PR(e.password).toString(16).toUpperCase()),Kt("sheetProtection",null,t)}function h3e(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var s=qr(Ea(t[a]),!0);if(!s.ref)return;var o=((r||{})["!id"]||[])[s.id];o?(s.Target=o.Target,s.location&&(s.Target+="#"+Qn(s.location))):(s.Target="#"+Qn(s.location),o={Target:s.Target,TargetMode:"Internal"}),s.Rel=o,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var l=Hn(s.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var d=Hr({c:u,r:c});n?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function m3e(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function p3e(e){return rg(e),Kt("pageMargins",null,e)}function g3e(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=qr(t[n],!0);a.hidden&&(a.hidden=Ua(a.hidden));var s=parseInt(a.min,10)-1,o=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,RR(a.width)),km(a);s<=o;)e[s++]=Va(a)}}function x3e(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=Kt("col",null,n4(a,n)));return r[r.length]="</cols>",r.join("")}function v3e(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function b3e(e,t,r,n){var a=typeof e.ref=="string"?e.ref:nn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=cc(a);o.s.r==o.e.r&&(o.e.r=cc(t["!ref"]).e.r,a=nn(o));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Kt("autoFilter",null,{ref:a})}var y3e=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function w3e(e,t){t.Views||(t.Views=[{}]),(e.match(y3e)||[]).forEach(function(r,n){var a=qr(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),Ua(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function E3e(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Kt("sheetViews",Kt("sheetView",null,a),{})}function N3e(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",s=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=Qh[e.v];break;case"d":n&&n.cellDates?a=Ha(e.v,-1).toISOString():(e=Va(e),e.t="n",a=""+(e.v=Fi(Ha(e.v)))),typeof e.z>"u"&&(e.z=Mr[14]);break;default:a=e.v;break}var l=wo("v",pa(a)),c={r:t},u=Gm(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=wo("v",""+HR(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=s&&(e.t=s,e.v=o),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=Kt("f",pa(e.f),d)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),Kt("c",l,c)}var C3e=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=t2("v"),o=t2("f");return function(c,u,d,f,h,m){for(var g=0,x="",v=[],y=[],w=0,_=0,T=0,j="",I,E,S=0,B=0,M,R,k=0,D=0,L=Array.isArray(m.CellXf),Z,V=[],q=[],G=Array.isArray(u),K=[],ee={},W=!1,P=!!d.sheetStubs,U=c.split(t),z=0,J=U.length;z!=J;++z){x=U[z].trim();var te=x.length;if(te!==0){var se=0;e:for(g=0;g<te;++g)switch(x[g]){case">":if(x[g-1]!="/"){++g;break e}if(d&&d.cellStyles){if(E=qr(x.slice(se,g),!0),S=E.r!=null?parseInt(E.r,10):S+1,B=-1,d.sheetRows&&d.sheetRows<S)continue;ee={},W=!1,E.ht&&(W=!0,ee.hpt=parseFloat(E.ht),ee.hpx=db(ee.hpt)),E.hidden=="1"&&(W=!0,ee.hidden=!0),E.outlineLevel!=null&&(W=!0,ee.level=+E.outlineLevel),W&&(K[S-1]=ee)}break;case"<":se=g;break}if(se>=g)break;if(E=qr(x.slice(se,g),!0),S=E.r!=null?parseInt(E.r,10):S+1,B=-1,!(d.sheetRows&&d.sheetRows<S)){f.s.r>S-1&&(f.s.r=S-1),f.e.r<S-1&&(f.e.r=S-1),d&&d.cellStyles&&(ee={},W=!1,E.ht&&(W=!0,ee.hpt=parseFloat(E.ht),ee.hpx=db(ee.hpt)),E.hidden=="1"&&(W=!0,ee.hidden=!0),E.outlineLevel!=null&&(W=!0,ee.level=+E.outlineLevel),W&&(K[S-1]=ee)),v=x.slice(g).split(e);for(var ie=0;ie!=v.length&&v[ie].trim().charAt(0)=="<";++ie);for(v=v.slice(ie),g=0;g!=v.length;++g)if(x=v[g].trim(),x.length!==0){if(y=x.match(r),w=g,_=0,T=0,x="<c "+(x.slice(0,1)=="<"?">":"")+x,y!=null&&y.length===2){for(w=0,j=y[1],_=0;_!=j.length&&!((T=j.charCodeAt(_)-64)<1||T>26);++_)w=26*w+T;--w,B=w}else++B;for(_=0;_!=x.length&&x.charCodeAt(_)!==62;++_);if(++_,E=qr(x.slice(0,_),!0),E.r||(E.r=Hr({r:S-1,c:B})),j=x.slice(_),I={t:""},(y=j.match(s))!=null&&y[1]!==""&&(I.v=Qn(y[1])),d.cellFormula){if((y=j.match(o))!=null&&y[1]!==""){if(I.f=Qn(Ea(y[1])).replace(/\r\n/g,`
`),d.xlfn||(I.f=xV(I.f)),y[0].indexOf('t="array"')>-1)I.F=(j.match(a)||[])[1],I.F.indexOf(":")>-1&&V.push([Hn(I.F),I.F]);else if(y[0].indexOf('t="shared"')>-1){R=qr(y[0]);var ce=Qn(Ea(y[1]));d.xlfn||(ce=xV(ce)),q[parseInt(R.si,10)]=[R,ce,E.r]}}else(y=j.match(/<f[^>]*\/>/))&&(R=qr(y[0]),q[R.si]&&(I.f=y4e(q[R.si][1],q[R.si][2],E.r)));var de=us(E.r);for(_=0;_<V.length;++_)de.r>=V[_][0].s.r&&de.r<=V[_][0].e.r&&de.c>=V[_][0].s.c&&de.c<=V[_][0].e.c&&(I.F=V[_][1])}if(E.t==null&&I.v===void 0)if(I.f||I.F)I.v=0,I.t="n";else if(P)I.t="z";else continue;else I.t=E.t||"n";switch(f.s.c>B&&(f.s.c=B),f.e.c<B&&(f.e.c=B),I.t){case"n":if(I.v==""||I.v==null){if(!P)continue;I.t="z"}else I.v=parseFloat(I.v);break;case"s":if(typeof I.v>"u"){if(!P)continue;I.t="z"}else M=bw[parseInt(I.v,10)],I.v=M.t,I.r=M.r,d.cellHTML&&(I.h=M.h);break;case"str":I.t="s",I.v=I.v!=null?Ea(I.v):"",d.cellHTML&&(I.h=yR(I.v));break;case"inlineStr":y=j.match(n),I.t="s",y!=null&&(M=DR(y[1]))?(I.v=M.t,d.cellHTML&&(I.h=M.h)):I.v="";break;case"b":I.v=Ua(I.v);break;case"d":d.cellDates?I.v=Ha(I.v,1):(I.v=Fi(Ha(I.v,1)),I.t="n");break;case"e":(!d||d.cellText!==!1)&&(I.w=I.v),I.v=nre[I.v];break}if(k=D=0,Z=null,L&&E.s!==void 0&&(Z=m.CellXf[E.s],Z!=null&&(Z.numFmtId!=null&&(k=Z.numFmtId),d.cellStyles&&Z.fillId!=null&&(D=Z.fillId))),ene(I,k,D,d,h,m),d.cellDates&&L&&I.t=="n"&&Jb(Mr[k])&&(I.t="d",I.v=Zk(I.v)),E.cm&&d.xlmeta){var Be=(d.xlmeta.Cell||[])[+E.cm-1];Be&&Be.type=="XLDAPR"&&(I.D=!0)}if(G){var ae=us(E.r);u[ae.r]||(u[ae.r]=[]),u[ae.r][ae.c]=I}else u[E.r]=I}}}}K.length>0&&(u["!rows"]=K)}}();function _3e(e,t,r,n){var a=[],s=[],o=Hn(e["!ref"]),l="",c,u="",d=[],f=0,h=0,m=e["!rows"],g=Array.isArray(e),x={r:u},v,y=-1;for(h=o.s.c;h<=o.e.c;++h)d[h]=cs(h);for(f=o.s.r;f<=o.e.r;++f){for(s=[],u=ei(f),h=o.s.c;h<=o.e.c;++h){c=d[h]+u;var w=g?(e[f]||[])[h]:e[c];w!==void 0&&(l=N3e(w,c,e,t))!=null&&s.push(l)}(s.length>0||m&&m[f])&&(x={r:u},m&&m[f]&&(v=m[f],v.hidden&&(x.hidden=1),y=-1,v.hpx?y=l2(v.hpx):v.hpt&&(y=v.hpt),y>-1&&(x.ht=y,x.customHeight=1),v.level&&(x.outlineLevel=v.level)),a[a.length]=Kt("row",s.join(""),x))}if(m)for(;f<m.length;++f)m&&m[f]&&(x={r:f+1},v=m[f],v.hidden&&(x.hidden=1),y=-1,v.hpx?y=l2(v.hpx):v.hpt&&(y=v.hpt),y>-1&&(x.ht=y,x.customHeight=1),v.level&&(x.outlineLevel=v.level),a[a.length]=Kt("row","",x));return a.join("")}function rne(e,t,r,n){var a=[ri,Kt("worksheet",null,{xmlns:Vg[0],"xmlns:r":Bi.r})],s=r.SheetNames[e],o=0,l="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=Hn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=nn(d)}n||(n={}),c["!comments"]=[];var f=[];u3e(c,r,e,t,a),a[a.length]=Kt("dimension",null,{ref:u}),a[a.length]=E3e(c,t,e,r),t.sheetFormat&&(a[a.length]=Kt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=x3e(c,c["!cols"])),a[o=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=_3e(c,t),l.length>0&&(a[a.length]=l)),a.length>o+1&&(a[a.length]="</sheetData>",a[o]=a[o].replace("/>",">")),c["!protect"]&&(a[a.length]=A3e(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=b3e(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=l3e(c["!merges"]));var h=-1,m,g=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(x){x[1].Target&&(m={ref:x[0]},x[1].Target.charAt(0)!="#"&&(g=ha(n,-1,pa(x[1].Target).replace(/#.*$/,""),Cn.HLINK),m["r:id"]="rId"+g),(h=x[1].Target.indexOf("#"))>-1&&(m.location=pa(x[1].Target.slice(h+1))),x[1].Tooltip&&(m.tooltip=pa(x[1].Tooltip)),a[a.length]=Kt("hyperlink",null,m))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=p3e(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=wo("ignoredErrors",Kt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(g=ha(n,-1,"../drawings/drawing"+(e+1)+".xml",Cn.DRAW),a[a.length]=Kt("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=f),c["!comments"].length>0&&(g=ha(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Cn.VML),a[a.length]=Kt("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function S3e(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function k3e(e,t,r){var n=Nt(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=l2(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var o=0;a.level&&(o|=a.level),a.hidden&&(o|=16),(a.hpx||a.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,m=d<<10;m<d+1<<10;++m){u.c=m;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Hr(u)];g&&(f<0&&(f=m),h=m)}f<0||(++l,n.write_shift(4,f),n.write_shift(4,h))}var x=n.l;return n.l=c,n.write_shift(4,l),n.l=x,n.length>n.l?n.slice(0,n.l):n}function j3e(e,t,r,n){var a=k3e(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&Rt(e,0,a)}var B3e=qg,T3e=t1;function I3e(){}function F3e(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=PCe(e),r}function O3e(e,t,r){r==null&&(r=Nt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return M_({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Jte(e,r),r.slice(0,r.l)}function D3e(e){var t=Yu(e);return[t]}function P3e(e,t,r){return r==null&&(r=Nt(8)),zg(t,r)}function R3e(e){var t=$g(e);return[t]}function L3e(e,t,r){return r==null&&(r=Nt(4)),Gg(t,r)}function M3e(e){var t=Yu(e),r=e.read_shift(1);return[t,r,"b"]}function U3e(e,t,r){return r==null&&(r=Nt(9)),zg(t,r),r.write_shift(1,e.v?1:0),r}function Q3e(e){var t=$g(e),r=e.read_shift(1);return[t,r,"b"]}function H3e(e,t,r){return r==null&&(r=Nt(5)),Gg(t,r),r.write_shift(1,e.v?1:0),r}function V3e(e){var t=Yu(e),r=e.read_shift(1);return[t,r,"e"]}function z3e(e,t,r){return r==null&&(r=Nt(9)),zg(t,r),r.write_shift(1,e.v),r}function $3e(e){var t=$g(e),r=e.read_shift(1);return[t,r,"e"]}function G3e(e,t,r){return r==null&&(r=Nt(8)),Gg(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function q3e(e){var t=Yu(e),r=e.read_shift(4);return[t,r,"s"]}function K3e(e,t,r){return r==null&&(r=Nt(12)),zg(t,r),r.write_shift(4,t.v),r}function W3e(e){var t=$g(e),r=e.read_shift(4);return[t,r,"s"]}function X3e(e,t,r){return r==null&&(r=Nt(8)),Gg(t,r),r.write_shift(4,t.v),r}function Y3e(e){var t=Yu(e),r=tl(e);return[t,r,"n"]}function J3e(e,t,r){return r==null&&(r=Nt(16)),zg(t,r),wg(e.v,r),r}function nne(e){var t=$g(e),r=tl(e);return[t,r,"n"]}function Z3e(e,t,r){return r==null&&(r=Nt(12)),Gg(t,r),wg(e.v,r),r}function eBe(e){var t=Yu(e),r=BR(e);return[t,r,"n"]}function tBe(e,t,r){return r==null&&(r=Nt(12)),zg(t,r),Zte(e.v,r),r}function rBe(e){var t=$g(e),r=BR(e);return[t,r,"n"]}function nBe(e,t,r){return r==null&&(r=Nt(8)),Gg(t,r),Zte(e.v,r),r}function aBe(e){var t=Yu(e),r=SR(e);return[t,r,"is"]}function sBe(e){var t=Yu(e),r=sl(e);return[t,r,"str"]}function iBe(e,t,r){return r==null&&(r=Nt(12+4*e.v.length)),zg(t,r),eo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function oBe(e){var t=$g(e),r=sl(e);return[t,r,"str"]}function lBe(e,t,r){return r==null&&(r=Nt(8+4*e.v.length)),Gg(t,r),eo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function cBe(e,t,r){var n=e.l+t,a=Yu(e);a.r=r["!row"];var s=e.read_shift(1),o=[a,s,"b"];if(r.cellFormula){e.l+=2;var l=r4(e,n-e.l,r);o[3]=Wo(l,null,a,r.supbooks,r)}else e.l=n;return o}function uBe(e,t,r){var n=e.l+t,a=Yu(e);a.r=r["!row"];var s=e.read_shift(1),o=[a,s,"e"];if(r.cellFormula){e.l+=2;var l=r4(e,n-e.l,r);o[3]=Wo(l,null,a,r.supbooks,r)}else e.l=n;return o}function dBe(e,t,r){var n=e.l+t,a=Yu(e);a.r=r["!row"];var s=tl(e),o=[a,s,"n"];if(r.cellFormula){e.l+=2;var l=r4(e,n-e.l,r);o[3]=Wo(l,null,a,r.supbooks,r)}else e.l=n;return o}function fBe(e,t,r){var n=e.l+t,a=Yu(e);a.r=r["!row"];var s=sl(e),o=[a,s,"str"];if(r.cellFormula){e.l+=2;var l=r4(e,n-e.l,r);o[3]=Wo(l,null,a,r.supbooks,r)}else e.l=n;return o}var ABe=qg,hBe=t1;function mBe(e,t){return t==null&&(t=Nt(4)),t.write_shift(4,e),t}function pBe(e,t){var r=e.l+t,n=qg(e),a=kR(e),s=sl(e),o=sl(e),l=sl(e);e.l=r;var c={rfx:n,relId:a,loc:s,display:l};return o&&(c.Tooltip=o),c}function gBe(e,t){var r=Nt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));t1({s:us(e[0]),e:us(e[0])},r),jR("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return eo(a||"",r),eo(e[1].Tooltip||"",r),eo("",r),r.slice(0,r.l)}function xBe(){}function vBe(e,t,r){var n=e.l+t,a=ere(e),s=e.read_shift(1),o=[a];if(o[2]=s,r.cellFormula){var l=Vje(e,n-e.l,r);o[1]=l}else e.l=n;return o}function bBe(e,t,r){var n=e.l+t,a=qg(e),s=[a];if(r.cellFormula){var o=$je(e,n-e.l,r);s[1]=o,e.l=n}else e.l=n;return s}function yBe(e,t,r){r==null&&(r=Nt(18));var n=n4(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var ane=["left","right","top","bottom","header","footer"];function wBe(e){var t={};return ane.forEach(function(r){t[r]=tl(e)}),t}function EBe(e,t){return t==null&&(t=Nt(48)),rg(e),ane.forEach(function(r){wg(e[r],t)}),t}function NBe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function CBe(e,t,r){r==null&&(r=Nt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function _Be(e){var t=Nt(24);return t.write_shift(4,4),t.write_shift(4,1),t1(e,t),t}function SBe(e,t){return t==null&&(t=Nt(66)),t.write_shift(2,e.password?PR(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function kBe(){}function jBe(){}function BBe(e,t,r,n,a,s,o){if(!e)return e;var l=t||{};n||(n={"!id":{}});var c=l.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,m,g,x,v,y,w,_,T,j,I=[];l.biff=12,l["!row"]=0;var E=0,S=!1,B=[],M={},R=l.supbooks||a.supbooks||[[]];if(R.sharedf=M,R.arrayf=B,R.SheetNames=a.SheetNames||a.Sheets.map(function(G){return G.name}),!l.supbooks&&(l.supbooks=R,a.Names))for(var k=0;k<a.Names.length;++k)R[0][k+1]=a.Names[k];var D=[],L=[],Z=!1;c2[16]={n:"BrtShortReal",f:nne};var V;if(Uh(e,function(K,ee,W){if(!h)switch(W){case 148:u=K;break;case 0:m=K,l.sheetRows&&l.sheetRows<=m.r&&(h=!0),T=ei(v=m.r),l["!row"]=m.r,(K.hidden||K.hpt||K.level!=null)&&(K.hpt&&(K.hpx=db(K.hpt)),L[K.r]=K);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:K[2]},K[2]){case"n":g.v=K[1];break;case"s":_=bw[K[1]],g.v=_.t,g.r=_.r;break;case"b":g.v=!!K[1];break;case"e":g.v=K[1],l.cellText!==!1&&(g.w=Qh[g.v]);break;case"str":g.t="s",g.v=K[1];break;case"is":g.t="s",g.v=K[1].t;break}if((x=o.CellXf[K[0].iStyleRef])&&ene(g,x.numFmtId,null,l,s,o),y=K[0].c==-1?y+1:K[0].c,l.dense?(c[v]||(c[v]=[]),c[v][y]=g):c[cs(y)+T]=g,l.cellFormula){for(S=!1,E=0;E<B.length;++E){var P=B[E];m.r>=P[0].s.r&&m.r<=P[0].e.r&&y>=P[0].s.c&&y<=P[0].e.c&&(g.F=nn(P[0]),S=!0)}!S&&K.length>3&&(g.f=K[3])}if(d.s.r>m.r&&(d.s.r=m.r),d.s.c>y&&(d.s.c=y),d.e.r<m.r&&(d.e.r=m.r),d.e.c<y&&(d.e.c=y),l.cellDates&&x&&g.t=="n"&&Jb(Mr[x.numFmtId])){var U=Up(g.v);U&&(g.t="d",g.v=new Date(U.y,U.m-1,U.d,U.H,U.M,U.S,U.u))}V&&(V.type=="XLDAPR"&&(g.D=!0),V=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;g={t:"z",v:void 0},y=K[0].c==-1?y+1:K[0].c,l.dense?(c[v]||(c[v]=[]),c[v][y]=g):c[cs(y)+T]=g,d.s.r>m.r&&(d.s.r=m.r),d.s.c>y&&(d.s.c=y),d.e.r<m.r&&(d.e.r=m.r),d.e.c<y&&(d.e.c=y),V&&(V.type=="XLDAPR"&&(g.D=!0),V=void 0);break;case 176:I.push(K);break;case 49:V=((l.xlmeta||{}).Cell||[])[K-1];break;case 494:var z=n["!id"][K.relId];for(z?(K.Target=z.Target,K.loc&&(K.Target+="#"+K.loc),K.Rel=z):K.relId==""&&(K.Target="#"+K.loc),v=K.rfx.s.r;v<=K.rfx.e.r;++v)for(y=K.rfx.s.c;y<=K.rfx.e.c;++y)l.dense?(c[v]||(c[v]=[]),c[v][y]||(c[v][y]={t:"z",v:void 0}),c[v][y].l=K):(w=Hr({c:y,r:v}),c[w]||(c[w]={t:"z",v:void 0}),c[w].l=K);break;case 426:if(!l.cellFormula)break;B.push(K),j=l.dense?c[v][y]:c[cs(y)+T],j.f=Wo(K[1],d,{r:m.r,c:y},R,l),j.F=nn(K[0]);break;case 427:if(!l.cellFormula)break;M[Hr(K[0].s)]=K[1],j=l.dense?c[v][y]:c[cs(y)+T],j.f=Wo(K[1],d,{r:m.r,c:y},R,l);break;case 60:if(!l.cellStyles)break;for(;K.e>=K.s;)D[K.e--]={width:K.w/256,hidden:!!(K.flags&1),level:K.level},Z||(Z=!0,RR(K.w/256)),km(D[K.e+1]);break;case 161:c["!autofilter"]={ref:nn(K)};break;case 476:c["!margins"]=K;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),K.name&&(a.Sheets[r].CodeName=K.name),(K.above||K.left)&&(c["!outline"]={above:K.above,left:K.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),K.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!ee.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+W.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=nn(u||d)),l.sheetRows&&c["!ref"]){var q=Hn(c["!ref"]);l.sheetRows<=+q.e.r&&(q.e.r=l.sheetRows-1,q.e.r>d.e.r&&(q.e.r=d.e.r),q.e.r<q.s.r&&(q.s.r=q.e.r),q.e.c>d.e.c&&(q.e.c=d.e.c),q.e.c<q.s.c&&(q.s.c=q.e.c),c["!fullref"]=c["!ref"],c["!ref"]=nn(q))}return I.length>0&&(c["!merges"]=I),D.length>0&&(c["!cols"]=D),L.length>0&&(c["!rows"]=L),c}function TBe(e,t,r,n,a,s,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=Va(t),t.z=t.z||Mr[14],t.v=Fi(Ha(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:n};switch(c.s=Gm(a.cellXfs,t,a),t.l&&s["!links"].push([Hr(c),t.l]),t.c&&s["!comments"].push([Hr(c),t.c]),t.t){case"s":case"str":return a.bookSST?(l=HR(a.Strings,t.v,a.revStrings),c.t="s",c.v=l,o?Rt(e,18,X3e(t,c)):Rt(e,7,K3e(t,c))):(c.t="str",o?Rt(e,17,lBe(t,c)):Rt(e,6,iBe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?Rt(e,13,nBe(t,c)):Rt(e,2,tBe(t,c)):o?Rt(e,16,Z3e(t,c)):Rt(e,5,J3e(t,c)),!0;case"b":return c.t="b",o?Rt(e,15,H3e(t,c)):Rt(e,4,U3e(t,c)),!0;case"e":return c.t="e",o?Rt(e,14,G3e(t,c)):Rt(e,3,z3e(t,c)),!0}return o?Rt(e,12,L3e(t,c)):Rt(e,1,P3e(t,c)),!0}function IBe(e,t,r,n){var a=Hn(t["!ref"]||"A1"),s,o="",l=[];Rt(e,145);var c=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){o=ei(d),j3e(e,t,a,d);var f=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(l[h]=cs(h)),s=l[h]+o;var m=c?(t[d]||[])[h]:t[s];if(!m){f=!1;continue}f=TBe(e,m,d,h,n,t,f)}}Rt(e,146)}function FBe(e,t){!t||!t["!merges"]||(Rt(e,177,mBe(t["!merges"].length)),t["!merges"].forEach(function(r){Rt(e,176,hBe(r))}),Rt(e,178))}function OBe(e,t){!t||!t["!cols"]||(Rt(e,390),t["!cols"].forEach(function(r,n){r&&Rt(e,60,yBe(n,r))}),Rt(e,391))}function DBe(e,t){!t||!t["!ref"]||(Rt(e,648),Rt(e,649,_Be(Hn(t["!ref"]))),Rt(e,650))}function PBe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=ha(r,-1,n[1].Target.replace(/#.*$/,""),Cn.HLINK);Rt(e,494,gBe(n,a))}}),delete t["!links"]}function RBe(e,t,r,n){if(t["!comments"].length>0){var a=ha(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Cn.VML);Rt(e,551,jR("rId"+a)),t["!legacy"]=a}}function LBe(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s=typeof a.ref=="string"?a.ref:nn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=cc(s);l.s.r==l.e.r&&(l.e.r=cc(t["!ref"]).e.r,s=nn(l));for(var c=0;c<o.length;++c){var u=o[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Rt(e,161,t1(Hn(s))),Rt(e,162)}}function MBe(e,t,r){Rt(e,133),Rt(e,137,CBe(t,r)),Rt(e,138),Rt(e,134)}function UBe(e,t){t["!protect"]&&Rt(e,535,SBe(t["!protect"]))}function QBe(e,t,r,n){var a=oc(),s=r.SheetNames[e],o=r.Sheets[s]||{},l=s;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=Hn(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Rt(a,129),(r.vbaraw||o["!outline"])&&Rt(a,147,O3e(l,o["!outline"])),Rt(a,148,T3e(c)),MBe(a,o,r.Workbook),OBe(a,o),IBe(a,o,e,t),UBe(a,o),LBe(a,o,r,e),FBe(a,o),PBe(a,o,n),o["!margins"]&&Rt(a,476,EBe(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&DBe(a,o),RBe(a,o,e,n),Rt(a,130),a.end()}function HBe(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var o=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var a=Qn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[t,a,n]}function VBe(e,t,r,n,a,s){var o=s||{"!type":"chart"};if(!e)return s;var l=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=HBe(f);d.s.r=d.s.c=0,d.e.c=l,u=cs(l),h[0].forEach(function(m,g){o[u+ei(g)]={t:"n",v:m,z:h[1]},c=g}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(o["!ref"]=nn(d)),o}function zBe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(tne);return l&&VR(l[0],s,a,r),(o=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=o[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function $Be(e,t){e.l+=10;var r=sl(e);return{name:r}}function GBe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o=!1;return Uh(e,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var zR=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],qBe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],KBe=[],WBe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function EV(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var s=t[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=Ua(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function NV(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Ua(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function sne(e){NV(e.WBProps,zR),NV(e.CalcPr,WBe),EV(e.WBView,qBe),EV(e.Sheets,KBe),Lv.date1904=Ua(e.WBProps.date1904)}function XBe(e){return!e.Workbook||!e.Workbook.WBProps?"false":Ua(e.Workbook.WBProps.date1904)?"true":"false"}var YBe="][*?/\\".split("");function ine(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return YBe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function JBe(e,t,r){e.forEach(function(n,a){ine(n);for(var s=0;s<a;++s)if(n==e[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=t&&t[a]&&t[a].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function ZBe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];JBe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)Xje(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var eTe=/<\w+:workbook/;function tTe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},o=0;if(e.replace(ul,function(c,u){var d=qr(c);switch(cA(d[0])){case"<?xml":break;case"<workbook":c.match(eTe)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":zR.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Ua(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Ea(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Qn(Ea(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Ea(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Ua(d.hidden||"0")&&(s.Hidden=!0),o=u+c.length;break;case"</definedName>":s.Ref=Qn(Ea(e.slice(o,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),Vg.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return sne(r),r}function one(e){var t=[ri];t[t.length]=Kt("workbook",null,{xmlns:Vg[0],"xmlns:r":Bi.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(zR.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Kt("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var o={name:pa(e.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=Kt("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=Kt("definedName",pa(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function rTe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=vF(e),r.name=sl(e),r}function nTe(e,t){return t||(t=Nt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),jR(e.strRelID,t),eo(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function aTe(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?sl(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function sTe(e,t){t||(t=Nt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),Jte(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function iTe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function oTe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=RCe(e),o=zje(e,0,r),l=kR(e);e.l=n;var c={Name:s,Ptg:o};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function lTe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var s=[],o=[[]];return o.SheetNames=[],o.XTI=[],c2[16]={n:"BrtFRTArchID$",f:iTe},Uh(e,function(c,u,d){switch(d){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=Wo(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([d,c]):o[0]=[d,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),sne(r),r.Names=s,r.supbooks=o,r}function cTe(e,t){Rt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Rt(e,156,nTe(a))}Rt(e,144)}function uTe(e,t){t||(t=Nt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return eo("SheetJS",t),eo(I_.version,t),eo(I_.version,t),eo("7262",t),t.length>t.l?t.slice(0,t.l):t}function dTe(e,t){t||(t=Nt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function fTe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(Rt(e,135),Rt(e,158,dTe(a)),Rt(e,136))}}function ATe(e,t){var r=oc();return Rt(r,131),Rt(r,128,uTe()),Rt(r,153,sTe(e.Workbook&&e.Workbook.WBProps||null)),fTe(r,e),cTe(r,e),Rt(r,132),r.end()}function hTe(e,t,r){return t.slice(-4)===".bin"?lTe(e,r):tTe(e,r)}function mTe(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?BBe(e,n,r,a,s,o,l):o3e(e,n,r,a,s,o,l)}function pTe(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?GBe(e,n,r,a,s):zBe(e,n,r,a,s)}function gTe(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?v4e():b4e()}function xTe(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?g4e():x4e()}function vTe(e,t,r,n){return t.slice(-4)===".bin"?hke(e,r,n):rke(e,r,n)}function bTe(e,t,r){return Qre(e,r)}function yTe(e,t,r){return t.slice(-4)===".bin"?ySe(e,r):xSe(e,r)}function wTe(e,t,r){return t.slice(-4)===".bin"?f4e(e,r):n4e(e,r)}function ETe(e,t,r){return t.slice(-4)===".bin"?e4e(e):Jke(e)}function NTe(e,t,r,n){return r.slice(-4)===".bin"?t4e(e,t,r,n):void 0}function CTe(e,t,r){return t.slice(-4)===".bin"?Wke(e,t,r):Yke(e,t,r)}function _Te(e,t,r){return(t.slice(-4)===".bin"?ATe:one)(e)}function STe(e,t,r,n,a){return(t.slice(-4)===".bin"?QBe:rne)(e,r,n,a)}function kTe(e,t,r){return(t.slice(-4)===".bin"?Nke:Mre)(e,r)}function jTe(e,t,r){return(t.slice(-4)===".bin"?NSe:Tre)(e,r)}function BTe(e,t,r){return(t.slice(-4)===".bin"?A4e:zre)(e)}function TTe(e){return(e.slice(-4)===".bin"?Xke:Hre)()}var lne=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,cne=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Ed(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(lne),s,o,l,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(cne),(o=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?l="xmlns"+s[1].slice(6):l=s[1].slice(o+1),n[l]=s[2].slice(1,s[2].length-1));return n}function ITe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(lne),a,s,o,l;if(n)for(l=0;l!=n.length;++l)a=n[l].match(cne),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(s+1),r[o]=a[2].slice(1,a[2].length-1));return r}var ww;function FTe(e,t){var r=ww[e]||Qn(e);return r==="General"?bg(t):Ku(r,t)}function OTe(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Ua(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Ha(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Qn(t)]=a}function DTe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Qh[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=e2(e.v):e.w=bg(e.v):e.w=FTe(t||"General",e.v)}catch(s){if(r.WTF)throw s}try{var n=ww[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&Jb(n)){var a=Up(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function PTe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=KSe[n.Pattern]||n.Pattern)}e[t.ID]=t}function RTe(e,t,r,n,a,s,o,l,c,u){var d="General",f=n.StyleID,h={};u=u||{};var m=[],g=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&o&&(f=o.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&m.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ua(e);break;case"String":n.t="s",n.r=QH(Qn(e)),n.v=e.indexOf("<")>-1?Qn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Ha(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Qn(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=nre[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=QH(t||e));break}if(DTe(n,d,u),u.cellFormula!==!1)if(n.Formula){var x=Qn(n.Formula);x.charCodeAt(0)==61&&(x=x.slice(1)),n.f=Rv(x,a),delete n.Formula,n.ArrayRange=="RC"?n.F=Rv("RC:RC",a):n.ArrayRange&&(n.F=Rv(n.ArrayRange,a),c.push([Hn(n.F),n.F]))}else for(g=0;g<c.length;++g)a.r>=c[g][0].s.r&&a.r<=c[g][0].e.r&&a.c>=c[g][0].s.c&&a.c<=c[g][0].e.c&&(n.F=c[g][1]);u.cellStyles&&(m.forEach(function(v){!h.patternType&&v.patternType&&(h.patternType=v.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function LTe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function wB(e,t){var r=t||{};Zb();var n=$y(wR(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ea(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var o=Va(r);return o.type="string",ub.to_workbook(n,o)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Pe){a.indexOf("<"+Pe)>=0&&(s=!0)}),s)return EIe(n,r);ww={"General Number":"General","General Date":Mr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Mr[15],"Short Date":Mr[14],"Long Time":Mr[19],"Medium Time":Mr[18],"Short Time":Mr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Mr[2],Standard:Mr[4],Percent:Mr[10],Scientific:Mr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,d={},f=[],h=r.dense?[]:{},m="",g={},x={},v=Ed('<Data ss:Type="String">'),y=0,w=0,_=0,T={s:{r:2e6,c:2e6},e:{r:0,c:0}},j={},I={},E="",S=0,B=[],M={},R={},k=0,D=[],L=[],Z={},V=[],q,G=!1,K=[],ee=[],W={},P=0,U=0,z={Sheets:[],WBProps:{date1904:!1}},J={};n2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var te="";l=n2.exec(n);)switch(l[3]=(te=l[3]).toLowerCase()){case"data":if(te=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?RTe(n.slice(y,l.index),E,v,c[c.length-1][0]=="comment"?Z:g,{c:w,r:_},j,V[w],x,K,r):(E="",v=Ed(l[0]),y=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(L.length>0&&(g.c=L),(!r.sheetRows||r.sheetRows>_)&&g.v!==void 0&&(r.dense?(h[_]||(h[_]=[]),h[_][w]=g):h[cs(w)+ei(_)]=g),g.HRef&&(g.l={Target:Qn(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(P=w+(parseInt(g.MergeAcross,10)|0),U=_+(parseInt(g.MergeDown,10)|0),B.push({s:{c:w,r:_},e:{c:P,r:U}})),!r.sheetStubs)g.MergeAcross?w=P+1:++w;else if(g.MergeAcross||g.MergeDown){for(var se=w;se<=P;++se)for(var ie=_;ie<=U;++ie)(se>w||ie>_)&&(r.dense?(h[ie]||(h[ie]=[]),h[ie][se]={t:"z"}):h[cs(se)+ei(ie)]={t:"z"});w=P+1}else++w;else g=ITe(l[0]),g.Index&&(w=+g.Index-1),w<T.s.c&&(T.s.c=w),w>T.e.c&&(T.e.c=w),l[0].slice(-2)==="/>"&&++w,L=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(_<T.s.r&&(T.s.r=_),_>T.e.r&&(T.e.r=_),l[0].slice(-2)==="/>"&&(x=Ed(l[0]),x.Index&&(_=+x.Index-1)),w=0,++_):(x=Ed(l[0]),x.Index&&(_=+x.Index-1),W={},(x.AutoFitHeight=="0"||x.Height)&&(W.hpx=parseInt(x.Height,10),W.hpt=l2(W.hpx),ee[_]=W),x.Hidden=="1"&&(W.hidden=!0,ee[_]=W));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));f.push(m),T.s.r<=T.e.r&&T.s.c<=T.e.c&&(h["!ref"]=nn(T),r.sheetRows&&r.sheetRows<=T.e.r&&(h["!fullref"]=h["!ref"],T.e.r=r.sheetRows-1,h["!ref"]=nn(T))),B.length&&(h["!merges"]=B),V.length>0&&(h["!cols"]=V),ee.length>0&&(h["!rows"]=ee),d[m]=h}else T={s:{r:2e6,c:2e6},e:{r:0,c:0}},_=w=0,c.push([l[3],!1]),u=Ed(l[0]),m=Qn(u.Name),h=r.dense?[]:{},B=[],K=[],ee=[],J={name:m,Hidden:0},z.Sheets.push(J);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),V=[],G=!1}break;case"style":l[1]==="/"?PTe(j,I,r):I=Ed(l[0]);break;case"numberformat":I.nf=Qn(Ed(l[0]).Format||"General"),ww[I.nf]&&(I.nf=ww[I.nf]);for(var ce=0;ce!=392&&Mr[ce]!=I.nf;++ce);if(ce==392){for(ce=57;ce!=392;++ce)if(Mr[ce]==null){fh(I.nf,ce);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(q=Ed(l[0]),q.Hidden&&(q.hidden=!0,delete q.Hidden),q.Width&&(q.wpx=parseInt(q.Width,10)),!G&&q.wpx>10){G=!0,Jo=Rre;for(var de=0;de<V.length;++de)V[de]&&km(V[de])}G&&km(q),V[q.Index-1||V.length]=q;for(var Be=0;Be<+q.Span;++Be)V[V.length]=Va(q);break;case"namedrange":if(l[1]==="/")break;z.Names||(z.Names=[]);var ae=qr(l[0]),Se={Name:ae.Name,Ref:Rv(ae.RefersTo.slice(1),{r:0,c:0})};z.Sheets.length>0&&(Se.Sheet=z.Sheets.length-1),z.Names.push(Se);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?E+=n.slice(S,l.index):S=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;I.Interior=Ed(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?l5e(M,te,n.slice(k,l.index)):k=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));LTe(Z),L.push(Z)}else c.push([l[3],!1]),u=Ed(l[0]),Z={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var ke=Ed(l[0]);h["!autofilter"]={ref:Rv(ke.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return jV(n,r);var ve=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ve=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ve=!1}break;case"excelworkbook":switch(l[3]){case"date1904":z.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ve=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:ve=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(k,l.index)){case"SheetHidden":J.Hidden=1;break;case"SheetVeryHidden":J.Hidden=2;break}else k=l.index+l[0].length;break;case"header":h["!margins"]||rg(h["!margins"]={},"xlml"),isNaN(+qr(l[0]).Margin)||(h["!margins"].header=+qr(l[0]).Margin);break;case"footer":h["!margins"]||rg(h["!margins"]={},"xlml"),isNaN(+qr(l[0]).Margin)||(h["!margins"].footer=+qr(l[0]).Margin);break;case"pagemargins":var le=qr(l[0]);h["!margins"]||rg(h["!margins"]={},"xlml"),isNaN(+le.Top)||(h["!margins"].top=+le.Top),isNaN(+le.Left)||(h["!margins"].left=+le.Left),isNaN(+le.Right)||(h["!margins"].right=+le.Right),isNaN(+le.Bottom)||(h["!margins"].bottom=+le.Bottom);break;case"displayrighttoleft":z.Views||(z.Views=[]),z.Views[0]||(z.Views[0]={}),z.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ve=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ve=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ve=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ve=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ve=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ve=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ve=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ve=!1}break;case"smarttags":break;default:ve=!1;break}if(ve||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?OTe(R,te,D,n.slice(k,l.index)):(D=l,k=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var be={};return!r.bookSheets&&!r.bookProps&&(be.Sheets=d),be.SheetNames=f,be.Workbook=z,be.SSF=Va(Mr),be.Props=M,be.Custprops=R,be}function _F(e,t){switch(GR(t=t||{}),t.type||"base64"){case"base64":return wB(Wc(e),t);case"binary":case"buffer":case"file":return wB(e,t);case"array":return wB(zm(e),t)}}function MTe(e,t){var r=[];return e.Props&&r.push(c5e(e.Props,t)),e.Custprops&&r.push(u5e(e.Props,e.Custprops)),r.join("")}function UTe(){return""}function QTe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var s=[];s.push(Kt("NumberFormat",null,{"ss:Format":pa(Mr[n.numFmtId])}));var o={"ss:ID":"s"+(21+a)};r.push(Kt("Style",s.join(""),o))}),Kt("Styles",r.join(""))}function une(e){return Kt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+UR(e.Ref,{r:0,c:0})})}function HTe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(une(a)))}return Kt("Names",r.join(""))}function VTe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],o=0;o<a.length;++o){var l=a[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||s.push(une(l)))}return s.join("")}function zTe(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Kt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Kt("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Kt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Kt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(wo("ProtectContents","True")),e["!protect"].objects&&a.push(wo("ProtectObjects","True")),e["!protect"].scenarios&&a.push(wo("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(wo("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(wo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&a.push("<"+o[1]+"/>")})),a.length==0?"":Kt("WorksheetOptions",a.join(""),{xmlns:Pc.x})}function $Te(e){return e.map(function(t){var r=fCe(t.t||""),n=Kt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Kt("Comment",n,{"ss:Author":t.a})}).join("")}function GTe(e,t,r,n,a,s,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+pa(UR(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=us(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=pa(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=pa(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=o.c||u[d].s.r!=o.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=Qh[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Mr[14]);break;case"s":f="String",h=dCe(e.v||"");break}var m=Gm(n.cellXfs,e,n);l["ss:StyleID"]="s"+(21+m),l["ss:Index"]=o.c+1;var g=e.v!=null?h:"",x=e.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(e.c||[]).length>0&&(x+=$Te(e.c)),Kt("Cell",x,l)}function qTe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=db(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function KTe(e,t,r,n){if(!e["!ref"])return"";var a=Hn(e["!ref"]),s=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(v,y){km(v);var w=!!v.width,_=n4(y,v),T={"ss:Index":y+1};w&&(T["ss:Width"]=i2(_.width)),v.hidden&&(T["ss:Hidden"]="1"),l.push(Kt("Column",null,T))});for(var c=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[qTe(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var h=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>f)&&!(s[o].s.r>u)&&!(s[o].e.c<f)&&!(s[o].e.r<u)){(s[o].s.c!=f||s[o].s.r!=u)&&(h=!0);break}if(!h){var m={r:u,c:f},g=Hr(m),x=c?(e[u]||[])[f]:e[g];d.push(GTe(x,g,e,t,r,n,m))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function WTe(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],o=s?VTe(s,t,e,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=s?KTe(s,t,e,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(zTe(s,t,e,r)),n.join("")}function XTe(e,t){t||(t={}),e.SSF||(e.SSF=Va(Mr)),e.SSF&&(Zb(),Xk(e.SSF),t.revssf=Jk(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Gm(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(MTe(e,t)),r.push(UTe()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Kt("Worksheet",WTe(n,t,e),{"ss:Name":pa(e.SheetNames[n])}));return r[2]=QTe(e,t),r[3]=HTe(e),ri+Kt("Workbook",r.join(""),{xmlns:Pc.ss,"xmlns:o":Pc.o,"xmlns:x":Pc.x,"xmlns:ss":Pc.ss,"xmlns:dt":Pc.dt,"xmlns:html":Pc.html})}function YTe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=HCe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=VCe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var JTe=[60,1084,2066,2165,2175];function ZTe(e,t,r,n,a){var s=n,o=[],l=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(l)}o.push(l),r.l+=s;for(var c=rh(r,r.l),u=SF[c],d=0;u!=null&&JTe.indexOf(c)>-1;)s=rh(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+s),o.push(l),r.l+=4+s,u=SF[c=rh(r,r.l)];var f=Zi(o);yo(f,0);var h=0;f.lens=[];for(var m=0;m<o.length;++m)f.lens.push(h),h+=o[m].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,a)}function Tf(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Mr[n])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Qh[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=e2(e.v):e.w=bg(e.v):e.w=Ku(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&n&&e.t=="n"&&Jb(Mr[n]||String(n))){var a=Up(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function nC(e,t,r){return{v:e,ixfe:t,t:r}}function eIe(e,t){var r={opts:{}},n={},a=t.dense?[]:{},s={},o={},l=null,c=[],u="",d={},f,h="",m,g,x,v,y={},w=[],_,T,j=[],I=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},S={},B=function(Ht){return Ht<8?Zp[Ht]:Ht<64&&I[Ht-8]||Zp[Ht]},M=function(Ht,wt,Tr){var tr=wt.XF.data;if(!(!tr||!tr.patternType||!Tr||!Tr.cellStyles)){wt.s={},wt.s.patternType=tr.patternType;var sn;(sn=s2(B(tr.icvFore)))&&(wt.s.fgColor={rgb:sn}),(sn=s2(B(tr.icvBack)))&&(wt.s.bgColor={rgb:sn})}},R=function(Ht,wt,Tr){if(!(W>1)&&!(Tr.sheetRows&&Ht.r>=Tr.sheetRows)){if(Tr.cellStyles&&wt.XF&&wt.XF.data&&M(Ht,wt,Tr),delete wt.ixfe,delete wt.XF,f=Ht,h=Hr(Ht),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),Ht.r<o.s.r&&(o.s.r=Ht.r),Ht.c<o.s.c&&(o.s.c=Ht.c),Ht.r+1>o.e.r&&(o.e.r=Ht.r+1),Ht.c+1>o.e.c&&(o.e.c=Ht.c+1),Tr.cellFormula&&wt.f){for(var tr=0;tr<w.length;++tr)if(!(w[tr][0].s.c>Ht.c||w[tr][0].s.r>Ht.r)&&!(w[tr][0].e.c<Ht.c||w[tr][0].e.r<Ht.r)){wt.F=nn(w[tr][0]),(w[tr][0].s.c!=Ht.c||w[tr][0].s.r!=Ht.r)&&delete wt.f,wt.f&&(wt.f=""+Wo(w[tr][1],o,Ht,K,k));break}}Tr.dense?(a[Ht.r]||(a[Ht.r]=[]),a[Ht.r][Ht.c]=wt):a[h]=wt}},k={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:w,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(k.password=t.password);var D,L=[],Z=[],V=[],q=[],G=!1,K=[];K.SheetNames=k.snames,K.sharedf=k.sharedf,K.arrayf=k.arrayf,K.names=[],K.XTI=[];var ee=0,W=0,P=0,U=[],z=[],J;k.codepage=1200,Fd(1200);for(var te=!1;e.l<e.length-1;){var se=e.l,ie=e.read_shift(2);if(ie===0&&ee===10)break;var ce=e.l===e.length?0:e.read_shift(2),de=SF[ie];if(de&&de.f){if(t.bookSheets&&ee===133&&ie!==133)break;if(ee=ie,de.r===2||de.r==12){var Be=e.read_shift(2);if(ce-=2,!k.enc&&Be!==ie&&((Be&255)<<8|Be>>8)!==ie)throw new Error("rt mismatch: "+Be+"!="+ie);de.r==12&&(e.l+=10,ce-=10)}var ae={};if(ie===10?ae=de.f(e,ce,k):ae=ZTe(ie,de,e,ce,k),W==0&&[9,521,1033,2057].indexOf(ee)===-1)continue;switch(ie){case 34:r.opts.Date1904=E.WBProps.date1904=ae;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(k.enc||(e.l=0),k.enc=ae,!t.password)throw new Error("File is password-protected");if(ae.valid==null)throw new Error("Encryption scheme unsupported");if(!ae.valid)throw new Error("Password is incorrect");break;case 92:k.lastuser=ae;break;case 66:var Se=Number(ae);switch(Se){case 21010:Se=1200;break;case 32768:Se=1e4;break;case 32769:Se=1252;break}Fd(k.codepage=Se),te=!0;break;case 317:k.rrtabid=ae;break;case 25:k.winlocked=ae;break;case 439:r.opts.RefreshAll=ae;break;case 12:r.opts.CalcCount=ae;break;case 16:r.opts.CalcDelta=ae;break;case 17:r.opts.CalcIter=ae;break;case 13:r.opts.CalcMode=ae;break;case 14:r.opts.CalcPrecision=ae;break;case 95:r.opts.CalcSaveRecalc=ae;break;case 15:k.CalcRefMode=ae;break;case 2211:r.opts.FullCalc=ae;break;case 129:ae.fDialog&&(a["!type"]="dialog"),ae.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),ae.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:j.push(ae);break;case 430:K.push([ae]),K[K.length-1].XTI=[];break;case 35:case 547:K[K.length-1].push(ae);break;case 24:case 536:J={Name:ae.Name,Ref:Wo(ae.rgce,o,null,K,k)},ae.itab>0&&(J.Sheet=ae.itab-1),K.names.push(J),K[0]||(K[0]=[],K[0].XTI=[]),K[K.length-1].push(ae),ae.Name=="_xlnm._FilterDatabase"&&ae.itab>0&&ae.rgce&&ae.rgce[0]&&ae.rgce[0][0]&&ae.rgce[0][0][0]=="PtgArea3d"&&(z[ae.itab-1]={ref:nn(ae.rgce[0][0][1][2])});break;case 22:k.ExternCount=ae;break;case 23:K.length==0&&(K[0]=[],K[0].XTI=[]),K[K.length-1].XTI=K[K.length-1].XTI.concat(ae),K.XTI=K.XTI.concat(ae);break;case 2196:if(k.biff<8)break;J!=null&&(J.Comment=ae[1]);break;case 18:a["!protect"]=ae;break;case 19:ae!==0&&k.WTF&&console.error("Password verifier: "+ae);break;case 133:s[ae.pos]=ae,k.snames.push(ae.name);break;case 10:{if(--W)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,a["!ref"]=nn(o),t.sheetRows&&t.sheetRows<=o.e.r){var ke=o.e.r;o.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=nn(o),o.e.r=ke}o.e.r++,o.e.c++}L.length>0&&(a["!merges"]=L),Z.length>0&&(a["!objects"]=Z),V.length>0&&(a["!cols"]=V),q.length>0&&(a["!rows"]=q),E.Sheets.push(S)}u===""?d=a:n[u]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(k.biff===8&&(k.biff={9:2,521:3,1033:4}[ie]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ae.BIFFVer]||8),k.biffguess=ae.BIFFVer==0,ae.BIFFVer==0&&ae.dt==4096&&(k.biff=5,te=!0,Fd(k.codepage=28591)),k.biff==8&&ae.BIFFVer==0&&ae.dt==16&&(k.biff=2),W++)break;if(a=t.dense?[]:{},k.biff<8&&!te&&(te=!0,Fd(k.codepage=t.codepage||1252)),k.biff<5||ae.BIFFVer==0&&ae.dt==4096){u===""&&(u="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var ve={pos:e.l-ce,name:u};s[ve.pos]=ve,k.snames.push(u)}else u=(s[se]||{name:""}).name;ae.dt==32&&(a["!type"]="chart"),ae.dt==64&&(a["!type"]="macro"),L=[],Z=[],k.arrayf=w=[],V=[],q=[],G=!1,S={Hidden:(s[se]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[ae.r]||[])[ae.c]:a[Hr({c:ae.c,r:ae.r})])&&++ae.c,_={ixfe:ae.ixfe,XF:j[ae.ixfe]||{},v:ae.val,t:"n"},P>0&&(_.z=U[_.ixfe>>8&63]),Tf(_,t,r.opts.Date1904),R({c:ae.c,r:ae.r},_,t);break;case 5:case 517:_={ixfe:ae.ixfe,XF:j[ae.ixfe],v:ae.val,t:ae.t},P>0&&(_.z=U[_.ixfe>>8&63]),Tf(_,t,r.opts.Date1904),R({c:ae.c,r:ae.r},_,t);break;case 638:_={ixfe:ae.ixfe,XF:j[ae.ixfe],v:ae.rknum,t:"n"},P>0&&(_.z=U[_.ixfe>>8&63]),Tf(_,t,r.opts.Date1904),R({c:ae.c,r:ae.r},_,t);break;case 189:for(var le=ae.c;le<=ae.C;++le){var be=ae.rkrec[le-ae.c][0];_={ixfe:be,XF:j[be],v:ae.rkrec[le-ae.c][1],t:"n"},P>0&&(_.z=U[_.ixfe>>8&63]),Tf(_,t,r.opts.Date1904),R({c:le,r:ae.r},_,t)}break;case 6:case 518:case 1030:{if(ae.val=="String"){l=ae;break}if(_=nC(ae.val,ae.cell.ixfe,ae.tt),_.XF=j[_.ixfe],t.cellFormula){var Pe=ae.formula;if(Pe&&Pe[0]&&Pe[0][0]&&Pe[0][0][0]=="PtgExp"){var Ue=Pe[0][0][1][0],pe=Pe[0][0][1][1],Oe=Hr({r:Ue,c:pe});y[Oe]?_.f=""+Wo(ae.formula,o,ae.cell,K,k):_.F=((t.dense?(a[Ue]||[])[pe]:a[Oe])||{}).F}else _.f=""+Wo(ae.formula,o,ae.cell,K,k)}P>0&&(_.z=U[_.ixfe>>8&63]),Tf(_,t,r.opts.Date1904),R(ae.cell,_,t),l=ae}break;case 7:case 519:if(l)l.val=ae,_=nC(ae,l.cell.ixfe,"s"),_.XF=j[_.ixfe],t.cellFormula&&(_.f=""+Wo(l.formula,o,l.cell,K,k)),P>0&&(_.z=U[_.ixfe>>8&63]),Tf(_,t,r.opts.Date1904),R(l.cell,_,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{w.push(ae);var Le=Hr(ae[0].s);if(m=t.dense?(a[ae[0].s.r]||[])[ae[0].s.c]:a[Le],t.cellFormula&&m){if(!l||!Le||!m)break;m.f=""+Wo(ae[1],o,ae[0],K,k),m.F=nn(ae[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!l)break;y[Hr(l.cell)]=ae[0],m=t.dense?(a[l.cell.r]||[])[l.cell.c]:a[Hr(l.cell)],(m||{}).f=""+Wo(ae[0],o,f,K,k)}}break;case 253:_=nC(c[ae.isst].t,ae.ixfe,"s"),c[ae.isst].h&&(_.h=c[ae.isst].h),_.XF=j[_.ixfe],P>0&&(_.z=U[_.ixfe>>8&63]),Tf(_,t,r.opts.Date1904),R({c:ae.c,r:ae.r},_,t);break;case 513:t.sheetStubs&&(_={ixfe:ae.ixfe,XF:j[ae.ixfe],t:"z"},P>0&&(_.z=U[_.ixfe>>8&63]),Tf(_,t,r.opts.Date1904),R({c:ae.c,r:ae.r},_,t));break;case 190:if(t.sheetStubs)for(var Ge=ae.c;Ge<=ae.C;++Ge){var et=ae.ixfe[Ge-ae.c];_={ixfe:et,XF:j[et],t:"z"},P>0&&(_.z=U[_.ixfe>>8&63]),Tf(_,t,r.opts.Date1904),R({c:Ge,r:ae.r},_,t)}break;case 214:case 516:case 4:_=nC(ae.val,ae.ixfe,"s"),_.XF=j[_.ixfe],P>0&&(_.z=U[_.ixfe>>8&63]),Tf(_,t,r.opts.Date1904),R({c:ae.c,r:ae.r},_,t);break;case 0:case 512:W===1&&(o=ae);break;case 252:c=ae;break;case 1054:if(k.biff==4){U[P++]=ae[1];for(var ut=0;ut<P+163&&Mr[ut]!=ae[1];++ut);ut>=163&&fh(ae[1],P+163)}else fh(ae[1],ae[0]);break;case 30:{U[P++]=ae;for(var xt=0;xt<P+163&&Mr[xt]!=ae;++xt);xt>=163&&fh(ae,P+163)}break;case 229:L=L.concat(ae);break;case 93:Z[ae.cmo[0]]=k.lastobj=ae;break;case 438:k.lastobj.TxO=ae;break;case 127:k.lastobj.ImData=ae;break;case 440:for(v=ae[0].s.r;v<=ae[0].e.r;++v)for(x=ae[0].s.c;x<=ae[0].e.c;++x)m=t.dense?(a[v]||[])[x]:a[Hr({c:x,r:v})],m&&(m.l=ae[1]);break;case 2048:for(v=ae[0].s.r;v<=ae[0].e.r;++v)for(x=ae[0].s.c;x<=ae[0].e.c;++x)m=t.dense?(a[v]||[])[x]:a[Hr({c:x,r:v})],m&&m.l&&(m.l.Tooltip=ae[1]);break;case 28:{if(k.biff<=5&&k.biff>=2)break;m=t.dense?(a[ae[0].r]||[])[ae[0].c]:a[Hr(ae[0])];var It=Z[ae[2]];m||(t.dense?(a[ae[0].r]||(a[ae[0].r]=[]),m=a[ae[0].r][ae[0].c]={t:"z"}):m=a[Hr(ae[0])]={t:"z"},o.e.r=Math.max(o.e.r,ae[0].r),o.s.r=Math.min(o.s.r,ae[0].r),o.e.c=Math.max(o.e.c,ae[0].c),o.s.c=Math.min(o.s.c,ae[0].c)),m.c||(m.c=[]),g={a:ae[1],t:It.TxO.t},m.c.push(g)}break;case 2173:Qke(j[ae.ixfe],ae.ext);break;case 125:{if(!k.cellStyles)break;for(;ae.e>=ae.s;)V[ae.e--]={width:ae.w/256,level:ae.level||0,hidden:!!(ae.flags&1)},G||(G=!0,RR(ae.w/256)),km(V[ae.e+1])}break;case 520:{var Mt={};ae.level!=null&&(q[ae.r]=Mt,Mt.level=ae.level),ae.hidden&&(q[ae.r]=Mt,Mt.hidden=!0),ae.hpt&&(q[ae.r]=Mt,Mt.hpt=ae.hpt,Mt.hpx=db(ae.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||rg(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ie]]=ae;break;case 161:a["!margins"]||rg(a["!margins"]={}),a["!margins"].header=ae.header,a["!margins"].footer=ae.footer;break;case 574:ae.RTL&&(E.Views[0].RTL=!0);break;case 146:I=ae;break;case 2198:D=ae;break;case 140:T=ae;break;case 442:u?S.CodeName=ae||S.name:E.WBProps.CodeName=ae||"ThisWorkbook";break}}else de||console.error("Missing Info for XLS Record 0x"+ie.toString(16)),e.l+=ce}return r.SheetNames=Ds(s).sort(function(Pt,Ht){return Number(Pt)-Number(Ht)}).map(function(Pt){return s[Pt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&z.forEach(function(Pt,Ht){r.Sheets[r.SheetNames[Ht]]["!autofilter"]=Pt}),r.Strings=c,r.SSF=Va(Mr),k.enc&&(r.Encryption=k.enc),D&&(r.Themes=D),r.Metadata={},T!==void 0&&(r.Metadata.Country=T),K.names.length>0&&(E.Names=K.names),r.Workbook=E,r}var Ew={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function tIe(e,t,r){var n=Sr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=sV(n,bF,Ew.DSI);for(var s in a)t[s]=a[s]}catch(u){if(r.WTF)throw u}var o=Sr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=sV(o,yF,Ew.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(cre(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function rIe(e,t){var r=[],n=[],a=[],s=0,o,l=DH(bF,"n"),c=DH(yF,"n");if(e.Props)for(o=Ds(e.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],e.Props[o[s]]]);if(e.Custprops)for(o=Ds(e.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],e.Custprops[o[s]]]);var u=[];for(s=0;s<a.length;++s)pre.indexOf(a[s][0])>-1||lre.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&Sr.utils.cfb_add(t,"/SummaryInformation",iV(n,Ew.SI,c,yF)),(r.length||u.length)&&Sr.utils.cfb_add(t,"/DocumentSummaryInformation",iV(r,Ew.DSI,l,bF,u.length?u:null,Ew.UDI))}function dne(e,t){t||(t={}),GR(t),AR(),t.codepage&&fR(t.codepage);var r,n;if(e.FullPaths){if(Sr.find(e,"/encryption"))throw new Error("File is password-protected");r=Sr.find(e,"!CompObj"),n=Sr.find(e,"/Workbook")||Sr.find(e,"/Book")}else{switch(t.type){case"base64":e=Uc(Wc(e));break;case"binary":e=Uc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}yo(e,0),n={content:e}}var a,s;if(r&&YTe(r),t.bookProps&&!t.bookSheets)a={};else{var o=vn?"buffer":"array";if(n&&n.content)a=eIe(n.content,t);else if((s=Sr.find(e,"PerfectOffice_MAIN"))&&s.content)a=tg.to_workbook(s.content,(t.type=o,t));else if((s=Sr.find(e,"NativeContent_MAIN"))&&s.content)a=tg.to_workbook(s.content,(t.type=o,t));else throw(s=Sr.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Sr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=m4e(e))}var l={};return e.FullPaths&&tIe(e,l,t),a.Props=a.Custprops=l,t.bookFiles&&(a.cfb=e),a}function nIe(e,t){var r=t||{},n=Sr.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Sr.utils.cfb_add(n,a,fne(e,r)),r.biff==8&&(e.Props||e.Custprops)&&rIe(e,n),r.biff==8&&e.vbaraw&&p4e(n,Sr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var c2={0:{f:S3e},1:{f:D3e},2:{f:eBe},3:{f:V3e},4:{f:M3e},5:{f:Y3e},6:{f:sBe},7:{f:q3e},8:{f:fBe},9:{f:dBe},10:{f:cBe},11:{f:uBe},12:{f:R3e},13:{f:rBe},14:{f:$3e},15:{f:Q3e},16:{f:nne},17:{f:oBe},18:{f:W3e},19:{f:SR},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:oTe},40:{},42:{},43:{f:ske},44:{f:nke},45:{f:lke},46:{f:uke},47:{f:cke},48:{},49:{f:BCe},50:{},51:{f:zke},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Sre},62:{f:aBe},63:{f:Zke},64:{f:kBe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ll,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:NBe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:F3e},148:{f:B3e,p:16},151:{f:xBe},152:{},153:{f:aTe},154:{},155:{},156:{f:rTe},157:{},158:{},159:{T:1,f:bSe},160:{T:-1},161:{T:1,f:qg},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:ABe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Hke},336:{T:-1},337:{f:qke,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:vF},357:{},358:{},359:{},360:{T:1},361:{},362:{f:_re},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:vBe},427:{f:bBe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:wBe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:I3e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:pBe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:vF},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:u4e},633:{T:1},634:{T:-1},635:{T:1,f:l4e},636:{T:-1},637:{f:OCe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:$Be},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:jBe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},SF={6:{f:bB},10:{f:j0},12:{f:hi},13:{f:hi},14:{f:Gs},15:{f:Gs},16:{f:tl},17:{f:Gs},18:{f:Gs},19:{f:hi},20:{f:fV},21:{f:fV},23:{f:_re},24:{f:hV},25:{f:Gs},26:{},27:{},28:{f:j_e},29:{},34:{f:Gs},35:{f:AV},38:{f:tl},39:{f:tl},40:{f:tl},41:{f:tl},42:{f:Gs},43:{f:Gs},47:{f:QSe},49:{f:r_e},51:{f:hi},60:{},61:{f:Y5e},64:{f:Gs},65:{f:t_e},66:{f:hi},77:{},80:{},81:{},82:{},85:{f:hi},89:{},90:{},91:{},92:{f:U5e},93:{f:I_e},94:{},95:{f:Gs},96:{},97:{},99:{f:Gs},125:{f:Sre},128:{f:g_e},129:{f:H5e},130:{f:hi},131:{f:Gs},132:{f:Gs},133:{f:V5e},134:{},140:{f:U_e},141:{f:hi},144:{},146:{f:V_e},151:{},152:{},153:{},154:{},155:{},156:{f:hi},157:{},158:{},160:{f:X_e},161:{f:G_e},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:A_e},190:{f:h_e},193:{f:j0},197:{},198:{},199:{},200:{},201:{},202:{f:Gs},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:hi},220:{},221:{f:Gs},222:{},224:{f:p_e},225:{f:M5e},226:{f:j0},227:{},229:{f:B_e},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:$5e},253:{f:a_e},255:{f:q5e},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:gre},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Gs},353:{f:j0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:w_e},431:{f:Gs},432:{},433:{},434:{},437:{},438:{f:D_e},439:{f:Gs},440:{f:P_e},441:{},442:{f:nE},443:{},444:{f:hi},445:{},446:{},448:{f:j0},449:{f:X5e,r:2},450:{f:j0},512:{f:cV},513:{f:W_e},515:{f:b_e},516:{f:i_e},517:{f:dV},519:{f:Y_e},520:{f:K5e},523:{},545:{f:mV},549:{f:lV},566:{},574:{f:Z5e},638:{f:f_e},659:{},1048:{},1054:{f:l_e},1084:{},1212:{f:__e},2048:{f:L_e},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:eC},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:j0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:z_e,r:12},2173:{f:Uke,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Gs,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:C_e,r:12},2197:{},2198:{f:Oke,r:12},2199:{},2200:{},2201:{},2202:{f:S_e,r:12},2203:{f:j0},2204:{},2205:{},2206:{},2207:{},2211:{f:W5e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:hi},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:q_e},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:H_e},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:cV},1:{},2:{f:rSe},3:{f:eSe},4:{f:Z_e},5:{f:dV},7:{f:aSe},8:{},9:{f:eC},11:{},22:{f:hi},30:{f:u_e},31:{},32:{},33:{f:mV},36:{},37:{f:lV},50:{f:sSe},62:{},52:{},67:{},68:{f:hi},69:{},86:{},126:{},127:{f:J_e},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:iSe},223:{},234:{},354:{},421:{},518:{f:bB},521:{f:eC},536:{f:hV},547:{f:AV},561:{},579:{},1030:{f:bB},1033:{f:eC},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Wt(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,o=e.next(4);o.write_shift(2,a),o.write_shift(2,s),s>0&&NR(r)&&e.push(r)}}function aIe(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return Wt(e,t,r,a);var s=t;if(!isNaN(s)){for(var o=r.parts||[],l=0,c=0,u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function oE(e,t,r){return e||(e=Nt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function sIe(e,t,r,n){var a=Nt(9);return oE(a,e,t),xre(r,n||"b",a),a}function iIe(e,t,r){var n=Nt(8+2*r.length);return oE(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function oIe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?Fi(Ha(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?Wt(e,2,nSe(r,n,a)):Wt(e,3,tSe(r,n,a));return;case"b":case"e":Wt(e,5,sIe(r,n,t.v,t.t));return;case"s":case"str":Wt(e,4,iIe(r,n,(t.v||"").slice(0,255)));return}Wt(e,1,oE(null,r,n))}function lIe(e,t,r,n){var a=Array.isArray(t),s=Hn(t["!ref"]||"A1"),o,l="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),o=nn(s)}for(var u=s.s.r;u<=s.e.r;++u){l=ei(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=cs(d)),o=c[d]+l;var f=a?(t[u]||[])[d]:t[o];f&&oIe(e,f,u,d)}}}function cIe(e,t){for(var r=t||{},n=oc(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Wt(n,r.biff==4?1033:r.biff==3?521:9,OR(e,16,r)),lIe(n,e.Sheets[e.SheetNames[a]],a,r),Wt(n,10),n.end()}function uIe(e,t,r){Wt(e,49,n_e({sz:12,name:"Arial"},r))}function dIe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Wt(e,1054,c_e(a,t[a],r))})}function fIe(e,t){var r=Nt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Wt(e,2151,r),r=Nt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),Ere(Hn(t["!ref"]||"A1"),r),r.write_shift(4,4),Wt(e,2152,r)}function AIe(e,t){for(var r=0;r<16;++r)Wt(e,224,uV({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){Wt(e,224,uV(n,0,t))})}function hIe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];Wt(e,440,R_e(n)),n[1].Tooltip&&Wt(e,2048,M_e(n))}delete t["!links"]}function mIe(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&Wt(e,125,$_e(n4(a,n),a))})}}function pIe(e,t,r,n,a){var s=16+Gm(a.cellXfs,t,a);if(t.v==null&&!t.bf){Wt(e,513,Ng(r,n,s));return}if(t.bf)Wt(e,6,Hje(t,r,n,a,s));else switch(t.t){case"d":case"n":var o=t.t=="d"?Fi(Ha(t.v)):t.v;Wt(e,515,y_e(r,n,o,s));break;case"b":case"e":Wt(e,517,v_e(r,n,t.v,s,a,t.t));break;case"s":case"str":if(a.bookSST){var l=HR(a.Strings,t.v,a.revStrings);Wt(e,253,s_e(r,n,l,s))}else Wt(e,516,o_e(r,n,(t.v||"").slice(0,255),s,a));break;default:Wt(e,513,Ng(r,n,s))}}function gIe(e,t,r){var n=oc(),a=r.SheetNames[e],s=r.Sheets[a]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(s),u=t.biff==8,d,f="",h=[],m=Hn(s["!ref"]||"A1"),g=u?65536:16384;if(m.e.c>255||m.e.r>=g){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,g-1)}Wt(n,2057,OR(r,16,t)),Wt(n,13,Pu(1)),Wt(n,12,Pu(100)),Wt(n,15,bl(!0)),Wt(n,17,bl(!1)),Wt(n,16,wg(.001)),Wt(n,95,bl(!0)),Wt(n,42,bl(!1)),Wt(n,43,bl(!1)),Wt(n,130,Pu(1)),Wt(n,128,x_e()),Wt(n,131,bl(!1)),Wt(n,132,bl(!1)),u&&mIe(n,s["!cols"]),Wt(n,512,d_e(m,t)),u&&(s["!links"]=[]);for(var x=m.s.r;x<=m.e.r;++x){f=ei(x);for(var v=m.s.c;v<=m.e.c;++v){x===m.s.r&&(h[v]=cs(v)),d=h[v]+f;var y=c?(s[x]||[])[v]:s[d];y&&(pIe(n,y,x,v,t),u&&y.l&&s["!links"].push([d,y.l]))}}var w=l.CodeName||l.name||a;return u&&Wt(n,574,e_e((o.Views||[])[0])),u&&(s["!merges"]||[]).length&&Wt(n,229,T_e(s["!merges"])),u&&hIe(n,s),Wt(n,442,vre(w)),u&&fIe(n,s),Wt(n,10),n.end()}function xIe(e,t,r){var n=oc(),a=(e||{}).Workbook||{},s=a.Sheets||[],o=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(Wt(n,2057,OR(e,5,r)),r.bookType=="xla"&&Wt(n,135),Wt(n,225,l?Pu(1200):null),Wt(n,193,v5e(2)),c&&Wt(n,191),c&&Wt(n,192),Wt(n,226),Wt(n,92,Q5e("SheetJS",r)),Wt(n,66,Pu(l?1200:1252)),l&&Wt(n,353,Pu(0)),l&&Wt(n,448),Wt(n,317,K_e(e.SheetNames.length)),l&&e.vbaraw&&Wt(n,211),l&&e.vbaraw){var u=o.CodeName||"ThisWorkbook";Wt(n,442,vre(u))}Wt(n,156,Pu(17)),Wt(n,25,bl(!1)),Wt(n,18,bl(!1)),Wt(n,19,Pu(0)),l&&Wt(n,431,bl(!1)),l&&Wt(n,444,Pu(0)),Wt(n,61,J5e()),Wt(n,64,bl(!1)),Wt(n,141,Pu(0)),Wt(n,34,bl(XBe(e)=="true")),Wt(n,14,bl(!0)),l&&Wt(n,439,bl(!1)),Wt(n,218,Pu(0)),uIe(n,e,r),dIe(n,e.SSF,r),AIe(n,r),l&&Wt(n,352,bl(!1));var d=n.end(),f=oc();l&&Wt(f,140,Q_e()),l&&r.Strings&&aIe(f,252,G5e(r.Strings)),Wt(f,10);var h=f.end(),m=oc(),g=0,x=0;for(x=0;x<e.SheetNames.length;++x)g+=(l?12:11)+(l?2:1)*e.SheetNames[x].length;var v=d.length+g+h.length;for(x=0;x<e.SheetNames.length;++x){var y=s[x]||{};Wt(m,133,z5e({pos:v,hs:y.Hidden||0,dt:0,name:e.SheetNames[x]},r)),v+=t[x].length}var w=m.end();if(g!=w.length)throw new Error("BS8 "+g+" != "+w.length);var _=[];return d.length&&_.push(d),w.length&&_.push(w),h.length&&_.push(h),Zi(_)}function vIe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Va(Mr)),e&&e.SSF&&(Zb(),Xk(e.SSF),r.revssf=Jk(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,qR(r),r.cellXfs=[],Gm(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=gIe(a,r,e);return n.unshift(xIe(e,n,r)),Zi(n)}function fne(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=cc(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return vIe(e,t);case 4:case 3:case 2:return cIe(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function CV(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),o=a.index,l=s&&s.index||e.length,c=nCe(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(o=0;o<c.length;++o){var x=c[o].trim(),v=x.slice(0,3).toLowerCase();if(v=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(v!="<td"&&v!="<th")){var y=x.split(/<\/t[dh]>/i);for(l=0;l<y.length;++l){var w=y[l].trim();if(w.match(/<t[dh]/i)){for(var _=w,T=0;_.charAt(0)=="<"&&(T=_.indexOf(">"))>-1;)_=_.slice(T+1);for(var j=0;j<g.length;++j){var I=g[j];I.s.c==d&&I.s.r<u&&u<=I.e.r&&(d=I.e.c+1,j=-1)}var E=qr(w.slice(0,w.indexOf(">")));h=E.colspan?+E.colspan:1,((f=+E.rowspan)>1||h>1)&&g.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var S=E.t||E["data-t"]||"";if(!_.length){d+=h;continue}if(_=Pte(_),m.s.r>u&&(m.s.r=u),m.e.r<u&&(m.e.r=u),m.s.c>d&&(m.s.c=d),m.e.c<d&&(m.e.c=d),!_.length){d+=h;continue}var B={t:"s",v:_};r.raw||!_.trim().length||S=="s"||(_==="TRUE"?B={t:"b",v:!0}:_==="FALSE"?B={t:"b",v:!1}:isNaN(Ud(_))?isNaN(cb(_).getDate())||(B={t:"d",v:Ha(_)},r.cellDates||(B={t:"n",v:Fi(B.v)}),B.z=r.dateNF||Mr[14]):B={t:"n",v:Ud(_)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=B):n[Hr({r:u,c:d})]=B,d+=h}}}}return n["!ref"]=nn(m),g.length&&(n["!merges"]=g),n}function bIe(e,t,r,n){for(var a=e["!merges"]||[],s=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>o)&&!(a[u].e.r<r||a[u].e.c<o)){if(a[u].s.r<r||a[u].s.c<o){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=Hr({r,c:o}),f=n.dense?(e[r]||[])[o]:e[d],h=f&&f.v!=null&&(f.h||yR(f.w||(Ch(f),f.w)||""))||"",m={};l>1&&(m.rowspan=l),c>1&&(m.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(m["data-t"]=f&&f.t||"z",f.v!=null&&(m["data-v"]=f.v),f.z!=null&&(m["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),m.id=(n.id||"sjs")+"-"+d,s.push(Kt("td",h,m))}}var g="<tr>";return g+s.join("")+"</tr>"}var yIe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',wIe="</body></html>";function EIe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return $m(CV(r[0],t),t);var n=XR();return r.forEach(function(a,s){YR(n,CV(a,t),"Sheet"+(s+1))}),n}function NIe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Ane(e,t){var r=t||{},n=r.header!=null?r.header:yIe,a=r.footer!=null?r.footer:wIe,s=[n],o=cc(e["!ref"]);r.dense=Array.isArray(e),s.push(NIe(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)s.push(bIe(e,o,l,r));return s.push("</table>"+a),s.join("")}function hne(e,t,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var o=typeof n.origin=="string"?us(n.origin):n.origin;a=o.r,s=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=cc(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],h=0,m=e["!rows"]||(e["!rows"]=[]),g=0,x=0,v=0,y=0,w=0,_=0;for(e["!cols"]||(e["!cols"]=[]);g<l.length&&x<c;++g){var T=l[g];if(_V(T)){if(n.display)continue;m[x]={hidden:!0}}var j=T.children;for(v=y=0;v<j.length;++v){var I=j[v];if(!(n.display&&_V(I))){var E=I.hasAttribute("data-v")?I.getAttribute("data-v"):I.hasAttribute("v")?I.getAttribute("v"):Pte(I.innerHTML),S=I.getAttribute("data-z")||I.getAttribute("z");for(h=0;h<f.length;++h){var B=f[h];B.s.c==y+s&&B.s.r<x+a&&x+a<=B.e.r&&(y=B.e.c+1-s,h=-1)}_=+I.getAttribute("colspan")||1,((w=+I.getAttribute("rowspan")||1)>1||_>1)&&f.push({s:{r:x+a,c:y+s},e:{r:x+a+(w||1)-1,c:y+s+(_||1)-1}});var M={t:"s",v:E},R=I.getAttribute("data-t")||I.getAttribute("t")||"";E!=null&&(E.length==0?M.t=R||"z":n.raw||E.trim().length==0||R=="s"||(E==="TRUE"?M={t:"b",v:!0}:E==="FALSE"?M={t:"b",v:!1}:isNaN(Ud(E))?isNaN(cb(E).getDate())||(M={t:"d",v:Ha(E)},n.cellDates||(M={t:"n",v:Fi(M.v)}),M.z=n.dateNF||Mr[14]):M={t:"n",v:Ud(E)})),M.z===void 0&&S!=null&&(M.z=S);var k="",D=I.getElementsByTagName("A");if(D&&D.length)for(var L=0;L<D.length&&!(D[L].hasAttribute("href")&&(k=D[L].getAttribute("href"),k.charAt(0)!="#"));++L);k&&k.charAt(0)!="#"&&(M.l={Target:k}),n.dense?(e[x+a]||(e[x+a]=[]),e[x+a][y+s]=M):e[Hr({c:y+s,r:x+a})]=M,u.e.c<y+s&&(u.e.c=y+s),y+=_}}++x}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,x-1+a),e["!ref"]=nn(u),x>=c&&(e["!fullref"]=nn((u.e.r=l.length-g+x-1+a,u))),e}function mne(e,t){var r=t||{},n=r.dense?[]:{};return hne(n,e,t)}function CIe(e,t){return $m(mne(e,t),t)}function _V(e){var t="",r=_Ie(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function _Ie(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function SIe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Qn(t.replace(/<[^>]*>/g,""));return[r]}var SV={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function pne(e,t){var r=t||{},n=wR(e),a=[],s,o,l={name:""},c="",u=0,d,f,h={},m=[],g=r.dense?[]:{},x,v,y={value:""},w="",_=0,T=[],j=-1,I=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},S=0,B={},M=[],R={},k=0,D=0,L=[],Z=1,V=1,q=[],G={Names:[]},K={},ee=["",""],W=[],P={},U="",z=0,J=!1,te=!1,se=0;for(n2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");x=n2.exec(n);)switch(x[3]=x[3].replace(/_.*$/,"")){case"table":case"工作表":x[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?g["!ref"]=nn(E):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=E.e.r&&(g["!fullref"]=g["!ref"],E.e.r=r.sheetRows-1,g["!ref"]=nn(E)),M.length&&(g["!merges"]=M),L.length&&(g["!rows"]=L),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),m.push(d.name),h[d.name]=g,te=!1):x[0].charAt(x[0].length-2)!=="/"&&(d=qr(x[0],!1),j=I=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,g=r.dense?[]:{},M=[],L=[],te=!0);break;case"table-row-group":x[1]==="/"?--S:++S;break;case"table-row":case"行":if(x[1]==="/"){j+=Z,Z=1;break}if(f=qr(x[0],!1),f.行号?j=f.行号-1:j==-1&&(j=0),Z=+f["number-rows-repeated"]||1,Z<10)for(se=0;se<Z;++se)S>0&&(L[j+se]={level:S});I=-1;break;case"covered-table-cell":x[1]!=="/"&&++I,r.sheetStubs&&(r.dense?(g[j]||(g[j]=[]),g[j][I]={t:"z"}):g[Hr({r:j,c:I})]={t:"z"}),w="",T=[];break;case"table-cell":case"数据":if(x[0].charAt(x[0].length-2)==="/")++I,y=qr(x[0],!1),V=parseInt(y["number-columns-repeated"]||"1",10),v={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(v.f=wV(Qn(y.formula))),(y.数据类型||y["value-type"])=="string"&&(v.t="s",v.v=Qn(y["string-value"]||""),r.dense?(g[j]||(g[j]=[]),g[j][I]=v):g[Hr({r:j,c:I})]=v),I+=V-1;else if(x[1]!=="/"){++I,w="",_=0,T=[],V=1;var ie=Z?j+Z-1:j;if(I>E.e.c&&(E.e.c=I),I<E.s.c&&(E.s.c=I),j<E.s.r&&(E.s.r=j),ie>E.e.r&&(E.e.r=ie),y=qr(x[0],!1),W=[],P={},v={t:y.数据类型||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Qn(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(k=parseInt(y["number-matrix-rows-spanned"],10)||0,D=parseInt(y["number-matrix-columns-spanned"],10)||0,R={s:{r:j,c:I},e:{r:j+k-1,c:I+D-1}},v.F=nn(R),q.push([R,v.F])),y.formula)v.f=wV(y.formula);else for(se=0;se<q.length;++se)j>=q[se][0].s.r&&j<=q[se][0].e.r&&I>=q[se][0].s.c&&I<=q[se][0].e.c&&(v.F=q[se][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(k=parseInt(y["number-rows-spanned"],10)||0,D=parseInt(y["number-columns-spanned"],10)||0,R={s:{r:j,c:I},e:{r:j+k-1,c:I+D-1}},M.push(R)),y["number-columns-repeated"]&&(V=parseInt(y["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=Ua(y["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(y.value);break;case"percentage":v.t="n",v.v=parseFloat(y.value);break;case"currency":v.t="n",v.v=parseFloat(y.value);break;case"date":v.t="d",v.v=Ha(y["date-value"]),r.cellDates||(v.t="n",v.v=Fi(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=eCe(y["time-value"])/86400,r.cellDates&&(v.t="d",v.v=Zk(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(y.数据数值);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",y["string-value"]!=null&&(w=Qn(y["string-value"]),T=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(J=!1,v.t==="s"&&(v.v=w||"",T.length&&(v.R=T),J=_==0),K.Target&&(v.l=K),W.length>0&&(v.c=W,W=[]),w&&r.cellText!==!1&&(v.w=w),J&&(v.t="z",delete v.v),(!J||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=j))for(var ce=0;ce<Z;++ce){if(V=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(g[j+ce]||(g[j+ce]=[]),g[j+ce][I]=ce==0?v:Va(v);--V>0;)g[j+ce][I+V]=Va(v);else for(g[Hr({r:j+ce,c:I})]=v;--V>0;)g[Hr({r:j+ce,c:I+V})]=Va(v);E.e.c<=I&&(E.e.c=I)}V=parseInt(y["number-columns-repeated"]||"1",10),I+=V-1,V=0,v={},w="",T=[]}K={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!0]);break;case"annotation":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s;P.t=w,T.length&&(P.R=T),P.a=U,W.push(P)}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);U="",z=0,w="",_=0,T=[];break;case"creator":x[1]==="/"?U=n.slice(z,x.index):z=x.index+x[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);w="",_=0,T=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(x[1]==="/"){if(B[l.name]=c,(s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&(c="",l=qr(x[0],!1),a.push([x[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":o=qr(x[0],!1),c+=SV[x[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":o=qr(x[0],!1),c+=SV[x[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(x[0].slice(-2)==="/>")break;if(x[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,x.index);break}else u=x.index+x[0].length;break;case"named-range":o=qr(x[0],!1),ee=yB(o["cell-range-address"]);var de={Name:o.name,Ref:ee[0]+"!"+ee[1]};te&&(de.Sheet=m.length),G.Names.push(de);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(x[1]==="/"&&(!y||!y["string-value"])){var Be=SIe(n.slice(_,x.index));w=(w.length>0?w+`
`:"")+Be[0]}else qr(x[0],!1),_=x.index+x[0].length;break;case"s":break;case"database-range":if(x[1]==="/")break;try{ee=yB(qr(x[0])["target-range-address"]),h[ee[0]]["!autofilter"]={ref:ee[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(x[1]!=="/"){if(K=qr(x[0],!1),!K.href)break;K.Target=Qn(K.href),delete K.href,K.Target.charAt(0)=="#"&&K.Target.indexOf(".")>-1?(ee=yB(K.Target.slice(1)),K.Target="#"+ee[0]+"!"+ee[1]):K.Target.match(/^\.\.[\\\/]/)&&(K.Target=K.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(x[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(x)}}var ae={Sheets:h,SheetNames:m,Workbook:G};return r.bookSheets&&delete ae.Sheets,ae}function kV(e,t){t=t||{},Ou(e,"META-INF/manifest.xml")&&e5e(Ai(e,"META-INF/manifest.xml"),t);var r=Qc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=pne(Ea(r),t);return Ou(e,"meta.xml")&&(n.Props=ire(Ai(e,"meta.xml"))),n}function jV(e,t){return pne(e,t)}var kIe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+r2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return ri+t}}(),BV=function(){var e=function(s){return pa(s).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,o,l){var c=[];c.push('      <table:table table:name="'+pa(o.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=cc(s["!ref"]||"A1"),h=s["!merges"]||[],m=0,g=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var x="",v=s["!rows"]||[];for(u=0;u<f.s.r;++u)x=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+x+`></table:table-row>
`);for(;u<=f.e.r;++u){for(x=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+x+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var y=!1,w={},_="";for(m=0;m!=h.length;++m)if(!(h[m].s.c>d)&&!(h[m].s.r>u)&&!(h[m].e.c<d)&&!(h[m].e.r<u)){(h[m].s.c!=d||h[m].s.r!=u)&&(y=!0),w["table:number-columns-spanned"]=h[m].e.c-h[m].s.c+1,w["table:number-rows-spanned"]=h[m].e.r-h[m].s.r+1;break}if(y){c.push(r);continue}var T=Hr({r:u,c:d}),j=g?(s[u]||[])[d]:s[T];if(j&&j.f&&(w["table:formula"]=pa(Kje(j.f)),j.F&&j.F.slice(0,T.length)==T)){var I=cc(j.F);w["table:number-matrix-columns-spanned"]=I.e.c-I.s.c+1,w["table:number-matrix-rows-spanned"]=I.e.r-I.s.r+1}if(!j){c.push(t);continue}switch(j.t){case"b":_=j.v?"TRUE":"FALSE",w["office:value-type"]="boolean",w["office:boolean-value"]=j.v?"true":"false";break;case"n":_=j.w||String(j.v||0),w["office:value-type"]="float",w["office:value"]=j.v||0;break;case"s":case"str":_=j.v==null?"":j.v,w["office:value-type"]="string";break;case"d":_=j.w||Ha(j.v).toISOString(),w["office:value-type"]="date",w["office:date-value"]=Ha(j.v).toISOString(),w["table:style-name"]="ce1";break;default:c.push(t);continue}var E=e(_);if(j.l&&j.l.Target){var S=j.l.Target;S=S.charAt(0)=="#"?"#"+Wje(S.slice(1)):S,S.charAt(0)!="#"&&!S.match(/^\w+:/)&&(S="../"+S),E=Kt("text:a",E,{"xlink:href":S.replace(/&/g,"&amp;")})}c.push("          "+Kt("table:table-cell",Kt("text:p",E,{}),w)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,o){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;km(f),f.ods=l;var h=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),s.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(o,l){var c=[ri],u=r2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=r2({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(sre().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)c.push(n(o.Sheets[o.SheetNames[f]],o,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function gne(e,t){if(t.bookType=="fods")return BV(e,t);var r=xR(),n="",a=[],s=[];return n="mimetype",dn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",dn(r,n,BV(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",dn(r,n,kIe(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",dn(r,n,ri+sre()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",dn(r,n,n5e(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",dn(r,n,t5e(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Cg(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function kF(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Ea(zm(e))}function jIe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Uc(qf(e))}function BIe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Bm(e){var t=e.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function TV(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function TIe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function IIe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=a&255;e[t+15]|=r>=0?0:128}function u2(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function Aa(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Fs(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Wn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=u2(e,r),s=a&7;a=Math.floor(a/8);var o=0,l;if(a==0)break;switch(s){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=u2(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:s};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function mo(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(Aa(n*8+a.type)),a.type==2&&t.push(Aa(a.data.length)),t.push(a.data))})}),Bm(t)}function $R(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function Tu(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=u2(e,n),s=Wn(e.slice(n[0],n[0]+a));n[0]+=a;var o={id:Fs(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=Wn(l.data),u=Fs(c[3][0].data);o.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=s[3])!=null&&t[0]&&(o.merge=Fs(s[3][0].data)>>>0>0),r.push(o)}return r}function Fx(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:Aa(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Aa(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(o){a.push(o.data),o.meta[3]=[{type:0,data:Aa(o.data.length)}],n[2].push({data:mo(o.meta),type:2})});var s=mo(n);t.push(Aa(s.length)),t.push(s),a.forEach(function(o){return t.push(o)})}),Bm(t)}function FIe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=u2(t,r),a=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}a.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(s==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,s==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[Bm(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=Bm(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Iu(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(FIe(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Bm(t)}function Ox(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=Aa(n),o=s.length;t.push(s),n<=60?(o++,t.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),o+=n,a[0]=0,a[1]=o&255,a[2]=o>>8&255,a[3]=o>>16&255,r+=n}return Bm(t)}function OIe(e,t,r,n){var a=Cg(e),s=a.getUint32(4,!0),o=(n>1?12:8)+TV(s&(n>1?3470:398))*4,l=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(l=a.getUint32(o,!0),o+=4),o+=TV(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(o,!0),o+=4),s&32&&(u=a.getFloat64(o,!0),o+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(o,!0)*1e3),o+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function DIe(e,t,r){var n=Cg(e),a=n.getUint32(8,!0),s=12,o=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=TIe(e,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(l=n.getUint32(s,!0),s+=4),a&16&&(o=n.getUint32(s,!0),s+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return f}function EB(e,t){var r=new Uint8Array(32),n=Cg(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,IIe(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function NB(e,t){var r=new Uint8Array(32),n=Cg(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function PIe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return OIe(e,t,r,e[0]);case 5:return DIe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Ko(e){var t=Wn(e);return u2(t[1][0].data)}function IV(e,t){var r=Wn(t.data),n=Fs(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(o){var l=Wn(o.data),c=Fs(l[1][0].data)>>>0;switch(n){case 1:s[c]=kF(l[3][0].data);break;case 8:{var u=e[Ko(l[9][0].data)][0],d=Wn(u.data),f=e[Ko(d[1][0].data)][0],h=Fs(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var m=Wn(f.data);s[c]=m[3].map(function(g){return kF(g.data)}).join("")}break}}),s}function RIe(e,t){var r,n,a,s,o,l,c,u,d,f,h,m,g,x,v=Wn(e),y=Fs(v[1][0].data)>>>0,w=Fs(v[2][0].data)>>>0,_=((n=(r=v[8])==null?void 0:r[0])==null?void 0:n.data)&&Fs(v[8][0].data)>0||!1,T,j;if((s=(a=v[7])==null?void 0:a[0])!=null&&s.data&&t!=0)T=(l=(o=v[7])==null?void 0:o[0])==null?void 0:l.data,j=(u=(c=v[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=v[4])==null?void 0:d[0])!=null&&f.data&&t!=1)T=(m=(h=v[4])==null?void 0:h[0])==null?void 0:m.data,j=(x=(g=v[3])==null?void 0:g[0])==null?void 0:x.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var I=_?4:1,E=Cg(T),S=[],B=0;B<T.length/2;++B){var M=E.getUint16(B*2,!0);M<65535&&S.push([B,M])}if(S.length!=w)throw"Expected ".concat(w," cells, found ").concat(S.length);var R=[];for(B=0;B<S.length-1;++B)R[S[B][0]]=j.subarray(S[B][1]*I,S[B+1][1]*I);return S.length>=1&&(R[S[S.length-1][0]]=j.subarray(S[S.length-1][1]*I)),{R:y,cells:R}}function LIe(e,t){var r,n=Wn(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Fs(n[7][0].data)>>>0>0?1:0:-1,s=$R(n[5],function(o){return RIe(o,a)});return{nrows:Fs(n[4][0].data)>>>0,data:s.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,u){if(o[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));o[l.R][u]=c}),o},[])}}function MIe(e,t,r){var n,a=Wn(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Fs(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Fs(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=nn(s);var o=Wn(a[4][0].data),l=IV(e,e[Ko(o[4][0].data)][0]),c=(n=o[17])!=null&&n[0]?IV(e,e[Ko(o[17][0].data)][0]):[],u=Wn(o[3][0].data),d=0;u[1].forEach(function(f){var h=Wn(f.data),m=e[Ko(h[2][0].data)][0],g=Fs(m.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var x=LIe(e,m);x.data.forEach(function(v,y){v.forEach(function(w,_){var T=Hr({r:d+y,c:_}),j=PIe(w,l,c);j&&(r[T]=j)})}),d+=x.nrows})}function UIe(e,t){var r=Wn(t.data),n={"!ref":"A1"},a=e[Ko(r[2][0].data)],s=Fs(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return MIe(e,a[0],n),n}function QIe(e,t){var r,n=Wn(t.data),a={name:(r=n[1])!=null&&r[0]?kF(n[1][0].data):"",sheets:[]},s=$R(n[2],Ko);return s.forEach(function(o){e[o].forEach(function(l){var c=Fs(l.meta[1][0].data);c==6e3&&a.sheets.push(UIe(e,l))})}),a}function HIe(e,t){var r=XR(),n=Wn(t.data),a=$R(n[1],Ko);if(a.forEach(function(s){e[s].forEach(function(o){var l=Fs(o.meta[1][0].data);if(l==2){var c=QIe(e,o);c.sheets.forEach(function(u,d){YR(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function CB(e){var t,r,n,a,s={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=Iu(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=Tu(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var l=((a=(n=(r=(t=s==null?void 0:s[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Fs(s[1][0].meta[1][0].data)==1&&s[1][0];if(l||o.forEach(function(c){s[c].forEach(function(u){var d=Fs(u.meta[1][0].data)>>>0;if(d==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return HIe(s,l)}function VIe(e,t,r){var n,a,s,o;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(s=e[8])==null?void 0:s[0])==null?void 0:o.data)&&Fs(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=Cg(e[7][0].data),d=0,f=[],h=Cg(e[4][0].data),m=0,g=[],x=0;x<t.length;++x){if(t[x]==null){u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535);continue}u.setUint16(x*2,d,!0),h.setUint16(x*2,m,!0);var v,y;switch(typeof t[x]){case"string":v=EB({t:"s",v:t[x]},r),y=NB({t:"s",v:t[x]},r);break;case"number":v=EB({t:"n",v:t[x]},r),y=NB({t:"n",v:t[x]},r);break;case"boolean":v=EB({t:"b",v:t[x]},r),y=NB({t:"b",v:t[x]},r);break;default:throw new Error("Unsupported value "+t[x])}f.push(v),d+=v.length,g.push(y),m+=y.length,++c}for(e[2][0].data=Aa(c);x<e[7][0].data.length/2;++x)u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535,!0);return e[6][0].data=Bm(f),e[3][0].data=Bm(g),c}function zIe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=cc(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(nn(n)));var s=z_(r,{range:n,header:1}),o=["~Sh33tJ5~"];s.forEach(function(U){return U.forEach(function(z){typeof z=="string"&&o.push(z)})});var l={},c=[],u=Sr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(U,z){return[U,u.FullPaths[z]]}).forEach(function(U){var z=U[0],J=U[1];if(z.type==2&&z.name.match(/\.iwa/)){var te=z.content,se=Iu(te),ie=Tu(se);ie.forEach(function(ce){c.push(ce.id),l[ce.id]={deps:[],location:J,type:Fs(ce.messages[0].meta[1][0].data)}})}}),c.sort(function(U,z){return U-z});var d=c.filter(function(U){return U>1}).map(function(U){return[U,Aa(U)]});u.FileIndex.map(function(U,z){return[U,u.FullPaths[z]]}).forEach(function(U){var z=U[0];if(U[1],!!z.name.match(/\.iwa/)){var J=Tu(Iu(z.content));J.forEach(function(te){te.messages.forEach(function(se){d.forEach(function(ie){te.messages.some(function(ce){return Fs(ce.meta[1][0].data)!=11006&&BIe(ce.data,ie[1])})&&l[ie[0]].deps.push(te.id)})})})}});for(var f=Sr.find(u,l[1].location),h=Tu(Iu(f.content)),m,g=0;g<h.length;++g){var x=h[g];x.id==1&&(m=x)}var v=Ko(Wn(m.messages[0].data)[1][0].data);for(f=Sr.find(u,l[v].location),h=Tu(Iu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);for(v=Ko(Wn(m.messages[0].data)[2][0].data),f=Sr.find(u,l[v].location),h=Tu(Iu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);for(v=Ko(Wn(m.messages[0].data)[2][0].data),f=Sr.find(u,l[v].location),h=Tu(Iu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);var y=Wn(m.messages[0].data);{y[6][0].data=Aa(n.e.r+1),y[7][0].data=Aa(n.e.c+1);var w=Ko(y[46][0].data),_=Sr.find(u,l[w].location),T=Tu(Iu(_.content));{for(var j=0;j<T.length&&T[j].id!=w;++j);if(T[j].id!=w)throw"Bad ColumnRowUIDMapArchive";var I=Wn(T[j].messages[0].data);I[1]=[],I[2]=[],I[3]=[];for(var E=0;E<=n.e.c;++E){var S=[];S[1]=S[2]=[{type:0,data:Aa(E+420690)}],I[1].push({type:2,data:mo(S)}),I[2].push({type:0,data:Aa(E)}),I[3].push({type:0,data:Aa(E)})}I[4]=[],I[5]=[],I[6]=[];for(var B=0;B<=n.e.r;++B)S=[],S[1]=S[2]=[{type:0,data:Aa(B+726270)}],I[4].push({type:2,data:mo(S)}),I[5].push({type:0,data:Aa(B)}),I[6].push({type:0,data:Aa(B)});T[j].messages[0].data=mo(I)}_.content=Ox(Fx(T)),_.size=_.content.length,delete y[46];var M=Wn(y[4][0].data);{M[7][0].data=Aa(n.e.r+1);var R=Wn(M[1][0].data),k=Ko(R[2][0].data);_=Sr.find(u,l[k].location),T=Tu(Iu(_.content));{if(T[0].id!=k)throw"Bad HeaderStorageBucket";var D=Wn(T[0].messages[0].data);for(B=0;B<s.length;++B){var L=Wn(D[2][0].data);L[1][0].data=Aa(B),L[4][0].data=Aa(s[B].length),D[2][B]={type:D[2][0].type,data:mo(L)}}T[0].messages[0].data=mo(D)}_.content=Ox(Fx(T)),_.size=_.content.length;var Z=Ko(M[2][0].data);_=Sr.find(u,l[Z].location),T=Tu(Iu(_.content));{if(T[0].id!=Z)throw"Bad HeaderStorageBucket";for(D=Wn(T[0].messages[0].data),E=0;E<=n.e.c;++E)L=Wn(D[2][0].data),L[1][0].data=Aa(E),L[4][0].data=Aa(n.e.r+1),D[2][E]={type:D[2][0].type,data:mo(L)};T[0].messages[0].data=mo(D)}_.content=Ox(Fx(T)),_.size=_.content.length;var V=Ko(M[4][0].data);(function(){for(var U=Sr.find(u,l[V].location),z=Tu(Iu(U.content)),J,te=0;te<z.length;++te){var se=z[te];se.id==V&&(J=se)}var ie=Wn(J.messages[0].data);{ie[3]=[];var ce=[];o.forEach(function(ae,Se){ce[1]=[{type:0,data:Aa(Se)}],ce[2]=[{type:0,data:Aa(1)}],ce[3]=[{type:2,data:jIe(ae)}],ie[3].push({type:2,data:mo(ce)})})}J.messages[0].data=mo(ie);var de=Fx(z),Be=Ox(de);U.content=Be,U.size=U.content.length})();var q=Wn(M[3][0].data);{var G=q[1][0];delete q[2];var K=Wn(G.data);{var ee=Ko(K[2][0].data);(function(){for(var U=Sr.find(u,l[ee].location),z=Tu(Iu(U.content)),J,te=0;te<z.length;++te){var se=z[te];se.id==ee&&(J=se)}var ie=Wn(J.messages[0].data);{delete ie[6],delete q[7];var ce=new Uint8Array(ie[5][0].data);ie[5]=[];for(var de=0,Be=0;Be<=n.e.r;++Be){var ae=Wn(ce);de+=VIe(ae,s[Be],o),ae[1][0].data=Aa(Be),ie[5].push({data:mo(ae),type:2})}ie[1]=[{type:0,data:Aa(n.e.c+1)}],ie[2]=[{type:0,data:Aa(n.e.r+1)}],ie[3]=[{type:0,data:Aa(de)}],ie[4]=[{type:0,data:Aa(n.e.r+1)}]}J.messages[0].data=mo(ie);var Se=Fx(z),ke=Ox(Se);U.content=ke,U.size=U.content.length})()}G.data=mo(K)}M[3][0].data=mo(q)}y[4][0].data=mo(M)}m.messages[0].data=mo(y);var W=Fx(h),P=Ox(W);return f.content=P,f.size=f.content.length,u}function xne(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function GR(e){xne([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function qR(e){xne([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function $Ie(e){return Cn.WS.indexOf(e)>-1?"sheet":e==Cn.CS?"chart":e==Cn.DS?"dialog":e==Cn.MS?"macro":e&&e.length?e:"sheet"}function GIe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,$Ie(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function qIe(e,t,r,n,a,s,o,l,c,u,d,f){try{s[n]=vw(Qc(e,r,!0),t);var h=Ai(e,t),m;switch(l){case"sheet":m=mTe(h,t,a,c,s[n],u,d,f);break;case"chart":if(m=pTe(h,t,a,c,s[n],u,d,f),!m||!m["!drawel"])break;var g=qy(m["!drawel"].Target,t),x=a2(g),v=r4e(Qc(e,g,!0),vw(Qc(e,x,!0),g)),y=qy(v,g),w=a2(y);m=VBe(Qc(e,y,!0),y,c,vw(Qc(e,w,!0),y),u,m);break;case"macro":m=gTe(h,t,a,c,s[n],u,d,f);break;case"dialog":m=xTe(h,t,a,c,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=m;var _=[];s&&s[n]&&Ds(s[n]).forEach(function(T){var j="";if(s[n][T].Type==Cn.CMNT){j=qy(s[n][T].Target,t);var I=wTe(Ai(e,j,!0),j,c);if(!I||!I.length)return;gV(m,I,!1)}s[n][T].Type==Cn.TCMNT&&(j=qy(s[n][T].Target,t),_=_.concat(a4e(Ai(e,j,!0),c)))}),_&&_.length&&gV(m,_,!0,c.people||[])}catch(T){if(c.WTF)throw T}}function Cu(e){return e.charAt(0)=="/"?e.slice(1):e}function KIe(e,t){if(Zb(),t=t||{},GR(t),Ou(e,"META-INF/manifest.xml")||Ou(e,"objectdata.xml"))return kV(e,t);if(Ou(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof CB<"u"){if(e.FileIndex)return CB(e);var r=Sr.utils.cfb_new();return LH(e).forEach(function(L){dn(r,L,sCe(e,L))}),CB(r)}throw new Error("Unsupported NUMBERS file")}if(!Ou(e,"[Content_Types].xml"))throw Ou(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Ou(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=LH(e),a=JCe(Qc(e,"[Content_Types].xml")),s=!1,o,l;if(a.workbooks.length===0&&(l="xl/workbook.xml",Ai(e,l,!0)&&a.workbooks.push(l)),a.workbooks.length===0){if(l="xl/workbook.bin",!Ai(e,l,!0))throw new Error("Could not find workbook");a.workbooks.push(l),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(bw=[],a.sst)try{bw=yTe(Ai(e,Cu(a.sst)),a.sst,t)}catch(L){if(t.WTF)throw L}t.cellStyles&&a.themes.length&&(c=bTe(Qc(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(u=vTe(Ai(e,Cu(a.style)),a.style,c,t))}a.links.map(function(L){try{var Z=vw(Qc(e,a2(Cu(L))),L);return NTe(Ai(e,Cu(L)),Z,L,t)}catch{}});var d=hTe(Ai(e,Cu(a.workbooks[0])),a.workbooks[0],t),f={},h="";a.coreprops.length&&(h=Ai(e,Cu(a.coreprops[0]),!0),h&&(f=ire(h)),a.extprops.length!==0&&(h=Ai(e,Cu(a.extprops[0]),!0),h&&s5e(h,f,t)));var m={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(h=Qc(e,Cu(a.custprops[0]),!0),h&&(m=o5e(h,t)));var g={};if((t.bookSheets||t.bookProps)&&(d.Sheets?o=d.Sheets.map(function(Z){return Z.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),t.bookProps&&(g.Props=f,g.Custprops=m),t.bookSheets&&typeof o<"u"&&(g.SheetNames=o),t.bookSheets?g.SheetNames:t.bookProps))return g;o={};var x={};t.bookDeps&&a.calcchain&&(x=ETe(Ai(e,Cu(a.calcchain)),a.calcchain));var v=0,y={},w,_;{var T=d.Sheets;f.Worksheets=T.length,f.SheetNames=[];for(var j=0;j!=T.length;++j)f.SheetNames[j]=T[j].name}var I=s?"bin":"xml",E=a.workbooks[0].lastIndexOf("/"),S=(a.workbooks[0].slice(0,E+1)+"_rels/"+a.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");Ou(e,S)||(S="xl/_rels/workbook."+I+".rels");var B=vw(Qc(e,S,!0),S.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=CTe(Ai(e,Cu(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=i4e(Ai(e,Cu(a.people[0])),t)),B&&(B=GIe(B,d.Sheets));var M=Ai(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=f.Worksheets;++v){var R="sheet";if(B&&B[v]?(w="xl/"+B[v][1].replace(/[\/]?xl\//,""),Ou(e,w)||(w=B[v][1]),Ou(e,w)||(w=S.replace(/_rels\/.*$/,"")+B[v][1]),R=B[v][2]):(w="xl/worksheets/sheet"+(v+1-M)+"."+I,w=w.replace(/sheet0\./,"sheet.")),_=w.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(f.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var k=!1,D=0;D!=t.sheets.length;++D)typeof t.sheets[D]=="number"&&t.sheets[D]==v&&(k=1),typeof t.sheets[D]=="string"&&t.sheets[D].toLowerCase()==f.SheetNames[v].toLowerCase()&&(k=1);if(!k)continue e}}qIe(e,w,_,f.SheetNames[v],v,y,o,R,t,d,c,u)}return g={Directory:a,Workbook:d,Props:f,Custprops:m,Deps:x,Sheets:o,SheetNames:f.SheetNames,Strings:bw,Styles:u,Themes:c,SSF:Va(Mr)},t&&t.bookFiles&&(e.files?(g.keys=n,g.files=e.files):(g.keys=[],g.files={},e.FullPaths.forEach(function(L,Z){L=L.replace(/^Root Entry[\/]/,""),g.keys.push(L),g.files[L]=e.FileIndex[Z]}))),t&&t.bookVBA&&(a.vba.length>0?g.vbaraw=Ai(e,Cu(a.vba[0]),!0):a.defaults&&a.defaults.bin===h4e&&(g.vbaraw=Ai(e,"xl/vbaProject.bin",!0))),g}function WIe(e,t){var r=t||{},n="Workbook",a=Sr.find(e,n);try{if(n="/!DataSpaces/Version",a=Sr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(CSe(a.content),n="/!DataSpaces/DataSpaceMap",a=Sr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=SSe(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=Sr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=kSe(a.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=Sr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);BSe(a.content)}catch{}if(n="/EncryptionInfo",a=Sr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=TSe(a.content);if(n="/EncryptedPackage",a=Sr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],a.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function XIe(e,t){return t.bookType=="ods"?gne(e,t):t.bookType=="numbers"?zIe(e,t):t.bookType=="xlsb"?YIe(e,t):JIe(e,t)}function YIe(e,t){pv=1024,e&&!e.SSF&&(e.SSF=Va(Mr)),e&&e.SSF&&(Zb(),Xk(e.SSF),t.revssf=Jk(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,yw?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=$re.indexOf(t.bookType)>-1,a=IR();qR(t=t||{});var s=xR(),o="",l=0;if(t.cellXfs=[],Gm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",dn(s,o,ore(e.Props,t)),a.coreprops.push(o),ha(t.rels,2,o,Cn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,dn(s,o,ure(e.Props)),a.extprops.push(o),ha(t.rels,3,o,Cn.EXT_PROPS),e.Custprops!==e.Props&&Ds(e.Custprops||{}).length>0&&(o="docProps/custom.xml",dn(s,o,dre(e.Custprops)),a.custprops.push(o),ha(t.rels,4,o,Cn.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var d={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,dn(s,o,STe(l-1,o,t,e,d)),a.sheets.push(o),ha(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Cn.WS[0])}if(f){var m=f["!comments"],g=!1,x="";m&&m.length>0&&(x="xl/comments"+l+"."+r,dn(s,x,BTe(m,x)),a.comments.push(x),ha(d,-1,"../comments"+l+"."+r,Cn.CMNT),g=!0),f["!legacy"]&&g&&dn(s,"xl/drawings/vmlDrawing"+l+".vml",Vre(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&dn(s,a2(o),Pv(d))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,dn(s,o,jTe(t.Strings,o,t)),a.strs.push(o),ha(t.wbrels,-1,"sharedStrings."+r,Cn.SST)),o="xl/workbook."+r,dn(s,o,_Te(e,o)),a.workbooks.push(o),ha(t.rels,1,o,Cn.WB),o="xl/theme/theme1.xml",dn(s,o,LR(e.Themes,t)),a.themes.push(o),ha(t.wbrels,-1,"theme/theme1.xml",Cn.THEME),o="xl/styles."+r,dn(s,o,kTe(e,o,t)),a.styles.push(o),ha(t.wbrels,-1,"styles."+r,Cn.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",dn(s,o,e.vbaraw),a.vba.push(o),ha(t.wbrels,-1,"vbaProject.bin",Cn.VBA)),o="xl/metadata."+r,dn(s,o,TTe(o)),a.metadata.push(o),ha(t.wbrels,-1,"metadata."+r,Cn.XLMETA),dn(s,"[Content_Types].xml",are(a,t)),dn(s,"_rels/.rels",Pv(t.rels)),dn(s,"xl/_rels/workbook."+r+".rels",Pv(t.wbrels)),delete t.revssf,delete t.ssf,s}function JIe(e,t){pv=1024,e&&!e.SSF&&(e.SSF=Va(Mr)),e&&e.SSF&&(Zb(),Xk(e.SSF),t.revssf=Jk(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,yw?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=$re.indexOf(t.bookType)>-1,a=IR();qR(t=t||{});var s=xR(),o="",l=0;if(t.cellXfs=[],Gm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",dn(s,o,ore(e.Props,t)),a.coreprops.push(o),ha(t.rels,2,o,Cn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,dn(s,o,ure(e.Props)),a.extprops.push(o),ha(t.rels,3,o,Cn.EXT_PROPS),e.Custprops!==e.Props&&Ds(e.Custprops||{}).length>0&&(o="docProps/custom.xml",dn(s,o,dre(e.Custprops)),a.custprops.push(o),ha(t.rels,4,o,Cn.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},h=e.Sheets[e.SheetNames[l-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,dn(s,o,rne(l-1,t,e,f)),a.sheets.push(o),ha(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Cn.WS[0])}if(h){var g=h["!comments"],x=!1,v="";if(g&&g.length>0){var y=!1;g.forEach(function(w){w[1].forEach(function(_){_.T==!0&&(y=!0)})}),y&&(v="xl/threadedComments/threadedComment"+l+"."+r,dn(s,v,s4e(g,d,t)),a.threadedcomments.push(v),ha(f,-1,"../threadedComments/threadedComment"+l+"."+r,Cn.TCMNT)),v="xl/comments"+l+"."+r,dn(s,v,zre(g)),a.comments.push(v),ha(f,-1,"../comments"+l+"."+r,Cn.CMNT),x=!0}h["!legacy"]&&x&&dn(s,"xl/drawings/vmlDrawing"+l+".vml",Vre(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&dn(s,a2(o),Pv(f))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,dn(s,o,Tre(t.Strings,t)),a.strs.push(o),ha(t.wbrels,-1,"sharedStrings."+r,Cn.SST)),o="xl/workbook."+r,dn(s,o,one(e)),a.workbooks.push(o),ha(t.rels,1,o,Cn.WB),o="xl/theme/theme1.xml",dn(s,o,LR(e.Themes,t)),a.themes.push(o),ha(t.wbrels,-1,"theme/theme1.xml",Cn.THEME),o="xl/styles."+r,dn(s,o,Mre(e,t)),a.styles.push(o),ha(t.wbrels,-1,"styles."+r,Cn.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",dn(s,o,e.vbaraw),a.vba.push(o),ha(t.wbrels,-1,"vbaProject.bin",Cn.VBA)),o="xl/metadata."+r,dn(s,o,Hre()),a.metadata.push(o),ha(t.wbrels,-1,"metadata."+r,Cn.XLMETA),d.length>1&&(o="xl/persons/person.xml",dn(s,o,o4e(d)),a.people.push(o),ha(t.wbrels,-1,"persons/person.xml",Cn.PEOPLE)),dn(s,"[Content_Types].xml",are(a,t)),dn(s,"_rels/.rels",Pv(t.rels)),dn(s,"xl/_rels/workbook."+r+".rels",Pv(t.wbrels)),delete t.revssf,delete t.ssf,s}function KR(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Wc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function ZIe(e,t){return Sr.find(e,"EncryptedPackage")?WIe(e,t):dne(e,t)}function e6e(e,t){var r,n=e,a=t||{};return a.type||(a.type=vn&&Buffer.isBuffer(e)?"buffer":"base64"),r=Fte(n,a),KIe(r,a)}function vne(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return _F(e.slice(r),t);default:break e}return ub.to_workbook(e,t)}function t6e(e,t){var r="",n=KR(e,t);switch(t.type){case"base64":r=Wc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=yg(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ea(r)),t.type="binary",vne(r,t)}function r6e(e,t){var r=e;return t.type=="base64"&&(r=Wc(r)),r=Jw.utils.decode(1200,r.slice(2),"str"),t.type="binary",vne(r,t)}function n6e(e){return e.match(/[^\x00-\x7F]/)?qf(e):e}function _B(e,t,r,n){return n?(r.type="string",ub.to_workbook(e,r)):ub.to_workbook(t,r)}function fb(e,t){AR();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return fb(new Uint8Array(e),(r=Va(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Lv={},r.dateNF&&(Lv.dateNF=r.dateNF),r.type||(r.type=vn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=vn?"buffer":"binary",n=YNe(e),typeof Uint8Array<"u"&&!vn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=n6e(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=Va(r),r.type="array",fb(hR(n),r)}switch((a=KR(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return ZIe(Sr.read(n,r),r);break;case 9:if(a[1]<=8)return dne(n,r);break;case 60:return _F(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return lSe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return jre.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?e6e(n,r):_B(e,n,r,s);case 239:return a[3]===60?_F(n,r):_B(e,n,r,s);case 255:if(a[1]===254)return r6e(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return tg.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return tg.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return CF.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return Pre.to_workbook(n,r);break;case 10:case 13:case 32:return t6e(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return oSe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?CF.to_workbook(n,r):_B(e,n,r,s)}function bne(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return eE(t.file,Sr.write(e,{type:vn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Sr.write(e,t)}function a6e(e,t){var r=Va(t||{}),n=XIe(e,r);return s6e(n,r)}function s6e(e,t){var r={},n=vn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?Sr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(Wk(a))}return t.password&&typeof encrypt_agile<"u"?bne(encrypt_agile(a,t.password),t):t.type==="file"?eE(t.file,a):t.type=="string"?Ea(a):a}function i6e(e,t){var r=t||{},n=nIe(e,r);return bne(n,r)}function Df(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return Zw(qf(n));case"binary":return qf(n);case"string":return e;case"file":return eE(t.file,n,"utf8");case"buffer":return vn?Mh(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Df(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function o6e(e,t){switch(t.type){case"base64":return Zw(e);case"binary":return e;case"string":return e;case"file":return eE(t.file,e,"binary");case"buffer":return vn?Mh(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function aC(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?Zw(r):t.type=="string"?Ea(r):r;case"file":return eE(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function yne(e,t){AR(),ZBe(e);var r=Va(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=yne(e,r);return r.type="array",Wk(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Df(XTe(e,r),r);case"slk":case"sylk":return Df(kre.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return Df(Ane(e.Sheets[e.SheetNames[a]],r),r);case"txt":return o6e(wne(e.Sheets[e.SheetNames[a]],r),r);case"csv":return Df(WR(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return Df(jre.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return aC(CF.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return Df(ub.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return Df(Pre.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return Df(Bre.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return Df(gne(e,r),r);case"wk1":return aC(tg.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return aC(tg.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),aC(fne(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),i6e(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return a6e(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function l6e(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function lE(e,t,r){var n={};return n.type="file",n.file=t,l6e(n),yne(e,n)}function c6e(e,t,r,n,a,s,o,l){var c=ei(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!o||e[r])for(var m=t.s.c;m<=t.e.c;++m){var g=o?e[r][m]:e[n[m]+c];if(g===void 0||g.t===void 0){if(u===void 0)continue;s[m]!=null&&(h[s[m]]=u);continue}var x=g.v;switch(g.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(s[m]!=null){if(x==null)if(g.t=="e"&&x===null)h[s[m]]=null;else if(u!==void 0)h[s[m]]=u;else if(d&&x===null)h[s[m]]=null;else continue;else h[s[m]]=d&&(g.t!=="n"||g.t==="n"&&l.rawNumbers!==!1)?x:Ch(g,x,l);x!=null&&(f=!1)}}return{row:h,isempty:f}}function z_(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=Hn(d);break;case"number":c=Hn(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=ei(c.s.r),h=[],m=[],g=0,x=0,v=Array.isArray(e),y=c.s.r,w=0,_={};v&&!e[y]&&(e[y]=[]);var T=u.skipHidden&&e["!cols"]||[],j=u.skipHidden&&e["!rows"]||[];for(w=c.s.c;w<=c.e.c;++w)if(!(T[w]||{}).hidden)switch(h[w]=cs(w),r=v?e[y][w]:e[h[w]+f],n){case 1:s[w]=w-c.s.c;break;case 2:s[w]=h[w];break;case 3:s[w]=u.header[w-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=Ch(r,null,u),x=_[o]||0,!x)_[o]=1;else{do l=o+"_"+x++;while(_[l]);_[o]=x,_[l]=1}s[w]=l}for(y=c.s.r+a;y<=c.e.r;++y)if(!(j[y]||{}).hidden){var I=c6e(e,c,y,h,n,s,v,u);(I.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(m[g++]=I.row)}return m.length=g,m}var FV=/"/g;function u6e(e,t,r,n,a,s,o,l){for(var c=!0,u=[],d="",f=ei(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var m=l.dense?(e[r]||[])[h]:e[n[h]+f];if(m==null)d="";else if(m.v!=null){c=!1,d=""+(l.rawNumbers&&m.t=="n"?m.v:Ch(m,null,l));for(var g=0,x=0;g!==d.length;++g)if((x=d.charCodeAt(g))===a||x===s||x===34||l.forceQuotes){d='"'+d.replace(FV,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(c=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(FV,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(o)}function WR(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=Hn(e["!ref"]),s=n.FS!==void 0?n.FS:",",o=s.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],m=n.skipHidden&&e["!rows"]||[],g=a.s.c;g<=a.e.c;++g)(h[g]||{}).hidden||(f[g]=cs(g));for(var x=0,v=a.s.r;v<=a.e.r;++v)(m[v]||{}).hidden||(d=u6e(e,a,v,f,o,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((x++?l:"")+d)));return delete n.dense,r.join("")}function wne(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=WR(e,t);return r}function d6e(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=Hn(e["!ref"]),s="",o=[],l,c=[],u=Array.isArray(e);for(l=a.s.c;l<=a.e.c;++l)o[l]=cs(l);for(var d=a.s.r;d<=a.e.r;++d)for(s=ei(d),l=a.s.c;l<=a.e.c;++l)if(t=o[l]+s,r=u?(e[d]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function Ene(e,t,r){var n=r||{},a=+!n.skipHeader,s=e||{},o=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?us(n.origin):n.origin;o=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:o+t.length-1+a}};if(s["!ref"]){var f=Hn(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(o=f.e.r+1,d.e.r=o+t.length-1+a)}else o==-1&&(o=0,d.e.r=t.length-1+a);var h=n.header||[],m=0;t.forEach(function(x,v){Ds(x).forEach(function(y){(m=h.indexOf(y))==-1&&(h[m=h.length]=y);var w=x[y],_="z",T="",j=Hr({c:l+m,r:o+v+a});u=d2(s,j),w&&typeof w=="object"&&!(w instanceof Date)?s[j]=w:(typeof w=="number"?_="n":typeof w=="boolean"?_="b":typeof w=="string"?_="s":w instanceof Date?(_="d",n.cellDates||(_="n",w=Fi(w)),T=n.dateNF||Mr[14]):w===null&&n.nullError&&(_="e",w=0),u?(u.t=_,u.v=w,delete u.w,delete u.R,T&&(u.z=T)):s[j]=u={t:_,v:w},T&&(u.z=T))})}),d.e.c=Math.max(d.e.c,l+h.length-1);var g=ei(o);if(a)for(m=0;m<h.length;++m)s[cs(m+l)+g]={t:"s",v:h[m]};return s["!ref"]=nn(d),s}function f6e(e,t){return Ene(null,e,t)}function d2(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=us(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?d2(e,Hr(t)):d2(e,Hr({r:t,c:r||0}))}function A6e(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function XR(){return{SheetNames:[],Sheets:{}}}function YR(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var o=s&&s[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=o+a)!=-1;++a);}if(ine(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function h6e(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=A6e(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function m6e(e,t){return e.z=t,e}function Nne(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function p6e(e,t,r){return Nne(e,"#"+t,r)}function g6e(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function x6e(e,t,r,n){for(var a=typeof t!="string"?t:Hn(t),s=typeof t=="string"?t:nn(t),o=a.s.r;o<=a.e.r;++o)for(var l=a.s.c;l<=a.e.c;++l){var c=d2(e,o,l);c.t="n",c.F=s,delete c.v,o==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var Ti={encode_col:cs,encode_row:ei,encode_cell:Hr,encode_range:nn,decode_col:_R,decode_row:CR,split_cell:jCe,decode_cell:us,decode_range:cc,format_cell:Ch,sheet_add_aoa:Yte,sheet_add_json:Ene,sheet_add_dom:hne,aoa_to_sheet:e1,json_to_sheet:f6e,table_to_sheet:mne,table_to_book:CIe,sheet_to_csv:WR,sheet_to_txt:wne,sheet_to_json:z_,sheet_to_html:Ane,sheet_to_formulae:d6e,sheet_to_row_object_array:z_,sheet_get_cell:d2,book_new:XR,book_append_sheet:YR,book_set_sheet_visibility:h6e,cell_set_number_format:m6e,cell_set_hyperlink:Nne,cell_set_internal_link:p6e,cell_add_comment:g6e,sheet_set_array_formula:x6e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const jF="carga_horaria_asignaciones",Cne="usuarios",v6e=e=>{const t=e.data();return{id:e.id,...t}},b6e=e=>{const t=Vt(pt(lt,Cne),wr("profile","in",["PROFESORADO","SUBDIRECCION","COORDINACION_TP"]),cr("nombreCompleto","asc"));return hr(t,n=>{const a=n.docs.map(s=>{const o=s.data();return{id:s.id,nombre:o.nombreCompleto||o.nombre||o.email||"Sin nombre",departamento:o.departamento||"General",horasContrato:o.horasContrato||44,perfil:o.profile||"PROFESORADO",email:o.email}});e(a)},n=>{console.error("Error al suscribirse a los docentes:",n),e([])})},y6e=async e=>{try{return(await an(pt(lt,Cne),{nombreCompleto:e.nombre,email:e.email,departamento:e.departamento||"General",horasContrato:e.horasContrato,profile:e.perfil,createdAt:za()})).id}catch(t){throw console.error("Error al crear nuevo docente:",t),new Error("No se pudo crear el docente.")}},w6e=e=>{const t=Vt(pt(lt,jF),cr("docenteNombre","asc"));return hr(t,n=>{const a=n.docs.map(s=>v6e(s));e(a)},n=>{console.error("Error al suscribirse a las asignaciones:",n),e([])})},E6e=async(e,t=!1)=>{try{if(t){const a=(await mn(pt(lt,jF))).docs.map(s=>ka(s.ref));await Promise.all(a),console.log(`Se eliminaron ${a.length} asignaciones existentes`)}const r=e.map(n=>an(pt(lt,jF),{...n,createdAt:za(),updatedAt:za()}));await Promise.all(r),console.log(`Se guardaron ${r.length} asignaciones`)}catch(r){throw console.error("Error al guardar asignaciones en batch:",r),new Error("No se pudieron guardar todas las asignaciones.")}},$_=e=>{const t={44:38,43:37,42:36,41:35,40:35,39:34,38:33,37:32,36:31,35:30,34:29,33:29,32:28,31:27,30:26,29:25,28:24,27:23,26:22,25:22,24:21,23:20,22:19,21:18,20:17,19:16,18:16,17:15,16:14,15:13,14:12,13:11,12:10,11:10,10:9,9:8,8:7,7:6,6:5,5:4,4:3,3:2,2:1,1:1};return t[e]!==void 0?t[e]:Math.round(e*.65)},Ky=e=>{const t=$_(e);return e-t},y5=e=>Object.values(e).reduce((t,r)=>t+(r||0),0),_ne=(e,t)=>{const r=$_(e.horasContrato),n=Ky(e.horasContrato),a=t.filter(m=>m.docenteId===e.id),s=a.reduce((m,g)=>m+y5(g.horasPorCurso),0),o=a.reduce((m,g)=>{if(g.funcionesLectivas&&g.funcionesLectivas.length>0)return m+g.funcionesLectivas.reduce((x,v)=>x+v.horas,0);if(g.funcionesNoLectivas&&g.funcionesNoLectivas.length>0)return m+g.funcionesNoLectivas.reduce((x,v)=>x+v.horas,0);{const x=g.otraFuncion&&parseInt(g.otraFuncion)||0;return m+x}},0),l=s+o,c=0,u=r-l,d=n-c,f=[],h=[];return l>r&&f.push(`Excede horas lectivas: ${l}/${r}`),c>n&&f.push(`Excede horas no lectivas: ${c}/${n}`),l<r&&l>0&&h.push(`Faltan ${u} horas lectivas`),{HA:r,HB:n,sumCursos:s,sumFunciones:c,sumFuncionesLectivas:o,totalHorasLectivas:l,restantesHA:u,restantesHB:d,horasContrato:e.horasContrato,valido:f.length===0,warnings:h,errors:f}},N6e=(e,t)=>{const r=_ne(e,t),n=[];return r.errors.forEach(a=>{n.push({asignacionId:"",docenteId:e.id,tipo:"error",mensaje:`${e.nombre}: ${a}`})}),r.warnings.forEach(a=>{n.push({asignacionId:"",docenteId:e.id,tipo:"warning",mensaje:`${e.nombre}: ${a}`})}),n},C6e=e=>{const t=e.match(/^(\d+)([A-E])$/i);return t?`${t[1]}º${t[2].toUpperCase()}`:e},_6e=`
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes scaleIn {
    from { transform: scale(0.95); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }

  @keyframes slideInFromBottom {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }

  .animate-fadeIn {
    animation: fadeIn 0.3s ease-out forwards;
  }

  .animate-scaleIn {
    animation: scaleIn 0.3s ease-out forwards;
  }

  .animate-slideIn {
    animation: slideInFromBottom 0.3s ease-out forwards;
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(0,0,0,0.05);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(0,0,0,0.15);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(0,0,0,0.25);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.05);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.15);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255,255,255,0.25);
  }
`,S6e=()=>{C.useEffect(()=>{const W=document.createElement("style");return W.innerHTML=_6e,document.head.appendChild(W),()=>{document.head.removeChild(W)}},[]);const[e,t]=C.useState([]),[r,n]=C.useState([]),[a,s]=C.useState({busqueda:"",curso:"",asignatura:"",departamento:""}),[o,l]=C.useState(!1),[c,u]=C.useState("docentes"),[d,f]=C.useState([]),[h,m]=C.useState(!1),[g,x]=C.useState(!1),[v,y]=C.useState({nombre:"",email:"",departamento:"General",horasContrato:44,perfil:"PROFESORADO"}),[w,_]=C.useState("");C.useEffect(()=>b6e(P=>t(P)),[]),C.useEffect(()=>w6e(P=>{const U=P.map(z=>{let J=z.funcionesLectivas||[];!J.length&&z.funcionesNoLectivas&&z.funcionesNoLectivas.length?J=z.funcionesNoLectivas:!J.length&&z.otraFuncion&&(J=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:z.otraFuncion,horas:parseInt(z.otraFuncion)||0}]);const{funcionesNoLectivas:te,otraFuncion:se,...ie}=z;return{...ie,funcionesLectivas:J}});n(U)}),[]);const T=C.useMemo(()=>{const W={};return e.forEach(P=>{const U=r.filter(z=>z.docenteId===P.id);W[P.id]=_ne(P,U)}),W},[e,r]);C.useEffect(()=>{const W=[];e.forEach(P=>W.push(...N6e(P,r))),f(W)},[e,r]);const j=C.useMemo(()=>w?e.filter(W=>{var P;return W.nombre.toLowerCase().includes(w.toLowerCase())||((P=W.email)==null?void 0:P.toLowerCase().includes(w.toLowerCase()))}):e,[e,w]),I=C.useMemo(()=>r.filter(P=>{const U=e.find(z=>z.id===P.docenteId);return!(!U||a.busqueda&&!U.nombre.toLowerCase().includes(a.busqueda.toLowerCase())||a.asignatura&&P.asignaturaOModulo!==a.asignatura||a.departamento&&U.departamento!==a.departamento||a.curso&&!Object.keys(P.horasPorCurso).includes(a.curso))}).sort((P,U)=>P.docenteId!==U.docenteId?P.docenteId.localeCompare(U.docenteId):(P.asignaturaOModulo||"").localeCompare(U.asignaturaOModulo||"")),[r,e,a]),E=async()=>{try{if(m(!0),!v.nombre||!v.email){alert("El nombre y email son obligatorios"),m(!1);return}await y6e(v),x(!1),y({nombre:"",email:"",departamento:"General",horasContrato:44,perfil:"PROFESORADO"}),alert("Docente creado exitosamente")}catch(W){console.error(W),alert("Error al crear docente")}finally{m(!1)}},S=C.useCallback(()=>{if(e.length===0)return;const W={id:`asig_${Date.now()}`,docenteId:e[0].id,docenteNombre:e[0].nombre,asignaturaOModulo:Bs[0],funcionesLectivas:[],horasPorCurso:{},horasXAsig:0};n(P=>[...P,W])},[e]),B=C.useCallback((W,P)=>{const U=r.filter(te=>te.docenteId===W).map(te=>te.asignaturaOModulo);let z=Bs[0];for(const te of Bs)if(!U.includes(te)){z=te;break}const J={id:`asig_${Date.now()}`,docenteId:W,docenteNombre:P,asignaturaOModulo:z,funcionesLectivas:[],horasPorCurso:{},horasXAsig:0};n(te=>[...te,J])},[r]),M=C.useCallback(W=>n(P=>P.filter(U=>U.id!==W)),[]),R=C.useCallback(W=>{n(P=>P.map(U=>{if(U.id!==W)return U;const z={id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:"",horas:0};return{...U,funcionesLectivas:[...U.funcionesLectivas||[],z]}}))},[]),k=C.useCallback((W,P,U,z)=>{n(J=>J.map(te=>{if(te.id!==W)return te;const se=(te.funcionesLectivas||[]).map(ie=>ie.id===P?{...ie,[U]:z}:ie);return{...te,funcionesLectivas:se}}))},[]),D=C.useCallback((W,P)=>{n(U=>U.map(z=>{if(z.id!==W)return z;const J=(z.funcionesLectivas||[]).filter(te=>te.id!==P);return{...z,funcionesLectivas:J}}))},[]),L=C.useCallback((W,P,U)=>{n(z=>z.map(J=>{if(J.id!==W)return J;const te={...J,[P]:U};if(P==="docenteId"){const se=e.find(ie=>ie.id===U);se&&(te.docenteNombre=se.nombre)}return P==="horasPorCurso"&&(te.horasXAsig=y5(U)),te}))},[e]),Z=C.useCallback((W,P,U)=>{n(z=>z.map(J=>{if(J.id!==W)return J;const te={...J.horasPorCurso};return U===0?delete te[P]:te[P]=U,{...J,horasPorCurso:te,horasXAsig:y5(te)}}))},[]),V=C.useCallback(W=>{m(!0);const P=new FileReader;P.onload=U=>{var z;try{const J=new Uint8Array((z=U.target)==null?void 0:z.result),te=fb(J,{type:"array"}),se=te.Sheets["Docentes 2025"]||te.Sheets[te.SheetNames[0]],ie=Ti.sheet_to_json(se,{header:1});let ce=-1;for(let ae=0;ae<ie.length;ae++){const Se=ie[ae];if(Se&&Se.some(ke=>typeof ke=="string"&&(ke.includes("Docente")||ke.includes("ASIGNATURA")||os.some(ve=>ke.includes(ve.replace("º","")))))){ce=ae;break}}if(ce===-1){alert("No se encontró la fila de encabezado en el archivo");return}const de=ie[ce],Be=[];for(let ae=ce+1;ae<ie.length;ae++){const Se=ie[ae];if(!Se||Se.length===0)continue;const ke=Se[de.indexOf("Docente")]||"";if(!ke)continue;const ve=e.find(pe=>pe.nombre.toLowerCase().includes(ke.toLowerCase()));if(!ve)continue;const le={};de.forEach((pe,Oe)=>{if(typeof pe=="string"){const Le=C6e(pe.trim());if(os.includes(Le)){const Ge=parseInt(Se[Oe])||0;Ge>0&&(le[Le]=Ge)}}});let be=[];const Pe=Se[de.indexOf("FUNCIONES LECTIVAS")]||Se[de.indexOf("FUNCIONES NO LECTIVAS")]||Se[de.indexOf("OTRA FUNCIÓN")]||"";typeof Pe=="string"&&Pe.includes(":")?be=Pe.split(",").map(pe=>{const[Oe,Le]=pe.split(":").map(Ge=>Ge.trim());return{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:Oe,horas:parseInt(Le)||0}}):Pe&&(be=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:Pe,horas:0}]);const Ue={id:`import_${Date.now()}_${ae}`,docenteId:ve.id,docenteNombre:ve.nombre,asignaturaOModulo:Se[de.indexOf("ASIGNATURA O MÓDULO")]||"",funcionesLectivas:be,horasPorCurso:le,horasXAsig:y5(le)};Be.push(Ue)}n(Be),alert(`Se importaron ${Be.length} asignaciones exitosamente`)}catch(J){console.error("Error al importar:",J),alert("Error al procesar el archivo. Verifique el formato.")}finally{m(!1)}},P.readAsArrayBuffer(W)},[e]),q=C.useCallback(()=>{const W=r.map(z=>{const J=e.find(ce=>ce.id===z.docenteId),te=T[z.docenteId];let se="";z.funcionesLectivas&&z.funcionesLectivas.length>0?se=z.funcionesLectivas.map(ce=>`${ce.nombre}: ${ce.horas}h`).join(", "):z.funcionesNoLectivas&&z.funcionesNoLectivas.length>0?se=z.funcionesNoLectivas.map(ce=>`${ce.nombre}: ${ce.horas}h`).join(", "):z.otraFuncion&&(se=z.otraFuncion);const ie={Docente:z.docenteNombre,"ASIGNATURA O MÓDULO":z.asignaturaOModulo||"","FUNCIONES LECTIVAS":se,"HORAS X ASIG.":z.horasXAsig||0};return os.forEach(ce=>ie[ce]=z.horasPorCurso[ce]||0),te&&(ie["HORAS LECTIVAS (HA)"]=te.HA,ie["HORAS NO LECTIVAS (HB)"]=te.HB,ie["HORAS CONTRATO"]=(J==null?void 0:J.horasContrato)||0),ie}),P=Ti.json_to_sheet(W),U=Ti.book_new();Ti.book_append_sheet(U,P,"Horarios"),lE(U,`horarios_${new Date().toISOString().split("T")[0]}.xlsx`)},[r,e,T]),G=C.useCallback(async()=>{if(d.filter(P=>P.tipo==="error").length>0){alert("No se puede guardar. Hay errores que deben corregirse primero.");return}try{m(!0);const P=[],U=[];r.forEach(J=>{let te=J.funcionesLectivas||[];J.funcionesNoLectivas&&J.funcionesNoLectivas.length>0&&te.length===0?te=J.funcionesNoLectivas.map(Be=>({id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:Be.nombre,horas:Be.horas})):J.otraFuncion&&te.length===0&&(te=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:J.otraFuncion,horas:parseInt(J.otraFuncion)||0}]);const{funcionesNoLectivas:se,otraFuncion:ie,...ce}=J,de={...ce,funcionesLectivas:te};if(J.id.startsWith("asig_")||J.id.startsWith("import_")){const{id:Be,...ae}=de;U.push(ae)}else P.push(de)});const z=[...P.map(({id:J,...te})=>te),...U];await E6e(z,!0),alert("Horarios guardados exitosamente")}catch(P){console.error("Error al guardar horarios:",P),alert("Error al guardar los horarios")}finally{m(!1)}},[d,r]),K=W=>{const P=T[W];return P?P.errors.length>0?"red":P.warnings.length>0?"yellow":"green":"gray"},ee=()=>g?i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-96 max-w-full overflow-hidden animate-scaleIn",children:[i.jsx("div",{className:"p-5 bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[i.jsx(gF,{className:"w-5 h-5"}),"Añadir Nuevo Docente"]}),i.jsx("button",{onClick:()=>x(!1),className:"text-white/80 hover:text-white p-1 rounded-full hover:bg-white/20 transition-all duration-200",disabled:h,children:i.jsx(Nh,{className:"w-5 h-5"})})]})}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 flex items-center gap-1.5",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Nombre Completo"]}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"text",value:v.nombre,onChange:W=>y({...v,nombre:W.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"Nombre Apellido",required:!0})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 flex items-center gap-1.5",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Email"]}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"email",value:v.email,onChange:W=>y({...v,email:W.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"correo@ejemplo.com",required:!0})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Departamento"}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"text",value:v.departamento,onChange:W=>y({...v,departamento:W.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"Ej: Matemáticas, Lenguaje, etc."})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Horas Contrato"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"number",value:v.horasContrato,onChange:W=>y({...v,horasContrato:parseInt(W.target.value)||0}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",min:1,max:44}),i.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs",children:"horas"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Perfil"}),i.jsxs("div",{className:"relative",children:[i.jsxs("select",{value:v.perfil,onChange:W=>y({...v,perfil:W.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 appearance-none",children:[i.jsx("option",{value:"PROFESORADO",children:"Profesorado"}),i.jsx("option",{value:"SUBDIRECCION",children:"Subdirección"}),i.jsx("option",{value:"COORDINACION_TP",children:"Coordinación TP"})]}),i.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:i.jsx("svg",{className:"w-4 h-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),i.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",disabled:h,children:"Cancelar"}),i.jsx("button",{onClick:E,className:"px-4 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg shadow-sm disabled:opacity-50 transition-all duration-200 flex items-center gap-2",disabled:h||!v.nombre||!v.email,children:h?i.jsxs(i.Fragment,{children:[i.jsx(wl,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Guardando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(ote,{className:"w-4 h-4"}),i.jsx("span",{children:"Guardar"})]})})]})]}),i.jsx("div",{className:"bg-gray-50 dark:bg-gray-750 px-6 py-3 text-xs text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(lte,{className:"w-3.5 h-3.5"}),i.jsxs("span",{children:["Los campos marcados con ",i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500 inline-block"})," son obligatorios"]})]})})]})}):null;return i.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-6 bg-gradient-to-r from-blue-600 to-indigo-700 dark:from-blue-800 dark:to-indigo-900 rounded-xl p-6 shadow-lg relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 bg-white dark:bg-gray-900 opacity-5",children:[i.jsx("div",{className:"w-96 h-96 rounded-full bg-white dark:bg-blue-600 absolute -top-20 -right-20 opacity-20"}),i.jsx("div",{className:"w-64 h-64 rounded-full bg-white dark:bg-indigo-600 absolute -bottom-10 -left-10 opacity-20"})]}),i.jsx("div",{className:"relative z-10",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center",children:[i.jsx(ic,{className:"mr-3 h-8 w-8"}),"Crear Horarios"]}),i.jsx("p",{className:"text-blue-100 dark:text-blue-200 max-w-2xl",children:"Sistema de gestión de carga horaria docente con validación 65%/35% y visualización en tiempo real"})]}),i.jsxs("div",{className:"mt-4 md:mt-0 flex gap-3",children:[i.jsxs("button",{onClick:()=>l(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white text-sm rounded-lg transition-all duration-200 border border-white border-opacity-30",children:[i.jsx(mw,{className:"w-4 h-4"}),i.jsx("span",{children:"Ver estadísticas"})]}),i.jsxs("button",{onClick:G,disabled:d.some(W=>W.tipo==="error")||h,className:"flex items-center justify-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-md",children:[i.jsx(Kc,{className:"w-4 h-4"}),i.jsx("span",{children:h?"Guardando...":"Guardar cambios"})]})]})]})})]}),i.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[i.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-750 border-b border-gray-100 dark:border-gray-700 flex items-center",children:[i.jsx(Kk,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mr-2"}),i.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Filtros y acciones"})]}),i.jsxs("div",{className:"p-5",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[i.jsx("div",{className:"flex-1 md:max-w-xs",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(Xb,{className:"text-gray-400 w-4 h-4"})}),i.jsx("input",{type:"text",placeholder:"Buscar docente...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",value:w,onChange:W=>_(W.target.value)})]})}),i.jsxs("div",{className:"flex gap-3 flex-wrap",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(Yp,{className:"text-gray-400 w-4 h-4"})}),i.jsxs("select",{className:"pl-10 pr-8 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 min-w-[150px]",value:a.curso,onChange:W=>s(P=>({...P,curso:W.target.value})),children:[i.jsx("option",{value:"",children:"Todos los cursos"}),os.map(W=>i.jsx("option",{value:W,children:W},W))]})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(ol,{className:"text-gray-400 w-4 h-4"})}),i.jsxs("select",{className:"pl-10 pr-8 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 min-w-[180px]",value:a.asignatura,onChange:W=>s(P=>({...P,asignatura:W.target.value})),children:[i.jsx("option",{value:"",children:"Todas las asignaturas"}),Bs.map(W=>i.jsx("option",{value:W,children:W},W))]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[i.jsxs("button",{onClick:()=>x(!0),className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(gF,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Nuevo Docente"})]}),i.jsxs("button",{onClick:S,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(Co,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Agregar Asignatura"})]}),i.jsxs("label",{className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 text-white rounded-lg transition-all duration-200 shadow-sm cursor-pointer group",children:[i.jsx(Yb,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Importar Excel"}),i.jsx("input",{type:"file",accept:".xlsx,.xls",className:"hidden",onChange:W=>{var P;return((P=W.target.files)==null?void 0:P[0])&&V(W.target.files[0])}})]}),i.jsxs("button",{onClick:q,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-purple-500 to-violet-600 hover:from-purple-600 hover:to-violet-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(iR,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Exportar Excel"})]}),i.jsxs("button",{onClick:()=>l(!0),className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-indigo-500 to-blue-600 hover:from-indigo-600 hover:to-blue-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[i.jsx(zc,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:"Abrir Resumen"})]}),i.jsxs("button",{onClick:G,disabled:d.some(W=>W.tipo==="error")||h,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white rounded-lg transition-all duration-200 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-amber-500 disabled:hover:to-orange-600 group",children:[h?i.jsx(wl,{className:"w-5 h-5 animate-spin"}):i.jsx(Kc,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),i.jsx("span",{className:"text-xs font-medium mt-1",children:h?"Guardando...":"Guardar"})]})]})]})]}),d.length>0&&i.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[i.jsxs("div",{className:"px-6 py-4 bg-red-50 dark:bg-red-900/20 border-b border-red-100 dark:border-red-800/30 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Gu,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),i.jsxs("h3",{className:"font-medium text-red-700 dark:text-red-300",children:["Validaciones y Alertas (",d.length,")"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-800/30 text-red-700 dark:text-red-300 text-xs rounded-md flex items-center gap-1",children:[i.jsx(Ww,{className:"w-3 h-3"})," ",d.filter(W=>W.tipo==="error").length," Errores"]}),i.jsxs("span",{className:"px-2 py-1 bg-yellow-100 dark:bg-yellow-800/30 text-yellow-700 dark:text-yellow-300 text-xs rounded-md flex items-center gap-1",children:[i.jsx(Xw,{className:"w-3 h-3"})," ",d.filter(W=>W.tipo==="warning").length," Advertencias"]})]})]}),i.jsx("div",{className:"p-5",children:i.jsx("div",{className:"space-y-2.5 max-h-48 overflow-y-auto pr-2 custom-scrollbar",children:d.map((W,P)=>i.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg shadow-sm ${W.tipo==="error"?"bg-red-50 dark:bg-red-900/10 text-red-700 dark:text-red-300 border-l-4 border-red-500 dark:border-red-600":"bg-yellow-50 dark:bg-yellow-900/10 text-yellow-700 dark:text-yellow-300 border-l-4 border-yellow-500 dark:border-yellow-600"}`,children:[W.tipo==="error"?i.jsx(Ww,{className:"w-5 h-5 shrink-0"}):i.jsx(Xw,{className:"w-5 h-5 shrink-0"}),i.jsx("span",{className:"text-sm",children:W.mensaje})]},P))})})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-100 dark:border-gray-700 overflow-hidden",children:[i.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-750 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(N_,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mr-2"}),i.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Asignaciones de Carga Horaria"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Correcto"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-yellow-500"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Advertencia"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Error"})]})]})]}),i.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:i.jsxs("table",{className:"w-full min-w-[1000px]",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky left-0 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 dark:bg-blue-500"}),i.jsx("span",{children:"Estado"})]})}),i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky left-14 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(_o,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Docente"})]})}),i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(ol,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Asignatura"})]})}),i.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(bH,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Func. Lectivas"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[i.jsx(Gf,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Hrs"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",colSpan:os.length,children:i.jsxs("div",{className:"flex justify-center items-center gap-1.5",children:[i.jsx(Yp,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Cursos"}),i.jsx("span",{className:"ml-1 text-xs text-gray-400 font-normal",children:"(horas por curso)"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[i.jsx(mw,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"HA/HB"})]})}),i.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky right-0 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:i.jsx("div",{className:"flex items-center justify-center gap-1.5",children:i.jsx("span",{children:"Acciones"})})})]})}),i.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:I.map((W,P)=>{const U=T[W.docenteId],z=K(W.docenteId),J=P===0||I[P-1].docenteId!==W.docenteId,te=P===I.length-1||I[P+1].docenteId!==W.docenteId,se=I.filter(de=>de.docenteId===W.docenteId),ie=se.length>1;let ce="hover:bg-gray-50 dark:hover:bg-gray-750 ";return ie&&(J?ce+="border-t-2 border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/10 ":ce+="bg-blue-50 dark:bg-blue-900/10 ",te&&(ce+="border-b-2 border-blue-200 dark:border-blue-800 mb-1 ")),i.jsxs("tr",{className:ce,children:[i.jsx("td",{className:"px-1 py-2 sticky left-0 z-10 bg-inherit",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${z==="green"?"bg-green-500":z==="yellow"?"bg-yellow-500":z==="red"?"bg-red-500":"bg-gray-500"}`}),ie&&J&&i.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium mt-1",children:se.length})]})}),i.jsx("td",{className:"px-1 py-2 sticky left-10 z-10 bg-inherit",children:!ie||J?i.jsxs("div",{children:[i.jsx("select",{value:W.docenteId,onChange:de=>L(W.id,"docenteId",de.target.value),className:`w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs ${ie?"font-medium":""}`,children:(j.length>0?j:e).map(de=>i.jsx("option",{value:de.id,children:de.nombre},de.id))}),ie&&i.jsxs("div",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:[se.length," asig."]})]}):i.jsx("div",{className:"pl-1 italic text-gray-500 dark:text-gray-400 text-xs whitespace-nowrap",children:"↳ Mismo"})}),i.jsxs("td",{className:"px-1 py-2",children:[i.jsxs("select",{value:W.asignaturaOModulo||"",onChange:de=>L(W.id,"asignaturaOModulo",de.target.value),className:`w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs ${ie?"border-blue-300 dark:border-blue-700":""}`,children:[i.jsx("option",{value:"",children:"Seleccionar..."}),Bs.map(de=>i.jsx("option",{value:de,children:de},de))]}),ie&&!J&&i.jsx("div",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:"Adicional"})]}),i.jsx("td",{className:"px-1 py-2",children:i.jsxs("div",{className:"space-y-1 w-full min-w-[200px]",children:[(W.funcionesLectivas||[]).map(de=>i.jsxs("div",{className:"flex gap-1 items-center",children:[i.jsx("input",{type:"text",value:de.nombre,onChange:Be=>k(W.id,de.id,"nombre",Be.target.value),placeholder:"Nombre",className:"flex-grow px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-l bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs"}),i.jsx("input",{type:"number",value:de.horas,onChange:Be=>k(W.id,de.id,"horas",parseInt(Be.target.value)||0),min:0,max:44,className:"w-10 px-1 py-1 border-y border-r border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs text-center"}),i.jsx("button",{onClick:()=>D(W.id,de.id),className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-r",title:"Eliminar función",children:i.jsx(Is,{className:"w-3 h-3"})})]},de.id)),!W.funcionesLectivas&&i.jsx("div",{className:"flex gap-1 items-center",children:i.jsx("input",{type:"text",value:W.otraFuncion||"",onChange:de=>L(W.id,"otraFuncion",de.target.value),placeholder:"Ej: Coordinador",className:"flex-grow px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs"})}),i.jsxs("button",{onClick:()=>R(W.id),className:"flex items-center gap-1 text-xs text-blue-500 hover:text-blue-700 px-2 py-0.5 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",children:[i.jsx(Co,{className:"w-3 h-3"})," ",i.jsx("span",{className:"text-xs",children:"Agregar"})]})]})}),i.jsx("td",{className:"px-1 py-2 text-center",children:i.jsx("span",{className:"text-xs font-medium text-gray-900 dark:text-white",children:W.horasXAsig||0})}),i.jsx("td",{className:"px-1 py-2",children:i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-1",children:os.map(de=>i.jsxs("div",{className:"flex flex-col items-center bg-gray-50 dark:bg-gray-750 p-1 rounded",children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:de}),i.jsx("input",{type:"number",min:0,value:W.horasPorCurso[de]||"",onChange:Be=>Z(W.id,de,parseInt(Be.target.value)||0),className:"w-10 h-7 px-1 py-0 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs text-center"})]},de))})}),i.jsx("td",{className:"px-1 py-2 text-center whitespace-nowrap",children:U&&i.jsxs("div",{className:"space-y-0",children:[i.jsxs("div",{className:"text-blue-600 dark:text-blue-400 text-xs",children:["HA: ",U.HA," (",U.restantesHA>=0?"+":"",U.restantesHA,")"]}),i.jsxs("div",{className:"text-green-600 dark:text-green-400 text-xs",children:["HB: ",U.HB," (",U.restantesHB>=0?"+":"",U.restantesHB,")"]})]})}),i.jsx("td",{className:"px-1 py-2 text-center sticky right-0 z-10 bg-inherit",children:i.jsxs("div",{className:"flex flex-col items-center gap-1",children:[i.jsx("button",{onClick:()=>B(W.docenteId,W.docenteNombre),className:"p-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",title:"Agregar otra asignatura a este docente",children:i.jsx(Co,{className:"w-3.5 h-3.5"})}),i.jsx("button",{onClick:()=>M(W.id),className:"p-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Eliminar esta asignación",children:i.jsx(Is,{className:"w-3.5 h-3.5"})})]})})]},W.id)})})]})})]}),o&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-7xl w-full max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[i.jsx("h2",{className:"text-xl font-bold",children:"Panel de Resumen"}),i.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:i.jsx(Nh,{})})]}),i.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:i.jsxs("nav",{className:"flex -mb-px px-6",children:[i.jsx("button",{onClick:()=>u("docentes"),className:`px-6 py-3 font-medium text-sm ${c==="docentes"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Docente"}),i.jsx("button",{onClick:()=>u("cursos"),className:`px-6 py-3 font-medium text-sm ${c==="cursos"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Curso"}),i.jsx("button",{onClick:()=>u("funciones"),className:`px-6 py-3 font-medium text-sm ${c==="funciones"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Función"}),i.jsx("button",{onClick:()=>u("totales"),className:`px-6 py-3 font-medium text-sm ${c==="totales"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Totales Generales"})]})}),i.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[c==="docentes"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Docente"}),i.jsx("div",{className:"grid gap-4",children:e.map(W=>{const P=T[W.id],U=r.filter(z=>z.docenteId===W.id);return i.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:W.nombre}),i.jsx("div",{className:`w-3 h-3 rounded-full ${K(W.id)==="green"?"bg-green-500":K(W.id)==="yellow"?"bg-yellow-500":K(W.id)==="red"?"bg-red-500":"bg-gray-500"}`})]}),P&&i.jsxs("div",{children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Contrato:"}),i.jsxs("span",{className:"ml-1 font-medium",children:[W.horasContrato,"h"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"HA:"}),i.jsxs("span",{className:"ml-1 font-medium text-blue-600 dark:text-blue-400",children:[P.sumCursos,"/",P.HA]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"HB:"}),i.jsxs("span",{className:"ml-1 font-medium text-green-600 dark:text-green-400",children:[P.sumFunciones,"/",P.HB]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Asignaciones:"}),i.jsx("span",{className:"ml-1 font-medium",children:U.length})]})]}),U.length>0&&i.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-2",children:[i.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Asignaturas asignadas:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:U.map(z=>i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:z.asignaturaOModulo||"Sin asignatura"}),i.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[z.horasXAsig||0,"h"]})]},z.id))})]}),i.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-2",children:[i.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Distribución por curso:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:os.filter(z=>U.some(J=>J.horasPorCurso[z])).map(z=>{const J=U.reduce((te,se)=>te+(se.horasPorCurso[z]||0),0);return i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:z}),i.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[J,"h"]})]},z)})})]})]}),U.some(z=>(z.funcionesLectivas||[]).length>0)&&i.jsxs("div",{className:"mt-2 border-t border-gray-100 dark:border-gray-700 pt-2",children:[i.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Funciones lectivas:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:U.flatMap(z=>(z.funcionesLectivas||[]).map(J=>({id:`${z.id}_${J.id}`,nombre:J.nombre,horas:J.horas}))).map(z=>i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:z.nombre||"Sin nombre"}),i.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[z.horas,"h"]})]},z.id))})]})]})]},W.id)})})]}),c==="cursos"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Curso"}),i.jsx("div",{className:"grid gap-4",children:os.filter(W=>r.some(P=>P.horasPorCurso[W])).map(W=>{const P=r.filter(J=>J.horasPorCurso[W]),U=[];P.forEach(J=>{const te=U.findIndex(se=>se.id===J.docenteId);te===-1?U.push({id:J.docenteId,nombre:J.docenteNombre,asignaciones:[J]}):U[te].asignaciones.push(J)});const z=P.reduce((J,te)=>J+(te.horasPorCurso[W]||0),0);return i.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:W}),i.jsxs("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-xs rounded-md",children:["Total: ",z,"h"]})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("h5",{className:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Docentes asignados:"}),i.jsx("div",{className:"grid gap-2",children:U.map(J=>i.jsxs("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-medium",children:J.nombre}),i.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:[J.asignaciones.reduce((te,se)=>te+(se.horasPorCurso[W]||0),0),"h"]})]}),i.jsx("ul",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400 space-y-1 ml-2",children:J.asignaciones.filter(te=>te.horasPorCurso[W]).map(te=>i.jsxs("li",{className:"flex justify-between",children:[i.jsx("span",{children:te.asignaturaOModulo||"Sin asignatura"}),i.jsxs("span",{children:[te.horasPorCurso[W],"h"]})]},te.id))})]},J.id))})]})]},W)})})]}),c==="funciones"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Funciones Lectivas"}),(()=>{const W=[];return r.forEach(P=>{(P.funcionesLectivas||[]).forEach(U=>{if(!U.nombre)return;const z=W.find(J=>J.nombre===U.nombre);if(!z)W.push({nombre:U.nombre,docentes:[{id:P.docenteId,nombre:P.docenteNombre,horas:U.horas}],totalHoras:U.horas});else{const J=z.docentes.find(te=>te.id===P.docenteId);J?J.horas+=U.horas:z.docentes.push({id:P.docenteId,nombre:P.docenteNombre,horas:U.horas}),z.totalHoras+=U.horas}})}),W.sort((P,U)=>U.totalHoras-P.totalHoras),W.length===0?i.jsx("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-750",children:i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"No hay funciones lectivas asignadas."})}):i.jsx("div",{className:"grid gap-4",children:W.map((P,U)=>i.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:P.nombre}),i.jsxs("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs rounded-md",children:["Total: ",P.totalHoras,"h"]})]}),i.jsx("h5",{className:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Docentes asignados:"}),i.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:P.docentes.sort((z,J)=>J.horas-z.horas).map(z=>i.jsxs("li",{className:"flex justify-between py-1 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[i.jsx("span",{children:z.nombre}),i.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[z.horas,"h"]})]},z.id))})]},U))})})()]}),c==="totales"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Resumen de Totales Generales"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[i.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800 shadow-md",children:[i.jsx("h4",{className:"text-lg font-bold text-blue-800 dark:text-blue-300 mb-2",children:"Total de Horas Lectivas"}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsx("div",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:(()=>{let W=0;return r.forEach(P=>{P.horasPorCurso&&Object.values(P.horasPorCurso).forEach(U=>typeof U=="number"&&(W+=U)),(P.funcionesLectivas||[]).forEach(U=>typeof U.horas=="number"&&(W+=U.horas))}),W})()}),i.jsx("span",{className:"text-sm text-blue-500 dark:text-blue-300",children:"horas"})]}),i.jsx("p",{className:"mt-3 text-sm text-blue-600 dark:text-blue-400",children:"Total de horas lectivas asignadas (HA)"})]}),i.jsxs("div",{className:"p-6 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-900/20 rounded-xl border border-green-200 dark:border-green-800 shadow-md",children:[i.jsx("h4",{className:"text-lg font-bold text-green-800 dark:text-green-300 mb-2",children:"Total de Horas No Lectivas"}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsx("div",{className:"text-4xl font-bold text-green-600 dark:text-green-400",children:(()=>{let W=0;return e.forEach(P=>{const U=typeof P.horasContrato=="number"?P.horasContrato:0;W+=Ky(U)}),W})()}),i.jsx("span",{className:"text-sm text-green-500 dark:text-green-300",children:"horas"})]}),i.jsx("p",{className:"mt-3 text-sm text-green-600 dark:text-green-400",children:"Total de horas no lectivas (HB)"})]}),i.jsxs("div",{className:"p-6 bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/30 dark:to-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 shadow-md",children:[i.jsx("h4",{className:"text-lg font-bold text-amber-800 dark:text-amber-300 mb-2",children:"Total de Horas Contrato"}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsx("div",{className:"text-4xl font-bold text-amber-600 dark:text-amber-400",children:e.reduce((P,U)=>{const z=typeof U.horasContrato=="number"?U.horasContrato:0;return P+z},0)}),i.jsx("span",{className:"text-sm text-amber-500 dark:text-amber-300",children:"horas"})]}),i.jsx("p",{className:"mt-3 text-sm text-amber-600 dark:text-amber-400",children:"Total de horas contratadas (Lectivas + No lectivas)"})]})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-md",children:[i.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Distribución de Horas"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Distribución Porcentual"}),(()=>{let W=0,P=0;r.forEach(te=>{te.horasPorCurso&&Object.values(te.horasPorCurso).forEach(se=>typeof se=="number"&&(W+=se)),(te.funcionesLectivas||[]).forEach(se=>typeof se.horas=="number"&&(W+=se.horas))}),e.forEach(te=>{const se=typeof te.horasContrato=="number"?te.horasContrato:0;P+=Ky(se)});const U=W+P,z=U>0?Math.round(W/U*100):0,J=U>0?Math.round(P/U*100):0;return i.jsxs("div",{children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[i.jsx("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Horas Lectivas (HA)"}),i.jsxs("span",{className:"font-bold",children:[z,"%"]})]}),i.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-blue-500 dark:bg-blue-600 rounded-full",style:{width:`${z}%`}})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[i.jsx("span",{className:"font-medium text-green-700 dark:text-green-300",children:"Horas No Lectivas (HB)"}),i.jsxs("span",{className:"font-bold",children:[J,"%"]})]}),i.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-green-500 dark:bg-green-600 rounded-full",style:{width:`${J}%`}})})]}),i.jsxs("div",{className:"mt-4 p-3 bg-gray-100 dark:bg-gray-750 rounded-lg text-xs text-gray-700 dark:text-gray-300",children:[i.jsx("p",{children:i.jsx("strong",{children:"Distribución Objetivo:"})}),i.jsx("p",{children:"• Horas Lectivas (HA): 65% del contrato"}),i.jsx("p",{children:"• Horas No Lectivas (HB): 35% del contrato"}),i.jsx("p",{children:"• Horas Contrato Total = Horas Lectivas + Horas No Lectivas"}),i.jsx("div",{className:"mt-2",children:Math.abs(z-65)<=5?i.jsx("p",{className:"text-green-600 dark:text-green-400 font-medium",children:"✓ La distribución está dentro de los parámetros recomendados"}):i.jsx("p",{className:"text-orange-600 dark:text-orange-400 font-medium",children:"⚠️ La distribución difiere de los parámetros recomendados"})})]})]})})()]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estadísticas Generales"}),i.jsxs("ul",{className:"space-y-3 text-sm",children:[i.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de docentes:"}),i.jsx("span",{className:"font-semibold",children:e.length})]}),i.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de asignaciones:"}),i.jsx("span",{className:"font-semibold",children:r.length})]}),i.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Promedio horas contrato:"}),i.jsxs("span",{className:"font-semibold",children:[e.length>0?(e.reduce((W,P)=>W+(typeof P.horasContrato=="number"?P.horasContrato:0),0)/e.length).toFixed(1):"0"," horas"]})]})]})]}),d.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsxs("h5",{className:"text-md font-medium text-red-700 dark:text-red-300 mb-2",children:["Advertencias (",d.length,")"]}),i.jsx("div",{className:"max-h-32 overflow-y-auto p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsxs("ul",{className:"text-xs space-y-1 text-red-600 dark:text-red-400",children:[d.slice(0,5).map((W,P)=>i.jsxs("li",{className:"flex items-center gap-1",children:[W.tipo==="error"?"❌":"⚠️",i.jsx("span",{children:W.mensaje})]},P)),d.length>5&&i.jsxs("li",{className:"italic",children:["Y ",d.length-5," más..."]})]})})]})]})]})]})]})]})]})}),i.jsxs("div",{className:"mt-8 p-0 bg-gradient-to-r from-blue-500/5 to-indigo-500/5 dark:from-blue-900/10 dark:to-indigo-900/10 rounded-xl overflow-hidden border border-blue-200 dark:border-blue-800 shadow-sm",children:[i.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(mw,{className:"w-5 h-5"}),i.jsx("h4",{className:"font-medium",children:"Información sobre Distribución de Horas"})]})}),i.jsxs("div",{className:"p-6 grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-700 dark:text-blue-300 shrink-0",children:i.jsx(Yp,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Horas Lectivas (HA)"}),i.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Según tabla oficial (ej: 44h → ",$_(44),"h, 30h → ",$_(30),"h)"]})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-700 dark:text-green-300 shrink-0",children:i.jsx(N_,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-green-900 dark:text-green-100",children:"Funciones Lectivas"}),i.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Las horas de las funciones se suman a las horas lectivas (HA)"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center text-amber-700 dark:text-amber-300 shrink-0",children:i.jsx(bH,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-amber-900 dark:text-amber-100",children:"Horas No Lectivas (HB)"}),i.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:["El resto del contrato (ej: 44h → ",Ky(44),"h, 30h → ",Ky(30),"h)"]})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 mb-4",children:[i.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Fórmulas de cálculo"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs font-mono",children:"HA"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas Lectivas = 65% del Contrato"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"px-2 py-1 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 rounded text-xs font-mono",children:"HB"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas No Lectivas = 35% del Contrato"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"px-2 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-mono",children:"HC"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas Contrato = HA + HB"})]})]})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700",children:[i.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Guía de semáforos"}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Completo"})]}),i.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-yellow-500 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Faltan horas"})]}),i.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-red-500 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Excede límites"})]})]})]})]})]})]}),i.jsx(ee,{}),h&&i.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-2xl flex flex-col items-center animate-pulse",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 dark:border-blue-800 border-solid rounded-full"}),i.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 dark:border-blue-400 border-t-transparent animate-spin rounded-full absolute top-0 left-0"})]}),i.jsx("p",{className:"mt-4 text-lg font-medium text-gray-700 dark:text-gray-300",children:"Procesando solicitud..."}),i.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Por favor, espere un momento"})]})})]})},a4="acciones_pedagogicas",k6e=(e,t)=>{var a,s,o,l;if(t.dimension||t.subdimension||t.indicadores||t.avance!==void 0)return{id:e,fechaRegistro:t.fechaRegistro??"",responsable:t.responsable??"",dimension:t.dimension??"",subdimension:t.subdimension??"",descripcion:t.descripcion??"",objetivos:t.objetivos??"",indicadores:Array.isArray(t.indicadores)?t.indicadores:t.indicadores?String(t.indicadores).split(",").map(c=>c.trim()).filter(Boolean):[],cobertura:t.cobertura??"",fechaInicio:t.fechaInicio??"",fechaCumplimiento:t.fechaCumplimiento??"",estado:t.estado??"Pendiente",avance:typeof t.avance=="number"?t.avance:0,enlaces:Array.isArray(t.enlaces)?t.enlaces:t.enlaces?[String(t.enlaces)]:[],creadoTs:typeof t.creadoTs=="number"?t.creadoTs:((s=(a=t.creadoTs)==null?void 0:a.toMillis)==null?void 0:s.call(a))??Date.now()};const r=t,n=r.enlaceDocumento?[String(r.enlaceDocumento)]:[];return{id:e,fechaRegistro:r.fechaRegistro??"",responsable:r.responsable??"",dimension:r.area??"",subdimension:"",descripcion:r.descripcion??"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:r.fechaCumplimiento??"",estado:r.estado??"Pendiente",avance:0,enlaces:n,creadoTs:typeof r.creadoTs=="number"?r.creadoTs:((l=(o=r.creadoTs)==null?void 0:o.toMillis)==null?void 0:l.call(o))??Date.now()}};async function j6e(){const e=[];try{const t=Vt(pt(lt,a4),cr("creadoTs","desc"));(await mn(t)).docs.forEach(n=>e.push(k6e(n.id,n.data())))}catch{}return e.sort((t,r)=>(r.creadoTs??0)-(t.creadoTs??0))}async function B6e(e){const t={fechaRegistro:e.fechaRegistro??new Date().toISOString().slice(0,10),responsable:e.responsable??"",dimension:e.dimension??e.area??"",subdimension:e.subdimension??"",descripcion:e.descripcion??"",objetivos:e.objetivos??"",indicadores:Array.isArray(e.indicadores)?e.indicadores:e.indicadores?String(e.indicadores).split(",").map(r=>r.trim()).filter(Boolean):[],cobertura:e.cobertura??"",fechaInicio:e.fechaInicio??"",fechaCumplimiento:e.fechaCumplimiento??"",estado:e.estado??"Pendiente",avance:typeof e.avance=="number"?e.avance:0,enlaces:Array.isArray(e.enlaces)?e.enlaces:e.enlaces?[String(e.enlaces)]:e.enlaceDocumento?[String(e.enlaceDocumento)]:[],creadoTs:ir.now()};await an(pt(lt,a4),t)}async function T6e(e,t){const r=rr(pt(lt,a4),e),n={...t};n.area&&!n.dimension&&(n.dimension=n.area,delete n.area),n.enlaceDocumento&&(n.enlaces=[String(n.enlaceDocumento)],delete n.enlaceDocumento),Array.isArray(n.indicadores)===!1&&typeof n.indicadores=="string"&&(n.indicadores=String(n.indicadores).split(",").map(a=>a.trim()).filter(Boolean)),await Bl(r,n)}async function I6e(e){const t=rr(pt(lt,a4),e);await ka(t)}function Sne(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Sne(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function bn(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Sne(e))&&(n&&(n+=" "),n+=t);return n}var SB={},kB={},OV;function F6e(){return OV||(OV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(kB)),kB}var jB={},DV;function kne(){return DV||(DV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(jB)),jB}var BB={},PV;function jne(){return PV||(PV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t}(BB)),BB}var TB={},RV;function JR(){return RV||(RV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let s=0,o="",l="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),s++);s<a;){const u=r[s];l?u==="\\"&&s+1<a?(s++,o+=r[s]):u===l?l="":o+=u:c?u==='"'||u==="'"?l=u:u==="]"?(c=!1,n.push(o),o=""):o+=u:u==="["?(c=!0,o&&(n.push(o),o="")):u==="."?o&&(n.push(o),o=""):o+=u,s++}return o&&n.push(o),n}e.toPath=t}(TB)),TB}var LV;function ZR(){return LV||(LV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=F6e(),r=kne(),n=jne(),a=JR();function s(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?s(l,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=s}(SB)),SB}var IB,MV;function O6e(){return MV||(MV=1,IB=ZR().get),IB}var D6e=O6e();const Tm=jl(D6e);var FB={exports:{}},na={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UV;function P6e(){if(UV)return na;UV=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,x=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function _(j){if(typeof j=="object"&&j!==null){var I=j.$$typeof;switch(I){case t:switch(j=j.type,j){case c:case u:case n:case s:case a:case f:return j;default:switch(j=j&&j.$$typeof,j){case l:case d:case g:case m:case o:return j;default:return I}}case r:return I}}}function T(j){return _(j)===u}return na.AsyncMode=c,na.ConcurrentMode=u,na.ContextConsumer=l,na.ContextProvider=o,na.Element=t,na.ForwardRef=d,na.Fragment=n,na.Lazy=g,na.Memo=m,na.Portal=r,na.Profiler=s,na.StrictMode=a,na.Suspense=f,na.isAsyncMode=function(j){return T(j)||_(j)===c},na.isConcurrentMode=T,na.isContextConsumer=function(j){return _(j)===l},na.isContextProvider=function(j){return _(j)===o},na.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===t},na.isForwardRef=function(j){return _(j)===d},na.isFragment=function(j){return _(j)===n},na.isLazy=function(j){return _(j)===g},na.isMemo=function(j){return _(j)===m},na.isPortal=function(j){return _(j)===r},na.isProfiler=function(j){return _(j)===s},na.isStrictMode=function(j){return _(j)===a},na.isSuspense=function(j){return _(j)===f},na.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===n||j===u||j===s||j===a||j===f||j===h||typeof j=="object"&&j!==null&&(j.$$typeof===g||j.$$typeof===m||j.$$typeof===o||j.$$typeof===l||j.$$typeof===d||j.$$typeof===v||j.$$typeof===y||j.$$typeof===w||j.$$typeof===x)},na.typeOf=_,na}var QV;function R6e(){return QV||(QV=1,FB.exports=P6e()),FB.exports}var L6e=R6e(),to=e=>e===0?0:e>0?1:-1,Xc=e=>typeof e=="number"&&e!=+e,Qp=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,fr=e=>(typeof e=="number"||e instanceof Number)&&!Xc(e),oA=e=>fr(e)||typeof e=="string",M6e=0,f2=e=>{var t=++M6e;return"".concat(e||"").concat(t)},kl=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!fr(t)&&typeof t!="string")return n;var s;if(Qp(t)){if(r==null)return n;var o=t.indexOf("%");s=r*parseFloat(t.slice(0,o))/100}else s=+t;return Xc(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},Bne=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},gv=(e,t)=>fr(e)&&fr(t)?r=>e+r*(t-e):()=>t;function Dx(e,t,r){return fr(e)&&fr(t)?e+r*(t-e):t}function U6e(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Tm(n,t))===r)}var Os=e=>e===null||typeof e>"u",cE=e=>Os(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),Q6e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function e8(e){if(typeof e!="string")return!1;var t=Q6e;return t.includes(e)}var H6e=["viewBox","children"],HV=["points","pathLength"],OB={svg:H6e,polygon:HV,polyline:HV},t8=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(C.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{e8(a)&&(n[a]=s=>r[a](r,s))}),n},V6e=(e,t,r)=>n=>(e(t,r,n),null),Wg=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];e8(a)&&typeof s=="function"&&(n||(n={}),n[a]=V6e(s,t,r))}),n},z6e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function Tne(e){if(typeof e!="string")return!1;var t=z6e;return t.includes(e)}function dl(e){var t=Object.entries(e).filter(r=>{var[n]=r;return Tne(n)});return Object.fromEntries(t)}var VV=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",zV=null,DB=null,Ine=e=>{if(e===zV&&Array.isArray(DB))return DB;var t=[];return C.Children.forEach(e,r=>{Os(r)||(L6e.isFragment(r)?t=t.concat(Ine(r.props.children)):t.push(r))}),DB=t,zV=e,t};function uE(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>VV(a)):n=[VV(t)],Ine(e).forEach(a=>{var s=Tm(a,"type.displayName")||Tm(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}var $6e=(e,t,r,n)=>{var a;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(a=n&&(OB==null?void 0:OB[n]))!==null&&a!==void 0?a:[],o=t.startsWith("data-"),l=typeof e!="function"&&(!!n&&s.includes(t)||Tne(t)),c=!!r&&e8(t);return o||l||c},Xn=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(C.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(s=>{var o;$6e((o=n)===null||o===void 0?void 0:o[s],s,t,r)&&(a[s]=n[s])}),a},G6e=["children","width","height","viewBox","className","style","title","desc"];function BF(){return BF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BF.apply(null,arguments)}function q6e(e,t){if(e==null)return{};var r,n,a=K6e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function K6e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var r8=C.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:o,style:l,title:c,desc:u}=e,d=q6e(e,G6e),f=s||{width:n,height:a,x:0,y:0},h=bn("recharts-surface",o);return C.createElement("svg",BF({},Xn(d,!0,"svg"),{className:h,width:n,height:a,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),C.createElement("title",null,c),C.createElement("desc",null,u),r)}),W6e=["children","className"];function TF(){return TF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TF.apply(null,arguments)}function X6e(e,t){if(e==null)return{};var r,n,a=Y6e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Y6e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var fs=C.forwardRef((e,t)=>{var{children:r,className:n}=e,a=X6e(e,W6e),s=bn("recharts-layer",n);return C.createElement("g",TF({className:s},Xn(a,!0),{ref:t}),r)}),n8=sJ(),Fne=C.createContext(null),J6e=()=>C.useContext(Fne);function Da(e){return function(){return e}}const One=Math.cos,G_=Math.sin,Kd=Math.sqrt,q_=Math.PI,s4=2*q_,IF=Math.PI,FF=2*IF,kp=1e-6,Z6e=FF-kp;function Dne(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function eFe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Dne;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class tFe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Dne:eFe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=n-t,u=a-r,d=o-t,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>kp)if(!(Math.abs(f*c-u*d)>kp)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,g=a-l,x=c*c+u*u,v=m*m+g*g,y=Math.sqrt(x),w=Math.sqrt(h),_=s*Math.tan((IF-Math.acos((x+h-v)/(2*y*w)))/2),T=_/w,j=_/y;Math.abs(T-1)>kp&&this._append`L${t+T*d},${r+T*f}`,this._append`A${s},${s},0,0,${+(f*m>d*g)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,a,s,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,f=1^o,h=o?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>kp||Math.abs(this._y1-d)>kp)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%FF+FF),h>Z6e?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>kp&&this._append`A${n},${n},0,${+(h>=IF)},${f},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function a8(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new tFe(t)}function s8(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Pne(e){this._context=e}Pne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function i4(e){return new Pne(e)}function Rne(e){return e[0]}function Lne(e){return e[1]}function Mne(e,t){var r=Da(!0),n=null,a=i4,s=null,o=a8(l);e=typeof e=="function"?e:e===void 0?Rne:Da(e),t=typeof t=="function"?t:t===void 0?Lne:Da(t);function l(c){var u,d=(c=s8(c)).length,f,h=!1,m;for(n==null&&(s=a(m=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,u,c),+t(f,u,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Da(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Da(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Da(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function sC(e,t,r){var n=null,a=Da(!0),s=null,o=i4,l=null,c=a8(u);e=typeof e=="function"?e:e===void 0?Rne:Da(+e),t=typeof t=="function"?t:Da(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?Lne:Da(+r);function u(f){var h,m,g,x=(f=s8(f)).length,v,y=!1,w,_=new Array(x),T=new Array(x);for(s==null&&(l=o(w=c())),h=0;h<=x;++h){if(!(h<x&&a(v=f[h],h,f))===y)if(y=!y)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=m;--g)l.point(_[g],T[g]);l.lineEnd(),l.areaEnd()}y&&(_[h]=+e(v,h,f),T[h]=+t(v,h,f),l.point(n?+n(v,h,f):_[h],r?+r(v,h,f):T[h]))}if(w)return l=null,w+""||null}function d(){return Mne().defined(a).curve(o).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Da(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Da(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Da(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Da(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Da(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Da(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Da(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,s!=null&&(l=o(s)),u):o},u.context=function(f){return arguments.length?(f==null?s=l=null:l=o(s=f),u):s},u}class Une{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function rFe(e){return new Une(e,!0)}function nFe(e){return new Une(e,!1)}const i8={draw(e,t){const r=Kd(t/q_);e.moveTo(r,0),e.arc(0,0,r,0,s4)}},aFe={draw(e,t){const r=Kd(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Qne=Kd(1/3),sFe=Qne*2,iFe={draw(e,t){const r=Kd(t/sFe),n=r*Qne;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},oFe={draw(e,t){const r=Kd(t),n=-r/2;e.rect(n,n,r,r)}},lFe=.8908130915292852,Hne=G_(q_/10)/G_(7*q_/10),cFe=G_(s4/10)*Hne,uFe=-One(s4/10)*Hne,dFe={draw(e,t){const r=Kd(t*lFe),n=cFe*r,a=uFe*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const o=s4*s/5,l=One(o),c=G_(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},PB=Kd(3),fFe={draw(e,t){const r=-Kd(t/(PB*3));e.moveTo(0,r*2),e.lineTo(-PB*r,-r),e.lineTo(PB*r,-r),e.closePath()}},_u=-.5,Su=Kd(3)/2,OF=1/Kd(12),AFe=(OF/2+1)*3,hFe={draw(e,t){const r=Kd(t/AFe),n=r/2,a=r*OF,s=n,o=r*OF+r,l=-s,c=o;e.moveTo(n,a),e.lineTo(s,o),e.lineTo(l,c),e.lineTo(_u*n-Su*a,Su*n+_u*a),e.lineTo(_u*s-Su*o,Su*s+_u*o),e.lineTo(_u*l-Su*c,Su*l+_u*c),e.lineTo(_u*n+Su*a,_u*a-Su*n),e.lineTo(_u*s+Su*o,_u*o-Su*s),e.lineTo(_u*l+Su*c,_u*c-Su*l),e.closePath()}};function mFe(e,t){let r=null,n=a8(a);e=typeof e=="function"?e:Da(e||i8),t=typeof t=="function"?t:Da(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Da(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Da(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function K_(){}function W_(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Vne(e){this._context=e}Vne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:W_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:W_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function pFe(e){return new Vne(e)}function zne(e){this._context=e}zne.prototype={areaStart:K_,areaEnd:K_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:W_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function gFe(e){return new zne(e)}function $ne(e){this._context=e}$ne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:W_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function xFe(e){return new $ne(e)}function Gne(e){this._context=e}Gne.prototype={areaStart:K_,areaEnd:K_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function vFe(e){return new Gne(e)}function $V(e){return e<0?-1:1}function GV(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(s*a+o*n)/(n+a);return($V(s)+$V(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function qV(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function RB(e,t,r){var n=e._x0,a=e._y0,s=e._x1,o=e._y1,l=(s-n)/3;e._context.bezierCurveTo(n+l,a+l*t,s-l,o-l*r,s,o)}function X_(e){this._context=e}X_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:RB(this,this._t0,qV(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,RB(this,qV(this,r=GV(this,e,t)),r);break;default:RB(this,this._t0,r=GV(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function qne(e){this._context=new Kne(e)}(qne.prototype=Object.create(X_.prototype)).point=function(e,t){X_.prototype.point.call(this,t,e)};function Kne(e){this._context=e}Kne.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function bFe(e){return new X_(e)}function yFe(e){return new qne(e)}function Wne(e){this._context=e}Wne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=KV(e),a=KV(t),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function KV(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),o=new Array(r);for(a[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function wFe(e){return new Wne(e)}function o4(e,t){this._context=e,this._t=t}o4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function EFe(e){return new o4(e,.5)}function NFe(e){return new o4(e,0)}function CFe(e){return new o4(e,1)}function Ab(e,t){if((o=e.length)>1)for(var r=1,n,a,s=e[t[0]],o,l=s.length;r<o;++r)for(a=s,s=e[t[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function DF(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function _Fe(e,t){return e[t]}function SFe(e){const t=[];return t.key=e,t}function kFe(){var e=Da([]),t=DF,r=Ab,n=_Fe;function a(s){var o=Array.from(e.apply(this,arguments),SFe),l,c=o.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,s)]).data=f;for(l=0,d=s8(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Da(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Da(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?DF:typeof s=="function"?s:Da(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??Ab,a):r},a}function jFe(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,o;a<s;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}Ab(e,t)}}function BFe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Ab(e,t)}}function TFe(e,t){if(!(!((o=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,o;n<s;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,h=d[n-1][1]||0,m=(f-h)/2,g=0;g<l;++g){var x=e[t[g]],v=x[n][1]||0,y=x[n-1][1]||0;m+=v-y}c+=f,u+=m*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Ab(e,t)}}var IFe=["type","size","sizeType"];function PF(){return PF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},PF.apply(null,arguments)}function WV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function XV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WV(Object(r),!0).forEach(function(n){FFe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FFe(e,t,r){return(t=OFe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OFe(e){var t=DFe(e,"string");return typeof t=="symbol"?t:t+""}function DFe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PFe(e,t){if(e==null)return{};var r,n,a=RFe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function RFe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Xne={symbolCircle:i8,symbolCross:aFe,symbolDiamond:iFe,symbolSquare:oFe,symbolStar:dFe,symbolTriangle:fFe,symbolWye:hFe},LFe=Math.PI/180,MFe=e=>{var t="symbol".concat(cE(e));return Xne[t]||i8},UFe=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*LFe;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},QFe=(e,t)=>{Xne["symbol".concat(cE(e))]=t},o8=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=PFe(e,IFe),s=XV(XV({},a),{},{type:t,size:r,sizeType:n}),o=()=>{var f=MFe(t),h=mFe().type(f).size(UFe(r,n,t));return h()},{className:l,cx:c,cy:u}=s,d=Xn(s,!0);return c===+c&&u===+u&&r===+r?C.createElement("path",PF({},d,{className:bn("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:o()})):null};o8.registerSymbol=QFe;function RF(){return RF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RF.apply(null,arguments)}function YV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function HFe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YV(Object(r),!0).forEach(function(n){l8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l8(e,t,r){return(t=VFe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VFe(e){var t=zFe(e,"string");return typeof t=="symbol"?t:t+""}function zFe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ku=32;class c8 extends C.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,a=ku/2,s=ku/6,o=ku/3,l=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return C.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:a,x2:ku,y2:a,className:"recharts-legend-icon"});if(c==="line")return C.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(ku,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return C.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(ku/8,"h").concat(ku,"v").concat(ku*3/4,"h").concat(-ku,"z"),className:"recharts-legend-icon"});if(C.isValidElement(t.legendIcon)){var u=HFe({},t);return delete u.legendIcon,C.cloneElement(t.legendIcon,u)}return C.createElement(o8,{fill:l,cx:a,cy:a,size:ku,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:o}=this.props,l={x:0,y:0,width:ku,height:ku},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,f)=>{var h=d.formatter||a,m=bn({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var g=d.inactive?s:d.color,x=h?h(d.value,d,f):d.value;return C.createElement("li",RF({className:m,style:c,key:"legend-item-".concat(f)},Wg(this.props,d,f)),C.createElement(r8,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(x," legend icon")},this.renderIcon(d,o)),C.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},x))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return C.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}l8(c8,"displayName","Legend");l8(c8,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var LB={},MB={},JV;function $Fe(){return JV||(JV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let s=0;s<r.length;s++){const o=r[s],l=n(o);a.has(l)||a.set(l,o)}return Array.from(a.values())}e.uniqBy=t}(MB)),MB}var UB={},ZV;function l4(){return ZV||(ZV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(UB)),UB}var QB={},HB={},VB={},ez;function GFe(){return ez||(ez=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(VB)),VB}var tz;function u8(){return tz||(tz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GFe();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r}(HB)),HB}var zB={},rz;function qFe(){return rz||(rz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(zB)),zB}var nz;function KFe(){return nz||(nz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=u8(),r=qFe();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n}(QB)),QB}var $B={},GB={},az;function WFe(){return az||(az=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZR();function r(n){return function(a){return t.get(a,n)}}e.property=r}(GB)),GB}var qB={},KB={},WB={},XB={},sz;function Yne(){return sz||(sz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(XB)),XB}var YB={},iz;function Jne(){return iz||(iz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(YB)),YB}var JB={},oz;function d8(){return oz||(oz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t}(JB)),JB}var lz;function XFe(){return lz||(lz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=f8(),r=Yne(),n=Jne(),a=d8();function s(f,h,m){return typeof m!="function"?t.isMatch(f,h):o(f,h,function g(x,v,y,w,_,T){const j=m(x,v,y,w,_,T);return j!==void 0?!!j:o(x,v,g,T)},new Map)}function o(f,h,m,g){if(h===f)return!0;switch(typeof h){case"object":return l(f,h,m,g);case"function":return Object.keys(h).length>0?o(f,{...h},m,g):a.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:a.eq(f,h)}}function l(f,h,m,g){if(h==null)return!0;if(Array.isArray(h))return u(f,h,m,g);if(h instanceof Map)return c(f,h,m,g);if(h instanceof Set)return d(f,h,m,g);const x=Object.keys(h);if(f==null)return x.length===0;if(x.length===0)return!0;if(g&&g.has(h))return g.get(h)===f;g&&g.set(h,f);try{for(let v=0;v<x.length;v++){const y=x[v];if(!n.isPrimitive(f)&&!(y in f)||h[y]===void 0&&f[y]!==void 0||h[y]===null&&f[y]!==null||!m(f[y],h[y],y,f,h,g))return!1}return!0}finally{g&&g.delete(h)}}function c(f,h,m,g){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[x,v]of h.entries()){const y=f.get(x);if(m(y,v,x,f,h,g)===!1)return!1}return!0}function u(f,h,m,g){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const x=new Set;for(let v=0;v<h.length;v++){const y=h[v];let w=!1;for(let _=0;_<f.length;_++){if(x.has(_))continue;const T=f[_];let j=!1;if(m(T,y,v,f,h,g)&&(j=!0),j){x.add(_),w=!0;break}}if(!w)return!1}return!0}function d(f,h,m,g){return h.size===0?!0:f instanceof Set?u([...f],[...h],m,g):!1}e.isMatchWith=s,e.isSetMatch=d}(WB)),WB}var cz;function f8(){return cz||(cz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XFe();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(KB)),KB}var ZB={},eT={},tT={},uz;function Zne(){return uz||(uz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t}(tT)),tT}var rT={},dz;function A8(){return dz||(dz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(rT)),rT}var nT={},fz;function h8(){return fz||(fz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",m="[object Object]",g="[object Error]",x="[object DataView]",v="[object Uint8Array]",y="[object Uint8ClampedArray]",w="[object Uint16Array]",_="[object Uint32Array]",T="[object BigUint64Array]",j="[object Int8Array]",I="[object Int16Array]",E="[object Int32Array]",S="[object BigInt64Array]",B="[object Float32Array]",M="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=S,e.bigUint64ArrayTag=T,e.booleanTag=a,e.dataViewTag=x,e.dateTag=l,e.errorTag=g,e.float32ArrayTag=B,e.float64ArrayTag=M,e.functionTag=f,e.int16ArrayTag=I,e.int32ArrayTag=E,e.int8ArrayTag=j,e.mapTag=c,e.numberTag=n,e.objectTag=m,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=w,e.uint32ArrayTag=_,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=y}(nT)),nT}var aT={},Az;function YFe(){return Az||(Az=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(aT)),aT}var hz;function eae(){return hz||(hz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zne(),r=A8(),n=h8(),a=Jne(),s=YFe();function o(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,h,m=new Map,g=void 0){const x=g==null?void 0:g(d,f,h,m);if(x!=null)return x;if(a.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const v=new Array(d.length);m.set(d,v);for(let y=0;y<d.length;y++)v[y]=l(d[y],y,h,m,g);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;m.set(d,v);for(const[y,w]of d)v.set(y,l(w,y,h,m,g));return v}if(d instanceof Set){const v=new Set;m.set(d,v);for(const y of d)v.add(l(y,void 0,h,m,g));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,v);for(let y=0;y<d.length;y++)v[y]=l(d[y],y,h,m,g);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,v),c(v,d,h,m,g),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof Blob){const v=new Blob([d],{type:d.type});return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof Error){const v=new d.constructor;return m.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,c(v,d,h,m,g),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return m.set(d,v),c(v,d,h,m,g),v}return d}function c(d,f,h=d,m,g){const x=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<x.length;v++){const y=x[v],w=Object.getOwnPropertyDescriptor(d,y);(w==null||w.writable)&&(d[y]=l(f[y],y,h,m,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c}(eT)),eT}var mz;function JFe(){return mz||(mz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eae();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r}(ZB)),ZB}var pz;function ZFe(){return pz||(pz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=f8(),r=JFe();function n(a){return a=r.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=n}(qB)),qB}var sT={},iT={},oT={},gz;function eOe(){return gz||(gz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eae(),r=h8();function n(a,s){return t.cloneDeepWith(a,(o,l,c,u)=>{const d=s==null?void 0:s(o,l,c,u);if(d!=null)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n}(oT)),oT}var xz;function tOe(){return xz||(xz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eOe();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r}(iT)),iT}var lT={},cT={},vz;function tae(){return vz||(vz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r}(cT)),cT}var uT={},bz;function rOe(){return bz||(bz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=A8();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r}(uT)),uT}var yz;function nOe(){return yz||(yz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kne(),r=tae(),n=rOe(),a=JR();function s(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=a.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=s}(lT)),lT}var wz;function aOe(){return wz||(wz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=f8(),r=jne(),n=tOe(),a=ZR(),s=nOe();function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,l);return d===void 0?s.has(u,l):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=o}(sT)),sT}var Ez;function m8(){return Ez||(Ez=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=l4(),r=WFe(),n=ZFe(),a=aOe();function s(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=s}($B)),$B}var Nz;function sOe(){return Nz||(Nz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$Fe(),r=l4(),n=KFe(),a=m8();function s(o,l=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),a.iteratee(l)):[]}e.uniqBy=s}(LB)),LB}var dT,Cz;function iOe(){return Cz||(Cz=1,dT=sOe().uniqBy),dT}var oOe=iOe();const _z=jl(oOe);function rae(e,t,r){return t===!0?_z(e,r):typeof t=="function"?_z(e,t):e}var fT={exports:{}},AT={},hT={exports:{}},mT={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sz;function lOe(){if(Sz)return mT;Sz=1;var e=Rb();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,s=e.useLayoutEffect,o=e.useDebugValue;function l(f,h){var m=h(),g=n({inst:{value:m,getSnapshot:h}}),x=g[0].inst,v=g[1];return s(function(){x.value=m,x.getSnapshot=h,c(x)&&v({inst:x})},[f,m,h]),a(function(){return c(x)&&v({inst:x}),f(function(){c(x)&&v({inst:x})})},[f]),o(m),m}function c(f){var h=f.getSnapshot;f=f.value;try{var m=h();return!r(f,m)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return mT.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,mT}var kz;function cOe(){return kz||(kz=1,hT.exports=lOe()),hT.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jz;function uOe(){if(jz)return AT;jz=1;var e=Rb(),t=cOe();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,s=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return AT.useSyncExternalStoreWithSelector=function(u,d,f,h,m){var g=s(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=l(function(){function y(I){if(!w){if(w=!0,_=I,I=h(I),m!==void 0&&x.hasValue){var E=x.value;if(m(E,I))return T=E}return T=I}if(E=T,n(_,I))return E;var S=h(I);return m!==void 0&&m(E,S)?(_=I,E):(_=I,T=S)}var w=!1,_,T,j=f===void 0?null:f;return[function(){return y(d())},j===null?void 0:function(){return y(j())}]},[d,f,h,m]);var v=a(u,g[0],g[1]);return o(function(){x.hasValue=!0,x.value=v},[v]),c(v),v},AT}var Bz;function dOe(){return Bz||(Bz=1,fT.exports=uOe()),fT.exports}var nae=dOe();const fOe=jl(nae);var p8=C.createContext(null),AOe=e=>e,Ga=()=>{var e=C.useContext(p8);return e?e.store.dispatch:AOe},w5=()=>{},hOe=()=>w5,mOe=(e,t)=>e===t;function or(e){var t=C.useContext(p8);return nae.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:hOe,t?t.store.getState:w5,t?t.store.getState:w5,t?e:w5,mOe)}function pOe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function gOe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function xOe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var Tz=e=>Array.isArray(e)?e:[e];function vOe(e){const t=Array.isArray(e[0])?e[0]:e;return xOe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function bOe(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var yOe=class{constructor(e){this.value=e}deref(){return this.value}},wOe=typeof WeakRef<"u"?WeakRef:yOe,EOe=0,Iz=1;function iC(){return{s:EOe,v:void 0,o:null,p:null}}function aae(e,t={}){let r=iC();const{resultEqualityCheck:n}=t;let a,s=0;function o(){var f;let l=r;const{length:c}=arguments;for(let h=0,m=c;h<m;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let x=l.o;x===null&&(l.o=x=new WeakMap);const v=x.get(g);v===void 0?(l=iC(),x.set(g,l)):l=v}else{let x=l.p;x===null&&(l.p=x=new Map);const v=x.get(g);v===void 0?(l=iC(),x.set(g,l)):l=v}}const u=l;let d;if(l.s===Iz)d=l.v;else if(d=e.apply(null,arguments),s++,n){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&n(h,d)&&(d=h,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new wOe(d):d}return u.s=Iz,u.v=d,d}return o.clearCache=()=>{r=iC(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function NOe(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let s=0,o=0,l,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),pOe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:m=aae,argsMemoizeOptions:g=[]}=d,x=Tz(h),v=Tz(g),y=vOe(a),w=f(function(){return s++,u.apply(null,arguments)},...x),_=m(function(){o++;const j=bOe(y,arguments);return l=w.apply(null,j),l},...v);return Object.assign(_,{resultFunc:u,memoizedResultFunc:w,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var dt=NOe(aae),COe=Object.assign((e,t=dt)=>{gOe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>COe}),pT={},gT={},xT={},Fz;function _Oe(){return Fz||(Fz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const o=t(n),l=t(a);if(o===l&&o===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?l-o:o-l}return 0};e.compareValues=r}(xT)),xT}var vT={},bT={},Oz;function sae(){return Oz||(Oz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(bT)),bT}var Dz;function SOe(){return Dz||(Dz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sae(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||o!=null&&Object.hasOwn(o,s)}e.isKey=a}(vT)),vT}var Pz;function kOe(){return Pz||(Pz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_Oe(),r=SOe(),n=JR();function a(s,o,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(m=>String(m));const u=(m,g)=>{let x=m;for(let v=0;v<g.length&&x!=null;++v)x=x[g[v]];return x},d=(m,g)=>g==null||m==null?g:typeof m=="object"&&"key"in m?Object.hasOwn(g,m.key)?g[m.key]:u(g,m.path):typeof m=="function"?m(g):Array.isArray(m)?u(g,m):typeof g=="object"?g[m]:g,f=o.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return s.map(m=>({original:m,criteria:f.map(g=>d(g,m))})).slice().sort((m,g)=>{for(let x=0;x<f.length;x++){const v=t.compareValues(m.criteria[x],g.criteria[x],l[x]);if(v!==0)return v}return 0}).map(m=>m.original)}e.orderBy=a}(gT)),gT}var yT={},Rz;function jOe(){return Rz||(Rz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],s=Math.floor(n),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<s?o(d,c+1):a.push(d)}};return o(r,0),a}e.flatten=t}(yT)),yT}var wT={},Lz;function iae(){return Lz||(Lz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tae(),r=u8(),n=Yne(),a=d8();function s(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],o):!1}e.isIterateeCall=s}(wT)),wT}var Mz;function BOe(){return Mz||(Mz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kOe(),r=jOe(),n=iae();function a(s,...o){const l=o.length;return l>1&&n.isIterateeCall(s,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(s,r.flatten(o),["asc"])}e.sortBy=a}(pT)),pT}var ET,Uz;function TOe(){return Uz||(Uz=1,ET=BOe().sortBy),ET}var IOe=TOe();const c4=jl(IOe);var oae=e=>e.legend.settings,FOe=e=>e.legend.size,OOe=e=>e.legend.payload,DOe=dt([OOe,oae],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?c4(n,r):n});function POe(){return or(DOe)}var oC=1;function lae(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=C.useState({height:0,left:0,top:0,width:0}),n=C.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-t.height)>oC||Math.abs(o.left-t.left)>oC||Math.abs(o.top-t.top)>oC||Math.abs(o.width-t.width)>oC)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function po(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var ROe=typeof Symbol=="function"&&Symbol.observable||"@@observable",Qz=ROe,NT=()=>Math.random().toString(36).substring(7).split("").join("."),LOe={INIT:`@@redux/INIT${NT()}`,REPLACE:`@@redux/REPLACE${NT()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${NT()}`},Y_=LOe;function g8(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function cae(e,t,r){if(typeof e!="function")throw new Error(po(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(po(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(po(1));return r(cae)(e,t)}let n=e,a=t,s=new Map,o=s,l=0,c=!1;function u(){o===s&&(o=new Map,s.forEach((v,y)=>{o.set(y,v)}))}function d(){if(c)throw new Error(po(3));return a}function f(v){if(typeof v!="function")throw new Error(po(4));if(c)throw new Error(po(5));let y=!0;u();const w=l++;return o.set(w,v),function(){if(y){if(c)throw new Error(po(6));y=!1,u(),o.delete(w),s=null}}}function h(v){if(!g8(v))throw new Error(po(7));if(typeof v.type>"u")throw new Error(po(8));if(typeof v.type!="string")throw new Error(po(17));if(c)throw new Error(po(9));try{c=!0,a=n(a,v)}finally{c=!1}return(s=o).forEach(w=>{w()}),v}function m(v){if(typeof v!="function")throw new Error(po(10));n=v,h({type:Y_.REPLACE})}function g(){const v=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(po(11));function w(){const T=y;T.next&&T.next(d())}return w(),{unsubscribe:v(w)}},[Qz](){return this}}}return h({type:Y_.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:m,[Qz]:g}}function MOe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Y_.INIT})>"u")throw new Error(po(12));if(typeof r(void 0,{type:Y_.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(po(13))})}function uae(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let a;try{MOe(r)}catch(s){a=s}return function(o={},l){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],m=o[f],g=h(m,l);if(typeof g>"u")throw l&&l.type,new Error(po(14));u[f]=g,c=c||g!==m}return c=c||n.length!==Object.keys(o).length,c?u:o}}function J_(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function UOe(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(po(15))};const o={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},l=e.map(c=>c(o));return s=J_(...l)(a.dispatch),{...a,dispatch:s}}}function dae(e){return g8(e)&&"type"in e&&typeof e.type=="string"}var fae=Symbol.for("immer-nothing"),Hz=Symbol.for("immer-draftable"),Yc=Symbol.for("immer-state");function jd(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var hb=Object.getPrototypeOf;function _g(e){return!!e&&!!e[Yc]}function _h(e){var t;return e?Aae(e)||Array.isArray(e)||!!e[Hz]||!!((t=e.constructor)!=null&&t[Hz])||d4(e)||f4(e):!1}var QOe=Object.prototype.constructor.toString();function Aae(e){if(!e||typeof e!="object")return!1;const t=hb(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===QOe}function Z_(e,t){u4(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function u4(e){const t=e[Yc];return t?t.type_:Array.isArray(e)?1:d4(e)?2:f4(e)?3:0}function LF(e,t){return u4(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function hae(e,t,r){const n=u4(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function HOe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function d4(e){return e instanceof Map}function f4(e){return e instanceof Set}function jp(e){return e.copy_||e.base_}function MF(e,t){if(d4(e))return new Map(e);if(f4(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Aae(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Yc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(hb(e),n)}else{const n=hb(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function x8(e,t=!1){return A4(e)||_g(e)||!_h(e)||(u4(e)>1&&(e.set=e.add=e.clear=e.delete=VOe),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>x8(n,!0))),e}function VOe(){jd(2)}function A4(e){return Object.isFrozen(e)}var zOe={};function Sg(e){const t=zOe[e];return t||jd(0,e),t}var A2;function mae(){return A2}function $Oe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Vz(e,t){t&&(Sg("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function UF(e){QF(e),e.drafts_.forEach(GOe),e.drafts_=null}function QF(e){e===A2&&(A2=e.parent_)}function zz(e){return A2=$Oe(A2,e)}function GOe(e){const t=e[Yc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function $z(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Yc].modified_&&(UF(t),jd(4)),_h(e)&&(e=eS(t,e),t.parent_||tS(t,e)),t.patches_&&Sg("Patches").generateReplacementPatches_(r[Yc].base_,e,t.patches_,t.inversePatches_)):e=eS(t,r,[]),UF(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==fae?e:void 0}function eS(e,t,r){if(A4(t))return t;const n=t[Yc];if(!n)return Z_(t,(a,s)=>Gz(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return tS(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let s=a,o=!1;n.type_===3&&(s=new Set(a),a.clear(),o=!0),Z_(s,(l,c)=>Gz(e,n,a,l,c,r,o)),tS(e,a,!1),r&&e.patches_&&Sg("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Gz(e,t,r,n,a,s,o){if(_g(a)){const l=s&&t&&t.type_!==3&&!LF(t.assigned_,n)?s.concat(n):void 0,c=eS(e,a,l);if(hae(r,n,c),_g(c))e.canAutoFreeze_=!1;else return}else o&&r.add(a);if(_h(a)&&!A4(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;eS(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&tS(e,a)}}function tS(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&x8(t,r)}function qOe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:mae(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=v8;r&&(a=[n],s=h2);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,l}var v8={get(e,t){if(t===Yc)return e;const r=jp(e);if(!LF(r,t))return KOe(e,r,t);const n=r[t];return e.finalized_||!_h(n)?n:n===CT(e.base_,t)?(_T(e),e.copy_[t]=VF(n,e)):n},has(e,t){return t in jp(e)},ownKeys(e){return Reflect.ownKeys(jp(e))},set(e,t,r){const n=pae(jp(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=CT(jp(e),t),s=a==null?void 0:a[Yc];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(HOe(r,a)&&(r!==void 0||LF(e.base_,t)))return!0;_T(e),HF(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return CT(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,_T(e),HF(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=jp(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){jd(11)},getPrototypeOf(e){return hb(e.base_)},setPrototypeOf(){jd(12)}},h2={};Z_(v8,(e,t)=>{h2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});h2.deleteProperty=function(e,t){return h2.set.call(this,e,t,void 0)};h2.set=function(e,t,r){return v8.set.call(this,e[0],t,r,e[0])};function CT(e,t){const r=e[Yc];return(r?jp(r):e)[t]}function KOe(e,t,r){var a;const n=pae(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function pae(e,t){if(!(t in e))return;let r=hb(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=hb(r)}}function HF(e){e.modified_||(e.modified_=!0,e.parent_&&HF(e.parent_))}function _T(e){e.copy_||(e.copy_=MF(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var WOe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const o=this;return function(c=s,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&jd(6),n!==void 0&&typeof n!="function"&&jd(7);let a;if(_h(t)){const s=zz(this),o=VF(t,void 0);let l=!0;try{a=r(o),l=!1}finally{l?UF(s):QF(s)}return Vz(s,n),$z(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===fae&&(a=void 0),this.autoFreeze_&&x8(a,!0),n){const s=[],o=[];Sg("Patches").generateReplacementPatches_(t,a,s,o),n(s,o)}return a}else jd(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let n,a;return[this.produce(t,r,(o,l)=>{n=o,a=l}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){_h(e)||jd(8),_g(e)&&(e=hh(e));const t=zz(this),r=VF(e,void 0);return r[Yc].isManual_=!0,QF(t),r}finishDraft(e,t){const r=e&&e[Yc];(!r||!r.isManual_)&&jd(9);const{scope_:n}=r;return Vz(n,t),$z(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=Sg("Patches").applyPatches_;return _g(e)?n(e,t):this.produce(e,a=>n(a,t))}};function VF(e,t){const r=d4(e)?Sg("MapSet").proxyMap_(e,t):f4(e)?Sg("MapSet").proxySet_(e,t):qOe(e,t);return(t?t.scope_:mae()).drafts_.push(r),r}function hh(e){return _g(e)||jd(10,e),gae(e)}function gae(e){if(!_h(e)||A4(e))return e;const t=e[Yc];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=MF(e,t.scope_.immer_.useStrictShallowCopy_)}else r=MF(e,!0);return Z_(r,(n,a)=>{hae(r,n,gae(a))}),t&&(t.finalized_=!1),r}var Jc=new WOe,xae=Jc.produce;Jc.produceWithPatches.bind(Jc);Jc.setAutoFreeze.bind(Jc);Jc.setUseStrictShallowCopy.bind(Jc);Jc.applyPatches.bind(Jc);Jc.createDraft.bind(Jc);Jc.finishDraft.bind(Jc);function vae(e){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,e):a(s)}var XOe=vae(),YOe=vae,JOe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?J_:J_.apply(null,arguments)};function Wu(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(Gc(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>dae(n)&&n.type===e,r}var bae=class Wy extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Wy.prototype)}static get[Symbol.species](){return Wy}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Wy(...t[0].concat(this)):new Wy(...t.concat(this))}};function qz(e){return _h(e)?xae(e,()=>{}):e}function lC(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function ZOe(e){return typeof e=="boolean"}var eDe=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let o=new bae;return r&&(ZOe(r)?o.push(XOe):o.push(YOe(r.extraArgument))),o},tDe="RTK_autoBatch",Kz=e=>t=>{setTimeout(t,e)},rDe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Kz(10):e.type==="callback"?e.queueNotification:Kz(e.timeout),u=()=>{o=!1,s&&(s=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),h=n.subscribe(f);return l.add(d),()=>{h(),l.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[tDe]),s=!a,s&&(o||(o=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},nDe=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new bae(e);return n&&a.push(rDe(typeof n=="object"?n:void 0)),a};function aDe(e){const t=eDe(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(g8(r))l=uae(r);else throw new Error(Gc(1));let c;typeof n=="function"?c=n(t):c=t();let u=J_;a&&(u=JOe({trace:!1,...typeof a=="object"&&a}));const d=UOe(...c),f=nDe(d);let h=typeof o=="function"?o(f):f();const m=u(...h);return cae(l,s,m)}function yae(e){const t={},r=[];let n;const a={addCase(s,o){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(Gc(28));if(l in t)throw new Error(Gc(29));return t[l]=o,a},addMatcher(s,o){return r.push({matcher:s,reducer:o}),a},addDefaultCase(s){return n=s,a}};return e(a),[t,r,n]}function sDe(e){return typeof e=="function"}function iDe(e,t){let[r,n,a]=yae(t),s;if(sDe(e))s=()=>qz(e());else{const l=qz(e);s=()=>l}function o(l=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(_g(d)){const m=f(d,c);return m===void 0?d:m}else{if(_h(d))return xae(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},l)}return o.getInitialState=s,o}var oDe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",lDe=(e=21)=>{let t="",r=e;for(;r--;)t+=oDe[Math.random()*64|0];return t},cDe=Symbol.for("rtk-slice-createasyncthunk");function uDe(e,t){return`${e}/${t}`}function dDe({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[cDe];return function(a){const{name:s,reducerPath:o=s}=a;if(!s)throw new Error(Gc(11));const l=(typeof a.reducers=="function"?a.reducers(ADe()):a.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(T,j){const I=typeof T=="string"?T:T.type;if(!I)throw new Error(Gc(12));if(I in u.sliceCaseReducersByType)throw new Error(Gc(13));return u.sliceCaseReducersByType[I]=j,d},addMatcher(T,j){return u.sliceMatchers.push({matcher:T,reducer:j}),d},exposeAction(T,j){return u.actionCreators[T]=j,d},exposeCaseReducer(T,j){return u.sliceCaseReducersByName[T]=j,d}};c.forEach(T=>{const j=l[T],I={reducerName:T,type:uDe(s,T),createNotation:typeof a.reducers=="function"};mDe(j)?gDe(I,j,d,t):hDe(I,j,d)});function f(){const[T={},j=[],I=void 0]=typeof a.extraReducers=="function"?yae(a.extraReducers):[a.extraReducers],E={...T,...u.sliceCaseReducersByType};return iDe(a.initialState,S=>{for(let B in E)S.addCase(B,E[B]);for(let B of u.sliceMatchers)S.addMatcher(B.matcher,B.reducer);for(let B of j)S.addMatcher(B.matcher,B.reducer);I&&S.addDefaultCase(I)})}const h=T=>T,m=new Map,g=new WeakMap;let x;function v(T,j){return x||(x=f()),x(T,j)}function y(){return x||(x=f()),x.getInitialState()}function w(T,j=!1){function I(S){let B=S[T];return typeof B>"u"&&j&&(B=lC(g,I,y)),B}function E(S=h){const B=lC(m,j,()=>new WeakMap);return lC(B,S,()=>{const M={};for(const[R,k]of Object.entries(a.selectors??{}))M[R]=fDe(k,S,()=>lC(g,S,y),j);return M})}return{reducerPath:T,getSelectors:E,get selectors(){return E(I)},selectSlice:I}}const _={name:s,reducer:v,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,...w(o),injectInto(T,{reducerPath:j,...I}={}){const E=j??o;return T.inject({reducerPath:E,reducer:v},I),{..._,...w(E,!0)}}};return _}}function fDe(e,t,r,n){function a(s,...o){let l=t(s);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return a.unwrapped=e,a}var tu=dDe();function ADe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function hDe({type:e,reducerName:t,createNotation:r},n,a){let s,o;if("reducer"in n){if(r&&!pDe(n))throw new Error(Gc(17));s=n.reducer,o=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?Wu(e,o):Wu(e))}function mDe(e){return e._reducerDefinitionType==="asyncThunk"}function pDe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function gDe({type:e,reducerName:t},r,n,a){if(!a)throw new Error(Gc(18));const{payloadCreator:s,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,f=a(e,s,d);n.exposeAction(t,f),o&&n.addCase(f.fulfilled,o),l&&n.addCase(f.pending,l),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:o||cC,pending:l||cC,rejected:c||cC,settled:u||cC})}function cC(){}var xDe="task",wae="listener",Eae="completed",b8="cancelled",vDe=`task-${b8}`,bDe=`task-${Eae}`,zF=`${wae}-${b8}`,yDe=`${wae}-${Eae}`,h4=class{constructor(e){P3(this,"name","TaskAbortError");P3(this,"message");this.code=e,this.message=`${xDe} ${b8} (reason: ${e})`}},y8=(e,t)=>{if(typeof e!="function")throw new TypeError(Gc(32))},rS=()=>{},Nae=(e,t=rS)=>(e.catch(t),e),Cae=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ng=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},ag=e=>{if(e.aborted){const{reason:t}=e;throw new h4(t)}};function _ae(e,t){let r=rS;return new Promise((n,a)=>{const s=()=>a(new h4(e.reason));if(e.aborted){s();return}r=Cae(e,s),t.finally(()=>r()).then(n,a)}).finally(()=>{r=rS})}var wDe=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof h4?"cancelled":"rejected",error:r}}finally{t==null||t()}},nS=e=>t=>Nae(_ae(e,t).then(r=>(ag(e),r))),Sae=e=>{const t=nS(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Mv}=Object,Wz={},m4="listenerMiddleware",EDe=(e,t)=>{const r=n=>Cae(e,()=>ng(n,e.reason));return(n,a)=>{y8(n);const s=new AbortController;r(s);const o=wDe(async()=>{ag(e),ag(s.signal);const l=await n({pause:nS(s.signal),delay:Sae(s.signal),signal:s.signal});return ag(s.signal),l},()=>ng(s,bDe));return a!=null&&a.autoJoin&&t.push(o.catch(rS)),{result:nS(e)(o),cancel(){ng(s,vDe)}}}},NDe=(e,t)=>{const r=async(n,a)=>{ag(t);let s=()=>{};const l=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await _ae(t,Promise.race(l));return ag(t),c}finally{s()}};return(n,a)=>Nae(r(n,a))},kae=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=Wu(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Gc(21));return y8(s),{predicate:a,type:t,effect:s}},jae=Mv(e=>{const{type:t,predicate:r,effect:n}=kae(e);return{id:lDe(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Gc(22))}}},{withTypes:()=>jae}),Xz=(e,t)=>{const{type:r,effect:n,predicate:a}=kae(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},$F=e=>{e.pending.forEach(t=>{ng(t,zF)})},CDe=e=>()=>{e.forEach($F),e.clear()},Yz=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Bae=Mv(Wu(`${m4}/add`),{withTypes:()=>Bae}),_De=Wu(`${m4}/removeAll`),Tae=Mv(Wu(`${m4}/remove`),{withTypes:()=>Tae}),SDe=(...e)=>{console.error(`${m4}/error`,...e)},dE=(e={})=>{const t=new Map,{extra:r,onError:n=SDe}=e;y8(n);const a=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&$F(d)}),s=d=>{const f=Xz(t,d)??jae(d);return a(f)};Mv(s,{withTypes:()=>s});const o=d=>{const f=Xz(t,d);return f&&(f.unsubscribe(),d.cancelActive&&$F(f)),!!f};Mv(o,{withTypes:()=>o});const l=async(d,f,h,m)=>{const g=new AbortController,x=NDe(s,g.signal),v=[];try{d.pending.add(g),await Promise.resolve(d.effect(f,Mv({},h,{getOriginalState:m,condition:(y,w)=>x(y,w).then(Boolean),take:x,delay:Sae(g.signal),pause:nS(g.signal),extra:r,signal:g.signal,fork:EDe(g.signal,v),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((y,w,_)=>{y!==g&&(ng(y,zF),_.delete(y))})},cancel:()=>{ng(g,zF),d.pending.delete(g)},throwIfCancelled:()=>{ag(g.signal)}})))}catch(y){y instanceof h4||Yz(n,y,{raisedBy:"effect"})}finally{await Promise.all(v),ng(g,yDe),d.pending.delete(g)}},c=CDe(t);return{middleware:d=>f=>h=>{if(!dae(h))return f(h);if(Bae.match(h))return s(h.payload);if(_De.match(h)){c();return}if(Tae.match(h))return o(h.payload);let m=d.getState();const g=()=>{if(m===Wz)throw new Error(Gc(23));return m};let x;try{if(x=f(h),t.size>0){const v=d.getState(),y=Array.from(t.values());for(const w of y){let _=!1;try{_=w.predicate(h,v,m)}catch(T){_=!1,Yz(n,T,{raisedBy:"predicate"})}_&&l(w,h,d,g)}}}finally{m=Wz}return x},startListening:s,stopListening:o,clearListeners:c}};function Gc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var kDe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Iae=tu({name:"chartLayout",initialState:kDe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:jDe,setLayout:BDe,setChartSize:TDe,setScale:IDe}=Iae.actions,FDe=Iae.reducer;function Jz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jz(Object(r),!0).forEach(function(n){ODe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ODe(e,t,r){return(t=DDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DDe(e){var t=PDe(e,"string");return typeof t=="symbol"?t:t+""}function PDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aS=Math.PI/180,RDe=e=>e*180/Math.PI,ea=(e,t,r,n)=>({x:e+Math.cos(-aS*n)*r,y:t+Math.sin(-aS*n)*r}),Fae=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},LDe=(e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)},MDe=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,o=LDe({x:r,y:n},{x:a,y:s});if(o<=0)return{radius:o,angle:0};var l=(r-a)/o,c=Math.acos(l);return n>s&&(c=2*Math.PI-c),{radius:o,angle:RDe(c),angleInRadian:c}},UDe=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-s*360,endAngle:r-s*360}},QDe=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(a,s);return e+o*360},HDe=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:s}=MDe({x:r,y:n},t),{innerRadius:o,outerRadius:l}=t;if(a<o||a>l||a===0)return null;var{startAngle:c,endAngle:u}=UDe(t),d=s,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?Zz(Zz({},t),{},{radius:a,angle:QDe(d,t)}):null},Oae=e=>!C.isValidElement(e)&&typeof e!="function"&&typeof e!="boolean"&&e!=null?e.className:"";function Dae(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function e$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ru(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e$(Object(r),!0).forEach(function(n){VDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VDe(e,t,r){return(t=zDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zDe(e){var t=$De(e,"string");return typeof t=="symbol"?t:t+""}function $De(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ra(e,t,r){return Os(e)||Os(t)?r:oA(t)?Tm(e,t,r):typeof t=="function"?t(e):r}var GDe=(e,t,r,n,a)=>{var s,o=-1,l=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<l;c++){var u=c>0?r[c-1].coordinate:r[l-1].coordinate,d=r[c].coordinate,f=c>=l-1?r[0].coordinate:r[c+1].coordinate,h=void 0;if(to(d-u)!==to(f-d)){var m=[];if(to(f-d)===to(a[1]-a[0])){h=f;var g=d+a[1]-a[0];m[0]=Math.min(g,(g+u)/2),m[1]=Math.max(g,(g+u)/2)}else{h=u;var x=f+a[1]-a[0];m[0]=Math.min(d,(x+d)/2),m[1]=Math.max(d,(x+d)/2)}var v=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>v[0]&&e<=v[1]||e>=m[0]&&e<=m[1]){({index:o}=r[c]);break}}else{var y=Math.min(u,f),w=Math.max(u,f);if(e>(y+d)/2&&e<=(w+d)/2){({index:o}=r[c]);break}}}else if(t){for(var _=0;_<l;_++)if(_===0&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_>0&&_<l-1&&e>(t[_].coordinate+t[_-1].coordinate)/2&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_===l-1&&e>(t[_].coordinate+t[_-1].coordinate)/2){({index:o}=t[_]);break}}return o},qDe=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&s!=="center"&&fr(e[s]))return Ru(Ru({},e),{},{[s]:e[s]+(n||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&o!=="middle"&&fr(e[o]))return Ru(Ru({},e),{},{[o]:e[o]+(a||0)})}return e},qm=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Pae=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var a,s,o=e.map(l=>(l.coordinate===t&&(a=!0),l.coordinate===r&&(s=!0),l.coordinate));return a||o.push(t),s||o.push(r),o},Rae=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:m}=e;if(!o)return null;var g=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,x=a==="category"&&o.bandwidth?o.bandwidth()/g:0;if(x=m==="angleAxis"&&s&&s.length>=2?to(s[0]-s[1])*2*x:x,f||h){var v=(f||h||[]).map((y,w)=>{var _=n?n.indexOf(y):y;return{coordinate:o(_)+x,value:y,offset:x,index:w}});return v.filter(y=>!Xc(y.coordinate))}return c&&u?u.map((y,w)=>({coordinate:o(y)+x,value:y,index:w,offset:x})):o.ticks&&d!=null?o.ticks(d).map((y,w)=>({coordinate:o(y)+x,value:y,offset:x,index:w})):o.domain().map((y,w)=>({coordinate:o(y)+x,value:n?n[y]:y,index:w,offset:x}))},t$=1e-4,KDe=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-t$,s=Math.max(n[0],n[1])+t$,o=e(t[0]),l=e(t[r-1]);(o<a||o>s||l<a||l>s)&&e.domain([t[0],t[r-1]])}},WDe=(e,t)=>{if(!t||t.length!==2||!fr(t[0])||!fr(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!fr(e[0])||e[0]<r)&&(a[0]=r),(!fr(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},XDe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,o=0;o<t;++o){var l=Xc(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1])}},YDe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var o=Xc(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},JDe={sign:XDe,expand:jFe,none:Ab,silhouette:BFe,wiggle:TFe,positive:YDe},ZDe=(e,t,r)=>{var n=JDe[r],a=kFe().keys(t).value((s,o)=>+Ra(s,o,0)).order(DF).offset(n);return a(e)};function ePe(e){return e==null?void 0:String(e)}var r$=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+n:null;var l=Ra(s,t.dataKey,t.scale.domain()[o]);return Os(l)?null:t.scale(l)-a/2+n},tPe=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},rPe=e=>{var t=e.flat(2).filter(fr);return[Math.min(...t),Math.max(...t)]},nPe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],aPe=(e,t,r)=>{if(e!=null)return nPe(Object.keys(e).reduce((n,a)=>{var s=e[a],{stackedData:o}=s,l=o.reduce((c,u)=>{var d=Dae(u,t,r),f=rPe(d);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},n$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,a$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,m2=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=c4(t,d=>d.coordinate),s=1/0,o=1,l=a.length;o<l;o++){var c=a[o],u=a[o-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function s$(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return Ru(Ru({},t),{},{dataKey:r,payload:n,value:a,name:s})}function r1(e,t){if(e)return String(e);if(typeof t=="string")return t}function sPe(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var s=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return s?{x:e,y:t}:null}return n?HDe({x:e,y:t},n):null}var iPe=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,{radius:o}=n;return Ru(Ru(Ru({},n),ea(n.cx,n.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,{angle:c}=n;return Ru(Ru(Ru({},n),ea(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},oPe=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Hh=e=>e.layout.width,Vh=e=>e.layout.height,lPe=e=>e.layout.scale,Lae=e=>e.layout.margin,w8=dt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),E8=dt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Mae="data-recharts-item-index",Uae="data-recharts-item-data-key",p4=60;function i$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function B0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i$(Object(r),!0).forEach(function(n){cPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cPe(e,t,r){return(t=uPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uPe(e){var t=dPe(e,"string");return typeof t=="symbol"?t:t+""}function dPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fPe=e=>e.brush.height,Oi=dt([Hh,Vh,Lae,fPe,w8,E8,oae,FOe],(e,t,r,n,a,s,o,l)=>{var c=s.reduce((g,x)=>{var{orientation:v}=x;if(!x.mirror&&!x.hide){var y=typeof x.width=="number"?x.width:p4;return B0(B0({},g),{},{[v]:g[v]+y})}return g},{left:r.left||0,right:r.right||0}),u=a.reduce((g,x)=>{var{orientation:v}=x;return!x.mirror&&!x.hide?B0(B0({},g),{},{[v]:Tm(g,"".concat(v))+x.height}):g},{top:r.top||0,bottom:r.bottom||0}),d=B0(B0({},u),c),f=d.bottom;d.bottom+=n,d=qDe(d,o,l);var h=e-d.left-d.right,m=t-d.top-d.bottom;return B0(B0({brushBottom:f},d),{},{width:Math.max(h,0),height:Math.max(m,0)})}),APe=dt(Oi,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Qae=dt(Hh,Vh,(e,t)=>({x:0,y:0,width:e,height:t})),hPe=C.createContext(null),dc=()=>C.useContext(hPe)!=null,g4=e=>e.brush,x4=dt([g4,Oi,Lae],(e,t,r)=>({height:e.height,x:fr(e.x)?e.x:t.left,y:fr(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:fr(e.width)?e.width:t.width})),N8=()=>{var e,t=dc(),r=or(APe),n=or(x4),a=(e=or(g4))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},mPe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Hae=()=>{var e;return(e=or(Oi))!==null&&e!==void 0?e:mPe},C8=()=>or(Hh),_8=()=>or(Vh),pPe={top:0,right:0,bottom:0,left:0},gPe=()=>{var e;return(e=or(t=>t.layout.margin))!==null&&e!==void 0?e:pPe},In=e=>e.layout.layoutType,S8=()=>or(In),xPe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Vae=tu({name:"legend",initialState:xPe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=hh(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:o$,setLegendSettings:vPe,addLegendPayload:zae,removeLegendPayload:$ae}=Vae.actions,bPe=Vae.reducer,yPe=["contextPayload"];function GF(){return GF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},GF.apply(null,arguments)}function l$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l$(Object(r),!0).forEach(function(n){k8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k8(e,t,r){return(t=wPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wPe(e){var t=EPe(e,"string");return typeof t=="symbol"?t:t+""}function EPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NPe(e,t){if(e==null)return{};var r,n,a=CPe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function CPe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function _Pe(e){return e.value}function SPe(e){var{contextPayload:t}=e,r=NPe(e,yPe),n=rae(t,e.payloadUniqBy,_Pe),a=mb(mb({},r),{},{payload:n});return C.isValidElement(e.content)?C.cloneElement(e.content,a):typeof e.content=="function"?C.createElement(e.content,a):C.createElement(c8,a)}function kPe(e,t,r,n,a,s){var{layout:o,align:l,verticalAlign:c}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?u={left:((n||0)-s.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),mb(mb({},u),d)}function jPe(e){var t=Ga();return C.useEffect(()=>{t(vPe(e))},[t,e]),null}function BPe(e){var t=Ga();return C.useEffect(()=>(t(o$(e)),()=>{t(o$({width:0,height:0}))}),[t,e]),null}function TPe(e){var t=POe(),r=J6e(),n=gPe(),{width:a,height:s,wrapperStyle:o,portal:l}=e,[c,u]=lae([t]),d=C8(),f=_8(),h=d-(n.left||0)-(n.right||0),m=n1.getWidthOrHeight(e.layout,s,a,h),g=l?o:mb(mb({position:"absolute",width:(m==null?void 0:m.width)||a||"auto",height:(m==null?void 0:m.height)||s||"auto"},kPe(o,e,n,d,f,c)),o),x=l??r;if(x==null)return null;var v=C.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:u},C.createElement(jPe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),C.createElement(BPe,{width:c.width,height:c.height}),C.createElement(SPe,GF({},e,m,{margin:n,chartWidth:d,chartHeight:f,contextPayload:t})));return n8.createPortal(v,x)}class n1 extends C.PureComponent{static getWidthOrHeight(t,r,n,a){return t==="vertical"&&fr(r)?{height:r}:t==="horizontal"?{width:n||a}:null}render(){return C.createElement(TPe,this.props)}}k8(n1,"displayName","Legend");k8(n1,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function qF(){return qF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qF.apply(null,arguments)}function c$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ST(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c$(Object(r),!0).forEach(function(n){IPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IPe(e,t,r){return(t=FPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FPe(e){var t=OPe(e,"string");return typeof t=="symbol"?t:t+""}function OPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DPe(e){return Array.isArray(e)&&oA(e[0])&&oA(e[1])?e.join(" ~ "):e}var PPe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,m=()=>{if(s&&s.length){var j={padding:0,margin:0},I=(l?c4(s,l):s).map((E,S)=>{if(E.type==="none")return null;var B=E.formatter||o||DPe,{value:M,name:R}=E,k=M,D=R;if(B){var L=B(M,R,E,S,s);if(Array.isArray(L))[k,D]=L;else if(L!=null)k=L;else return null}var Z=ST({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},n);return C.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(S),style:Z},oA(D)?C.createElement("span",{className:"recharts-tooltip-item-name"},D):null,oA(D)?C.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,C.createElement("span",{className:"recharts-tooltip-item-value"},k),C.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return C.createElement("ul",{className:"recharts-tooltip-item-list",style:j},I)}return null},g=ST({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=ST({margin:0},a),v=!Os(d),y=v?d:"",w=bn("recharts-default-tooltip",c),_=bn("recharts-tooltip-label",u);v&&f&&s!==void 0&&s!==null&&(y=f(d,s));var T=h?{role:"status","aria-live":"assertive"}:{};return C.createElement("div",qF({className:w,style:g},T),C.createElement("p",{className:_,style:x},C.isValidElement(y)?y:"".concat(y)),m())},uy="recharts-tooltip-wrapper",RPe={visibility:"hidden"};function LPe(e){var{coordinate:t,translateX:r,translateY:n}=e;return bn(uy,{["".concat(uy,"-right")]:fr(r)&&t&&fr(t.x)&&r>=t.x,["".concat(uy,"-left")]:fr(r)&&t&&fr(t.x)&&r<t.x,["".concat(uy,"-bottom")]:fr(n)&&t&&fr(t.y)&&n>=t.y,["".concat(uy,"-top")]:fr(n)&&t&&fr(t.y)&&n<t.y})}function u$(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(s&&fr(s[n]))return s[n];var d=r[n]-l-(a>0?a:0),f=r[n]+a;if(t[n])return o[n]?d:f;var h=c[n];if(h==null)return 0;if(o[n]){var m=d,g=h;return m<g?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var x=f+l,v=h+u;return x>v?Math.max(d,h):Math.max(f,h)}function MPe(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function UPe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,u,d,f;return o.height>0&&o.width>0&&r?(d=u$({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=u$({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=MPe({translateX:d,translateY:f,useTranslate3d:l})):u=RPe,{cssProperties:u,cssClasses:LPe({translateX:d,translateY:f,coordinate:r})}}function d$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function uC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d$(Object(r),!0).forEach(function(n){KF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KF(e,t,r){return(t=QPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QPe(e){var t=HPe(e,"string");return typeof t=="symbol"?t:t+""}function HPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class VPe extends C.PureComponent{constructor(){super(...arguments),KF(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),KF(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:m,wrapperStyle:g,lastBoundingBox:x,innerRef:v,hasPortalFromProps:y}=this.props,{cssClasses:w,cssProperties:_}=UPe({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:x.height,width:x.width},useTranslate3d:h,viewBox:m}),T=y?{}:uC(uC({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),j=uC(uC({},T),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},g);return C.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:j,ref:v},s)}}var zPe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Xg={isSsr:zPe()},Gae=()=>or(e=>e.rootProps.accessibilityLayer);function Zc(e){return Number.isFinite(e)}function pb(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function WF(){return WF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},WF.apply(null,arguments)}function f$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function A$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f$(Object(r),!0).forEach(function(n){$Pe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $Pe(e,t,r){return(t=GPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GPe(e){var t=qPe(e,"string");return typeof t=="symbol"?t:t+""}function qPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var h$={curveBasisClosed:gFe,curveBasisOpen:xFe,curveBasis:pFe,curveBumpX:rFe,curveBumpY:nFe,curveLinearClosed:vFe,curveLinear:i4,curveMonotoneX:bFe,curveMonotoneY:yFe,curveNatural:wFe,curveStep:EFe,curveStepAfter:CFe,curveStepBefore:NFe},dC=e=>Zc(e.x)&&Zc(e.y),dy=e=>e.x,fy=e=>e.y,KPe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(cE(e));return(r==="curveMonotone"||r==="curveBump")&&t?h$["".concat(r).concat(t==="vertical"?"Y":"X")]:h$[r]||i4},WPe=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=e,o=KPe(t,a),l=s?r.filter(dC):r,c;if(Array.isArray(n)){var u=s?n.filter(f=>dC(f)):n,d=l.map((f,h)=>A$(A$({},f),{},{base:u[h]}));return a==="vertical"?c=sC().y(fy).x1(dy).x0(f=>f.base.x):c=sC().x(dy).y1(fy).y0(f=>f.base.y),c.defined(dC).curve(o),c(d)}return a==="vertical"&&fr(n)?c=sC().y(fy).x1(dy).x0(n):fr(n)?c=sC().x(dy).y1(fy).y0(n):c=Mne().x(dy).y(fy),c.defined(dC).curve(o),c(l)},qae=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var s=r&&r.length?WPe(e):n;return C.createElement("path",WF({},dl(e),t8(e),{className:bn("recharts-curve",t),d:s===null?void 0:s,ref:a}))},XPe=["x","y","top","left","width","height","className"];function XF(){return XF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},XF.apply(null,arguments)}function m$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function YPe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m$(Object(r),!0).forEach(function(n){JPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JPe(e,t,r){return(t=ZPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZPe(e){var t=eRe(e,"string");return typeof t=="symbol"?t:t+""}function eRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tRe(e,t){if(e==null)return{};var r,n,a=rRe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function rRe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var nRe=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),aRe=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:o=0,className:l}=e,c=tRe(e,XPe),u=YPe({x:t,y:r,top:n,left:a,width:s,height:o},c);return!fr(t)||!fr(r)||!fr(s)||!fr(o)||!fr(n)||!fr(a)?null:C.createElement("path",XF({},Xn(u,!0),{className:bn("recharts-cross",l),d:nRe(t,r,s,o,n,a)}))};function sRe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function p$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function iRe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p$(Object(r),!0).forEach(function(n){oRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oRe(e,t,r){return(t=lRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lRe(e){var t=cRe(e,"string");return typeof t=="symbol"?t:t+""}function cRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ju(e,t){var r=iRe({},e),n=t,a=Object.keys(t),s=a.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return s}var kT={},jT={},BT={},g$;function uRe(){return g$||(g$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(BT)),BT}var x$;function dRe(){return x$||(x$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uRe(),r=Zne(),n=A8(),a=h8(),s=d8();function o(u,d,f){return l(u,d,void 0,void 0,void 0,void 0,f)}function l(u,d,f,h,m,g,x){const v=x(u,d,f,h,m,g);if(v!==void 0)return v;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,g,x)}return c(u,d,g,x)}function c(u,d,f,h){if(Object.is(u,d))return!0;let m=n.getTag(u),g=n.getTag(d);if(m===a.argumentsTag&&(m=a.objectTag),g===a.argumentsTag&&(g=a.objectTag),m!==g)return!1;switch(m){case a.stringTag:return u.toString()===d.toString();case a.numberTag:{const y=u.valueOf(),w=d.valueOf();return s.eq(y,w)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(u.valueOf(),d.valueOf());case a.regexpTag:return u.source===d.source&&u.flags===d.flags;case a.functionTag:return u===d}f=f??new Map;const x=f.get(u),v=f.get(d);if(x!=null&&v!=null)return x===d;f.set(u,d),f.set(d,u);try{switch(m){case a.mapTag:{if(u.size!==d.size)return!1;for(const[y,w]of u.entries())if(!d.has(y)||!l(w,d.get(y),y,u,d,f,h))return!1;return!0}case a.setTag:{if(u.size!==d.size)return!1;const y=Array.from(u.values()),w=Array.from(d.values());for(let _=0;_<y.length;_++){const T=y[_],j=w.findIndex(I=>l(T,I,void 0,u,d,f,h));if(j===-1)return!1;w.splice(j,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let y=0;y<u.length;y++)if(!l(u[y],d[y],y,u,d,f,h))return!1;return!0}case a.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case a.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case a.errorTag:return u.name===d.name&&u.message===d.message;case a.objectTag:{if(!(c(u.constructor,d.constructor,f,h)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const w=[...Object.keys(u),...r.getSymbols(u)],_=[...Object.keys(d),...r.getSymbols(d)];if(w.length!==_.length)return!1;for(let T=0;T<w.length;T++){const j=w[T],I=u[j];if(!Object.hasOwn(d,j))return!1;const E=d[j];if(!l(I,E,j,u,d,f,h))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=o}(jT)),jT}var TT={},v$;function fRe(){return v$||(v$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(TT)),TT}var b$;function ARe(){return b$||(b$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dRe(),r=fRe();function n(a,s){return t.isEqualWith(a,s,r.noop)}e.isEqual=n}(kT)),kT}var IT,y$;function hRe(){return y$||(y$=1,IT=ARe().isEqual),IT}var mRe=hRe();const pRe=jl(mRe);var sS=1e-4,Kae=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Wae=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),w$=(e,t)=>r=>{var n=Kae(e,t);return Wae(n,r)},gRe=(e,t)=>r=>{var n=Kae(e,t),a=[...n.map((s,o)=>s*o).slice(1),0];return Wae(a,r)},E$=function(){for(var t,r,n,a,s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,a]=c[1].split(")")[0].split(",").map(g=>parseFloat(g)))}}else o.length===4&&([t,n,r,a]=o);var u=w$(t,r),d=w$(n,a),f=gRe(t,r),h=g=>g>1?1:g<0?0:g,m=g=>{for(var x=g>1?1:g,v=x,y=0;y<8;++y){var w=u(v)-x,_=f(v);if(Math.abs(w-x)<sS||_<sS)return d(v);v=h(v-w/_)}return d(v)};return m.isStepper=!1,m},xRe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,s=(o,l,c)=>{var u=-(o-l)*r,d=c*n,f=c+(u-d)*a/1e3,h=c*a/1e3+o;return Math.abs(h-l)<sS&&Math.abs(f)<sS?[l,0]:[h,f]};return s.isStepper=!0,s.dt=a,s},Xae=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return E$(e);case"spring":return xRe();default:if(e.split("(")[0]==="cubic-bezier")return E$(e)}return typeof e=="function"?e:null};function N$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function C$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N$(Object(r),!0).forEach(function(n){vRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vRe(e,t,r){return(t=bRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bRe(e){var t=yRe(e,"string");return typeof t=="symbol"?t:t+""}function yRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wRe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),ERe=(e,t,r)=>e.map(n=>"".concat(wRe(n)," ").concat(t,"ms ").concat(r)).join(","),NRe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),p2=(e,t)=>Object.keys(t).reduce((r,n)=>C$(C$({},r),{},{[n]:e(n,t[n])}),{});function _$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_$(Object(r),!0).forEach(function(n){CRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CRe(e,t,r){return(t=_Re(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Re(e){var t=SRe(e,"string");return typeof t=="symbol"?t:t+""}function SRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iS=(e,t,r)=>e+(t-e)*r,YF=e=>{var{from:t,to:r}=e;return t!==r},Yae=(e,t,r)=>{var n=p2((a,s)=>{if(YF(s)){var[o,l]=e(s.from,s.to,s.velocity);return bo(bo({},s),{},{from:o,velocity:l})}return s},t);return r<1?p2((a,s)=>YF(s)?bo(bo({},s),{},{velocity:iS(s.velocity,n[a].velocity,r),from:iS(s.from,n[a].from,r)}):s,t):Yae(e,n,r-1)};function kRe(e,t,r,n,a,s){var o,l=n.reduce((h,m)=>bo(bo({},h),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),c=()=>p2((h,m)=>m.from,l),u=()=>!Object.values(l).filter(YF).length,d=null,f=h=>{o||(o=h);var m=h-o,g=m/r.dt;l=Yae(r,l,g),a(bo(bo(bo({},e),t),c())),o=h,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{d()})}function jRe(e,t,r,n,a,s,o){var l=null,c=a.reduce((f,h)=>bo(bo({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,m=p2((x,v)=>iS(...v,r(h)),c);if(s(bo(bo(bo({},e),t),m)),h<1)l=o.setTimeout(d);else{var g=p2((x,v)=>iS(...v,r(1)),c);s(bo(bo(bo({},e),t),g))}};return()=>(l=o.setTimeout(d),()=>{l()})}const Jae=(e,t,r,n,a,s)=>{var o=NRe(e,t);return r.isStepper===!0?kRe(e,t,r,o,a,s):jRe(e,t,r,n,o,a,s)};function BRe(e){var t,r=()=>null,n=!1,a=null,s=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){a=e.setTimeout(s.bind(null,u),c);return}s(c),a=e.setTimeout(s.bind(null,u));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),s(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class TRe{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{cancelAnimationFrame(a)}}}function IRe(){return BRe(new TRe)}var FRe=C.createContext(IRe);function Zae(e,t){var r=C.useContext(FRe);return C.useMemo(()=>t??r(e),[e,t,r])}var ORe=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function JF(){return JF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},JF.apply(null,arguments)}function DRe(e,t){if(e==null)return{};var r,n,a=PRe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function PRe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function S$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function T0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S$(Object(r),!0).forEach(function(n){Hp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hp(e,t,r){return(t=RRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RRe(e){var t=LRe(e,"string");return typeof t=="symbol"?t:t+""}function LRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class j8 extends C.PureComponent{constructor(t,r){super(t,r),Hp(this,"mounted",!1),Hp(this,"manager",void 0),Hp(this,"stopJSAnimation",null),Hp(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:s,to:o,children:l,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(s){if(typeof l=="function"){this.state={style:s};return}this.state={style:a?{[a]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:s,to:o,from:l}=this.props,{style:c}=this.state;if(n){if(!r){var u={style:a?{[a]:o}:o};this.state&&c&&(a&&c[a]!==o||!a&&c!==o)&&this.setState(u);return}if(!(pRe(t.to,o)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||s?l:t.to;if(this.state&&c){var h={style:a?{[a]:f}:f};(a&&c[a]!==f||!a&&c!==f)&&this.setState(h)}this.runAnimation(T0(T0({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:c}=t,u=Jae(r,n,Xae(s),a,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,o,d,a,l])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:s,easing:o,onAnimationStart:l,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof u=="function"||o==="spring"){this.runJSAnimation(t);return}var d=a?{[a]:s}:s,f=ERe(Object.keys(d),n,o);this.manager.start([l,r,T0(T0({},d),{},{transition:f}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:s,easing:o,isActive:l,from:c,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:h,onAnimationReStart:m,animationManager:g}=t,x=DRe(t,ORe),v=C.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!l||v===0||a<=0)return r;var w=_=>{var{style:T={},className:j}=_.props,I=C.cloneElement(_,T0(T0({},x),{},{style:T0(T0({},T),y),className:j}));return I};return v===1?w(C.Children.only(r)):C.createElement("div",null,C.Children.map(r,_=>w(_)))}}Hp(j8,"displayName","Animate");Hp(j8,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function oS(e){var t,r=Zae((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return C.createElement(j8,JF({},e,{animationManager:r}))}function lS(){return lS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lS.apply(null,arguments)}var k$=(e,t,r,n,a)=>{var s=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=a[f]>s?s:a[f];u="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),u+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+o*d[1])),u+="L ".concat(e+r,",").concat(t+n-o*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(t+n)),u+="L ".concat(e+l*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-o*d[3])),u+="Z"}else if(s>0&&a===+a&&a>0){var m=Math.min(s,a);u="M ".concat(e,",").concat(t+o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(t,`
            L `).concat(e+r-l*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*m,`
            L `).concat(e+r,",").concat(t+n-o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-l*m,",").concat(t+n,`
            L `).concat(e+l*m,",").concat(t+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*m," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},MRe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ese=e=>{var t=Ju(e,MRe),r=C.useRef(null),[n,a]=C.useState(-1);C.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&a(y)}catch{}},[]);var{x:s,y:o,width:l,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isAnimationActive:g,isUpdateAnimationActive:x}=t;if(s!==+s||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var v=bn("recharts-rectangle",d);return x?C.createElement(oS,{canBegin:n>0,from:{width:l,height:c,x:s,y:o},to:{width:l,height:c,x:s,y:o},duration:h,animationEasing:f,isActive:x},y=>{var{width:w,height:_,x:T,y:j}=y;return C.createElement(oS,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,isActive:g,easing:f},C.createElement("path",lS({},Xn(t,!0),{className:v,d:k$(T,j,w,_,u),ref:r})))}):C.createElement("path",lS({},Xn(t,!0),{className:v,d:k$(s,o,l,c,u)}))};function tse(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e,o=ea(t,r,n,a),l=ea(t,r,n,s);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function ZF(){return ZF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ZF.apply(null,arguments)}var URe=(e,t)=>{var r=to(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},fC=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,u=l*(o?1:-1)+n,d=Math.asin(l/u)/aS,f=c?a:a+s*d,h=ea(t,r,u,f),m=ea(t,r,n,f),g=c?a-s*d:a,x=ea(t,r,u*Math.cos(d*aS),g);return{center:h,circleTangency:m,lineTangency:x,theta:d}},rse=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:o}=e,l=URe(s,o),c=s+l,u=ea(t,r,a,s),d=ea(t,r,a,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=ea(t,r,n,s),m=ea(t,r,n,c);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},QRe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=to(u-c),{circleTangency:f,lineTangency:h,theta:m}=fC({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),{circleTangency:g,lineTangency:x,theta:v}=fC({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),y=l?Math.abs(c-u):Math.abs(c-u)-m-v;if(y<0)return o?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):rse({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
  `);if(n>0){var{circleTangency:_,lineTangency:T,theta:j}=fC({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:I,lineTangency:E,theta:S}=fC({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),B=l?Math.abs(c-u):Math.abs(c-u)-j-S;if(B<0&&s===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(E.x,",").concat(E.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(B>180),",").concat(+(d>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(T.x,",").concat(T.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},HRe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},nse=e=>{var t=Ju(e,HRe),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(s<a||u===d)return null;var h=bn("recharts-sector",f),m=s-a,g=kl(o,m,0,!0),x;return g>0&&Math.abs(u-d)<360?x=QRe({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):x=rse({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),C.createElement("path",ZF({},Xn(t,!0),{className:h,d:x}))};function VRe(e,t,r){var n,a,s,o;if(e==="horizontal")n=t.x,s=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,h=ea(l,c,u,f),m=ea(l,c,d,f);n=h.x,a=h.y,s=m.x,o=m.y}else return tse(t);return[{x:n,y:a},{x:s,y:o}]}var FT={},OT={},DT={},j$;function zRe(){return j$||(j$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sae();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r}(DT)),DT}var B$;function $Re(){return B$||(B$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zRe();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r}(OT)),OT}var T$;function GRe(){return T$||(T$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iae(),r=$Re();function n(a,s,o){o&&typeof o!="number"&&t.isIterateeCall(a,s,o)&&(s=o=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),o=o===void 0?a<s?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((s-a)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=a,a+=o;return c}e.range=n}(FT)),FT}var PT,I$;function qRe(){return I$||(I$=1,PT=GRe().range),PT}var KRe=qRe();const ase=jl(KRe);function dm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function WRe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function B8(e){let t,r,n;e.length!==2?(t=dm,r=(l,c)=>dm(e(l),c),n=(l,c)=>e(l)-c):(t=e===dm||e===WRe?e:XRe,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:s}}function XRe(){return 0}function sse(e){return e===null?NaN:+e}function*YRe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const JRe=B8(dm),fE=JRe.right;B8(sse).center;class F$ extends Map{constructor(t,r=t8e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(O$(this,t))}has(t){return super.has(O$(this,t))}set(t,r){return super.set(ZRe(this,t),r)}delete(t){return super.delete(e8e(this,t))}}function O$({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function ZRe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function e8e({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function t8e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function r8e(e=dm){if(e===dm)return ise;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function ise(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const n8e=Math.sqrt(50),a8e=Math.sqrt(10),s8e=Math.sqrt(2);function cS(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),o=s>=n8e?10:s>=a8e?5:s>=s8e?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?cS(e,t,r*2):[l,c,u]}function eO(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,o]=n?cS(t,e,r):cS(e,t,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function tO(e,t,r){return t=+t,e=+e,r=+r,cS(e,t,r)[2]}function rO(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?tO(t,e,r):tO(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function D$(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function P$(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function ose(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?ise:r8e(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+h)),g=Math.min(n,Math.floor(t+(c-u)*f/c+h));ose(e,t,m,g,a)}const s=e[t];let o=r,l=n;for(Ay(e,r,t),a(e[n],s)>0&&Ay(e,r,n);o<l;){for(Ay(e,o,l),++o,--l;a(e[o],s)<0;)++o;for(;a(e[l],s)>0;)--l}a(e[r],s)===0?Ay(e,r,l):(++l,Ay(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Ay(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function i8e(e,t,r){if(e=Float64Array.from(YRe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return P$(e);if(t>=1)return D$(e);var n,a=(n-1)*t,s=Math.floor(a),o=D$(ose(e,s).subarray(0,s+1)),l=P$(e.subarray(s+1));return o+(l-o)*(a-s)}}function o8e(e,t,r=sse){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),o=+r(e[s],s,e),l=+r(e[s+1],s+1,e);return o+(l-o)*(a-s)}}function l8e(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}function Zu(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function zh(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const nO=Symbol("implicit");function v4(){var e=new F$,t=[],r=[],n=nO;function a(s){let o=e.get(s);if(o===void 0){if(n!==nO)return n;e.set(s,o=t.push(s)-1)}return r[o%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new F$;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return v4(t,r).unknown(n)},Zu.apply(a,arguments),a}function T8(){var e=v4().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=a<n,g=m?a:n,x=m?n:a;s=(x-g)/Math.max(1,h-c+u*2),l&&(s=Math.floor(s)),g+=(x-g-s*(h-c))*d,o=s*(1-c),l&&(g=Math.round(g),o=Math.round(o));var v=l8e(h).map(function(y){return g+s*y});return r(m?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return T8(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Zu.apply(f(),arguments)}function lse(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return lse(t())},e}function c8e(){return lse(T8.apply(null,arguments).paddingInner(1))}function I8(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function cse(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function AE(){}var g2=.7,uS=1/g2,Uv="\\s*([+-]?\\d+)\\s*",x2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u8e=/^#([0-9a-f]{3,8})$/,d8e=new RegExp(`^rgb\\(${Uv},${Uv},${Uv}\\)$`),f8e=new RegExp(`^rgb\\(${nA},${nA},${nA}\\)$`),A8e=new RegExp(`^rgba\\(${Uv},${Uv},${Uv},${x2}\\)$`),h8e=new RegExp(`^rgba\\(${nA},${nA},${nA},${x2}\\)$`),m8e=new RegExp(`^hsl\\(${x2},${nA},${nA}\\)$`),p8e=new RegExp(`^hsla\\(${x2},${nA},${nA},${x2}\\)$`),R$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};I8(AE,kg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:L$,formatHex:L$,formatHex8:g8e,formatHsl:x8e,formatRgb:M$,toString:M$});function L$(){return this.rgb().formatHex()}function g8e(){return this.rgb().formatHex8()}function x8e(){return use(this).formatHsl()}function M$(){return this.rgb().formatRgb()}function kg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=u8e.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?U$(t):r===3?new nc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?AC(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?AC(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=d8e.exec(e))?new nc(t[1],t[2],t[3],1):(t=f8e.exec(e))?new nc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=A8e.exec(e))?AC(t[1],t[2],t[3],t[4]):(t=h8e.exec(e))?AC(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=m8e.exec(e))?V$(t[1],t[2]/100,t[3]/100,1):(t=p8e.exec(e))?V$(t[1],t[2]/100,t[3]/100,t[4]):R$.hasOwnProperty(e)?U$(R$[e]):e==="transparent"?new nc(NaN,NaN,NaN,0):null}function U$(e){return new nc(e>>16&255,e>>8&255,e&255,1)}function AC(e,t,r,n){return n<=0&&(e=t=r=NaN),new nc(e,t,r,n)}function v8e(e){return e instanceof AE||(e=kg(e)),e?(e=e.rgb(),new nc(e.r,e.g,e.b,e.opacity)):new nc}function aO(e,t,r,n){return arguments.length===1?v8e(e):new nc(e,t,r,n??1)}function nc(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}I8(nc,aO,cse(AE,{brighter(e){return e=e==null?uS:Math.pow(uS,e),new nc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?g2:Math.pow(g2,e),new nc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new nc(sg(this.r),sg(this.g),sg(this.b),dS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Q$,formatHex:Q$,formatHex8:b8e,formatRgb:H$,toString:H$}));function Q$(){return`#${Vp(this.r)}${Vp(this.g)}${Vp(this.b)}`}function b8e(){return`#${Vp(this.r)}${Vp(this.g)}${Vp(this.b)}${Vp((isNaN(this.opacity)?1:this.opacity)*255)}`}function H$(){const e=dS(this.opacity);return`${e===1?"rgb(":"rgba("}${sg(this.r)}, ${sg(this.g)}, ${sg(this.b)}${e===1?")":`, ${e})`}`}function dS(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function sg(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Vp(e){return e=sg(e),(e<16?"0":"")+e.toString(16)}function V$(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Bd(e,t,r,n)}function use(e){if(e instanceof Bd)return new Bd(e.h,e.s,e.l,e.opacity);if(e instanceof AE||(e=kg(e)),!e)return new Bd;if(e instanceof Bd)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),o=NaN,l=s-a,c=(s+a)/2;return l?(t===s?o=(r-n)/l+(r<n)*6:r===s?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new Bd(o,l,c,e.opacity)}function y8e(e,t,r,n){return arguments.length===1?use(e):new Bd(e,t,r,n??1)}function Bd(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}I8(Bd,y8e,cse(AE,{brighter(e){return e=e==null?uS:Math.pow(uS,e),new Bd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?g2:Math.pow(g2,e),new Bd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new nc(RT(e>=240?e-240:e+120,a,n),RT(e,a,n),RT(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Bd(z$(this.h),hC(this.s),hC(this.l),dS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=dS(this.opacity);return`${e===1?"hsl(":"hsla("}${z$(this.h)}, ${hC(this.s)*100}%, ${hC(this.l)*100}%${e===1?")":`, ${e})`}`}}));function z$(e){return e=(e||0)%360,e<0?e+360:e}function hC(e){return Math.max(0,Math.min(1,e||0))}function RT(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const F8=e=>()=>e;function w8e(e,t){return function(r){return e+r*t}}function E8e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function N8e(e){return(e=+e)==1?dse:function(t,r){return r-t?E8e(t,r,e):F8(isNaN(t)?r:t)}}function dse(e,t){var r=t-e;return r?w8e(e,r):F8(isNaN(e)?t:e)}const fS=function e(t){var r=N8e(t);function n(a,s){var o=r((a=aO(a)).r,(s=aO(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),u=dse(a.opacity,s.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function C8e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function _8e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function S8e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)a[o]=a1(e[o],t[o]);for(;o<r;++o)s[o]=t[o];return function(l){for(o=0;o<n;++o)s[o]=a[o](l);return s}}function k8e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function kd(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function j8e(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=a1(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var sO=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,LT=new RegExp(sO.source,"g");function B8e(e){return function(){return e}}function T8e(e){return function(t){return e(t)+""}}function fse(e,t){var r=sO.lastIndex=LT.lastIndex=0,n,a,s,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=sO.exec(e))&&(a=LT.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:kd(n,a)})),r=LT.lastIndex;return r<t.length&&(s=t.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?T8e(c[0].x):B8e(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function a1(e,t){var r=typeof t,n;return t==null||r==="boolean"?F8(t):(r==="number"?kd:r==="string"?(n=kg(t))?(t=n,fS):fse:t instanceof kg?fS:t instanceof Date?k8e:_8e(t)?C8e:Array.isArray(t)?S8e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?j8e:kd)(e,t)}function O8(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var $$=180/Math.PI,iO={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ase(e,t,r,n,a,s){var o,l,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*r+t*n)&&(r-=e*c,n-=t*c),(l=Math.sqrt(r*r+n*n))&&(r/=l,n/=l,c/=l),e*n<t*r&&(e=-e,t=-t,c=-c,o=-o),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*$$,skewX:Math.atan(c)*$$,scaleX:o,scaleY:l}}var mC;function I8e(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?iO:Ase(t.a,t.b,t.c,t.d,t.e,t.f)}function F8e(e){return e==null||(mC||(mC=document.createElementNS("http://www.w3.org/2000/svg","g")),mC.setAttribute("transform",e),!(e=mC.transform.baseVal.consolidate()))?iO:(e=e.matrix,Ase(e.a,e.b,e.c,e.d,e.e,e.f))}function hse(e,t,r,n){function a(u){return u.length?u.pop()+" ":""}function s(u,d,f,h,m,g){if(u!==f||d!==h){var x=m.push("translate(",null,t,null,r);g.push({i:x-4,x:kd(u,f)},{i:x-2,x:kd(d,h)})}else(f||h)&&m.push("translate("+f+t+h+r)}function o(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(a(f)+"rotate(",null,n)-2,x:kd(u,d)})):d&&f.push(a(f)+"rotate("+d+n)}function l(u,d,f,h){u!==d?h.push({i:f.push(a(f)+"skewX(",null,n)-2,x:kd(u,d)}):d&&f.push(a(f)+"skewX("+d+n)}function c(u,d,f,h,m,g){if(u!==f||d!==h){var x=m.push(a(m)+"scale(",null,",",null,")");g.push({i:x-4,x:kd(u,f)},{i:x-2,x:kd(d,h)})}else(f!==1||h!==1)&&m.push(a(m)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,h),o(u.rotate,d.rotate,f,h),l(u.skewX,d.skewX,f,h),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(m){for(var g=-1,x=h.length,v;++g<x;)f[(v=h[g]).i]=v.x(m);return f.join("")}}}var O8e=hse(I8e,"px, ","px)","deg)"),D8e=hse(F8e,", ",")",")"),P8e=1e-12;function G$(e){return((e=Math.exp(e))+1/e)/2}function R8e(e){return((e=Math.exp(e))-1/e)/2}function L8e(e){return((e=Math.exp(2*e))-1)/(e+1)}const M8e=function e(t,r,n){function a(s,o){var l=s[0],c=s[1],u=s[2],d=o[0],f=o[1],h=o[2],m=d-l,g=f-c,x=m*m+g*g,v,y;if(x<P8e)y=Math.log(h/u)/t,v=function(E){return[l+E*m,c+E*g,u*Math.exp(t*E*y)]};else{var w=Math.sqrt(x),_=(h*h-u*u+n*x)/(2*u*r*w),T=(h*h-u*u-n*x)/(2*h*r*w),j=Math.log(Math.sqrt(_*_+1)-_),I=Math.log(Math.sqrt(T*T+1)-T);y=(I-j)/t,v=function(E){var S=E*y,B=G$(j),M=u/(r*w)*(B*L8e(t*S+j)-R8e(j));return[l+M*m,c+M*g,u*B/G$(t*S+j)]}}return v.duration=y*1e3*t/Math.SQRT2,v}return a.rho=function(s){var o=Math.max(.001,+s),l=o*o,c=l*l;return e(o,l,c)},a}(Math.SQRT2,2,4);function U8e(e,t){t===void 0&&(t=e,e=a1);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[l](o-l)}}function Q8e(e){return function(){return e}}function AS(e){return+e}var q$=[0,1];function Nl(e){return e}function oO(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Q8e(isNaN(t)?NaN:.5)}function H8e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function V8e(e,t,r){var n=e[0],a=e[1],s=t[0],o=t[1];return a<n?(n=oO(a,n),s=r(o,s)):(n=oO(n,a),s=r(s,o)),function(l){return s(n(l))}}function z8e(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=oO(e[o],e[o+1]),s[o]=r(t[o],t[o+1]);return function(l){var c=fE(e,l,1,n)-1;return s[c](a[c](l))}}function hE(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function b4(){var e=q$,t=q$,r=a1,n,a,s,o=Nl,l,c,u;function d(){var h=Math.min(e.length,t.length);return o!==Nl&&(o=H8e(e[0],e[h-1])),l=h>2?z8e:V8e,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=l(e.map(n),t,r)))(n(o(h)))}return f.invert=function(h){return o(a((u||(u=l(t,e.map(n),kd)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,AS),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=O8,d()},f.clamp=function(h){return arguments.length?(o=h?!0:Nl,d()):o!==Nl},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,m){return n=h,a=m,d()}}function D8(){return b4()(Nl,Nl)}function $8e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function hS(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function gb(e){return e=hS(Math.abs(e)),e?e[1]:NaN}function G8e(e,t){return function(r,n){for(var a=r.length,s=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return s.reverse().join(t)}}function q8e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var K8e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function v2(e){if(!(t=K8e.exec(e)))throw new Error("invalid format: "+e);var t;return new P8({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}v2.prototype=P8.prototype;function P8(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}P8.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function W8e(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var mse;function X8e(e,t){var r=hS(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(mse=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+hS(e,Math.max(0,t+s-1))[0]}function K$(e,t){var r=hS(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const W$={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:$8e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>K$(e*100,t),r:K$,s:X8e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function X$(e){return e}var Y$=Array.prototype.map,J$=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Y8e(e){var t=e.grouping===void 0||e.thousands===void 0?X$:G8e(Y$.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?X$:q8e(Y$.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=v2(f);var h=f.fill,m=f.align,g=f.sign,x=f.symbol,v=f.zero,y=f.width,w=f.comma,_=f.precision,T=f.trim,j=f.type;j==="n"?(w=!0,j="g"):W$[j]||(_===void 0&&(_=12),T=!0,j="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var I=x==="$"?r:x==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",E=x==="$"?n:/[%p]/.test(j)?o:"",S=W$[j],B=/[defgprs%]/.test(j);_=_===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function M(R){var k=I,D=E,L,Z,V;if(j==="c")D=S(R)+D,R="";else{R=+R;var q=R<0||1/R<0;if(R=isNaN(R)?c:S(Math.abs(R),_),T&&(R=W8e(R)),q&&+R==0&&g!=="+"&&(q=!1),k=(q?g==="("?g:l:g==="-"||g==="("?"":g)+k,D=(j==="s"?J$[8+mse/3]:"")+D+(q&&g==="("?")":""),B){for(L=-1,Z=R.length;++L<Z;)if(V=R.charCodeAt(L),48>V||V>57){D=(V===46?a+R.slice(L+1):R.slice(L))+D,R=R.slice(0,L);break}}}w&&!v&&(R=t(R,1/0));var G=k.length+R.length+D.length,K=G<y?new Array(y-G+1).join(h):"";switch(w&&v&&(R=t(K+R,K.length?y-D.length:1/0),K=""),m){case"<":R=k+R+D+K;break;case"=":R=k+K+R+D;break;case"^":R=K.slice(0,G=K.length>>1)+k+R+D+K.slice(G);break;default:R=K+k+R+D;break}return s(R)}return M.toString=function(){return f+""},M}function d(f,h){var m=u((f=v2(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(gb(h)/3)))*3,x=Math.pow(10,-g),v=J$[8+g/3];return function(y){return m(x*y)+v}}return{format:u,formatPrefix:d}}var pC,R8,pse;J8e({thousands:",",grouping:[3],currency:["$",""]});function J8e(e){return pC=Y8e(e),R8=pC.format,pse=pC.formatPrefix,pC}function Z8e(e){return Math.max(0,-gb(Math.abs(e)))}function eLe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(gb(t)/3)))*3-gb(Math.abs(e)))}function tLe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,gb(t)-gb(e))+1}function gse(e,t,r,n){var a=rO(e,t,r),s;switch(n=v2(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=eLe(a,o))&&(n.precision=s),pse(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=tLe(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=Z8e(a))&&(n.precision=s-(n.type==="%")*2);break}}return R8(n)}function Km(e){var t=e.domain;return e.ticks=function(r){var n=t();return eO(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return gse(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,o=n[a],l=n[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=tO(o,l,r),u===c)return n[a]=o,n[s]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function xse(){var e=D8();return e.copy=function(){return hE(e,xse())},Zu.apply(e,arguments),Km(e)}function vse(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,AS),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return vse(e).unknown(t)},e=arguments.length?Array.from(e,AS):[0,1],Km(r)}function bse(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],o;return s<a&&(o=r,r=n,n=o,o=a,a=s,s=o),e[r]=t.floor(a),e[n]=t.ceil(s),e}function Z$(e){return Math.log(e)}function eG(e){return Math.exp(e)}function rLe(e){return-Math.log(-e)}function nLe(e){return-Math.exp(-e)}function aLe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function sLe(e){return e===10?aLe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function iLe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function tG(e){return(t,r)=>-e(-t,r)}function L8(e){const t=e(Z$,eG),r=t.domain;let n=10,a,s;function o(){return a=iLe(n),s=sLe(n),r()[0]<0?(a=tG(a),s=tG(s),e(rLe,nLe)):e(Z$,eG),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),m=a(d),g,x;const v=l==null?10:+l;let y=[];if(!(n%1)&&m-h<v){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<n;++g)if(x=h<0?g/s(-h):g*s(h),!(x<u)){if(x>d)break;y.push(x)}}else for(;h<=m;++h)for(g=n-1;g>=1;--g)if(x=h>0?g/s(-h):g*s(h),!(x<u)){if(x>d)break;y.push(x)}y.length*2<v&&(y=eO(u,d,v))}else y=eO(h,m,Math.min(m-h,v)).map(s);return f?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=v2(c)).precision==null&&(c.trim=!0),c=R8(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(bse(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),t}function yse(){const e=L8(b4()).domain([1,10]);return e.copy=()=>hE(e,yse()).base(e.base()),Zu.apply(e,arguments),e}function rG(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function nG(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function M8(e){var t=1,r=e(rG(t),nG(t));return r.constant=function(n){return arguments.length?e(rG(t=+n),nG(t)):t},Km(r)}function wse(){var e=M8(b4());return e.copy=function(){return hE(e,wse()).constant(e.constant())},Zu.apply(e,arguments)}function aG(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function oLe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function lLe(e){return e<0?-e*e:e*e}function U8(e){var t=e(Nl,Nl),r=1;function n(){return r===1?e(Nl,Nl):r===.5?e(oLe,lLe):e(aG(r),aG(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Km(t)}function Q8(){var e=U8(b4());return e.copy=function(){return hE(e,Q8()).exponent(e.exponent())},Zu.apply(e,arguments),e}function cLe(){return Q8.apply(null,arguments).exponent(.5)}function sG(e){return Math.sign(e)*e*e}function uLe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Ese(){var e=D8(),t=[0,1],r=!1,n;function a(s){var o=uLe(e(s));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(s){return e.invert(sG(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,AS)).map(sG)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Ese(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Zu.apply(a,arguments),Km(a)}function Nse(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=o8e(e,o/l);return s}function s(o){return o==null||isNaN(o=+o)?n:t[fE(r,o)]}return s.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(dm),a()},s.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Nse().domain(e).range(t).unknown(n)},Zu.apply(s,arguments)}function Cse(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[fE(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return Cse().domain([e,t]).range(a).unknown(s)},Zu.apply(Km(o),arguments)}function _se(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[fE(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return _se().domain(e).range(t).unknown(r)},Zu.apply(a,arguments)}const MT=new Date,UT=new Date;function Di(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),t(s,l),e(s);while(u<s&&s<o);return c},a.filter=s=>Di(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!s(o););else for(;--l>=0;)for(;t(o,1),!s(o););}),r&&(a.count=(s,o)=>(MT.setTime(+s),UT.setTime(+o),e(MT),e(UT),Math.floor(r(MT,UT))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?o=>n(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const mS=Di(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);mS.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Di(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):mS);mS.range;const nh=1e3,Qu=nh*60,ah=Qu*60,Sh=ah*24,H8=Sh*7,iG=Sh*30,QT=Sh*365,zp=Di(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*nh)},(e,t)=>(t-e)/nh,e=>e.getUTCSeconds());zp.range;const V8=Di(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*nh)},(e,t)=>{e.setTime(+e+t*Qu)},(e,t)=>(t-e)/Qu,e=>e.getMinutes());V8.range;const z8=Di(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Qu)},(e,t)=>(t-e)/Qu,e=>e.getUTCMinutes());z8.range;const $8=Di(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*nh-e.getMinutes()*Qu)},(e,t)=>{e.setTime(+e+t*ah)},(e,t)=>(t-e)/ah,e=>e.getHours());$8.range;const G8=Di(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ah)},(e,t)=>(t-e)/ah,e=>e.getUTCHours());G8.range;const mE=Di(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Qu)/Sh,e=>e.getDate()-1);mE.range;const y4=Di(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Sh,e=>e.getUTCDate()-1);y4.range;const Sse=Di(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Sh,e=>Math.floor(e/Sh));Sse.range;function Yg(e){return Di(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Qu)/H8)}const w4=Yg(0),pS=Yg(1),dLe=Yg(2),fLe=Yg(3),xb=Yg(4),ALe=Yg(5),hLe=Yg(6);w4.range;pS.range;dLe.range;fLe.range;xb.range;ALe.range;hLe.range;function Jg(e){return Di(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/H8)}const E4=Jg(0),gS=Jg(1),mLe=Jg(2),pLe=Jg(3),vb=Jg(4),gLe=Jg(5),xLe=Jg(6);E4.range;gS.range;mLe.range;pLe.range;vb.range;gLe.range;xLe.range;const q8=Di(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());q8.range;const K8=Di(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());K8.range;const kh=Di(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());kh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Di(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});kh.range;const jh=Di(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());jh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Di(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});jh.range;function kse(e,t,r,n,a,s){const o=[[zp,1,nh],[zp,5,5*nh],[zp,15,15*nh],[zp,30,30*nh],[s,1,Qu],[s,5,5*Qu],[s,15,15*Qu],[s,30,30*Qu],[a,1,ah],[a,3,3*ah],[a,6,6*ah],[a,12,12*ah],[n,1,Sh],[n,2,2*Sh],[r,1,H8],[t,1,iG],[t,3,3*iG],[e,1,QT]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),g=m?m.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,m=B8(([,,v])=>v).right(o,h);if(m===o.length)return e.every(rO(u/QT,d/QT,f));if(m===0)return mS.every(Math.max(rO(u,d,f),1));const[g,x]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return g.every(x)}return[l,c]}const[vLe,bLe]=kse(jh,K8,E4,Sse,G8,z8),[yLe,wLe]=kse(kh,q8,w4,mE,$8,V8);function HT(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function VT(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function hy(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function ELe(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=my(a),d=py(a),f=my(s),h=py(s),m=my(o),g=py(o),x=my(l),v=py(l),y=my(c),w=py(c),_={a:q,A:G,b:K,B:ee,c:null,d:fG,e:fG,f:GLe,g:rMe,G:aMe,H:VLe,I:zLe,j:$Le,L:jse,m:qLe,M:KLe,p:W,q:P,Q:mG,s:pG,S:WLe,u:XLe,U:YLe,V:JLe,w:ZLe,W:eMe,x:null,X:null,y:tMe,Y:nMe,Z:sMe,"%":hG},T={a:U,A:z,b:J,B:te,c:null,d:AG,e:AG,f:cMe,g:vMe,G:yMe,H:iMe,I:oMe,j:lMe,L:Tse,m:uMe,M:dMe,p:se,q:ie,Q:mG,s:pG,S:fMe,u:AMe,U:hMe,V:mMe,w:pMe,W:gMe,x:null,X:null,y:xMe,Y:bMe,Z:wMe,"%":hG},j={a:M,A:R,b:k,B:D,c:L,d:uG,e:uG,f:MLe,g:cG,G:lG,H:dG,I:dG,j:DLe,L:LLe,m:OLe,M:PLe,p:B,q:FLe,Q:QLe,s:HLe,S:RLe,u:kLe,U:jLe,V:BLe,w:SLe,W:TLe,x:Z,X:V,y:cG,Y:lG,Z:ILe,"%":ULe};_.x=I(r,_),_.X=I(n,_),_.c=I(t,_),T.x=I(r,T),T.X=I(n,T),T.c=I(t,T);function I(ce,de){return function(Be){var ae=[],Se=-1,ke=0,ve=ce.length,le,be,Pe;for(Be instanceof Date||(Be=new Date(+Be));++Se<ve;)ce.charCodeAt(Se)===37&&(ae.push(ce.slice(ke,Se)),(be=oG[le=ce.charAt(++Se)])!=null?le=ce.charAt(++Se):be=le==="e"?" ":"0",(Pe=de[le])&&(le=Pe(Be,be)),ae.push(le),ke=Se+1);return ae.push(ce.slice(ke,Se)),ae.join("")}}function E(ce,de){return function(Be){var ae=hy(1900,void 0,1),Se=S(ae,ce,Be+="",0),ke,ve;if(Se!=Be.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(de&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(ke=VT(hy(ae.y,0,1)),ve=ke.getUTCDay(),ke=ve>4||ve===0?gS.ceil(ke):gS(ke),ke=y4.offset(ke,(ae.V-1)*7),ae.y=ke.getUTCFullYear(),ae.m=ke.getUTCMonth(),ae.d=ke.getUTCDate()+(ae.w+6)%7):(ke=HT(hy(ae.y,0,1)),ve=ke.getDay(),ke=ve>4||ve===0?pS.ceil(ke):pS(ke),ke=mE.offset(ke,(ae.V-1)*7),ae.y=ke.getFullYear(),ae.m=ke.getMonth(),ae.d=ke.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),ve="Z"in ae?VT(hy(ae.y,0,1)).getUTCDay():HT(hy(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(ve+5)%7:ae.w+ae.U*7-(ve+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,VT(ae)):HT(ae)}}function S(ce,de,Be,ae){for(var Se=0,ke=de.length,ve=Be.length,le,be;Se<ke;){if(ae>=ve)return-1;if(le=de.charCodeAt(Se++),le===37){if(le=de.charAt(Se++),be=j[le in oG?de.charAt(Se++):le],!be||(ae=be(ce,Be,ae))<0)return-1}else if(le!=Be.charCodeAt(ae++))return-1}return ae}function B(ce,de,Be){var ae=u.exec(de.slice(Be));return ae?(ce.p=d.get(ae[0].toLowerCase()),Be+ae[0].length):-1}function M(ce,de,Be){var ae=m.exec(de.slice(Be));return ae?(ce.w=g.get(ae[0].toLowerCase()),Be+ae[0].length):-1}function R(ce,de,Be){var ae=f.exec(de.slice(Be));return ae?(ce.w=h.get(ae[0].toLowerCase()),Be+ae[0].length):-1}function k(ce,de,Be){var ae=y.exec(de.slice(Be));return ae?(ce.m=w.get(ae[0].toLowerCase()),Be+ae[0].length):-1}function D(ce,de,Be){var ae=x.exec(de.slice(Be));return ae?(ce.m=v.get(ae[0].toLowerCase()),Be+ae[0].length):-1}function L(ce,de,Be){return S(ce,t,de,Be)}function Z(ce,de,Be){return S(ce,r,de,Be)}function V(ce,de,Be){return S(ce,n,de,Be)}function q(ce){return o[ce.getDay()]}function G(ce){return s[ce.getDay()]}function K(ce){return c[ce.getMonth()]}function ee(ce){return l[ce.getMonth()]}function W(ce){return a[+(ce.getHours()>=12)]}function P(ce){return 1+~~(ce.getMonth()/3)}function U(ce){return o[ce.getUTCDay()]}function z(ce){return s[ce.getUTCDay()]}function J(ce){return c[ce.getUTCMonth()]}function te(ce){return l[ce.getUTCMonth()]}function se(ce){return a[+(ce.getUTCHours()>=12)]}function ie(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var de=I(ce+="",_);return de.toString=function(){return ce},de},parse:function(ce){var de=E(ce+="",!1);return de.toString=function(){return ce},de},utcFormat:function(ce){var de=I(ce+="",T);return de.toString=function(){return ce},de},utcParse:function(ce){var de=E(ce+="",!0);return de.toString=function(){return ce},de}}}var oG={"-":"",_:" ",0:"0"},no=/^\s*\d+/,NLe=/^%/,CLe=/[\\^$*+?|[\]().{}]/g;function Jn(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function _Le(e){return e.replace(CLe,"\\$&")}function my(e){return new RegExp("^(?:"+e.map(_Le).join("|")+")","i")}function py(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function SLe(e,t,r){var n=no.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function kLe(e,t,r){var n=no.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function jLe(e,t,r){var n=no.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function BLe(e,t,r){var n=no.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function TLe(e,t,r){var n=no.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function lG(e,t,r){var n=no.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function cG(e,t,r){var n=no.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function ILe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function FLe(e,t,r){var n=no.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function OLe(e,t,r){var n=no.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function uG(e,t,r){var n=no.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function DLe(e,t,r){var n=no.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function dG(e,t,r){var n=no.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function PLe(e,t,r){var n=no.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function RLe(e,t,r){var n=no.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function LLe(e,t,r){var n=no.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function MLe(e,t,r){var n=no.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function ULe(e,t,r){var n=NLe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function QLe(e,t,r){var n=no.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function HLe(e,t,r){var n=no.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function fG(e,t){return Jn(e.getDate(),t,2)}function VLe(e,t){return Jn(e.getHours(),t,2)}function zLe(e,t){return Jn(e.getHours()%12||12,t,2)}function $Le(e,t){return Jn(1+mE.count(kh(e),e),t,3)}function jse(e,t){return Jn(e.getMilliseconds(),t,3)}function GLe(e,t){return jse(e,t)+"000"}function qLe(e,t){return Jn(e.getMonth()+1,t,2)}function KLe(e,t){return Jn(e.getMinutes(),t,2)}function WLe(e,t){return Jn(e.getSeconds(),t,2)}function XLe(e){var t=e.getDay();return t===0?7:t}function YLe(e,t){return Jn(w4.count(kh(e)-1,e),t,2)}function Bse(e){var t=e.getDay();return t>=4||t===0?xb(e):xb.ceil(e)}function JLe(e,t){return e=Bse(e),Jn(xb.count(kh(e),e)+(kh(e).getDay()===4),t,2)}function ZLe(e){return e.getDay()}function eMe(e,t){return Jn(pS.count(kh(e)-1,e),t,2)}function tMe(e,t){return Jn(e.getFullYear()%100,t,2)}function rMe(e,t){return e=Bse(e),Jn(e.getFullYear()%100,t,2)}function nMe(e,t){return Jn(e.getFullYear()%1e4,t,4)}function aMe(e,t){var r=e.getDay();return e=r>=4||r===0?xb(e):xb.ceil(e),Jn(e.getFullYear()%1e4,t,4)}function sMe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Jn(t/60|0,"0",2)+Jn(t%60,"0",2)}function AG(e,t){return Jn(e.getUTCDate(),t,2)}function iMe(e,t){return Jn(e.getUTCHours(),t,2)}function oMe(e,t){return Jn(e.getUTCHours()%12||12,t,2)}function lMe(e,t){return Jn(1+y4.count(jh(e),e),t,3)}function Tse(e,t){return Jn(e.getUTCMilliseconds(),t,3)}function cMe(e,t){return Tse(e,t)+"000"}function uMe(e,t){return Jn(e.getUTCMonth()+1,t,2)}function dMe(e,t){return Jn(e.getUTCMinutes(),t,2)}function fMe(e,t){return Jn(e.getUTCSeconds(),t,2)}function AMe(e){var t=e.getUTCDay();return t===0?7:t}function hMe(e,t){return Jn(E4.count(jh(e)-1,e),t,2)}function Ise(e){var t=e.getUTCDay();return t>=4||t===0?vb(e):vb.ceil(e)}function mMe(e,t){return e=Ise(e),Jn(vb.count(jh(e),e)+(jh(e).getUTCDay()===4),t,2)}function pMe(e){return e.getUTCDay()}function gMe(e,t){return Jn(gS.count(jh(e)-1,e),t,2)}function xMe(e,t){return Jn(e.getUTCFullYear()%100,t,2)}function vMe(e,t){return e=Ise(e),Jn(e.getUTCFullYear()%100,t,2)}function bMe(e,t){return Jn(e.getUTCFullYear()%1e4,t,4)}function yMe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?vb(e):vb.ceil(e),Jn(e.getUTCFullYear()%1e4,t,4)}function wMe(){return"+0000"}function hG(){return"%"}function mG(e){return+e}function pG(e){return Math.floor(+e/1e3)}var Px,Fse,Ose;EMe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function EMe(e){return Px=ELe(e),Fse=Px.format,Px.parse,Ose=Px.utcFormat,Px.utcParse,Px}function NMe(e){return new Date(e)}function CMe(e){return e instanceof Date?+e:+new Date(+e)}function W8(e,t,r,n,a,s,o,l,c,u){var d=D8(),f=d.invert,h=d.domain,m=u(".%L"),g=u(":%S"),x=u("%I:%M"),v=u("%I %p"),y=u("%a %d"),w=u("%b %d"),_=u("%B"),T=u("%Y");function j(I){return(c(I)<I?m:l(I)<I?g:o(I)<I?x:s(I)<I?v:n(I)<I?a(I)<I?y:w:r(I)<I?_:T)(I)}return d.invert=function(I){return new Date(f(I))},d.domain=function(I){return arguments.length?h(Array.from(I,CMe)):h().map(NMe)},d.ticks=function(I){var E=h();return e(E[0],E[E.length-1],I??10)},d.tickFormat=function(I,E){return E==null?j:u(E)},d.nice=function(I){var E=h();return(!I||typeof I.range!="function")&&(I=t(E[0],E[E.length-1],I??10)),I?h(bse(E,I)):d},d.copy=function(){return hE(d,W8(e,t,r,n,a,s,o,l,c,u))},d}function _Me(){return Zu.apply(W8(yLe,wLe,kh,q8,w4,mE,$8,V8,zp,Fse).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function SMe(){return Zu.apply(W8(vLe,bLe,jh,K8,E4,y4,G8,z8,zp,Ose).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function N4(){var e=0,t=1,r,n,a,s,o=Nl,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(s(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(h){var m,g;return arguments.length?([m,g]=h,o=f(m,g),u):[o(0),o(1)]}}return u.range=d(a1),u.rangeRound=d(O8),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function Wm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Dse(){var e=Km(N4()(Nl));return e.copy=function(){return Wm(e,Dse())},zh.apply(e,arguments)}function Pse(){var e=L8(N4()).domain([1,10]);return e.copy=function(){return Wm(e,Pse()).base(e.base())},zh.apply(e,arguments)}function Rse(){var e=M8(N4());return e.copy=function(){return Wm(e,Rse()).constant(e.constant())},zh.apply(e,arguments)}function X8(){var e=U8(N4());return e.copy=function(){return Wm(e,X8()).exponent(e.exponent())},zh.apply(e,arguments)}function kMe(){return X8.apply(null,arguments).exponent(.5)}function Lse(){var e=[],t=Nl;function r(n){if(n!=null&&!isNaN(n=+n))return t((fE(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(dm),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>i8e(e,s/n))},r.copy=function(){return Lse(t).domain(e)},zh.apply(r,arguments)}function C4(){var e=0,t=.5,r=1,n=1,a,s,o,l,c,u=Nl,d,f=!1,h;function m(x){return isNaN(x=+x)?h:(x=.5+((x=+d(x))-s)*(n*x<n*s?l:c),u(f?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([e,t,r]=x,a=d(e=+e),s=d(t=+t),o=d(r=+r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,m):[e,t,r]},m.clamp=function(x){return arguments.length?(f=!!x,m):f},m.interpolator=function(x){return arguments.length?(u=x,m):u};function g(x){return function(v){var y,w,_;return arguments.length?([y,w,_]=v,u=U8e(x,[y,w,_]),m):[u(0),u(.5),u(1)]}}return m.range=g(a1),m.rangeRound=g(O8),m.unknown=function(x){return arguments.length?(h=x,m):h},function(x){return d=x,a=x(e),s=x(t),o=x(r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,m}}function Mse(){var e=Km(C4()(Nl));return e.copy=function(){return Wm(e,Mse())},zh.apply(e,arguments)}function Use(){var e=L8(C4()).domain([.1,1,10]);return e.copy=function(){return Wm(e,Use()).base(e.base())},zh.apply(e,arguments)}function Qse(){var e=M8(C4());return e.copy=function(){return Wm(e,Qse()).constant(e.constant())},zh.apply(e,arguments)}function Y8(){var e=U8(C4());return e.copy=function(){return Wm(e,Y8()).exponent(e.exponent())},zh.apply(e,arguments)}function jMe(){return Y8.apply(null,arguments).exponent(.5)}const Xy=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:T8,scaleDiverging:Mse,scaleDivergingLog:Use,scaleDivergingPow:Y8,scaleDivergingSqrt:jMe,scaleDivergingSymlog:Qse,scaleIdentity:vse,scaleImplicit:nO,scaleLinear:xse,scaleLog:yse,scaleOrdinal:v4,scalePoint:c8e,scalePow:Q8,scaleQuantile:Nse,scaleQuantize:Cse,scaleRadial:Ese,scaleSequential:Dse,scaleSequentialLog:Pse,scaleSequentialPow:X8,scaleSequentialQuantile:Lse,scaleSequentialSqrt:kMe,scaleSequentialSymlog:Rse,scaleSqrt:cLe,scaleSymlog:wse,scaleThreshold:_se,scaleTime:_Me,scaleUtc:SMe,tickFormat:gse},Symbol.toStringTag,{value:"Module"}));var Xm=e=>e.chartData,_4=dt([Xm],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),J8=(e,t,r,n)=>n?_4(e):Xm(e);function bb(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Zc(t)&&Zc(r))return!0}return!1}function gG(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function BMe(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,s;if(Zc(r))a=r;else if(typeof r=="function")return;if(Zc(n))s=n;else if(typeof n=="function")return;var o=[a,s];if(bb(o))return o}}function TMe(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(bb(n))return gG(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,o,l;if(a==="auto")t!=null&&(o=Math.min(...t));else if(fr(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&n$.test(a)){var c=n$.exec(a);if(c==null||t==null)o=void 0;else{var u=+c[1];o=t[0]-u}}else o=t==null?void 0:t[0];if(s==="auto")t!=null&&(l=Math.max(...t));else if(fr(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&a$.test(s)){var d=a$.exec(s);if(d==null||t==null)l=void 0;else{var f=+d[1];l=t[1]+f}}else l=t==null?void 0:t[1];var h=[o,l];if(bb(h))return t==null?h:gG(h,t,r)}}}var s1=1e9,IMe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},eL,ts=!0,Xu="[DecimalError] ",ig=Xu+"Invalid argument: ",Z8=Xu+"Exponent out of range: ",i1=Math.floor,Bp=Math.pow,FMe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Hc,Xi=1e7,Ma=7,Hse=9007199254740991,xS=i1(Hse/Ma),Ar={};Ar.absoluteValue=Ar.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ar.comparedTo=Ar.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Ar.decimalPlaces=Ar.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ma;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ar.dividedBy=Ar.div=function(e){return mh(this,new this.constructor(e))};Ar.dividedToIntegerBy=Ar.idiv=function(e){var t=this,r=t.constructor;return Sa(mh(t,new r(e),0,1),r.precision)};Ar.equals=Ar.eq=function(e){return!this.cmp(e)};Ar.exponent=function(){return bi(this)};Ar.greaterThan=Ar.gt=function(e){return this.cmp(e)>0};Ar.greaterThanOrEqualTo=Ar.gte=function(e){return this.cmp(e)>=0};Ar.isInteger=Ar.isint=function(){return this.e>this.d.length-2};Ar.isNegative=Ar.isneg=function(){return this.s<0};Ar.isPositive=Ar.ispos=function(){return this.s>0};Ar.isZero=function(){return this.s===0};Ar.lessThan=Ar.lt=function(e){return this.cmp(e)<0};Ar.lessThanOrEqualTo=Ar.lte=function(e){return this.cmp(e)<1};Ar.logarithm=Ar.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Hc))throw Error(Xu+"NaN");if(r.s<1)throw Error(Xu+(r.s?"NaN":"-Infinity"));return r.eq(Hc)?new n(0):(ts=!1,t=mh(b2(r,s),b2(e,s),s),ts=!0,Sa(t,a))};Ar.minus=Ar.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?$se(t,e):Vse(t,(e.s=-e.s,e))};Ar.modulo=Ar.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Xu+"NaN");return r.s?(ts=!1,t=mh(r,e,0,1).times(e),ts=!0,r.minus(t)):Sa(new n(r),a)};Ar.naturalExponential=Ar.exp=function(){return zse(this)};Ar.naturalLogarithm=Ar.ln=function(){return b2(this)};Ar.negated=Ar.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ar.plus=Ar.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Vse(t,e):$se(t,(e.s=-e.s,e))};Ar.precision=Ar.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ig+e);if(t=bi(a)+1,n=a.d.length-1,r=n*Ma+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ar.squareRoot=Ar.sqrt=function(){var e,t,r,n,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Xu+"NaN")}for(e=bi(l),ts=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=Kf(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=i1((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(s=n,n=s.plus(mh(l,s,o+2)).times(.5),Kf(s.d).slice(0,o)===(t=Kf(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Sa(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(t!="9999")break;o+=4}return ts=!0,Sa(n,r)};Ar.times=Ar.mul=function(e){var t,r,n,a,s,o,l,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=m.length,c<u&&(s=h,h=m,m=s,o=c,c=u,u=o),s=[],o=c+u,n=o;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=s[a]+m[n]*h[a-n-1]+t,s[a--]=l%Xi|0,t=l/Xi|0;s[a]=(s[a]+t)%Xi|0}for(;!s[--o];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,ts?Sa(e,f.precision):e};Ar.toDecimalPlaces=Ar.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(lA(e,0,s1),t===void 0?t=n.rounding:lA(t,0,8),Sa(r,e+bi(r)+1,t))};Ar.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=jg(n,!0):(lA(e,0,s1),t===void 0?t=a.rounding:lA(t,0,8),n=Sa(new a(n),e+1,t),r=jg(n,!0,e+1)),r};Ar.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?jg(a):(lA(e,0,s1),t===void 0?t=s.rounding:lA(t,0,8),n=Sa(new s(a),e+bi(a)+1,t),r=jg(n.abs(),!1,e+bi(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Ar.toInteger=Ar.toint=function(){var e=this,t=e.constructor;return Sa(new t(e),bi(e)+1,t.rounding)};Ar.toNumber=function(){return+this};Ar.toPower=Ar.pow=function(e){var t,r,n,a,s,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Hc);if(l=new c(l),!l.s){if(e.s<1)throw Error(Xu+"Infinity");return l}if(l.eq(Hc))return l;if(n=c.precision,e.eq(Hc))return Sa(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,s=l.s,o){if((r=d<0?-d:d)<=Hse){for(a=new c(Hc),t=Math.ceil(n/Ma+4),ts=!1;r%2&&(a=a.times(l),vG(a.d,t)),r=i1(r/2),r!==0;)l=l.times(l),vG(l.d,t);return ts=!0,e.s<0?new c(Hc).div(a):Sa(a,n)}}else if(s<0)throw Error(Xu+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,ts=!1,a=e.times(b2(l,n+u)),ts=!0,a=zse(a),a.s=s,a};Ar.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=bi(a),n=jg(a,r<=s.toExpNeg||r>=s.toExpPos)):(lA(e,1,s1),t===void 0?t=s.rounding:lA(t,0,8),a=Sa(new s(a),e,t),r=bi(a),n=jg(a,e<=r||r<=s.toExpNeg,e)),n};Ar.toSignificantDigits=Ar.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(lA(e,1,s1),t===void 0?t=n.rounding:lA(t,0,8)),Sa(new n(r),e,t)};Ar.toString=Ar.valueOf=Ar.val=Ar.toJSON=Ar[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=bi(e),r=e.constructor;return jg(e,t<=r.toExpNeg||t>=r.toExpPos)};function Vse(e,t){var r,n,a,s,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),ts?Sa(t,f):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),s=o-a,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/Ma),l=o>l?o+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/Xi|0,c[s]%=Xi;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,ts?Sa(t,f):t}function lA(e,t,r){if(e!==~~e||e<t||e>r)throw Error(ig+e)}function Kf(e){var t,r,n,a=e.length-1,s="",o=e[0];if(a>0){for(s+=o,t=1;t<a;t++)n=e[t]+"",r=Ma-n.length,r&&(s+=U0(r)),s+=n;o=e[t],n=o+"",r=Ma-n.length,r&&(s+=U0(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var mh=function(){function e(n,a){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+o,n[l]=s%Xi|0,o=s/Xi|0;return o&&n.unshift(o),n}function t(n,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var o=0;s--;)n[s]-=o,o=n[s]<a[s]?1:0,n[s]=o*Xi+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,o){var l,c,u,d,f,h,m,g,x,v,y,w,_,T,j,I,E,S,B=n.constructor,M=n.s==a.s?1:-1,R=n.d,k=a.d;if(!n.s)return new B(n);if(!a.s)throw Error(Xu+"Division by zero");for(c=n.e-a.e,E=k.length,j=R.length,m=new B(M),g=m.d=[],u=0;k[u]==(R[u]||0);)++u;if(k[u]>(R[u]||0)&&--c,s==null?w=s=B.precision:o?w=s+(bi(n)-bi(a))+1:w=s,w<0)return new B(0);if(w=w/Ma+2|0,u=0,E==1)for(d=0,k=k[0],w++;(u<j||d)&&w--;u++)_=d*Xi+(R[u]||0),g[u]=_/k|0,d=_%k|0;else{for(d=Xi/(k[0]+1)|0,d>1&&(k=e(k,d),R=e(R,d),E=k.length,j=R.length),T=E,x=R.slice(0,E),v=x.length;v<E;)x[v++]=0;S=k.slice(),S.unshift(0),I=k[0],k[1]>=Xi/2&&++I;do d=0,l=t(k,x,E,v),l<0?(y=x[0],E!=v&&(y=y*Xi+(x[1]||0)),d=y/I|0,d>1?(d>=Xi&&(d=Xi-1),f=e(k,d),h=f.length,v=x.length,l=t(f,x,h,v),l==1&&(d--,r(f,E<h?S:k,h))):(d==0&&(l=d=1),f=k.slice()),h=f.length,h<v&&f.unshift(0),r(x,f,v),l==-1&&(v=x.length,l=t(k,x,E,v),l<1&&(d++,r(x,E<v?S:k,v))),v=x.length):l===0&&(d++,x=[0]),g[u++]=d,l&&x[0]?x[v++]=R[T]||0:(x=[R[T]],v=1);while((T++<j||x[0]!==void 0)&&w--)}return g[0]||g.shift(),m.e=c,Sa(m,o?s+bi(m)+1:s)}}();function zse(e,t){var r,n,a,s,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(bi(e)>16)throw Error(Z8+bi(e));if(!e.s)return new d(Hc);for(ts=!1,l=f,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Bp(2,u))/Math.LN10*2+5|0,l+=n,r=a=s=new d(Hc),d.precision=l;;){if(a=Sa(a.times(e),l),r=r.times(++c),o=s.plus(mh(a,r,l)),Kf(o.d).slice(0,l)===Kf(s.d).slice(0,l)){for(;u--;)s=Sa(s.times(s),l);return d.precision=f,t==null?(ts=!0,Sa(s,f)):s}s=o}}function bi(e){for(var t=e.e*Ma,r=e.d[0];r>=10;r/=10)t++;return t}function zT(e,t,r){if(t>e.LN10.sd())throw ts=!0,r&&(e.precision=r),Error(Xu+"LN10 precision limit exceeded");return Sa(new e(e.LN10),t)}function U0(e){for(var t="";e--;)t+="0";return t}function b2(e,t){var r,n,a,s,o,l,c,u,d,f=1,h=10,m=e,g=m.d,x=m.constructor,v=x.precision;if(m.s<1)throw Error(Xu+(m.s?"NaN":"-Infinity"));if(m.eq(Hc))return new x(0);if(t==null?(ts=!1,u=v):u=t,m.eq(10))return t==null&&(ts=!0),zT(x,u);if(u+=h,x.precision=u,r=Kf(g),n=r.charAt(0),s=bi(m),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=Kf(m.d),n=r.charAt(0),f++;s=bi(m),n>1?(m=new x("0."+r),s++):m=new x(n+"."+r.slice(1))}else return c=zT(x,u+2,v).times(s+""),m=b2(new x(n+"."+r.slice(1)),u-h).plus(c),x.precision=v,t==null?(ts=!0,Sa(m,v)):m;for(l=o=m=mh(m.minus(Hc),m.plus(Hc),u),d=Sa(m.times(m),u),a=3;;){if(o=Sa(o.times(d),u),c=l.plus(mh(o,new x(a),u)),Kf(c.d).slice(0,u)===Kf(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(zT(x,u+2,v).times(s+""))),l=mh(l,new x(f),u),x.precision=v,t==null?(ts=!0,Sa(l,v)):l;l=c,a+=2}}function xG(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=i1(r/Ma),e.d=[],n=(r+1)%Ma,r<0&&(n+=Ma),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Ma;n<a;)e.d.push(+t.slice(n,n+=Ma));t=t.slice(n),n=Ma-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),ts&&(e.e>xS||e.e<-xS))throw Error(Z8+r)}else e.s=0,e.e=0,e.d=[0];return e}function Sa(e,t,r){var n,a,s,o,l,c,u,d,f=e.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(n=t-o,n<0)n+=Ma,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Ma),s=f.length,d>=s)return e;for(u=s=f[d],o=1;s>=10;s/=10)o++;n%=Ma,a=n-Ma+o}if(r!==void 0&&(s=Bp(10,o-a-1),l=u/s%10|0,c=t<0||f[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Bp(10,o-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(s=bi(e),f.length=1,t=t-s-1,f[0]=Bp(10,(Ma-t%Ma)%Ma),e.e=i1(-t/Ma)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=Bp(10,Ma-n),f[d]=a>0?(u/Bp(10,o-a)%Bp(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==Xi&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=Xi)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(ts&&(e.e>xS||e.e<-xS))throw Error(Z8+bi(e));return e}function $se(e,t){var r,n,a,s,o,l,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),ts?Sa(t,m):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(m/Ma),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=Xi-1;--c[s],c[a]+=Xi}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,ts?Sa(t,m):t):new h(0)}function jg(e,t,r){var n,a=bi(e),s=Kf(e.d),o=s.length;return t?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+U0(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+U0(-a-1)+s,r&&(n=r-o)>0&&(s+=U0(n))):a>=o?(s+=U0(a+1-o),r&&(n=r-a-1)>0&&(s=s+"."+U0(n))):((n=a+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(s+="."),s+=U0(n))),e.s<0?"-"+s:s}function vG(e,t){if(e.length>t)return e.length=t,!0}function Gse(e){var t,r,n;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(ig+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return xG(o,s.toString())}else if(typeof s!="string")throw Error(ig+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,FMe.test(s))xG(o,s);else throw Error(ig+s)}if(a.prototype=Ar,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=Gse,a.config=a.set=OMe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function OMe(e){if(!e||typeof e!="object")throw Error(Xu+"Object expected");var t,r,n,a=["precision",1,s1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(i1(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(ig+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(ig+r+": "+n);return this}var eL=Gse(IMe);Hc=new eL(1);const ma=eL;var DMe=e=>e,qse={},Kse=e=>e===qse,bG=e=>function t(){return arguments.length===0||arguments.length===1&&Kse(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Wse=(e,t)=>e===1?t:bG(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(o=>o!==qse).length;return s>=e?t(...n):Wse(e-s,bG(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=n.map(d=>Kse(d)?l.shift():d);return t(...u,...l)}))}),S4=e=>Wse(e.length,e),lO=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},PMe=S4((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),RMe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return DMe;var a=r.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce((l,c)=>c(l),s(...arguments))}},cO=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),Xse=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every((o,l)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[l])})||(t=a,r=e(...a)),r}};function Yse(e){var t;return e===0?t=1:t=Math.floor(new ma(e).abs().log(10).toNumber())+1,t}function Jse(e,t,r){for(var n=new ma(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}S4((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});S4((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});S4((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var Zse=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},eie=(e,t,r)=>{if(e.lte(0))return new ma(0);var n=Yse(e.toNumber()),a=new ma(10).pow(n),s=e.div(a),o=n!==1?.05:.1,l=new ma(Math.ceil(s.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?new ma(c.toNumber()):new ma(Math.ceil(c.toNumber()))},LMe=(e,t,r)=>{var n=new ma(1),a=new ma(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new ma(10).pow(Yse(e)-1),a=new ma(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new ma(Math.floor(e)))}else e===0?a=new ma(Math.floor((t-1)/2)):r||(a=new ma(Math.floor(e)));var o=Math.floor((t-1)/2),l=RMe(PMe(c=>a.add(new ma(c-o).mul(n)).toNumber()),lO);return l(0,t)},tie=function(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ma(0),tickMin:new ma(0),tickMax:new ma(0)};var o=eie(new ma(r).sub(t).div(n-1),a,s),l;t<=0&&r>=0?l=new ma(0):(l=new ma(t).add(r).div(2),l=l.sub(new ma(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),u=Math.ceil(new ma(r).sub(l).div(o).toNumber()),d=c+u+1;return d>n?tie(t,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:l.sub(new ma(c).mul(o)),tickMax:l.add(new ma(u).mul(o))})};function MMe(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(n,2),[o,l]=Zse([t,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...lO(0,n-1).map(()=>1/0)]:[...lO(0,n-1).map(()=>-1/0),l];return t>r?cO(c):c}if(o===l)return LMe(o,n,a);var{step:u,tickMin:d,tickMax:f}=tie(o,l,s,a,0),h=Jse(d,f.add(new ma(.1).mul(u)),u);return t>r?cO(h):h}function UMe(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=Zse([r,n]);if(s===-1/0||o===1/0)return[r,n];if(s===o)return[s];var l=Math.max(t,2),c=eie(new ma(o).sub(s).div(l-1),a,0),u=[...Jse(new ma(s),new ma(o),c),o];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?cO(u):u}var QMe=Xse(MMe),HMe=Xse(UMe),rie=e=>e.rootProps.maxBarSize,VMe=e=>e.rootProps.barGap,nie=e=>e.rootProps.barCategoryGap,zMe=e=>e.rootProps.barSize,pE=e=>e.rootProps.stackOffset,tL=e=>e.options.chartName,rL=e=>e.rootProps.syncId,aie=e=>e.rootProps.syncMethod,nL=e=>e.options.eventEmitter,Hf={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},Jl={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},k4=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},$Me={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Hf.angleAxisId,includeHidden:!1,name:void 0,reversed:Hf.reversed,scale:Hf.scale,tick:Hf.tick,tickCount:void 0,ticks:void 0,type:Hf.type,unit:void 0},GMe={allowDataOverflow:Jl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Jl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Jl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Jl.scale,tick:Jl.tick,tickCount:Jl.tickCount,ticks:void 0,type:Jl.type,unit:void 0},qMe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Hf.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Hf.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Hf.scale,tick:Hf.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},KMe={allowDataOverflow:Jl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Jl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Jl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Jl.scale,tick:Jl.tick,tickCount:Jl.tickCount,ticks:void 0,type:"category",unit:void 0},o1=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?qMe:$Me,gE=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?KMe:GMe,j4=e=>e.polarOptions,aL=dt([Hh,Vh,Oi],Fae),sie=dt([j4,aL],(e,t)=>{if(e!=null)return kl(e.innerRadius,t,0)}),iie=dt([j4,aL],(e,t)=>{if(e!=null)return kl(e.outerRadius,t,t*.8)}),WMe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},oie=dt([j4],WMe),XMe=dt([o1,oie],k4),lie=dt([aL,sie,iie],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]}),YMe=dt([gE,lie],k4),l1=dt([In,j4,sie,iie,Hh,Vh],(e,t,r,n,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=t;return{cx:kl(o,a,a/2),cy:kl(l,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),ja=(e,t)=>t,xE=(e,t,r)=>r;function sL(e){return e==null?void 0:e.id}var Pi=e=>{var t=In(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},c1=e=>e.tooltip.settings.axisId,Ri=e=>{var t=Pi(e),r=c1(e);return u1(e,t,r)};function cie(e,t,r){var{chartData:n=[]}=t,a=r==null?void 0:r.dataKey,s=new Map;return e.forEach(o=>{var l,c=(l=o.data)!==null&&l!==void 0?l:n;if(!(c==null||c.length===0)){var u=sL(o);c.forEach((d,f)=>{var h=a==null?f:String(Ra(d,a,null)),m=Ra(d,o.dataKey,0),g;s.has(h)?g=s.get(h):g={},Object.assign(g,{[u]:m}),s.set(h,g)})}}),Array.from(s.values())}function B4(e){return e.stackId!=null&&e.dataKey!=null}function yG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yG(Object(r),!0).forEach(function(n){JMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JMe(e,t,r){return(t=ZMe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZMe(e){var t=e7e(e,"string");return typeof t=="symbol"?t:t+""}function e7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uO=[0,"auto"],Oc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},$h=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Oc},Dc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:uO,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:p4},Ym=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Dc},t7e={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},iL=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??t7e},ni=(e,t,r)=>{switch(t){case"xAxis":return $h(e,r);case"yAxis":return Ym(e,r);case"zAxis":return iL(e,r);case"angleAxis":return o1(e,r);case"radiusAxis":return gE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},r7e=(e,t,r)=>{switch(t){case"xAxis":return $h(e,r);case"yAxis":return Ym(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},u1=(e,t,r)=>{switch(t){case"xAxis":return $h(e,r);case"yAxis":return Ym(e,r);case"angleAxis":return o1(e,r);case"radiusAxis":return gE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},uie=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function oL(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var lL=e=>e.graphicalItems.cartesianItems,n7e=dt([ja,xE],oL),cL=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),vE=dt([lL,ni,n7e],cL),die=dt([vE],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(B4)),fie=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Aie=dt([vE],fie),uL=e=>e.map(t=>t.data).filter(Boolean).flat(1),a7e=dt([vE],uL),dL=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},fL=dt([a7e,J8],dL),AL=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ra(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Ra(a,n)}))):e.map(n=>({value:n})),T4=dt([fL,ni,vE],AL);function hie(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Zg(e){return e.filter(t=>oA(t)||t instanceof Date).map(Number).filter(t=>Xc(t)===!1)}function s7e(e,t,r){return!r||typeof t!="number"||Xc(t)?[]:r.length?Zg(r.flatMap(n=>{var a=Ra(e,n.dataKey),s,o;if(Array.isArray(a)?[s,o]=a:s=o=a,!(!Zc(s)||!Zc(o)))return[t-s,t+o]})):[]}var i7e=dt([die,J8,Ri],cie),mie=(e,t,r)=>{var n={},a=t.reduce((s,o)=>(o.stackId==null||(s[o.stackId]==null&&(s[o.stackId]=[]),s[o.stackId].push(o)),s),n);return Object.fromEntries(Object.entries(a).map(s=>{var[o,l]=s,c=l.map(sL);return[o,{stackedData:ZDe(e,c,r),graphicalItems:l}]}))},dO=dt([i7e,die,pE],mie),pie=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var s=aPe(e,n,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},o7e=dt([dO,Xm,ja],pie),gie=(e,t,r,n,a)=>r.length>0?e.flatMap(s=>r.flatMap(o=>{var l,c,u=(l=n[o.id])===null||l===void 0?void 0:l.filter(f=>hie(a,f)),d=Ra(s,(c=t.dataKey)!==null&&c!==void 0?c:o.dataKey);return{value:d,errorDomain:s7e(s,d,u)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Ra(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),I4=e=>e.errorBars,xie=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>hie(r,n));dt([Aie,I4,ja],xie);var l7e=dt([fL,ni,Aie,I4,ja],gie);function c7e(e){var{value:t}=e;if(oA(t)||t instanceof Date)return t}var wG=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=Zg(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},u7e=(e,t,r)=>{var n=e.map(c7e).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&Bne(n))?ase(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},hL=e=>{var t;if(e==null||!("domain"in e))return uO;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Zg(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:uO},bS=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),o=Math.min(...s),l=Math.max(...s);return[o,l]}},vie=e=>e.referenceElements.dots,d1=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),d7e=dt([vie,ja,xE],d1),bie=e=>e.referenceElements.areas,f7e=dt([bie,ja,xE],d1),yie=e=>e.referenceElements.lines,A7e=dt([yie,ja,xE],d1),wie=(e,t)=>{var r=Zg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},h7e=dt(d7e,ja,wie),Eie=(e,t)=>{var r=Zg(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},m7e=dt([f7e,ja],Eie),Nie=(e,t)=>{var r=Zg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},p7e=dt(A7e,ja,Nie),g7e=dt(h7e,p7e,m7e,(e,t,r)=>bS(e,r,t)),Cie=dt([ni],hL),mL=(e,t,r,n,a,s,o)=>{var l=BMe(t,e.allowDataOverflow);if(l!=null)return l;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=c?bS(r,a,wG(n)):bS(a,wG(n));return TMe(t,u,e.allowDataOverflow)},x7e=dt([ni,Cie,o7e,l7e,g7e,In,ja],mL),v7e=[0,1],pL=(e,t,r,n,a,s,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,u=qm(t,s);return u&&l==null?ase(0,r.length):c==="category"?u7e(n,e,u):a==="expand"?v7e:o}},gL=dt([ni,In,fL,T4,pE,ja,x7e],pL),_ie=(e,t,r,n,a)=>{if(e!=null){var{scale:s,type:o}=e;if(s==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(cE(s));return l in Xy?l:"point"}}},Jm=dt([ni,In,uie,tL,ja],_ie);function b7e(e){if(e!=null){if(e in Xy)return Xy[e]();var t="scale".concat(cE(e));if(t in Xy)return Xy[t]()}}function F4(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=b7e(t);if(a!=null){var s=a.domain(r).range(n);return KDe(s),s}}}var xL=(e,t,r)=>{var n=hL(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&bb(e))return QMe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&bb(e))return HMe(e,t.tickCount,t.allowDecimals)}},vL=dt([gL,u1,Jm],xL),bL=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&bb(t)&&Array.isArray(r)&&r.length>0){var a=t[0],s=r[0],o=t[1],l=r[r.length-1];return[Math.min(a,s),Math.max(o,l)]}return t},y7e=dt([ni,gL,vL,ja],bL),w7e=dt(T4,ni,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Zg(e.map(l=>l.value))).sort((l,c)=>l-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var s=0;s<n.length-1;s++){var o=n[s+1]-n[s];r=Math.min(r,o)}return r/a}}),Sie=dt(w7e,In,nie,Oi,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Zc(e))return 0;var s=t==="vertical"?n.height:n.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var o=kl(r,e*s),l=e*s/2;return l-o-(l-o)/s*o}return 0}),E7e=(e,t)=>{var r=$h(e,t);return r==null||typeof r.padding!="string"?0:Sie(e,"xAxis",t,r.padding)},N7e=(e,t)=>{var r=Ym(e,t);return r==null||typeof r.padding!="string"?0:Sie(e,"yAxis",t,r.padding)},C7e=dt($h,E7e,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),_7e=dt(Ym,N7e,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),S7e=dt([Oi,C7e,x4,g4,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),k7e=dt([Oi,In,_7e,x4,g4,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:o}=a;return s?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),bE=(e,t,r,n)=>{var a;switch(t){case"xAxis":return S7e(e,r,n);case"yAxis":return k7e(e,r,n);case"zAxis":return(a=iL(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return oie(e);case"radiusAxis":return lie(e,r);default:return}},kie=dt([ni,bE],k4),f1=dt([ni,Jm,y7e,kie],F4);dt([vE,I4,ja],xie);function jie(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var O4=(e,t)=>t,D4=(e,t,r)=>r,j7e=dt(w8,O4,D4,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(jie)),B7e=dt(E8,O4,D4,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(jie)),Bie=(e,t)=>({width:e.width,height:t.height}),T7e=(e,t)=>{var r=typeof t.width=="number"?t.width:p4;return{width:r,height:e.height}},Tie=dt(Oi,$h,Bie),I7e=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},F7e=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},O7e=dt(Vh,Oi,j7e,O4,D4,(e,t,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=Bie(t,l);o==null&&(o=I7e(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;s[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),s}),D7e=dt(Hh,Oi,B7e,O4,D4,(e,t,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=T7e(t,l);o==null&&(o=F7e(t,n,e));var u=n==="left"&&!a||n==="right"&&a;s[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),s}),P7e=(e,t)=>{var r=Oi(e),n=$h(e,t);if(n!=null){var a=O7e(e,n.orientation,n.mirror),s=a[t];return s==null?{x:r.left,y:0}:{x:r.left,y:s}}},R7e=(e,t)=>{var r=Oi(e),n=Ym(e,t);if(n!=null){var a=D7e(e,n.orientation,n.mirror),s=a[t];return s==null?{x:0,y:r.top}:{x:s,y:r.top}}},Iie=dt(Oi,Ym,(e,t)=>{var r=typeof t.width=="number"?t.width:p4;return{width:r,height:e.height}}),EG=(e,t,r)=>{switch(t){case"xAxis":return Tie(e,r).width;case"yAxis":return Iie(e,r).height;default:return}},Fie=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:o}=r,l=qm(e,n),c=t.map(u=>u.value);if(o&&l&&s==="category"&&a&&Bne(c))return c}},yE=dt([In,T4,ni,ja],Fie),yL=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,o=qm(e,n);if(o&&(a==="number"||s!=="auto"))return t.map(l=>l.value)}},wL=dt([In,T4,u1,ja],yL),NG=dt([In,r7e,Jm,f1,yE,wL,bE,vL,ja],(e,t,r,n,a,s,o,l,c)=>{if(t==null)return null;var u=qm(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:n}}),Oie=(e,t,r,n,a,s,o,l,c)=>{if(!(t==null||n==null)){var u=qm(e,c),{type:d,ticks:f,tickCount:h}=t,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/m:0;g=c==="angleAxis"&&s!=null&&s.length>=2?to(s[0]-s[1])*2*g:g;var x=f||a;if(x){var v=x.map((y,w)=>{var _=o?o.indexOf(y):y;return{index:w,coordinate:n(_)+g,value:y,offset:g}});return v.filter(y=>!Xc(y.coordinate))}return u&&l?l.map((y,w)=>({coordinate:n(y)+g,value:y,index:w,offset:g})):n.ticks?n.ticks(h).map(y=>({coordinate:n(y)+g,value:y,offset:g})):n.domain().map((y,w)=>({coordinate:n(y)+g,value:o?o[y]:y,index:w,offset:g}))}},Die=dt([In,u1,Jm,f1,vL,bE,yE,wL,ja],Oie),Pie=(e,t,r,n,a,s,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=qm(e,o),{tickCount:c}=t,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?to(n[0]-n[1])*2*u:u,l&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},yb=dt([In,u1,f1,bE,yE,wL,ja],Pie),wb=dt(ni,f1,(e,t)=>{if(!(e==null||t==null))return vS(vS({},e),{},{scale:t})}),L7e=dt([ni,Jm,gL,kie],F4);dt((e,t,r)=>iL(e,r),L7e,(e,t)=>{if(!(e==null||t==null))return vS(vS({},e),{},{scale:t})});var M7e=dt([In,w8,E8],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Rie=e=>e.options.defaultTooltipEventType,Lie=e=>e.options.validateTooltipEventTypes;function Mie(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function EL(e,t){var r=Rie(e),n=Lie(e);return Mie(t,r,n)}function U7e(e){return or(t=>EL(t,e))}var Uie=(e,t)=>{var r,n=Number(t);if(!(Xc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},Q7e=e=>e.tooltip.settings,K0={active:!1,index:null,dataKey:void 0,coordinate:void 0},H7e={itemInteraction:{click:K0,hover:K0},axisInteraction:{click:K0,hover:K0},keyboardInteraction:K0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Qie=tu({name:"tooltip",initialState:H7e,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=hh(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:V7e,removeTooltipEntrySettings:z7e,setTooltipSettingsState:$7e,setActiveMouseOverItemIndex:Hie,mouseLeaveItem:G7e,mouseLeaveChart:Vie,setActiveClickItemIndex:q7e,setMouseOverAxisIndex:zie,setMouseClickAxisIndex:K7e,setSyncInteraction:fO,setKeyboardInteraction:AO}=Qie.actions,W7e=Qie.reducer;function CG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CG(Object(r),!0).forEach(function(n){X7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X7e(e,t,r){return(t=Y7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y7e(e){var t=J7e(e,"string");return typeof t=="symbol"?t:t+""}function J7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Z7e(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function eUe(e){return e.index!=null}var $ie=(e,t,r,n)=>{if(t==null)return K0;var a=Z7e(e,t,r);if(a==null)return K0;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(eUe(a)){if(s)return gC(gC({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return gC(gC({},K0),{},{coordinate:a.coordinate})},NL=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Zc(n))return r;var a=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(a,Math.min(n,s)))},Gie=(e,t,r,n,a,s,o,l)=>{if(!(s==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},qie=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.dataKey)===a})},wE=e=>e.options.tooltipPayloadSearcher,A1=e=>e.tooltip;function _G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function SG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_G(Object(r),!0).forEach(function(n){tUe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_G(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tUe(e,t,r){return(t=rUe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rUe(e){var t=nUe(e,"string");return typeof t=="symbol"?t:t+""}function nUe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aUe(e,t){return e??t}var Kie=(e,t,r,n,a,s,o)=>{if(!(t==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,m)=>{var g,{dataDefinedOnItem:x,settings:v}=m,y=aUe(x,l),w=Array.isArray(y)?Dae(y,u,d):y,_=(g=v==null?void 0:v.dataKey)!==null&&g!==void 0?g:n==null?void 0:n.dataKey,T=v==null?void 0:v.nameKey,j;if(n!=null&&n.dataKey&&Array.isArray(w)&&!Array.isArray(w[0])&&o==="axis"?j=U6e(w,n.dataKey,a):j=s(w,t,c,T),Array.isArray(j))j.forEach(E=>{var S=SG(SG({},v),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});h.push(s$({tooltipEntrySettings:S,dataKey:E.dataKey,payload:E.payload,value:Ra(E.payload,E.dataKey),name:E.name}))});else{var I;h.push(s$({tooltipEntrySettings:v,dataKey:_,payload:j,value:Ra(j,_),name:(I=Ra(j,T))!==null&&I!==void 0?I:v==null?void 0:v.name}))}return h},f)}},CL=dt([Ri,In,uie,tL,Pi],_ie),sUe=dt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),iUe=dt([Pi,c1],oL),EE=dt([sUe,Ri,iUe],cL),oUe=dt([EE],e=>e.filter(B4)),lUe=dt([EE],uL),h1=dt([lUe,Xm],dL),cUe=dt([oUe,Xm,Ri],cie),_L=dt([h1,Ri,EE],AL),uUe=dt([Ri],hL),dUe=dt([EE],e=>e.filter(B4)),fUe=dt([cUe,dUe,pE],mie),AUe=dt([fUe,Xm,Pi],pie),hUe=dt([EE],fie),mUe=dt([h1,Ri,hUe,I4,Pi],gie),pUe=dt([vie,Pi,c1],d1),gUe=dt([pUe,Pi],wie),xUe=dt([bie,Pi,c1],d1),vUe=dt([xUe,Pi],Eie),bUe=dt([yie,Pi,c1],d1),yUe=dt([bUe,Pi],Nie),wUe=dt([gUe,yUe,vUe],bS),EUe=dt([Ri,uUe,AUe,mUe,wUe,In,Pi],mL),Wie=dt([Ri,In,h1,_L,pE,Pi,EUe],pL),NUe=dt([Wie,Ri,CL],xL),CUe=dt([Ri,Wie,NUe,Pi],bL),Xie=e=>{var t=Pi(e),r=c1(e),n=!1;return bE(e,t,r,n)},Yie=dt([Ri,Xie],k4),Jie=dt([Ri,CL,CUe,Yie],F4),_Ue=dt([In,_L,Ri,Pi],Fie),SUe=dt([In,_L,Ri,Pi],yL),kUe=(e,t,r,n,a,s,o,l)=>{if(t){var{type:c}=t,u=qm(e,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?to(a[0]-a[1])*2*f:f,u&&o?o.map((h,m)=>({coordinate:n(h)+f,value:h,index:m,offset:f})):n.domain().map((h,m)=>({coordinate:n(h)+f,value:s?s[h]:h,index:m,offset:f}))}}},Gh=dt([In,Ri,CL,Jie,Xie,_Ue,SUe,Pi],kUe),SL=dt([Rie,Lie,Q7e],(e,t,r)=>Mie(r.shared,e,t)),Zie=e=>e.tooltip.settings.trigger,kL=e=>e.tooltip.settings.defaultIndex,P4=dt([A1,SL,Zie,kL],$ie),Im=dt([P4,h1],NL),eoe=dt([Gh,Im],Uie),toe=dt([P4],e=>{if(e)return e.dataKey}),roe=dt([A1,SL,Zie,kL],qie),jUe=dt([Hh,Vh,In,Oi,Gh,kL,roe,wE],Gie),BUe=dt([P4,jUe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),TUe=dt([P4],e=>e.active),IUe=dt([roe,Im,Xm,Ri,eoe,wE,SL],Kie),FUe=dt([IUe],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function kG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kG(Object(r),!0).forEach(function(n){OUe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OUe(e,t,r){return(t=DUe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DUe(e){var t=PUe(e,"string");return typeof t=="symbol"?t:t+""}function PUe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RUe=()=>or(Ri),LUe=()=>{var e=RUe(),t=or(Gh),r=or(Jie);return m2(jG(jG({},e),{},{scale:r}),t)},MUe=()=>or(tL),jL=(e,t)=>t,noe=(e,t,r)=>r,BL=(e,t,r,n)=>n,UUe=dt(Gh,e=>c4(e,t=>t.coordinate)),TL=dt([A1,jL,noe,BL],$ie),aoe=dt([TL,h1],NL),QUe=(e,t,r)=>{if(t!=null){var n=A1(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},soe=dt([A1,jL,noe,BL],qie),yS=dt([Hh,Vh,In,Oi,Gh,BL,soe,wE],Gie),HUe=dt([TL,yS],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),ioe=dt(Gh,aoe,Uie),VUe=dt([soe,aoe,Xm,Ri,ioe,wE,jL],Kie),zUe=dt([TL],e=>({isActive:e.active,activeIndex:e.index})),$Ue=(e,t,r,n,a,s,o,l)=>{if(!(!e||!t||!n||!a||!s)){var c=sPe(e.chartX,e.chartY,t,r,l);if(c){var u=oPe(c,t),d=GDe(u,o,s,n,a),f=iPe(t,s,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function hO(){return hO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hO.apply(null,arguments)}function BG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BG(Object(r),!0).forEach(function(n){GUe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GUe(e,t,r){return(t=qUe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qUe(e){var t=KUe(e,"string");return typeof t=="symbol"?t:t+""}function KUe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WUe(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:s,layout:o,cursor:l,tooltipEventType:c,chartName:u}=e,d=t,f=r,h=n;if(!l||!d||u!=="ScatterChart"&&c!=="axis")return null;var m,g;if(u==="ScatterChart")m=d,g=aRe;else if(u==="BarChart")m=sRe(o,d,a,s),g=ese;else if(o==="radial"){var{cx:x,cy:v,radius:y,startAngle:w,endAngle:_}=tse(d);m={cx:x,cy:v,startAngle:w,endAngle:_,innerRadius:y,outerRadius:y},g=nse}else m={points:VRe(o,d,a)},g=qae;var T=typeof l=="object"&&"className"in l?l.className:void 0,j=xC(xC(xC(xC({stroke:"#ccc",pointerEvents:"none"},a),m),Xn(l,!1)),{},{payload:f,payloadIndex:h,className:bn("recharts-tooltip-cursor",T)});return C.isValidElement(l)?C.cloneElement(l,j):C.createElement(g,j)}function XUe(e){var t=LUe(),r=Hae(),n=S8(),a=MUe();return C.createElement(WUe,hO({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var ooe=C.createContext(null),YUe=()=>C.useContext(ooe),$T={exports:{}},TG;function JUe(){return TG||(TG=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,g=new Array(m);h<m;h++)g[h]=f[h].fn;return g},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,m,g){var x=r?r+u:u;if(!this._events[x])return!1;var v=this._events[x],y=arguments.length,w,_;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,m),!0;case 6:return v.fn.call(v.context,d,f,h,m,g),!0}for(_=1,w=new Array(y-1);_<y;_++)w[_-1]=arguments[_];v.fn.apply(v.context,w)}else{var T=v.length,j;for(_=0;_<T;_++)switch(v[_].once&&this.removeListener(u,v[_].fn,void 0,!0),y){case 1:v[_].fn.call(v[_].context);break;case 2:v[_].fn.call(v[_].context,d);break;case 3:v[_].fn.call(v[_].context,d,f);break;case 4:v[_].fn.call(v[_].context,d,f,h);break;default:if(!w)for(j=1,w=new Array(y-1);j<y;j++)w[j-1]=arguments[j];v[_].fn.apply(v[_].context,w)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&o(this,m);else{for(var x=0,v=[],y=g.length;x<y;x++)(g[x].fn!==d||h&&!g[x].once||f&&g[x].context!==f)&&v.push(g[x]);v.length?this._events[m]=v.length===1?v[0]:v:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l}($T)),$T.exports}var ZUe=JUe();const e9e=jl(ZUe);var y2=new e9e,mO="recharts.syncEvent.tooltip",IG="recharts.syncEvent.brush";function IL(e,t){if(t){var r=Number.parseInt(t,10);if(!Xc(r))return e==null?void 0:e[r]}}var t9e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},loe=tu({name:"options",initialState:t9e,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),r9e=loe.reducer,{createEventEmitter:n9e}=loe.actions;function a9e(e){return e.tooltip.syncInteraction}var s9e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},coe=tu({name:"chartData",initialState:s9e,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:FG,setDataStartEndIndexes:i9e,setComputedData:tpt}=coe.actions,o9e=coe.reducer,uoe=()=>{};function l9e(){var e=or(rL),t=or(nL),r=Ga(),n=or(aie),a=or(Gh),s=S8(),o=N8(),l=or(c=>c.rootProps.className);C.useEffect(()=>{if(e==null)return uoe;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(a!=null){var h;if(typeof n=="function"){var m={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},g=n(a,m);h=a[g]}else n==="value"&&(h=a.find(I=>String(I.value)===d.payload.label));var{coordinate:x}=d.payload;if(h==null||d.payload.active===!1||x==null||o==null){r(fO({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:v,y}=x,w=Math.min(v,o.x+o.width),_=Math.min(y,o.y+o.height),T={x:s==="horizontal"?h.coordinate:w,y:s==="horizontal"?_:h.coordinate},j=fO({active:d.payload.active,coordinate:T,dataKey:d.payload.dataKey,index:String(h.index),label:d.payload.label});r(j)}}};return y2.on(mO,c),()=>{y2.off(mO,c)}},[l,r,t,e,n,a,s,o])}function c9e(){var e=or(rL),t=or(nL),r=Ga();C.useEffect(()=>{if(e==null)return uoe;var n=(a,s,o)=>{t!==o&&e===a&&r(i9e(s))};return y2.on(IG,n),()=>{y2.off(IG,n)}},[r,t,e])}function u9e(){var e=Ga();C.useEffect(()=>{e(n9e())},[e]),l9e(),c9e()}function d9e(e,t,r,n,a,s){var o=or(h=>QUe(h,e,t)),l=or(nL),c=or(rL),u=or(aie),d=or(a9e),f=d==null?void 0:d.active;C.useEffect(()=>{if(!f&&c!=null&&l!=null){var h=fO({active:s,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n});y2.emit(mO,c,h,l)}},[f,r,o,a,n,l,c,u,s])}function OG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function DG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OG(Object(r),!0).forEach(function(n){f9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f9e(e,t,r){return(t=A9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A9e(e){var t=h9e(e,"string");return typeof t=="symbol"?t:t+""}function h9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m9e(e){return e.dataKey}function p9e(e,t){return C.isValidElement(e)?C.cloneElement(e,t):typeof e=="function"?C.createElement(e,t):C.createElement(PPe,t)}var PG=[],g9e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Xg.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function sh(e){var t=Ju(e,g9e),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:s,content:o,filterNull:l,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:m,wrapperStyle:g,cursor:x,shared:v,trigger:y,defaultIndex:w,portal:_,axisId:T}=t,j=Ga(),I=typeof w=="number"?String(w):w;C.useEffect(()=>{j($7e({shared:v,trigger:y,axisId:T,active:r,defaultIndex:I}))},[j,v,y,T,r,I]);var E=N8(),S=Gae(),B=U7e(v),{activeIndex:M,isActive:R}=or(J=>zUe(J,B,y,I)),k=or(J=>VUe(J,B,y,I)),D=or(J=>ioe(J,B,y,I)),L=or(J=>HUe(J,B,y,I)),Z=k,V=YUe(),q=r??R,[G,K]=lae([Z,q]),ee=B==="axis"?D:void 0;d9e(B,y,L,ee,M,q);var W=_??V;if(W==null)return null;var P=Z??PG;q||(P=PG),l&&P.length&&(P=rae(Z.filter(J=>J.value!=null&&(J.hide!==!0||t.includeHidden)),d,m9e));var U=P.length>0,z=C.createElement(VPe,{allowEscapeViewBox:n,animationDuration:a,animationEasing:s,isAnimationActive:c,active:q,coordinate:L,hasPayload:U,offset:u,position:f,reverseDirection:h,useTranslate3d:m,viewBox:E,wrapperStyle:g,lastBoundingBox:G,innerRef:K,hasPortalFromProps:!!_},p9e(o,DG(DG({},t),{},{payload:P,label:ee,active:q,coordinate:L,accessibilityLayer:S})));return C.createElement(C.Fragment,null,n8.createPortal(z,W),q&&C.createElement(XUe,{cursor:x,tooltipEventType:B,coordinate:L,payload:Z,index:M}))}var GT={},qT={},KT={},RG;function x9e(){return RG||(RG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:s}={}){let o,l=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},f=()=>{u&&d(),x()};let h=null;const m=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},g=()=>{h!==null&&(clearTimeout(h),h=null)},x=()=>{g(),o=void 0,l=null},v=()=>{d()},y=function(...w){if(a!=null&&a.aborted)return;o=this,l=w;const _=h==null;m(),c&&_&&d()};return y.schedule=m,y.cancel=x,y.flush=v,a==null||a.addEventListener("abort",x,{once:!0}),y}e.debounce=t}(KT)),KT}var LG;function v9e(){return LG||(LG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x9e();function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:l=!0,maxWait:c}=s,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...x){d=n.apply(this,x),f=null},a,{edges:u}),m=function(...x){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,x),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,x),d)},g=()=>(h.flush(),d);return m.cancel=h.cancel,m.flush=g,m}e.debounce=r}(qT)),qT}var MG;function b9e(){return MG||(MG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=v9e();function r(n,a=0,s={}){const{leading:o=!0,trailing:l=!0}=s;return t.debounce(n,a,{leading:o,maxWait:a,trailing:l})}e.throttle=r}(GT)),GT}var WT,UG;function y9e(){return UG||(UG=1,WT=b9e().throttle),WT}var w9e=y9e();const E9e=jl(w9e);var Nw=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]};function QG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function XT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QG(Object(r),!0).forEach(function(n){N9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N9e(e,t,r){return(t=C9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C9e(e){var t=_9e(e,"string");return typeof t=="symbol"?t:t+""}function _9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ih=C.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:s="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:m,style:g={}}=e,x=C.useRef(null),v=C.useRef();v.current=m,C.useImperativeHandle(t,()=>x.current);var[y,w]=C.useState({containerWidth:n.width,containerHeight:n.height}),_=C.useCallback((j,I)=>{w(E=>{var S=Math.round(j),B=Math.round(I);return E.containerWidth===S&&E.containerHeight===B?E:{containerWidth:S,containerHeight:B}})},[]);C.useEffect(()=>{var j=B=>{var M,{width:R,height:k}=B[0].contentRect;_(R,k),(M=v.current)===null||M===void 0||M.call(v,R,k)};d>0&&(j=E9e(j,d,{trailing:!0,leading:!1}));var I=new ResizeObserver(j),{width:E,height:S}=x.current.getBoundingClientRect();return _(E,S),I.observe(x.current),()=>{I.disconnect()}},[_,d]);var T=C.useMemo(()=>{var{containerWidth:j,containerHeight:I}=y;if(j<0||I<0)return null;Nw(Qp(a)||Qp(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,s),Nw(!r||r>0,"The aspect(%s) must be greater than zero.",r);var E=Qp(a)?j:a,S=Qp(s)?I:s;return r&&r>0&&(E?S=E/r:S&&(E=S*r),c&&S>c&&(S=c)),Nw(E>0||S>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,E,S,a,s,o,l,r),C.Children.map(u,B=>C.cloneElement(B,{width:E,height:S,style:XT({width:E,height:S},B.props.style)}))},[r,u,s,c,l,o,y,a]);return C.createElement("div",{id:f?"".concat(f):void 0,className:bn("recharts-responsive-container",h),style:XT(XT({},g),{},{width:a,height:s,minWidth:o,minHeight:l,maxHeight:c}),ref:x},C.createElement("div",{style:{width:0,height:0,overflow:"visible"}},T))}),Fm=e=>null;Fm.displayName="Cell";function S9e(e,t,r){return(t=k9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k9e(e){var t=j9e(e,"string");return typeof t=="symbol"?t:t+""}function j9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class B9e{constructor(t){S9e(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function HG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function T9e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HG(Object(r),!0).forEach(function(n){I9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I9e(e,t,r){return(t=F9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F9e(e){var t=O9e(e,"string");return typeof t=="symbol"?t:t+""}function O9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var D9e={cacheSize:2e3,enableCache:!0},doe=T9e({},D9e),VG=new B9e(doe.cacheSize),P9e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},zG="recharts_measurement_span";function R9e(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(o,"|").concat(l)}var $G=(e,t)=>{try{var r=document.getElementById(zG);r||(r=document.createElement("span"),r.setAttribute("id",zG),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,P9e,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Cw=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Xg.isSsr)return{width:0,height:0};if(!doe.enableCache)return $G(t,r);var n=R9e(t,r),a=VG.get(n);if(a)return a;var s=$G(t,r);return VG.set(n,s),s},GG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,L9e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,M9e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,foe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},U9e=Object.keys(foe),xv="NaN";function Q9e(e,t){return e*foe[t]}class Wl{static parse(t){var r,[,n,a]=(r=M9e.exec(t))!==null&&r!==void 0?r:[];return new Wl(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Xc(t)&&(this.unit=""),r!==""&&!L9e.test(r)&&(this.num=NaN,this.unit=""),U9e.includes(r)&&(this.num=Q9e(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Wl(NaN,""):new Wl(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Wl(NaN,""):new Wl(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Wl(NaN,""):new Wl(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Wl(NaN,""):new Wl(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Xc(this.num)}}function Aoe(e){if(e.includes(xv))return xv;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=(r=GG.exec(t))!==null&&r!==void 0?r:[],o=Wl.parse(n??""),l=Wl.parse(s??""),c=a==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return xv;t=t.replace(GG,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=qG.exec(t))!==null&&u!==void 0?u:[],m=Wl.parse(d??""),g=Wl.parse(h??""),x=f==="+"?m.add(g):m.subtract(g);if(x.isNaN())return xv;t=t.replace(qG,x.toString())}return t}var KG=/\(([^()]*)\)/;function H9e(e){for(var t=e,r;(r=KG.exec(t))!=null;){var[,n]=r;t=t.replace(KG,Aoe(n))}return t}function V9e(e){var t=e.replace(/\s+/g,"");return t=H9e(t),t=Aoe(t),t}function z9e(e){try{return V9e(e)}catch{return xv}}function YT(e){var t=z9e(e.slice(5,-1));return t===xv?"":t}var $9e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],G9e=["dx","dy","angle","className","breakAll"];function pO(){return pO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pO.apply(null,arguments)}function WG(e,t){if(e==null)return{};var r,n,a=q9e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function q9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hoe=/[ \f\n\r\t\v\u2028\u2029]+/,moe=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];Os(t)||(r?a=t.toString().split(""):a=t.toString().split(hoe));var s=a.map(l=>({word:l,width:Cw(l,n).width})),o=r?0:Cw(" ",n).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},K9e=(e,t,r,n,a)=>{var{maxLines:s,children:o,style:l,breakAll:c}=e,u=fr(s),d=o,f=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return R.reduce((k,D)=>{var{word:L,width:Z}=D,V=k[k.length-1];if(V&&(n==null||a||V.width+Z+r<Number(n)))V.words.push(L),V.width+=Z+r;else{var q={words:[L],width:Z};k.push(q)}return k},[])},h=f(t),m=M=>M.reduce((R,k)=>R.width>k.width?R:k);if(!u||a)return h;var g=h.length>s||m(h).width>Number(n);if(!g)return h;for(var x="…",v=M=>{var R=d.slice(0,M),k=moe({breakAll:c,style:l,children:R+x}).wordsWithComputedWidth,D=f(k),L=D.length>s||m(D).width>Number(n);return[L,D]},y=0,w=d.length-1,_=0,T;y<=w&&_<=d.length-1;){var j=Math.floor((y+w)/2),I=j-1,[E,S]=v(I),[B]=v(j);if(!E&&!B&&(y=j+1),E&&B&&(w=j-1),!E&&B){T=S;break}_++}return T||h},XG=e=>{var t=Os(e)?[]:e.toString().split(hoe);return[{words:t}]},W9e=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:o}=e;if((t||r)&&!Xg.isSsr){var l,c,u=moe({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return XG(n);return K9e({breakAll:s,children:n,maxLines:o,style:a},l,c,t,r)}return XG(n)},YG="#808080",m1=C.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:s="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:u=YG}=e,d=WG(e,$9e),f=C.useMemo(()=>W9e({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:o,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,o,d.style,d.width]),{dx:h,dy:m,angle:g,className:x,breakAll:v}=d,y=WG(d,G9e);if(!oA(r)||!oA(n))return null;var w=r+(fr(h)?h:0),_=n+(fr(m)?m:0),T;switch(c){case"start":T=YT("calc(".concat(s,")"));break;case"middle":T=YT("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:T=YT("calc(".concat(f.length-1," * -").concat(a,")"));break}var j=[];if(o){var I=f[0].width,{width:E}=d;j.push("scale(".concat(fr(E)?E/I:1,")"))}return g&&j.push("rotate(".concat(g,", ").concat(w,", ").concat(_,")")),j.length&&(y.transform=j.join(" ")),C.createElement("text",pO({},Xn(y,!0),{ref:t,x:w,y:_,className:bn("recharts-text",x),textAnchor:l,fill:u.includes("url")?YG:u}),f.map((S,B)=>{var M=S.words.join(v?"":" ");return C.createElement("tspan",{x:w,dy:B===0?T:a,key:"".concat(M,"-").concat(B)},M)}))});m1.displayName="Text";var X9e=["offset"],Y9e=["labelRef"];function JG(e,t){if(e==null)return{};var r,n,a=J9e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function J9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ZG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ns(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZG(Object(r),!0).forEach(function(n){Z9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Z9e(e,t,r){return(t=eQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eQe(e){var t=tQe(e,"string");return typeof t=="symbol"?t:t+""}function tQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZA(){return ZA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ZA.apply(null,arguments)}var rQe=e=>{var{value:t,formatter:r}=e,n=Os(e.children)?t:e.children;return typeof r=="function"?r(n):n},FL=e=>e!=null&&typeof e=="function",nQe=(e,t)=>{var r=to(t-e),n=Math.min(Math.abs(t-e),360);return r*n},aQe=(e,t,r,n)=>{var{position:a,offset:s,className:o}=e,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:m}=n,g=(u+d)/2,x=nQe(f,h),v=x>=0?1:-1,y,w;a==="insideStart"?(y=f+v*s,w=m):a==="insideEnd"?(y=h-v*s,w=!m):a==="end"&&(y=h+v*s,w=m),w=x<=0?w:!w;var _=ea(l,c,g,y),T=ea(l,c,g,y+(w?1:-1)*359),j="M".concat(_.x,",").concat(_.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(w?0:1,`,
    `).concat(T.x,",").concat(T.y),I=Os(e.id)?f2("recharts-radial-line-"):e.id;return C.createElement("text",ZA({},r,{dominantBaseline:"central",className:bn("recharts-radial-bar-label",o)}),C.createElement("defs",null,C.createElement("path",{id:I,d:j})),C.createElement("textPath",{xlinkHref:"#".concat(I)},t))},sQe=(e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:o,startAngle:l,endAngle:c}=e,u=(l+c)/2;if(r==="outside"){var{x:d,y:f}=ea(n,a,o+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+o)/2,{x:m,y:g}=ea(n,a,h,u);return{x:m,y:g,textAnchor:"middle",verticalAnchor:"middle"}},iQe=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:s,y:o,width:l,height:c}=t,u=c>=0?1:-1,d=u*n,f=u>0?"end":"start",h=u>0?"start":"end",m=l>=0?1:-1,g=m*n,x=m>0?"end":"start",v=m>0?"start":"end";if(a==="top"){var y={x:s+l/2,y:o-u*n,textAnchor:"middle",verticalAnchor:f};return Ns(Ns({},y),r?{height:Math.max(o-r.y,0),width:l}:{})}if(a==="bottom"){var w={x:s+l/2,y:o+c+d,textAnchor:"middle",verticalAnchor:h};return Ns(Ns({},w),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{})}if(a==="left"){var _={x:s-g,y:o+c/2,textAnchor:x,verticalAnchor:"middle"};return Ns(Ns({},_),r?{width:Math.max(_.x-r.x,0),height:c}:{})}if(a==="right"){var T={x:s+l+g,y:o+c/2,textAnchor:v,verticalAnchor:"middle"};return Ns(Ns({},T),r?{width:Math.max(r.x+r.width-T.x,0),height:c}:{})}var j=r?{width:l,height:c}:{};return a==="insideLeft"?Ns({x:s+g,y:o+c/2,textAnchor:v,verticalAnchor:"middle"},j):a==="insideRight"?Ns({x:s+l-g,y:o+c/2,textAnchor:x,verticalAnchor:"middle"},j):a==="insideTop"?Ns({x:s+l/2,y:o+d,textAnchor:"middle",verticalAnchor:h},j):a==="insideBottom"?Ns({x:s+l/2,y:o+c-d,textAnchor:"middle",verticalAnchor:f},j):a==="insideTopLeft"?Ns({x:s+g,y:o+d,textAnchor:v,verticalAnchor:h},j):a==="insideTopRight"?Ns({x:s+l-g,y:o+d,textAnchor:x,verticalAnchor:h},j):a==="insideBottomLeft"?Ns({x:s+g,y:o+c-d,textAnchor:v,verticalAnchor:f},j):a==="insideBottomRight"?Ns({x:s+l-g,y:o+c-d,textAnchor:x,verticalAnchor:f},j):a&&typeof a=="object"&&(fr(a.x)||Qp(a.x))&&(fr(a.y)||Qp(a.y))?Ns({x:s+kl(a.x,l),y:o+kl(a.y,c),textAnchor:"end",verticalAnchor:"end"},j):Ns({x:s+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},j)},oQe=e=>"cx"in e&&fr(e.cx);function ec(e){var{offset:t=5}=e,r=JG(e,X9e),n=Ns({offset:t},r),{viewBox:a,position:s,value:o,children:l,content:c,className:u="",textBreakAll:d,labelRef:f}=n,h=or(l1),m=N8(),g=s==="center"?m:h??m,x=a||g;if(!x||Os(o)&&Os(l)&&!C.isValidElement(c)&&typeof c!="function")return null;var v=Ns(Ns({},n),{},{viewBox:x});if(C.isValidElement(c)){var{labelRef:y}=v,w=JG(v,Y9e);return C.cloneElement(c,w)}var _;if(typeof c=="function"){if(_=C.createElement(c,v),C.isValidElement(_))return _}else _=rQe(n);var T=oQe(x),j=Xn(n,!0);if(T&&(s==="insideStart"||s==="insideEnd"||s==="end"))return aQe(n,_,j,x);var I=T?sQe(x,n.offset,n.position):iQe(n,x);return C.createElement(m1,ZA({ref:f,className:bn("recharts-label",u)},j,I,{breakAll:d}),_)}ec.displayName="Label";var poe=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:s,r:o,radius:l,innerRadius:c,outerRadius:u,x:d,y:f,top:h,left:m,width:g,height:x,clockWise:v,labelViewBox:y}=e;if(y)return y;if(fr(g)&&fr(x)){if(fr(d)&&fr(f))return{x:d,y:f,width:g,height:x};if(fr(h)&&fr(m))return{x:h,y:m,width:g,height:x}}if(fr(d)&&fr(f))return{x:d,y:f,width:0,height:0};if(fr(t)&&fr(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:s||n||0,innerRadius:c||0,outerRadius:u||l||o||0,clockWise:v};if(e.viewBox)return e.viewBox},lQe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?C.createElement(ec,ZA({key:"label-implicit"},n)):oA(e)?C.createElement(ec,ZA({key:"label-implicit",value:e},n)):C.isValidElement(e)?e.type===ec?C.cloneElement(e,Ns({key:"label-implicit"},n)):C.createElement(ec,ZA({key:"label-implicit",content:e},n)):FL(e)?C.createElement(ec,ZA({key:"label-implicit",content:e},n)):e&&typeof e=="object"?C.createElement(ec,ZA({},e,{key:"label-implicit"},n)):null},cQe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:s}=t,o=poe(t),l=uE(a,ec).map((u,d)=>C.cloneElement(u,{viewBox:r||o,key:"label-".concat(d)}));if(!n)return l;var c=lQe(t.label,r||o,s);return[c,...l]};ec.parseViewBox=poe;ec.renderCallByParent=cQe;var JT={},ZT={},eq;function uQe(){return eq||(eq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(ZT)),ZT}var eI={},tq;function dQe(){return tq||(tq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(eI)),eI}var rq;function fQe(){return rq||(rq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uQe(),r=dQe(),n=u8();function a(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=a}(JT)),JT}var tI,nq;function AQe(){return nq||(nq=1,tI=fQe().last),tI}var hQe=AQe();const goe=jl(hQe);var mQe=["valueAccessor"],pQe=["data","dataKey","clockWise","id","textBreakAll"];function wS(){return wS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wS.apply(null,arguments)}function aq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aq(Object(r),!0).forEach(function(n){gQe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gQe(e,t,r){return(t=xQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xQe(e){var t=vQe(e,"string");return typeof t=="symbol"?t:t+""}function vQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iq(e,t){if(e==null)return{};var r,n,a=bQe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function bQe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var yQe=e=>Array.isArray(e.value)?goe(e.value):e.value;function fm(e){var{valueAccessor:t=yQe}=e,r=iq(e,mQe),{data:n,dataKey:a,clockWise:s,id:o,textBreakAll:l}=r,c=iq(r,pQe);return!n||!n.length?null:C.createElement(fs,{className:"recharts-label-list"},n.map((u,d)=>{var f=Os(a)?t(u,d):Ra(u&&u.payload,a),h=Os(o)?{}:{id:"".concat(o,"-").concat(d)};return C.createElement(ec,wS({},Xn(u,!0),c,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:l,viewBox:ec.parseViewBox(Os(s)?u:sq(sq({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}fm.displayName="LabelList";function wQe(e,t){return e?e===!0?C.createElement(fm,{key:"labelList-implicit",data:t}):C.isValidElement(e)||FL(e)?C.createElement(fm,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?C.createElement(fm,wS({data:t},e,{key:"labelList-implicit"})):null:null}function EQe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=uE(n,fm).map((o,l)=>C.cloneElement(o,{data:t,key:"labelList-".concat(l)}));if(!r)return a;var s=wQe(e.label,t);return[s,...a]}fm.renderCallByParent=EQe;var NQe=["points","className","baseLinePoints","connectNulls"];function vv(){return vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vv.apply(null,arguments)}function CQe(e,t){if(e==null)return{};var r,n,a=_Qe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _Qe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var oq=e=>e&&e.x===+e.x&&e.y===+e.y,SQe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(n=>{oq(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),oq(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},_w=(e,t)=>{var r=SQe(e);t&&(r=[r.reduce((a,s)=>[...a,...s],[])]);var n=r.map(a=>a.reduce((s,o,l)=>"".concat(s).concat(l===0?"M":"L").concat(o.x,",").concat(o.y),"")).join("");return r.length===1?"".concat(n,"Z"):n},kQe=(e,t,r)=>{var n=_w(e,r);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(_w(t.reverse(),r).slice(1))},xoe=e=>{var{points:t,className:r,baseLinePoints:n,connectNulls:a}=e,s=CQe(e,NQe);if(!t||!t.length)return null;var o=bn("recharts-polygon",r);if(n&&n.length){var l=s.stroke&&s.stroke!=="none",c=kQe(t,n,a);return C.createElement("g",{className:o},C.createElement("path",vv({},Xn(s,!0),{fill:c.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:c})),l?C.createElement("path",vv({},Xn(s,!0),{fill:"none",d:_w(t,a)})):null,l?C.createElement("path",vv({},Xn(s,!0),{fill:"none",d:_w(n,a)})):null)}var u=_w(t,a);return C.createElement("path",vv({},Xn(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:o,d:u}))};function gO(){return gO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gO.apply(null,arguments)}var OL=e=>{var{cx:t,cy:r,r:n,className:a}=e,s=bn("recharts-dot",a);return t===+t&&r===+r&&n===+n?C.createElement("circle",gO({},dl(e),t8(e),{className:s,cx:t,cy:r,r:n})):null},DL=e=>e.graphicalItems.polarItems,jQe=dt([ja,xE],oL),PL=dt([DL,ni,jQe],cL),BQe=dt([PL],uL),RL=dt([BQe,_4],dL),voe=dt([RL,ni,PL],AL),TQe=dt([RL,ni,PL],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var s,o=Ra(n,(s=t.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ra(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]}))),lq=()=>{},IQe=dt([ni,Cie,lq,TQe,lq,In,ja],mL),boe=dt([ni,In,RL,voe,pE,ja,IQe],pL),yoe=dt([boe,ni,Jm],xL),FQe=dt([ni,boe,yoe,ja],bL),LL=(e,t,r)=>{switch(t){case"angleAxis":return o1(e,r);case"radiusAxis":return gE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},ML=(e,t,r)=>{switch(t){case"angleAxis":return XMe(e,r);case"radiusAxis":return YMe(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},p1=dt([LL,Jm,FQe,ML],F4),woe=dt([In,voe,u1,ja],yL),g1=dt([In,LL,Jm,p1,yoe,ML,yE,woe,ja],Oie);dt([In,LL,p1,ML,yE,woe,ja],Pie);var OQe=(e,t)=>g1(e,"angleAxis",t,!1),DQe=dt([OQe],e=>{if(e)return e.map(t=>t.coordinate)}),PQe=(e,t)=>g1(e,"radiusAxis",t,!1),RQe=dt([PQe],e=>{if(e)return e.map(t=>t.coordinate)}),LQe=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function MQe(e,t){if(e==null)return{};var r,n,a=UQe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function UQe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Bh(){return Bh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bh.apply(null,arguments)}function cq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Eb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cq(Object(r),!0).forEach(function(n){QQe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QQe(e,t,r){return(t=HQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HQe(e){var t=VQe(e,"string");return typeof t=="symbol"?t:t+""}function VQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zQe=(e,t,r,n)=>{var a="";return n.forEach((s,o)=>{var l=ea(t,r,e,s);o?a+="L ".concat(l.x,",").concat(l.y):a+="M ".concat(l.x,",").concat(l.y)}),a+="Z",a},$Qe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,polarAngles:s,radialLines:o}=e;if(!s||!s.length||!o)return null;var l=Eb({stroke:"#ccc"},dl(e));return C.createElement("g",{className:"recharts-polar-grid-angle"},s.map(c=>{var u=ea(t,r,n,c),d=ea(t,r,a,c);return C.createElement("line",Bh({},l,{key:"line-".concat(c),x1:u.x,y1:u.y,x2:d.x,y2:d.y}))}))},GQe=e=>{var{cx:t,cy:r,radius:n,index:a}=e,s=Eb(Eb({stroke:"#ccc"},dl(e)),{},{fill:"none"});return C.createElement("circle",Bh({},s,{className:bn("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(a),cx:t,cy:r,r:n}))},qQe=e=>{var{radius:t,index:r}=e,n=Eb(Eb({stroke:"#ccc"},dl(e)),{},{fill:"none"});return C.createElement("path",Bh({},n,{className:bn("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:zQe(t,e.cx,e.cy,e.polarAngles)}))},KQe=e=>{var{polarRadius:t,gridType:r}=e;return!t||!t.length?null:C.createElement("g",{className:"recharts-polar-grid-concentric"},t.map((n,a)=>{var s=a;return r==="circle"?C.createElement(GQe,Bh({key:s},e,{radius:n,index:a})):C.createElement(qQe,Bh({key:s},e,{radius:n,index:a}))}))},Eoe=e=>{var t,r,n,a,s,o,l,c,{gridType:u="polygon",radialLines:d=!0,angleAxisId:f=0,radiusAxisId:h=0,cx:m,cy:g,innerRadius:x,outerRadius:v}=e,y=MQe(e,LQe),w=or(l1),_=Eb({cx:(t=(r=w==null?void 0:w.cx)!==null&&r!==void 0?r:m)!==null&&t!==void 0?t:0,cy:(n=(a=w==null?void 0:w.cy)!==null&&a!==void 0?a:g)!==null&&n!==void 0?n:0,innerRadius:(s=(o=w==null?void 0:w.innerRadius)!==null&&o!==void 0?o:x)!==null&&s!==void 0?s:0,outerRadius:(l=(c=w==null?void 0:w.outerRadius)!==null&&c!==void 0?c:v)!==null&&l!==void 0?l:0},y),{polarAngles:T,polarRadius:j,cx:I,cy:E,innerRadius:S,outerRadius:B}=_,M=or(L=>DQe(L,f)),R=or(L=>RQe(L,h)),k=Array.isArray(T)?T:M,D=Array.isArray(j)?j:R;return B<=0||k==null||D==null?null:C.createElement("g",{className:"recharts-polar-grid"},C.createElement($Qe,Bh({cx:I,cy:E,innerRadius:S,outerRadius:B,gridType:u,radialLines:d},_,{polarAngles:k,polarRadius:D})),C.createElement(KQe,Bh({cx:I,cy:E,innerRadius:S,outerRadius:B,gridType:u,radialLines:d},_,{polarAngles:k,polarRadius:D})))};Eoe.displayName="PolarGrid";var rI={},nI={},uq;function WQe(){return uq||(uq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let o=1;o<r.length;o++){const l=r[o],c=n(l);c>s&&(s=c,a=l)}return a}e.maxBy=t}(nI)),nI}var dq;function XQe(){return dq||(dq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WQe(),r=l4(),n=m8();function a(s,o){if(s!=null)return t.maxBy(Array.from(s),n.iteratee(o??r.identity))}e.maxBy=a}(rI)),rI}var aI,fq;function YQe(){return fq||(fq=1,aI=XQe().maxBy),aI}var JQe=YQe();const ZQe=jl(JQe);var sI={},iI={},Aq;function eHe(){return Aq||(Aq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let o=1;o<r.length;o++){const l=r[o],c=n(l);c<s&&(s=c,a=l)}return a}e.minBy=t}(iI)),iI}var hq;function tHe(){return hq||(hq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eHe(),r=l4(),n=m8();function a(s,o){if(s!=null)return t.minBy(Array.from(s),n.iteratee(o??r.identity))}e.minBy=a}(sI)),sI}var oI,mq;function rHe(){return mq||(mq=1,oI=tHe().minBy),oI}var nHe=rHe();const aHe=jl(nHe);var sHe={radiusAxis:{},angleAxis:{}},Noe=tu({name:"polarAxis",initialState:sHe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:iHe,removeRadiusAxis:oHe,addAngleAxis:lHe,removeAngleAxis:cHe}=Noe.actions,uHe=Noe.reducer,dHe=["cx","cy","angle","axisLine"],fHe=["angle","tickFormatter","stroke","tick"];function w2(){return w2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w2.apply(null,arguments)}function pq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pq(Object(r),!0).forEach(function(n){R4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R4(e,t,r){return(t=AHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AHe(e){var t=hHe(e,"string");return typeof t=="symbol"?t:t+""}function hHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Coe(e,t){if(e==null)return{};var r,n,a=mHe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function mHe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _oe="radiusAxis";function pHe(e){var t=Ga();return C.useEffect(()=>(t(iHe(e)),()=>{t(oHe(e))})),null}var gHe=(e,t,r,n)=>{var{coordinate:a}=e;return ea(r,n,a,t)},xHe=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},vHe=(e,t,r,n)=>{var a=ZQe(n,o=>o.coordinate||0),s=aHe(n,o=>o.coordinate||0);return{cx:t,cy:r,startAngle:e,endAngle:e,innerRadius:s.coordinate||0,outerRadius:a.coordinate||0}},bHe=(e,t)=>{var{cx:r,cy:n,angle:a,axisLine:s}=e,o=Coe(e,dHe),l=t.reduce((f,h)=>[Math.min(f[0],h.coordinate),Math.max(f[1],h.coordinate)],[1/0,-1/0]),c=ea(r,n,l[0],a),u=ea(r,n,l[1],a),d=Wf(Wf(Wf({},dl(o)),{},{fill:"none"},Xn(s,!1)),{},{x1:c.x,y1:c.y,x2:u.x,y2:u.y});return C.createElement("line",w2({className:"recharts-polar-radius-axis-line"},d))},yHe=(e,t,r)=>{var n;return C.isValidElement(e)?n=C.cloneElement(e,t):typeof e=="function"?n=e(t):n=C.createElement(m1,w2({},t,{className:"recharts-polar-radius-axis-tick-value"}),r),n},wHe=(e,t)=>{var{angle:r,tickFormatter:n,stroke:a,tick:s}=e,o=Coe(e,fHe),l=xHe(e.orientation),c=dl(o),u=Xn(s,!1),d=t.map((f,h)=>{var m=gHe(f,e.angle,e.cx,e.cy),g=Wf(Wf(Wf(Wf({textAnchor:l,transform:"rotate(".concat(90-r,", ").concat(m.x,", ").concat(m.y,")")},c),{},{stroke:"none",fill:a},u),{},{index:h},m),{},{payload:f});return C.createElement(fs,w2({className:bn("recharts-polar-radius-axis-tick",Oae(s)),key:"tick-".concat(f.coordinate)},Wg(e,f,h)),yHe(s,g,n?n(f.value,h):f.value))});return C.createElement(fs,{className:"recharts-polar-radius-axis-ticks"},d)},EHe=e=>{var{radiusAxisId:t}=e,r=or(l1),n=or(c=>p1(c,"radiusAxis",t)),a=or(c=>g1(c,"radiusAxis",t,!1));if(r==null||!a||!a.length)return null;var s=Wf(Wf(Wf({},e),{},{scale:n},r),{},{radius:r.outerRadius}),{tick:o,axisLine:l}=s;return C.createElement(fs,{className:bn("recharts-polar-radius-axis",_oe,s.className)},l&&bHe(s,a),o&&wHe(s,a),ec.renderCallByParent(s,vHe(s.angle,s.cx,s.cy,a)))};class L4 extends C.PureComponent{render(){return C.createElement(C.Fragment,null,C.createElement(pHe,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),C.createElement(EHe,this.props))}}R4(L4,"displayName","PolarRadiusAxis");R4(L4,"axisType",_oe);R4(L4,"defaultProps",Jl);var NHe=["children"];function Th(){return Th=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Th.apply(null,arguments)}function gq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gq(Object(r),!0).forEach(function(n){M4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M4(e,t,r){return(t=CHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CHe(e){var t=_He(e,"string");return typeof t=="symbol"?t:t+""}function _He(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SHe(e,t){if(e==null)return{};var r,n,a=kHe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function kHe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var jHe=Math.PI/180,xq=1e-5,Soe="angleAxis";function BHe(e){var t=Ga(),r=C.useMemo(()=>{var{children:s}=e,o=SHe(e,NHe);return o},[e]),n=or(s=>o1(s,r.id)),a=r===n;return C.useEffect(()=>(t(lHe(r)),()=>{t(cHe(r))}),[t,r]),a?e.children:null}var THe=(e,t)=>{var{cx:r,cy:n,radius:a,orientation:s,tickSize:o}=t,l=o||8,c=ea(r,n,a,e.coordinate),u=ea(r,n,a+(s==="inner"?-1:1)*l,e.coordinate);return{x1:c.x,y1:c.y,x2:u.x,y2:u.y}},IHe=(e,t)=>{var r=Math.cos(-e.coordinate*jHe);return r>xq?t==="outer"?"start":"end":r<-xq?t==="outer"?"end":"start":"middle"},FHe=e=>{var{cx:t,cy:r,radius:n,axisLineType:a,axisLine:s,ticks:o}=e;if(!s)return null;var l=Vf(Vf({},dl(e)),{},{fill:"none"},Xn(s,!1));if(a==="circle")return C.createElement(OL,Th({className:"recharts-polar-angle-axis-line"},l,{cx:t,cy:r,r:n}));var c=o.map(u=>ea(t,r,n,u.coordinate));return C.createElement(xoe,Th({className:"recharts-polar-angle-axis-line"},l,{points:c}))},OHe=e=>{var{tick:t,tickProps:r,value:n}=e;return t?C.isValidElement(t)?C.cloneElement(t,r):typeof t=="function"?t(r):C.createElement(m1,Th({},r,{className:"recharts-polar-angle-axis-tick-value"}),n):null},DHe=e=>{var{tick:t,tickLine:r,tickFormatter:n,stroke:a,ticks:s}=e,o=dl(e),l=Xn(t,!1),c=Vf(Vf({},o),{},{fill:"none"},Xn(r,!1)),u=s.map((d,f)=>{var h=THe(d,e),m=IHe(d,e.orientation),g=Vf(Vf(Vf({},o),{},{textAnchor:m,stroke:"none",fill:a},l),{},{index:f,payload:d,x:h.x2,y:h.y2});return C.createElement(fs,Th({className:bn("recharts-polar-angle-axis-tick",Oae(t)),key:"tick-".concat(d.coordinate)},Wg(e,d,f)),r&&C.createElement("line",Th({className:"recharts-polar-angle-axis-tick-line"},c,h)),C.createElement(OHe,{tick:t,tickProps:g,value:n?n(d.value,f):d.value}))});return C.createElement(fs,{className:"recharts-polar-angle-axis-ticks"},u)},PHe=e=>{var{angleAxisId:t}=e,r=or(l1),n=or(l=>p1(l,"angleAxis",t)),a=dc(),s=or(l=>g1(l,"angleAxis",t,a));if(r==null||!s||!s.length)return null;var o=Vf(Vf(Vf({},e),{},{scale:n},r),{},{radius:r.outerRadius});return C.createElement(fs,{className:bn("recharts-polar-angle-axis",Soe,o.className)},C.createElement(FHe,Th({},o,{ticks:s})),C.createElement(DHe,Th({},o,{ticks:s})))};class U4 extends C.PureComponent{render(){return this.props.radius<=0?null:C.createElement(BHe,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},C.createElement(PHe,this.props))}}M4(U4,"displayName","PolarAngleAxis");M4(U4,"axisType",Soe);M4(U4,"defaultProps",Hf);function vq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vq(Object(r),!0).forEach(function(n){RHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RHe(e,t,r){return(t=LHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LHe(e){var t=MHe(e,"string");return typeof t=="symbol"?t:t+""}function MHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UHe=(e,t)=>t,UL=dt([DL,UHe],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),QHe=[],QL=(e,t,r)=>(r==null?void 0:r.length)===0?QHe:r,koe=dt([_4,UL,QL],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>bq(bq({},t.presentationProps),s.props))),a!=null)return a}}),HHe=dt([koe,UL,QL],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var s,o=Ra(n,t.nameKey,t.name),l;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=t.fill,{value:r1(o,t.dataKey),color:l,payload:n,type:t.legendType}})}),VHe=dt([koe,UL,QL,Oi],(e,t,r,n)=>{if(!(t==null||e==null))return PVe({offset:n,pieSettings:t,displayedData:e,cells:r})}),lI={},yq;function zHe(){return yq||(yq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t}(lI)),lI}var cI,wq;function $He(){return wq||(wq=1,cI=zHe().isPlainObject),cI}var GHe=$He();const qHe=jl(GHe);function ES(){return ES=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ES.apply(null,arguments)}var Eq=(e,t,r,n,a)=>{var s=r-n,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-s/2,",").concat(t+a),o+="L ".concat(e+r-s/2-n,",").concat(t+a),o+="L ".concat(e,",").concat(t," Z"),o},KHe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},WHe=e=>{var t=Ju(e,KHe),r=C.useRef(),[n,a]=C.useState(-1);C.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var v=r.current.getTotalLength();v&&a(v)}catch{}},[]);var{x:s,y:o,upperWidth:l,lowerWidth:c,height:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isUpdateAnimationActive:g}=t;if(s!==+s||o!==+o||l!==+l||c!==+c||u!==+u||l===0&&c===0||u===0)return null;var x=bn("recharts-trapezoid",d);return g?C.createElement(oS,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:o},to:{upperWidth:l,lowerWidth:c,height:u,x:s,y:o},duration:h,animationEasing:f,isActive:g},v=>{var{upperWidth:y,lowerWidth:w,height:_,x:T,y:j}=v;return C.createElement(oS,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,easing:f},C.createElement("path",ES({},Xn(t,!0),{className:x,d:Eq(T,j,y,w,_),ref:r})))}):C.createElement("g",null,C.createElement("path",ES({},Xn(t,!0),{className:x,d:Eq(s,o,l,c,u)})))},XHe=["option","shapeType","propTransformer","activeClassName","isActive"];function YHe(e,t){if(e==null)return{};var r,n,a=JHe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function JHe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Nq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function NS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nq(Object(r),!0).forEach(function(n){ZHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZHe(e,t,r){return(t=eVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eVe(e){var t=tVe(e,"string");return typeof t=="symbol"?t:t+""}function tVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rVe(e,t){return NS(NS({},t),e)}function nVe(e,t){return e==="symbols"}function Cq(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return C.createElement(ese,r);case"trapezoid":return C.createElement(WHe,r);case"sector":return C.createElement(nse,r);case"symbols":if(nVe(t))return C.createElement(o8,r);break;default:return null}}function aVe(e){return C.isValidElement(e)?e.props:e}function joe(e){var{option:t,shapeType:r,propTransformer:n=rVe,activeClassName:a="recharts-active-shape",isActive:s}=e,o=YHe(e,XHe),l;if(C.isValidElement(t))l=C.cloneElement(t,NS(NS({},o),aVe(t)));else if(typeof t=="function")l=t(o);else if(qHe(t)&&typeof t!="boolean"){var c=n(t,o);l=C.createElement(Cq,{shapeType:r,elementProps:c})}else{var u=o;l=C.createElement(Cq,{shapeType:r,elementProps:u})}return s?C.createElement(fs,{className:a},l):l}var HL=(e,t)=>{var r=Ga();return(n,a)=>s=>{e==null||e(n,a,s),r(Hie({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},VL=e=>{var t=Ga();return(r,n)=>a=>{e==null||e(r,n,a),t(G7e())}},zL=(e,t)=>{var r=Ga();return(n,a)=>s=>{e==null||e(n,a,s),r(q7e({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function $L(e){var{fn:t,args:r}=e,n=Ga(),a=dc();return C.useEffect(()=>{if(!a){var s=t(r);return n(V7e(s)),()=>{n(z7e(s))}}},[t,r,n,a]),null}var Boe=()=>{};function sVe(e){var{legendPayload:t}=e,r=Ga(),n=dc();return C.useEffect(()=>n?Boe:(r(zae(t)),()=>{r($ae(t))}),[r,n,t]),null}function Toe(e){var{legendPayload:t}=e,r=Ga(),n=or(In);return C.useEffect(()=>n!=="centric"&&n!=="radial"?Boe:(r(zae(t)),()=>{r($ae(t))}),[r,n,t]),null}function GL(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=C.useRef(f2(t)),n=C.useRef(e);return n.current!==e&&(r.current=f2(t),n.current=e),r.current}var uI,iVe=()=>{var[e]=C.useState(()=>f2("uid-"));return e},oVe=(uI=khe.useId)!==null&&uI!==void 0?uI:iVe;function lVe(e,t){var r=oVe();return t||(e?"".concat(e,"-").concat(r):r)}var cVe=C.createContext(void 0),qL=e=>{var{id:t,type:r,children:n}=e,a=lVe("recharts-".concat(r),t);return C.createElement(cVe.Provider,{value:a},n(a))},uVe={cartesianItems:[],polarItems:[]},Ioe=tu({name:"graphicalItems",initialState:uVe,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=hh(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=hh(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=hh(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:dVe,replaceCartesianGraphicalItem:fVe,removeCartesianGraphicalItem:AVe,addPolarGraphicalItem:hVe,removePolarGraphicalItem:mVe}=Ioe.actions,pVe=Ioe.reducer;function gVe(e){var t=Ga(),r=C.useRef(null);return C.useEffect(()=>{r.current===null?t(dVe(e)):r.current!==e&&t(fVe({prev:r.current,next:e})),r.current=e},[t,e]),C.useEffect(()=>()=>{r.current&&(t(AVe(r.current)),r.current=null)},[t]),null}function Foe(e){var t=Ga();return C.useEffect(()=>(t(hVe(e)),()=>{t(mVe(e))}),[t,e]),null}function xVe(){}var vVe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},_q={t:0},dI={t:1};function KL(e){var t=Ju(e,vVe),{isActive:r,canBegin:n,duration:a,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:c,children:u}=t,d=Zae("JavascriptAnimate",t.animationManager),[f,h]=C.useState(r?_q:dI),m=C.useRef(null);return C.useEffect(()=>{r||h(dI)},[r]),C.useEffect(()=>{if(!r||!n)return xVe;var g=Jae(_q,dI,Xae(s),a,h,d.getTimeoutController()),x=()=>{m.current=g()};return d.start([c,o,x,a,l]),()=>{d.stop(),m.current&&m.current(),l()}},[r,n,a,s,o,c,l,d]),u(f.t)}var bVe=["onMouseEnter","onClick","onMouseLeave"],yVe=["id"],wVe=["id"];function WL(e,t){if(e==null)return{};var r,n,a=EVe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function EVe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Sq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function js(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sq(Object(r),!0).forEach(function(n){NVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NVe(e,t,r){return(t=CVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CVe(e){var t=_Ve(e,"string");return typeof t=="symbol"?t:t+""}function _Ve(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ih(){return Ih=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ih.apply(null,arguments)}function SVe(e){var t=C.useMemo(()=>uE(e.children,Fm),[e.children]),r=or(n=>HHe(n,e.id,t));return r==null?null:C.createElement(Toe,{legendPayload:r})}function kVe(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:o,name:l,hide:c,tooltipType:u}=e;return{dataDefinedOnItem:n==null?void 0:n.map(d=>d.tooltipPayload),positions:n==null?void 0:n.map(d=>d.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:o,dataKey:t,nameKey:r,name:r1(l,t),hide:c,type:u,color:o,unit:""}}}var jVe=(e,t)=>e>t?"start":e<t?"end":"middle",BVe=(e,t,r)=>typeof t=="function"?t(e):kl(t,r,r*.8),TVe=(e,t,r)=>{var{top:n,left:a,width:s,height:o}=t,l=Fae(s,o),c=a+kl(e.cx,s,s/2),u=n+kl(e.cy,o,o/2),d=kl(e.innerRadius,l,0),f=BVe(r,e.outerRadius,l),h=e.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:h}},IVe=(e,t)=>{var r=to(t-e),n=Math.min(Math.abs(t-e),360);return r*n},FVe=(e,t)=>{if(C.isValidElement(e))return C.cloneElement(e,t);if(typeof e=="function")return e(t);var r=bn("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return C.createElement(qae,Ih({},t,{type:"linear",className:r}))},OVe=(e,t,r)=>{if(C.isValidElement(e))return C.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),C.isValidElement(n)))return n;var a=bn("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return C.createElement(m1,Ih({},t,{alignmentBaseline:"middle",className:a}),n)};function DVe(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:s,dataKey:o}=r;if(!n||!a||!t)return null;var l=dl(r),c=Xn(a,!1),u=Xn(s,!1),d=typeof a=="object"&&"offsetRadius"in a&&a.offsetRadius||20,f=t.map((h,m)=>{var g=(h.startAngle+h.endAngle)/2,x=ea(h.cx,h.cy,h.outerRadius+d,g),v=js(js(js(js({},l),h),{},{stroke:"none"},c),{},{index:m,textAnchor:jVe(x.x,h.cx)},x),y=js(js(js(js({},l),h),{},{fill:"none",stroke:h.fill},u),{},{index:m,points:[ea(h.cx,h.cy,h.outerRadius,g),x],key:"line"});return C.createElement(fs,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(m)},s&&FVe(s,y),OVe(a,v,Ra(h,o)))});return C.createElement(fs,{className:"recharts-pie-labels"},f)}function Ooe(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,showLabels:s}=e,o=or(Im),{onMouseEnter:l,onClick:c,onMouseLeave:u}=a,d=WL(a,bVe),f=HL(l,a.dataKey),h=VL(u),m=zL(c,a.dataKey);return t==null?null:C.createElement(C.Fragment,null,t.map((g,x)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var v=r&&String(x)===o,y=o?n:null,w=v?r:y,_=js(js({},g),{},{stroke:g.stroke,tabIndex:-1,[Mae]:x,[Uae]:a.dataKey});return C.createElement(fs,Ih({tabIndex:-1,className:"recharts-pie-sector"},Wg(d,g,x),{onMouseEnter:f(g,x),onMouseLeave:h(g,x),onClick:m(g,x),key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(x)}),C.createElement(joe,Ih({option:w,isActive:v,shapeType:"sector"},_)))}),C.createElement(DVe,{sectors:t,props:a,showLabels:s}))}function PVe(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:s}=e,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,h=Math.abs(r.minAngle),m=IVe(l,c),g=Math.abs(m),x=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,v=n.filter(I=>Ra(I,u,0)!==0).length,y=(g>=360?v:v-1)*x,w=g-v*h-y,_=n.reduce((I,E)=>{var S=Ra(E,u,0);return I+(fr(S)?S:0)},0),T;if(_>0){var j;T=n.map((I,E)=>{var S=Ra(I,u,0),B=Ra(I,d,E),M=TVe(r,s,I),R=(fr(S)?S:0)/_,k,D=js(js({},I),a&&a[E]&&a[E].props);E?k=j.endAngle+to(m)*x*(S!==0?1:0):k=l;var L=k+to(m)*((S!==0?h:0)+R*w),Z=(k+L)/2,V=(M.innerRadius+M.outerRadius)/2,q=[{name:B,value:S,payload:D,dataKey:u,type:f}],G=ea(M.cx,M.cy,V,Z);return j=js(js(js(js({},r.presentationProps),{},{percent:R,cornerRadius:o,name:B,tooltipPayload:q,midAngle:Z,middleRadius:V,tooltipPosition:G},D),M),{},{value:Ra(I,u),startAngle:k,endAngle:L,payload:D,paddingAngle:to(m)*x}),j})}return T}function RVe(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:l,activeShape:c,inactiveShape:u,onAnimationStart:d,onAnimationEnd:f}=t,h=GL(t,"recharts-pie-"),m=r.current,[g,x]=C.useState(!0),v=C.useCallback(()=>{typeof f=="function"&&f(),x(!1)},[f]),y=C.useCallback(()=>{typeof d=="function"&&d(),x(!0)},[d]);return C.createElement(KL,{begin:s,duration:o,isActive:a,easing:l,onAnimationStart:y,onAnimationEnd:v,key:h},w=>{var _=[],T=n&&n[0],j=T.startAngle;return n.forEach((I,E)=>{var S=m&&m[E],B=E>0?Tm(I,"paddingAngle",0):0;if(S){var M=gv(S.endAngle-S.startAngle,I.endAngle-I.startAngle),R=js(js({},I),{},{startAngle:j+B,endAngle:j+M(w)+B});_.push(R),j=R.endAngle}else{var{endAngle:k,startAngle:D}=I,L=gv(0,k-D),Z=L(w),V=js(js({},I),{},{startAngle:j+B,endAngle:j+Z+B});_.push(V),j=V.endAngle}}),r.current=_,C.createElement(fs,null,C.createElement(Ooe,{sectors:_,activeShape:c,inactiveShape:u,allOtherPieProps:t,showLabels:!g}))})}function LVe(e){var{sectors:t,isAnimationActive:r,activeShape:n,inactiveShape:a}=e,s=C.useRef(null),o=s.current;return r&&t&&t.length&&(!o||o!==t)?C.createElement(RVe,{props:e,previousSectorsRef:s}):C.createElement(Ooe,{sectors:t,activeShape:n,inactiveShape:a,allOtherPieProps:e,showLabels:!0})}function MVe(e){var{hide:t,className:r,rootTabIndex:n}=e,a=bn("recharts-pie",r);return t?null:C.createElement(fs,{tabIndex:n,className:a},C.createElement(LVe,e))}var UVe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Xg.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function QVe(e){var{id:t}=e,r=WL(e,yVe),n=C.useMemo(()=>uE(e.children,Fm),[e.children]),a=or(s=>VHe(s,t,n));return C.createElement(C.Fragment,null,C.createElement($L,{fn:kVe,args:js(js({},e),{},{sectors:a})}),C.createElement(MVe,Ih({},r,{sectors:a})))}function Q4(e){var t=Ju(e,UVe),{id:r}=t,n=WL(t,wVe),a=dl(n);return C.createElement(qL,{id:r,type:"pie"},s=>C.createElement(C.Fragment,null,C.createElement(Foe,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a}),C.createElement(SVe,Ih({},n,{id:s})),C.createElement(QVe,Ih({},n,{id:s})),n.children))}Q4.displayName="Pie";var HVe=dt([Oi],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),VVe=dt([HVe,Hh,Vh],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Doe=()=>or(VVe),zVe=()=>or(FUe);function kq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kq(Object(r),!0).forEach(function(n){$Ve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $Ve(e,t,r){return(t=GVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GVe(e){var t=qVe(e,"string");return typeof t=="symbol"?t:t+""}function qVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KVe=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:s}=e;if(a===!1||t.x==null||t.y==null)return null;var o=jq(jq({index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Xn(a,!1)),t8(a)),l;return C.isValidElement(a)?l=C.cloneElement(a,o):typeof a=="function"?l=a(o):l=C.createElement(OL,o),C.createElement(fs,{className:"recharts-active-dot"},l)};function WVe(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,s=or(Im),o=zVe();if(t==null||o==null)return null;var l=t.find(c=>o.includes(c.payload));return Os(l)?null:KVe({point:l,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:n})}function Bq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function CS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Bq(Object(r),!0).forEach(function(n){XVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XVe(e,t,r){return(t=YVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YVe(e){var t=JVe(e,"string");return typeof t=="symbol"?t:t+""}function JVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Poe=(e,t)=>p1(e,"radiusAxis",t),ZVe=dt([Poe],e=>{if(e!=null)return{scale:e}}),eze=dt([gE,Poe],(e,t)=>{if(!(e==null||t==null))return CS(CS({},e),{},{scale:t})}),tze=(e,t,r,n)=>g1(e,"radiusAxis",t,n),Roe=(e,t,r)=>o1(e,r),Loe=(e,t,r)=>p1(e,"angleAxis",r),rze=dt([Roe,Loe],(e,t)=>{if(!(e==null||t==null))return CS(CS({},e),{},{scale:t})}),nze=(e,t,r,n)=>g1(e,"angleAxis",r,n),aze=dt([Roe,Loe,l1],(e,t,r)=>{if(!(r==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:r.cx,cy:r.cy}}),sze=(e,t,r,n,a)=>a,ize=dt([In,eze,tze,rze,nze],(e,t,r,n,a)=>qm(e,"radiusAxis")?m2(t,r,!1):m2(n,a,!1)),oze=dt([DL,sze],(e,t)=>{if(e.some(r=>r.type==="radar"&&t===r.dataKey))return t}),lze=dt([ZVe,aze,_4,oze,ize],(e,t,r,n,a)=>{var{chartData:s,dataStartIndex:o,dataEndIndex:l}=r;if(!(e==null||t==null||s==null||a==null||n==null)){var c=s.slice(o,l+1);return gze({radiusAxis:e,angleAxis:t,displayedData:c,dataKey:n,bandSize:a})}}),cze=["id"];function uze(e,t){if(e==null)return{};var r,n,a=dze(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function dze(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Tq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tq(Object(r),!0).forEach(function(n){XL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XL(e,t,r){return(t=fze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fze(e){var t=Aze(e,"string");return typeof t=="symbol"?t:t+""}function Aze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nb(){return Nb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nb.apply(null,arguments)}function YL(e,t){return e&&e!=="none"?e:t}var hze=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:s,hide:o}=e;return[{inactive:o,dataKey:t,type:s,color:YL(n,a),value:r1(r,t),payload:e}]};function mze(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:o,tooltipType:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,nameKey:void 0,dataKey:t,name:r1(s,t),hide:o,type:l,color:YL(r,a),unit:""}}}function pze(e,t){var r;return C.isValidElement(e)?r=C.cloneElement(e,t):typeof e=="function"?r=e(t):r=C.createElement(OL,Nb({},t,{className:bn("recharts-radar-dot",typeof e!="boolean"?e.className:"")})),r}function gze(e){var{radiusAxis:t,angleAxis:r,displayedData:n,dataKey:a,bandSize:s}=e,{cx:o,cy:l}=r,c=!1,u=[],d=r.type!=="number"?s??0:0;n.forEach((h,m)=>{var g=Ra(h,r.dataKey,m),x=Ra(h,a),v=r.scale(g)+d,y=Array.isArray(x)?goe(x):x,w=Os(y)?void 0:t.scale(y);Array.isArray(x)&&x.length>=2&&(c=!0),u.push(Cl(Cl({},ea(o,l,w,v)),{},{name:g,value:x,cx:o,cy:l,radius:w,angle:v,payload:h}))});var f=[];return c&&u.forEach(h=>{if(Array.isArray(h.value)){var m=h.value[0],g=Os(m)?void 0:t.scale(m);f.push(Cl(Cl({},h),{},{radius:g},ea(o,l,g,h.angle)))}else f.push(h)}),{points:u,isRange:c,baseLinePoints:f}}function xze(e){var{points:t,props:r}=e,{dot:n,dataKey:a}=r;if(!n)return null;var{id:s}=r,o=uze(r,cze),l=dl(o),c=Xn(n,!0),u=t.map((d,f)=>{var h=Cl(Cl(Cl({key:"dot-".concat(f),r:3},l),c),{},{dataKey:a,cx:d.x,cy:d.y,index:f,payload:d});return pze(n,h)});return C.createElement(fs,{className:"recharts-radar-dots"},u)}function Moe(e){var{points:t,props:r,showLabels:n}=e;if(t==null)return null;var{shape:a,isRange:s,baseLinePoints:o,connectNulls:l}=r,c=f=>{var{onMouseEnter:h}=r;h&&h(r,f)},u=f=>{var{onMouseLeave:h}=r;h&&h(r,f)},d;return C.isValidElement(a)?d=C.cloneElement(a,Cl(Cl({},r),{},{points:t})):typeof a=="function"?d=a(Cl(Cl({},r),{},{points:t})):d=C.createElement(xoe,Nb({},Xn(r,!0),{onMouseEnter:c,onMouseLeave:u,points:t,baseLinePoints:s?o:null,connectNulls:l})),C.createElement(fs,{className:"recharts-radar-polygon"},d,C.createElement(xze,{props:r,points:t}),n&&fm.renderCallByParent(r,t))}function vze(e){var{props:t,previousPointsRef:r}=e,{points:n,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:l,onAnimationEnd:c,onAnimationStart:u}=t,d=r.current,f=GL(t,"recharts-radar-"),[h,m]=C.useState(!0),g=C.useCallback(()=>{typeof c=="function"&&c(),m(!1)},[c]),x=C.useCallback(()=>{typeof u=="function"&&u(),m(!0)},[u]);return C.createElement(KL,{begin:s,duration:o,isActive:a,easing:l,key:"radar-".concat(f),onAnimationEnd:g,onAnimationStart:x},v=>{var y=d&&d.length/n.length,w=v===1?n:n.map((_,T)=>{var j=d&&d[Math.floor(T*y)];if(j){var I=gv(j.x,_.x),E=gv(j.y,_.y);return Cl(Cl({},_),{},{x:I(v),y:E(v)})}var S=gv(_.cx,_.x),B=gv(_.cy,_.y);return Cl(Cl({},_),{},{x:S(v),y:B(v)})});return v>0&&(r.current=w),C.createElement(Moe,{points:w,props:t,showLabels:!h})})}function bze(e){var{points:t,isAnimationActive:r,isRange:n}=e,a=C.useRef(void 0),s=a.current;return r&&t&&t.length&&!n&&(!s||s!==t)?C.createElement(vze,{props:e,previousPointsRef:a}):C.createElement(Moe,{points:t,props:e,showLabels:!0})}var yze={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Xg.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class wze extends C.PureComponent{render(){var{hide:t,className:r,points:n}=this.props;if(t)return null;var a=bn("recharts-radar",r);return C.createElement(C.Fragment,null,C.createElement(fs,{className:a},C.createElement(bze,this.props)),C.createElement(WVe,{points:n,mainColor:YL(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function Eze(e){var t=dc(),r=or(n=>lze(n,e.radiusAxisId,e.angleAxisId,t,e.dataKey));return C.createElement(wze,Nb({},e,{points:r==null?void 0:r.points,baseLinePoints:r==null?void 0:r.baseLinePoints,isRange:r==null?void 0:r.isRange}))}class JL extends C.PureComponent{render(){return C.createElement(qL,{id:this.props.id,type:"radar"},t=>C.createElement(C.Fragment,null,C.createElement(Foe,{type:"radar",id:t,data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId}),C.createElement(Toe,{legendPayload:hze(this.props)}),C.createElement($L,{fn:mze,args:this.props}),C.createElement(Eze,Nb({},this.props,{id:t}))))}}XL(JL,"displayName","Radar");XL(JL,"defaultProps",yze);var Nze="Invariant failed";function Cze(e,t){throw new Error(Nze)}var _ze=["x","y"];function xO(){return xO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xO.apply(null,arguments)}function Iq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Iq(Object(r),!0).forEach(function(n){Sze(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Iq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sze(e,t,r){return(t=kze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kze(e){var t=jze(e,"string");return typeof t=="symbol"?t:t+""}function jze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bze(e,t){if(e==null)return{};var r,n,a=Tze(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Tze(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ize(e,t){var{x:r,y:n}=e,a=Bze(e,_ze),s="".concat(r),o=parseInt(s,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return gy(gy(gy(gy(gy({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function Uoe(e){return C.createElement(joe,xO({shapeType:"rectangle",propTransformer:Ize,activeClassName:"recharts-active-bar"},e))}var Fze=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(fr(t))return t;var s=fr(n)||Os(n);return s?t(n,a):(s||Cze(),r)}},Oze={},Qoe=tu({name:"errorBars",initialState:Oze,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:rpt,removeErrorBar:npt}=Qoe.actions,Dze=Qoe.reducer,Pze=["children"];function Rze(e,t){if(e==null)return{};var r,n,a=Lze(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Lze(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Mze={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Uze=C.createContext(Mze);function Qze(e){var{children:t}=e,r=Rze(e,Pze);return C.createElement(Uze.Provider,{value:r},t)}function Hoe(e,t){var r,n,a=or(u=>$h(u,e)),s=or(u=>Ym(u,t)),o=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Oc.allowDataOverflow,l=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:Dc.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function Hze(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=Doe(),{needClipX:s,needClipY:o,needClip:l}=Hoe(t,r);if(!l)return null;var{x:c,y:u,width:d,height:f}=a;return C.createElement("clipPath",{id:"clipPath-".concat(n)},C.createElement("rect",{x:s?c:c-d/2,y:o?u:u-f/2,width:s?d:d*2,height:o?f:f*2}))}var Vze=["onMouseEnter","onMouseLeave","onClick"],zze=["value","background","tooltipPosition"],$ze=["id"],Gze=["onMouseEnter","onClick","onMouseLeave"];function Cb(){return Cb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cb.apply(null,arguments)}function Fq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fq(Object(r),!0).forEach(function(n){qze(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qze(e,t,r){return(t=Kze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kze(e){var t=Wze(e,"string");return typeof t=="symbol"?t:t+""}function Wze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _S(e,t){if(e==null)return{};var r,n,a=Xze(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Xze(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Yze=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:r1(r,t),payload:e}]};function Jze(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:o,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:r1(s,t),hide:o,type:e.tooltipType,color:e.fill,unit:l}}}function Zze(e){var t=or(Im),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=s,u=_S(s,Vze),d=HL(o,n),f=VL(l),h=zL(c,n);if(!a||r==null)return null;var m=Xn(a,!1);return C.createElement(C.Fragment,null,r.map((g,x)=>{var{value:v,background:y,tooltipPosition:w}=g,_=_S(g,zze);if(!y)return null;var T=d(g,x),j=f(g,x),I=h(g,x),E=Zo(Zo(Zo(Zo(Zo({option:a,isActive:String(x)===t},_),{},{fill:"#eee"},y),m),Wg(u,g,x)),{},{onMouseEnter:T,onMouseLeave:j,onClick:I,dataKey:n,index:x,className:"recharts-bar-background-rectangle"});return C.createElement(Uoe,Cb({key:"background-bar-".concat(x)},E))}))}function Voe(e){var{data:t,props:r,showLabels:n}=e,a=dl(r),{id:s}=a,o=_S(a,$ze),{shape:l,dataKey:c,activeBar:u}=r,d=or(Im),f=or(toe),{onMouseEnter:h,onClick:m,onMouseLeave:g}=r,x=_S(r,Gze),v=HL(h,c),y=VL(g),w=zL(m,c);return t?C.createElement(C.Fragment,null,t.map((_,T)=>{var j=u&&String(T)===d&&(f==null||c===f),I=j?u:l,E=Zo(Zo(Zo({},o),_),{},{isActive:j,option:I,index:T,dataKey:c});return C.createElement(fs,Cb({className:"recharts-bar-rectangle"},Wg(x,_,T),{onMouseEnter:v(_,T),onMouseLeave:y(_,T),onClick:w(_,T),key:"rectangle-".concat(_==null?void 0:_.x,"-").concat(_==null?void 0:_.y,"-").concat(_==null?void 0:_.value,"-").concat(T)}),C.createElement(Uoe,E))}),n&&fm.renderCallByParent(r,t)):null}function e$e(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,h=GL(t,"recharts-bar-"),[m,g]=C.useState(!1),x=C.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),v=C.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return C.createElement(KL,{begin:o,duration:l,isActive:s,easing:c,onAnimationEnd:x,onAnimationStart:v,key:h},y=>{var w=y===1?n:n==null?void 0:n.map((_,T)=>{var j=f&&f[T];if(j)return Zo(Zo({},_),{},{x:Dx(j.x,_.x,y),y:Dx(j.y,_.y,y),width:Dx(j.width,_.width,y),height:Dx(j.height,_.height,y)});if(a==="horizontal"){var I=Dx(0,_.height,y);return Zo(Zo({},_),{},{y:_.y+_.height-I,height:I})}var E=Dx(0,_.width,y);return Zo(Zo({},_),{},{width:E})});return y>0&&(r.current=w??null),w==null?null:C.createElement(fs,null,C.createElement(Voe,{props:t,data:w,showLabels:!m}))})}function t$e(e){var{data:t,isAnimationActive:r}=e,n=C.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?C.createElement(e$e,{previousRectanglesRef:n,props:e}):C.createElement(Voe,{props:e,data:t,showLabels:!0})}var zoe=0,r$e=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ra(e,t)}};class n$e extends C.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:o,needClip:l,background:c,id:u}=this.props;if(t)return null;var d=bn("recharts-bar",a),f=u;return C.createElement(fs,{className:d,id:u},l&&C.createElement("defs",null,C.createElement(Hze,{clipPathId:f,xAxisId:s,yAxisId:o})),C.createElement(fs,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},C.createElement(Zze,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),C.createElement(t$e,this.props)),this.props.children)}}var a$e={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Xg.isSsr,legendType:"rect",minPointSize:zoe,xAxisId:0,yAxisId:0};function s$e(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=Hoe(t,r),h=S8(),m=dc(),g=uE(e.children,Fm),x=or(w=>I$e(w,t,r,m,e.id,g));if(h!=="vertical"&&h!=="horizontal")return null;var v,y=x==null?void 0:x[0];return y==null||y.height==null||y.width==null?v=0:v=h==="vertical"?y.height/2:y.width/2,C.createElement(Qze,{xAxisId:t,yAxisId:r,data:x,dataPointFormatter:r$e,errorBarOffset:v},C.createElement(n$e,Cb({},e,{layout:h,needClip:f,data:x,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function i$e(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:m}=e,g=t==="horizontal"?l:o,x=d?g.scale.domain():null,v=tPe({numericAxis:g});return f.map((y,w)=>{var _,T,j,I,E,S;d?_=WDe(d[w],x):(_=Ra(y,r),Array.isArray(_)||(_=[v,_]));var B=Fze(n,zoe)(_[1],w);if(t==="horizontal"){var M,[R,k]=[l.scale(_[0]),l.scale(_[1])];T=r$({axis:o,ticks:c,bandSize:s,offset:a.offset,entry:y,index:w}),j=(M=k??R)!==null&&M!==void 0?M:void 0,I=a.size;var D=R-k;if(E=Xc(D)?0:D,S={x:T,y:h.top,width:I,height:h.height},Math.abs(B)>0&&Math.abs(E)<Math.abs(B)){var L=to(E||B)*(Math.abs(B)-Math.abs(E));j-=L,E+=L}}else{var[Z,V]=[o.scale(_[0]),o.scale(_[1])];if(T=Z,j=r$({axis:l,ticks:u,bandSize:s,offset:a.offset,entry:y,index:w}),I=V-Z,E=a.size,S={x:h.left,y:j,width:h.width,height:E},Math.abs(B)>0&&Math.abs(I)<Math.abs(B)){var q=to(I||B)*(Math.abs(B)-Math.abs(I));I+=q}}if(T==null||j==null||I==null||E==null)return null;var G=Zo(Zo({},y),{},{x:T,y:j,width:I,height:E,value:d?_:_[1],payload:y,background:S,tooltipPosition:{x:T+I/2,y:j+E/2}},m&&m[w]&&m[w].props);return G}).filter(Boolean)}function _b(e){var t=Ju(e,a$e),r=dc();return C.createElement(qL,{id:t.id,type:"bar"},n=>C.createElement(C.Fragment,null,C.createElement(sVe,{legendPayload:Yze(t)}),C.createElement($L,{fn:Jze,args:t}),C.createElement(gVe,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:ePe(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),C.createElement(s$e,Cb({},t,{id:n}))))}_b.displayName="Bar";function Oq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Oq(Object(r),!0).forEach(function(n){o$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function o$e(e,t,r){return(t=l$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l$e(e){var t=c$e(e,"string");return typeof t=="symbol"?t:t+""}function c$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var u$e=(e,t)=>t,d$e=(e,t,r)=>r,f$e=(e,t,r,n)=>n,A$e=(e,t,r,n,a)=>a,NE=dt([lL,A$e],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),h$e=dt([NE],e=>e==null?void 0:e.maxBarSize),m$e=(e,t,r,n,a,s)=>s,Dq=(e,t,r)=>{var n=r??e;if(!Os(n))return kl(n,t,0)},p$e=dt([In,lL,u$e,d$e,f$e],(e,t,r,n,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),g$e=(e,t,r,n)=>{var a=In(e);return a==="horizontal"?dO(e,"yAxis",r,n):dO(e,"xAxis",t,n)},x$e=(e,t,r)=>{var n=In(e);return n==="horizontal"?EG(e,"xAxis",t):EG(e,"yAxis",r)},v$e=(e,t,r)=>{var n={},a=e.filter(B4),s=e.filter(u=>u.stackId==null),o=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(o).map(u=>{var[d,f]=u,h=f.map(g=>g.dataKey),m=Dq(t,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:m}}),c=s.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=Dq(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]},b$e=dt([p$e,zMe,x$e],v$e),y$e=(e,t,r,n,a)=>{var s,o,l=NE(e,t,r,n,a);if(l!=null){var c=In(e),u=rie(e),{maxBarSize:d}=l,f=Os(d)?u:d,h,m;return c==="horizontal"?(h=wb(e,"xAxis",t,n),m=yb(e,"xAxis",t,n)):(h=wb(e,"yAxis",r,n),m=yb(e,"yAxis",r,n)),(s=(o=m2(h,m,!0))!==null&&o!==void 0?o:f)!==null&&s!==void 0?s:0}},$oe=(e,t,r,n)=>{var a=In(e),s,o;return a==="horizontal"?(s=wb(e,"xAxis",t,n),o=yb(e,"xAxis",t,n)):(s=wb(e,"yAxis",r,n),o=yb(e,"yAxis",r,n)),m2(s,o)};function w$e(e,t,r,n,a){var s=n.length;if(!(s<1)){var o=kl(e,r,0,!0),l,c=[];if(Zc(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((y,w)=>y+(w.barSize||0),0);f+=(s-1)*o,f>=r&&(f-=(s-1)*o,o=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var h=(r-f)/2>>0,m={offset:h-o,size:0};l=n.reduce((y,w)=>{var _,T={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:m.offset+m.size+o,size:u?d:(_=w.barSize)!==null&&_!==void 0?_:0}},j=[...y,T];return m=j[j.length-1].position,j},c)}else{var g=kl(t,r,0,!0);r-2*g-(s-1)*o<=0&&(o=0);var x=(r-2*g-(s-1)*o)/s;x>1&&(x>>=0);var v=Zc(a)?Math.min(x,a):x;l=n.reduce((y,w,_)=>[...y,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:g+(x+o)*_+(x-v)/2,size:v}}],c)}return l}}var E$e=(e,t,r,n,a,s,o)=>{var l=Os(o)?t:o,c=w$e(r,n,a!==s?a:s,e,l);return a!==s&&c!=null&&(c=c.map(u=>vC(vC({},u),{},{position:vC(vC({},u.position),{},{offset:u.position.offset-a/2})}))),c},N$e=dt([b$e,rie,VMe,nie,y$e,$oe,h$e],E$e),C$e=(e,t,r,n)=>wb(e,"xAxis",t,n),_$e=(e,t,r,n)=>wb(e,"yAxis",r,n),S$e=(e,t,r,n)=>yb(e,"xAxis",t,n),k$e=(e,t,r,n)=>yb(e,"yAxis",r,n),j$e=dt([N$e,NE],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),B$e=(e,t)=>{var r=sL(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(o=>o.key===r)}}}},T$e=dt([g$e,NE],B$e),I$e=dt([Oi,C$e,_$e,S$e,k$e,j$e,In,J8,$oe,T$e,NE,m$e],(e,t,r,n,a,s,o,l,c,u,d,f)=>{var{chartData:h,dataStartIndex:m,dataEndIndex:g}=l;if(!(d==null||s==null||o!=="horizontal"&&o!=="vertical"||t==null||r==null||n==null||a==null||c==null)){var{data:x}=d,v;if(x!=null&&x.length>0?v=x:v=h==null?void 0:h.slice(m,g+1),v!=null)return i$e({layout:o,barSettings:d,pos:s,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,stackedData:u,displayedData:v,offset:e,cells:f})}}),Goe=e=>{var{chartData:t}=e,r=Ga(),n=dc();return C.useEffect(()=>n?()=>{}:(r(FG(t)),()=>{r(FG(void 0))}),[t,r,n]),null},Pq={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},qoe=tu({name:"brush",initialState:Pq,reducers:{setBrushSettings(e,t){return t.payload==null?Pq:t.payload}}}),{setBrushSettings:apt}=qoe.actions,F$e=qoe.reducer;function O$e(e,t,r){return(t=D$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D$e(e){var t=P$e(e,"string");return typeof t=="symbol"?t:t+""}function P$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class ZL{static create(t){return new ZL(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}O$e(ZL,"EPS",1e-4);function R$e(e){return(e%180+180)%180}var L$e=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=R$e(a),o=s*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},M$e={dots:[],areas:[],lines:[]},Koe=tu({name:"referenceElements",initialState:M$e,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=hh(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=hh(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=hh(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:spt,removeDot:ipt,addArea:opt,removeArea:lpt,addLine:cpt,removeLine:upt}=Koe.actions,U$e=Koe.reducer,Q$e=C.createContext(void 0),H$e=e=>{var{children:t}=e,[r]=C.useState("".concat(f2("recharts"),"-clip")),n=Doe();if(n==null)return null;var{x:a,y:s,width:o,height:l}=n;return C.createElement(Q$e.Provider,{value:r},C.createElement("defs",null,C.createElement("clipPath",{id:r},C.createElement("rect",{x:a,y:s,height:l,width:o}))),t)};function fI(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Woe(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function V$e(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return L$e(n,r)}function z$e(e,t,r){var n=r==="width",{x:a,y:s,width:o,height:l}=e;return t===1?{start:n?a:s,end:n?a+o:s+l}:{start:n?a+o:s+l,end:n?a:s}}function SS(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function $$e(e,t){return Woe(e,t+1)}function G$e(e,t,r,n,a){for(var s=(n||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,f=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:Woe(n,u)};var x=c,v,y=()=>(v===void 0&&(v=r(g,x)),v),w=g.coordinate,_=c===0||SS(e,w,y,d,l);_||(c=0,d=o,u+=1),_&&(d=w+e*(y()/2+a),c+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function Rq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Go(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rq(Object(r),!0).forEach(function(n){q$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function q$e(e,t,r){return(t=K$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K$e(e){var t=W$e(e,"string");return typeof t=="symbol"?t:t+""}function W$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function X$e(e,t,r,n,a){for(var s=(n||[]).slice(),o=s.length,{start:l}=t,{end:c}=t,u=function(h){var m=s[h],g,x=()=>(g===void 0&&(g=r(m,h)),g);if(h===o-1){var v=e*(m.coordinate+e*x()/2-c);s[h]=m=Go(Go({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate})}else s[h]=m=Go(Go({},m),{},{tickCoord:m.coordinate});var y=SS(e,m.tickCoord,x,l,c);y&&(c=m.tickCoord-e*(x()/2+a),s[h]=Go(Go({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return s}function Y$e(e,t,r,n,a,s){var o=(n||[]).slice(),l=o.length,{start:c,end:u}=t;if(s){var d=n[l-1],f=r(d,l-1),h=e*(d.coordinate+e*f/2-u);o[l-1]=d=Go(Go({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=SS(e,d.tickCoord,()=>f,c,u);m&&(u=d.tickCoord-e*(f/2+a),o[l-1]=Go(Go({},d),{},{isShow:!0}))}for(var g=s?l-1:l,x=function(w){var _=o[w],T,j=()=>(T===void 0&&(T=r(_,w)),T);if(w===0){var I=e*(_.coordinate-e*j()/2-c);o[w]=_=Go(Go({},_),{},{tickCoord:I<0?_.coordinate-I*e:_.coordinate})}else o[w]=_=Go(Go({},_),{},{tickCoord:_.coordinate});var E=SS(e,_.tickCoord,j,c,u);E&&(c=_.tickCoord+e*(j()/2+a),o[w]=Go(Go({},_),{},{isShow:!0}))},v=0;v<g;v++)x(v);return o}function eM(e,t,r){var{tick:n,ticks:a,viewBox:s,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(fr(c)||Xg.isSsr){var h;return(h=$$e(a,fr(c)?c:0))!==null&&h!==void 0?h:[]}var m=[],g=l==="top"||l==="bottom"?"width":"height",x=d&&g==="width"?Cw(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=(_,T)=>{var j=typeof u=="function"?u(_.value,T):_.value;return g==="width"?V$e(Cw(j,{fontSize:t,letterSpacing:r}),x,f):Cw(j,{fontSize:t,letterSpacing:r})[g]},y=a.length>=2?to(a[1].coordinate-a[0].coordinate):1,w=z$e(s,y,g);return c==="equidistantPreserveStart"?G$e(y,w,v,a,o):(c==="preserveStart"||c==="preserveStartEnd"?m=Y$e(y,w,v,a,o,c==="preserveStartEnd"):m=X$e(y,w,v,a,o),m.filter(_=>_.isShow))}var J$e=["viewBox"],Z$e=["viewBox"];function bv(){return bv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bv.apply(null,arguments)}function Lq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ki(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lq(Object(r),!0).forEach(function(n){tM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mq(e,t){if(e==null)return{};var r,n,a=eGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function eGe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function tM(e,t,r){return(t=tGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tGe(e){var t=rGe(e,"string");return typeof t=="symbol"?t:t+""}function rGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Zm extends C.Component{constructor(t){super(t),this.tickRefs=C.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=Mq(t,J$e),s=this.props,{viewBox:o}=s,l=Mq(s,Z$e);return!fI(n,o)||!fI(a,l)||!fI(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:s,orientation:o,tickSize:l,mirror:c,tickMargin:u}=this.props,d,f,h,m,g,x,v=c?-1:1,y=t.tickSize||l,w=fr(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":d=f=t.coordinate,m=n+ +!c*s,h=m-v*y,x=h-v*u,g=w;break;case"left":h=m=t.coordinate,f=r+ +!c*a,d=f-v*y,g=d-v*u,x=w;break;case"right":h=m=t.coordinate,f=r+ +c*a,d=f+v*y,g=d+v*u,x=w;break;default:d=f=t.coordinate,m=n+ +c*s,h=m+v*y,x=h+v*u,g=w;break}return{line:{x1:d,y1:h,x2:f,y2:m},tick:{x:g,y:x}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:s,mirror:o,axisLine:l}=this.props,c=ki(ki(ki({},Xn(this.props,!1)),Xn(l,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!o||s==="bottom"&&o);c=ki(ki({},c),{},{x1:t,y1:r+u*a,x2:t+n,y2:r+u*a})}else{var d=+(s==="left"&&!o||s==="right"&&o);c=ki(ki({},c),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+a})}return C.createElement("line",bv({},c,{className:bn("recharts-cartesian-axis-line",Tm(l,"className"))}))}static renderTickItem(t,r,n){var a,s=bn(r.className,"recharts-cartesian-axis-tick-value");if(C.isValidElement(t))a=C.cloneElement(t,ki(ki({},r),{},{className:s}));else if(typeof t=="function")a=t(ki(ki({},r),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=bn(o,t.className)),a=C.createElement(m1,bv({},r,{className:o}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:s,tick:o,tickFormatter:l,unit:c,padding:u}=this.props,d=eM(ki(ki({},this.props),{},{ticks:n}),t,r),f=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),m=dl(this.props),g=Xn(o,!1),x=ki(ki({},m),{},{fill:"none"},Xn(a,!1)),v=d.map((y,w)=>{var{line:_,tick:T}=this.getTickLineCoord(y),j=ki(ki(ki(ki({textAnchor:f,verticalAnchor:h},m),{},{stroke:"none",fill:s},g),T),{},{index:w,payload:y,visibleTicksCount:d.length,tickFormatter:l,padding:u});return C.createElement(fs,bv({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},Wg(this.props,y,w)),a&&C.createElement("line",bv({},x,_,{className:bn("recharts-cartesian-axis-tick-line",Tm(a,"className"))})),o&&Zm.renderTickItem(o,j,"".concat(typeof l=="function"?l(y.value,w):y.value).concat(c||"")))});return v.length>0?C.createElement("g",{className:"recharts-cartesian-axis-ticks"},v):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:s}=this.props;if(s)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:C.createElement(fs,{className:bn("recharts-cartesian-axis",a),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),ec.renderCallByParent(this.props))}}tM(Zm,"displayName","CartesianAxis");tM(Zm,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var nGe=["x1","y1","x2","y2","key"],aGe=["offset"],sGe=["xAxisId","yAxisId"],iGe=["xAxisId","yAxisId"];function Uq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function el(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Uq(Object(r),!0).forEach(function(n){oGe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oGe(e,t,r){return(t=lGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lGe(e){var t=cGe(e,"string");return typeof t=="symbol"?t:t+""}function cGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $p(){return $p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$p.apply(null,arguments)}function kS(e,t){if(e==null)return{};var r,n,a=uGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function uGe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var dGe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:o,ry:l}=e;return C.createElement("rect",{x:n,y:a,ry:l,width:s,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Xoe(e,t){var r;if(C.isValidElement(e))r=C.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:s,y2:o,key:l}=t,c=kS(t,nGe),u=dl(c),{offset:d}=u,f=kS(u,aGe);r=C.createElement("line",$p({},f,{x1:n,y1:a,x2:s,y2:o,fill:"none",key:l}))}return r}function fGe(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:o}=e,l=kS(e,sGe),c=a.map((u,d)=>{var f=el(el({},l),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return Xoe(n,f)});return C.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function AGe(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:o}=e,l=kS(e,iGe),c=a.map((u,d)=>{var f=el(el({},l),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return Xoe(n,f)});return C.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function hGe(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:s,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=l.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],g=m?a+o-f:u[h+1]-f;if(g<=0)return null;var x=h%t.length;return C.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:g,width:s,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function mGe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],g=m?a+o-f:u[h+1]-f;if(g<=0)return null;var x=h%r.length;return C.createElement("rect",{key:"react-".concat(h),x:f,y:s,width:g,height:l,stroke:"none",fill:r[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var pGe=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return Pae(eM(el(el(el({},Zm.defaultProps),r),{},{ticks:Rae(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},gGe=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return Pae(eM(el(el(el({},Zm.defaultProps),r),{},{ticks:Rae(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},xGe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function E2(e){var t=C8(),r=_8(),n=Hae(),a=el(el({},Ju(e,xGe)),{},{x:fr(e.x)?e.x:n.left,y:fr(e.y)?e.y:n.top,width:fr(e.width)?e.width:n.width,height:fr(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:o,x:l,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:m}=a,g=dc(),x=or(B=>NG(B,"xAxis",s,g)),v=or(B=>NG(B,"yAxis",o,g));if(!fr(u)||u<=0||!fr(d)||d<=0||!fr(l)||l!==+l||!fr(c)||c!==+c)return null;var y=a.verticalCoordinatesGenerator||pGe,w=a.horizontalCoordinatesGenerator||gGe,{horizontalPoints:_,verticalPoints:T}=a;if((!_||!_.length)&&typeof w=="function"){var j=h&&h.length,I=w({yAxis:v?el(el({},v),{},{ticks:j?h:v.ticks}):void 0,width:t,height:r,offset:n},j?!0:f);Nw(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(_=I)}if((!T||!T.length)&&typeof y=="function"){var E=m&&m.length,S=y({xAxis:x?el(el({},x),{},{ticks:E?m:x.ticks}):void 0,width:t,height:r,offset:n},E?!0:f);Nw(Array.isArray(S),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof S,"]")),Array.isArray(S)&&(T=S)}return C.createElement("g",{className:"recharts-cartesian-grid"},C.createElement(dGe,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),C.createElement(hGe,$p({},a,{horizontalPoints:_})),C.createElement(mGe,$p({},a,{verticalPoints:T})),C.createElement(fGe,$p({},a,{offset:n,horizontalPoints:_,xAxis:x,yAxis:v})),C.createElement(AGe,$p({},a,{offset:n,verticalPoints:T,xAxis:x,yAxis:v})))}E2.displayName="CartesianGrid";function Qq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Hq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qq(Object(r),!0).forEach(function(n){vGe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vGe(e,t,r){return(t=bGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bGe(e){var t=yGe(e,"string");return typeof t=="symbol"?t:t+""}function yGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wGe={xAxis:{},yAxis:{},zAxis:{}},Yoe=tu({name:"cartesianAxis",initialState:wGe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=Hq(Hq({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:EGe,removeXAxis:NGe,addYAxis:CGe,removeYAxis:_Ge,addZAxis:dpt,removeZAxis:fpt,updateYAxisWidth:SGe}=Yoe.actions,kGe=Yoe.reducer,jGe=["children"],BGe=["dangerouslySetInnerHTML","ticks"];function Joe(e,t,r){return(t=TGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TGe(e){var t=IGe(e,"string");return typeof t=="symbol"?t:t+""}function IGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vO(){return vO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vO.apply(null,arguments)}function Zoe(e,t){if(e==null)return{};var r,n,a=FGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function FGe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function OGe(e){var t=Ga(),r=C.useMemo(()=>{var{children:s}=e,o=Zoe(e,jGe);return o},[e]),n=or(s=>$h(s,r.id)),a=r===n;return C.useEffect(()=>(t(EGe(r)),()=>{t(NGe(r))}),[r,t]),a?e.children:null}var DGe=e=>{var{xAxisId:t,className:r}=e,n=or(Qae),a=dc(),s="xAxis",o=or(m=>f1(m,s,t,a)),l=or(m=>Die(m,s,t,a)),c=or(m=>Tie(m,t)),u=or(m=>P7e(m,t));if(c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=e,h=Zoe(e,BGe);return C.createElement(Zm,vO({},h,{scale:o,x:u.x,y:u.y,width:c.width,height:c.height,className:bn("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:l}))},PGe=e=>{var t,r,n,a,s;return C.createElement(OGe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},C.createElement(DGe,e))};class Bg extends C.Component{render(){return C.createElement(PGe,this.props)}}Joe(Bg,"displayName","XAxis");Joe(Bg,"defaultProps",{allowDataOverflow:Oc.allowDataOverflow,allowDecimals:Oc.allowDecimals,allowDuplicatedCategory:Oc.allowDuplicatedCategory,height:Oc.height,hide:!1,mirror:Oc.mirror,orientation:Oc.orientation,padding:Oc.padding,reversed:Oc.reversed,scale:Oc.scale,tickCount:Oc.tickCount,type:Oc.type,xAxisId:0});var RGe=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,o=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+s,u=o+c+l+(r?n:0);return Math.round(u)}return 0},LGe=["dangerouslySetInnerHTML","ticks"];function ele(e,t,r){return(t=MGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MGe(e){var t=UGe(e,"string");return typeof t=="symbol"?t:t+""}function UGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bO(){return bO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bO.apply(null,arguments)}function QGe(e,t){if(e==null)return{};var r,n,a=HGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function HGe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function VGe(e){var t=Ga();return C.useEffect(()=>(t(CGe(e)),()=>{t(_Ge(e))}),[e,t]),null}var zGe=e=>{var t,{yAxisId:r,className:n,width:a,label:s}=e,o=C.useRef(null),l=C.useRef(null),c=or(Qae),u=dc(),d=Ga(),f="yAxis",h=or(_=>f1(_,f,r,u)),m=or(_=>Iie(_,r)),g=or(_=>R7e(_,r)),x=or(_=>Die(_,f,r,u));if(C.useLayoutEffect(()=>{var _;if(!(a!=="auto"||!m||FL(s)||C.isValidElement(s))){var T=o.current,j=T==null||(_=T.tickRefs)===null||_===void 0?void 0:_.current,{tickSize:I,tickMargin:E}=T.props,S=RGe({ticks:j,label:l.current,labelGapWithTick:5,tickSize:I,tickMargin:E});Math.round(m.width)!==Math.round(S)&&d(SGe({id:r,width:S}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,m==null?void 0:m.width,m,d,s,r,a]),m==null||g==null)return null;var{dangerouslySetInnerHTML:v,ticks:y}=e,w=QGe(e,LGe);return C.createElement(Zm,bO({},w,{ref:o,labelRef:l,scale:h,x:g.x,y:g.y,width:m.width,height:m.height,className:bn("recharts-".concat(f," ").concat(f),n),viewBox:c,ticks:x}))},$Ge=e=>{var t,r,n,a,s;return C.createElement(C.Fragment,null,C.createElement(VGe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),C.createElement(zGe,e))},GGe={allowDataOverflow:Dc.allowDataOverflow,allowDecimals:Dc.allowDecimals,allowDuplicatedCategory:Dc.allowDuplicatedCategory,hide:!1,mirror:Dc.mirror,orientation:Dc.orientation,padding:Dc.padding,reversed:Dc.reversed,scale:Dc.scale,tickCount:Dc.tickCount,type:Dc.type,width:Dc.width,yAxisId:0};class Tg extends C.Component{render(){return C.createElement($Ge,this.props)}}ele(Tg,"displayName","YAxis");ele(Tg,"defaultProps",GGe);var AI={exports:{}},hI={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vq;function qGe(){if(Vq)return hI;Vq=1;var e=Rb();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,s=e.useEffect,o=e.useMemo,l=e.useDebugValue;return hI.useSyncExternalStoreWithSelector=function(c,u,d,f,h){var m=a(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=o(function(){function v(j){if(!y){if(y=!0,w=j,j=f(j),h!==void 0&&g.hasValue){var I=g.value;if(h(I,j))return _=I}return _=j}if(I=_,r(w,j))return I;var E=f(j);return h!==void 0&&h(I,E)?(w=j,I):(w=j,_=E)}var y=!1,w,_,T=d===void 0?null:d;return[function(){return v(u())},T===null?void 0:function(){return v(T())}]},[u,d,f,h]);var x=n(c,m[0],m[1]);return s(function(){g.hasValue=!0,g.value=x},[x]),l(x),x},hI}var zq;function KGe(){return zq||(zq=1,AI.exports=qGe()),AI.exports}KGe();function WGe(e){e()}function XGe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){WGe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var $q={notify(){},get:()=>[]};function YGe(e,t){let r,n=$q,a=0,s=!1;function o(x){d();const v=n.subscribe(x);let y=!1;return()=>{y||(y=!0,v(),f())}}function l(){n.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return s}function d(){a++,r||(r=e.subscribe(c),n=XGe())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=$q)}function h(){s||(s=!0,d())}function m(){s&&(s=!1,f())}const g={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:m,getListeners:()=>n};return g}var JGe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ZGe=JGe(),eqe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",tqe=eqe(),rqe=()=>ZGe||tqe?C.useLayoutEffect:C.useEffect,nqe=rqe(),mI=Symbol.for("react-redux-context"),pI=typeof globalThis<"u"?globalThis:{};function aqe(){if(!C.createContext)return{};const e=pI[mI]??(pI[mI]=new Map);let t=e.get(C.createContext);return t||(t=C.createContext(null),e.set(C.createContext,t)),t}var sqe=aqe();function iqe(e){const{children:t,context:r,serverState:n,store:a}=e,s=C.useMemo(()=>{const c=YGe(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),o=C.useMemo(()=>a.getState(),[a]);nqe(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,o]);const l=r||sqe;return C.createElement(l.Provider,{value:s},t)}var oqe=iqe,lqe=(e,t)=>t,rM=dt([lqe,In,l1,Pi,Yie,Gh,UUe,Oi],$Ue),nM=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},tle=Wu("mouseClick"),rle=dE();rle.startListening({actionCreator:tle,effect:(e,t)=>{var r=e.payload,n=rM(t.getState(),nM(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(K7e({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var yO=Wu("mouseMove"),nle=dE();nle.startListening({actionCreator:yO,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=EL(n,n.tooltip.settings.shared),s=rM(n,nM(r));a==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch(zie({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(Vie()))}});function cqe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var Gq={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},ale=tu({name:"rootProps",initialState:Gq,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:Gq.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),uqe=ale.reducer,{updateOptions:dqe}=ale.actions,sle=tu({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:fqe}=sle.actions,Aqe=sle.reducer,ile=Wu("keyDown"),ole=Wu("focus"),aM=dE();aM.startListening({actionCreator:ile,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=Number(NL(a,h1(r))),l=Gh(r);if(s==="Enter"){var c=yS(r,"axis","hover",String(a.index));t.dispatch(AO({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:c}));return}var u=M7e(r),d=u==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,h=o+f*d;if(!(l==null||h>=l.length||h<0)){var m=yS(r,"axis","hover",String(h));t.dispatch(AO({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});aM.startListening({actionCreator:ole,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",o=yS(r,"axis","hover",String(s));t.dispatch(AO({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:o}))}}}});var Fu=Wu("externalEvent"),lle=dE();lle.startListening({actionCreator:Fu,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:BUe(r),activeDataKey:toe(r),activeIndex:Im(r),activeLabel:eoe(r),activeTooltipIndex:Im(r),isTooltipActive:TUe(r)};e.payload.handler(n,e.payload.reactEvent)}}});var hqe=dt([A1],e=>e.tooltipItemPayloads),mqe=dt([hqe,wE,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(l=>l.settings.dataKey===n);if(a!=null){var{positions:s}=a;if(s!=null){var o=t(s,r);return o}}}),cle=Wu("touchMove"),ule=dE();ule.startListening({actionCreator:cle,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=EL(n,n.tooltip.settings.shared);if(a==="axis"){var s=rM(n,nM({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(zie({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(a==="item"){var o,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(Mae),d=(o=c.getAttribute(Uae))!==null&&o!==void 0?o:void 0,f=mqe(t.getState(),u,d);t.dispatch(Hie({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var pqe=uae({brush:F$e,cartesianAxis:kGe,chartData:o9e,errorBars:Dze,graphicalItems:pVe,layout:FDe,legend:bPe,options:r9e,polarAxis:uHe,polarOptions:Aqe,referenceElements:U$e,rootProps:uqe,tooltip:W7e}),gqe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return aDe({reducer:pqe,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([rle.middleware,nle.middleware,aM.middleware,lle.middleware,ule.middleware]),devTools:{serialize:{replacer:cqe},name:"recharts-".concat(r)}})};function dle(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=dc(),s=C.useRef(null);if(a)return r;s.current==null&&(s.current=gqe(t,n));var o=p8;return C.createElement(oqe,{context:o,store:s.current},r)}function fle(e){var{layout:t,width:r,height:n,margin:a}=e,s=Ga(),o=dc();return C.useEffect(()=>{o||(s(BDe(t)),s(TDe({width:r,height:n})),s(jDe(a)))},[s,o,t,r,n,a]),null}function Ale(e){var t=Ga();return C.useEffect(()=>{t(dqe(e))},[t,e]),null}var xqe=["children"];function vqe(e,t){if(e==null)return{};var r,n,a=bqe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function bqe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function jS(){return jS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jS.apply(null,arguments)}var yqe={width:"100%",height:"100%"},wqe=C.forwardRef((e,t)=>{var r=C8(),n=_8(),a=Gae();if(!pb(r)||!pb(n))return null;var{children:s,otherAttributes:o,title:l,desc:c}=e,u,d;return typeof o.tabIndex=="number"?u=o.tabIndex:u=a?0:void 0,typeof o.role=="string"?d=o.role:d=a?"application":void 0,C.createElement(r8,jS({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:yqe,ref:t}),s)}),Eqe=e=>{var{children:t}=e,r=or(x4);if(!r)return null;var{width:n,height:a,y:s,x:o}=r;return C.createElement(r8,{width:n,height:a,x:o,y:s},t)},qq=C.forwardRef((e,t)=>{var{children:r}=e,n=vqe(e,xqe),a=dc();return a?C.createElement(Eqe,null,r):C.createElement(wqe,jS({ref:t},n),r)});function Nqe(){var e=Ga(),[t,r]=C.useState(null),n=or(lPe);return C.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;Zc(s)&&s!==n&&e(IDe(s))}},[t,e,n]),r}function Kq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cqe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Kq(Object(r),!0).forEach(function(n){_qe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _qe(e,t,r){return(t=Sqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sqe(e){var t=kqe(e,"string");return typeof t=="symbol"?t:t+""}function kqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jqe=C.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:m,onTouchMove:g,onTouchStart:x,style:v,width:y}=e,w=Ga(),[_,T]=C.useState(null),[j,I]=C.useState(null);u9e();var E=Nqe(),S=C.useCallback(P=>{E(P),typeof t=="function"&&t(P),T(P),I(P)},[E,t,T,I]),B=C.useCallback(P=>{w(tle(P)),w(Fu({handler:s,reactEvent:P}))},[w,s]),M=C.useCallback(P=>{w(yO(P)),w(Fu({handler:u,reactEvent:P}))},[w,u]),R=C.useCallback(P=>{w(Vie()),w(Fu({handler:d,reactEvent:P}))},[w,d]),k=C.useCallback(P=>{w(yO(P)),w(Fu({handler:f,reactEvent:P}))},[w,f]),D=C.useCallback(()=>{w(ole())},[w]),L=C.useCallback(P=>{w(ile(P.key))},[w]),Z=C.useCallback(P=>{w(Fu({handler:o,reactEvent:P}))},[w,o]),V=C.useCallback(P=>{w(Fu({handler:l,reactEvent:P}))},[w,l]),q=C.useCallback(P=>{w(Fu({handler:c,reactEvent:P}))},[w,c]),G=C.useCallback(P=>{w(Fu({handler:h,reactEvent:P}))},[w,h]),K=C.useCallback(P=>{w(Fu({handler:x,reactEvent:P}))},[w,x]),ee=C.useCallback(P=>{w(cle(P)),w(Fu({handler:g,reactEvent:P}))},[w,g]),W=C.useCallback(P=>{w(Fu({handler:m,reactEvent:P}))},[w,m]);return C.createElement(ooe.Provider,{value:_},C.createElement(Fne.Provider,{value:j},C.createElement("div",{className:bn("recharts-wrapper",n),style:Cqe({position:"relative",cursor:"default",width:y,height:a},v),onClick:B,onContextMenu:Z,onDoubleClick:V,onFocus:D,onKeyDown:L,onMouseDown:q,onMouseEnter:M,onMouseLeave:R,onMouseMove:k,onMouseUp:G,onTouchEnd:W,onTouchMove:ee,onTouchStart:K,ref:S},r)))}),Bqe=["children","className","width","height","style","compact","title","desc"];function Tqe(e,t){if(e==null)return{};var r,n,a=Iqe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Iqe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hle=C.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:s,style:o,compact:l,title:c,desc:u}=e,d=Tqe(e,Bqe),f=dl(d);return l?C.createElement(qq,{otherAttributes:f,title:c,desc:u},r):C.createElement(jqe,{className:n,style:o,width:a,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},C.createElement(qq,{otherAttributes:f,title:c,desc:u,ref:t},C.createElement(H$e,null,r)))}),Fqe=["width","height"];function wO(){return wO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wO.apply(null,arguments)}function Oqe(e,t){if(e==null)return{};var r,n,a=Dqe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Dqe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Pqe={top:5,right:5,bottom:5,left:5},Rqe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Pqe,reverseStackOrder:!1,syncMethod:"index"},Lqe=C.forwardRef(function(t,r){var n,a=Ju(t.categoricalChartProps,Rqe),{width:s,height:o}=a,l=Oqe(a,Fqe);if(!pb(s)||!pb(o))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,m={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return C.createElement(dle,{preloadedState:{options:m},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:c},C.createElement(Goe,{chartData:h.data}),C.createElement(fle,{width:s,height:o,layout:a.layout,margin:a.margin}),C.createElement(Ale,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),C.createElement(hle,wO({},l,{width:s,height:o,ref:r})))}),Mqe=["axis","item"],N2=C.forwardRef((e,t)=>C.createElement(Lqe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Mqe,tooltipPayloadSearcher:IL,categoricalChartProps:e,ref:t}));function Uqe(e){var t=Ga();return C.useEffect(()=>{t(fqe(e))},[t,e]),null}var Qqe=["width","height","layout"];function EO(){return EO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},EO.apply(null,arguments)}function Hqe(e,t){if(e==null)return{};var r,n,a=Vqe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Vqe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var zqe={top:5,right:5,bottom:5,left:5},$qe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:zqe,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},mle=C.forwardRef(function(t,r){var n,a=Ju(t.categoricalChartProps,$qe),{width:s,height:o,layout:l}=a,c=Hqe(a,Qqe);if(!pb(s)||!pb(o))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h}=t,m={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h,eventEmitter:void 0};return C.createElement(dle,{preloadedState:{options:m},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:u},C.createElement(Goe,{chartData:a.data}),C.createElement(fle,{width:s,height:o,layout:l,margin:a.margin}),C.createElement(Ale,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),C.createElement(Uqe,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),C.createElement(hle,EO({width:s,height:o},c,{ref:r})))}),Gqe=["item"],qqe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},sM=C.forwardRef((e,t)=>{var r=Ju(e,qqe);return C.createElement(mle,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Gqe,tooltipPayloadSearcher:IL,categoricalChartProps:r,ref:t})}),Kqe=["axis"],Wqe={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Xqe=C.forwardRef((e,t)=>{var r=Ju(e,Wqe);return C.createElement(mle,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Kqe,tooltipPayloadSearcher:IL,categoricalChartProps:r,ref:t})});const I0=["#0ea5e9","#22c55e","#f59e0b","#ef4444","#8b5cf6","#14b8a6","#a3e635","#f472b6"],Wq={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",dimension:"",subdimension:"",descripcion:"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:"",estado:"Pendiente",avance:0,enlaces:[]},xy="rounded-2xl border border-slate-100 dark:border-slate-800 bg-white/80 dark:bg-slate-900/60 shadow-sm backdrop-blur",ho="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-fuchsia-500/70 focus:border-fuchsia-500/70 transition",Bc="block text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-400 mb-2",gI="inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition",xI="bg-gradient-to-r from-fuchsia-600 to-rose-500 text-white shadow-sm",vI="bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200 hover:bg-slate-200/80 dark:hover:bg-slate-700",bC="rounded-2xl p-5 text-white shadow-md bg-gradient-to-br",Yqe="from-sky-500 to-indigo-500",Jqe="from-emerald-500 to-lime-500",Zqe="from-amber-500 to-rose-500",eKe="from-fuchsia-500 to-purple-600",bI={Pendiente:{badge:"bg-rose-50 text-rose-700 ring-1 ring-rose-200 dark:bg-rose-900/30 dark:text-rose-200 dark:ring-rose-800",icon:Gu,dot:"bg-rose-500"},"En Proceso":{badge:"bg-amber-50 text-amber-700 ring-1 ring-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:ring-amber-800",icon:dte,dot:"bg-amber-500"},Cumplida:{badge:"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-200 dark:ring-emerald-800",icon:es,dot:"bg-emerald-500"}},tKe=e=>{const t=bI[e].icon;return i.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold ${bI[e].badge}`,children:[i.jsx("span",{className:`h-2 w-2 rounded-full ${bI[e].dot}`}),i.jsx(t,{className:"h-4 w-4"})," ",e]})},rKe=()=>{var K,ee;const[e,t]=C.useState("registro"),[r,n]=C.useState([]),[a,s]=C.useState(Wq),[o,l]=C.useState(null),[c,u]=C.useState(null),[d,f]=C.useState(!1),[h,m]=C.useState(""),[g,x]=C.useState(""),[v,y]=C.useState(""),[w,_]=C.useState(""),T=C.useMemo(()=>JA[a.dimension]??[],[a.dimension]),j=C.useCallback(async()=>{f(!0);try{const W=await j6e();n(W)}catch(W){console.error(W),u("No se pudieron cargar las acciones.")}finally{f(!1)}},[]);C.useEffect(()=>{j()},[j]);const I=W=>{const{name:P,value:U}=W.target;s(z=>({...z,[P]:U}))},E=W=>{const P=W.split(",").map(U=>U.trim()).filter(Boolean);s(U=>({...U,indicadores:P}))},S=W=>{const P=W.split(",").map(U=>U.trim()).filter(Boolean);s(U=>({...U,enlaces:P}))},B=()=>{s(Wq),l(null),u(null)},M=async W=>{if(W.preventDefault(),!a.responsable||!a.dimension||!a.subdimension||!a.descripcion||!a.fechaCumplimiento){u("Responsable, dimensión, subdimensión, descripción y fecha de cumplimiento son obligatorios.");return}try{o?await T6e(o,a):await B6e(a),await j(),B(),t("seguimiento")}catch(P){console.error(P),u("Error al guardar la acción.")}},R=W=>{l(W.id),s({...W,enlaces:W.enlaces??[],indicadores:W.indicadores??[]}),window.scrollTo({top:0,behavior:"smooth"}),t("registro")},k=async W=>{confirm("¿Eliminar esta acción?")&&(await I6e(W),await j())},D=C.useMemo(()=>r.filter(W=>{const P=!h||W.responsable.toLowerCase().includes(h.toLowerCase())||W.descripcion.toLowerCase().includes(h.toLowerCase())||W.subdimension.toLowerCase().includes(h.toLowerCase()),U=!g||W.dimension===g,z=!v||W.subdimension===v,J=!w||W.estado===w;return P&&U&&z&&J}),[r,h,g,v,w]),L=C.useMemo(()=>{const W=new Map;return r.forEach(P=>W.set(P.dimension,(W.get(P.dimension)??0)+1)),Array.from(W.entries()).map(([P,U])=>({name:P,value:U}))},[r]),Z=C.useMemo(()=>{const W=new Map;return r.forEach(P=>W.set(P.estado,(W.get(P.estado)??0)+1)),Array.from(W.entries()).map(([P,U])=>({name:P,value:U}))},[r]),V=C.useMemo(()=>{const W=r.map(P=>P.avance??0);return W.length?Math.round(W.reduce((P,U)=>P+U,0)/W.length):0},[r]),q=C.useMemo(()=>{const W=new Map;return r.forEach(P=>W.set(P.subdimension,(W.get(P.subdimension)??0)+1)),Array.from(W.entries()).map(([P,U])=>({name:P,value:U})).sort((P,U)=>U.value-P.value).slice(0,6)},[r]),G=()=>{const W=["id","fechaRegistro","responsable","dimension","subdimension","descripcion","objetivos","indicadores","cobertura","fechaInicio","fechaCumplimiento","estado","avance","enlaces"],P=r.map(se=>[se.id,se.fechaRegistro,se.responsable,se.dimension,se.subdimension,se.descripcion.replace(/\n/g," "),se.objetivos??"",(se.indicadores??[]).join("|"),se.cobertura??"",se.fechaInicio??"",se.fechaCumplimiento,se.estado,se.avance??0,(se.enlaces??[]).join("|")]),U=[W.join(","),...P.map(se=>se.map(ie=>`"${String(ie).replace(/"/g,'""')}"`).join(","))].join(`
`),z=new Blob([U],{type:"text/csv;charset=utf-8"}),J=URL.createObjectURL(z),te=document.createElement("a");te.href=J,te.download=`pme_acciones_${new Date().toISOString().slice(0,10)}.csv`,te.click(),URL.revokeObjectURL(J)};return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-fuchsia-200/60 dark:border-fuchsia-700/30",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-fuchsia-500/20 via-rose-500/20 to-amber-400/20 blur-3xl"}),i.jsxs("div",{className:"relative p-6 md:p-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 bg-white/60 dark:bg-slate-900/40 backdrop-blur",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl md:text-3xl font-black bg-gradient-to-r from-fuchsia-600 via-rose-600 to-amber-600 bg-clip-text text-transparent flex items-center gap-3",children:[i.jsx(Jp,{className:"h-6 w-6 text-fuchsia-600"})," Seguimiento de Acciones (PME)"]}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(G2e,{className:"h-4 w-4"})," Registro, seguimiento y dashboard por Dimensión/Subdimensión."]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:j,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white/70 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-white",children:[i.jsx(mF,{className:"h-4 w-4"})," Refrescar"]}),i.jsxs("button",{onClick:G,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 to-rose-500 hover:opacity-90",children:[i.jsx(Eh,{className:"h-4 w-4"})," CSV"]})]})]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs("button",{onClick:()=>t("registro"),className:`${gI} ${e==="registro"?xI:vI}`,children:[i.jsx(xg,{className:"h-4 w-4"})," Registro"]}),i.jsxs("button",{onClick:()=>t("seguimiento"),className:`${gI} ${e==="seguimiento"?xI:vI}`,children:[i.jsx(Ov,{className:"h-4 w-4"})," Seguimiento"]}),i.jsxs("button",{onClick:()=>t("dashboard"),className:`${gI} ${e==="dashboard"?xI:vI}`,children:[i.jsx(Dwe,{className:"h-4 w-4"})," Dashboard"]})]}),e==="registro"&&i.jsx("div",{className:xy,children:i.jsxs("form",{onSubmit:M,className:"p-6 md:p-8 space-y-6",children:[c&&i.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-rose-200 bg-rose-50 p-3 text-rose-700 dark:bg-rose-900/30 dark:text-rose-200 dark:border-rose-800",children:[i.jsx(Gu,{className:"h-5 w-5"}),i.jsx("span",{children:c})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:Bc,children:"Fecha de Registro"}),i.jsxs("div",{className:"relative",children:[i.jsx(ic,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-500"}),i.jsx("input",{type:"date",name:"fechaRegistro",value:a.fechaRegistro,onChange:I,className:ho+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:Bc,children:"Responsable"}),i.jsxs("div",{className:"relative",children:[i.jsx(Yw,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-rose-500"}),i.jsx("input",{type:"text",name:"responsable",placeholder:"Nombre",value:a.responsable,onChange:I,className:ho+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:Bc,children:"Cobertura (niveles/cursos)"}),i.jsxs("div",{className:"relative",children:[i.jsx(lb,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-amber-500"}),i.jsx("input",{type:"text",name:"cobertura",placeholder:"2°A, 2°B, 3°Mecánica...",value:a.cobertura??"",onChange:I,className:ho+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:Bc,children:"Dimensión PME"}),i.jsxs("div",{className:"relative",children:[i.jsx(k2e,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),i.jsxs("select",{name:"dimension",value:a.dimension,onChange:I,className:ho+" pl-10",children:[i.jsx("option",{value:"",children:"Selecciona una dimensión"}),Object.keys(JA).map(W=>i.jsx("option",{value:W,children:W},W))]})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:Bc,children:"Subdimensión"}),i.jsxs("div",{className:"relative",children:[i.jsx(Kk,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-sky-500"}),i.jsxs("select",{name:"subdimension",value:a.subdimension,onChange:I,className:ho+" pl-10",disabled:!a.dimension,children:[i.jsx("option",{value:"",children:a.dimension?"Selecciona una subdimensión":"Primero elige una dimensión"}),T.map(W=>i.jsx("option",{value:W,children:W},W))]})]})]}),i.jsxs("div",{className:"md:col-span-3",children:[i.jsx("label",{className:Bc,children:"Descripción de la Acción"}),i.jsxs("div",{className:"relative",children:[i.jsx(Md,{className:"absolute left-3 top-3 h-4 w-4 text-fuchsia-500"}),i.jsx("textarea",{name:"descripcion",value:a.descripcion,onChange:I,rows:3,placeholder:"¿Qué se hará? ¿Dónde y con quién?",className:ho+" pl-10"})]})]}),i.jsxs("div",{className:"md:col-span-3",children:[i.jsx("label",{className:Bc,children:"Objetivos (opcional)"}),i.jsx("textarea",{name:"objetivos",value:a.objetivos??"",onChange:I,rows:2,placeholder:"Propósitos pedagógicos",className:ho})]}),i.jsxs("div",{children:[i.jsx("label",{className:Bc,children:"Indicadores (separados por coma)"}),i.jsx("input",{type:"text",value:(a.indicadores??[]).join(", "),onChange:W=>E(W.target.value),placeholder:"Cobertura OA, asistencia, resultados...",className:ho})]}),i.jsxs("div",{children:[i.jsx("label",{className:Bc,children:"Fecha de Inicio"}),i.jsxs("div",{className:"relative",children:[i.jsx(ic,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-violet-500"}),i.jsx("input",{type:"date",name:"fechaInicio",value:a.fechaInicio??"",onChange:I,className:ho+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:Bc,children:"Fecha de Cumplimiento"}),i.jsxs("div",{className:"relative",children:[i.jsx(ic,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),i.jsx("input",{type:"date",name:"fechaCumplimiento",value:a.fechaCumplimiento,onChange:I,className:ho+" pl-10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:Bc,children:"Estado"}),i.jsx("select",{name:"estado",value:a.estado,onChange:I,className:ho,children:uH.map(W=>i.jsx("option",{value:W,children:W},W))})]}),i.jsxs("div",{children:[i.jsx("label",{className:Bc,children:"Avance (%)"}),i.jsxs("div",{className:"relative",children:[i.jsx(__,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),i.jsx("input",{type:"number",min:0,max:100,name:"avance",value:a.avance??0,onChange:I,className:ho+" pl-10"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:Bc,children:"Enlaces de evidencia (separados por coma)"}),i.jsxs("div",{className:"relative",children:[i.jsx(gH,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),i.jsx("input",{type:"text",value:(a.enlaces??[]).join(", "),onChange:W=>S(W.target.value),placeholder:"https://..., https://...",className:ho+" pl-10"})]})]})]}),i.jsxs("div",{className:"flex items-center justify-end gap-3",children:[o&&i.jsx("button",{type:"button",onClick:B,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white border border-slate-200 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700",children:"Cancelar"}),i.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 via-rose-500 to-amber-500 hover:opacity-90",children:[o?i.jsx(Kc,{className:"h-4 w-4"}):i.jsx(Co,{className:"h-4 w-4"}),o?"Guardar cambios":"Registrar acción"]})]})]})}),e==="seguimiento"&&i.jsx("div",{className:xy,children:i.jsxs("div",{className:"p-4 md:p-6 space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"relative md:col-span-2",children:[i.jsx(Xb,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-600"}),i.jsx("input",{className:ho+" pl-10",placeholder:"Buscar por responsable, descripción o subdimensión...",value:h,onChange:W=>m(W.target.value)})]}),i.jsxs("select",{value:g,onChange:W=>{x(W.target.value),y("")},className:ho,children:[i.jsx("option",{value:"",children:"Todas las dimensiones"}),Object.keys(JA).map(W=>i.jsx("option",{value:W,children:W},W))]}),i.jsxs("select",{value:v,onChange:W=>y(W.target.value),className:ho,children:[i.jsx("option",{value:"",children:"Todas las subdimensiones"}),(JA[g]??Object.values(JA).flat()).map(W=>i.jsx("option",{value:W,children:W},W))]}),i.jsxs("select",{value:w,onChange:W=>_(W.target.value),className:ho,children:[i.jsx("option",{value:"",children:"Todos los estados"}),uH.map(W=>i.jsx("option",{value:W,children:W},W))]})]}),i.jsx("div",{className:"overflow-x-auto rounded-xl border border-slate-100 dark:border-slate-800",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[i.jsx("thead",{className:"bg-gradient-to-r from-fuchsia-50 to-rose-50 dark:from-slate-800 dark:to-slate-800",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-fuchsia-700 dark:text-fuchsia-300",children:"Responsable"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-rose-700 dark:text-rose-300",children:"Dimensión / Subdimensión"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-indigo-700 dark:text-indigo-300",children:"Descripción"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-amber-700 dark:text-amber-300",children:"Fechas"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-emerald-700 dark:text-emerald-300",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-sky-700 dark:text-sky-300",children:"Avance"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Acciones"})]})}),i.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800 bg-white dark:bg-slate-900/40",children:[D.map(W=>{var P,U;return i.jsxs("tr",{className:"hover:bg-fuchsia-50/50 dark:hover:bg-slate-800/60 transition",children:[i.jsx("td",{className:"px-4 py-4 align-top text-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-fuchsia-500 to-rose-500 text-white flex items-center justify-center font-bold shadow-sm",children:((U=(P=W.responsable)==null?void 0:P.slice(0,1))==null?void 0:U.toUpperCase())||"?"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:W.responsable}),i.jsx("div",{className:"text-xs text-slate-500",children:W.cobertura})]})]})}),i.jsxs("td",{className:"px-4 py-4 align-top text-sm",children:[i.jsx("div",{className:"font-semibold text-indigo-700 dark:text-indigo-300",children:W.dimension}),i.jsx("div",{className:"text-xs text-slate-500",children:W.subdimension})]}),i.jsxs("td",{className:"px-4 py-4 align-top text-sm max-w-md",children:[i.jsx("div",{className:"text-slate-700 dark:text-slate-200",children:W.descripcion}),W.enlaces&&W.enlaces.length>0&&i.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:W.enlaces.map((z,J)=>i.jsxs("a",{href:z,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-fuchsia-700 hover:text-fuchsia-900 dark:text-fuchsia-300",children:[i.jsx(gH,{className:"h-3.5 w-3.5"})," Evidencia ",J+1]},J))})]}),i.jsxs("td",{className:"px-4 py-4 align-top text-sm whitespace-nowrap",children:[i.jsxs("div",{className:"text-xs text-slate-500",children:["Reg: ",W.fechaRegistro||"-"]}),i.jsxs("div",{className:"text-xs text-slate-500",children:["Ini: ",W.fechaInicio||"-"]}),i.jsxs("div",{className:"text-xs font-semibold text-emerald-700 dark:text-emerald-300",children:["Fin: ",W.fechaCumplimiento]})]}),i.jsx("td",{className:"px-4 py-4 align-top text-center",children:tKe(W.estado)}),i.jsxs("td",{className:"px-4 py-4 align-top",children:[i.jsx("div",{className:"w-28 h-2.5 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-fuchsia-500 via-rose-500 to-amber-500",style:{width:`${Math.min(Math.max(W.avance??0,0),100)}%`}})}),i.jsxs("div",{className:"text-xs text-center mt-1",children:[W.avance??0,"%"]})]}),i.jsx("td",{className:"px-4 py-4 align-top text-center",children:i.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[i.jsx("button",{onClick:()=>R(W),className:"p-2 rounded-lg hover:bg-amber-50 dark:hover:bg-slate-800",title:"Editar",children:i.jsx(lR,{className:"h-5 w-5 text-amber-600"})}),i.jsx("button",{onClick:()=>k(W.id),className:"p-2 rounded-lg hover:bg-rose-50 dark:hover:bg-slate-800",title:"Eliminar",children:i.jsx(Is,{className:"h-5 w-5 text-rose-600"})})]})})]},W.id)}),D.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"px-4 py-12 text-center text-slate-500",children:"Sin registros"})})]})]})})]})}),e==="dashboard"&&i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"xl:col-span-3 grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:`${bC} ${Yqe}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(zc,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"Acciones totales"}),i.jsx("div",{className:"text-2xl font-black",children:r.length})]})]})}),i.jsx("div",{className:`${bC} ${Jqe}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(es,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"Cumplidas"}),i.jsx("div",{className:"text-2xl font-black",children:((K=Z.find(W=>W.name==="Cumplida"))==null?void 0:K.value)??0})]})]})}),i.jsx("div",{className:`${bC} ${Zqe}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(dte,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"En proceso"}),i.jsx("div",{className:"text-2xl font-black",children:((ee=Z.find(W=>W.name==="En Proceso"))==null?void 0:ee.value)??0})]})]})}),i.jsx("div",{className:`${bC} ${eKe}`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(__,{className:"h-10 w-10 opacity-90"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs uppercase/relaxed",children:"Avance promedio"}),i.jsxs("div",{className:"text-2xl font-black",children:[V,"%"]})]})]})})]}),i.jsxs("div",{className:xy+" p-5",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100",children:"Acciones por dimensión"})}),i.jsx("div",{className:"h-64",children:i.jsx(ih,{width:"100%",height:"100%",children:i.jsxs(N2,{data:L,children:[i.jsx(E2,{strokeDasharray:"3 3"}),i.jsx(Bg,{dataKey:"name",hide:!0}),i.jsx(Tg,{allowDecimals:!1}),i.jsx(sh,{}),i.jsx(_b,{dataKey:"value",children:L.map((W,P)=>i.jsx(Fm,{fill:I0[P%I0.length]},P))})]})})}),i.jsx("div",{className:"mt-2 grid grid-cols-1 gap-1",children:L.map((W,P)=>i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("span",{className:"inline-block h-3 w-3 rounded-sm",style:{background:I0[P%I0.length]}}),i.jsx("span",{className:"flex-1",children:W.name}),i.jsx("span",{className:"font-semibold",children:W.value})]},P))})]}),i.jsxs("div",{className:xy+" p-5",children:[i.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Distribución por estado"}),i.jsx("div",{className:"h-64",children:i.jsx(ih,{width:"100%",height:"100%",children:i.jsxs(sM,{children:[i.jsx(Q4,{data:Z,dataKey:"value",nameKey:"name",outerRadius:90,label:!0,children:Z.map((W,P)=>i.jsx(Fm,{fill:I0[P%I0.length]},P))}),i.jsx(n1,{}),i.jsx(sh,{})]})})})]}),i.jsxs("div",{className:xy+" p-5",children:[i.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Subdimensiones más trabajadas"}),i.jsxs("ul",{className:"space-y-2",children:[q.map((W,P)=>i.jsxs("li",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{background:I0[P%I0.length]}}),W.name]}),i.jsx("span",{className:"font-semibold",children:W.value})]},P)),q.length===0&&i.jsx("li",{className:"text-slate-500",children:"Sin datos"})]})]})]})]})},nKe="modulepreload",aKe=function(e){return"/"+e},Xq={},ac=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let o=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=o(r.map(u=>{if(u=aKe(u),u in Xq)return;Xq[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":nKe,d||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})};var Yq;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(Yq||(Yq={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jq;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(Jq||(Jq={}));var Zq;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Zq||(Zq={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eK=["user","model","function","system"];var tK;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(tK||(tK={}));var rK;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(rK||(rK={}));var nK;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(nK||(nK={}));var aK;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(aK||(aK={}));var Sw;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(Sw||(Sw={}));var sK;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(sK||(sK={}));var iK;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(iK||(iK={}));var oK;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(oK||(oK={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Rx extends rl{constructor(t,r){super(t),this.response=r}}class ple extends rl{constructor(t,r,n,a){super(t),this.status=r,this.statusText=n,this.errorDetails=a}}class Am extends rl{}class gle extends rl{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sKe="https://generativelanguage.googleapis.com",iKe="v1beta",oKe="0.24.1",lKe="genai-js";var Ig;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Ig||(Ig={}));class cKe{constructor(t,r,n,a,s){this.model=t,this.task=r,this.apiKey=n,this.stream=a,this.requestOptions=s}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||iKe;let s=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||sKe}/${n}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function uKe(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${lKe}/${oKe}`),t.join(" ")}async function dKe(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",uKe(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(a){throw new Am(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${a.message}`)}for(const[a,s]of n.entries()){if(a==="x-goog-api-key")throw new Am(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new Am(`Header name ${a} can only be set using the apiClient field`);r.append(a,s)}}return r}async function fKe(e,t,r,n,a,s){const o=new cKe(e,t,r,n,s);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},pKe(s)),{method:"POST",headers:await dKe(o),body:a})}}async function CE(e,t,r,n,a,s={},o=fetch){const{url:l,fetchOptions:c}=await fKe(e,t,r,n,a,s);return AKe(l,c,o)}async function AKe(e,t,r=fetch){let n;try{n=await r(e,t)}catch(a){hKe(a,e)}return n.ok||await mKe(n,e),n}function hKe(e,t){let r=e;throw r.name==="AbortError"?(r=new gle(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof ple||e instanceof Am||(r=new rl(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function mKe(e,t){let r="",n;try{const a=await e.json();r=a.error.message,a.error.details&&(r+=` ${JSON.stringify(a.error.details)}`,n=a.error.details)}catch{}throw new ple(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function pKe(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),E5(e.candidates[0]))throw new Rx(`${Q0(e)}`,e);return gKe(e)}else if(e.promptFeedback)throw new Rx(`Text not available. ${Q0(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),E5(e.candidates[0]))throw new Rx(`${Q0(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),lK(e)[0]}else if(e.promptFeedback)throw new Rx(`Function call not available. ${Q0(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),E5(e.candidates[0]))throw new Rx(`${Q0(e)}`,e);return lK(e)}else if(e.promptFeedback)throw new Rx(`Function call not available. ${Q0(e)}`,e)},e}function gKe(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const o of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)o.text&&s.push(o.text),o.executableCode&&s.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&s.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function lK(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const o of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)o.functionCall&&s.push(o.functionCall);if(s.length>0)return s}const xKe=[Sw.RECITATION,Sw.SAFETY,Sw.LANGUAGE];function E5(e){return!!e.finishReason&&xKe.includes(e.finishReason)}function Q0(e){var t,r,n;let a="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)a+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(a+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const s=e.candidates[0];E5(s)&&(a+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(a+=`: ${s.finishMessage}`))}return a}function C2(e){return this instanceof C2?(this.v=e,this):new C2(e)}function vKe(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,s=[];return a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a;function o(h){n[h]&&(a[h]=function(m){return new Promise(function(g,x){s.push([h,m,g,x])>1||l(h,m)})})}function l(h,m){try{c(n[h](m))}catch(g){f(s[0][3],g)}}function c(h){h.value instanceof C2?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){l("next",h)}function d(h){l("throw",h)}function f(h,m){h(m),s.shift(),s.length&&l(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cK=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function bKe(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=EKe(t),[n,a]=r.tee();return{stream:wKe(n),response:yKe(a)}}async function yKe(e){const t=[],r=e.getReader();for(;;){const{done:n,value:a}=await r.read();if(n)return iM(NKe(t));t.push(a)}}function wKe(e){return vKe(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:a}=yield C2(r.read());if(a)break;yield yield C2(iM(n))}})}function EKe(e){const t=e.getReader();return new ReadableStream({start(n){let a="";return s();function s(){return t.read().then(({value:o,done:l})=>{if(l){if(a.trim()){n.error(new rl("Failed to parse stream"));return}n.close();return}a+=o;let c=a.match(cK),u;for(;c;){try{u=JSON.parse(c[1])}catch{n.error(new rl(`Error parsing JSON response: "${c[1]}"`));return}n.enqueue(u),a=a.substring(c[0].length),c=a.match(cK)}return s()}).catch(o=>{let l=o;throw l.stack=o.stack,l.name==="AbortError"?l=new gle("Request aborted when reading from the stream"):l=new rl("Error reading from the stream"),l})}}})}function NKe(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let a=0;for(const s of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[a]||(r.candidates[a]={index:a}),r.candidates[a].citationMetadata=s.citationMetadata,r.candidates[a].groundingMetadata=s.groundingMetadata,r.candidates[a].finishReason=s.finishReason,r.candidates[a].finishMessage=s.finishMessage,r.candidates[a].safetyRatings=s.safetyRatings,s.content&&s.content.parts){r.candidates[a].content||(r.candidates[a].content={role:s.content.role||"user",parts:[]});const o={};for(const l of s.content.parts)l.text&&(o.text=l.text),l.functionCall&&(o.functionCall=l.functionCall),l.executableCode&&(o.executableCode=l.executableCode),l.codeExecutionResult&&(o.codeExecutionResult=l.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),r.candidates[a].content.parts.push(o)}a++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xle(e,t,r,n){const a=await CE(t,Ig.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return bKe(a)}async function vle(e,t,r,n){const s=await(await CE(t,Ig.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:iM(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ble(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function _2(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return CKe(t)}function CKe(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,a=!1;for(const s of e)"functionResponse"in s?(r.parts.push(s),a=!0):(t.parts.push(s),n=!0);if(n&&a)throw new rl("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new rl("No content is provided for sending chat message.");return n?t:r}function _Ke(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const a=e.generateContentRequest!=null;if(e.contents){if(a)throw new Am("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(a)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const s=_2(e);n.contents=[s]}return{generateContentRequest:n}}function uK(e){let t;return e.contents?t=e:t={contents:[_2(e)]},e.systemInstruction&&(t.systemInstruction=ble(e.systemInstruction)),t}function SKe(e){return typeof e=="string"||Array.isArray(e)?{content:_2(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dK=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],kKe={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function jKe(e){let t=!1;for(const r of e){const{role:n,parts:a}=r;if(!t&&n!=="user")throw new rl(`First content should be with role 'user', got ${n}`);if(!eK.includes(n))throw new rl(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(eK)}`);if(!Array.isArray(a))throw new rl("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new rl("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const l of a)for(const c of dK)c in l&&(s[c]+=1);const o=kKe[n];for(const l of dK)if(!o.includes(l)&&s[l]>0)throw new rl(`Content with role '${n}' can't contain '${l}' part`);t=!0}}function fK(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AK="SILENT_ERROR";class BKe{constructor(t,r,n,a={}){this.model=r,this.params=n,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(jKe(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,a,s,o,l,c;await this._sendPromise;const u=_2(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r);let h;return this._sendPromise=this._sendPromise.then(()=>vle(this._apiKey,this.model,d,f)).then(m=>{var g;if(fK(m.response)){this._history.push(u);const x=Object.assign({parts:[],role:"model"},(g=m.response.candidates)===null||g===void 0?void 0:g[0].content);this._history.push(x)}else{const x=Q0(m.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}h=m}).catch(m=>{throw this._sendPromise=Promise.resolve(),m}),await this._sendPromise,h}async sendMessageStream(t,r={}){var n,a,s,o,l,c;await this._sendPromise;const u=_2(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r),h=xle(this._apiKey,this.model,d,f);return this._sendPromise=this._sendPromise.then(()=>h).catch(m=>{throw new Error(AK)}).then(m=>m.response).then(m=>{if(fK(m)){this._history.push(u);const g=Object.assign({},m.candidates[0].content);g.role||(g.role="model"),this._history.push(g)}else{const g=Q0(m);g&&console.warn(`sendMessageStream() was unsuccessful. ${g}. Inspect response object for details.`)}}).catch(m=>{m.message!==AK&&console.error(m)}),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TKe(e,t,r,n){return(await CE(t,Ig.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IKe(e,t,r,n){return(await CE(t,Ig.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function FKe(e,t,r,n){const a=r.requests.map(o=>Object.assign(Object.assign({},o),{model:t}));return(await CE(t,Ig.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hK{constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=ble(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const a=uK(t),s=Object.assign(Object.assign({},this._requestOptions),r);return vle(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}async generateContentStream(t,r={}){var n;const a=uK(t),s=Object.assign(Object.assign({},this._requestOptions),r);return xle(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}startChat(t){var r;return new BKe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=_Ke(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),r);return TKe(this.apiKey,this.model,n,a)}async embedContent(t,r={}){const n=SKe(t),a=Object.assign(Object.assign({},this._requestOptions),r);return IKe(this.apiKey,this.model,n,a)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return FKe(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new rl("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new hK(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new Am("Cached content must contain a `name` field.");if(!t.model)throw new Am("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const o of a)if(r!=null&&r[o]&&t[o]&&(r==null?void 0:r[o])!==t[o]){if(o==="model"){const l=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(l===c)continue}throw new Am(`Different value for "${o}" specified in modelParams (${r[o]}) and cachedContent (${t[o]})`)}const s=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new hK(this.apiKey,s,n)}}const H4="presentacionesDidacticas",OKe=async(e,t)=>{const r=rr(pt(Er,H4)),n={...e,id:r.id,userId:t,fechaCreacion:new Date().toISOString(),estado:"generando"};return await yi(r,n),r.id},mK=async(e,t)=>{const r=rr(Er,H4,e);await Bl(r,t)},DKe=async e=>{await ka(rr(Er,H4,e))},PKe=(e,t)=>{const r=Vt(pt(Er,H4),wr("userId","==",e),cr("fechaCreacion","desc"));return hr(r,n=>{const a=n.docs.map(s=>s.data());t(a)})},RKe=async e=>{let t=null;try{const r=Hg.currentUser;if(!r)throw new Error("Usuario no autenticado. Debe iniciar sesión para generar presentaciones.");console.log("Estado de autenticación:",{isLoggedIn:!!r,uid:r.uid,email:r.email});const n=await r.getIdToken(!0);console.log("Token actualizado correctamente, longitud:",n.length);const a=M0(tR,"generateSlides"),s={tema:e.tema,asignatura:e.asignatura,objetivosAprendizaje:e.objetivosAprendizaje,curso:e.curso,numDiapositivas:e.numDiapositivas,estilo:e.estilo,incluirImagenes:e.incluirImagenes,contenidoFuente:e.contenidoFuente||"",enlaces:e.enlaces||[],planificacionId:e.planificacionId,incluirActividades:!0,incluirEvaluacion:!0,formatoPedagogico:!0,userId:r.uid};t=await OKe({...e,userId:r.uid,fechaCreacion:new Date().toISOString(),estado:"generando",urlPresentacion:""},r.uid),console.log("Presentación guardada con ID:",t),console.log("Enviando solicitud a generateSlides con usuario:",r.uid),console.log("Datos enviados:",s);const o=await a(s);console.log("Respuesta de función:",o);const l=o.data;if(l.presentacionId&&l.url)try{const c={estado:"completada",urlPresentacion:l.url};l.demoMode&&(c.mensajeError="NOTA: Esta es una versión de demostración. La presentación no existe realmente."),await mK(t,c)}catch(c){console.warn("Error al actualizar la presentación en Firestore:",c)}return l}catch(r){if(console.error("Error al generar presentación:",r),console.error("Código:",r==null?void 0:r.code,"Mensaje:",r==null?void 0:r.message,"Detalles:",r==null?void 0:r.details),t)try{await mK(t,{estado:"error",mensajeError:(r==null?void 0:r.message)||"Error desconocido al generar la presentación"}),console.warn(`Presentación ${t} marcada como fallida`)}catch(n){console.error("Error al actualizar el estado de la presentación:",n)}throw r}},yI=async()=>{var t,r,n,a;const e=Hg.currentUser;if(!e)throw new Error("Usuario no autenticado. Debe iniciar sesión para verificar la autorización.");try{const s=await e.getIdToken(),o=await fetch("https://us-central1-planificador-145df.cloudfunctions.net/checkGoogleSlidesAuth",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({})});if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);const l=await o.json();return{isAuthorized:l.isAuthorized||!1,message:l.message||"Estado de autorización desconocido"}}catch(s){if(console.error("Error al verificar autorización de Google Slides:",s),(t=s.message)!=null&&t.includes("cors")||(r=s.message)!=null&&r.includes("blocked")||(n=s.message)!=null&&n.includes("CORS")||(a=s.message)!=null&&a.includes("fetch")){console.warn("Error de red detectado, usando método alternativo para verificar autorización");try{const o=Vt(pt(Er,"userTokens"),wr("userId","==",e.uid)),l=await mn(o);return{isAuthorized:!l.empty,message:l.empty?"Usuario no ha autorizado Google Slides (verificación directa)":"Usuario autorizado para Google Slides (verificación directa)"}}catch(o){return console.error("Error en verificación alternativa:",o),{isAuthorized:!1,message:"Error al verificar autorización"}}}return{isAuthorized:!1,message:`Error al verificar autorización: ${s.message||"Error desconocido"}`}}},LKe=()=>{const[e,t]=C.useState(!1),[r,n]=C.useState(null),a=async()=>{t(!0);try{const o=await M0(tR,"testGemini")();n(o.data)}catch(s){console.error("Error calling testGemini:",s),n({success:!1,error:s.message||"Error desconocido",type:"client_error"})}t(!1)};return i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-2xl mx-auto",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"🧪 Prueba de Gemini AI"}),i.jsx("button",{onClick:a,disabled:e,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50 mb-4",children:e?"Probando...":"Probar Gemini 1.5 Pro"}),r&&i.jsxs("div",{className:"bg-gray-100 p-4 rounded",children:[i.jsx("h4",{className:"font-semibold mb-2",children:"Resultado:"}),i.jsx("pre",{className:"text-sm overflow-auto max-h-96",children:JSON.stringify(r,null,2)}),r.success?i.jsx("div",{className:"mt-2 text-green-600",children:"✅ Gemini AI está funcionando correctamente"}):i.jsxs("div",{className:"mt-2 text-red-600",children:["❌ Problema detectado: ",r.error]})]})]})},MKe=({estilo:e,tema:t="Ejemplo de Presentación"})=>{const n=(()=>{switch(e){case"sobrio":return{colores:{fondo:"bg-slate-100",fondoDiapo:"bg-white",titulo:"text-slate-800",texto:"text-slate-600",acento:"bg-slate-200"},fuentes:{titulo:"font-serif",texto:"font-sans"},iconos:"🎭",descripcion:"Elegante y minimalista, balanceando profesionalismo con claridad pedagógica",ejemplo:["Título principal en fuente serif","Contenido organizado y claro","Paleta de colores neutros"]};case"visual":return{colores:{fondo:"bg-blue-50",fondoDiapo:"bg-white",titulo:"text-blue-800",texto:"text-slate-600",acento:"bg-blue-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"🎨",descripcion:"Dinámico y colorido, con énfasis en elementos gráficos e infografías",ejemplo:["Mayor uso de elementos visuales","Diagramas y representaciones gráficas","Paleta de colores vibrantes"]};case"academico":return{colores:{fondo:"bg-amber-50",fondoDiapo:"bg-white",titulo:"text-amber-800",texto:"text-slate-700",acento:"bg-amber-100"},fuentes:{titulo:"font-serif",texto:"font-serif"},iconos:"📚",descripcion:"Formal y riguroso, con énfasis en conceptos teóricos",ejemplo:["Estructura académica formal","Referencias y citas bibliográficas","Énfasis en conceptos teóricos"]};case"interactivo":return{colores:{fondo:"bg-green-50",fondoDiapo:"bg-white",titulo:"text-green-800",texto:"text-slate-600",acento:"bg-green-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"🤝",descripcion:"Participativo y colaborativo, con múltiples actividades",ejemplo:["Preguntas y actividades prácticas","Espacios para participación","Dinámicas grupales sugeridas"]};case"profesional":return{colores:{fondo:"bg-indigo-50",fondoDiapo:"bg-white",titulo:"text-indigo-800",texto:"text-slate-600",acento:"bg-indigo-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"💼",descripcion:"Corporativo y práctico, enfocado en aplicaciones reales",ejemplo:["Diseño corporativo y estructurado","Casos de estudio prácticos","Aplicaciones en contexto laboral"]};case"creativo":return{colores:{fondo:"bg-purple-50",fondoDiapo:"bg-white",titulo:"text-purple-800",texto:"text-slate-600",acento:"bg-purple-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"💡",descripcion:"Innovador y atractivo, estimula la imaginación",ejemplo:["Diseño creativo no convencional","Elementos visuales llamativos","Enfoque innovador del contenido"]};case"minimalista":return{colores:{fondo:"bg-gray-50",fondoDiapo:"bg-white",titulo:"text-gray-800",texto:"text-gray-600",acento:"bg-gray-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"⚪",descripcion:"Simple y esencial, centrado en lo más importante",ejemplo:["Diseño muy simplificado","Amplio espacio en blanco","Solo información esencial"]};default:return{colores:{fondo:"bg-slate-100",fondoDiapo:"bg-white",titulo:"text-slate-800",texto:"text-slate-600",acento:"bg-slate-200"},fuentes:{titulo:"font-serif",texto:"font-sans"},iconos:"🎭",descripcion:"Elegante y minimalista, balanceando profesionalismo con claridad pedagógica",ejemplo:["Título principal en fuente serif","Contenido organizado y claro","Paleta de colores neutros"]}}})();return i.jsxs("div",{className:`p-4 rounded-lg ${n.colores.fondo} transition-all`,children:[i.jsxs("h3",{className:"text-lg font-medium mb-2",children:["Vista previa: Estilo ",e]}),i.jsx("p",{className:"text-sm text-gray-500 mb-3",children:n.descripcion}),i.jsxs("div",{className:"shadow-md rounded-lg overflow-hidden",children:[i.jsxs("div",{className:`p-4 ${n.colores.fondoDiapo} border-b border-gray-200`,children:[i.jsx("h4",{className:`${n.fuentes.titulo} ${n.colores.titulo} text-lg font-bold mb-2`,children:t}),i.jsxs("div",{className:`${n.fuentes.texto} ${n.colores.texto} text-sm space-y-2`,children:[i.jsx("p",{children:"Diapositiva de título con subtítulo"}),i.jsx("div",{className:`w-2/3 h-2 ${n.colores.acento} rounded mt-2`})]})]}),i.jsxs("div",{className:`p-4 ${n.colores.fondoDiapo}`,children:[i.jsx("h4",{className:`${n.fuentes.titulo} ${n.colores.titulo} text-md font-bold mb-2`,children:"Características principales"}),i.jsx("ul",{className:`${n.fuentes.texto} ${n.colores.texto} text-xs space-y-1 list-disc pl-4`,children:n.ejemplo.map((a,s)=>i.jsx("li",{children:a},s))}),i.jsx("div",{className:"flex justify-end mt-2",children:i.jsx("span",{className:"text-lg",children:n.iconos})})]})]})]})},UKe=({userId:e,planificaciones:t})=>{const[r,n]=C.useState("presentaciones"),[a,s]=C.useState(null),[o,l]=C.useState({tema:"",objetivosAprendizaje:[],numDiapositivas:8,estilo:"sobrio",incluirImagenes:!0,incluirActividades:!0,incluirEvaluacion:!0,formatoPedagogico:!0,contenidoFuente:"",enlaces:""}),[c,u]=C.useState(!1),[d,f]=C.useState([]),[h,m]=C.useState(!1),[g,x]=C.useState(!1),[v,y]=C.useState(null),[w,_]=C.useState({isAuthorized:!1,message:"Verificando autorización...",checking:!0});C.useEffect(()=>e?PKe(e,D=>{f(D)}):void 0,[e]),C.useEffect(()=>{const k=async()=>{if(e)try{_(q=>({...q,checking:!0}));const V=await yI();_({isAuthorized:V.isAuthorized,message:V.message,checking:!1})}catch(V){_({isAuthorized:!1,message:`Error: ${V.message||"No se pudo verificar la autorización"}`,checking:!1})}};k();const D=setTimeout(()=>{_(V=>V.checking?{isAuthorized:!1,message:"Timeout al verificar autorización",checking:!1}:V)},1e4);if(new URLSearchParams(window.location.search).get("auth")==="success"){const V=setTimeout(()=>{k()},2e3);return()=>{clearTimeout(V),clearTimeout(D)}}return()=>clearTimeout(D)},[e]),C.useEffect(()=>{const k=async()=>{if(new URLSearchParams(window.location.search).get("auth")==="success"&&!w.isAuthorized)try{_(V=>({...V,checking:!0}));const Z=await yI();_({isAuthorized:Z.isAuthorized,message:Z.message,checking:!1})}catch(Z){_({isAuthorized:!1,message:`Error: ${Z.message||"No se pudo verificar la autorización"}`,checking:!1})}};return window.addEventListener("popstate",k),()=>window.removeEventListener("popstate",k)},[w.isAuthorized]),C.useEffect(()=>{a&&("nombreUnidad"in a?l(k=>({...k,tema:a.nombreUnidad})):"nombreClase"in a&&l(k=>({...k,tema:a.nombreClase})))},[a]);const T=()=>{var k;if(!a)return[];if("lecciones"in a){const D=[];return(k=a.lecciones)==null||k.forEach(L=>{L.objetivosAprendizaje&&!D.includes(L.objetivosAprendizaje)&&D.push(L.objetivosAprendizaje)}),D}else if(a.detalleLeccionOrigen)return[a.detalleLeccionOrigen.objetivosAprendizaje];return[]},j=k=>{const{name:D,value:L,type:Z}=k.target;if(Z==="checkbox"){const V=k.target.checked;l(q=>({...q,[D]:V}))}else l(V=>({...V,[D]:L}))},I=k=>{const D=Array.from(k.target.selectedOptions,L=>L.value);l(L=>({...L,objetivosAprendizaje:D}))},E=async k=>{if(k.preventDefault(),!a){y("Debes seleccionar una planificación");return}if(o.objetivosAprendizaje.length===0){y("Debes seleccionar al menos un objetivo de aprendizaje");return}y(null),x(!0);try{const D={planificacionId:a.id,tema:o.tema,curso:a.nivel,asignatura:a.asignatura,objetivosAprendizaje:o.objetivosAprendizaje,numDiapositivas:o.numDiapositivas,estilo:o.estilo,incluirImagenes:o.incluirImagenes,contenidoFuente:o.contenidoFuente,enlaces:o.enlaces?o.enlaces.split(/[\s,]+/).filter(Boolean):[]};console.log("Datos para presentación:",D);const L=await RKe({...D,userId:e});console.log("Resultado de la función:",L),L&&L.url&&console.log("Presentación generada:",L.url)}catch(D){console.error("Error al generar presentación:",D);const L=(D==null?void 0:D.message)||"Error desconocido",Z=(D==null?void 0:D.code)||"unknown";y(`Error (${Z}): ${L}`)}finally{x(!1)}},S=async k=>{if(window.confirm("¿Estás seguro de que deseas eliminar esta presentación?"))try{m(!0),await DKe(k)}catch(D){console.error("Error al eliminar presentación:",D),y("Error al eliminar la presentación")}finally{m(!1)}},B=()=>i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Generar Presentación con IA"}),i.jsxs("form",{onSubmit:E,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Seleccionar Planificación"}),i.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",value:(a==null?void 0:a.id)||"",onChange:k=>{const D=t.find(L=>L.id===k.target.value);s(D||null)},required:!0,children:[i.jsx("option",{value:"",children:"Seleccione una planificación"}),i.jsx("optgroup",{label:"Unidades",children:t.filter(k=>k.tipo==="Unidad").map(k=>i.jsxs("option",{value:k.id,children:[k.tipo==="Unidad"?k.nombreUnidad:""," - ",k.asignatura," (",k.nivel,")"]},k.id))}),i.jsx("optgroup",{label:"Clases",children:t.filter(k=>k.tipo==="Clase").map(k=>i.jsxs("option",{value:k.id,children:[k.tipo==="Clase"?k.nombreClase:""," - ",k.asignatura," (",k.nivel,")"]},k.id))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tema"}),i.jsx("input",{type:"text",name:"tema",value:o.tema,onChange:j,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Objetivos de Aprendizaje (selecciona al menos uno)"}),i.jsx("select",{multiple:!0,name:"objetivosAprendizaje",value:o.objetivosAprendizaje,onChange:I,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",size:3,required:!0,children:T().map((k,D)=>i.jsx("option",{value:k,children:k},D))}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Mantén presionado Ctrl (o Cmd) para seleccionar múltiples opciones"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nº de diapositivas"}),i.jsx("input",{type:"number",name:"numDiapositivas",value:o.numDiapositivas,onChange:j,min:4,max:20,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estilo de Presentación"}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 mt-2",children:[i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="sobrio"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"sobrio"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:"🎭"})}),i.jsx("span",{className:"font-medium",children:"Sobrio"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Elegante y minimalista"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="visual"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"visual"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:"🎨"})}),i.jsx("span",{className:"font-medium",children:"Visual"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Colorido y gráfico"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="academico"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"academico"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:"📚"})}),i.jsx("span",{className:"font-medium",children:"Académico"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Formal y riguroso"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="interactivo"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"interactivo"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:"🤝"})}),i.jsx("span",{className:"font-medium",children:"Interactivo"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Participativo y dinámico"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="profesional"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"profesional"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:"💼"})}),i.jsx("span",{className:"font-medium",children:"Profesional"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Corporativo y práctico"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="creativo"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"creativo"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:"💡"})}),i.jsx("span",{className:"font-medium",children:"Creativo"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Innovador y atractivo"})]})}),i.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${o.estilo==="minimalista"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(k=>({...k,estilo:"minimalista"})),children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-2xl",children:"⚪"})}),i.jsx("span",{className:"font-medium",children:"Minimalista"}),i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Simple y esencial"})]})})]}),i.jsxs("button",{type:"button",onClick:()=>u(!0),className:"mt-3 w-full flex items-center justify-center gap-2 py-2 text-sm font-medium text-indigo-700 bg-indigo-100 rounded-md hover:bg-indigo-200 dark:bg-indigo-900/30 dark:text-indigo-300 dark:hover:bg-indigo-800/40 transition-colors",children:[i.jsx(cte,{className:"w-4 h-4"}),i.jsx("span",{children:"Ver ejemplo del estilo seleccionado"})]}),c&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-auto",children:[i.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[i.jsxs("h3",{className:"text-lg font-medium",children:["Vista previa de estilo: ",o.estilo]}),i.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:i.jsx(Nh,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-5",children:[i.jsx(MKe,{estilo:o.estilo,tema:o.tema||"Tema de la presentación"}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("h4",{className:"font-medium mb-2",children:["Características del estilo ",o.estilo]}),i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[o.estilo==="sobrio"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseño elegante y profesional"}),i.jsx("li",{children:"Colores neutros y tipografía clásica"}),i.jsx("li",{children:"Énfasis en la claridad y simplicidad"}),i.jsx("li",{children:"Ideal para presentaciones formales"})]}),o.estilo==="visual"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseño colorido y dinámico"}),i.jsx("li",{children:"Mayor uso de gráficos e imágenes"}),i.jsx("li",{children:"Énfasis en elementos visuales e infografías"}),i.jsx("li",{children:"Ideal para mantener la atención visual"})]}),o.estilo==="academico"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseño formal y riguroso"}),i.jsx("li",{children:"Espacio para citas y referencias"}),i.jsx("li",{children:"Énfasis en conceptos teóricos"}),i.jsx("li",{children:"Ideal para contenido académico complejo"})]}),o.estilo==="interactivo"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseño participativo"}),i.jsx("li",{children:"Incluye actividades y preguntas"}),i.jsx("li",{children:"Énfasis en la participación activa"}),i.jsx("li",{children:"Ideal para clases dinámicas"})]}),o.estilo==="profesional"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseño corporativo"}),i.jsx("li",{children:"Elementos de casos prácticos"}),i.jsx("li",{children:"Énfasis en aplicaciones reales"}),i.jsx("li",{children:"Ideal para formación profesional"})]}),o.estilo==="creativo"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseño no convencional y llamativo"}),i.jsx("li",{children:"Elementos visuales originales"}),i.jsx("li",{children:"Énfasis en despertar la imaginación"}),i.jsx("li",{children:"Ideal para temas creativos o artísticos"})]}),o.estilo==="minimalista"&&i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Diseño extremadamente simplificado"}),i.jsx("li",{children:"Amplio espacio en blanco"}),i.jsx("li",{children:"Énfasis en lo esencial"}),i.jsx("li",{children:"Ideal para conceptos claros y concisos"})]})]})]})]}),i.jsx("div",{className:"p-4 bg-gray-100 dark:bg-slate-700 flex justify-end",children:i.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Cerrar vista previa"})})]})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"incluirImagenes",name:"incluirImagenes",checked:o.incluirImagenes,onChange:k=>l(D=>({...D,incluirImagenes:k.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirImagenes",className:"text-sm text-gray-700 dark:text-gray-300",children:"🖼️ Incluir sugerencias para imágenes educativas"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"incluirActividades",name:"incluirActividades",checked:o.incluirActividades||!1,onChange:k=>l(D=>({...D,incluirActividades:k.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirActividades",className:"text-sm text-gray-700 dark:text-gray-300",children:"✏️ Incluir actividades y ejercicios prácticos"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"incluirEvaluacion",name:"incluirEvaluacion",checked:o.incluirEvaluacion||!1,onChange:k=>l(D=>({...D,incluirEvaluacion:k.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirEvaluacion",className:"text-sm text-gray-700 dark:text-gray-300",children:"📝 Incluir diapositiva de evaluación/reflexión"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"formatoPedagogico",name:"formatoPedagogico",checked:o.formatoPedagogico||!0,onChange:k=>l(D=>({...D,formatoPedagogico:k.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"formatoPedagogico",className:"text-sm text-gray-700 dark:text-gray-300",children:"📚 Aplicar estructura pedagógica avanzada"})]})]}),i.jsxs("div",{className:"hidden",children:[i.jsx("input",{type:"checkbox",id:"incluirImagenesOld",name:"incluirImagenesOld",checked:o.incluirImagenes,onChange:k=>l(D=>({...D,incluirImagenes:k.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"incluirImagenesOld",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Incluir imágenes libres de derechos"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Texto/recursos fuente (opcional)"}),i.jsx("textarea",{name:"contenidoFuente",value:o.contenidoFuente,onChange:j,rows:3,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",placeholder:"Pega aquí cualquier contenido de referencia para la presentación..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Enlaces (opcional)"}),i.jsx("input",{type:"text",name:"enlaces",value:o.enlaces,onChange:j,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",placeholder:"URLs separadas por comas o espacios"})]}),v&&i.jsx("div",{className:"text-red-500 text-sm p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:v}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:g||!a,className:"w-full flex items-center justify-center gap-2 p-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:g?i.jsxs(i.Fragment,{children:[i.jsx(wl,{className:"w-4 h-4 animate-spin"}),"Generando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(hF,{className:"w-4 h-4"}),"Generar Presentación"]})})})]})]})}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Mis Presentaciones"}),i.jsx("div",{className:"space-y-4",children:h?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(wl,{className:"w-8 h-8 animate-spin text-indigo-500"})}):d.length===0?i.jsxs("div",{className:"text-center py-8 space-y-4",children:[i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No has generado presentaciones todavía"}),i.jsx("div",{className:"text-sm",children:w.checking?i.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[i.jsx(wl,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Verificando autorización..."})]}):i.jsxs("div",{className:`flex items-center justify-center gap-2 ${w.isAuthorized?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400"}`,children:[i.jsx("span",{children:w.isAuthorized?"✅":"⚠️"}),i.jsx("span",{children:w.message})]})}),!w.checking&&!w.isAuthorized&&i.jsx("div",{className:"flex justify-center",children:i.jsxs("button",{onClick:()=>{const k=`https://us-central1-planificador-145df.cloudfunctions.net/slidesAuthorize?userId=${e}`;window.location.href=k},className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-green-600 hover:bg-green-700 text-white",children:[i.jsx(dB,{className:"w-4 h-4"}),i.jsx("span",{children:"Autorizar Google Slides"})]})}),i.jsx("div",{className:"flex justify-center",children:i.jsxs("button",{onClick:async()=>{try{_(D=>({...D,checking:!0}));const k=await yI();_({isAuthorized:k.isAuthorized,message:k.message,checking:!1})}catch(k){_({isAuthorized:!1,message:`Error: ${k.message||"No se pudo verificar la autorización"}`,checking:!1})}},disabled:w.checking,className:`flex items-center gap-2 px-3 py-1 text-sm rounded-lg transition-colors ${w.isAuthorized?"text-green-600 hover:text-green-800 border border-green-300 hover:bg-green-50":"text-gray-600 hover:text-gray-800 border border-gray-300 hover:bg-gray-50"}`,children:[w.checking?i.jsx(wl,{className:"w-3 h-3 animate-spin"}):i.jsx("span",{children:"🔄"}),i.jsx("span",{children:"Verificar estado"})]})})]}):d.map(k=>i.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200",children:k.tema}),k.estado==="generando"?i.jsxs("span",{className:"flex items-center text-amber-500 text-xs gap-1",children:[i.jsx(wl,{className:"w-3 h-3 animate-spin"}),"Generando"]}):k.estado==="error"?i.jsxs("span",{className:"flex items-center text-red-500 text-xs gap-1",children:[i.jsx(Nh,{className:"w-3 h-3"}),"Error"]}):i.jsxs("span",{className:"flex items-center text-green-500 text-xs gap-1",children:[i.jsx(es,{className:"w-3 h-3"}),"Lista"]})]}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[k.asignatura," - ",k.curso]}),i.jsxs("div",{className:"flex items-center text-xs text-gray-500 space-x-4 mt-2 flex-wrap",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(ic,{className:"w-3 h-3"}),new Date(k.fechaCreacion).toLocaleDateString()]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(fB,{className:"w-3 h-3"}),k.numDiapositivas," diapositivas"]}),i.jsxs("span",{className:`flex items-center gap-1 px-1.5 py-0.5 rounded-full ${k.estilo==="sobrio"?"bg-slate-100 text-slate-700":k.estilo==="visual"?"bg-blue-100 text-blue-700":k.estilo==="academico"?"bg-amber-100 text-amber-700":k.estilo==="interactivo"?"bg-green-100 text-green-700":k.estilo==="profesional"?"bg-indigo-100 text-indigo-700":k.estilo==="creativo"?"bg-purple-100 text-purple-700":(k.estilo==="minimalista","bg-gray-100 text-gray-700")}`,children:[k.estilo==="sobrio"&&"🎭",k.estilo==="visual"&&"🎨",k.estilo==="academico"&&"📚",k.estilo==="interactivo"&&"🤝",k.estilo==="profesional"&&"💼",k.estilo==="creativo"&&"💡",k.estilo==="minimalista"&&"⚪",k.estilo]})]}),i.jsxs("div",{className:"mt-3",children:[i.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-300",children:"Objetivos de Aprendizaje:"}),i.jsx("ul",{className:"list-disc list-inside text-xs text-gray-600 dark:text-gray-400",children:k.objetivosAprendizaje.map((D,L)=>i.jsx("li",{className:"truncate",children:D.length>60?D.substring(0,57)+"...":D},L))})]}),k.mensajeError&&i.jsx("div",{className:"mt-2 text-xs italic text-amber-600 dark:text-amber-400",children:k.mensajeError}),i.jsxs("div",{className:"mt-3 flex justify-between",children:[k.estado==="completada"?i.jsxs(i.Fragment,{children:[i.jsxs("a",{href:k.esDemoMode||k.urlPresentacion.includes("example.com")?"#":k.urlPresentacion,onClick:D=>{(k.esDemoMode||k.urlPresentacion.includes("example.com"))&&(D.preventDefault(),alert("Esta es una versión de demostración. En la versión final, aquí verás una presentación real de Google Slides."))},target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center gap-1 text-sm ${k.esDemoMode||k.urlPresentacion.includes("example.com")?"text-amber-600 hover:text-amber-800":"text-blue-600 hover:text-blue-800"}`,children:[i.jsx(dB,{className:"w-3 h-3"}),k.esDemoMode||k.urlPresentacion.includes("example.com")?"Ver Demo":"Abrir en Google Slides"]}),k.esDemoMode&&k.urlAutorizacion&&i.jsxs("a",{href:k.urlAutorizacion,target:"_blank",rel:"noopener noreferrer",className:"ml-4 inline-flex items-center gap-1 text-sm text-green-600 hover:text-green-800",children:[i.jsx(dB,{className:"w-3 h-3"}),"Autorizar Google Slides"]})]}):i.jsx("span",{className:"text-gray-400 text-sm italic",children:"En progreso..."}),i.jsx("button",{onClick:()=>S(k.id),className:"text-red-500 hover:text-red-700",children:i.jsx(Is,{className:"w-4 h-4"})})]})]},k.id))})]})})]}),M=()=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-xl shadow-md text-center",children:[i.jsx(mH,{className:"w-16 h-16 mx-auto text-gray-400"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-300 mt-4",children:"Sección de Guías Didácticas"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Esta función estará disponible próximamente."})]}),R=()=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-xl shadow-md text-center",children:[i.jsx(fB,{className:"w-16 h-16 mx-auto text-gray-400"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-300 mt-4",children:"Repositorio de Recursos"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Esta función estará disponible próximamente."})]});return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm p-1",children:i.jsxs("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[i.jsxs("button",{onClick:()=>n("presentaciones"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="presentaciones"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(hF,{className:"w-4 h-4"}),i.jsx("span",{children:"Presentaciones"})]}),i.jsxs("button",{onClick:()=>n("guias"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="guias"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(mH,{className:"w-4 h-4"}),i.jsx("span",{children:"Guías"})]}),i.jsxs("button",{onClick:()=>n("recursos"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="recursos"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(fB,{className:"w-4 h-4"}),i.jsx("span",{children:"Recursos"})]})]})}),i.jsx("div",{className:"mb-6",children:i.jsx(LKe,{})}),i.jsxs("div",{children:[r==="presentaciones"&&B(),r==="guias"&&M(),r==="recursos"&&R()]})]})},_E="planificaciones",yle="actividades_calendario",oM=e=>{var r,n,a;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:a.toISOString())||t.fechaCreacion,...t.detallesLeccion?{detallesLeccion:Array.isArray(t.detallesLeccion)?t.detallesLeccion:[]}:{}}},wle=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:ir.fromDate(new Date),fechaActualizacion:ir.fromDate(new Date)};return(await an(pt(lt,_E),r)).id}catch(r){throw console.error("Error al guardar planificación:",r),new Error("No se pudo guardar la planificación")}},Ele=async(e,t,r)=>{try{const n=rr(lt,_E,e),a=await Hm(n);if(!a.exists()||a.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificación");await Bl(n,{...t,fechaActualizacion:ir.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificación:",n),new Error("No se pudo actualizar la planificación")}},Nle=async(e,t)=>{try{const r=rr(lt,_E,e),n=await Hm(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar esta planificación");await ka(r)}catch(r){throw console.error("Error al eliminar planificación:",r),new Error("No se pudo eliminar la planificación")}},QKe=async e=>{try{const t=Vt(pt(lt,_E),wr("userId","==",e),cr("fechaCreacion","desc"));return(await mn(t)).docs.map(oM)}catch(t){return console.error("Error al obtener planificaciones:",t),[]}},Cle=(e,t)=>{const r=Vt(pt(lt,_E),wr("userId","==",e),cr("fechaCreacion","desc"));return hr(r,n=>{try{const a=n.docs.map(oM);console.log(`Recibiendo ${a.length} planificaciones del usuario ${e}`);const s=a.map(o=>o.tipo==="Unidad"&&!Array.isArray(o.detallesLeccion)?(console.warn(`Planificación ${o.id} tiene detallesLeccion inválidos, corrigiendo.`),{...o,detallesLeccion:[]}):o);t(s)}catch(a){console.error("Error procesando datos de planificaciones:",a),t([])}},n=>{console.error("Error en suscripción a planificaciones:",n)})},_le=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:ir.fromDate(new Date),fechaActualizacion:ir.fromDate(new Date)};return(await an(pt(lt,yle),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},Sle=(e,t)=>{const r=Vt(pt(lt,yle),wr("userId","==",e),cr("fecha","desc"));return hr(r,n=>{const a=n.docs.map(oM);t(a)},n=>{console.error("Error en suscripción a actividades:",n)})},NO=Object.freeze(Object.defineProperty({__proto__:null,deletePlanificacion:Nle,getPlanificacionesByUser:QKe,saveActividad:_le,savePlanificacion:wle,subscribeToActividades:Sle,subscribeToPlanificaciones:Cle,updatePlanificacion:Ele},Symbol.toStringTag,{value:"Module"})),HKe=(e,t)=>{const[r,n]=C.useState([]),[a,s]=C.useState(!0),[o,l]=C.useState(null),c=C.useCallback(async()=>{if(!e){console.warn("🛠️ cargarPlanificacionesDirectamente: userId nulo, no se pueden cargar planificaciones"),s(!1),l("No se pudo determinar la identidad del usuario"),n([]);return}try{console.log(`🛠️ Cargando planificaciones directamente para ${e}`);const{getPlanificacionesByUser:m}=await ac(async()=>{const{getPlanificacionesByUser:v}=await Promise.resolve().then(()=>NO);return{getPlanificacionesByUser:v}},void 0),g=await m(e);console.log(`🛠️ Obtenidas ${g.length} planificaciones directamente de Firestore`);const x=g.map(v=>v.tipo==="Unidad"&&!Array.isArray(v.detallesLeccion)?(console.log(`🛠️ Corrigiendo datos de planificación ${v.id}`),{...v,detallesLeccion:[]}):v);n(x),s(!1)}catch(m){console.error("🛠️ Error cargando planificaciones directamente:",m),l(m instanceof Error?m.message:"Error al cargar planificaciones directamente"),s(!1)}},[e]);C.useEffect(()=>{if(!e){console.log("🛠️ usePlanificaciones: userId nulo o vacío, no se cargarán planificaciones"),s(!1),l("ID de usuario no disponible"),n([]);return}console.log(`🛠️ usePlanificaciones: Cargando planificaciones para usuario ${e}`),s(!0),l(null);let m=null;try{m=Cle(e,x=>{if(console.log(`🛠️ usePlanificaciones: Recibidos ${x.length} documentos por suscripción`),x.length===0){c();return}const v=x.map(y=>y.tipo==="Unidad"&&!Array.isArray(y.detallesLeccion)?(console.log(`🛠️ Corrigiendo datos de planificación ${y.id}`),{...y,detallesLeccion:[]}):y);n(v),s(!1)})}catch(x){console.error("🛠️ Error en hook usePlanificaciones:",x),l(x instanceof Error?x.message:"Error al cargar planificaciones"),c()}const g=setTimeout(()=>{a&&r.length===0&&(console.log("🛠️ Timeout: cargando planificaciones directamente como respaldo"),c())},5e3);return()=>{m&&m(),clearTimeout(g)}},[e,c]);const u=async m=>{try{return l(null),await wle(m,e)}catch(g){throw l(g.message||"Error al guardar planificación"),g}},d=async(m,g)=>{try{l(null),await Ele(m,g,e)}catch(x){throw l(x.message||"Error al actualizar planificación"),x}},f=async m=>{try{l(null),await Nle(m,e)}catch(g){throw l(g.message||"Error al eliminar planificación"),g}},h=C.useCallback(async()=>{try{if(!e)return{status:"error",message:"No hay usuario identificado. Datos del usuario no disponibles."};console.log("📊 Diagnóstico - ID de usuario:",e);const{getPlanificacionesByUser:m}=await ac(async()=>{const{getPlanificacionesByUser:y}=await Promise.resolve().then(()=>NO);return{getPlanificacionesByUser:y}},void 0),g=await m(e),x=g.filter(y=>y.tipo==="Unidad"),v=x.filter(y=>!Array.isArray(y.detallesLeccion)||y.detallesLeccion===void 0);if(console.log(`📊 Diagnóstico - Total planificaciones: ${g.length}, Unidades: ${x.length}, Inválidas: ${v.length}`),v.length>0){const{updateDoc:y,doc:w}=await ac(async()=>{const{updateDoc:T,doc:j}=await Promise.resolve().then(()=>v_);return{updateDoc:T,doc:j}},void 0),{db:_}=await ac(async()=>{const{db:T}=await Promise.resolve().then(()=>mte);return{db:T}},void 0);for(const T of v)await y(w(_,"planificaciones",T.id),{detallesLeccion:[]});return{status:"repaired",message:`Se repararon ${v.length} planificaciones de ${x.length} totales.`}}else if(x.length===0)return{status:"empty",message:`No se encontraron planificaciones de unidad para el usuario ${e}. Cree una nueva planificación.`};return{status:"ok",message:`Todo correcto. ${x.length} planificaciones de unidad encontradas.`}}catch(m){return console.error("📊 Error en diagnóstico:",m),{status:"error",message:`Error: ${m instanceof Error?m.message:"Desconocido"}`}}},[e]);return{planificaciones:r,loading:a,error:o,save:u,update:d,remove:f,diagnosticarYReparar:h}},CO=e=>{const t=new Date().toISOString();console.log(`[${t}] API Call: ${e}`)},VKe=e=>{const[t,r]=C.useState([]),[n,a]=C.useState(!0),[s,o]=C.useState(null);C.useEffect(()=>{if(!e){a(!1);return}a(!0);try{return Sle(e,u=>{r(u),a(!1)})}catch(c){o(c instanceof Error?c.message:"Error al cargar actividades"),a(!1)}},[e]);const l=C.useCallback(async c=>{try{return o(null),await _le(c,e)}catch(u){throw o(u instanceof Error?u.message:"Error al guardar actividad"),u}},[e]);return{actividades:t,loading:n,error:s,save:l}},zKe=({lesson:e,onClose:t,onSave:r,isLoading:n=!1})=>{const[a,s]=C.useState(e),o=c=>{s({...a,[c.target.name]:c.target.value})},l=async()=>{try{await r(a),t()}catch(c){console.error("Error al guardar lección:",c)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),i.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(a).map(([c,u])=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:c.replace(/([A-Z])/g," $1")}),i.jsx("textarea",{name:c,value:u,onChange:o,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},c))}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[i.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),i.jsxs("button",{onClick:l,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},$Ke=({plan:e,onEditLesson:t,onUseLesson:r,isLoading:n=!1,onUpdatePlan:a})=>{const[s,o]=C.useState(e.progreso??0),[l,c]=C.useState(!1),u=async d=>{const f=parseInt(d.target.value,10);o(f),c(!0);try{e.id&&a&&(await a(e.id,{progreso:f}),console.log("✅ Progreso actualizado exitosamente"))}catch(h){console.error("❌ Error completo:",h),alert(`Error al guardar el avance: ${h.message}`),o(e.progreso??0)}finally{c(!1)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"range",min:0,max:100,value:s,onChange:u,disabled:l||n}),i.jsxs("span",{className:"font-bold w-12",children:[s,"%"]}),l&&i.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),i.jsx("div",{className:"space-y-4",children:e.detallesLeccion.map((d,f)=>i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[i.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",f+1,": ",d.actividades]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo:"})," ",d.objetivosAprendizaje]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Contenidos:"})," ",d.contenidosConceptuales]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Habilidad (Bloom):"})," ",d.habilidadesBloom]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Perfil de Egreso:"})," ",d.perfilEgreso]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Interdisciplinariedad:"})," ",d.asignaturasInterdisciplinariedad]})]}),i.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 rounded-md",children:i.jsxs("p",{className:"font-medium",children:[i.jsx("strong",{children:"Actividades sugeridas:"})," ",d.actividades]})}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx("button",{onClick:()=>t(f,d),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),i.jsx("button",{onClick:()=>r(d,e),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},f))})]})},GKe=({plan:e,onBack:t,onSave:r,onDelete:n,isLoading:a=!1})=>{const[s,o]=C.useState(e),[l,c]=C.useState(!1);C.useEffect(()=>{console.log("Plan inicial:",e.momentosClase);const h=v=>{if(typeof v=="object"&&v!==null)return JSON.stringify(v);if(typeof v=="string")try{if(v.trim().startsWith("{")){const y=JSON.parse(v);return JSON.stringify(y)}}catch(y){console.log("No es JSON válido:",y)}return String(v)},m=h(e.momentosClase.inicio),g=h(e.momentosClase.desarrollo),x=h(e.momentosClase.cierre);console.log("Contenido procesado - inicio:",m),o(v=>({...v,momentosClase:{inicio:m,desarrollo:g,cierre:x}}))},[e]);const u=h=>{const{name:m,value:g}=h.target,[x,v]=m.split(".");o(x==="momentosClase"?y=>({...y,momentosClase:{...y.momentosClase,[v]:g}}):y=>({...y,[m]:g}))},d=async()=>{c(!0);try{await r((()=>{const m={...s};return Object.keys(m.momentosClase).forEach(g=>{const x=m.momentosClase[g];if(typeof x=="string"&&(x.includes("TIEMPO:")||x.includes("OBJETIVO:")||x.includes("ACTIVIDADES:")))try{const v=x.match(/TIEMPO:\s*(.*?)(?:\n\n|\n$)/s),y=x.match(/OBJETIVO:\s*(.*?)(?:\n\nACTIVIDADES:|\n$)/s);(v||y)&&console.log("Manteniendo formato para visualización")}catch(v){console.error("Error al procesar plan para guardar:",v)}}),m})())}catch(h){console.error("Error al guardar plan de clase:",h)}finally{c(!1)}},f=h=>{if(console.log("Formateando contenido:",typeof h,h!=null&&h.substring?h.substring(0,50):h),typeof h=="string")try{h.trim().startsWith("{")&&(h=JSON.parse(h),console.log("Contenido parseado a objeto:",h))}catch(m){console.log("Error al parsear JSON:",m)}if(typeof h=="object"&&h!==null)try{let m="";if(h.actividades&&Array.isArray(h.actividades)){m=`${h.tiempo?"TIEMPO: "+h.tiempo+`

`:""}`,m+=`${h.objetivo?`OBJETIVO:
`+h.objetivo+`

`:""}`,m+=`ACTIVIDADES:

`,h.actividades.forEach((x,v)=>{m+=`ACTIVIDAD ${v+1}: ${x.nombre||"Sin nombre"}
`,m+=`${x.descripcion||"Sin descripción"}

`;let y="";x.tipo&&(y+=`• Tipo: ${x.tipo}
`),x.recursos&&(y+=`• Recursos: ${x.recursos}
`),x.evaluacion&&(y+=`• Evaluación: ${x.evaluacion}
`),y&&(m+=`${y}
`)});let g="";return Object.keys(h).forEach(x=>{x!=="tiempo"&&x!=="objetivo"&&x!=="actividades"&&(g+=`• ${x.charAt(0).toUpperCase()+x.slice(1)}: ${typeof h[x]=="object"?JSON.stringify(h[x]):h[x]}
`)}),g&&(m+=`
INFORMACIÓN ADICIONAL:
${g}`),m}else{if(typeof h=="string")try{const y=JSON.parse(h);if(y.actividades||y.tiempo||y.objetivo)return f(y)}catch{}const x=JSON.stringify(h,null,2).replace(/[{}"]/g,"").replace(/,$/gm,"").replace(/^\s*\n/gm,"").split(`
`);let v="";return x.forEach(y=>{if(y.trim().startsWith("["))v+=`
`+y.trim()+`
`;else if(y.trim().startsWith("-"))v+="• "+y.trim().substring(1)+`
`;else if(y.includes(":")){const w=y.split(":");if(w.length>=2){const _=w[0].trim(),T=w.slice(1).join(":").trim();["tiempo","duración","objetivo","actividad","tipo","recursos","evaluación"].includes(_.toLowerCase())?v+=`${_.toUpperCase()}: ${T}
`:v+=`${_}: ${T}
`}else v+=y+`
`}else v+=y+`
`}),v}}catch(m){return console.error("Error al formatear contenido:",m),String(h)}return String(h)};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreClase}),i.jsx("button",{onClick:t,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:a||l,children:"← Volver"})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-transparent dark:from-blue-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-blue-400 dark:border-blue-600",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-800 p-1.5 rounded-lg",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-blue-600 dark:text-blue-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),i.jsx("label",{className:"font-bold text-lg text-blue-700 dark:text-blue-300",children:"Inicio de la Clase"})]}),i.jsx("textarea",{name:"momentosClase.inicio",value:f(s.momentosClase.inicio),onChange:u,rows:5,placeholder:"Describe las actividades iniciales, activación de conocimientos previos, motivación y presentación del objetivo de la clase...",className:"w-full p-3 border border-blue-200 dark:border-blue-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-blue-300 dark:focus:ring-blue-700 focus:border-blue-300 focus:outline-none transition-all",disabled:a||l})]}),i.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-transparent dark:from-green-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-green-400 dark:border-green-600",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"bg-green-100 dark:bg-green-800 p-1.5 rounded-lg",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-green-600 dark:text-green-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),i.jsx("label",{className:"font-bold text-lg text-green-700 dark:text-green-300",children:"Desarrollo de la Clase"})]}),i.jsx("textarea",{name:"momentosClase.desarrollo",value:f(s.momentosClase.desarrollo),onChange:u,rows:8,placeholder:"Describe las actividades principales de aprendizaje, secuencia didáctica, estrategias de enseñanza, actividades prácticas...",className:"w-full p-3 border border-green-200 dark:border-green-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-green-300 dark:focus:ring-green-700 focus:border-green-300 focus:outline-none transition-all",disabled:a||l})]}),i.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-transparent dark:from-amber-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-amber-400 dark:border-amber-600",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"bg-amber-100 dark:bg-amber-800 p-1.5 rounded-lg",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-amber-600 dark:text-amber-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),i.jsx("label",{className:"font-bold text-lg text-amber-700 dark:text-amber-300",children:"Cierre de la Clase"})]}),i.jsx("textarea",{name:"momentosClase.cierre",value:f(s.momentosClase.cierre),onChange:u,rows:5,placeholder:"Describe las actividades de cierre, síntesis, metacognición, evaluación formativa y retroalimentación...",className:"w-full p-3 border border-amber-200 dark:border-amber-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-amber-300 dark:focus:ring-amber-700 focus:border-amber-300 focus:outline-none transition-all",disabled:a||l})]})]}),i.jsx("div",{className:"text-right mt-6",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("button",{onClick:()=>n(e.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:a||l,children:"🗑️ Eliminar Plan"}),i.jsxs("button",{onClick:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:a||l,children:[l&&i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},qKe=({userId:e})=>{const{actividades:t,save:r}=VKe(e),[n,a]=C.useState("list"),[s,o]=C.useState(null),[l,c]=C.useState(!1),[u,d]=C.useState(!1),f={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[h,m]=C.useState(f);C.useEffect(()=>{n==="summary"&&s&&g()},[n,s,e]);const g=async()=>{if(s)try{d(!1)}catch(I){console.error("Error al verificar evento en calendario:",I)}},x=I=>{const{name:E,value:S}=I.target;m(B=>({...B,[E]:S}))},v=(I,E,S)=>{m(B=>({...B,tareas:B.tareas.map(M=>M.id===I?{...M,[E]:S}:M)}))},y=()=>{m(I=>({...I,tareas:[...I.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},w=I=>{m(E=>({...E,tareas:E.tareas.filter(S=>S.id!==I)}))},_=async I=>{I.preventDefault(),c(!0);const E=`Eres un especialista en objetivos educacionales según el currículum nacional chileno. Basado en la siguiente información de una actividad pedagógica, genera un objetivo claro y conciso para esta.
    - Nombre: ${h.nombre}
    - Descripción: ${h.descripcion}
    - Tareas: ${h.tareas.map(S=>S.descripcion).join(", ")}
    
    El objetivo debe:
    - Ser breve y conciso (máximo 120 caracteres)
    - Empezar con un verbo en infinitivo (como establece el MINEDUC)
    - Enfocarse en el propósito principal de la actividad
    - Estar alineado con los aprendizajes esperados del currículum nacional
    - Ser medible y observable`;try{CO("Planificación - Actividad Calendario");const S="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",D=(await(await new Ps(S).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{temperature:.4,topP:.95,maxOutputTokens:1024}}).generateContent(E)).response).text(),L={...h,objetivo:D.replace(/(\*\*|\*)/g,"")},Z=await r(L),V={...L,id:Z};o(V),a("summary")}catch(S){console.error("Error al generar objetivo con IA:",S),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él.");try{const B={...h,objetivo:"No generado"},M=await r(B),R={...B,id:M};o(R),a("summary")}catch(B){console.error("Error al guardar actividad:",B),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{c(!1)}},T=async I=>{if(I)try{d(!0),alert("Actividad marcada como añadida al calendario (funcionalidad en desarrollo).")}catch(E){console.error("Error adding to calendar:",E),alert("Hubo un error al agregar la actividad al calendario.")}},j=`
  w-full px-4 py-2.5 rounded-lg border border-slate-200 
  bg-white dark:bg-slate-800 
  text-slate-900 dark:text-slate-100 
  placeholder:text-slate-400 dark:placeholder:text-slate-500
  focus:border-indigo-500 dark:focus:border-indigo-600 
  focus:ring-2 focus:ring-indigo-500/20 dark:focus:ring-indigo-600/20
  focus:outline-none
  transition-colors
  disabled:opacity-50 disabled:cursor-not-allowed
`;return n==="form"?i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:i.jsxs("form",{onSubmit:_,className:"space-y-8",children:[i.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"Información General"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("input",{name:"nombre",value:h.nombre,onChange:x,placeholder:"Nombre de la Actividad",className:j,required:!0,disabled:l}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("input",{name:"fecha",type:"date",value:h.fecha,onChange:x,className:j,required:!0,disabled:l}),i.jsx("input",{name:"hora",type:"time",value:h.hora,onChange:x,className:j,required:!0,disabled:l})]}),i.jsx("textarea",{name:"descripcion",value:h.descripcion,onChange:x,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:j,required:!0,disabled:l}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("input",{name:"ubicacion",value:h.ubicacion,onChange:x,placeholder:"Ubicación",className:j,required:!0,disabled:l}),i.jsx("input",{name:"participantes",value:h.participantes,onChange:x,placeholder:"Participantes",className:j,required:!0,disabled:l})]}),i.jsx("textarea",{name:"recursosGenerales",value:h.recursosGenerales,onChange:x,placeholder:"Recursos Generales Necesarios",rows:2,className:j,disabled:l})]})]}),i.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),i.jsx("button",{type:"button",onClick:y,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:l,children:"+ Agregar Tarea"})]}),i.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:h.tareas.map((I,E)=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[i.jsx("button",{type:"button",onClick:()=>w(I.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:l,children:"×"}),i.jsx("textarea",{value:I.descripcion,onChange:S=>v(I.id,"descripcion",S.target.value),placeholder:`Descripción de la Tarea ${E+1}`,rows:2,className:j,required:!0,disabled:l}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[i.jsx("input",{value:I.responsable,onChange:S=>v(I.id,"responsable",S.target.value),placeholder:"Responsable",className:j,required:!0,disabled:l}),i.jsx("input",{value:I.recursos,onChange:S=>v(I.id,"recursos",S.target.value),placeholder:"Recursos Necesarios",className:j,disabled:l})]})]},I.id))})]}),i.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[i.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),i.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:l,children:"Cancelar"}),i.jsx("button",{type:"submit",disabled:l,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:l?i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[i.jsx("span",{className:"text-2xl",children:"✓"}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),i.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),i.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),i.jsxs("div",{className:"space-y-4 text-sm",children:[i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),i.jsx("span",{children:s.nombre})]}),i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),i.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),i.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),i.jsx("p",{children:s.descripcion})]}),i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),i.jsx("span",{children:s.ubicacion})]}),i.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[i.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),i.jsx("span",{children:s.participantes})]}),i.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),i.jsx("p",{children:s.recursosGenerales})]}),i.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[i.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),i.jsx("p",{children:s.objetivo})]})]}),i.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[i.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),i.jsx("button",{onClick:()=>T(s),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),i.jsx("button",{onClick:()=>{a("list"),o(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),i.jsx("button",{onClick:()=>{a("form"),m(f)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),i.jsx("div",{className:"space-y-3",children:t.length>0?t.map(I=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:I.nombre}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(I.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",I.ubicacion]})]},I.id)):i.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},KKe=({currentUser:e})=>{const t=(e==null?void 0:e.uid)||(e==null?void 0:e.id)||(e==null?void 0:e.email)||"";console.log("🔑 PlanificacionDocente - Usuario actual:",{uid:e==null?void 0:e.uid,id:e==null?void 0:e.id,email:e==null?void 0:e.email,nombreCompleto:e==null?void 0:e.nombreCompleto,usuarioSeleccionado:t});const r=t&&t.length>0;console.log("🔑 ID de usuario válido:",r);const{planificaciones:n,save:a,update:s,remove:o,loading:l,diagnosticarYReparar:c}=HKe(r?t:null),u={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[d,f]=C.useState(u),[h,m]=C.useState(null),[g,x]=C.useState(!1),[v,y]=C.useState(null),[w,_]=C.useState("unidad"),[T,j]=C.useState(null),[I,E]=C.useState(null),S=C.useMemo(()=>e.asignaturas||[],[e.asignaturas]),B=C.useMemo(()=>{const te=e.cursos||[],se=new Set;return te.forEach(ie=>{ie.startsWith("1º")?se.add("1º Medio"):ie.startsWith("2º")?se.add("2º Medio"):ie.startsWith("3º")?se.add("3º Medio"):ie.startsWith("4º")&&se.add("4º Medio")}),Array.from(se)},[e.cursos]);C.useEffect(()=>{f(te=>({...te,asignatura:S[0]||"",nivel:B[0]||""}))},[S,B]);const M=te=>{const{name:se,value:ie}=te.target;f(ce=>({...ce,[se]:se==="cantidadClases"?parseInt(ie,10):ie}))},R=()=>{const{asignatura:te,nivel:se,nombreUnidad:ie,contenidos:ce,cantidadClases:de,observaciones:Be,ideasParaUnidad:ae}=d;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica siguiendo fielmente las bases curriculares y los objetivos de aprendizaje del Currículum Nacional Chileno (MINEDUC) para ${te} en ${se}. La planificación debe presentarse en formato JSON estructurado.

    **Información Base:**
    - Asignatura: ${te}
    - Nivel: ${se}
    - Nombre de la Unidad: "${ie}"
    - Contenidos clave a trabajar (insumo principal): "${ce}"
    - Cantidad de clases para la unidad: ${de}
    - Ideas y perspectiva del docente para la unidad: "${ae||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${Be||"Ninguna"}"
    
    **Orientaciones Curriculares Nacionales:**
    - Asegúrate que los objetivos estén alineados con las Bases Curriculares del MINEDUC para ${te} en ${se}.
    - Contempla los Objetivos de Aprendizaje (OA) oficiales del currículum en línea chileno.
    - Incorpora los Objetivos de Aprendizaje Transversales (OAT) cuando sea apropiado.
    - Para niveles técnico-profesionales, considera los perfiles de egreso de cada especialidad.

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${de} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
        - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},k=async te=>{if(te.preventDefault(),x(!0),y(null),!d.contenidos||!d.nombreUnidad){y("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),x(!1);return}try{CO("Planificación - Unidad");const se="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",ce=new Ps(se).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{temperature:.4,topP:.95,maxOutputTokens:8192}}),de=R(),Be={type:"object",properties:{objetivosAprendizaje:{type:"string"},indicadoresEvaluacion:{type:"string"},detallesLeccion:{type:"array",items:{type:"object",properties:{objetivosAprendizaje:{type:"string"},contenidosConceptuales:{type:"string"},habilidadesBloom:{type:"string"},perfilEgreso:{type:"string"},actividades:{type:"string"},asignaturasInterdisciplinariedad:{type:"string"}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]};let ke=(await(await ce.generateContent([{text:de}])).response).text();ke.includes("```")&&(console.log("La respuesta contiene delimitadores de código Markdown, limpiando..."),ke=ke.replace(/```json\s*|\s*```/g,"")),console.log("Primeros 50 caracteres del texto limpio:",ke.substring(0,50));const ve=JSON.parse(ke),le={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Unidad",asignatura:d.asignatura,nivel:d.nivel,nombreUnidad:d.nombreUnidad,contenidos:d.contenidos,cantidadClases:d.cantidadClases,observaciones:d.observaciones,ideasParaUnidad:d.ideasParaUnidad,objetivosAprendizaje:ve.objetivosAprendizaje,indicadoresEvaluacion:ve.indicadoresEvaluacion,detallesLeccion:ve.detallesLeccion};if(h)await s(h.id,le),m({...le,id:h.id});else{const be=await a(le);m({...le,id:be})}}catch(se){console.error("Error al generar planificación con IA",se),y("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{x(!1)}},D=async(te,se)=>{x(!0),y(null);const ie=`Eres un experto pedagogo chileno especialista en diseño de planes de clase alineados con el currículum nacional. A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${se.asignatura}
    - Nivel: ${se.nivel}
    - Objetivo de la clase: ${te.objetivosAprendizaje}
    - Contenidos: ${te.contenidosConceptuales}
    - Actividades sugeridas: ${te.actividades}
    
    **Orientaciones didácticas**:
    - El plan debe seguir el modelo de diseño instruccional del Ministerio de Educación de Chile.
    - Incluir estrategias de aprendizaje activo y centrado en el estudiante.
    - Incorporar metodologías que desarrollen habilidades del siglo XXI según el currículum chileno.
    - Considerar momentos para activación de conocimientos previos, desarrollo de aprendizajes y metacognición/evaluación.
    
    Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{CO("Planificación - Utilizar Clase");const ce="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";let ke=(await(await new Ps(ce).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{temperature:.4,topP:.95,maxOutputTokens:4096}}).generateContent([{text:ie}])).response).text();ke.includes("```")&&(console.log("La respuesta contiene delimitadores de código Markdown, limpiando..."),ke=ke.replace(/```json\s*|\s*```/g,"")),console.log("Primeros 50 caracteres del texto limpio:",ke.substring(0,50));const ve=JSON.parse(ke),le={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Clase",asignatura:se.asignatura,nivel:se.nivel,contenidos:te.contenidosConceptuales,observaciones:"",nombreClase:te.actividades,duracionClase:80,momentosClase:ve,detalleLeccionOrigen:te};await a(le),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),_("clase")}catch(ce){console.error("Error al generar plan de clase con IA",ce),y("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{x(!1)}},L=te=>{te.tipo==="Unidad"&&(f({asignatura:te.asignatura,nivel:te.nivel,nombreUnidad:te.nombreUnidad,contenidos:te.contenidos,cantidadClases:te.cantidadClases,observaciones:te.observaciones,ideasParaUnidad:te.ideasParaUnidad||""}),m(te),window.scrollTo({top:0,behavior:"smooth"}))},Z=async te=>{if(window.confirm("¿Está seguro de que desea eliminar esta planificación?"))try{await o(te),(h==null?void 0:h.id)===te&&(m(null),f(u))}catch(se){console.error("Error al eliminar planificación:",se),alert("Error al eliminar la planificación. Por favor, intente nuevamente.")}},V=async te=>{if(window.confirm("¿Está seguro de que desea eliminar este plan de clase?"))try{await o(te),(T==null?void 0:T.id)===te&&j(null),console.log("✅ Plan de clase eliminado exitosamente")}catch(se){console.error("Error al eliminar plan de clase:",se),alert("Error al eliminar el plan de clase. Por favor, intente nuevamente.")}},q=(te,se)=>{h&&E({planId:h.id,lessonIndex:te,lessonData:se})},G=async te=>{if(I)try{const{planId:se,lessonIndex:ie}=I,ce=n.find(ae=>ae.id===se&&ae.tipo==="Unidad");if(!ce)return;const de=[...ce.detallesLeccion];de[ie]=te;const Be={...ce,detallesLeccion:de};await s(se,Be),m(Be),E(null)}catch(se){console.error("Error al actualizar lección:",se),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},K="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",ee=async()=>{try{console.log("🔄 Recargando planificaciones manualmente...");const{getPlanificacionesByUser:te}=await ac(async()=>{const{getPlanificacionesByUser:ie}=await Promise.resolve().then(()=>NO);return{getPlanificacionesByUser:ie}},void 0);if(!t){console.warn("🔄 No hay userId para recargar planificaciones");return}const se=await te(t);console.log(`🔄 Obtenidas ${se.length} planificaciones frescas`),alert(`Se han encontrado ${se.length} planificaciones en la base de datos. Recargue la página para ver los cambios.`),window.location.reload()}catch(te){console.error("🔄 Error recargando planificaciones:",te),alert("Hubo un error al recargar las planificaciones. Intente recargar la página manualmente.")}},[W,P]=C.useState({visible:!1,ejecutando:!1,resultado:null}),U=async()=>{P(se=>({...se,ejecutando:!0,resultado:null}));const te=await c();P(se=>({...se,ejecutando:!1,resultado:te}))},z=()=>{var te;return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>P(se=>({...se,visible:!se.visible})),className:"bg-slate-600 hover:bg-slate-700 text-white px-3 py-1 rounded-md text-sm",children:"Diagnóstico"}),i.jsxs("button",{onClick:ee,className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md text-sm flex items-center gap-1",children:[i.jsx(mF,{className:"w-4 h-4"}),i.jsx("span",{children:"Recargar"})]})]})]}),W.visible&&i.jsxs("div",{className:"mb-6 p-4 border border-slate-300 dark:border-slate-600 rounded-lg",children:[i.jsx("h3",{className:"font-bold text-lg mb-2",children:"Herramienta de Diagnóstico"}),i.jsx("p",{className:"text-sm text-slate-500 mb-3",children:"Esta herramienta intentará resolver problemas con las planificaciones que no aparecen en el historial."}),W.resultado&&i.jsx("div",{className:`p-3 mb-3 rounded-md ${W.resultado.status==="ok"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200":W.resultado.status==="repaired"?"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200"}`,children:W.resultado.message}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:U,disabled:W.ejecutando,className:"bg-slate-700 hover:bg-slate-800 text-white px-4 py-2 rounded-md flex items-center gap-2 disabled:opacity-50",children:W.ejecutando?i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsx("span",{children:"Ejecutar diagnóstico"})}),((te=W.resultado)==null?void 0:te.status)==="repaired"&&i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-md",children:"Recargar página"})]})]}),l?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):i.jsxs("form",{onSubmit:k,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsx("select",{name:"asignatura",value:d.asignatura,onChange:M,className:K,disabled:g,children:S.length>0?S.map(se=>i.jsx("option",{value:se,children:se},se)):i.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),i.jsx("select",{name:"nivel",value:d.nivel,onChange:M,className:K,disabled:g,children:B.length>0?B.map(se=>i.jsx("option",{value:se,children:se},se)):i.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",name:"nombreUnidad",value:d.nombreUnidad,onChange:M,className:K,placeholder:"Ej: La Célula y sus procesos",disabled:g})]}),i.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[i.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{name:"contenidos",value:d.contenidos,onChange:M,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificación debe abordar.",className:K,disabled:g})]}),i.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[i.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),i.jsx("textarea",{name:"ideasParaUnidad",value:d.ideasParaUnidad,onChange:M,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:K,disabled:g})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),i.jsx("input",{type:"number",name:"cantidadClases",value:d.cantidadClases,onChange:M,className:K,min:"1",max:"20",disabled:g})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),i.jsx("textarea",{name:"observaciones",value:d.observaciones,onChange:M,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:K,disabled:g})]})]}),i.jsx("div",{className:"pt-4 text-right",children:i.jsx("button",{type:"submit",disabled:g||l,className:"bg-gradient-to-r from-indigo-600 to-indigo-700 text-white font-semibold py-3 px-6 rounded-lg hover:from-indigo-700 hover:to-indigo-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[180px] shadow-md hover:shadow-lg transition-all",children:g?i.jsx(mF,{className:"w-5 h-5 animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(Jp,{className:"w-5 h-5"}),i.jsx("span",{children:h?"Regenerar Plan":"Generar con IA"})]})})}),v&&i.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:v})]})]}),h&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),i.jsx($Ke,{plan:h,onEditLesson:q,onUseLesson:D,onUpdatePlan:s,isLoading:g})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),l?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):i.jsxs("div",{className:"space-y-4",children:[console.log("💾 RENDERIZANDO HISTORIAL - Cantidad de planificaciones:",n.length),console.log("💾 RENDERIZANDO HISTORIAL - Cantidad de unidades:",n.filter(se=>se.tipo==="Unidad").length),n.length>0?n.filter(se=>se.tipo==="Unidad").map(se=>i.jsx("div",{className:`p-5 border rounded-xl transition-all ${(h==null?void 0:h.id)===se.id?"bg-indigo-50/50 border-indigo-200 dark:bg-indigo-900/20 dark:border-indigo-500/30 shadow-lg shadow-indigo-100/20 dark:shadow-indigo-900/10":"bg-white hover:bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:hover:bg-slate-700/50"}`,children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:se.nombreUnidad}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(se.fechaCreacion).toLocaleString("es-CL")]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",se.contenidos]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>L(se),className:"inline-flex items-center gap-1 px-3 py-1.5 text-indigo-700 bg-indigo-50 hover:bg-indigo-100 dark:text-indigo-300 dark:bg-indigo-900/30 dark:hover:bg-indigo-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:g,children:[i.jsx(i2e,{className:"w-4 h-4"}),i.jsx("span",{children:"Editar"})]}),i.jsxs("button",{onClick:()=>Z(se.id),title:"Eliminar",className:"inline-flex items-center gap-1 px-3 py-1.5 text-red-700 bg-red-50 hover:bg-red-100 dark:text-red-300 dark:bg-red-900/30 dark:hover:bg-red-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:g,children:[i.jsx(Is,{className:"w-4 h-4"}),i.jsx("span",{children:"Eliminar"})]})]})]})},se.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})]})]})]})},J=()=>{const te=n.filter(se=>se.tipo==="Clase").sort((se,ie)=>new Date(ie.fechaCreacion).getTime()-new Date(se.fechaCreacion).getTime());return T?i.jsx(GKe,{plan:T,onBack:()=>j(null),onDelete:V,onSave:async se=>{try{await s(se.id,se),j(se)}catch(ie){console.error("Error al actualizar plan de clase:",ie),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:g}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-lg border border-slate-100 dark:border-slate-700/50",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(gwe,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Planes de Clase"})]}),l?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):i.jsx("div",{className:"space-y-4",children:te.length>0?te.map(se=>i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:se.nombreClase}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(se.fechaCreacion).toLocaleString("es-CL")]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",se.contenidos]})]}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("button",{onClick:()=>j(se),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},se.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return C.useEffect(()=>{if((async()=>{try{if(console.log("📊 Diagnóstico de planificaciones - Inicio"),console.log(`userId: ${t}`),!t){console.warn("📊 Sin userId, no se pueden obtener planificaciones");return}const{collection:se,query:ie,where:ce,getDocs:de}=await ac(async()=>{const{collection:ke,query:ve,where:le,getDocs:be}=await Promise.resolve().then(()=>v_);return{collection:ke,query:ve,where:le,getDocs:be}},void 0),{db:Be}=await ac(async()=>{const{db:ke}=await Promise.resolve().then(()=>mte);return{db:ke}},void 0),ae=ie(se(Be,"planificaciones"),ce("userId","==",t)),Se=await de(ae);if(console.log(`📊 Documentos en Firestore: ${Se.docs.length}`),Se.docs.length>0){console.log("📊 Primer documento:",Se.docs[0].data());const ke=Se.docs.filter(le=>le.data().tipo==="Unidad");console.log(`📊 Documentos de tipo Unidad: ${ke.length}`);const ve=ke.filter(le=>Array.isArray(le.data().detallesLeccion)&&le.data().detallesLeccion!==void 0);if(console.log(`📊 Unidades con detallesLeccion válidos: ${ve.length}`),ke.length>ve.length){console.log(`📊 Intentando corregir ${ke.length-ve.length} unidades inválidas...`);for(const le of ke){const be=le.data();if(!Array.isArray(be.detallesLeccion)||be.detallesLeccion===void 0)try{console.log(`📊 Corrigiendo documento ${le.id}...`);const{doc:Pe,updateDoc:Ue}=await ac(async()=>{const{doc:pe,updateDoc:Oe}=await Promise.resolve().then(()=>v_);return{doc:pe,updateDoc:Oe}},void 0);await Ue(Pe(Be,"planificaciones",le.id),{detallesLeccion:[]}),console.log(`📊 Documento ${le.id} corregido con éxito`)}catch(Pe){console.error(`📊 Error al corregir documento ${le.id}:`,Pe)}}}}console.log("📊 Diagnóstico de planificaciones - Finalizado")}catch(se){console.error("📊 Error en diagnóstico de planificaciones:",se)}})(),!l){console.log(`🔍 Verificando ${n.length} planificaciones recibidas...`),console.log("🔍 Tipos de planificaciones:",n.map(ie=>ie.tipo));const se=n.filter(ie=>ie.tipo==="Unidad"&&(!Array.isArray(ie.detallesLeccion)||ie.detallesLeccion===void 0));se.length>0&&(console.warn(`🔍 Encontradas ${se.length} unidades con formato inválido`),se.forEach(async ie=>{try{await s(ie.id,{...ie,detallesLeccion:[]}),console.log(`🔍 Reparada planificación ${ie.id}`)}catch(ce){console.error(`🔍 Error al reparar planificación ${ie.id}:`,ce)}}))}},[t,n,l,s]),e?r?i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[i.jsx(fte,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación Docente"})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-2",children:i.jsxs("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[i.jsxs("button",{onClick:()=>_("unidad"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${w==="unidad"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(ol,{className:"w-4 h-4"}),i.jsx("span",{children:"Unidad"})]}),i.jsxs("button",{onClick:()=>_("clase"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${w==="clase"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(jEe,{className:"w-4 h-4"}),i.jsx("span",{children:"Clase"})]}),i.jsxs("button",{onClick:()=>_("calendario"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${w==="calendario"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(ic,{className:"w-4 h-4"}),i.jsx("span",{children:"Actividades Calendario"})]}),i.jsxs("button",{onClick:()=>_("materiales"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${w==="materiales"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[i.jsx(hF,{className:"w-4 h-4"}),i.jsx("span",{children:"Mis Materiales"})]})]})}),w==="unidad"&&z(),w==="clase"&&J(),w==="calendario"&&i.jsx(qKe,{userId:t}),w==="materiales"&&i.jsx(UKe,{userId:t,planificaciones:n}),I&&i.jsx(zKe,{lesson:I.lessonData,onClose:()=>E(null),onSave:G,isLoading:g})]}):i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-700 rounded-lg p-8 max-w-2xl mx-auto my-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-amber-800 dark:text-amber-300 mb-4",children:"Error de identificación de usuario"}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-md p-4 mb-4 overflow-auto max-h-40",children:i.jsx("pre",{className:"text-xs text-slate-600 dark:text-slate-300 whitespace-pre-wrap",children:JSON.stringify(e,null,2)})}),i.jsx("p",{className:"text-amber-700 dark:text-amber-400 mb-4",children:"No se pudo determinar su identificador de usuario para cargar las planificaciones. Este problema puede deberse a:"}),i.jsxs("ul",{className:"list-disc pl-5 text-amber-700 dark:text-amber-400 mb-6 space-y-2",children:[i.jsx("li",{children:"La sesión no se ha inicializado correctamente"}),i.jsx("li",{children:"Su cuenta no tiene asignado un ID válido"}),i.jsx("li",{children:"Hay un problema en la sincronización con la base de datos"})]}),i.jsx("div",{className:"flex justify-center",children:i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-600 hover:bg-amber-700 text-white py-2 px-6 rounded-md transition-colors",children:"Recargar aplicación"})})]}):i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),i.jsx("p",{className:"text-sm text-slate-400",children:"No se recibieron datos de usuario"})]})})},V4="events",WKe=async()=>{try{const e=Vt(pt(Er,V4),cr("date","asc"));return(await mn(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener eventos:",e),new Error("No se pudieron cargar los eventos del calendario")}},XKe=async e=>{try{return{id:(await an(pt(Er,V4),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear evento:",t),new Error("No se pudo crear el evento del calendario")}},YKe=async(e,t)=>{try{const r=rr(Er,V4,e);await Bl(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",e),new Error("No se pudo actualizar el evento del calendario")}},JKe=async e=>{try{const t=rr(Er,V4,e);await ka(t)}catch(t){throw console.error("Error al eliminar evento:",t,"ID:",e),new Error("No se pudo eliminar el evento del calendario")}},ZKe=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],pK={[fn.EVALUACION]:i.jsx(ol,{className:"h-4 w-4"}),[fn.ACTO]:i.jsx(U2e,{className:"h-4 w-4"}),[fn.ACTIVIDAD_FOCALIZADA]:i.jsx(lb,{className:"h-4 w-4"}),[fn.SALIDA_PEDAGOGICA]:i.jsx(iEe,{className:"h-4 w-4"})},eWe=e=>{switch(e.type){case fn.EVALUACION:return`${e.subtype} - ${e.asignatura}`;case fn.ACTO:return`Acto: ${e.ubicacion}`;case fn.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case fn.SALIDA_PEDAGOGICA:return`Salida: ${e.ubicacion}`;default:return"Evento"}},tWe=({isOpen:e,onClose:t,onSave:r,onDelete:n,event:a,date:s,isLoading:o})=>{const[l,c]=C.useState({});C.useEffect(()=>{c(a||{type:fn.EVALUACION,subtype:Fp.PRUEBA_PARCIAL,asignatura:Bs[0],curso:os[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a,e]);const u="w-full rounded-md border border-white/30 bg-white/10 dark:bg-white/5 text-slate-800 dark:text-slate-100 placeholder-slate-400 backdrop-blur-md shadow-sm focus:outline-none focus:ring-4 focus:ring-yellow-400/30 focus:border-blue-300 dark:border-white/10 dark:focus:border-blue-400",d=x=>{const{name:v,value:y}=x.target;c(w=>({...w,[v]:y}))},f=x=>{c(v=>{if(v.type===fn.SALIDA_PEDAGOGICA){const y=v.cursos||[],w=y.includes(x)?y.filter(_=>_!==x):[...y,x];return{...v,cursos:w.sort()}}return v})},h=x=>{var y;x.preventDefault();let v;switch(l.type){case fn.EVALUACION:{const w={date:s,type:fn.EVALUACION,subtype:l.subtype,asignatura:l.asignatura,curso:l.curso,contenidos:l.contenidos};(l.subtype===Fp.RUBRICA||l.subtype===Fp.PAUTA_COTEJO)&&((y=l.enlace)!=null&&y.trim())&&(w.enlace=l.enlace.trim()),v=w;break}case fn.ACTO:v={date:s,type:fn.ACTO,responsables:l.responsables,ubicacion:l.ubicacion,horario:l.horario};break;case fn.ACTIVIDAD_FOCALIZADA:v={date:s,type:fn.ACTIVIDAD_FOCALIZADA,responsables:l.responsables,ubicacion:l.ubicacion,horario:l.horario};break;case fn.SALIDA_PEDAGOGICA:v={date:s,type:fn.SALIDA_PEDAGOGICA,responsable:l.responsable,ubicacion:l.ubicacion,cursos:l.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(v)};if(!e)return null;const m=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),g=()=>{switch(l.type){case fn.EVALUACION:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Subtipo"}),i.jsx("select",{id:"subtype",name:"subtype",value:l.subtype,onChange:d,required:!0,className:u,children:qye.map(x=>i.jsx("option",{value:x,children:x},x))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsx("select",{id:"asignatura",name:"asignatura",value:l.asignatura,onChange:d,required:!0,className:u,children:Bs.map(x=>i.jsx("option",{value:x,children:x},x))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Curso"}),i.jsx("select",{id:"curso",name:"curso",value:l.curso,onChange:d,required:!0,className:u,children:os.map(x=>i.jsx("option",{value:x,children:x},x))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contenidos"}),i.jsx("textarea",{id:"contenidos",name:"contenidos",value:l.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(l.subtype===Fp.RUBRICA||l.subtype===Fp.PAUTA_COTEJO)&&i.jsxs("div",{children:[i.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),i.jsx("input",{id:"enlace",name:"enlace",type:"url",value:l.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case fn.ACTO:case fn.ACTIVIDAD_FOCALIZADA:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsables"}),i.jsx("input",{id:"responsables",name:"responsables",type:"text",value:l.responsables||"",onChange:d,required:!0,className:u})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación"}),i.jsxs("div",{className:"relative",children:[i.jsx(S_,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),i.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:l.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Horario"}),i.jsxs("div",{className:"relative",children:[i.jsx(Gf,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),i.jsx("input",{id:"horario",name:"horario",type:"text",value:l.horario||"",onChange:d,required:!0,className:`${u} pl-9`})]})]})]});case fn.SALIDA_PEDAGOGICA:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsable"}),i.jsx("input",{id:"responsable",name:"responsable",type:"text",value:l.responsable||"",onChange:d,required:!0,className:u})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),i.jsxs("div",{className:"relative",children:[i.jsx(S_,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),i.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:l.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),i.jsxs("fieldset",{children:[i.jsx("legend",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),i.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border border-white/30 dark:border-white/10 p-2 rounded-md text-slate-700 dark:text-slate-300 bg-white/5 backdrop-blur-md",children:os.map(x=>i.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:(l.cursos||[]).includes(x),onChange:()=>f(x),className:"h-4 w-4 rounded text-yellow-500 focus:ring-yellow-400"}),i.jsx("span",{children:x})]},x))})]})]});default:return null}};return i.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center p-4",onClick:t,style:{background:"rgba(2, 6, 23, 0.55)"},children:i.jsx("div",{className:"relative w-full max-w-lg overflow-hidden rounded-2xl border border-white/20 bg-gradient-to-br from-blue-50/70 via-white/50 to-yellow-50/70 dark:from-slate-900/70 dark:via-slate-900/60 dark:to-slate-900/70 backdrop-blur-2xl shadow-2xl",onClick:x=>x.stopPropagation(),children:i.jsxs("form",{onSubmit:h,children:[i.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:a?"Editar Evento":"Agregar Evento"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-300/90 font-semibold",children:m})]}),i.jsx("button",{type:"button",onClick:t,className:"rounded-full p-2 hover:bg-white/20 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:i.jsx(Nh,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),i.jsx("select",{id:"type",name:"type",value:l.type,onChange:d,className:u,children:Object.values(fn).map(x=>i.jsx("option",{value:x,children:x},x))})]}),g()]})]}),i.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-t border-white/20 flex justify-between items-center",children:[i.jsx("div",{children:a&&n&&i.jsxs("button",{type:"button",onClick:n,disabled:o,className:"inline-flex items-center gap-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:[i.jsx(Is,{className:"h-4 w-4"}),o?"Eliminando...":"Eliminar"]})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{type:"button",onClick:t,disabled:o,className:"inline-flex items-center gap-2 rounded-lg bg-white/20 px-4 py-2 font-semibold text-slate-800 hover:bg-white/30 backdrop-blur-md dark:bg-white/10 dark:text-slate-100 dark:hover:bg-white/20 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:[i.jsx(Nh,{className:"h-4 w-4"}),"Cancelar"]}),i.jsxs("button",{type:"submit",disabled:o,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-yellow-500 px-4 py-2 font-bold text-white hover:opacity-95 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-300/40",children:[i.jsx(Kc,{className:"h-4 w-4"}),o?"Guardando...":"Guardar"]})]})]})]})})})},rWe=({profile:e})=>{const[t,r]=C.useState(new Date),[n,a]=C.useState([]),[s,o]=C.useState(!1),[l,c]=C.useState(null),[u,d]=C.useState(!1),[f,h]=C.useState(Object.values(fn)),[m,g]=C.useState(!1),[x,v]=C.useState(null),[y,w]=C.useState(null),_=C.useCallback(async()=>{o(!0);try{const R=await WKe();a(R),c(null)}catch(R){console.error("Error al cargar eventos desde Firestore",R),c("No se pudieron cargar los eventos desde la nube.")}finally{o(!1)}},[]);C.useEffect(()=>{_()},[_]);const T=C.useMemo(()=>{const R=t.getFullYear(),k=t.getMonth(),D=new Date(R,k,1).getDay(),L=new Date(R,k+1,0).getDate(),Z=[];let V=1;for(let q=0;q<6;q++){const G=[];for(let K=0;K<7;K++)q===0&&K<D||V>L?G.push(null):(G.push(new Date(R,k,V)),V++);if(Z.push(G),V>L)break}return Z},[t]),j=R=>{h(k=>k.includes(R)?k.filter(D=>D!==R):[...k,R])},I=()=>{f.length===Object.values(fn).length?h([]):h(Object.values(fn))},E=R=>{e!==Gt.ESTUDIANTE&&(v(R.toISOString().split("T")[0]),w(null),g(!0))},S=(R,k)=>{k.stopPropagation(),e!==Gt.ESTUDIANTE&&(v(R.date),w(R),g(!0))},B=async R=>{d(!0);try{y?await YKe(y.id,R):await XKe(R),await _(),g(!1)}catch(k){console.error("Error al guardar evento:",k);const D=k instanceof Error?k.message:"Error desconocido";c(`Error al guardar el evento: ${D}`)}finally{d(!1)}},M=async()=>{if(y){d(!0);try{await JKe(y.id),await _(),g(!1)}catch(R){console.error("Error al eliminar evento:",R);const k=R instanceof Error?R.message:"Error desconocido";c(`No se pudo eliminar el evento: ${k}`)}finally{d(!1)}}};return i.jsxs("div",{className:`relative overflow-hidden rounded-xl p-6 md:p-8 shadow-md space-y-6 animate-fade-in
                    bg-gradient-to-br from-blue-50 via-white to-yellow-50 dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[i.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[i.jsx("div",{className:"absolute -top-20 -left-16 h-64 w-64 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-yellow-300 to-yellow-200 dark:from-yellow-500/15 dark:to-yellow-400/10"}),i.jsx("div",{className:"absolute bottom-0 right-0 h-72 w-72 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-sky-300 to-blue-300 dark:from-sky-500/15 dark:to-blue-500/15"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 drop-shadow-sm",children:"Calendario Académico"}),i.jsx("div",{className:"text-slate-600 dark:text-slate-300 text-sm",children:s&&i.jsx("span",{className:"px-2 py-1 rounded bg-white/30 dark:bg-white/10 backdrop-blur-md",children:"Cargando…"})})]}),l&&i.jsx("div",{className:"text-red-700 dark:text-red-400 bg-red-100/70 dark:bg-red-900/30 border border-red-300/50 dark:border-red-800/40 p-3 rounded-lg",children:l}),!s&&n.length===0&&i.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-yellow-400/40 bg-yellow-50/70 p-4 text-yellow-900 dark:bg-yellow-900/20 dark:text-yellow-300 backdrop-blur-md",children:[i.jsx(N2e,{className:"h-5 w-5 mt-0.5"}),i.jsx("p",{children:"No hay eventos registrados en la nube."})]}),i.jsxs("div",{className:"mb-2 rounded-xl border border-white/30 bg-white/30 dark:bg-white/10 backdrop-blur-xl p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 mb-2",children:[i.jsx(Kk,{className:"h-4 w-4"}),i.jsx("h2",{className:"text-lg font-semibold",children:"Filtrar por tipo de evento:"})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[i.jsx("button",{onClick:I,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-600 to-yellow-500 text-white hover:opacity-95 transition-colors",children:f.length===Object.values(fn).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(fn).map(R=>i.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2
                ${f.includes(R)?`shadow-sm ${Fv[R].color}`:"bg-white/40 text-slate-700 hover:bg-white/60 dark:bg-white/10 dark:text-slate-300 dark:hover:bg-white/20"}`,children:[i.jsx("input",{type:"checkbox",checked:f.includes(R),onChange:()=>j(R),className:"hidden"}),i.jsx("span",{className:"shrink-0",children:pK[R]}),i.jsx("span",{children:Fv[R].label})]},R))]})]}),i.jsxs("div",{className:"rounded-xl overflow-hidden border border-white/30 dark:border-white/10 backdrop-blur-xl bg-white/30 dark:bg-white/5",children:[i.jsxs("header",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-b border-white/20",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()-1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:i.jsx(Kw,{className:"h-5 w-5"})}),i.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()+1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:i.jsx(aR,{className:"h-5 w-5"})})]}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 capitalize",children:t.toLocaleString("es-CL",{month:"long",year:"numeric"})}),i.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-gradient-to-r from-blue-600 to-yellow-500 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:opacity-95",children:"Hoy"})]}),i.jsx("div",{className:"grid grid-cols-7 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:ZKe.map(R=>i.jsx("div",{className:`text-center font-semibold text-slate-600 dark:text-slate-300 text-sm py-3
                         bg-white/40 dark:bg-white/10
                         border-b border-r border-slate-200/80 dark:border-slate-700/70`,children:R},R))}),i.jsx("div",{className:"grid grid-cols-7 grid-rows-6 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:T.flat().map((R,k)=>{const D=R&&R.toDateString()===new Date().toDateString(),L=R==null?void 0:R.toISOString().split("T")[0],Z=L?n.filter(V=>V.date===L&&f.includes(V.type)):[];return i.jsx("div",{onClick:()=>R&&E(R),className:`border-b border-r border-slate-200/80 dark:border-slate-700/70
                            p-2 h-36 flex flex-col overflow-hidden relative group 
                            ${R?e!==Gt.ESTUDIANTE?"cursor-pointer hover:bg-white/40 dark:hover:bg-white/10":"":"bg-white/30 dark:bg-white/5"}`,children:R&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:`self-end text-sm font-semibold ${D?"bg-gradient-to-r from-blue-600 to-yellow-500 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-700 dark:text-slate-300"}`,children:R.getDate()}),i.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:Z.map(V=>i.jsxs("div",{onClick:q=>S(V,q),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${Fv[V.type].color}`,children:[i.jsx("span",{className:"shrink-0",children:pK[V.type]}),i.jsx("span",{className:"truncate",children:eWe(V)})]},V.id))}),e!==Gt.ESTUDIANTE&&i.jsx("button",{className:`absolute bottom-1 right-1 rounded-full h-7 w-7 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity 
                                   bg-gradient-to-r from-blue-600 to-yellow-500 text-white shadow`,"aria-label":"Agregar evento",children:i.jsx(Co,{className:"h-4 w-4"})})]})},k)})})]}),m&&i.jsx(tWe,{isOpen:m,onClose:()=>g(!1),onSave:B,onDelete:M,event:y,date:x,isLoading:u})]})},z4="anuncios",nWe=async()=>{try{const e=Vt(pt(Er,z4),cr("fechaPublicacion","desc"));return(await mn(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener anuncios:",e),new Error("No se pudieron cargar los anuncios")}},aWe=async e=>{try{return{id:(await an(pt(Er,z4),{...e,fechaPublicacion:e.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear anuncio:",t),new Error("No se pudo crear el anuncio")}},sWe=async(e,t)=>{try{const r=rr(Er,z4,e);await Bl(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",e),new Error("No se pudo actualizar el anuncio")}},iWe=async e=>{try{const t=rr(Er,z4,e);await ka(t)}catch(t){throw console.error("Error al eliminar anuncio:",t,"ID:",e),new Error("No se pudo eliminar el anuncio")}},gK=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],oWe=({currentUser:e})=>{const[t,r]=C.useState([]),[n,a]=C.useState(!1),[s,o]=C.useState(null),[l,c]=C.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=C.useState({tipo:"Todos",cursos:[]}),f=C.useCallback(async()=>{a(!0);try{const E=await nWe();r(E),o(null)}catch(E){console.error("Error al cargar anuncios desde Firestore",E),o("No se pudieron cargar los anuncios desde la nube.")}finally{a(!1)}},[]);C.useEffect(()=>{f()},[f]);const h=E=>{const{name:S,value:B}=E.target;c(M=>({...M,[S]:B}))},m=E=>{d({tipo:E,cursos:E==="Cursos"?[]:void 0})},g=E=>{d(S=>{var M;if(S.tipo!=="Cursos")return S;const B=(M=S.cursos)!=null&&M.includes(E)?S.cursos.filter(R=>R!==E):[...S.cursos||[],E];return{...S,cursos:B}})},x=async E=>{if(E.preventDefault(),!l.titulo||!l.mensaje){alert("Título y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const S={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:e.nombreCompleto,profileCreador:e.profile,destinatarios:u,...l};await aWe(S),await f(),c({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(S){console.error("Error al crear anuncio:",S),o("Error al publicar el anuncio en la nube.")}},v=async E=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await iWe(E),await f()}catch(S){console.error("Error al eliminar anuncio:",S),o("No se pudo eliminar el anuncio en la nube.")}},y=async E=>{try{const S=t.find(B=>B.id===E);S&&(await sWe(E,{destacado:!S.destacado}),await f())}catch(S){console.error("Error al actualizar anuncio:",S),o("No se pudo actualizar el estado del anuncio en la nube.")}},w=C.useMemo(()=>[...t].sort((E,S)=>E.destacado&&!S.destacado?-1:!E.destacado&&S.destacado?1:new Date(S.fechaPublicacion).getTime()-new Date(E.fechaPublicacion).getTime()),[t]),_=C.useMemo(()=>{const E=e.profile,S=e.curso;return w.filter(B=>{if(E===Gt.SUBDIRECCION)return!0;if(!B.destinatarios)return E!==Gt.ESTUDIANTE;const{tipo:M,cursos:R}=B.destinatarios;return M==="Todos"||M==="Profesores"&&E===Gt.PROFESORADO||M==="Coordinación TP"&&E===Gt.COORDINACION_TP?!0:M==="Cursos"?E===Gt.ESTUDIANTE?R==null?void 0:R.includes(S||""):!0:!1})},[w,e]),T=E=>e.profile===Gt.ESTUDIANTE?!1:e.profile===Gt.SUBDIRECCION||e.profile===E.profileCreador,j=()=>e.profile===Gt.SUBDIRECCION||e.profile===Gt.PROFESORADO,I="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&i.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),s&&i.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),e.profile!==Gt.ESTUDIANTE?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),i.jsxs("form",{onSubmit:x,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),i.jsx("input",{type:"text",name:"titulo",value:l.titulo,onChange:h,required:!0,className:I})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),i.jsx("textarea",{name:"mensaje",value:l.mensaje,onChange:h,required:!0,rows:4,className:I})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),i.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(E=>i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"destinatarioTipo",value:E,checked:u.tipo===E,onChange:()=>m(E),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:E.replace("Coordinación TP","Coord. TP")})]},E))})]}),u.tipo==="Cursos"&&i.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:os.map(E=>{var S;return i.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(S=u.cursos)==null?void 0:S.includes(E),onChange:()=>g(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:E})]},E)})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),i.jsx("input",{type:"url",name:"adjunto",value:l.adjunto,onChange:h,placeholder:"https://ejemplo.com/documento.pdf",className:I})]}),i.jsx("div",{className:"pt-2 text-right",children:i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!n&&_.length===0&&i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&_.length>0&&_.map((E,S)=>{const B=gK[S%gK.length];return i.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${B.bg} ${B.rotate}`,children:[E.destacado&&i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:i.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),i.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:E.titulo}),i.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:E.mensaje}),E.adjunto&&i.jsx("div",{className:"font-sans text-sm mb-4",children:i.jsxs("a",{href:E.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),i.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold",children:E.autor}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(E.fechaPublicacion).toLocaleString("es-CL")})]}),i.jsxs("div",{className:"flex items-center",children:[j()&&i.jsx("button",{onClick:()=>y(E.id),title:E.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:i.jsx("span",{className:`text-xl transition-opacity ${E.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),T(E)&&i.jsx("button",{onClick:()=>v(E.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},E.id)})})]})},kle="api_logs",lWe=async(e,t)=>{try{const r={module:e,userId:t.id,userEmail:t.email,userName:t.nombreCompleto,timestamp:ir.fromDate(new Date)};await an(pt(lt,kle),r)}catch(r){console.error("Error al registrar la llamada a la API en Firestore:",r)}},cWe=e=>{const t=Vt(pt(lt,kle),cr("timestamp","desc"));return hr(t,n=>{const a=n.docs.map(s=>{var l,c;const o=s.data();return{id:s.id,...o,timestamp:((c=(l=o.timestamp)==null?void 0:l.toDate)==null?void 0:c.call(l).toISOString())||o.timestamp}});e(a)},n=>{console.error("Error al suscribirse a los logs de API:",n),e([])})},Sb=(e,t)=>{if(!t||!t.id||!t.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es inválido o no está en sesión.");return}lWe(e,t)},lM="actas_de_reunion",uWe=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},dWe=e=>{const t=Vt(pt(lt,lM),cr("fechaCreacion","desc"));return hr(t,n=>{const a=n.docs.map(s=>uWe(s));e(a)},n=>{console.error("Error al suscribirse a las actas:",n),e([])})},fWe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:ir.fromDate(new Date(e.fechaCreacion))};return(await an(pt(lt,lM),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},AWe=async e=>{try{const t=rr(lt,lM,e);await ka(t)}catch(t){throw console.error("Error al eliminar el acta:",t),new Error("No se pudo eliminar el acta.")}},jle=window.SpeechRecognition||window.webkitSpeechRecognition,xK=!!jle,hWe=({isListening:e})=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),mWe=({currentUser:e})=>{const[t,r]=C.useState([]),[n,a]=C.useState(null),[s,o]=C.useState({tipoReunion:cB[0],asistentes:"",textoReunion:""}),[l,c]=C.useState(!1),[u,d]=C.useState(!1),[f,h]=C.useState(!0),[m,g]=C.useState(null),x=C.useRef(null);C.useEffect(()=>{h(!0);const E=dWe(S=>{r(S),!n&&S.length>0&&a(S[0]),h(!1)});return()=>E()},[n]);const v=E=>{const{name:S,value:B}=E.target;o(M=>({...M,[S]:B}))},y=C.useCallback(()=>{var E;if(!xK){g("El reconocimiento de voz no es compatible con este navegador.");return}l?(E=x.current)==null||E.stop():(x.current=new jle,x.current.lang="es-CL",x.current.continuous=!0,x.current.interimResults=!0,x.current.onresult=S=>{let B="";for(let M=S.resultIndex;M<S.results.length;++M)S.results[M].isFinal&&(B+=S.results[M][0].transcript+". ");o(M=>({...M,textoReunion:M.textoReunion+B}))},x.current.onstart=()=>c(!0),x.current.onend=()=>c(!1),x.current.onerror=S=>{console.error("Speech recognition error",S.error),g(`Error de reconocimiento: ${S.error}`),c(!1)},x.current.start())},[l]),w=async E=>{E.preventDefault();const{tipoReunion:S,asistentes:B,textoReunion:M}=s;if(!S||!B.trim()||!M.trim()){g("Todos los campos son obligatorios.");return}d(!0),g(null);try{Sb("Generador de Actas");const R="",D=new globalThis.GoogleGenerativeAI(R).getGenerativeModel({model:"gemini-pro"}),L=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${M}"
                
                Asistentes a la reunión para referencia de nombres: ${B}
            `,G=(await(await D.generateContent(L)).response).text().replace(/^```json\s*|```\s*$/g,""),K=JSON.parse(G),ee={fechaCreacion:new Date().toISOString(),...s,...K},W=await fWe(ee,e);o({tipoReunion:cB[0],asistentes:"",textoReunion:""})}catch(R){console.error("Error al analizar acta con IA:",R),g("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{d(!1)}},_=async E=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?"))try{await AWe(E),(n==null?void 0:n.id)===E&&a(t.length>1?t[1]:null)}catch(S){console.error("Error deleting acta:",S),alert("No se pudo eliminar el acta.")}},T=E=>{a(E)},j=E=>E.temas||E.acuerdos||E.plazos||E.responsables?i.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),E.temas&&E.temas.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),i.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.temas.map((B,M)=>i.jsx("li",{children:B},M))})]}),E.acuerdos&&E.acuerdos.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),i.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.acuerdos.map((B,M)=>i.jsx("li",{children:B},M))})]}),E.plazos&&E.plazos.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),i.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.plazos.map((B,M)=>i.jsx("li",{children:B},M))})]}),E.responsables&&E.responsables.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),i.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.responsables.map((B,M)=>i.jsx("li",{children:B},M))})]})]}):null,I="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return f?i.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[i.jsxs("div",{className:"md:col-span-1 space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),i.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:i.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),i.jsx("div",{className:"ml-3",children:i.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",i.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),i.jsx("select",{name:"tipoReunion",value:s.tipoReunion,onChange:v,required:!0,className:I,children:cB.map(E=>i.jsx("option",{value:E,children:E},E))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),i.jsx("textarea",{name:"asistentes",value:s.asistentes,onChange:v,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:I})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),i.jsxs("div",{className:"relative",children:[i.jsx("textarea",{name:"textoReunion",value:s.textoReunion,onChange:v,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:I}),xK&&i.jsx("button",{type:"button",onClick:y,title:l?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${l?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:i.jsx(hWe,{isListening:l})})]})]}),m&&i.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:m}),i.jsx("div",{className:"pt-2 text-right",children:i.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:u?i.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),i.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.map(E=>i.jsxs("button",{onClick:()=>T(E),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===E.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.tipoReunion}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(E.fechaCreacion).toLocaleDateString("es-CL")})]},E.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),i.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?i.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${n.tipoReunion}`}),i.jsx("button",{onClick:()=>_(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[i.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),i.jsx("h2",{children:"Asistentes"}),i.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((E,S)=>E.trim()&&i.jsx("li",{children:E.trim()},S))}),j(n),i.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:i.jsx("p",{children:n.textoReunion})})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[i.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})};function ga(e){"@babel/helpers - typeof";return ga=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ga(e)}var nl=Uint8Array,$c=Uint16Array,cM=Int32Array,$4=new nl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),G4=new nl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_O=new nl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ble=function(e,t){for(var r=new $c(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new cM(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},Tle=Ble($4,2),Ile=Tle.b,SO=Tle.r;Ile[28]=258,SO[258]=28;var Fle=Ble(G4,0),pWe=Fle.b,vK=Fle.r,kO=new $c(32768);for(var Qa=0;Qa<32768;++Qa){var F0=(Qa&43690)>>1|(Qa&21845)<<1;F0=(F0&52428)>>2|(F0&13107)<<2,F0=(F0&61680)>>4|(F0&3855)<<4,kO[Qa]=((F0&65280)>>8|(F0&255)<<8)>>1}var aA=function(e,t,r){for(var n=e.length,a=0,s=new $c(t);a<n;++a)e[a]&&++s[e[a]-1];var o=new $c(t);for(a=1;a<t;++a)o[a]=o[a-1]+s[a-1]<<1;var l;if(r){l=new $c(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=o[e[a]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)l[kO[f]>>c]=u}else for(l=new $c(n),a=0;a<n;++a)e[a]&&(l[a]=kO[o[e[a]-1]++]>>15-e[a]);return l},Om=new nl(288);for(var Qa=0;Qa<144;++Qa)Om[Qa]=8;for(var Qa=144;Qa<256;++Qa)Om[Qa]=9;for(var Qa=256;Qa<280;++Qa)Om[Qa]=7;for(var Qa=280;Qa<288;++Qa)Om[Qa]=8;var S2=new nl(32);for(var Qa=0;Qa<32;++Qa)S2[Qa]=5;var gWe=aA(Om,9,0),xWe=aA(Om,9,1),vWe=aA(S2,5,0),bWe=aA(S2,5,1),wI=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Nd=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},EI=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},uM=function(e){return(e+7)/8|0},Ole=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new nl(e.subarray(t,r))},yWe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Sd=function(e,t,r){var n=new Error(t||yWe[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Sd),!r)throw n;return n},wWe=function(e,t,r,n){var a=e.length,s=0;if(!a||t.f&&!t.l)return r||new nl(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new nl(a*3));var u=function(Be){var ae=r.length;if(Be>ae){var Se=new nl(Math.max(ae*2,Be));Se.set(r),r=Se}},d=t.f||0,f=t.p||0,h=t.b||0,m=t.l,g=t.d,x=t.m,v=t.n,y=a*8;do{if(!m){d=Nd(e,f,1);var w=Nd(e,f+1,3);if(f+=3,w)if(w==1)m=xWe,g=bWe,x=9,v=5;else if(w==2){var I=Nd(e,f,31)+257,E=Nd(e,f+10,15)+4,S=I+Nd(e,f+5,31)+1;f+=14;for(var B=new nl(S),M=new nl(19),R=0;R<E;++R)M[_O[R]]=Nd(e,f+R*3,7);f+=E*3;for(var k=wI(M),D=(1<<k)-1,L=aA(M,k,1),R=0;R<S;){var Z=L[Nd(e,f,D)];f+=Z&15;var _=Z>>4;if(_<16)B[R++]=_;else{var V=0,q=0;for(_==16?(q=3+Nd(e,f,3),f+=2,V=B[R-1]):_==17?(q=3+Nd(e,f,7),f+=3):_==18&&(q=11+Nd(e,f,127),f+=7);q--;)B[R++]=V}}var G=B.subarray(0,I),K=B.subarray(I);x=wI(G),v=wI(K),m=aA(G,x,1),g=aA(K,v,1)}else Sd(1);else{var _=uM(f)+4,T=e[_-4]|e[_-3]<<8,j=_+T;if(j>a){c&&Sd(0);break}l&&u(h+T),r.set(e.subarray(_,j),h),t.b=h+=T,t.p=f=j*8,t.f=d;continue}if(f>y){c&&Sd(0);break}}l&&u(h+131072);for(var ee=(1<<x)-1,W=(1<<v)-1,P=f;;P=f){var V=m[EI(e,f)&ee],U=V>>4;if(f+=V&15,f>y){c&&Sd(0);break}if(V||Sd(2),U<256)r[h++]=U;else if(U==256){P=f,m=null;break}else{var z=U-254;if(U>264){var R=U-257,J=$4[R];z=Nd(e,f,(1<<J)-1)+Ile[R],f+=J}var te=g[EI(e,f)&W],se=te>>4;te||Sd(3),f+=te&15;var K=pWe[se];if(se>3){var J=G4[se];K+=EI(e,f)&(1<<J)-1,f+=J}if(f>y){c&&Sd(0);break}l&&u(h+131072);var ie=h+z;if(h<K){var ce=s-K,de=Math.min(K,ie);for(ce+h<0&&Sd(3);h<de;++h)r[h]=n[ce+h]}for(;h<ie;++h)r[h]=r[h-K]}}t.l=m,t.p=P,t.b=h,t.f=d,m&&(d=1,t.m=x,t.d=g,t.n=v)}while(!d);return h!=r.length&&o?Ole(r,0,h):r.subarray(0,h)},zA=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},vy=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},NI=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,s=r.slice();if(!a)return{t:Ple,l:0};if(a==1){var o=new nl(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(j,I){return j.f-I.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var h=s[0].s,n=1;n<a;++n)s[n].s>h&&(h=s[n].s);var m=new $c(h+1),g=jO(r[d-1],m,0);if(g>t){var n=0,x=0,v=g-t,y=1<<v;for(s.sort(function(I,E){return m[E.s]-m[I.s]||I.f-E.f});n<a;++n){var w=s[n].s;if(m[w]>t)x+=y-(1<<g-m[w]),m[w]=t;else break}for(x>>=v;x>0;){var _=s[n].s;m[_]<t?x-=1<<t-m[_]++-1:++n}for(;n>=0&&x;--n){var T=s[n].s;m[T]==t&&(--m[T],++x)}g=t}return{t:new nl(m),l:g}},jO=function(e,t,r){return e.s==-1?Math.max(jO(e.l,t,r+1),jO(e.r,t,r+1)):t[e.s]=r},bK=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new $c(++t),n=0,a=e[0],s=1,o=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=e[l]}return{c:r.subarray(0,n),n:t}},by=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},Dle=function(e,t,r){var n=r.length,a=uM(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=r[s];return(a+4+n)*8},yK=function(e,t,r,n,a,s,o,l,c,u,d){zA(t,d++,r),++a[256];for(var f=NI(a,15),h=f.t,m=f.l,g=NI(s,15),x=g.t,v=g.l,y=bK(h),w=y.c,_=y.n,T=bK(x),j=T.c,I=T.n,E=new $c(19),S=0;S<w.length;++S)++E[w[S]&31];for(var S=0;S<j.length;++S)++E[j[S]&31];for(var B=NI(E,7),M=B.t,R=B.l,k=19;k>4&&!M[_O[k-1]];--k);var D=u+5<<3,L=by(a,Om)+by(s,S2)+o,Z=by(a,h)+by(s,x)+o+14+3*k+by(E,M)+2*E[16]+3*E[17]+7*E[18];if(c>=0&&D<=L&&D<=Z)return Dle(t,d,e.subarray(c,c+u));var V,q,G,K;if(zA(t,d,1+(Z<L)),d+=2,Z<L){V=aA(h,m,0),q=h,G=aA(x,v,0),K=x;var ee=aA(M,R,0);zA(t,d,_-257),zA(t,d+5,I-1),zA(t,d+10,k-4),d+=14;for(var S=0;S<k;++S)zA(t,d+3*S,M[_O[S]]);d+=3*k;for(var W=[w,j],P=0;P<2;++P)for(var U=W[P],S=0;S<U.length;++S){var z=U[S]&31;zA(t,d,ee[z]),d+=M[z],z>15&&(zA(t,d,U[S]>>5&127),d+=U[S]>>12)}}else V=gWe,q=Om,G=vWe,K=S2;for(var S=0;S<l;++S){var J=n[S];if(J>255){var z=J>>18&31;vy(t,d,V[z+257]),d+=q[z+257],z>7&&(zA(t,d,J>>23&31),d+=$4[z]);var te=J&31;vy(t,d,G[te]),d+=K[te],te>3&&(vy(t,d,J>>5&8191),d+=G4[te])}else vy(t,d,V[J]),d+=q[J]}return vy(t,d,V[256]),d+q[256]},EWe=new cM([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ple=new nl(0),NWe=function(e,t,r,n,a,s){var o=s.z||e.length,l=new nl(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),u=s.l,d=(s.r||0)&7;if(t){d&&(c[0]=s.r>>3);for(var f=EWe[t-1],h=f>>13,m=f&8191,g=(1<<r)-1,x=s.p||new $c(32768),v=s.h||new $c(g+1),y=Math.ceil(r/3),w=2*y,_=function(ke){return(e[ke]^e[ke+1]<<y^e[ke+2]<<w)&g},T=new cM(25e3),j=new $c(288),I=new $c(32),E=0,S=0,B=s.i||0,M=0,R=s.w||0,k=0;B+2<o;++B){var D=_(B),L=B&32767,Z=v[D];if(x[L]=Z,v[D]=L,R<=B){var V=o-B;if((E>7e3||M>24576)&&(V>423||!u)){d=yK(e,c,0,T,j,I,S,M,k,B-k,d),M=E=S=0,k=B;for(var q=0;q<286;++q)j[q]=0;for(var q=0;q<30;++q)I[q]=0}var G=2,K=0,ee=m,W=L-Z&32767;if(V>2&&D==_(B-W))for(var P=Math.min(h,V)-1,U=Math.min(32767,B),z=Math.min(258,V);W<=U&&--ee&&L!=Z;){if(e[B+G]==e[B+G-W]){for(var J=0;J<z&&e[B+J]==e[B+J-W];++J);if(J>G){if(G=J,K=W,J>P)break;for(var te=Math.min(W,J-2),se=0,q=0;q<te;++q){var ie=B-W+q&32767,ce=x[ie],de=ie-ce&32767;de>se&&(se=de,Z=ie)}}}L=Z,Z=x[L],W+=L-Z&32767}if(K){T[M++]=268435456|SO[G]<<18|vK[K];var Be=SO[G]&31,ae=vK[K]&31;S+=$4[Be]+G4[ae],++j[257+Be],++I[ae],R=B+G,++E}else T[M++]=e[B],++j[e[B]]}}for(B=Math.max(B,R);B<o;++B)T[M++]=e[B],++j[e[B]];d=yK(e,c,u,T,j,I,S,M,k,B-k,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=v,s.p=x,s.i=B,s.w=R)}else{for(var B=s.w||0;B<o+u;B+=65535){var Se=B+65535;Se>=o&&(c[d/8|0]=u,Se=o),d=Dle(c,d+1,e.subarray(B,Se))}s.i=o}return Ole(l,0,n+uM(d)+a)},Rle=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=r.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},CWe=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),o=new nl(s.length+e.length);o.set(s),o.set(e,s.length),e=o,a.w=s.length}return NWe(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},Lle=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},_We=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=Rle();a.p(t.dictionary),Lle(e,2,a.d())}},SWe=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Sd(6,"invalid zlib data"),(e[1]>>5&1)==1&&Sd(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function BO(e,t){t||(t={});var r=Rle();r.p(e);var n=CWe(e,t,t.dictionary?6:2,4);return _We(n,t),Lle(n,n.length-4,r.d()),n}function kWe(e,t){return wWe(e.subarray(SWe(e),-4),{i:2},t,t)}var jWe=typeof TextDecoder<"u"&&new TextDecoder,BWe=0;try{jWe.decode(Ple,{stream:!0}),BWe=1}catch{}var Qr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function CI(){Qr.console&&typeof Qr.console.log=="function"&&Qr.console.log.apply(Qr.console,arguments)}var Ca={log:CI,warn:function(e){Qr.console&&(typeof Qr.console.warn=="function"?Qr.console.warn.apply(Qr.console,arguments):CI.call(null,arguments))},error:function(e){Qr.console&&(typeof Qr.console.error=="function"?Qr.console.error.apply(Qr.console,arguments):CI(e))}};function _I(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){Tp(n.response,t,r)},n.onerror=function(){Ca.error("could not download file")},n.send()}function wK(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function yC(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var kw,TO,Tp=Qr.saveAs||((typeof window>"u"?"undefined":ga(window))!=="object"||window!==Qr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Qr.URL||Qr.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?wK(a.href)?_I(e,t,r):yC(a,a.target="_blank"):yC(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){yC(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(wK(e))_I(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){yC(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:ga(s)!=="object"&&(Ca.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return _I(e,t,r);var a=e.type==="application/octet-stream",s=/constructor/i.test(Qr.HTMLElement)||Qr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&s)&&(typeof FileReader>"u"?"undefined":ga(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(e)}else{var c=Qr.URL||Qr.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Mle(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,o=a.exec(e);o&&(t=s(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function SI(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=Qo(r,n,a,s,t[0],7,-680876936),s=Qo(s,r,n,a,t[1],12,-389564586),a=Qo(a,s,r,n,t[2],17,606105819),n=Qo(n,a,s,r,t[3],22,-1044525330),r=Qo(r,n,a,s,t[4],7,-176418897),s=Qo(s,r,n,a,t[5],12,1200080426),a=Qo(a,s,r,n,t[6],17,-1473231341),n=Qo(n,a,s,r,t[7],22,-45705983),r=Qo(r,n,a,s,t[8],7,1770035416),s=Qo(s,r,n,a,t[9],12,-1958414417),a=Qo(a,s,r,n,t[10],17,-42063),n=Qo(n,a,s,r,t[11],22,-1990404162),r=Qo(r,n,a,s,t[12],7,1804603682),s=Qo(s,r,n,a,t[13],12,-40341101),a=Qo(a,s,r,n,t[14],17,-1502002290),r=Ho(r,n=Qo(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=Ho(s,r,n,a,t[6],9,-1069501632),a=Ho(a,s,r,n,t[11],14,643717713),n=Ho(n,a,s,r,t[0],20,-373897302),r=Ho(r,n,a,s,t[5],5,-701558691),s=Ho(s,r,n,a,t[10],9,38016083),a=Ho(a,s,r,n,t[15],14,-660478335),n=Ho(n,a,s,r,t[4],20,-405537848),r=Ho(r,n,a,s,t[9],5,568446438),s=Ho(s,r,n,a,t[14],9,-1019803690),a=Ho(a,s,r,n,t[3],14,-187363961),n=Ho(n,a,s,r,t[8],20,1163531501),r=Ho(r,n,a,s,t[13],5,-1444681467),s=Ho(s,r,n,a,t[2],9,-51403784),a=Ho(a,s,r,n,t[7],14,1735328473),r=Vo(r,n=Ho(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=Vo(s,r,n,a,t[8],11,-2022574463),a=Vo(a,s,r,n,t[11],16,1839030562),n=Vo(n,a,s,r,t[14],23,-35309556),r=Vo(r,n,a,s,t[1],4,-1530992060),s=Vo(s,r,n,a,t[4],11,1272893353),a=Vo(a,s,r,n,t[7],16,-155497632),n=Vo(n,a,s,r,t[10],23,-1094730640),r=Vo(r,n,a,s,t[13],4,681279174),s=Vo(s,r,n,a,t[0],11,-358537222),a=Vo(a,s,r,n,t[3],16,-722521979),n=Vo(n,a,s,r,t[6],23,76029189),r=Vo(r,n,a,s,t[9],4,-640364487),s=Vo(s,r,n,a,t[12],11,-421815835),a=Vo(a,s,r,n,t[15],16,530742520),r=zo(r,n=Vo(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=zo(s,r,n,a,t[7],10,1126891415),a=zo(a,s,r,n,t[14],15,-1416354905),n=zo(n,a,s,r,t[5],21,-57434055),r=zo(r,n,a,s,t[12],6,1700485571),s=zo(s,r,n,a,t[3],10,-1894986606),a=zo(a,s,r,n,t[10],15,-1051523),n=zo(n,a,s,r,t[1],21,-2054922799),r=zo(r,n,a,s,t[8],6,1873313359),s=zo(s,r,n,a,t[15],10,-30611744),a=zo(a,s,r,n,t[6],15,-1560198380),n=zo(n,a,s,r,t[13],21,1309151649),r=zo(r,n,a,s,t[4],6,-145523070),s=zo(s,r,n,a,t[11],10,-1120210379),a=zo(a,s,r,n,t[2],15,718787259),n=zo(n,a,s,r,t[9],21,-343485551),e[0]=em(r,e[0]),e[1]=em(n,e[1]),e[2]=em(a,e[2]),e[3]=em(s,e[3])}function q4(e,t,r,n,a,s){return t=em(em(t,e),em(n,s)),em(t<<a|t>>>32-a,r)}function Qo(e,t,r,n,a,s,o){return q4(t&r|~t&n,e,t,a,s,o)}function Ho(e,t,r,n,a,s,o){return q4(t&n|r&~n,e,t,a,s,o)}function Vo(e,t,r,n,a,s,o){return q4(t^r^n,e,t,a,s,o)}function zo(e,t,r,n,a,s,o){return q4(r^(t|~n),e,t,a,s,o)}function Ule(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)SI(n,TWe(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(SI(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,SI(n,a),n}function TWe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}kw=Qr.atob.bind(Qr),TO=Qr.btoa.bind(Qr);var EK="0123456789abcdef".split("");function IWe(e){for(var t="",r=0;r<4;r++)t+=EK[e>>8*r+4&15]+EK[e>>8*r&15];return t}function FWe(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function IO(e){return Ule(e).map(FWe).join("")}var OWe=function(e){for(var t=0;t<e.length;t++)e[t]=IWe(e[t]);return e.join("")}(Ule("hello"))!="5d41402abc4b2a76b9719d911017c592";function em(e,t){if(OWe){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function FO(e,t){var r,n,a,s;if(e!==r){for(var o=(a=e,s=1+(256/e.length>>0),new Array(s+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=e,n=l}else l=n;var f=t.length,h=0,m=0,g="";for(c=0;c<f;c++)m=(m+(d=l[h=(h+1)%256]))%256,l[h]=l[m],l[m]=d,o=l[(l[h]+l[m])%256],g+=String.fromCharCode(t.charCodeAt(c)^o);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var NK={print:4,modify:8,copy:16,"annot-forms":32};function uv(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(NK.perm!==void 0)throw new Error("Invalid permission: "+l);a+=NK[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^a)),this.encryptionKey=IO(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=FO(this.encryptionKey,this.padding)}function dv(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function CK(e){if(ga(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var o=t[r][s];try{o[0].apply(e,n)}catch(l){Qr.console&&Ca.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function BS(e){if(!(this instanceof BS))return new BS(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function Qle(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Pp(e,t,r,n,a){if(!(this instanceof Pp))return new Pp(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,Qle.call(this,n,a)}function yv(e,t,r,n,a){if(!(this instanceof yv))return new yv(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Qle.call(this,n,a)}function vr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],o=[],l=1,c=16,u="S",d=null;ga(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,s=e.compress||e.compressPdf||s,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),o=e.filters||(s===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,h={},m={internal:{},__private__:{}};m.__private__.PubSub=CK;var g="1.3",x=m.__private__.getPdfVersion=function(){return g};m.__private__.setPdfVersion=function(Y){g=Y};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return v};var y=m.__private__.getPageFormat=function(Y){return v[Y]};a=a||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},_=w.COMPAT;function T(){this.saveGraphicsState(),le(new bt(wt,0,0,-wt,0,Qi()*wt).toString()+" cm"),this.setFontSize(this.getFontSize()/wt),u="n",_=w.ADVANCED}function j(){this.restoreGraphicsState(),u="S",_=w.COMPAT}var I=m.__private__.combineFontStyleAndFontWeight=function(Y,he){if(Y=="bold"&&he=="normal"||Y=="bold"&&he==400||Y=="normal"&&he=="italic"||Y=="bold"&&he=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return he&&(Y=he==400||he==="normal"?Y==="italic"?"italic":"normal":he!=700&&he!=="bold"||Y!=="normal"?(he==700?"bold":he)+""+Y:"bold"),Y};m.advancedAPI=function(Y){var he=_===w.COMPAT;return he&&T.call(this),typeof Y!="function"||(Y(this),he&&j.call(this)),this},m.compatAPI=function(Y){var he=_===w.ADVANCED;return he&&j.call(this),typeof Y!="function"||(Y(this),he&&T.call(this)),this},m.isAdvancedAPI=function(){return _===w.ADVANCED};var E,S=function(Y){if(_!==w.ADVANCED)throw new Error(Y+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},B=m.roundToPrecision=m.__private__.roundToPrecision=function(Y,he){var De=t||he;if(isNaN(Y)||isNaN(De))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Y.toFixed(De).replace(/0+$/,"")};E=m.hpf=m.__private__.hpf=typeof c=="number"?function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return B(Y,c)}:c==="smart"?function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return B(Y,Y>-1&&Y<1?16:5)}:function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return B(Y,16)};var M=m.f2=m.__private__.f2=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.f2");return B(Y,2)},R=m.__private__.f3=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.f3");return B(Y,3)},k=m.scale=m.__private__.scale=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.scale");return _===w.COMPAT?Y*wt:_===w.ADVANCED?Y:void 0},D=function(Y){return _===w.COMPAT?Qi()-Y:_===w.ADVANCED?Y:void 0},L=function(Y){return k(D(Y))};m.__private__.setPrecision=m.setPrecision=function(Y){typeof parseInt(Y,10)=="number"&&(t=parseInt(Y,10))};var Z,V="00000000000000000000000000000000",q=m.__private__.getFileId=function(){return V},G=m.__private__.setFileId=function(Y){return V=Y!==void 0&&/^[a-fA-F0-9]{32}$/.test(Y)?Y.toUpperCase():V.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ca=new uv(d.userPermissions,d.userPassword,d.ownerPassword,V)),V};m.setFileId=function(Y){return G(Y),this},m.getFileId=function(){return q()};var K=m.__private__.convertDateToPDFDate=function(Y){var he=Y.getTimezoneOffset(),De=he<0?"+":"-",Me=Math.floor(Math.abs(he/60)),Ke=Math.abs(he%60),yt=[De,z(Me),"'",z(Ke),"'"].join("");return["D:",Y.getFullYear(),z(Y.getMonth()+1),z(Y.getDate()),z(Y.getHours()),z(Y.getMinutes()),z(Y.getSeconds()),yt].join("")},ee=m.__private__.convertPDFDateToDate=function(Y){var he=parseInt(Y.substr(2,4),10),De=parseInt(Y.substr(6,2),10)-1,Me=parseInt(Y.substr(8,2),10),Ke=parseInt(Y.substr(10,2),10),yt=parseInt(Y.substr(12,2),10),Lt=parseInt(Y.substr(14,2),10);return new Date(he,De,Me,Ke,yt,Lt,0)},W=m.__private__.setCreationDate=function(Y){var he;if(Y===void 0&&(Y=new Date),Y instanceof Date)he=K(Y);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Y))throw new Error("Invalid argument passed to jsPDF.setCreationDate");he=Y}return Z=he},P=m.__private__.getCreationDate=function(Y){var he=Z;return Y==="jsDate"&&(he=ee(Z)),he};m.setCreationDate=function(Y){return W(Y),this},m.getCreationDate=function(Y){return P(Y)};var U,z=m.__private__.padd2=function(Y){return("0"+parseInt(Y)).slice(-2)},J=m.__private__.padd2Hex=function(Y){return("00"+(Y=Y.toString())).substr(Y.length)},te=0,se=[],ie=[],ce=0,de=[],Be=[],ae=!1,Se=ie,ke=function(){te=0,ce=0,ie=[],se=[],de=[],_e=Kr(),Ne=Kr()};m.__private__.setCustomOutputDestination=function(Y){ae=!0,Se=Y};var ve=function(Y){ae||(Se=Y)};m.__private__.resetCustomOutputDestination=function(){ae=!1,Se=ie};var le=m.__private__.out=function(Y){return Y=Y.toString(),ce+=Y.length+1,Se.push(Y),Se},be=m.__private__.write=function(Y){return le(arguments.length===1?Y.toString():Array.prototype.join.call(arguments," "))},Pe=m.__private__.getArrayBuffer=function(Y){for(var he=Y.length,De=new ArrayBuffer(he),Me=new Uint8Array(De);he--;)Me[he]=Y.charCodeAt(he);return De},Ue=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Ue};var pe=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(Y){return pe=_===w.ADVANCED?Y/wt:Y,this};var Oe,Le=m.__private__.getFontSize=m.getFontSize=function(){return _===w.COMPAT?pe:pe*wt},Ge=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(Y){return Ge=Y,this},m.__private__.getR2L=m.getR2L=function(){return Ge};var et,ut=m.__private__.setZoomMode=function(Y){var he=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Y))Oe=Y;else if(isNaN(Y)){if(he.indexOf(Y)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Y+'" is not recognized.');Oe=Y}else Oe=parseInt(Y,10)};m.__private__.getZoomMode=function(){return Oe};var xt,It=m.__private__.setPageMode=function(Y){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Y)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Y+'" is not recognized.');et=Y};m.__private__.getPageMode=function(){return et};var Mt=m.__private__.setLayoutMode=function(Y){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Y)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Y+'" is not recognized.');xt=Y};m.__private__.getLayoutMode=function(){return xt},m.__private__.setDisplayMode=m.setDisplayMode=function(Y,he,De){return ut(Y),Mt(he),It(De),this};var Pt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(Y){if(Object.keys(Pt).indexOf(Y)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Pt[Y]},m.__private__.getDocumentProperties=function(){return Pt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(Y){for(var he in Pt)Pt.hasOwnProperty(he)&&Y[he]&&(Pt[he]=Y[he]);return this},m.__private__.setDocumentProperty=function(Y,he){if(Object.keys(Pt).indexOf(Y)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Pt[Y]=he};var Ht,wt,Tr,tr,sn,kr={},$r={},Fn=[],Pr={},ms={},pn={},la={},Ba=null,rn=0,gr=[],Ze=new CK(m),mt=e.hotfixes||[],Je={},vt={},Et=[],bt=function Y(he,De,Me,Ke,yt,Lt){if(!(this instanceof Y))return new Y(he,De,Me,Ke,yt,Lt);isNaN(he)&&(he=1),isNaN(De)&&(De=0),isNaN(Me)&&(Me=0),isNaN(Ke)&&(Ke=1),isNaN(yt)&&(yt=0),isNaN(Lt)&&(Lt=0),this._matrix=[he,De,Me,Ke,yt,Lt]};Object.defineProperty(bt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Y){this._matrix[0]=Y}}),Object.defineProperty(bt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Y){this._matrix[1]=Y}}),Object.defineProperty(bt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Y){this._matrix[2]=Y}}),Object.defineProperty(bt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Y){this._matrix[3]=Y}}),Object.defineProperty(bt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Y){this._matrix[4]=Y}}),Object.defineProperty(bt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Y){this._matrix[5]=Y}}),Object.defineProperty(bt.prototype,"a",{get:function(){return this._matrix[0]},set:function(Y){this._matrix[0]=Y}}),Object.defineProperty(bt.prototype,"b",{get:function(){return this._matrix[1]},set:function(Y){this._matrix[1]=Y}}),Object.defineProperty(bt.prototype,"c",{get:function(){return this._matrix[2]},set:function(Y){this._matrix[2]=Y}}),Object.defineProperty(bt.prototype,"d",{get:function(){return this._matrix[3]},set:function(Y){this._matrix[3]=Y}}),Object.defineProperty(bt.prototype,"e",{get:function(){return this._matrix[4]},set:function(Y){this._matrix[4]=Y}}),Object.defineProperty(bt.prototype,"f",{get:function(){return this._matrix[5]},set:function(Y){this._matrix[5]=Y}}),Object.defineProperty(bt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(bt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(bt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(bt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),bt.prototype.join=function(Y){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(Y)},bt.prototype.multiply=function(Y){var he=Y.sx*this.sx+Y.shy*this.shx,De=Y.sx*this.shy+Y.shy*this.sy,Me=Y.shx*this.sx+Y.sy*this.shx,Ke=Y.shx*this.shy+Y.sy*this.sy,yt=Y.tx*this.sx+Y.ty*this.shx+this.tx,Lt=Y.tx*this.shy+Y.ty*this.sy+this.ty;return new bt(he,De,Me,Ke,yt,Lt)},bt.prototype.decompose=function(){var Y=this.sx,he=this.shy,De=this.shx,Me=this.sy,Ke=this.tx,yt=this.ty,Lt=Math.sqrt(Y*Y+he*he),Zt=(Y/=Lt)*De+(he/=Lt)*Me;De-=Y*Zt,Me-=he*Zt;var O=Math.sqrt(De*De+Me*Me);return Zt/=O,Y*(Me/=O)<he*(De/=O)&&(Y=-Y,he=-he,Zt=-Zt,Lt=-Lt),{scale:new bt(Lt,0,0,O,0,0),translate:new bt(1,0,0,1,Ke,yt),rotate:new bt(Y,he,-he,Y,0,0),skew:new bt(1,0,Zt,1,0,0)}},bt.prototype.toString=function(Y){return this.join(" ")},bt.prototype.inversed=function(){var Y=this.sx,he=this.shy,De=this.shx,Me=this.sy,Ke=this.tx,yt=this.ty,Lt=1/(Y*Me-he*De),Zt=Me*Lt,O=-he*Lt,ne=-De*Lt,ue=Y*Lt;return new bt(Zt,O,ne,ue,-Zt*Ke-ne*yt,-O*Ke-ue*yt)},bt.prototype.applyToPoint=function(Y){var he=Y.x*this.sx+Y.y*this.shx+this.tx,De=Y.x*this.shy+Y.y*this.sy+this.ty;return new ad(he,De)},bt.prototype.applyToRectangle=function(Y){var he=this.applyToPoint(Y),De=this.applyToPoint(new ad(Y.x+Y.w,Y.y+Y.h));return new af(he.x,he.y,De.x-he.x,De.y-he.y)},bt.prototype.clone=function(){var Y=this.sx,he=this.shy,De=this.shx,Me=this.sy,Ke=this.tx,yt=this.ty;return new bt(Y,he,De,Me,Ke,yt)},m.Matrix=bt;var ar=m.matrixMult=function(Y,he){return he.multiply(Y)},xr=new bt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=xr;var Wr=function(Y,he){if(!ms[Y]){var De=(he instanceof Pp?"Sh":"P")+(Object.keys(Pr).length+1).toString(10);he.id=De,ms[Y]=De,Pr[De]=he,Ze.publish("addPattern",he)}};m.ShadingPattern=Pp,m.TilingPattern=yv,m.addShadingPattern=function(Y,he){return S("addShadingPattern()"),Wr(Y,he),this},m.beginTilingPattern=function(Y){S("beginTilingPattern()"),du(Y.boundingBox[0],Y.boundingBox[1],Y.boundingBox[2]-Y.boundingBox[0],Y.boundingBox[3]-Y.boundingBox[1],Y.matrix)},m.endTilingPattern=function(Y,he){S("endTilingPattern()"),he.stream=Be[U].join(`
`),Wr(Y,he),Ze.publish("endTilingPattern",he),Et.pop().restore()};var Zr=m.__private__.newObject=function(){var Y=Kr();return me(Y,!0),Y},Kr=m.__private__.newObjectDeferred=function(){return te++,se[te]=function(){return ce},te},me=function(Y,he){return he=typeof he=="boolean"&&he,se[Y]=ce,he&&le(Y+" 0 obj"),Y},Ie=m.__private__.newAdditionalObject=function(){var Y={objId:Kr(),content:""};return de.push(Y),Y},_e=Kr(),Ne=Kr(),je=m.__private__.decodeColorString=function(Y){var he=Y.split(" ");if(he.length!==2||he[1]!=="g"&&he[1]!=="G")he.length===5&&(he[4]==="k"||he[4]==="K")&&(he=[(1-he[0])*(1-he[3]),(1-he[1])*(1-he[3]),(1-he[2])*(1-he[3]),"r"]);else{var De=parseFloat(he[0]);he=[De,De,De,"r"]}for(var Me="#",Ke=0;Ke<3;Ke++)Me+=("0"+Math.floor(255*parseFloat(he[Ke])).toString(16)).slice(-2);return Me},Fe=m.__private__.encodeColorString=function(Y){var he;typeof Y=="string"&&(Y={ch1:Y});var De=Y.ch1,Me=Y.ch2,Ke=Y.ch3,yt=Y.ch4,Lt=Y.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof De=="string"&&De.charAt(0)!=="#"){var Zt=new Mle(De);if(Zt.ok)De=Zt.toHex();else if(!/^\d*\.?\d*$/.test(De))throw new Error('Invalid color "'+De+'" passed to jsPDF.encodeColorString.')}if(typeof De=="string"&&/^#[0-9A-Fa-f]{3}$/.test(De)&&(De="#"+De[1]+De[1]+De[2]+De[2]+De[3]+De[3]),typeof De=="string"&&/^#[0-9A-Fa-f]{6}$/.test(De)){var O=parseInt(De.substr(1),16);De=O>>16&255,Me=O>>8&255,Ke=255&O}if(Me===void 0||yt===void 0&&De===Me&&Me===Ke)if(typeof De=="string")he=De+" "+Lt[0];else switch(Y.precision){case 2:he=M(De/255)+" "+Lt[0];break;case 3:default:he=R(De/255)+" "+Lt[0]}else if(yt===void 0||ga(yt)==="object"){if(yt&&!isNaN(yt.a)&&yt.a===0)return he=["1.","1.","1.",Lt[1]].join(" ");if(typeof De=="string")he=[De,Me,Ke,Lt[1]].join(" ");else switch(Y.precision){case 2:he=[M(De/255),M(Me/255),M(Ke/255),Lt[1]].join(" ");break;default:case 3:he=[R(De/255),R(Me/255),R(Ke/255),Lt[1]].join(" ")}}else if(typeof De=="string")he=[De,Me,Ke,yt,Lt[2]].join(" ");else switch(Y.precision){case 2:he=[M(De),M(Me),M(Ke),M(yt),Lt[2]].join(" ");break;case 3:default:he=[R(De),R(Me),R(Ke),R(yt),Lt[2]].join(" ")}return he},Ye=m.__private__.getFilters=function(){return o},ft=m.__private__.putStream=function(Y){var he=(Y=Y||{}).data||"",De=Y.filters||Ye(),Me=Y.alreadyAppliedFilters||[],Ke=Y.addLength1||!1,yt=he.length,Lt=Y.objectId,Zt=function(Or){return Or};if(d!==null&&Lt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Zt=ca.encryptor(Lt,0));var O={};De===!0&&(De=["FlateEncode"]);var ne=Y.additionalKeyValues||[],ue=(O=vr.API.processDataByFilters!==void 0?vr.API.processDataByFilters(he,De):{data:he,reverseChain:[]}).reverseChain+(Array.isArray(Me)?Me.join(" "):Me.toString());if(O.data.length!==0&&(ne.push({key:"Length",value:O.data.length}),Ke===!0&&ne.push({key:"Length1",value:yt})),ue.length!=0)if(ue.split("/").length-1==1)ne.push({key:"Filter",value:ue});else{ne.push({key:"Filter",value:"["+ue+"]"});for(var we=0;we<ne.length;we+=1)if(ne[we].key==="DecodeParms"){for(var $e=[],ot=0;ot<O.reverseChain.split("/").length-1;ot+=1)$e.push("null");$e.push(ne[we].value),ne[we].value="["+$e.join(" ")+"]"}}le("<<");for(var Ut=0;Ut<ne.length;Ut++)le("/"+ne[Ut].key+" "+ne[Ut].value);le(">>"),O.data.length!==0&&(le("stream"),le(Zt(O.data)),le("endstream"))},qe=m.__private__.putPage=function(Y){var he=Y.number,De=Y.data,Me=Y.objId,Ke=Y.contentsObjId;me(Me,!0),le("<</Type /Page"),le("/Parent "+Y.rootDictionaryObjId+" 0 R"),le("/Resources "+Y.resourceDictionaryObjId+" 0 R"),le("/MediaBox ["+parseFloat(E(Y.mediaBox.bottomLeftX))+" "+parseFloat(E(Y.mediaBox.bottomLeftY))+" "+E(Y.mediaBox.topRightX)+" "+E(Y.mediaBox.topRightY)+"]"),Y.cropBox!==null&&le("/CropBox ["+E(Y.cropBox.bottomLeftX)+" "+E(Y.cropBox.bottomLeftY)+" "+E(Y.cropBox.topRightX)+" "+E(Y.cropBox.topRightY)+"]"),Y.bleedBox!==null&&le("/BleedBox ["+E(Y.bleedBox.bottomLeftX)+" "+E(Y.bleedBox.bottomLeftY)+" "+E(Y.bleedBox.topRightX)+" "+E(Y.bleedBox.topRightY)+"]"),Y.trimBox!==null&&le("/TrimBox ["+E(Y.trimBox.bottomLeftX)+" "+E(Y.trimBox.bottomLeftY)+" "+E(Y.trimBox.topRightX)+" "+E(Y.trimBox.topRightY)+"]"),Y.artBox!==null&&le("/ArtBox ["+E(Y.artBox.bottomLeftX)+" "+E(Y.artBox.bottomLeftY)+" "+E(Y.artBox.topRightX)+" "+E(Y.artBox.topRightY)+"]"),typeof Y.userUnit=="number"&&Y.userUnit!==1&&le("/UserUnit "+Y.userUnit),Ze.publish("putPage",{objId:Me,pageContext:gr[he],pageNumber:he,page:De}),le("/Contents "+Ke+" 0 R"),le(">>"),le("endobj");var yt=De.join(`
`);return _===w.ADVANCED&&(yt+=`
Q`),me(Ke,!0),ft({data:yt,filters:Ye(),objectId:Ke}),le("endobj"),Me},rt=m.__private__.putPages=function(){var Y,he,De=[];for(Y=1;Y<=rn;Y++)gr[Y].objId=Kr(),gr[Y].contentsObjId=Kr();for(Y=1;Y<=rn;Y++)De.push(qe({number:Y,data:Be[Y],objId:gr[Y].objId,contentsObjId:gr[Y].contentsObjId,mediaBox:gr[Y].mediaBox,cropBox:gr[Y].cropBox,bleedBox:gr[Y].bleedBox,trimBox:gr[Y].trimBox,artBox:gr[Y].artBox,userUnit:gr[Y].userUnit,rootDictionaryObjId:_e,resourceDictionaryObjId:Ne}));me(_e,!0),le("<</Type /Pages");var Me="/Kids [";for(he=0;he<rn;he++)Me+=De[he]+" 0 R ";le(Me+"]"),le("/Count "+rn),le(">>"),le("endobj"),Ze.publish("postPutPages")},it=function(Y){Ze.publish("putFont",{font:Y,out:le,newObject:Zr,putStream:ft}),Y.isAlreadyPutted!==!0&&(Y.objectNumber=Zr(),le("<<"),le("/Type /Font"),le("/BaseFont /"+dv(Y.postScriptName)),le("/Subtype /Type1"),typeof Y.encoding=="string"&&le("/Encoding /"+Y.encoding),le("/FirstChar 32"),le("/LastChar 255"),le(">>"),le("endobj"))},Ft=function(){for(var Y in kr)kr.hasOwnProperty(Y)&&(f===!1||f===!0&&h.hasOwnProperty(Y))&&it(kr[Y])},$t=function(Y){Y.objectNumber=Zr();var he=[];he.push({key:"Type",value:"/XObject"}),he.push({key:"Subtype",value:"/Form"}),he.push({key:"BBox",value:"["+[E(Y.x),E(Y.y),E(Y.x+Y.width),E(Y.y+Y.height)].join(" ")+"]"}),he.push({key:"Matrix",value:"["+Y.matrix.toString()+"]"});var De=Y.pages[1].join(`
`);ft({data:De,additionalKeyValues:he,objectId:Y.objectNumber}),le("endobj")},Jt=function(){for(var Y in Je)Je.hasOwnProperty(Y)&&$t(Je[Y])},zt=function(Y,he){var De,Me=[],Ke=1/(he-1);for(De=0;De<1;De+=Ke)Me.push(De);if(Me.push(1),Y[0].offset!=0){var yt={offset:0,color:Y[0].color};Y.unshift(yt)}if(Y[Y.length-1].offset!=1){var Lt={offset:1,color:Y[Y.length-1].color};Y.push(Lt)}for(var Zt="",O=0,ne=0;ne<Me.length;ne++){for(De=Me[ne];De>Y[O+1].offset;)O++;var ue=Y[O].offset,we=(De-ue)/(Y[O+1].offset-ue),$e=Y[O].color,ot=Y[O+1].color;Zt+=J(Math.round((1-we)*$e[0]+we*ot[0]).toString(16))+J(Math.round((1-we)*$e[1]+we*ot[1]).toString(16))+J(Math.round((1-we)*$e[2]+we*ot[2]).toString(16))}return Zt.trim()},qt=function(Y,he){he||(he=21);var De=Zr(),Me=zt(Y.colors,he),Ke=[];Ke.push({key:"FunctionType",value:"0"}),Ke.push({key:"Domain",value:"[0.0 1.0]"}),Ke.push({key:"Size",value:"["+he+"]"}),Ke.push({key:"BitsPerSample",value:"8"}),Ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ft({data:Me,additionalKeyValues:Ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:De}),le("endobj"),Y.objectNumber=Zr(),le("<< /ShadingType "+Y.type),le("/ColorSpace /DeviceRGB");var yt="/Coords ["+E(parseFloat(Y.coords[0]))+" "+E(parseFloat(Y.coords[1]))+" ";Y.type===2?yt+=E(parseFloat(Y.coords[2]))+" "+E(parseFloat(Y.coords[3])):yt+=E(parseFloat(Y.coords[2]))+" "+E(parseFloat(Y.coords[3]))+" "+E(parseFloat(Y.coords[4]))+" "+E(parseFloat(Y.coords[5])),le(yt+="]"),Y.matrix&&le("/Matrix ["+Y.matrix.toString()+"]"),le("/Function "+De+" 0 R"),le("/Extend [true true]"),le(">>"),le("endobj")},jr=function(Y,he){var De=Kr(),Me=Zr();he.push({resourcesOid:De,objectOid:Me}),Y.objectNumber=Me;var Ke=[];Ke.push({key:"Type",value:"/Pattern"}),Ke.push({key:"PatternType",value:"1"}),Ke.push({key:"PaintType",value:"1"}),Ke.push({key:"TilingType",value:"1"}),Ke.push({key:"BBox",value:"["+Y.boundingBox.map(E).join(" ")+"]"}),Ke.push({key:"XStep",value:E(Y.xStep)}),Ke.push({key:"YStep",value:E(Y.yStep)}),Ke.push({key:"Resources",value:De+" 0 R"}),Y.matrix&&Ke.push({key:"Matrix",value:"["+Y.matrix.toString()+"]"}),ft({data:Y.stream,additionalKeyValues:Ke,objectId:Y.objectNumber}),le("endobj")},on=function(Y){var he;for(he in Pr)Pr.hasOwnProperty(he)&&(Pr[he]instanceof Pp?qt(Pr[he]):Pr[he]instanceof yv&&jr(Pr[he],Y))},ln=function(Y){for(var he in Y.objectNumber=Zr(),le("<<"),Y)switch(he){case"opacity":le("/ca "+M(Y[he]));break;case"stroke-opacity":le("/CA "+M(Y[he]))}le(">>"),le("endobj")},An=function(){var Y;for(Y in pn)pn.hasOwnProperty(Y)&&ln(pn[Y])},ps=function(){for(var Y in le("/XObject <<"),Je)Je.hasOwnProperty(Y)&&Je[Y].objectNumber>=0&&le("/"+Y+" "+Je[Y].objectNumber+" 0 R");Ze.publish("putXobjectDict"),le(">>")},So=function(){ca.oid=Zr(),le("<<"),le("/Filter /Standard"),le("/V "+ca.v),le("/R "+ca.r),le("/U <"+ca.toHexString(ca.U)+">"),le("/O <"+ca.toHexString(ca.O)+">"),le("/P "+ca.P),le(">>"),le("endobj")},gs=function(){for(var Y in le("/Font <<"),kr)kr.hasOwnProperty(Y)&&(f===!1||f===!0&&h.hasOwnProperty(Y))&&le("/"+Y+" "+kr[Y].objectNumber+" 0 R");le(">>")},ai=function(){if(Object.keys(Pr).length>0){for(var Y in le("/Shading <<"),Pr)Pr.hasOwnProperty(Y)&&Pr[Y]instanceof Pp&&Pr[Y].objectNumber>=0&&le("/"+Y+" "+Pr[Y].objectNumber+" 0 R");Ze.publish("putShadingPatternDict"),le(">>")}},Ls=function(Y){if(Object.keys(Pr).length>0){for(var he in le("/Pattern <<"),Pr)Pr.hasOwnProperty(he)&&Pr[he]instanceof m.TilingPattern&&Pr[he].objectNumber>=0&&Pr[he].objectNumber<Y&&le("/"+he+" "+Pr[he].objectNumber+" 0 R");Ze.publish("putTilingPatternDict"),le(">>")}},wi=function(){if(Object.keys(pn).length>0){var Y;for(Y in le("/ExtGState <<"),pn)pn.hasOwnProperty(Y)&&pn[Y].objectNumber>=0&&le("/"+Y+" "+pn[Y].objectNumber+" 0 R");Ze.publish("putGStateDict"),le(">>")}},xa=function(Y){me(Y.resourcesOid,!0),le("<<"),le("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),gs(),ai(),Ls(Y.objectOid),wi(),ps(),le(">>"),le("endobj")},si=function(){var Y=[];Ft(),An(),Jt(),on(Y),Ze.publish("putResources"),Y.forEach(xa),xa({resourcesOid:Ne,objectOid:Number.MAX_SAFE_INTEGER}),Ze.publish("postPutResources")},Zd=function(){Ze.publish("putAdditionalObjects");for(var Y=0;Y<de.length;Y++){var he=de[Y];me(he.objId,!0),le(he.content),le("endobj")}Ze.publish("postPutAdditionalObjects")},qh=function(Y){$r[Y.fontName]=$r[Y.fontName]||{},$r[Y.fontName][Y.fontStyle]=Y.id},ru=function(Y,he,De,Me,Ke){var yt={id:"F"+(Object.keys(kr).length+1).toString(10),postScriptName:Y,fontName:he,fontStyle:De,encoding:Me,isStandardFont:Ke||!1,metadata:{}};return Ze.publish("addFont",{font:yt,instance:this}),kr[yt.id]=yt,qh(yt),yt.id},mA=function(Y){for(var he=0,De=Ue.length;he<De;he++){var Me=ru.call(this,Y[he][0],Y[he][1],Y[he][2],Ue[he][3],!0);f===!1&&(h[Me]=!0);var Ke=Y[he][0].split("-");qh({id:Me,fontName:Ke[0],fontStyle:Ke[1]||""})}Ze.publish("addFonts",{fonts:kr,dictionary:$r})},Ei=function(Y){return Y.foo=function(){try{return Y.apply(this,arguments)}catch(Me){var he=Me.stack||"";~he.indexOf(" at ")&&(he=he.split(" at ")[1]);var De="Error in function "+he.split(`
`)[0].split("<")[0]+": "+Me.message;if(!Qr.console)throw new Error(De);Qr.console.error(De,Me),Qr.alert&&alert(De)}},Y.foo.bar=Y,Y.foo},ef=function(Y,he){var De,Me,Ke,yt,Lt,Zt,O,ne,ue;if(Ke=(he=he||{}).sourceEncoding||"Unicode",Lt=he.outputEncoding,(he.autoencode||Lt)&&kr[Ht].metadata&&kr[Ht].metadata[Ke]&&kr[Ht].metadata[Ke].encoding&&(yt=kr[Ht].metadata[Ke].encoding,!Lt&&kr[Ht].encoding&&(Lt=kr[Ht].encoding),!Lt&&yt.codePages&&(Lt=yt.codePages[0]),typeof Lt=="string"&&(Lt=yt[Lt]),Lt)){for(O=!1,Zt=[],De=0,Me=Y.length;De<Me;De++)(ne=Lt[Y.charCodeAt(De)])?Zt.push(String.fromCharCode(ne)):Zt.push(Y[De]),Zt[De].charCodeAt(0)>>8&&(O=!0);Y=Zt.join("")}for(De=Y.length;O===void 0&&De!==0;)Y.charCodeAt(De-1)>>8&&(O=!0),De--;if(!O)return Y;for(Zt=he.noBOM?[]:[254,255],De=0,Me=Y.length;De<Me;De++){if((ue=(ne=Y.charCodeAt(De))>>8)>>8)throw new Error("Character at position "+De+" of string '"+Y+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Zt.push(ue),Zt.push(ne-(ue<<8))}return String.fromCharCode.apply(void 0,Zt)},On=m.__private__.pdfEscape=m.pdfEscape=function(Y,he){return ef(Y,he).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ni=m.__private__.beginPage=function(Y){Be[++rn]=[],gr[rn]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Y[0]),topRightY:Number(Y[1])}},Il(rn),ve(Be[U])},nu=function(Y,he){var De,Me,Ke;switch(r=he||r,typeof Y=="string"&&(De=y(Y.toLowerCase()),Array.isArray(De)&&(Me=De[0],Ke=De[1])),Array.isArray(Y)&&(Me=Y[0]*wt,Ke=Y[1]*wt),isNaN(Me)&&(Me=a[0],Ke=a[1]),(Me>14400||Ke>14400)&&(Ca.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Me=Math.min(14400,Me),Ke=Math.min(14400,Ke)),a=[Me,Ke],r.substr(0,1)){case"l":Ke>Me&&(a=[Ke,Me]);break;case"p":Me>Ke&&(a=[Ke,Me])}Ni(a),vA(ou),le(Ci),bA!==0&&le(bA+" J"),nd!==0&&le(nd+" j"),Ze.publish("addPage",{pageNumber:rn})},au=function(Y){Y>0&&Y<=rn&&(Be.splice(Y,1),gr.splice(Y,1),rn--,U>rn&&(U=rn),this.setPage(U))},Il=function(Y){Y>0&&Y<=rn&&(U=Y)},Vn=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Be.length-1},su=function(Y,he,De){var Me,Ke=void 0;return De=De||{},Y=Y!==void 0?Y:kr[Ht].fontName,he=he!==void 0?he:kr[Ht].fontStyle,Me=Y.toLowerCase(),$r[Me]!==void 0&&$r[Me][he]!==void 0?Ke=$r[Me][he]:$r[Y]!==void 0&&$r[Y][he]!==void 0?Ke=$r[Y][he]:De.disableWarning===!1&&Ca.warn("Unable to look up font label for font '"+Y+"', '"+he+"'. Refer to getFontList() for available fonts."),Ke||De.noFallback||(Ke=$r.times[he])==null&&(Ke=$r.times.normal),Ke},ko=m.__private__.putInfo=function(){var Y=Zr(),he=function(Me){return Me};for(var De in d!==null&&(he=ca.encryptor(Y,0)),le("<<"),le("/Producer ("+On(he("jsPDF "+vr.version))+")"),Pt)Pt.hasOwnProperty(De)&&Pt[De]&&le("/"+De.substr(0,1).toUpperCase()+De.substr(1)+" ("+On(he(Pt[De]))+")");le("/CreationDate ("+On(he(Z))+")"),le(">>"),le("endobj")},Ac=m.__private__.putCatalog=function(Y){var he=(Y=Y||{}).rootDictionaryObjId||_e;switch(Zr(),le("<<"),le("/Type /Catalog"),le("/Pages "+he+" 0 R"),Oe||(Oe="fullwidth"),Oe){case"fullwidth":le("/OpenAction [3 0 R /FitH null]");break;case"fullheight":le("/OpenAction [3 0 R /FitV null]");break;case"fullpage":le("/OpenAction [3 0 R /Fit]");break;case"original":le("/OpenAction [3 0 R /XYZ null null 1]");break;default:var De=""+Oe;De.substr(De.length-1)==="%"&&(Oe=parseInt(Oe)/100),typeof Oe=="number"&&le("/OpenAction [3 0 R /XYZ null null "+M(Oe)+"]")}switch(xt||(xt="continuous"),xt){case"continuous":le("/PageLayout /OneColumn");break;case"single":le("/PageLayout /SinglePage");break;case"two":case"twoleft":le("/PageLayout /TwoColumnLeft");break;case"tworight":le("/PageLayout /TwoColumnRight")}et&&le("/PageMode /"+et),Ze.publish("putCatalog"),le(">>"),le("endobj")},Kh=m.__private__.putTrailer=function(){le("trailer"),le("<<"),le("/Size "+(te+1)),le("/Root "+te+" 0 R"),le("/Info "+(te-1)+" 0 R"),d!==null&&le("/Encrypt "+ca.oid+" 0 R"),le("/ID [ <"+V+"> <"+V+"> ]"),le(">>")},pA=m.__private__.putHeader=function(){le("%PDF-"+g),le("%ºß¬à")},gA=m.__private__.putXRef=function(){var Y="0000000000";le("xref"),le("0 "+(te+1)),le("0000000000 65535 f ");for(var he=1;he<=te;he++)typeof se[he]=="function"?le((Y+se[he]()).slice(-10)+" 00000 n "):se[he]!==void 0?le((Y+se[he]).slice(-10)+" 00000 n "):le("0000000000 00000 n ")},hc=m.__private__.buildDocument=function(){ke(),ve(ie),Ze.publish("buildDocument"),pA(),rt(),Zd(),si(),d!==null&&So(),ko(),Ac();var Y=ce;return gA(),Kh(),le("startxref"),le(""+Y),le("%%EOF"),ve(Be[U]),ie.join(`
`)},tf=m.__private__.getBlob=function(Y){return new Blob([Pe(Y)],{type:"application/pdf"})},mc=m.output=m.__private__.output=Ei(function(Y,he){switch(typeof(he=he||{})=="string"?he={filename:he}:he.filename=he.filename||"generated.pdf",Y){case void 0:return hc();case"save":m.save(he.filename);break;case"arraybuffer":return Pe(hc());case"blob":return tf(hc());case"bloburi":case"bloburl":if(Qr.URL!==void 0&&typeof Qr.URL.createObjectURL=="function")return Qr.URL&&Qr.URL.createObjectURL(tf(hc()))||void 0;Ca.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var De="",Me=hc();try{De=TO(Me)}catch{De=TO(unescape(encodeURIComponent(Me)))}return"data:application/pdf;filename="+he.filename+";base64,"+De;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Qr)==="[object Window]"){var Ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",yt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';he.pdfObjectUrl&&(Ke=he.pdfObjectUrl,yt="");var Lt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ke+'"'+yt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(he)+");<\/script></body></html>",Zt=Qr.open();return Zt!==null&&Zt.document.write(Lt),Zt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Qr)==="[object Window]"){var O='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(he.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+he.filename+'" width="500px" height="400px" /></body></html>',ne=Qr.open();if(ne!==null){ne.document.write(O);var ue=this;ne.document.documentElement.querySelector("#pdfViewer").onload=function(){ne.document.title=he.filename,ne.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ue.output("bloburl"))}}return ne}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Qr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var we='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",he)+'"></iframe></body></html>',$e=Qr.open();if($e!==null&&($e.document.write(we),$e.document.title=he.filename),$e||typeof safari>"u")return $e;break;case"datauri":case"dataurl":return Qr.document.location.href=this.output("datauristring",he);default:return null}}),Fl=function(Y){return Array.isArray(mt)===!0&&mt.indexOf(Y)>-1};switch(n){case"pt":wt=1;break;case"mm":wt=72/25.4;break;case"cm":wt=72/2.54;break;case"in":wt=72;break;case"px":wt=Fl("px_scaling")==1?.75:96/72;break;case"pc":case"em":wt=12;break;case"ex":wt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);wt=n}var ca=null;W(),G();var pc=function(Y){return d!==null?ca.encryptor(Y,0):function(he){return he}},Ol=m.__private__.getPageInfo=m.getPageInfo=function(Y){if(isNaN(Y)||Y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:gr[Y].objId,pageNumber:Y,pageContext:gr[Y]}},Fr=m.__private__.getPageInfoByObjId=function(Y){if(isNaN(Y)||Y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var he in gr)if(gr[he].objId===Y)break;return Ol(he)},Dl=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:gr[U].objId,pageNumber:U,pageContext:gr[U]}};m.addPage=function(){return nu.apply(this,arguments),this},m.setPage=function(){return Il.apply(this,arguments),ve.call(this,Be[U]),this},m.insertPage=function(Y){return this.addPage(),this.movePage(U,Y),this},m.movePage=function(Y,he){var De,Me;if(Y>he){De=Be[Y],Me=gr[Y];for(var Ke=Y;Ke>he;Ke--)Be[Ke]=Be[Ke-1],gr[Ke]=gr[Ke-1];Be[he]=De,gr[he]=Me,this.setPage(he)}else if(Y<he){De=Be[Y],Me=gr[Y];for(var yt=Y;yt<he;yt++)Be[yt]=Be[yt+1],gr[yt]=gr[yt+1];Be[he]=De,gr[he]=Me,this.setPage(he)}return this},m.deletePage=function(){return au.apply(this,arguments),this},m.__private__.text=m.text=function(Y,he,De,Me,Ke){var yt,Lt,Zt,O,ne,ue,we,$e,ot,Ut=(Me=Me||{}).scope||this;if(typeof Y=="number"&&typeof he=="number"&&(typeof De=="string"||Array.isArray(De))){var Or=De;De=he,he=Y,Y=Or}if(arguments[3]instanceof bt?(S("The transform parameter of text() with a Matrix value"),ot=Ke):(Zt=arguments[4],O=arguments[5],ga(we=arguments[3])==="object"&&we!==null||(typeof Zt=="string"&&(O=Zt,Zt=null),typeof we=="string"&&(O=we,we=null),typeof we=="number"&&(Zt=we,we=null),Me={flags:we,angle:Zt,align:O})),isNaN(he)||isNaN(De)||Y==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Y.length===0)return Ut;var wn="",Xr=!1,zn=typeof Me.lineHeightFactor=="number"?Me.lineHeightFactor:yn,ta=Ut.internal.scaleFactor;function Ml(gn){return gn=gn.split("	").join(Array(Me.TabLen||9).join(" ")),On(gn,we)}function rs(gn){for(var xn,va=gn.concat(),ns=[],Ql=va.length;Ql--;)typeof(xn=va.shift())=="string"?ns.push(xn):Array.isArray(gn)&&(xn.length===1||xn[1]===void 0&&xn[2]===void 0)?ns.push(xn[0]):ns.push([xn[0],xn[1],xn[2]]);return ns}function Io(gn,xn){var va;if(typeof gn=="string")va=xn(gn)[0];else if(Array.isArray(gn)){for(var ns,Ql,pf=gn.concat(),gf=[],cd=pf.length;cd--;)typeof(ns=pf.shift())=="string"?gf.push(xn(ns)[0]):Array.isArray(ns)&&typeof ns[0]=="string"&&(Ql=xn(ns[0],ns[1],ns[2]),gf.push([Ql[0],Ql[1],Ql[2]]));va=gf}return va}var Au=!1,of=!0;if(typeof Y=="string")Au=!0;else if(Array.isArray(Y)){var Jh=Y.concat();Lt=[];for(var yA,Ms=Jh.length;Ms--;)(typeof(yA=Jh.shift())!="string"||Array.isArray(yA)&&typeof yA[0]!="string")&&(of=!1);Au=of}if(Au===!1)throw new Error('Type of text must be string or Array. "'+Y+'" is not recognized.');typeof Y=="string"&&(Y=Y.match(/[\r?\n]/)?Y.split(/\r\n|\r|\n/g):[Y]);var lf=pe/Ut.internal.scaleFactor,wA=lf*(zn-1);switch(Me.baseline){case"bottom":De-=wA;break;case"top":De+=lf-wA;break;case"hanging":De+=lf-2*wA;break;case"middle":De+=lf/2-wA}if((ue=Me.maxWidth||0)>0&&(typeof Y=="string"?Y=Ut.splitTextToSize(Y,ue):Object.prototype.toString.call(Y)==="[object Array]"&&(Y=Y.reduce(function(gn,xn){return gn.concat(Ut.splitTextToSize(xn,ue))},[]))),yt={text:Y,x:he,y:De,options:Me,mutex:{pdfEscape:On,activeFontKey:Ht,fonts:kr,activeFontSize:pe}},Ze.publish("preProcessText",yt),Y=yt.text,Zt=(Me=yt.options).angle,!(ot instanceof bt)&&Zt&&typeof Zt=="number"){Zt*=Math.PI/180,Me.rotationDirection===0&&(Zt=-Zt),_===w.ADVANCED&&(Zt=-Zt);var EA=Math.cos(Zt),Zh=Math.sin(Zt);ot=new bt(EA,Zh,-Zh,EA,0,0)}else Zt&&Zt instanceof bt&&(ot=Zt);_!==w.ADVANCED||ot||(ot=xr),(ne=Me.charSpace||rd)!==void 0&&(wn+=E(k(ne))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),($e=Me.horizontalScale)!==void 0&&(wn+=E(100*$e)+` Tz
`),Me.lang;var Fo=-1,y1=Me.renderingMode!==void 0?Me.renderingMode:Me.stroke,ep=Ut.internal.getCurrentPageInfo().pageContext;switch(y1){case 0:case!1:case"fill":Fo=0;break;case 1:case!0:case"stroke":Fo=1;break;case 2:case"fillThenStroke":Fo=2;break;case 3:case"invisible":Fo=3;break;case 4:case"fillAndAddForClipping":Fo=4;break;case 5:case"strokeAndAddPathForClipping":Fo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Fo=6;break;case 7:case"addToPathForClipping":Fo=7}var tx=ep.usedRenderingMode!==void 0?ep.usedRenderingMode:-1;Fo!==-1?wn+=Fo+` Tr
`:tx!==-1&&(wn+=`0 Tr
`),Fo!==-1&&(ep.usedRenderingMode=Fo),O=Me.align||"left";var Ul,ii=pe*zn,cf=Ut.internal.pageSize.getWidth(),tp=kr[Ht];ne=Me.charSpace||rd,ue=Me.maxWidth||0,we=Object.assign({autoencode:!0,noBOM:!0},Me.flags);var od=[],uf=function(gn){return Ut.getStringUnitWidth(gn,{font:tp,charSpace:ne,fontSize:pe,doKerning:!1})*pe/ta};if(Object.prototype.toString.call(Y)==="[object Array]"){var oo;Lt=rs(Y),O!=="left"&&(Ul=Lt.map(uf));var _i,df=0;if(O==="right"){he-=Ul[0],Y=[],Ms=Lt.length;for(var Oo=0;Oo<Ms;Oo++)Oo===0?(_i=Ui(he),oo=vs(De)):(_i=k(df-Ul[Oo]),oo=-ii),Y.push([Lt[Oo],_i,oo]),df=Ul[Oo]}else if(O==="center"){he-=Ul[0]/2,Y=[],Ms=Lt.length;for(var bc=0;bc<Ms;bc++)bc===0?(_i=Ui(he),oo=vs(De)):(_i=k((df-Ul[bc])/2),oo=-ii),Y.push([Lt[bc],_i,oo]),df=Ul[bc]}else if(O==="left"){Y=[],Ms=Lt.length;for(var hu=0;hu<Ms;hu++)Y.push(Lt[hu])}else if(O==="justify"&&tp.encoding==="Identity-H"){Y=[],Ms=Lt.length,ue=ue!==0?ue:cf;for(var yc=0,qa=0;qa<Ms;qa++)if(oo=qa===0?vs(De):-ii,_i=qa===0?Ui(he):yc,qa<Ms-1){var wc=k((ue-Ul[qa])/(Lt[qa].split(" ").length-1)),bs=Lt[qa].split(" ");Y.push([bs[0]+" ",_i,oo]),yc=0;for(var Do=1;Do<bs.length;Do++){var NA=(uf(bs[Do-1]+" "+bs[Do])-uf(bs[Do]))*ta+wc;Do==bs.length-1?Y.push([bs[Do],NA,0]):Y.push([bs[Do]+" ",NA,0]),yc-=NA}}else Y.push([Lt[qa],_i,oo]);Y.push(["",yc,0])}else{if(O!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(Y=[],Ms=Lt.length,ue=ue!==0?ue:cf,qa=0;qa<Ms;qa++)oo=qa===0?vs(De):-ii,_i=qa===0?Ui(he):0,qa<Ms-1?od.push(E(k((ue-Ul[qa])/(Lt[qa].split(" ").length-1)))):od.push(0),Y.push([Lt[qa],_i,oo])}}var mu=typeof Me.R2L=="boolean"?Me.R2L:Ge;mu===!0&&(Y=Io(Y,function(gn,xn,va){return[gn.split("").reverse().join(""),xn,va]})),yt={text:Y,x:he,y:De,options:Me,mutex:{pdfEscape:On,activeFontKey:Ht,fonts:kr,activeFontSize:pe}},Ze.publish("postProcessText",yt),Y=yt.text,Xr=yt.mutex.isHex||!1;var e0=kr[Ht].encoding;e0!=="WinAnsiEncoding"&&e0!=="StandardEncoding"||(Y=Io(Y,function(gn,xn,va){return[Ml(gn),xn,va]})),Lt=rs(Y),Y=[];for(var ff,Af,hf,CA=0,t0=1,mf=Array.isArray(Lt[0])?t0:CA,ld="",_A=function(gn,xn,va){var ns="";return va instanceof bt?(va=typeof Me.angle=="number"?ar(va,new bt(1,0,0,1,gn,xn)):ar(new bt(1,0,0,1,gn,xn),va),_===w.ADVANCED&&(va=ar(new bt(1,0,0,-1,0,0),va)),ns=va.join(" ")+` Tm
`):ns=E(gn)+" "+E(xn)+` Td
`,ns},Ka=0;Ka<Lt.length;Ka++){switch(ld="",mf){case t0:hf=(Xr?"<":"(")+Lt[Ka][0]+(Xr?">":")"),ff=parseFloat(Lt[Ka][1]),Af=parseFloat(Lt[Ka][2]);break;case CA:hf=(Xr?"<":"(")+Lt[Ka]+(Xr?">":")"),ff=Ui(he),Af=vs(De)}od!==void 0&&od[Ka]!==void 0&&(ld=od[Ka]+` Tw
`),Ka===0?Y.push(ld+_A(ff,Af,ot)+hf):mf===CA?Y.push(ld+hf):mf===t0&&Y.push(ld+_A(ff,Af,ot)+hf)}Y=mf===CA?Y.join(` Tj
T* `):Y.join(` Tj
`),Y+=` Tj
`;var Al=`BT
/`;return Al+=Ht+" "+pe+` Tf
`,Al+=E(pe*zn)+` TL
`,Al+=xc+`
`,Al+=wn,Al+=Y,le(Al+="ET"),h[Ht]=!0,Ut};var Wh=m.__private__.clip=m.clip=function(Y){return le(Y==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Wh("evenodd")},m.__private__.discardPath=m.discardPath=function(){return le("n"),this};var Li=m.__private__.isValidStyle=function(Y){var he=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Y)!==-1&&(he=!0),he};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(Y){return Li(Y)&&(u=Y),this};var jo=m.__private__.getStyle=m.getStyle=function(Y){var he=u;switch(Y){case"D":case"S":he="S";break;case"F":he="f";break;case"FD":case"DF":he="B";break;case"f":case"f*":case"B":case"B*":he=Y}return he},io=m.close=function(){return le("h"),this};m.stroke=function(){return le("S"),this},m.fill=function(Y){return Pl("f",Y),this},m.fillEvenOdd=function(Y){return Pl("f*",Y),this},m.fillStroke=function(Y){return Pl("B",Y),this},m.fillStrokeEvenOdd=function(Y){return Pl("B*",Y),this};var Pl=function(Y,he){ga(he)==="object"?gc(he,Y):le(Y)},Bo=function(Y){Y===null||_===w.ADVANCED&&Y===void 0||(Y=jo(Y),le(Y))};function iu(Y,he,De,Me,Ke){var yt=new yv(he||this.boundingBox,De||this.xStep,Me||this.yStep,this.gState,Ke||this.matrix);yt.stream=this.stream;var Lt=Y+"$$"+this.cloneIndex+++"$$";return Wr(Lt,yt),yt}var gc=function(Y,he){var De=ms[Y.key],Me=Pr[De];if(Me instanceof Pp)le("q"),le(xA(he)),Me.gState&&m.setGState(Me.gState),le(Y.matrix.toString()+" cm"),le("/"+De+" sh"),le("Q");else if(Me instanceof yv){var Ke=new bt(1,0,0,-1,0,Qi());Y.matrix&&(Ke=Ke.multiply(Y.matrix||xr),De=iu.call(Me,Y.key,Y.boundingBox,Y.xStep,Y.yStep,Ke).id),le("q"),le("/Pattern cs"),le("/"+De+" scn"),Me.gState&&m.setGState(Me.gState),le(he),le("Q")}},xA=function(Y){switch(Y){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},To=m.moveTo=function(Y,he){return le(E(k(Y))+" "+E(L(he))+" m"),this},Mi=m.lineTo=function(Y,he){return le(E(k(Y))+" "+E(L(he))+" l"),this},Rl=m.curveTo=function(Y,he,De,Me,Ke,yt){return le([E(k(Y)),E(L(he)),E(k(De)),E(L(Me)),E(k(Ke)),E(L(yt)),"c"].join(" ")),this};m.__private__.line=m.line=function(Y,he,De,Me,Ke){if(isNaN(Y)||isNaN(he)||isNaN(De)||isNaN(Me)||!Li(Ke))throw new Error("Invalid arguments passed to jsPDF.line");return _===w.COMPAT?this.lines([[De-Y,Me-he]],Y,he,[1,1],Ke||"S"):this.lines([[De-Y,Me-he]],Y,he,[1,1]).stroke()},m.__private__.lines=m.lines=function(Y,he,De,Me,Ke,yt){var Lt,Zt,O,ne,ue,we,$e,ot,Ut,Or,wn,Xr;if(typeof Y=="number"&&(Xr=De,De=he,he=Y,Y=Xr),Me=Me||[1,1],yt=yt||!1,isNaN(he)||isNaN(De)||!Array.isArray(Y)||!Array.isArray(Me)||!Li(Ke)||typeof yt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(To(he,De),Lt=Me[0],Zt=Me[1],ne=Y.length,Or=he,wn=De,O=0;O<ne;O++)(ue=Y[O]).length===2?(Or=ue[0]*Lt+Or,wn=ue[1]*Zt+wn,Mi(Or,wn)):(we=ue[0]*Lt+Or,$e=ue[1]*Zt+wn,ot=ue[2]*Lt+Or,Ut=ue[3]*Zt+wn,Or=ue[4]*Lt+Or,wn=ue[5]*Zt+wn,Rl(we,$e,ot,Ut,Or,wn));return yt&&io(),Bo(Ke),this},m.path=function(Y){for(var he=0;he<Y.length;he++){var De=Y[he],Me=De.c;switch(De.op){case"m":To(Me[0],Me[1]);break;case"l":Mi(Me[0],Me[1]);break;case"c":Rl.apply(this,Me);break;case"h":io()}}return this},m.__private__.rect=m.rect=function(Y,he,De,Me,Ke){if(isNaN(Y)||isNaN(he)||isNaN(De)||isNaN(Me)||!Li(Ke))throw new Error("Invalid arguments passed to jsPDF.rect");return _===w.COMPAT&&(Me=-Me),le([E(k(Y)),E(L(he)),E(k(De)),E(k(Me)),"re"].join(" ")),Bo(Ke),this},m.__private__.triangle=m.triangle=function(Y,he,De,Me,Ke,yt,Lt){if(isNaN(Y)||isNaN(he)||isNaN(De)||isNaN(Me)||isNaN(Ke)||isNaN(yt)||!Li(Lt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[De-Y,Me-he],[Ke-De,yt-Me],[Y-Ke,he-yt]],Y,he,[1,1],Lt,!0),this},m.__private__.roundedRect=m.roundedRect=function(Y,he,De,Me,Ke,yt,Lt){if(isNaN(Y)||isNaN(he)||isNaN(De)||isNaN(Me)||isNaN(Ke)||isNaN(yt)||!Li(Lt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Zt=4/3*(Math.SQRT2-1);return Ke=Math.min(Ke,.5*De),yt=Math.min(yt,.5*Me),this.lines([[De-2*Ke,0],[Ke*Zt,0,Ke,yt-yt*Zt,Ke,yt],[0,Me-2*yt],[0,yt*Zt,-Ke*Zt,yt,-Ke,yt],[2*Ke-De,0],[-Ke*Zt,0,-Ke,-yt*Zt,-Ke,-yt],[0,2*yt-Me],[0,-yt*Zt,Ke*Zt,-yt,Ke,-yt]],Y+Ke,he,[1,1],Lt,!0),this},m.__private__.ellipse=m.ellipse=function(Y,he,De,Me,Ke){if(isNaN(Y)||isNaN(he)||isNaN(De)||isNaN(Me)||!Li(Ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var yt=4/3*(Math.SQRT2-1)*De,Lt=4/3*(Math.SQRT2-1)*Me;return To(Y+De,he),Rl(Y+De,he-Lt,Y+yt,he-Me,Y,he-Me),Rl(Y-yt,he-Me,Y-De,he-Lt,Y-De,he),Rl(Y-De,he+Lt,Y-yt,he+Me,Y,he+Me),Rl(Y+yt,he+Me,Y+De,he+Lt,Y+De,he),Bo(Ke),this},m.__private__.circle=m.circle=function(Y,he,De,Me){if(isNaN(Y)||isNaN(he)||isNaN(De)||!Li(Me))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Y,he,De,De,Me)},m.setFont=function(Y,he,De){return De&&(he=I(he,De)),Ht=su(Y,he,{disableWarning:!1}),this};var xs=m.__private__.getFont=m.getFont=function(){return kr[su.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var Y,he,De={};for(Y in $r)if($r.hasOwnProperty(Y))for(he in De[Y]=[],$r[Y])$r[Y].hasOwnProperty(he)&&De[Y].push(he);return De},m.addFont=function(Y,he,De,Me,Ke){var yt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&yt.indexOf(arguments[3])!==-1?Ke=arguments[3]:arguments[3]&&yt.indexOf(arguments[3])==-1&&(De=I(De,Me)),Ke=Ke||"Identity-H",ru.call(this,Y,he,De,Ke)};var yn,ou=e.lineWidth||.200025,Ll=m.__private__.getLineWidth=m.getLineWidth=function(){return ou},vA=m.__private__.setLineWidth=m.setLineWidth=function(Y){return ou=Y,le(E(k(Y))+" w"),this};m.__private__.setLineDash=vr.API.setLineDash=vr.API.setLineDashPattern=function(Y,he){if(Y=Y||[],he=he||0,isNaN(he)||!Array.isArray(Y))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Y=Y.map(function(De){return E(k(De))}).join(" "),he=E(k(he)),le("["+Y+"] "+he+" d"),this};var ed=m.__private__.getLineHeight=m.getLineHeight=function(){return pe*yn};m.__private__.getLineHeight=m.getLineHeight=function(){return pe*yn};var td=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(Y){return typeof(Y=Y||1.15)=="number"&&(yn=Y),this},fl=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return yn};td(e.lineHeight);var Ui=m.__private__.getHorizontalCoordinate=function(Y){return k(Y)},vs=m.__private__.getVerticalCoordinate=function(Y){return _===w.ADVANCED?Y:gr[U].mediaBox.topRightY-gr[U].mediaBox.bottomLeftY-k(Y)},Xh=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(Y){return E(Ui(Y))},lu=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(Y){return E(vs(Y))},Ci=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return je(Ci)},m.__private__.setStrokeColor=m.setDrawColor=function(Y,he,De,Me){return Ci=Fe({ch1:Y,ch2:he,ch3:De,ch4:Me,pdfColorType:"draw",precision:2}),le(Ci),this};var cu=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return je(cu)},m.__private__.setFillColor=m.setFillColor=function(Y,he,De,Me){return cu=Fe({ch1:Y,ch2:he,ch3:De,ch4:Me,pdfColorType:"fill",precision:2}),le(cu),this};var xc=e.textColor||"0 g",rf=m.__private__.getTextColor=m.getTextColor=function(){return je(xc)};m.__private__.setTextColor=m.setTextColor=function(Y,he,De,Me){return xc=Fe({ch1:Y,ch2:he,ch3:De,ch4:Me,pdfColorType:"text",precision:3}),this};var rd=e.charSpace,nf=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(rd||0)};m.__private__.setCharSpace=m.setCharSpace=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return rd=Y,this};var bA=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(Y){var he=m.CapJoinStyles[Y];if(he===void 0)throw new Error("Line cap style of '"+Y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return bA=he,le(he+" J"),this};var nd=0;m.__private__.setLineJoin=m.setLineJoin=function(Y){var he=m.CapJoinStyles[Y];if(he===void 0)throw new Error("Line join style of '"+Y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return nd=he,le(he+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(Y){if(Y=Y||0,isNaN(Y))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return le(E(k(Y))+" M"),this},m.GState=BS,m.setGState=function(Y){(Y=typeof Y=="string"?pn[la[Y]]:uu(null,Y)).equals(Ba)||(le("/"+Y.id+" gs"),Ba=Y)};var uu=function(Y,he){if(!Y||!la[Y]){var De=!1;for(var Me in pn)if(pn.hasOwnProperty(Me)&&pn[Me].equals(he)){De=!0;break}if(De)he=pn[Me];else{var Ke="GS"+(Object.keys(pn).length+1).toString(10);pn[Ke]=he,he.id=Ke}return Y&&(la[Y]=he.id),Ze.publish("addGState",he),he}};m.addGState=function(Y,he){return uu(Y,he),this},m.saveGraphicsState=function(){return le("q"),Fn.push({key:Ht,size:pe,color:xc}),this},m.restoreGraphicsState=function(){le("Q");var Y=Fn.pop();return Ht=Y.key,pe=Y.size,xc=Y.color,Ba=null,this},m.setCurrentTransformationMatrix=function(Y){return le(Y.toString()+" cm"),this},m.comment=function(Y){return le("#"+Y),this};var ad=function(Y,he){var De=Y||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return De},set:function(yt){isNaN(yt)||(De=parseFloat(yt))}});var Me=he||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Me},set:function(yt){isNaN(yt)||(Me=parseFloat(yt))}});var Ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ke},set:function(yt){Ke=yt.toString()}}),this},af=function(Y,he,De,Me){ad.call(this,Y,he),this.type="rect";var Ke=De||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ke},set:function(Lt){isNaN(Lt)||(Ke=parseFloat(Lt))}});var yt=Me||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return yt},set:function(Lt){isNaN(Lt)||(yt=parseFloat(Lt))}}),this},sd=function(){this.page=rn,this.currentPage=U,this.pages=Be.slice(0),this.pagesContext=gr.slice(0),this.x=Tr,this.y=tr,this.matrix=sn,this.width=fu(U),this.height=Qi(U),this.outputDestination=Se,this.id="",this.objectNumber=-1};sd.prototype.restore=function(){rn=this.page,U=this.currentPage,gr=this.pagesContext,Be=this.pages,Tr=this.x,tr=this.y,sn=this.matrix,id(U,this.width),sf(U,this.height),Se=this.outputDestination};var du=function(Y,he,De,Me,Ke){Et.push(new sd),rn=U=0,Be=[],Tr=Y,tr=he,sn=Ke,Ni([De,Me])},Yh=function(Y){if(vt[Y])Et.pop().restore();else{var he=new sd,De="Xo"+(Object.keys(Je).length+1).toString(10);he.id=De,vt[Y]=De,Je[De]=he,Ze.publish("addFormObject",he),Et.pop().restore()}};for(var vc in m.beginFormObject=function(Y,he,De,Me,Ke){return du(Y,he,De,Me,Ke),this},m.endFormObject=function(Y){return Yh(Y),this},m.doFormObject=function(Y,he){var De=Je[vt[Y]];return le("q"),le(he.toString()+" cm"),le("/"+De.id+" Do"),le("Q"),this},m.getFormObject=function(Y){var he=Je[vt[Y]];return{x:he.x,y:he.y,width:he.width,height:he.height,matrix:he.matrix}},m.save=function(Y,he){return Y=Y||"generated.pdf",(he=he||{}).returnPromise=he.returnPromise||!1,he.returnPromise===!1?(Tp(tf(hc()),Y),typeof Tp.unload=="function"&&Qr.setTimeout&&setTimeout(Tp.unload,911),this):new Promise(function(De,Me){try{var Ke=Tp(tf(hc()),Y);typeof Tp.unload=="function"&&Qr.setTimeout&&setTimeout(Tp.unload,911),De(Ke)}catch(yt){Me(yt.message)}})},vr.API)vr.API.hasOwnProperty(vc)&&(vc==="events"&&vr.API.events.length?function(Y,he){var De,Me,Ke;for(Ke=he.length-1;Ke!==-1;Ke--)De=he[Ke][0],Me=he[Ke][1],Y.subscribe.apply(Y,[De].concat(typeof Me=="function"?[Me]:Me))}(Ze,vr.API.events):m[vc]=vr.API[vc]);var fu=m.getPageWidth=function(Y){return(gr[Y=Y||U].mediaBox.topRightX-gr[Y].mediaBox.bottomLeftX)/wt},id=m.setPageWidth=function(Y,he){gr[Y].mediaBox.topRightX=he*wt+gr[Y].mediaBox.bottomLeftX},Qi=m.getPageHeight=function(Y){return(gr[Y=Y||U].mediaBox.topRightY-gr[Y].mediaBox.bottomLeftY)/wt},sf=m.setPageHeight=function(Y,he){gr[Y].mediaBox.topRightY=he*wt+gr[Y].mediaBox.bottomLeftY};return m.internal={pdfEscape:On,getStyle:jo,getFont:xs,getFontSize:Le,getCharSpace:nf,getTextColor:rf,getLineHeight:ed,getLineHeightFactor:fl,getLineWidth:Ll,write:be,getHorizontalCoordinate:Ui,getVerticalCoordinate:vs,getCoordinateString:Xh,getVerticalCoordinateString:lu,collections:{},newObject:Zr,newAdditionalObject:Ie,newObjectDeferred:Kr,newObjectDeferredBegin:me,getFilters:Ye,putStream:ft,events:Ze,scaleFactor:wt,pageSize:{getWidth:function(){return fu(U)},setWidth:function(Y){id(U,Y)},getHeight:function(){return Qi(U)},setHeight:function(Y){sf(U,Y)}},encryptionOptions:d,encryption:ca,getEncryptor:pc,output:mc,getNumberOfPages:Vn,pages:Be,out:le,f2:M,f3:R,getPageInfo:Ol,getPageInfoByObjId:Fr,getCurrentPageInfo:Dl,getPDFVersion:x,Point:ad,Rectangle:af,Matrix:bt,hasHotfix:Fl},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return fu(U)},set:function(Y){id(U,Y)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Qi(U)},set:function(Y){sf(U,Y)},enumerable:!0,configurable:!0}),mA.call(m,Ue),Ht="F1",nu(a,r),Ze.publish("initialized"),m}uv.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},uv.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},uv.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},uv.prototype.processOwnerPassword=function(e,t){return FO(IO(t).substr(0,5),e)},uv.prototype.encryptor=function(e,t){var r=IO(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return FO(r,n)}},BS.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||ga(e)!==ga(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},vr.API={events:[]},vr.version="2.5.2";var _s=vr.API,dM=1,ex=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Lx=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},en=function(e){return e.toFixed(2)},O0=function(e){return e.toFixed(5)};_s.__acroform__={};var fc=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},_K=function(e){return e*dM},Pf=function(e){var t=new Vle,r=pr.internal.getHeight(e)||0,n=pr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(en(n)),Number(en(r))],t},DWe=_s.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},PWe=_s.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},RWe=_s.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},Ys=_s.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return RWe(e,t-1)},Js=_s.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return DWe(e,t-1)},Zs=_s.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return PWe(e,t-1)},LWe=_s.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=n(s)||0,[Number(en(c.lowerLeft_X)),Number(en(c.lowerLeft_Y)),Number(en(c.upperRight_X)),Number(en(c.upperRight_Y))]},MWe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=OO(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+en(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=Pf(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},OO=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(R){return R.split(`
`)}):a.map(function(R){return[R]});var s=r,o=pr.internal.getHeight(e)||0;o=o<0?-o:o;var l=pr.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(R,k,D){if(R+1<a.length){var L=k+" "+a[R+1][0];return wC(L,e,D).width<=l-4}return!1};s++;e:for(;s>0;){t="",s--;var u,d,f=wC("3",e,s).height,h=e.multiline?o-s:(o-f)/2,m=h+=2,g=0,x=0,v=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+wC(t,e,s=12).width+", FieldWidth:"+l+`
`;break}for(var y="",w=0,_=0;_<a.length;_++)if(a.hasOwnProperty(_)){var T=!1;if(a[_].length!==1&&v!==a[_].length-1){if((f+2)*(w+2)+2>o)continue e;y+=a[_][v],T=!0,x=_,_--}else{y=(y+=a[_][v]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var j=parseInt(_),I=c(j,y,s),E=_>=a.length-1;if(I&&!E){y+=" ",v=0;continue}if(I||E){if(E)x=j;else if(e.multiline&&(f+2)*(w+2)+2>o)continue e}else{if(!e.multiline||(f+2)*(w+2)+2>o)continue e;x=j}}for(var S="",B=g;B<=x;B++){var M=a[B];if(e.multiline){if(B===x){S+=M[v]+" ",v=(v+1)%M.length;continue}if(B===g){S+=M[M.length-1]+" ";continue}}S+=M[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,d=wC(S,e,s).width,e.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;case"left":default:u=2}t+=en(u)+" "+en(m)+` Td
`,t+="("+ex(S)+`) Tj
`,t+=-en(u)+` 0 Td
`,m=-(s+2),d=0,g=T?x:x+1,w++,y=""}break}return n.text=t,n.fontSize=s,n},wC=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},UWe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},QWe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},HWe=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),ga(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},VWe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Wd.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(UWe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");dM=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new zle,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&QWe(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=LWe(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=pr.createDefaultAppearanceStream(l),ga(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=MWe(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var h in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(h)){var m=l.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var g=m[o];typeof g=="function"&&(g=g.call(a,l)),f+="/"+o+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=m)=="function"&&(g=g.call(a,l)),f+="/"+o+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}s&&HWe(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},Hle=_s.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),ga(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+ex(n(e[s].toString()))+")"):a+=e[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},kI=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+ex(n(e))+")"},Xf=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Xf.prototype.toString=function(){return this.objId+" 0 R"},Xf.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Xf.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:Hle(a,this.objId,this.scope)}):a instanceof Xf?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var Vle=function(){Xf.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};fc(Vle,Xf);var zle=function(){Xf.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+ex(r(e))+")"}},set:function(r){e=r}})};fc(zle,Xf);var Wd=function e(){Xf.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ys(t,3)},set:function(y){y?this.F=Js(t,3):this.F=Zs(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof TS)return;s="FieldObject"+e.FieldNum++}var y=function(w){return w};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+ex(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/dM:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof TS||this instanceof og))return kI(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Yi?h:kI(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=this instanceof Yi?y:y.substr(0,1)==="("?Lx(y.substr(1,y.length-2)):Lx(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yi?Lx(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof Yi?"/"+y:y}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Yi?m:kI(m,this.objId,this.scope)},set:function(y){y=y.toString(),m=this instanceof Yi?y:y.substr(0,1)==="("?Lx(y.substr(1,y.length-2)):Lx(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yi?Lx(m.substr(1,m.length-1)):m},set:function(y){y=y.toString(),m=this instanceof Yi?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(y){y=!!y,x=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,1)},set:function(y){y?this.Ff=Js(this.Ff,1):this.Ff=Zs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,2)},set:function(y){y?this.Ff=Js(this.Ff,2):this.Ff=Zs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,3)},set:function(y){y?this.Ff=Js(this.Ff,3):this.Ff=Zs(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');v=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(v){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:v=2;break;case"center":case 1:v=1;break;case"left":case 0:default:v=0}}})};fc(Wd,Xf);var Qv=function(){Wd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Hle(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,o,l){l||(l=1);for(var c,u=[];c=o.exec(s);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,18)},set:function(r){r?this.Ff=Js(this.Ff,18):this.Ff=Zs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Js(this.Ff,19):this.Ff=Zs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,20)},set:function(r){r?(this.Ff=Js(this.Ff,20),t.sort()):this.Ff=Zs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,22)},set:function(r){r?this.Ff=Js(this.Ff,22):this.Ff=Zs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,23)},set:function(r){r?this.Ff=Js(this.Ff,23):this.Ff=Zs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,27)},set:function(r){r?this.Ff=Js(this.Ff,27):this.Ff=Zs(this.Ff,27)}}),this.hasAppearanceStream=!1};fc(Qv,Wd);var Hv=function(){Qv.call(this),this.fontName="helvetica",this.combo=!1};fc(Hv,Qv);var Vv=function(){Hv.call(this),this.combo=!0};fc(Vv,Hv);var N5=function(){Vv.call(this),this.edit=!0};fc(N5,Vv);var Yi=function(){Wd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,15)},set:function(r){r?this.Ff=Js(this.Ff,15):this.Ff=Zs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,16)},set:function(r){r?this.Ff=Js(this.Ff,16):this.Ff=Zs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,17)},set:function(r){r?this.Ff=Js(this.Ff,17):this.Ff=Zs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,26)},set:function(r){r?this.Ff=Js(this.Ff,26):this.Ff=Zs(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+ex(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){ga(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};fc(Yi,Wd);var C5=function(){Yi.call(this),this.pushButton=!0};fc(C5,Yi);var zv=function(){Yi.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};fc(zv,Yi);var TS=function(){var e,t;Wd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),n)o.push("/"+s+" ("+ex(a(n[s]))+")");return o.push(">>"),o.join(`
`)},set:function(a){ga(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=pr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};fc(TS,Wd),zv.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},zv.prototype.createOption=function(e){var t=new TS;return t.Parent=this,t.optionName=e,this.Kids.push(t),zWe.call(this.scope,t),t};var _5=function(){Yi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=pr.CheckBox.createAppearanceStream()};fc(_5,Yi);var og=function(){Wd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,13)},set:function(t){t?this.Ff=Js(this.Ff,13):this.Ff=Zs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,21)},set:function(t){t?this.Ff=Js(this.Ff,21):this.Ff=Zs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,23)},set:function(t){t?this.Ff=Js(this.Ff,23):this.Ff=Zs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,24)},set:function(t){t?this.Ff=Js(this.Ff,24):this.Ff=Zs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,25)},set:function(t){t?this.Ff=Js(this.Ff,25):this.Ff=Zs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,26)},set:function(t){t?this.Ff=Js(this.Ff,26):this.Ff=Zs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};fc(og,Wd);var S5=function(){og.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ys(this.Ff,14)},set:function(e){e?this.Ff=Js(this.Ff,14):this.Ff=Zs(this.Ff,14)}}),this.password=!0};fc(S5,og);var pr={CheckBox:{createAppearanceStream:function(){return{N:{On:pr.CheckBox.YesNormal},D:{On:pr.CheckBox.YesPushDown,Off:pr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Pf(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=OO(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+en(pr.internal.getWidth(e))+" "+en(pr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+en(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Pf(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=pr.internal.getHeight(e),o=pr.internal.getWidth(e),l=OO(e,e.caption);return a.push("1 g"),a.push("0 0 "+en(o)+" "+en(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+en(o-1)+" "+en(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+en(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Pf(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+en(pr.internal.getWidth(e))+" "+en(pr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:pr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=pr.RadioButton.Circle.YesNormal,t.D[e]=pr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Pf(e);t.scope=e.scope;var r=[],n=pr.internal.getWidth(e)<=pr.internal.getHeight(e)?pr.internal.getWidth(e)/4:pr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=pr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+O0(pr.internal.getWidth(e)/2)+" "+O0(pr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Pf(e);t.scope=e.scope;var r=[],n=pr.internal.getWidth(e)<=pr.internal.getHeight(e)?pr.internal.getWidth(e)/4:pr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*pr.internal.Bezier_C).toFixed(5)),o=Number((n*pr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+O0(pr.internal.getWidth(e)/2)+" "+O0(pr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+O0(pr.internal.getWidth(e)/2)+" "+O0(pr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Pf(e);t.scope=e.scope;var r=[],n=pr.internal.getWidth(e)<=pr.internal.getHeight(e)?pr.internal.getWidth(e)/4:pr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*pr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+O0(pr.internal.getWidth(e)/2)+" "+O0(pr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:pr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=pr.RadioButton.Cross.YesNormal,t.D[e]=pr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Pf(e);t.scope=e.scope;var r=[],n=pr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+en(pr.internal.getWidth(e)-2)+" "+en(pr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(en(n.x1.x)+" "+en(n.x1.y)+" m"),r.push(en(n.x2.x)+" "+en(n.x2.y)+" l"),r.push(en(n.x4.x)+" "+en(n.x4.y)+" m"),r.push(en(n.x3.x)+" "+en(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Pf(e);t.scope=e.scope;var r=pr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+en(pr.internal.getWidth(e))+" "+en(pr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+en(pr.internal.getWidth(e)-2)+" "+en(pr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(en(r.x1.x)+" "+en(r.x1.y)+" m"),n.push(en(r.x2.x)+" "+en(r.x2.y)+" l"),n.push(en(r.x4.x)+" "+en(r.x4.y)+" m"),n.push(en(r.x3.x)+" "+en(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Pf(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+en(pr.internal.getWidth(e))+" "+en(pr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};pr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=pr.internal.getWidth(e),r=pr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},pr.internal.getWidth=function(e){var t=0;return ga(e)==="object"&&(t=_K(e.Rect[2])),t},pr.internal.getHeight=function(e){var t=0;return ga(e)==="object"&&(t=_K(e.Rect[3])),t};var zWe=_s.addField=function(e){if(VWe(this,e),!(e instanceof Wd))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};_s.AcroFormChoiceField=Qv,_s.AcroFormListBox=Hv,_s.AcroFormComboBox=Vv,_s.AcroFormEditBox=N5,_s.AcroFormButton=Yi,_s.AcroFormPushButton=C5,_s.AcroFormRadioButton=zv,_s.AcroFormCheckBox=_5,_s.AcroFormTextField=og,_s.AcroFormPasswordField=S5,_s.AcroFormAppearance=pr,_s.AcroForm={ChoiceField:Qv,ListBox:Hv,ComboBox:Vv,EditBox:N5,Button:Yi,PushButton:C5,RadioButton:zv,CheckBox:_5,TextField:og,PasswordField:S5,Appearance:pr},vr.AcroForm={ChoiceField:Qv,ListBox:Hv,ComboBox:Vv,EditBox:N5,Button:Yi,PushButton:C5,RadioButton:zv,CheckBox:_5,TextField:og,PasswordField:S5,Appearance:pr};vr.AcroForm;function $le(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(R,k){var D,L,Z,V,q,G=t;if((k=k||t)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(I(R))for(q in r)for(Z=r[q],D=0;D<Z.length;D+=1){for(V=!0,L=0;L<Z[D].length;L+=1)if(Z[D][L]!==void 0&&Z[D][L]!==R[L]){V=!1;break}if(V===!0){G=q;break}}else for(q in r)for(Z=r[q],D=0;D<Z.length;D+=1){for(V=!0,L=0;L<Z[D].length;L+=1)if(Z[D][L]!==void 0&&Z[D][L]!==R.charCodeAt(L)){V=!1;break}if(V===!0){G=q;break}}return G===t&&k!==t&&(G=k),G},a=function R(k){for(var D=this.internal.write,L=this.internal.putStream,Z=(0,this.internal.getFilters)();Z.indexOf("FlateEncode")!==-1;)Z.splice(Z.indexOf("FlateEncode"),1);k.objectId=this.internal.newObject();var V=[];if(V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Image"}),V.push({key:"Width",value:k.width}),V.push({key:"Height",value:k.height}),k.colorSpace===v.INDEXED?V.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(k.palette.length/3-1)+" "+("sMask"in k&&k.sMask!==void 0?k.objectId+2:k.objectId+1)+" 0 R]"}):(V.push({key:"ColorSpace",value:"/"+k.colorSpace}),k.colorSpace===v.DEVICE_CMYK&&V.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),V.push({key:"BitsPerComponent",value:k.bitsPerComponent}),"decodeParameters"in k&&k.decodeParameters!==void 0&&V.push({key:"DecodeParms",value:"<<"+k.decodeParameters+">>"}),"transparency"in k&&Array.isArray(k.transparency)){for(var q="",G=0,K=k.transparency.length;G<K;G++)q+=k.transparency[G]+" "+k.transparency[G]+" ";V.push({key:"Mask",value:"["+q+"]"})}k.sMask!==void 0&&V.push({key:"SMask",value:k.objectId+1+" 0 R"});var ee=k.filter!==void 0?["/"+k.filter]:void 0;if(L({data:k.data,additionalKeyValues:V,alreadyAppliedFilters:ee,objectId:k.objectId}),D("endobj"),"sMask"in k&&k.sMask!==void 0){var W="/Predictor "+k.predictor+" /Colors 1 /BitsPerComponent "+k.bitsPerComponent+" /Columns "+k.width,P={width:k.width,height:k.height,colorSpace:"DeviceGray",bitsPerComponent:k.bitsPerComponent,decodeParameters:W,data:k.sMask};"filter"in k&&(P.filter=k.filter),R.call(this,P)}if(k.colorSpace===v.INDEXED){var U=this.internal.newObject();L({data:S(new Uint8Array(k.palette)),objectId:U}),D("endobj")}},s=function(){var R=this.internal.collections.addImage_images;for(var k in R)a.call(this,R[k])},o=function(){var R,k=this.internal.collections.addImage_images,D=this.internal.write;for(var L in k)D("/I"+(R=k[L]).index,R.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var R=this.internal.collections.addImage_images;return l.call(this),R},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(R){return typeof e["process"+R.toUpperCase()]=="function"},f=function(R){return ga(R)==="object"&&R.nodeType===1},h=function(R,k){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var D=""+R.getAttribute("src");if(D.indexOf("data:image/")===0)return kw(unescape(D).split("base64,").pop());var L=e.loadFile(D,!0);if(L!==void 0)return L}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var Z;switch(k){case"PNG":Z="image/png";break;case"WEBP":Z="image/webp";break;case"JPEG":case"JPG":default:Z="image/jpeg"}return kw(R.toDataURL(Z,1).split("base64,").pop())}},m=function(R){var k=this.internal.collections.addImage_images;if(k){for(var D in k)if(R===k[D].alias)return k[D]}},g=function(R,k,D){return R||k||(R=-96,k=-96),R<0&&(R=-1*D.width*72/R/this.internal.scaleFactor),k<0&&(k=-1*D.height*72/k/this.internal.scaleFactor),R===0&&(R=k*D.width/D.height),k===0&&(k=R*D.height/D.width),[R,k]},x=function(R,k,D,L,Z,V){var q=g.call(this,D,L,Z),G=this.internal.getCoordinateString,K=this.internal.getVerticalCoordinateString,ee=c.call(this);if(D=q[0],L=q[1],ee[Z.index]=Z,V){V*=Math.PI/180;var W=Math.cos(V),P=Math.sin(V),U=function(J){return J.toFixed(4)},z=[U(W),U(P),U(-1*P),U(W),0,0,"cm"]}this.internal.write("q"),V?(this.internal.write([1,"0","0",1,G(R),K(k+L),"cm"].join(" ")),this.internal.write(z.join(" ")),this.internal.write([G(D),"0","0",G(L),"0","0","cm"].join(" "))):this.internal.write([G(D),"0","0",G(L),G(R),K(k+L),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Z.index+" Do"),this.internal.write("Q")},v=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(R){var k,D,L=0;if(typeof R=="string")for(D=R.length,k=0;k<D;k++)L=(L<<5)-L+R.charCodeAt(k),L|=0;else if(I(R))for(D=R.byteLength/2,k=0;k<D;k++)L=(L<<5)-L+R[k],L|=0;return L},_=e.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var k=!0;return R.length===0&&(k=!1),R.length%4!=0&&(k=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(k=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(k=!1),k},T=e.__addimage__.extractImageFromDataUrl=function(R){var k=(R=R||"").split("base64,"),D=null;if(k.length===2){var L=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(k[0]);Array.isArray(L)&&(D={mimeType:L[1],charset:L[2],data:k[1]})}return D},j=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(R){return j()&&R instanceof ArrayBuffer};var I=e.__addimage__.isArrayBufferView=function(R){return j()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},E=e.__addimage__.binaryStringToUint8Array=function(R){for(var k=R.length,D=new Uint8Array(k),L=0;L<k;L++)D[L]=R.charCodeAt(L);return D},S=e.__addimage__.arrayBufferToBinaryString=function(R){for(var k="",D=I(R)?R:new Uint8Array(R),L=0;L<D.length;L+=8192)k+=String.fromCharCode.apply(null,D.subarray(L,L+8192));return k};e.addImage=function(){var R,k,D,L,Z,V,q,G,K;if(typeof arguments[1]=="number"?(k=t,D=arguments[1],L=arguments[2],Z=arguments[3],V=arguments[4],q=arguments[5],G=arguments[6],K=arguments[7]):(k=arguments[1],D=arguments[2],L=arguments[3],Z=arguments[4],V=arguments[5],q=arguments[6],G=arguments[7],K=arguments[8]),ga(R=arguments[0])==="object"&&!f(R)&&"imageData"in R){var ee=R;R=ee.imageData,k=ee.format||k||t,D=ee.x||D||0,L=ee.y||L||0,Z=ee.w||ee.width||Z,V=ee.h||ee.height||V,q=ee.alias||q,G=ee.compression||G,K=ee.rotation||ee.angle||K}var W=this.internal.getFilters();if(G===void 0&&W.indexOf("FlateEncode")!==-1&&(G="SLOW"),isNaN(D)||isNaN(L))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var P=B.call(this,R,k,q,G);return x.call(this,D,L,Z,V,P,K),this};var B=function(R,k,D,L){var Z,V,q;if(typeof R=="string"&&n(R)===t){R=unescape(R);var G=M(R,!1);(G!==""||(G=e.loadFile(R,!0))!==void 0)&&(R=G)}if(f(R)&&(R=h(R,k)),k=n(R,k),!d(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(((q=D)==null||q.length===0)&&(D=function(K){return typeof K=="string"||I(K)?w(K):I(K.data)?w(K.data):null}(R)),(Z=m.call(this,D))||(j()&&(R instanceof Uint8Array||k==="RGBA"||(V=R,R=E(R))),Z=this["process"+k.toUpperCase()](R,u.call(this),D,function(K){return K&&typeof K=="string"&&(K=K.toUpperCase()),K in e.image_compression?K:y.NONE}(L),V)),!Z)throw new Error("An unknown error occurred whilst processing the image.");return Z},M=e.__addimage__.convertBase64ToBinaryString=function(R,k){var D;k=typeof k!="boolean"||k;var L,Z="";if(typeof R=="string"){L=(D=T(R))!==null?D.data:R;try{Z=kw(L)}catch(V){if(k)throw _(L)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+V.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Z};e.getImageProperties=function(R){var k,D,L="";if(f(R)&&(R=h(R)),typeof R=="string"&&n(R)===t&&((L=M(R,!1))===""&&(L=e.loadFile(R)||""),R=L),D=n(R),!d(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(!j()||R instanceof Uint8Array||(R=E(R)),!(k=this["process"+D.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return k.fileType=D,k}})(vr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};vr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var m=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(x.objId),w=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+m(y(n.contents))+")",s+=" /Popup "+v.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+m(y(w))+") >>",x.content=s;var _=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+_,n.open&&(s+=" /Open true"),s+=" >>",v.content=s,this.internal.write(x.objId,"0 R",v.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var T=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+m(g(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+T+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var j=this.annotations._nameMap[n.options.name];n.options.pageNumber=j.page,n.options.top=j.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+m(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var I=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+I+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,s,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:o,type:"link"})},e.textWithLink=function(r,n,a,s){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,l,o,s),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(vr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(x){return t[x.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},l=e.__arabicParser__.isArabicEndLetter=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(x){return o(x)&&a.indexOf(x.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(x){return o(x)&&s(x)&&t[x.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(x){var v=0,y=r,w="",_=0;for(v=0;v<x.length;v+=1)y[x.charCodeAt(v)]!==void 0?(_++,typeof(y=y[x.charCodeAt(v)])=="number"&&(w+=String.fromCharCode(y),y=r,_=0),v===x.length-1&&(y=r,w+=x.charAt(v-(_-1)),v-=_-1,_=0)):(y=r,w+=x.charAt(v-_),v-=_,_=0);return w};e.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&n[x.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(x,v,y){return o(x)?s(x)===!1?-1:!u(x)||!o(v)&&!o(y)||!o(y)&&l(v)||l(x)&&!o(v)||l(x)&&c(v)||l(x)&&l(v)?0:d(x)&&o(v)&&!l(v)&&o(y)&&u(y)?3:l(x)||!o(y)?1:2:-1},m=function(x){var v=0,y=0,w=0,_="",T="",j="",I=(x=x||"").split("\\s+"),E=[];for(v=0;v<I.length;v+=1){for(E.push(""),y=0;y<I[v].length;y+=1)_=I[v][y],T=I[v][y-1],j=I[v][y+1],o(_)?(w=h(_,T,j),E[v]+=w!==-1?String.fromCharCode(t[_.charCodeAt(0)][w]):_):E[v]+=_;E[v]=f(E[v])}return E.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var x,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(v)){var w=0;for(y=[],w=0;w<v.length;w+=1)Array.isArray(v[w])?y.push([m(v[w][0]),v[w][1],v[w][2]]):y.push([m(v[w])]);x=y}else x=m(v);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};e.events.push(["preProcessText",g])}(vr.API),vr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(vr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(x){g=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,m=0,g=0,x=0,v=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=u.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(_,T){return _.concat(v.splitTextToSize(T,y))},[])):c=Array.isArray(c)?c:[c];for(var w=0;w<c.length;w++)m<(x=this.getStringUnitWidth(c[w],{font:f})*d)&&(m=x);return m!==0&&(g=c.length),{w:m/=h,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,m&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var m,g,x,v,y=[],w=[],_=[],T={},j={},I=[],E=[],S=(h=h||{}).autoSize||!1,B=h.printHeaders!==!1,M=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,R=h.margins||Object.assign({width:this.getPageWidth()},t),k=typeof h.padding=="number"?h.padding:3,D=h.headerBackgroundColor||"#c8c8c8",L=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=M,this.internal.__cell__.padding=k,this.internal.__cell__.headerBackgroundColor=D,this.internal.__cell__.headerTextColor=L,this.setFontSize(M),f==null)w=y=Object.keys(d[0]),_=y.map(function(){return"left"});else if(Array.isArray(f)&&ga(f[0])==="object")for(y=f.map(function(ee){return ee.name}),w=f.map(function(ee){return ee.prompt||ee.name||""}),_=f.map(function(ee){return ee.align||"left"}),m=0;m<f.length;m+=1)j[f[m].name]=f[m].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(w=y=f,_=y.map(function(){return"left"}));if(S||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<y.length;m+=1){for(T[v=y[m]]=d.map(function(ee){return ee[v]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(w[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=T[v],this.setFont(void 0,"normal"),x=0;x<g.length;x+=1)I.push(this.getTextDimensions(g[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);j[v]=Math.max.apply(null,I)+k+k,I=[]}if(B){var Z={};for(m=0;m<y.length;m+=1)Z[y[m]]={},Z[y[m]].text=w[m],Z[y[m]].align=_[m];var V=l.call(this,Z,j);E=y.map(function(ee){return new s(c,u,j[ee],V,Z[ee].text,void 0,Z[ee].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var q=f.reduce(function(ee,W){return ee[W.name]=W.align,ee},{});for(m=0;m<d.length;m+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:m,data:d[m]},this);var G=l.call(this,d[m],j);for(x=0;x<y.length;x+=1){var K=d[m][y[x]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:m,col:x,data:K},this),o.call(this,new s(c,u,j[y[x]],G,K,m+2,q[y[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(m){var g=c[m];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*f/h+d+d},this).reduce(function(m,g){return Math.max(m,g)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(vr.API);var Gle={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},qle=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],DO=$le(qle),Kle=[100,200,300,400,500,600,700,800,900],$We=$le(Kle);function PO(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return Gle[s=s||"normal"]?s:"normal"}(e.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(s){return typeof DO[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function SK(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var GWe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},kK={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function jK(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function qWe(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},GWe,r.genericFontFamilies||{}),s=null,o=null,l=0;l<t.length;++l)if(a[(s=PO(t[l])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){o=e[s.family];break}if(!(o=o||e[n]))throw new Error("Could not find a font-family for the rule '"+jK(s)+"' and default family '"+n+"'.");if(o=function(c,u){if(u[c])return u[c];var d=DO[c],f=d<=DO.normal?-1:1,h=SK(u,qle,d,f);if(!h)throw new Error("Could not find a matching font-stretch value for "+c);return h}(s.stretch,o),o=function(c,u){if(u[c])return u[c];for(var d=Gle[c],f=0;f<d.length;++f)if(u[d[f]])return u[d[f]];throw new Error("Could not find a matching font-style for "+c)}(s.style,o),!(o=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var d=$We[c],f=SK(u,Kle,d,c<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+c);return f}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+jK(s)+"'.");return o}function BK(e){return e.trimLeft()}function KWe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function WWe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var EC,TK,IK,jI=["times"];(function(e){var t,r,n,a,s,o,l,c,u,d=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new c,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new o,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new o,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var U=P;Object.defineProperty(this,"pdf",{get:function(){return U}});var z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return z},set:function(ve){z=!!ve}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function(ve){J=!!ve}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(ve){isNaN(ve)||(te=ve)}});var se=0;Object.defineProperty(this,"posY",{get:function(){return se},set:function(ve){isNaN(ve)||(se=ve)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(ve){var le;typeof ve=="number"?le=[ve,ve,ve,ve]:((le=new Array(4))[0]=ve[0],le[1]=ve.length>=2?ve[1]:le[0],le[2]=ve.length>=3?ve[2]:le[0],le[3]=ve.length>=4?ve[3]:le[1]),u.margin=le}});var ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ie},set:function(ve){ie=ve}});var ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return ce},set:function(ve){ce=ve}});var de=[];Object.defineProperty(this,"pageBreaks",{get:function(){return de},set:function(ve){de=ve}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(ve){ve instanceof d&&(u=ve)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(ve){u.path=ve}});var Be=[];Object.defineProperty(this,"ctxStack",{get:function(){return Be},set:function(ve){Be=ve}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ve){var le;le=h(ve),this.ctx.fillStyle=le.style,this.ctx.isFillTransparent=le.a===0,this.ctx.fillOpacity=le.a,this.pdf.setFillColor(le.r,le.g,le.b,{a:le.a}),this.pdf.setTextColor(le.r,le.g,le.b,{a:le.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ve){var le=h(ve);this.ctx.strokeStyle=le.style,this.ctx.isStrokeTransparent=le.a===0,this.ctx.strokeOpacity=le.a,le.a===0?this.pdf.setDrawColor(255,255,255):(le.a,this.pdf.setDrawColor(le.r,le.g,le.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ve){["butt","round","square"].indexOf(ve)!==-1&&(this.ctx.lineCap=ve,this.pdf.setLineCap(ve))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ve){isNaN(ve)||(this.ctx.lineWidth=ve,this.pdf.setLineWidth(ve))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ve){["bevel","round","miter"].indexOf(ve)!==-1&&(this.ctx.lineJoin=ve,this.pdf.setLineJoin(ve))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ve){isNaN(ve)||(this.ctx.miterLimit=ve,this.pdf.setMiterLimit(ve))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ve){this.ctx.textBaseline=ve}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ve){["right","end","center","left","start"].indexOf(ve)!==-1&&(this.ctx.textAlign=ve)}});var ae=null;function Se(ve,le){if(ae===null){var be=function(Pe){var Ue=[];return Object.keys(Pe).forEach(function(pe){Pe[pe].forEach(function(Oe){var Le=null;switch(Oe){case"bold":Le={family:pe,weight:"bold"};break;case"italic":Le={family:pe,style:"italic"};break;case"bolditalic":Le={family:pe,weight:"bold",style:"italic"};break;case"":case"normal":Le={family:pe}}Le!==null&&(Le.ref={name:pe,style:Oe},Ue.push(Le))})}),Ue}(ve.getFontList());ae=function(Pe){for(var Ue={},pe=0;pe<Pe.length;++pe){var Oe=PO(Pe[pe]),Le=Oe.family,Ge=Oe.stretch,et=Oe.style,ut=Oe.weight;Ue[Le]=Ue[Le]||{},Ue[Le][Ge]=Ue[Le][Ge]||{},Ue[Le][Ge][et]=Ue[Le][Ge][et]||{},Ue[Le][Ge][et][ut]=Oe}return Ue}(be.concat(le))}return ae}var ke=null;Object.defineProperty(this,"fontFaces",{get:function(){return ke},set:function(ve){ae=null,ke=ve}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ve){var le;if(this.ctx.font=ve,(le=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ve))!==null){var be=le[1],Pe=(le[2],le[3]),Ue=le[4],pe=(le[5],le[6]),Oe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ue)[2];Ue=Math.floor(Oe==="px"?parseFloat(Ue)*this.pdf.internal.scaleFactor:Oe==="em"?parseFloat(Ue)*this.pdf.getFontSize():parseFloat(Ue)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ue);var Le=function(Pt){var Ht,wt,Tr=[],tr=Pt.trim();if(tr==="")return jI;if(tr in kK)return[kK[tr]];for(;tr!=="";){switch(wt=null,Ht=(tr=BK(tr)).charAt(0)){case'"':case"'":wt=KWe(tr.substring(1),Ht);break;default:wt=WWe(tr)}if(wt===null||(Tr.push(wt[0]),(tr=BK(wt[1]))!==""&&tr.charAt(0)!==","))return jI;tr=tr.replace(/^,/,"")}return Tr}(pe);if(this.fontFaces){var Ge=qWe(Se(this.pdf,this.fontFaces),Le.map(function(Pt){return{family:Pt,stretch:"normal",weight:Pe,style:be}}));this.pdf.setFont(Ge.ref.name,Ge.ref.style)}else{var et="";(Pe==="bold"||parseInt(Pe,10)>=700||be==="bold")&&(et="bold"),be==="italic"&&(et+="italic"),et.length===0&&(et="normal");for(var ut="",xt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},It=0;It<Le.length;It++){if(this.pdf.internal.getFont(Le[It],et,{noFallback:!0,disableWarning:!0})!==void 0){ut=Le[It];break}if(et==="bolditalic"&&this.pdf.internal.getFont(Le[It],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ut=Le[It],et="bold";else if(this.pdf.internal.getFont(Le[It],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ut=Le[It],et="normal";break}}if(ut===""){for(var Mt=0;Mt<Le.length;Mt++)if(xt[Le[Mt]]){ut=xt[Le[Mt]];break}}ut=ut===""?"Times":ut,this.pdf.setFont(ut,et)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ve){this.ctx.globalCompositeOperation=ve}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ve){this.ctx.globalAlpha=ve}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ve){this.ctx.lineDashOffset=ve,W.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ve){this.ctx.lineDash=ve,W.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ve){this.ctx.ignoreClearRect=!!ve}})};f.prototype.setLineDash=function(P){this.lineDash=P},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){T.call(this,"fill",!1)},f.prototype.stroke=function(){T.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(P,U){if(isNaN(P)||isNaN(U))throw Ca.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var z=this.ctx.transform.applyToPoint(new o(P,U));this.path.push({type:"mt",x:z.x,y:z.y}),this.ctx.lastPoint=new o(P,U)},f.prototype.closePath=function(){var P=new o(0,0),U=0;for(U=this.path.length-1;U!==-1;U--)if(this.path[U].type==="begin"&&ga(this.path[U+1])==="object"&&typeof this.path[U+1].x=="number"){P=new o(this.path[U+1].x,this.path[U+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(P.x,P.y)},f.prototype.lineTo=function(P,U){if(isNaN(P)||isNaN(U))throw Ca.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var z=this.ctx.transform.applyToPoint(new o(P,U));this.path.push({type:"lt",x:z.x,y:z.y}),this.ctx.lastPoint=new o(z.x,z.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),T.call(this,null,!0)},f.prototype.quadraticCurveTo=function(P,U,z,J){if(isNaN(z)||isNaN(J)||isNaN(P)||isNaN(U))throw Ca.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new o(z,J)),se=this.ctx.transform.applyToPoint(new o(P,U));this.path.push({type:"qct",x1:se.x,y1:se.y,x:te.x,y:te.y}),this.ctx.lastPoint=new o(te.x,te.y)},f.prototype.bezierCurveTo=function(P,U,z,J,te,se){if(isNaN(te)||isNaN(se)||isNaN(P)||isNaN(U)||isNaN(z)||isNaN(J))throw Ca.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ie=this.ctx.transform.applyToPoint(new o(te,se)),ce=this.ctx.transform.applyToPoint(new o(P,U)),de=this.ctx.transform.applyToPoint(new o(z,J));this.path.push({type:"bct",x1:ce.x,y1:ce.y,x2:de.x,y2:de.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new o(ie.x,ie.y)},f.prototype.arc=function(P,U,z,J,te,se){if(isNaN(P)||isNaN(U)||isNaN(z)||isNaN(J)||isNaN(te))throw Ca.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(se=!!se,!this.ctx.transform.isIdentity){var ie=this.ctx.transform.applyToPoint(new o(P,U));P=ie.x,U=ie.y;var ce=this.ctx.transform.applyToPoint(new o(0,z)),de=this.ctx.transform.applyToPoint(new o(0,0));z=Math.sqrt(Math.pow(ce.x-de.x,2)+Math.pow(ce.y-de.y,2))}Math.abs(te-J)>=2*Math.PI&&(J=0,te=2*Math.PI),this.path.push({type:"arc",x:P,y:U,radius:z,startAngle:J,endAngle:te,counterclockwise:se})},f.prototype.arcTo=function(P,U,z,J,te){throw new Error("arcTo not implemented.")},f.prototype.rect=function(P,U,z,J){if(isNaN(P)||isNaN(U)||isNaN(z)||isNaN(J))throw Ca.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,U),this.lineTo(P+z,U),this.lineTo(P+z,U+J),this.lineTo(P,U+J),this.lineTo(P,U),this.lineTo(P+z,U),this.lineTo(P,U)},f.prototype.fillRect=function(P,U,z,J){if(isNaN(P)||isNaN(U)||isNaN(z)||isNaN(J))throw Ca.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,U,z,J),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},f.prototype.strokeRect=function(P,U,z,J){if(isNaN(P)||isNaN(U)||isNaN(z)||isNaN(J))throw Ca.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(P,U,z,J),this.stroke())},f.prototype.clearRect=function(P,U,z,J){if(isNaN(P)||isNaN(U)||isNaN(z)||isNaN(J))throw Ca.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,U,z,J))},f.prototype.save=function(P){P=typeof P!="boolean"||P;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("q");if(this.pdf.setPage(U),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},f.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("Q");this.pdf.setPage(U),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(P){var U,z,J,te;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))U=0,z=0,J=0,te=0;else{var se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(se!==null)U=parseInt(se[1]),z=parseInt(se[2]),J=parseInt(se[3]),te=1;else if((se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)U=parseInt(se[1]),z=parseInt(se[2]),J=parseInt(se[3]),te=parseFloat(se[4]);else{if(te=1,typeof P=="string"&&P.charAt(0)!=="#"){var ie=new Mle(P);P=ie.ok?ie.toHex():"#000000"}P.length===4?(U=P.substring(1,2),U+=U,z=P.substring(2,3),z+=z,J=P.substring(3,4),J+=J):(U=P.substring(1,3),z=P.substring(3,5),J=P.substring(5,7)),U=parseInt(U,16),z=parseInt(z,16),J=parseInt(J,16)}}return{r:U,g:z,b:J,a:te,style:P}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(P,U,z,J){if(isNaN(U)||isNaN(z)||typeof P!="string")throw Ca.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!m.call(this)){var te=G(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;k.call(this,{text:P,x:U,y:z,scale:se,angle:te,align:this.textAlign,maxWidth:J})}},f.prototype.strokeText=function(P,U,z,J){if(isNaN(U)||isNaN(z)||typeof P!="string")throw Ca.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){J=isNaN(J)?void 0:J;var te=G(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;k.call(this,{text:P,x:U,y:z,scale:se,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:J})}},f.prototype.measureText=function(P){if(typeof P!="string")throw Ca.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var U=this.pdf,z=this.pdf.internal.scaleFactor,J=U.internal.getFontSize(),te=U.getStringUnitWidth(P)*J/U.internal.scaleFactor,se=function(ie){var ce=(ie=ie||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ce}}),this};return new se({width:te*=Math.round(96*z/72*1e4)/1e4})},f.prototype.scale=function(P,U){if(isNaN(P)||isNaN(U))throw Ca.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var z=new c(P,0,0,U,0,0);this.ctx.transform=this.ctx.transform.multiply(z)},f.prototype.rotate=function(P){if(isNaN(P))throw Ca.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var U=new c(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(U)},f.prototype.translate=function(P,U){if(isNaN(P)||isNaN(U))throw Ca.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var z=new c(1,0,0,1,P,U);this.ctx.transform=this.ctx.transform.multiply(z)},f.prototype.transform=function(P,U,z,J,te,se){if(isNaN(P)||isNaN(U)||isNaN(z)||isNaN(J)||isNaN(te)||isNaN(se))throw Ca.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ie=new c(P,U,z,J,te,se);this.ctx.transform=this.ctx.transform.multiply(ie)},f.prototype.setTransform=function(P,U,z,J,te,se){P=isNaN(P)?1:P,U=isNaN(U)?0:U,z=isNaN(z)?0:z,J=isNaN(J)?1:J,te=isNaN(te)?0:te,se=isNaN(se)?0:se,this.ctx.transform=new c(P,U,z,J,te,se)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(P,U,z,J,te,se,ie,ce,de){var Be=this.pdf.getImageProperties(P),ae=1,Se=1,ke=1,ve=1;J!==void 0&&ce!==void 0&&(ke=ce/J,ve=de/te,ae=Be.width/J*ce/J,Se=Be.height/te*de/te),se===void 0&&(se=U,ie=z,U=0,z=0),J!==void 0&&ce===void 0&&(ce=J,de=te),J===void 0&&ce===void 0&&(ce=Be.width,de=Be.height);for(var le,be=this.ctx.transform.decompose(),Pe=G(be.rotate.shx),Ue=new c,pe=(Ue=(Ue=(Ue=Ue.multiply(be.translate)).multiply(be.skew)).multiply(be.scale)).applyToRectangle(new l(se-U*ke,ie-z*ve,J*ae,te*Se)),Oe=v.call(this,pe),Le=[],Ge=0;Ge<Oe.length;Ge+=1)Le.indexOf(Oe[Ge])===-1&&Le.push(Oe[Ge]);if(_(Le),this.autoPaging)for(var et=Le[0],ut=Le[Le.length-1],xt=et;xt<ut+1;xt++){this.pdf.setPage(xt);var It=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Mt=xt===1?this.posY+this.margin[0]:this.margin[0],Pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ht=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],wt=xt===1?0:Pt+(xt-2)*Ht;if(this.ctx.clip_path.length!==0){var Tr=this.path;le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(le,this.posX+this.margin[3],-wt+Mt+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=Tr}var tr=JSON.parse(JSON.stringify(pe));tr=w([tr],this.posX+this.margin[3],-wt+Mt+this.ctx.prevPageLastElemOffset)[0];var sn=(xt>et||xt<ut)&&x.call(this);sn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],It,Ht,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",tr.x,tr.y,tr.w,tr.h,null,null,Pe),sn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",pe.x,pe.y,pe.w,pe.h,null,null,Pe)};var v=function(P,U,z){var J=[];U=U||this.pdf.internal.pageSize.width,z=z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":J.push(Math.floor((P.y+te)/z)+1);break;case"arc":J.push(Math.floor((P.y+te-P.radius)/z)+1),J.push(Math.floor((P.y+te+P.radius)/z)+1);break;case"qct":var se=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);J.push(Math.floor((se.y+te)/z)+1),J.push(Math.floor((se.y+se.h+te)/z)+1);break;case"bct":var ie=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);J.push(Math.floor((ie.y+te)/z)+1),J.push(Math.floor((ie.y+ie.h+te)/z)+1);break;case"rect":J.push(Math.floor((P.y+te)/z)+1),J.push(Math.floor((P.y+P.h+te)/z)+1)}for(var ce=0;ce<J.length;ce+=1)for(;this.pdf.internal.getNumberOfPages()<J[ce];)y.call(this);return J},y=function(){var P=this.fillStyle,U=this.strokeStyle,z=this.font,J=this.lineCap,te=this.lineWidth,se=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=U,this.font=z,this.lineCap=J,this.lineWidth=te,this.lineJoin=se},w=function(P,U,z){for(var J=0;J<P.length;J++)switch(P[J].type){case"bct":P[J].x2+=U,P[J].y2+=z;case"qct":P[J].x1+=U,P[J].y1+=z;case"mt":case"lt":case"arc":default:P[J].x+=U,P[J].y+=z}return P},_=function(P){return P.sort(function(U,z){return U-z})},T=function(P,U){for(var z,J,te=this.fillStyle,se=this.strokeStyle,ie=this.lineCap,ce=this.lineWidth,de=Math.abs(ce*this.ctx.transform.scaleX),Be=this.lineJoin,ae=JSON.parse(JSON.stringify(this.path)),Se=JSON.parse(JSON.stringify(this.path)),ke=[],ve=0;ve<Se.length;ve++)if(Se[ve].x!==void 0)for(var le=v.call(this,Se[ve]),be=0;be<le.length;be+=1)ke.indexOf(le[be])===-1&&ke.push(le[be]);for(var Pe=0;Pe<ke.length;Pe++)for(;this.pdf.internal.getNumberOfPages()<ke[Pe];)y.call(this);if(_(ke),this.autoPaging)for(var Ue=ke[0],pe=ke[ke.length-1],Oe=Ue;Oe<pe+1;Oe++){this.pdf.setPage(Oe),this.fillStyle=te,this.strokeStyle=se,this.lineCap=ie,this.lineWidth=de,this.lineJoin=Be;var Le=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ge=Oe===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ut=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xt=Oe===1?0:et+(Oe-2)*ut;if(this.ctx.clip_path.length!==0){var It=this.path;z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(z,this.posX+this.margin[3],-xt+Ge+this.ctx.prevPageLastElemOffset),j.call(this,P,!0),this.path=It}if(J=JSON.parse(JSON.stringify(ae)),this.path=w(J,this.posX+this.margin[3],-xt+Ge+this.ctx.prevPageLastElemOffset),U===!1||Oe===0){var Mt=(Oe>Ue||Oe<pe)&&x.call(this);Mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Le,ut,null).clip().discardPath()),j.call(this,P,U),Mt&&this.pdf.restoreGraphicsState()}this.lineWidth=ce}else this.lineWidth=de,j.call(this,P,U),this.lineWidth=ce;this.path=ae},j=function(P,U){if((P!=="stroke"||U||!g.call(this))&&(P==="stroke"||U||!m.call(this))){for(var z,J,te=[],se=this.path,ie=0;ie<se.length;ie++){var ce=se[ie];switch(ce.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:ce,deltas:[],abs:[]});break;case"lt":var de=te.length;if(se[ie-1]&&!isNaN(se[ie-1].x)&&(z=[ce.x-se[ie-1].x,ce.y-se[ie-1].y],de>0)){for(;de>=0;de--)if(te[de-1].close!==!0&&te[de-1].begin!==!0){te[de-1].deltas.push(z),te[de-1].abs.push(ce);break}}break;case"bct":z=[ce.x1-se[ie-1].x,ce.y1-se[ie-1].y,ce.x2-se[ie-1].x,ce.y2-se[ie-1].y,ce.x-se[ie-1].x,ce.y-se[ie-1].y],te[te.length-1].deltas.push(z);break;case"qct":var Be=se[ie-1].x+2/3*(ce.x1-se[ie-1].x),ae=se[ie-1].y+2/3*(ce.y1-se[ie-1].y),Se=ce.x+2/3*(ce.x1-ce.x),ke=ce.y+2/3*(ce.y1-ce.y),ve=ce.x,le=ce.y;z=[Be-se[ie-1].x,ae-se[ie-1].y,Se-se[ie-1].x,ke-se[ie-1].y,ve-se[ie-1].x,le-se[ie-1].y],te[te.length-1].deltas.push(z);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(ce)}}J=U?null:P==="stroke"?"stroke":"fill";for(var be=!1,Pe=0;Pe<te.length;Pe++)if(te[Pe].arc)for(var Ue=te[Pe].abs,pe=0;pe<Ue.length;pe++){var Oe=Ue[pe];Oe.type==="arc"?S.call(this,Oe.x,Oe.y,Oe.radius,Oe.startAngle,Oe.endAngle,Oe.counterclockwise,void 0,U,!be):D.call(this,Oe.x,Oe.y),be=!0}else if(te[Pe].close===!0)this.pdf.internal.out("h"),be=!1;else if(te[Pe].begin!==!0){var Le=te[Pe].start.x,Ge=te[Pe].start.y;L.call(this,te[Pe].deltas,Le,Ge),be=!0}J&&B.call(this,J),U&&M.call(this)}},I=function(P){var U=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,z=U*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-z;case"top":return P+U-z;case"hanging":return P+U-2*z;case"middle":return P+U/2-z;case"ideographic":return P;case"alphabetic":default:return P}},E=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(U,z){this.colorStops.push([U,z])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(P,U,z,J,te,se,ie,ce,de){for(var Be=V.call(this,z,J,te,se),ae=0;ae<Be.length;ae++){var Se=Be[ae];ae===0&&(de?R.call(this,Se.x1+P,Se.y1+U):D.call(this,Se.x1+P,Se.y1+U)),Z.call(this,P,U,Se.x2,Se.y2,Se.x3,Se.y3,Se.x4,Se.y4)}ce?M.call(this):B.call(this,ie)},B=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},M=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(P,U){this.pdf.internal.out(r(P)+" "+n(U)+" m")},k=function(P){var U;switch(P.align){case"right":case"end":U="right";break;case"center":U="center";break;case"left":case"start":default:U="left"}var z=this.pdf.getTextDimensions(P.text),J=I.call(this,P.y),te=E.call(this,J)-z.h,se=this.ctx.transform.applyToPoint(new o(P.x,J)),ie=this.ctx.transform.decompose(),ce=new c;ce=(ce=(ce=ce.multiply(ie.translate)).multiply(ie.skew)).multiply(ie.scale);for(var de,Be,ae,Se=this.ctx.transform.applyToRectangle(new l(P.x,J,z.w,z.h)),ke=ce.applyToRectangle(new l(P.x,te,z.w,z.h)),ve=v.call(this,ke),le=[],be=0;be<ve.length;be+=1)le.indexOf(ve[be])===-1&&le.push(ve[be]);if(_(le),this.autoPaging)for(var Pe=le[0],Ue=le[le.length-1],pe=Pe;pe<Ue+1;pe++){this.pdf.setPage(pe);var Oe=pe===1?this.posY+this.margin[0]:this.margin[0],Le=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[2],et=Ge-this.margin[0],ut=this.pdf.internal.pageSize.width-this.margin[1],xt=ut-this.margin[3],It=pe===1?0:Le+(pe-2)*et;if(this.ctx.clip_path.length!==0){var Mt=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(de,this.posX+this.margin[3],-1*It+Oe),j.call(this,"fill",!0),this.path=Mt}var Pt=w([JSON.parse(JSON.stringify(ke))],this.posX+this.margin[3],-It+Oe+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*P.scale),ae=this.lineWidth,this.lineWidth=ae*P.scale);var Ht=this.autoPaging!=="text";if(Ht||Pt.y+Pt.h<=Ge){if(Ht||Pt.y>=Oe&&Pt.x<=ut){var wt=Ht?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||ut-Pt.x)[0],Tr=w([JSON.parse(JSON.stringify(Se))],this.posX+this.margin[3],-It+Oe+this.ctx.prevPageLastElemOffset)[0],tr=Ht&&(pe>Pe||pe<Ue)&&x.call(this);tr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xt,et,null).clip().discardPath()),this.pdf.text(wt,Tr.x,Tr.y,{angle:P.angle,align:U,renderingMode:P.renderingMode}),tr&&this.pdf.restoreGraphicsState()}}else Pt.y<Ge&&(this.ctx.prevPageLastElemOffset+=Ge-Pt.y);P.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=ae)}else P.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*P.scale),ae=this.lineWidth,this.lineWidth=ae*P.scale),this.pdf.text(P.text,se.x+this.posX,se.y+this.posY,{angle:P.angle,align:U,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=ae)},D=function(P,U,z,J){z=z||0,J=J||0,this.pdf.internal.out(r(P+z)+" "+n(U+J)+" l")},L=function(P,U,z){return this.pdf.lines(P,U,z,null,null)},Z=function(P,U,z,J,te,se,ie,ce){this.pdf.internal.out([t(a(z+P)),t(s(J+U)),t(a(te+P)),t(s(se+U)),t(a(ie+P)),t(s(ce+U)),"c"].join(" "))},V=function(P,U,z,J){for(var te=2*Math.PI,se=Math.PI/2;U>z;)U-=te;var ie=Math.abs(z-U);ie<te&&J&&(ie=te-ie);for(var ce=[],de=J?-1:1,Be=U;ie>1e-5;){var ae=Be+de*Math.min(ie,se);ce.push(q.call(this,P,Be,ae)),ie-=Math.abs(ae-Be),Be=ae}return ce},q=function(P,U,z){var J=(z-U)/2,te=P*Math.cos(J),se=P*Math.sin(J),ie=te,ce=-se,de=ie*ie+ce*ce,Be=de+ie*te+ce*se,ae=4/3*(Math.sqrt(2*de*Be)-Be)/(ie*se-ce*te),Se=ie-ae*ce,ke=ce+ae*ie,ve=Se,le=-ke,be=J+U,Pe=Math.cos(be),Ue=Math.sin(be);return{x1:P*Math.cos(U),y1:P*Math.sin(U),x2:Se*Pe-ke*Ue,y2:Se*Ue+ke*Pe,x3:ve*Pe-le*Ue,y3:ve*Ue+le*Pe,x4:P*Math.cos(z),y4:P*Math.sin(z)}},G=function(P){return 180*P/Math.PI},K=function(P,U,z,J,te,se){var ie=P+.5*(z-P),ce=U+.5*(J-U),de=te+.5*(z-te),Be=se+.5*(J-se),ae=Math.min(P,te,ie,de),Se=Math.max(P,te,ie,de),ke=Math.min(U,se,ce,Be),ve=Math.max(U,se,ce,Be);return new l(ae,ke,Se-ae,ve-ke)},ee=function(P,U,z,J,te,se,ie,ce){var de,Be,ae,Se,ke,ve,le,be,Pe,Ue,pe,Oe,Le,Ge,et=z-P,ut=J-U,xt=te-z,It=se-J,Mt=ie-te,Pt=ce-se;for(Be=0;Be<41;Be++)Pe=(le=(ae=P+(de=Be/40)*et)+de*((ke=z+de*xt)-ae))+de*(ke+de*(te+de*Mt-ke)-le),Ue=(be=(Se=U+de*ut)+de*((ve=J+de*It)-Se))+de*(ve+de*(se+de*Pt-ve)-be),Be==0?(pe=Pe,Oe=Ue,Le=Pe,Ge=Ue):(pe=Math.min(pe,Pe),Oe=Math.min(Oe,Ue),Le=Math.max(Le,Pe),Ge=Math.max(Ge,Ue));return new l(Math.round(pe),Math.round(Oe),Math.round(Le-pe),Math.round(Ge-Oe))},W=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,U,z=(P=this.ctx.lineDash,U=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:U}));this.prevLineDash!==z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=z)}}})(vr.API),function(e){var t=function(s){var o,l,c,u,d,f,h,m,g,x;for(l=[],c=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(d=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(f=(d=((d=((d=((d=(d-(x=d%85))/85)-(g=d%85))/85)-(m=d%85))/85)-(h=d%85))/85)%85,l.push(f+33,h+33,m+33,g+33,x+33)):l.push(122);return function(v,y){for(var w=y;w>0;w--)v.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(s){var o,l,c,u,d,f=String,h="length",m=255,g="charCodeAt",x="slice",v="replace";for(s[x](-2),s=s[x](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),c=[],u=0,d=(s+=o="uuuuu"[x](s[h]%5||5))[h];d>u;u+=5)l=52200625*(s[g](u)-33)+614125*(s[g](u+1)-33)+7225*(s[g](u+2)-33)+85*(s[g](u+3)-33)+(s[g](u+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(y,w){for(var _=w;_>0;_--)y.pop()}(c,o[h]),f.fromCharCode.apply(f,c)},n=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},a=function(s){for(var o=new Uint8Array(s.length),l=s.length;l--;)o[l]=s.charCodeAt(l);return s=(o=BO(o)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};e.processDataByFilters=function(s,o){var l=0,c=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(vr.API),function(e){e.loadFile=function(t,r,n){return function(a,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,d){var f=new XMLHttpRequest,h=0,m=function(g){var x=g.length,v=[],y=String.fromCharCode;for(h=0;h<x;h+=1)v.push(y(255&g.charCodeAt(h)));return v.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(m(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return m(f.responseText)}(a,s,o)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(vr.API),function(e){function t(){return(Qr.html2canvas?Promise.resolve(Qr.html2canvas):ac(()=>Promise.resolve().then(()=>$ht),void 0)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Qr.DOMPurify?Promise.resolve(Qr.DOMPurify):ac(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=ga(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},a=function(o,l){var c=document.createElement(o);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},s=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,o,1,[o])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,l){return o.__proto__=l||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),h=u.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||f.appendChild(c(h,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var m=u[h],g=m.src.find(function(x){return x.format==="truetype"});g&&c.addFont(g.url,m.ref.name,m.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),l(this.prop.container,f)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},s.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(o,l){return this.then(function(){var c=o in s.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},s.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(o=o||vr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,l,c,u){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,l,c,u){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return c.updateProgress(null,u),f}).then(u,d).then(function(f){return c.updateProgress(1),f})})},s.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=c.call(u,o,l);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},s.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return s.convert(l,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,vr.getPageSize=function(o,l,c){if(ga(o)==="object"){var u=o;o=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var d,f=(""+c).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var m,g=0,x=0;if(h.hasOwnProperty(f))g=h[f][1]/d,x=h[f][0]/d;else try{g=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",x>g&&(m=x,x=g,g=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",g>x&&(m=x,x=g,g=m)}return{width:x,height:g,unit:l,k:d,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(PO):null;var c=new s(l);return l.worker?c:c.from(o).doCallback()}}(vr.API),vr.API.addJS=function(e){return IK=e,this.internal.events.subscribe("postPutResources",function(){EC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(EC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),TK=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+IK+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){EC!==void 0&&TK!==void 0&&this.internal.out("/Names <</JavaScript "+EC+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var o=a[s],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var o={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var o=n.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(vr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,s,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(f){for(var h,m=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,x={width:0,height:0,numcomponents:1},v=4;v<g;v+=2){if(v+=m,t.indexOf(f.charCodeAt(v+1))!==-1){h=256*f.charCodeAt(v+5)+f.charCodeAt(v+6),x={width:256*f.charCodeAt(v+7)+f.charCodeAt(v+8),height:h,numcomponents:f.charCodeAt(v+9)};break}m=256*f.charCodeAt(v+2)+f.charCodeAt(v+3)}return x}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(vr.API);var Mx,NC,FK,OK,DK,XWe=function(){var e,t,r;function n(s){var o,l,c,u,d,f,h,m,g,x,v,y,w,_;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(o=this.readUInt32(),g=(function(){var T,j;for(j=[],T=0;T<4;++T)j.push(String.fromCharCode(this.data[this.pos++]));return j}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*d/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,o-=4),s=(f!=null?f.data:void 0)||this.imgData,y=0;0<=o?y<o:y>o;0<=o?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((x=c-this.transparency.indexed.length)>0)for(w=0;0<=x?w<x:w>x;0<=x?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":h=(v=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,v.slice(0,h)),this.text[m]=String.fromCharCode.apply(String,v.slice(h+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(_=this.colorType)===4||_===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var o,l;for(l=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(f,h,m,g){var x,v,y,w,_,T,j,I,E,S,B,M,R,k,D,L,Z,V,q,G,K,ee=Math.ceil((u.width-f)/m),W=Math.ceil((u.height-h)/g),P=u.width==ee&&u.height==W;for(k=o*ee,M=P?l:new Uint8Array(k*W),T=s.length,R=0,v=0;R<W&&c<T;){switch(s[c++]){case 0:for(w=Z=0;Z<k;w=Z+=1)M[v++]=s[c++];break;case 1:for(w=V=0;V<k;w=V+=1)x=s[c++],_=w<o?0:M[v-o],M[v++]=(x+_)%256;break;case 2:for(w=q=0;q<k;w=q+=1)x=s[c++],y=(w-w%o)/o,D=R&&M[(R-1)*k+y*o+w%o],M[v++]=(D+x)%256;break;case 3:for(w=G=0;G<k;w=G+=1)x=s[c++],y=(w-w%o)/o,_=w<o?0:M[v-o],D=R&&M[(R-1)*k+y*o+w%o],M[v++]=(x+Math.floor((_+D)/2))%256;break;case 4:for(w=K=0;K<k;w=K+=1)x=s[c++],y=(w-w%o)/o,_=w<o?0:M[v-o],R===0?D=L=0:(D=M[(R-1)*k+y*o+w%o],L=y&&M[(R-1)*k+(y-1)*o+w%o]),j=_+D-L,I=Math.abs(j-_),S=Math.abs(j-D),B=Math.abs(j-L),E=I<=S&&I<=B?_:S<=B?D:L,M[v++]=(x+E)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!P){var U=((h+R*g)*u.width+f)*o,z=R*k;for(w=0;w<ee;w+=1){for(var J=0;J<o;J+=1)l[U++]=M[z++];U+=(m-1)*o}}R++}}return s=kWe(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),l},n.prototype.decodePalette=function(){var s,o,l,c,u,d,f,h,m;for(l=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+l.length),c=0,s=0,o=f=0,h=l.length;f<h;o=f+=3)u[c++]=l[o],u[c++]=l[o+1],u[c++]=l[o+2],u[c++]=(m=d[s++])!=null?m:255;return u},n.prototype.copyToImageData=function(s,o){var l,c,u,d,f,h,m,g,x,v,y;if(c=this.colors,x=null,l=this.hasAlphaChannel,this.palette.length&&(x=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,l=!0),g=(u=s.data||s).length,f=x||o,d=h=0,c===1)for(;d<g;)m=x?4*o[d/4]:h,v=f[m++],u[d++]=v,u[d++]=v,u[d++]=v,u[d++]=l?f[m++]:255,h=m;else for(;d<g;)m=x?4*o[d/4]:h,u[d++]=f[m++],u[d++]=f[m++],u[d++]=f[m++],u[d++]=l?f[m++]:255,h=m},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(Qr)==="[object Window]"){try{t=Qr.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(s){var o;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var o,l,c,u,d,f,h,m;if(this.animation){for(m=[],l=d=0,f=(h=this.animation.frames).length;d<f;l=++d)o=h[l],c=s.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,u),o.imageData=c,m.push(o.image=e(c));return m}},n.prototype.renderFrame=function(s,o){var l,c,u;return l=(c=this.animation.frames)[o],u=c[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),l.blendOp===0&&s.clearRect(l.xOffset,l.yOffset,l.width,l.height),s.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(s){var o,l,c,u,d,f,h=this;return l=0,f=this.animation,u=f.numFrames,c=f.frames,d=f.numPlays,(o=function(){var m,g;if(m=l++%u,g=c[m],h.renderFrame(s,m),u>1&&l/u<d)return h.animation._timeout=setTimeout(o,g.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var o,l;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function YWe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,o=1<<(7&a)+1;e[t++],e[t++];var l=null,c=null;s&&(l=t,c=o,t+=3*o);var u=!0,d=[],f=0,h=null,m=0,g=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var x=e[t++];f=e[t++]|e[t++]<<8,h=e[t++],(1&x)==0&&(h=null),m=x>>2&7,t++;break;case 254:for(;;){if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var v=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,T=e[t++],j=T>>6&1,I=1<<(7&T)+1,E=l,S=c,B=!1;T>>7&&(B=!0,E=t,S=I,t+=3*I);var M=t;for(t++;;){var R;if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}d.push({x:v,y,width:w,height:_,has_local_palette:B,palette_offset:E,palette_size:S,data_offset:M,data_length:t-M,transparent_index:h,interlaced:!!j,delay:f,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(k){if(k<0||k>=d.length)throw new Error("Frame index out of range.");return d[k]},this.decodeAndBlitFrameBGRA=function(k,D){var L=this.frameInfo(k),Z=L.width*L.height,V=new Uint8Array(Z);PK(e,L.data_offset,V,Z);var q=L.palette_offset,G=L.transparent_index;G===null&&(G=256);var K=L.width,ee=r-K,W=K,P=4*(L.y*r+L.x),U=4*((L.y+L.height)*r+L.x),z=P,J=4*ee;L.interlaced===!0&&(J+=4*r*7);for(var te=8,se=0,ie=V.length;se<ie;++se){var ce=V[se];if(W===0&&(W=K,(z+=J)>=U&&(J=4*ee+4*r*(te-1),z=P+(K+ee)*(te<<1),te>>=1)),ce===G)z+=4;else{var de=e[q+3*ce],Be=e[q+3*ce+1],ae=e[q+3*ce+2];D[z++]=ae,D[z++]=Be,D[z++]=de,D[z++]=255}--W}},this.decodeAndBlitFrameRGBA=function(k,D){var L=this.frameInfo(k),Z=L.width*L.height,V=new Uint8Array(Z);PK(e,L.data_offset,V,Z);var q=L.palette_offset,G=L.transparent_index;G===null&&(G=256);var K=L.width,ee=r-K,W=K,P=4*(L.y*r+L.x),U=4*((L.y+L.height)*r+L.x),z=P,J=4*ee;L.interlaced===!0&&(J+=4*r*7);for(var te=8,se=0,ie=V.length;se<ie;++se){var ce=V[se];if(W===0&&(W=K,(z+=J)>=U&&(J=4*ee+4*r*(te-1),z=P+(K+ee)*(te<<1),te>>=1)),ce===G)z+=4;else{var de=e[q+3*ce],Be=e[q+3*ce+1],ae=e[q+3*ce+2];D[z++]=de,D[z++]=Be,D[z++]=ae,D[z++]=255}--W}}}function PK(e,t,r,n){for(var a=e[t++],s=1<<a,o=s+1,l=o+1,c=a+1,u=(1<<c)-1,d=0,f=0,h=0,m=e[t++],g=new Int32Array(4096),x=null;;){for(;d<16&&m!==0;)f|=e[t++]<<d,d+=8,m===1?m=e[t++]:--m;if(d<c)break;var v=f&u;if(f>>=c,d-=c,v!==s){if(v===o)break;for(var y=v<l?v:x,w=0,_=y;_>s;)_=g[_]>>8,++w;var T=_;if(h+w+(y!==v?1:0)>n)return void Ca.log("Warning, gif stream longer than expected.");r[h++]=T;var j=h+=w;for(y!==v&&(r[h++]=T),_=y;w--;)_=g[_],r[--j]=255&_,_>>=8;x!==null&&l<4096&&(g[l++]=x<<8|T,l>=u+1&&c<12&&(++c,u=u<<1|1)),x=v}else l=o+1,u=(1<<(c=a+1))-1,x=null}return h!==n&&Ca.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function BI(e){var t,r,n,a,s,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),m=new Array(64),g=new Array(64),x=[],v=0,y=7,w=new Array(64),_=new Array(64),T=new Array(64),j=new Array(256),I=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function V(P,U){for(var z=0,J=0,te=new Array,se=1;se<=16;se++){for(var ie=1;ie<=P[se];ie++)te[U[J]]=[],te[U[J]][0]=z,te[U[J]][1]=se,J++,z++;z*=2}return te}function q(P){for(var U=P[0],z=P[1]-1;z>=0;)U&1<<z&&(v|=1<<y),z--,--y<0&&(v==255?(G(255),G(0)):G(v),y=7,v=0)}function G(P){x.push(P)}function K(P){G(P>>8&255),G(255&P)}function ee(P,U,z,J,te){for(var se,ie=te[0],ce=te[240],de=function(Ue,pe){var Oe,Le,Ge,et,ut,xt,It,Mt,Pt,Ht,wt=0;for(Pt=0;Pt<8;++Pt){Oe=Ue[wt],Le=Ue[wt+1],Ge=Ue[wt+2],et=Ue[wt+3],ut=Ue[wt+4],xt=Ue[wt+5],It=Ue[wt+6];var Tr=Oe+(Mt=Ue[wt+7]),tr=Oe-Mt,sn=Le+It,kr=Le-It,$r=Ge+xt,Fn=Ge-xt,Pr=et+ut,ms=et-ut,pn=Tr+Pr,la=Tr-Pr,Ba=sn+$r,rn=sn-$r;Ue[wt]=pn+Ba,Ue[wt+4]=pn-Ba;var gr=.707106781*(rn+la);Ue[wt+2]=la+gr,Ue[wt+6]=la-gr;var Ze=.382683433*((pn=ms+Fn)-(rn=kr+tr)),mt=.5411961*pn+Ze,Je=1.306562965*rn+Ze,vt=.707106781*(Ba=Fn+kr),Et=tr+vt,bt=tr-vt;Ue[wt+5]=bt+mt,Ue[wt+3]=bt-mt,Ue[wt+1]=Et+Je,Ue[wt+7]=Et-Je,wt+=8}for(wt=0,Pt=0;Pt<8;++Pt){Oe=Ue[wt],Le=Ue[wt+8],Ge=Ue[wt+16],et=Ue[wt+24],ut=Ue[wt+32],xt=Ue[wt+40],It=Ue[wt+48];var ar=Oe+(Mt=Ue[wt+56]),xr=Oe-Mt,Wr=Le+It,Zr=Le-It,Kr=Ge+xt,me=Ge-xt,Ie=et+ut,_e=et-ut,Ne=ar+Ie,je=ar-Ie,Fe=Wr+Kr,Ye=Wr-Kr;Ue[wt]=Ne+Fe,Ue[wt+32]=Ne-Fe;var ft=.707106781*(Ye+je);Ue[wt+16]=je+ft,Ue[wt+48]=je-ft;var qe=.382683433*((Ne=_e+me)-(Ye=Zr+xr)),rt=.5411961*Ne+qe,it=1.306562965*Ye+qe,Ft=.707106781*(Fe=me+Zr),$t=xr+Ft,Jt=xr-Ft;Ue[wt+40]=Jt+rt,Ue[wt+24]=Jt-rt,Ue[wt+8]=$t+it,Ue[wt+56]=$t-it,wt++}for(Pt=0;Pt<64;++Pt)Ht=Ue[Pt]*pe[Pt],m[Pt]=Ht>0?Ht+.5|0:Ht-.5|0;return m}(P,U),Be=0;Be<64;++Be)g[E[Be]]=de[Be];var ae=g[0]-z;z=g[0],ae==0?q(J[0]):(q(J[h[se=32767+ae]]),q(f[se]));for(var Se=63;Se>0&&g[Se]==0;)Se--;if(Se==0)return q(ie),z;for(var ke,ve=1;ve<=Se;){for(var le=ve;g[ve]==0&&ve<=Se;)++ve;var be=ve-le;if(be>=16){ke=be>>4;for(var Pe=1;Pe<=ke;++Pe)q(ce);be&=15}se=32767+g[ve],q(te[(be<<4)+h[se]]),q(f[se]),ve++}return Se!=63&&q(ie),z}function W(P){P=Math.min(Math.max(P,1),100),s!=P&&(function(U){for(var z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var te=o((z[J]*U+50)/100);te=Math.min(Math.max(te,1),255),l[E[J]]=te}for(var se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ie=0;ie<64;ie++){var ce=o((se[ie]*U+50)/100);ce=Math.min(Math.max(ce,1),255),c[E[ie]]=ce}for(var de=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Be=0,ae=0;ae<8;ae++)for(var Se=0;Se<8;Se++)u[Be]=1/(l[E[Be]]*de[ae]*de[Se]*8),d[Be]=1/(c[E[Be]]*de[ae]*de[Se]*8),Be++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),s=P)}this.encode=function(P,U){U&&W(U),x=new Array,v=0,y=7,K(65496),K(65504),K(16),G(74),G(70),G(73),G(70),G(0),G(1),G(1),G(0),K(1),K(1),G(0),G(0),function(){K(65499),K(132),G(0);for(var Le=0;Le<64;Le++)G(l[Le]);G(1);for(var Ge=0;Ge<64;Ge++)G(c[Ge])}(),function(Le,Ge){K(65472),K(17),G(8),K(Ge),K(Le),G(3),G(1),G(17),G(0),G(2),G(17),G(1),G(3),G(17),G(1)}(P.width,P.height),function(){K(65476),K(418),G(0);for(var Le=0;Le<16;Le++)G(S[Le+1]);for(var Ge=0;Ge<=11;Ge++)G(B[Ge]);G(16);for(var et=0;et<16;et++)G(M[et+1]);for(var ut=0;ut<=161;ut++)G(R[ut]);G(1);for(var xt=0;xt<16;xt++)G(k[xt+1]);for(var It=0;It<=11;It++)G(D[It]);G(17);for(var Mt=0;Mt<16;Mt++)G(L[Mt+1]);for(var Pt=0;Pt<=161;Pt++)G(Z[Pt])}(),K(65498),K(12),G(3),G(1),G(0),G(2),G(17),G(3),G(17),G(0),G(63),G(0);var z=0,J=0,te=0;v=0,y=7,this.encode.displayName="_encode_";for(var se,ie,ce,de,Be,ae,Se,ke,ve,le=P.data,be=P.width,Pe=P.height,Ue=4*be,pe=0;pe<Pe;){for(se=0;se<Ue;){for(Be=Ue*pe+se,Se=-1,ke=0,ve=0;ve<64;ve++)ae=Be+(ke=ve>>3)*Ue+(Se=4*(7&ve)),pe+ke>=Pe&&(ae-=Ue*(pe+1+ke-Pe)),se+Se>=Ue&&(ae-=se+Se-Ue+4),ie=le[ae++],ce=le[ae++],de=le[ae++],w[ve]=(I[ie]+I[ce+256>>0]+I[de+512>>0]>>16)-128,_[ve]=(I[ie+768>>0]+I[ce+1024>>0]+I[de+1280>>0]>>16)-128,T[ve]=(I[ie+1280>>0]+I[ce+1536>>0]+I[de+1792>>0]>>16)-128;z=ee(w,u,z,t,n),J=ee(_,d,J,r,a),te=ee(T,d,te,r,a),se+=32}pe+=8}if(y>=0){var Oe=[];Oe[1]=y+1,Oe[0]=(1<<y+1)-1,q(Oe)}return K(65497),new Uint8Array(x)},e=e||50,function(){for(var P=String.fromCharCode,U=0;U<256;U++)j[U]=P(U)}(),t=V(S,B),r=V(k,D),n=V(M,R),a=V(L,Z),function(){for(var P=1,U=2,z=1;z<=15;z++){for(var J=P;J<U;J++)h[32767+J]=z,f[32767+J]=[],f[32767+J][1]=z,f[32767+J][0]=J;for(var te=-(U-1);te<=-P;te++)h[32767+te]=z,f[32767+te]=[],f[32767+te][1]=z,f[32767+te][0]=U-1+te;P<<=1,U<<=1}}(),function(){for(var P=0;P<256;P++)I[P]=19595*P,I[P+256>>0]=38470*P,I[P+512>>0]=7471*P+32768,I[P+768>>0]=-11059*P,I[P+1024>>0]=-21709*P,I[P+1280>>0]=32768*P+8421375,I[P+1536>>0]=-27439*P,I[P+1792>>0]=-5329*P}(),W(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Cd(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function RK(e){function t(S){if(!S)throw Error("assert :P")}function r(S,B,M){for(var R=0;4>R;R++)if(S[B+R]!=M.charCodeAt(R))return!0;return!1}function n(S,B,M,R,k){for(var D=0;D<k;D++)S[B+D]=M[R+D]}function a(S,B,M,R){for(var k=0;k<R;k++)S[B+k]=M}function s(S){return new Int32Array(S)}function o(S,B){for(var M=[],R=0;R<S;R++)M.push(new B);return M}function l(S,B){var M=[];return function R(k,D,L){for(var Z=L[D],V=0;V<Z&&(k.push(L.length>D+1?[]:new B),!(L.length<D+1));V++)R(k[V],D+1,L)}(M,0,S),M}var c=function(){var S=this;function B(F,H){for(var re=1<<H-1>>>0;F&re;)re>>>=1;return re?(F&re-1)+re:F}function M(F,H,re,oe,Ae){t(!(oe%re));do F[H+(oe-=re)]=Ae;while(0<oe)}function R(F,H,re,oe,Ae){if(t(2328>=Ae),512>=Ae)var ge=s(512);else if((ge=s(Ae))==null)return 0;return function(xe,ye,Ce,Te,Qe,st){var tt,We,Bt=ye,gt=1<<Ce,He=s(16),ze=s(16);for(t(Qe!=0),t(Te!=null),t(xe!=null),t(0<Ce),We=0;We<Qe;++We){if(15<Te[We])return 0;++He[Te[We]]}if(He[0]==Qe)return 0;for(ze[1]=0,tt=1;15>tt;++tt){if(He[tt]>1<<tt)return 0;ze[tt+1]=ze[tt]+He[tt]}for(We=0;We<Qe;++We)tt=Te[We],0<Te[We]&&(st[ze[tt]++]=We);if(ze[15]==1)return(Te=new k).g=0,Te.value=st[0],M(xe,Bt,1,gt,Te),gt;var _t,Tt=-1,kt=gt-1,nr=0,Yt=1,br=1,er=1<<Ce;for(We=0,tt=1,Qe=2;tt<=Ce;++tt,Qe<<=1){if(Yt+=br<<=1,0>(br-=He[tt]))return 0;for(;0<He[tt];--He[tt])(Te=new k).g=tt,Te.value=st[We++],M(xe,Bt+nr,Qe,er,Te),nr=B(nr,tt)}for(tt=Ce+1,Qe=2;15>=tt;++tt,Qe<<=1){if(Yt+=br<<=1,0>(br-=He[tt]))return 0;for(;0<He[tt];--He[tt]){if(Te=new k,(nr&kt)!=Tt){for(Bt+=er,_t=1<<(Tt=tt)-Ce;15>Tt&&!(0>=(_t-=He[Tt]));)++Tt,_t<<=1;gt+=er=1<<(_t=Tt-Ce),xe[ye+(Tt=nr&kt)].g=_t+Ce,xe[ye+Tt].value=Bt-ye-Tt}Te.g=tt-Ce,Te.value=st[We++],M(xe,Bt+(nr>>Ce),Qe,er,Te),nr=B(nr,tt)}}return Yt!=2*ze[15]-1?0:gt}(F,H,re,oe,Ae,ge)}function k(){this.value=this.g=0}function D(){this.value=this.g=0}function L(){this.G=o(5,k),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ms,D)}function Z(F,H,re,oe){t(F!=null),t(H!=null),t(2147483648>oe),F.Ca=254,F.I=0,F.b=-8,F.Ka=0,F.oa=H,F.pa=re,F.Jd=H,F.Yc=re+oe,F.Zc=4<=oe?re+oe-4+1:re,se(F)}function V(F,H){for(var re=0;0<H--;)re|=ce(F,128)<<H;return re}function q(F,H){var re=V(F,H);return ie(F)?-re:re}function G(F,H,re,oe){var Ae,ge=0;for(t(F!=null),t(H!=null),t(4294967288>oe),F.Sb=oe,F.Ra=0,F.u=0,F.h=0,4<oe&&(oe=4),Ae=0;Ae<oe;++Ae)ge+=H[re+Ae]<<8*Ae;F.Ra=ge,F.bb=oe,F.oa=H,F.pa=re}function K(F){for(;8<=F.u&&F.bb<F.Sb;)F.Ra>>>=8,F.Ra+=F.oa[F.pa+F.bb]<<EA-8>>>0,++F.bb,F.u-=8;z(F)&&(F.h=1,F.u=0)}function ee(F,H){if(t(0<=H),!F.h&&H<=wA){var re=U(F)&lf[H];return F.u+=H,K(F),re}return F.h=1,F.u=0}function W(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function U(F){return F.Ra>>>(F.u&EA-1)>>>0}function z(F){return t(F.bb<=F.Sb),F.h||F.bb==F.Sb&&F.u>EA}function J(F,H){F.u=H,F.h=z(F)}function te(F){F.u>=Zh&&(t(F.u>=Zh),K(F))}function se(F){t(F!=null&&F.oa!=null),F.pa<F.Zc?(F.I=(F.oa[F.pa++]|F.I<<8)>>>0,F.b+=8):(t(F!=null&&F.oa!=null),F.pa<F.Yc?(F.b+=8,F.I=F.oa[F.pa++]|F.I<<8):F.Ka?F.b=0:(F.I<<=8,F.b+=8,F.Ka=1))}function ie(F){return V(F,1)}function ce(F,H){var re=F.Ca;0>F.b&&se(F);var oe=F.b,Ae=re*H>>>8,ge=(F.I>>>oe>Ae)+0;for(ge?(re-=Ae,F.I-=Ae+1<<oe>>>0):re=Ae+1,oe=re,Ae=0;256<=oe;)Ae+=8,oe>>=8;return oe=7^Ae+Fo[oe],F.b-=oe,F.Ca=(re<<oe)-1,ge}function de(F,H,re){F[H+0]=re>>24&255,F[H+1]=re>>16&255,F[H+2]=re>>8&255,F[H+3]=re>>0&255}function Be(F,H){return F[H+0]<<0|F[H+1]<<8}function ae(F,H){return Be(F,H)|F[H+2]<<16}function Se(F,H){return Be(F,H)|Be(F,H+2)<<16}function ke(F,H){var re=1<<H;return t(F!=null),t(0<H),F.X=s(re),F.X==null?0:(F.Mb=32-H,F.Xa=H,1)}function ve(F,H){t(F!=null),t(H!=null),t(F.Xa==H.Xa),n(H.X,0,F.X,0,1<<H.Xa)}function le(){this.X=[],this.Xa=this.Mb=0}function be(F,H,re,oe){t(re!=null),t(oe!=null);var Ae=re[0],ge=oe[0];return Ae==0&&(Ae=(F*ge+H/2)/H),ge==0&&(ge=(H*Ae+F/2)/F),0>=Ae||0>=ge?0:(re[0]=Ae,oe[0]=ge,1)}function Pe(F,H){return F+(1<<H)-1>>>H}function Ue(F,H){return((4278255360&F)+(4278255360&H)>>>0&4278255360)+((16711935&F)+(16711935&H)>>>0&16711935)>>>0}function pe(F,H){S[H]=function(re,oe,Ae,ge,xe,ye,Ce){var Te;for(Te=0;Te<xe;++Te){var Qe=S[F](ye[Ce+Te-1],Ae,ge+Te);ye[Ce+Te]=Ue(re[oe+Te],Qe)}}}function Oe(){this.ud=this.hd=this.jd=0}function Le(F,H){return((4278124286&(F^H))>>>1)+(F&H)>>>0}function Ge(F){return 0<=F&&256>F?F:0>F?0:255<F?255:void 0}function et(F,H){return Ge(F+(F-H+.5>>1))}function ut(F,H,re){return Math.abs(H-re)-Math.abs(F-re)}function xt(F,H,re,oe,Ae,ge,xe){for(oe=ge[xe-1],re=0;re<Ae;++re)ge[xe+re]=oe=Ue(F[H+re],oe)}function It(F,H,re,oe,Ae){var ge;for(ge=0;ge<re;++ge){var xe=F[H+ge],ye=xe>>8&255,Ce=16711935&(Ce=(Ce=16711935&xe)+((ye<<16)+ye));oe[Ae+ge]=(4278255360&xe)+Ce>>>0}}function Mt(F,H){H.jd=F>>0&255,H.hd=F>>8&255,H.ud=F>>16&255}function Pt(F,H,re,oe,Ae,ge){var xe;for(xe=0;xe<oe;++xe){var ye=H[re+xe],Ce=ye>>>8,Te=ye,Qe=255&(Qe=(Qe=ye>>>16)+((F.jd<<24>>24)*(Ce<<24>>24)>>>5));Te=255&(Te=(Te=Te+((F.hd<<24>>24)*(Ce<<24>>24)>>>5))+((F.ud<<24>>24)*(Qe<<24>>24)>>>5)),Ae[ge+xe]=(4278255360&ye)+(Qe<<16)+Te}}function Ht(F,H,re,oe,Ae){S[H]=function(ge,xe,ye,Ce,Te,Qe,st,tt,We){for(Ce=st;Ce<tt;++Ce)for(st=0;st<We;++st)Te[Qe++]=Ae(ye[oe(ge[xe++])])},S[F]=function(ge,xe,ye,Ce,Te,Qe,st){var tt=8>>ge.b,We=ge.Ea,Bt=ge.K[0],gt=ge.w;if(8>tt)for(ge=(1<<ge.b)-1,gt=(1<<tt)-1;xe<ye;++xe){var He,ze=0;for(He=0;He<We;++He)He&ge||(ze=oe(Ce[Te++])),Qe[st++]=Ae(Bt[ze&gt]),ze>>=tt}else S["VP8LMapColor"+re](Ce,Te,Bt,gt,Qe,st,xe,ye,We)}}function wt(F,H,re,oe,Ae){for(re=H+re;H<re;){var ge=F[H++];oe[Ae++]=ge>>16&255,oe[Ae++]=ge>>8&255,oe[Ae++]=ge>>0&255}}function Tr(F,H,re,oe,Ae){for(re=H+re;H<re;){var ge=F[H++];oe[Ae++]=ge>>16&255,oe[Ae++]=ge>>8&255,oe[Ae++]=ge>>0&255,oe[Ae++]=ge>>24&255}}function tr(F,H,re,oe,Ae){for(re=H+re;H<re;){var ge=(xe=F[H++])>>16&240|xe>>12&15,xe=xe>>0&240|xe>>28&15;oe[Ae++]=ge,oe[Ae++]=xe}}function sn(F,H,re,oe,Ae){for(re=H+re;H<re;){var ge=(xe=F[H++])>>16&248|xe>>13&7,xe=xe>>5&224|xe>>3&31;oe[Ae++]=ge,oe[Ae++]=xe}}function kr(F,H,re,oe,Ae){for(re=H+re;H<re;){var ge=F[H++];oe[Ae++]=ge>>0&255,oe[Ae++]=ge>>8&255,oe[Ae++]=ge>>16&255}}function $r(F,H,re,oe,Ae,ge){if(ge==0)for(re=H+re;H<re;)de(oe,((ge=F[H++])[0]>>24|ge[1]>>8&65280|ge[2]<<8&16711680|ge[3]<<24)>>>0),Ae+=32;else n(oe,Ae,F,H,re)}function Fn(F,H){S[H][0]=S[F+"0"],S[H][1]=S[F+"1"],S[H][2]=S[F+"2"],S[H][3]=S[F+"3"],S[H][4]=S[F+"4"],S[H][5]=S[F+"5"],S[H][6]=S[F+"6"],S[H][7]=S[F+"7"],S[H][8]=S[F+"8"],S[H][9]=S[F+"9"],S[H][10]=S[F+"10"],S[H][11]=S[F+"11"],S[H][12]=S[F+"12"],S[H][13]=S[F+"13"],S[H][14]=S[F+"0"],S[H][15]=S[F+"0"]}function Pr(F){return F==np||F==xf||F==dd||F==n0}function ms(){this.eb=[],this.size=this.A=this.fb=0}function pn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function la(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ms,this.f.kb=new pn,this.sd=null}function Ba(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function rn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function gr(F){return alert("todo:WebPSamplerProcessPlane"),F.T}function Ze(F,H){var re=F.T,oe=H.ba.f.RGBA,Ae=oe.eb,ge=oe.fb+F.ka*oe.A,xe=li[H.ba.S],ye=F.y,Ce=F.O,Te=F.f,Qe=F.N,st=F.ea,tt=F.W,We=H.cc,Bt=H.dc,gt=H.Mc,He=H.Nc,ze=F.ka,_t=F.ka+F.T,Tt=F.U,kt=Tt+1>>1;for(ze==0?xe(ye,Ce,null,null,Te,Qe,st,tt,Te,Qe,st,tt,Ae,ge,null,null,Tt):(xe(H.ec,H.fc,ye,Ce,We,Bt,gt,He,Te,Qe,st,tt,Ae,ge-oe.A,Ae,ge,Tt),++re);ze+2<_t;ze+=2)We=Te,Bt=Qe,gt=st,He=tt,Qe+=F.Rc,tt+=F.Rc,ge+=2*oe.A,xe(ye,(Ce+=2*F.fa)-F.fa,ye,Ce,We,Bt,gt,He,Te,Qe,st,tt,Ae,ge-oe.A,Ae,ge,Tt);return Ce+=F.fa,F.j+_t<F.o?(n(H.ec,H.fc,ye,Ce,Tt),n(H.cc,H.dc,Te,Qe,kt),n(H.Mc,H.Nc,st,tt,kt),re--):1&_t||xe(ye,Ce,null,null,Te,Qe,st,tt,Te,Qe,st,tt,Ae,ge+oe.A,null,null,Tt),re}function mt(F,H,re){var oe=F.F,Ae=[F.J];if(oe!=null){var ge=F.U,xe=H.ba.S,ye=xe==kA||xe==dd;H=H.ba.f.RGBA;var Ce=[0],Te=F.ka;Ce[0]=F.T,F.Kb&&(Te==0?--Ce[0]:(--Te,Ae[0]-=F.width),F.j+F.ka+F.T==F.o&&(Ce[0]=F.o-F.j-Te));var Qe=H.eb;Te=H.fb+Te*H.A,F=xn(oe,Ae[0],F.width,ge,Ce,Qe,Te+(ye?0:3),H.A),t(re==Ce),F&&Pr(xe)&&Al(Qe,Te,ye,ge,Ce,H.A)}return 0}function Je(F){var H=F.ma,re=H.ba.S,oe=11>re,Ae=re==r0||re==rp||re==kA||re==ud||re==12||Pr(re);if(H.memory=null,H.Ib=null,H.Jb=null,H.Nd=null,!of(H.Oa,F,Ae?11:12))return 0;if(Ae&&Pr(re)&&Lt(),F.da)alert("todo:use_scaling");else{if(oe){if(H.Ib=gr,F.Kb){if(re=F.U+1>>1,H.memory=s(F.U+2*re),H.memory==null)return 0;H.ec=H.memory,H.fc=0,H.cc=H.ec,H.dc=H.fc+F.U,H.Mc=H.cc,H.Nc=H.dc+re,H.Ib=Ze,Lt()}}else alert("todo:EmitYUV");Ae&&(H.Jb=mt,oe&&Ke())}if(oe&&!LE){for(F=0;256>F;++F)Ij[F]=89858*(F-128)+Qs>>bu,ip[F]=-22014*(F-128)+Qs,E1[F]=-45773*(F-128),Hs[F]=113618*(F-128)+Qs>>bu;for(F=yf;F<lx;++F)H=76283*(F-16)+Qs>>bu,op[F-yf]=zn(H,255),N1[F-yf]=zn(H+8>>4,15);LE=1}return 1}function vt(F){var H=F.ma,re=F.U,oe=F.T;return t(!(1&F.ka)),0>=re||0>=oe?0:(re=H.Ib(F,H),H.Jb!=null&&H.Jb(F,H,re),H.Dc+=re,1)}function Et(F){F.ma.memory=null}function bt(F,H,re,oe){return ee(F,8)!=47?0:(H[0]=ee(F,14)+1,re[0]=ee(F,14)+1,oe[0]=ee(F,1),ee(F,3)!=0?0:!F.h)}function ar(F,H){if(4>F)return F+1;var re=F-2>>1;return(2+(1&F)<<re)+ee(H,re)+1}function xr(F,H){return 120<H?H-120:1<=(re=((re=Ad[H-1])>>4)*F+(8-(15&re)))?re:1;var re}function Wr(F,H,re){var oe=U(re),Ae=F[H+=255&oe].g-8;return 0<Ae&&(J(re,re.u+8),oe=U(re),H+=F[H].value,H+=oe&(1<<Ae)-1),J(re,re.u+F[H].g),F[H].value}function Zr(F,H,re){return re.g+=F.g,re.value+=F.value<<H>>>0,t(8>=re.g),F.g}function Kr(F,H,re){var oe=F.xc;return t((H=oe==0?0:F.vc[F.md*(re>>oe)+(H>>oe)])<F.Wb),F.Ya[H]}function me(F,H,re,oe){var Ae=F.ab,ge=F.c*H,xe=F.C;H=xe+H;var ye=re,Ce=oe;for(oe=F.Ta,re=F.Ua;0<Ae--;){var Te=F.gc[Ae],Qe=xe,st=H,tt=ye,We=Ce,Bt=(Ce=oe,ye=re,Te.Ea);switch(t(Qe<st),t(st<=Te.nc),Te.hc){case 2:tx(tt,We,(st-Qe)*Bt,Ce,ye);break;case 0:var gt=Qe,He=st,ze=Ce,_t=ye,Tt=(er=Te).Ea;gt==0&&(y1(tt,We,null,null,1,ze,_t),xt(tt,We+1,0,0,Tt-1,ze,_t+1),We+=Tt,_t+=Tt,++gt);for(var kt=1<<er.b,nr=kt-1,Yt=Pe(Tt,er.b),br=er.K,er=er.w+(gt>>er.b)*Yt;gt<He;){var Pn=br,$n=er,hn=1;for(ep(tt,We,ze,_t-Tt,1,ze,_t);hn<Tt;){var cn=(hn&~nr)+kt;cn>Tt&&(cn=Tt),(0,od[Pn[$n++]>>8&15])(tt,We+ +hn,ze,_t+hn-Tt,cn-hn,ze,_t+hn),hn=cn}We+=Tt,_t+=Tt,++gt&nr||(er+=Yt)}st!=Te.nc&&n(Ce,ye-Bt,Ce,ye+(st-Qe-1)*Bt,Bt);break;case 1:for(Bt=tt,He=We,Tt=(tt=Te.Ea)-(_t=tt&~(ze=(We=1<<Te.b)-1)),gt=Pe(tt,Te.b),kt=Te.K,Te=Te.w+(Qe>>Te.b)*gt;Qe<st;){for(nr=kt,Yt=Te,br=new Oe,er=He+_t,Pn=He+tt;He<er;)Mt(nr[Yt++],br),uf(br,Bt,He,We,Ce,ye),He+=We,ye+=We;He<Pn&&(Mt(nr[Yt++],br),uf(br,Bt,He,Tt,Ce,ye),He+=Tt,ye+=Tt),++Qe&ze||(Te+=gt)}break;case 3:if(tt==Ce&&We==ye&&0<Te.b){for(He=Ce,tt=Bt=ye+(st-Qe)*Bt-(_t=(st-Qe)*Pe(Te.Ea,Te.b)),We=Ce,ze=ye,gt=[],_t=(Tt=_t)-1;0<=_t;--_t)gt[_t]=We[ze+_t];for(_t=Tt-1;0<=_t;--_t)He[tt+_t]=gt[_t];Ul(Te,Qe,st,Ce,Bt,Ce,ye)}else Ul(Te,Qe,st,tt,We,Ce,ye)}ye=oe,Ce=re}Ce!=re&&n(oe,re,ye,Ce,ge)}function Ie(F,H){var re=F.V,oe=F.Ba+F.c*F.C,Ae=H-F.C;if(t(H<=F.l.o),t(16>=Ae),0<Ae){var ge=F.l,xe=F.Ta,ye=F.Ua,Ce=ge.width;if(me(F,Ae,re,oe),Ae=ye=[ye],t((re=F.C)<(oe=H)),t(ge.v<ge.va),oe>ge.o&&(oe=ge.o),re<ge.j){var Te=ge.j-re;re=ge.j,Ae[0]+=Te*Ce}if(re>=oe?re=0:(Ae[0]+=4*ge.v,ge.ka=re-ge.j,ge.U=ge.va-ge.v,ge.T=oe-re,re=1),re){if(ye=ye[0],11>(re=F.ca).S){var Qe=re.f.RGBA,st=(oe=re.S,Ae=ge.U,ge=ge.T,Te=Qe.eb,Qe.A),tt=ge;for(Qe=Qe.fb+F.Ma*Qe.A;0<tt--;){var We=xe,Bt=ye,gt=Ae,He=Te,ze=Qe;switch(oe){case Hi:oo(We,Bt,gt,He,ze);break;case r0:_i(We,Bt,gt,He,ze);break;case np:_i(We,Bt,gt,He,ze),Al(He,ze,0,gt,1,0);break;case pu:bc(We,Bt,gt,He,ze);break;case rp:$r(We,Bt,gt,He,ze,1);break;case xf:$r(We,Bt,gt,He,ze,1),Al(He,ze,0,gt,1,0);break;case kA:$r(We,Bt,gt,He,ze,0);break;case dd:$r(We,Bt,gt,He,ze,0),Al(He,ze,1,gt,1,0);break;case ud:df(We,Bt,gt,He,ze);break;case n0:df(We,Bt,gt,He,ze),gn(He,ze,gt,1,0);break;case nx:Oo(We,Bt,gt,He,ze);break;default:t(0)}ye+=Ce,Qe+=st}F.Ma+=ge}else alert("todo:EmitRescaledRowsYUVA");t(F.Ma<=re.height)}}F.C=H,t(F.C<=F.i)}function _e(F){var H;if(0<F.ua)return 0;for(H=0;H<F.Wb;++H){var re=F.Ya[H].G,oe=F.Ya[H].H;if(0<re[1][oe[1]+0].g||0<re[2][oe[2]+0].g||0<re[3][oe[3]+0].g)return 0}return 1}function Ne(F,H,re,oe,Ae,ge){if(F.Z!=0){var xe=F.qd,ye=F.rd;for(t(xu[F.Z]!=null);H<re;++H)xu[F.Z](xe,ye,oe,Ae,oe,Ae,ge),xe=oe,ye=Ae,Ae+=ge;F.qd=xe,F.rd=ye}}function je(F,H){var re=F.l.ma,oe=re.Z==0||re.Z==1?F.l.j:F.C;if(oe=F.C<oe?oe:F.C,t(H<=F.l.o),H>oe){var Ae=F.l.width,ge=re.ca,xe=re.tb+Ae*oe,ye=F.V,Ce=F.Ba+F.c*oe,Te=F.gc;t(F.ab==1),t(Te[0].hc==3),cf(Te[0],oe,H,ye,Ce,ge,xe),Ne(re,oe,H,ge,xe,Ae)}F.C=F.Ma=H}function Fe(F,H,re,oe,Ae,ge,xe){var ye=F.$/oe,Ce=F.$%oe,Te=F.m,Qe=F.s,st=re+F.$,tt=st;Ae=re+oe*Ae;var We=re+oe*ge,Bt=280+Qe.ua,gt=F.Pb?ye:16777216,He=0<Qe.ua?Qe.Wa:null,ze=Qe.wc,_t=st<We?Kr(Qe,Ce,ye):null;t(F.C<ge),t(We<=Ae);var Tt=!1;e:for(;;){for(;Tt||st<We;){var kt=0;if(ye>=gt){var nr=st-re;t((gt=F).Pb),gt.wd=gt.m,gt.xd=nr,0<gt.s.ua&&ve(gt.s.Wa,gt.s.vb),gt=ye+DE}if(Ce&ze||(_t=Kr(Qe,Ce,ye)),t(_t!=null),_t.Qb&&(H[st]=_t.qb,Tt=!0),!Tt)if(te(Te),_t.jc){kt=Te,nr=H;var Yt=st,br=_t.pd[U(kt)&Ms-1];t(_t.jc),256>br.g?(J(kt,kt.u+br.g),nr[Yt]=br.value,kt=0):(J(kt,kt.u+br.g-256),t(256<=br.value),kt=br.value),kt==0&&(Tt=!0)}else kt=Wr(_t.G[0],_t.H[0],Te);if(Te.h)break;if(Tt||256>kt){if(!Tt)if(_t.nd)H[st]=(_t.qb|kt<<8)>>>0;else{if(te(Te),Tt=Wr(_t.G[1],_t.H[1],Te),te(Te),nr=Wr(_t.G[2],_t.H[2],Te),Yt=Wr(_t.G[3],_t.H[3],Te),Te.h)break;H[st]=(Yt<<24|Tt<<16|kt<<8|nr)>>>0}if(Tt=!1,++st,++Ce>=oe&&(Ce=0,++ye,xe!=null&&ye<=ge&&!(ye%16)&&xe(F,ye),He!=null))for(;tt<st;)kt=H[tt++],He.X[(506832829*kt&4294967295)>>>He.Mb]=kt}else if(280>kt){if(kt=ar(kt-256,Te),nr=Wr(_t.G[4],_t.H[4],Te),te(Te),nr=xr(oe,nr=ar(nr,Te)),Te.h)break;if(st-re<nr||Ae-st<kt)break e;for(Yt=0;Yt<kt;++Yt)H[st+Yt]=H[st+Yt-nr];for(st+=kt,Ce+=kt;Ce>=oe;)Ce-=oe,++ye,xe!=null&&ye<=ge&&!(ye%16)&&xe(F,ye);if(t(st<=Ae),Ce&ze&&(_t=Kr(Qe,Ce,ye)),He!=null)for(;tt<st;)kt=H[tt++],He.X[(506832829*kt&4294967295)>>>He.Mb]=kt}else{if(!(kt<Bt))break e;for(Tt=kt-280,t(He!=null);tt<st;)kt=H[tt++],He.X[(506832829*kt&4294967295)>>>He.Mb]=kt;kt=st,t(!(Tt>>>(nr=He).Xa)),H[kt]=nr.X[Tt],Tt=!0}Tt||t(Te.h==z(Te))}if(F.Pb&&Te.h&&st<Ae)t(F.m.h),F.a=5,F.m=F.wd,F.$=F.xd,0<F.s.ua&&ve(F.s.vb,F.s.Wa);else{if(Te.h)break e;xe!=null&&xe(F,ye>ge?ge:ye),F.a=0,F.$=st-re}return 1}return F.a=3,0}function Ye(F){t(F!=null),F.vc=null,F.yc=null,F.Ya=null;var H=F.Wa;H!=null&&(H.X=null),F.vb=null,t(F!=null)}function ft(){var F=new Yh;return F==null?null:(F.a=0,F.xb=a0,Fn("Predictor","VP8LPredictors"),Fn("Predictor","VP8LPredictors_C"),Fn("PredictorAdd","VP8LPredictorsAdd"),Fn("PredictorAdd","VP8LPredictorsAdd_C"),tx=It,uf=Pt,oo=wt,_i=Tr,df=tr,Oo=sn,bc=kr,S.VP8LMapColor32b=ii,S.VP8LMapColor8b=tp,F)}function qe(F,H,re,oe,Ae){var ge=1,xe=[F],ye=[H],Ce=oe.m,Te=oe.s,Qe=null,st=0;e:for(;;){if(re)for(;ge&&ee(Ce,1);){var tt=xe,We=ye,Bt=oe,gt=1,He=Bt.m,ze=Bt.gc[Bt.ab],_t=ee(He,2);if(Bt.Oc&1<<_t)ge=0;else{switch(Bt.Oc|=1<<_t,ze.hc=_t,ze.Ea=tt[0],ze.nc=We[0],ze.K=[null],++Bt.ab,t(4>=Bt.ab),_t){case 0:case 1:ze.b=ee(He,3)+2,gt=qe(Pe(ze.Ea,ze.b),Pe(ze.nc,ze.b),0,Bt,ze.K),ze.K=ze.K[0];break;case 3:var Tt,kt=ee(He,8)+1,nr=16<kt?0:4<kt?1:2<kt?2:3;if(tt[0]=Pe(ze.Ea,nr),ze.b=nr,Tt=gt=qe(kt,1,0,Bt,ze.K)){var Yt,br=kt,er=ze,Pn=1<<(8>>er.b),$n=s(Pn);if($n==null)Tt=0;else{var hn=er.K[0],cn=er.w;for($n[0]=er.K[0][0],Yt=1;Yt<1*br;++Yt)$n[Yt]=Ue(hn[cn+Yt],$n[Yt-1]);for(;Yt<4*Pn;++Yt)$n[Yt]=0;er.K[0]=null,er.K[0]=$n,Tt=1}}gt=Tt;break;case 2:break;default:t(0)}ge=gt}}if(xe=xe[0],ye=ye[0],ge&&ee(Ce,1)&&!(ge=1<=(st=ee(Ce,4))&&11>=st)){oe.a=3;break e}var ra;if(ra=ge)t:{var Gn,Yr,ua,Br=oe,Ur=xe,Dn=ye,Rn=st,ci=re,Vs=Br.m,as=Br.s,ss=[null],ys=1,zl=0,qn=BA[Rn];r:for(;;){if(ci&&ee(Vs,1)){var ws=ee(Vs,3)+2,Ec=Pe(Ur,ws),wf=Pe(Dn,ws),FA=Ec*wf;if(!qe(Ec,wf,0,Br,ss))break r;for(ss=ss[0],as.xc=ws,Gn=0;Gn<FA;++Gn){var Ef=ss[Gn]>>8&65535;ss[Gn]=Ef,Ef>=ys&&(ys=Ef+1)}}if(Vs.h)break r;for(Yr=0;5>Yr;++Yr){var Ta=hl[Yr];!Yr&&0<Rn&&(Ta+=1<<Rn),zl<Ta&&(zl=Ta)}var lp=o(ys*qn,k),cx=ys,co=o(cx,L);if(co==null)var La=null;else t(65536>=cx),La=co;var OA=s(zl);if(La==null||OA==null||lp==null){Br.a=1;break r}var Nf=lp;for(Gn=ua=0;Gn<ys;++Gn){var Po=La[Gn],Cf=Po.G,Ro=Po.H,cp=0,i0=1,ux=0;for(Yr=0;5>Yr;++Yr){Ta=hl[Yr],Cf[Yr]=Nf,Ro[Yr]=ua,!Yr&&0<Rn&&(Ta+=1<<Rn);a:{var up,dx=Ta,dp=Br,o0=OA,QE=Nf,HE=ua,fp=0,gd=dp.m,Oj=ee(gd,1);if(a(o0,0,0,dx),Oj){var VE=ee(gd,1)+1,zE=ee(gd,1),C1=ee(gd,zE==0?1:8);o0[C1]=1,VE==2&&(o0[C1=ee(gd,8)]=1);var l0=1}else{var _1=s(19),S1=ee(gd,4)+4;if(19<S1){dp.a=3;var Ap=0;break a}for(up=0;up<S1;++up)_1[fd[up]]=ee(gd,3);var fx=void 0,c0=void 0,$E=dp,GE=_1,xd=dx,hp=o0,Ax=0,Nc=$E.m,u0=8,k1=o(128,k);n:for(;R(k1,0,7,GE,19);){if(ee(Nc,1)){var qE=2+2*ee(Nc,3);if((fx=2+ee(Nc,qE))>xd)break n}else fx=xd;for(c0=0;c0<xd&&fx--;){te(Nc);var j1=k1[0+(127&U(Nc))];J(Nc,Nc.u+j1.g);var DA=j1.value;if(16>DA)hp[c0++]=DA,DA!=0&&(u0=DA);else{var KE=DA==16,B1=DA-16,T1=Vl[B1],I1=ee(Nc,ax[B1])+T1;if(c0+I1>xd)break n;for(var WE=KE?u0:0;0<I1--;)hp[c0++]=WE}}Ax=1;break n}Ax||($E.a=3),l0=Ax}(l0=l0&&!gd.h)&&(fp=R(QE,HE,8,o0,dx)),l0&&fp!=0?Ap=fp:(dp.a=3,Ap=0)}if(Ap==0)break r;if(i0&&jA[Yr]==1&&(i0=Nf[ua].g==0),cp+=Nf[ua].g,ua+=Ap,3>=Yr){var PA,hx=OA[0];for(PA=1;PA<Ta;++PA)OA[PA]>hx&&(hx=OA[PA]);ux+=hx}}if(Po.nd=i0,Po.Qb=0,i0&&(Po.qb=(Cf[3][Ro[3]+0].value<<24|Cf[1][Ro[1]+0].value<<16|Cf[2][Ro[2]+0].value)>>>0,cp==0&&256>Cf[0][Ro[0]+0].value&&(Po.Qb=1,Po.qb+=Cf[0][Ro[0]+0].value<<8)),Po.jc=!Po.Qb&&6>ux,Po.jc){var mp,vd=Po;for(mp=0;mp<Ms;++mp){var yu=mp,bd=vd.pd[yu],pp=vd.G[0][vd.H[0]+yu];256<=pp.value?(bd.g=pp.g+256,bd.value=pp.value):(bd.g=0,bd.value=0,yu>>=Zr(pp,8,bd),yu>>=Zr(vd.G[1][vd.H[1]+yu],16,bd),yu>>=Zr(vd.G[2][vd.H[2]+yu],0,bd),Zr(vd.G[3][vd.H[3]+yu],24,bd))}}}as.vc=ss,as.Wb=ys,as.Ya=La,as.yc=lp,ra=1;break t}ra=0}if(!(ge=ra)){oe.a=3;break e}if(0<st){if(Te.ua=1<<st,!ke(Te.Wa,st)){oe.a=1,ge=0;break e}}else Te.ua=0;var gp=oe,F1=xe,XE=ye,O1=gp.s,D1=O1.xc;if(gp.c=F1,gp.i=XE,O1.md=Pe(F1,D1),O1.wc=D1==0?-1:(1<<D1)-1,re){oe.xb=RE;break e}if((Qe=s(xe*ye))==null){oe.a=1,ge=0;break e}ge=(ge=Fe(oe,Qe,0,xe,ye,ye,null))&&!Ce.h;break e}return ge?(Ae!=null?Ae[0]=Qe:(t(Qe==null),t(re)),oe.$=0,re||Ye(Te)):Ye(Te),ge}function rt(F,H){var re=F.c*F.i,oe=re+H+16*H;return t(F.c<=H),F.V=s(oe),F.V==null?(F.Ta=null,F.Ua=0,F.a=1,0):(F.Ta=F.V,F.Ua=F.Ba+re+H,1)}function it(F,H){var re=F.C,oe=H-re,Ae=F.V,ge=F.Ba+F.c*re;for(t(H<=F.l.o);0<oe;){var xe=16<oe?16:oe,ye=F.l.ma,Ce=F.l.width,Te=Ce*xe,Qe=ye.ca,st=ye.tb+Ce*re,tt=F.Ta,We=F.Ua;me(F,xe,Ae,ge),va(tt,We,Qe,st,Te),Ne(ye,re,re+xe,Qe,st,Ce),oe-=xe,Ae+=xe*F.c,re+=xe}t(re==H),F.C=F.Ma=H}function Ft(){this.ub=this.yd=this.td=this.Rb=0}function $t(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Jt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function zt(){this.Yb=function(){var F=[];return function H(re,oe,Ae){for(var ge=Ae[oe],xe=0;xe<ge&&(re.push(Ae.length>oe+1?[]:0),!(Ae.length<oe+1));xe++)H(re[xe],oe+1,Ae)}(F,0,[3,11]),F}()}function qt(){this.jb=s(3),this.Wc=l([4,8],zt),this.Xc=l([4,17],zt)}function jr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function on(){this.ld=this.La=this.dd=this.tc=0}function ln(){this.Na=this.la=0}function An(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ps(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function So(){this.uc=this.M=this.Nb=0,this.wa=Array(new on),this.Y=0,this.ya=Array(new ps),this.aa=0,this.l=new Ls}function gs(){this.y=s(16),this.f=s(8),this.ea=s(8)}function ai(){this.cb=this.a=0,this.sc="",this.m=new W,this.Od=new Ft,this.Kc=new $t,this.ed=new jr,this.Qa=new Jt,this.Ic=this.$c=this.Aa=0,this.D=new So,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,W),this.ia=0,this.pb=o(4,An),this.Pa=new qt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new gs),this.Hd=0,this.rb=Array(new ln),this.sb=0,this.wa=Array(new on),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ps),this.L=this.aa=0,this.gd=l([4,2],on),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ls(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function wi(){var F=new ai;return F!=null&&(F.a=0,F.sc="OK",F.cb=0,F.Xb=0,Us||(Us=qh)),F}function xa(F,H,re){return F.a==0&&(F.a=H,F.sc=re,F.cb=0),0}function si(F,H,re){return 3<=re&&F[H+0]==157&&F[H+1]==1&&F[H+2]==42}function Zd(F,H){if(F==null)return 0;if(F.a=0,F.sc="OK",H==null)return xa(F,2,"null VP8Io passed to VP8GetHeaders()");var re=H.data,oe=H.w,Ae=H.ha;if(4>Ae)return xa(F,7,"Truncated header.");var ge=re[oe+0]|re[oe+1]<<8|re[oe+2]<<16,xe=F.Od;if(xe.Rb=!(1&ge),xe.td=ge>>1&7,xe.yd=ge>>4&1,xe.ub=ge>>5,3<xe.td)return xa(F,3,"Incorrect keyframe parameters.");if(!xe.yd)return xa(F,4,"Frame not displayable.");oe+=3,Ae-=3;var ye=F.Kc;if(xe.Rb){if(7>Ae)return xa(F,7,"cannot parse picture header");if(!si(re,oe,Ae))return xa(F,3,"Bad code word");ye.c=16383&(re[oe+4]<<8|re[oe+3]),ye.Td=re[oe+4]>>6,ye.i=16383&(re[oe+6]<<8|re[oe+5]),ye.Ud=re[oe+6]>>6,oe+=7,Ae-=7,F.za=ye.c+15>>4,F.Ub=ye.i+15>>4,H.width=ye.c,H.height=ye.i,H.Da=0,H.j=0,H.v=0,H.va=H.width,H.o=H.height,H.da=0,H.ib=H.width,H.hb=H.height,H.U=H.width,H.T=H.height,a((ge=F.Pa).jb,0,255,ge.jb.length),t((ge=F.Qa)!=null),ge.Cb=0,ge.Bb=0,ge.Fb=1,a(ge.Zb,0,0,ge.Zb.length),a(ge.Lb,0,0,ge.Lb)}if(xe.ub>Ae)return xa(F,7,"bad partition length");Z(ge=F.m,re,oe,xe.ub),oe+=xe.ub,Ae-=xe.ub,xe.Rb&&(ye.Ld=ie(ge),ye.Kd=ie(ge)),ye=F.Qa;var Ce,Te=F.Pa;if(t(ge!=null),t(ye!=null),ye.Cb=ie(ge),ye.Cb){if(ye.Bb=ie(ge),ie(ge)){for(ye.Fb=ie(ge),Ce=0;4>Ce;++Ce)ye.Zb[Ce]=ie(ge)?q(ge,7):0;for(Ce=0;4>Ce;++Ce)ye.Lb[Ce]=ie(ge)?q(ge,6):0}if(ye.Bb)for(Ce=0;3>Ce;++Ce)Te.jb[Ce]=ie(ge)?V(ge,8):255}else ye.Bb=0;if(ge.Ka)return xa(F,3,"cannot parse segment header");if((ye=F.ed).zd=ie(ge),ye.Tb=V(ge,6),ye.wb=V(ge,3),ye.Pc=ie(ge),ye.Pc&&ie(ge)){for(Te=0;4>Te;++Te)ie(ge)&&(ye.vd[Te]=q(ge,6));for(Te=0;4>Te;++Te)ie(ge)&&(ye.od[Te]=q(ge,6))}if(F.L=ye.Tb==0?0:ye.zd?1:2,ge.Ka)return xa(F,3,"cannot parse filter header");var Qe=Ae;if(Ae=Ce=oe,oe=Ce+Qe,ye=Qe,F.Xb=(1<<V(F.m,2))-1,Qe<3*(Te=F.Xb))re=7;else{for(Ce+=3*Te,ye-=3*Te,Qe=0;Qe<Te;++Qe){var st=re[Ae+0]|re[Ae+1]<<8|re[Ae+2]<<16;st>ye&&(st=ye),Z(F.Jc[+Qe],re,Ce,st),Ce+=st,ye-=st,Ae+=3}Z(F.Jc[+Te],re,Ce,ye),re=Ce<oe?0:5}if(re!=0)return xa(F,re,"cannot parse partitions");for(re=V(Ce=F.m,7),Ae=ie(Ce)?q(Ce,4):0,oe=ie(Ce)?q(Ce,4):0,ye=ie(Ce)?q(Ce,4):0,Te=ie(Ce)?q(Ce,4):0,Ce=ie(Ce)?q(Ce,4):0,Qe=F.Qa,st=0;4>st;++st){if(Qe.Cb){var tt=Qe.Zb[st];Qe.Fb||(tt+=re)}else{if(0<st){F.pb[st]=F.pb[0];continue}tt=re}var We=F.pb[st];We.Sc[0]=ap[zn(tt+Ae,127)],We.Sc[1]=sp[zn(tt+0,127)],We.Eb[0]=2*ap[zn(tt+oe,127)],We.Eb[1]=101581*sp[zn(tt+ye,127)]>>16,8>We.Eb[1]&&(We.Eb[1]=8),We.Qc[0]=ap[zn(tt+Te,117)],We.Qc[1]=sp[zn(tt+Ce,127)],We.lc=tt+Ce}if(!xe.Rb)return xa(F,4,"Not a key frame.");for(ie(ge),xe=F.Pa,re=0;4>re;++re){for(Ae=0;8>Ae;++Ae)for(oe=0;3>oe;++oe)for(ye=0;11>ye;++ye)Te=ce(ge,TA[re][Ae][oe][ye])?V(ge,8):gu[re][Ae][oe][ye],xe.Wc[re][Ae].Yb[oe][ye]=Te;for(Ae=0;17>Ae;++Ae)xe.Xc[re][Ae]=xe.Wc[re][PE[Ae]]}return F.kc=ie(ge),F.kc&&(F.Bd=V(ge,8)),F.cb=1}function qh(F,H,re,oe,Ae,ge,xe){var ye=H[Ae].Yb[re];for(re=0;16>Ae;++Ae){if(!ce(F,ye[re+0]))return Ae;for(;!ce(F,ye[re+1]);)if(ye=H[++Ae].Yb[0],re=0,Ae==16)return 16;var Ce=H[Ae+1].Yb;if(ce(F,ye[re+2])){var Te=F,Qe=0;if(ce(Te,(tt=ye)[(st=re)+3]))if(ce(Te,tt[st+6])){for(ye=0,st=2*(Qe=ce(Te,tt[st+8]))+(tt=ce(Te,tt[st+9+Qe])),Qe=0,tt=Wa[st];tt[ye];++ye)Qe+=Qe+ce(Te,tt[ye]);Qe+=3+(8<<st)}else ce(Te,tt[st+7])?(Qe=7+2*ce(Te,165),Qe+=ce(Te,145)):Qe=5+ce(Te,159);else Qe=ce(Te,tt[st+4])?3+ce(Te,tt[st+5]):2;ye=Ce[2]}else Qe=1,ye=Ce[1];Ce=xe+Un[Ae],0>(Te=F).b&&se(Te);var st,tt=Te.b,We=(st=Te.Ca>>1)-(Te.I>>tt)>>31;--Te.b,Te.Ca+=We,Te.Ca|=1,Te.I-=(st+1&We)<<tt,ge[Ce]=((Qe^We)-We)*oe[(0<Ae)+0]}return 16}function ru(F){var H=F.rb[F.sb-1];H.la=0,H.Na=0,a(F.zc,0,0,F.zc.length),F.ja=0}function mA(F,H){if(F==null)return 0;if(H==null)return xa(F,2,"NULL VP8Io parameter in VP8Decode().");if(!F.cb&&!Zd(F,H))return 0;if(t(F.cb),H.ac==null||H.ac(H)){H.ob&&(F.L=0);var re=pd[F.L];if(F.L==2?(F.yb=0,F.zb=0):(F.yb=H.v-re>>4,F.zb=H.j-re>>4,0>F.yb&&(F.yb=0),0>F.zb&&(F.zb=0)),F.Va=H.o+15+re>>4,F.Hb=H.va+15+re>>4,F.Hb>F.za&&(F.Hb=F.za),F.Va>F.Ub&&(F.Va=F.Ub),0<F.L){var oe=F.ed;for(re=0;4>re;++re){var Ae;if(F.Qa.Cb){var ge=F.Qa.Lb[re];F.Qa.Fb||(ge+=oe.Tb)}else ge=oe.Tb;for(Ae=0;1>=Ae;++Ae){var xe=F.gd[re][Ae],ye=ge;if(oe.Pc&&(ye+=oe.vd[0],Ae&&(ye+=oe.od[0])),0<(ye=0>ye?0:63<ye?63:ye)){var Ce=ye;0<oe.wb&&(Ce=4<oe.wb?Ce>>2:Ce>>1)>9-oe.wb&&(Ce=9-oe.wb),1>Ce&&(Ce=1),xe.dd=Ce,xe.tc=2*ye+Ce,xe.ld=40<=ye?2:15<=ye?1:0}else xe.tc=0;xe.La=Ae}}}re=0}else xa(F,6,"Frame setup failed"),re=F.a;if(re=re==0){if(re){F.$c=0,0<F.Aa||(F.Ic=ME);e:{re=F.Ic,oe=4*(Ce=F.za);var Te=32*Ce,Qe=Ce+1,st=0<F.L?Ce*(0<F.Aa?2:1):0,tt=(F.Aa==2?2:1)*Ce;if((xe=oe+832+(Ae=3*(16*re+pd[F.L])/2*Te)+(ge=F.Fa!=null&&0<F.Fa.length?F.Kc.c*F.Kc.i:0))!=xe)re=0;else{if(xe>F.Vb){if(F.Vb=0,F.Ec=s(xe),F.Fc=0,F.Ec==null){re=xa(F,1,"no memory during frame initialization.");break e}F.Vb=xe}xe=F.Ec,ye=F.Fc,F.Ac=xe,F.Bc=ye,ye+=oe,F.Gd=o(Te,gs),F.Hd=0,F.rb=o(Qe+1,ln),F.sb=1,F.wa=st?o(st,on):null,F.Y=0,F.D.Nb=0,F.D.wa=F.wa,F.D.Y=F.Y,0<F.Aa&&(F.D.Y+=Ce),t(!0),F.oc=xe,F.pc=ye,ye+=832,F.ya=o(tt,ps),F.aa=0,F.D.ya=F.ya,F.D.aa=F.aa,F.Aa==2&&(F.D.aa+=Ce),F.R=16*Ce,F.B=8*Ce,Ce=(Te=pd[F.L])*F.R,Te=Te/2*F.B,F.sa=xe,F.ta=ye+Ce,F.qa=F.sa,F.ra=F.ta+16*re*F.R+Te,F.Ha=F.qa,F.Ia=F.ra+8*re*F.B+Te,F.$c=0,ye+=Ae,F.mb=ge?xe:null,F.nb=ge?ye:null,t(ye+ge<=F.Fc+F.Vb),ru(F),a(F.Ac,F.Bc,0,oe),re=1}}if(re){if(H.ka=0,H.y=F.sa,H.O=F.ta,H.f=F.qa,H.N=F.ra,H.ea=F.Ha,H.Vd=F.Ia,H.fa=F.R,H.Rc=F.B,H.F=null,H.J=0,!cd){for(re=-255;255>=re;++re)ns[255+re]=0>re?-re:re;for(re=-1020;1020>=re;++re)Ql[1020+re]=-128>re?-128:127<re?127:re;for(re=-112;112>=re;++re)pf[112+re]=-16>re?-16:15<re?15:re;for(re=-255;510>=re;++re)gf[255+re]=0>re?0:255<re?255:re;cd=1}hu=ko,yc=au,wc=Il,bs=Vn,Do=su,qa=nu,NA=cu,mu=xc,e0=nf,ff=bA,Af=rf,hf=rd,CA=nd,t0=uu,mf=fl,ld=Ui,_A=vs,Ka=Xh,lo[0]=Li,lo[1]=Kh,lo[2]=Dl,lo[3]=Wh,lo[4]=jo,lo[5]=Pl,lo[6]=io,lo[7]=Bo,lo[8]=gc,lo[9]=iu,hd[0]=Fl,hd[1]=gA,hd[2]=hc,hd[3]=tf,hd[4]=ca,hd[5]=pc,hd[6]=Ol,ml[0]=Rl,ml[1]=pA,ml[2]=xA,ml[3]=To,ml[4]=yn,ml[5]=xs,ml[6]=ou,re=1}else re=0}re&&(re=function(We,Bt){for(We.M=0;We.M<We.Va;++We.M){var gt,He=We.Jc[We.M&We.Xb],ze=We.m,_t=We;for(gt=0;gt<_t.za;++gt){var Tt=ze,kt=_t,nr=kt.Ac,Yt=kt.Bc+4*gt,br=kt.zc,er=kt.ya[kt.aa+gt];if(kt.Qa.Bb?er.$b=ce(Tt,kt.Pa.jb[0])?2+ce(Tt,kt.Pa.jb[2]):ce(Tt,kt.Pa.jb[1]):er.$b=0,kt.kc&&(er.Ad=ce(Tt,kt.Bd)),er.Za=!ce(Tt,145)+0,er.Za){var Pn=er.Ob,$n=0;for(kt=0;4>kt;++kt){var hn,cn=br[0+kt];for(hn=0;4>hn;++hn){cn=w1[nr[Yt+hn]][cn];for(var ra=vf[ce(Tt,cn[0])];0<ra;)ra=vf[2*ra+ce(Tt,cn[ra])];cn=-ra,nr[Yt+hn]=cn}n(Pn,$n,nr,Yt,4),$n+=4,br[0+kt]=cn}}else cn=ce(Tt,156)?ce(Tt,128)?1:3:ce(Tt,163)?2:0,er.Ob[0]=cn,a(nr,Yt,cn,4),a(br,0,cn,4);er.Dd=ce(Tt,142)?ce(Tt,114)?ce(Tt,183)?1:3:2:0}if(_t.m.Ka)return xa(We,7,"Premature end-of-partition0 encountered.");for(;We.ja<We.za;++We.ja){if(_t=He,Tt=(ze=We).rb[ze.sb-1],nr=ze.rb[ze.sb+ze.ja],gt=ze.ya[ze.aa+ze.ja],Yt=ze.kc?gt.Ad:0)Tt.la=nr.la=0,gt.Za||(Tt.Na=nr.Na=0),gt.Hc=0,gt.Gc=0,gt.ia=0;else{var Gn,Yr;if(Tt=nr,nr=_t,Yt=ze.Pa.Xc,br=ze.ya[ze.aa+ze.ja],er=ze.pb[br.$b],kt=br.ad,Pn=0,$n=ze.rb[ze.sb-1],cn=hn=0,a(kt,Pn,0,384),br.Za)var ua=0,Br=Yt[3];else{ra=s(16);var Ur=Tt.Na+$n.Na;if(Ur=Us(nr,Yt[1],Ur,er.Eb,0,ra,0),Tt.Na=$n.Na=(0<Ur)+0,1<Ur)hu(ra,0,kt,Pn);else{var Dn=ra[0]+3>>3;for(ra=0;256>ra;ra+=16)kt[Pn+ra]=Dn}ua=1,Br=Yt[0]}var Rn=15&Tt.la,ci=15&$n.la;for(ra=0;4>ra;++ra){var Vs=1&ci;for(Dn=Yr=0;4>Dn;++Dn)Rn=Rn>>1|(Vs=(Ur=Us(nr,Br,Ur=Vs+(1&Rn),er.Sc,ua,kt,Pn))>ua)<<7,Yr=Yr<<2|(3<Ur?3:1<Ur?2:kt[Pn+0]!=0),Pn+=16;Rn>>=4,ci=ci>>1|Vs<<7,hn=(hn<<8|Yr)>>>0}for(Br=Rn,ua=ci>>4,Gn=0;4>Gn;Gn+=2){for(Yr=0,Rn=Tt.la>>4+Gn,ci=$n.la>>4+Gn,ra=0;2>ra;++ra){for(Vs=1&ci,Dn=0;2>Dn;++Dn)Ur=Vs+(1&Rn),Rn=Rn>>1|(Vs=0<(Ur=Us(nr,Yt[2],Ur,er.Qc,0,kt,Pn)))<<3,Yr=Yr<<2|(3<Ur?3:1<Ur?2:kt[Pn+0]!=0),Pn+=16;Rn>>=2,ci=ci>>1|Vs<<5}cn|=Yr<<4*Gn,Br|=Rn<<4<<Gn,ua|=(240&ci)<<Gn}Tt.la=Br,$n.la=ua,br.Hc=hn,br.Gc=cn,br.ia=43690&cn?0:er.ia,Yt=!(hn|cn)}if(0<ze.L&&(ze.wa[ze.Y+ze.ja]=ze.gd[gt.$b][gt.Za],ze.wa[ze.Y+ze.ja].La|=!Yt),_t.Ka)return xa(We,7,"Premature end-of-file encountered.")}if(ru(We),ze=Bt,_t=1,gt=(He=We).D,Tt=0<He.L&&He.M>=He.zb&&He.M<=He.Va,He.Aa==0)e:{if(gt.M=He.M,gt.uc=Tt,Io(He,gt),_t=1,gt=(Yr=He.D).Nb,Tt=(cn=pd[He.L])*He.R,nr=cn/2*He.B,ra=16*gt*He.R,Dn=8*gt*He.B,Yt=He.sa,br=He.ta-Tt+ra,er=He.qa,kt=He.ra-nr+Dn,Pn=He.Ha,$n=He.Ia-nr+Dn,ci=(Rn=Yr.M)==0,hn=Rn>=He.Va-1,He.Aa==2&&Io(He,Yr),Yr.uc)for(Vs=(Ur=He).D.M,t(Ur.D.uc),Yr=Ur.yb;Yr<Ur.Hb;++Yr){ua=Yr,Br=Vs;var as=(ss=(Ta=Ur).D).Nb;Gn=Ta.R;var ss=ss.wa[ss.Y+ua],ys=Ta.sa,zl=Ta.ta+16*as*Gn+16*ua,qn=ss.dd,ws=ss.tc;if(ws!=0)if(t(3<=ws),Ta.L==1)0<ua&&ld(ys,zl,Gn,ws+4),ss.La&&Ka(ys,zl,Gn,ws),0<Br&&mf(ys,zl,Gn,ws+4),ss.La&&_A(ys,zl,Gn,ws);else{var Ec=Ta.B,wf=Ta.qa,FA=Ta.ra+8*as*Ec+8*ua,Ef=Ta.Ha,Ta=Ta.Ia+8*as*Ec+8*ua;as=ss.ld,0<ua&&(mu(ys,zl,Gn,ws+4,qn,as),ff(wf,FA,Ef,Ta,Ec,ws+4,qn,as)),ss.La&&(hf(ys,zl,Gn,ws,qn,as),t0(wf,FA,Ef,Ta,Ec,ws,qn,as)),0<Br&&(NA(ys,zl,Gn,ws+4,qn,as),e0(wf,FA,Ef,Ta,Ec,ws+4,qn,as)),ss.La&&(Af(ys,zl,Gn,ws,qn,as),CA(wf,FA,Ef,Ta,Ec,ws,qn,as))}}if(He.ia&&alert("todo:DitherRow"),ze.put!=null){if(Yr=16*Rn,Rn=16*(Rn+1),ci?(ze.y=He.sa,ze.O=He.ta+ra,ze.f=He.qa,ze.N=He.ra+Dn,ze.ea=He.Ha,ze.W=He.Ia+Dn):(Yr-=cn,ze.y=Yt,ze.O=br,ze.f=er,ze.N=kt,ze.ea=Pn,ze.W=$n),hn||(Rn-=cn),Rn>ze.o&&(Rn=ze.o),ze.F=null,ze.J=null,He.Fa!=null&&0<He.Fa.length&&Yr<Rn&&(ze.J=sf(He,ze,Yr,Rn-Yr),ze.F=He.mb,ze.F==null&&ze.F.length==0)){_t=xa(He,3,"Could not decode alpha data.");break e}Yr<ze.j&&(cn=ze.j-Yr,Yr=ze.j,t(!(1&cn)),ze.O+=He.R*cn,ze.N+=He.B*(cn>>1),ze.W+=He.B*(cn>>1),ze.F!=null&&(ze.J+=ze.width*cn)),Yr<Rn&&(ze.O+=ze.v,ze.N+=ze.v>>1,ze.W+=ze.v>>1,ze.F!=null&&(ze.J+=ze.v),ze.ka=Yr-ze.j,ze.U=ze.va-ze.v,ze.T=Rn-Yr,_t=ze.put(ze))}gt+1!=He.Ic||hn||(n(He.sa,He.ta-Tt,Yt,br+16*He.R,Tt),n(He.qa,He.ra-nr,er,kt+8*He.B,nr),n(He.Ha,He.Ia-nr,Pn,$n+8*He.B,nr))}if(!_t)return xa(We,6,"Output aborted.")}return 1}(F,H)),H.bc!=null&&H.bc(H),re&=1}return re?(F.cb=0,re):0}function Ei(F,H,re,oe,Ae){Ae=F[H+re+32*oe]+(Ae>>3),F[H+re+32*oe]=-256&Ae?0>Ae?0:255:Ae}function ef(F,H,re,oe,Ae,ge){Ei(F,H,0,re,oe+Ae),Ei(F,H,1,re,oe+ge),Ei(F,H,2,re,oe-ge),Ei(F,H,3,re,oe-Ae)}function On(F){return(20091*F>>16)+F}function Ni(F,H,re,oe){var Ae,ge=0,xe=s(16);for(Ae=0;4>Ae;++Ae){var ye=F[H+0]+F[H+8],Ce=F[H+0]-F[H+8],Te=(35468*F[H+4]>>16)-On(F[H+12]),Qe=On(F[H+4])+(35468*F[H+12]>>16);xe[ge+0]=ye+Qe,xe[ge+1]=Ce+Te,xe[ge+2]=Ce-Te,xe[ge+3]=ye-Qe,ge+=4,H++}for(Ae=ge=0;4>Ae;++Ae)ye=(F=xe[ge+0]+4)+xe[ge+8],Ce=F-xe[ge+8],Te=(35468*xe[ge+4]>>16)-On(xe[ge+12]),Ei(re,oe,0,0,ye+(Qe=On(xe[ge+4])+(35468*xe[ge+12]>>16))),Ei(re,oe,1,0,Ce+Te),Ei(re,oe,2,0,Ce-Te),Ei(re,oe,3,0,ye-Qe),ge++,oe+=32}function nu(F,H,re,oe){var Ae=F[H+0]+4,ge=35468*F[H+4]>>16,xe=On(F[H+4]),ye=35468*F[H+1]>>16;ef(re,oe,0,Ae+xe,F=On(F[H+1]),ye),ef(re,oe,1,Ae+ge,F,ye),ef(re,oe,2,Ae-ge,F,ye),ef(re,oe,3,Ae-xe,F,ye)}function au(F,H,re,oe,Ae){Ni(F,H,re,oe),Ae&&Ni(F,H+16,re,oe+4)}function Il(F,H,re,oe){yc(F,H+0,re,oe,1),yc(F,H+32,re,oe+128,1)}function Vn(F,H,re,oe){var Ae;for(F=F[H+0]+4,Ae=0;4>Ae;++Ae)for(H=0;4>H;++H)Ei(re,oe,H,Ae,F)}function su(F,H,re,oe){F[H+0]&&bs(F,H+0,re,oe),F[H+16]&&bs(F,H+16,re,oe+4),F[H+32]&&bs(F,H+32,re,oe+128),F[H+48]&&bs(F,H+48,re,oe+128+4)}function ko(F,H,re,oe){var Ae,ge=s(16);for(Ae=0;4>Ae;++Ae){var xe=F[H+0+Ae]+F[H+12+Ae],ye=F[H+4+Ae]+F[H+8+Ae],Ce=F[H+4+Ae]-F[H+8+Ae],Te=F[H+0+Ae]-F[H+12+Ae];ge[0+Ae]=xe+ye,ge[8+Ae]=xe-ye,ge[4+Ae]=Te+Ce,ge[12+Ae]=Te-Ce}for(Ae=0;4>Ae;++Ae)xe=(F=ge[0+4*Ae]+3)+ge[3+4*Ae],ye=ge[1+4*Ae]+ge[2+4*Ae],Ce=ge[1+4*Ae]-ge[2+4*Ae],Te=F-ge[3+4*Ae],re[oe+0]=xe+ye>>3,re[oe+16]=Te+Ce>>3,re[oe+32]=xe-ye>>3,re[oe+48]=Te-Ce>>3,oe+=64}function Ac(F,H,re){var oe,Ae=H-32,ge=oi,xe=255-F[Ae-1];for(oe=0;oe<re;++oe){var ye,Ce=ge,Te=xe+F[H-1];for(ye=0;ye<re;++ye)F[H+ye]=Ce[Te+F[Ae+ye]];H+=32}}function Kh(F,H){Ac(F,H,4)}function pA(F,H){Ac(F,H,8)}function gA(F,H){Ac(F,H,16)}function hc(F,H){var re;for(re=0;16>re;++re)n(F,H+32*re,F,H-32,16)}function tf(F,H){var re;for(re=16;0<re;--re)a(F,H,F[H-1],16),H+=32}function mc(F,H,re){var oe;for(oe=0;16>oe;++oe)a(H,re+32*oe,F,16)}function Fl(F,H){var re,oe=16;for(re=0;16>re;++re)oe+=F[H-1+32*re]+F[H+re-32];mc(oe>>5,F,H)}function ca(F,H){var re,oe=8;for(re=0;16>re;++re)oe+=F[H-1+32*re];mc(oe>>4,F,H)}function pc(F,H){var re,oe=8;for(re=0;16>re;++re)oe+=F[H+re-32];mc(oe>>4,F,H)}function Ol(F,H){mc(128,F,H)}function Fr(F,H,re){return F+2*H+re+2>>2}function Dl(F,H){var re,oe=H-32;for(oe=new Uint8Array([Fr(F[oe-1],F[oe+0],F[oe+1]),Fr(F[oe+0],F[oe+1],F[oe+2]),Fr(F[oe+1],F[oe+2],F[oe+3]),Fr(F[oe+2],F[oe+3],F[oe+4])]),re=0;4>re;++re)n(F,H+32*re,oe,0,oe.length)}function Wh(F,H){var re=F[H-1],oe=F[H-1+32],Ae=F[H-1+64],ge=F[H-1+96];de(F,H+0,16843009*Fr(F[H-1-32],re,oe)),de(F,H+32,16843009*Fr(re,oe,Ae)),de(F,H+64,16843009*Fr(oe,Ae,ge)),de(F,H+96,16843009*Fr(Ae,ge,ge))}function Li(F,H){var re,oe=4;for(re=0;4>re;++re)oe+=F[H+re-32]+F[H-1+32*re];for(oe>>=3,re=0;4>re;++re)a(F,H+32*re,oe,4)}function jo(F,H){var re=F[H-1+0],oe=F[H-1+32],Ae=F[H-1+64],ge=F[H-1-32],xe=F[H+0-32],ye=F[H+1-32],Ce=F[H+2-32],Te=F[H+3-32];F[H+0+96]=Fr(oe,Ae,F[H-1+96]),F[H+1+96]=F[H+0+64]=Fr(re,oe,Ae),F[H+2+96]=F[H+1+64]=F[H+0+32]=Fr(ge,re,oe),F[H+3+96]=F[H+2+64]=F[H+1+32]=F[H+0+0]=Fr(xe,ge,re),F[H+3+64]=F[H+2+32]=F[H+1+0]=Fr(ye,xe,ge),F[H+3+32]=F[H+2+0]=Fr(Ce,ye,xe),F[H+3+0]=Fr(Te,Ce,ye)}function io(F,H){var re=F[H+1-32],oe=F[H+2-32],Ae=F[H+3-32],ge=F[H+4-32],xe=F[H+5-32],ye=F[H+6-32],Ce=F[H+7-32];F[H+0+0]=Fr(F[H+0-32],re,oe),F[H+1+0]=F[H+0+32]=Fr(re,oe,Ae),F[H+2+0]=F[H+1+32]=F[H+0+64]=Fr(oe,Ae,ge),F[H+3+0]=F[H+2+32]=F[H+1+64]=F[H+0+96]=Fr(Ae,ge,xe),F[H+3+32]=F[H+2+64]=F[H+1+96]=Fr(ge,xe,ye),F[H+3+64]=F[H+2+96]=Fr(xe,ye,Ce),F[H+3+96]=Fr(ye,Ce,Ce)}function Pl(F,H){var re=F[H-1+0],oe=F[H-1+32],Ae=F[H-1+64],ge=F[H-1-32],xe=F[H+0-32],ye=F[H+1-32],Ce=F[H+2-32],Te=F[H+3-32];F[H+0+0]=F[H+1+64]=ge+xe+1>>1,F[H+1+0]=F[H+2+64]=xe+ye+1>>1,F[H+2+0]=F[H+3+64]=ye+Ce+1>>1,F[H+3+0]=Ce+Te+1>>1,F[H+0+96]=Fr(Ae,oe,re),F[H+0+64]=Fr(oe,re,ge),F[H+0+32]=F[H+1+96]=Fr(re,ge,xe),F[H+1+32]=F[H+2+96]=Fr(ge,xe,ye),F[H+2+32]=F[H+3+96]=Fr(xe,ye,Ce),F[H+3+32]=Fr(ye,Ce,Te)}function Bo(F,H){var re=F[H+0-32],oe=F[H+1-32],Ae=F[H+2-32],ge=F[H+3-32],xe=F[H+4-32],ye=F[H+5-32],Ce=F[H+6-32],Te=F[H+7-32];F[H+0+0]=re+oe+1>>1,F[H+1+0]=F[H+0+64]=oe+Ae+1>>1,F[H+2+0]=F[H+1+64]=Ae+ge+1>>1,F[H+3+0]=F[H+2+64]=ge+xe+1>>1,F[H+0+32]=Fr(re,oe,Ae),F[H+1+32]=F[H+0+96]=Fr(oe,Ae,ge),F[H+2+32]=F[H+1+96]=Fr(Ae,ge,xe),F[H+3+32]=F[H+2+96]=Fr(ge,xe,ye),F[H+3+64]=Fr(xe,ye,Ce),F[H+3+96]=Fr(ye,Ce,Te)}function iu(F,H){var re=F[H-1+0],oe=F[H-1+32],Ae=F[H-1+64],ge=F[H-1+96];F[H+0+0]=re+oe+1>>1,F[H+2+0]=F[H+0+32]=oe+Ae+1>>1,F[H+2+32]=F[H+0+64]=Ae+ge+1>>1,F[H+1+0]=Fr(re,oe,Ae),F[H+3+0]=F[H+1+32]=Fr(oe,Ae,ge),F[H+3+32]=F[H+1+64]=Fr(Ae,ge,ge),F[H+3+64]=F[H+2+64]=F[H+0+96]=F[H+1+96]=F[H+2+96]=F[H+3+96]=ge}function gc(F,H){var re=F[H-1+0],oe=F[H-1+32],Ae=F[H-1+64],ge=F[H-1+96],xe=F[H-1-32],ye=F[H+0-32],Ce=F[H+1-32],Te=F[H+2-32];F[H+0+0]=F[H+2+32]=re+xe+1>>1,F[H+0+32]=F[H+2+64]=oe+re+1>>1,F[H+0+64]=F[H+2+96]=Ae+oe+1>>1,F[H+0+96]=ge+Ae+1>>1,F[H+3+0]=Fr(ye,Ce,Te),F[H+2+0]=Fr(xe,ye,Ce),F[H+1+0]=F[H+3+32]=Fr(re,xe,ye),F[H+1+32]=F[H+3+64]=Fr(oe,re,xe),F[H+1+64]=F[H+3+96]=Fr(Ae,oe,re),F[H+1+96]=Fr(ge,Ae,oe)}function xA(F,H){var re;for(re=0;8>re;++re)n(F,H+32*re,F,H-32,8)}function To(F,H){var re;for(re=0;8>re;++re)a(F,H,F[H-1],8),H+=32}function Mi(F,H,re){var oe;for(oe=0;8>oe;++oe)a(H,re+32*oe,F,8)}function Rl(F,H){var re,oe=8;for(re=0;8>re;++re)oe+=F[H+re-32]+F[H-1+32*re];Mi(oe>>4,F,H)}function xs(F,H){var re,oe=4;for(re=0;8>re;++re)oe+=F[H+re-32];Mi(oe>>3,F,H)}function yn(F,H){var re,oe=4;for(re=0;8>re;++re)oe+=F[H-1+32*re];Mi(oe>>3,F,H)}function ou(F,H){Mi(128,F,H)}function Ll(F,H,re){var oe=F[H-re],Ae=F[H+0],ge=3*(Ae-oe)+rx[1020+F[H-2*re]-F[H+re]],xe=SA[112+(ge+4>>3)];F[H-re]=oi[255+oe+SA[112+(ge+3>>3)]],F[H+0]=oi[255+Ae-xe]}function vA(F,H,re,oe){var Ae=F[H+0],ge=F[H+re];return Hl[255+F[H-2*re]-F[H-re]]>oe||Hl[255+ge-Ae]>oe}function ed(F,H,re,oe){return 4*Hl[255+F[H-re]-F[H+0]]+Hl[255+F[H-2*re]-F[H+re]]<=oe}function td(F,H,re,oe,Ae){var ge=F[H-3*re],xe=F[H-2*re],ye=F[H-re],Ce=F[H+0],Te=F[H+re],Qe=F[H+2*re],st=F[H+3*re];return 4*Hl[255+ye-Ce]+Hl[255+xe-Te]>oe?0:Hl[255+F[H-4*re]-ge]<=Ae&&Hl[255+ge-xe]<=Ae&&Hl[255+xe-ye]<=Ae&&Hl[255+st-Qe]<=Ae&&Hl[255+Qe-Te]<=Ae&&Hl[255+Te-Ce]<=Ae}function fl(F,H,re,oe){var Ae=2*oe+1;for(oe=0;16>oe;++oe)ed(F,H+oe,re,Ae)&&Ll(F,H+oe,re)}function Ui(F,H,re,oe){var Ae=2*oe+1;for(oe=0;16>oe;++oe)ed(F,H+oe*re,1,Ae)&&Ll(F,H+oe*re,1)}function vs(F,H,re,oe){var Ae;for(Ae=3;0<Ae;--Ae)fl(F,H+=4*re,re,oe)}function Xh(F,H,re,oe){var Ae;for(Ae=3;0<Ae;--Ae)Ui(F,H+=4,re,oe)}function lu(F,H,re,oe,Ae,ge,xe,ye){for(ge=2*ge+1;0<Ae--;){if(td(F,H,re,ge,xe))if(vA(F,H,re,ye))Ll(F,H,re);else{var Ce=F,Te=H,Qe=re,st=Ce[Te-2*Qe],tt=Ce[Te-Qe],We=Ce[Te+0],Bt=Ce[Te+Qe],gt=Ce[Te+2*Qe],He=27*(_t=rx[1020+3*(We-tt)+rx[1020+st-Bt]])+63>>7,ze=18*_t+63>>7,_t=9*_t+63>>7;Ce[Te-3*Qe]=oi[255+Ce[Te-3*Qe]+_t],Ce[Te-2*Qe]=oi[255+st+ze],Ce[Te-Qe]=oi[255+tt+He],Ce[Te+0]=oi[255+We-He],Ce[Te+Qe]=oi[255+Bt-ze],Ce[Te+2*Qe]=oi[255+gt-_t]}H+=oe}}function Ci(F,H,re,oe,Ae,ge,xe,ye){for(ge=2*ge+1;0<Ae--;){if(td(F,H,re,ge,xe))if(vA(F,H,re,ye))Ll(F,H,re);else{var Ce=F,Te=H,Qe=re,st=Ce[Te-Qe],tt=Ce[Te+0],We=Ce[Te+Qe],Bt=SA[112+((gt=3*(tt-st))+4>>3)],gt=SA[112+(gt+3>>3)],He=Bt+1>>1;Ce[Te-2*Qe]=oi[255+Ce[Te-2*Qe]+He],Ce[Te-Qe]=oi[255+st+gt],Ce[Te+0]=oi[255+tt-Bt],Ce[Te+Qe]=oi[255+We-He]}H+=oe}}function cu(F,H,re,oe,Ae,ge){lu(F,H,re,1,16,oe,Ae,ge)}function xc(F,H,re,oe,Ae,ge){lu(F,H,1,re,16,oe,Ae,ge)}function rf(F,H,re,oe,Ae,ge){var xe;for(xe=3;0<xe;--xe)Ci(F,H+=4*re,re,1,16,oe,Ae,ge)}function rd(F,H,re,oe,Ae,ge){var xe;for(xe=3;0<xe;--xe)Ci(F,H+=4,1,re,16,oe,Ae,ge)}function nf(F,H,re,oe,Ae,ge,xe,ye){lu(F,H,Ae,1,8,ge,xe,ye),lu(re,oe,Ae,1,8,ge,xe,ye)}function bA(F,H,re,oe,Ae,ge,xe,ye){lu(F,H,1,Ae,8,ge,xe,ye),lu(re,oe,1,Ae,8,ge,xe,ye)}function nd(F,H,re,oe,Ae,ge,xe,ye){Ci(F,H+4*Ae,Ae,1,8,ge,xe,ye),Ci(re,oe+4*Ae,Ae,1,8,ge,xe,ye)}function uu(F,H,re,oe,Ae,ge,xe,ye){Ci(F,H+4,1,Ae,8,ge,xe,ye),Ci(re,oe+4,1,Ae,8,ge,xe,ye)}function ad(){this.ba=new la,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new rn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function af(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function sd(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function du(){this.ua=0,this.Wa=new le,this.vb=new le,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new L,this.yc=new k}function Yh(){this.xb=this.a=0,this.l=new Ls,this.ca=new la,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new du,this.ab=0,this.gc=o(4,sd),this.Oc=0}function vc(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ls,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function fu(F,H,re,oe,Ae,ge,xe){for(F=F==null?0:F[H+0],H=0;H<xe;++H)Ae[ge+H]=F+re[oe+H]&255,F=Ae[ge+H]}function id(F,H,re,oe,Ae,ge,xe){var ye;if(F==null)fu(null,null,re,oe,Ae,ge,xe);else for(ye=0;ye<xe;++ye)Ae[ge+ye]=F[H+ye]+re[oe+ye]&255}function Qi(F,H,re,oe,Ae,ge,xe){if(F==null)fu(null,null,re,oe,Ae,ge,xe);else{var ye,Ce=F[H+0],Te=Ce,Qe=Ce;for(ye=0;ye<xe;++ye)Te=Qe+(Ce=F[H+ye])-Te,Qe=re[oe+ye]+(-256&Te?0>Te?0:255:Te)&255,Te=Ce,Ae[ge+ye]=Qe}}function sf(F,H,re,oe){var Ae=H.width,ge=H.o;if(t(F!=null&&H!=null),0>re||0>=oe||re+oe>ge)return null;if(!F.Cc){if(F.ga==null){var xe;if(F.ga=new vc,(xe=F.ga==null)||(xe=H.width*H.o,t(F.Gb.length==0),F.Gb=s(xe),F.Uc=0,F.Gb==null?xe=0:(F.mb=F.Gb,F.nb=F.Uc,F.rc=null,xe=1),xe=!xe),!xe){xe=F.ga;var ye=F.Fa,Ce=F.P,Te=F.qc,Qe=F.mb,st=F.nb,tt=Ce+1,We=Te-1,Bt=xe.l;if(t(ye!=null&&Qe!=null&&H!=null),xu[0]=null,xu[1]=fu,xu[2]=id,xu[3]=Qi,xe.ca=Qe,xe.tb=st,xe.c=H.width,xe.i=H.height,t(0<xe.c&&0<xe.i),1>=Te)H=0;else if(xe.$a=ye[Ce+0]>>0&3,xe.Z=ye[Ce+0]>>2&3,xe.Lc=ye[Ce+0]>>4&3,Ce=ye[Ce+0]>>6&3,0>xe.$a||1<xe.$a||4<=xe.Z||1<xe.Lc||Ce)H=0;else if(Bt.put=vt,Bt.ac=Je,Bt.bc=Et,Bt.ma=xe,Bt.width=H.width,Bt.height=H.height,Bt.Da=H.Da,Bt.v=H.v,Bt.va=H.va,Bt.j=H.j,Bt.o=H.o,xe.$a)e:{t(xe.$a==1),H=ft();t:for(;;){if(H==null){H=0;break e}if(t(xe!=null),xe.mc=H,H.c=xe.c,H.i=xe.i,H.l=xe.l,H.l.ma=xe,H.l.width=xe.c,H.l.height=xe.i,H.a=0,G(H.m,ye,tt,We),!qe(xe.c,xe.i,1,H,null)||(H.ab==1&&H.gc[0].hc==3&&_e(H.s)?(xe.ic=1,ye=H.c*H.i,H.Ta=null,H.Ua=0,H.V=s(ye),H.Ba=0,H.V==null?(H.a=1,H=0):H=1):(xe.ic=0,H=rt(H,xe.c)),!H))break t;H=1;break e}xe.mc=null,H=0}else H=We>=xe.c*xe.i;xe=!H}if(xe)return null;F.ga.Lc!=1?F.Ga=0:oe=ge-re}t(F.ga!=null),t(re+oe<=ge);e:{if(H=(ye=F.ga).c,ge=ye.l.o,ye.$a==0){if(tt=F.rc,We=F.Vc,Bt=F.Fa,Ce=F.P+1+re*H,Te=F.mb,Qe=F.nb+re*H,t(Ce<=F.P+F.qc),ye.Z!=0)for(t(xu[ye.Z]!=null),xe=0;xe<oe;++xe)xu[ye.Z](tt,We,Bt,Ce,Te,Qe,H),tt=Te,We=Qe,Qe+=H,Ce+=H;else for(xe=0;xe<oe;++xe)n(Te,Qe,Bt,Ce,H),tt=Te,We=Qe,Qe+=H,Ce+=H;F.rc=tt,F.Vc=We}else{if(t(ye.mc!=null),H=re+oe,t((xe=ye.mc)!=null),t(H<=xe.i),xe.C>=H)H=1;else if(ye.ic||Ke(),ye.ic){ye=xe.V,tt=xe.Ba,We=xe.c;var gt=xe.i,He=(Bt=1,Ce=xe.$/We,Te=xe.$%We,Qe=xe.m,st=xe.s,xe.$),ze=We*gt,_t=We*H,Tt=st.wc,kt=He<_t?Kr(st,Te,Ce):null;t(He<=ze),t(H<=gt),t(_e(st));t:for(;;){for(;!Qe.h&&He<_t;){if(Te&Tt||(kt=Kr(st,Te,Ce)),t(kt!=null),te(Qe),256>(gt=Wr(kt.G[0],kt.H[0],Qe)))ye[tt+He]=gt,++He,++Te>=We&&(Te=0,++Ce<=H&&!(Ce%16)&&je(xe,Ce));else{if(!(280>gt)){Bt=0;break t}gt=ar(gt-256,Qe);var nr,Yt=Wr(kt.G[4],kt.H[4],Qe);if(te(Qe),!(He>=(Yt=xr(We,Yt=ar(Yt,Qe)))&&ze-He>=gt)){Bt=0;break t}for(nr=0;nr<gt;++nr)ye[tt+He+nr]=ye[tt+He+nr-Yt];for(He+=gt,Te+=gt;Te>=We;)Te-=We,++Ce<=H&&!(Ce%16)&&je(xe,Ce);He<_t&&Te&Tt&&(kt=Kr(st,Te,Ce))}t(Qe.h==z(Qe))}je(xe,Ce>H?H:Ce);break t}!Bt||Qe.h&&He<ze?(Bt=0,xe.a=Qe.h?5:3):xe.$=He,H=Bt}else H=Fe(xe,xe.V,xe.Ba,xe.c,xe.i,H,it);if(!H){oe=0;break e}}re+oe>=ge&&(F.Cc=1),oe=1}if(!oe)return null;if(F.Cc&&((oe=F.ga)!=null&&(oe.mc=null),F.ga=null,0<F.Ga))return alert("todo:WebPDequantizeLevels"),null}return F.nb+re*Ae}function Y(F,H,re,oe,Ae,ge){for(;0<Ae--;){var xe,ye=F,Ce=H+(re?1:0),Te=F,Qe=H+(re?0:3);for(xe=0;xe<oe;++xe){var st=Te[Qe+4*xe];st!=255&&(st*=32897,ye[Ce+4*xe+0]=ye[Ce+4*xe+0]*st>>23,ye[Ce+4*xe+1]=ye[Ce+4*xe+1]*st>>23,ye[Ce+4*xe+2]=ye[Ce+4*xe+2]*st>>23)}H+=ge}}function he(F,H,re,oe,Ae){for(;0<oe--;){var ge;for(ge=0;ge<re;++ge){var xe=F[H+2*ge+0],ye=15&(Te=F[H+2*ge+1]),Ce=4369*ye,Te=(240&Te|Te>>4)*Ce>>16;F[H+2*ge+0]=(240&xe|xe>>4)*Ce>>16&240|(15&xe|xe<<4)*Ce>>16>>4&15,F[H+2*ge+1]=240&Te|ye}H+=Ae}}function De(F,H,re,oe,Ae,ge,xe,ye){var Ce,Te,Qe=255;for(Te=0;Te<Ae;++Te){for(Ce=0;Ce<oe;++Ce){var st=F[H+Ce];ge[xe+4*Ce]=st,Qe&=st}H+=re,xe+=ye}return Qe!=255}function Me(F,H,re,oe,Ae){var ge;for(ge=0;ge<Ae;++ge)re[oe+ge]=F[H+ge]>>8}function Ke(){Al=Y,gn=he,xn=De,va=Me}function yt(F,H,re){S[F]=function(oe,Ae,ge,xe,ye,Ce,Te,Qe,st,tt,We,Bt,gt,He,ze,_t,Tt){var kt,nr=Tt-1>>1,Yt=ye[Ce+0]|Te[Qe+0]<<16,br=st[tt+0]|We[Bt+0]<<16;t(oe!=null);var er=3*Yt+br+131074>>2;for(H(oe[Ae+0],255&er,er>>16,gt,He),ge!=null&&(er=3*br+Yt+131074>>2,H(ge[xe+0],255&er,er>>16,ze,_t)),kt=1;kt<=nr;++kt){var Pn=ye[Ce+kt]|Te[Qe+kt]<<16,$n=st[tt+kt]|We[Bt+kt]<<16,hn=Yt+Pn+br+$n+524296,cn=hn+2*(Pn+br)>>3;er=cn+Yt>>1,Yt=(hn=hn+2*(Yt+$n)>>3)+Pn>>1,H(oe[Ae+2*kt-1],255&er,er>>16,gt,He+(2*kt-1)*re),H(oe[Ae+2*kt-0],255&Yt,Yt>>16,gt,He+(2*kt-0)*re),ge!=null&&(er=hn+br>>1,Yt=cn+$n>>1,H(ge[xe+2*kt-1],255&er,er>>16,ze,_t+(2*kt-1)*re),H(ge[xe+2*kt+0],255&Yt,Yt>>16,ze,_t+(2*kt+0)*re)),Yt=Pn,br=$n}1&Tt||(er=3*Yt+br+131074>>2,H(oe[Ae+Tt-1],255&er,er>>16,gt,He+(Tt-1)*re),ge!=null&&(er=3*br+Yt+131074>>2,H(ge[xe+Tt-1],255&er,er>>16,ze,_t+(Tt-1)*re)))}}function Lt(){li[Hi]=md,li[r0]=vu,li[pu]=bf,li[rp]=sx,li[kA]=ix,li[ud]=s0,li[nx]=ox,li[np]=vu,li[xf]=sx,li[dd]=ix,li[n0]=s0}function Zt(F){return F&-16384?0>F?0:255:F>>Tj}function O(F,H){return Zt((19077*F>>8)+(26149*H>>8)-14234)}function ne(F,H,re){return Zt((19077*F>>8)-(6419*H>>8)-(13320*re>>8)+8708)}function ue(F,H){return Zt((19077*F>>8)+(33050*H>>8)-17685)}function we(F,H,re,oe,Ae){oe[Ae+0]=O(F,re),oe[Ae+1]=ne(F,H,re),oe[Ae+2]=ue(F,H)}function $e(F,H,re,oe,Ae){oe[Ae+0]=ue(F,H),oe[Ae+1]=ne(F,H,re),oe[Ae+2]=O(F,re)}function ot(F,H,re,oe,Ae){var ge=ne(F,H,re);H=ge<<3&224|ue(F,H)>>3,oe[Ae+0]=248&O(F,re)|ge>>5,oe[Ae+1]=H}function Ut(F,H,re,oe,Ae){var ge=240&ue(F,H)|15;oe[Ae+0]=240&O(F,re)|ne(F,H,re)>>4,oe[Ae+1]=ge}function Or(F,H,re,oe,Ae){oe[Ae+0]=255,we(F,H,re,oe,Ae+1)}function wn(F,H,re,oe,Ae){$e(F,H,re,oe,Ae),oe[Ae+3]=255}function Xr(F,H,re,oe,Ae){we(F,H,re,oe,Ae),oe[Ae+3]=255}function zn(F,H){return 0>F?0:F>H?H:F}function ta(F,H,re){S[F]=function(oe,Ae,ge,xe,ye,Ce,Te,Qe,st){for(var tt=Qe+(-2&st)*re;Qe!=tt;)H(oe[Ae+0],ge[xe+0],ye[Ce+0],Te,Qe),H(oe[Ae+1],ge[xe+0],ye[Ce+0],Te,Qe+re),Ae+=2,++xe,++Ce,Qe+=2*re;1&st&&H(oe[Ae+0],ge[xe+0],ye[Ce+0],Te,Qe)}}function Ml(F,H,re){return re==0?F==0?H==0?6:5:H==0?4:0:re}function rs(F,H,re,oe,Ae){switch(F>>>30){case 3:yc(H,re,oe,Ae,0);break;case 2:qa(H,re,oe,Ae);break;case 1:bs(H,re,oe,Ae)}}function Io(F,H){var re,oe,Ae=H.M,ge=H.Nb,xe=F.oc,ye=F.pc+40,Ce=F.oc,Te=F.pc+584,Qe=F.oc,st=F.pc+600;for(re=0;16>re;++re)xe[ye+32*re-1]=129;for(re=0;8>re;++re)Ce[Te+32*re-1]=129,Qe[st+32*re-1]=129;for(0<Ae?xe[ye-1-32]=Ce[Te-1-32]=Qe[st-1-32]=129:(a(xe,ye-32-1,127,21),a(Ce,Te-32-1,127,9),a(Qe,st-32-1,127,9)),oe=0;oe<F.za;++oe){var tt=H.ya[H.aa+oe];if(0<oe){for(re=-1;16>re;++re)n(xe,ye+32*re-4,xe,ye+32*re+12,4);for(re=-1;8>re;++re)n(Ce,Te+32*re-4,Ce,Te+32*re+4,4),n(Qe,st+32*re-4,Qe,st+32*re+4,4)}var We=F.Gd,Bt=F.Hd+oe,gt=tt.ad,He=tt.Hc;if(0<Ae&&(n(xe,ye-32,We[Bt].y,0,16),n(Ce,Te-32,We[Bt].f,0,8),n(Qe,st-32,We[Bt].ea,0,8)),tt.Za){var ze=xe,_t=ye-32+16;for(0<Ae&&(oe>=F.za-1?a(ze,_t,We[Bt].y[15],4):n(ze,_t,We[Bt+1].y,0,4)),re=0;4>re;re++)ze[_t+128+re]=ze[_t+256+re]=ze[_t+384+re]=ze[_t+0+re];for(re=0;16>re;++re,He<<=2)ze=xe,_t=ye+IA[re],lo[tt.Ob[re]](ze,_t),rs(He,gt,16*+re,ze,_t)}else if(ze=Ml(oe,Ae,tt.Ob[0]),hd[ze](xe,ye),He!=0)for(re=0;16>re;++re,He<<=2)rs(He,gt,16*+re,xe,ye+IA[re]);for(re=tt.Gc,ze=Ml(oe,Ae,tt.Dd),ml[ze](Ce,Te),ml[ze](Qe,st),He=gt,ze=Ce,_t=Te,255&(tt=re>>0)&&(170&tt?wc(He,256,ze,_t):Do(He,256,ze,_t)),tt=Qe,He=st,255&(re>>=8)&&(170&re?wc(gt,320,tt,He):Do(gt,320,tt,He)),Ae<F.Ub-1&&(n(We[Bt].y,0,xe,ye+480,16),n(We[Bt].f,0,Ce,Te+224,8),n(We[Bt].ea,0,Qe,st+224,8)),re=8*ge*F.B,We=F.sa,Bt=F.ta+16*oe+16*ge*F.R,gt=F.qa,tt=F.ra+8*oe+re,He=F.Ha,ze=F.Ia+8*oe+re,re=0;16>re;++re)n(We,Bt+re*F.R,xe,ye+32*re,16);for(re=0;8>re;++re)n(gt,tt+re*F.B,Ce,Te+32*re,8),n(He,ze+re*F.B,Qe,st+32*re,8)}}function Au(F,H,re,oe,Ae,ge,xe,ye,Ce){var Te=[0],Qe=[0],st=0,tt=Ce!=null?Ce.kd:0,We=Ce??new af;if(F==null||12>re)return 7;We.data=F,We.w=H,We.ha=re,H=[H],re=[re],We.gb=[We.gb];e:{var Bt=H,gt=re,He=We.gb;if(t(F!=null),t(gt!=null),t(He!=null),He[0]=0,12<=gt[0]&&!r(F,Bt[0],"RIFF")){if(r(F,Bt[0]+8,"WEBP")){He=3;break e}var ze=Se(F,Bt[0]+4);if(12>ze||4294967286<ze){He=3;break e}if(tt&&ze>gt[0]-8){He=7;break e}He[0]=ze,Bt[0]+=12,gt[0]-=12}He=0}if(He!=0)return He;for(ze=0<We.gb[0],re=re[0];;){e:{var _t=F;gt=H,He=re;var Tt=Te,kt=Qe,nr=Bt=[0];if((er=st=[st])[0]=0,8>He[0])He=7;else{if(!r(_t,gt[0],"VP8X")){if(Se(_t,gt[0]+4)!=10){He=3;break e}if(18>He[0]){He=7;break e}var Yt=Se(_t,gt[0]+8),br=1+ae(_t,gt[0]+12);if(2147483648<=br*(_t=1+ae(_t,gt[0]+15))){He=3;break e}nr!=null&&(nr[0]=Yt),Tt!=null&&(Tt[0]=br),kt!=null&&(kt[0]=_t),gt[0]+=18,He[0]-=18,er[0]=1}He=0}}if(st=st[0],Bt=Bt[0],He!=0)return He;if(gt=!!(2&Bt),!ze&&st)return 3;if(ge!=null&&(ge[0]=!!(16&Bt)),xe!=null&&(xe[0]=gt),ye!=null&&(ye[0]=0),xe=Te[0],Bt=Qe[0],st&&gt&&Ce==null){He=0;break}if(4>re){He=7;break}if(ze&&st||!ze&&!st&&!r(F,H[0],"ALPH")){re=[re],We.na=[We.na],We.P=[We.P],We.Sa=[We.Sa];e:{Yt=F,He=H,ze=re;var er=We.gb;Tt=We.na,kt=We.P,nr=We.Sa,br=22,t(Yt!=null),t(ze!=null),_t=He[0];var Pn=ze[0];for(t(Tt!=null),t(nr!=null),Tt[0]=null,kt[0]=null,nr[0]=0;;){if(He[0]=_t,ze[0]=Pn,8>Pn){He=7;break e}var $n=Se(Yt,_t+4);if(4294967286<$n){He=3;break e}var hn=8+$n+1&-2;if(br+=hn,0<er&&br>er){He=3;break e}if(!r(Yt,_t,"VP8 ")||!r(Yt,_t,"VP8L")){He=0;break e}if(Pn[0]<hn){He=7;break e}r(Yt,_t,"ALPH")||(Tt[0]=Yt,kt[0]=_t+8,nr[0]=$n),_t+=hn,Pn-=hn}}if(re=re[0],We.na=We.na[0],We.P=We.P[0],We.Sa=We.Sa[0],He!=0)break}re=[re],We.Ja=[We.Ja],We.xa=[We.xa];e:if(er=F,He=H,ze=re,Tt=We.gb[0],kt=We.Ja,nr=We.xa,Yt=He[0],_t=!r(er,Yt,"VP8 "),br=!r(er,Yt,"VP8L"),t(er!=null),t(ze!=null),t(kt!=null),t(nr!=null),8>ze[0])He=7;else{if(_t||br){if(er=Se(er,Yt+4),12<=Tt&&er>Tt-12){He=3;break e}if(tt&&er>ze[0]-8){He=7;break e}kt[0]=er,He[0]+=8,ze[0]-=8,nr[0]=br}else nr[0]=5<=ze[0]&&er[Yt+0]==47&&!(er[Yt+4]>>5),kt[0]=ze[0];He=0}if(re=re[0],We.Ja=We.Ja[0],We.xa=We.xa[0],H=H[0],He!=0)break;if(4294967286<We.Ja)return 3;if(ye==null||gt||(ye[0]=We.xa?2:1),xe=[xe],Bt=[Bt],We.xa){if(5>re){He=7;break}ye=xe,tt=Bt,gt=ge,F==null||5>re?F=0:5<=re&&F[H+0]==47&&!(F[H+4]>>5)?(ze=[0],er=[0],Tt=[0],G(kt=new P,F,H,re),bt(kt,ze,er,Tt)?(ye!=null&&(ye[0]=ze[0]),tt!=null&&(tt[0]=er[0]),gt!=null&&(gt[0]=Tt[0]),F=1):F=0):F=0}else{if(10>re){He=7;break}ye=Bt,F==null||10>re||!si(F,H+3,re-3)?F=0:(tt=F[H+0]|F[H+1]<<8|F[H+2]<<16,gt=16383&(F[H+7]<<8|F[H+6]),F=16383&(F[H+9]<<8|F[H+8]),1&tt||3<(tt>>1&7)||!(tt>>4&1)||tt>>5>=We.Ja||!gt||!F?F=0:(xe&&(xe[0]=gt),ye&&(ye[0]=F),F=1))}if(!F||(xe=xe[0],Bt=Bt[0],st&&(Te[0]!=xe||Qe[0]!=Bt)))return 3;Ce!=null&&(Ce[0]=We,Ce.offset=H-Ce.w,t(4294967286>H-Ce.w),t(Ce.offset==Ce.ha-re));break}return He==0||He==7&&st&&Ce==null?(ge!=null&&(ge[0]|=We.na!=null&&0<We.na.length),oe!=null&&(oe[0]=xe),Ae!=null&&(Ae[0]=Bt),0):He}function of(F,H,re){var oe=H.width,Ae=H.height,ge=0,xe=0,ye=oe,Ce=Ae;if(H.Da=F!=null&&0<F.Da,H.Da&&(ye=F.cd,Ce=F.bd,ge=F.v,xe=F.j,11>re||(ge&=-2,xe&=-2),0>ge||0>xe||0>=ye||0>=Ce||ge+ye>oe||xe+Ce>Ae))return 0;if(H.v=ge,H.j=xe,H.va=ge+ye,H.o=xe+Ce,H.U=ye,H.T=Ce,H.da=F!=null&&0<F.da,H.da){if(!be(ye,Ce,re=[F.ib],ge=[F.hb]))return 0;H.ib=re[0],H.hb=ge[0]}return H.ob=F!=null&&F.ob,H.Kb=F==null||!F.Sd,H.da&&(H.ob=H.ib<3*oe/4&&H.hb<3*Ae/4,H.Kb=0),1}function Jh(F){if(F==null)return 2;if(11>F.S){var H=F.f.RGBA;H.fb+=(F.height-1)*H.A,H.A=-H.A}else H=F.f.kb,F=F.height,H.O+=(F-1)*H.fa,H.fa=-H.fa,H.N+=(F-1>>1)*H.Ab,H.Ab=-H.Ab,H.W+=(F-1>>1)*H.Db,H.Db=-H.Db,H.F!=null&&(H.J+=(F-1)*H.lb,H.lb=-H.lb);return 0}function yA(F,H,re,oe){if(oe==null||0>=F||0>=H)return 2;if(re!=null){if(re.Da){var Ae=re.cd,ge=re.bd,xe=-2&re.v,ye=-2&re.j;if(0>xe||0>ye||0>=Ae||0>=ge||xe+Ae>F||ye+ge>H)return 2;F=Ae,H=ge}if(re.da){if(!be(F,H,Ae=[re.ib],ge=[re.hb]))return 2;F=Ae[0],H=ge[0]}}oe.width=F,oe.height=H;e:{var Ce=oe.width,Te=oe.height;if(F=oe.S,0>=Ce||0>=Te||!(F>=Hi&&13>F))F=2;else{if(0>=oe.Rd&&oe.sd==null){xe=ge=Ae=H=0;var Qe=(ye=Ce*UE[F])*Te;if(11>F||(ge=(Te+1)/2*(H=(Ce+1)/2),F==12&&(xe=(Ae=Ce)*Te)),(Te=s(Qe+2*ge+xe))==null){F=1;break e}oe.sd=Te,11>F?((Ce=oe.f.RGBA).eb=Te,Ce.fb=0,Ce.A=ye,Ce.size=Qe):((Ce=oe.f.kb).y=Te,Ce.O=0,Ce.fa=ye,Ce.Fd=Qe,Ce.f=Te,Ce.N=0+Qe,Ce.Ab=H,Ce.Cd=ge,Ce.ea=Te,Ce.W=0+Qe+ge,Ce.Db=H,Ce.Ed=ge,F==12&&(Ce.F=Te,Ce.J=0+Qe+2*ge),Ce.Tc=xe,Ce.lb=Ae)}if(H=1,Ae=oe.S,ge=oe.width,xe=oe.height,Ae>=Hi&&13>Ae)if(11>Ae)F=oe.f.RGBA,H&=(ye=Math.abs(F.A))*(xe-1)+ge<=F.size,H&=ye>=ge*UE[Ae],H&=F.eb!=null;else{F=oe.f.kb,ye=(ge+1)/2,Qe=(xe+1)/2,Ce=Math.abs(F.fa),Te=Math.abs(F.Ab);var st=Math.abs(F.Db),tt=Math.abs(F.lb),We=tt*(xe-1)+ge;H&=Ce*(xe-1)+ge<=F.Fd,H&=Te*(Qe-1)+ye<=F.Cd,H=(H&=st*(Qe-1)+ye<=F.Ed)&Ce>=ge&Te>=ye&st>=ye,H&=F.y!=null,H&=F.f!=null,H&=F.ea!=null,Ae==12&&(H&=tt>=ge,H&=We<=F.Tc,H&=F.F!=null)}else H=0;F=H?0:2}}return F!=0||re!=null&&re.fd&&(F=Jh(oe)),F}var Ms=64,lf=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],wA=24,EA=32,Zh=8,Fo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];pe("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(F){return F},S.Predictor2=function(F,H,re){return H[re+0]},S.Predictor3=function(F,H,re){return H[re+1]},S.Predictor4=function(F,H,re){return H[re-1]},S.Predictor5=function(F,H,re){return Le(Le(F,H[re+1]),H[re+0])},S.Predictor6=function(F,H,re){return Le(F,H[re-1])},S.Predictor7=function(F,H,re){return Le(F,H[re+0])},S.Predictor8=function(F,H,re){return Le(H[re-1],H[re+0])},S.Predictor9=function(F,H,re){return Le(H[re+0],H[re+1])},S.Predictor10=function(F,H,re){return Le(Le(F,H[re-1]),Le(H[re+0],H[re+1]))},S.Predictor11=function(F,H,re){var oe=H[re+0];return 0>=ut(oe>>24&255,F>>24&255,(H=H[re-1])>>24&255)+ut(oe>>16&255,F>>16&255,H>>16&255)+ut(oe>>8&255,F>>8&255,H>>8&255)+ut(255&oe,255&F,255&H)?oe:F},S.Predictor12=function(F,H,re){var oe=H[re+0];return(Ge((F>>24&255)+(oe>>24&255)-((H=H[re-1])>>24&255))<<24|Ge((F>>16&255)+(oe>>16&255)-(H>>16&255))<<16|Ge((F>>8&255)+(oe>>8&255)-(H>>8&255))<<8|Ge((255&F)+(255&oe)-(255&H)))>>>0},S.Predictor13=function(F,H,re){var oe=H[re-1];return(et((F=Le(F,H[re+0]))>>24&255,oe>>24&255)<<24|et(F>>16&255,oe>>16&255)<<16|et(F>>8&255,oe>>8&255)<<8|et(F>>0&255,oe>>0&255))>>>0};var y1=S.PredictorAdd0;S.PredictorAdd1=xt,pe("Predictor2","PredictorAdd2"),pe("Predictor3","PredictorAdd3"),pe("Predictor4","PredictorAdd4"),pe("Predictor5","PredictorAdd5"),pe("Predictor6","PredictorAdd6"),pe("Predictor7","PredictorAdd7"),pe("Predictor8","PredictorAdd8"),pe("Predictor9","PredictorAdd9"),pe("Predictor10","PredictorAdd10"),pe("Predictor11","PredictorAdd11"),pe("Predictor12","PredictorAdd12"),pe("Predictor13","PredictorAdd13");var ep=S.PredictorAdd2;Ht("ColorIndexInverseTransform","MapARGB","32b",function(F){return F>>8&255},function(F){return F}),Ht("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(F){return F},function(F){return F>>8&255});var tx,Ul=S.ColorIndexInverseTransform,ii=S.MapARGB,cf=S.VP8LColorIndexInverseTransformAlpha,tp=S.MapAlpha,od=S.VP8LPredictorsAdd=[];od.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var uf,oo,_i,df,Oo,bc,hu,yc,qa,wc,bs,Do,NA,mu,e0,ff,Af,hf,CA,t0,mf,ld,_A,Ka,Al,gn,xn,va,ns=s(511),Ql=s(2041),pf=s(225),gf=s(767),cd=0,rx=Ql,SA=pf,oi=gf,Hl=ns,Hi=0,r0=1,pu=2,rp=3,kA=4,ud=5,nx=6,np=7,xf=8,dd=9,n0=10,ax=[2,3,7],Vl=[3,3,11],hl=[280,256,256,256,40],jA=[0,1,1,1,0],fd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ad=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],BA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],DE=8,ap=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],sp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Us=null,Wa=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Un=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],vf=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],gu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],w1=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],TA=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],PE=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],hd=[],lo=[],ml=[],RE=1,a0=2,xu=[],li=[];yt("UpsampleRgbLinePair",we,3),yt("UpsampleBgrLinePair",$e,3),yt("UpsampleRgbaLinePair",Xr,4),yt("UpsampleBgraLinePair",wn,4),yt("UpsampleArgbLinePair",Or,4),yt("UpsampleRgba4444LinePair",Ut,2),yt("UpsampleRgb565LinePair",ot,2);var md=S.UpsampleRgbLinePair,bf=S.UpsampleBgrLinePair,vu=S.UpsampleRgbaLinePair,sx=S.UpsampleBgraLinePair,ix=S.UpsampleArgbLinePair,s0=S.UpsampleRgba4444LinePair,ox=S.UpsampleRgb565LinePair,bu=16,Qs=1<<bu-1,yf=-227,lx=482,Tj=6,LE=0,Ij=s(256),Hs=s(256),E1=s(256),ip=s(256),op=s(lx-yf),N1=s(lx-yf);ta("YuvToRgbRow",we,3),ta("YuvToBgrRow",$e,3),ta("YuvToRgbaRow",Xr,4),ta("YuvToBgraRow",wn,4),ta("YuvToArgbRow",Or,4),ta("YuvToRgba4444Row",Ut,2),ta("YuvToRgb565Row",ot,2);var IA=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],pd=[0,2,8],Fj=[8,7,6,4,4,2,2,2,1,1,1,1],ME=1;this.WebPDecodeRGBA=function(F,H,re,oe,Ae){var ge=r0,xe=new ad,ye=new la;xe.ba=ye,ye.S=ge,ye.width=[ye.width],ye.height=[ye.height];var Ce=ye.width,Te=ye.height,Qe=new Ba;if(Qe==null||F==null)var st=2;else t(Qe!=null),st=Au(F,H,re,Qe.width,Qe.height,Qe.Pd,Qe.Qd,Qe.format,null);if(st!=0?Ce=0:(Ce!=null&&(Ce[0]=Qe.width[0]),Te!=null&&(Te[0]=Qe.height[0]),Ce=1),Ce){ye.width=ye.width[0],ye.height=ye.height[0],oe!=null&&(oe[0]=ye.width),Ae!=null&&(Ae[0]=ye.height);e:{if(oe=new Ls,(Ae=new af).data=F,Ae.w=H,Ae.ha=re,Ae.kd=1,H=[0],t(Ae!=null),((F=Au(Ae.data,Ae.w,Ae.ha,null,null,null,H,null,Ae))==0||F==7)&&H[0]&&(F=4),(H=F)==0){if(t(xe!=null),oe.data=Ae.data,oe.w=Ae.w+Ae.offset,oe.ha=Ae.ha-Ae.offset,oe.put=vt,oe.ac=Je,oe.bc=Et,oe.ma=xe,Ae.xa){if((F=ft())==null){xe=1;break e}if(function(tt,We){var Bt=[0],gt=[0],He=[0];t:for(;;){if(tt==null)return 0;if(We==null)return tt.a=2,0;if(tt.l=We,tt.a=0,G(tt.m,We.data,We.w,We.ha),!bt(tt.m,Bt,gt,He)){tt.a=3;break t}if(tt.xb=a0,We.width=Bt[0],We.height=gt[0],!qe(Bt[0],gt[0],1,tt,null))break t;return 1}return t(tt.a!=0),0}(F,oe)){if(oe=(H=yA(oe.width,oe.height,xe.Oa,xe.ba))==0){t:{oe=F;r:for(;;){if(oe==null){oe=0;break t}if(t(oe.s.yc!=null),t(oe.s.Ya!=null),t(0<oe.s.Wb),t((re=oe.l)!=null),t((Ae=re.ma)!=null),oe.xb!=0){if(oe.ca=Ae.ba,oe.tb=Ae.tb,t(oe.ca!=null),!of(Ae.Oa,re,rp)){oe.a=2;break r}if(!rt(oe,re.width)||re.da)break r;if((re.da||Pr(oe.ca.S))&&Ke(),11>oe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),oe.ca.f.kb.F!=null&&Ke()),oe.Pb&&0<oe.s.ua&&oe.s.vb.X==null&&!ke(oe.s.vb,oe.s.Wa.Xa)){oe.a=1;break r}oe.xb=0}if(!Fe(oe,oe.V,oe.Ba,oe.c,oe.i,re.o,Ie))break r;Ae.Dc=oe.Ma,oe=1;break t}t(oe.a!=0),oe=0}oe=!oe}oe&&(H=F.a)}else H=F.a}else{if((F=new wi)==null){xe=1;break e}if(F.Fa=Ae.na,F.P=Ae.P,F.qc=Ae.Sa,Zd(F,oe)){if((H=yA(oe.width,oe.height,xe.Oa,xe.ba))==0){if(F.Aa=0,re=xe.Oa,t((Ae=F)!=null),re!=null){if(0<(Ce=0>(Ce=re.Md)?0:100<Ce?255:255*Ce/100)){for(Te=Qe=0;4>Te;++Te)12>(st=Ae.pb[Te]).lc&&(st.ia=Ce*Fj[0>st.lc?0:st.lc]>>3),Qe|=st.ia;Qe&&(alert("todo:VP8InitRandom"),Ae.ia=1)}Ae.Ga=re.Id,100<Ae.Ga?Ae.Ga=100:0>Ae.Ga&&(Ae.Ga=0)}mA(F,oe)||(H=F.a)}}else H=F.a}H==0&&xe.Oa!=null&&xe.Oa.fd&&(H=Jh(xe.ba))}xe=H}ge=xe!=0?null:11>ge?ye.f.RGBA.eb:ye.f.kb.y}else ge=null;return ge};var UE=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(S,B){for(var M="",R=0;R<4;R++)M+=String.fromCharCode(S[B++]);return M}function d(S,B){return(S[B+0]<<0|S[B+1]<<8|S[B+2]<<16)>>>0}function f(S,B){return(S[B+0]<<0|S[B+1]<<8|S[B+2]<<16|S[B+3]<<24)>>>0}new c;var h=[0],m=[0],g=[],x=new c,v=e,y=function(S,B){var M={},R=0,k=!1,D=0,L=0;if(M.frames=[],!function(U,z,J,te){for(var se=0;se<te;se++)if(U[z+se]!=J.charCodeAt(se))return!0;return!1}(S,B,"RIFF",4)){var Z,V;for(f(S,B+=4),B+=8;B<S.length;){var q=u(S,B),G=f(S,B+=4);B+=4;var K=G+(1&G);switch(q){case"VP8 ":case"VP8L":M.frames[R]===void 0&&(M.frames[R]={}),(P=M.frames[R]).src_off=k?L:B-8,P.src_size=D+G+8,R++,k&&(k=!1,D=0,L=0);break;case"VP8X":(P=M.header={}).feature_flags=S[B];var ee=B+4;P.canvas_width=1+d(S,ee),ee+=3,P.canvas_height=1+d(S,ee),ee+=3;break;case"ALPH":k=!0,D=K+8,L=B-8;break;case"ANIM":(P=M.header).bgcolor=f(S,B),ee=B+4,P.loop_count=(Z=S)[(V=ee)+0]<<0|Z[V+1]<<8,ee+=2;break;case"ANMF":var W,P;(P=M.frames[R]={}).offset_x=2*d(S,B),B+=3,P.offset_y=2*d(S,B),B+=3,P.width=1+d(S,B),B+=3,P.height=1+d(S,B),B+=3,P.duration=d(S,B),B+=3,W=S[B++],P.dispose=1&W,P.blend=W>>1&1}q!="ANMF"&&(B+=K)}return M}}(v,0);y.response=v,y.rgbaoutput=!0,y.dataurl=!1;var w=y.header?y.header:null,_=y.frames?y.frames:null;if(w){w.loop_counter=w.loop_count,h=[w.canvas_height],m=[w.canvas_width];for(var T=0;T<_.length&&_[T].blend!=0;T++);}var j=_[0],I=x.WebPDecodeRGBA(v,j.src_off,j.src_size,m,h);j.rgba=I,j.imgwidth=m[0],j.imgheight=h[0];for(var E=0;E<m[0]*h[0]*4;E++)g[E]=I[E];return this.width=m,this.height=h,this.data=g,this}(function(e){var t=function(){return typeof BO=="function"},r=function(h,m,g,x){var v=4,y=o;switch(x){case e.image_compression.FAST:v=1,y=s;break;case e.image_compression.MEDIUM:v=6,y=l;break;case e.image_compression.SLOW:v=9,y=c}h=n(h,m,g,y);var w=BO(h,{level:v});return e.__addimage__.arrayBufferToBinaryString(w)},n=function(h,m,g,x){for(var v,y,w,_=h.length/m,T=new Uint8Array(h.length+_),j=d(),I=0;I<_;I+=1){if(w=I*m,v=h.subarray(w,w+m),x)T.set(x(v,g,y),w+I);else{for(var E,S=j.length,B=[];E<S;E+=1)B[E]=j[E](v,g,y);var M=f(B.concat());T.set(B[M],w+I)}y=v}return T},a=function(h){var m=Array.apply([],h);return m.unshift(0),m},s=function(h,m){var g,x=[],v=h.length;x[0]=1;for(var y=0;y<v;y+=1)g=h[y-m]||0,x[y+1]=h[y]-g+256&255;return x},o=function(h,m,g){var x,v=[],y=h.length;v[0]=2;for(var w=0;w<y;w+=1)x=g&&g[w]||0,v[w+1]=h[w]-x+256&255;return v},l=function(h,m,g){var x,v,y=[],w=h.length;y[0]=3;for(var _=0;_<w;_+=1)x=h[_-m]||0,v=g&&g[_]||0,y[_+1]=h[_]+256-(x+v>>>1)&255;return y},c=function(h,m,g){var x,v,y,w,_=[],T=h.length;_[0]=4;for(var j=0;j<T;j+=1)x=h[j-m]||0,v=g&&g[j]||0,y=g&&g[j-m]||0,w=u(x,v,y),_[j+1]=h[j]-w+256&255;return _},u=function(h,m,g){if(h===m&&m===g)return h;var x=Math.abs(m-g),v=Math.abs(h-g),y=Math.abs(h+m-g-g);return x<=v&&x<=y?h:v<=y?m:g},d=function(){return[a,s,o,l,c]},f=function(h){var m=h.map(function(g){return g.reduce(function(x,v){return x+Math.abs(v)},0)});return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(h,m,g,x){var v,y,w,_,T,j,I,E,S,B,M,R,k,D,L,Z=this.decode.FLATE_DECODE,V="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(w=new XWe(h)).imgData,y=w.bits,v=w.colorSpace,T=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){S=(E=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,M=new Uint8Array(S*w.colors),B=new Uint8Array(S);var q,G=w.pixelBitlength-w.bits;for(D=0,L=0;D<S;D++){for(k=E[D],q=0;q<G;)M[L++]=k>>>q&255,q+=w.bits;B[D]=k>>>q&255}}if(w.bits===16){S=(E=new Uint32Array(w.decodePixels().buffer)).length,M=new Uint8Array(S*(32/w.pixelBitlength)*w.colors),B=new Uint8Array(S*(32/w.pixelBitlength)),R=w.colors>1,D=0,L=0;for(var K=0;D<S;)k=E[D++],M[L++]=k>>>0&255,R&&(M[L++]=k>>>16&255,k=E[D++],M[L++]=k>>>0&255),B[K++]=k>>>16&255;y=8}x!==e.image_compression.NONE&&t()?(h=r(M,w.width*w.colors,w.colors,x),I=r(B,w.width,1,x)):(h=M,I=B,Z=void 0)}if(w.colorType===3&&(v=this.color_spaces.INDEXED,j=w.palette,w.transparency.indexed)){var ee=w.transparency.indexed,W=0;for(D=0,S=ee.length;D<S;++D)W+=ee[D];if((W/=255)===S-1&&ee.indexOf(0)!==-1)_=[ee.indexOf(0)];else if(W!==S){for(E=w.decodePixels(),B=new Uint8Array(E.length),D=0,S=E.length;D<S;D++)B[D]=ee[E[D]];I=r(B,w.width,1)}}var P=function(U){var z;switch(U){case e.image_compression.FAST:z=11;break;case e.image_compression.MEDIUM:z=13;break;case e.image_compression.SLOW:z=14;break;default:z=12}return z}(x);return Z===this.decode.FLATE_DECODE&&(V="/Predictor "+P+" "),V+="/Colors "+T+" /BitsPerComponent "+y+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(I&&this.__addimage__.isArrayBuffer(I)||this.__addimage__.isArrayBufferView(I))&&(I=this.__addimage__.arrayBufferToBinaryString(I)),{alias:g,data:h,index:m,filter:Z,decodeParameters:V,transparency:_,palette:j,sMask:I,predictor:P,width:w.width,height:w.height,bitsPerComponent:y,colorSpace:v}}}})(vr.API),function(e){e.processGIF89A=function(t,r,n,a){var s=new YWe(t),o=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new BI(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(vr.API),Cd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Cd.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Ca.log("bit decode error:"+r)}},Cd.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Cd.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Cd.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},Cd.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,l=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=e}},Cd.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/t*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=e}},Cd.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},Cd.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},Cd.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var s=new Cd(t,!1),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new BI(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(vr.API),RK.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var s=new RK(t),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new BI(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(vr.API),vr.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],h=n[u+2],m=n[u+3];s[l++]=d,s[l++]=f,s[l++]=h,o[c++]=m}var g=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},vr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Mx=vr.API,NC=Mx.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,h=0,m=e.length,g=0,x=l[0]||c,v=[];for(r=0;r<m;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?v.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/s)||0)/1e3):(h=f&&ga(u[n])==="object"&&!isNaN(parseInt(u[n][g],10))?u[n][g]/d:0,v.push((l[n]||x)/c+h)),g=n;return v},FK=Mx.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Mx.processArabic&&(e=Mx.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:NC.apply(this,arguments).reduce(function(s,o){return s+o},0)},OK=function(e,t,r,n){for(var a=[],s=0,o=e.length,l=0;s!==o&&l+t[s]<r;)l+=t[s],s++;a.push(e.slice(0,s));var c=s;for(l=0;s!==o;)l+t[s]>n&&(a.push(e.slice(c,s)),l=0,c=s),l+=t[s],s++;return c!==s&&a.push(e.slice(c,s)),a},DK=function(e,t,r){r||(r={});var n,a,s,o,l,c,u,d=[],f=[d],h=r.textIndent||0,m=0,g=0,x=e.split(" "),v=NC.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?x[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),w=[];x.map(function(T){(T=T.split(/\s*\n/)).length>1?w=w.concat(T.map(function(j,I){return(I&&j.length?`
`:"")+j})):w.push(T[0])}),x=w,c=FK.apply(this,[y,r])}for(s=0,o=x.length;s<o;s++){var _=0;if(n=x[s],c&&n[0]==`
`&&(n=n.substr(1),_=1),h+m+(g=(a=NC.apply(this,[n,r])).reduce(function(T,j){return T+j},0))>t||_){if(g>t){for(l=OK.apply(this,[n,a,t-(h+m),t]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);g=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(T,j){return T+j},0)}else d=[n];f.push(d),h=g+c,m=v}else d.push(n),h+=m+g,m=v}return u=c?function(T,j){return(j?y:"")+T.join(" ")}:function(T){return T.join(" ")},f.map(u)},Mx.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(DK.apply(this,[n[l],o,s]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var s=function(f){return"0x"+parseInt(f,10).toString(16)},o=e.__fontmetrics__.compress=function(f){var h,m,g,x,v=["{"];for(var y in f){if(h=f[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=s(y).slice(2)).slice(0,-1)+n[m.slice(-1)]),typeof h=="number")h<0?(g=s(h).slice(3),x="-"):(g=s(h).slice(2),x=""),g=x+g.slice(0,-1)+n[g.slice(-1)];else{if(ga(h)!=="object")throw new Error("Don't know what to do with value type "+ga(h)+".");g=o(h)}v.push(m+g)}return v.push("}"),v.join("")},l=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,g,x,v={},y=1,w=v,_=[],T="",j="",I=f.length-1,E=1;E<I;E+=1)(x=f[E])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(x):x=="{"?(_.push([w,g]),w={},g=void 0):x=="}"?((m=_.pop())[0][m[1]]=w,g=void 0,w=m[0]):x=="-"?y=-1:g===void 0?r.hasOwnProperty(x)?(T+=r[x],g=parseInt(T,16)*y,y=1,T=""):T+=x:r.hasOwnProperty(x)?(j+=r[x],w[g]=parseInt(j,16)*y,y=1,g=void 0,j=""):j+=x;return v},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var h=f.font,m=d.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var g=u.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(vr.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(kw(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}(vr),function(e){function t(){return(Qr.canvg?Promise.resolve(Qr.canvg):ac(()=>import("./index.es-C34X4es7.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}vr.API.addSvgAsImage=function(r,n,a,s,o,l,c,u){if(isNaN(n)||isNaN(a))throw Ca.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Ca.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=o;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(g){return g.fromString(f,r,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),n,a,s,o,c,u)})}}(),vr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},vr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,f=0;function h(g,x){var v,y=!1;for(v=0;v<g.length;v+=1)g[v]===x&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(f=0;f<m;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(ga(e)==="object"){for(a in e)if(s=e[a],h(l,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&h(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,x=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?x.push("/"+g+" /"+r[g].value):x.push("/"+g+" "+r[g].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(vr.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=s.length;f<h;++f){if(l=o.metadata.characterToGlyph(s.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(s){var o,l,c,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,h=(l=Object.keys(s).sort(function(m,g){return m-g})).length;f<h;f++)o=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,h=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",g=0;g<h.length;g++)m+=String.fromCharCode(h[g]);var x=u();d({data:m,addLength1:!0,objectId:x}),c("endobj");var v=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var y=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+dv(l.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var w=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+dv(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+v+" 0 R"),c("/BaseFont /"+dv(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+w+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,h="",m=0;m<f.length;m++)h+=String.fromCharCode(f[m]);var g=u();d({data:h,addLength1:!0,objectId:g}),c("endobj");var x=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var v=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+dv(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+dv(l.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var o,l=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},h=f.pdfEscape,m=f.activeFontKey,g=f.fonts,x=m,v="",y=0,w="",_=g[x].encoding;if(g[x].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(w=l,x=m,Array.isArray(l)&&(w=l[0]),y=0;y<w.length;y+=1)g[x].metadata.hasOwnProperty("cmap")&&(o=g[x].metadata.cmap.unicode.codeMap[w[y].charCodeAt(0)]),o||w[y].charCodeAt(0)<256&&g[x].metadata.hasOwnProperty("Unicode")?v+=w[y]:v+="";var T="";return parseInt(x.slice(1))<14||_==="WinAnsiEncoding"?T=h(v,x).split("").map(function(j){return j.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(T=r(v,g[x])),f.isHex=!0,{text:T,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(s){var o=s.text||"",l=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([a(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(a(Object.assign({},c,{text:o[u]})).text);s.text=l}else s.text=a(Object.assign({},c,{text:o})).text}])}(vr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(vr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,s,o,l,c,u,d,f=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,_=0;this.__bidiEngine__={};var T=function(R){var k=R.charCodeAt(),D=k>>8,L=x[D];return L!==void 0?f[256*L+(255&k)]:D===252||D===253?"AL":y.test(D)?"L":D===8?"R":"N"},j=function(R){for(var k,D=0;D<R.length;D++){if((k=T(R.charAt(D)))==="L")return!1;if(k==="R")return!0}return!1},I=function(R,k,D,L){var Z,V,q,G,K=k[L];switch(K){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(K="AN");break;case"AL":w=!0,K="R";break;case"WS":K="N";break;case"CS":L<1||L+1>=k.length||(Z=D[L-1])!=="EN"&&Z!=="AN"||(V=k[L+1])!=="EN"&&V!=="AN"?K="N":w&&(V="AN"),K=V===Z?V:"N";break;case"ES":K=(Z=L>0?D[L-1]:"B")==="EN"&&L+1<k.length&&k[L+1]==="EN"?"EN":"N";break;case"ET":if(L>0&&D[L-1]==="EN"){K="EN";break}if(w){K="N";break}for(q=L+1,G=k.length;q<G&&k[q]==="ET";)q++;K=q<G&&k[q]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(G=k.length,q=L+1;q<G&&k[q]==="NSM";)q++;if(q<G){var ee=R[L],W=ee>=1425&&ee<=2303||ee===64286;if(Z=k[q],W&&(Z==="R"||Z==="AL")){K="R";break}}}K=L<1||(Z=k[L-1])==="B"?"N":D[L-1];break;case"B":w=!1,a=!0,K=_;break;case"S":s=!0,K="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":K="N"}return K},E=function(R,k,D){var L=R.split("");return D&&S(L,D,{hiLevel:_}),L.reverse(),k&&k.reverse(),L.join("")},S=function(R,k,D){var L,Z,V,q,G,K=-1,ee=R.length,W=0,P=[],U=_?m:h,z=[];for(w=!1,a=!1,s=!1,Z=0;Z<ee;Z++)z[Z]=T(R[Z]);for(V=0;V<ee;V++){if(G=W,P[V]=I(R,z,P,V),L=240&(W=U[G][g[P[V]]]),W&=15,k[V]=q=U[W][5],L>0)if(L===16){for(Z=K;Z<V;Z++)k[Z]=1;K=-1}else K=-1;if(U[W][6])K===-1&&(K=V);else if(K>-1){for(Z=K;Z<V;Z++)k[Z]=q;K=-1}z[V]==="B"&&(k[V]=0),D.hiLevel|=q}s&&function(J,te,se){for(var ie=0;ie<se;ie++)if(J[ie]==="S"){te[ie]=_;for(var ce=ie-1;ce>=0&&J[ce]==="WS";ce--)te[ce]=_}}(z,k,ee)},B=function(R,k,D,L,Z){if(!(Z.hiLevel<R)){if(R===1&&_===1&&!a)return k.reverse(),void(D&&D.reverse());for(var V,q,G,K,ee=k.length,W=0;W<ee;){if(L[W]>=R){for(G=W+1;G<ee&&L[G]>=R;)G++;for(K=W,q=G-1;K<q;K++,q--)V=k[K],k[K]=k[q],k[q]=V,D&&(V=D[K],D[K]=D[q],D[q]=V);W=G}W++}}},M=function(R,k,D){var L=R.split(""),Z={hiLevel:_};return D||(D=[]),S(L,D,Z),function(V,q,G){if(G.hiLevel!==0&&d)for(var K,ee=0;ee<V.length;ee++)q[ee]===1&&(K=v.indexOf(V[ee]))>=0&&(V[ee]=v[K+1])}(L,D,Z),B(2,L,k,D,Z),B(1,L,k,D,Z),L.join("")};return this.__bidiEngine__.doBidiReorder=function(R,k,D){if(function(Z,V){if(V)for(var q=0;q<Z.length;q++)V[q]=q;l===void 0&&(l=j(Z)),u===void 0&&(u=j(Z))}(R,k),o||!c||u)if(o&&c&&l^u)_=l?1:0,R=E(R,k,D);else if(!o&&c&&u)_=l?1:0,R=M(R,k,D),R=E(R,k);else if(!o||l||c||u){if(o&&!c&&l^u)R=E(R,k),l?(_=0,R=M(R,k,D)):(_=1,R=M(R,k,D),R=E(R,k));else if(o&&l&&!c&&u)_=1,R=M(R,k,D),R=E(R,k);else if(!o&&!c&&l^u){var L=d;l?(_=1,R=M(R,k,D),_=0,d=!1,R=M(R,k,D),d=L):(_=0,R=M(R,k,D),R=E(R,k),_=1,d=!1,R=M(R,k,D),d=L,R=E(R,k))}}else _=0,R=M(R,k,D);else _=l?1:0,R=M(R,k,D);return R},this.__bidiEngine__.setOptions=function(R){R&&(o=R.isInputVisual,c=R.isOutputVisual,l=R.isInputRtl,u=R.isOutputRtl,d=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text,s=(n.x,n.y,n.options||{}),o=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(vr),vr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Dm(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new fXe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new JWe(this.contents),this.head=new eXe(this),this.name=new sXe(this),this.cmap=new Wle(this),this.toUnicode={},this.hhea=new tXe(this),this.maxp=new iXe(this),this.hmtx=new oXe(this),this.post=new nXe(this),this.os2=new rXe(this),this.loca=new dXe(this),this.glyf=new lXe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,s,o,l;for(o=0,s=0,l=(t=""+t).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=t.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Xd,Dm=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,s,o,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,s;for(s=[],n=0,a=t.length;n<a;n++)r=t[n],s.push(this.writeByte(r));return s},e}(),JWe=function(){var e;function t(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,s,o,l,c,u,d,f,h,m,g,x;for(x in m=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(m)/c),o=Math.floor(f/c),d=16*m-f,(a=new Dm).writeInt(this.scalarType),a.writeShort(m),a.writeShort(f),a.writeShort(o),a.writeShort(d),s=16*m,u=a.pos+s,l=null,g=[],r)for(h=r[x],a.writeString(x),a.writeInt(e(h)),a.writeInt(u),a.writeInt(h.length),g=g.concat(h),x==="head"&&(l=u),u+=h.length;u%4;)g.push(0),u++;return a.write(g),n=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(n),a.data},e=function(r){var n,a,s,o;for(r=Xle.call(r);r.length%4;)r.push(0);for(s=new Dm(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=s.readUInt32();return 4294967295&a},t}(),ZWe={}.hasOwnProperty,dA=function(e,t){for(var r in t)ZWe.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Xd=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var eXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return dA(t,Xd),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new Dm).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),LK=function(){function e(t,r){var n,a,s,o,l,c,u,d,f,h,m,g,x,v,y,w,_;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),h=m/2,t.pos+=6,s=function(){var T,j;for(j=[],c=T=0;0<=h?T<h:T>h;c=0<=h?++T:--T)j.push(t.readUInt16());return j}(),t.pos+=2,x=function(){var T,j;for(j=[],c=T=0;0<=h?T<h:T>h;c=0<=h?++T:--T)j.push(t.readUInt16());return j}(),u=function(){var T,j;for(j=[],c=T=0;0<=h?T<h:T>h;c=0<=h?++T:--T)j.push(t.readUInt16());return j}(),d=function(){var T,j;for(j=[],c=T=0;0<=h?T<h:T>h;c=0<=h?++T:--T)j.push(t.readUInt16());return j}(),a=(this.length-t.pos+this.offset)/2,l=function(){var T,j;for(j=[],c=T=0;0<=a?T<a:T>a;c=0<=a?++T:--T)j.push(t.readUInt16());return j}(),c=y=0,_=s.length;y<_;c=++y)for(v=s[c],n=w=g=x[c];g<=v?w<=v:w>=v;n=g<=v?++w:--w)d[c]===0?o=n+u[c]:(o=l[d[c]/2+(n-g)-(h-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}t.pos=f}return e.encode=function(t,r){var n,a,s,o,l,c,u,d,f,h,m,g,x,v,y,w,_,T,j,I,E,S,B,M,R,k,D,L,Z,V,q,G,K,ee,W,P,U,z,J,te,se,ie,ce,de,Be,ae;switch(L=new Dm,o=Object.keys(t).sort(function(Se,ke){return Se-ke}),r){case"macroman":for(x=0,v=function(){var Se=[];for(g=0;g<256;++g)Se.push(0);return Se}(),w={0:0},s={},Z=0,K=o.length;Z<K;Z++)w[ce=t[a=o[Z]]]==null&&(w[ce]=++x),s[a]={old:t[a],new:w[t[a]]},v[a]=w[t[a]];return L.writeUInt16(1),L.writeUInt16(0),L.writeUInt32(12),L.writeUInt16(0),L.writeUInt16(262),L.writeUInt16(0),L.write(v),{charMap:s,subtable:L.data,maxGlyphID:x+1};case"unicode":for(k=[],f=[],_=0,w={},n={},y=u=null,V=0,ee=o.length;V<ee;V++)w[j=t[a=o[V]]]==null&&(w[j]=++_),n[a]={old:j,new:w[j]},l=w[j]-a,y!=null&&l===u||(y&&f.push(y),k.push(a),u=l),y=a;for(y&&f.push(y),f.push(65535),k.push(65535),M=2*(B=k.length),S=2*Math.pow(Math.log(B)/Math.LN2,2),h=Math.log(S/2)/Math.LN2,E=2*B-S,c=[],I=[],m=[],g=q=0,W=k.length;q<W;g=++q){if(R=k[g],d=f[g],R===65535){c.push(0),I.push(0);break}if(R-(D=n[R].new)>=32768)for(c.push(0),I.push(2*(m.length+B-g)),a=G=R;R<=d?G<=d:G>=d;a=R<=d?++G:--G)m.push(n[a].new);else c.push(D-R),I.push(0)}for(L.writeUInt16(3),L.writeUInt16(1),L.writeUInt32(12),L.writeUInt16(4),L.writeUInt16(16+8*B+2*m.length),L.writeUInt16(0),L.writeUInt16(M),L.writeUInt16(S),L.writeUInt16(h),L.writeUInt16(E),se=0,P=f.length;se<P;se++)a=f[se],L.writeUInt16(a);for(L.writeUInt16(0),ie=0,U=k.length;ie<U;ie++)a=k[ie],L.writeUInt16(a);for(de=0,z=c.length;de<z;de++)l=c[de],L.writeUInt16(l);for(Be=0,J=I.length;Be<J;Be++)T=I[Be],L.writeUInt16(T);for(ae=0,te=m.length;ae<te;ae++)x=m[ae],L.writeUInt16(x);return{charMap:n,subtable:L.data,maxGlyphID:_+1}}},e}(),Wle=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return dA(t,Xd),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new LK(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=LK.encode(r,n),(s=new Dm).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},t}(),tXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return dA(t,Xd),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),rXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return dA(t,Xd),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),nXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return dA(t,Xd),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(a=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var l,c,u;for(u=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)u.push(r.readUInt32());return u}).call(this)}},t}(),aXe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},sXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return dA(t,Xd),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,s,o,l,c,u,d,f,h,m;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),a=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},o=f=0,h=a.length;f<h;o=++f)s=a[o],r.pos=s.offset,d=r.readString(s.length),l=new aXe(d,s),u[m=s.nameID]==null&&(u[m]=[]),u[s.nameID].push(l);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),iXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return dA(t,Xd),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),oXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return dA(t,Xd),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,s,o,l,c,u;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)f.push(r.readInt16());return f}(),this.widths=(function(){var d,f,h,m;for(m=[],d=0,f=(h=this.metrics).length;d<f;d++)o=h[d],m.push(o.advance);return m}).call(this),a=this.widths[this.widths.length-1],u=[],n=l=0;0<=s?l<s:l>s;n=0<=s?++l:--l)u.push(this.widths.push(a));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),Xle=[].slice,lXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return dA(t,Xd),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,s,o,l,c,u,d,f,h;return r in this.cache?this.cache[r]:(o=this.file.loca,n=this.file.contents,a=o.indexOf(r),(s=o.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,l=(c=new Dm(n.read(s))).readShort(),d=c.readShort(),h=c.readShort(),u=c.readShort(),f=c.readShort(),this.cache[r]=l===-1?new uXe(c,d,h,u,f):new cXe(c,l,d,h,u,f),this.cache[r]))},t.prototype.encode=function(r,n,a){var s,o,l,c,u;for(l=[],o=[],c=0,u=n.length;c<u;c++)s=r[n[c]],o.push(l.length),s&&(l=l.concat(s.encode(a)));return o.push(l.length),{table:l,offsets:o}},t}(),cXe=function(){function e(t,r,n,a,s,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),uXe=function(){function e(t,r,n,a,s){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Dm(Xle.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),dXe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return dA(t,Xd),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,o;for(o=[],a=0,s=this.length;a<s;a+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],a=0,s=this.length;a<s;a+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,o=0,l=0;l<a.length;++l)if(a[l]=s,o<n.length&&n[o]==l){++o,a[l]=s;var c=this.offsets[l],u=this.offsets[l+1]-c;u>0&&(s+=u)}for(var d=new Array(4*a.length),f=0;f<a.length;++f)d[4*f+3]=255&a[f],d[4*f+2]=(65280&a[f])>>8,d[4*f+1]=(16711680&a[f])>>16,d[4*f]=(4278190080&a[f])>>24;return d},t}(),fXe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,s,o,l,c;for(a={},o=0,l=t.length;o<l;o++)a[s=t[o]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},e.prototype.encode=function(t,r){var n,a,s,o,l,c,u,d,f,h,m,g,x,v,y;for(a in n=Wle.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},y=n.charMap)m[(c=y[a]).old]=c.new;for(g in h=n.maxGlyphID,o)g in m||(m[g]=h++);return d=function(w){var _,T;for(_ in T={},w)T[w[_]]=_;return T}(m),f=Object.keys(d).sort(function(w,_){return w-_}),x=function(){var w,_,T;for(T=[],w=0,_=f.length;w<_;w++)l=f[w],T.push(d[l]);return T}(),s=this.font.glyf.encode(o,x,m),u=this.font.loca.encode(s.offsets,x),v={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},e}();vr.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,s,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)o=r[a],s.push("/"+a+" "+t.convert(o));return s.push(">>"),s.join(`
`)}return""+r},t}();function Yle(e,t,r,n,a){n=n||{};var s=1.15,o=a.internal.scaleFactor,l=a.internal.getFontSize()/o,c=a.getLineHeightFactor?a.getLineHeightFactor():s,u=l*c,d=/\r\n|\r|\n/g,f="",h=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,h=f.length||1),r+=l*(2-s),n.valign==="middle"?r-=h/2*u:n.valign==="bottom"&&(r-=h*u),n.halign==="center"||n.halign==="right"){var m=l;if(n.halign==="center"&&(m*=.5),f&&h>=1){for(var g=0;g<f.length;g++)a.text(f[g],t-a.getStringUnitWidth(f[g])*m,r),r+=u;return a}t-=a.getStringUnitWidth(e)*m}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var MK={},$v=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:MK=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,s;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,s){return this.jsPDFDocument.rect(t,r,n,a,s)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return MK||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),RO=function(e,t){return RO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},RO(e,t)};function Jle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");RO(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Zle=function(e){Jle(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function AXe(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function hXe(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function IS(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return a}function ece(e,t,r,n){var a=t.settings.tableLineWidth,s=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:s});var o=tce(a,!1);o&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,o)}function tce(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function K4(e,t){var r,n,a,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(s=e.bottom)!==null&&s!==void 0?s:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function rce(e,t){var r=K4(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function mXe(e,t,r,n,a){var s={},o=1.3333333333333333,l=TI(t,function(_){return a.getComputedStyle(_).backgroundColor});l!=null&&(s.fillColor=l);var c=TI(t,function(_){return a.getComputedStyle(_).color});c!=null&&(s.textColor=c);var u=gXe(n,r);u&&(s.cellPadding=u);var d="borderTopColor",f=o*r,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var m=(parseFloat(h)||0)/f;m&&(s.lineWidth=m)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var g=TI(t,function(_){return a.getComputedStyle(_)[d]});g!=null&&(s.lineColor=g);var x=["left","right","center","justify"];x.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),x=["middle","bottom","top"],x.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var v=parseInt(n.fontSize||"");isNaN(v)||(s.fontSize=v/o);var y=pXe(n);y&&(s.fontStyle=y);var w=(n.fontFamily||"").toLowerCase();return e.indexOf(w)!==-1&&(s.font=w),s}function pXe(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function TI(e,t){var r=nce(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function nce(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:nce(e.parentElement,t):r}function gXe(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,s=r.map(function(l){return parseInt(l||"0")/n}),o=K4(s,0);return a>o.top&&(o.top=a),a>o.bottom&&(o.bottom=a),o}function ace(e,t,r,n,a){var s,o;n===void 0&&(n=!1),a===void 0&&(a=!1);var l;typeof t=="string"?l=r.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],h=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:h};for(var m=0;m<l.rows.length;m++){var g=l.rows[m],x=(o=(s=g==null?void 0:g.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),v=xXe(c,u,r,g,n,a);v&&(x==="thead"?d.push(v):x==="tfoot"?h.push(v):f.push(v))}return{head:d,body:f,foot:h}}function xXe(e,t,r,n,a,s){for(var o=new Zle(n),l=0;l<n.cells.length;l++){var c=n.cells[l],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;s&&(d=mXe(e,c,t,u,r)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:vXe(c)})}}var f=r.getComputedStyle(n);if(o.length>0&&(a||f.display!=="none"))return o}function vXe(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function bXe(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function oh(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])}return s}function sce(e,t){var r=new $v(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();bXe(a,n,t);var s=oh({},a,n,t),o;typeof window<"u"&&(o=window);var l=yXe(a,n,t),c=wXe(a,n,t),u=EXe(r,s),d=CXe(r,s,o);return{id:t.tableId,content:d,hooks:c,styles:l,settings:u}}function yXe(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];n.columnStyles=oh({},u,d,f)}else{var h=[e,t,r],m=h.map(function(g){return g[c]||{}});n[c]=oh({},m[0],m[1],m[2])}},s=0,o=Object.keys(n);s<o.length;s++){var l=o[s];a(l)}return n}function wXe(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=n;s<o.length;s++){var l=o[s];l.didParseCell&&a.didParseCell.push(l.didParseCell),l.willDrawCell&&a.willDrawCell.push(l.willDrawCell),l.didDrawCell&&a.didDrawCell.push(l.didDrawCell),l.willDrawPage&&a.willDrawPage.push(l.willDrawPage),l.didDrawPage&&a.didDrawPage.push(l.didDrawPage)}return a}function EXe(e,t){var r,n,a,s,o,l,c,u,d,f,h,m,g=K4(t.margin,40/e.scaleFactor()),x=(r=NXe(e,t.startY))!==null&&r!==void 0?r:g.top,v;t.showFoot===!0?v="everyPage":t.showFoot===!1?v="never":v=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var w=(s=t.useCss)!==null&&s!==void 0?s:!1,_=t.theme||(w?"plain":"striped"),T=!!t.horizontalPageBreak,j=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:w,theme:_,startY:x,margin:g,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:v,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:T,horizontalPageBreakRepeat:j,horizontalPageBreakBehaviour:(m=t.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function NXe(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),s=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;s=o===a}return typeof t=="number"?t:(t==null||t===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function CXe(e,t,r){var n=t.head||[],a=t.body||[],s=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(r){var l=ace(e,t.html,r,o,t.useCss)||{};n=l.head||n,a=l.body||n,s=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||_Xe(n,a,s);return{columns:c,head:n,body:a,foot:s}}function _Xe(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,l;Array.isArray(n)?l=n[parseInt(s)]:l=n[s],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var LO=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),SXe=function(e){Jle(t,e);function t(r,n,a,s,o,l){var c=e.call(this,r,n,l)||this;return c.cell=a,c.row=s,c.column=o,c.section=s.section,c}return t}(LO),kXe=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,s,o){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new SXe(t,this,n,a,s,o),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new LO(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new LO(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),ice=function(){function e(t,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof Zle&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,s){var o=n.cells[s.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),u=c+l;return u>a?u:a},0)},e}(),oce=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=K4(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),jXe=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var s=a[n],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},e}();function BXe(e,t){TXe(e,t);var r=[],n=0;t.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(t);o?s.width=o:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=MO(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=MO(r,a,function(s){return s.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),FXe(t),OXe(t,e),IXe(t)}function TXe(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=rce(e,t);t.allRows().forEach(function(s){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,s,c,null);var f=u.padding("horizontal");u.contentWidth=IS(u.text,u.styles,e)+f;var h=IS(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=h+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var m=10/r;u.minWidth=u.styles.minCellWidth||m,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(s){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function MO(e,t,r){for(var n=t,a=e.reduce(function(m,g){return m+g.wrappedWidth},0),s=0;s<e.length;s++){var o=e[s],l=o.wrappedWidth/a,c=n*l,u=o.width+c,d=r(o),f=u<d?d:u;t-=f-o.width,o.width=f}if(t=Math.round(t*1e10)/1e10,t){var h=e.filter(function(m){return t<0?m.width>r(m):!0});h.length&&(t=MO(h,t,r))}return t}function IXe(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var s=n[a],o=0,l=e.columns;o<l.length;o++){var c=l[o],u=t[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var f=n.length-a,h=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:h,row:s}}}}}function FXe(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,s=0,o=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(o-=1,o>1&&e.columns[l+1])s+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(o=u.colSpan,s=0,u.colSpan>1){a=u,s+=c.width;continue}u.width=c.width+s}}}function OXe(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var s=a[n],o=0,l=e.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=UK(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=UK(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<h*u.rowSpan?r={height:h,count:u.rowSpan}:r&&r.count>0&&r.height>h&&(h=r.height),h>s.height&&(s.height=h)}}r.count--}}function UK(e,t,r,n,a){return e.map(function(s){return DXe(s,t,r,n,a)})}function DXe(e,t,r,n,a){var s=1e4*n.scaleFactor();if(t=Math.ceil(t*s)/s,t>=IS(e,r,n))return e;for(;t<IS(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function lce(e,t){var r=new $v(e),n=PXe(t,r.scaleFactor()),a=new kXe(t,n);return BXe(r,a),r.applyStyles(r.userStyles),a}function PXe(e,t){var r=e.content,n=LXe(r.columns);if(r.head.length===0){var a=QK(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=QK(n,"foot");a&&r.foot.push(a)}var s=e.settings.theme,o=e.styles;return{columns:n,head:II("head",r.head,n,o,s,t),body:II("body",r.body,n,o,s,t),foot:II("foot",r.foot,n,o,s,t)}}function II(e,t,r,n,a,s){var o={},l=t.map(function(c,u){for(var d=0,f={},h=0,m=0,g=0,x=r;g<x.length;g++){var v=x[g];if(o[v.index]==null||o[v.index].left===0)if(m===0){var y=void 0;Array.isArray(c)?y=c[v.index-h-d]:y=c[v.dataKey];var w={};typeof y=="object"&&!Array.isArray(y)&&(w=(y==null?void 0:y.styles)||{});var _=MXe(e,v,u,a,n,s,w),T=new oce(y,_,e);f[v.dataKey]=T,f[v.index]=T,m=T.colSpan-1,o[v.index]={left:T.rowSpan-1,times:m}}else m--,h++;else o[v.index].left--,m=o[v.index].times,d++}return new ice(c,u,e,f)});return l}function QK(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=RXe(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function RXe(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function LXe(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new jXe(a,t,r)})}function MXe(e,t,r,n,a,s,o){var l=hXe(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var u=oh({},l.table,l[e],a.styles,c),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},h=e==="body"&&r%2===0?oh({},l.alternateRow,a.alternateRowStyles):{},m=AXe(s),g=oh({},m,u,h,f);return oh(g,o)}function UXe(e,t,r){var n;r===void 0&&(r={});var a=rce(e,t),s=new Map,o=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(h){var m=t.columns.find(function(g){return g.dataKey===h||g.index===h});m&&!s.has(m.index)&&(s.set(m.index,!0),o.push(m.index),l.push(t.columns[m.index]),a-=m.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(s.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,o.push(d),l.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:o,columns:l,lastIndex:d-1}}function QXe(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=UXe(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function cce(e,t){var r=t.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=n+a.bottom+o;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(h,m){return h+m.height},0);l+=u}var d=new $v(e);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(dce(d),s.y=a.top),t.callWillDrawPageHooks(d,s);var f=oh({},s);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?HXe(d,t,f,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(h){return Fh(d,t,h,s,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(h,m){var g=m===t.body.length-1;FS(d,t,h,g,f,s,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(h){return Fh(d,t,h,s,t.columns)})),ece(d,t,f,s),t.callEndPageHooks(d,s),t.finalY=s.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function HXe(e,t,r,n){var a=QXe(e,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?jw(e,t,r,n,u.columns,!0):HK(e,t,n,u.columns),VXe(e,t,r,n,u.columns),FI(e,t,n,u.columns)});else for(var o=-1,l=a[0],c=function(){var u=o;if(l){e.applyStyles(e.userStyles);var d=l.columns;o>=0?jw(e,t,r,n,d,!0):HK(e,t,n,d),u=VK(e,t,o+1,n,d),FI(e,t,n,d)}var f=u-o;a.slice(1).forEach(function(h){e.applyStyles(e.userStyles),jw(e,t,r,n,h.columns,!0),VK(e,t,o+1,n,h.columns,f),FI(e,t,n,h.columns)}),o=u};o<t.body.length-1;)c()}function HK(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(s){return Fh(e,t,s,r,n)})}function VXe(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(s,o){var l=o===t.body.length-1;FS(e,t,s,l,r,n,a)})}function VK(e,t,r,n,a,s){e.applyStyles(e.userStyles),s=s??t.body.length;var o=Math.min(r+s,t.body.length),l=-1;return t.body.slice(r,o).forEach(function(c,u){var d=r+u===t.body.length-1,f=uce(e,t,d,n);c.canEntireRowFit(f,a)&&(Fh(e,t,c,n,a),l=r+u)}),l}function FI(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(s){return Fh(e,t,s,r,n)})}function zXe(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),s=Math.floor((t-a)/n);return Math.max(0,s)}function $Xe(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var s=0,o=0,l=r.columns;o<l.length;o++){var c=l[o],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new oce(u.raw,u.styles,u.section);d=oh(d,u),d.text=[];var f=zXe(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var h=n.scaleFactor(),m=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(h,m),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(h,m),d.contentHeight>s&&(s=d.contentHeight),a[c.index]=d}}var g=new ice(e.raw,-1,e.section,a,!0);g.height=s;for(var x=0,v=r.columns;x<v.length;x++){var c=v[x],d=g.cells[c.index];d&&(d.height=g.height);var u=e.cells[c.index];u&&(u.height=e.height)}return g}function GXe(e,t,r,n){var a=e.pageSize().height,s=n.settings.margin,o=s.top+s.bottom,l=a-o;t.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>l;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function FS(e,t,r,n,a,s,o){var l=uce(e,t,n,s);if(r.canEntireRowFit(l,o))Fh(e,t,r,s,o);else if(GXe(e,r,l,t)){var c=$Xe(r,l,t,e);Fh(e,t,r,s,o),jw(e,t,a,s,o),FS(e,t,c,n,a,s,o)}else jw(e,t,a,s,o),FS(e,t,r,n,a,s,o)}function Fh(e,t,r,n,a){n.x=t.settings.margin.left;for(var s=0,o=a;s<o.length;s++){var l=o[s],c=r.cells[l.index];if(!c){n.x+=l.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,l,n);if(u===!1){n.x+=l.width;continue}qXe(e,c,n);var d=c.getTextPos();Yle(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function qXe(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=tce(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),KXe(e,t,r,n.lineWidth))}function KXe(e,t,r,n){var a,s,o,l;n.top&&(a=r.x,s=r.y,o=r.x+t.width,l=r.y,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,s,o,l)),n.bottom&&(a=r.x,s=r.y+t.height,o=r.x+t.width,l=r.y+t.height,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,s,o,l)),n.left&&(a=r.x,s=r.y,o=r.x,l=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,a,s,o,l)),n.right&&(a=r.x+t.width,s=r.y,o=r.x+t.width,l=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,a,s,o,l));function c(u,d,f,h,m){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,h,m,"S")}}function uce(e,t,r,n){var a=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function jw(e,t,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(l){return Fh(e,t,l,n,a)}),t.callEndPageHooks(e,n);var o=t.settings.margin;ece(e,t,r,n),dce(e),t.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return Fh(e,t,l,n,a)}),e.applyStyles(e.userStyles))}function dce(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function WXe(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=sce(this,n),s=lce(this,a);return cce(this,s),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){Yle(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return $v.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){$v.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new $v(this),s=ace(a,t,window,r,!1),o=s.head,l=s.body,c=((n=o[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var OI;function xi(e,t){var r=sce(e,t),n=lce(e,r);cce(e,n)}try{if(typeof window<"u"&&window){var zK=window,$K=zK.jsPDF||((OI=zK.jspdf)===null||OI===void 0?void 0:OI.jsPDF);$K&&WXe($K)}}catch(e){console.error("Could not apply autoTable plugin",e)}const fM="evaluaciones_pruebas",AM="evaluaciones_rubricas_estaticas",hM="evaluaciones_rubricas_interactivas",XXe="usuarios",W4=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},YXe=e=>{const t=Vt(pt(lt,fM),cr("fechaCreacion","desc"));return hr(t,n=>{e(n.docs.map(a=>W4(a)))},n=>{console.error("Error al suscribirse a las pruebas:",n),e([])})},JXe=async e=>{try{const{id:t,...r}=e,n=rr(lt,fM,t);await yi(n,{...r,fechaCreacion:ir.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la prueba:",t),new Error("No se pudo guardar la prueba.")}},ZXe=async e=>{try{await ka(rr(lt,fM,e))}catch(t){throw console.error("Error al eliminar la prueba:",t),new Error("No se pudo eliminar la prueba.")}},eYe=e=>{const t=Vt(pt(lt,AM),cr("fechaCreacion","desc"));return hr(t,n=>{e(n.docs.map(a=>W4(a)))},n=>{console.error("Error al suscribirse a las rúbricas estáticas:",n),e([])})},tYe=async e=>{try{const{id:t,...r}=e,n=rr(lt,AM,t);await yi(n,{...r,fechaCreacion:ir.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la rúbrica estática:",t),new Error("No se pudo guardar la rúbrica.")}},rYe=async e=>{try{await ka(rr(lt,AM,e))}catch(t){throw console.error("Error al eliminar la rúbrica estática:",t),new Error("No se pudo eliminar la rúbrica.")}},nYe=e=>{const t=Vt(pt(lt,hM));return hr(t,n=>{e(n.docs.map(a=>W4(a)))},n=>{console.error("Error al suscribirse a las rúbricas interactivas:",n),e([])})},aYe=async e=>{try{const{id:t,...r}=e,n=rr(lt,hM,t);await yi(n,r)}catch(t){throw console.error("Error al guardar la rúbrica interactiva:",t),new Error("No se pudo guardar la rúbrica interactiva.")}},sYe=async e=>{try{return(await an(pt(lt,hM),e)).id}catch(t){throw console.error("Error al crear la rúbrica interactiva:",t),new Error("No se pudo crear la rúbrica interactiva.")}},iYe=e=>{const t=Vt(pt(lt,XXe));return hr(t,n=>{e(n.docs.map(a=>W4(a)))},n=>{console.error("Error al suscribirse a los usuarios:",n),e([])})},oYe=["Selección múltiple","Verdadero o Falso","Desarrollo","Términos pareados","Comprensión de lectura"],GK={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},k5=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},lYe=({open:e})=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):i.jsxs(i.Fragment,{children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),cYe=({item:e,index:t,showAnswers:r})=>{const n=C.useMemo(()=>e.tipo==="Términos pareados"?[...e.pares.map(a=>a.definicion)].sort(()=>Math.random()-.5):[],[e]);return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[t+1,". ",e.pregunta," (",e.puntaje," pts)"]}),e.habilidadBloom&&i.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:e.habilidadBloom})]}),e.tipo==="Selección múltiple"&&i.jsx("div",{className:"ml-4 mt-2 space-y-2",children:e.opciones.map((a,s)=>{const o=r&&s===e.respuestaCorrecta;return i.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${o?"bg-green-100 dark:bg-green-900/50":""}`,children:[i.jsx("div",{className:"w-5 h-5 border rounded-full"}),i.jsxs("span",{children:[String.fromCharCode(65+s),") ",a]})]},s)})}),e.tipo==="Desarrollo"&&i.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),e.tipo==="Verdadero o Falso"&&i.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[i.jsx("span",{children:"V ___ F ___"}),r&&i.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",e.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),e.tipo==="Términos pareados"&&i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),i.jsx("div",{className:"space-y-2",children:e.pares.map((a,s)=>i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[s+1,". ",a.concepto]},s))})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definición"}),i.jsx("div",{className:"space-y-2",children:n.map((a,s)=>i.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:a},s))})]})]}),r&&i.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[i.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),i.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:e.pares.map((a,s)=>i.jsxs("li",{children:[i.jsx("strong",{children:a.concepto})," → ",a.definicion]},s))})]})]}),e.tipo==="Comprensión de lectura"&&i.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[i.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:e.texto}),e.preguntas.map((a,s)=>{if(a.tipo==="Selección múltiple"){const o=a;return i.jsxs("div",{className:"pt-2",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",o.pregunta," (",o.puntaje," pts)"]}),o.habilidadBloom&&i.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:o.habilidadBloom})]}),i.jsx("div",{className:"ml-4 mt-2 space-y-2",children:o.opciones.map((l,c)=>{const u=r&&c===o.respuestaCorrecta;return i.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/50":""}`,children:[i.jsx("div",{className:"w-5 h-5 border rounded-full"}),i.jsxs("span",{children:[String.fromCharCode(65+c),") ",l]})]},c)})})]},a.id)}if(a.tipo==="Desarrollo"){const o=a;return i.jsxs("div",{className:"pt-2",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",o.pregunta," (",o.puntaje," pts)"]}),o.habilidadBloom&&i.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:o.habilidadBloom})]}),i.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},a.id)}return null})]})]},e.id)},uYe=()=>{const[e,t]=C.useState([]),[r,n]=C.useState(null),[a,s]=C.useState(!1),[o,l]=C.useState(!1),[c,u]=C.useState(null),[d,f]=C.useState(!1),h={nombre:"",asignatura:Bs[0],nivel:cH[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[m,g]=C.useState(h);C.useEffect(()=>{const E=YXe(t);return()=>E()},[]);const x=E=>{const{name:S,value:B}=E.target;g(M=>({...M,[S]:B}))},v=E=>{g(S=>{const B={...S.tiposActividad};return B[E]?delete B[E]:B[E]=GK[E][0],{...S,tiposActividad:B}})},y=(E,S)=>{g(B=>({...B,tiposActividad:{...B.tiposActividad,[E]:S}}))},w=E=>{g(S=>{const B=S.selectedNee.includes(E)?S.selectedNee.filter(M=>M!==E):[...S.selectedNee,E];return{...S,selectedNee:B}})},_=async E=>{if(E.preventDefault(),!m.nombre.trim()||!m.contenido.trim()||Object.keys(m.tiposActividad).length===0){u("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}s(!0),u(null);const S=Object.entries(m.tiposActividad).map(([R,k])=>`- ${k} ítem(s) de tipo '${R}'`).join(`
`),B=m.isNee&&m.selectedNee.length>0?`
            **Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes características: ${m.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negación o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes más pequeñas si es posible.
            - Para 'Comprensión de Lectura', usa textos más cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Selección Múltiple', asegúrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",M=`
            Eres un experto en evaluación educativa para la educación media en Chile.
            Genera una prueba o guía de trabajo completa en formato JSON estructurado.
            
            Información base:
            - Nombre de la prueba: ${m.nombre}
            - Asignatura: ${m.asignatura}
            - Nivel: ${m.nivel}
            - Contenido a evaluar: "${m.contenido}"
            - Tipos y cantidad de ítems solicitados:
              ${S}
            - Nivel de Dificultad General: ${m.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
            
            ${B}

            Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json. El objeto debe contener:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluación.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de ítem solicitado. Cada actividad debe tener:
               - 'id': Un UUID generado por ti.
               - 'titulo': Un título descriptivo (ej: "Actividad 1: Selección Múltiple").
               - 'instrucciones': Instrucciones para esa actividad específica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID generado por ti.
                   - 'tipo': El tipo de ítem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numérico.
                   - 'habilidadBloom': La habilidad principal de la Taxonomía de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales según el tipo:
                       - Para 'Selección múltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (índice numérico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Términos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensión de lectura': 'texto' (un string que DEBE contener un texto original y coherente de 150 a 250 palabras, generado por ti, sobre el contenido a evaluar) y 'preguntas' (un array de sub-preguntas basadas en el texto que acabas de generar, las cuales pueden ser 'Selección múltiple' o 'Desarrollo', y cada una debe tener su propia 'id', 'pregunta', 'puntaje', 'habilidadBloom', etc.).
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{Sb("Evaluación - Pruebas");const R="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",q=(await(await new Ps(R).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(M)).response).text().replace(/^```json\s*|```\s*$/g,""),G=JSON.parse(q);let K=0;G.actividades.forEach(W=>{W.items.forEach(P=>{K+=P.puntaje||0,P.tipo==="Comprensión de lectura"&&P.preguntas&&P.preguntas.forEach(U=>{K+=U.puntaje||0})})});const ee={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:m.nombre,asignatura:m.asignatura,nivel:m.nivel,contenidoOriginal:m.contenido,tiposActividadOriginal:m.tiposActividad,objetivo:G.objetivo,instruccionesGenerales:G.instruccionesGenerales,puntajeIdeal:K,actividades:G.actividades,dificultad:m.dificultad,...m.isNee&&{adaptacionNEE:m.selectedNee}};n(ee),f(!1)}catch(R){console.error(R),u("Error al generar la prueba con IA. Revisa la consola para más detalles.")}finally{s(!1)}},T=async()=>{if(r)try{await JXe(r),alert("Prueba guardada con éxito.")}catch(E){console.error(E),alert("No se pudo guardar la prueba.")}},j=async E=>{if(window.confirm("¿Eliminar esta prueba?"))try{await ZXe(E),(r==null?void 0:r.id)===E&&n(null)}catch(S){console.error(S),alert("No se pudo eliminar la prueba.")}},I=async E=>{l(!0);const S=new vr("p","mm","a4"),B=20,M=S.internal.pageSize.getHeight(),R=S.internal.pageSize.getWidth(),k=R-B*2;let D=B;const L=q=>{q.setFillColor(230,230,230),q.rect(0,0,R,25,"F"),q.setFontSize(9),q.setTextColor(0,0,0),q.text("LICEO INDUSTRIAL DE RECOLETA",B,15,{align:"left"}),q.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",R-B,15,{align:"right"})};L(S),D=30,S.setTextColor(0,0,0),S.setFont("helvetica","bold"),S.setFontSize(16),S.text(E.nombre,R/2,D,{align:"center"}),D+=10,xi(S,{startY:D,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},E.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},E.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},E.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:E.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:E.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:q=>{L(S)}}),D=S.lastAutoTable.finalY+10;const Z=q=>{D+q>M-B&&(S.addPage(),L(S),D=B+15,S.setTextColor(0,0,0))},V=(q,G)=>{S.setFont("helvetica",G.isBold?"bold":"normal"),S.setFontSize(G.fontSize);const K=Array.isArray(q)?q.join(`
`):q;return S.getTextDimensions(K,{maxWidth:G.width}).h};for(const q of E.actividades){let G=V(q.titulo,{fontSize:12,width:k,isBold:!0})+V(q.instrucciones,{fontSize:10,width:k})+12;Z(G),S.setFont("helvetica","bold"),S.setFontSize(12),S.setTextColor(0,0,0),S.text(q.titulo,B,D),D+=8,S.setFont("helvetica","normal"),S.setFontSize(10);const K=S.splitTextToSize(q.instrucciones,k);S.text(K,B,D),D+=K.length*(10*.35*1.15)+4;for(const[ee,W]of q.items.entries()){let P=0;const U=`${ee+1}. ${W.pregunta} (${W.puntaje} pts)`;switch(P+=V(U,{fontSize:10,width:k,isBold:!0}),W.tipo){case"Selección múltiple":W.opciones.forEach(te=>{P+=V(te,{fontSize:10,width:k-5})+3}),P+=7;break;case"Verdadero o Falso":P+=10;break;case"Desarrollo":P+=30;break;case"Términos pareados":P+=W.pares.length*12+20;break;case"Comprensión de lectura":const J=W;P+=V(J.texto,{fontSize:10,width:k-10})+10,J.preguntas.forEach(te=>{const se=`${te.pregunta} (${te.puntaje} pts)`;P+=V(se,{fontSize:10,width:k-5,isBold:!0}),te.tipo==="Selección múltiple"?(te.opciones.forEach(ie=>{P+=V(ie,{fontSize:10,width:k-10})+3}),P+=7):te.tipo==="Desarrollo"&&(P+=30),P+=5}),P+=15;break}Z(P),S.setFont("helvetica","bold"),S.setFontSize(10),S.setTextColor(0,0,0);const z=S.splitTextToSize(U,k);if(S.text(z,B,D),D+=z.length*5+4,S.setFont("helvetica","normal"),W.tipo==="Selección múltiple")W.opciones.forEach((J,te)=>{S.text(`${String.fromCharCode(65+te)}) ${J}`,B+5,D),D+=7});else if(W.tipo==="Verdadero o Falso")S.text("V ______    F ______",B+5,D),D+=10;else if(W.tipo==="Desarrollo")S.setDrawColor(200,200,200),S.setFillColor(245,245,245),S.rect(B,D,k,25,"FD"),D+=30;else if(W.tipo==="Términos pareados"){const J=[...W.pares.map(se=>se.definicion)].sort(()=>Math.random()-.5),te=W.pares.map((se,ie)=>[`${ie+1}. ${se.concepto}`,`(   ) ${J[ie]}`]);xi(S,{startY:D,head:[["Columna A: Concepto","Columna B: Definición"]],body:te,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:se=>L(S)}),D=S.lastAutoTable.finalY+10}else if(W.tipo==="Comprensión de lectura"){const J=W;S.setFillColor(240,240,240),S.setDrawColor(200,200,200);const te=S.splitTextToSize(J.texto,k-10),se=te.length*(10*.35*1.15)+8;S.rect(B,D,k,se,"FD"),D+=4,S.setFont("helvetica","normal"),S.setFontSize(10),S.setTextColor(0,0,0),S.text(te,B+5,D),D+=se;for(const[ie,ce]of J.preguntas.entries()){const de=`${ie+1}. ${ce.pregunta} (${ce.puntaje} pts)`;S.setFont("helvetica","bold");const Be=S.splitTextToSize(de,k-5);S.text(Be,B+5,D),D+=Be.length*5+4,S.setFont("helvetica","normal"),ce.tipo==="Selección múltiple"?ce.opciones.forEach((ae,Se)=>{S.text(`${String.fromCharCode(65+Se)}) ${ae}`,B+10,D),D+=7}):ce.tipo==="Desarrollo"&&(S.setDrawColor(200,200,200),S.setFillColor(245,245,245),S.rect(B+5,D,k-5,25,"FD"),D+=30)}}D+=5}}S.save(`${E.nombre.replace(/\s/g,"_")}.pdf`),l(!1)};return r?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("button",{onClick:()=>n(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>f(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[i.jsx(lYe,{open:!d})," ",i.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),i.jsx("button",{onClick:T,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),i.jsxs("button",{onClick:()=>I(r),disabled:o,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[o?"...":i.jsx(nte,{})," PDF"]})]})]}),i.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[i.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[i.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),i.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),i.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:r.nombre}),i.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Asignatura:"})," ",r.asignatura]}),i.jsxs("p",{className:"text-right",children:[i.jsx("strong",{children:"Puntaje Ideal:"})," ",r.puntajeIdeal]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Nivel:"})," ",r.nivel]})]}),i.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[i.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",r.dificultad||"Intermedio"]}),r.adaptacionNEE&&r.adaptacionNEE.length>0&&i.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",r.adaptacionNEE.join(", ")]})]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",r.objetivo]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Instrucciones Generales:"})," ",r.instruccionesGenerales]})]}),r.actividades.map(E=>i.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:E.titulo}),i.jsx("p",{className:"italic text-sm mb-4",children:E.instrucciones}),i.jsx("div",{className:"space-y-6",children:E.items.map((S,B)=>i.jsx(cYe,{item:S,index:B,showAnswers:d},S.id))})]},E.id))]})]}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),i.jsxs("form",{onSubmit:_,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",name:"nombre",value:m.nombre,onChange:x,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),i.jsx("div",{}),i.jsx("select",{name:"asignatura",value:m.asignatura,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Bs.map(E=>i.jsx("option",{children:E},E))}),i.jsx("select",{name:"nivel",value:m.nivel,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:cH.map(E=>i.jsx("option",{children:E},E))})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),i.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((E,S)=>i.jsx("button",{type:"button",onClick:()=>g(B=>({...B,dificultad:E})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${S===0?"rounded-l-lg":""} ${S===2?"rounded-r-lg":""}
                                            ${m.dificultad===E?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:E},E))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:m.isNee,onChange:E=>g(S=>({...S,isNee:E.target.checked,selectedNee:E.target.checked?S.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),m.isNee&&i.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:E_.map(E=>i.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:m.selectedNee.includes(E),onChange:()=>w(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:E})]},E))})]})]})]}),i.jsx("textarea",{name:"contenido",value:m.contenido,onChange:x,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("div",{className:"space-y-3",children:oYe.map(E=>i.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:!!m.tiposActividad[E],onChange:()=>v(E),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:E})]}),m.tiposActividad[E]&&i.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),GK[E].map(S=>i.jsx("button",{type:"button",onClick:()=>y(E,S),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${m.tiposActividad[E]===S?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:S},S))]})]},E))}),c&&i.jsx("p",{className:"text-red-500 text-sm",children:c}),i.jsx("div",{className:"text-right",children:i.jsx("button",{type:"submit",disabled:a,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:a?"Generando...":"Generar Prueba"})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),i.jsx("div",{className:"space-y-2",children:e.length>0?e.map(E=>i.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.nombre}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[E.asignatura," - ",E.nivel," (",new Date(E.fechaCreacion).toLocaleDateString(),")"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>n(E),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),i.jsx("button",{onClick:()=>j(E.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},E.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},dYe=({rubricas:e,onSave:t,onDelete:r,onCreate:n})=>{const[a,s]=C.useState(null),[o,l]=C.useState("list"),[c,u]=C.useState(!1),[d,f]=C.useState(""),h=async(j,I)=>{if(!j.trim()||!I.trim()){alert("El título y la descripción son obligatorios.");return}u(!0);const E=`Crea una rúbrica de evaluación detallada sobre "${j}" con el propósito de "${I}". Genera entre 3 y 5 dimensiones de evaluación. Para cada dimensión, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,S={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{Sb("Evaluación - Rúbricas");const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",L=(await(await new Ps(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:S}})).response).text(),Z=JSON.parse(L),V={id:crypto.randomUUID(),titulo:j,descripcion:I,fechaCreacion:new Date().toISOString(),dimensiones:Z.map(q=>({id:crypto.randomUUID(),nombre:q.dimension,niveles:{insuficiente:q.insuficiente,suficiente:q.suficiente,competente:q.competente,avanzado:q.avanzado}}))};s(V)}catch(B){console.error(B),alert("Error al generar la rúbrica con IA.")}finally{u(!1)}},m=async()=>{if(!d.trim()||!a)return;const j=crypto.randomUUID(),I={id:j,nombre:d,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};s(B=>B?{...B,dimensiones:[...B.dimensiones,I]}:null),f("");const E=`Para una rúbrica sobre "${a.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensión: "${d}". Considera las dimensiones existentes como contexto: ${a.dimensiones.map(B=>B.nombre).join(", ")}. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,S={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{Sb("Evaluación - Rúbricas (Añadir Dimensión)");const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",L=(await(await new Ps(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:S}})).response).text(),Z=JSON.parse(L);s(V=>V?{...V,dimensiones:V.dimensiones.map(q=>q.id===j?{...q,niveles:Z,isLoading:!1}:q)}:null)}catch(B){console.error("Error generating dimension descriptors:",B),alert("No se pudieron generar los descriptores."),s(M=>M?{...M,dimensiones:M.dimensiones.filter(R=>R.id!==j)}:null)}},g=()=>{if(!a)return;e.some(I=>I.id===a.id)?t(a):n(a),l("list"),s(null)},x=j=>{s(j),l("form")},v=()=>{s({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),l("form")},y=(j,I,E)=>{a&&s(S=>S?{...S,dimensiones:S.dimensiones.map(B=>B.id!==j?B:I==="nombre"?{...B,nombre:E}:{...B,niveles:{...B.niveles,[I]:E}})}:null)},w=(j,I)=>{s(E=>E?{...E,[j]:I}:null)},_=j=>{a&&s(I=>I?{...I,dimensiones:I.dimensiones.filter(E=>E.id!==j)}:null)},T=()=>{if(!a)return null;const j="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",I=`${j} resize-none text-sm`;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),i.jsx("button",{onClick:()=>l("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),i.jsx("input",{value:a.titulo,onChange:E=>w("titulo",E.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${j} mt-1`})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),i.jsx("textarea",{value:a.descripcion,onChange:E=>w("descripcion",E.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${j} mt-1`})]})]}),a.dimensiones.length===0&&i.jsx("div",{className:"text-center py-4",children:i.jsx("button",{onClick:()=>h(a.titulo,a.descripcion),disabled:c||!a.titulo||!a.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:c?"Generando...":"✨ Generar Rúbrica con IA"})}),a.dimensiones.length>0&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),i.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:i.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(E=>i.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:E},E))})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.dimensiones.map(E=>i.jsxs("tr",{children:[i.jsx("td",{className:"p-2 w-1/5",children:i.jsx("textarea",{value:E.nombre,onChange:S=>y(E.id,"nombre",S.target.value),rows:4,className:I})}),Object.keys(E.niveles).map(S=>i.jsx("td",{className:"p-2 w-1/5",children:E.isLoading?i.jsx("div",{className:"flex justify-center items-center h-full",children:i.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):i.jsx("textarea",{value:E.niveles[S],onChange:B=>y(E.id,S,B.target.value),rows:4,className:I})},S)),i.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:i.jsx("button",{onClick:()=>_(E.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},E.id))})]})}),i.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),i.jsx("input",{value:d,onChange:E=>f(E.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${j} mt-1`})]}),i.jsx("button",{onClick:m,disabled:!d.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),i.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:i.jsx("button",{onClick:g,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rúbrica"})})]})};return o==="list"?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),i.jsx("button",{onClick:v,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),e.length>0?e.map(j=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:j.titulo}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:j.descripcion})]}),i.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[i.jsx("button",{onClick:()=>x(j),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),i.jsx("button",{onClick:()=>r(j.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},j.id)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):T()},fYe=({allUsers:e,rubricasEstaticas:t})=>{const[r,n]=C.useState([]),[a,s]=C.useState(null),[o,l]=C.useState(null),[c,u]=C.useState({rubricaEstaticaId:"",curso:""}),[d,f]=C.useState(null);C.useEffect(()=>{const w=nYe(n);return()=>w()},[]);const h=async w=>{w.preventDefault();const _=t.find(j=>j.id===c.rubricaEstaticaId);if(!_||!c.curso){alert("Debe seleccionar una rúbrica y un curso.");return}const T={nombre:_.titulo,curso:c.curso,asignatura:"N/A",rubricaEstaticaId:_.id,resultados:{}};try{await sYe(T),u({rubricaEstaticaId:"",curso:""})}catch(j){console.error(j),alert("No se pudo crear la evaluación con rúbrica.")}},m=w=>{s(w),l(JSON.parse(JSON.stringify(w)))},g=(w,_,T)=>{o&&l(j=>{if(!j)return null;const I=JSON.parse(JSON.stringify(j));return I.resultados[w]||(I.resultados[w]={puntajes:{},feedback:""}),I.resultados[w].puntajes[_]=T,I})},x=async()=>{if(o)try{await aYe(o),s(o),alert("Cambios guardados.")}catch(w){console.error(w),alert("No se pudieron guardar los cambios.")}},v=C.useCallback(w=>{const _=o,T=t.find(M=>M.id===(_==null?void 0:_.rubricaEstaticaId));if(!_||!T)return{score:0,maxScore:0,grade:"N/A"};const j=T.dimensiones.length*4,I=_.resultados[w];if(!I)return{score:0,maxScore:j,grade:"1.0"};const E=Object.values(I.puntajes).reduce((M,R)=>M+R,0),S=1+6*(E/j),B=j>0?S.toFixed(1):"1.0";return{score:E,maxScore:j,grade:B}},[o,t]),y=async w=>{if(!o)return;const _=t.find(E=>E.id===o.rubricaEstaticaId),T=o.resultados[w];if(!_||!T||Object.keys(T.puntajes).length===0){alert("El estudiante no tiene puntajes para generar feedback.");return}f(w);const I=`Genera una retroalimentación constructiva para un estudiante basada en estos puntajes de rúbrica (de 1 a 4): ${_.dimensiones.map(E=>`${E.nombre}: ${T.puntajes[E.id]||"N/A"}/4`).join("; ")}. El nombre de la evaluación es "${_.titulo}". Destaca fortalezas y sugiere 1-2 áreas de mejora concretas. Sé breve y motivador.`;try{Sb("Evaluación - Rúbricas Interactivas (Feedback)");const E="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",k=(await(await new Ps(E).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(I)).response).text();l(D=>{if(!D)return null;const L=JSON.parse(JSON.stringify(D));return L.resultados[w].feedback=k.replace(/(\*\*|\*)/g,""),L})}catch(E){console.error(E),alert("Error al generar feedback.")}finally{f(null)}};if(a&&o){const w=t.find(T=>T.id===a.rubricaEstaticaId),_=e.filter(T=>T.profile===Gt.ESTUDIANTE&&k5(T.curso||"")===a.curso).map(T=>T.nombreCompleto).sort();return w?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:a.nombre}),i.jsx("p",{className:"text-slate-500",children:a.curso})]}),i.jsx("button",{onClick:()=>s(null),className:"font-semibold text-slate-600",children:"← Volver"})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border-collapse",children:[i.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),w.dimensiones.map(T=>i.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:T.nombre},T.id)),i.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),i.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),i.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentación"})]})}),i.jsx("tbody",{children:_.map(T=>{var S;const{score:j,maxScore:I,grade:E}=v(T);return i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:T}),w.dimensiones.map(B=>i.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:i.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(M=>{var R;return i.jsx("button",{onClick:()=>g(T,B.id,M),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((R=o.resultados[T])==null?void 0:R.puntajes[B.id])===M?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:M},M)})})},B.id)),i.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[j,"/",I]}),i.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:E}),i.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:i.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[i.jsx("p",{className:"text-xs w-full",children:((S=o.resultados[T])==null?void 0:S.feedback)||"Sin generar"}),i.jsx("button",{onClick:()=>y(T),disabled:d===T,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===T?"...":"Generar IA"})]})})]},T)})})]})}),i.jsx("div",{className:"mt-6 flex justify-end",children:i.jsx("button",{onClick:x,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):i.jsxs("div",{children:["Error: Rúbrica base no encontrada. ",i.jsx("button",{onClick:()=>s(null),children:"Volver"})]})}return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluación con Rúbrica"}),i.jsxs("form",{onSubmit:h,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[i.jsxs("select",{value:c.rubricaEstaticaId,onChange:w=>u({...c,rubricaEstaticaId:w.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[i.jsx("option",{value:"",children:"Seleccione una Rúbrica Guardada"}),t.map(w=>i.jsx("option",{value:w.id,children:w.titulo},w.id))]}),i.jsxs("select",{value:c.curso,onChange:w=>u({...c,curso:w.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[i.jsx("option",{value:"",children:"Seleccione un Curso"}),os.map(w=>i.jsx("option",{value:w,children:w},w))]}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluación"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),i.jsx("div",{className:"space-y-2",children:r.map(w=>i.jsxs("button",{onClick:()=>m(w),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[i.jsx("p",{className:"font-semibold",children:w.nombre}),i.jsx("p",{className:"text-sm text-slate-500",children:w.curso})]},w.id))})]})]})},AYe=({allUsers:e})=>{const[t,r]=C.useState(""),n=C.useMemo(()=>Array.from(new Set(e.filter(s=>s.profile===Gt.ESTUDIANTE&&s.curso).map(s=>k5(s.curso)))).sort(),[e]),a=C.useMemo(()=>{const s=e.filter(o=>o.profile===Gt.ESTUDIANTE);return t?s.filter(o=>k5(o.curso||"")===t).sort((o,l)=>o.nombreCompleto.localeCompare(l.nombreCompleto)):s.sort((o,l)=>o.nombreCompleto.localeCompare(l.nombreCompleto))},[e,t]);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nóminas de Cursos"}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nóminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el módulo de ",i.jsx("strong",{className:"font-semibold",children:"Administración"}),"."]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),i.jsxs("select",{id:"curso-filter",value:t,onChange:s=>r(s.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),n.map(s=>i.jsx("option",{value:s,children:s},s))]})]}),i.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:a.length>0?a.map(s=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:s.nombreCompleto}),i.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:k5(s.curso||"")}),i.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:s.email})]},s.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},hYe=()=>{const[e,t]=C.useState("pruebas"),[r,n]=C.useState([]),[a,s]=C.useState([]),[o,l]=C.useState(!0);C.useEffect(()=>{l(!0);const f=iYe(n),h=eYe(m=>{s(m),l(!1)});return()=>{f(),h()}},[]);const c=async f=>{try{await tYe(f)}catch(h){console.error(h),alert("No se pudo guardar la rúbrica.")}},u=async f=>{try{await rYe(f)}catch(h){console.error(h),alert("No se pudo eliminar la rúbrica.")}},d=({tabName:f,label:h})=>i.jsx("button",{onClick:()=>t(f),className:`${e===f?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:h});return o?i.jsx("div",{className:"text-center py-10",children:"Cargando módulo de evaluaciones..."}):i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación de Aprendizajes"}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[i.jsx(d,{tabName:"pruebas",label:"Pruebas y Guías"}),i.jsx(d,{tabName:"rubricas",label:"Generador de Rúbricas"}),i.jsx(d,{tabName:"rubricasInteractivas",label:"Rúbricas Interactivas"}),i.jsx(d,{tabName:"nominas",label:"Gestión de Nóminas"})]})}),i.jsxs("div",{className:"mt-6",children:[e==="pruebas"&&i.jsx(uYe,{}),e==="rubricas"&&i.jsx(dYe,{rubricas:a,onSave:c,onDelete:u,onCreate:c}),e==="rubricasInteractivas"&&i.jsx(fYe,{allUsers:r,rubricasEstaticas:a}),e==="nominas"&&i.jsx(AYe,{allUsers:r})]})]})},mYe=async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,a=0;const s=[];for(const c of r)try{const u=pt(Er,c),d=await mn(u),f=d.size;n+=f,s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:f});let h=0;d.docs.forEach(m=>{const g=m.data();g.createdAt&&new Date(g.createdAt)>=t&&h++}),a+=h}catch(u){console.warn(`Error accediendo a colección ${c}:`,u),s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:0})}const o=[];try{const c=pt(Er,"apiLogs"),u=new Date(e.getTime()-10080*60*1e3),d=Vt(c,wr("timestamp",">=",u.toISOString()),cr("timestamp","desc")),f=await mn(d),h={};f.docs.forEach(m=>{const g=m.data(),x=new Date(g.timestamp).toLocaleDateString("es-CL");h[x]=(h[x]||0)+1}),Object.entries(h).sort(([m],[g])=>new Date(m).getTime()-new Date(g).getTime()).forEach(([m,g])=>{o.push({label:m,value:g})})}catch(c){console.warn("Error calculando actividad diaria:",c)}const l=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:l,writesToday:a,totalDocuments:n,collectionsActivity:s.sort((c,u)=>u.value-c.value),dailyActivity:o}}catch(e){return console.error("Error al obtener estadísticas de Firestore:",e),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},qK=500,Ux=({title:e,value:t,description:r,alert:n})=>i.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),i.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:t}),r&&i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),DI=({title:e,data:t,colorClass:r})=>{const n=C.useMemo(()=>Math.max(...t.map(a=>a.value),1),[t]);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),i.jsx("div",{className:"space-y-4",children:t.length>0?t.map(a=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),i.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:i.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/n*100}%`}})})]},a.label)):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},pYe=()=>{const[e,t]=C.useState([]),[r,n]=C.useState(!0),[a,s]=C.useState(null),[o,l]=C.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});C.useEffect(()=>{n(!0);const f=cWe(g=>{t(g),n(!1)}),h=async()=>{try{const g=await mYe();l(g)}catch(g){console.error("Error al cargar estadísticas de Firestore:",g)}};h();const m=setInterval(h,300*1e3);return()=>{f(),clearInterval(m)}},[]);const{stats:c,userStats:u,moduleStats:d}=C.useMemo(()=>{const f=new Date,h=new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),m=h-f.getDay()*24*60*60*1e3,g=new Date(f.getFullYear(),f.getMonth(),1).getTime(),x={today:0,week:0,month:0},v={},y={};e.forEach(T=>{const j=new Date(T.timestamp).getTime();j>=h&&x.today++,j>=m&&x.week++,j>=g&&x.month++;const I=T.userEmail||"Desconocido";v[I]||(v[I]={email:I,today:0,month:0,total:0}),v[I].total++,j>=h&&v[I].today++,j>=g&&v[I].month++,y[T.module]=(y[T.module]||0)+1});const w=Object.values(v).sort((T,j)=>j.total-T.total),_=Object.entries(y).map(([T,j])=>({label:T,value:j})).sort((T,j)=>j.value-T.value);return{stats:x,userStats:w,moduleStats:_}},[e]);return i.jsxs("div",{className:"space-y-8",children:[a&&i.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&i.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas..."}),!r&&e.length===0&&i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsx(Ux,{title:"Llamadas Hoy",value:r?"--":c.today,description:`Límite recomendado: ${qK}`,alert:c.today>qK}),i.jsx(Ux,{title:"Llamadas esta Semana",value:r?"--":c.week}),i.jsx(Ux,{title:"Llamadas este Mes",value:r?"--":c.month})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[i.jsx(DI,{title:"Uso por Módulo",data:d,colorClass:"bg-sky-500"}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),i.jsx("div",{className:"overflow-x-auto max-h-96",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),i.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),i.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),i.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&u.length>0?u.map(f=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:f.email}),i.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.today}),i.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.month}),i.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:f.total})]},f.email)):i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore (simuladas)."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(Ux,{title:"Documentos Creados (Hoy)",value:o.documentsCreatedToday,description:"Nuevos documentos"}),i.jsx(Ux,{title:"Lecturas de Firestore (Hoy)",value:o.readsToday,description:"Operaciones de lectura"}),i.jsx(Ux,{title:"Total de Documentos",value:o.totalDocuments,description:"En todas las colecciones"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[i.jsx(DI,{title:"Actividad por Colección",data:o.collectionsActivity,colorClass:"bg-green-500"}),i.jsx(DI,{title:"Actividad Diaria (Últimos 7 días)",data:o.dailyActivity,colorClass:"bg-purple-500"})]})]})]})},KK=pt(Er,"usuarios");async function mM(){try{console.log("🔍 [DEBUG] Obteniendo usuarios de Firestore..."),console.log("🔍 [DEBUG] Collection ref:",KK);const e=await mn(KK);if(console.log(`📊 [DEBUG] Encontrados ${e.docs.length} documentos en la colección usuarios`),e.empty)return console.log("⚠️  [DEBUG] La colección usuarios está vacía"),[];const t=e.docs.map(r=>{const n=r.data();return console.log("👤 [DEBUG] Usuario encontrado:",{id:r.id,...n}),{id:r.id,...n}});return console.log("✅ [DEBUG] Usuarios procesados correctamente:",t.length),console.log("✅ [DEBUG] Lista completa de usuarios:",t),t}catch(e){throw console.error("❌ [DEBUG] Error al obtener usuarios:",e),console.error("❌ [DEBUG] Error details:",{code:e.code,message:e.message,stack:e.stack}),e}}const WK=Object.values(Gt),PI=e=>e?e.trim().toLowerCase().replace(/°/g,"º").replace(/\s+(medio|básico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º").replace(/^(\d)(?![º])/,"$1º").replace(/\s+/g,"").toUpperCase():"",gYe=()=>{const[e,t]=C.useState([]),[r,n]=C.useState(!1),[a,s]=C.useState("Usuarios"),[o,l]=C.useState({nombreCompleto:"",email:"",rut:"",profile:Gt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[c,u]=C.useState(null),[d,f]=C.useState(""),[h,m]=C.useState(""),[g,x]=C.useState(""),[v,y]=C.useState(null),[w,_]=C.useState(null),[T,j]=C.useState(null),I=C.useCallback(async()=>{n(!0);try{const G=await mM();t(G)}catch(G){console.error("Error al cargar usuarios",G),y("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);C.useEffect(()=>{I()},[I]);const E=C.useCallback(G=>{const{name:K,value:ee}=G.target;l(W=>({...W,[K]:ee,curso:K==="profile"&&ee!==Gt.ESTUDIANTE?"":W.curso,cursos:K==="profile"&&ee!==Gt.PROFESORADO?[]:W.cursos,asignaturas:K==="profile"&&ee!==Gt.PROFESORADO?[]:W.asignaturas}))},[]),S=C.useCallback((G,K)=>{l(ee=>{const W=ee[G]||[],P=W.includes(K)?W.filter(U=>U!==K):[...W,K];return{...ee,[G]:P}})},[]),B=C.useCallback(()=>{l({nombreCompleto:"",email:"",rut:"",profile:Gt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),y(null)},[]),M=C.useCallback(async G=>{G.preventDefault(),y(null);const{nombreCompleto:K,email:ee,profile:W,curso:P,password:U}=o;if(!K.trim()||!ee.trim()){y("Nombre Completo y Email son obligatorios.");return}if(W===Gt.ESTUDIANTE&&!P){y('El campo "Curso" es obligatorio para Estudiantes.');return}if(!c&&!(U!=null&&U.trim())){y("La contraseña es obligatoria al crear un nuevo usuario.");return}const z=lv();try{if(c){const J=M0(z,"updateUser"),te={...o,password:(U==null?void 0:U.trim())||void 0,curso:W===Gt.ESTUDIANTE?PI(P||""):void 0};await J(te)}else{const J=M0(z,"createUser"),te={...o,curso:W===Gt.ESTUDIANTE?PI(P||""):void 0};await J(te)}await I(),B()}catch(J){console.error("Error al guardar usuario:",J),y(J.message||"Error al guardar el usuario.")}},[o,c,I,B]),R=C.useCallback(G=>{u(G.email),l({nombreCompleto:G.nombreCompleto,email:G.email,rut:G.rut||"",profile:G.profile,password:"",curso:G.curso||"",cursos:G.cursos||[],asignaturas:G.asignaturas||[]}),setTimeout(()=>{const K=document.querySelector("form");K&&K.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),k=C.useCallback(async G=>{if(window.confirm(`¿Está seguro de que desea eliminar al usuario ${G}? Esta acción es irreversible.`))try{const K=lv();await M0(K,"deleteUser")({email:G}),await I()}catch(K){console.error("Error al eliminar usuario:",K),y(K.message||"No se pudo borrar el usuario.")}},[I]),D=async G=>{var U;const K=(U=G.target.files)==null?void 0:U[0];if(!K)return;_({message:"Procesando archivo...",isError:!1});const ee=lv(),W=M0(ee,"createUser"),P=new FileReader;P.onload=async z=>{var J;try{const te=new Uint8Array((J=z.target)==null?void 0:J.result),se=fb(te,{type:"array"}),ie=se.Sheets[se.SheetNames[0]],ce=Ti.sheet_to_json(ie);if(ce.length===0){_({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const de=ce.map(ve=>{const le=ve.Nombre||ve.nombre,be=ve.Correo||ve.correo||ve.Email||ve.email,Pe=ve.Curso||ve.curso,Ue=ve.RUT||ve.rut;return!le||!be||!Pe?Promise.resolve({email:be||"Sin email",error:"Datos incompletos"}):W({nombreCompleto:String(le).trim(),email:String(be).trim(),profile:Gt.ESTUDIANTE,curso:PI(String(Pe).trim()),rut:Ue?String(Ue).trim():"",password:"recoleta"}).catch(pe=>({email:be,error:pe.message}))}),Be=await Promise.all(de),ae=Be.filter(ve=>!ve.error).length,Se=Be.filter(ve=>ve.error);let ke=`Carga completada. ${ae} estudiantes agregados.`;Se.length>0&&(ke+=` ${Se.length} fallaron.`,console.error("Errores en carga masiva:",Se)),_({message:ke,isError:Se.length>0}),await I()}catch(te){_({message:`Error: ${te.message}`,isError:!0})}},P.readAsArrayBuffer(K),G.target.value=""},L=async G=>{var U;const K=(U=G.target.files)==null?void 0:U[0];if(!K)return;j({message:"Procesando archivo...",isError:!1});const ee=lv(),W=M0(ee,"createUser"),P=new FileReader;P.onload=async z=>{var J;try{const te=new Uint8Array((J=z.target)==null?void 0:J.result),se=fb(te,{type:"array"}),ie=se.Sheets[se.SheetNames[0]],ce=Ti.sheet_to_json(ie);if(ce.length===0){j({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const de=ce.map(ve=>{const le=ve.Nombre||ve.nombre,be=ve.Correo||ve.correo||ve.Email||ve.email,Pe=ve.Perfil||ve.perfil||ve.Profile||ve.profile,Ue=ve.RUT||ve.rut;return!le||!be||!Pe?Promise.resolve({email:be||"Sin email",error:"Datos incompletos"}):W({nombreCompleto:String(le).trim(),email:String(be).trim(),profile:Pe,rut:Ue?String(Ue).trim():"",password:"recoleta"}).catch(pe=>({email:be,error:pe.message}))}),Be=await Promise.all(de),ae=Be.filter(ve=>!ve.error).length,Se=Be.filter(ve=>ve.error);let ke=`Carga completada. ${ae} usuarios agregados.`;Se.length>0&&(ke+=` ${Se.length} fallaron.`,console.error("Errores en carga masiva:",Se)),j({message:ke,isError:Se.length>0}),await I()}catch(te){j({message:`Error: ${te.message}`,isError:!0})}},P.readAsArrayBuffer(K),G.target.value=""},Z="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",V=C.useMemo(()=>Array.from(new Set(e.filter(G=>G.profile===Gt.ESTUDIANTE&&G.curso).map(G=>G.curso))).sort(),[e]),q=C.useMemo(()=>e.filter(G=>(d===""||G.nombreCompleto.toLowerCase().includes(d.toLowerCase())||G.email.toLowerCase().includes(d.toLowerCase()))&&(h===""||G.profile===h)&&(g===""||G.curso===g)),[e,d,h,g]);return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>s("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),i.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),i.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:D,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),w&&i.jsx("p",{className:`text-sm mt-2 ${w.isError?"text-red-600":"text-green-600"}`,children:w.message})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),i.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:L,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),T&&i.jsx("p",{className:`text-sm mt-2 ${T.isError?"text-red-600":"text-green-600"}`,children:T.message})]})]})]}),i.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:c?"Editando usuario":"Agregar nuevo usuario"}),i.jsxs("form",{onSubmit:M,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),i.jsx("input",{type:"text",name:"nombreCompleto",value:o.nombreCompleto,onChange:E,className:Z,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),i.jsx("input",{type:"email",name:"email",value:o.email,onChange:E,className:Z,required:!0,readOnly:!!c})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),i.jsx("input",{type:"password",name:"password",value:o.password||"",onChange:E,placeholder:c?"Dejar en blanco para no cambiar":"Contraseña temporal",className:Z})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),i.jsx("input",{type:"text",name:"rut",value:o.rut||"",onChange:E,placeholder:"12.345.678-9",className:Z})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),i.jsx("select",{name:"profile",value:o.profile,onChange:E,className:Z,required:!0,children:WK.map(G=>i.jsx("option",{value:G,children:G},G))})]}),o.profile===Gt.ESTUDIANTE&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),i.jsxs("select",{name:"curso",value:o.curso,onChange:E,className:Z,required:!0,children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),os.map(G=>i.jsx("option",{value:G,children:G},G))]})]})]}),o.profile===Gt.PROFESORADO&&i.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[i.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[i.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📚"}),"Asignación de Cursos"]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:os.map(G=>{var K;return i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[i.jsx("input",{type:"checkbox",checked:((K=o.cursos)==null?void 0:K.includes(G))||!1,onChange:()=>S("cursos",G),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:G})]},G)})})]}),o.profile===Gt.PROFESORADO&&i.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[i.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[i.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📖"}),"Asignación de Asignaturas"]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Bs.map(G=>{var K;return i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[i.jsx("input",{type:"checkbox",checked:((K=o.asignaturas)==null?void 0:K.includes(G))||!1,onChange:()=>S("asignaturas",G),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:G})]},G)})})]}),v&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:v}),i.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[c&&i.jsx("button",{type:"button",onClick:B,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),i.jsx("button",{type:"button",onClick:async()=>{try{console.log("🔧 Agregando custom claim...");const G=lv(),ee=await M0(G,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log("✅ Custom claim agregado:",ee),y("✅ Custom claim agregado exitosamente")}catch(G){console.error("❌ Error al agregar custom claim:",G),y(`Error: ${G.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:"🔧 Claim"}),i.jsx("button",{type:"button",onClick:async()=>{var G,K,ee,W,P;try{const{auth:U}=await ac(async()=>{const{auth:te}=await Promise.resolve().then(()=>tte);return{auth:te}},void 0);console.log("🔍 Usuario actual:",(G=U.currentUser)==null?void 0:G.email);const z=await((K=U.currentUser)==null?void 0:K.getIdToken(!0));console.log("🔑 Token refreshed:",!!z);const J=await((ee=U.currentUser)==null?void 0:ee.getIdTokenResult());console.log("📋 Claims completos:",J==null?void 0:J.claims),console.log("👤 Profile claim:",(W=J==null?void 0:J.claims)==null?void 0:W.profile),((P=J==null?void 0:J.claims)==null?void 0:P.profile)==="SUBDIRECCION"?y("✅ Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):y(`❌ Custom claim faltante. Claims: ${JSON.stringify(J==null?void 0:J.claims)}`)}catch(U){console.error("❌ Error verificando token:",U),y(`Error verificando token: ${U.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:"🔍 Token"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:c?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[i.jsx("div",{children:i.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:G=>f(G.target.value),className:Z})}),i.jsx("div",{children:i.jsxs("select",{value:h,onChange:G=>m(G.target.value),className:Z,children:[i.jsx("option",{value:"",children:"Todos los perfiles"}),WK.map(G=>i.jsx("option",{value:G,children:G},G))]})}),i.jsx("div",{children:i.jsxs("select",{value:g,onChange:G=>x(G.target.value),className:Z,children:[i.jsx("option",{value:"",children:"Todos los cursos"}),V.map(G=>i.jsx("option",{value:G,children:G},G))]})})]}),r?i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:q.map(G=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:G.nombreCompleto}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:G.email}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:i.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${G.profile===Gt.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":G.profile===Gt.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:G.profile})}),i.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[G.profile===Gt.ESTUDIANTE&&i.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:G.curso||"Sin curso"}),G.profile===Gt.PROFESORADO&&i.jsxs("div",{className:"space-y-1",children:[G.cursos&&G.cursos.length>0&&i.jsxs("div",{children:[i.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),i.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[G.cursos.slice(0,3).map(K=>i.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:K},K)),G.cursos.length>3&&i.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",G.cursos.length-3]})]})]}),G.asignaturas&&G.asignaturas.length>0&&i.jsxs("div",{children:[i.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),i.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[G.asignaturas.slice(0,2).map(K=>i.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:K},K)),G.asignaturas.length>2&&i.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",G.asignaturas.length-2]})]})]}),(!G.cursos||G.cursos.length===0)&&(!G.asignaturas||G.asignaturas.length===0)&&i.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),G.profile!==Gt.ESTUDIANTE&&G.profile!==Gt.PROFESORADO&&i.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[i.jsx("button",{onClick:()=>R(G),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),i.jsx("button",{onClick:()=>k(G.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},G.email))})]}),q.length===0&&i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),a==="Monitor de Uso"&&i.jsx(pYe,{})]})},kb="seguimiento_dual_records",xYe=e=>{const t=e.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:e.id,...t,fechaDesvinculacion:r(t.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(t.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(t.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(t.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(t.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(t.fechaSupervisionExcepcional)}},vYe=e=>{const t=Vt(pt(lt,kb),cr("nombreEstudiante","asc"));return hr(t,n=>{const a=n.docs.map(s=>xYe(s));e(a)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),e([])})},OS=e=>{const t={...e};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{t[n]&&typeof t[n]=="string"&&(t[n]=ir.fromDate(new Date(t[n]+"T00:00:00")))}),t},bYe=async e=>{try{const t=OS(e);return(await an(pt(lt,kb),t)).id}catch(t){throw console.error("Error al crear el registro:",t),new Error("No se pudo crear el registro de seguimiento.")}},XK=async(e,t)=>{try{const r=rr(lt,kb,e),n=OS(t);await yi(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},yYe=async e=>{try{const t=rr(lt,kb,e);await ka(t)}catch(t){throw console.error("Error al eliminar el registro:",t),new Error("No se pudo eliminar el registro.")}},wYe=async e=>{const t=Ug(lt),r=pt(lt,kb);let n=0,a=0;for(const s of e){const o=Vt(r,wr("rutEstudiante","==",s.rutEstudiante)),l=await mn(o);if(l.empty){const c=rr(r);t.set(c,OS(s)),a++}else{const c=l.docs[0].id,u=rr(lt,kb,c);t.set(u,OS(s),{merge:!0}),n++}}return await t.commit(),{updated:n,created:a}},EYe={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},NYe=e=>{if(!e||e===""||e==="N/A"||e==="Pendiente")return null;try{if(typeof e=="number"){const t=new Date(1900,0,1),r=new Date(t.getTime()+(e-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(e instanceof Date)return isNaN(e.getTime())?null:e.toISOString().split("T")[0];if(typeof e=="string"){const t=e.trim();if(t==="")return null;const r=new Date(t);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(t){return console.warn("Error parsing date:",e,t),null}},CYe=e=>{if(typeof e=="boolean")return e;if(typeof e=="string"){const t=e.toLowerCase().trim();return["true","verdadero","sí","si","yes","1","x"].includes(t)}return typeof e=="number"?e===1:!1},_Ye=({record:e,onSave:t,onClose:r})=>{const[n,a]=C.useState(e),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",o=c=>{const{name:u,value:d,type:f,checked:h}=c.target;a(m=>({...m,[u]:f==="checkbox"?h:d}))},l=()=>{t(n)};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:e.nombreEstudiante})]})]}),i.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f1s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),i.jsx("input",{id:`f1s1-${e.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f2s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),i.jsx("input",{id:`f2s1-${e.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]})]})]}),i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f1s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),i.jsx("input",{id:`f1s2-${e.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`f2s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),i.jsx("input",{id:`f2s2-${e.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]})]})]}),i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{htmlFor:`fex-${e.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),i.jsx("input",{id:`fex-${e.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:o,className:s})]}),i.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[i.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:o,className:"h-5 w-5 rounded text-amber-500"}),i.jsx("span",{children:"Realizada"})]})]})]}),i.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[i.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:`mg-nombre-${e.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),i.jsx("input",{id:`mg-nombre-${e.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:o,className:s+" mt-1"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:`mg-contacto-${e.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),i.jsx("input",{id:`mg-contacto-${e.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:o,className:s+" mt-1"})]})]})]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),i.jsx("button",{type:"button",onClick:l,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},SYe=()=>{const[e,t]=C.useState([]),[r,n]=C.useState(!0),a=C.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:Xp[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:uB[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[s,o]=C.useState(a),[l,c]=C.useState(null),[u,d]=C.useState(""),[f,h]=C.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[m,g]=C.useState(null),[x,v]=C.useState(null),[y,w]=C.useState(!1),[_,T]=C.useState(null);C.useEffect(()=>{n(!0);const G=vYe(K=>{t(K),n(!1)});return()=>G()},[]);const j=C.useCallback(G=>{const{name:K,value:ee}=G.target;o(W=>({...W,[K]:ee}))},[]),I=C.useCallback(G=>{const{name:K,value:ee}=G.target;h(W=>({...W,[K]:ee}))},[]),E=C.useCallback(()=>{o(a),c(null),g(null)},[a]),S=async G=>{G.preventDefault(),g(null);const ee=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(W=>{var P;return!((P=s[W])!=null&&P.trim())});if(ee){g(`El campo '${ee}' es obligatorio.`);return}try{l?await XK(l,s):await bYe(s),E()}catch(W){console.error(W),g("No se pudo guardar el registro.")}},B=C.useCallback(G=>{window.scrollTo({top:0,behavior:"smooth"}),c(G.id),o(G)},[]),M=async G=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await yYe(G)}catch(K){console.error(K),g("No se pudo eliminar el registro.")}},R=G=>{T(G),w(!0)},k=()=>{T(null),w(!1)},D=async G=>{try{await XK(G.id,G),k()}catch(K){console.error(K),alert("No se pudieron guardar los cambios de supervisión.")}},L=()=>{const G=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],K=Ti.aoa_to_sheet([G]),ee=Ti.book_new();Ti.book_append_sheet(ee,K,"Plantilla"),lE(ee,"Plantilla_Seguimiento_Dual.xlsx")},Z=G=>{var W;const K=(W=G.target.files)==null?void 0:W[0];if(!K)return;v({message:"Procesando archivo...",isError:!1});const ee=new FileReader;ee.onload=async P=>{var U;try{const z=new Uint8Array((U=P.target)==null?void 0:U.result),J=fb(z,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),te=J.SheetNames[0],se=J.Sheets[te],ie=Ti.sheet_to_json(se,{raw:!1,dateNF:"yyyy-mm-dd"});if(ie.length===0)throw new Error("El archivo está vacío.");const ce={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},de=Object.keys(ie[0]).map(ke=>ke.trim().toLowerCase()),ae=["nombre","rut","curso 2025","empresa","estado"].find(ke=>!de.includes(ke));if(ae)throw new Error(`Falta la columna requerida: '${ae}'`);const Se=ie.map((ke,ve)=>{try{const le={};for(const be in ke){const Pe=ce[be.trim().toLowerCase()];if(Pe){let Ue=ke[be];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(Pe)?(Ue=NYe(Ue),Ue&&(le[Pe]=Ue)):Pe.includes("realizada")?le[Pe]=CYe(Ue):Ue!=null&&Ue!==""&&(le[Pe]=String(Ue).trim())}}return!le.nombreEstudiante||!le.rutEstudiante?(console.warn(`Fila ${ve+2}: Faltan campos requeridos`),null):le}catch(le){return console.error(`Error procesando fila ${ve+2}:`,le),null}}).filter(ke=>ke!==null);if(console.log("Registros procesados:",Se),Se.length>0){const{updated:ke,created:ve}=await wYe(Se);v({message:`Carga exitosa. ${ve} registros creados, ${ke} actualizados.`,isError:!1})}else v({message:"No se encontraron registros válidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(z){console.error("Error completo:",z),v({message:`Error al procesar el archivo: ${z.message}. Verifique que las fechas estén en formato correcto.`,isError:!0})}},ee.readAsArrayBuffer(K)},V="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",q=C.useMemo(()=>e.filter(G=>(u===""||G.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||G.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||G.rutEstudiante.includes(u))&&(f.curso===""||G.curso===f.curso)&&(f.empresa===""||G.nombreEmpresa===f.empresa)&&(f.estado===""||G.estado===f.estado)&&(f.comuna===""||G.comuna===f.comuna)&&(f.profesor===""||G.profesorTutorEmpresa===f.profesor)).sort((G,K)=>G.nombreEstudiante.localeCompare(K.nombreEstudiante)),[e,u,f]);return C.useMemo(()=>{const G=new Set,K=new Set;return e.forEach(ee=>{ee.nombreEmpresa&&G.add(ee.nombreEmpresa),ee.comuna&&K.add(ee.comuna)}),{empresas:Array.from(G).sort(),comunas:Array.from(K).sort()}},[e]),r?i.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-12 h-12 object-contain"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Práctica Dual"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:l?"Editando registro existente.":"Registre un nuevo estudiante en práctica."})]})]}),i.jsxs("form",{onSubmit:S,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),i.jsx("input",{type:"text",name:"nombreEstudiante",value:s.nombreEstudiante,onChange:j,className:V,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),i.jsx("input",{type:"text",name:"rutEstudiante",value:s.rutEstudiante,onChange:j,className:V,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),i.jsx("select",{name:"curso",value:s.curso,onChange:j,className:V,required:!0,children:Xp.map(G=>i.jsx("option",{value:G,children:G},G))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),i.jsxs("select",{name:"profesorTutorEmpresa",value:s.profesorTutorEmpresa,onChange:j,className:V,children:[i.jsx("option",{value:"",children:"Seleccione un profesor"}),AF.map(G=>i.jsx("option",{value:G,children:G},G))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),i.jsx("input",{type:"text",name:"nombreEmpresa",value:s.nombreEmpresa,onChange:j,className:V,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),i.jsx("input",{type:"text",name:"rutEmpresa",value:s.rutEmpresa,onChange:j,className:V})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),i.jsx("input",{type:"text",name:"direccionEmpresa",value:s.direccionEmpresa,onChange:j,className:V})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),i.jsx("input",{type:"text",name:"comuna",value:s.comuna,onChange:j,className:V})]}),i.jsxs("div",{className:"lg:col-span-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),i.jsx("select",{name:"estado",value:s.estado,onChange:j,className:V,children:uB.map(G=>i.jsx("option",{value:G,children:G},G))})]})]}),s.estado==="Desvinculado"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),i.jsx("input",{type:"date",name:"fechaDesvinculacion",value:s.fechaDesvinculacion||"",onChange:j,className:`${V} border-red-300`})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),i.jsx("input",{type:"text",name:"motivoDesvinculacion",value:s.motivoDesvinculacion||"",onChange:j,className:`${V} border-red-300`})]})]}),m&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:m}),i.jsxs("div",{className:"flex justify-end items-center gap-4",children:[l&&i.jsx("button",{type:"button",onClick:E,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:l?"Actualizar":"Agregar"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[i.jsx("button",{onClick:L,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),i.jsx("input",{type:"file",onChange:Z,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),x&&i.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${x.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x.message})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[i.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:G=>d(G.target.value),className:`${V} md:col-span-2 lg:col-span-1`}),i.jsxs("select",{name:"curso",value:f.curso,onChange:I,className:V,children:[i.jsx("option",{value:"",children:"Todos los Cursos"}),Xp.map(G=>i.jsx("option",{children:G},G))]}),i.jsxs("select",{name:"estado",value:f.estado,onChange:I,className:V,children:[i.jsx("option",{value:"",children:"Todos los Estados"}),uB.map(G=>i.jsx("option",{children:G},G))]}),i.jsxs("select",{name:"profesor",value:f.profesor,onChange:I,className:V,children:[i.jsx("option",{value:"",children:"Todos los Profesores"}),AF.map(G=>i.jsx("option",{children:G},G))]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:q.map(G=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[i.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:G.nombreEstudiante}),i.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:G.curso})]}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:G.nombreEmpresa}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:G.profesorTutorEmpresa}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${EYe[G.estado]}`,children:G.estado})}),i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[i.jsx("button",{onClick:()=>R(G),className:"text-blue-600 hover:underline",children:"Supervisión"}),i.jsx("button",{onClick:()=>B(G),className:"text-yellow-600 hover:underline",children:"Editar"}),i.jsx("button",{onClick:()=>M(G.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},G.id))})]})})]}),y&&_&&i.jsx(_Ye,{record:_,onClose:k,onSave:D})]})},fce="actividades_remotas",Ace="respuestas_actividades",hce="pruebas_estandarizadas",kYe="usuarios",mce=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(typeof e=="object"){if(typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if("seconds"in e&&"nanoseconds"in e){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}}return null},pM=e=>{const t=mce(e);return t?t.toISOString():void 0},DS=e=>{const t=mce(e);return t?t.toISOString().split("T")[0]:void 0},pce=e=>{if(!e)return null;const t=new Date(`${e}T00:00:00`);return isNaN(t.getTime())?null:ir.fromDate(t)},gce=e=>ir.fromDate(new Date(e||new Date().toISOString())),jYe=e=>!!e&&/^data:/.test(e),k2=e=>{if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(k2);const t={};return Object.entries(e).forEach(([r,n])=>{n!==void 0&&(t[r]=k2(n))}),t},BYe=e=>{const t=e.match(/^data:(.*?);base64,(.*)$/);if(!t)throw new Error("Data URL inválida");const r=t[1]||"application/octet-stream",n=t[2];let a="";if(typeof atob=="function")a=atob(n);else{const l=typeof Buffer<"u"?Buffer:null;if(l)a=l.from(n,"base64").toString("binary");else throw new Error("No hay decodificador base64 disponible")}const s=a.length,o=new Uint8Array(s);for(let l=0;l<s;l++)o[l]=a.charCodeAt(l);return{bytes:o,contentType:r}},TYe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:pM(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:DS(t.plazoEntrega)||DS(new Date)}},IYe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCompletado:pM(t.fechaCompletado)||new Date().toISOString()}},FYe=e=>{const t=e.data()||{};return{id:e.id,...t}},OYe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:pM(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:DS(t.plazoEntrega)||DS(new Date)}},DYe=e=>{const t=Vt(pt(lt,fce),cr("fechaCreacion","desc"));return hr(t,r=>e(r.docs.map(TYe)),r=>{console.error("subscribeToActividades error:",r),e([])})},PYe=(e,t)=>{const r=pt(lt,Ace),n=Vt(r,cr("fechaCompletado","desc"));return hr(n,a=>e(a.docs.map(IYe)),a=>{console.error("subscribeToRespuestas error:",a),e([])})},RYe=e=>{const t=Vt(pt(lt,kYe),cr("nombreCompleto","asc"));return hr(t,r=>e(r.docs.map(FYe)),r=>{console.error("subscribeToAllUsers error:",r),e([])})},LYe=e=>{const t=Vt(pt(lt,hce),cr("fechaCreacion","desc"));return hr(t,r=>e(r.docs.map(OYe)),r=>{console.error("subscribeToPruebasEstandarizadas error:",r),e([])})},MYe=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=k2({...a,fechaCreacion:gce(r),plazoEntrega:pce(n)});return(await an(pt(lt,fce),s)).id},UYe=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=k2({...a,fechaCreacion:gce(r),plazoEntrega:pce(n)});return(await an(pt(lt,hce),s)).id},QYe=async(e,t)=>{const r=k2(t);await Bl(rr(lt,Ace,e),r)},HYe=(e,t)=>{if(!t||t<=0)return"1.0";const n=t*.6;let a;return e>=n?a=4+3*(e-n)/(t-n+1e-9):a=1+3*e/(n+1e-9),a=Math.max(1,Math.min(7,a)),a.toFixed(1)},VYe=async(e,t,r)=>{const{bytes:n,contentType:a}=BYe(e),s=Date.now(),o=t.replace(/\s+/g,"_"),c=`recursos/${r!=="—"?r:"general"}/${s}/${o}`,u=J2(hte,c);await YP(u,n,{contentType:a});const d=await $k(u);return{nombre:t,url:d}},zYe=async e=>{var s;const t=e.nivel||"general",r=((s=e.recursos)==null?void 0:s.archivos)||[],n=await Promise.all(r.map(async(o,l)=>{if(jYe(o==null?void 0:o.url)){const c=(o==null?void 0:o.nombre)||`archivo_${l}.bin`;return VYe(o.url,c,t)}return{nombre:(o==null?void 0:o.nombre)||`archivo_${l}`,url:o==null?void 0:o.url}})),a={...e,recursos:{...e.recursos||{},archivos:n}};return MYe(a)},yy=e=>e?new Date(e).toLocaleDateString("es-CL"):"",$Ye=e=>e?new Date(e).toLocaleString("es-CL"):"",GYe=e=>new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(String(n.result)),n.onerror=a=>r(a)}),xce=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>n.includes("punto")||n.includes("Punto")||n.includes("Factor")||n.includes("factor")||n.includes("Criterio")||n.includes("criterio")||n.includes("Aspecto")||n.includes("aspecto"))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},fi=(e,t)=>{if(t&&xce(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>fi(a,`${t}-array-item`)).join(", ");if(Object.keys(e).some(a=>a.includes("punto")||a.includes("Punto")||a.includes("Factor")||a.includes("factor")||a.includes("Criterio")||a.includes("criterio")))return"[Rúbrica de evaluación]";const n=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of n)if(e[a]&&typeof e[a]=="string")return e[a];try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},ql=(e,t,...r)=>{if(xce(e,`extractTextSafely-${t}`),!e)return"";for(const n of r)if(e[n]){const a=fi(e[n],`${t}-${n}`);if(a&&a!=="[Objeto complejo]"&&a!=="[Objeto no serializable]")return a}return typeof e=="string"?e:"[Sin contenido disponible]"},Fa=({content:e,context:t="unknown"})=>{try{const r=fi(e,`UltraSafeRenderer-${t}`);return i.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),i.jsx("span",{children:"[Error al mostrar contenido]"})}},RI={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3,4,5]},LI=["Localizar información","Interpretar y relacionar","Reflexionar","Extraer información explícita","Realizar inferencias","Interpretar el sentido global del texto","Evaluar contenido y forma"],qYe=()=>{const[e,t]=C.useState([]),[r,n]=C.useState([]),[a,s]=C.useState([]),[o,l]=C.useState([]),[c,u]=C.useState(null),[d,f]=C.useState(null),[h,m]=C.useState(!1),[g,x]=C.useState(!1),[v,y]=C.useState(!1),[w,_]=C.useState(!1),[T,j]=C.useState(!1),[I,E]=C.useState(!0),[S,B]=C.useState(null),[M,R]=C.useState(""),[k,D]=C.useState(null),[L,Z]=C.useState(null),[V,q]=C.useState([]),[G,K]=C.useState("carpetas"),[ee,W]=C.useState(null),[P,U]=C.useState(null),[z,J]=C.useState([]),[te,se]=C.useState(""),ie={asignatura:Bs[0],nivel:"—",contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[ce,de]=C.useState(ie),Be={asignatura:Bs[0],nivel:"—",contenido:"",objetivosAprendizaje:"",plazoEntrega:new Date().toISOString().split("T")[0],cursosDestino:[],estudiantesDestino:[],duracionMinutos:90},[ae,Se]=C.useState(Be);C.useEffect(()=>{E(!0);const Ze=DYe(t),mt=LYe(n),Je=PYe(s),vt=RYe(Et=>{l(Et),E(!1)});return()=>{Ze(),mt(),Je(),vt()}},[]);const ke=Ze=>{de(mt=>({...mt,[Ze.target.name]:Ze.target.value}))},ve=Ze=>{Se(mt=>({...mt,[Ze.target.name]:Ze.target.value}))},le=Ze=>{de(mt=>({...mt,recursos:{...mt.recursos,[Ze.target.name]:Ze.target.value}}))},be=Ze=>{Ze.target.files&&q(Array.from(Ze.target.files))},Pe=Ze=>{de(mt=>{const Je=mt.tipos.includes(Ze)?mt.tipos.filter(Et=>Et!==Ze):[...mt.tipos,Ze],vt={...mt.cantidadPreguntas};return Je.includes(Ze)?vt[Ze]||(vt[Ze]=RI[Ze][0]):delete vt[Ze],{...mt,tipos:Je,cantidadPreguntas:vt}})},Ue=(Ze,mt)=>{de(Je=>({...Je,cantidadPreguntas:{...Je.cantidadPreguntas,[Ze]:mt}}))},pe=(Ze,mt=!1)=>{(mt?Se:de)(vt=>{const Et=vt.estudiantesDestino||[],bt=Et.includes(Ze)?Et.filter(ar=>ar!==Ze):[...Et,Ze];return{...vt,estudiantesDestino:bt}})},Oe=()=>{const{tipos:Ze,contenido:mt,asignatura:Je,nivel:vt,cantidadPreguntas:Et}=ce;let bt=`Eres un experto diseñador de actividades pedagógicas con énfasis en la Taxonomía de Bloom y metodologías activas de aprendizaje. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${mt}"
Asignatura: ${Je}
Nivel educativo: ${vt}

REQUISITOS PEDAGÓGICOS:
1. Asegura que las preguntas sean claras, concisas y libres de ambigüedades
2. Distribuye las preguntas según Taxonomía de Bloom: 20% conocimiento, 30% comprensión, 30% aplicación, 20% análisis/evaluación 
3. Evita preguntas demasiado simples o demasiado complejas para el nivel educativo
4. Incluye contextos reales y aplicaciones prácticas cuando sea posible
5. Para múltiple opción, todas las opciones deben ser plausibles (no incluir opciones obviamente incorrectas)
6. Las rúbricas de desarrollo deben incluir criterios específicos y niveles de desempeño claros
7. En comprensión lectora, genera textos originales y preguntas de distinta complejidad cognitiva

Genera los siguientes elementos:
- introduccion: breve y motivadora que contextualice el aprendizaje
- panelDidactico: Un objeto JSON con la siguiente estructura:
  {
    "titulo": "Título descriptivo del tema central",
    "subtitulos": [
      {
        "titulo": "Primer subtítulo",
        "texto": "Explicación detallada (80-120 palabras) con ejemplos y definiciones"
      },
      {
        "titulo": "Segundo subtítulo",
        "texto": "Explicación detallada (80-120 palabras) con ejemplos y definiciones"
      },
      {
        "titulo": "Tercer subtítulo (opcional)",
        "texto": "Explicación detallada (80-120 palabras) con ejemplos y definiciones"
      }
    ],
    "conceptosClave": [
      "Concepto 1: breve definición",
      "Concepto 2: breve definición",
      "Concepto 3: breve definición"
    ]
  }
  En total debe tener entre 300-500 palabras con contenido educativo detallado que explique los conceptos clave del tema, incluya ejemplos claros y conocimiento esencial que el estudiante necesita para responder las actividades.
- actividades: objeto con propiedades por tipo:
`;return Ze.forEach(ar=>{const xr=Et[ar]||RI[ar][0];switch(ar){case"Quiz":bt+=`- "Quiz": Array de ${xr} objetos { 
  pregunta: clara y contextualizada,
  opciones: array de 4 alternativas plausibles con opciones de distinta dificultad,
  respuestaCorrecta: la opción correcta (no ambigua),
  puntaje: 1 para cada pregunta
}
`;break;case"Comprensión de Lectura":bt+=`- "Comprensión de Lectura": Objeto { 
  texto: texto original de 200-300 palabras adaptado al nivel con información relevante,
  preguntas: Array de ${xr} objetos {
    pregunta: enfocadas en distintos niveles de comprensión (literal, inferencial y crítica),
    opciones: array de 4 alternativas plausibles sin pistas obvias,
    respuestaCorrecta: la opción correcta basada en el texto,
    puntaje: 1 para cada pregunta
  }
}
`;break;case"Términos Pareados":bt+=`- "Términos Pareados": Array de ${xr} objetos {
  concepto: término clave del contenido, claro y específico,
  definicion: explicación precisa y única que no sea ambigua
}
`;break;case"Desarrollo":bt+=`- "Desarrollo": Array de ${xr} objetos {
  pregunta: pregunta que fomente el pensamiento crítico y la aplicación de conocimientos,
  rubrica: criterios de evaluación detallados con niveles de desempeño específicos (sobresaliente, adecuado, en desarrollo, inicial)
}
`;break}}),bt+=`
EJEMPLOS DE ALTA CALIDAD POR TIPO:
`,Ze.includes("Quiz")&&(bt+=`
Quiz de ejemplo: {
  "pregunta": "En el contexto de la función fotosintética de las plantas, ¿qué ocurriría si una planta se expone a luz con longitudes de onda exclusivamente verdes?",
  "opciones": [
    "La planta aumentaría su tasa fotosintética debido a la mayor disponibilidad de luz",
    "La planta moriría inmediatamente por exceso de radiación",
    "La tasa fotosintética disminuiría significativamente ya que el pigmento clorofila refleja la luz verde",
    "No habría cambios en la fotosíntesis porque las plantas no dependen del espectro luminoso"
  ],
  "respuestaCorrecta": "La tasa fotosintética disminuiría significativamente ya que el pigmento clorofila refleja la luz verde",
  "puntaje": 1
}
`),Ze.includes("Comprensión de Lectura")&&(bt+=`
Comprensión de Lectura de ejemplo: {
  "texto": "La revolución industrial transformó profundamente las estructuras sociales y económicas de Europa durante el siglo XIX. El paso de una economía agraria y artesanal a una dominada por la industria y la manufactura mecanizada significó cambios sin precedentes en las condiciones laborales. Las jornadas extenuantes de 14-16 horas, el trabajo infantil y la falta de seguridad caracterizaron los primeros años de industrialización. No obstante, este periodo también representó un aumento en la producción de bienes, mejoras en el transporte y comunicaciones, y eventualmente, el surgimiento de una clase media con mayor acceso a productos manufacturados. Estos cambios sentaron las bases para movimientos obreros que, con el tiempo, lograron mejoras significativas en los derechos laborales que persisten hasta la actualidad.",
  "preguntas": [
    {
      "pregunta": "Según el texto, ¿cuál fue una consecuencia negativa inmediata de la revolución industrial?",
      "opciones": [
        "El desplome de los sistemas de transporte",
        "Las extenuantes jornadas laborales de 14-16 horas",
        "La disminución en la producción de bienes manufacturados",
        "La eliminación de la clase media europea"
      ],
      "respuestaCorrecta": "Las extenuantes jornadas laborales de 14-16 horas",
      "puntaje": 1
    }
  ]
}
`),bt},Le=()=>{const{contenido:Ze,objetivosAprendizaje:mt,asignatura:Je,nivel:vt}=ae;return`Eres un experto pedagogo especializado en evaluación educativa y diseño de pruebas estandarizadas tipo SIMCE.
Responde EXCLUSIVAMENTE con JSON válido según la estructura solicitada.

INFORMACIÓN CURRICULAR:
- Asignatura: ${Je}
- Nivel educativo: ${vt}
- Contenido principal: ${Ze}
- Objetivos de Aprendizaje: ${mt}

REQUISITOS PEDAGÓGICOS:
1. Genera preguntas equilibradas en dificultad: 25% básicas, 50% intermedias, 25% avanzadas
2. Usa contextos reales y significativos para los estudiantes
3. Distribuye las habilidades cognitivas de manera equilibrada según taxonomía SIMCE
4. Las preguntas deben evaluar aprendizajes significativos, no memorización de detalles irrelevantes
5. Los distractores (opciones incorrectas) deben ser plausibles y revelar concepciones erróneas comunes
6. Los textos deben ser originales, apropiados para el nivel, y con complejidad adecuada
7. Las preguntas deben evaluar distintos niveles de comprensión y aplicación

FORMATO REQUERIDO:
{
  "titulo": "Título descriptivo de la prueba",
  "instrucciones": "Instrucciones claras y detalladas para los estudiantes",
  "textos": [
    {
      "id": 1,
      "titulo": "Título representativo del texto",
      "contenido": "Texto original y apropiado de 250-350 palabras con complejidad adecuada al nivel",
      "tipo": "narrativo/informativo/argumentativo/poetico",
      "palabras": 300
    }
  ],
  "preguntas": [
    {
      "numero": 1,
      "pregunta": "Enunciado claro que evalúe una habilidad específica",
      "opciones": ["Alternativa correcta", "Distractor plausible 1", "Distractor plausible 2", "Distractor plausible 3"],
      "respuestaCorrecta": "A",
      "habilidad": "Habilidad SIMCE específica que evalúa",
      "justificacion": "Explicación pedagógica de por qué es correcta y los errores conceptuales en los distractores",
      "textoId": 1
    }
  ]
}

REQUISITOS ESPECÍFICOS:
- ${Je==="Lenguaje y Comunicación"||Je==="Lengua y Literatura"?"3-4 textos de distintos tipos (narrativo, informativo, argumentativo y/o poético) con temáticas complementarias":"2-3 textos informativos con contenido relevante para el objetivo de aprendizaje"}
- Exactamente 30 preguntas numeradas del 1 al 30
- 4 opciones por pregunta (A-D) con una única respuesta correcta
- Habilidades a evaluar según SIMCE: ${LI.join(", ")}
- Para preguntas basadas en textos: incluir el "textoId" correspondiente
- Sin comentarios, explicaciones ni marcas fuera de la estructura JSON

IMPORTANTE: Generar un instrumento de evaluación de ALTA CALIDAD que pueda ser usado directamente en un contexto escolar real.`};function Ge(Ze,mt){if(Ze==="Desarrollo"&&Array.isArray(mt))return mt.map((Je,vt)=>{if(typeof Je=="string"){const Et=Je.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return Et?{pregunta:ql(Et[1],`desarrollo-pregunta-${vt}`),rubrica:ql(Et[2],`desarrollo-rubrica-${vt}`)}:{pregunta:ql(Je,`desarrollo-pregunta-simple-${vt}`),rubrica:""}}if(Je&&typeof Je=="object"){const Et=ql(Je,`desarrollo-obj-pregunta-${vt}`,"pregunta","Pregunta","texto");let bt="";if(Je.rubrica||Je.Rubrica||Je.rúbrica||Je.Rúbrica){const ar=Je.rubrica||Je.Rubrica||Je.rúbrica||Je.Rúbrica;bt=fi(ar,`desarrollo-rubrica-${vt}`)}return{pregunta:Et,rubrica:bt}}return{pregunta:fi(Je,`desarrollo-fallback-${vt}`),rubrica:""}});if(Ze==="Términos Pareados"&&Array.isArray(mt))return mt.map((Je,vt)=>{if(typeof Je=="string"){const Et=Je.match(/^(.+?)[\s:-–]+(.+)$/);return Et?{id:vt,concepto:ql(Et[1],`pareados-concepto-${vt}`),definicion:ql(Et[2],`pareados-definicion-${vt}`)}:{id:vt,concepto:ql(Je,`pareados-concepto-simple-${vt}`),definicion:""}}return Je&&typeof Je=="object"?{id:vt,concepto:ql(Je,`pareados-obj-concepto-${vt}`,"concepto","termino"),definicion:ql(Je,`pareados-obj-definicion-${vt}`,"definicion","significado")}:{id:vt,concepto:fi(Je,`pareados-fallback-${vt}`),definicion:""}});if(Ze==="Comprensión de Lectura"){if(mt&&typeof mt=="object"&&!Array.isArray(mt)&&Array.isArray(mt.preguntas))return{texto:ql(mt,"comprension-texto","texto"),preguntas:mt.preguntas.map((Je,vt)=>({pregunta:ql(Je,`comprension-pregunta-${vt}`,"pregunta"),opciones:Array.isArray(Je.opciones)?Je.opciones.map(Et=>fi(Et,`comprension-opcion-${vt}`)):[],respuestaCorrecta:fi(Je.respuestaCorrecta,`comprension-respuesta-${vt}`),puntaje:typeof Je.puntaje=="number"?Je.puntaje:1}))};if(Array.isArray(mt)){const Je=mt.map((Et,bt)=>ql(Et,`comprension-bloque-${bt}`,"texto")).join(`

---

`),vt=mt.flatMap(Et=>Array.isArray(Et.preguntas)?Et.preguntas:[]);return{texto:Je,preguntas:vt.map((Et,bt)=>({pregunta:ql(Et,`comprension-combined-pregunta-${bt}`,"pregunta"),opciones:Array.isArray(Et.opciones)?Et.opciones.map(ar=>fi(ar,`comprension-combined-opcion-${bt}`)):[],respuestaCorrecta:fi(Et.respuestaCorrecta,`comprension-combined-respuesta-${bt}`),puntaje:typeof Et.puntaje=="number"?Et.puntaje:1}))}}}return Ze==="Quiz"&&Array.isArray(mt)?mt.map((Je,vt)=>({pregunta:ql(Je,`quiz-pregunta-${vt}`,"pregunta"),opciones:Array.isArray(Je.opciones)?Je.opciones.map(Et=>fi(Et,`quiz-opcion-${vt}`)):[],respuestaCorrecta:fi(Je.respuestaCorrecta,`quiz-respuesta-${vt}`),puntaje:typeof Je.puntaje=="number"?Je.puntaje:1})):mt}const et=async Ze=>{var mt;if(Ze.preventDefault(),!ce.contenido.trim()||ce.tipos.length===0){B("Contenido y al menos un tipo de actividad son obligatorios.");return}y(!0),B(null);try{const Je=await Promise.all(V.map(async je=>({nombre:je.name,url:await GYe(je)}))),vt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",bt=new Ps(vt).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{temperature:.7,topP:.9,topK:40,maxOutputTokens:8192}}),ar=Oe();let Zr=await(await(await bt.generateContent(ar)).response).text();Zr=Zr.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const Kr=Zr.match(/\{[\s\S]*\}/);if(!Kr)throw new Error("La IA no devolvió JSON válido.");const me=JSON.parse(Kr[0]),Ie={};for(const je of ce.tipos){const Fe=(mt=me.actividades)==null?void 0:mt[je];Ie[je]=Ge(je,Fe)}let _e="";me.panelDidactico&&(_e=typeof me.panelDidactico=="string"?me.panelDidactico:JSON.stringify(me.panelDidactico));const Ne={id:"",fechaCreacion:new Date().toISOString(),...ce,recursos:{...ce.recursos,archivos:Je},introduccion:fi(me.introduccion,"introduccion")||"Actividad generada para reforzar el aprendizaje.",panelDidactico:_e,generatedContent:Ie};D(Ne)}catch(Je){B(`Error al generar la actividad: ${(Je==null?void 0:Je.message)||Je}`)}finally{y(!1)}},ut=async Ze=>{if(Ze.preventDefault(),!ae.contenido.trim()||!ae.objetivosAprendizaje.trim()){B("Contenido y objetivos de aprendizaje son obligatorios.");return}y(!0),B(null);try{const mt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",vt=new Ps(mt).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{temperature:.65,topP:.85,topK:30,maxOutputTokens:12288}}),Et=Le();let xr=await(await(await vt.generateContent(Et)).response).text();xr=xr.replace(/```json\s*/gi,"").replace(/```\s*$/g,"").replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").trim();const Wr=xr.match(/\{[\s\S]*\}/);if(!Wr)throw new Error("No se encontró JSON válido en la respuesta.");const Zr=Wr[0].replace(/,(\s*[}\]])/g,"$1"),Kr=JSON.parse(Zr);if(!Kr.preguntas||!Array.isArray(Kr.preguntas))throw new Error("La respuesta de la IA no contiene un array de preguntas válido");const me=(Kr.textos||[]).map((Ne,je)=>({id:Ne.id||je+1,titulo:fi(Ne.titulo,`texto-titulo-${je}`)||`Texto ${je+1}`,contenido:fi(Ne.contenido,`texto-contenido-${je}`)||"Contenido no disponible",tipo:["narrativo","informativo","argumentativo","poetico"].includes(Ne.tipo)?Ne.tipo:"informativo",palabras:Ne.palabras||(Ne.contenido?String(Ne.contenido).split(" ").length:0)})),Ie=Kr.preguntas.slice(0,30).map((Ne,je)=>({numero:Ne.numero||je+1,pregunta:fi(Ne.pregunta,`pregunta-${je}`)||`Pregunta ${je+1}`,opciones:Array.isArray(Ne.opciones)&&Ne.opciones.length>=4?Ne.opciones.slice(0,4).map((Fe,Ye)=>fi(Fe,`pregunta-opcion-${je}-${Ye}`)):["A","B","C","D"],respuestaCorrecta:["A","B","C","D"].includes(Ne.respuestaCorrecta)?Ne.respuestaCorrecta:"A",habilidad:LI.includes(Ne.habilidad)?Ne.habilidad:LI[0],justificacion:fi(Ne.justificacion,`justificacion-${je}`)||"Justificación no disponible",...Ne.textoId&&typeof Ne.textoId=="number"?{textoId:Ne.textoId}:{}})),_e={id:"",fechaCreacion:new Date().toISOString(),...ae,titulo:fi(Kr.titulo,"prueba-titulo")||`Prueba ${ae.asignatura}`,instrucciones:fi(Kr.instrucciones,"prueba-instrucciones")||"Lee y responde.",textos:me,preguntas:Ie};Z(_e)}catch(mt){B(`Error al generar la prueba: ${(mt==null?void 0:mt.message)||mt}`)}finally{y(!1)}},xt=async()=>{if(k)try{_(!0),await zYe(k),de(ie),q([]),m(!1),D(null)}catch(Ze){console.error("Error al guardar la actividad con archivos:",Ze),B("No se pudo guardar la actividad. Revisa los archivos adjuntos.")}finally{_(!1)}},It=async()=>{if(L)try{_(!0);const Ze={...L,cursosDestino:L.cursosDestino||[],estudiantesDestino:L.estudiantesDestino||[],textos:L.textos||[],preguntas:L.preguntas.map(mt=>({...mt,textoId:mt.textoId||null}))};await UYe(Ze),Se(Be),x(!1),Z(null)}catch(Ze){console.error("Error al guardar la prueba:",Ze),B("No se pudo guardar la prueba.")}finally{_(!1)}},Mt=C.useMemo(()=>{var Je,vt,Et;const Ze=c||d;if(!Ze||!o.length)return[];const mt=new Map;return!((Je=Ze.cursosDestino)!=null&&Je.length)&&!((vt=Ze.estudiantesDestino)!=null&&vt.length)?[]:((Et=Ze.estudiantesDestino)!=null&&Et.length&&o.filter(bt=>bt.profile===Gt.ESTUDIANTE&&Ze.estudiantesDestino.includes(bt.nombreCompleto)).forEach(bt=>mt.set(bt.id,bt)),Array.from(mt.values()).sort((bt,ar)=>bt.nombreCompleto.localeCompare(ar.nombreCompleto)))},[c,d,o]),Pt=C.useMemo(()=>{const Ze=(c==null?void 0:c.id)||(d==null?void 0:d.id);return a.filter(mt=>mt.actividadId===Ze)},[a,c,d]),Ht=C.useMemo(()=>o.filter(Ze=>Ze.profile===Gt.ESTUDIANTE).sort((Ze,mt)=>Ze.nombreCompleto.localeCompare(mt.nombreCompleto)),[o]),wt=C.useMemo(()=>M.trim()?Ht.filter(Ze=>Ze.nombreCompleto.toLowerCase().includes(M.toLowerCase())):Ht,[Ht,M]),Tr=C.useMemo(()=>{const Ze=new Set;return e.forEach(mt=>{(mt.estudiantesDestino||[]).forEach(Je=>{const vt=o.find(Et=>Et.profile===Gt.ESTUDIANTE&&Et.nombreCompleto===Je);vt&&Ze.add(vt.id)})}),r.forEach(mt=>{(mt.estudiantesDestino||[]).forEach(Je=>{const vt=o.find(Et=>Et.profile===Gt.ESTUDIANTE&&Et.nombreCompleto===Je);vt&&Ze.add(vt.id)})}),a.forEach(mt=>Ze.add(mt.estudianteId)),o.filter(mt=>mt.profile===Gt.ESTUDIANTE&&Ze.has(mt.id)).sort((mt,Je)=>mt.nombreCompleto.localeCompare(Je.nombreCompleto))},[e,r,a,o]),tr=C.useMemo(()=>o.find(Ze=>Ze.id===ee)||null,[o,ee]),sn=C.useMemo(()=>{if(!tr)return{asignadas:[],respuestas:[]};const Ze=[...e.filter(Je=>(Je.estudiantesDestino||[]).includes(tr.nombreCompleto)).map(Je=>({tipo:"Actividad",item:Je})),...r.filter(Je=>(Je.estudiantesDestino||[]).includes(tr.nombreCompleto)).map(Je=>({tipo:"Prueba",item:Je}))],mt=a.filter(Je=>Je.estudianteId===tr.id);return{asignadas:Ze,respuestas:mt}},[tr,e,r,a]),kr=()=>i.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[["carpetas","actividades","pruebas"].map(Ze=>i.jsxs("button",{onClick:()=>{K(Ze),u(null),f(null),W(null)},className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition
            ${G===Ze?"bg-amber-500 text-white shadow":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:[Ze==="carpetas"&&i.jsx(pH,{size:18}),Ze==="actividades"&&i.jsx(Md,{size:18}),Ze==="pruebas"&&i.jsx(ite,{size:18}),Ze==="carpetas"?"Carpetas de Estudiantes":Ze==="actividades"?"Actividades Remotas":"Pruebas Estandarizadas"]},Ze)),i.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Xb,{className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-60",size:18}),i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:M,onChange:Ze=>R(Ze.target.value),className:"pl-10 pr-3 py-2 rounded-xl bg-white border border-slate-200 focus:outline-none focus:ring-2 focus:ring-amber-400"})]}),G==="actividades"&&!k&&!c&&i.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[i.jsx(qN,{size:18})," Nueva"]}),G==="pruebas"&&!L&&!d&&i.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[i.jsx(qN,{size:18})," Nueva"]})]})]}),$r=()=>{const Ze=M?wt:Tr;return Ze.length?i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4",children:Ze.map(mt=>{const Je=a.filter(bt=>bt.estudianteId===mt.id),vt=Je.length,Et=e.filter(bt=>(bt.estudiantesDestino||[]).includes(mt.nombreCompleto)).length+r.filter(bt=>(bt.estudiantesDestino||[]).includes(mt.nombreCompleto)).length;return i.jsxs("button",{onClick:()=>W(mt.id),className:"group text-left rounded-2xl border border-slate-200 bg-white hover:shadow-md transition overflow-hidden",children:[i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gradient-to-br from-amber-50 to-white",children:[i.jsx("div",{className:"rounded-xl p-3 bg-amber-100 text-amber-700",children:i.jsx(pH,{})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"font-semibold text-slate-800 truncate",children:mt.nombreCompleto}),i.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[i.jsx(Yw,{size:14})," ",mt.curso||"—"]})]})]}),i.jsxs("div",{className:"p-4 grid grid-cols-3 text-center text-sm text-slate-600",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:Et}),i.jsx("p",{className:"text-xs",children:"Asignadas"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:vt}),i.jsx("p",{className:"text-xs",children:"Entregas"})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(Gf,{size:16,className:"opacity-70"}),i.jsx("span",{className:"text-xs mt-1",children:Je.length?yy(Je.sort((bt,ar)=>(bt.fechaCompletado||"").localeCompare(ar.fechaCompletado||"")).slice(-1)[0].fechaCompletado):"—"})]})]})]},mt.id)})}):i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow text-center text-slate-500",children:"No hay estudiantes asignados aún."})},Fn=()=>{if(!tr)return null;const{asignadas:Ze,respuestas:mt}=sn;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsxs("button",{onClick:()=>W(null),className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900",children:[i.jsx(GN,{size:18})," Volver"]}),i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Historial — ",tr.nombreCompleto]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipo"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Título / Asignatura"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Plazo"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Ze.map(({tipo:Je,item:vt})=>{var xr;const Et=mt.find(Wr=>Wr.actividadId===vt.id),bt=Je==="Actividad"?`${vt.asignatura} — ${(xr=vt.tipos)==null?void 0:xr.join(", ")}`:vt.titulo,ar=vt.plazoEntrega?yy(vt.plazoEntrega):"—";return i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-4 py-3 text-sm",children:Je}),i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:i.jsx(Fa,{content:bt,context:"hist-titulo"})}),i.jsx("td",{className:"px-4 py-3 text-sm",children:ar}),i.jsx("td",{className:"px-4 py-3 text-sm",children:Et?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[i.jsx(es,{size:14})," Completado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:[i.jsx(Gf,{size:14})," Pendiente"]})}),i.jsx("td",{className:"px-4 py-3 text-sm",children:Et?`${Et.puntaje}/${Et.puntajeMaximo}`:"—"}),i.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:Et?Et.nota:"—"})]},vt.id)})})]})})]})},Pr=()=>{var Ze,mt,Je;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c?i.jsxs(i.Fragment,{children:[i.jsx(Fa,{content:c.asignatura,context:"actividad-asignatura"})," - ",c.tipos.join(", ")]}):i.jsx(Fa,{content:(d==null?void 0:d.titulo)||"Prueba Estandarizada",context:"prueba-titulo"})}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Plazo:"," ",yy((c==null?void 0:c.plazoEntrega)||(d==null?void 0:d.plazoEntrega)),d&&` | Duración: ${d.duracionMinutos} min`]})]}),i.jsxs("button",{onClick:()=>{u(null),f(null)},className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[i.jsx(GN,{size:18})," Volver al listado"]})]}),i.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"}),((Ze=c==null?void 0:c.tipos)==null?void 0:Ze.includes("Desarrollo"))&&i.jsx("th",{className:"px-4 py-3"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Mt.map(vt=>{var bt;const Et=Pt.find(ar=>ar.estudianteId===vt.id);return i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:vt.nombreCompleto}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Et?i.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):i.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Et?`${Et.puntaje}/${Et.puntajeMaximo}`:"-"}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-bold",children:Et?i.jsx("span",{className:parseFloat(Et.nota)>=4?"text-green-600":"text-red-600",children:Et.nota}):"-"}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Et?$Ye(Et.fechaCompletado):"-"}),((bt=c==null?void 0:c.tipos)==null?void 0:bt.includes("Desarrollo"))&&i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Et?i.jsx("button",{onClick:()=>{var xr,Wr,Zr;U(Et);const ar=Array.from({length:((Wr=(xr=c.generatedContent)==null?void 0:xr.Desarrollo)==null?void 0:Wr.length)||0},(Kr,me)=>({index:me,puntaje:0,observacion:""}));J(ar),se(((Zr=Et==null?void 0:Et.revisionDocente)==null?void 0:Zr.observacionesGenerales)||"")},className:"text-blue-600 hover:text-blue-800 font-semibold",children:"Revisar Desarrollo"}):i.jsx("span",{className:"text-slate-400",children:"-"})})]},vt.id)})})]})})]}),P&&((mt=c==null?void 0:c.tipos)==null?void 0:mt.includes("Desarrollo"))&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Revisión de Desarrollo — ",(P==null?void 0:P.estudianteNombre)||""]}),i.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto",children:(((Je=c.generatedContent)==null?void 0:Je.Desarrollo)||[]).map((vt,Et)=>{var bt,ar;return i.jsxs("div",{className:"p-3 border rounded-lg",children:[i.jsxs("p",{className:"font-semibold",children:[Et+1,". ",i.jsx(Fa,{content:vt.pregunta,context:`revision-pregunta-${Et}`})]}),vt.rubrica&&i.jsxs("p",{className:"text-xs text-slate-600 mt-2 bg-slate-50 p-2 rounded",children:[i.jsx("strong",{children:"Rúbrica:"})," ",i.jsx(Fa,{content:vt.rubrica,context:`revision-rubrica-${Et}`})]}),i.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[i.jsx("label",{className:"text-sm text-slate-700",children:"Puntaje:"}),i.jsx("input",{type:"number",min:0,step:.5,value:((bt=z[Et])==null?void 0:bt.puntaje)??0,onChange:xr=>{const Wr=Number(xr.target.value)||0;J(Zr=>{const Kr=[...Zr];return Kr[Et]={...Kr[Et]||{index:Et,puntaje:0},puntaje:Wr},Kr})},className:"w-24 border-slate-300 rounded-md"}),i.jsx("input",{type:"text",placeholder:"Observación (opcional)",value:((ar=z[Et])==null?void 0:ar.observacion)||"",onChange:xr=>{const Wr=xr.target.value;J(Zr=>{const Kr=[...Zr];return Kr[Et]={...Kr[Et]||{index:Et,puntaje:0},observacion:Wr},Kr})},className:"flex-1 border-slate-300 rounded-md"})]})]},Et)})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Observaciones Generales"}),i.jsx("textarea",{rows:3,value:te,onChange:vt=>se(vt.target.value),className:"w-full border-slate-300 rounded-md"})]}),i.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>{U(null),J([]),se("")},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{onClick:async()=>{if(P)try{j(!0);const vt=Number(P.puntaje)||0,Et=Number(P.puntajeMaximo)||0,bt=(z||[]).reduce((Wr,Zr)=>Wr+(Number(Zr.puntaje)||0),0),ar=vt+bt,xr=HYe(ar,Et);await QYe(P.id,{puntaje:ar,puntajeMaximo:Et,nota:xr,revisionDocente:{completada:!0,observacionesGenerales:te||"",detalle:z||[],puntajeDocente:bt}}),U(null),J([]),se("")}catch(vt){console.error("Error guardando revisión:",vt),B("No se pudo guardar la revisión del docente.")}finally{j(!1)}},disabled:T,className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:T?"Guardando...":"Guardar Revisión"})]})]})})]})},ms=()=>{var Ze,mt;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),i.jsxs("button",{onClick:()=>m(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[i.jsx(GN,{size:18})," Volver"]})]}),i.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad."}),i.jsxs("form",{onSubmit:et,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),i.jsx("select",{name:"asignatura",value:ce.asignatura,onChange:ke,className:"w-full border-slate-300 rounded-md shadow-sm",children:Bs.map(Je=>i.jsx("option",{value:Je,children:Je},Je))})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos (Opcional)"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones"}),i.jsx("textarea",{name:"instrucciones",value:(Ze=ce.recursos)==null?void 0:Ze.instrucciones,onChange:le,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Ej: Lee y luego responde..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces"}),i.jsx("textarea",{name:"enlaces",value:(mt=ce.recursos)==null?void 0:mt.enlaces,onChange:le,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Pega un enlace por línea..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos"}),i.jsx("input",{type:"file",multiple:!0,onChange:be,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Sólo estudiantes)"}),i.jsxs("div",{children:[i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:M,onChange:Je=>R(Je.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(M?wt:Ht).map(Je=>{var vt;return i.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(vt=ce.estudiantesDestino)==null?void 0:vt.includes(Je.nombreCompleto),onChange:()=>pe(Je.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Je.nombreCompleto,children:Je.nombreCompleto})]},Je.id)})})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{name:"contenido",value:ce.contenido,onChange:ke,required:!0,rows:4,placeholder:"Temas, conceptos clave o texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),i.jsx("input",{type:"date",name:"plazoEntrega",value:ce.plazoEntrega,onChange:ke,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),i.jsx("div",{className:"space-y-3",children:Kye.map(Je=>i.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:ce.tipos.includes(Je),onChange:()=>Pe(Je),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:Je})]}),ce.tipos.includes(Je)&&i.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),RI[Je].map(vt=>i.jsx("button",{type:"button",onClick:()=>Ue(Je,vt),className:`px-3 py-1 rounded-full font-semibold text-xs ${ce.cantidadPreguntas[Je]===vt?"bg-amber-500 text-white":"bg-slate-200"}`,children:vt},vt))]})]},Je))})]})]}),S&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-2",children:S}),i.jsx("div",{className:"pt-2 text-right",children:i.jsxs("button",{type:"submit",disabled:v,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center justify-center gap-2",children:[v?i.jsx(Gf,{className:"animate-spin",size:18}):null,v?"Generando...":"Generar y Previsualizar"]})})]})]})},pn=()=>{var Ze;return i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),i.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar."}),i.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[i.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Fa,{content:k==null?void 0:k.introduccion,context:"preview-introduccion"})})]}),(k==null?void 0:k.panelDidactico)&&i.jsxs("div",{className:"p-5 bg-emerald-50 border-l-4 border-emerald-500 rounded-r-lg shadow-md",children:[i.jsxs("h3",{className:"font-bold text-emerald-800 text-lg mb-3 flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Panel Didáctico - Material de Apoyo"]}),i.jsx("div",{className:"prose prose-emerald max-w-none text-slate-700",children:(()=>{try{if(typeof k.panelDidactico=="string"&&k.panelDidactico.trim().startsWith("{")){const mt=JSON.parse(k.panelDidactico);return i.jsxs("div",{className:"space-y-4",children:[mt.titulo&&i.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:mt.titulo}),Array.isArray(mt.subtitulos)&&mt.subtitulos.map((Je,vt)=>i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:Je.titulo}),i.jsx("p",{className:"whitespace-pre-line",children:Je.texto})]},vt)),Array.isArray(mt.conceptosClave)&&mt.conceptosClave.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:"Conceptos Clave"}),i.jsx("ul",{className:"list-disc pl-5 space-y-1",children:mt.conceptosClave.map((Je,vt)=>i.jsx("li",{className:"text-emerald-800",children:Je},vt))})]}),!mt.subtitulos&&!mt.conceptosClave&&i.jsx("div",{className:"whitespace-pre-line",children:JSON.stringify(mt,null,2)})]})}return i.jsx("p",{className:"whitespace-pre-wrap",children:k.panelDidactico})}catch{return i.jsx("p",{className:"whitespace-pre-wrap",children:k.panelDidactico})}})()})]}),(k==null?void 0:k.recursos)&&(k.recursos.instrucciones||k.recursos.enlaces||((Ze=k.recursos.archivos)==null?void 0:Ze.length))&&i.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),i.jsxs("div",{className:"space-y-3",children:[k.recursos.instrucciones&&i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Fa,{content:k.recursos.instrucciones,context:"preview-instrucciones"})}),k.recursos.enlaces&&i.jsx("div",{children:k.recursos.enlaces.split(`
`).map((mt,Je)=>mt.trim()&&i.jsx("a",{href:mt,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:mt},Je))}),k.recursos.archivos&&k.recursos.archivos.length>0&&i.jsx("ul",{className:"list-disc list-inside",children:k.recursos.archivos.map(mt=>i.jsx("li",{className:"text-slate-700",children:mt.nombre},mt.nombre))})]})]}),k==null?void 0:k.tipos.map(mt=>{const Je=k.generatedContent[mt];return Je?i.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:mt}),i.jsxs("div",{className:"space-y-4 text-sm",children:[mt==="Quiz"&&Array.isArray(Je)&&Je.map((vt,Et)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[Et+1,". ",i.jsx(Fa,{content:vt.pregunta,context:`preview-quiz-pregunta-${Et}`})]}),i.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:vt.opciones.map((bt,ar)=>i.jsxs("li",{children:[i.jsxs("strong",{children:[String.fromCharCode(65+ar),"."]})," ",i.jsx(Fa,{content:bt,context:`preview-quiz-opcion-${Et}-${ar}`})]},ar))}),i.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",i.jsx(Fa,{content:vt.respuestaCorrecta,context:`preview-quiz-respuesta-${Et}`})]})]},Et)),mt==="Comprensión de Lectura"&&Je&&typeof Je=="object"&&"preguntas"in Je&&Array.isArray(Je.preguntas)&&i.jsxs("div",{children:[i.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:i.jsx(Fa,{content:Je.texto,context:"preview-lectura-texto"})}),Je.preguntas.map((vt,Et)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[Et+1,". ",i.jsx(Fa,{content:vt.pregunta,context:`preview-lectura-pregunta-${Et}`})]}),i.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:vt.opciones.map((bt,ar)=>i.jsxs("li",{children:[i.jsxs("strong",{children:[String.fromCharCode(65+ar),"."]})," ",i.jsx(Fa,{content:bt,context:`preview-lectura-opcion-${Et}-${ar}`})]},ar))}),i.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",i.jsx(Fa,{content:vt.respuestaCorrecta,context:`preview-lectura-respuesta-${Et}`})]})]},Et))]}),mt==="Términos Pareados"&&Array.isArray(Je)&&i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border border-slate-200",children:[i.jsx("thead",{className:"bg-slate-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),i.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definición"})]})}),i.jsx("tbody",{children:Je.map((vt,Et)=>i.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[i.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:i.jsx(Fa,{content:vt.concepto,context:`preview-pareado-concepto-${Et}`})}),i.jsx("td",{className:"p-2 align-top text-slate-700",children:i.jsx(Fa,{content:vt.definicion,context:`preview-pareado-definicion-${Et}`})})]},vt.id))})]})}),mt==="Desarrollo"&&Array.isArray(Je)&&Je.map((vt,Et)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[Et+1,". ",i.jsx(Fa,{content:vt.pregunta,context:`preview-desarrollo-pregunta-${Et}`})]}),i.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[i.jsx("strong",{className:"font-semibold",children:"Rúbrica:"})," ",i.jsx(Fa,{content:vt.rubrica,context:`preview-desarrollo-rubrica-${Et}`})]})]},Et))]})]},mt):null})]}),i.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>D(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{onClick:xt,disabled:w,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:w?"Guardando...":"Confirmar y Asignar"})]})]})},la=()=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify_between items-start",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Prueba Estandarizada"}),i.jsxs("button",{onClick:()=>x(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[i.jsx(GN,{size:18})," Volver"]})]}),i.jsxs("form",{onSubmit:ut,className:"space-y-6 mt-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),i.jsx("select",{name:"asignatura",value:ae.asignatura,onChange:ve,className:"w-full border-slate-300 rounded-md shadow-sm",children:Bs.map(Ze=>i.jsx("option",{value:Ze,children:Ze},Ze))})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Objetivos de Aprendizaje"}),i.jsx("textarea",{name:"objetivosAprendizaje",value:ae.objetivosAprendizaje,onChange:ve,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Describe OA o contenidos evaluados..."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contenido Base"}),i.jsx("textarea",{name:"contenido",value:ae.contenido,onChange:ve,rows:4,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),i.jsx("input",{type:"date",name:"plazoEntrega",value:ae.plazoEntrega,onChange:ve,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Sólo estudiantes)"}),i.jsxs("div",{children:[i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:M,onChange:Ze=>R(Ze.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(M?wt:Ht).map(Ze=>{var mt;return i.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(mt=ae.estudiantesDestino)==null?void 0:mt.includes(Ze.nombreCompleto),onChange:()=>pe(Ze.nombreCompleto,!0),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Ze.nombreCompleto,children:Ze.nombreCompleto})]},Ze.id)})})]})]})]}),S&&i.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:S}),i.jsx("div",{className:"text-right",children:i.jsxs("button",{type:"submit",disabled:v,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center gap-2",children:[v?i.jsx(Gf,{className:"animate-spin",size:18}):null,v?"Generando...":"Generar y Previsualizar"]})})]})]}),Ba=()=>{var Ze,mt;return i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización Prueba"}),i.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa y confirma."}),i.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[i.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:i.jsx(Fa,{content:L==null?void 0:L.titulo,context:"preview-prueba-titulo"})}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Fa,{content:L==null?void 0:L.instrucciones,context:"preview-prueba-instrucciones"})})]}),(Ze=L==null?void 0:L.textos)!=null&&Ze.length?i.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[i.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Textos"}),i.jsx("ol",{className:"space-y-2 list-decimal list-inside",children:L.textos.map((Je,vt)=>i.jsxs("li",{children:[i.jsxs("p",{className:"font-semibold",children:[i.jsx(Fa,{content:Je.titulo,context:`preview-texto-titulo-${vt}`}),i.jsxs("span",{className:"text-xs text-slate-500",children:["(",Je.tipo,")"]})]}),i.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap mt-1",children:i.jsx(Fa,{content:Je.contenido,context:`preview-texto-contenido-${vt}`})})]},Je.id))})]}):null,(mt=L==null?void 0:L.preguntas)!=null&&mt.length?i.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Preguntas (muestra)"}),L.preguntas.slice(0,10).map((Je,vt)=>i.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[i.jsxs("p",{className:"font-semibold",children:[Je.numero,". ",i.jsx(Fa,{content:Je.pregunta,context:`preview-pregunta-texto-${vt}`})]}),i.jsx("ul",{className:"list-disc pl-6 text-sm mt-1",children:Je.opciones.map((Et,bt)=>i.jsx("li",{children:i.jsx(Fa,{content:Et,context:`preview-pregunta-opcion-${vt}-${bt}`})},bt))}),i.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-1",children:["Correcta: ",Je.respuestaCorrecta]})]},Je.numero))]}):null]}),i.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>Z(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),i.jsx("button",{onClick:It,disabled:w,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:w?"Guardando...":"Confirmar y Asignar"})]})]})},rn=()=>i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),i.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[i.jsx(qN,{size:18})," Crear Nueva"]})]}),i.jsx("div",{className:"space-y-4",children:e.length>0?e.map(Ze=>{var vt;const mt=[];(vt=Ze.estudiantesDestino)!=null&&vt.length&&mt.push(`Estudiantes: ${Ze.estudiantesDestino.length}`);const Je=mt.length?mt.join(" | "):"Estudiantes seleccionados";return i.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800",children:[i.jsx(Fa,{content:Ze.asignatura,context:`lista-asignatura-${Ze.id}`})," — ",Ze.tipos.join(", ")]}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",Je," | Creado: ",yy(Ze.fechaCreacion)]})]}),i.jsx("button",{onClick:()=>u(Ze),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},Ze.id)}):i.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Use "Crear Nueva".'})})]}),gr=()=>i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Pruebas Estandarizadas"}),i.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[i.jsx(qN,{size:18})," Crear Nueva"]})]}),i.jsx("div",{className:"space-y-4",children:r.length>0?r.map(Ze=>i.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800",children:i.jsx(Fa,{content:Ze.titulo,context:`lista-prueba-titulo-${Ze.id}`})}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Creado: ",yy(Ze.fechaCreacion)]})]}),i.jsx("button",{onClick:()=>f(Ze),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},Ze.id)):i.jsx("p",{className:"text-slate-500 text-center py-6",children:"No hay pruebas creadas."})})]});return I?i.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):i.jsxs("div",{className:"animate-fade-in",children:[kr(),ee?Fn():L?Ba():k?pn():c||d?Pr():G==="pruebas"?g?la():gr():G==="actividades"?h?ms():rn():$r()]})},KYe="actividades_remotas",gM="respuestas_actividades",vce=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(e&&typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if(e&&typeof e.seconds=="number"&&typeof e.nanoseconds=="number"){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}return null},YK=e=>{const t=vce(e);return t?t.toISOString():void 0},WYe=e=>{const t=vce(e);return t?t.toISOString().split("T")[0]:void 0},xM=e=>{const t=e.data();return{id:e.id,...t,fechaCreacion:YK(t.fechaCreacion)||t.fechaCreacion,plazoEntrega:WYe(t.plazoEntrega)||t.plazoEntrega,fechaCompletado:YK(t.fechaCompletado)||t.fechaCompletado}},jb=(e,t)=>{var n,a;console.error(`❌ Error en ${t}:`,e);const r={name:"FirestoreError",message:e.message||"Error desconocido",code:e.code};return e.code==="failed-precondition"&&((n=e.message)!=null&&n.includes("requires an index"))?(r.message="Se requiere configurar un índice en la base de datos. Contacta al administrador.",console.log("🔗 Enlace para crear índice:",(a=e.message.match(/https:\/\/[^\s]+/))==null?void 0:a[0])):e.code==="permission-denied"?r.message="No tienes permisos para acceder a estos datos.":e.code==="unavailable"&&(r.message="Servicio temporalmente no disponible. Intenta nuevamente."),r},XYe=e=>new Promise(t=>setTimeout(t,e)),YYe=async(e,t=3,r="operación")=>{for(let n=1;n<=t;n++)try{return await e()}catch(a){if(console.log(`⚠️ Intento ${n} falló en ${r}:`,a.code||a.message),n===t)throw a;if(["unavailable","deadline-exceeded","internal"].includes(a.code)){const s=Math.pow(2,n)*1e3;console.log(`⏱️ Reintentando en ${s}ms...`),await XYe(s)}else throw a}throw new Error("Max retries exceeded")},JYe=(e,t,r)=>{console.log("🔔 Suscribiéndose a actividades disponibles para:",e.nombreCompleto);const n=Vt(pt(lt,KYe),cr("fechaCreacion","desc"));return hr(n,{next:s=>{try{console.log("📋 Actividades recibidas desde Firestore:",s.docs.length);const l=s.docs.map(c=>xM(c)).filter(c=>{var u,d,f,h,m;if(!((u=c.cursosDestino)!=null&&u.length)&&!((d=c.estudiantesDestino)!=null&&d.length)){const g=c.nivel.charAt(0);return(f=e.curso)==null?void 0:f.startsWith(g)}return!!((h=c.cursosDestino)!=null&&h.includes(e.curso||"")||(m=c.estudiantesDestino)!=null&&m.includes(e.nombreCompleto))});console.log("✅ Actividades filtradas para el estudiante:",l.length),t(l)}catch(o){console.error("❌ Error procesando datos de actividades:",o);const l=jb(o,"procesamiento de actividades");r==null||r(l)}},error:s=>{const o=jb(s,"suscripción a actividades");r==null||r(o)}})},ZYe=(e,t,r)=>{console.log("🔔 Suscribiéndose a respuestas del estudiante:",e);const n=Vt(pt(lt,gM),wr("estudianteId","==",e),cr("fechaCompletado","desc"));return hr(n,{next:s=>{try{console.log("📝 Respuestas recibidas desde Firestore:",s.docs.length);const o=s.docs.map(l=>{var u;const c=xM(l);return console.log(`📄 Respuesta ${l.id}:`,{actividadId:c.actividadId,puntaje:c.puntaje,nota:c.nota,requiereRevision:c.requiereRevisionDocente,revisionCompletada:(u=c.revisionDocente)==null?void 0:u.completada,fechaCompletado:c.fechaCompletado}),c});console.log("✅ Enviando respuestas procesadas al componente:",o.length),t(o)}catch(o){console.error("❌ Error procesando respuestas:",o);const l=jb(o,"procesamiento de respuestas");r==null||r(l)}},error:s=>{var l;const o=jb(s,"suscripción a respuestas");if(s.code==="failed-precondition"&&((l=s.message)!=null&&l.includes("requires an index")))return console.log("⚠️ Error de índice detectado, intentando consulta alternativa..."),eJe(e,t,r);r==null||r(o)}})},eJe=(e,t,r)=>{console.log("🔄 Usando consulta alternativa sin ordenamiento...");const n=Vt(pt(lt,gM),wr("estudianteId","==",e));return hr(n,{next:s=>{try{console.log("📝 Respuestas recibidas (consulta alternativa):",s.docs.length);const o=s.docs.map(l=>xM(l)).sort((l,c)=>new Date(c.fechaCompletado).getTime()-new Date(l.fechaCompletado).getTime());console.log("✅ Respuestas ordenadas manualmente:",o.length),t(o)}catch(o){console.error("❌ Error procesando respuestas (alternativa):",o);const l=jb(o,"procesamiento de respuestas alternativo");r==null||r(l)}},error:s=>{const o=jb(s,"suscripción alternativa a respuestas");r==null||r(o)}})},tJe=async e=>YYe(async()=>{console.log("💾 Guardando respuesta de actividad:",{actividadId:e.actividadId,estudianteId:e.estudianteId,puntaje:e.puntaje,nota:e.nota});const t={...e,fechaCompletado:ir.fromDate(new Date(e.fechaCompletado))},r=await an(pt(lt,gM),t);return console.log("✅ Respuesta guardada exitosamente con ID:",r.id),r.id},3,"guardado de respuesta"),rJe=.6,nJe=(e,t,r=rJe,n=2)=>{if(!t||t<=0)return n.toFixed(1);const a=t*r;let s;return e>=a?s=4+3*(e-a)/(t-a+1e-9):s=1+3*e/(a+1e-9),s=Math.max(n,Math.min(7,s)),s.toFixed(1)},UO=({className:e="w-5 h-5"})=>i.jsxs("svg",{className:`animate-spin ${e}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),aJe=async(e,t,r=3)=>{var o;const n="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",s=new Ps(n).getGenerativeModel({model:"gemini-1.5-flash-latest"});for(let l=1;l<=r;l++)try{console.log(`🤖 Intento ${l} de generar feedback con IA`);const c=iJe(e,t);let f=(await(await s.generateContent(c)).response).text().trim();f=f.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const h=f.match(/\{[\s\S]*\}$/);try{const m=JSON.parse(h?h[0]:f);return console.log(`✅ Feedback generado exitosamente en intento ${l}`),m}catch(m){throw console.warn(`⚠️ Error al parsear JSON en intento ${l}:`,m),new Error("JSON parsing failed")}}catch(c){if(console.log(`❌ Error en intento ${l}:`,c.message),(o=c.message)!=null&&o.includes("503")&&l<r){const u=Math.pow(2,l)*1e3;console.log(`⏱️ Esperando ${u}ms antes del siguiente intento...`),await new Promise(d=>setTimeout(d,u));continue}if(l===r)return console.log("🚫 Todos los intentos fallaron. Procediendo sin IA."),null}return null},sJe=async(e,t,r)=>{console.log("💾 Iniciando guardado de respuesta...");try{const n=await tJe(e);console.log("✅ Respuesta base guardada con ID:",n);const a={id:n,...e};try{const s=await aJe(t,r);if(s){const{updateDoc:o,doc:l}=await ac(async()=>{const{updateDoc:u,doc:d}=await Promise.resolve().then(()=>v_);return{updateDoc:u,doc:d}},void 0),{db:c}=await ac(async()=>{const{db:u}=await Promise.resolve().then(()=>tte);return{db:u}},void 0);return await o(l(c,"respuestas_actividades",n),{retroalimentacionAI:s}),console.log("🤖 Feedback de IA agregado exitosamente"),{...a,retroalimentacionAI:s}}return a}catch(s){return console.warn("⚠️ No se pudo generar feedback de IA, pero la respuesta fue guardada:",s),a}}catch(n){throw console.error("❌ Error crítico al guardar respuesta:",n),n}},Eo=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>["comprension","analisis","argumentacion","creatividad","claridad","precision","organizacion"].includes(n))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},Xs=(e,t)=>{if(t&&Eo(e,t),t==="panelDidactico"||t!=null&&t.includes("panelDidactico")){if(typeof e=="string")return e;if(e==null)return"";try{return typeof e=="object"?typeof e.texto=="string"?e.texto:typeof e.contenido=="string"?e.contenido:JSON.stringify(e):String(e)}catch{return"[Error al procesar el panel didáctico]"}}if(e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>Xs(a,`${t}-array-item`)).join(", ");const r=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of r)if(e[a]&&typeof e[a]=="string")return e[a];if(Object.keys(e).some(a=>["comprension","analisis","argumentacion","creatividad","claridad","precision"].includes(a)))return"[Criterios de evaluación]";try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Dd=(e,t,...r)=>{if(Eo(e,`extractTextSafely-${t}`),!e)return"";for(const a of r)if(e[a]){const s=Xs(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}const n=["texto","pregunta","enunciado","contenido","descripcion","value","label"];for(const a of n)if(e[a]){const s=Xs(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}return typeof e=="string"?e:"[Sin contenido disponible]"},Ss=({content:e,context:t="unknown"})=>{try{const r=Xs(e,`UltraSafeRenderer-${t}`);return i.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),i.jsx("span",{children:"[Error al mostrar contenido]"})}};function JK(e){if(console.log("🔍 Normalizando lectura:",e),Eo(e,"normalizeLectura-input"),!e)return{texto:"",preguntas:[]};const t=(r,n)=>{Eo(r,`normalizeQuestion-${n}`);const a=Array.isArray(r==null?void 0:r.opciones)?r.opciones.map((s,o)=>Xs(s,`opcion-${n}-${o}`)).filter(Boolean):[];return{pregunta:Dd(r,`pregunta-${n}`,"pregunta","texto"),opciones:a,respuestaCorrecta:Xs(r==null?void 0:r.respuestaCorrecta,`respuestaCorrecta-${n}`),puntaje:typeof(r==null?void 0:r.puntaje)=="number"?r.puntaje:1}};if(!Array.isArray(e)&&Array.isArray(e.preguntas)){const r=e;return{texto:Dd(r,"lectura-texto","texto"),preguntas:(r.preguntas||[]).map(t)}}if(Array.isArray(e)){const r=e.map((a,s)=>Dd(a,`lectura-bloque-${s}`,"texto")).filter(Boolean).join(`

---

`),n=e.flatMap((a,s)=>(Eo(a,`lectura-bloque-preguntas-${s}`),Array.isArray(a==null?void 0:a.preguntas)?a.preguntas:[])).map(t);return{texto:r,preguntas:n}}return{texto:"",preguntas:[]}}function ZK(e){return console.log("🔍 Normalizando pareados:",e),Eo(e,"normalizePareados-input"),e?!Array.isArray(e)&&Array.isArray(e.pares)?e.pares.map((t,r)=>(Eo(t,`pareado-${r}`),{izquierda:Dd(t,`pareado-izq-${r}`,"izquierda","concepto"),derecha:Dd(t,`pareado-der-${r}`,"derecha","definicion"),puntaje:typeof(t==null?void 0:t.puntaje)=="number"?t.puntaje:1})):Array.isArray(e)?e.map((t,r)=>(Eo(t,`pareado-array-${r}`),{izquierda:Dd(t,`pareado-concepto-${r}`,"concepto","izquierda"),derecha:Dd(t,`pareado-definicion-${r}`,"definicion","derecha"),puntaje:1})):[]:[]}function eW(e){return console.log("🔍 Normalizando desarrollo:",e),Eo(e,"normalizeDesarrollo-input"),e?!Array.isArray(e)&&Array.isArray(e.preguntas)?e.preguntas.map((t,r)=>(Eo(t,`desarrollo-pregunta-${r}`),{enunciado:Dd(t,`desarrollo-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):Array.isArray(e)?e.map((t,r)=>(Eo(t,`desarrollo-array-${r}`),t!=null&&t.rubrica&&typeof t.rubrica=="object"&&console.warn(`🚨 Rubrica detectada como objeto en item ${r}, ignorando`,t.rubrica),{enunciado:Dd(t,`desarrollo-array-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):[]:[]}const iJe=(e,t)=>{const r=t.items.filter(o=>o.esCorrecta===!1),n=t.items.filter(o=>o.tipo==="Desarrollo"),a=r.map(o=>`- Pregunta: "${Xs(o.pregunta,"feedback-prompt-pregunta")}"
  - Respuesta del estudiante: "${Xs(o.respuestaUsuario,"feedback-prompt-respuesta")}"
  - Respuesta correcta: "${Xs(o.respuestaCorrecta,"feedback-prompt-correcta")}"`).join(`
`),s=n.map(o=>`- Pregunta abierta: "${Xs(o.pregunta,"feedback-prompt-desarrollo-pregunta")}"
  - Respuesta del estudiante: """${Xs(o.respuestaUsuario,"feedback-prompt-desarrollo-respuesta")}"""`).join(`
`);return`
Eres tutor pedagógico. Actividad de "${Xs(e.asignatura,"feedback-prompt-asignatura")}" sobre "${Xs(e.contenido,"feedback-prompt-contenido")}".
Devuelve SOLO un JSON con esta forma:

{
  "logros": "1 párrafo motivador, reconociendo aciertos",
  "desafios": [
    { "pregunta": "...", "explicacionDelError": "≤50 palabras, por qué la correcta es adecuada" }
  ],
  "comentariosDesarrollo": [
    { "pregunta": "...", "retroalimentacionBreve": "≤60 palabras, concreta y constructiva. No asignes nota." }
  ]
}

ERRORES (alternativa / lectura / pareados):
${a||"- Sin errores de alternativa."}

RESPUESTAS DE DESARROLLO:
${s||"- Sin preguntas de desarrollo."}
`.trim()},oJe=({actividad:e,onComplete:t,currentUser:r})=>{const[n,a]=C.useState({}),[s,o]=C.useState(!1),l=(u,d)=>{const f={...n,[u]:d};a(f)},c=async()=>{o(!0);let u=0,d=0;const f={items:[]};e.tipos.forEach(m=>{const g=e.generatedContent[m],x=n[m];if(console.log(`🔍 Procesando tipo: ${m}`,g),Eo(g,`handleSubmit-${m}`),!!g){if((m==="Quiz"||m==="Comprensión de Lectura")&&(m==="Quiz"?Array.isArray(g)?g.map((y,w)=>(Eo(y,`quiz-question-${w}`),{pregunta:Dd(y,`quiz-pregunta-${w}`,"pregunta"),opciones:Array.isArray(y==null?void 0:y.opciones)?y.opciones.map((_,T)=>Xs(_,`quiz-opcion-${w}-${T}`)):[],respuestaCorrecta:Xs(y==null?void 0:y.respuestaCorrecta,`quiz-respuesta-${w}`),puntaje:typeof(y==null?void 0:y.puntaje)=="number"?y.puntaje:1})):[]:JK(g).preguntas).forEach((y,w)=>{const _=x==null?void 0:x[w],T=_===y.respuestaCorrecta,j=y.puntaje??1;T&&(u+=j),d+=j,f.items.push({pregunta:y.pregunta,respuestaUsuario:Xs(_,`feedback-respuesta-${w}`)||"No respondida",respuestaCorrecta:y.respuestaCorrecta,esCorrecta:T,puntajeObtenido:T?j:0,tipo:m})}),m==="Términos Pareados"){const v=ZK(g),y=x||{};v.forEach((w,_)=>{const T=y[_],j=T===w.derecha,I=w.puntaje??1;j&&(u+=I),d+=I,f.items.push({pregunta:`${w.izquierda} → ¿?`,respuestaUsuario:Xs(T,`pareado-feedback-${_}`)||"No respondida",respuestaCorrecta:w.derecha,esCorrecta:j,puntajeObtenido:j?I:0,tipo:m})})}if(m==="Desarrollo"){const v=eW(g),y=x||{};v.forEach((w,_)=>{const T=Xs(y[_],`desarrollo-feedback-${_}`).trim();f.items.push({pregunta:w.enunciado,respuestaUsuario:T||"No respondida",respuestaCorrecta:"Revisión docente",esCorrecta:null,puntajeObtenido:0,tipo:m})})}}});const h={puntaje:u,puntajeMaximo:d,respuestas:n,nota:nJe(u,d),requiereRevisionDocente:e.tipos.includes("Desarrollo")};t(h,f)};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[i.jsx("h2",{className:"text-2xl font-bold text-sky-800 mb-2",children:i.jsx(Ss,{content:e.asignatura,context:"actividad-asignatura"})}),i.jsx("div",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Ss,{content:e.introduccion,context:"actividad-introduccion"})}),e.panelDidactico&&i.jsxs("div",{className:"mt-5 p-5 bg-emerald-50 border-l-4 border-emerald-500 rounded-r-lg shadow-md",children:[i.jsxs("h3",{className:"font-bold text-emerald-800 text-lg mb-3 flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Material de Estudio - Lee con Atención"]}),i.jsx("div",{className:"prose prose-emerald max-w-none text-slate-700",children:(()=>{try{if(typeof e.panelDidactico=="string"&&e.panelDidactico.trim().startsWith("{")){const u=JSON.parse(e.panelDidactico);return i.jsxs("div",{className:"space-y-4",children:[u.titulo&&i.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:u.titulo}),Array.isArray(u.subtitulos)&&u.subtitulos.map((d,f)=>i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:d.titulo}),i.jsx("p",{className:"whitespace-pre-line",children:d.texto})]},f)),Array.isArray(u.conceptosClave)&&u.conceptosClave.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:"Conceptos Clave"}),i.jsx("ul",{className:"list-disc pl-5 space-y-1",children:u.conceptosClave.map((d,f)=>i.jsx("li",{className:"text-emerald-800",children:d},f))})]}),!u.subtitulos&&!u.conceptosClave&&i.jsx("div",{className:"whitespace-pre-line",children:JSON.stringify(u,null,2)})]})}return i.jsx("p",{className:"whitespace-pre-wrap",children:e.panelDidactico})}catch{return i.jsx("p",{className:"whitespace-pre-wrap",children:e.panelDidactico})}})()})]}),e.recursos&&i.jsxs("div",{className:"mt-4 pt-4 border-t border-sky-200",children:[e.recursos.instrucciones&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Instrucciones adicionales:"}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Ss,{content:e.recursos.instrucciones,context:"actividad-instrucciones"})})]}),e.recursos.enlaces&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Enlaces complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:e.recursos.enlaces.split(`
`).filter(Boolean).map((u,d)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:"🔗"}),i.jsx("a",{href:u.startsWith("http")?u:`https://${u}`,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline break-all",children:u})]},d))})]}),e.recursos.archivos&&e.recursos.archivos.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Archivos complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:e.recursos.archivos.map((u,d)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:"📄"}),i.jsx("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline",children:u.nombre||`Archivo ${d+1}`})]},d))})]})]})]}),e.tipos.map(u=>{const d=e.generatedContent[u];if(console.log(`🔍 Renderizando tipo: ${u}`,d),Eo(d,`render-${u}`),!d)return null;switch(u){case"Quiz":{const f=Array.isArray(d)?d.map((h,m)=>(Eo(h,`render-quiz-question-${m}`),{pregunta:Dd(h,`render-quiz-pregunta-${m}`,"pregunta"),opciones:Array.isArray(h==null?void 0:h.opciones)?h.opciones.map((g,x)=>Xs(g,`render-quiz-opcion-${m}-${x}`)):[],respuestaCorrecta:Xs(h==null?void 0:h.respuestaCorrecta,`render-quiz-respuesta-${m}`),puntaje:typeof(h==null?void 0:h.puntaje)=="number"?h.puntaje:1})):[];return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Quiz"}),i.jsx("div",{className:"space-y-6",children:f.map((h,m)=>i.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[i.jsxs("p",{className:"font-semibold text-slate-800",children:[m+1,". ",i.jsx(Ss,{content:h.pregunta,context:`quiz-pregunta-${m}`})]}),i.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var v;return i.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[i.jsx("input",{type:"radio",name:`q-${u}-${m}`,value:g,checked:((v=n[u])==null?void 0:v[m])===g,onChange:()=>l(u,{...n[u]||{},[m]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),i.jsx("span",{children:i.jsx(Ss,{content:g,context:`quiz-opcion-${m}-${x}`})})]},x)})})]},m))})]},u)}case"Comprensión de Lectura":{const f=JK(d);return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Comprensión de Lectura"}),i.jsx("div",{className:"mb-6 p-4 rounded bg-slate-50 border whitespace-pre-wrap",children:i.jsx(Ss,{content:f.texto,context:"lectura-texto"})}),i.jsx("div",{className:"space-y-6",children:f.preguntas.map((h,m)=>i.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[i.jsxs("p",{className:"font-semibold text-slate-800",children:[m+1,". ",i.jsx(Ss,{content:h.pregunta,context:`lectura-pregunta-${m}`})]}),i.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var v;return i.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[i.jsx("input",{type:"radio",name:`q-${u}-${m}`,value:g,checked:((v=n[u])==null?void 0:v[m])===g,onChange:()=>l(u,{...n[u]||{},[m]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),i.jsx("span",{children:i.jsx(Ss,{content:g,context:`lectura-opcion-${m}-${x}`})})]},x)})})]},m))})]},u)}case"Términos Pareados":{const f=ZK(d),h=n[u]||{},m=[...new Set(f.map(g=>g.derecha))];for(let g=m.length-1;g>0;g--){const x=Math.floor(Math.random()*(g+1));[m[g],m[x]]=[m[x],m[g]]}return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Términos Pareados"}),i.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:f.map((g,x)=>i.jsxs("div",{className:"p-3 rounded border bg-slate-50",children:[i.jsxs("p",{className:"font-semibold text-slate-800 mb-2",children:[x+1,". ",i.jsx(Ss,{content:g.izquierda,context:`pareado-izq-${x}`})]}),i.jsxs("select",{className:"w-full border rounded p-2 bg-white",value:h[x]??"",onChange:v=>l(u,{...h,[x]:v.target.value}),children:[i.jsx("option",{value:"",children:"— Selecciona la pareja —"}),m.map((v,y)=>i.jsx("option",{value:v,children:Xs(v,`pareado-opcion-${x}-${y}`)},y))]})]},`${g.izquierda}-${x}`))})]},u)}case"Desarrollo":{const f=eW(d),h=n[u]||{};return i.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Preguntas de Desarrollo"}),i.jsx("div",{className:"space-y-6",children:f.map((m,g)=>i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"font-semibold text-slate-800",children:[g+1,". ",i.jsx(Ss,{content:m.enunciado,context:`desarrollo-enunciado-${g}`})]}),i.jsx("textarea",{className:"w-full min-h-[120px] border rounded p-3",placeholder:"Escribe tu respuesta…",value:h[g]??"",onChange:x=>l(u,{...h,[g]:x.target.value})})]},g))}),i.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Este apartado será revisado y calificado por tu profesor/a."})]},u)}default:return null}}),i.jsx("div",{className:"text-right mt-8 flex justify-end gap-4",children:i.jsxs("button",{onClick:c,disabled:s,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:[s?i.jsx(UO,{className:"w-5 h-5 mr-2"}):null,s?"Evaluando...":"Entregar Actividad"]})})]})},lJe=({currentUser:e})=>{var B,M,R;const[t,r]=C.useState(!0),[n,a]=C.useState("list"),[s,o]=C.useState(!1),[l,c]=C.useState([]),[u,d]=C.useState([]),[f,h]=C.useState(null),[m,g]=C.useState(null),[x,v]=C.useState(null),[y,w]=C.useState("connecting");C.useEffect(()=>{console.log("🚀 Iniciando carga de datos para usuario:",e.nombreCompleto);let k=!1,D=!1,L=!1,Z=!1;const V=()=>{(k||L)&&(D||Z)&&(L&&Z?(w("error"),v("Error al cargar datos. Verifica tu conexión e intenta nuevamente.")):w("connected"),r(!1),console.log("✅ Carga completada - Actividades:",k,"Respuestas:",D))},q=JYe(e,K=>{console.log("📋 Actividades recibidas:",K.length),K.forEach((ee,W)=>{console.log(`  ${W+1}. ${ee.asignatura} (ID: ${ee.id})`),Eo(ee,`actividad-${W}`)}),c(K),k=!0,V()},K=>{console.error("❌ Error en suscripción de actividades:",K),L=!0,V()}),G=ZYe(e.id,K=>{console.log("📝 Respuestas del estudiante recibidas:",K.length),K.forEach((ee,W)=>{var P;console.log(`  ${W+1}. Actividad ${ee.actividadId} - Fecha: ${ee.fechaCompletado}`),ee.nota&&console.log(`    Nota: ${ee.nota}`),(P=ee.revisionDocente)!=null&&P.completada&&console.log("    ✅ Con revisión docente completada"),Eo(ee,`respuesta-${W}`)}),d(K),D=!0,V()},K=>{var ee;console.error("❌ Error en suscripción de respuestas:",K),(ee=K.message)!=null&&ee.includes("requires an index")&&(console.log("⚠️ Detectado error de índice, intentando consulta alternativa..."),v("Se detectó un problema de configuración. Las actividades completadas pueden no mostrarse correctamente hasta que se resuelva.")),Z=!0,V()});return()=>{console.log("🧹 Limpiando subscripciones"),q==null||q(),G==null||G()}},[e]),C.useEffect(()=>{t||console.log("🔄 ESTADO ACTUALIZADO:",{actividades:l.length,respuestas:u.length,vista:n,conexion:y})},[l.length,u.length,n,y,t]);const _=k=>{if(console.log("🔍 Iniciando actividad:",k.asignatura),I.has(k.id)){v("Esta actividad ya ha sido completada. No es posible realizarla nuevamente.");return}h(k),a("activity"),v(null)},T=k=>{console.log("🔍 Viendo resultado:",k.actividadId);const D=l.find(L=>L.id===k.actividadId);D?(h(D),g(k),a("result"),v(null)):v("No se pudieron cargar los detalles de esta actividad completada.")},j=C.useCallback(async(k,D)=>{if(!f)return;console.log("🚀 COMPLETANDO ACTIVIDAD:",{actividadId:f.id,estudianteId:e.id,puntaje:k.puntaje,nota:k.nota}),a("result"),o(!0),v(null);const L={actividadId:f.id,estudianteId:e.id,fechaCompletado:new Date().toISOString(),...k,retroalimentacionDetallada:D};console.log("💾 Guardando respuesta...");try{const Z=await sJe(L,f,D);console.log("✅ Respuesta completada con ID:",Z.id),g(Z),setTimeout(()=>{console.log("🔄 Datos sincronizados")},1500)}catch(Z){console.error("❌ Error crítico al completar actividad:",Z),v("Ocurrió un error al guardar tu actividad. Por favor, intenta nuevamente. Si el problema persiste, contacta a tu profesor."),g({id:"error-temp",...L,retroalimentacionAI:{logros:"Tu actividad fue completada pero hubo un problema técnico al generar el resumen.",desafios:[],comentariosDesarrollo:[]}})}finally{o(!1)}},[f,e.id]),I=C.useMemo(()=>{if(u.length===0)return new Set;const k=new Set(u.map(D=>D.actividadId));return console.log("🎯 IDs completados calculados:",k.size),k},[u]),E=C.useMemo(()=>{if(l.length===0)return[];const k=l.filter(D=>!I.has(D.id));return console.log("⏳ Actividades pendientes:",k.length),k},[l,I]),S=C.useMemo(()=>{if(u.length===0)return[];const k=u.map(D=>{const L=l.find(Z=>Z.id===D.actividadId);return{...D,asignatura:(L==null?void 0:L.asignatura)||"Actividad no disponible",tipos:(L==null?void 0:L.tipos)||[]}}).sort((D,L)=>new Date(L.fechaCompletado).getTime()-new Date(D.fechaCompletado).getTime());return console.log("📖 Historial preparado:",k.length),k},[u,l]);return t?i.jsxs("div",{className:"flex flex-col justify-center items-center h-64 space-y-4",children:[i.jsx(UO,{className:"w-8 h-8 text-slate-500"}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-slate-500",children:"Cargando actividades..."}),i.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Estado: ",y==="connecting"?"Conectando...":y==="connected"?"Conectado":"Error de conexión"]})]})]}):y==="error"&&l.length===0&&u.length===0?i.jsxs("div",{className:"text-center py-12 border-2 border-red-200 rounded-lg bg-red-50",children:[i.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),i.jsx("h3",{className:"text-xl font-semibold text-red-700 mb-2",children:"Error de Conexión"}),i.jsx("p",{className:"text-red-600 mb-4",children:"No se pudieron cargar las actividades."}),i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700",children:"Reintentar"})]}):n==="activity"&&f?i.jsx(oJe,{actividad:f,onComplete:j,currentUser:e}):n==="result"&&m?(console.log("🔍 Renderizando resultado:",m),i.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Resultados de la Actividad"}),i.jsxs("div",{className:"flex items-baseline gap-4 mb-6 p-4 bg-slate-50 rounded-lg border",children:[i.jsxs("p",{className:"text-lg text-slate-600",children:["Puntaje: ",i.jsxs("span",{className:"font-bold text-2xl text-slate-800",children:[m.puntaje," / ",m.puntajeMaximo]})]}),i.jsxs("p",{className:"text-lg text-slate-600",children:["Nota: ",i.jsx("span",{className:`font-bold text-2xl ${parseFloat(m.nota)>=4?"text-green-600":"text-red-600"}`,children:m.nota})]})]}),(f==null?void 0:f.recursos)&&i.jsxs("div",{className:"mb-6 p-4 bg-sky-50 border border-sky-200 rounded-lg",children:[i.jsx("h2",{className:"text-lg font-bold text-sky-800 mb-2",children:"Material complementario"}),f.recursos.instrucciones&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Instrucciones adicionales:"}),i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:i.jsx(Ss,{content:f.recursos.instrucciones,context:"resultado-instrucciones"})})]}),f.recursos.enlaces&&i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Enlaces complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:f.recursos.enlaces.split(`
`).filter(Boolean).map((k,D)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:"🔗"}),i.jsx("a",{href:k.startsWith("http")?k:`https://${k}`,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline break-all",children:k})]},D))})]}),f.recursos.archivos&&f.recursos.archivos.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sky-700",children:"Archivos complementarios:"}),i.jsx("div",{className:"space-y-1 mt-1",children:f.recursos.archivos.map((k,D)=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sky-500 mr-2",children:"📄"}),i.jsx("a",{href:k.url,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline",children:k.nombre||`Archivo ${D+1}`})]},D))})]})]}),x&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:i.jsxs("p",{className:"text-red-700 font-medium",children:["⚠️ ",x]})}),s&&i.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-blue-50 border border-blue-200 rounded-lg text-center mb-6",children:[i.jsx(UO,{className:"w-8 h-8 text-blue-500"}),i.jsx("p",{className:"mt-3 font-semibold text-blue-700",children:"Generando resumen personalizado..."}),i.jsx("p",{className:"mt-1 text-sm text-blue-600",children:"Esto puede tomar unos segundos"})]}),m.retroalimentacionAI&&!s&&i.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded-lg space-y-4 mb-6",children:[i.jsx("h2",{className:"text-2xl font-semibold text-blue-800",children:"Resumen de tu Desempeño 💡"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-green-700",children:"✅ Principales Logros"}),i.jsx("p",{className:"text-slate-700 mt-1",children:i.jsx(Ss,{content:m.retroalimentacionAI.logros,context:"feedback-logros"})})]}),((B=m.retroalimentacionAI.desafios)==null?void 0:B.length)>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-amber-700",children:"🎯 Áreas de Mejora"}),i.jsx("div",{className:"space-y-3 mt-2",children:m.retroalimentacionAI.desafios.map((k,D)=>i.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[i.jsx("p",{className:"font-semibold text-slate-800",children:i.jsx(Ss,{content:k.pregunta,context:`feedback-desafio-pregunta-${D}`})}),i.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:i.jsx(Ss,{content:k.explicacionDelError,context:`feedback-desafio-explicacion-${D}`})})]},D))})]}),((R=(M=m.retroalimentacionAI)==null?void 0:M.comentariosDesarrollo)==null?void 0:R.length)>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-sky-700",children:"📝 Retroalimentación de Desarrollo"}),i.jsx("div",{className:"space-y-3 mt-2",children:m.retroalimentacionAI.comentariosDesarrollo.map((k,D)=>i.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[i.jsx("p",{className:"font-semibold text-slate-800",children:i.jsx(Ss,{content:k.pregunta,context:`feedback-desarrollo-pregunta-${D}`})}),i.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:i.jsx(Ss,{content:k.retroalimentacionBreve,context:`feedback-desarrollo-retro-${D}`})})]},D))})]})]}),m.retroalimentacionDetallada&&i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsx("h2",{className:"text-2xl font-semibold text-slate-700",children:"Revisión Detallada"}),m.retroalimentacionDetallada.items.map((k,D)=>{const L=k.esCorrecta===null,Z=L?"border-slate-400 bg-slate-50":k.esCorrecta?"border-green-500 bg-green-50":"border-red-500 bg-red-50",V=L?"🕓":k.esCorrecta?"✅":"❌";return i.jsxs("div",{className:`p-4 border-l-4 rounded-r-lg ${Z}`,children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("p",{className:"font-semibold text-slate-800 flex-1 pr-4",children:[D+1,". ",i.jsx(Ss,{content:k.pregunta,context:`feedback-item-pregunta-${D}`})]}),i.jsx("span",{className:"font-bold text-lg",children:V})]}),i.jsxs("div",{className:"mt-2 text-sm pl-4",children:[i.jsxs("p",{className:"text-slate-700",children:["Tu respuesta: ",i.jsx("span",{className:"font-medium",children:i.jsx(Ss,{content:k.respuestaUsuario,context:`feedback-item-respuesta-${D}`})})]}),!L&&!k.esCorrecta&&i.jsxs("p",{className:"text-slate-700",children:["Respuesta correcta: ",i.jsx("span",{className:"font-medium text-green-700",children:i.jsx(Ss,{content:k.respuestaCorrecta,context:`feedback-item-correcta-${D}`})})]}),L&&i.jsx("p",{className:"text-slate-600 italic",children:"Pendiente de revisión docente."})]})]},D)})]}),i.jsx("div",{className:"flex gap-4",children:i.jsx("button",{onClick:()=>{a("list"),h(null),g(null),v(null)},className:"w-full bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700 transition-colors",children:"Volver a Actividades"})})]})):i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md space-y-10",children:[x&&i.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:i.jsxs("p",{className:"text-amber-800",children:["⚠️ ",x]})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Actividades Pendientes"}),i.jsx("p",{className:"text-slate-500 mb-2",children:"Completa las actividades asignadas por tus profesores."}),i.jsx("p",{className:"text-amber-600 text-sm font-medium mb-6",children:i.jsxs("span",{className:"bg-amber-100 p-1 rounded inline-flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Importante: Cada actividad solo puede ser respondida una vez."]})}),i.jsx("div",{className:"space-y-4",children:E.length>0?E.map(k=>i.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 flex flex-col sm:flex-row justify-between sm:items-center gap-4 hover:bg-slate-100 transition-colors",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800",children:[i.jsx(Ss,{content:k.asignatura,context:`actividad-asignatura-${k.id}`})," - ",k.tipos.join(", ")]}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",i.jsx(Ss,{content:typeof k.plazoEntrega=="string"?k.plazoEntrega:"",context:`actividad-plazo-${k.id}`})]})]}),i.jsx("button",{onClick:()=>_(k),className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 w-full sm:w-auto transition-colors",children:"Comenzar"})]},k.id)):i.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[i.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),i.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"¡Todo al día!"}),i.jsx("p",{className:"text-slate-500 mt-1",children:"No tienes actividades pendientes."})]})})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Historial de Actividades"}),i.jsx("p",{className:"text-slate-500 mb-6",children:"Revisa tus resultados y la retroalimentación de las actividades completadas."}),i.jsx("div",{className:"space-y-4",children:S.length>0?S.map(k=>i.jsxs("div",{className:"p-4 border rounded-lg bg-white flex flex-col sm:flex-row justify-between sm:items-center gap-4 shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800",children:[i.jsx(Ss,{content:k.asignatura,context:`completada-asignatura-${k.id}`})," - ",k.tipos.join(", ")]}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Completado: ",new Date(k.fechaCompletado).toLocaleDateString("es-CL")]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("p",{className:"text-sm font-semibold",children:["Nota: ",i.jsx("span",{className:`font-bold text-lg ${parseFloat(k.nota)>=4?"text-green-600":"text-red-600"}`,children:k.nota})]}),i.jsx("button",{onClick:()=>T(k),className:"bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-700 w-full sm:w-auto transition-colors",children:"Ver Resultados"})]})]},k.id)):i.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[i.jsx("div",{className:"text-6xl mb-4",children:"📚"}),i.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Aún no hay historial"}),i.jsx("p",{className:"text-slate-500 mt-1",children:"Tus actividades completadas aparecerán aquí."})]})})]})]})},X4="estudiantes_inclusion",cJe="usuarios",bce=e=>{const t=e.data();return{id:e.id,...t}},uJe=e=>{const t=Vt(pt(lt,X4));return hr(t,n=>{const a=n.docs.map(s=>bce(s));e(a)},n=>{console.error("Error al suscribirse a estudiantes de inclusión:",n),e([])})},dJe=e=>{const t=Vt(pt(lt,cJe));return hr(t,n=>{const a=n.docs.map(s=>bce(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},fJe=async e=>{try{return(await an(pt(lt,X4),e)).id}catch(t){throw console.error("Error al agregar estudiante a inclusión:",t),new Error("No se pudo agregar al estudiante.")}},AJe=async(e,t)=>{try{const{id:r,...n}=t,a=rr(lt,X4,e);await yi(a,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusión:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},hJe=async e=>{try{const t=rr(lt,X4,e);await ka(t)}catch(t){throw console.error("Error al eliminar estudiante de inclusión:",t),new Error("No se pudo eliminar al estudiante.")}},mJe=({estudiantes:e})=>{const t=C.useMemo(()=>{const l=e.reduce((c,u)=>(c[u.curso]=(c[u.curso]||0)+1,c),{});return Object.entries(l).map(([c,u])=>({curso:c,cantidad:u})).sort((c,u)=>c.curso.localeCompare(u.curso))},[e]),r=C.useMemo(()=>{const l=e.reduce((c,u)=>{var f;const d=((f=u.curso.match(/\d+/))==null?void 0:f[0])||"Sin nivel";return c[d]=(c[d]||0)+1,c},{});return Object.entries(l).map(([c,u])=>({nivel:c,cantidad:u})).sort((c,u)=>c.nivel==="Sin nivel"?1:u.nivel==="Sin nivel"?-1:parseInt(c.nivel)-parseInt(u.nivel))},[e]),n=C.useMemo(()=>{const l=e.reduce((c,u)=>(c[u.dificultad]=(c[u.dificultad]||0)+1,c),{});return Object.entries(l).map(([c,u])=>({diagnostico:c,cantidad:u})).sort((c,u)=>u.cantidad-c.cantidad)},[e]),a=C.useMemo(()=>{const l=e.reduce((u,d)=>{var f;return u+(((f=d.intervenciones)==null?void 0:f.length)||0)},0),c=e.length>0?(l/e.length).toFixed(1):"0";return{total:l,promedio:c}},[e]),s=C.useMemo(()=>e.reduce((l,c)=>l+(c.alertas||[]).filter(u=>!u.resuelta).length,0),[e]),o=Math.max(0,...t.map(l=>l.cantidad),...r.map(l=>l.cantidad),...n.map(l=>l.cantidad));return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Dashboard PIE"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.length}),i.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Total Estudiantes"})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.total}),i.jsx("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Intervenciones"})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:s}),i.jsx("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:"Alertas Pendientes"})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:a.promedio}),i.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Promedio Intervenciones"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Curso"}),i.jsx("div",{className:"space-y-2",children:t.map(({curso:l,cantidad:c})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:l}),i.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:i.jsx("div",{className:"bg-blue-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),i.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Nivel"}),i.jsx("div",{className:"space-y-2",children:r.map(({nivel:l,cantidad:c})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:[l,"°"]}),i.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:i.jsx("div",{className:"bg-green-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),i.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Diagnóstico"}),i.jsx("div",{className:"space-y-2",children:n.map(({diagnostico:l,cantidad:c})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-16 text-right truncate",title:l,children:l}),i.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:i.jsx("div",{className:"bg-purple-500 h-full transition-all duration-500",style:{width:`${o?c/o*100:0}%`}})}),i.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]})]})]})},tW=({estudiantesDisponibles:e,onSelect:t})=>{const[r,n]=C.useState(""),[a,s]=C.useState(""),[o,l]=C.useState(!1),c=C.useMemo(()=>e.filter(f=>{const h=f.nombreCompleto.toLowerCase().includes(r.toLowerCase()),m=a===""||f.curso===a;return h&&m}).sort((f,h)=>f.nombreCompleto.localeCompare(h.nombreCompleto)),[e,r,a]),u=C.useMemo(()=>[...new Set(e.map(h=>h.curso).filter(Boolean))].sort(),[e]),d=f=>{t(f),n(""),s(""),l(!1)};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante al PIE"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Buscar por nombre"}),i.jsx("input",{type:"text",placeholder:"Escriba el nombre del estudiante...",value:r,onChange:f=>{n(f.target.value),l(f.target.value.length>0||a!=="")},onFocus:()=>l(r.length>0||a!==""),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtrar por curso"}),i.jsxs("select",{value:a,onChange:f=>{s(f.target.value),l(r.length>0||f.target.value!=="")},className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todos los cursos"}),u.map(f=>i.jsx("option",{value:f,children:f},f))]})]})]}),i.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("span",{children:["Estudiantes disponibles: ",e.length]}),i.jsxs("span",{children:["Resultados filtrados: ",c.length]})]}),i.jsx("button",{onClick:()=>l(!o),className:"w-full bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:o?"Ocultar resultados":`Ver ${c.length} estudiantes disponibles`}),o&&i.jsx("div",{className:"border dark:border-slate-600 rounded-lg max-h-80 overflow-y-auto",children:c.length===0?i.jsx("div",{className:"p-4 text-center text-slate-500 dark:text-slate-400",children:r||a?"No se encontraron estudiantes con los criterios de búsqueda.":"No hay estudiantes disponibles."}):i.jsx("div",{className:"divide-y dark:divide-slate-600",children:c.map(f=>i.jsx("div",{className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>d(f),children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:f.nombreCompleto}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f.curso})]}),i.jsx("button",{className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 text-xl",children:"➕"})]})},f.id))})}),r&&c.length===1&&i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:"💡 ¡Solo hay un resultado! Haga clic para agregarlo directamente:"}),i.jsxs("button",{onClick:()=>d(c[0]),className:"text-sm bg-blue-500 text-white px-3 py-1.5 rounded-md hover:bg-blue-600 transition-colors",children:["Agregar a ",c[0].nombreCompleto]})]})]})]})},pJe=({student:e,onClose:t,onConfirm:r})=>{const[n,a]=C.useState(E_[0]),s=()=>r(e,n);return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:o=>o.stopPropagation(),children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",e.nombreCompleto," al PIE"]}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),i.jsx("select",{id:"dificultad",value:n,onChange:o=>a(o.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:E_.map(o=>i.jsx("option",{value:o,children:o},o))})]}),i.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),i.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Confirmar e Ingresar"})]})]})})},gJe=({student:e,onClose:t,onSave:r,profesores:n,getDocenteEmail:a})=>{const[s,o]=C.useState("intervenciones"),[l,c]=C.useState(e);C.useEffect(()=>c(e),[e]);const[u,d]=C.useState(null),f={responsable:"",accion:"",observaciones:""},[h,m]=C.useState(f),[g,x]=C.useState({trimestre:"T1",meta:""}),[v,y]=C.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[w,_]=C.useState(null),[T,j]=C.useState(!1),I={motivo:"",acuerdos:"",asistentes:""},[E,S]=C.useState(I),B=()=>{r(l),t()},M=async()=>{var ve;if(!h.responsable||!h.accion){alert("Responsable y Acción son campos obligatorios.");return}let ae,Se=!1;u?ae=(l.intervenciones||[]).map(le=>le.id===u.id?{...le,...h}:le):(Se=!0,ae=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...l.intervenciones||[]]);const ke=ae.sort((le,be)=>new Date(be.fecha).getTime()-new Date(le.fecha).getTime());if(c(le=>({...le,intervenciones:ke})),Se)try{await VEe({docenteNombre:h.responsable,docenteEmail:a?a(h.responsable):void 0,docenteEmailLower:(ve=a?a(h.responsable):void 0)==null?void 0:ve.toLowerCase(),tipo:"nueva_intervencion",titulo:"📋 Nueva Intervención Asignada",mensaje:`Se te ha asignado una nueva intervención para el estudiante ${l.nombre}. Acción: ${h.accion}`,estudianteNombre:l.nombre,estudianteId:l.id,accionRequerida:h.accion}),alert(`✅ Intervención registrada y notificación enviada a ${h.responsable}`)}catch(le){console.error("Error al crear notificación:",le),alert("⚠️ Intervención guardada, pero no se pudo enviar la notificación al docente.")}m(f),d(null)},R=ae=>{d(ae),m({responsable:ae.responsable,accion:ae.accion,observaciones:ae.observaciones})},k=ae=>{window.confirm("¿Eliminar esta intervención?")&&c(Se=>({...Se,intervenciones:(Se.intervenciones||[]).filter(ke=>ke.id!==ae)}))},D=ae=>{const{name:Se,value:ke}=ae.target;c(ve=>({...ve,[Se]:ke,fechaActualizacionApoyos:new Date().toISOString()}))},L=()=>{if(!g.meta.trim())return;const ae={...g,id:crypto.randomUUID(),cumplida:!1};c(Se=>({...Se,metasProgreso:[...Se.metasProgreso||[],ae]})),x({trimestre:"T1",meta:""})},Z=ae=>{c(Se=>({...Se,metasProgreso:(Se.metasProgreso||[]).map(ke=>ke.id===ae?{...ke,cumplida:!ke.cumplida}:ke)}))},V=ae=>{c(Se=>({...Se,metasProgreso:(Se.metasProgreso||[]).filter(ke=>ke.id!==ae)}))},q=C.useMemo(()=>{const ae=l.metasProgreso||[];if(ae.length===0)return{percent:0,color:"bg-slate-300"};const Se=ae.filter(le=>le.cumplida).length,ke=Math.round(Se/ae.length*100),ve=ke<40?"bg-red-500":ke<75?"bg-yellow-500":"bg-green-500";return{percent:ke,color:ve}},[l.metasProgreso]),G=C.useMemo(()=>{if(!l.fechaActualizacionApoyos)return!0;const ae=new Date(l.fechaActualizacionApoyos),Se=new Date;return Se.setMonth(Se.getMonth()-3),ae<Se},[l.fechaActualizacionApoyos]),K=()=>{if(!v.titulo.trim()||!v.fecha)return;const ae={...v,id:crypto.randomUUID(),resuelta:!1};c(Se=>({...Se,alertas:[...Se.alertas||[],ae].sort((ke,ve)=>new Date(ke.fecha).getTime()-new Date(ve.fecha).getTime())})),y({titulo:"",fecha:new Date().toISOString()})},ee=ae=>{c(Se=>({...Se,alertas:(Se.alertas||[]).map(ke=>ke.id===ae?{...ke,resuelta:!ke.resuelta}:ke)}))},W=ae=>{c(Se=>({...Se,alertas:(Se.alertas||[]).filter(ke=>ke.id!==ae)}))},P=ae=>{ae.target.files&&ae.target.files[0]&&_(ae.target.files[0])},U=()=>{if(!w)return;j(!0);const ae=new FileReader;ae.readAsDataURL(w),ae.onloadend=()=>{const Se={id:crypto.randomUUID(),nombre:w.name,url:ae.result,fechaSubida:new Date().toISOString()};c(ke=>({...ke,archivos:[Se,...ke.archivos||[]]})),_(null),j(!1)},ae.onerror=()=>{alert("Error al leer el archivo."),j(!1)}},z=ae=>{window.confirm("¿Eliminar este archivo?")&&c(Se=>({...Se,archivos:(Se.archivos||[]).filter(ke=>ke.id!==ae)}))},J=()=>{if(!E.motivo.trim()||!E.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const ae={...E,id:crypto.randomUUID(),fecha:new Date().toISOString()};c(Se=>({...Se,reuniones:[ae,...Se.reuniones||[]].sort((ke,ve)=>new Date(ve.fecha).getTime()-new Date(ke.fecha).getTime())})),S(I)},te=ae=>{window.confirm("¿Eliminar este registro de reunión?")&&c(Se=>({...Se,reuniones:(Se.reuniones||[]).filter(ke=>ke.id!==ae)}))},se=()=>{var pe,Oe,Le;const ae=new vr("p","mm","a4"),Se=20,ke=ae.internal.pageSize.getWidth(),ve=ae.internal.pageSize.getHeight();let le=Se;const be=Ge=>{Ge.setFontSize(10),Ge.setTextColor(100),Ge.text("Ficha de Seguimiento - Módulo Inclusión",Se,15)};be(ae),ae.setFontSize(18),ae.setFont("helvetica","bold"),ae.setTextColor(40),ae.text(l.nombre,Se,le+10),le+=15,ae.setFontSize(11),ae.setFont("helvetica","normal"),ae.setTextColor(80),ae.text(`Curso: ${l.curso}`,Se,le),ae.text(`Dificultad: ${l.dificultad}`,Se,le+6),le+=15;const Pe=Ge=>{le+Ge>ve-Se&&(ae.addPage(),be(ae),le=Se)},Ue=Ge=>{Pe(15),ae.setFontSize(14),ae.setFont("helvetica","bold"),ae.text(Ge,Se,le),le+=10};if((pe=l.intervenciones)!=null&&pe.length&&(Ue("Historial de Intervenciones"),xi(ae,{startY:le,head:[["Fecha","Responsable","Acción","Observaciones"]],body:l.intervenciones.map(Ge=>[new Date(Ge.fecha).toLocaleDateString("es-CL"),Ge.responsable,Ge.accion,Ge.observaciones||""]),theme:"grid",didDrawPage:()=>be(ae)}),le=ae.lastAutoTable.finalY+10),l.adaptacionesCurriculares||l.apoyosRecibidos){Pe(30),Ue("Seguimiento y Apoyos"),ae.setFontSize(11),ae.setFont("helvetica","normal");const Ge=`Adaptaciones: ${l.adaptacionesCurriculares||"No registradas."}
Apoyos: ${l.apoyosRecibidos||"No registrados."}`,et=ae.splitTextToSize(Ge,ke-Se*2);ae.text(et,Se,le),le+=et.length*5+10}(Oe=l.metasProgreso)!=null&&Oe.length&&(Pe(30),Ue("Metas de Progreso"),xi(ae,{startY:le,head:[["Trimestre","Meta","Estado"]],body:l.metasProgreso.map(Ge=>[Ge.trimestre,Ge.meta,Ge.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:()=>be(ae)}),le=ae.lastAutoTable.finalY+10),(Le=l.reuniones)!=null&&Le.length&&(Ue("Reuniones con Apoderados"),xi(ae,{startY:le,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:l.reuniones.map(Ge=>[new Date(Ge.fecha).toLocaleDateString("es-CL"),Ge.motivo,Ge.acuerdos||"",Ge.asistentes]),theme:"grid",didDrawPage:()=>be(ae)})),ae.save(`Ficha_Inclusion_${l.nombre.replace(/\s/g,"_")}.pdf`)},ie=()=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:u?"Editando Intervención":"Registrar Nueva Intervención"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Responsable ",!u&&"(Se enviará notificación automática)"]}),i.jsxs("select",{value:h.responsable,onChange:ae=>m(Se=>({...Se,responsable:ae.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(ae=>i.jsx("option",{value:ae,children:ae},ae))]}),h.responsable&&!u&&i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-sm text-blue-800 dark:text-blue-200",children:["🔔 Se enviará una notificación a ",h.responsable," cuando se guarde la intervención"]})]}),i.jsx("textarea",{value:h.accion,onChange:ae=>m(Se=>({...Se,accion:ae.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("textarea",{value:h.observaciones,onChange:ae=>m(Se=>({...Se,observaciones:ae.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsxs("div",{className:"flex justify-end gap-2",children:[u&&i.jsx("button",{onClick:()=>{d(null),m(f)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar Edición"}),i.jsx("button",{onClick:M,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!h.responsable||!h.accion,children:u?"Actualizar":"Guardar y Notificar"})]})]}),i.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(l.intervenciones||[]).map(ae=>i.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ae.accion}),ae.observaciones&&i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:ae.observaciones}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(ae.fecha).toLocaleString("es-CL")," - ",ae.responsable]}),i.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 px-2 py-1 rounded-full",children:"✓ Notificado"})]})]}),i.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[i.jsx("button",{onClick:()=>R(ae),className:"text-blue-500 hover:text-blue-700 p-1 rounded transition-colors",title:"Editar intervención",children:"✏️"}),i.jsx("button",{onClick:()=>k(ae.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar intervención",children:"🗑️"})]})]})},ae.id)),(!l.intervenciones||l.intervenciones.length===0)&&i.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-4xl mb-2",children:"📋"}),i.jsx("p",{children:"No hay intervenciones registradas"}),i.jsx("p",{className:"text-sm",children:"Registra la primera intervención arriba"})]})]})]}),ce=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),G&&i.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl cursor-help",children:"⚠️"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),i.jsx("textarea",{name:"adaptacionesCurriculares",value:l.adaptacionesCurriculares||"",onChange:D,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe las adaptaciones curriculares implementadas..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),i.jsx("textarea",{name:"apoyosRecibidos",value:l.apoyosRecibidos||"",onChange:D,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe los apoyos que recibe el estudiante..."})]})]}),i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",q.percent,"%"]}),i.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:i.jsx("div",{className:`${q.color} h-4 rounded-full transition-all duration-500`,style:{width:`${q.percent}%`}})})]}),i.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[i.jsxs("select",{value:g.trimestre,onChange:ae=>x(Se=>({...Se,trimestre:ae.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"T1",children:"T1"}),i.jsx("option",{value:"T2",children:"T2"}),i.jsx("option",{value:"T3",children:"T3"})]}),i.jsx("input",{value:g.meta,onChange:ae=>x(Se=>({...Se,meta:ae.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:L,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",disabled:!g.meta.trim(),children:"Agregar"})]}),i.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(l.metasProgreso||[]).map(ae=>i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[i.jsx("input",{type:"checkbox",checked:ae.cumplida,onChange:()=>Z(ae.id),className:"h-5 w-5 rounded text-amber-500"}),i.jsxs("span",{className:`flex-grow text-sm ${ae.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[i.jsxs("strong",{children:[ae.trimestre,":"]})," ",ae.meta]}),i.jsx("button",{onClick:()=>V(ae.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar meta",children:"🗑️"})]},ae.id)),(!l.metasProgreso||l.metasProgreso.length===0)&&i.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-3xl mb-2",children:"🎯"}),i.jsx("p",{children:"No hay metas definidas"}),i.jsx("p",{className:"text-sm",children:"Agrega la primera meta trimestral"})]})]})]})]}),de=()=>i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),i.jsx("input",{type:"text",value:v.titulo,onChange:ae=>y(Se=>({...Se,titulo:ae.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),i.jsx("input",{type:"date",value:new Date(v.fecha).toISOString().slice(0,10),onChange:ae=>y(Se=>({...Se,fecha:ae.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),i.jsx("button",{onClick:K,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md hover:bg-amber-600 transition-colors",disabled:!v.titulo.trim()||!v.fecha,children:"Agendar"})]}),i.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(l.alertas||[]).map(ae=>i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[i.jsx("input",{type:"checkbox",checked:ae.resuelta,onChange:()=>ee(ae.id),className:"h-5 w-5 rounded text-amber-500"}),i.jsxs("span",{className:`flex-grow text-sm ${ae.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[ae.titulo," (",new Date(ae.fecha+"T12:00:00").toLocaleDateString("es-CL"),")"]}),i.jsx("button",{onClick:()=>W(ae.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar alerta",children:"🗑️"})]},ae.id)),(!l.alertas||l.alertas.length===0)&&i.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-3xl mb-2",children:"🔔"}),i.jsx("p",{children:"No hay alertas programadas"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),i.jsx("input",{type:"file",onChange:P,className:"w-full text-sm",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt"}),i.jsx("button",{onClick:U,disabled:!w||T,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400 hover:bg-blue-600 transition-colors",children:T?"Subiendo...":"Subir"}),w&&i.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Archivo seleccionado: ",w.name]})]}),i.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(l.archivos||[]).map(ae=>i.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[i.jsxs("a",{href:ae.url,download:ae.nombre,className:"text-sm text-blue-600 hover:underline truncate flex-grow",title:ae.nombre,children:["📎 ",ae.nombre]}),i.jsx("button",{onClick:()=>z(ae.id),className:"text-red-500 text-sm ml-2 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar archivo",children:"🗑️"})]},ae.id)),(!l.archivos||l.archivos.length===0)&&i.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-3xl mb-2",children:"📁"}),i.jsx("p",{children:"No hay archivos adjuntos"})]})]})]})]}),Be=()=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),i.jsx("input",{value:E.motivo,onChange:ae=>S(Se=>({...Se,motivo:ae.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("textarea",{value:E.acuerdos,onChange:ae=>S(Se=>({...Se,acuerdos:ae.target.value})),placeholder:"Acuerdos tomados en la reunión...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("input",{value:E.asistentes,onChange:ae=>S(Se=>({...Se,asistentes:ae.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("div",{className:"text-right",children:i.jsx("button",{onClick:J,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!E.motivo.trim()||!E.asistentes.trim(),children:"Guardar Reunión"})})]}),i.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(l.reuniones||[]).map(ae=>i.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ae.motivo}),ae.acuerdos&&i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[i.jsx("strong",{children:"Acuerdos:"})," ",ae.acuerdos]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(ae.fecha).toLocaleString("es-CL")," - Asistentes: ",ae.asistentes]})]}),i.jsx("button",{onClick:()=>te(ae.id),className:"text-red-500 flex-shrink-0 ml-4 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar reunión",children:"🗑️"})]})},ae.id)),(!l.reuniones||l.reuniones.length===0)&&i.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-4xl mb-2",children:"👥"}),i.jsx("p",{children:"No hay reuniones registradas"}),i.jsx("p",{className:"text-sm",children:"Registra la primera reunión con apoderados"})]})]})]});return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:ae=>ae.stopPropagation(),children:[i.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",e.nombre]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.curso," - ",e.dificultad]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:se,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200 transition-colors",children:"📄 Exportar PDF"}),i.jsx("button",{onClick:t,className:"text-2xl text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 transition-colors",children:"×"})]})]}),i.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:i.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(ae=>i.jsx("button",{onClick:()=>o(ae),className:`${s===ae?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize transition-colors`,children:ae==="alertas"?"Alertas y Archivos":ae==="seguimiento"?"Seguimiento y Metas":ae},ae))})}),i.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&ie(),s==="seguimiento"&&ce(),s==="reuniones"&&Be(),s==="alertas"&&de()]}),i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[i.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors",children:"Cerrar"}),i.jsx("button",{onClick:B,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Guardar Cambios y Cerrar"})]})]})})},rW=({currentUser:e})=>{const[t,r]=C.useState([]),[n,a]=C.useState([]),[s,o]=C.useState(!0),[l,c]=C.useState(null),[u,d]=C.useState(null),[f,h]=C.useState(""),[m,g]=C.useState(""),[x,v]=C.useState(""),[y,w]=C.useState("dashboard");C.useEffect(()=>{o(!0);const M=uJe(k=>{r(k),o(!1)}),R=dJe(k=>a(k));return()=>{M(),R()}},[]);const _=async(M,R)=>{if(t.some(D=>D.nombre===M.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const k={nombre:M.nombreCompleto,curso:M.curso||"",dificultad:R,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await fJe(k),alert(`✅ ${M.nombreCompleto} ha sido agregado exitosamente al programa PIE`)}catch(D){console.error("Error al agregar estudiante:",D),alert("Hubo un error al agregar al estudiante al programa.")}},T=async M=>{try{await AJe(M.id,M)}catch(R){console.error("Error al actualizar la ficha:",R),alert("Hubo un error al guardar los cambios en la ficha.")}},j=async M=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await hJe(M),(l==null?void 0:l.id)===M&&c(null),alert("✅ Estudiante eliminado del programa PIE")}catch(R){console.error("Error al eliminar estudiante:",R),alert("Hubo un error al eliminar al estudiante.")}},I=M=>{const R=S;if(R.length===0){alert("No hay datos para exportar.");return}const k=R.map(D=>{var L;return{Nombre:D.nombre,Curso:D.curso,Dificultad:D.dificultad,"N° Intervenciones":((L=D.intervenciones)==null?void 0:L.length)||0,"Alertas Pendientes":(D.alertas||[]).filter(Z=>!Z.resuelta).length,"Metas Cumplidas":(D.metasProgreso||[]).filter(Z=>Z.cumplida).length,"Total Metas":(D.metasProgreso||[]).length,"Última Actualización":D.fechaActualizacionApoyos?new Date(D.fechaActualizacionApoyos).toLocaleDateString("es-CL"):"No registrada"}});if(M==="xlsx"){const D=Ti.json_to_sheet(k),L=Ti.book_new();Ti.book_append_sheet(L,D,"Estudiantes_Inclusion"),lE(L,"Estudiantes_Inclusion.xlsx"),alert("✅ Archivo Excel exportado exitosamente")}else{const D=new vr;D.text("Listado de Estudiantes - Programa de Inclusión",14,15),xi(D,{startY:20,head:[Object.keys(k[0])],body:k.map(Object.values)}),D.save("Estudiantes_Inclusion.pdf"),alert("✅ Archivo PDF exportado exitosamente")}},E=C.useMemo(()=>n.filter(M=>{var R;return M.profile===Gt.ESTUDIANTE&&(((R=e.cursos)==null?void 0:R.includes(M.curso||""))||e.profile===Gt.SUBDIRECCION)}).filter(M=>!t.some(R=>R.nombre===M.nombreCompleto)),[n,t,e]),S=C.useMemo(()=>t.filter(M=>M.nombre.toLowerCase().includes(f.toLowerCase())&&(m===""||M.curso===m)&&(x===""||M.dificultad===x)).sort((M,R)=>M.nombre.localeCompare(R.nombre)),[t,f,m,x]),B=C.useMemo(()=>n.filter(M=>M.profile===Gt.PROFESORADO).map(M=>M.nombreCompleto).sort(),[n]);return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),i.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[i.jsx("button",{onClick:()=>w("dashboard"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="dashboard"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📊 Dashboard"}),i.jsx("button",{onClick:()=>w("lista"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="lista"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📋 Lista de Estudiantes"})]})]}),s?i.jsxs("div",{className:"text-center py-10",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"}),i.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando datos del programa..."})]}):i.jsxs(i.Fragment,{children:[y==="dashboard"&&i.jsxs("div",{className:"space-y-8",children:[i.jsx(mJe,{estudiantes:t}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes Recientes (",Math.min(5,t.length),")"]}),i.jsx("button",{onClick:()=>w("lista"),className:"text-sm text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Ver todos →"})]}),i.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(M=>i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center hover:shadow-sm transition-shadow",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:M.nombre}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[M.curso," - ",M.dificultad]})]}),i.jsx("button",{onClick:()=>c(M),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm transition-colors",children:"Ver Ficha"})]},M.id)),t.length===0&&i.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"text-6xl mb-4",children:"📚"}),i.jsx("p",{className:"text-lg font-medium mb-2",children:"No hay estudiantes en el programa PIE"}),i.jsx("p",{className:"text-sm",children:"Comienza agregando estudiantes desde la nómina"})]})]})]}),i.jsx(tW,{estudiantesDisponibles:E,onSelect:M=>d(M)})]})]}),y==="lista"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",S.length,")"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>I("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg hover:bg-green-200 transition-colors",children:"📊 Excel"}),i.jsx("button",{onClick:()=>I("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg hover:bg-red-200 transition-colors",children:"📄 PDF"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Buscar estudiante"}),i.jsx("input",{type:"text",placeholder:"Nombre del estudiante...",value:f,onChange:M=>h(M.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por curso"}),i.jsxs("select",{value:m,onChange:M=>g(M.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todos los Cursos"}),os.map(M=>i.jsx("option",{value:M,children:M},M))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por diagnóstico"}),i.jsxs("select",{value:x,onChange:M=>v(M.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todas las Dificultades"}),E_.map(M=>i.jsx("option",{value:M,children:M},M))]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-xs",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-blue-600",children:S.length}),i.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:"Mostrando"})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-green-600",children:t.length}),i.jsx("div",{className:"text-green-800 dark:text-green-300",children:"Total"})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-yellow-600",children:t.reduce((M,R)=>M+(R.alertas||[]).filter(k=>!k.resuelta).length,0)}),i.jsx("div",{className:"text-yellow-800 dark:text-yellow-300",children:"Alertas"})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded text-center",children:[i.jsx("div",{className:"font-bold text-purple-600",children:new Set(t.map(M=>M.curso)).size}),i.jsx("div",{className:"text-purple-800 dark:text-purple-300",children:"Cursos"})]})]}),i.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[S.map(M=>{var R;return i.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:M.nombre}),(M.alertas||[]).filter(k=>!k.resuelta).length>0&&i.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:[(M.alertas||[]).filter(k=>!k.resuelta).length," alertas"]})]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:[M.curso," - ",M.dificultad]}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-600 dark:text-slate-300",children:[i.jsxs("span",{children:[((R=M.intervenciones)==null?void 0:R.length)||0," intervenciones"]}),i.jsxs("span",{children:[(M.metasProgreso||[]).filter(k=>k.cumplida).length," metas cumplidas"]}),M.fechaActualizacionApoyos&&i.jsxs("span",{children:["Últ. actualización: ",new Date(M.fechaActualizacionApoyos).toLocaleDateString("es-CL")]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[i.jsx("button",{onClick:()=>c(M),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm px-3 py-1 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:"Ver Ficha"}),i.jsx("button",{onClick:()=>j(M.id),title:"Eliminar del programa",className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:"🗑️"})]})]})},M.id)}),S.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),i.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400 mb-2",children:f||m||x?"No se encontraron estudiantes con esos criterios":"No hay estudiantes en el programa PIE"}),(f||m||x)&&i.jsx("button",{onClick:()=>{h(""),g(""),v("")},className:"text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Limpiar filtros"})]})]})]}),i.jsx(tW,{estudiantesDisponibles:E,onSelect:M=>d(M)})]})]}),u&&i.jsx(pJe,{student:u,onClose:()=>d(null),onConfirm:(M,R)=>{_(M,R),d(null)}}),l&&i.jsx(gJe,{student:l,onClose:()=>c(null),onSave:T,profesores:B})]})},yce="asistencia_dual",xJe=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaHora:((n=(r=t.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaHora}},vJe=(e,t)=>{const r=Vt(pt(lt,yce),wr("emailEstudiante","==",e),cr("fechaHora","desc"));return hr(r,a=>{const s=a.docs.map(o=>xJe(o));t(s)},a=>{console.error("Error subscribing to personal attendance:",a),t([])})},bJe=async e=>{try{const t={...e,fechaHora:ir.fromDate(new Date(e.fechaHora))};await an(pt(lt,yce),t)}catch(t){throw console.error("Error adding attendance record:",t),new Error("Could not save the attendance record.")}},yJe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),wJe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),EJe=({currentUser:e})=>{const[t,r]=C.useState(e.curso||""),[n,a]=C.useState([]),[s,o]=C.useState(!1),[l,c]=C.useState(!0),[u,d]=C.useState(null);C.useEffect(()=>{if(!e.email){c(!1);return}c(!0);const h=vJe(e.email,m=>{a(m),c(!1)});return()=>h()},[e.email]);const f=h=>{if(!t){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}o(!0),d(null),navigator.geolocation.getCurrentPosition(async m=>{const g={nombreEstudiante:e.nombreCompleto,emailEstudiante:e.email,curso:t,tipo:h,fechaHora:new Date().toISOString(),ubicacion:{latitud:m.coords.latitude,longitud:m.coords.longitude}};try{await bJe(g),d({text:`¡Marca de ${h} registrada con éxito!`,type:"success"})}catch(x){console.error("Error saving record to Firestore:",x),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{o(!1)}},m=>{console.error("Geolocation error:",m);let g="No se pudo obtener la ubicación.";switch(m.code){case m.PERMISSION_DENIED:g="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case m.POSITION_UNAVAILABLE:g="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case m.TIMEOUT:g="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:g=`Ocurrió un error desconocido al obtener la ubicación (código: ${m.code}).`;break}d({text:g,type:"error"}),o(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),i.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),i.jsxs("select",{id:"curso",value:t,onChange:h=>r(h.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"-- Mi curso --"}),Xp.map(h=>i.jsx("option",{value:h,children:h},h))]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[i.jsx("button",{onClick:()=>f("Entrada"),disabled:s||!t,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),i.jsx("button",{onClick:()=>f("Salida"),disabled:s||!t,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&i.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[i.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i.jsx("span",{children:"Obteniendo ubicación..."})]}),u&&i.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),i.jsx("div",{className:"overflow-x-auto max-h-96",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:l?i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(h=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(h.fechaHora).toLocaleString("es-CL")}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:i.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${h.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[h.tipo==="Entrada"?i.jsx(yJe,{}):i.jsx(wJe,{}),h.tipo]})}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:h.curso})]},h.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},NJe=async()=>{try{console.log("🔍 Debugging users collection...");const e=pt(Er,"users"),t=Vt(e,Ld(10)),r=await mn(t),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},a=new Set;return r.forEach((s,o)=>{const l=s.data(),c={id:s.id,data:l,fields:Object.keys(l)};n.sampleDocs.push(c),Object.keys(l).forEach(u=>a.add(u))}),n.fieldAnalysis={allFields:Array.from(a),commonFields:Array.from(a).filter(s=>n.sampleDocs.filter(l=>s in l.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(e){return console.error("Error debugging users collection:",e),{exists:!1,error:e instanceof Error?e.message:"Unknown error"}}},CJe=async(e,t)=>{var c,u,d;const r=new Date(e,t,1),n=new Date(e,t+1,0,23,59,59,999),a=ir.fromDate(r),s=ir.fromDate(n),o=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],l={};for(const f of o)try{const h=pt(Er,f);try{const m=Vt(h,wr("fechaHora",">=",a),wr("fechaHora","<=",s)),g=await mn(m);l[f]={exists:!0,hasDateField:!0,count:g.size,sampleDoc:((c=g.docs[0])==null?void 0:c.data())||null}}catch{const g=["fecha","timestamp","createdAt"];let x=!1;for(const v of g)try{const y=Vt(h,wr(v,">=",a),wr(v,"<=",s)),w=await mn(y);l[f]={exists:!0,hasDateField:v,count:w.size,sampleDoc:((u=w.docs[0])==null?void 0:u.data())||null},x=!0;break}catch{continue}if(!x){const v=Vt(h,cr("__name__"),Ld(5)),y=await mn(v);l[f]={exists:!0,hasDateField:!1,count:y.size,sampleDoc:((d=y.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(h){l[f]={exists:!1,error:h instanceof Error?h.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",l),l},_Je=(e,t,r,n)=>{try{const a=new Date(e,t,1);a.setHours(0,0,0,0);const s=new Date(e,t+1,0);s.setHours(23,59,59,999),console.log(`🔍 Buscando registros entre: ${a.toISOString()} y ${s.toISOString()}`),console.log(`📅 Mes actual: ${e}-${(t+1).toString().padStart(2,"0")}`);const o=ir.fromDate(a),l=ir.fromDate(s),c=[],u=new Map,d=()=>{const h=Array.from(u.values());console.log(`📊 Total registros encontrados: ${h.length}`),h.length>0&&console.log("📅 Registros por día:",h.reduce((m,g)=>{let x;g.fechaHora instanceof Date?x=g.fechaHora:typeof g.fechaHora=="string"?x=new Date(g.fechaHora):x=new Date;const v=x.getDate();return m[v]=(m[v]||0)+1,m},{})),r(h)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(h=>{try{console.log(`🔍 Configurando suscripción para: ${h}`);const m=pt(Er,h),g=Vt(m,wr("fechaHora",">=",o),wr("fechaHora","<=",l),cr("fechaHora","desc")),x=hr(g,v=>{console.log(`📋 ${h}: ${v.size} documentos encontrados con filtro`),v.size>0?(console.log(`✅ Registros encontrados en ${h}:`),Array.from(u.keys()).filter(w=>w.startsWith(`${h}_`)).forEach(w=>u.delete(w)),v.docs.forEach((w,_)=>{var T;if(_<5){const j=w.data();let I;(T=j.fechaHora)!=null&&T.toDate?I=j.fechaHora.toDate():typeof j.fechaHora=="string"?I=new Date(j.fechaHora):I=new Date,console.log(`   ${_+1}. ${j.emailEstudiante} - ${I.toLocaleString()} - ${j.tipo}`),console.log(`      📅 Fecha original: ${j.fechaHora} (tipo: ${typeof j.fechaHora})`)}}),v.forEach(w=>{var E;const _=w.data();let T;(E=_.fechaHora)!=null&&E.toDate?T=_.fechaHora.toDate():typeof _.fechaHora=="string"?T=new Date(_.fechaHora):_.fechaHora instanceof Date?T=_.fechaHora:_.fechaHora?T=new Date(_.fechaHora):T=new Date;const j={id:w.id,emailEstudiante:_.emailEstudiante||_.email||"",nombreEstudiante:_.nombreEstudiante||_.nombre||"",curso:_.curso||"",fechaHora:T,tipo:_.tipo,ubicacion:_.ubicacion||null,observaciones:_.observaciones||"",..._},I=`${h}_${w.id}`;u.set(I,j)}),d()):console.log(`⚪ ${h}: vacía, manteniendo datos existentes`)},v=>{console.warn(`⚠️ Error con filtro en ${h}:`,v),console.log(`🔄 Intentando estrategia alternativa en ${h}...`);const y=Vt(m,Ld(200)),w=hr(y,T=>{if(console.log(`📋 ${h} (sin filtro): ${T.size} documentos`),T.size>0){const I=T.docs[0].data();console.log(`📄 Estructura en ${h}:`,Object.keys(I)),console.log("📄 Primer documento:",I)}const j=T.docs.filter(I=>{var B;const E=I.data();if(!E.fechaHora)return!1;let S;return(B=E.fechaHora)!=null&&B.toDate?S=E.fechaHora.toDate():typeof E.fechaHora=="string"?S=new Date(E.fechaHora):E.fechaHora instanceof Date?S=E.fechaHora:S=new Date(E.fechaHora),S>=a&&S<=s});console.log(`📅 ${h}: ${j.length} registros después de filtro manual`),j.length>0&&(Array.from(u.keys()).filter(E=>E.startsWith(`${h}_`)).forEach(E=>u.delete(E)),j.forEach(E=>{var k;const S=E.data();let B;(k=S.fechaHora)!=null&&k.toDate?B=S.fechaHora.toDate():typeof S.fechaHora=="string"?B=new Date(S.fechaHora):S.fechaHora instanceof Date?B=S.fechaHora:B=new Date(S.fechaHora);const M={id:E.id,emailEstudiante:S.emailEstudiante||S.email||"",nombreEstudiante:S.nombreEstudiante||S.nombre||"",curso:S.curso||"",fechaHora:B,tipo:S.tipo,ubicacion:S.ubicacion||null,observaciones:S.observaciones||"",...S},R=`${h}_${E.id}`;u.set(R,M)}),d())}),_=c.findIndex(T=>T===x);_>=0?c[_]=w:c.push(w)});c.push(x)}catch(m){console.warn(`❌ Error configurando ${h}:`,m)}}),()=>{c.forEach(h=>{try{h()}catch(m){console.warn("Error unsubscribing:",m)}})}}catch(a){return console.error("Error setting up subscribeToAsistenciaByMonth:",a),n&&n(new Error(`Error al configurar suscripción: ${a instanceof Error?a.message:"Error desconocido"}`)),()=>{}}},SJe=(e,t)=>{try{console.log("🔍 Buscando usuarios en múltiples colecciones...");const r=["usuarios","users"],n=[],a=new Map,s=()=>{const l=Array.from(a.values());console.log(`📊 Total usuarios encontrados: ${l.length}`);const c=l.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("👥 Usuarios por perfil:",c);const u=l.filter(d=>d.profile===Gt.ESTUDIANTE);console.log(`🎓 Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),e(l)};let o=!1;return r.forEach(l=>{try{const c=pt(Er,l),u=Vt(c),d=hr(u,f=>{f.size>0?(console.log(`✅ Encontrados ${f.size} usuarios en colección: ${l}`),o=!0,Array.from(a.keys()).filter(m=>m.startsWith(`${l}_`)).forEach(m=>a.delete(m)),f.forEach(m=>{var g,x,v,y;try{const w=m.data(),_=w.email||w.userEmail||w.mail||w.correo||"",T=w.nombreCompleto||w.displayName||w.name||w.nombre||w.fullName||"",j=w.curso||w.course||w.class||w.grade||"";let I=w.profile||w.role||w.tipo||w.userType||Gt.ESTUDIANTE;if(typeof I=="string"){const B=I.toLowerCase();B.includes("estudiante")||B.includes("student")||B.includes("alumno")?I=Gt.ESTUDIANTE:B.includes("coordinador")||B.includes("coordinator")?I=Gt.COORDINADOR_TP:B.includes("profesor")||B.includes("teacher")||B.includes("docente")?I=Gt.PROFESOR:(B.includes("subdireccion")||B.includes("subdir"))&&(I=Gt.COORDINADOR_TP)}const E={id:m.id,email:_,nombreCompleto:T,curso:j,profile:I,activo:w.activo!==!1,fechaCreacion:((x=(g=w.fechaCreacion)==null?void 0:g.toDate)==null?void 0:x.call(g))||new Date(w.fechaCreacion)||new Date,ultimaActividad:((y=(v=w.ultimaActividad)==null?void 0:v.toDate)==null?void 0:y.call(v))||new Date(w.ultimaActividad)||new Date,...w},S=`${l}_${m.id}`;a.set(S,E)}catch(w){console.warn(`Error procesando documento ${m.id} en ${l}:`,w)}}),s()):console.log(`⚪ Colección ${l}: vacía`)},f=>{console.warn(`⚠️ Error en colección ${l}:`,f)});n.push(d)}catch(c){console.warn(`❌ Error configurando ${l}:`,c)}}),setTimeout(()=>{o||(console.error("❌ No se encontraron usuarios en ninguna colección"),t&&t(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(l=>{try{l()}catch(c){console.warn("Error unsubscribing:",c)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),t&&t(new Error(`Error al configurar suscripción multi-colección: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},kJe=(e,t)=>{try{console.log("Setting up users subscription...");const r=pt(Er,"users"),n=Vt(r);return hr(n,s=>{console.log(`Raw users snapshot size: ${s.size}`);const o=[];s.forEach(d=>{var f,h,m,g;try{const x=d.data();console.log(`Processing user doc ${d.id}:`,x);const v=x.email||x.userEmail||x.mail||"",y=x.nombreCompleto||x.displayName||x.name||x.nombre||"",w=x.curso||x.course||x.class||"";let _=x.profile||x.role||x.tipo||Gt.ESTUDIANTE;if(typeof _=="string"){const j=_.toLowerCase();j.includes("estudiante")||j.includes("student")||j.includes("alumno")?_=Gt.ESTUDIANTE:j.includes("coordinador")||j.includes("coordinator")?_=Gt.COORDINADOR_TP:j.includes("profesor")||j.includes("teacher")||j.includes("docente")?_=Gt.PROFESOR:(j.includes("subdireccion")||j.includes("subdir"))&&(_=Gt.COORDINADOR_TP)}const T={id:d.id,email:v,nombreCompleto:y,curso:w,profile:_,activo:x.activo!==!1,fechaCreacion:((h=(f=x.fechaCreacion)==null?void 0:f.toDate)==null?void 0:h.call(f))||new Date(x.fechaCreacion)||new Date,ultimaActividad:((g=(m=x.ultimaActividad)==null?void 0:m.toDate)==null?void 0:g.call(m))||new Date(x.ultimaActividad)||new Date,...x};o.push(T)}catch(x){console.warn(`Error processing user document ${d.id}:`,x)}}),o.sort((d,f)=>d.nombreCompleto.localeCompare(f.nombreCompleto)),console.log(`Processed ${o.length} users successfully`);const l=o.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("Users by profile:",l);const c=o.filter(d=>d.profile===Gt.ESTUDIANTE);console.log(`Estudiantes: ${c.length}`);const u=c.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),e(o)},s=>{console.error("Error in subscribeToAllUsers:",s),t&&t(new Error(`Error al cargar usuarios: ${s.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),t&&t(new Error(`Error al configurar suscripción de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},CC=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},jJe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),BJe=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),TJe=()=>{const[e,t]=C.useState([]),[r,n]=C.useState([]),[a,s]=C.useState(!0),[o,l]=C.useState(null),[c,u]=C.useState(new Date),[d,f]=C.useState("todos"),[h,m]=C.useState("");C.useEffect(()=>{s(!0),l(null);const I=c.getFullYear(),E=c.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Año:",I,"Mes:",E);let S=!1,B=!1;const M=()=>{S&&B&&(console.log("=== CARGA COMPLETA ==="),s(!1))};(async()=>{console.log("🧪 INICIANDO PRUEBA DIRECTA SIMPLE...");try{const k=pt(Er,"asistencia_dual"),D=Vt(k,Ld(5)),L=await mn(D);if(console.log(`✅ asistencia_dual - Documentos encontrados: ${L.size}`),L.size>0)L.docs.forEach((Z,V)=>{const q=Z.data();console.log(`   ${V+1}. ${Z.id.slice(0,8)} - ${q.emailEstudiante} - ${q.tipo}`),console.log("      Fecha original:",q.fechaHora),console.log("      Todos los campos:",Object.keys(q))});else{console.log("❌ No se encontraron documentos en asistencia_dual");const Z=["asistenciaEmpresa","asistencia_empresa"];for(const V of Z)try{const q=pt(Er,V),G=Vt(q,Ld(3)),K=await mn(G);if(console.log(`📋 ${V}: ${K.size} documentos`),K.size>0){const ee=K.docs[0].data();console.log("   Estructura:",Object.keys(ee)),console.log("   Email:",ee.emailEstudiante||ee.email),console.log("   Fecha:",ee.fechaHora||ee.fecha)}}catch(q){console.log(`❌ ${V}: ${q instanceof Error?q.message:"Error"}`)}}}catch(k){console.error("❌ Error en prueba directa:",k),k.code==="permission-denied"?(console.log("🔒 PROBLEMA: Permisos de Firestore denegados"),console.log("💡 Ve a Firebase Console → Firestore → Rules y verifica los permisos")):k.code==="failed-precondition"&&(console.log("📊 PROBLEMA: Faltan índices en Firestore"),console.log("💡 Ve a Firebase Console → Firestore → Indexes"))}})(),CJe(I,E).then(k=>{console.log("🔍 Debug info for collections:",k),Object.entries(k).forEach(([D,L])=>{if(L.exists&&L.totalDocs>0){if(console.log(`
📋 COLECCIÓN ${D.toUpperCase()}:`),console.log(`   📊 Total documentos: ${L.totalDocs}`),console.log(`   📅 Documentos del período: ${L.count}`),console.log(`   🔑 Campo de fecha: ${L.hasDateField}`),L.sampleDoc){console.log("   📄 Documento ejemplo:",L.sampleDoc);const Z=L.sampleDoc,V=Z.emailEstudiante||Z.email||Z.userEmail||Z.correo||"NO ENCONTRADO",q=Z.tipo||Z.type||Z.action||Z.tipoRegistro||"NO ENCONTRADO",G=Z.fechaHora||Z.fecha||Z.timestamp||Z.createdAt||"NO ENCONTRADO";console.log(`   📧 Email estudiante: ${V}`),console.log(`   📝 Tipo registro: ${q}`),console.log(`   📅 Fecha: ${G}`),console.log("   🗂️ Todos los campos:",Object.keys(Z))}L.filteredDocs&&L.filteredDocs.length>0&&(console.log("   📋 Registros del período encontrados:",L.filteredDocs.length),L.filteredDocs.forEach((Z,V)=>{V<3&&console.log(`      ${V+1}. ID: ${Z.id}`,Z.data)}))}else L.exists?console.log(`⚪ Colección ${D}: vacía`):console.log(`❌ Colección ${D}: no existe`)})}).catch(k=>{console.error("Debug error:",k)}),NJe().then(k=>{console.log("🔍 Debug info for users:",k),(!k.exists||k.totalDocs===0)&&(console.log('⚠️ Colección "users" vacía o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async L=>{var Z;try{const V=pt(Er,L),q=Vt(V,Ld(5)),G=await mn(q);G.size>0?(console.log(`✅ Encontrada colección alternativa: ${L} con ${G.size} documentos`),console.log("Documento muestra:",(Z=G.docs[0])==null?void 0:Z.data())):console.log(`❌ Colección ${L}: vacía`)}catch{console.log(`❌ Colección ${L}: no existe`)}}))}).catch(k=>{console.error("Users debug error:",k)});try{console.log("Configurando suscripción a asistencia...");const k=_Je(I,E,L=>{if(console.log("✅ Received registros:",L.length),L.length>0){console.log("📋 ANÁLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",L[0]);const Z=[...new Set(L.map(W=>W.emailEstudiante).filter(Boolean))];console.log("📧 Emails de estudiantes en registros:",Z);const V=[...new Set(L.map(W=>W.tipo).filter(Boolean))];console.log("📝 Tipos de registro encontrados:",V);const q=L.reduce((W,P)=>{const U=new Date(P.fechaHora).getDate();return W[U]||(W[U]=[]),W[U].push(P),W},{});console.log("📅 Registros por día del mes:",Object.keys(q).map(W=>({dia:parseInt(W),cantidad:q[parseInt(W)].length})));const G=r.map(W=>W.email).filter(Boolean);console.log("👥 Emails de estudiantes cargados:",G);const K=Z.filter(W=>G.includes(W)),ee=Z.filter(W=>!G.includes(W));console.log("✅ Emails que coinciden:",K),console.log("❌ Emails que NO coinciden:",ee)}else console.log("⚠️ No se encontraron registros de asistencia para el período");t(L),S=!0,M()},L=>{console.error("❌ Error fetching asistencia:",L),l("Error al cargar datos de asistencia: "+L.message),S=!0,M()});console.log("Configurando suscripción a usuarios...");const D=SJe(L=>{if(console.log("✅ Received users (multi-collection):",L.length),L.length>0){console.log("Sample user:",L[0]);const Z=L.filter(V=>V.profile===Gt.ESTUDIANTE&&V.curso);console.log("Dual students found:",Z.length),Z.forEach(V=>{console.log(`- ${V.nombreCompleto} (${V.curso}) - ${V.email}`)})}n(L),B=!0,M()},L=>{console.error("❌ Error fetching users (multi-collection):",L),console.log("🔄 Intentando con función original de usuarios...");const Z=kJe(V=>{console.log("✅ Received users (fallback):",V.length),n(V),B=!0,M()},V=>{console.error("❌ Error en fallback también:",V),l("Error al cargar estudiantes: "+L.message),B=!0,M()})});return()=>{console.log("Limpiando suscripciones..."),k&&k(),D&&D()}}catch(k){console.error("❌ Error setting up subscriptions:",k),l("Error al inicializar conexiones: "+(k instanceof Error?k.message:"Error desconocido")),s(!1)}},[c]);const{monthDays:g,monthName:x,year:v}=C.useMemo(()=>{const I=c.getFullYear(),E=c.getMonth();return{monthDays:new Date(I,E+1,0).getDate(),monthName:c.toLocaleString("es-CL",{month:"long"}),year:I}},[c]),y=C.useMemo(()=>{let I=r.filter(E=>E.profile===Gt.ESTUDIANTE&&E.curso&&Xp.includes(CC(E.curso)));if(d!=="todos"&&(I=I.filter(E=>CC(E.curso||"")===d)),h&&(I=I.filter(E=>E.nombreCompleto.toLowerCase().includes(h.toLowerCase()))),e.length>0){const E=[...new Set(e.map(M=>M.emailEstudiante).filter(Boolean))],S=I.map(M=>M.email),B=E.filter(M=>!S.includes(M));if(B.length>0){console.log("📝 Agregando estudiantes faltantes con registros:",B);const R=B.map(k=>{const D=e.find(L=>L.emailEstudiante===k);return{id:k,email:k,nombreCompleto:(D==null?void 0:D.nombreEstudiante)||k.split("@")[0],curso:(D==null?void 0:D.curso)||"3ºC",profile:Gt.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(k=>{const D=d==="todos"||CC(k.curso)===d,L=!h||k.nombreCompleto.toLowerCase().includes(h.toLowerCase());return D&&L&&Xp.includes(CC(k.curso))});I=[...I,...R]}}return console.log(`👥 Estudiantes filtrados para mostrar: ${I.length}`),I.forEach(E=>{console.log(`   - ${E.nombreCompleto} (${E.curso}) - ${E.email}`)}),I.sort((E,S)=>E.nombreCompleto.localeCompare(S.nombreCompleto))},[r,d,h,e]),w=C.useMemo(()=>{console.log("🔄 Procesando datos de asistencia para la tabla..."),console.log(`📊 Total registros a procesar: ${e.length}`),console.log(`👥 Estudiantes disponibles: ${y.length}`);const I=new Map;return e.length===0?(console.log("⚠️ No hay registros para procesar aún"),I):(e.forEach((E,S)=>{const B=E.emailEstudiante;if(!B)return;let M;if(E.fechaHora instanceof Date)M=E.fechaHora;else if(E.fechaHora&&typeof E.fechaHora=="object"&&"toDate"in E.fechaHora)M=E.fechaHora.toDate();else if(typeof E.fechaHora=="string")M=new Date(E.fechaHora);else{console.warn("Fecha no válida en registro:",E);return}const R=M.getDate(),k=M.getMonth(),D=M.getFullYear();S<3&&console.log(`📅 Registro ${S+1}:`,{email:B,tipo:E.tipo,fechaOriginal:E.fechaHora,fechaProcesada:M.toLocaleString(),año:D,mes:k,día:R}),I.has(B)||I.set(B,new Map);const L=I.get(B);L.has(R)||L.set(R,{});const Z=L.get(R);E.tipo==="Entrada"?(!Z.entrada||M<new Date(Z.entrada.fechaHora))&&(Z.entrada=E):E.tipo==="Salida"&&(!Z.salida||M>new Date(Z.salida.fechaHora))&&(Z.salida=E)}),console.log("📋 Datos de asistencia procesados:",{estudiantesConRegistros:I.size,estudiantes:Array.from(I.keys()),registrosPorEstudiante:Array.from(I.entries()).map(([E,S])=>({email:E,dias:Array.from(S.keys()),totalRegistros:Array.from(S.values()).reduce((B,M)=>B+(M.entrada?1:0)+(M.salida?1:0),0)}))}),I)},[e]),_=I=>{u(E=>{const S=new Date(E);return S.setMonth(S.getMonth()+I),S})},T=I=>{I!=null&&I.latitud&&(I!=null&&I.longitud)&&window.open(`https://www.google.com/maps?q=${I.latitud},${I.longitud}`,"_blank")},j=["D","L","M","M","J","V","S"];return o?i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:i.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:o})}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[i.jsx("button",{onClick:()=>_(-1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:"←"}),i.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${x} ${v}`}),i.jsx("button",{onClick:()=>_(1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:"→"})]}),i.jsxs("select",{value:d,onChange:I=>f(I.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"todos",children:"Todos los Cursos"}),Xp.map(I=>i.jsx("option",{value:I,children:I},I))]}),i.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:h,onChange:I=>m(I.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a?i.jsxs("div",{className:"text-center text-amber-600 py-10",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),i.jsx("div",{children:"Cargando datos de asistencia..."})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:g},(I,E)=>{const B=new Date(v,c.getMonth(),E+1).getDay(),M=B===0||B===6;return i.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${M?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[i.jsx("div",{className:"font-semibold",children:j[B]}),i.jsx("div",{children:E+1})]},E)})]})}),i.jsx("tbody",{children:y.length>0?y.map(I=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[i.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:I.nombreCompleto}),Array.from({length:g},(E,S)=>{var D;const B=S+1,M=(D=w.get(I.email))==null?void 0:D.get(B),R=new Date(v,c.getMonth(),S+1),k=R.getDay()===0||R.getDay()===6;return I.email==="alexis.robles@industrialderecoleta.cl"&&B===2&&console.log("🔍 Verificando día 2 para Alexis:",{email:I.email,day:B,hasDataForStudent:w.has(I.email),studentDayRecords:M,allAttendanceKeys:Array.from(w.keys()),daysForStudent:w.get(I.email)?Array.from(w.get(I.email).keys()):[]}),i.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${k?"bg-slate-100 dark:bg-slate-700/50":""}`,children:i.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(M==null?void 0:M.entrada)&&i.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var L;return T((L=M.entrada)==null?void 0:L.ubicacion)},children:[i.jsx(jJe,{}),i.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(M.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(M==null?void 0:M.salida)&&i.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var L;return T((L=M.salida)==null?void 0:L.ubicacion)},children:[i.jsx(BJe,{}),i.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(M.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},B)})]},I.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:g+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},Y4="evaluaciones_formativas",J4="calificaciones_formativas",vM="trabajos_grupales_formativos",IJe="usuarios",bM=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},FJe=(e,t,r)=>{const n=Vt(pt(lt,Y4),wr("curso","==",e),wr("asignatura","==",t),cr("fecha","asc"));return hr(n,a=>{r(a.docs.map(s=>bM(s)))},a=>{console.error("Error al suscribirse a evaluaciones:",a),r([])})},OJe=async(e,t)=>{const r=Ug(lt),n=rr(pt(lt,Y4));r.set(n,{...e,fecha:ir.fromDate(new Date(e.fecha+"T00:00:00"))});const a=rr(lt,J4,n.id);return r.set(a,t),await r.commit(),n.id},DJe=async(e,t)=>{const r=rr(lt,Y4,e);await yi(r,t,{merge:!0})},PJe=async e=>{const t=Ug(lt);t.delete(rr(lt,Y4,e)),t.delete(rr(lt,J4,e)),await t.commit()},RJe=(e,t)=>{if(e.length===0)return t({}),()=>{};const r=e.map(n=>{const a=rr(lt,J4,n);return hr(a,s=>{s.exists()&&t({[n]:s.data()})})});return()=>r.forEach(n=>n())},LJe=async(e,t)=>{const r=rr(lt,J4,e);await yi(r,t,{merge:!0})},MJe=(e,t,r)=>{const n=Vt(pt(lt,vM),wr("curso","==",e),wr("asignatura","==",t),cr("fechaPresentacion","desc"));return hr(n,a=>{r(a.docs.map(s=>bM(s)))},a=>{console.error("Error al suscribirse a trabajos grupales:",a),r([])})},UJe=async e=>{const t={...e,fechaPresentacion:ir.fromDate(new Date(e.fechaPresentacion+"T00:00:00"))};await an(pt(lt,vM),t)},QJe=async(e,t)=>{const r=rr(lt,vM,e);await yi(r,t,{merge:!0})},HJe=e=>{const t=Vt(pt(lt,IJe));return hr(t,r=>{e(r.docs.map(n=>bM(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),e([])})},wce=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},wv={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},Ece=e=>e.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:e.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:e.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:e.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},VJe=({cursos:e,onSelect:t})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),e.length>0?i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:e.map(r=>{const n=Ece(r);return i.jsxs("div",{className:"space-y-2 text-center",children:[i.jsxs("button",{onClick:()=>t(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[i.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),i.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[i.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),i.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),i.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):i.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[i.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),i.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),zJe=({curso:e,asignaturas:t,onSelect:r,onBack:n})=>{const a=Ece(e);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[i.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),i.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",e]})]}),i.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),t.length>0?i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.map(s=>i.jsxs("button",{onClick:()=>r(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[i.jsx("span",{className:"text-2xl",children:wv[s]||wv.Default}),i.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):i.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[i.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),i.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},$Je=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=C.useState([]),[o,l]=C.useState({}),[c,u]=C.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,f]=C.useState(null),[h,m]=C.useState(null),[g,x]=C.useState(!0),v=C.useMemo(()=>r.filter(S=>S.profile===Gt.ESTUDIANTE&&wce(S.curso||"")===e).map(S=>S.nombreCompleto).sort((S,B)=>S.localeCompare(B)),[r,e]);C.useEffect(()=>{x(!0);const S=FJe(e,t,B=>{s(B);const M=B.map(k=>k.id),R=RJe(M,k=>{l(D=>({...D,...k}))});return x(!1),()=>R()});return()=>S()},[e,t]);const y=S=>{const{name:B,value:M}=S.target;d?f(R=>R?{...R,[B]:M}:null):u(R=>({...R,[B]:M}))},w=async S=>{if(S.preventDefault(),m(null),!c.nombreActividad.trim()){m("El nombre de la actividad es obligatorio.");return}const B={asignatura:t,curso:e,...c},M=v.reduce((R,k)=>(R[k]="trabajado",R),{});try{await OJe(B,M),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(R){console.error(R),m("No se pudo crear la evaluación.")}},_=(S,B)=>{var D;const M=((D=o[S])==null?void 0:D[B])||"trabajado";let R;M==="trabajado"?R="no trabajado":M==="no trabajado"?R="ausente":R="trabajado";const k={...o,[S]:{...o[S]||{},[B]:R}};l(k),LJe(S,{[B]:R}).catch(L=>{console.error("Error updating grade:",L)})},T=S=>f(S),j=async()=>{if(d)try{await DJe(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),f(null)}catch(S){console.error(S),m("No se pudo guardar la edición.")}},I=async S=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?"))try{await PJe(S)}catch(B){console.error(B),m("No se pudo eliminar la evaluación.")}},E=C.useCallback(S=>{if(a.length===0)return"-";let B=0,M=0;return a.forEach(R=>{var D;const k=(D=o[R.id])==null?void 0:D[S];k==="trabajado"?(B+=7,M++):k==="no trabajado"&&(B+=2,M++)}),M===0?"-":(B/M).toFixed(1)},[o,a]);return g?i.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),i.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),i.jsxs("form",{onSubmit:w,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),i.jsxs("div",{className:"w-full",children:[i.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),i.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:c.nombreActividad,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{className:"w-full",children:[i.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),i.jsx("input",{id:"fecha",type:"date",name:"fecha",value:c.fecha,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsx("div",{className:"w-full",children:i.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),h&&i.jsx("p",{className:"text-red-500 text-sm col-span-full",children:h})]}),i.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),a.map(S=>i.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===S.id?i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),i.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),i.jsx("button",{onClick:j,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("span",{className:"font-semibold",children:S.nombreActividad}),i.jsx("span",{className:"font-normal text-slate-500",children:S.fecha}),i.jsxs("div",{className:"flex gap-2 mt-1",children:[i.jsx("button",{onClick:()=>T(S),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),i.jsx("button",{onClick:()=>I(S.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},S.id)),i.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:v.map(S=>i.jsxs("tr",{children:[i.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:S}),a.map(B=>{var k;const M=(k=o[B.id])==null?void 0:k[S];let R;return M==="trabajado"?R=wv[t]||wv.Default:M==="no trabajado"?R="❌":M==="ausente"?R="A":R=wv[t]||wv.Default,i.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:i.jsx("button",{onClick:()=>_(B.id,S),className:`text-3xl transition-opacity duration-200 ${M==="trabajado"?"opacity-100":M==="no trabajado"?"opacity-40":M==="ausente"?"opacity-100 text-red-500 font-bold":"opacity-100"}`,children:R})},B.id)}),i.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:E(S)})]},S))})]})})]})},GJe=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=C.useState([]),[o,l]=C.useState(null),[c,u]=C.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,f]=C.useState({}),[h,m]=C.useState(2),g=C.useMemo(()=>r.filter(T=>T.profile===Gt.ESTUDIANTE&&wce(T.curso||"")===e).sort((T,j)=>T.nombreCompleto.localeCompare(j.nombreCompleto)),[r,e]);C.useEffect(()=>{const T=MJe(e,t,s);return()=>T()},[e,t]),C.useEffect(()=>{if(o){const T={};o.grupos.forEach(j=>{j.integrantes.forEach(I=>{T[I.nombre]={groupNumber:String(j.numero),role:I.rol||""}})}),f(T)}else f({})},[o]);const x=async T=>{if(T.preventDefault(),!c.nombre.trim())return;const j={curso:e,asignatura:t,nombreActividad:c.nombre,fechaPresentacion:c.fecha,grupos:[]};try{await UJe(j),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(I){console.error(I),alert("No se pudo crear la actividad grupal.")}},v=async()=>{if(!o)return;const T=new Map;for(const I of g){const E=d[I.nombreCompleto];if(E&&E.groupNumber){const S=parseInt(E.groupNumber,10);isNaN(S)||(T.has(S)||T.set(S,[]),T.get(S).push({nombre:I.nombreCompleto,rol:E.role||""}))}}const j=Array.from(T.entries()).map(([I,E])=>({numero:I,integrantes:E})).sort((I,E)=>I.numero-E.numero);try{await QJe(o.id,{grupos:j}),alert("Grupos guardados con éxito.")}catch(I){console.error(I),alert("No se pudieron guardar los grupos.")}},y=()=>{if(h<2){alert("Debe haber al menos 2 grupos.");return}const T=[...g].sort(()=>Math.random()-.5),j={};T.forEach((I,E)=>{var S;j[I.nombreCompleto]={groupNumber:String(E%h+1),role:((S=d[I.nombreCompleto])==null?void 0:S.role)||""}}),f(j)},w=(T,j,I)=>{f(E=>({...E,[T]:{...E[T]||{groupNumber:"",role:""},[j]:I}}))},_=C.useMemo(()=>{const T=new Map;return Object.entries(d).forEach(([j,I])=>{I.groupNumber&&(T.has(I.groupNumber)||T.set(I.groupNumber,[]),T.get(I.groupNumber).push({nombre:j,rol:I.role}))}),Array.from(T.entries()).sort((j,I)=>parseInt(j[0])-parseInt(I[0]))},[d]);return o?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),i.jsx("h2",{className:"text-2xl font-bold",children:o.nombreActividad})]}),i.jsx("button",{onClick:v,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"md:col-span-1 space-y-4",children:[i.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"number",value:h,onChange:T=>m(parseInt(T.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),i.jsx("button",{onClick:y,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),i.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),i.jsx("table",{className:"w-full text-sm",children:i.jsx("tbody",{children:g.map(T=>{var j;return i.jsxs("tr",{children:[i.jsx("td",{className:"py-1 pr-2",children:T.nombreCompleto}),i.jsx("td",{className:"py-1",children:i.jsx("input",{type:"number",value:((j=d[T.nombreCompleto])==null?void 0:j.groupNumber)||"",onChange:I=>w(T.nombreCompleto,"groupNumber",I.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},T.id)})})})]})]}),i.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:_.map(([T,j])=>i.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[i.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",T]}),i.jsx("ul",{className:"space-y-2",children:j.map(I=>i.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[i.jsx("span",{className:"flex-1 truncate",children:I.nombre}),i.jsxs("select",{value:I.rol||"",onChange:E=>w(I.nombre,"role",E.target.value),className:"p-1 border rounded text-xs w-32",children:[i.jsx("option",{value:"",children:"-- Asignar Rol --"}),ate.map(E=>i.jsx("option",{value:E,children:E},E))]})]},I.nombre))})]},T))})]})]})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),i.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),i.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[i.jsx("input",{value:c.nombre,onChange:T=>u({...c,nombre:T.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),i.jsx("input",{type:"date",value:c.fecha,onChange:T=>u({...c,fecha:T.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.map(T=>i.jsxs("button",{onClick:()=>l(T),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[i.jsx("p",{className:"font-bold",children:T.nombreActividad}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",T.fechaPresentacion]})]},T.id))]})]})},qJe=({currentUser:e})=>{const[t,r]=C.useState("calificaciones"),[n,a]=C.useState(null),[s,o]=C.useState(null),[l,c]=C.useState([]),[u,d]=C.useState(!0);C.useEffect(()=>{d(!0);const x=HJe(v=>{c(v),d(!1)});return()=>x()},[]);const f=C.useMemo(()=>e.cursos||[],[e.cursos]),h=C.useMemo(()=>e.asignaturas||[],[e.asignaturas]),m=({tab:x,label:v})=>i.jsx("button",{onClick:()=>r(x),className:`${t===x?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:v}),g=()=>{if(u)return i.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return i.jsx(VJe,{cursos:f,onSelect:a});if(!s)return i.jsx(zJe,{curso:n,asignaturas:h,onSelect:o,onBack:()=>a(null)});if(t==="calificaciones")return i.jsx($Je,{curso:n,asignatura:s,allUsers:l,onBack:()=>o(null)});if(t==="grupos")return i.jsx(GJe,{curso:n,asignatura:s,allUsers:l,onBack:()=>o(null)})};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[i.jsx(m,{tab:"calificaciones",label:"Calificaciones"}),i.jsx(m,{tab:"grupos",label:"Trabajos Grupales"})]})}),i.jsx("div",{className:"mt-6",children:g()})]})};function KJe(e){return e.map(t=>{const[r,n]=t.minuto.split("-").map(Number),a=t.accionesEstudiantes.length>0?t.accionesEstudiantes.split(" ").length/(n-r):0;return{minuto:r,participacion:Math.min(100,a*10)}})}function WJe(e){const t=new Map,r={preguntas_abiertas:/(?:pregunt[aó]|cu[áa]l|qu[ée]|c[óo]mo|por qu[ée]|explica)/gi,interrogacion_sucesiva:/(?:entonces|y luego|qu[ée] m[áa]s|profundiza|explica mejor)/gi,ejemplos_contextualizados:/(?:ejemplo|caso|situaci[óo]n|contexto real|en la vida)/gi,feedback_inmediato:/(?:bien|correcto|exacto|muy bien|as[íi] es|mejorar[íi]a)/gi};for(const[n,a]of Object.entries(r)){const s=e.match(a);t.set(n,s?s.length:0)}return t}async function XJe(e,t){var o;const r={stats:{docenteId:e.docenteInfo||"",curso:e.cursoInfo||"",asignatura:e.asignaturaInfo||"",conteo_observaciones:1,uso_preguntas_abiertas_pct:0,uso_interrogacion_sucesiva_pct:0,uso_ejemplos_contextualizados_pct:0,feedback_inmediato_pct:0,min_interaccion:0,min_explicacion:0,participacion_promedio:0},charts:{participacion_por_minuto:[],estrategias_frecuencia:[],indicadores_cumplimiento:[],nube_palabras:[]},summary:{fortalezas:[],mejoras:[],recomendaciones:[]},alerts:[],traza:{modelo:"gemini-2.5-flash-lite",version_prompt:"v1"}};if(e.detallesObservacion){r.charts.participacion_por_minuto=KJe(e.detallesObservacion);let l=0,c=0;e.detallesObservacion.forEach(u=>{const[d,f]=u.minuto.split("-").map(Number),h=f-d;u.accionesEstudiantes.length>u.accionesDocente.length?l+=h:c+=h}),r.stats.min_interaccion=l,r.stats.min_explicacion=c}const n=new Map;let a=0;(o=e.detallesObservacion)==null||o.forEach(l=>{WJe(l.accionesDocente).forEach((u,d)=>{n.set(d,(n.get(d)||0)+u)}),a+=l.accionesDocente.length}),n.forEach((l,c)=>{const u=a>0?l/a*100:0;switch(r.charts.estrategias_frecuencia.push({estrategia:c,porcentaje:Math.round(u*100)/100,conteo:l}),c){case"preguntas_abiertas":r.stats.uso_preguntas_abiertas_pct=u;break;case"interrogacion_sucesiva":r.stats.uso_interrogacion_sucesiva_pct=u;break;case"ejemplos_contextualizados":r.stats.uso_ejemplos_contextualizados_pct=u;break;case"feedback_inmediato":r.stats.feedback_inmediato_pct=u;break}}),r.charts.participacion_por_minuto.length>0&&(r.stats.participacion_promedio=r.charts.participacion_por_minuto.reduce((l,c)=>l+c.participacion,0)/r.charts.participacion_por_minuto.length);const s=[...n.entries()].sort(([,l],[,c])=>c-l);return r.summary.fortalezas=s.slice(0,3).map(([l])=>{switch(l){case"preguntas_abiertas":return"Uso efectivo de preguntas abiertas para promover el pensamiento crítico";case"interrogacion_sucesiva":return"Buena secuencia de preguntas para profundizar la comprensión";case"ejemplos_contextualizados":return"Excelente uso de ejemplos contextualizados";case"feedback_inmediato":return"Retroalimentación inmediata y efectiva";default:return`Buen uso de ${l.replace(/_/g," ")}`}}),r.summary.mejoras=s.slice(-3).map(([l])=>{switch(l){case"preguntas_abiertas":return"Aumentar el uso de preguntas abiertas";case"interrogacion_sucesiva":return"Desarrollar más secuencias de preguntas";case"ejemplos_contextualizados":return"Incorporar más ejemplos contextualizados";case"feedback_inmediato":return"Proporcionar más retroalimentación inmediata";default:return`Incrementar el uso de ${l.replace(/_/g," ")}`}}),r.summary.recomendaciones=r.summary.mejoras.map(l=>l.includes("preguntas abiertas")?"Preparar 2-3 preguntas desafiantes por segmento de clase":l.includes("secuencias de preguntas")?'Implementar la técnica de "¿Por qué?" en cascada':l.includes("ejemplos contextualizados")?"Vincular cada concepto con situaciones de la vida real":"Establecer puntos de verificación cada 10-15 minutos"),r.stats.participacion_promedio<30&&r.alerts.push("Baja participación estudiantil detectada"),r.stats.min_explicacion>r.stats.min_interaccion*2&&r.alerts.push("Alto tiempo de explicación vs. interacción"),r}const YJe=({acompanamientos:e,ciclosOPR:t,standaloneCiclos:r})=>{const[n,a]=C.useState(null),[s,o]=C.useState(null),[l,c]=C.useState(!1),u=e.length,d=Object.values(t).reduce((y,w)=>y+w.length,0)+r.length,f=[...Object.values(t).flat(),...r],h=new Set([...e.map(y=>y.docente),...f.map(y=>y.docenteInfo)]).size,m=f.reduce((y,w)=>{const _=new Date(w.fecha).toLocaleDateString("es-ES",{month:"long"});return y[_]=(y[_]||0)+1,y},{}),g=f.reduce((y,w)=>(w.asignaturaInfo&&(y[w.asignaturaInfo]=(y[w.asignaturaInfo]||0)+1),y),{}),x=Object.entries(g).sort(([,y],[,w])=>w-y).slice(0,5);f.reduce((y,w)=>{if(!w.horaInicio||!w.horaTermino)return y;const _=new Date("2000/01/01 "+w.horaInicio),j=(new Date("2000/01/01 "+w.horaTermino).getTime()-_.getTime())/(1e3*60);return y+j},0)/f.length;const v=f.filter(y=>{var w,_,T;return((w=y.retroalimentacion)==null?void 0:w.exito)&&((_=y.retroalimentacion)==null?void 0:_.modelo)&&((T=y.retroalimentacion)==null?void 0:T.foco)}).length;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg",children:i.jsx(Md,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Acompañamientos"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/50 rounded-lg",children:i.jsx(Op,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Ciclos OPR"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:d})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:i.jsx(_o,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docentes Observados"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:h})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:i.jsx(es,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Retroalimentación Completa"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:v})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(ic,{className:"w-5 h-5 text-indigo-600"}),"Ciclos por Mes"]}),i.jsx("div",{className:"space-y-2",children:Object.entries(m).map(([y,w])=>i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 capitalize",children:y}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:w})]}),i.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-2 bg-indigo-600 dark:bg-indigo-500 rounded-full",style:{width:`${w/d*100}%`}})})]})},y))})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(qw,{className:"w-5 h-5 text-purple-600"}),"Análisis Inteligente"]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Seleccionar Ciclo OPR para Análisis"}),i.jsxs("select",{className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",value:(s==null?void 0:s.id)||"",onChange:y=>{const w=f.find(_=>_.id===y.target.value);o(w||null)},children:[i.jsx("option",{value:"",children:"Seleccione un ciclo..."}),f.map(y=>i.jsxs("option",{value:y.id,children:[y.docenteInfo," - ",new Date(y.fecha).toLocaleDateString()]},y.id))]})]}),s&&!n&&i.jsx("button",{onClick:async()=>{c(!0);try{const y=f.filter(_=>_.docenteInfo===s.docenteInfo&&_.id!==s.id),w=await XJe(s,y);a(w)}catch(y){console.error("Error al analizar ciclo:",y)}finally{c(!1)}},className:"w-full py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",disabled:l,children:l?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Analizando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(qw,{className:"w-4 h-4"}),"Analizar Ciclo"]})}),n&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[i.jsx("h4",{className:"text-sm font-medium text-purple-700 dark:text-purple-300 mb-2",children:"Participación"}),i.jsxs("div",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:[n.stats.participacion_promedio.toFixed(1),"%"]})]}),i.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[i.jsx("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2",children:"Interacción vs Explicación"}),i.jsxs("div",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:[n.stats.min_interaccion,"min / ",n.stats.min_explicacion,"min"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-medium text-green-700 dark:text-green-300 mb-2 flex items-center gap-1",children:[i.jsx(es,{className:"w-4 h-4"})," Fortalezas"]}),i.jsx("ul",{className:"space-y-2",children:n.summary.fortalezas.map((y,w)=>i.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),y]},w))})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-medium text-amber-700 dark:text-amber-300 mb-2 flex items-center gap-1",children:[i.jsx(lb,{className:"w-4 h-4"})," Áreas de Mejora"]}),i.jsx("ul",{className:"space-y-2",children:n.summary.mejoras.map((y,w)=>i.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"}),y]},w))})]})]}),n.alerts.length>0&&i.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[i.jsxs("h4",{className:"text-sm font-medium text-red-700 dark:text-red-300 mb-2 flex items-center gap-1",children:[i.jsx(Gu,{className:"w-4 h-4"})," Alertas"]}),i.jsx("ul",{className:"space-y-2",children:n.alerts.map((y,w)=>i.jsxs("li",{className:"text-sm text-red-600 dark:text-red-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"}),y]},w))})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2 flex items-center gap-1",children:[i.jsx(B_,{className:"w-4 h-4"})," Recomendaciones"]}),i.jsx("ul",{className:"space-y-2",children:n.summary.recomendaciones.map((y,w)=>i.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),y]},w))})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(ol,{className:"w-5 h-5 text-amber-600"}),"Asignaturas Más Observadas"]}),i.jsx("div",{className:"space-y-2",children:x.map(([y,w])=>i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:y}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:w})]}),i.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-2 bg-amber-600 dark:bg-amber-500 rounded-full",style:{width:`${w/Math.max(...Object.values(g))*100}%`}})})]})},y))})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(B_,{className:"w-5 h-5 text-blue-600"}),"Últimos Ciclos OPR"]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docente"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Fecha"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Asignatura"}),i.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estado"})]})}),i.jsx("tbody",{children:f.sort((y,w)=>new Date(w.fecha).getTime()-new Date(y.fecha).getTime()).slice(0,5).map(y=>{var w;return i.jsxs("tr",{className:"border-t dark:border-slate-700",children:[i.jsx("td",{className:"py-2 px-3 text-sm text-slate-900 dark:text-slate-300",children:y.docenteInfo}),i.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:new Date(y.fecha).toLocaleDateString()}),i.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:y.asignaturaInfo}),i.jsx("td",{className:"py-2 px-3",children:(w=y.retroalimentacion)!=null&&w.exito?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded",children:[i.jsx(es,{className:"w-3 h-3"})," Completado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded",children:[i.jsx(lb,{className:"w-3 h-3"})," En proceso"]})})]},y.id)})})]})})]})]})},Nce=JP(),SE="acompanamientos",Pm="ciclos_opr",Rm=e=>{if(!e)return new Date().toISOString().split("T")[0];if(typeof e=="string")return e.includes("T")?e.split("T")[0]:e;if(typeof(e==null?void 0:e.toDate)=="function")return e.toDate().toISOString().split("T")[0];try{return new Date(e).toISOString().split("T")[0]}catch{return new Date().toISOString().split("T")[0]}},Cce=e=>{const t=e.lastIndexOf("."),r=t>0?e.substring(0,t):e,n=t>0?e.substring(t):"";return r.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").substring(0,50)+n.toLowerCase()},JJe=(e,t,r)=>{const n=(e||"general").replace(/[^a-zA-Z0-9-]/g,"_"),a=(t||"temp").replace(/[^a-zA-Z0-9-]/g,"_"),s=Cce(r);return`videos_opr/${n}/${a}/${s}`},ZJe=async(e,t,r)=>{try{if(!T_.currentUser)throw new Error("Usuario no autenticado. Por favor, inicia sesión nuevamente.");if(!e)throw new Error("No se proporcionó un archivo válido.");const n=["video/mp4","video/quicktime","video/x-msvideo","video/x-m4v"],a=500*1024*1024;if(e.size>a)throw new Error(`El archivo es demasiado grande. Máximo permitido: ${(a/1024/1024).toFixed(0)}MB`);if(!n.includes(e.type))throw new Error("Tipo de archivo no permitido. Solo se aceptan MP4, MOV, AVI o M4V.");let s="";const o=(t||"").split("/");if(o.length>=4&&o[0]==="videos_opr"){const d=o[1],f=o[2],h=o.slice(3).join("/");s=JJe(d,f,h)}else{const d=Date.now(),f=Cce(e.name);s=`videos_opr/general/${d}_${f}`}const l=J2(Nce,s),c={contentType:e.type,cacheControl:"public, max-age=31536000",customMetadata:{originalName:e.name,uploadedBy:T_.currentUser.uid,uploadDate:new Date().toISOString(),fileSize:String(e.size)}},u=Z1e(l,e,c);return new Promise((d,f)=>{let h=-1;u.on("state_changed",m=>{const g=m.bytesTransferred/m.totalBytes*100,x=Math.floor(g);r&&x!==h&&(h=x,r(x))},m=>{let g="Error desconocido durante la subida.";switch(m==null?void 0:m.code){case"storage/unauthorized":g="No tienes permisos para subir archivos. Verifica las reglas de Firebase Storage.";break;case"storage/canceled":g="La subida fue cancelada por el usuario.";break;case"storage/quota-exceeded":g="Se agotó el espacio de almacenamiento disponible.";break;case"storage/retry-limit-exceeded":g="Se agotaron los reintentos. Verifica tu conexión a internet.";break;default:m!=null&&m.message&&(g=m.message);break}f(new Error(g))},async()=>{try{const m=await $k(u.snapshot.ref);d(m)}catch{f(new Error("El archivo se subió, pero no se pudo obtener la URL de descarga."))}})})}catch(n){const a=(n==null?void 0:n.message)||"Error inesperado al procesar el archivo.";throw new Error(a)}},yM=async e=>{try{const t=J2(Nce,e),{items:r,prefixes:n}=await eye(t);await Promise.all(r.map(a=>tye(a))),await Promise.all(n.map(a=>yM(a.fullPath)))}catch{}},eZe=async()=>{try{const e=Vt(pt(lt,SE),cr("fecha","desc"));return(await mn(e)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:Rm(a==null?void 0:a.fecha)}}).sort((n,a)=>n.fecha<a.fecha?1:n.fecha>a.fecha?-1:0)}catch{throw new Error("No se pudieron cargar los acompañamientos")}},tZe=async e=>{try{const t={...e,fecha:ir.fromDate(new Date(e.fecha)),fechaCreacion:ir.now()},r=await an(pt(lt,SE),t);return{...e,id:r.id,fecha:Rm(e.fecha)}}catch{throw new Error("No se pudo crear el acompañamiento")}},rZe=async(e,t)=>{try{const r={...t,...t.fecha?{fecha:ir.fromDate(new Date(t.fecha))}:{},fechaModificacion:ir.now()};await Bl(rr(lt,SE,e),r)}catch{throw new Error("No se pudo actualizar el acompañamiento")}},nZe=async e=>{try{const t=Vt(pt(lt,Pm),wr("acompanamientoId","==",e)),r=await mn(t),n=Ug(lt);r.forEach(a=>n.delete(rr(lt,Pm,a.id))),await n.commit(),await yM(`videos_opr/${e}`),await ka(rr(lt,SE,e))}catch{throw new Error("No se pudo eliminar el acompañamiento y sus datos asociados")}},nW=async e=>{var t;try{if(!(e!=null&&e.fecha))throw new Error("Falta fecha al crear ciclo OPR.");const r={...e,acompanamientoId:String(e.acompanamientoId||""),fecha:ir.fromDate(new Date(e.fecha)),fechaCreacion:ir.now()};(t=e==null?void 0:e.seguimiento)!=null&&t.fecha&&(r.seguimiento={...e.seguimiento,fecha:ir.fromDate(new Date(e.seguimiento.fecha))});const n=await an(pt(lt,Pm),r);return{...e,id:n.id,acompanamientoId:String(e.acompanamientoId||""),fecha:Rm(e.fecha)}}catch{throw new Error("No se pudo crear el ciclo OPR")}},aZe=async(e,t)=>{var r;try{const n={...t};t.fecha&&(n.fecha=ir.fromDate(new Date(t.fecha))),(r=t.seguimiento)!=null&&r.fecha&&(n.seguimiento={...t.seguimiento,fecha:ir.fromDate(new Date(t.seguimiento.fecha))}),n.fechaModificacion=ir.now(),await Bl(rr(lt,Pm,e),n)}catch{throw new Error("No se pudo actualizar el ciclo OPR")}},sZe=async e=>{try{const t=Vt(pt(lt,Pm),wr("acompanamientoId","==",e),cr("fecha","desc"));return(await mn(t)).docs.map(a=>{var l;const s=a.data(),o={id:a.id,...s,fecha:Rm(s==null?void 0:s.fecha)};return(l=s==null?void 0:s.seguimiento)!=null&&l.fecha&&(o.seguimiento={...s.seguimiento,fecha:Rm(s.seguimiento.fecha)}),o})}catch{throw new Error("No se pudieron cargar los ciclos OPR. Revisa el índice compuesto (acompanamientoId + fecha).")}},iZe=async()=>{try{const e=Vt(pt(lt,Pm),wr("acompanamientoId","==",""),cr("fecha","desc"));return(await mn(e)).docs.map(n=>{var o;const a=n.data(),s={id:n.id,...a,fecha:Rm(a==null?void 0:a.fecha)};return(o=a==null?void 0:a.seguimiento)!=null&&o.fecha&&(s.seguimiento={...a.seguimiento,fecha:Rm(a.seguimiento.fecha)}),s})}catch(e){throw console.error("Error fetching standalone OPR cycles:",e),new Error("No se pudieron cargar los ciclos OPR independientes.")}},aW=async e=>{try{const t=await Hm(rr(lt,Pm,e));if(!t.exists())return;const r=t.data(),n=(r==null?void 0:r.acompanamientoId)||"general";await yM(`videos_opr/${n}/${e}`),await ka(rr(lt,Pm,e))}catch{throw new Error("No se pudo eliminar el ciclo OPR")}},oZe=async e=>{try{const t=Vt(pt(lt,SE),wr("docente","==",e),cr("fecha","desc"));return(await mn(t)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:Rm(a==null?void 0:a.fecha)}})}catch{throw new Error("No se pudieron cargar los acompañamientos del docente")}},lZe=async e=>{try{const t=Vt(pt(lt,"rubricas_personalizadas"),wr("docente","==",e)),r=await mn(t);if(r.empty)return null;const n=r.docs[0].data();return(n==null?void 0:n.rubrica)??null}catch{return null}},cZe=async()=>await mM(),uZe=({label:e,onFileChange:t,onLinkChange:r,uploadedUrl:n,onRemove:a,isUploading:s,accept:o="video/mp4,video/quicktime,video/avi,video/mov",error:l,progress:c=0,allowLink:u=!1})=>{const[d,f]=C.useState(!1),[h,m]=C.useState(!1),[g,x]=C.useState(""),v=`file-upload-${e.replace(/\s+/g,"-")}`,y=E=>{E.preventDefault(),E.stopPropagation(),E.type==="dragenter"||E.type==="dragover"?f(!0):E.type==="dragleave"&&f(!1)},w=E=>{if(E.preventDefault(),E.stopPropagation(),f(!1),E.dataTransfer.files&&E.dataTransfer.files[0]&&!s){const S=E.dataTransfer.files[0];T(S)}},_=E=>{if(E.target.files&&E.target.files[0]&&!s){const S=E.target.files[0];T(S)}},T=E=>{if(E.size>524288e3){alert(`El archivo es demasiado grande. Tamaño máximo: ${524288e3/1024/1024}MB`);return}if(!["video/mp4","video/quicktime","video/avi","video/mov"].includes(E.type)){alert("Solo se aceptan archivos de video (MP4, MOV, AVI, QuickTime)");return}t(E)},j=()=>l?"bg-red-500":c===100?"bg-green-500":"bg-blue-500",I=()=>{if(!(!g||!r)){if(!g.startsWith("http://")&&!g.startsWith("https://")){alert("Por favor ingresa una URL válida que comience con http:// o https://");return}r(g),m(!1),x("")}};return i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300",children:e}),u&&!n&&!s&&i.jsx("button",{type:"button",onClick:()=>m(!h),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400",children:h?"Cancelar":"Insertar enlace"})]}),h&&i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx("input",{type:"url",value:g,onChange:E=>x(E.target.value),placeholder:"https://...",className:"flex-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{type:"button",onClick:I,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Guardar"})]}),n?i.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700",children:[i.jsx(es,{className:"w-5 h-5 text-green-600"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-700 dark:text-green-300 hover:underline font-medium",children:n.startsWith("http")?"Ver video enlazado":"Ver video cargado"}),i.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:n.startsWith("http")?"Enlace guardado exitosamente":"Video subido exitosamente"})]}),i.jsx("button",{type:"button",onClick:a,className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar video",children:i.jsx(Is,{className:"w-4 h-4"})})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:`relative border-2 border-dashed rounded-lg transition-colors ${d?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":s?"border-amber-400 bg-amber-50 dark:bg-amber-900/20":l?"border-red-400 bg-red-50 dark:bg-red-900/20":"border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"} ${s?"cursor-not-allowed":"cursor-pointer"}`,onDragEnter:y,onDragLeave:y,onDragOver:y,onDrop:w,onClick:()=>{var E;return!s&&((E=document.getElementById(v))==null?void 0:E.click())},children:[i.jsx("div",{className:"flex flex-col items-center justify-center p-6",children:s?i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:"Subiendo video..."}),i.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:[c.toFixed(1),"% completado"]})]}):l?i.jsxs("div",{className:"text-center",children:[i.jsx(Gu,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"Error al subir"}),i.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Haz clic para intentar nuevamente"})]}):i.jsxs("div",{className:"text-center",children:[i.jsx(Yb,{className:"h-8 w-8 text-slate-400 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:"Arrastra un video aquí"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"o haz clic para seleccionar"}),i.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-2",children:"MP4, MOV, AVI (máx. 500MB)"})]})}),i.jsx("input",{id:v,type:"file",onChange:_,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:s,accept:o,style:{display:"none"}})]}),s&&i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:i.jsx("div",{className:`${j()} h-2 rounded-full transition-all duration-300`,style:{width:`${c}%`}})}),l&&i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[i.jsx(Gu,{className:"w-4 h-4 text-red-500"}),i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:l})]})]})]})},dZe=({acompanamiento:e,cicloToEdit:t,onSave:r,onCancel:n,profesores:a})=>{const[s,o]=C.useState(!1),[l,c]=C.useState({}),[u,d]=C.useState({}),[f,h]=C.useState({}),[m,g]=C.useState({docente:e.docente||"",curso:e.curso||"",asignatura:e.asignatura||""}),x=C.useMemo(()=>({registroN:1,nombreCiclo:"",fecha:new Date().toISOString().split("T")[0],horaInicio:"",horaTermino:"",videoObservacionUrl:"",detallesObservacion:[{id:`row_${Date.now()}`,minuto:"0-5",accionesDocente:"",accionesEstudiantes:"",actividades:""}],retroalimentacion:{exito:"",foco:"",elementosIdentificar:""},planificacion:{preparacion:"",objetivo:"",actividad:"",tiempo:""},seguimiento:{fecha:"",curso:m.curso||"",profesor:m.docente||"",firma:""},acompanamientoId:e.id&&!e.id.startsWith("temp-")?e.id:""}),[e,m]),[v,y]=C.useState(t||x);C.useEffect(()=>{t?(y(t),(t.acompanamientoId===""||!t.acompanamientoId)&&g({docente:t.docenteInfo||"",curso:t.cursoInfo||"",asignatura:t.asignaturaInfo||""})):y(x)},[t,x]);const w=D=>{const{name:L,value:Z}=D.target,V=L.split(".");V.length>1?y(q=>{const G=JSON.parse(JSON.stringify(q));let K=G;for(let ee=0;ee<V.length-1;ee++)K=K[V[ee]];return K[V[V.length-1]]=Z,G}):y(q=>({...q,[L]:Z}))},_=(D,L,Z)=>{y(V=>({...V,detallesObservacion:V.detallesObservacion.map(q=>q.id===D?{...q,[L]:Z}:q)}))},T=()=>{const D=v.detallesObservacion[v.detallesObservacion.length-1],L=D&&parseInt(D.minuto.split("-")[1],10)||0,Z=`${L+1}-${L+5}`;y(V=>({...V,detallesObservacion:[...V.detallesObservacion,{id:`row_${Date.now()}`,minuto:Z,accionesDocente:"",accionesEstudiantes:"",actividades:""}]}))},j=D=>{y(L=>({...L,detallesObservacion:L.detallesObservacion.filter(Z=>Z.id!==D)}))},I=async(D,L)=>{h(Z=>({...Z,[D]:null})),c(Z=>({...Z,[D]:!0})),d(Z=>({...Z,[D]:0}));try{const Z=Date.now(),V=L.name.toLowerCase().replace(/[^a-z0-9.]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),q=e.id&&!e.id.startsWith("temp-")?e.id.replace(/[^a-zA-Z0-9-]/g,"_"):"general",G=v.id?v.id.replace(/[^a-zA-Z0-9-]/g,"_"):"temp",K=`videos_opr/${q}/${G}/${Z}_${V}`,ee=await ZJe(L,K,W=>{d(P=>({...P,[D]:W}))});E(D,ee),d(W=>({...W,[D]:100}))}catch(Z){const V=(Z==null?void 0:Z.message)||"Error desconocido al subir el archivo";h(q=>({...q,[D]:V})),alert(`Error al subir el video: ${V}`)}finally{c(Z=>({...Z,[D]:!1})),setTimeout(()=>{d(Z=>({...Z,[D]:0}))},2e3)}},E=(D,L)=>{const Z=D.split(".");Z.length>1?y(V=>{const q=JSON.parse(JSON.stringify(V));let G=q;for(let K=0;K<Z.length-1;K++)G=G[Z[K]];return G[Z[Z.length-1]]=L,q}):y(V=>({...V,[D]:L}))},S=D=>{const L=D.split(".");L.length>1?y(Z=>{const V=JSON.parse(JSON.stringify(Z));let q=V;for(let G=0;G<L.length-1;G++)q=q[L[G]];return q[L[L.length-1]]="",V}):y(Z=>({...Z,[D]:""})),h(Z=>({...Z,[D]:null})),d(Z=>({...Z,[D]:0}))},B=async(D,L,Z)=>{if(!Z||!Z.trim())return Z;const V=`Mejora la redacción del siguiente texto con un tono técnico-pedagógico propio de informes educativos. Mantén el sentido original y NO agregues información nueva ni ejemplos inventados. Devuélvelo como un texto breve, claro y directo. Texto (${L}):

"""${Z}"""`;try{return(await D.generateContent(V)).response.text()}catch(q){return console.error(`Error improving text for ${L}:`,q),Z}},M=async()=>{var D,L;o(!0);try{const Z="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",q=new Ps(Z).getGenerativeModel({model:"gemini-1.5-flash-latest"}),G=v.retroalimentacion,K=v.planificacion,ee=await Promise.all([B(q,"Éxito",G.exito),B(q,"Modelo",G.modelo),B(q,"Foco",G.foco),B(q,"Elementos a identificar",G.elementosIdentificar),B(q,"Brecha - Preguntas",((D=G.brecha)==null?void 0:D.preguntas)||""),B(q,"Brecha - Indicadores",((L=G.brecha)==null?void 0:L.indicadores)||""),B(q,"Planificación - Preparación",K.preparacion),B(q,"Planificación - Objetivo",K.objetivo),B(q,"Planificación - Actividad",K.actividad),B(q,"Planificación - Tiempo",K.tiempo)]);y(W=>({...W,retroalimentacion:{...W.retroalimentacion,exito:ee[0],modelo:ee[1],foco:ee[2],elementosIdentificar:ee[3],brecha:{...W.retroalimentacion.brecha,preguntas:ee[4],indicadores:ee[5]}},planificacion:{...W.planificacion,preparacion:ee[6],objetivo:ee[7],actividad:ee[8],tiempo:ee[9]}})),alert("Textos mejorados exitosamente con IA")}catch(Z){console.error(Z),alert("No se pudo mejorar la redacción. Intenta nuevamente.")}finally{o(!1)}},R=()=>{const D=new vr,L=D.internal.pageSize.getWidth(),Z=D.internal.pageSize.getHeight(),V=15,q="https://res.cloudinary.com/dwncmu1wu/image/upload/v1753209432/LIR_fpq2lc.png",G=15,K=15;let ee=25;const W=()=>{const ce="Liceo Industrial de Recoleta";D.setFontSize(8),D.setFont("helvetica","normal"),D.text(ce,L/2,Z-10,{align:"center"}),D.setFontSize(10),D.setFont("helvetica","normal");const de=Z-25;D.line(V,de,V+70,de),D.text("Firma Docente",V+15,de+5),D.line(L-V-70,de,L-V,de),D.text("Firma Observador",L-V-55,de+5)},P=()=>{try{D.addImage(q,"PNG",L-K-10,10,K,G)}catch(ce){console.error("Error al cargar el logo:",ce)}};P();const U=D.addPage;D.addPage=function(){return U.apply(this,arguments),P(),W(),this};const z=ce=>{ee>240&&(D.addPage(),ee=25),D.setFontSize(14),D.setFont("helvetica","bold"),D.text(ce,V,ee),ee+=12};D.setFontSize(18),D.setFont("helvetica","bold"),D.text("Informe de Ciclo OPR",L/2,ee,{align:"center"}),ee+=18,z("1. Datos Generales");const J=[["Docente:",m.docente],["Curso:",m.curso],["Asignatura:",m.asignatura],["Fecha:",new Date(v.fecha).toLocaleDateString("es-CL")],["Hora:",`${v.horaInicio} - ${v.horaTermino}`],["Ciclo:",v.nombreCiclo]];xi(D,{body:J,startY:ee,theme:"plain",styles:{fontSize:10,cellPadding:3,lineWidth:.1,lineColor:[220,220,220]},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:V,right:V}}),ee=D.lastAutoTable.finalY+15,z("2. Registro Detallado de Observación");const te=v.detallesObservacion.map(ce=>[ce.minuto,ce.accionesDocente,ce.accionesEstudiantes,ce.actividades]);xi(D,{head:[["Minuto","Acciones del Docente","Acciones de Estudiantes","Actividades"]],body:te,startY:ee,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255,fontSize:10,cellPadding:4,halign:"center"},styles:{fontSize:9,cellPadding:4,overflow:"linebreak",lineWidth:.1},columnStyles:{0:{cellWidth:15,halign:"center"},1:{cellWidth:"auto"},2:{cellWidth:"auto"},3:{cellWidth:"auto"}},margin:{left:V,right:V},didDrawPage:ce=>{var de;ee=((de=ce.cursor)==null?void 0:de.y)||25}}),ee=D.lastAutoTable.finalY+15,z("3. Retroalimentación Docente");const se=[];if(v.retroalimentacion.exito&&se.push(["Éxito:",v.retroalimentacion.exito]),v.retroalimentacion.modelo&&se.push(["Modelo:",v.retroalimentacion.modelo]),v.retroalimentacion.foco&&se.push(["Foco:",v.retroalimentacion.foco]),v.retroalimentacion.elementosIdentificar&&se.push(["Elementos a Identificar:",v.retroalimentacion.elementosIdentificar]),se.length>0&&(xi(D,{body:se,startY:ee,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:40},1:{cellWidth:"auto"}},margin:{left:V,right:V}}),ee=D.lastAutoTable.finalY+10),v.retroalimentacion.brecha){ee>240&&(D.addPage(),ee=40),D.setFontSize(12),D.setFont("helvetica","bold"),D.text("Análisis de Brecha",V,ee),ee+=8;const ce=[],de=v.retroalimentacion.brecha.minutoInicial,Be=v.retroalimentacion.brecha.minutoFinal;de&&Be&&ce.push(["Minutos:",`${de} a ${Be}`]),v.retroalimentacion.brecha.preguntas&&ce.push(["Preguntas:",v.retroalimentacion.brecha.preguntas]),v.retroalimentacion.brecha.indicadores&&ce.push(["Indicadores:",v.retroalimentacion.brecha.indicadores]),ce.length>0&&(xi(D,{body:ce,startY:ee,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:V+5,right:V}}),ee=D.lastAutoTable.finalY+10)}z("4. Planificación de Práctica");const ie=[];v.planificacion.preparacion&&ie.push(["Preparación:",v.planificacion.preparacion]),v.planificacion.objetivo&&ie.push(["Objetivo:",v.planificacion.objetivo]),v.planificacion.actividad&&ie.push(["Actividad:",v.planificacion.actividad]),v.planificacion.tiempo&&ie.push(["Tiempo:",v.planificacion.tiempo]),ie.length>0&&(xi(D,{body:ie,startY:ee,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:V,right:V}}),ee=D.lastAutoTable.finalY+10),W(),D.save(`Informe_OPR_${m.docente}_${v.fecha}.pdf`)},k=async D=>{if(D.preventDefault(),!m.docente||!m.curso||!m.asignatura){alert("Por favor, complete Docente, Curso y Asignatura");return}if(!v.nombreCiclo||!v.fecha){alert("Por favor, complete el nombre del ciclo y la fecha");return}const L={...v,docenteInfo:m.docente,cursoInfo:m.curso,asignaturaInfo:m.asignatura,seguimiento:{...v.seguimiento,profesor:m.docente,curso:m.curso}};try{await r(L)}catch(Z){console.error("Error al guardar ciclo OPR:",Z),alert("Error al guardar el ciclo OPR. Intenta nuevamente.")}};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg animate-fade-in",children:[(!e.id||e.id.startsWith("temp-"))&&i.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900/30",children:[i.jsx("h4",{className:"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-300",children:"Datos Básicos del Ciclo OPR"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),i.jsxs("select",{value:m.docente,onChange:D=>g(L=>({...L,docente:D.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[i.jsx("option",{value:"",children:"Seleccione un docente"}),a.map(D=>i.jsx("option",{value:D,children:D},D))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),i.jsxs("select",{value:m.curso,onChange:D=>g(L=>({...L,curso:D.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),os.map(D=>i.jsx("option",{value:D,children:D},D))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsxs("select",{value:m.asignatura,onChange:D=>g(L=>({...L,asignatura:D.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),Bs.map(D=>i.jsx("option",{value:D,children:D},D))]})]})]})]}),i.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-blue-50 dark:bg-blue-900/30",children:[i.jsx("h4",{className:"text-lg font-semibold mb-2 text-blue-700 dark:text-blue-300",children:"Asistente IA del Ciclo OPR"}),i.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[i.jsxs("button",{type:"button",onClick:M,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:s,children:[i.jsx(lR,{className:"w-4 h-4"}),s?"Mejorando redacción...":"Mejorar Redacción del Ciclo"]}),i.jsxs("button",{type:"button",onClick:R,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[i.jsx(Eh,{className:"w-4 h-4"}),"Descargar Informe PDF"]})]}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Usa la IA para mejorar la redacción de los textos ya escritos. Luego, descarga el informe completo en PDF."})]}),i.jsxs("form",{onSubmit:k,className:"space-y-8",children:[i.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:[t?"Editando":"Nuevo"," Ciclo OPR"]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(Op,{className:"w-5 h-5 text-amber-500"})," Datos Generales"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx("input",{type:"text",name:"nombreCiclo",value:v.nombreCiclo,onChange:w,placeholder:"Nombre o N° del Ciclo",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),i.jsx("input",{type:"date",name:"fecha",value:v.fecha,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),i.jsx("input",{type:"number",name:"registroN",value:v.registroN,onChange:w,placeholder:"Registro de Observación N°",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",min:1}),i.jsx("input",{type:"time",name:"horaInicio",value:v.horaInicio,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("input",{type:"time",name:"horaTermino",value:v.horaTermino,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsx(uZe,{label:"Video de observación de clase",onFileChange:D=>I("videoObservacionUrl",D),onLinkChange:D=>E("videoObservacionUrl",D),uploadedUrl:v.videoObservacionUrl,onRemove:()=>S("videoObservacionUrl"),isUploading:!!l.videoObservacionUrl,error:f.videoObservacionUrl,progress:u.videoObservacionUrl||0,allowLink:!0})]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(xg,{className:"w-5 h-5 text-blue-500"})," Registro Detallado de Observación"]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b dark:border-slate-600",children:[i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Minuto"}),i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones del Docente"}),i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones de Estudiantes"}),i.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Actividades"}),i.jsx("th",{className:"p-2"})]})}),i.jsx("tbody",{children:v.detallesObservacion.map(D=>i.jsxs("tr",{className:"border-b dark:border-slate-700",children:[i.jsx("td",{className:"p-2",children:i.jsx("input",{type:"text",value:D.minuto,onChange:L=>_(D.id,"minuto",L.target.value),className:"w-24 border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"0-5"})}),i.jsx("td",{className:"p-2",children:i.jsx("textarea",{value:D.accionesDocente,onChange:L=>_(D.id,"accionesDocente",L.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones del docente..."})}),i.jsx("td",{className:"p-2",children:i.jsx("textarea",{value:D.accionesEstudiantes,onChange:L=>_(D.id,"accionesEstudiantes",L.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones de estudiantes..."})}),i.jsx("td",{className:"p-2",children:i.jsx("textarea",{value:D.actividades,onChange:L=>_(D.id,"actividades",L.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir actividades realizadas..."})}),i.jsx("td",{className:"p-2",children:v.detallesObservacion.length>1&&i.jsx("button",{type:"button",onClick:()=>j(D.id),className:"text-red-500 hover:text-red-700 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar fila",children:i.jsx(Is,{className:"w-4 h-4"})})})]},D.id))})]})}),i.jsxs("button",{type:"button",onClick:T,className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 flex items-center gap-1 transition-colors",children:[i.jsx(pF,{className:"w-4 h-4"})," Agregar Fila"]})]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(Ate,{className:"w-5 h-5 text-green-600"})," Retroalimentación Docente"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Éxito"}),i.jsx("textarea",{name:"retroalimentacion.exito",value:v.retroalimentacion.exito,onChange:w,placeholder:"Describir los aspectos exitosos observados en la clase...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Modelo"}),i.jsx("textarea",{name:"retroalimentacion.modelo",value:v.retroalimentacion.modelo,onChange:w,placeholder:"Modelo pedagógico o metodología observada...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Foco"}),i.jsx("textarea",{name:"retroalimentacion.foco",value:v.retroalimentacion.foco,onChange:w,placeholder:"Foco principal de la observación y retroalimentación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Elementos a Identificar"}),i.jsx("textarea",{name:"retroalimentacion.elementosIdentificar",value:v.retroalimentacion.elementosIdentificar,onChange:w,placeholder:"Elementos específicos que el docente debe identificar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),i.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[i.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[i.jsx(Twe,{className:"w-5 h-5 text-purple-600"})," Planificación de Práctica y Seguimiento"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Preparación"}),i.jsx("textarea",{name:"planificacion.preparacion",value:v.planificacion.preparacion,onChange:w,placeholder:"Aspectos de preparación para la próxima práctica...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Objetivo"}),i.jsx("textarea",{name:"planificacion.objetivo",value:v.planificacion.objetivo,onChange:w,placeholder:"Objetivo específico para la siguiente observación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Actividad"}),i.jsx("textarea",{name:"planificacion.actividad",value:v.planificacion.actividad,onChange:w,placeholder:"Actividades específicas a implementar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tiempo"}),i.jsx("input",{type:"text",name:"planificacion.tiempo",value:v.planificacion.tiempo,onChange:w,placeholder:"Tiempo estimado o cronograma...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{className:"p-4 border rounded-md dark:border-slate-600 bg-slate-50 dark:bg-slate-800/50 space-y-3",children:[i.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(_o,{className:"w-4 h-4 text-purple-500"}),"Seguimiento"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de seguimiento"}),i.jsx("input",{type:"date",name:"seguimiento.fecha",value:v.seguimiento.fecha,onChange:w,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Registrado por"}),i.jsx("input",{type:"text",name:"seguimiento.firma",value:v.seguimiento.firma,onChange:w,placeholder:"Nombre de quien registra el seguimiento...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-4 mt-8 pt-6 border-t dark:border-slate-700",children:[i.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),i.jsxs("button",{type:"submit",className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-amber-400 transition-colors flex items-center gap-2",disabled:Object.values(l).some(Boolean),children:[Object.values(l).some(Boolean)&&i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Guardar Ciclo OPR"]})]})]})]})},fZe=()=>{const[e,t]=C.useState([]),[r,n]=C.useState([]),[a,s]=C.useState(!0),[o,l]=C.useState(!0),[c,u]=C.useState(null),[d,f]=C.useState("list"),[h,m]=C.useState(null),[g,x]=C.useState(null),[v,y]=C.useState("general"),[w,_]=C.useState(!1),[T,j]=C.useState({}),[I,E]=C.useState([]),S=hw,B=C.useMemo(()=>({fecha:new Date().toISOString().split("T")[0],docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[M,R]=C.useState(B),k=C.useCallback(async()=>{s(!0),u(null);try{const te=await eZe();t(te)}catch(te){u("No se pudieron cargar los registros de acompañamiento."),console.error("❌ Error al cargar acompañamientos:",te)}finally{s(!1)}},[]),D=C.useCallback(async()=>{l(!0);try{const se=(await cZe()).filter(ie=>ie.profile==="PROFESORADO").map(ie=>ie.nombreCompleto).sort();n(se)}catch(te){u("No se pudo cargar la lista de profesores."),console.error("❌ Error al cargar profesores:",te)}finally{l(!1)}},[]),L=C.useCallback(async()=>{try{const te={};for(const se of e)if(se.id)try{const ie=await sZe(se.id);ie.length>0&&(te[se.id]=ie)}catch(ie){console.error(`Error loading OPR cycles for ${se.id}:`,ie)}try{const se=await iZe();E(se)}catch(se){console.error("Error loading standalone OPR cycles:",se),E([])}j(te)}catch(te){console.error("Error fetching OPR cycles:",te)}},[e]);C.useEffect(()=>{k(),D()},[k,D]),C.useEffect(()=>{e.length>0&&L()},[e,L]);const Z=(te,se)=>{if(x(te),se)R(se),m(se.id);else{const ie={id:"temp-"+Date.now(),fecha:te.fecha,docente:te.docenteInfo||"",curso:te.cursoInfo||"",asignatura:te.asignaturaInfo||"",rubricaResultados:{},planificacionFutura:"",createdAt:new Date().toISOString(),observacionesGenerales:"",retroalimentacionConsolidada:""};R(ie),m(null)}f("form"),y("opr"),u(null)},V=async()=>{if(!("docente"in M)||!M.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar la retroalimentación.');return}_(!0),u(null);try{const te="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",ie=new Ps(te).getGenerativeModel({model:"gemini-2.5-flash"}),ce=Object.entries(M.rubricaResultados||{}).map(([Se,ke])=>`- ${Se}: Nivel ${ke}`).join(`
`),de=`
Eres un asesor pedagógico experto. Redacta una retroalimentación consolidada y constructiva para un docente.
Contexto de la observación:
- Docente: ${M.docente}
- Asignatura: ${M.asignatura}
- Curso: ${M.curso}
- Resultados de la pauta de observación (rúbrica):
${ce||"No se completó la pauta."}
- Observaciones adicionales del evaluador:
${M.observacionesGenerales||"Sin observaciones adicionales."}

Basado en esta información, tu texto debe:
1. Iniciar con un reconocimiento positivo.
2. Mencionar 1 o 2 fortalezas clave observadas.
3. Identificar 1 o 2 áreas de mejora concretas, con un tono de sugerencia.
4. Concluir con una frase motivadora.
La respuesta debe ser solo el texto de la retroalimentación.
      `,ae=(await ie.generateContent(de)).response.text();R(Se=>({...Se,retroalimentacionConsolidada:ae})),alert("Retroalimentación generada exitosamente con IA.")}catch(te){console.error("❌ Error al generar retroalimentación:",te);const se=te.message||"No se pudo generar la retroalimentación automática.";u(se),alert(`Error: ${se}`)}finally{_(!1)}},q=async te=>{if(te.preventDefault(),!("docente"in M)||!M.docente||!M.curso||!M.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}u(null);try{if(h)await rZe(h,M),alert("¡Acompañamiento actualizado correctamente!");else{const se=await tZe(M);m(se.id),R(se),alert("¡Acompañamiento guardado correctamente! Ahora puedes agregar Ciclos OPR.")}await k()}catch(se){const ie=(se==null?void 0:se.message)??"Error al guardar el registro de acompañamiento.";u(ie),console.error("❌ Error al guardar:",se),alert(`Error: ${ie}`)}},G=()=>{R(B),m(null),x(null),f("form"),y("general"),u(null)},K=te=>{R(te),m(te.id),x(null),f("form"),y("general"),u(null)},ee=async te=>{if(window.confirm("¿Está seguro de que desea eliminar este registro? Esta acción no se puede deshacer."))try{await nZe(te),await k(),alert("Registro eliminado exitosamente.")}catch(se){const ie="No se pudo eliminar el registro.";u(ie),console.error("❌ Error al eliminar:",se),alert(`Error: ${ie}`)}},W=(te,se)=>{R(ie=>({...ie,rubricaResultados:{...ie.rubricaResultados||{},[te]:se}}))},P=()=>{var te;if(!("docente"in M)||!M.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar el PDF.');return}try{const se=new vr,ie=se.internal.pageSize.getWidth(),ce=se.internal.pageSize.getHeight(),de=20,Be=ie-de*2,ae=(be,Pe)=>Pe+be>ce-de,Se=()=>{const be=se.getNumberOfPages();for(let Pe=1;Pe<=be;Pe++)se.setPage(Pe),se.setFontSize(9),se.setTextColor(128),se.text(`pág. ${Pe} de ${be}`,ie-de,ce-10,{align:"right"})};let ke=de;se.setFontSize(16),se.setFont("helvetica","bold"),se.text("INFORME DE ACOMPAÑAMIENTO DOCENTE",ie/2,ke,{align:"center"}),ke+=15;const ve=40;if(xi(se,{startY:ke,head:[],body:[["Docente:",M.docente],["Curso:",M.curso],["Asignatura:",M.asignatura],["Fecha:",new Date(M.fecha).toLocaleDateString("es-CL")],["Bloques:",M.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:4},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:120}},margin:{left:de,right:de}}),ke=se.lastAutoTable.finalY+10,Object.keys(M.rubricaResultados||{}).length>0){se.setFontSize(14),se.setFont("helvetica","bold"),se.text("Evaluación por Indicadores",de,ke),ke+=10;const be=Object.entries(M.rubricaResultados).map(([Pe,Ue])=>{let pe;switch(Ue){case 1:pe="Débil";break;case 2:pe="Incipiente";break;case 3:pe="Satisfactorio";break;case 4:pe="Avanzado";break;default:pe="No evaluado"}return[Pe,pe,Ue]});xi(se,{startY:ke,head:[["Indicador","Nivel de Logro","Puntuación"]],body:be,theme:"grid",styles:{fontSize:10,cellPadding:6,lineColor:[200,200,200],lineWidth:.1,valign:"middle"},headStyles:{fillColor:[41,128,185],textColor:255,fontSize:11,fontStyle:"bold",halign:"left"},columnStyles:{0:{cellWidth:100},1:{cellWidth:40},2:{cellWidth:30,halign:"center"}},alternateRowStyles:{fillColor:[245,247,250]},margin:{left:de,right:de}})}se.addPage(),ke=de,se.setFontSize(14),se.setFont("helvetica","bold"),se.text("Observaciones Generales y Sugerencias de Mejora",de,ke),ke+=15,M.observacionesGenerales&&(se.setFontSize(12),se.setFont("helvetica","bold"),se.text("Fortalezas:",de,ke),ke+=10,se.setFont("helvetica","normal"),se.setFontSize(11),se.splitTextToSize(M.observacionesGenerales,Be).forEach(Pe=>{ae(7,ke)&&(se.addPage(),ke=de),se.text(Pe,de,ke,{align:"justify"}),ke+=7}),ke+=10),M.retroalimentacionConsolidada&&(ae(50,ke)&&(se.addPage(),ke=de),se.setFontSize(12),se.setFont("helvetica","bold"),se.text("Sugerencias de mejora:",de,ke),ke+=10,se.setFont("helvetica","normal"),se.setFontSize(11),se.splitTextToSize(M.retroalimentacionConsolidada,Be).forEach(Pe=>{ae(7,ke)&&(se.addPage(),ke=de),se.text(Pe,de,ke,{align:"justify"}),ke+=7})),Se();const le=`Informe_Acompanamiento_${(te=M.docente)==null?void 0:te.replace(/\s+/g,"_")}_${M.curso}_${new Date().toISOString().split("T")[0]}.pdf`;se.save(le)}catch(se){console.error("❌ Error al generar PDF:",se),alert("Error al generar el PDF. Intenta nuevamente.")}},U=te=>{R(se=>({...se,[te.target.name]:te.target.value}))},z=()=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Módulo de Acompañamiento Docente"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>{G(),y("general")},className:"bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 flex items-center gap-2 transition-colors",children:[i.jsx(pF,{className:"w-5 h-5"})," Acompañamiento General"]}),i.jsxs("button",{onClick:()=>{R(B),m(null),x(null),f("form"),y("opr"),u(null)},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 flex items-center gap-2 transition-colors",children:[i.jsx(pF,{className:"w-5 h-5"})," Ciclo OPR Independiente"]})]})]}),c&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Gu,{className:"w-5 h-5 text-red-500"}),i.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]})}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[i.jsx(zc,{className:"w-6 h-6 text-amber-500"})," Acompañamientos Generales"]}),i.jsxs("div",{className:"space-y-3",children:[a&&i.jsxs("div",{className:"flex items-center justify-center p-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"}),i.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando registros..."})]}),!a&&e.filter(te=>te.id).length>0?i.jsx("div",{className:"grid gap-3",children:e.filter(te=>te.id).map(te=>i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(_o,{className:"w-4 h-4 text-amber-500"}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:te.docente})]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Curso:"})," ",te.curso," •"," ",i.jsx("span",{className:"font-medium",children:"Asignatura:"})," ",te.asignatura]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(te.fecha).toLocaleDateString("es-CL")]}),te.bloques&&i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Bloques:"})," ",te.bloques]}),te.retroalimentacionConsolidada&&i.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[i.jsx(es,{className:"w-3 h-3"}),"Con retroalimentación IA"]}),T[te.id]&&T[te.id].length>0&&i.jsxs("p",{className:"text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[i.jsx(Op,{className:"w-3 h-3"}),T[te.id].length," Ciclo",T[te.id].length>1?"s":""," OPR"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[i.jsx("button",{onClick:()=>{K(te),y("general")},className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm px-3 py-1 rounded border border-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors",children:"Ver/Editar"}),i.jsx("button",{onClick:()=>{K(te),y("opr")},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"+ Ciclo OPR"}),i.jsx("button",{onClick:()=>ee(te.id),title:"Eliminar registro",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:i.jsx(Is,{className:"w-4 h-4"})})]})]}),T[te.id]&&T[te.id].length>0&&i.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-600",children:[i.jsxs("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2 flex items-center gap-1",children:[i.jsx(Op,{className:"w-4 h-4 text-blue-500"}),"Ciclos OPR Asociados"]}),i.jsx("div",{className:"space-y-2",children:T[te.id].map(se=>i.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:se.nombreCiclo||`Registro N° ${se.registroN}`}),i.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[new Date(se.fecha).toLocaleDateString("es-CL"),se.horaInicio&&se.horaTermino&&i.jsxs("span",{children:[" • ",se.horaInicio," - ",se.horaTermino]})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>{const ie=e.find(ce=>ce.id===te.id);Z(se,ie)},className:"text-blue-600 hover:text-blue-800 text-xs px-2 py-1 rounded border border-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:"Editar"}),i.jsx("button",{onClick:async()=>{if(window.confirm("¿Seguro que desea eliminar este Ciclo OPR?"))try{await aW(se.id),await L(),alert("Ciclo OPR eliminado exitosamente")}catch(ie){console.error("Error deleting OPR cycle:",ie),alert("Error al eliminar el ciclo OPR")}},className:"text-red-600 hover:text-red-800 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",title:"Eliminar ciclo OPR",children:i.jsx(Is,{className:"w-3 h-3"})})]})]},se.id))})]})]},te.id))}):!a&&i.jsxs("div",{className:"text-center p-12 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[i.jsx(Md,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:"No hay acompañamientos generales registrados"}),i.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-sm mt-2",children:"Crea tu primer acompañamiento usando el botón superior"})]})]})]}),I.length>0&&i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[i.jsx(Op,{className:"w-6 h-6 text-blue-500"})," Ciclos OPR Independientes"]}),i.jsx("div",{className:"space-y-3",children:I.map(te=>i.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Op,{className:"w-4 h-4 text-blue-500"}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:te.nombreCiclo||`Registro N° ${te.registroN}`})]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Docente:"})," ",te.docenteInfo||"No especificado"," •"," ",i.jsx("span",{className:"font-medium",children:"Curso:"})," ",te.cursoInfo||"No especificado"]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(te.fecha).toLocaleDateString("es-CL"),te.horaInicio&&te.horaTermino&&i.jsxs("span",{children:[" • ",te.horaInicio," - ",te.horaTermino]})]}),te.videoObservacionUrl&&i.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[i.jsx(es,{className:"w-3 h-3"}),"Con video de observación"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[i.jsx("button",{onClick:()=>{Z(te)},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"Ver/Editar"}),i.jsx("button",{onClick:async()=>{if(window.confirm("¿Seguro que desea eliminar este Ciclo OPR?"))try{await aW(te.id),await L(),alert("Ciclo OPR eliminado exitosamente")}catch(se){console.error("Error deleting standalone OPR cycle:",se),alert("Error al eliminar el ciclo OPR")}},title:"Eliminar ciclo OPR",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:i.jsx(Is,{className:"w-4 h-4"})})]})]})},te.id))})]})]}),J=()=>{const te=h?e.find(ie=>ie.id===h):null,se={id:"temp-"+Date.now(),fecha:new Date().toISOString(),docente:"docente"in M&&M.docente||"",curso:"curso"in M&&M.curso||"",asignatura:"asignatura"in M&&M.asignatura||"",planificacionFutura:"",createdAt:new Date().toISOString(),rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""};return i.jsxs("div",{className:"animate-fade-in",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:v==="general"?h?"Editando Acompañamiento General":"Nuevo Acompañamiento General":g?"Editando Ciclo OPR":"Nuevo Ciclo OPR"}),i.jsx("button",{type:"button",onClick:()=>{f("list"),x(null)},className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex items-center gap-2 px-4 py-2 rounded-lg border hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"← Volver al listado"})]}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:i.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>y("general"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${v==="general"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Md,{className:"w-4 h-4"}),"Acompañamiento General"]})}),i.jsx("button",{onClick:()=>y("opr"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${v==="opr"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Op,{className:"w-4 h-4"}),"Ciclos OPR"]})}),i.jsx("button",{onClick:()=>y("dashboard"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${v==="dashboard"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(zc,{className:"w-4 h-4"}),"Dashboard"]})})]})}),c&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Gu,{className:"w-5 h-5 text-red-500"}),i.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]})}),v==="dashboard"&&i.jsx("div",{className:"animate-fade-in",children:i.jsx(YJe,{acompanamientos:e,ciclosOPR:T,standaloneCiclos:I})}),v==="general"&&i.jsxs("form",{onSubmit:q,className:"space-y-8",children:[i.jsxs("div",{className:"p-4 border rounded-lg bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800",children:[i.jsxs("h4",{className:"text-lg font-semibold mb-3 text-green-700 dark:text-green-300 flex items-center gap-2",children:[i.jsx(b5,{className:"w-5 h-5"}),"Asistente IA - Informe General"]}),i.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[i.jsxs("button",{type:"button",onClick:V,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:w,children:[i.jsx(lR,{className:"w-4 h-4"}),w?"Generando...":"Generar Retroalimentación con IA"]}),i.jsxs("button",{type:"button",onClick:P,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[i.jsx(Eh,{className:"w-4 h-4"}),"Crear Informe PDF"]})]}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Completa la observación y rúbrica, luego genera automáticamente la retroalimentación. Finalmente, crea el informe en PDF."}),"retroalimentacionConsolidada"in M&&M.retroalimentacionConsolidada&&i.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-slate-800 rounded-md shadow-sm border",children:[i.jsxs("h5",{className:"font-semibold text-sm mb-2 text-green-700 dark:text-green-300 flex items-center gap-2",children:[i.jsx(es,{className:"w-4 h-4"}),"Retroalimentación Consolidada Generada:"]}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 rounded p-3",children:i.jsx("textarea",{readOnly:!0,rows:8,value:M.retroalimentacionConsolidada,className:"w-full text-sm text-slate-700 dark:text-slate-300 bg-transparent border-none p-0 resize-none focus:ring-0"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50 dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente *"}),i.jsxs("select",{name:"docente",value:"docente"in M?M.docente:"",onChange:U,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:o,children:[i.jsx("option",{value:"",children:o?"Cargando profesores...":"Seleccione un docente"}),r.map(ie=>i.jsx("option",{value:ie,children:ie},ie))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso *"}),i.jsxs("select",{name:"curso",value:"curso"in M?M.curso:"",onChange:U,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione un curso"}),os.map(ie=>i.jsx("option",{value:ie,children:ie},ie))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura *"}),i.jsxs("select",{name:"asignatura",value:"asignatura"in M?M.asignatura:"",onChange:U,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione una asignatura"}),Bs.map(ie=>i.jsx("option",{value:ie,children:ie},ie))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),i.jsx("input",{type:"text",name:"bloques",value:"bloques"in M?M.bloques:"",onChange:U,placeholder:"Ej: 3-4, 1-2",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Observaciones Generales"}),i.jsx("textarea",{name:"observacionesGenerales",value:"observacionesGenerales"in M?M.observacionesGenerales:"",onChange:U,rows:4,placeholder:"Ingrese sus observaciones sobre la clase, metodología utilizada, participación de estudiantes, recursos empleados, etc...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-lg font-semibold mb-4 text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(zc,{className:"w-5 h-5 text-amber-500"}),"Pauta de Observación - Rúbrica de Evaluación"]}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Haga clic en el nivel correspondiente para cada criterio observado durante la clase."}),i.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:S.map(ie=>i.jsx(at.Fragment,{children:ie.criteria.map((ce,de)=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[de===0&&i.jsx("td",{rowSpan:ie.criteria.length,className:"px-4 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600 bg-slate-50 dark:bg-slate-800",children:ie.domain}),i.jsx("td",{className:"px-4 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:ce.name}),ce.levels.map((Be,ae)=>{const Se=ae+1,ke="rubricaResultados"in M&&M.rubricaResultados[ce.name]===Se,ve=ke?"bg-amber-100 dark:bg-amber-900/30 border-amber-300 dark:border-amber-700":"hover:bg-amber-50 dark:hover:bg-slate-700";return i.jsx("td",{onClick:()=>W(ce.name,Se),className:`px-4 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${ve} ${ke?"ring-1 ring-amber-400":""}`,title:`Seleccionar nivel ${Se} para ${ce.name}`,children:i.jsxs("div",{className:"text-xs leading-relaxed",children:[ke&&i.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[i.jsx(es,{className:"w-3 h-3 text-amber-600"}),i.jsx("span",{className:"font-semibold text-amber-700 dark:text-amber-400",children:"Seleccionado"})]}),Be]})},Se)})]},ce.name))},ie.domain))})]})}),Object.keys(M.rubricaResultados||{}).length>0&&i.jsxs("div",{className:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[i.jsxs("h5",{className:"font-semibold text-amber-800 dark:text-amber-300 mb-2 flex items-center gap-2",children:[i.jsx(zc,{className:"w-4 h-4"}),"Resumen de Evaluación (",Object.keys(M.rubricaResultados).length," criterios evaluados)"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:Object.entries(M.rubricaResultados).map(([ie,ce])=>i.jsxs("div",{className:"flex justify-between items-center py-1",children:[i.jsxs("span",{className:"text-slate-700 dark:text-slate-300 truncate pr-2",children:[ie,":"]}),i.jsxs("span",{className:`font-semibold px-2 py-1 rounded text-xs ${ce===1?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":ce===2?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":ce===3?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:["Nivel ",ce]})]},ie))})]})]}),i.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t dark:border-slate-700",children:[i.jsx("button",{type:"button",onClick:()=>f("list"),className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),i.jsxs("button",{type:"submit",className:"bg-amber-500 hover:bg-amber-600 disabled:bg-amber-400 text-white font-bold py-2 px-6 rounded-lg transition-colors flex items-center gap-2",disabled:w,children:[w&&i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),h?"Actualizar":"Guardar"," Acompañamiento"]})]})]}),v==="opr"&&i.jsx(dZe,{acompanamiento:te||se,cicloToEdit:g,profesores:r,onSave:async ie=>{try{const ce=(te==null?void 0:te.id)||typeof ie.acompanamientoId=="string"&&ie.acompanamientoId||void 0;if(g&&g.id)await aZe(g.id,ie),alert("Ciclo OPR actualizado exitosamente");else{if(!ce||String(ce).startsWith("temp-")){const de={...ie,acompanamientoId:""};await nW(de)}else{const de={...ie,acompanamientoId:String(ce)};await nW(de)}alert("Ciclo OPR guardado exitosamente")}x(null),await k(),await L(),f("list")}catch(ce){console.error("❌ Error al guardar ciclo OPR:",ce);const de=ce.message||"Error desconocido al guardar el ciclo OPR";u(de),alert(`Error al guardar el ciclo OPR: ${de}`)}},onCancel:()=>{x(null),f("list")}})]})};return a||o?i.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Cargando módulo de acompañamiento..."}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-500 text-sm mt-2",children:[a&&"Cargando registros...",o&&" Cargando profesores..."]})]})})}):i.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d==="list"?z():J()})})},wM="mensajes_internos",AZe="usuarios",_ce="mensajes_read_status",Sce=e=>{var r,n;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fecha}},hZe=(e,t)=>{const r=Vt(pt(lt,wM),wr("participants","array-contains",e),cr("fecha","desc"));return hr(r,a=>{const s=a.docs.map(o=>Sce(o));t(s)},a=>{console.error("Error al suscribirse a los mensajes:",a),t([])})},mZe=async e=>{try{const t={...e,participants:[e.de,e.para],fecha:ir.fromDate(new Date)};await an(pt(lt,wM),t)}catch(t){throw console.error("Error al enviar el mensaje:",t),new Error("No se pudo enviar el mensaje.")}},pZe=async e=>{try{const t=rr(lt,wM,e);await ka(t)}catch(t){throw console.error("Error al eliminar el mensaje:",t),new Error("No se pudo eliminar el mensaje.")}},gZe=(e,t)=>{const r=rr(lt,_ce,e);return hr(r,a=>{a.exists()?t(a.data()):t({announcements:[],messages:[]})},a=>{console.error("Error al suscribirse al estado de lectura:",a),t({announcements:[],messages:[]})})},xZe=async(e,t)=>{try{const r=rr(lt,_ce,e);await yi(r,{messages:Fee(t)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como leído:",r),new Error("No se pudo actualizar el estado de lectura.")}},vZe=e=>{const t=Vt(pt(lt,AZe),cr("nombreCompleto","asc"));return hr(t,n=>{const a=n.docs.map(s=>Sce(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},bZe=({currentUser:e,refreshUnreadCount:t})=>{const[r,n]=C.useState("inbox"),[a,s]=C.useState([]),[o,l]=C.useState([]),[c,u]=C.useState(null),[d,f]=C.useState({announcements:[],messages:[]}),[h,m]=C.useState(!0),g={para:"",asunto:"",cuerpo:""},[x,v]=C.useState(g);C.useEffect(()=>{if(!e.id||!e.email){m(!1);return}m(!0);const E=hZe(e.email,M=>{s(M),m(!1)}),S=vZe(l),B=gZe(e.id,M=>{f(M),t()});return()=>{E(),S(),B()}},[e.id,e.email,t]);const y=E=>{u(E),r==="inbox"&&!d.messages.includes(E.id)&&xZe(e.id,E.id).catch(S=>{console.error("Failed to mark message as read:",S)})},w=async E=>{if(E.preventDefault(),!x.para||!x.asunto.trim()||!x.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const S={de:e.email,para:x.para,asunto:x.asunto,cuerpo:x.cuerpo};try{await mZe(S),v(g),n("sent")}catch(B){console.error("Error sending message:",B),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},_=async E=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await pZe(E),u(null)}catch(S){console.error("Error deleting message:",S),alert("No se pudo eliminar el mensaje.")}},T=E=>{v({para:E.de,asunto:`Re: ${E.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${E.de}
Fecha: ${new Date(E.fecha).toLocaleString("es-CL")}

${E.cuerpo}`}),n("compose")},j=C.useMemo(()=>a.filter(E=>E.para===e.email),[a,e.email]),I=C.useMemo(()=>a.filter(E=>E.de===e.email),[a,e.email]);return h?i.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[i.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[i.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:i.jsx("button",{onClick:()=>{n("compose"),u(null),v(g)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),i.jsxs("nav",{className:"p-2 space-y-1",children:[i.jsx("button",{onClick:()=>{n("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),i.jsx("button",{onClick:()=>{n("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&i.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?j:I).map(E=>{const S=r==="inbox"&&!d.messages.includes(E.id);return i.jsxs("div",{onClick:()=>y(E),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(c==null?void 0:c.id)===E.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("p",{className:`font-bold truncate ${S?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?E.de:`Para: ${E.para}`}),S&&i.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),i.jsx("p",{className:`truncate text-sm ${S?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:E.asunto}),i.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(E.fecha).toLocaleString("es-CL")})]},E.id)})}),i.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),i.jsxs("select",{id:"para",value:x.para,onChange:E=>v({...x,para:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione un destinatario..."}),o.filter(E=>E.email!==e.email).map(E=>i.jsxs("option",{value:E.email,children:[E.nombreCompleto," (",E.email,")"]},E.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),i.jsx("input",{type:"text",id:"asunto",value:x.asunto,onChange:E=>v({...x,asunto:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),i.jsx("textarea",{id:"cuerpo",value:x.cuerpo,onChange:E=>v({...x,cuerpo:E.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsx("div",{className:"text-right",children:i.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):c?i.jsxs("div",{children:[i.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c.asunto}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[i.jsx("strong",{children:"De:"})," ",c.de," ",i.jsx("br",{}),i.jsx("strong",{children:"Para:"})," ",c.para," ",i.jsx("br",{}),i.jsx("strong",{children:"Fecha:"})," ",new Date(c.fecha).toLocaleString("es-CL")]})]}),i.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:c.cuerpo}),i.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&i.jsx("button",{onClick:()=>T(c),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),i.jsx("button",{onClick:()=>_(c.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):i.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:i.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})},Z4="proyectos_interdisciplinarios",EM="entregas_interdisciplinarias",yZe="usuarios",NM=e=>{const t=e.data();return{id:e.id,...t}},wZe=e=>({...e,contenidosPorAsignatura:Array.isArray(e==null?void 0:e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e==null?void 0:e.actividades)?e.actividades:[],fechasClave:Array.isArray(e==null?void 0:e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e==null?void 0:e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e==null?void 0:e.docentesResponsables)?e.docentesResponsables:[e==null?void 0:e.docentesResponsables].filter(Boolean)}),EZe=e=>{const t=Vt(pt(lt,Z4),cr("nombreProyecto","asc"));return hr(t,n=>{try{const a=n.docs.map(s=>wZe(NM(s)));e(a)}catch(a){console.error("Error parseando planificaciones:",a),e([])}},n=>{console.error("Error al suscribirse a las planificaciones:",n),e([])})},NZe=async e=>{const t={...e,contenidosPorAsignatura:Array.isArray(e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e.actividades)?e.actividades:[],fechasClave:Array.isArray(e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e.docentesResponsables)?e.docentesResponsables:[e.docentesResponsables].filter(Boolean),createdAt:ir.now(),updatedAt:ir.now()};return(await an(pt(lt,Z4),t)).id},sW=async(e,t)=>{const{id:r,...n}=t,a=rr(lt,Z4,e);await yi(a,{...n,contenidosPorAsignatura:Array.isArray(n==null?void 0:n.contenidosPorAsignatura)?n.contenidosPorAsignatura:(n==null?void 0:n.contenidosPorAsignatura)===void 0?void 0:[],actividades:Array.isArray(n==null?void 0:n.actividades)?n.actividades:(n==null?void 0:n.actividades)===void 0?void 0:[],fechasClave:Array.isArray(n==null?void 0:n.fechasClave)?n.fechasClave:(n==null?void 0:n.fechasClave)===void 0?void 0:[],tareas:Array.isArray(n==null?void 0:n.tareas)?n.tareas:(n==null?void 0:n.tareas)===void 0?void 0:[],docentesResponsables:Array.isArray(n==null?void 0:n.docentesResponsables)?n.docentesResponsables:(n==null?void 0:n.docentesResponsables)===void 0?void 0:[n==null?void 0:n.docentesResponsables].filter(Boolean),updatedAt:ir.now()},{merge:!0})},CZe=async e=>{const t=rr(lt,Z4,e),r=Vt(pt(lt,EM),wr("planificacionId","==",e)),n=await mn(r),a=Ug(lt);n.forEach(s=>a.delete(s.ref)),a.delete(t),await a.commit()},_Ze=(e,t)=>{const r=Vt(pt(lt,EM),wr("planificacionId","==",e));return hr(r,a=>{const s=a.docs.map(o=>NM(o));t(s)},a=>{console.error("Error al suscribirse a las entregas:",a),t([])})},iW=async(e,t)=>{const r=rr(lt,EM,e);await yi(r,{feedbackProfesor:t,fechaFeedback:ir.fromDate(new Date)},{merge:!0})},kce=e=>{const t=Vt(pt(lt,yZe));return hr(t,n=>{const a=n.docs.map(s=>NM(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},QO={Recordar:["Enumerar","Definir","Identificar","Nombrar","Reconocer","Reproducir"],Comprender:["Explicar","Interpretar","Resumir","Parafrasear","Ejemplificar","Clasificar"],Aplicar:["Ejecutar","Implementar","Usar","Demostrar","Operar","Programar"],Analizar:["Diferenciar","Organizar","Atribuir","Comparar","Deconstruir","Delinear"],Evaluar:["Comprobar","Criticar","Revisar","Formular hipótesis","Experimentar","Juzgar"],Crear:["Generar","Planificar","Producir","Diseñar","Construir","Idear"]},Bw=({href:e})=>{if(!e)return i.jsx("span",{className:"text-slate-400",children:"—"});const t=e.startsWith("http")?e:`https://${e}`;return i.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[i.jsx(F2e,{className:"w-4 h-4"}),i.jsx("span",{className:"truncate max-w-[180px] md:max-w-[260px]",children:e})]})},Ep=({icon:e,label:t,children:r,aiButton:n,className:a=""})=>i.jsxs("div",{className:`bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 ${a}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg",children:e}),i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:t})]}),n]}),r]}),SZe=({planificaciones:e,onActivityUpdate:t})=>{const[r,n]=C.useState(null),a=C.useMemo(()=>e.map(c=>{const u=[];return(c.actividades||[]).forEach(d=>u.push({...d,planId:c.id,type:"activity"})),(c.fechasClave||[]).forEach(d=>u.push({id:d.id,planId:c.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:c.docentesResponsables.join(", "),asignaturaPrincipal:"Milestone",recursoUrl:d.recursoUrl})),u.sort((d,f)=>new Date(d.fechaInicio).getTime()-new Date(f.fechaInicio).getTime()),{plan:c,items:u}}),[e]),s=C.useCallback(c=>{if(c.type==="keyDate")return{text:"Fecha Clave",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${c.fechaInicio}T00:00:00`),f=new Date(`${c.fechaFin}T00:00:00`);return f<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&f>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300"}},[]),o=({name:c})=>{const u=(c||"").split(" ").map(d=>d[0]).join("").toUpperCase();return i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-white flex items-center justify-center font-semibold text-sm ring-2 ring-white dark:ring-slate-800 shadow-sm",children:u.slice(0,2)})},l=({data:c,onClose:u,onSave:d})=>{const[f,h]=C.useState(c.activity),m=x=>h({...f,[x.target.name]:x.target.value}),g=()=>{d(c.planId,f),u()};return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl p-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:i.jsx(j_,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Editar Actividad"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Nombre"}),i.jsx("input",{name:"nombre",value:f.nombre,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Responsables"}),i.jsx("input",{name:"responsables",value:f.responsables,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Inicio"}),i.jsx("input",{type:"date",name:"fechaInicio",value:f.fechaInicio,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Fin"}),i.jsx("input",{type:"date",name:"fechaFin",value:f.fechaFin,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Recurso (enlace)"}),i.jsx("input",{name:"recursoUrl",placeholder:"https://...",value:f.recursoUrl||"",onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[i.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 rounded-lg",children:"Cancelar"}),i.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Guardar"})]})]})})};return!a.length||a.every(c=>c.items.length===0)?i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Gu,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay actividades para mostrar"})]})}):i.jsxs("div",{className:"space-y-8",children:[a.map(({plan:c,items:u})=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/50 rounded-xl",children:i.jsx(Gf,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-200",children:c.nombreProyecto}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cronograma del proyecto"})]})]})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b-2 border-slate-200 dark:border-slate-700",children:[i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Tarea"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Estado"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Inicio"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Fin"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Recurso"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Asignado"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:u.map(d=>{const f=s(d),h=d.type==="activity";return i.jsxs("tr",{className:`${h?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>h&&n({planId:d.planId,activity:d}),children:[i.jsx("td",{className:"px-6 py-4 font-semibold",children:d.nombre}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`px-3 py-1 inline-flex text-sm font-semibold rounded-full ${f.color}`,children:f.text})}),i.jsx("td",{className:"px-6 py-4",children:d.fechaInicio}),i.jsx("td",{className:"px-6 py-4",children:d.fechaFin}),i.jsx("td",{className:"px-6 py-4",children:i.jsx(Bw,{href:d.recursoUrl})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx(o,{name:d.responsables||"Sin asignar"})})]},d.id)})})]})})]},c.id)),r&&i.jsx(l,{data:r,onClose:()=>n(null),onSave:t})]})},kZe=({planificaciones:e,onBack:t})=>{const r=C.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{var m;(m=h.habilidades)==null||m.forEach(g=>{c[g]=(c[g]||0)+1,Object.entries(QO).forEach(([x,v])=>{v.includes(g)&&(u[x]=(u[x]||0)+1)})})})}),{habilidadesCount:c,categoriaCount:u}},[e]),n=C.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;d.asignaturas.forEach(h=>{u[h]=(u[h]||0)+1}),(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{h.contenidos&&h.contenidos.toLowerCase().split(/[\s,.-]+/).filter(g=>g.length>3).filter(g=>!["para","con","por","las","los","una","del","que","este","esta","son","como","más","desde","hasta","entre"].includes(g)).forEach(g=>{c[g]=(c[g]||0)+1})})}),{palabrasCount:c,asignaturasCount:u}},[e]),a=C.useMemo(()=>{const c=e.length,u=e.reduce((h,m)=>{var g;return h+(((g=m.actividades)==null?void 0:g.length)||0)},0),d=e.reduce((h,m)=>{var g;return h+(((g=m.tareas)==null?void 0:g.length)||0)},0),f=new Set(e.flatMap(h=>h.asignaturas)).size;return{totalProyectos:c,totalActividades:u,totalTareas:d,asignaturasUnicas:f}},[e]),s=({data:c,title:u})=>{const d=Object.entries(c);if(!d.length)return null;const f=d.sort((m,g)=>g[1]-m[1]).slice(0,20),h=Math.max(...f.map(([,m])=>m));return h?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:u}),i.jsx("div",{className:"flex flex-wrap gap-2 justify-center min-h-[100px]",children:f.map(([m,g])=>{const x=Math.max(.8,g/h*2),v=Math.max(.6,g/h);return i.jsx("span",{className:"inline-block px-3 py-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full font-semibold transition-transform hover:scale-110",style:{fontSize:`${x}rem`,opacity:v},title:`${m}: ${g} veces`,children:m},m)})})]}):null},o=({data:c})=>{const u=Object.values(c),d=u.length?Math.max(...u):0,f={Recordar:"bg-red-500",Comprender:"bg-orange-500",Aplicar:"bg-yellow-500",Analizar:"bg-green-500",Evaluar:"bg-blue-500",Crear:"bg-purple-500"};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/50 rounded-lg",children:i.jsx(qw,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Taxonomía de Bloom"})]}),i.jsx("div",{className:"space-y-4",children:Object.keys(QO).map(h=>{const m=c[h]||0,g=d>0?m/d*100:0,x=f[h]||"bg-slate-400";return i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:h}),i.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[m," habilidades"]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:i.jsx("div",{className:`h-3 rounded-full ${x} transition-all duration-500`,style:{width:`${g}%`}})})]},h)})})]})},l=({icon:c,title:u,value:d,description:f,color:h})=>i.jsxs("div",{className:`bg-gradient-to-br ${h} p-6 rounded-2xl shadow-lg text-white`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:c}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-bold",children:d}),i.jsx("div",{className:"text-white/80 text-sm",children:u})]})]}),i.jsx("p",{className:"text-white/90 text-sm",children:f})]});return i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-teal-600 rounded-xl",children:i.jsx(B_,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent",children:"Dashboard Analítico"})]}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Análisis de habilidades y contenidos desarrollados"})]}),i.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[i.jsx(Kw,{className:"w-4 h-4"})," Volver a Proyectos"]})]})}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(l,{icon:i.jsx(vg,{className:"w-8 h-8"}),title:"Proyectos",value:a.totalProyectos,description:"Proyectos interdisciplinarios creados",color:"from-blue-500 to-blue-600"}),i.jsx(l,{icon:i.jsx(uwe,{className:"w-8 h-8"}),title:"Actividades",value:a.totalActividades,description:"Actividades planificadas en total",color:"from-green-500 to-green-600"}),i.jsx(l,{icon:i.jsx(Md,{className:"w-8 h-8"}),title:"Tareas",value:a.totalTareas,description:"Tareas asignadas a estudiantes",color:"from-purple-500 to-purple-600"}),i.jsx(l,{icon:i.jsx(ol,{className:"w-8 h-8"}),title:"Asignaturas",value:a.asignaturasUnicas,description:"Asignaturas involucradas",color:"from-orange-500 to-orange-600"})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[i.jsx(o,{data:r.categoriaCount}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:i.jsx(mw,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Distribución de Asignaturas"})]}),i.jsx("div",{className:"space-y-3",children:Object.entries(n.asignaturasCount).sort(([,c],[,u])=>u-c).map(([c,u])=>{const d=Math.max(...Object.values(n.asignaturasCount)),f=d>0?u/d*100:0;return i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:c}),i.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[u," proyecto",u!==1?"s":""]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:i.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-500",style:{width:`${f}%`}})})]},c)})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[i.jsx(s,{data:n.palabrasCount,title:"Contenidos Más Frecuentes"}),i.jsx(s,{data:r.habilidadesCount,title:"Habilidades Más Desarrolladas"})]})]})},jZe=({plan:e,onBack:t,availableTeachers:r})=>{var g,x;const[n,a]=C.useState([]),[s,o]=C.useState([]),[l,c]=C.useState(((g=e.tareas)==null?void 0:g[0])||null),[u,d]=C.useState(null);C.useEffect(()=>{const v=kce(a),y=_Ze(e.id,o);return()=>{v(),y()}},[e.id]);const f=C.useMemo(()=>n.filter(v=>v.profile===Gt.ESTUDIANTE&&e.cursos.includes(v.curso||"")).sort((v,y)=>(v.nombreCompleto||"").localeCompare(y.nombreCompleto||"")),[n,e.cursos]),h=async v=>{d(v.id);const y="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",w=`Eres un profesor asistente. Genera una retroalimentación breve (2-3 frases) para la entrega de un estudiante.
Instrucciones de la tarea: "${l==null?void 0:l.instrucciones}"
Comentario del estudiante: "${v.observacionesEstudiante||"Sin comentarios."}"`.trim();try{const E=(await(await new Ps(y).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(w)).response).text().replace(/(\*\*|\*)/g,"");await iW(v.id,E)}catch(_){console.error(_),alert("No se pudo generar la retroalimentación.")}finally{d(null)}},m=v=>v.map(y=>{var w;return((w=r.find(_=>_.id===y))==null?void 0:w.nombreCompleto)||y}).join(", ");return l?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Entregas de Tareas"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:e.nombreProyecto}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:["Profesores: ",m(e.docentesResponsables)]})]}),i.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[i.jsx(Kw,{className:"w-4 h-4"})," Volver a Proyectos"]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Seleccionar Tarea:"}),i.jsx("select",{value:l.id,onChange:v=>{var y;return c(((y=e.tareas)==null?void 0:y.find(w=>w.id===v.target.value))||null)},className:"w-full sm:w-auto p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:(x=e.tareas)==null?void 0:x.map(v=>i.jsxs("option",{value:v.id,children:["Tarea ",v.numero,": ",v.instrucciones]},v.id))})]}),i.jsx("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:f.map(v=>{const y=s.find(w=>w.tareaId===l.id&&w.estudianteId===v.id);return i.jsxs("div",{className:"p-6 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:(v.nombreCompleto||"NA").split(" ").map(w=>w[0]).join("").toUpperCase().slice(0,2)}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:v.nombreCompleto}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:v.curso})]})]}),i.jsx("div",{className:"flex items-center gap-2",children:y!=null&&y.completada?i.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 rounded-full text-sm font-semibold",children:[i.jsx(sR,{className:"w-4 h-4"})," Entregado"]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300 rounded-full text-sm font-semibold",children:[i.jsx(Gu,{className:"w-4 h-4"})," Pendiente"]})})]}),y?i.jsxs("div",{className:"space-y-4",children:[y.observacionesEstudiante&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Comentario del estudiante:"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 bg-white dark:bg-slate-800 p-3 rounded-md border border-slate-200 dark:border-slate-600",children:y.observacionesEstudiante})]}),y.enlaceUrl&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Enlace entregado:"}),i.jsx(Bw,{href:y.enlaceUrl})]}),y.archivoAdjunto&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Archivo adjunto:"}),i.jsxs("a",{href:y.archivoAdjunto.url,download:y.archivoAdjunto.nombre,className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium",children:[i.jsx(Eh,{className:"w-4 h-4"})," ",y.archivoAdjunto.nombre]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Retroalimentación del profesor:"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:y.feedbackProfesor||"",onBlur:w=>iW(y.id,w.target.value),rows:3,className:"flex-1 p-3 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm resize-none"},y.id),i.jsx("button",{onClick:()=>h(y),disabled:u===y.id,className:"p-3 rounded-md bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar Feedback con IA",children:u===y.id?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):i.jsx(Jp,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})]})]})]}):i.jsxs("div",{className:"text-center py-6",children:[i.jsx(Gu,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"El estudiante aún no ha realizado la entrega"})]})]},v.id)})})]}):i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Gu,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Este proyecto no tiene tareas asignadas"}),i.jsxs("button",{onClick:t,className:"mt-4 inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold",children:[i.jsx(Kw,{className:"w-4 h-4"})," Volver a Proyectos"]})]})})},BZe=({descripcion:e,asignaturas:t,docentes:r,onObjetivos:n,onIndicadores:a,onEstructura:s,availableTeachers:o})=>{const[l,c]=C.useState(null),u="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",d=h=>h.map(m=>{var g;return((g=o.find(x=>x.id===m))==null?void 0:g.nombreCompleto)||m}).join(", "),f=async h=>{var m,g,x;if(!e.trim()){alert("Ingrese una descripción del proyecto.");return}c(h);try{const y=new Ps(u).getGenerativeModel({model:"gemini-1.5-flash-latest"});if(h==="obj"){const w=`Genera 3 a 5 objetivos de aprendizaje claros y medibles.
Descripción: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,_=await y.generateContent(w);n(_.response.text().replace(/(\*\*|\*)/g,""))}else if(h==="ind"){const w=`Genera 5 a 7 indicadores de logro observables.
Descripción: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,_=await y.generateContent(w);a(_.response.text().replace(/(\*\*|\*)/g,""))}else{const w=`Devuelve SOLO un JSON válido (sin backticks) con claves: actividades, fechasClave y tareas para un proyecto escolar.
Descripción: "${e}"
Docentes responsables: "${d(r)}"
Asignaturas: "${t.join(", ")}"
Estructura:
- actividades: 3 a 5 objetos { "nombre", "fechaInicio" (YYYY-MM-DD), "fechaFin" (YYYY-MM-DD), "responsables", "recursoUrl" }
- fechasClave: 2 a 3 objetos { "nombre", "fecha" (YYYY-MM-DD), "recursoUrl" }
- tareas: 2 a 3 objetos { "instrucciones", "fechaEntrega" (YYYY-MM-DD), "recursoUrl" }`,T=(await y.generateContent(w)).response.text().replace(/^```json\s*|```\s*$/g,""),j=JSON.parse(T);s({actividades:(m=j.actividades)==null?void 0:m.map(I=>({...I,id:crypto.randomUUID()})),fechasClave:(g=j.fechasClave)==null?void 0:g.map(I=>({id:crypto.randomUUID(),nombre:I.nombre,fecha:I.fecha,recursoUrl:I.recursoUrl})),tareas:(x=j.tareas)==null?void 0:x.map((I,E)=>({...I,id:crypto.randomUUID(),numero:E+1}))})}}catch(v){console.error(v),alert("No se pudo completar la generación con IA.")}finally{c(null)}};return i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>f("obj"),disabled:l!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar objetivos con IA",children:l==="obj"?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):i.jsx(Jp,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),i.jsx("button",{type:"button",onClick:()=>f("ind"),disabled:l!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar indicadores con IA",children:l==="ind"?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):i.jsx(Jp,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),i.jsx("button",{type:"button",onClick:()=>f("est"),disabled:l!==null,className:"inline-flex items-center gap-2 bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold py-2 px-3 rounded-lg disabled:from-slate-400 disabled:to-slate-500 disabled:cursor-not-allowed hover:from-sky-600 hover:to-blue-700 transition-all duration-200 shadow-lg",children:l==="est"?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})," ",i.jsx("span",{children:"Generando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Jp,{className:"w-4 h-4"})," ",i.jsx("span",{children:"Estructura IA"})]})})]})},TZe=({initialPlan:e,onSave:t,onCancel:r,availableTeachers:n})=>{const[a,s]=C.useState(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[o,l]=C.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""}),[c,u]=C.useState({nombre:"",fecha:"",recursoUrl:""}),[d,f]=C.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""});C.useEffect(()=>{s(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[e]);const h=w=>s(_=>({..._,[w.target.name]:w.target.value})),m=(w,_,T)=>s(j=>({...j,contenidosPorAsignatura:j.contenidosPorAsignatura.map(I=>I.asignatura===w?{...I,[_]:T}:I)})),g=(w,_)=>s(T=>({...T,contenidosPorAsignatura:T.contenidosPorAsignatura.map(j=>j.asignatura===w?{...j,habilidades:j.habilidades.includes(_)?j.habilidades.filter(I=>I!==_):[...j.habilidades,_]}:j)})),x=()=>{if(!o.nombre||!o.fechaInicio||!o.fechaFin){alert("Nombre y fechas son obligatorios.");return}s(w=>({...w,actividades:[...w.actividades||[],{...o,id:crypto.randomUUID()}]})),l({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""})},v=()=>{!c.nombre||!c.fecha||(s(w=>({...w,fechasClave:[...w.fechasClave||[],{...c,id:crypto.randomUUID()}]})),u({nombre:"",fecha:"",recursoUrl:""}))},y=()=>{var _;if(!d.instrucciones||!d.fechaEntrega){alert("Instrucciones y fecha son obligatorios.");return}const w={id:crypto.randomUUID(),numero:(((_=a.tareas)==null?void 0:_.length)||0)+1,...d};s(T=>({...T,tareas:[...T.tareas||[],w]})),f({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return i.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl",children:i.jsx(vg,{className:"w-10 h-10 text-white"})}),i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:e?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})]}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Diseñe experiencias de aprendizaje colaborativo e innovador"})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsx(Ep,{icon:i.jsx(Md,{className:"w-6 h-6 text-slate-600"}),label:"Información del Proyecto",aiButton:i.jsx(BZe,{descripcion:a.descripcionProyecto,asignaturas:a.asignaturas,docentes:a.docentesResponsables,availableTeachers:[],onObjetivos:w=>s(_=>({..._,objetivos:w})),onIndicadores:w=>s(_=>({..._,indicadoresLogro:w})),onEstructura:w=>s(_=>{var T,j,I;return{..._,actividades:(T=w.actividades)!=null&&T.length?w.actividades:_.actividades,fechasClave:(j=w.fechasClave)!=null&&j.length?w.fechasClave:_.fechasClave,tareas:(I=w.tareas)!=null&&I.length?w.tareas:_.tareas}})}),children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Nombre del Proyecto"}),i.jsx("input",{name:"nombreProyecto",value:a.nombreProyecto,onChange:h,placeholder:"Ingrese el nombre del proyecto...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-lg font-semibold"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Descripción del Proyecto"}),i.jsx("textarea",{name:"descripcionProyecto",value:a.descripcionProyecto,onChange:h,placeholder:"Detalle metodología, producto final y propósito...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})]})]})}),i.jsx(Ep,{icon:i.jsx(_o,{className:"w-6 h-6 text-slate-600"}),label:"Profesores Responsables",children:i.jsx("div",{className:"space-y-3",children:i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:n.map(w=>i.jsx("button",{type:"button",onClick:()=>{s(_=>({..._,docentesResponsables:_.docentesResponsables.includes(w.id)?_.docentesResponsables.filter(T=>T!==w.id):[..._.docentesResponsables,w.id]}))},className:`p-3 rounded-lg text-left transition-all duration-200 ${a.docentesResponsables.includes(w.id)?"bg-blue-100 border-2 border-blue-500 text-blue-800 dark:bg-blue-900/50 dark:border-blue-400 dark:text-blue-300":"bg-slate-50 border-2 border-slate-200 hover:border-slate-300 dark:bg-slate-700 dark:border-slate-600 dark:hover:border-slate-500"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${a.docentesResponsables.includes(w.id)?"bg-blue-500 text-white":"bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-300"}`,children:i.jsx(Yw,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-sm",children:w.nombreCompleto}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:w.email})]})]})},w.id))})})}),i.jsx(Ep,{icon:i.jsx(C_,{className:"w-6 h-6 text-slate-600"}),label:"Cursos Participantes",children:i.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:os.map(w=>i.jsx("button",{type:"button",onClick:()=>{s(_=>({..._,cursos:_.cursos.includes(w)?_.cursos.filter(T=>T!==w):[..._.cursos,w]}))},className:`p-3 rounded-lg text-center text-sm font-semibold transition-all duration-200 ${a.cursos.includes(w)?"bg-amber-500 text-white shadow-lg scale-105":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:w},w))})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx(Ep,{icon:i.jsx(ol,{className:"w-6 h-6 text-slate-600"}),label:"Asignaturas y Contenidos",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Seleccionar Asignaturas:"}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:Bs.map(w=>i.jsx("button",{type:"button",onClick:()=>{s(_=>{const T=_.asignaturas,j=T.includes(w)?T.filter(E=>E!==w):[...T,w];let I=_.contenidosPorAsignatura;return j.includes(w)&&!T.includes(w)&&(I=[...I,{asignatura:w,contenidos:"",habilidades:[]}]),!j.includes(w)&&T.includes(w)&&(I=I.filter(E=>E.asignatura!==w)),{..._,asignaturas:j,contenidosPorAsignatura:I}})},className:`p-2 rounded-lg text-left text-sm font-medium transition-all duration-200 ${a.asignaturas.includes(w)?"bg-green-500 text-white shadow-md":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:w},w))})]}),a.contenidosPorAsignatura.length>0&&i.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Contenidos y Habilidades por Asignatura:"}),a.contenidosPorAsignatura.map(w=>i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("h5",{className:"font-bold text-slate-800 dark:text-slate-200 mb-3 flex items-center gap-2",children:[i.jsx(ol,{className:"w-4 h-4"})," ",w.asignatura]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Contenidos a trabajar:"}),i.jsx("textarea",{value:w.contenidos,onChange:_=>m(w.asignatura,"contenidos",_.target.value),placeholder:`Detalle los contenidos específicos de ${w.asignatura}...`,className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm min-h-[80px] resize-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Habilidades según Taxonomía de Bloom:"}),i.jsx("div",{className:"space-y-2",children:Object.entries(QO).map(([_,T])=>i.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-md p-2",children:[i.jsxs("h6",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 mb-1",children:[_,":"]}),i.jsx("div",{className:"flex flex-wrap gap-1",children:T.map(j=>i.jsx("button",{type:"button",onClick:()=>g(w.asignatura,j),className:`px-2 py-1 rounded-md text-xs font-medium transition-colors ${w.habilidades.includes(j)?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-500"}`,children:j},j))})]},_))}),w.habilidades.length>0&&i.jsxs("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:[i.jsx("p",{className:"text-xs font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Habilidades seleccionadas:"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:w.habilidades.map(_=>i.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded text-xs",children:_},_))})]})]})]})]},w.asignatura))]})]})}),i.jsx(Ep,{icon:i.jsx(lb,{className:"w-6 h-6 text-slate-600"}),label:"Objetivos de Aprendizaje",children:i.jsx("textarea",{name:"objetivos",value:a.objetivos,onChange:h,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),i.jsx(Ep,{icon:i.jsx(zc,{className:"w-6 h-6 text-slate-600"}),label:"Indicadores de Éxito",children:i.jsx("textarea",{name:"indicadoresLogro",value:a.indicadoresLogro,onChange:h,placeholder:"Liste los indicadores de logro...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),i.jsxs(Ep,{icon:i.jsx(ic,{className:"w-6 h-6 text-slate-600"}),label:"Planificación y Cronograma",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(Gf,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),i.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Proyecto"})]}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre"}),i.jsx("input",{value:o.nombre,onChange:w=>l({...o,nombre:w.target.value}),placeholder:"Nombre de la actividad",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-2",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Inicio"}),i.jsx("input",{type:"date",value:o.fechaInicio,onChange:w=>l({...o,fechaInicio:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-2",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fin"}),i.jsx("input",{type:"date",value:o.fechaFin,onChange:w=>l({...o,fechaFin:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),i.jsx("input",{value:o.recursoUrl||"",onChange:w=>l({...o,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("button",{type:"button",onClick:x,className:"w-full bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[i.jsx(Co,{className:"w-4 h-4"})," Agregar"]})})]}),!!a.actividades.length&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Actividades Agregadas:"}),i.jsx("div",{className:"space-y-2",children:a.actividades.map(w=>i.jsx("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm",children:i.jsxs("div",{className:"flex justify-between items-center gap-2",children:[i.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:w.nombre}),i.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:[w.fechaInicio," - ",w.fechaFin]}),i.jsx(Bw,{href:w.recursoUrl})]})},w.id))})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(sR,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),i.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Fechas Clave (Hitos)"})]}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-3 items-end",children:[i.jsxs("div",{className:"sm:col-span-2",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre del Hito"}),i.jsx("input",{value:c.nombre,onChange:w=>u({...c,nombre:w.target.value}),placeholder:"Nombre del hito",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha"}),i.jsx("input",{type:"date",value:c.fecha,onChange:w=>u({...c,fecha:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"sm:col-span-1",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),i.jsx("input",{value:c.recursoUrl||"",onChange:w=>u({...c,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("button",{type:"button",onClick:v,className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[i.jsx(Co,{className:"w-4 h-4"})," Agregar"]})]}),!!a.fechasClave.length&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Fechas Clave Agregadas:"}),i.jsx("div",{className:"space-y-2",children:a.fechasClave.map(w=>i.jsx("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm",children:i.jsxs("div",{className:"flex justify-between items-center gap-2",children:[i.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:w.nombre}),i.jsx("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:w.fecha}),i.jsx(Bw,{href:w.recursoUrl})]})},w.id))})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(qw,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),i.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Tareas para Estudiantes"})]}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[i.jsxs("div",{className:"lg:col-span-5",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Instrucciones de la Tarea"}),i.jsx("input",{value:d.instrucciones,onChange:w=>f({...d,instrucciones:w.target.value}),placeholder:"Descripción detallada de la tarea",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de Entrega"}),i.jsx("input",{type:"date",value:d.fechaEntrega,onChange:w=>f({...d,fechaEntrega:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),i.jsx("input",{value:d.recursoUrl||"",onChange:w=>f({...d,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("button",{type:"button",onClick:y,className:"w-full bg-purple-600 hover:bg-purple-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[i.jsx(Co,{className:"w-4 h-4"})," Agregar"]})})]}),!!a.tareas.length&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Tareas Agregadas:"}),i.jsx("div",{className:"space-y-2",children:a.tareas.map(w=>i.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600",children:i.jsxs("div",{className:"flex justify-between items-start gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("span",{className:"inline-block bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-300 text-xs font-bold px-2 py-1 rounded mb-1",children:["Tarea #",w.numero]}),i.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:w.instrucciones})]}),i.jsxs("div",{className:"text-right space-y-1",children:[i.jsx("span",{className:"block text-slate-500 dark:text-slate-400 text-xs",children:w.fechaEntrega}),"recursoUrl"in w?i.jsx(Bw,{href:w.recursoUrl}):i.jsx("span",{className:"text-slate-400 text-xs",children:"—"})]})]})},w.id))})]})]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-8 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors order-2 sm:order-1",children:"Cancelar"}),i.jsx("button",{onClick:()=>t(a),className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg order-1 sm:order-2",children:e?"Guardar Cambios":"Crear Proyecto"})]})]})]})]})]})},oW=()=>{const[e,t]=C.useState([]),[r,n]=C.useState([]),[a,s]=C.useState(!0),[o,l]=C.useState("list"),[c,u]=C.useState(null),[d,f]=C.useState(null),[h,m]=C.useState(null),[g,x]=C.useState("all"),v=C.useMemo(()=>g==="all"?e:e.filter(S=>S.id===g),[e,g]);C.useEffect(()=>{s(!0);const S=kce(M=>{const R=M.filter(k=>k.profile===Gt.PROFESORADO);n(R)}),B=EZe(M=>{const R=M.map(k=>({...k,docentesResponsables:Array.isArray(k.docentesResponsables)?k.docentesResponsables:[k.docentesResponsables].filter(Boolean),contenidosPorAsignatura:k.contenidosPorAsignatura||[],actividades:k.actividades||[],fechasClave:k.fechasClave||[]}));t(R),s(!1)});return()=>{S(),B()}},[]);const y=C.useCallback(async(S,B)=>{const M=e.find(k=>k.id===S);if(!M)return;const R={...M,actividades:(M.actividades||[]).map(k=>k.id===B.id?B:k)};await sW(S,R)},[e]),w=async S=>{try{const B=S.id&&String(S.id).length>0,M={...S};if(B){const{id:R,...k}=M;await sW(S.id,k)}else delete M.id,await NZe(M);l("list"),u(null)}catch(B){console.error("Error al guardar la planificación:",B),alert("No se pudo guardar la planificación.")}},_=S=>{u(S),l("form")},T=async S=>{if(!S){alert("Error: ID inválido.");return}if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await CZe(S)}catch(B){console.error(B),alert("No se pudo eliminar la planificación.")}},j=()=>{u(null),l("form")},I=async S=>{f(S.id);const B=new vr("p","mm","a4"),M=15,k=B.internal.pageSize.getWidth()-M*2;let D=M+20;B.setFont("helvetica","bold"),B.setFontSize(22),B.setTextColor(0);const L=B.splitTextToSize(S.nombreProyecto,k);B.text(L,M,D),D+=L.length*8+10,xi(B,{startY:D,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},(q=>q.map(G=>{var K;return((K=r.find(ee=>ee.id===G))==null?void 0:K.nombreCompleto)||G}).join(", "))(S.docentesResponsables)],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},S.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},S.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:11,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),D=B.lastAutoTable.finalY+15;const V=(q,G)=>{if(!G||Array.isArray(G)&&!G.length||typeof G=="string"&&!G.trim())return;const K=Array.isArray(G)?G.join(", "):String(G),ee=B.splitTextToSize(K,k);B.setFont("helvetica","bold"),B.setFontSize(14),B.setTextColor(40),B.text(q,M,D),D+=8,B.setFont("helvetica","normal"),B.setFontSize(11),B.setTextColor(80),B.text(ee,M,D),D+=ee.length*5+10};if(V("Descripción del Proyecto",S.descripcionProyecto),V("Objetivos de Aprendizaje",S.objetivos),V("Indicadores de Logro",S.indicadoresLogro),S.contenidosPorAsignatura&&S.contenidosPorAsignatura.length>0&&(B.setFont("helvetica","bold"),B.setFontSize(14),B.text("Contenidos por Asignatura",M,D),D+=10,S.contenidosPorAsignatura.forEach(q=>{var G;if(B.setFont("helvetica","bold"),B.setFontSize(11),B.text(`${q.asignatura}:`,M,D),D+=6,B.setFont("helvetica","normal"),B.setFontSize(11),q.contenidos){const K=B.splitTextToSize(`Contenidos: ${q.contenidos}`,k-10);B.text(K,M+5,D),D+=K.length*5+3}if((G=q.habilidades)!=null&&G.length){const K=`Habilidades: ${q.habilidades.join(", ")}`,ee=B.splitTextToSize(K,k-10);B.text(ee,M+5,D),D+=ee.length*5+8}}),D+=10),S.actividades&&S.actividades.length>0&&(B.setFont("helvetica","bold"),B.setFontSize(14),B.text("Actividades",M,D),D+=10,xi(B,{startY:D,head:[["Actividad","Inicio","Fin","Recurso"]],body:S.actividades.map(q=>[q.nombre,q.fechaInicio,q.fechaFin,q.recursoUrl||"—"]),theme:"striped"}),D=B.lastAutoTable.finalY+10),S.fechasClave&&S.fechasClave.length>0&&(B.setFont("helvetica","bold"),B.setFontSize(14),B.text("Fechas Clave",M,D),D+=10,xi(B,{startY:D,head:[["Hito","Fecha","Recurso"]],body:S.fechasClave.map(q=>[q.nombre,q.fecha,q.recursoUrl||"—"]),theme:"striped"}),D=B.lastAutoTable.finalY+10),S.tareas&&S.tareas.length>0){const q=S.tareas.map(G=>[String(G.numero||""),G.instrucciones,G.fechaEntrega,G.recursoUrl||"—"]);B.setFont("helvetica","bold"),B.setFontSize(14),B.text("Tareas para Estudiantes",M,D),D+=10,xi(B,{startY:D,head:[["#","Instrucciones","Entrega","Recurso"]],body:q,theme:"striped",headStyles:{fillColor:[52,73,94]}})}B.save(`Proyecto_${S.nombreProyecto.replace(/\s/g,"_")}.pdf`),f(null)},E=S=>S.map(B=>{var M;return((M=r.find(R=>R.id===B))==null?void 0:M.nombreCompleto)||B}).join(", ");return a?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Cargando proyectos..."})]})}):h?i.jsx(jZe,{plan:h,onBack:()=>m(null),availableTeachers:r}):o==="dashboard"?i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>l("list"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),i.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-green-600 to-teal-600 text-white shadow",children:"Dashboard"})]})}),i.jsx(kZe,{planificaciones:e,onBack:()=>l("list")})]}):o==="form"?i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>{l("list"),u(null)},className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),i.jsx("button",{type:"button",onClick:()=>l("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),i.jsx(TZe,{initialPlan:c,onSave:w,onCancel:()=>{l("list"),u(null)},availableTeachers:r})]}):i.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow",children:"Proyectos"}),i.jsx("button",{type:"button",onClick:()=>l("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:i.jsx(vg,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Proyectos Interdisciplinarios"})]}),i.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Gestione experiencias de aprendizaje colaborativo e innovador"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("button",{type:"button",onClick:()=>l("dashboard"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 shadow-lg",children:[i.jsx(B_,{className:"w-5 h-5"})," Ver Dashboard"]}),i.jsxs("button",{type:"button",onClick:j,className:"inline-flex items-center gap-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg",children:[i.jsx(Co,{className:"w-5 h-5"})," Crear Nuevo Proyecto"]})]})]}),e.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:i.jsx(vg,{className:"w-12 h-12 text-slate-400"})}),i.jsx("h3",{className:"text-xl font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"No hay proyectos creados"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-500 mb-6",children:"Comience creando su primer proyecto interdisciplinario"}),i.jsxs("button",{type:"button",onClick:j,className:"inline-flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(Co,{className:"w-4 h-4"})," Crear Primer Proyecto"]})]}):i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map(S=>i.jsxs("div",{className:"group bg-slate-50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 hover:border-blue-300 dark:hover:border-blue-600",children:[i.jsx("div",{className:"flex justify-between items-start mb-4",children:i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-slate-200 mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:S.nombreProyecto}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsx(C_,{className:"w-4 h-4"}),i.jsxs("span",{children:["Cursos: ",S.cursos.join(", ")]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsx(_o,{className:"w-4 h-4"}),i.jsxs("span",{children:["Profesores: ",E(S.docentesResponsables)]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsx(ol,{className:"w-4 h-4"}),i.jsxs("span",{children:["Asignaturas: ",S.asignaturas.length]})]})]})]})}),!!S.descripcionProyecto&&i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4 line-clamp-3",children:S.descripcionProyecto}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{type:"button",onClick:()=>m(S),className:"inline-flex items-center gap-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm transition-colors",title:"Ver entregas de estudiantes",children:[i.jsx(sR,{className:"w-4 h-4"})," Entregas"]}),i.jsxs("button",{type:"button",onClick:()=>I(S),disabled:d===S.id,className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm transition-colors disabled:opacity-50",title:"Exportar a PDF",children:[d===S.id?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):i.jsx(Eh,{className:"w-4 h-4"}),"PDF"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:()=>_(S),className:"p-2 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-lg transition-colors",title:"Editar proyecto",children:i.jsx(j_,{className:"w-4 h-4"})}),i.jsx("button",{type:"button",onClick:()=>T(S.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-lg transition-colors",title:"Eliminar proyecto",children:i.jsx(Is,{className:"w-4 h-4"})})]})]})]},S.id))})]}),e.length>0&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(B2e,{className:"w-5 h-5 text-slate-600"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Cronograma (Gantt)"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Proyecto:"}),i.jsxs("select",{value:g,onChange:S=>x(S.target.value),className:"p-2 border border-slate-300 rounded-lg bg-white dark:bg-slate-700 text-sm",children:[i.jsx("option",{value:"all",children:"Todos"}),e.map(S=>i.jsx("option",{value:S.id,children:S.nombreProyecto},S.id))]})]})]}),i.jsx("div",{id:"gantt-container-vertical",children:i.jsx(SZe,{planificaciones:v,onActivityUpdate:y})})]})]})},Bb="panol_maquinas",kE="panol_registros",IZe=e=>{const t=Vt(pt(lt,Bb),cr("nombre","asc"));return hr(t,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));e(n)})},FZe=e=>{const t=Vt(pt(lt,kE),cr("fecha","desc"));return hr(t,r=>{const n=r.docs.map(a=>{const s=a.data();return{id:a.id,fecha:s.fecha,curso:s.curso,profesorResponsable:s.profesorResponsable,maquinaId:s.maquinaId,totalHoras:s.totalHoras,observaciones:s.observaciones||""}});e(n)})},OZe=async e=>(await an(pt(lt,Bb),{...e,createdAt:za(),updatedAt:za()})).id,DZe=async(e,t)=>{await Bl(rr(lt,Bb,e),{...t,updatedAt:za()})},PZe=async e=>{const t=Vt(pt(lt,kE),wr("maquinaId","==",e));if(!(await mn(t)).empty)throw new Error("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");await ka(rr(lt,Bb,e))},RZe=async e=>(await an(pt(lt,kE),{...e,createdAt:za(),updatedAt:za()})).id,LZe=async(e,t)=>{await Bl(rr(lt,kE,e),{...t,updatedAt:za()})},MZe=async e=>{await ka(rr(lt,kE,e))},UZe=async()=>{if(!(await mn(pt(lt,Bb))).empty)return;const t=Ug(lt);[{nombre:"Torno",especialidad:"Industrial"},{nombre:"Fresadora",especialidad:"Industrial"},{nombre:"Rectificadora",especialidad:"Industrial"},{nombre:"Soldadora MIG",especialidad:"Industrial"},{nombre:"Soldadora TIG",especialidad:"Industrial"},{nombre:"Torno CNC",especialidad:"Industrial"},{nombre:"Elevador",especialidad:"Automotriz"},{nombre:"Compresor",especialidad:"Automotriz"},{nombre:"Rectificadora",especialidad:"Automotriz"},{nombre:"Maqueta de motor",especialidad:"Automotriz"},{nombre:"Maqueta hidráulica",especialidad:"Automotriz"}].forEach(n=>{const a=rr(pt(lt,Bb));t.set(a,{...n,createdAt:za(),updatedAt:za()})}),await t.commit()},QZe=()=>{var Z;const[e,t]=C.useState([]),[r,n]=C.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,o]=C.useState(a),[l,c]=C.useState(null),u={nombre:"",especialidad:"Industrial"},[d,f]=C.useState(u),[h,m]=C.useState(null),[g,x]=C.useState({maquinaId:"",curso:"",profesor:"",fecha:""});C.useEffect(()=>{UZe().catch(console.error);const V=IZe(t),q=FZe(n);return()=>{V&&V(),q&&q()}},[]);const v=async V=>{if(V.preventDefault(),!!d.nombre.trim())try{h?await DZe(h.id,{...d}):await OZe({...d}),f(u),m(null)}catch(q){alert(q.message||"Error al guardar máquina")}},y=C.useCallback(async V=>{try{await PZe(V)}catch(q){alert(q.message||"Error al eliminar máquina")}},[]),w=async V=>{V.preventDefault();const q=l||s;if(!q.curso||!q.profesorResponsable.trim()||!q.maquinaId||Number(q.totalHoras)<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}try{if(l){const{id:G,...K}=l;await LZe(G,K)}else await RZe({...s});o(a),c(null)}catch(G){alert(G.message||"Error al guardar registro")}},_=C.useCallback(async V=>{try{await MZe(V)}catch(q){alert(q.message||"Error al eliminar registro")}},[]),T=C.useMemo(()=>r.filter(V=>(g.maquinaId===""||V.maquinaId===g.maquinaId)&&(g.curso===""||V.curso===g.curso)&&(g.profesor===""||V.profesorResponsable.toLowerCase().includes(g.profesor.toLowerCase()))&&(g.fecha===""||V.fecha===g.fecha)).sort((V,q)=>new Date(q.fecha).getTime()-new Date(V.fecha).getTime()),[r,g]),j=C.useMemo(()=>new Map(e.map(V=>[V.id,V])),[e]),I=C.useMemo(()=>T.reduce((V,q)=>V+(Number(q.totalHoras)||0),0),[T]),E=C.useMemo(()=>{const V=new Map;T.forEach(G=>{var ee;const K=((ee=j.get(G.maquinaId))==null?void 0:ee.nombre)||"N/A";V.set(K,(V.get(K)||0)+(Number(G.totalHoras)||0))});const q=Array.from(V.entries()).map(([G,K])=>({maquina:G,horas:Number(K.toFixed(2))}));return q.sort((G,K)=>K.horas-G.horas),q},[T,j]),S=()=>{const V=T.map(K=>{var ee,W;return{Fecha:K.fecha,Curso:K.curso,Profesor:K.profesorResponsable,Máquina:((ee=j.get(K.maquinaId))==null?void 0:ee.nombre)||"N/A",Especialidad:((W=j.get(K.maquinaId))==null?void 0:W.especialidad)||"N/A","Total Horas":K.totalHoras,Observaciones:K.observaciones}}),q=Ti.json_to_sheet(V),G=Ti.book_new();Ti.book_append_sheet(G,q,"RegistrosPañol"),lE(G,"Registros_Pañol.xlsx")},B=()=>{const V=new vr;xi(V,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:T.map(q=>{var G,K;return[q.fecha,q.curso,q.profesorResponsable,((G=j.get(q.maquinaId))==null?void 0:G.nombre)||"N/A",((K=j.get(q.maquinaId))==null?void 0:K.especialidad)||"N/A",q.totalHoras,q.observaciones]}),margin:{top:24,right:10,bottom:20,left:10},didDrawPage:q=>{V.setFontSize(12),V.setFont("helvetica","bold"),V.text("LICEO INDUSTRIAL DE RECOLETA",q.settings.margin.left,14),V.setFontSize(10),V.setFont("helvetica","normal"),V.text("Informe de Registros de Pañol",q.settings.margin.left,20)}}),V.save("Registros_Pañol.pdf")},M="w-full border border-slate-300 rounded-xl px-3 py-2 shadow-sm focus:ring-2 focus:ring-indigo-500/30 focus:border-indigo-400 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-400",R=(V,q)=>i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${q}`,children:V}),k=({icon:V,label:q,value:G,accent:K="from-indigo-500 to-sky-500"})=>i.jsxs("div",{className:"relative rounded-2xl p-4 shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[i.jsx("div",{className:`absolute inset-0 bg-gradient-to-tr ${K} opacity-10`}),i.jsxs("div",{className:"relative flex items-center gap-3 bg-white/70 dark:bg-slate-800/60 rounded-xl p-3",children:[i.jsx("div",{className:"p-2 rounded-xl bg-white dark:bg-slate-700 shadow",children:V}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:q}),i.jsx("div",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:G})]})]})]}),D=({title:V,icon:q,children:G,right:K,accent:ee="from-indigo-600/10 via-sky-500/10 to-emerald-500/10"})=>i.jsxs("section",{className:"rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 relative overflow-hidden",children:[i.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${ee}`}),i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"flex items-center gap-2 text-lg font-bold text-slate-800 dark:text-slate-100",children:[q," ",i.jsx("span",{children:V})]}),K]}),G]})]}),L=()=>{const V=l||s,q=l?c:o;return i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4 items-end",children:[i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(ic,{size:16})," Fecha"]}),i.jsx("input",{name:"fecha",type:"date",value:V.fecha,onChange:G=>q({...V,fecha:G.target.value}),className:M,required:!0})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(_o,{size:16})," Curso"]}),i.jsxs("select",{name:"curso",value:V.curso,onChange:G=>q({...V,curso:G.target.value}),className:M,required:!0,children:[i.jsx("option",{value:"",children:"Curso"}),os.map(G=>i.jsx("option",{children:G},G))]})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(ol,{size:16})," Profesor"]}),i.jsxs("select",{name:"profesorResponsable",value:V.profesorResponsable,onChange:G=>q({...V,profesorResponsable:G.target.value}),className:M,required:!0,children:[i.jsx("option",{value:"",children:"Profesor Responsable"}),AF.map(G=>i.jsx("option",{value:G,children:G},G))]})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(b5,{size:16})," Máquina"]}),i.jsxs("select",{name:"maquinaId",value:V.maquinaId,onChange:G=>q({...V,maquinaId:G.target.value}),className:M,required:!0,children:[i.jsx("option",{value:"",children:"Máquina"}),e.map(G=>i.jsx("option",{value:G.id,children:G.nombre},G.id))]})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(__,{size:16})," Total de Horas"]}),i.jsx("input",{name:"totalHoras",type:"number",value:V.totalHoras,onChange:G=>q({...V,totalHoras:Number(G.target.value)}),className:M,required:!0,min:.5,step:.5})]}),i.jsxs("div",{className:"lg:col-span-6",children:[i.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),i.jsx("textarea",{name:"observaciones",value:V.observaciones,onChange:G=>q({...V,observaciones:G.target.value}),placeholder:"Observaciones...",className:M+" min-h-[40px]",rows:2})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[l&&i.jsxs("button",{type:"button",onClick:()=>c(null),className:"inline-flex items-center gap-2 bg-white text-slate-700 border border-slate-200 dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700 font-medium py-2 px-4 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[i.jsx(Nh,{size:16})," Cancelar"]}),i.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-4 rounded-xl hover:bg-indigo-500 transition",children:[l?i.jsx(Kc,{size:16}):i.jsx(Co,{size:16}),l?"Actualizar":"Registrar"]})]})]})};return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("header",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 via-sky-500 to-emerald-500",children:"Pañol: Registro de Uso de Máquinas"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Administra máquinas, registra usos y exporta informes (Firestore)."})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:S,className:"inline-flex items-center gap-2 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 border border-slate-200 dark:border-slate-800 px-3 py-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",title:"Exportar a Excel",children:[i.jsx(iR,{size:18})," Excel"]}),i.jsxs("button",{onClick:B,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-2 rounded-xl hover:bg-emerald-500 transition",title:"Exportar a PDF",children:[i.jsx(Md,{size:18})," PDF"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(k,{icon:i.jsx(b5,{className:"w-5 h-5 text-indigo-600"}),label:"Máquinas registradas",value:e.length,accent:"from-indigo-500 to-sky-500"}),i.jsx(k,{icon:i.jsx(Md,{className:"w-5 h-5 text-sky-600"}),label:"Registros",value:T.length,accent:"from-sky-500 to-cyan-500"}),i.jsx(k,{icon:i.jsx(__,{className:"w-5 h-5 text-emerald-600"}),label:"Horas totales (filtradas)",value:I.toFixed(1),accent:"from-emerald-500 to-lime-500"}),i.jsx(k,{icon:i.jsx(ic,{className:"w-5 h-5 text-amber-600"}),label:"Última actualización",value:(Z=r[0])!=null&&Z.fecha?new Date(r[0].fecha).toLocaleDateString():"—",accent:"from-amber-500 to-rose-400"})]}),i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[i.jsx("div",{className:"xl:col-span-3",children:i.jsx(D,{title:l?`Editando registro #${l.id.slice(0,4)}`:"Nuevo registro de uso",icon:i.jsx(n2e,{size:18}),children:i.jsx(L,{})})}),i.jsx("div",{className:"xl:col-span-2 order-1 xl:order-none",children:i.jsx(D,{title:"Uso por máquina (horas)",icon:i.jsx(zc,{size:18}),accent:"from-indigo-600/10 via-sky-500/10 to-amber-500/10",right:i.jsx("div",{className:"flex gap-2 items-center",children:R(`${E.length} máquinas`,"bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200")}),children:i.jsx("div",{className:"h-[320px] w-full",children:i.jsx(ih,{width:"100%",height:"100%",children:i.jsxs(N2,{data:E,margin:{top:8,right:16,bottom:8,left:0},children:[i.jsx(E2,{strokeDasharray:"3 3"}),i.jsx(Bg,{dataKey:"maquina",tick:{fontSize:12},interval:0,angle:0,height:50}),i.jsx(Tg,{}),i.jsx(sh,{}),i.jsx(n1,{}),i.jsx(_b,{dataKey:"horas",name:"Horas",fill:"#6366F1",radius:[6,6,0,0]})]})})})})}),i.jsx("div",{className:"xl:col-span-1 order-2 xl:order-none",children:i.jsxs(D,{title:"Administrar máquinas",icon:i.jsx(b5,{size:18}),accent:"from-emerald-600/10 via-sky-500/10 to-indigo-600/10",children:[i.jsxs("form",{onSubmit:v,className:"grid grid-cols-1 md:grid-cols-5 gap-2 mb-4",children:[i.jsx("input",{value:d.nombre,onChange:V=>f({...d,nombre:V.target.value}),placeholder:"Nombre máquina",className:M+" md:col-span-2"}),i.jsxs("select",{value:d.especialidad,onChange:V=>f({...d,especialidad:V.target.value}),className:M+" md:col-span-2",children:[i.jsx("option",{value:"Industrial",children:"Industrial"}),i.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),i.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-3 rounded-xl hover:bg-indigo-500 transition md:col-span-1",children:[h?i.jsx(Kc,{size:16}):i.jsx(Co,{size:16}),h?"Guardar":"Agregar"]})]}),i.jsx("ul",{className:"space-y-2 max-h-72 overflow-y-auto pr-1",children:e.map(V=>i.jsxs("li",{className:"flex justify-between items-center bg-gradient-to-r from-slate-50 to-white dark:from-slate-800/60 dark:to-slate-800/30 border border-slate-200 dark:border-slate-700 p-3 rounded-xl",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-100",children:V.nombre}),i.jsx("div",{className:"text-xs",children:V.especialidad==="Industrial"?R("Industrial","bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200"):R("Automotriz","bg-emerald-50 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200")})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>{m(V),f(V)},className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Editar",children:i.jsx(k_,{size:16,className:"text-blue-600"})}),i.jsx("button",{onClick:()=>y(V.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Eliminar",children:i.jsx(Is,{size:16,className:"text-red-600"})})]})]},V.id))})]})}),i.jsx("div",{className:"xl:col-span-2 order-3",children:i.jsxs(D,{title:"Historial de uso",icon:i.jsx(Md,{size:18}),accent:"from-rose-500/10 via-amber-400/10 to-indigo-500/10",right:i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(Kk,{size:16,className:"text-slate-600"})}),children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[i.jsx("input",{type:"date",value:g.fecha,onChange:V=>x({...g,fecha:V.target.value}),className:M,placeholder:"Fecha"}),i.jsxs("select",{value:g.curso,onChange:V=>x({...g,curso:V.target.value}),className:M,children:[i.jsx("option",{value:"",children:"Todos los Cursos"}),os.map(V=>i.jsx("option",{children:V},V))]}),i.jsxs("select",{value:g.maquinaId,onChange:V=>x({...g,maquinaId:V.target.value}),className:M,children:[i.jsx("option",{value:"",children:"Todas las Máquinas"}),e.map(V=>i.jsx("option",{value:V.id,children:V.nombre},V.id))]}),i.jsxs("div",{className:"relative",children:[i.jsx(Xb,{size:16,className:"absolute left-3 top-2.5 text-slate-400"}),i.jsx("input",{value:g.profesor,onChange:V=>x({...g,profesor:V.target.value}),placeholder:"Buscar profesor...",className:M+" pl-9"})]})]}),i.jsx("div",{className:"max-h-[420px] overflow-y-auto border border-slate-200 dark:border-slate-800 rounded-xl",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Fecha"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Máquina"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Profesor / Curso"}),i.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Total Horas"}),i.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-600 uppercase",children:"Acciones"})]})}),i.jsxs("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-800",children:[T.map(V=>{var q;return i.jsxs("tr",{className:"hover:bg-slate-50/60 dark:hover:bg-slate-800/50 transition",children:[i.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:V.fecha}),i.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((q=j.get(V.maquinaId))==null?void 0:q.nombre)||"N/A"}),i.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[V.profesorResponsable," ",i.jsxs("span",{className:"text-slate-400",children:["(",V.curso,")"]})]}),i.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:V.totalHoras}),i.jsxs("td",{className:"px-3 py-2 text-center",children:[i.jsx("button",{onClick:()=>c(V),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Editar",children:i.jsx(k_,{size:16,className:"text-blue-600"})}),i.jsx("button",{onClick:()=>_(V.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Eliminar",children:i.jsx(Is,{size:16,className:"text-red-600"})})]})]},V.id)}),T.length===0&&i.jsx("tr",{children:i.jsx("td",{className:"px-3 py-6 text-center text-sm text-slate-500",colSpan:5,children:"No hay registros que coincidan con los filtros."})})]})]})})]})})]})]})};function Tl(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=Tl(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}const HZe={},lW=e=>{let t;const r=new Set,n=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const m=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(g=>g(t,m))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(HZe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,c);return c},VZe=e=>e?lW(e):lW,{useDebugValue:zZe}=at,{useSyncExternalStoreWithSelector:$Ze}=fOe,GZe=e=>e;function jce(e,t=GZe,r){const n=$Ze(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return zZe(n),n}const cW=(e,t)=>{const r=VZe(e),n=(a,s=t)=>jce(r,a,s);return Object.assign(n,r),n},qZe=(e,t)=>e?cW(e,t):cW;function cl(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var KZe={value:()=>{}};function ej(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new j5(r)}function j5(e){this._=e}function WZe(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}j5.prototype=ej.prototype={constructor:j5,on:function(e,t){var r=this._,n=WZe(e+"",r),a,s=-1,o=n.length;if(arguments.length<2){for(;++s<o;)if((a=(e=n[s]).type)&&(a=XZe(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(a=(e=n[s]).type)r[a]=uW(r[a],e.name,t);else if(t==null)for(a in r)r[a]=uW(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new j5(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function XZe(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function uW(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=KZe,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var HO="http://www.w3.org/1999/xhtml";const dW={svg:"http://www.w3.org/2000/svg",xhtml:HO,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function tj(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),dW.hasOwnProperty(t)?{space:dW[t],local:e}:e}function YZe(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===HO&&t.documentElement.namespaceURI===HO?t.createElement(e):t.createElementNS(r,e)}}function JZe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Bce(e){var t=tj(e);return(t.local?JZe:YZe)(t)}function ZZe(){}function CM(e){return e==null?ZZe:function(){return this.querySelector(e)}}function eet(e){typeof e!="function"&&(e=CM(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],o=s.length,l=n[a]=new Array(o),c,u,d=0;d<o;++d)(c=s[d])&&(u=e.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new eu(n,this._parents)}function tet(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ret(){return[]}function Tce(e){return e==null?ret:function(){return this.querySelectorAll(e)}}function net(e){return function(){return tet(e.apply(this,arguments))}}function aet(e){typeof e=="function"?e=net(e):e=Tce(e);for(var t=this._groups,r=t.length,n=[],a=[],s=0;s<r;++s)for(var o=t[s],l=o.length,c,u=0;u<l;++u)(c=o[u])&&(n.push(e.call(c,c.__data__,u,o)),a.push(c));return new eu(n,a)}function Ice(e){return function(){return this.matches(e)}}function Fce(e){return function(t){return t.matches(e)}}var set=Array.prototype.find;function iet(e){return function(){return set.call(this.children,e)}}function oet(){return this.firstElementChild}function cet(e){return this.select(e==null?oet:iet(typeof e=="function"?e:Fce(e)))}var uet=Array.prototype.filter;function det(){return Array.from(this.children)}function fet(e){return function(){return uet.call(this.children,e)}}function Aet(e){return this.selectAll(e==null?det:fet(typeof e=="function"?e:Fce(e)))}function het(e){typeof e!="function"&&(e=Ice(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],o=s.length,l=n[a]=[],c,u=0;u<o;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&l.push(c);return new eu(n,this._parents)}function Oce(e){return new Array(e.length)}function met(){return new eu(this._enter||this._groups.map(Oce),this._parents)}function PS(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}PS.prototype={constructor:PS,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function pet(e){return function(){return e}}function get(e,t,r,n,a,s){for(var o=0,l,c=t.length,u=s.length;o<u;++o)(l=t[o])?(l.__data__=s[o],n[o]=l):r[o]=new PS(e,s[o]);for(;o<c;++o)(l=t[o])&&(a[o]=l)}function xet(e,t,r,n,a,s,o){var l,c,u=new Map,d=t.length,f=s.length,h=new Array(d),m;for(l=0;l<d;++l)(c=t[l])&&(h[l]=m=o.call(c,c.__data__,l,t)+"",u.has(m)?a[l]=c:u.set(m,c));for(l=0;l<f;++l)m=o.call(e,s[l],l,s)+"",(c=u.get(m))?(n[l]=c,c.__data__=s[l],u.delete(m)):r[l]=new PS(e,s[l]);for(l=0;l<d;++l)(c=t[l])&&u.get(h[l])===c&&(a[l]=c)}function vet(e){return e.__data__}function bet(e,t){if(!arguments.length)return Array.from(this,vet);var r=t?xet:get,n=this._parents,a=this._groups;typeof e!="function"&&(e=pet(e));for(var s=a.length,o=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var d=n[u],f=a[u],h=f.length,m=yet(e.call(d,d&&d.__data__,u,n)),g=m.length,x=l[u]=new Array(g),v=o[u]=new Array(g),y=c[u]=new Array(h);r(d,f,x,v,y,m,t);for(var w=0,_=0,T,j;w<g;++w)if(T=x[w]){for(w>=_&&(_=w+1);!(j=v[_])&&++_<g;);T._next=j||null}}return o=new eu(o,n),o._enter=l,o._exit=c,o}function yet(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function wet(){return new eu(this._exit||this._groups.map(Oce),this._parents)}function Eet(e,t,r){var n=this.enter(),a=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?s.remove():r(s),n&&a?n.merge(a).order():a}function Net(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,s=n.length,o=Math.min(a,s),l=new Array(a),c=0;c<o;++c)for(var u=r[c],d=n[c],f=u.length,h=l[c]=new Array(f),m,g=0;g<f;++g)(m=u[g]||d[g])&&(h[g]=m);for(;c<a;++c)l[c]=r[c];return new eu(l,this._parents)}function Cet(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,s=n[a],o;--a>=0;)(o=n[a])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function _et(e){e||(e=ket);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var r=this._groups,n=r.length,a=new Array(n),s=0;s<n;++s){for(var o=r[s],l=o.length,c=a[s]=new Array(l),u,d=0;d<l;++d)(u=o[d])&&(c[d]=u);c.sort(t)}return new eu(a,this._parents).order()}function ket(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function jet(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Bet(){return Array.from(this)}function Tet(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length;a<s;++a){var o=n[a];if(o)return o}return null}function Iet(){let e=0;for(const t of this)++e;return e}function Fet(){return!this.node()}function Oet(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],s=0,o=a.length,l;s<o;++s)(l=a[s])&&e.call(l,l.__data__,s,a);return this}function Det(e){return function(){this.removeAttribute(e)}}function Pet(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ret(e,t){return function(){this.setAttribute(e,t)}}function Let(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Met(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function Uet(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function Qet(e,t){var r=tj(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?Pet:Det:typeof t=="function"?r.local?Uet:Met:r.local?Let:Ret)(r,t))}function Dce(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Het(e){return function(){this.style.removeProperty(e)}}function Vet(e,t,r){return function(){this.style.setProperty(e,t,r)}}function zet(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function $et(e,t,r){return arguments.length>1?this.each((t==null?Het:typeof t=="function"?zet:Vet)(e,t,r??"")):Tb(this.node(),e)}function Tb(e,t){return e.style.getPropertyValue(t)||Dce(e).getComputedStyle(e,null).getPropertyValue(t)}function Get(e){return function(){delete this[e]}}function qet(e,t){return function(){this[e]=t}}function Ket(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Wet(e,t){return arguments.length>1?this.each((t==null?Get:typeof t=="function"?Ket:qet)(e,t)):this.node()[e]}function Pce(e){return e.trim().split(/^|\s+/)}function _M(e){return e.classList||new Rce(e)}function Rce(e){this._node=e,this._names=Pce(e.getAttribute("class")||"")}Rce.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Lce(e,t){for(var r=_M(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function Mce(e,t){for(var r=_M(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function Xet(e){return function(){Lce(this,e)}}function Yet(e){return function(){Mce(this,e)}}function Jet(e,t){return function(){(t.apply(this,arguments)?Lce:Mce)(this,e)}}function Zet(e,t){var r=Pce(e+"");if(arguments.length<2){for(var n=_M(this.node()),a=-1,s=r.length;++a<s;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?Jet:t?Xet:Yet)(r,t))}function ett(){this.textContent=""}function ttt(e){return function(){this.textContent=e}}function rtt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function ntt(e){return arguments.length?this.each(e==null?ett:(typeof e=="function"?rtt:ttt)(e)):this.node().textContent}function att(){this.innerHTML=""}function stt(e){return function(){this.innerHTML=e}}function itt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ott(e){return arguments.length?this.each(e==null?att:(typeof e=="function"?itt:stt)(e)):this.node().innerHTML}function ltt(){this.nextSibling&&this.parentNode.appendChild(this)}function ctt(){return this.each(ltt)}function utt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dtt(){return this.each(utt)}function ftt(e){var t=typeof e=="function"?e:Bce(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Att(){return null}function htt(e,t){var r=typeof e=="function"?e:Bce(e),n=t==null?Att:typeof t=="function"?t:CM(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function mtt(){var e=this.parentNode;e&&e.removeChild(this)}function ptt(){return this.each(mtt)}function gtt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function xtt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function vtt(e){return this.select(e?xtt:gtt)}function btt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ytt(e){return function(t){e.call(this,t,this.__data__)}}function wtt(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function Ett(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,s;r<a;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function Ntt(e,t,r){return function(){var n=this.__on,a,s=ytt(t);if(n){for(var o=0,l=n.length;o<l;++o)if((a=n[o]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=t;return}}this.addEventListener(e.type,s,r),a={type:e.type,name:e.name,value:t,listener:s,options:r},n?n.push(a):this.__on=[a]}}function Ctt(e,t,r){var n=wtt(e+""),a,s=n.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(a=0,d=l[c];a<s;++a)if((o=n[a]).type===d.type&&o.name===d.name)return d.value}return}for(l=t?Ntt:Ett,a=0;a<s;++a)this.each(l(n[a],t,r));return this}function Uce(e,t,r){var n=Dce(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function _tt(e,t){return function(){return Uce(this,e,t)}}function Stt(e,t){return function(){return Uce(this,e,t.apply(this,arguments))}}function ktt(e,t){return this.each((typeof t=="function"?Stt:_tt)(e,t))}function*jtt(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length,o;a<s;++a)(o=n[a])&&(yield o)}var Qce=[null];function eu(e,t){this._groups=e,this._parents=t}function jE(){return new eu([[document.documentElement]],Qce)}function Btt(){return this}eu.prototype=jE.prototype={constructor:eu,select:eet,selectAll:aet,selectChild:cet,selectChildren:Aet,filter:het,data:bet,enter:met,exit:wet,join:Eet,merge:Net,selection:Btt,order:Cet,sort:_et,call:jet,nodes:Bet,node:Tet,size:Iet,empty:Fet,each:Oet,attr:Qet,style:$et,property:Wet,classed:Zet,text:ntt,html:ott,raise:ctt,lower:dtt,append:ftt,insert:htt,remove:ptt,clone:vtt,datum:btt,on:Ctt,dispatch:ktt,[Symbol.iterator]:jtt};function Mu(e){return typeof e=="string"?new eu([[document.querySelector(e)]],[document.documentElement]):new eu([[e]],Qce)}function Ttt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Lf(e,t){if(e=Ttt(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const Itt={passive:!1},j2={capture:!0,passive:!1};function MI(e){e.stopImmediatePropagation()}function Gv(e){e.preventDefault(),e.stopImmediatePropagation()}function Hce(e){var t=e.document.documentElement,r=Mu(e).on("dragstart.drag",Gv,j2);"onselectstart"in t?r.on("selectstart.drag",Gv,j2):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Vce(e,t){var r=e.document.documentElement,n=Mu(e).on("dragstart.drag",null);t&&(n.on("click.drag",Gv,j2),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const _C=e=>()=>e;function VO(e,{sourceEvent:t,subject:r,target:n,identifier:a,active:s,x:o,y:l,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}VO.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ftt(e){return!e.ctrlKey&&!e.button}function Ott(){return this.parentNode}function Dtt(e,t){return t??{x:e.x,y:e.y}}function Ptt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Rtt(){var e=Ftt,t=Ott,r=Dtt,n=Ptt,a={},s=ej("start","drag","end"),o=0,l,c,u,d,f=0;function h(T){T.on("mousedown.drag",m).filter(n).on("touchstart.drag",v).on("touchmove.drag",y,Itt).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(T,j){if(!(d||!e.call(this,T,j))){var I=_(this,t.call(this,T,j),T,j,"mouse");I&&(Mu(T.view).on("mousemove.drag",g,j2).on("mouseup.drag",x,j2),Hce(T.view),MI(T),u=!1,l=T.clientX,c=T.clientY,I("start",T))}}function g(T){if(Gv(T),!u){var j=T.clientX-l,I=T.clientY-c;u=j*j+I*I>f}a.mouse("drag",T)}function x(T){Mu(T.view).on("mousemove.drag mouseup.drag",null),Vce(T.view,u),Gv(T),a.mouse("end",T)}function v(T,j){if(e.call(this,T,j)){var I=T.changedTouches,E=t.call(this,T,j),S=I.length,B,M;for(B=0;B<S;++B)(M=_(this,E,T,j,I[B].identifier,I[B]))&&(MI(T),M("start",T,I[B]))}}function y(T){var j=T.changedTouches,I=j.length,E,S;for(E=0;E<I;++E)(S=a[j[E].identifier])&&(Gv(T),S("drag",T,j[E]))}function w(T){var j=T.changedTouches,I=j.length,E,S;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),E=0;E<I;++E)(S=a[j[E].identifier])&&(MI(T),S("end",T,j[E]))}function _(T,j,I,E,S,B){var M=s.copy(),R=Lf(B||I,j),k,D,L;if((L=r.call(T,new VO("beforestart",{sourceEvent:I,target:h,identifier:S,active:o,x:R[0],y:R[1],dx:0,dy:0,dispatch:M}),E))!=null)return k=L.x-R[0]||0,D=L.y-R[1]||0,function Z(V,q,G){var K=R,ee;switch(V){case"start":a[S]=Z,ee=o++;break;case"end":delete a[S],--o;case"drag":R=Lf(G||q,j),ee=o;break}M.call(V,T,new VO(V,{sourceEvent:q,subject:L,target:h,identifier:S,active:ee,x:R[0]+k,y:R[1]+D,dx:R[0]-K[0],dy:R[1]-K[1],dispatch:M}),E)}}return h.filter=function(T){return arguments.length?(e=typeof T=="function"?T:_C(!!T),h):e},h.container=function(T){return arguments.length?(t=typeof T=="function"?T:_C(T),h):t},h.subject=function(T){return arguments.length?(r=typeof T=="function"?T:_C(T),h):r},h.touchable=function(T){return arguments.length?(n=typeof T=="function"?T:_C(!!T),h):n},h.on=function(){var T=s.on.apply(s,arguments);return T===s?h:T},h.clickDistance=function(T){return arguments.length?(f=(T=+T)*T,h):Math.sqrt(f)},h}var Ib=0,Yy=0,wy=0,zce=1e3,RS,Jy,LS=0,Fg=0,rj=0,B2=typeof performance=="object"&&performance.now?performance:Date,$ce=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function SM(){return Fg||($ce(Ltt),Fg=B2.now()+rj)}function Ltt(){Fg=0}function MS(){this._call=this._time=this._next=null}MS.prototype=Gce.prototype={constructor:MS,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?SM():+r)+(t==null?0:+t),!this._next&&Jy!==this&&(Jy?Jy._next=this:RS=this,Jy=this),this._call=e,this._time=r,zO()},stop:function(){this._call&&(this._call=null,this._time=1/0,zO())}};function Gce(e,t,r){var n=new MS;return n.restart(e,t,r),n}function Mtt(){SM(),++Ib;for(var e=RS,t;e;)(t=Fg-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ib}function fW(){Fg=(LS=B2.now())+rj,Ib=Yy=0;try{Mtt()}finally{Ib=0,Qtt(),Fg=0}}function Utt(){var e=B2.now(),t=e-LS;t>zce&&(rj-=t,LS=e)}function Qtt(){for(var e,t=RS,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:RS=r);Jy=e,zO(n)}function zO(e){if(!Ib){Yy&&(Yy=clearTimeout(Yy));var t=e-Fg;t>24?(e<1/0&&(Yy=setTimeout(fW,e-B2.now()-rj)),wy&&(wy=clearInterval(wy))):(wy||(LS=B2.now(),wy=setInterval(Utt,zce)),Ib=1,$ce(fW))}}function AW(e,t,r){var n=new MS;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var Htt=ej("start","end","cancel","interrupt"),Vtt=[],qce=0,hW=1,$O=2,B5=3,mW=4,GO=5,T5=6;function nj(e,t,r,n,a,s){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;ztt(e,r,{name:t,index:n,group:a,on:Htt,tween:Vtt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:qce})}function kM(e,t){var r=Yd(e,t);if(r.state>qce)throw new Error("too late; already scheduled");return r}function fA(e,t){var r=Yd(e,t);if(r.state>B5)throw new Error("too late; already running");return r}function Yd(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function ztt(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=Gce(s,0,r.time);function s(u){r.state=hW,r.timer.restart(o,r.delay,r.time),r.delay<=u&&o(u-r.delay)}function o(u){var d,f,h,m;if(r.state!==hW)return c();for(d in n)if(m=n[d],m.name===r.name){if(m.state===B5)return AW(o);m.state===mW?(m.state=T5,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete n[d]):+d<t&&(m.state=T5,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete n[d])}if(AW(function(){r.state===B5&&(r.state=mW,r.timer.restart(l,r.delay,r.time),l(u))}),r.state=$O,r.on.call("start",e,e.__data__,r.index,r.group),r.state===$O){for(r.state=B5,a=new Array(h=r.tween.length),d=0,f=-1;d<h;++d)(m=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(a[++f]=m);a.length=f+1}}function l(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=GO,1),f=-1,h=a.length;++f<h;)a[f].call(e,d);r.state===GO&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=T5,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function I5(e,t){var r=e.__transition,n,a,s=!0,o;if(r){t=t==null?null:t+"";for(o in r){if((n=r[o]).name!==t){s=!1;continue}a=n.state>$O&&n.state<GO,n.state=T5,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[o]}s&&delete e.__transition}}function $tt(e){return this.each(function(){I5(this,e)})}function Gtt(e,t){var r,n;return function(){var a=fA(this,e),s=a.tween;if(s!==r){n=r=s;for(var o=0,l=n.length;o<l;++o)if(n[o].name===t){n=n.slice(),n.splice(o,1);break}}a.tween=n}}function qtt(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var s=fA(this,e),o=s.tween;if(o!==n){a=(n=o).slice();for(var l={name:t,value:r},c=0,u=a.length;c<u;++c)if(a[c].name===t){a[c]=l;break}c===u&&a.push(l)}s.tween=a}}function Ktt(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Yd(this.node(),r).tween,a=0,s=n.length,o;a<s;++a)if((o=n[a]).name===e)return o.value;return null}return this.each((t==null?Gtt:qtt)(r,e,t))}function jM(e,t,r){var n=e._id;return e.each(function(){var a=fA(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return Yd(a,n).value[t]}}function Kce(e,t){var r;return(typeof t=="number"?kd:t instanceof kg?fS:(r=kg(t))?(t=r,fS):fse)(e,t)}function Wtt(e){return function(){this.removeAttribute(e)}}function Xtt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ytt(e,t,r){var n,a=r+"",s;return function(){var o=this.getAttribute(e);return o===a?null:o===n?s:s=t(n=o,r)}}function Jtt(e,t,r){var n,a=r+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===n?s:s=t(n=o,r)}}function Ztt(e,t,r){var n,a,s;return function(){var o,l=r(this),c;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=l+"",o===c?null:o===n&&c===a?s:(a=c,s=t(n=o,l)))}}function ert(e,t,r){var n,a,s;return function(){var o,l=r(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=l+"",o===c?null:o===n&&c===a?s:(a=c,s=t(n=o,l)))}}function trt(e,t){var r=tj(e),n=r==="transform"?D8e:Kce;return this.attrTween(e,typeof t=="function"?(r.local?ert:Ztt)(r,n,jM(this,"attr."+e,t)):t==null?(r.local?Xtt:Wtt)(r):(r.local?Jtt:Ytt)(r,n,t))}function rrt(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function nrt(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function art(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&nrt(e,s)),r}return a._value=t,a}function srt(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&rrt(e,s)),r}return a._value=t,a}function irt(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=tj(e);return this.tween(r,(n.local?art:srt)(n,t))}function ort(e,t){return function(){kM(this,e).delay=+t.apply(this,arguments)}}function lrt(e,t){return t=+t,function(){kM(this,e).delay=t}}function crt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ort:lrt)(t,e)):Yd(this.node(),t).delay}function urt(e,t){return function(){fA(this,e).duration=+t.apply(this,arguments)}}function drt(e,t){return t=+t,function(){fA(this,e).duration=t}}function frt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?urt:drt)(t,e)):Yd(this.node(),t).duration}function Art(e,t){if(typeof t!="function")throw new Error;return function(){fA(this,e).ease=t}}function hrt(e){var t=this._id;return arguments.length?this.each(Art(t,e)):Yd(this.node(),t).ease}function mrt(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;fA(this,e).ease=r}}function prt(e){if(typeof e!="function")throw new Error;return this.each(mrt(this._id,e))}function grt(e){typeof e!="function"&&(e=Ice(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],o=s.length,l=n[a]=[],c,u=0;u<o;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&l.push(c);return new Oh(n,this._parents,this._name,this._id)}function xrt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,s=Math.min(n,a),o=new Array(n),l=0;l<s;++l)for(var c=t[l],u=r[l],d=c.length,f=o[l]=new Array(d),h,m=0;m<d;++m)(h=c[m]||u[m])&&(f[m]=h);for(;l<n;++l)o[l]=t[l];return new Oh(o,this._parents,this._name,this._id)}function vrt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function brt(e,t,r){var n,a,s=vrt(t)?kM:fA;return function(){var o=s(this,e),l=o.on;l!==n&&(a=(n=l).copy()).on(t,r),o.on=a}}function yrt(e,t){var r=this._id;return arguments.length<2?Yd(this.node(),r).on.on(e):this.each(brt(r,e,t))}function wrt(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function Ert(){return this.on("end.remove",wrt(this._id))}function Nrt(e){var t=this._name,r=this._id;typeof e!="function"&&(e=CM(e));for(var n=this._groups,a=n.length,s=new Array(a),o=0;o<a;++o)for(var l=n[o],c=l.length,u=s[o]=new Array(c),d,f,h=0;h<c;++h)(d=l[h])&&(f=e.call(d,d.__data__,h,l))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,nj(u[h],t,r,h,u,Yd(d,r)));return new Oh(s,this._parents,t,r)}function Crt(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Tce(e));for(var n=this._groups,a=n.length,s=[],o=[],l=0;l<a;++l)for(var c=n[l],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var h=e.call(d,d.__data__,f,c),m,g=Yd(d,r),x=0,v=h.length;x<v;++x)(m=h[x])&&nj(m,t,r,x,h,g);s.push(h),o.push(d)}return new Oh(s,o,t,r)}var _rt=jE.prototype.constructor;function Srt(){return new _rt(this._groups,this._parents)}function krt(e,t){var r,n,a;return function(){var s=Tb(this,e),o=(this.style.removeProperty(e),Tb(this,e));return s===o?null:s===r&&o===n?a:a=t(r=s,n=o)}}function Wce(e){return function(){this.style.removeProperty(e)}}function jrt(e,t,r){var n,a=r+"",s;return function(){var o=Tb(this,e);return o===a?null:o===n?s:s=t(n=o,r)}}function Brt(e,t,r){var n,a,s;return function(){var o=Tb(this,e),l=r(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),Tb(this,e))),o===c?null:o===n&&c===a?s:(a=c,s=t(n=o,l))}}function Trt(e,t){var r,n,a,s="style."+t,o="end."+s,l;return function(){var c=fA(this,e),u=c.on,d=c.value[s]==null?l||(l=Wce(t)):void 0;(u!==r||a!==d)&&(n=(r=u).copy()).on(o,a=d),c.on=n}}function Irt(e,t,r){var n=(e+="")=="transform"?O8e:Kce;return t==null?this.styleTween(e,krt(e,n)).on("end.style."+e,Wce(e)):typeof t=="function"?this.styleTween(e,Brt(e,n,jM(this,"style."+e,t))).each(Trt(this._id,e)):this.styleTween(e,jrt(e,n,t),r).on("end.style."+e,null)}function Frt(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function Ort(e,t,r){var n,a;function s(){var o=t.apply(this,arguments);return o!==a&&(n=(a=o)&&Frt(e,o,r)),n}return s._value=t,s}function Drt(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Ort(e,t,r??""))}function Prt(e){return function(){this.textContent=e}}function Rrt(e){return function(){var t=e(this);this.textContent=t??""}}function Lrt(e){return this.tween("text",typeof e=="function"?Rrt(jM(this,"text",e)):Prt(e==null?"":e+""))}function Mrt(e){return function(t){this.textContent=e.call(this,t)}}function Urt(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&Mrt(a)),t}return n._value=e,n}function Qrt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Urt(e))}function Hrt(){for(var e=this._name,t=this._id,r=Xce(),n=this._groups,a=n.length,s=0;s<a;++s)for(var o=n[s],l=o.length,c,u=0;u<l;++u)if(c=o[u]){var d=Yd(c,t);nj(c,e,r,u,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Oh(n,this._parents,e,r)}function Vrt(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(s,o){var l={value:o},c={value:function(){--a===0&&s()}};r.each(function(){var u=fA(this,n),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),u.on=t}),a===0&&s()})}var zrt=0;function Oh(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function Xce(){return++zrt}var $A=jE.prototype;Oh.prototype={constructor:Oh,select:Nrt,selectAll:Crt,selectChild:$A.selectChild,selectChildren:$A.selectChildren,filter:grt,merge:xrt,selection:Srt,transition:Hrt,call:$A.call,nodes:$A.nodes,node:$A.node,size:$A.size,empty:$A.empty,each:$A.each,on:yrt,attr:trt,attrTween:irt,style:Irt,styleTween:Drt,text:Lrt,textTween:Qrt,remove:Ert,tween:Ktt,delay:crt,duration:frt,ease:hrt,easeVarying:prt,end:Vrt,[Symbol.iterator]:$A[Symbol.iterator]};function $rt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Grt={time:null,delay:0,duration:250,ease:$rt};function qrt(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function Krt(e){var t,r;e instanceof Oh?(t=e._id,e=e._name):(t=Xce(),(r=Grt).time=SM(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var o=n[s],l=o.length,c,u=0;u<l;++u)(c=o[u])&&nj(c,e,t,u,o,r||qrt(c,t));return new Oh(n,this._parents,e,t)}jE.prototype.interrupt=$tt;jE.prototype.transition=Krt;const SC=e=>()=>e;function Wrt(e,{sourceEvent:t,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function lh(e,t,r){this.k=e,this.x=t,this.y=r}lh.prototype={constructor:lh,scale:function(e){return e===1?this:new lh(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new lh(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var hm=new lh(1,0,0);lh.prototype;function UI(e){e.stopImmediatePropagation()}function Ey(e){e.preventDefault(),e.stopImmediatePropagation()}function Xrt(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Yrt(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function pW(){return this.__zoom||hm}function Jrt(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Zrt(){return navigator.maxTouchPoints||"ontouchstart"in this}function ent(e,t,r){var n=e.invertX(t[0][0])-r[0][0],a=e.invertX(t[1][0])-r[1][0],s=e.invertY(t[0][1])-r[0][1],o=e.invertY(t[1][1])-r[1][1];return e.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function tnt(){var e=Xrt,t=Yrt,r=ent,n=Jrt,a=Zrt,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,c=M8e,u=ej("start","zoom","end"),d,f,h,m=500,g=150,x=0,v=10;function y(L){L.property("__zoom",pW).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",M).filter(a).on("touchstart.zoom",R).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(L,Z,V,q){var G=L.selection?L.selection():L;G.property("__zoom",pW),L!==G?j(L,Z,V,q):G.interrupt().each(function(){I(this,arguments).event(q).start().zoom(null,typeof Z=="function"?Z.apply(this,arguments):Z).end()})},y.scaleBy=function(L,Z,V,q){y.scaleTo(L,function(){var G=this.__zoom.k,K=typeof Z=="function"?Z.apply(this,arguments):Z;return G*K},V,q)},y.scaleTo=function(L,Z,V,q){y.transform(L,function(){var G=t.apply(this,arguments),K=this.__zoom,ee=V==null?T(G):typeof V=="function"?V.apply(this,arguments):V,W=K.invert(ee),P=typeof Z=="function"?Z.apply(this,arguments):Z;return r(_(w(K,P),ee,W),G,o)},V,q)},y.translateBy=function(L,Z,V,q){y.transform(L,function(){return r(this.__zoom.translate(typeof Z=="function"?Z.apply(this,arguments):Z,typeof V=="function"?V.apply(this,arguments):V),t.apply(this,arguments),o)},null,q)},y.translateTo=function(L,Z,V,q,G){y.transform(L,function(){var K=t.apply(this,arguments),ee=this.__zoom,W=q==null?T(K):typeof q=="function"?q.apply(this,arguments):q;return r(hm.translate(W[0],W[1]).scale(ee.k).translate(typeof Z=="function"?-Z.apply(this,arguments):-Z,typeof V=="function"?-V.apply(this,arguments):-V),K,o)},q,G)};function w(L,Z){return Z=Math.max(s[0],Math.min(s[1],Z)),Z===L.k?L:new lh(Z,L.x,L.y)}function _(L,Z,V){var q=Z[0]-V[0]*L.k,G=Z[1]-V[1]*L.k;return q===L.x&&G===L.y?L:new lh(L.k,q,G)}function T(L){return[(+L[0][0]+ +L[1][0])/2,(+L[0][1]+ +L[1][1])/2]}function j(L,Z,V,q){L.on("start.zoom",function(){I(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(q).end()}).tween("zoom",function(){var G=this,K=arguments,ee=I(G,K).event(q),W=t.apply(G,K),P=V==null?T(W):typeof V=="function"?V.apply(G,K):V,U=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),z=G.__zoom,J=typeof Z=="function"?Z.apply(G,K):Z,te=c(z.invert(P).concat(U/z.k),J.invert(P).concat(U/J.k));return function(se){if(se===1)se=J;else{var ie=te(se),ce=U/ie[2];se=new lh(ce,P[0]-ie[0]*ce,P[1]-ie[1]*ce)}ee.zoom(null,se)}})}function I(L,Z,V){return!V&&L.__zooming||new E(L,Z)}function E(L,Z){this.that=L,this.args=Z,this.active=0,this.sourceEvent=null,this.extent=t.apply(L,Z),this.taps=0}E.prototype={event:function(L){return L&&(this.sourceEvent=L),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(L,Z){return this.mouse&&L!=="mouse"&&(this.mouse[1]=Z.invert(this.mouse[0])),this.touch0&&L!=="touch"&&(this.touch0[1]=Z.invert(this.touch0[0])),this.touch1&&L!=="touch"&&(this.touch1[1]=Z.invert(this.touch1[0])),this.that.__zoom=Z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(L){var Z=Mu(this.that).datum();u.call(L,this.that,new Wrt(L,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),Z)}};function S(L,...Z){if(!e.apply(this,arguments))return;var V=I(this,Z).event(L),q=this.__zoom,G=Math.max(s[0],Math.min(s[1],q.k*Math.pow(2,n.apply(this,arguments)))),K=Lf(L);if(V.wheel)(V.mouse[0][0]!==K[0]||V.mouse[0][1]!==K[1])&&(V.mouse[1]=q.invert(V.mouse[0]=K)),clearTimeout(V.wheel);else{if(q.k===G)return;V.mouse=[K,q.invert(K)],I5(this),V.start()}Ey(L),V.wheel=setTimeout(ee,g),V.zoom("mouse",r(_(w(q,G),V.mouse[0],V.mouse[1]),V.extent,o));function ee(){V.wheel=null,V.end()}}function B(L,...Z){if(h||!e.apply(this,arguments))return;var V=L.currentTarget,q=I(this,Z,!0).event(L),G=Mu(L.view).on("mousemove.zoom",P,!0).on("mouseup.zoom",U,!0),K=Lf(L,V),ee=L.clientX,W=L.clientY;Hce(L.view),UI(L),q.mouse=[K,this.__zoom.invert(K)],I5(this),q.start();function P(z){if(Ey(z),!q.moved){var J=z.clientX-ee,te=z.clientY-W;q.moved=J*J+te*te>x}q.event(z).zoom("mouse",r(_(q.that.__zoom,q.mouse[0]=Lf(z,V),q.mouse[1]),q.extent,o))}function U(z){G.on("mousemove.zoom mouseup.zoom",null),Vce(z.view,q.moved),Ey(z),q.event(z).end()}}function M(L,...Z){if(e.apply(this,arguments)){var V=this.__zoom,q=Lf(L.changedTouches?L.changedTouches[0]:L,this),G=V.invert(q),K=V.k*(L.shiftKey?.5:2),ee=r(_(w(V,K),q,G),t.apply(this,Z),o);Ey(L),l>0?Mu(this).transition().duration(l).call(j,ee,q,L):Mu(this).call(y.transform,ee,q,L)}}function R(L,...Z){if(e.apply(this,arguments)){var V=L.touches,q=V.length,G=I(this,Z,L.changedTouches.length===q).event(L),K,ee,W,P;for(UI(L),ee=0;ee<q;++ee)W=V[ee],P=Lf(W,this),P=[P,this.__zoom.invert(P),W.identifier],G.touch0?!G.touch1&&G.touch0[2]!==P[2]&&(G.touch1=P,G.taps=0):(G.touch0=P,K=!0,G.taps=1+!!d);d&&(d=clearTimeout(d)),K&&(G.taps<2&&(f=P[0],d=setTimeout(function(){d=null},m)),I5(this),G.start())}}function k(L,...Z){if(this.__zooming){var V=I(this,Z).event(L),q=L.changedTouches,G=q.length,K,ee,W,P;for(Ey(L),K=0;K<G;++K)ee=q[K],W=Lf(ee,this),V.touch0&&V.touch0[2]===ee.identifier?V.touch0[0]=W:V.touch1&&V.touch1[2]===ee.identifier&&(V.touch1[0]=W);if(ee=V.that.__zoom,V.touch1){var U=V.touch0[0],z=V.touch0[1],J=V.touch1[0],te=V.touch1[1],se=(se=J[0]-U[0])*se+(se=J[1]-U[1])*se,ie=(ie=te[0]-z[0])*ie+(ie=te[1]-z[1])*ie;ee=w(ee,Math.sqrt(se/ie)),W=[(U[0]+J[0])/2,(U[1]+J[1])/2],P=[(z[0]+te[0])/2,(z[1]+te[1])/2]}else if(V.touch0)W=V.touch0[0],P=V.touch0[1];else return;V.zoom("touch",r(_(ee,W,P),V.extent,o))}}function D(L,...Z){if(this.__zooming){var V=I(this,Z).event(L),q=L.changedTouches,G=q.length,K,ee;for(UI(L),h&&clearTimeout(h),h=setTimeout(function(){h=null},m),K=0;K<G;++K)ee=q[K],V.touch0&&V.touch0[2]===ee.identifier?delete V.touch0:V.touch1&&V.touch1[2]===ee.identifier&&delete V.touch1;if(V.touch1&&!V.touch0&&(V.touch0=V.touch1,delete V.touch1),V.touch0)V.touch0[1]=this.__zoom.invert(V.touch0[0]);else if(V.end(),V.taps===2&&(ee=Lf(ee,this),Math.hypot(f[0]-ee[0],f[1]-ee[1])<v)){var W=Mu(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return y.wheelDelta=function(L){return arguments.length?(n=typeof L=="function"?L:SC(+L),y):n},y.filter=function(L){return arguments.length?(e=typeof L=="function"?L:SC(!!L),y):e},y.touchable=function(L){return arguments.length?(a=typeof L=="function"?L:SC(!!L),y):a},y.extent=function(L){return arguments.length?(t=typeof L=="function"?L:SC([[+L[0][0],+L[0][1]],[+L[1][0],+L[1][1]]]),y):t},y.scaleExtent=function(L){return arguments.length?(s[0]=+L[0],s[1]=+L[1],y):[s[0],s[1]]},y.translateExtent=function(L){return arguments.length?(o[0][0]=+L[0][0],o[1][0]=+L[1][0],o[0][1]=+L[0][1],o[1][1]=+L[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(L){return arguments.length?(r=L,y):r},y.duration=function(L){return arguments.length?(l=+L,y):l},y.interpolate=function(L){return arguments.length?(c=L,y):c},y.on=function(){var L=u.on.apply(u,arguments);return L===u?y:L},y.clickDistance=function(L){return arguments.length?(x=(L=+L)*L,y):Math.sqrt(x)},y.tapDistance=function(L){return arguments.length?(v=+L,y):v},y}const aj=C.createContext(null),rnt=aj.Provider,Dh={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Yce=Dh.error001();function As(e,t){const r=C.useContext(aj);if(r===null)throw new Error(Yce);return jce(r,e,t)}const ao=()=>{const e=C.useContext(aj);if(e===null)throw new Error(Yce);return C.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},nnt=e=>e.userSelectionActive?"none":"all";function Jce({position:e,children:t,className:r,style:n,...a}){const s=As(nnt),o=`${e}`.split("-");return at.createElement("div",{className:Tl(["react-flow__panel",r,...o]),style:{...n,pointerEvents:s},...a},t)}function ant({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:at.createElement(Jce,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},at.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const snt=({x:e,y:t,label:r,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:c,className:u,...d})=>{const f=C.useRef(null),[h,m]=C.useState({x:0,y:0,width:0,height:0}),g=Tl(["react-flow__edge-textwrapper",u]);return C.useEffect(()=>{if(f.current){const x=f.current.getBBox();m({x:x.x,y:x.y,width:x.width,height:x.height})}},[r]),typeof r>"u"||!r?null:at.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:g,visibility:h.width?"visible":"hidden",...d},a&&at.createElement("rect",{width:h.width+2*o[0],x:-o[0],y:-o[1],height:h.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),at.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:f,style:n},r),c)};var int=C.memo(snt);const BM=e=>({width:e.offsetWidth,height:e.offsetHeight}),Fb=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),TM=(e={x:0,y:0},t)=>({x:Fb(e.x,t[0][0],t[1][0]),y:Fb(e.y,t[0][1],t[1][1])}),gW=(e,t,r)=>e<t?Fb(Math.abs(e-t),1,50)/50:e>r?-Fb(Math.abs(e-r),1,50)/50:0,Zce=(e,t)=>{const r=gW(e.x,35,t.width-35)*20,n=gW(e.y,35,t.height-35)*20;return[r,n]},eue=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},ont=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),IM=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),lnt=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),xW=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),qO=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},cnt=e=>Hu(e.width)&&Hu(e.height)&&Hu(e.x)&&Hu(e.y),Hu=e=>!isNaN(e)&&isFinite(e),Ts=Symbol.for("internals"),tue=["Enter"," ","Escape"],unt=(e,t)=>{},dnt=e=>"nativeEvent"in e;function KO(e){var a,s;const t=dnt(e)?e.nativeEvent:e,r=((s=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const rue=e=>"clientX"in e,mm=(e,t)=>{var s,o;const r=rue(e),n=r?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=r?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},US=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},BE=({id:e,path:t,labelX:r,labelY:n,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:m=20})=>at.createElement(at.Fragment,null,at.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:h}),m&&at.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),a&&Hu(r)&&Hu(n)?at.createElement(int,{x:r,y:n,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u}):null);BE.displayName="BaseEdge";function Ny(e,t,r){return r===void 0?r:n=>{const a=t().edges.find(s=>s.id===e);a&&r(n,{...a})}}function nue({sourceX:e,sourceY:t,targetX:r,targetY:n}){const a=Math.abs(r-e)/2,s=r<e?r+a:r-a,o=Math.abs(n-t)/2,l=n<t?n+o:n-o;return[s,l,a,o]}function aue({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:a,sourceControlY:s,targetControlX:o,targetControlY:l}){const c=e*.125+a*.375+o*.375+r*.125,u=t*.125+s*.375+l*.375+n*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var Og;(function(e){e.Strict="strict",e.Loose="loose"})(Og||(Og={}));var Gp;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Gp||(Gp={}));var T2;(function(e){e.Partial="partial",e.Full="full"})(T2||(T2={}));var W0;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(W0||(W0={}));var QS;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(QS||(QS={}));var _r;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(_r||(_r={}));function vW({pos:e,x1:t,y1:r,x2:n,y2:a}){return e===_r.Left||e===_r.Right?[.5*(t+n),r]:[t,.5*(r+a)]}function sue({sourceX:e,sourceY:t,sourcePosition:r=_r.Bottom,targetX:n,targetY:a,targetPosition:s=_r.Top}){const[o,l]=vW({pos:r,x1:e,y1:t,x2:n,y2:a}),[c,u]=vW({pos:s,x1:n,y1:a,x2:e,y2:t}),[d,f,h,m]=aue({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${o},${l} ${c},${u} ${n},${a}`,d,f,h,m]}const FM=C.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=_r.Bottom,targetPosition:s=_r.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,interactionWidth:x})=>{const[v,y,w]=sue({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s});return at.createElement(BE,{path:v,labelX:y,labelY:w,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,interactionWidth:x})});FM.displayName="SimpleBezierEdge";const bW={[_r.Left]:{x:-1,y:0},[_r.Right]:{x:1,y:0},[_r.Top]:{x:0,y:-1},[_r.Bottom]:{x:0,y:1}},fnt=({source:e,sourcePosition:t=_r.Bottom,target:r})=>t===_r.Left||t===_r.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},yW=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Ant({source:e,sourcePosition:t=_r.Bottom,target:r,targetPosition:n=_r.Top,center:a,offset:s}){const o=bW[t],l=bW[n],c={x:e.x+o.x*s,y:e.y+o.y*s},u={x:r.x+l.x*s,y:r.y+l.y*s},d=fnt({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",h=d[f];let m=[],g,x;const v={x:0,y:0},y={x:0,y:0},[w,_,T,j]=nue({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(o[f]*l[f]===-1){g=a.x??w,x=a.y??_;const E=[{x:g,y:c.y},{x:g,y:u.y}],S=[{x:c.x,y:x},{x:u.x,y:x}];o[f]===h?m=f==="x"?E:S:m=f==="x"?S:E}else{const E=[{x:c.x,y:u.y}],S=[{x:u.x,y:c.y}];if(f==="x"?m=o.x===h?S:E:m=o.y===h?E:S,t===n){const D=Math.abs(e[f]-r[f]);if(D<=s){const L=Math.min(s-1,s-D);o[f]===h?v[f]=(c[f]>e[f]?-1:1)*L:y[f]=(u[f]>r[f]?-1:1)*L}}if(t!==n){const D=f==="x"?"y":"x",L=o[f]===l[D],Z=c[D]>u[D],V=c[D]<u[D];(o[f]===1&&(!L&&Z||L&&V)||o[f]!==1&&(!L&&V||L&&Z))&&(m=f==="x"?E:S)}const B={x:c.x+v.x,y:c.y+v.y},M={x:u.x+y.x,y:u.y+y.y},R=Math.max(Math.abs(B.x-m[0].x),Math.abs(M.x-m[0].x)),k=Math.max(Math.abs(B.y-m[0].y),Math.abs(M.y-m[0].y));R>=k?(g=(B.x+M.x)/2,x=m[0].y):(g=m[0].x,x=(B.y+M.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...m,{x:u.x+y.x,y:u.y+y.y},r],g,x,T,j]}function hnt(e,t,r,n){const a=Math.min(yW(e,t)/2,yW(t,r)/2,n),{x:s,y:o}=t;if(e.x===s&&s===r.x||e.y===o&&o===r.y)return`L${s} ${o}`;if(e.y===o){const u=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${s+a*u},${o}Q ${s},${o} ${s},${o+a*d}`}const l=e.x<r.x?1:-1,c=e.y<r.y?-1:1;return`L ${s},${o+a*c}Q ${s},${o} ${s+a*l},${o}`}function WO({sourceX:e,sourceY:t,sourcePosition:r=_r.Bottom,targetX:n,targetY:a,targetPosition:s=_r.Top,borderRadius:o=5,centerX:l,centerY:c,offset:u=20}){const[d,f,h,m,g]=Ant({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:a},targetPosition:s,center:{x:l,y:c},offset:u});return[d.reduce((v,y,w)=>{let _="";return w>0&&w<d.length-1?_=hnt(d[w-1],y,d[w+1],o):_=`${w===0?"M":"L"}${y.x} ${y.y}`,v+=_,v},""),f,h,m,g]}const sj=C.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=_r.Bottom,targetPosition:h=_r.Top,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:v})=>{const[y,w,_]=WO({sourceX:e,sourceY:t,sourcePosition:f,targetX:r,targetY:n,targetPosition:h,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return at.createElement(BE,{path:y,labelX:w,labelY:_,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:m,markerStart:g,interactionWidth:v})});sj.displayName="SmoothStepEdge";const OM=C.memo(e=>{var t;return at.createElement(sj,{...e,pathOptions:C.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});OM.displayName="StepEdge";function mnt({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[a,s,o,l]=nue({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,a,s,o,l]}const DM=C.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:m})=>{const[g,x,v]=mnt({sourceX:e,sourceY:t,targetX:r,targetY:n});return at.createElement(BE,{path:g,labelX:x,labelY:v,label:a,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:m})});DM.displayName="StraightEdge";function kC(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function wW({pos:e,x1:t,y1:r,x2:n,y2:a,c:s}){switch(e){case _r.Left:return[t-kC(t-n,s),r];case _r.Right:return[t+kC(n-t,s),r];case _r.Top:return[t,r-kC(r-a,s)];case _r.Bottom:return[t,r+kC(a-r,s)]}}function iue({sourceX:e,sourceY:t,sourcePosition:r=_r.Bottom,targetX:n,targetY:a,targetPosition:s=_r.Top,curvature:o=.25}){const[l,c]=wW({pos:r,x1:e,y1:t,x2:n,y2:a,c:o}),[u,d]=wW({pos:s,x1:n,y1:a,x2:e,y2:t,c:o}),[f,h,m,g]=aue({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:l,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${l},${c} ${u},${d} ${n},${a}`,f,h,m,g]}const HS=C.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=_r.Bottom,targetPosition:s=_r.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:v})=>{const[y,w,_]=iue({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s,curvature:x==null?void 0:x.curvature});return at.createElement(BE,{path:y,labelX:w,labelY:_,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,interactionWidth:v})});HS.displayName="BezierEdge";const PM=C.createContext(null),pnt=PM.Provider;PM.Consumer;const gnt=()=>C.useContext(PM),xnt=e=>"id"in e&&"source"in e&&"target"in e,vnt=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`reactflow__edge-${e}${t||""}-${r}${n||""}`,XO=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`,bnt=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),ynt=(e,t)=>{if(!e.source||!e.target)return t;let r;return xnt(e)?r={...e}:r={...e,id:vnt(e)},bnt(r,t)?t:t.concat(r)},YO=({x:e,y:t},[r,n,a],s,[o,l])=>{const c={x:(e-r)/a,y:(t-n)/a};return s?{x:o*Math.round(c.x/o),y:l*Math.round(c.y/l)}:c},oue=({x:e,y:t},[r,n,a])=>({x:e*a+r,y:t*a+n}),qv=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],n=(e.height??0)*t[1],a={x:e.position.x-r,y:e.position.y-n};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-n}:a}},RM=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,a)=>{const{x:s,y:o}=qv(a,t).positionAbsolute;return ont(n,IM({x:s,y:o,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return lnt(r)},lue=(e,t,[r,n,a]=[0,0,1],s=!1,o=!1,l=[0,0])=>{const c={x:(t.x-r)/a,y:(t.y-n)/a,width:t.width/a,height:t.height/a},u=[];return e.forEach(d=>{const{width:f,height:h,selectable:m=!0,hidden:g=!1}=d;if(o&&!m||g)return!1;const{positionAbsolute:x}=qv(d,l),v={x:x.x,y:x.y,width:f||0,height:h||0},y=qO(c,v),w=typeof f>"u"||typeof h>"u"||f===null||h===null,_=s&&y>0,T=(f||0)*(h||0);(w||_||y>=T||d.dragging)&&u.push(d)}),u},cue=(e,t)=>{const r=e.map(n=>n.id);return t.filter(n=>r.includes(n.source)||r.includes(n.target))},uue=(e,t,r,n,a,s=.1)=>{const o=t/(e.width*(1+s)),l=r/(e.height*(1+s)),c=Math.min(o,l),u=Fb(c,n,a),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*u,m=r/2-f*u;return{x:h,y:m,zoom:u}},Ip=(e,t=0)=>e.transition().duration(t);function EW(e,t,r,n){return(t[r]||[]).reduce((a,s)=>{var o,l;return`${e.id}-${s.id}-${r}`!==n&&a.push({id:s.id||null,type:r,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+s.x+s.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+s.y+s.height/2}),a},[])}function wnt(e,t,r,n,a,s){const{x:o,y:l}=mm(e),u=t.elementsFromPoint(o,l).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const x=LM(void 0,u),v=u.getAttribute("data-handleid"),y=s({nodeId:g,id:v,type:x});if(y){const w=a.find(_=>_.nodeId===g&&_.type===x&&_.id===v);return{handle:{id:v,type:x,nodeId:g,x:(w==null?void 0:w.x)||r.x,y:(w==null?void 0:w.y)||r.y},validHandleResult:y}}}}let d=[],f=1/0;if(a.forEach(g=>{const x=Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);if(x<=n){const v=s(g);x<=f&&(x<f?d=[{handle:g,validHandleResult:v}]:x===f&&d.push({handle:g,validHandleResult:v}),f=x)}}),!d.length)return{handle:null,validHandleResult:due()};if(d.length===1)return d[0];const h=d.some(({validHandleResult:g})=>g.isValid),m=d.some(({handle:g})=>g.type==="target");return d.find(({handle:g,validHandleResult:x})=>m?g.type==="target":h?x.isValid:!0)||d[0]}const Ent={source:null,target:null,sourceHandle:null,targetHandle:null},due=()=>({handleDomNode:null,isValid:!1,connection:Ent,endHandle:null});function fue(e,t,r,n,a,s,o){const l=a==="target",c=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...due(),handleDomNode:c};if(c){const d=LM(void 0,c),f=c.getAttribute("data-nodeid"),h=c.getAttribute("data-handleid"),m=c.classList.contains("connectable"),g=c.classList.contains("connectableend"),x={source:l?f:r,sourceHandle:l?h:n,target:l?r:f,targetHandle:l?n:h};u.connection=x,m&&g&&(t===Og.Strict?l&&d==="source"||!l&&d==="target":f!==r||h!==n)&&(u.endHandle={nodeId:f,handleId:h,type:d},u.isValid=s(x))}return u}function Nnt({nodes:e,nodeId:t,handleId:r,handleType:n}){return e.reduce((a,s)=>{if(s[Ts]){const{handleBounds:o}=s[Ts];let l=[],c=[];o&&(l=EW(s,o,"source",`${t}-${r}-${n}`),c=EW(s,o,"target",`${t}-${r}-${n}`)),a.push(...l,...c)}return a},[])}function LM(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function QI(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Cnt(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function Aue({event:e,handleId:t,nodeId:r,onConnect:n,isTarget:a,getState:s,setState:o,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:u}){const d=eue(e.target),{connectionMode:f,domNode:h,autoPanOnConnect:m,connectionRadius:g,onConnectStart:x,panBy:v,getNodes:y,cancelConnection:w}=s();let _=0,T;const{x:j,y:I}=mm(e),E=d==null?void 0:d.elementFromPoint(j,I),S=LM(c,E),B=h==null?void 0:h.getBoundingClientRect();if(!B||!S)return;let M,R=mm(e,B),k=!1,D=null,L=!1,Z=null;const V=Nnt({nodes:y(),nodeId:r,handleId:t,handleType:S}),q=()=>{if(!m)return;const[ee,W]=Zce(R,B);v({x:ee,y:W}),_=requestAnimationFrame(q)};o({connectionPosition:R,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:S,connectionStartHandle:{nodeId:r,handleId:t,type:S},connectionEndHandle:null}),x==null||x(e,{nodeId:r,handleId:t,handleType:S});function G(ee){const{transform:W}=s();R=mm(ee,B);const{handle:P,validHandleResult:U}=wnt(ee,d,YO(R,W,!1,[1,1]),g,V,z=>fue(z,f,r,t,a?"target":"source",l,d));if(T=P,k||(q(),k=!0),Z=U.handleDomNode,D=U.connection,L=U.isValid,o({connectionPosition:T&&L?oue({x:T.x,y:T.y},W):R,connectionStatus:Cnt(!!T,L),connectionEndHandle:U.endHandle}),!T&&!L&&!Z)return QI(M);D.source!==D.target&&Z&&(QI(M),M=Z,Z.classList.add("connecting","react-flow__handle-connecting"),Z.classList.toggle("valid",L),Z.classList.toggle("react-flow__handle-valid",L))}function K(ee){var W,P;(T||Z)&&D&&L&&(n==null||n(D)),(P=(W=s()).onConnectEnd)==null||P.call(W,ee),c&&(u==null||u(ee)),QI(M),w(),cancelAnimationFrame(_),k=!1,L=!1,D=null,Z=null,d.removeEventListener("mousemove",G),d.removeEventListener("mouseup",K),d.removeEventListener("touchmove",G),d.removeEventListener("touchend",K)}d.addEventListener("mousemove",G),d.addEventListener("mouseup",K),d.addEventListener("touchmove",G),d.addEventListener("touchend",K)}const NW=()=>!0,_nt=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Snt=(e,t,r)=>n=>{const{connectionStartHandle:a,connectionEndHandle:s,connectionClickStartHandle:o}=n;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===r||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===r,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===r}},hue=C.forwardRef(({type:e="source",position:t=_r.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:c,className:u,onMouseDown:d,onTouchStart:f,...h},m)=>{var B,M;const g=o||null,x=e==="target",v=ao(),y=gnt(),{connectOnClick:w,noPanClassName:_}=As(_nt,cl),{connecting:T,clickConnecting:j}=As(Snt(y,g,e),cl);y||(M=(B=v.getState()).onError)==null||M.call(B,"010",Dh.error010());const I=R=>{const{defaultEdgeOptions:k,onConnect:D,hasDefaultEdges:L}=v.getState(),Z={...k,...R};if(L){const{edges:V,setEdges:q}=v.getState();q(ynt(Z,V))}D==null||D(Z),l==null||l(Z)},E=R=>{if(!y)return;const k=rue(R);a&&(k&&R.button===0||!k)&&Aue({event:R,handleId:g,nodeId:y,onConnect:I,isTarget:x,getState:v.getState,setState:v.setState,isValidConnection:r||v.getState().isValidConnection||NW}),k?d==null||d(R):f==null||f(R)},S=R=>{const{onClickConnectStart:k,onClickConnectEnd:D,connectionClickStartHandle:L,connectionMode:Z,isValidConnection:V}=v.getState();if(!y||!L&&!a)return;if(!L){k==null||k(R,{nodeId:y,handleId:g,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:g}});return}const q=eue(R.target),G=r||V||NW,{connection:K,isValid:ee}=fue({nodeId:y,id:g,type:e},Z,L.nodeId,L.handleId||null,L.type,G,q);ee&&I(K),D==null||D(R),v.setState({connectionClickStartHandle:null})};return at.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${g}-${e}`,className:Tl(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",_,u,{source:!x,target:x,connectable:n,connectablestart:a,connectableend:s,connecting:j,connectionindicator:n&&(a&&!T||s&&T)}]),onMouseDown:E,onTouchStart:E,onClick:w?S:void 0,ref:m,...h},c)});hue.displayName="Handle";var Ob=C.memo(hue);const mue=({data:e,isConnectable:t,targetPosition:r=_r.Top,sourcePosition:n=_r.Bottom})=>at.createElement(at.Fragment,null,at.createElement(Ob,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,at.createElement(Ob,{type:"source",position:n,isConnectable:t}));mue.displayName="DefaultNode";var JO=C.memo(mue);const pue=({data:e,isConnectable:t,sourcePosition:r=_r.Bottom})=>at.createElement(at.Fragment,null,e==null?void 0:e.label,at.createElement(Ob,{type:"source",position:r,isConnectable:t}));pue.displayName="InputNode";var gue=C.memo(pue);const xue=({data:e,isConnectable:t,targetPosition:r=_r.Top})=>at.createElement(at.Fragment,null,at.createElement(Ob,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);xue.displayName="OutputNode";var vue=C.memo(xue);const MM=()=>null;MM.displayName="GroupNode";const knt=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),jC=e=>e.id;function jnt(e,t){return cl(e.selectedNodes.map(jC),t.selectedNodes.map(jC))&&cl(e.selectedEdges.map(jC),t.selectedEdges.map(jC))}const bue=C.memo(({onSelectionChange:e})=>{const t=ao(),{selectedNodes:r,selectedEdges:n}=As(knt,jnt);return C.useEffect(()=>{const a={nodes:r,edges:n};e==null||e(a),t.getState().onSelectionChange.forEach(s=>s(a))},[r,n,e]),null});bue.displayName="SelectionListener";const Bnt=e=>!!e.onSelectionChange;function Tnt({onSelectionChange:e}){const t=As(Bnt);return e||t?at.createElement(bue,{onSelectionChange:e}):null}const Int=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Qx(e,t){C.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Nn(e,t,r){C.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const Fnt=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:a,onConnectStart:s,onConnectEnd:o,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:h,edgesUpdatable:m,elevateNodesOnSelect:g,minZoom:x,maxZoom:v,nodeExtent:y,onNodesChange:w,onEdgesChange:_,elementsSelectable:T,connectionMode:j,snapGrid:I,snapToGrid:E,translateExtent:S,connectOnClick:B,defaultEdgeOptions:M,fitView:R,fitViewOptions:k,onNodesDelete:D,onEdgesDelete:L,onNodeDrag:Z,onNodeDragStart:V,onNodeDragStop:q,onSelectionDrag:G,onSelectionDragStart:K,onSelectionDragStop:ee,noPanClassName:W,nodeOrigin:P,rfId:U,autoPanOnConnect:z,autoPanOnNodeDrag:J,onError:te,connectionRadius:se,isValidConnection:ie,nodeDragThreshold:ce})=>{const{setNodes:de,setEdges:Be,setDefaultNodesAndEdges:ae,setMinZoom:Se,setMaxZoom:ke,setTranslateExtent:ve,setNodeExtent:le,reset:be}=As(Int,cl),Pe=ao();return C.useEffect(()=>{const Ue=n==null?void 0:n.map(pe=>({...pe,...M}));return ae(r,Ue),()=>{be()}},[]),Nn("defaultEdgeOptions",M,Pe.setState),Nn("connectionMode",j,Pe.setState),Nn("onConnect",a,Pe.setState),Nn("onConnectStart",s,Pe.setState),Nn("onConnectEnd",o,Pe.setState),Nn("onClickConnectStart",l,Pe.setState),Nn("onClickConnectEnd",c,Pe.setState),Nn("nodesDraggable",u,Pe.setState),Nn("nodesConnectable",d,Pe.setState),Nn("nodesFocusable",f,Pe.setState),Nn("edgesFocusable",h,Pe.setState),Nn("edgesUpdatable",m,Pe.setState),Nn("elementsSelectable",T,Pe.setState),Nn("elevateNodesOnSelect",g,Pe.setState),Nn("snapToGrid",E,Pe.setState),Nn("snapGrid",I,Pe.setState),Nn("onNodesChange",w,Pe.setState),Nn("onEdgesChange",_,Pe.setState),Nn("connectOnClick",B,Pe.setState),Nn("fitViewOnInit",R,Pe.setState),Nn("fitViewOnInitOptions",k,Pe.setState),Nn("onNodesDelete",D,Pe.setState),Nn("onEdgesDelete",L,Pe.setState),Nn("onNodeDrag",Z,Pe.setState),Nn("onNodeDragStart",V,Pe.setState),Nn("onNodeDragStop",q,Pe.setState),Nn("onSelectionDrag",G,Pe.setState),Nn("onSelectionDragStart",K,Pe.setState),Nn("onSelectionDragStop",ee,Pe.setState),Nn("noPanClassName",W,Pe.setState),Nn("nodeOrigin",P,Pe.setState),Nn("rfId",U,Pe.setState),Nn("autoPanOnConnect",z,Pe.setState),Nn("autoPanOnNodeDrag",J,Pe.setState),Nn("onError",te,Pe.setState),Nn("connectionRadius",se,Pe.setState),Nn("isValidConnection",ie,Pe.setState),Nn("nodeDragThreshold",ce,Pe.setState),Qx(e,de),Qx(t,Be),Qx(x,Se),Qx(v,ke),Qx(S,ve),Qx(y,le),null},CW={display:"none"},Ont={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},yue="react-flow__node-desc",wue="react-flow__edge-desc",Dnt="react-flow__aria-live",Pnt=e=>e.ariaLiveMessage;function Rnt({rfId:e}){const t=As(Pnt);return at.createElement("div",{id:`${Dnt}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Ont},t)}function Lnt({rfId:e,disableKeyboardA11y:t}){return at.createElement(at.Fragment,null,at.createElement("div",{id:`${yue}-${e}`,style:CW},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),at.createElement("div",{id:`${wue}-${e}`,style:CW},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&at.createElement(Rnt,{rfId:e}))}var I2=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,n]=C.useState(!1),a=C.useRef(!1),s=C.useRef(new Set([])),[o,l]=C.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,h)=>f.concat(...h),[]);return[u,d]}return[[],[]]},[e]);return C.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=m=>{if(a.current=m.ctrlKey||m.metaKey||m.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&KO(m))return!1;const x=SW(m.code,l);s.current.add(m[x]),_W(o,s.current,!1)&&(m.preventDefault(),n(!0))},f=m=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&KO(m))return!1;const x=SW(m.code,l);_W(o,s.current,!0)?(n(!1),s.current.clear()):s.current.delete(m[x]),m.key==="Meta"&&s.current.clear(),a.current=!1},h=()=>{s.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",h),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",h)}}},[e,n]),r};function _W(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(a=>t.has(a)))}function SW(e,t){return t.includes(e)?"code":"key"}function Eue(e,t,r,n){var l,c;const a=e.parentNode||e.parentId;if(!a)return r;const s=t.get(a),o=qv(s,n);return Eue(s,t,{x:(r.x??0)+o.x,y:(r.y??0)+o.y,z:(((l=s[Ts])==null?void 0:l.z)??0)>(r.z??0)?((c=s[Ts])==null?void 0:c.z)??0:r.z??0},n)}function Nue(e,t,r){e.forEach(n=>{var s;const a=n.parentNode||n.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||r!=null&&r[n.id]){const{x:o,y:l,z:c}=Eue(n,e,{...n.position,z:((s=n[Ts])==null?void 0:s.z)??0},t);n.positionAbsolute={x:o,y:l},n[Ts].z=c,r!=null&&r[n.id]&&(n[Ts].isParent=!0)}})}function HI(e,t,r,n){const a=new Map,s={},o=n?1e3:0;return e.forEach(l=>{var m;const c=(Hu(l.zIndex)?l.zIndex:0)+(l.selected?o:0),u=t.get(l.id),d={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},f=l.parentNode||l.parentId;f&&(s[f]=!0);const h=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==l.type;Object.defineProperty(d,Ts,{enumerable:!1,value:{handleBounds:h||(m=u==null?void 0:u[Ts])==null?void 0:m.handleBounds,z:c}}),a.set(l.id,d)}),Nue(a,r,s),a}function Cue(e,t={}){const{getNodes:r,width:n,height:a,minZoom:s,maxZoom:o,d3Zoom:l,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),h=t.initial&&!u&&d;if(l&&c&&(h||!t.initial)){const g=r().filter(v=>{var w;const y=t.includeHiddenNodes?v.width&&v.height:!v.hidden;return(w=t.nodes)!=null&&w.length?y&&t.nodes.some(_=>_.id===v.id):y}),x=g.every(v=>v.width&&v.height);if(g.length>0&&x){const v=RM(g,f),{x:y,y:w,zoom:_}=uue(v,n,a,t.minZoom??s,t.maxZoom??o,t.padding??.1),T=hm.translate(y,w).scale(_);return typeof t.duration=="number"&&t.duration>0?l.transform(Ip(c,t.duration),T):l.transform(c,T),!0}}return!1}function Mnt(e,t){return e.forEach(r=>{const n=t.get(r.id);n&&t.set(n.id,{...n,[Ts]:n[Ts],selected:r.selected})}),new Map(t)}function Unt(e,t){return t.map(r=>{const n=e.find(a=>a.id===r.id);return n&&(r.selected=n.selected),r})}function BC({changedNodes:e,changedEdges:t,get:r,set:n}){const{nodeInternals:a,edges:s,onNodesChange:o,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:u}=r();e!=null&&e.length&&(c&&n({nodeInternals:Mnt(e,a)}),o==null||o(e)),t!=null&&t.length&&(u&&n({edges:Unt(t,s)}),l==null||l(t))}const Hx=()=>{},Qnt={zoomIn:Hx,zoomOut:Hx,zoomTo:Hx,getZoom:()=>1,setViewport:Hx,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Hx,fitBounds:Hx,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Hnt=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Vnt=()=>{const e=ao(),{d3Zoom:t,d3Selection:r}=As(Hnt,cl);return C.useMemo(()=>r&&t?{zoomIn:a=>t.scaleBy(Ip(r,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(Ip(r,a==null?void 0:a.duration),1/1.2),zoomTo:(a,s)=>t.scaleTo(Ip(r,s==null?void 0:s.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,s)=>{const[o,l,c]=e.getState().transform,u=hm.translate(a.x??o,a.y??l).scale(a.zoom??c);t.transform(Ip(r,s==null?void 0:s.duration),u)},getViewport:()=>{const[a,s,o]=e.getState().transform;return{x:a,y:s,zoom:o}},fitView:a=>Cue(e.getState,a),setCenter:(a,s,o)=>{const{width:l,height:c,maxZoom:u}=e.getState(),d=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:u,f=l/2-a*d,h=c/2-s*d,m=hm.translate(f,h).scale(d);t.transform(Ip(r,o==null?void 0:o.duration),m)},fitBounds:(a,s)=>{const{width:o,height:l,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:h}=uue(a,o,l,c,u,(s==null?void 0:s.padding)??.1),m=hm.translate(d,f).scale(h);t.transform(Ip(r,s==null?void 0:s.duration),m)},project:a=>{const{transform:s,snapToGrid:o,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),YO(a,s,o,l)},screenToFlowPosition:a=>{const{transform:s,snapToGrid:o,snapGrid:l,domNode:c}=e.getState();if(!c)return a;const{x:u,y:d}=c.getBoundingClientRect(),f={x:a.x-u,y:a.y-d};return YO(f,s,o,l)},flowToScreenPosition:a=>{const{transform:s,domNode:o}=e.getState();if(!o)return a;const{x:l,y:c}=o.getBoundingClientRect(),u=oue(a,s);return{x:u.x+l,y:u.y+c}},viewportInitialized:!0}:Qnt,[t,r])};function ij(){const e=Vnt(),t=ao(),r=C.useCallback(()=>t.getState().getNodes().map(x=>({...x})),[]),n=C.useCallback(x=>t.getState().nodeInternals.get(x),[]),a=C.useCallback(()=>{const{edges:x=[]}=t.getState();return x.map(v=>({...v}))},[]),s=C.useCallback(x=>{const{edges:v=[]}=t.getState();return v.find(y=>y.id===x)},[]),o=C.useCallback(x=>{const{getNodes:v,setNodes:y,hasDefaultNodes:w,onNodesChange:_}=t.getState(),T=v(),j=typeof x=="function"?x(T):x;if(w)y(j);else if(_){const I=j.length===0?T.map(E=>({type:"remove",id:E.id})):j.map(E=>({item:E,type:"reset"}));_(I)}},[]),l=C.useCallback(x=>{const{edges:v=[],setEdges:y,hasDefaultEdges:w,onEdgesChange:_}=t.getState(),T=typeof x=="function"?x(v):x;if(w)y(T);else if(_){const j=T.length===0?v.map(I=>({type:"remove",id:I.id})):T.map(I=>({item:I,type:"reset"}));_(j)}},[]),c=C.useCallback(x=>{const v=Array.isArray(x)?x:[x],{getNodes:y,setNodes:w,hasDefaultNodes:_,onNodesChange:T}=t.getState();if(_){const I=[...y(),...v];w(I)}else if(T){const j=v.map(I=>({item:I,type:"add"}));T(j)}},[]),u=C.useCallback(x=>{const v=Array.isArray(x)?x:[x],{edges:y=[],setEdges:w,hasDefaultEdges:_,onEdgesChange:T}=t.getState();if(_)w([...y,...v]);else if(T){const j=v.map(I=>({item:I,type:"add"}));T(j)}},[]),d=C.useCallback(()=>{const{getNodes:x,edges:v=[],transform:y}=t.getState(),[w,_,T]=y;return{nodes:x().map(j=>({...j})),edges:v.map(j=>({...j})),viewport:{x:w,y:_,zoom:T}}},[]),f=C.useCallback(({nodes:x,edges:v})=>{const{nodeInternals:y,getNodes:w,edges:_,hasDefaultNodes:T,hasDefaultEdges:j,onNodesDelete:I,onEdgesDelete:E,onNodesChange:S,onEdgesChange:B}=t.getState(),M=(x||[]).map(Z=>Z.id),R=(v||[]).map(Z=>Z.id),k=w().reduce((Z,V)=>{const q=V.parentNode||V.parentId,G=!M.includes(V.id)&&q&&Z.find(ee=>ee.id===q);return(typeof V.deletable=="boolean"?V.deletable:!0)&&(M.includes(V.id)||G)&&Z.push(V),Z},[]),D=_.filter(Z=>typeof Z.deletable=="boolean"?Z.deletable:!0),L=D.filter(Z=>R.includes(Z.id));if(k||L){const Z=cue(k,D),V=[...L,...Z],q=V.reduce((G,K)=>(G.includes(K.id)||G.push(K.id),G),[]);if((j||T)&&(j&&t.setState({edges:_.filter(G=>!q.includes(G.id))}),T&&(k.forEach(G=>{y.delete(G.id)}),t.setState({nodeInternals:new Map(y)}))),q.length>0&&(E==null||E(V),B&&B(q.map(G=>({id:G,type:"remove"})))),k.length>0&&(I==null||I(k),S)){const G=k.map(K=>({id:K.id,type:"remove"}));S(G)}}},[]),h=C.useCallback(x=>{const v=cnt(x),y=v?null:t.getState().nodeInternals.get(x.id);return!v&&!y?[null,null,v]:[v?x:xW(y),y,v]},[]),m=C.useCallback((x,v=!0,y)=>{const[w,_,T]=h(x);return w?(y||t.getState().getNodes()).filter(j=>{if(!T&&(j.id===_.id||!j.positionAbsolute))return!1;const I=xW(j),E=qO(I,w);return v&&E>0||E>=w.width*w.height}):[]},[]),g=C.useCallback((x,v,y=!0)=>{const[w]=h(x);if(!w)return!1;const _=qO(w,v);return y&&_>0||_>=w.width*w.height},[]);return C.useMemo(()=>({...e,getNodes:r,getNode:n,getEdges:a,getEdge:s,setNodes:o,setEdges:l,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:m,isNodeIntersecting:g}),[e,r,n,a,s,o,l,c,u,d,f,m,g])}const znt={actInsideInputWithModifier:!1};var $nt=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=ao(),{deleteElements:n}=ij(),a=I2(e,znt),s=I2(t);C.useEffect(()=>{if(a){const{edges:o,getNodes:l}=r.getState(),c=l().filter(d=>d.selected),u=o.filter(d=>d.selected);n({nodes:c,edges:u}),r.setState({nodesSelectionActive:!1})}},[a]),C.useEffect(()=>{r.setState({multiSelectionActive:s})},[s])};function Gnt(e){const t=ao();C.useEffect(()=>{let r;const n=()=>{var s,o;if(!e.current)return;const a=BM(e.current);(a.height===0||a.width===0)&&((o=(s=t.getState()).onError)==null||o.call(s,"004",Dh.error004())),t.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),e.current&&(r=new ResizeObserver(()=>n()),r.observe(e.current)),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}},[])}const UM={position:"absolute",width:"100%",height:"100%",top:0,left:0},qnt=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,TC=e=>({x:e.x,y:e.y,zoom:e.k}),Vx=(e,t)=>e.target.closest(`.${t}`),kW=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),jW=e=>{const t=e.ctrlKey&&US()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Knt=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Wnt=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:o=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=Gp.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:h,translateExtent:m,minZoom:g,maxZoom:x,zoomActivationKeyCode:v,preventScrolling:y=!0,children:w,noWheelClassName:_,noPanClassName:T})=>{const j=C.useRef(),I=ao(),E=C.useRef(!1),S=C.useRef(!1),B=C.useRef(null),M=C.useRef({x:0,y:0,zoom:0}),{d3Zoom:R,d3Selection:k,d3ZoomHandler:D,userSelectionActive:L}=As(Knt,cl),Z=I2(v),V=C.useRef(0),q=C.useRef(!1),G=C.useRef();return Gnt(B),C.useEffect(()=>{if(B.current){const K=B.current.getBoundingClientRect(),ee=tnt().scaleExtent([g,x]).translateExtent(m),W=Mu(B.current).call(ee),P=hm.translate(h.x,h.y).scale(Fb(h.zoom,g,x)),U=[[0,0],[K.width,K.height]],z=ee.constrain()(P,U,m);ee.transform(W,z),ee.wheelDelta(jW),I.setState({d3Zoom:ee,d3Selection:W,d3ZoomHandler:W.on("wheel.zoom"),transform:[z.x,z.y,z.k],domNode:B.current.closest(".react-flow")})}},[]),C.useEffect(()=>{k&&R&&(o&&!Z&&!L?k.on("wheel.zoom",K=>{if(Vx(K,_))return!1;K.preventDefault(),K.stopImmediatePropagation();const ee=k.property("__zoom").k||1;if(K.ctrlKey&&s){const ie=Lf(K),ce=jW(K),de=ee*Math.pow(2,ce);R.scaleTo(k,de,ie,K);return}const W=K.deltaMode===1?20:1;let P=c===Gp.Vertical?0:K.deltaX*W,U=c===Gp.Horizontal?0:K.deltaY*W;!US()&&K.shiftKey&&c!==Gp.Vertical&&(P=K.deltaY*W,U=0),R.translateBy(k,-(P/ee)*l,-(U/ee)*l,{internal:!0});const z=TC(k.property("__zoom")),{onViewportChangeStart:J,onViewportChange:te,onViewportChangeEnd:se}=I.getState();clearTimeout(G.current),q.current||(q.current=!0,t==null||t(K,z),J==null||J(z)),q.current&&(e==null||e(K,z),te==null||te(z),G.current=setTimeout(()=>{r==null||r(K,z),se==null||se(z),q.current=!1},150))},{passive:!1}):typeof D<"u"&&k.on("wheel.zoom",function(K,ee){if(!y&&K.type==="wheel"&&!K.ctrlKey||Vx(K,_))return null;K.preventDefault(),D.call(this,K,ee)},{passive:!1}))},[L,o,c,k,R,D,Z,s,y,_,t,e,r]),C.useEffect(()=>{R&&R.on("start",K=>{var P,U;if(!K.sourceEvent||K.sourceEvent.internal)return null;V.current=(P=K.sourceEvent)==null?void 0:P.button;const{onViewportChangeStart:ee}=I.getState(),W=TC(K.transform);E.current=!0,M.current=W,((U=K.sourceEvent)==null?void 0:U.type)==="mousedown"&&I.setState({paneDragging:!0}),ee==null||ee(W),t==null||t(K.sourceEvent,W)})},[R,t]),C.useEffect(()=>{R&&(L&&!E.current?R.on("zoom",null):L||R.on("zoom",K=>{var W;const{onViewportChange:ee}=I.getState();if(I.setState({transform:[K.transform.x,K.transform.y,K.transform.k]}),S.current=!!(n&&kW(f,V.current??0)),(e||ee)&&!((W=K.sourceEvent)!=null&&W.internal)){const P=TC(K.transform);ee==null||ee(P),e==null||e(K.sourceEvent,P)}}))},[L,R,e,f,n]),C.useEffect(()=>{R&&R.on("end",K=>{if(!K.sourceEvent||K.sourceEvent.internal)return null;const{onViewportChangeEnd:ee}=I.getState();if(E.current=!1,I.setState({paneDragging:!1}),n&&kW(f,V.current??0)&&!S.current&&n(K.sourceEvent),S.current=!1,(r||ee)&&qnt(M.current,K.transform)){const W=TC(K.transform);M.current=W,clearTimeout(j.current),j.current=setTimeout(()=>{ee==null||ee(W),r==null||r(K.sourceEvent,W)},o?150:0)}})},[R,o,f,r,n]),C.useEffect(()=>{R&&R.filter(K=>{const ee=Z||a,W=s&&K.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&K.button===1&&K.type==="mousedown"&&(Vx(K,"react-flow__node")||Vx(K,"react-flow__edge")))return!0;if(!f&&!ee&&!o&&!u&&!s||L||!u&&K.type==="dblclick"||Vx(K,_)&&K.type==="wheel"||Vx(K,T)&&(K.type!=="wheel"||o&&K.type==="wheel"&&!Z)||!s&&K.ctrlKey&&K.type==="wheel"||!ee&&!o&&!W&&K.type==="wheel"||!f&&(K.type==="mousedown"||K.type==="touchstart")||Array.isArray(f)&&!f.includes(K.button)&&K.type==="mousedown")return!1;const P=Array.isArray(f)&&f.includes(K.button)||!K.button||K.button<=1;return(!K.ctrlKey||K.type==="wheel")&&P})},[L,R,a,s,o,u,f,d,Z]),at.createElement("div",{className:"react-flow__renderer",ref:B,style:UM},w)},Xnt=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Ynt(){const{userSelectionActive:e,userSelectionRect:t}=As(Xnt,cl);return e&&t?at.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function BW(e,t){const r=t.parentNode||t.parentId,n=e.find(a=>a.id===r);if(n){const a=t.position.x+t.width-n.width,s=t.position.y+t.height-n.height;if(a>0||s>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),s>0&&(n.style.height+=s),t.position.x<0){const o=Math.abs(t.position.x);n.position.x=n.position.x-o,n.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);n.position.y=n.position.y-o,n.style.height+=o,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function _ue(e,t){if(e.some(n=>n.type==="reset"))return e.filter(n=>n.type==="reset").map(n=>n.item);const r=e.filter(n=>n.type==="add").map(n=>n.item);return t.reduce((n,a)=>{const s=e.filter(l=>l.id===a.id);if(s.length===0)return n.push(a),n;const o={...a};for(const l of s)if(l)switch(l.type){case"select":{o.selected=l.selected;break}case"position":{typeof l.position<"u"&&(o.position=l.position),typeof l.positionAbsolute<"u"&&(o.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(o.dragging=l.dragging),o.expandParent&&BW(n,o);break}case"dimensions":{typeof l.dimensions<"u"&&(o.width=l.dimensions.width,o.height=l.dimensions.height),typeof l.updateStyle<"u"&&(o.style={...o.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(o.resizing=l.resizing),o.expandParent&&BW(n,o);break}case"remove":return n}return n.push(o),n},r)}function Sue(e,t){return _ue(e,t)}function Jnt(e,t){return _ue(e,t)}const H0=(e,t)=>({id:e,type:"select",selected:t});function Ev(e,t){return e.reduce((r,n)=>{const a=t.includes(n.id);return!n.selected&&a?(n.selected=!0,r.push(H0(n.id,!0))):n.selected&&!a&&(n.selected=!1,r.push(H0(n.id,!1))),r},[])}const VI=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},Znt=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),kue=C.memo(({isSelecting:e,selectionMode:t=T2.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:o,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const h=C.useRef(null),m=ao(),g=C.useRef(0),x=C.useRef(0),v=C.useRef(),{userSelectionActive:y,elementsSelectable:w,dragging:_}=As(Znt,cl),T=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,x.current=0},j=D=>{s==null||s(D),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},I=D=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){D.preventDefault();return}o==null||o(D)},E=l?D=>l(D):void 0,S=D=>{const{resetSelectedElements:L,domNode:Z}=m.getState();if(v.current=Z==null?void 0:Z.getBoundingClientRect(),!w||!e||D.button!==0||D.target!==h.current||!v.current)return;const{x:V,y:q}=mm(D,v.current);L(),m.setState({userSelectionRect:{width:0,height:0,startX:V,startY:q,x:V,y:q}}),n==null||n(D)},B=D=>{const{userSelectionRect:L,nodeInternals:Z,edges:V,transform:q,onNodesChange:G,onEdgesChange:K,nodeOrigin:ee,getNodes:W}=m.getState();if(!e||!v.current||!L)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const P=mm(D,v.current),U=L.startX??0,z=L.startY??0,J={...L,x:P.x<U?P.x:U,y:P.y<z?P.y:z,width:Math.abs(P.x-U),height:Math.abs(P.y-z)},te=W(),se=lue(Z,J,q,t===T2.Partial,!0,ee),ie=cue(se,V).map(de=>de.id),ce=se.map(de=>de.id);if(g.current!==ce.length){g.current=ce.length;const de=Ev(te,ce);de.length&&(G==null||G(de))}if(x.current!==ie.length){x.current=ie.length;const de=Ev(V,ie);de.length&&(K==null||K(de))}m.setState({userSelectionRect:J})},M=D=>{if(D.button!==0)return;const{userSelectionRect:L}=m.getState();!y&&L&&D.target===h.current&&(j==null||j(D)),m.setState({nodesSelectionActive:g.current>0}),T(),a==null||a(D)},R=D=>{y&&(m.setState({nodesSelectionActive:g.current>0}),a==null||a(D)),T()},k=w&&(e||y);return at.createElement("div",{className:Tl(["react-flow__pane",{dragging:_,selection:e}]),onClick:k?void 0:VI(j,h),onContextMenu:VI(I,h),onWheel:VI(E,h),onMouseEnter:k?void 0:c,onMouseDown:k?S:void 0,onMouseMove:k?B:u,onMouseUp:k?M:void 0,onMouseLeave:k?R:d,ref:h,style:UM},f,at.createElement(Ynt,null))});kue.displayName="Pane";function jue(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const n=t.get(r);return n?n.selected?!0:jue(n,t):!1}function TW(e,t,r){let n=e;do{if(n!=null&&n.matches(t))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function eat(e,t,r,n){return Array.from(e.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!jue(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var s,o;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((s=a.positionAbsolute)==null?void 0:s.x)??0),y:r.y-(((o=a.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function tat(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Bue(e,t,r,n,a=[0,0],s){const o=tat(e,e.extent||n);let l=o;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=r.get(c),{x:h,y:m}=qv(f,a).positionAbsolute;l=f&&Hu(h)&&Hu(m)&&Hu(f.width)&&Hu(f.height)?[[h+e.width*a[0],m+e.height*a[1]],[h+f.width-e.width+e.width*a[0],m+f.height-e.height+e.height*a[1]]]:l}else s==null||s("005",Dh.error005()),l=o;else if(e.extent&&c&&e.extent!=="parent"){const f=r.get(c),{x:h,y:m}=qv(f,a).positionAbsolute;l=[[e.extent[0][0]+h,e.extent[0][1]+m],[e.extent[1][0]+h,e.extent[1][1]+m]]}let u={x:0,y:0};if(c){const f=r.get(c);u=qv(f,a).positionAbsolute}const d=l&&l!=="parent"?TM(t,l):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function zI({nodeId:e,dragItems:t,nodeInternals:r}){const n=t.map(a=>({...r.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?n.find(a=>a.id===e):n[0],n]}const IW=(e,t,r,n)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const s=Array.from(a),o=t.getBoundingClientRect(),l={x:o.width*n[0],y:o.height*n[1]};return s.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-o.left-l.x)/r,y:(u.top-o.top-l.y)/r,...BM(c)}})};function Cy(e,t,r){return r===void 0?r:n=>{const a=t().nodeInternals.get(e);a&&r(n,{...a})}}function ZO({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:o,nodeInternals:l,onError:c}=t.getState(),u=l.get(e);if(!u){c==null||c("012",Dh.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&o)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):a([e])}function rat(){const e=ao();return C.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:a,snapToGrid:s}=e.getState(),o=r.touches?r.touches[0].clientX:r.clientX,l=r.touches?r.touches[0].clientY:r.clientY,c={x:(o-n[0])/n[2],y:(l-n[1])/n[2]};return{xSnapped:s?a[0]*Math.round(c.x/a[0]):c.x,ySnapped:s?a[1]*Math.round(c.y/a[1]):c.y,...c}},[])}function $I(e){return(t,r,n)=>e==null?void 0:e(t,n)}function Tue({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:s,selectNodesOnDrag:o}){const l=ao(),[c,u]=C.useState(!1),d=C.useRef([]),f=C.useRef({x:null,y:null}),h=C.useRef(0),m=C.useRef(null),g=C.useRef({x:0,y:0}),x=C.useRef(null),v=C.useRef(!1),y=C.useRef(!1),w=C.useRef(!1),_=rat();return C.useEffect(()=>{if(e!=null&&e.current){const T=Mu(e.current),j=({x:S,y:B})=>{const{nodeInternals:M,onNodeDrag:R,onSelectionDrag:k,updateNodePositions:D,nodeExtent:L,snapGrid:Z,snapToGrid:V,nodeOrigin:q,onError:G}=l.getState();f.current={x:S,y:B};let K=!1,ee={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&L){const P=RM(d.current,q);ee=IM(P)}if(d.current=d.current.map(P=>{const U={x:S-P.distance.x,y:B-P.distance.y};V&&(U.x=Z[0]*Math.round(U.x/Z[0]),U.y=Z[1]*Math.round(U.y/Z[1]));const z=[[L[0][0],L[0][1]],[L[1][0],L[1][1]]];d.current.length>1&&L&&!P.extent&&(z[0][0]=P.positionAbsolute.x-ee.x+L[0][0],z[1][0]=P.positionAbsolute.x+(P.width??0)-ee.x2+L[1][0],z[0][1]=P.positionAbsolute.y-ee.y+L[0][1],z[1][1]=P.positionAbsolute.y+(P.height??0)-ee.y2+L[1][1]);const J=Bue(P,U,M,z,q,G);return K=K||P.position.x!==J.position.x||P.position.y!==J.position.y,P.position=J.position,P.positionAbsolute=J.positionAbsolute,P}),!K)return;D(d.current,!0,!0),u(!0);const W=a?R:$I(k);if(W&&x.current){const[P,U]=zI({nodeId:a,dragItems:d.current,nodeInternals:M});W(x.current,P,U)}},I=()=>{if(!m.current)return;const[S,B]=Zce(g.current,m.current);if(S!==0||B!==0){const{transform:M,panBy:R}=l.getState();f.current.x=(f.current.x??0)-S/M[2],f.current.y=(f.current.y??0)-B/M[2],R({x:S,y:B})&&j(f.current)}h.current=requestAnimationFrame(I)},E=S=>{var q;const{nodeInternals:B,multiSelectionActive:M,nodesDraggable:R,unselectNodesAndEdges:k,onNodeDragStart:D,onSelectionDragStart:L}=l.getState();y.current=!0;const Z=a?D:$I(L);(!o||!s)&&!M&&a&&((q=B.get(a))!=null&&q.selected||k()),a&&s&&o&&ZO({id:a,store:l,nodeRef:e});const V=_(S);if(f.current=V,d.current=eat(B,R,V,a),Z&&d.current){const[G,K]=zI({nodeId:a,dragItems:d.current,nodeInternals:B});Z(S.sourceEvent,G,K)}};if(t)T.on(".drag",null);else{const S=Rtt().on("start",B=>{const{domNode:M,nodeDragThreshold:R}=l.getState();R===0&&E(B),w.current=!1;const k=_(B);f.current=k,m.current=(M==null?void 0:M.getBoundingClientRect())||null,g.current=mm(B.sourceEvent,m.current)}).on("drag",B=>{var D,L;const M=_(B),{autoPanOnNodeDrag:R,nodeDragThreshold:k}=l.getState();if(B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!v.current&&y.current&&R&&(v.current=!0,I()),!y.current){const Z=M.xSnapped-(((D=f==null?void 0:f.current)==null?void 0:D.x)??0),V=M.ySnapped-(((L=f==null?void 0:f.current)==null?void 0:L.y)??0);Math.sqrt(Z*Z+V*V)>k&&E(B)}(f.current.x!==M.xSnapped||f.current.y!==M.ySnapped)&&d.current&&y.current&&(x.current=B.sourceEvent,g.current=mm(B.sourceEvent,m.current),j(M))}}).on("end",B=>{if(!(!y.current||w.current)&&(u(!1),v.current=!1,y.current=!1,cancelAnimationFrame(h.current),d.current)){const{updateNodePositions:M,nodeInternals:R,onNodeDragStop:k,onSelectionDragStop:D}=l.getState(),L=a?k:$I(D);if(M(d.current,!1,!1),L){const[Z,V]=zI({nodeId:a,dragItems:d.current,nodeInternals:R});L(B.sourceEvent,Z,V)}}}).filter(B=>{const M=B.target;return!B.button&&(!r||!TW(M,`.${r}`,e))&&(!n||TW(M,n,e))});return T.call(S),()=>{T.on(".drag",null)}}}},[e,t,r,n,s,l,a,o,_]),c}function Iue(){const e=ao();return C.useCallback(r=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:s,getNodes:o,snapToGrid:l,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=o().filter(w=>w.selected&&(w.draggable||d&&typeof w.draggable>"u")),h=l?c[0]:5,m=l?c[1]:5,g=r.isShiftPressed?4:1,x=r.x*h*g,v=r.y*m*g,y=f.map(w=>{if(w.positionAbsolute){const _={x:w.positionAbsolute.x+x,y:w.positionAbsolute.y+v};l&&(_.x=c[0]*Math.round(_.x/c[0]),_.y=c[1]*Math.round(_.y/c[1]));const{positionAbsolute:T,position:j}=Bue(w,_,n,a,void 0,u);w.position=j,w.positionAbsolute=T}return w});s(y,!0,!1)},[])}const Kv={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var _y=e=>{const t=({id:r,type:n,data:a,xPos:s,yPos:o,xPosOrigin:l,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:h,onMouseLeave:m,onContextMenu:g,onDoubleClick:x,style:v,className:y,isDraggable:w,isSelectable:_,isConnectable:T,isFocusable:j,selectNodesOnDrag:I,sourcePosition:E,targetPosition:S,hidden:B,resizeObserver:M,dragHandle:R,zIndex:k,isParent:D,noDragClassName:L,noPanClassName:Z,initialized:V,disableKeyboardA11y:q,ariaLabel:G,rfId:K,hasHandleBounds:ee})=>{const W=ao(),P=C.useRef(null),U=C.useRef(null),z=C.useRef(E),J=C.useRef(S),te=C.useRef(n),se=_||w||d||f||h||m,ie=Iue(),ce=Cy(r,W.getState,f),de=Cy(r,W.getState,h),Be=Cy(r,W.getState,m),ae=Cy(r,W.getState,g),Se=Cy(r,W.getState,x),ke=be=>{const{nodeDragThreshold:Pe}=W.getState();if(_&&(!I||!w||Pe>0)&&ZO({id:r,store:W,nodeRef:P}),d){const Ue=W.getState().nodeInternals.get(r);Ue&&d(be,{...Ue})}},ve=be=>{if(!KO(be)&&!q)if(tue.includes(be.key)&&_){const Pe=be.key==="Escape";ZO({id:r,store:W,unselect:Pe,nodeRef:P})}else w&&u&&Object.prototype.hasOwnProperty.call(Kv,be.key)&&(W.setState({ariaLiveMessage:`Moved selected node ${be.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~o}`}),ie({x:Kv[be.key].x,y:Kv[be.key].y,isShiftPressed:be.shiftKey}))};C.useEffect(()=>()=>{U.current&&(M==null||M.unobserve(U.current),U.current=null)},[]),C.useEffect(()=>{if(P.current&&!B){const be=P.current;(!V||!ee||U.current!==be)&&(U.current&&(M==null||M.unobserve(U.current)),M==null||M.observe(be),U.current=be)}},[B,V,ee]),C.useEffect(()=>{const be=te.current!==n,Pe=z.current!==E,Ue=J.current!==S;P.current&&(be||Pe||Ue)&&(be&&(te.current=n),Pe&&(z.current=E),Ue&&(J.current=S),W.getState().updateNodeDimensions([{id:r,nodeElement:P.current,forceUpdate:!0}]))},[r,n,E,S]);const le=Tue({nodeRef:P,disabled:B||!w,noDragClassName:L,handleSelector:R,nodeId:r,isSelectable:_,selectNodesOnDrag:I});return B?null:at.createElement("div",{className:Tl(["react-flow__node",`react-flow__node-${n}`,{[Z]:w},y,{selected:u,selectable:_,parent:D,dragging:le}]),ref:P,style:{zIndex:k,transform:`translate(${l}px,${c}px)`,pointerEvents:se?"all":"none",visibility:V?"visible":"hidden",...v},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:ce,onMouseMove:de,onMouseLeave:Be,onContextMenu:ae,onClick:ke,onDoubleClick:Se,onKeyDown:j?ve:void 0,tabIndex:j?0:void 0,role:j?"button":void 0,"aria-describedby":q?void 0:`${yue}-${K}`,"aria-label":G},at.createElement(pnt,{value:r},at.createElement(e,{id:r,data:a,type:n,xPos:s,yPos:o,selected:u,isConnectable:T,sourcePosition:E,targetPosition:S,dragging:le,dragHandle:R,zIndex:k})))};return t.displayName="NodeWrapper",C.memo(t)};const nat=e=>{const t=e.getNodes().filter(r=>r.selected);return{...RM(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function aat({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=ao(),{width:a,height:s,x:o,y:l,transformString:c,userSelectionActive:u}=As(nat,cl),d=Iue(),f=C.useRef(null);if(C.useEffect(()=>{var g;r||(g=f.current)==null||g.focus({preventScroll:!0})},[r]),Tue({nodeRef:f}),u||!a||!s)return null;const h=e?g=>{const x=n.getState().getNodes().filter(v=>v.selected);e(g,x)}:void 0,m=g=>{Object.prototype.hasOwnProperty.call(Kv,g.key)&&d({x:Kv[g.key].x,y:Kv[g.key].y,isShiftPressed:g.shiftKey})};return at.createElement("div",{className:Tl(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},at.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:r?void 0:-1,onKeyDown:r?void 0:m,style:{width:a,height:s,top:l,left:o}}))}var sat=C.memo(aat);const iat=e=>e.nodesSelectionActive,Fue=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:o,deleteKeyCode:l,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:h,selectionMode:m,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:v,panActivationKeyCode:y,zoomActivationKeyCode:w,elementsSelectable:_,zoomOnScroll:T,zoomOnPinch:j,panOnScroll:I,panOnScrollSpeed:E,panOnScrollMode:S,zoomOnDoubleClick:B,panOnDrag:M,defaultViewport:R,translateExtent:k,minZoom:D,maxZoom:L,preventScrolling:Z,onSelectionContextMenu:V,noWheelClassName:q,noPanClassName:G,disableKeyboardA11y:K})=>{const ee=As(iat),W=I2(f),P=I2(y),U=P||M,z=P||I,J=W||h&&U!==!0;return $nt({deleteKeyCode:l,multiSelectionKeyCode:v}),at.createElement(Wnt,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:_,zoomOnScroll:T,zoomOnPinch:j,panOnScroll:z,panOnScrollSpeed:E,panOnScrollMode:S,zoomOnDoubleClick:B,panOnDrag:!W&&U,defaultViewport:R,translateExtent:k,minZoom:D,maxZoom:L,zoomActivationKeyCode:w,preventScrolling:Z,noWheelClassName:q,noPanClassName:G},at.createElement(kue,{onSelectionStart:g,onSelectionEnd:x,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:U,isSelecting:!!J,selectionMode:m},e,ee&&at.createElement(sat,{onSelectionContextMenu:V,noPanClassName:G,disableKeyboardA11y:K})))};Fue.displayName="FlowRenderer";var oat=C.memo(Fue);function lat(e){return As(C.useCallback(r=>e?lue(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function cat(e){const t={input:_y(e.input||gue),default:_y(e.default||JO),output:_y(e.output||vue),group:_y(e.group||MM)},r={},n=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,s)=>(a[s]=_y(e[s]||JO),a),r);return{...t,...n}}const uat=({x:e,y:t,width:r,height:n,origin:a})=>!r||!n?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-r*a[0],y:t-n*a[1]},dat=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Oue=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:s,onError:o}=As(dat,cl),l=lat(e.onlyRenderVisibleElements),c=C.useRef(),u=C.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const h=f.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));s(h)});return c.current=d,d},[]);return C.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),at.createElement("div",{className:"react-flow__nodes",style:UM},l.map(d=>{var j,I,E;let f=d.type||"default";e.nodeTypes[f]||(o==null||o("003",Dh.error003(f)),f="default");const h=e.nodeTypes[f]||e.nodeTypes.default,m=!!(d.draggable||t&&typeof d.draggable>"u"),g=!!(d.selectable||a&&typeof d.selectable>"u"),x=!!(d.connectable||r&&typeof d.connectable>"u"),v=!!(d.focusable||n&&typeof d.focusable>"u"),y=e.nodeExtent?TM(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,w=(y==null?void 0:y.x)??0,_=(y==null?void 0:y.y)??0,T=uat({x:w,y:_,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return at.createElement(h,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||_r.Bottom,targetPosition:d.targetPosition||_r.Top,hidden:d.hidden,xPos:w,yPos:_,xPosOrigin:T.x,yPosOrigin:T.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:m,isSelectable:g,isConnectable:x,isFocusable:v,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((j=d[Ts])==null?void 0:j.z)??0,isParent:!!((I=d[Ts])!=null&&I.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((E=d[Ts])!=null&&E.handleBounds)})}))};Oue.displayName="NodeRenderer";var fat=C.memo(Oue);const Aat=(e,t,r)=>r===_r.Left?e-t:r===_r.Right?e+t:e,hat=(e,t,r)=>r===_r.Top?e-t:r===_r.Bottom?e+t:e,FW="react-flow__edgeupdater",OW=({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:s,onMouseOut:o,type:l})=>at.createElement("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:o,className:Tl([FW,`${FW}-${l}`]),cx:Aat(t,n,e),cy:hat(r,n,e),r:n,stroke:"transparent",fill:"transparent"}),mat=()=>!0;var zx=e=>{const t=({id:r,className:n,type:a,data:s,onClick:o,onEdgeDoubleClick:l,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,style:v,source:y,target:w,sourceX:_,sourceY:T,targetX:j,targetY:I,sourcePosition:E,targetPosition:S,elementsSelectable:B,hidden:M,sourceHandleId:R,targetHandleId:k,onContextMenu:D,onMouseEnter:L,onMouseMove:Z,onMouseLeave:V,reconnectRadius:q,onReconnect:G,onReconnectStart:K,onReconnectEnd:ee,markerEnd:W,markerStart:P,rfId:U,ariaLabel:z,isFocusable:J,isReconnectable:te,pathOptions:se,interactionWidth:ie,disableKeyboardA11y:ce})=>{const de=C.useRef(null),[Be,ae]=C.useState(!1),[Se,ke]=C.useState(!1),ve=ao(),le=C.useMemo(()=>`url('#${XO(P,U)}')`,[P,U]),be=C.useMemo(()=>`url('#${XO(W,U)}')`,[W,U]);if(M)return null;const Pe=wt=>{var Fn;const{edges:Tr,addSelectedEdges:tr,unselectNodesAndEdges:sn,multiSelectionActive:kr}=ve.getState(),$r=Tr.find(Pr=>Pr.id===r);$r&&(B&&(ve.setState({nodesSelectionActive:!1}),$r.selected&&kr?(sn({nodes:[],edges:[$r]}),(Fn=de.current)==null||Fn.blur()):tr([r])),o&&o(wt,$r))},Ue=Ny(r,ve.getState,l),pe=Ny(r,ve.getState,D),Oe=Ny(r,ve.getState,L),Le=Ny(r,ve.getState,Z),Ge=Ny(r,ve.getState,V),et=(wt,Tr)=>{if(wt.button!==0)return;const{edges:tr,isValidConnection:sn}=ve.getState(),kr=Tr?w:y,$r=(Tr?k:R)||null,Fn=Tr?"target":"source",Pr=sn||mat,ms=Tr,pn=tr.find(rn=>rn.id===r);ke(!0),K==null||K(wt,pn,Fn);const la=rn=>{ke(!1),ee==null||ee(rn,pn,Fn)};Aue({event:wt,handleId:$r,nodeId:kr,onConnect:rn=>G==null?void 0:G(pn,rn),isTarget:ms,getState:ve.getState,setState:ve.setState,isValidConnection:Pr,edgeUpdaterType:Fn,onReconnectEnd:la})},ut=wt=>et(wt,!0),xt=wt=>et(wt,!1),It=()=>ae(!0),Mt=()=>ae(!1),Pt=!B&&!o,Ht=wt=>{var Tr;if(!ce&&tue.includes(wt.key)&&B){const{unselectNodesAndEdges:tr,addSelectedEdges:sn,edges:kr}=ve.getState();wt.key==="Escape"?((Tr=de.current)==null||Tr.blur(),tr({edges:[kr.find(Fn=>Fn.id===r)]})):sn([r])}};return at.createElement("g",{className:Tl(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:c,animated:u,inactive:Pt,updating:Be}]),onClick:Pe,onDoubleClick:Ue,onContextMenu:pe,onMouseEnter:Oe,onMouseMove:Le,onMouseLeave:Ge,onKeyDown:J?Ht:void 0,tabIndex:J?0:void 0,role:J?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":z===null?void 0:z||`Edge from ${y} to ${w}`,"aria-describedby":J?`${wue}-${U}`:void 0,ref:de},!Se&&at.createElement(e,{id:r,source:y,target:w,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,data:s,style:v,sourceX:_,sourceY:T,targetX:j,targetY:I,sourcePosition:E,targetPosition:S,sourceHandleId:R,targetHandleId:k,markerStart:le,markerEnd:be,pathOptions:se,interactionWidth:ie}),te&&at.createElement(at.Fragment,null,(te==="source"||te===!0)&&at.createElement(OW,{position:E,centerX:_,centerY:T,radius:q,onMouseDown:ut,onMouseEnter:It,onMouseOut:Mt,type:"source"}),(te==="target"||te===!0)&&at.createElement(OW,{position:S,centerX:j,centerY:I,radius:q,onMouseDown:xt,onMouseEnter:It,onMouseOut:Mt,type:"target"})))};return t.displayName="EdgeWrapper",C.memo(t)};function pat(e){const t={default:zx(e.default||HS),straight:zx(e.bezier||DM),step:zx(e.step||OM),smoothstep:zx(e.step||sj),simplebezier:zx(e.simplebezier||FM)},r={},n=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,s)=>(a[s]=zx(e[s]||HS),a),r);return{...t,...n}}function DW(e,t,r=null){const n=((r==null?void 0:r.x)||0)+t.x,a=((r==null?void 0:r.y)||0)+t.y,s=(r==null?void 0:r.width)||t.width,o=(r==null?void 0:r.height)||t.height;switch(e){case _r.Top:return{x:n+s/2,y:a};case _r.Right:return{x:n+s,y:a+o/2};case _r.Bottom:return{x:n+s/2,y:a+o};case _r.Left:return{x:n,y:a+o/2}}}function PW(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const gat=(e,t,r,n,a,s)=>{const o=DW(r,e,t),l=DW(s,n,a);return{sourceX:o.x,sourceY:o.y,targetX:l.x,targetY:l.y}};function xat({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:n,targetWidth:a,targetHeight:s,width:o,height:l,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+a),y2:Math.max(e.y+n,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=IM({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:o/c[2],height:l/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),h=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*h)>0}function RW(e){var n,a,s,o,l;const t=((n=e==null?void 0:e[Ts])==null?void 0:n.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const vat=[{level:0,isMaxLevel:!0,edges:[]}];function bat(e,t,r=!1){let n=-1;const a=e.reduce((o,l)=>{var d,f;const c=Hu(l.zIndex);let u=c?l.zIndex:0;if(r){const h=t.get(l.target),m=t.get(l.source),g=l.selected||(h==null?void 0:h.selected)||(m==null?void 0:m.selected),x=Math.max(((d=m==null?void 0:m[Ts])==null?void 0:d.z)||0,((f=h==null?void 0:h[Ts])==null?void 0:f.z)||0,1e3);u=(c?l.zIndex:0)+(g?x:0)}return o[u]?o[u].push(l):o[u]=[l],n=u>n?u:n,o},{}),s=Object.entries(a).map(([o,l])=>{const c=+o;return{edges:l,level:c,isMaxLevel:c===n}});return s.length===0?vat:s}function yat(e,t,r){const n=As(C.useCallback(a=>e?a.edges.filter(s=>{const o=t.get(s.source),l=t.get(s.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&xat({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:l.width,targetHeight:l.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return bat(n,t,r)}const wat=({color:e="none",strokeWidth:t=1})=>at.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Eat=({color:e="none",strokeWidth:t=1})=>at.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),LW={[QS.Arrow]:wat,[QS.ArrowClosed]:Eat};function Nat(e){const t=ao();return C.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(LW,e)?LW[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",Dh.error009(e)),null)},[e])}const Cat=({id:e,type:t,color:r,width:n=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const c=Nat(t);return c?at.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0"},at.createElement(c,{color:r,strokeWidth:o})):null},_at=({defaultColor:e,rfId:t})=>r=>{const n=[];return r.edges.reduce((a,s)=>([s.markerStart,s.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const l=XO(o,t);n.includes(l)||(a.push({id:l,color:o.color||e,...o}),n.push(l))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))},Due=({defaultColor:e,rfId:t})=>{const r=As(C.useCallback(_at({defaultColor:e,rfId:t}),[e,t]),(n,a)=>!(n.length!==a.length||n.some((s,o)=>s.id!==a[o].id)));return at.createElement("defs",null,r.map(n=>at.createElement(Cat,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};Due.displayName="MarkerDefinitions";var Sat=C.memo(Due);const kat=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Pue=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:n,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:x,children:v,disableKeyboardA11y:y})=>{const{edgesFocusable:w,edgesUpdatable:_,elementsSelectable:T,width:j,height:I,connectionMode:E,nodeInternals:S,onError:B}=As(kat,cl),M=yat(t,S,r);return j?at.createElement(at.Fragment,null,M.map(({level:R,edges:k,isMaxLevel:D})=>at.createElement("svg",{key:R,style:{zIndex:R},width:j,height:I,className:"react-flow__edges react-flow__container"},D&&at.createElement(Sat,{defaultColor:e,rfId:n}),at.createElement("g",null,k.map(L=>{const[Z,V,q]=RW(S.get(L.source)),[G,K,ee]=RW(S.get(L.target));if(!q||!ee)return null;let W=L.type||"default";a[W]||(B==null||B("011",Dh.error011(W)),W="default");const P=a[W]||a.default,U=E===Og.Strict?K.target:(K.target??[]).concat(K.source??[]),z=PW(V.source,L.sourceHandle),J=PW(U,L.targetHandle),te=(z==null?void 0:z.position)||_r.Bottom,se=(J==null?void 0:J.position)||_r.Top,ie=!!(L.focusable||w&&typeof L.focusable>"u"),ce=L.reconnectable||L.updatable,de=typeof h<"u"&&(ce||_&&typeof ce>"u");if(!z||!J)return B==null||B("008",Dh.error008(z,L)),null;const{sourceX:Be,sourceY:ae,targetX:Se,targetY:ke}=gat(Z,z,te,G,J,se);return at.createElement(P,{key:L.id,id:L.id,className:Tl([L.className,s]),type:W,data:L.data,selected:!!L.selected,animated:!!L.animated,hidden:!!L.hidden,label:L.label,labelStyle:L.labelStyle,labelShowBg:L.labelShowBg,labelBgStyle:L.labelBgStyle,labelBgPadding:L.labelBgPadding,labelBgBorderRadius:L.labelBgBorderRadius,style:L.style,source:L.source,target:L.target,sourceHandleId:L.sourceHandle,targetHandleId:L.targetHandle,markerEnd:L.markerEnd,markerStart:L.markerStart,sourceX:Be,sourceY:ae,targetX:Se,targetY:ke,sourcePosition:te,targetPosition:se,elementsSelectable:T,onContextMenu:o,onMouseEnter:l,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:x,rfId:n,ariaLabel:L.ariaLabel,isFocusable:ie,isReconnectable:de,pathOptions:"pathOptions"in L?L.pathOptions:void 0,interactionWidth:L.interactionWidth,disableKeyboardA11y:y})})))),v):null};Pue.displayName="EdgeRenderer";var jat=C.memo(Pue);const Bat=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Tat({children:e}){const t=As(Bat);return at.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Iat(e){const t=ij(),r=C.useRef(!1);C.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const Fat={[_r.Left]:_r.Right,[_r.Right]:_r.Left,[_r.Top]:_r.Bottom,[_r.Bottom]:_r.Top},Rue=({nodeId:e,handleType:t,style:r,type:n=W0.Bezier,CustomComponent:a,connectionStatus:s})=>{var I,E,S;const{fromNode:o,handleId:l,toX:c,toY:u,connectionMode:d}=As(C.useCallback(B=>({fromNode:B.nodeInternals.get(e),handleId:B.connectionHandleId,toX:(B.connectionPosition.x-B.transform[0])/B.transform[2],toY:(B.connectionPosition.y-B.transform[1])/B.transform[2],connectionMode:B.connectionMode}),[e]),cl),f=(I=o==null?void 0:o[Ts])==null?void 0:I.handleBounds;let h=f==null?void 0:f[t];if(d===Og.Loose&&(h=h||(f==null?void 0:f[t==="source"?"target":"source"])),!o||!h)return null;const m=l?h.find(B=>B.id===l):h[0],g=m?m.x+m.width/2:(o.width??0)/2,x=m?m.y+m.height/2:o.height??0,v=(((E=o.positionAbsolute)==null?void 0:E.x)??0)+g,y=(((S=o.positionAbsolute)==null?void 0:S.y)??0)+x,w=m==null?void 0:m.position,_=w?Fat[w]:null;if(!w||!_)return null;if(a)return at.createElement(a,{connectionLineType:n,connectionLineStyle:r,fromNode:o,fromHandle:m,fromX:v,fromY:y,toX:c,toY:u,fromPosition:w,toPosition:_,connectionStatus:s});let T="";const j={sourceX:v,sourceY:y,sourcePosition:w,targetX:c,targetY:u,targetPosition:_};return n===W0.Bezier?[T]=iue(j):n===W0.Step?[T]=WO({...j,borderRadius:0}):n===W0.SmoothStep?[T]=WO(j):n===W0.SimpleBezier?[T]=sue(j):T=`M${v},${y} ${c},${u}`,at.createElement("path",{d:T,fill:"none",className:"react-flow__connection-path",style:r})};Rue.displayName="ConnectionLine";const Oat=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Dat({containerStyle:e,style:t,type:r,component:n}){const{nodeId:a,handleType:s,nodesConnectable:o,width:l,height:c,connectionStatus:u}=As(Oat,cl);return!(a&&s&&l&&o)?null:at.createElement("svg",{style:e,width:l,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},at.createElement("g",{className:Tl(["react-flow__connection",u])},at.createElement(Rue,{nodeId:a,handleType:s,style:t,type:r,CustomComponent:n,connectionStatus:u})))}function MW(e,t){return C.useRef(null),ao(),C.useMemo(()=>t(e),[e])}const Lue=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:n,onMoveEnd:a,onInit:s,onNodeClick:o,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:m,onSelectionContextMenu:g,onSelectionStart:x,onSelectionEnd:v,connectionLineType:y,connectionLineStyle:w,connectionLineComponent:_,connectionLineContainerStyle:T,selectionKeyCode:j,selectionOnDrag:I,selectionMode:E,multiSelectionKeyCode:S,panActivationKeyCode:B,zoomActivationKeyCode:M,deleteKeyCode:R,onlyRenderVisibleElements:k,elementsSelectable:D,selectNodesOnDrag:L,defaultViewport:Z,translateExtent:V,minZoom:q,maxZoom:G,preventScrolling:K,defaultMarkerColor:ee,zoomOnScroll:W,zoomOnPinch:P,panOnScroll:U,panOnScrollSpeed:z,panOnScrollMode:J,zoomOnDoubleClick:te,panOnDrag:se,onPaneClick:ie,onPaneMouseEnter:ce,onPaneMouseMove:de,onPaneMouseLeave:Be,onPaneScroll:ae,onPaneContextMenu:Se,onEdgeContextMenu:ke,onEdgeMouseEnter:ve,onEdgeMouseMove:le,onEdgeMouseLeave:be,onReconnect:Pe,onReconnectStart:Ue,onReconnectEnd:pe,reconnectRadius:Oe,noDragClassName:Le,noWheelClassName:Ge,noPanClassName:et,elevateEdgesOnSelect:ut,disableKeyboardA11y:xt,nodeOrigin:It,nodeExtent:Mt,rfId:Pt})=>{const Ht=MW(e,cat),wt=MW(t,pat);return Iat(s),at.createElement(oat,{onPaneClick:ie,onPaneMouseEnter:ce,onPaneMouseMove:de,onPaneMouseLeave:Be,onPaneContextMenu:Se,onPaneScroll:ae,deleteKeyCode:R,selectionKeyCode:j,selectionOnDrag:I,selectionMode:E,onSelectionStart:x,onSelectionEnd:v,multiSelectionKeyCode:S,panActivationKeyCode:B,zoomActivationKeyCode:M,elementsSelectable:D,onMove:r,onMoveStart:n,onMoveEnd:a,zoomOnScroll:W,zoomOnPinch:P,zoomOnDoubleClick:te,panOnScroll:U,panOnScrollSpeed:z,panOnScrollMode:J,panOnDrag:se,defaultViewport:Z,translateExtent:V,minZoom:q,maxZoom:G,onSelectionContextMenu:g,preventScrolling:K,noDragClassName:Le,noWheelClassName:Ge,noPanClassName:et,disableKeyboardA11y:xt},at.createElement(Tat,null,at.createElement(jat,{edgeTypes:wt,onEdgeClick:l,onEdgeDoubleClick:u,onlyRenderVisibleElements:k,onEdgeContextMenu:ke,onEdgeMouseEnter:ve,onEdgeMouseMove:le,onEdgeMouseLeave:be,onReconnect:Pe,onReconnectStart:Ue,onReconnectEnd:pe,reconnectRadius:Oe,defaultMarkerColor:ee,noPanClassName:et,elevateEdgesOnSelect:!!ut,disableKeyboardA11y:xt,rfId:Pt},at.createElement(Dat,{style:w,type:y,component:_,containerStyle:T})),at.createElement("div",{className:"react-flow__edgelabel-renderer"}),at.createElement(fat,{nodeTypes:Ht,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:m,selectNodesOnDrag:L,onlyRenderVisibleElements:k,noPanClassName:et,noDragClassName:Le,disableKeyboardA11y:xt,nodeOrigin:It,nodeExtent:Mt,rfId:Pt})))};Lue.displayName="GraphView";var Pat=C.memo(Lue);const eD=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],D0={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:eD,nodeExtent:eD,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Og.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:unt,isValidConnection:void 0},Rat=()=>qZe((e,t)=>({...D0,setNodes:r=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:s}=t();e({nodeInternals:HI(r,n,a,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=t();e({edges:r.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(r,n)=>{const a=typeof r<"u",s=typeof n<"u",o=a?HI(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:s?n:[],hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:s,fitViewOnInitDone:o,fitViewOnInitOptions:l,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:h}=new window.DOMMatrixReadOnly(f.transform),m=r.reduce((x,v)=>{const y=a.get(v.id);if(y!=null&&y.hidden)a.set(y.id,{...y,[Ts]:{...y[Ts],handleBounds:void 0}});else if(y){const w=BM(v.nodeElement);!!(w.width&&w.height&&(y.width!==w.width||y.height!==w.height||v.forceUpdate))&&(a.set(y.id,{...y,[Ts]:{...y[Ts],handleBounds:{source:IW(".source",v.nodeElement,h,u),target:IW(".target",v.nodeElement,h,u)}},...w}),x.push({id:y.id,type:"dimensions",dimensions:w}))}return x},[]);Nue(a,u);const g=o||s&&!o&&Cue(t,{initial:!0,...l});e({nodeInternals:new Map(a),fitViewOnInitDone:g}),(m==null?void 0:m.length)>0&&(n==null||n(m))},updateNodePositions:(r,n=!0,a=!1)=>{const{triggerNodeChanges:s}=t(),o=r.map(l=>{const c={id:l.id,type:"position",dragging:a};return n&&(c.positionAbsolute=l.positionAbsolute,c.position=l.position),c});s(o)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:s,nodeOrigin:o,getNodes:l,elevateNodesOnSelect:c}=t();if(r!=null&&r.length){if(s){const u=Sue(r,l()),d=HI(u,a,o,c);e({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let o,l=null;n?o=r.map(c=>H0(c,!0)):(o=Ev(s(),r),l=Ev(a,[])),BC({changedNodes:o,changedEdges:l,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let o,l=null;n?o=r.map(c=>H0(c,!0)):(o=Ev(a,r),l=Ev(s(),[])),BC({changedNodes:l,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:a,getNodes:s}=t(),o=r||s(),l=n||a,c=o.map(d=>(d.selected=!1,H0(d.id,!1))),u=l.map(d=>H0(d.id,!1));BC({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:a}=t();n==null||n.scaleExtent([r,a]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:a}=t();n==null||n.scaleExtent([a,r]),e({maxZoom:r})},setTranslateExtent:r=>{var n;(n=t().d3Zoom)==null||n.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=t(),s=n().filter(l=>l.selected).map(l=>H0(l.id,!1)),o=r.filter(l=>l.selected).map(l=>H0(l.id,!1));BC({changedNodes:s,changedEdges:o,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:n}=t();n.forEach(a=>{a.positionAbsolute=TM(a.position,r)}),e({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:a,height:s,d3Zoom:o,d3Selection:l,translateExtent:c}=t();if(!o||!l||!r.x&&!r.y)return!1;const u=hm.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[a,s]],f=o==null?void 0:o.constrain()(u,d,c);return o.transform(l,f),n[0]!==f.x||n[1]!==f.y||n[2]!==f.k},cancelConnection:()=>e({connectionNodeId:D0.connectionNodeId,connectionHandleId:D0.connectionHandleId,connectionHandleType:D0.connectionHandleType,connectionStatus:D0.connectionStatus,connectionStartHandle:D0.connectionStartHandle,connectionEndHandle:D0.connectionEndHandle}),reset:()=>e({...D0})}),Object.is),QM=({children:e})=>{const t=C.useRef(null);return t.current||(t.current=Rat()),at.createElement(rnt,{value:t.current},e)};QM.displayName="ReactFlowProvider";const Mue=({children:e})=>C.useContext(aj)?at.createElement(at.Fragment,null,e):at.createElement(QM,null,e);Mue.displayName="ReactFlowWrapper";const Lat={input:gue,default:JO,output:vue,group:MM},Mat={default:HS,straight:DM,step:OM,smoothstep:sj,simplebezier:FM},Uat=[0,0],Qat=[15,15],Hat={x:0,y:0,zoom:1},Vat={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Uue=C.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:s=Lat,edgeTypes:o=Mat,onNodeClick:l,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onConnect:m,onConnectStart:g,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:y,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:T,onNodeContextMenu:j,onNodeDoubleClick:I,onNodeDragStart:E,onNodeDrag:S,onNodeDragStop:B,onNodesDelete:M,onEdgesDelete:R,onSelectionChange:k,onSelectionDragStart:D,onSelectionDrag:L,onSelectionDragStop:Z,onSelectionContextMenu:V,onSelectionStart:q,onSelectionEnd:G,connectionMode:K=Og.Strict,connectionLineType:ee=W0.Bezier,connectionLineStyle:W,connectionLineComponent:P,connectionLineContainerStyle:U,deleteKeyCode:z="Backspace",selectionKeyCode:J="Shift",selectionOnDrag:te=!1,selectionMode:se=T2.Full,panActivationKeyCode:ie="Space",multiSelectionKeyCode:ce=US()?"Meta":"Control",zoomActivationKeyCode:de=US()?"Meta":"Control",snapToGrid:Be=!1,snapGrid:ae=Qat,onlyRenderVisibleElements:Se=!1,selectNodesOnDrag:ke=!0,nodesDraggable:ve,nodesConnectable:le,nodesFocusable:be,nodeOrigin:Pe=Uat,edgesFocusable:Ue,edgesUpdatable:pe,elementsSelectable:Oe,defaultViewport:Le=Hat,minZoom:Ge=.5,maxZoom:et=2,translateExtent:ut=eD,preventScrolling:xt=!0,nodeExtent:It,defaultMarkerColor:Mt="#b1b1b7",zoomOnScroll:Pt=!0,zoomOnPinch:Ht=!0,panOnScroll:wt=!1,panOnScrollSpeed:Tr=.5,panOnScrollMode:tr=Gp.Free,zoomOnDoubleClick:sn=!0,panOnDrag:kr=!0,onPaneClick:$r,onPaneMouseEnter:Fn,onPaneMouseMove:Pr,onPaneMouseLeave:ms,onPaneScroll:pn,onPaneContextMenu:la,children:Ba,onEdgeContextMenu:rn,onEdgeDoubleClick:gr,onEdgeMouseEnter:Ze,onEdgeMouseMove:mt,onEdgeMouseLeave:Je,onEdgeUpdate:vt,onEdgeUpdateStart:Et,onEdgeUpdateEnd:bt,onReconnect:ar,onReconnectStart:xr,onReconnectEnd:Wr,reconnectRadius:Zr=10,edgeUpdaterRadius:Kr=10,onNodesChange:me,onEdgesChange:Ie,noDragClassName:_e="nodrag",noWheelClassName:Ne="nowheel",noPanClassName:je="nopan",fitView:Fe=!1,fitViewOptions:Ye,connectOnClick:ft=!0,attributionPosition:qe,proOptions:rt,defaultEdgeOptions:it,elevateNodesOnSelect:Ft=!0,elevateEdgesOnSelect:$t=!1,disableKeyboardA11y:Jt=!1,autoPanOnConnect:zt=!0,autoPanOnNodeDrag:qt=!0,connectionRadius:jr=20,isValidConnection:on,onError:ln,style:An,id:ps,nodeDragThreshold:So,...gs},ai)=>{const Ls=ps||"1";return at.createElement("div",{...gs,style:{...An,...Vat},ref:ai,className:Tl(["react-flow",a]),"data-testid":"rf__wrapper",id:ps},at.createElement(Mue,null,at.createElement(Pat,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:T,onNodeContextMenu:j,onNodeDoubleClick:I,nodeTypes:s,edgeTypes:o,connectionLineType:ee,connectionLineStyle:W,connectionLineComponent:P,connectionLineContainerStyle:U,selectionKeyCode:J,selectionOnDrag:te,selectionMode:se,deleteKeyCode:z,multiSelectionKeyCode:ce,panActivationKeyCode:ie,zoomActivationKeyCode:de,onlyRenderVisibleElements:Se,selectNodesOnDrag:ke,defaultViewport:Le,translateExtent:ut,minZoom:Ge,maxZoom:et,preventScrolling:xt,zoomOnScroll:Pt,zoomOnPinch:Ht,zoomOnDoubleClick:sn,panOnScroll:wt,panOnScrollSpeed:Tr,panOnScrollMode:tr,panOnDrag:kr,onPaneClick:$r,onPaneMouseEnter:Fn,onPaneMouseMove:Pr,onPaneMouseLeave:ms,onPaneScroll:pn,onPaneContextMenu:la,onSelectionContextMenu:V,onSelectionStart:q,onSelectionEnd:G,onEdgeContextMenu:rn,onEdgeDoubleClick:gr,onEdgeMouseEnter:Ze,onEdgeMouseMove:mt,onEdgeMouseLeave:Je,onReconnect:ar??vt,onReconnectStart:xr??Et,onReconnectEnd:Wr??bt,reconnectRadius:Zr??Kr,defaultMarkerColor:Mt,noDragClassName:_e,noWheelClassName:Ne,noPanClassName:je,elevateEdgesOnSelect:$t,rfId:Ls,disableKeyboardA11y:Jt,nodeOrigin:Pe,nodeExtent:It}),at.createElement(Fnt,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:m,onConnectStart:g,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:y,nodesDraggable:ve,nodesConnectable:le,nodesFocusable:be,edgesFocusable:Ue,edgesUpdatable:pe,elementsSelectable:Oe,elevateNodesOnSelect:Ft,minZoom:Ge,maxZoom:et,nodeExtent:It,onNodesChange:me,onEdgesChange:Ie,snapToGrid:Be,snapGrid:ae,connectionMode:K,translateExtent:ut,connectOnClick:ft,defaultEdgeOptions:it,fitView:Fe,fitViewOptions:Ye,onNodesDelete:M,onEdgesDelete:R,onNodeDragStart:E,onNodeDrag:S,onNodeDragStop:B,onSelectionDrag:L,onSelectionDragStart:D,onSelectionDragStop:Z,noPanClassName:je,nodeOrigin:Pe,rfId:Ls,autoPanOnConnect:zt,autoPanOnNodeDrag:qt,onError:ln,connectionRadius:jr,isValidConnection:on,nodeDragThreshold:So}),at.createElement(Tnt,{onSelectionChange:k}),Ba,at.createElement(ant,{proOptions:rt,position:qe}),at.createElement(Lnt,{rfId:Ls,disableKeyboardA11y:Jt})))});Uue.displayName="ReactFlow";function Que(e){return t=>{const[r,n]=C.useState(t),a=C.useCallback(s=>n(o=>e(s,o)),[]);return[r,n,a]}}const zat=Que(Sue),$at=Que(Jnt);function Gat(){return at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},at.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function qat(){return at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},at.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Kat(){return at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},at.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Wat(){return at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},at.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Xat(){return at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},at.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Zy=({children:e,className:t,...r})=>at.createElement("button",{type:"button",className:Tl(["react-flow__controls-button",t]),...r},e);Zy.displayName="ControlButton";const Yat=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Hue=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const h=ao(),[m,g]=C.useState(!1),{isInteractive:x,minZoomReached:v,maxZoomReached:y}=As(Yat,cl),{zoomIn:w,zoomOut:_,fitView:T}=ij();if(C.useEffect(()=>{g(!0)},[]),!m)return null;const j=()=>{w(),s==null||s()},I=()=>{_(),o==null||o()},E=()=>{T(a),l==null||l()},S=()=>{h.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c==null||c(!x)};return at.createElement(Jce,{className:Tl(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&at.createElement(at.Fragment,null,at.createElement(Zy,{onClick:j,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},at.createElement(Gat,null)),at.createElement(Zy,{onClick:I,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v},at.createElement(qat,null))),r&&at.createElement(Zy,{className:"react-flow__controls-fitview",onClick:E,title:"fit view","aria-label":"fit view"},at.createElement(Kat,null)),n&&at.createElement(Zy,{className:"react-flow__controls-interactive",onClick:S,title:"toggle interactivity","aria-label":"toggle interactivity"},x?at.createElement(Xat,null):at.createElement(Wat,null)),d)};Hue.displayName="Controls";var Jat=C.memo(Hue),Hd;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Hd||(Hd={}));function Zat({color:e,dimensions:t,lineWidth:r}){return at.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function est({color:e,radius:t}){return at.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const tst={[Hd.Dots]:"#91919a",[Hd.Lines]:"#eee",[Hd.Cross]:"#e2e2e2"},rst={[Hd.Dots]:1,[Hd.Lines]:1,[Hd.Cross]:6},nst=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Vue({id:e,variant:t=Hd.Dots,gap:r=20,size:n,lineWidth:a=1,offset:s=2,color:o,style:l,className:c}){const u=C.useRef(null),{transform:d,patternId:f}=As(nst,cl),h=o||tst[t],m=n||rst[t],g=t===Hd.Dots,x=t===Hd.Cross,v=Array.isArray(r)?r:[r,r],y=[v[0]*d[2]||1,v[1]*d[2]||1],w=m*d[2],_=x?[w,w]:y,T=g?[w/s,w/s]:[_[0]/s,_[1]/s];return at.createElement("svg",{className:Tl(["react-flow__background",c]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},at.createElement("pattern",{id:f+e,x:d[0]%y[0],y:d[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${T[0]},-${T[1]})`},g?at.createElement(est,{color:h,radius:w/s}):at.createElement(Zat,{dimensions:_,color:h,lineWidth:a})),at.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}Vue.displayName="Background";var ast=C.memo(Vue);function sst(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),t&&(n.href=t),a.href=e,a.href}const ist=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function pm(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}let $x=null;function zue(e={}){return $x||(e.includeStyleProperties?($x=e.includeStyleProperties,$x):($x=pm(window.getComputedStyle(document.documentElement)),$x))}function VS(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function ost(e){const t=VS(e,"border-left-width"),r=VS(e,"border-right-width");return e.clientWidth+t+r}function lst(e){const t=VS(e,"border-top-width"),r=VS(e,"border-bottom-width");return e.clientHeight+t+r}function $ue(e,t={}){const r=t.width||ost(e),n=t.height||lst(e);return{width:r,height:n}}function cst(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Tc=16384;function ust(e){(e.width>Tc||e.height>Tc)&&(e.width>Tc&&e.height>Tc?e.width>e.height?(e.height*=Tc/e.width,e.width=Tc):(e.width*=Tc/e.height,e.height=Tc):e.width>Tc?(e.height*=Tc/e.width,e.width=Tc):(e.width*=Tc/e.height,e.height=Tc))}function zS(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function dst(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function fst(e,t,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${t} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(e),dst(a)}const lc=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||lc(r,t)};function Ast(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function hst(e,t){return zue(t).map(r=>{const n=e.getPropertyValue(r),a=e.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function mst(e,t,r,n){const a=`.${e}:${t}`,s=r.cssText?Ast(r):hst(r,n);return document.createTextNode(`${a}{${s}}`)}function UW(e,t,r,n){const a=window.getComputedStyle(e,r),s=a.getPropertyValue("content");if(s===""||s==="none")return;const o=ist();try{t.className=`${t.className} ${o}`}catch{return}const l=document.createElement("style");l.appendChild(mst(o,r,a,n)),t.appendChild(l)}function pst(e,t,r){UW(e,t,":before",r),UW(e,t,":after",r)}const QW="application/font-woff",HW="image/jpeg",gst={woff:QW,woff2:QW,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:HW,jpeg:HW,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function xst(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function HM(e){const t=xst(e).toLowerCase();return gst[t]||""}function vst(e){return e.split(/,/)[1]}function tD(e){return e.search(/^(data:)/)!==-1}function bst(e,t){return`data:${t};base64,${e}`}async function Gue(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((s,o)=>{const l=new FileReader;l.onerror=o,l.onloadend=()=>{try{s(r({res:n,result:l.result}))}catch(c){o(c)}},l.readAsDataURL(a)})}const GI={};function yst(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function VM(e,t,r){const n=yst(e,t,r.includeQueryParams);if(GI[n]!=null)return GI[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const s=await Gue(e,r.fetchRequestInit,({res:o,result:l})=>(t||(t=o.headers.get("Content-Type")||""),vst(l)));a=bst(s,t)}catch(s){a=r.imagePlaceholder||"";let o=`Failed to fetch resource: ${e}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return GI[n]=a,a}async function wst(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):zS(t)}async function Est(e,t){if(e.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,o==null||o.drawImage(e,0,0,s.width,s.height);const l=s.toDataURL();return zS(l)}const r=e.poster,n=HM(r),a=await VM(r,n,t);return zS(a)}async function Nst(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await oj(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function Cst(e,t){return lc(e,HTMLCanvasElement)?wst(e):lc(e,HTMLVideoElement)?Est(e,t):lc(e,HTMLIFrameElement)?Nst(e,t):e.cloneNode(que(e))}const _st=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",que=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function Sst(e,t,r){var n,a;if(que(t))return t;let s=[];return _st(e)&&e.assignedNodes?s=pm(e.assignedNodes()):lc(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?s=pm(e.contentDocument.body.childNodes):s=pm(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),s.length===0||lc(e,HTMLVideoElement)||await s.reduce((o,l)=>o.then(()=>oj(l,r)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function kst(e,t,r){const n=t.style;if(!n)return;const a=window.getComputedStyle(e);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):zue(r).forEach(s=>{let o=a.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),lc(e,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&t.getAttribute("d")&&(o=`path(${t.getAttribute("d")})`),n.setProperty(s,o,a.getPropertyPriority(s))})}function jst(e,t){lc(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),lc(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function Bst(e,t){if(lc(e,HTMLSelectElement)){const r=t,n=Array.from(r.children).find(a=>e.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function Tst(e,t,r){return lc(t,Element)&&(kst(e,t,r),pst(e,t,r),jst(e,t),Bst(e,t)),t}async function Ist(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const n={};for(let s=0;s<r.length;s++){const l=r[s].getAttribute("xlink:href");if(l){const c=e.querySelector(l),u=document.querySelector(l);!c&&u&&!n[l]&&(n[l]=await oj(u,t,!0))}}const a=Object.values(n);if(a.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const l=document.createElementNS(s,"defs");o.appendChild(l);for(let c=0;c<a.length;c++)l.appendChild(a[c]);e.appendChild(o)}return e}async function oj(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>Cst(n,t)).then(n=>Sst(e,n,t)).then(n=>Tst(e,n,t)).then(n=>Ist(n,t))}const Kue=/url\((['"]?)([^'"]+?)\1\)/g,Fst=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Ost=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Dst(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Pst(e){const t=[];return e.replace(Kue,(r,n,a)=>(t.push(a),r)),t.filter(r=>!tD(r))}async function Rst(e,t,r,n,a){try{const s=r?sst(t,r):t,o=HM(t);let l;return a||(l=await VM(s,o,n)),e.replace(Dst(t),`$1${l}$3`)}catch{}return e}function Lst(e,{preferredFontFormat:t}){return t?e.replace(Ost,r=>{for(;;){const[n,,a]=Fst.exec(r)||[];if(!a)return"";if(a===t)return`src: ${n};`}}):e}function Wue(e){return e.search(Kue)!==-1}async function Xue(e,t,r){if(!Wue(e))return e;const n=Lst(e,r);return Pst(n).reduce((s,o)=>s.then(l=>Rst(l,o,t,r)),Promise.resolve(n))}async function Gx(e,t,r){var n;const a=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(a){const s=await Xue(a,null,r);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function Mst(e,t){await Gx("background",e,t)||await Gx("background-image",e,t),await Gx("mask",e,t)||await Gx("-webkit-mask",e,t)||await Gx("mask-image",e,t)||await Gx("-webkit-mask-image",e,t)}async function Ust(e,t){const r=lc(e,HTMLImageElement);if(!(r&&!tD(e.src))&&!(lc(e,SVGImageElement)&&!tD(e.href.baseVal)))return;const n=r?e.src:e.href.baseVal,a=await VM(n,HM(n),t);await new Promise((s,o)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...c)=>{try{s(t.onImageErrorHandler(...c))}catch(u){o(u)}}:o;const l=e;l.decode&&(l.decode=s),l.loading==="lazy"&&(l.loading="eager"),r?(e.srcset="",e.src=a):e.href.baseVal=a})}async function Qst(e,t){const n=pm(e.childNodes).map(a=>Yue(a,t));await Promise.all(n).then(()=>e)}async function Yue(e,t){lc(e,Element)&&(await Mst(e,t),await Ust(e,t),await Qst(e,t))}function Hst(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),e}const VW={};async function zW(e){let t=VW[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},VW[e]=t,t}async function $W(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async o=>{let l=o.replace(n,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),Gue(l,t.fetchRequestInit,({result:c})=>(r=r.replace(o,`url(${c})`),[o,c]))});return Promise.all(s).then(()=>r)}function GW(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=a.exec(n);if(c===null)break;t.push(c[0])}n=n.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(o,"gi");for(;;){let c=s.exec(n);if(c===null){if(c=l.exec(n),c===null)break;s.lastIndex=l.lastIndex}else l.lastIndex=s.lastIndex;t.push(c[0])}return t}async function Vst(e,t){const r=[],n=[];return e.forEach(a=>{if("cssRules"in a)try{pm(a.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let l=o+1;const c=s.href,u=zW(c).then(d=>$W(d,t)).then(d=>GW(d).forEach(f=>{try{a.insertRule(f,f.startsWith("@import")?l+=1:a.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:f,error:h})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(u)}})}catch(s){const o=e.find(l=>l.href==null)||document.styleSheets[0];a.href!=null&&n.push(zW(a.href).then(l=>$W(l,t)).then(l=>GW(l).forEach(c=>{o.insertRule(c,o.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(e.forEach(a=>{if("cssRules"in a)try{pm(a.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),r))}function zst(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Wue(t.style.getPropertyValue("src")))}async function $st(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=pm(e.ownerDocument.styleSheets),n=await Vst(r,t);return zst(n)}function Jue(e){return e.trim().replace(/["']/g,"")}function Gst(e){const t=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{t.add(Jue(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(e),t}async function qst(e,t){const r=await $st(e,t),n=Gst(e);return(await Promise.all(r.filter(s=>n.has(Jue(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return Xue(s.cssText,o,t)}))).join(`
`)}async function Kst(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await qst(e,t);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function Wst(e,t={}){const{width:r,height:n}=$ue(e,t),a=await oj(e,t,!0);return await Kst(a,t),await Yue(a,t),Hst(a,t),await fst(a,r,n)}async function Xst(e,t={}){const{width:r,height:n}=$ue(e,t),a=await Wst(e,t),s=await zS(a),o=document.createElement("canvas"),l=o.getContext("2d"),c=t.pixelRatio||cst(),u=t.canvasWidth||r,d=t.canvasHeight||n;return o.width=u*c,o.height=d*c,t.skipAutoScale||ust(o),o.style.width=`${u}`,o.style.height=`${d}`,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,o.width,o.height)),l.drawImage(s,0,0,o.width,o.height),o}async function lj(e,t={}){return(await Xst(e,t)).toDataURL()}const Zue="recursos_crucigramas",cj="recursos_lineas_de_tiempo",uj="recursos_mapas_mentales",ede="recursos_sopas_de_letras",dj=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,createdAt:((s=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.createdAt}},Yst=e=>{const t=Vt(pt(lt,Zue),cr("fechaCreacion","desc"));return hr(t,r=>{const n=r.docs.map(a=>dj(a));e(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),e([])})},Jst=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:ir.fromDate(new Date)};return(await an(pt(lt,Zue),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},Zst=e=>{const t=Vt(pt(lt,cj),cr("createdAt","desc"));return hr(t,r=>{const n=r.docs.map(a=>dj(a));e(n)},r=>{console.error("Error al suscribirse a las líneas de tiempo:",r),e([])})},eit=async(e,t)=>{try{const{id:r,...n}=e,a=rr(lt,cj,r);await yi(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la línea de tiempo:",r),new Error("No se pudo guardar la línea de tiempo.")}},tit=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date)};return(await an(pt(lt,cj),r)).id}catch(r){throw console.error("Error al crear la línea de tiempo:",r),new Error("No se pudo crear la línea de tiempo.")}},rit=async e=>{try{const t=rr(lt,cj,e);await ka(t)}catch(t){throw console.error("Error al eliminar la línea de tiempo:",t),new Error("No se pudo eliminar la línea de tiempo.")}},nit=e=>{const t=Vt(pt(lt,uj),cr("createdAt","desc"));return hr(t,r=>{const n=r.docs.map(a=>dj(a));e(n)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),e([])})},ait=async(e,t)=>{try{const{id:r,...n}=e,a=rr(lt,uj,r);await yi(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},sit=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date)};return(await an(pt(lt,uj),r)).id}catch(r){throw console.error("Error al crear el mapa mental:",r),new Error("No se pudo crear el mapa mental.")}},iit=async e=>{try{const t=rr(lt,uj,e);await ka(t)}catch(t){throw console.error("Error al eliminar el mapa mental:",t),new Error("No se pudo eliminar el mapa mental.")}},oit=e=>{const t=Vt(pt(lt,ede),cr("createdAt","desc"));return hr(t,r=>{const n=r.docs.map(a=>dj(a));e(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),e([])})},lit=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date)};return(await an(pt(lt,ede),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},cit=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),uit=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),dit=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),fit=({data:e})=>{const t={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Práctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=t[e.type||"default"]||t.default;return i.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[i.jsx(Ob,{type:"target",position:_r.Left,className:"w-2 h-2 !bg-slate-400"}),i.jsx("span",{className:"text-xl",children:e.icon||"🧠"}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:e.label}),e.type&&i.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.type})]}),i.jsx(Ob,{type:"source",position:_r.Right,className:"w-2 h-2 !bg-slate-400"})]})},rD=(e,t)=>!e.children||e.children.length===0?t:e.children.reduce((r,n)=>r+rD(n,t),0),nD=(e,t="tree")=>{const r=[],n=[];if(t==="tree"){const o=(l,c,u)=>{r.push({id:l.id,position:{x:c*280,y:u},data:{label:l.label,icon:l.icon,type:l.type},type:"custom"});const d=rD(l,100);let f=u-d/2+100/2;(l.children||[]).forEach(h=>{const m=rD(h,100),g=f+m/2-100/2;n.push({id:`e-${l.id}-${h.id}`,source:l.id,target:h.id,type:"smoothstep",animated:!0}),o(h,c+1,g),f+=m})};o(e,0,0)}else{r.push({id:e.id,position:{x:0,y:0},data:{label:e.label,icon:e.icon,type:e.type},type:"custom"});const o=300,l=500;(e.children||[]).forEach((c,u)=>{const d=u/e.children.length*2*Math.PI;r.push({id:c.id,position:{x:o*Math.cos(d),y:o*Math.sin(d)},data:{label:c.label,icon:c.icon,type:c.type},type:"custom"}),n.push({id:`e-${e.id}-${c.id}`,source:e.id,target:c.id,type:"smoothstep"}),(c.children||[]).forEach((f,h)=>{const m=d+(h-(c.children.length-1)/2)*.25;r.push({id:f.id,position:{x:l*Math.cos(m),y:l*Math.sin(m)},data:{label:f.label,icon:f.icon,type:f.type},type:"custom"}),n.push({id:`e-${c.id}-${f.id}`,source:c.id,target:f.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},tde=({node:e,onUpdate:t,onAddChild:r,onDelete:n,level:a=0})=>{const s=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],o=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return i.jsxs("div",{className:`pl-4 ${a>0?"border-l "+o[a-1%o.length]:""}`,children:[i.jsx("div",{className:`p-2 rounded-lg my-1 ${s[a%s.length]}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",value:e.label,onChange:l=>t(e.id,l.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),i.jsx("button",{onClick:()=>r(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),a>0&&i.jsx("button",{onClick:()=>n(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),(e.children||[]).map(l=>i.jsx(tde,{node:l,onUpdate:t,onAddChild:r,onDelete:n,level:a+1},l.id))]})},Ait={custom:fit},hit=({mapData:e,onBack:t,onSave:r})=>{const[n,a]=C.useState(e.treeData),[s,o]=C.useState("tree"),[l,c]=C.useState(!1),[u,d,f]=zat([]),[h,m,g]=$at([]),{fitView:x}=ij();C.useEffect(()=>{const{nodes:j,edges:I}=nD(n,s);d(j),m(I),setTimeout(()=>x({duration:300}),50)},[n,s,d,m,x]);const v=(j,I)=>{const E=JSON.parse(JSON.stringify(n)),S=B=>B.id===j?(B.label=I,!0):(B.children||[]).some(S);S(E),a(E)},y=j=>{const I=JSON.parse(JSON.stringify(n)),E=S=>S.id===j?(S.children||(S.children=[]),S.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(S.children||[]).some(E);E(I),a(I)},w=j=>{const I=JSON.parse(JSON.stringify(n)),E=S=>{const B=(S.children||[]).findIndex(M=>M.id===j);return B!==-1?(S.children.splice(B,1),!0):(S.children||[]).some(E)};E(I),a(I)},_=()=>{c(!0);const{nodes:j,edges:I}=nD(n,s);r({...e,treeData:n,nodes:j,edges:I}),setTimeout(()=>c(!1),1e3)},T=async j=>{const I=document.querySelector(".react-flow");I&&lj(I,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(E=>{{const S=document.createElement("a");S.download=`${e.tema}.png`,S.href=E,S.click()}}).catch(E=>console.error("oops, something went wrong!",E))};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:e.tema}),i.jsx("button",{onClick:t,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:i.jsxs(Uue,{nodes:u,edges:h,onNodesChange:f,onEdgesChange:g,fitView:!0,nodeTypes:Ait,children:[i.jsx(Jat,{}),i.jsx(ast,{})]})}),i.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),i.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[i.jsxs("button",{onClick:()=>o("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[i.jsx(uit,{})," Vista en árbol"]}),i.jsxs("button",{onClick:()=>o("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[i.jsx(dit,{})," Vista central"]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:i.jsx(tde,{node:n,onUpdate:v,onAddChild:y,onDelete:w})}),i.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>T(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),i.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:l?"Guardado!":"Guardar"})]})]})]})]})},mit=({onBack:e,currentUser:t})=>{const[r,n]=C.useState("list"),[a,s]=C.useState([]),[o,l]=C.useState(null),[c,u]=C.useState(!1),[d,f]=C.useState(!0),[h,m]=C.useState(""),[g,x]=C.useState(""),[v,y]=C.useState("");C.useEffect(()=>{f(!0);const E=nit(S=>{s(S),f(!1)});return()=>E()},[]);const w=async E=>{if(E.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const S="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",B=`
            Basado en el tema central "${h}", y considerando el contenido adicional "${v}", genera una estructura jerárquica para un mapa mental con al menos 3 niveles de profundidad.
            
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            
            La estructura del JSON debe ser un objeto raíz con las siguientes claves:
            - "label": El tema central ("${h}").
            - "icon": Un emoji que represente el tema.
            - "type": La categoría, que para el nodo raíz debe ser "Concepto Clave".
            - "children": Un array de 2 a 4 nodos hijos.

            Cada nodo hijo (y sus descendientes) debe tener esta misma estructura:
            - "label": El texto del subtema.
            - "icon": Un emoji representativo.
            - "type": Una categoría descriptiva (ej: "Concepto Clave", "Ejemplo Práctico", "Dato Interesante", "Pregunta Abierta").
            - "children": Un array de nodos hijos, o un array vacío si es un nodo final.
        `;try{const Z=(await(await new Ps(S).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(B)).response).text().replace(/^```json\s*|```\s*$/g,""),V=JSON.parse(Z),q=U=>({id:crypto.randomUUID(),label:U.label||"Sin etiqueta",icon:U.icon||"🧠",type:U.type||"default",children:(U.children||[]).map(q)}),G=q(V),{nodes:K,edges:ee}=nD(G),W={tema:h,nivel:g,treeData:G,nodes:K,edges:ee},P=await sit(W,t);l({...W,id:P,createdAt:new Date().toISOString()}),n("editor")}catch(M){console.error("AI Generation Error:",M),alert("Hubo un error al generar el mapa mental. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{u(!1)}},_=async E=>{try{await ait(E,t)}catch(S){console.error("Error saving mind map:",S),alert("No se pudo guardar el mapa mental.")}},T=E=>{l(E),n("editor")},j=async E=>{if(window.confirm("¿Eliminar este mapa mental?"))try{await iit(E)}catch(S){console.error("Error deleting mind map:",S),alert("No se pudo eliminar el mapa mental.")}},I=()=>{switch(r){case"editor":return o?i.jsx(QM,{children:i.jsx(hit,{mapData:o,onBack:()=>n("list"),onSave:_})}):null;case"config":return i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),i.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",id:"tema",value:h,onChange:E=>m(E.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),i.jsx("textarea",{id:"contenido",value:v,onChange:E=>y(E.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsx("div",{className:"flex justify-end pt-4",children:i.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:c?i.jsx(cit,{}):"Generar Mapa con IA"})})]})]});case"list":default:return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),i.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(E=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[i.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:E.tema}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(E.createdAt).toLocaleDateString("es-CL")]}),i.jsxs("div",{className:"mt-4 flex gap-2",children:[i.jsx("button",{onClick:()=>T(E),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),i.jsx("button",{onClick:()=>j(E.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},E.id)):i.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return d?i.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("span",{className:"text-4xl",children:"🧠"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),I()]})},pit=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),git=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),xit=({onBack:e,currentUser:t})=>{const[r,n]=C.useState([]),[a,s]=C.useState("Media"),[o,l]=C.useState(10),[c,u]=C.useState(!1),[d,f]=C.useState(Array(10).fill("")),[h,m]=C.useState(""),[g,x]=C.useState(null),[v,y]=C.useState({ai:!1,puzzle:!1,data:!0}),w=C.useRef(null);C.useEffect(()=>{y(R=>({...R,data:!0}));const M=oit(R=>{n(R),y(k=>({...k,data:!1}))});return()=>M()},[]),C.useEffect(()=>{f(M=>{const R=Array(o).fill("");for(let k=0;k<Math.min(M.length,o);k++)R[k]=M[k];return R})},[o]);const _=(M,R)=>{const k=[...d];k[M]=R,f(k)},T=async()=>{if(h.trim()){y(M=>({...M,ai:!0}));try{const M="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",k=new Ps(M).getGenerativeModel({model:"gemini-1.5-flash-latest"}),D=`
                Genera una lista de ${o} palabras clave en español, estrictamente relacionadas con el tema "${h}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una sola clave: "palabras".
                El valor de "palabras" debe ser un array de ${o} strings.
                Cada string en el array debe ser una sola palabra, sin espacios ni caracteres especiales.
            `,q=(await(await k.generateContent(D)).response).text().replace(/^```json\s*|```\s*$/g,""),G=JSON.parse(q);if(!G.palabras||!Array.isArray(G.palabras))throw new Error("La respuesta de la IA no contiene el array 'palabras' esperado.");const ee=[...G.palabras.map(W=>W.toUpperCase().replace(/[^A-ZÑ]/g,"")).slice(0,o)];for(;ee.length<o;)ee.push("");f(ee)}catch(M){console.error("Error generating words with AI:",M),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{y(M=>({...M,ai:!1}))}}},j=(M,R,k,D,L,Z)=>{for(let V=0;V<M.length;V++){const q=k+V*L.y,G=D+V*L.x;if(q<0||q>=Z||G<0||G>=Z||R[q][G]&&R[q][G]!==M[V])return!1}return!0},I=(M,R,k,D,L)=>{for(let Z=0;Z<M.length;Z++)R[k+Z*L.y][D+Z*L.x]=M[Z]},E=async()=>{y(q=>({...q,puzzle:!0})),x(null),await new Promise(q=>setTimeout(q,100));const M=d.map(q=>q.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(M.length===0){alert("Por favor, ingrese al menos una palabra válida."),y(q=>({...q,puzzle:!1}));return}const R=Math.max(...M.map(q=>q.length));let k=Math.max(R,M.length)+2;a==="Media"&&(k+=3),a==="Difícil"&&(k+=5),k=Math.min(Math.max(k,10),25);const D=Array(k).fill(null).map(()=>Array(k).fill(null)),L=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];a!=="Fácil"&&L.push({x:1,y:-1}),a==="Difícil"&&L.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const q of M.sort((G,K)=>K.length-G.length)){let G=!1;for(let K=0;K<100;K++){const ee=L[Math.floor(Math.random()*L.length)],W=Math.floor(Math.random()*k),P=Math.floor(Math.random()*k);if(j(q,D,W,P,ee,k)){I(q,D,W,P,ee),G=!0;break}}G||console.warn(`No se pudo colocar la palabra: ${q}`)}const Z=D.map(q=>q.map(G=>G||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)])),V={tema:h||"Personalizado",grid:Z.map(q=>q.join("")),words:M.sort()};try{const q=await lit(V,t);x({...V,id:q,createdAt:new Date().toISOString()})}catch(q){console.error("Error saving puzzle:",q),alert("No se pudo guardar la sopa de letras.")}finally{y(q=>({...q,puzzle:!1}))}},S=()=>{w.current&&lj(w.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(M=>{const R=document.createElement("a");R.download="sopa-de-letras.png",R.href=M,R.click()}).catch(M=>{console.error("oops, something went wrong!",M),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})},B=()=>{var k;if(!g)return null;const M=((k=g.grid[0])==null?void 0:k.length)||1,R=g.grid.join("").split("");return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{ref:w,className:"p-6 bg-white",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[i.jsx("div",{className:"md:col-span-2",children:i.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${M}, minmax(0, 1fr))`},children:R.map((D,L)=>i.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:D},L))})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),i.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:g.words.map(D=>i.jsx("li",{children:D},D))})]})]})}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),i.jsx("button",{onClick:S,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return v.data?i.jsx("div",{className:"text-center py-10",children:"Cargando..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-4xl",children:"🅰️"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!g&&i.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),i.jsxs("select",{value:a,onChange:M=>s(M.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{children:"Fácil"}),i.jsx("option",{children:"Media"}),i.jsx("option",{children:"Difícil"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(M=>i.jsx("button",{onClick:()=>{l(M),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!c&&o===M?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:M},M)),i.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${c?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),c&&i.jsx("input",{type:"number",value:o,onChange:M=>l(parseInt(M.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:M=>m(M.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:T,disabled:v.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:v.ai?i.jsx(pit,{}):i.jsxs(i.Fragment,{children:[i.jsx(git,{}),i.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((M,R)=>i.jsx("input",{type:"text",value:M,onChange:k=>_(R,k.target.value),placeholder:`Palabra ${R+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},R))})]}),i.jsx("div",{className:"text-right pt-4",children:i.jsx("button",{onClick:E,disabled:v.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:v.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),g&&B()]})},vit=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),bit=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),yit=({timeline:e,onSave:t,onBack:r})=>{const[n,a]=C.useState(e),[s,o]=C.useState(null),l=C.useRef(null),c=(m,g,x)=>{a(v=>({...v,events:v.events.map(y=>y.id===m?{...y,[g]:x}:y)}))},u=()=>{const m={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},g=[...n.events,m].sort((x,v)=>parseInt(x.date)-parseInt(v.date));a(x=>({...x,events:g}))},d=m=>{a(g=>({...g,events:g.events.filter(x=>x.id!==m)}))},f=async m=>{if(!m.description.trim()){alert("Escribe al menos una idea en la descripción para que la IA la complete.");return}o(m.id);const g="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",x=`
            Para una línea de tiempo sobre "${n.tema}", toma la siguiente idea para un hito y mejórala.
            Idea del usuario: "${m.description}"

            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional, con tres claves:
            1. "date": El año o fecha más precisa y relevante para esta idea.
            2. "description": Una descripción concisa (máximo 15 palabras) para la línea de tiempo.
            3. "icon": Un único emoji que represente el hito.
        `;try{const j=(await(await new Ps(g).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(x)).response).text().replace(/^```json\s*|```\s*$/g,""),I=JSON.parse(j);a(E=>({...E,events:E.events.map(S=>S.id===m.id?{...S,date:I.date,description:I.description,icon:I.icon}:S).sort((S,B)=>parseInt(S.date)-parseInt(B.date))}))}catch(v){console.error("Error al generar descripción del hito:",v),alert("No se pudo autocompletar el hito.")}finally{o(null)}},h=()=>{l.current&&lj(l.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(m=>{const g=document.createElement("a");g.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,g.href=m,g.click()}).catch(m=>{console.error("Error al generar la imagen:",m),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),i.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:i.jsxs("div",{ref:l,className:"relative p-10",children:[i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),i.jsx("div",{className:"relative",children:n.events.sort((m,g)=>parseInt(m.date)-parseInt(g.date)).map((m,g)=>{const x=g%2===0;return i.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[i.jsx("div",{className:"w-1/2",children:x&&i.jsx("div",{className:"text-right pr-8",children:i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[i.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})}),i.jsx("div",{className:"z-10 flex-shrink-0",children:i.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),i.jsx("div",{className:"w-1/2",children:!x&&i.jsx("div",{className:"text-left pl-8",children:i.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[i.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),i.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})})]},m.id)})})]})}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),i.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(m=>i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[i.jsx("input",{type:"text",value:m.date,onChange:g=>c(m.id,"date",g.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("textarea",{value:m.description,onChange:g=>c(m.id,"description",g.target.value),placeholder:"Descripción",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),i.jsx("button",{onClick:()=>f(m),disabled:s===m.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:s===m.id?i.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):i.jsx(bit,{})})]}),i.jsx("button",{onClick:()=>d(m.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},m.id))}),i.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[i.jsx("button",{onClick:u,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:h,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),i.jsx("button",{onClick:()=>t(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},wit=({onBack:e,currentUser:t})=>{const[r,n]=C.useState("list"),[a,s]=C.useState([]),[o,l]=C.useState(null),[c,u]=C.useState(!1),[d,f]=C.useState(!0),[h,m]=C.useState(""),[g,x]=C.useState(""),[v,y]=C.useState("");C.useEffect(()=>{f(!0);const j=Zst(I=>{s(I),f(!1)});return()=>j()},[]);const w=async j=>{if(j.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const I="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",E=g&&v?`entre ${g} y ${v}`:g?`a partir de ${g}`:v?`hasta ${v}`:"",S=`
            Genera una línea de tiempo sobre el tema "${h}" ${E}.
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            El objeto debe tener una clave "events", que es un array de 5 a 10 objetos.
            Cada objeto en el array "events" debe tener tres claves:
            1. "date": Un string con la fecha o el año del hito.
            2. "description": Un string con la descripción breve del hito (máximo 15 palabras).
            3. "icon": Un string con un único emoji que represente el hito.
            Ordena los eventos cronológicamente.
        `;try{const L=(await(await new Ps(I).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(S)).response).text().replace(/^```json\s*|```\s*$/g,""),Z=JSON.parse(L);if(!Z.events||!Array.isArray(Z.events))throw new Error("La respuesta de la IA no tiene el formato de eventos esperado.");const V={tema:h,fechaInicio:g,fechaFin:v,events:Z.events.map(G=>({id:crypto.randomUUID(),date:G.date||"Sin fecha",description:G.description||"Sin descripción",icon:G.icon||"🗓️"}))},q=await tit(V,t);l({...V,id:q,createdAt:new Date().toISOString()}),n("editor")}catch(B){console.error("AI Generation Error:",B),alert("Hubo un error al generar la línea de tiempo. Por favor, revisa el formato del tema o inténtalo de nuevo.")}finally{u(!1)}},_=async j=>{try{await eit(j,t),n("list"),l(null)}catch(I){console.error("Error saving timeline:",I),alert("No se pudo guardar la línea de tiempo.")}},T=async j=>{if(window.confirm("¿Eliminar esta línea de tiempo?"))try{await rit(j)}catch(I){console.error("Error deleting timeline:",I),alert("No se pudo eliminar la línea de tiempo.")}};return r==="editor"&&o?i.jsx(yit,{timeline:o,onSave:_,onBack:()=>n("list")}):d?i.jsx("div",{className:"text-center py-10",children:"Cargando líneas de tiempo..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-4xl",children:"🕒"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),i.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",id:"tema",value:h,onChange:j=>m(j.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),i.jsx("input",{type:"text",id:"fechaInicio",value:g,onChange:j=>x(j.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),i.jsx("input",{type:"text",id:"fechaFin",value:v,onChange:j=>y(j.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),i.jsx("div",{className:"text-right",children:i.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:c?i.jsx(vit,{}):"Generar con IA"})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),a.length>0?a.map(j=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:j.tema}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(j.createdAt).toLocaleDateString("es-CL")]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{l(j),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),i.jsx("button",{onClick:()=>T(j.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},j.id)):i.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},Eit=()=>i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),qW=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Nit=({onBack:e,currentUser:t})=>{const[r,n]=C.useState([]),[a,s]=C.useState(10),[o,l]=C.useState(!1),[c,u]=C.useState(Array(10).fill("")),[d,f]=C.useState(Array(10).fill("")),[h,m]=C.useState(""),[g,x]=C.useState(null),[v,y]=C.useState(!1),[w,_]=C.useState({ai:!1,puzzle:!1,data:!0}),[T,j]=C.useState(null),I=C.useRef(null);C.useEffect(()=>{_(Z=>({...Z,data:!0}));const L=Yst(Z=>{const V=Z.map(q=>{const{grid_flat:G,grid_width:K,...ee}=q,W=[];if(G&&K>0)for(let P=0;P<G.length;P+=K)W.push(G.slice(P,P+K));return{...ee,grid:W}});n(V),_(q=>({...q,data:!1}))});return()=>L()},[]),C.useEffect(()=>{const L=a;u(Z=>Array.from({length:L},(V,q)=>Z[q]||"")),f(Z=>Array.from({length:L},(V,q)=>Z[q]||""))},[a]);const E=(L,Z)=>{const V=[...c];V[L]=Z,u(V)},S=(L,Z)=>{const V=[...d];V[L]=Z,f(V)},B=async()=>{if(h.trim()){_(L=>({...L,ai:!0}));try{const L="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",V=new Ps(L).getGenerativeModel({model:"gemini-1.5-flash-latest"}),q=`
                Genera una lista de ${a} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${h}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una clave "items", que es un array de ${a} objetos.
                Cada objeto en el array "items" debe tener dos claves:
                1. "word": Un string con la palabra (sin espacios y en mayúsculas).
                2. "clue": Un string con la pista para esa palabra.
            `;let W=(await(await V.generateContent(q)).response).text().replace(/^```json\s*|```\s*$/g,"").trim();const P=W.indexOf("{"),U=W.lastIndexOf("}");P!==-1&&U!==-1&&(W=W.substring(P,U+1)),W=W.replace(/},\s*([\r\n\s]*){/g,"}__SPLIT__{"),W.includes("__SPLIT__")&&(W=W.replace(/("items"\s*:\s*\[)([\s\S]*?)(\])/m,(se,ie,ce,de)=>{const Be=ce.split("__SPLIT__").map(ae=>ae.trim().replace(/,$/,""));return ie+Be.join(",")+de})),W=W.replace(/,\s*]/g,"]");let z;try{z=JSON.parse(W)}catch{console.error("Respuesta IA no es JSON válido:",W),alert("La respuesta de la IA no es un JSON válido. Intenta de nuevo o ajusta el tema."),_(ie=>({...ie,ai:!1}));return}if(!z.items||!Array.isArray(z.items))throw new Error("La respuesta de la IA no contiene la lista de 'items' esperada.");const J=z.items.map(se=>(se.word||"").toUpperCase().replace(/\s/g,"")),te=z.items.map(se=>se.clue||"");u(Array.from({length:a},(se,ie)=>J[ie]||"")),f(Array.from({length:a},(se,ie)=>te[ie]||""))}catch(L){console.error("Error generating words/clues with AI:",L),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{_(L=>({...L,ai:!1}))}}},M=async L=>{const Z=c[L];if(!Z||!Z.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}j(L);try{const V="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",G=new Ps(V).getGenerativeModel({model:"gemini-1.5-flash-latest"}),K=`Para un crucigrama con el tema "${h||"general"}", genera una pista concisa y creativa para la palabra "${Z}". La respuesta debe ser un único objeto JSON válido sin texto adicional, con una sola clave: "clue".`,U=(await(await G.generateContent(K)).response).text().replace(/^```json\s*|```\s*$/g,""),z=JSON.parse(U);z.clue&&S(L,z.clue)}catch(V){console.error("Error generating clue with AI:",V),alert("No se pudo generar la pista.")}finally{j(null)}},R=C.useCallback(()=>{try{const L=c.map((be,Pe)=>({word:be.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:d[Pe]})).filter(be=>be.word.length>0);if(L.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;L.sort((be,Pe)=>Pe.word.length-be.word.length);const Z=L[0].word.length,V=Math.max(Z,L.length)*2;let q=Array.from({length:V},()=>Array(V).fill(null));const G=[],K=L.shift(),ee=Math.floor(V/2),W=Math.floor((V-K.word.length)/2);for(let be=0;be<K.word.length;be++)q[ee][W+be]=K.word[be];G.push({word:K.word,clue:K.clue,direction:"across",row:ee,col:W});for(const be of L){let Pe={score:-1,row:-1,col:-1,direction:"across"};for(const Ue of G)for(let pe=0;pe<Ue.word.length;pe++)for(let Oe=0;Oe<be.word.length;Oe++)if(Ue.word[pe]===be.word[Oe]){let Le=0,Ge,et,ut;Ue.direction==="across"?(ut="down",Ge=Ue.row-Oe,et=Ue.col+pe):(ut="across",Ge=Ue.row+pe,et=Ue.col-Oe);let xt=!0;for(let It=0;It<be.word.length;It++){const Mt=Ge+(ut==="down"?It:0),Pt=et+(ut==="across"?It:0);if(Mt<0||Mt>=V||Pt<0||Pt>=V){xt=!1;break}const Ht=q[Mt][Pt],wt=Mt===Ue.row+(Ue.direction==="down"?pe:0)&&Pt===Ue.col+(Ue.direction==="across"?pe:0);if(Ht&&!wt){xt=!1;break}if(Ht&&wt&&Ht!==be.word[Oe]){xt=!1;break}if(!wt){if(ut==="across"&&(Mt>0&&q[Mt-1][Pt]||Mt<V-1&&q[Mt+1][Pt])){xt=!1;break}if(ut==="down"&&(Pt>0&&q[Mt][Pt-1]||Pt<V-1&&q[Mt][Pt+1])){xt=!1;break}}Ht&&Le++}xt&&Le>Pe.score&&(Pe={score:Le,row:Ge,col:et,direction:ut})}if(Pe.score>-1){for(let Ue=0;Ue<be.word.length;Ue++){const pe=Pe.row+(Pe.direction==="down"?Ue:0),Oe=Pe.col+(Pe.direction==="across"?Ue:0);q[pe][Oe]=be.word[Ue]}G.push({word:be.word,clue:be.clue,direction:Pe.direction,row:Pe.row,col:Pe.col})}}let P=V,U=-1,z=V,J=-1;G.forEach(be=>{P=Math.min(P,be.row),U=Math.max(U,be.row+(be.direction==="down"?be.word.length-1:0)),z=Math.min(z,be.col),J=Math.max(J,be.col+(be.direction==="across"?be.word.length-1:0))}),U===-1&&(P=G[0].row,U=G[0].row,z=G[0].col,J=G[0].col+G[0].word.length-1);const te=1,se=Math.max(0,P-te),ie=Math.min(V,U+1+te),ce=Math.max(0,z-te),de=Math.min(V,J+1+te),Be=q.slice(se,ie).map(be=>be.slice(ce,de)),ae=G.map(be=>({...be,row:be.row-se,col:be.col-ce})).sort((be,Pe)=>be.row-Pe.row||be.col-Pe.col);let Se=1;const ke=[],ve=new Map;ae.forEach(be=>{const Pe=`${be.row},${be.col}`;ve.has(Pe)||ve.set(Pe,Se++),ke.push({...be,number:ve.get(Pe)})});const le=Be.map(be=>be.map(Pe=>({char:Pe,number:null})));return ke.forEach(be=>{const Pe=`${be.row},${be.col}`;le[be.row]&&le[be.row][be.col]!==void 0&&(le[be.row][be.col].number=ve.get(Pe))}),{grid:le,clues:{across:ke.filter(be=>be.direction==="across").sort((be,Pe)=>be.number-Pe.number),down:ke.filter(be=>be.direction==="down").sort((be,Pe)=>be.number-Pe.number)}}}catch(L){return console.error("Error generating crossword grid:",L),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[c,d]),k=async()=>{var Z;_(V=>({...V,puzzle:!0})),x(null),await new Promise(V=>setTimeout(V,100));const L=R();if(L){const V={creadorId:t.id,creadorNombre:t.nombreCompleto,tema:h||"Personalizado",grid:L.grid,clues:L.clues},{grid:q,...G}=V,K={...G,grid_flat:q.flat().map(ee=>ee.char||""),grid_width:((Z=q[0])==null?void 0:Z.length)||0};try{const ee=await Jst(K,t);x({...V,id:ee,fechaCreacion:new Date().toISOString()})}catch(ee){console.error("Error saving puzzle:",ee),alert("No se pudo guardar el crucigrama en la base de datos.")}}_(V=>({...V,puzzle:!1}))},D=()=>{I.current&&(y(!1),setTimeout(()=>{lj(I.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(L=>{const Z=document.createElement("a");Z.download="crucigrama.png",Z.href=L,Z.click()}).catch(L=>console.error("Error generating image",L))},100))};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-4xl",children:"✏️"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),i.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),g?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{ref:I,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[i.jsx("div",{children:i.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${g.grid[0].length}, 2rem)`},children:g.grid.flat().map((L,Z)=>i.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:L.char?"white":"black"},children:[L.number&&i.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:L.number}),v&&L.char&&i.jsx("span",{children:L.char})]},Z))})}),i.jsxs("div",{className:"text-sm",children:[i.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),i.jsx("ul",{className:"space-y-1",children:g.clues.across.map(L=>i.jsxs("li",{children:[i.jsxs("strong",{children:[L.number,"."]})," ",L.clue]},`${L.word}-${L.clue}`))}),i.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),i.jsx("ul",{className:"space-y-1",children:g.clues.down.map(L=>i.jsxs("li",{children:[i.jsxs("strong",{children:[L.number,"."]})," ",L.clue]},`${L.word}-${L.clue}`))})]})]})}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:v,onChange:()=>y(!v),className:"h-5 w-5 rounded"}),i.jsx("span",{children:"Mostrar Solución"})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),i.jsx("button",{onClick:D,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):i.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(L=>i.jsx("button",{onClick:()=>{s(L),l(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!o&&a===L?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:L},L)),i.jsx("button",{onClick:()=>l(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${o?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),o&&i.jsx("input",{type:"number",value:a,onChange:L=>s(parseInt(L.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:L=>m(L.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:B,disabled:w.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:w.ai?i.jsx(Eit,{}):i.jsxs(i.Fragment,{children:[i.jsx(qW,{}),i.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),i.jsx("div",{className:"space-y-3",children:Array.from({length:a}).map((L,Z)=>i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsx("input",{type:"text",value:c[Z],onChange:V=>E(Z,V.target.value),placeholder:`Palabra ${Z+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[i.jsx("textarea",{value:d[Z],onChange:V=>S(Z,V.target.value),placeholder:`Pista ${Z+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),i.jsx("button",{onClick:()=>M(Z),disabled:T===Z,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:T===Z?i.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):i.jsx(qW,{})})]})]},Z))}),i.jsx("div",{className:"text-right pt-4",children:i.jsx("button",{onClick:k,disabled:w.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:w.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},Cit=()=>{const[e,t]=C.useState(null),[r,n]=C.useState(!0);return C.useEffect(()=>{const a=UJ(T_,async s=>{if(s&&s.email)try{const o=await rte(s.email);t(o)}catch(o){console.error("Error al obtener el perfil del usuario:",o),t(null)}else t(null);n(!1)});return()=>a()},[]),{currentUser:e,loading:r}},_it=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],Sit=({recurso:e,onClick:t})=>i.jsxs("button",{onClick:t,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[i.jsx("div",{className:"text-6xl mb-4",children:e.icon}),i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:e.nombre}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:e.descripcion})]}),kit=()=>{const[e,t]=C.useState("menu"),{currentUser:r}=Cit(),n=()=>e!=="menu"&&!r?i.jsx("div",{className:"text-center p-8",children:"Cargando información de usuario..."}):e==="mapasMentales"?i.jsx(mit,{onBack:()=>t("menu"),currentUser:r}):e==="sopaDeLetras"?i.jsx(xit,{onBack:()=>t("menu"),currentUser:r}):e==="lineasDeTiempo"?i.jsx(wit,{onBack:()=>t("menu"),currentUser:r}):e==="crucigramas"?i.jsx(Nit,{onBack:()=>t("menu"),currentUser:r}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:_it.map(a=>i.jsx(Sit,{recurso:a,onClick:()=>t(a.id)},a.id))})]});return i.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},jit="evaluaciones_formativas",Bit="calificaciones_formativas",rde="trabajos_grupales_formativos",nde=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},Tit=(e,t)=>{const r=Vt(pt(lt,jit),wr("curso","==",e));return hr(r,n=>{t(n.docs.map(a=>nde(a)))},n=>{console.error("Error subscribing to student evaluations:",n),t([])})},Iit=e=>{const t=Vt(pt(lt,Bit));return hr(t,r=>{const n={};r.forEach(a=>{n[a.id]=a.data()}),e(n)},r=>{console.error("Error subscribing to grades:",r),e({})})},Fit=(e,t)=>{const r=Vt(pt(lt,rde),wr("curso","==",e));return hr(r,n=>{t(n.docs.map(a=>nde(a)))},n=>{console.error("Error subscribing to group projects:",n),t([])})},Oit=async e=>{try{const{id:t,...r}=e,n=rr(lt,rde,t);await yi(n,r)}catch(t){throw console.error("Error updating group project:",t),new Error("Could not update group project.")}},Dit=({currentUser:e})=>{const[t,r]=C.useState([]),[n,a]=C.useState({}),[s,o]=C.useState([]),[l,c]=C.useState(!0),[u,d]=C.useState(null),[f,h]=C.useState(!1),[m,g]=C.useState(null),x=C.useRef(null);C.useEffect(()=>{if(!e.curso){c(!1);return}c(!0);const T=Tit(e.curso,r),j=Iit(a),I=Fit(e.curso,E=>{o(E),c(!1)});return()=>{T(),j(),I()}},[e.curso]);const v=C.useMemo(()=>{if(!e.curso)return[];const j=t.filter(I=>I.curso===e.curso).reduce((I,E)=>((I[E.asignatura]=I[E.asignatura]||[]).push(E),I),{});return Object.entries(j).map(([I,E])=>{let S=0,B=0;const M=E.map(k=>{var Z;const D=(Z=n[k.id])==null?void 0:Z[e.nombreCompleto];let L="No Trabajado";return D==="trabajado"?(S+=7,B++,L="Trabajado"):D==="no trabajado"&&(S+=2,B++,L="No Trabajado"),{id:k.id,nombreActividad:k.nombreActividad,fecha:k.fecha,estado:L}}).filter(k=>{var D;return(D=n[k.id])==null?void 0:D[e.nombreCompleto]}),R=B>0?(S/B).toFixed(1):"N/A";return{asignatura:I,promedio:R,actividades:M.sort((k,D)=>new Date(D.fecha).getTime()-new Date(k.fecha).getTime())}}).filter(I=>I.actividades.length>0).sort((I,E)=>I.asignatura.localeCompare(E.asignatura))},[t,n,e]);C.useEffect(()=>{if(v.reduce((B,M)=>B+M.actividades.length,0)===0){d(null);return}const j=v.reduce((B,M)=>{const R=parseFloat(M.promedio);return isNaN(R)?B:B+R},0),I=v.length>0?j/v.length:0,E=zN.find(B=>I>=B.promedioMin&&I<=B.promedioMax)||null,S=zN.filter(B=>I>=B.promedioMin);if(d({puntajeTotal:0,promedio:I,rangoActual:E,insigniasGanadas:S}),x.current!==null){const B=zN.find(M=>x.current>=M.promedioMin&&x.current<=M.promedioMax)||null;E&&(!B||E.nombre!==B.nombre)&&g(E)}x.current=I},[v]);const y=C.useMemo(()=>e.curso?s.filter(T=>T.curso===e.curso).map(T=>{const j=T.grupos.find(I=>I.integrantes.some(E=>E.nombre===e.nombreCompleto));return j?{...T,miGrupo:j}:null}).filter(T=>T!==null).sort((T,j)=>new Date(j.fechaPresentacion).getTime()-new Date(T.fechaPresentacion).getTime()):[],[s,e]),w=async(T,j)=>{const I=s.find(S=>S.id===T);if(!I)return;const E={...I,grupos:I.grupos.map(S=>S.integrantes.some(M=>M.nombre===e.nombreCompleto)?{...S,integrantes:S.integrantes.map(M=>M.nombre===e.nombreCompleto?{...M,rol:j||void 0}:M)}:S)};try{await Oit(E)}catch(S){console.error("Error updating role:",S),alert("No se pudo actualizar el rol.")}},_=T=>{const j=parseFloat(T);return isNaN(j)?"bg-slate-400":j<4?"bg-red-500":j<5.5?"bg-yellow-500":"bg-green-500"};return l?i.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>g(null),children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:T=>T.stopPropagation(),children:[i.jsx("div",{className:"text-8xl animate-bounce",children:m.emoji}),i.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),i.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:m.nombre}),i.jsx("p",{className:"text-slate-600 mt-4",children:m.mensaje}),i.jsx("button",{onClick:()=>g(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),f&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:T=>T.stopPropagation(),children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),i.jsx("div",{className:"overflow-y-auto space-y-3",children:zN.map(T=>{const j=u==null?void 0:u.insigniasGanadas.some(I=>I.nombre===T.nombre);return i.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${j?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[i.jsx("div",{className:"text-5xl",children:T.emoji}),i.jsxs("div",{children:[i.jsx("h3",{className:`font-bold ${j?"text-amber-700":"text-slate-600"}`,children:T.nombre}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",T.promedioMin," y ",T.promedioMax]})]})]},T.nombre)})})]})}),i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),i.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&i.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),i.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),i.jsx("button",{onClick:()=>h(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),i.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),i.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),v.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(T=>i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800",children:T.asignatura}),i.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),i.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${_(T.promedio)}`,children:T.promedio})]}),i.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),T.actividades.map(j=>i.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-700",children:j.nombreActividad}),i.jsx("p",{className:"text-xs text-slate-500",children:new Date(j.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),i.jsx("span",{className:`font-semibold ${j.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:j.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},j.id))]})]},T.asignatura))}):i.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[i.jsx("span",{className:"text-5xl",children:"📊"}),i.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),i.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),y.length>0&&i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),i.jsx("div",{className:"space-y-4",children:y.map(T=>{const j=T.miGrupo.integrantes.filter(E=>E.nombre!==e.nombreCompleto&&E.rol).map(E=>E.rol),I=ate.filter(E=>!j.includes(E));return i.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[i.jsx("h3",{className:"font-bold text-slate-800",children:T.nombreActividad}),i.jsxs("p",{className:"text-sm text-slate-500",children:[T.asignatura," - Presentación: ",new Date(T.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),i.jsxs("div",{className:"mt-3 pt-3 border-t",children:[i.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",T.miGrupo.numero]}),i.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:T.miGrupo.integrantes.map(E=>i.jsxs("li",{className:"grid grid-cols-2 items-center",children:[i.jsx("span",{className:E.nombre===e.nombreCompleto?"font-bold":"",children:E.nombre}),E.nombre===e.nombreCompleto?i.jsxs("select",{value:E.rol||"",onChange:S=>w(T.id,S.target.value),className:"text-sm p-1 border rounded w-full",children:[i.jsx("option",{value:"",children:"-- Seleccionar rol --"}),E.rol&&!I.includes(E.rol)&&i.jsx("option",{value:E.rol,children:E.rol}),I.map(S=>i.jsx("option",{value:S,children:S},S))]}):i.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:E.rol||"Sin rol"})]},E.nombre))})]})]},T.id)})})]})]})},Pit="proyectos_interdisciplinarios",ade="entregas_interdisciplinarias",sde=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaCompletado:((s=(a=t.fechaCompletado)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaCompletado}},Rit=(e,t)=>{const r=Vt(pt(lt,Pit),wr("cursos","array-contains",e));return hr(r,n=>{const a=n.docs.map(s=>sde(s));t(a)},n=>{console.error("Error al suscribirse a los proyectos:",n),t([])})},Lit=(e,t)=>{const r=Vt(pt(lt,ade),wr("estudianteId","==",e));return hr(r,n=>{const a=n.docs.map(s=>sde(s));t(a)},n=>{console.error("Error al suscribirse a las entregas:",n),t([])})},Mit=async e=>{try{const{id:t,...r}=e,n=rr(lt,ade,t),a={...r,fechaCompletado:ir.fromDate(new Date(r.fechaCompletado||Date.now()))};await yi(n,a,{merge:!0})}catch(t){throw console.error("Error al actualizar la entrega:",t),new Error("No se pudo guardar la entrega.")}},Uit=({currentUser:e})=>{const[t,r]=C.useState([]),[n,a]=C.useState([]),[s,o]=C.useState(null),[l,c]=C.useState(!0);C.useEffect(()=>{if(!e.curso||!e.id){c(!1);return}c(!0);const f=Rit(e.curso,r),h=Lit(e.id,m=>{a(m),c(!1)});return()=>{f(),h()}},[e.curso,e.id]);const u=async f=>{try{await Mit(f)}catch(h){console.error("Failed to update submission:",h),alert("Hubo un error al guardar tu entrega.")}},d=({plan:f,tarea:h})=>{const m=C.useMemo(()=>{const j=n.find(I=>I.planificacionId===f.id&&I.tareaId===h.id);return j||{id:`${f.id}_${h.id}_${e.id}`,planificacionId:f.id,tareaId:h.id,estudianteId:e.id,estudianteNombre:e.nombreCompleto,completada:!1}},[f.id,h.id,n]),[g,x]=C.useState(!1),[v,y]=C.useState({observaciones:m.observacionesEstudiante||"",enlace:m.enlaceUrl||""}),w=j=>{var E;const I=(E=j.target.files)==null?void 0:E[0];I&&(alert(`Simulación: Archivo "${I.name}" listo para subir.`),u({...m,archivoAdjunto:{nombre:I.name,url:`simulated/path/${I.name}`},fechaCompletado:new Date().toISOString()}))},_=()=>{u({...m,observacionesEstudiante:v.observaciones,enlaceUrl:v.enlace,fechaCompletado:new Date().toISOString()})},T=()=>{u({...m,completada:!m.completada,fechaCompletado:new Date().toISOString()})};return i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("input",{type:"checkbox",checked:m.completada,onChange:T,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:`font-semibold ${m.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",h.numero,": ",h.instrucciones]}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",h.fechaEntrega]}),h.recursoUrl&&i.jsx("a",{href:h.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),i.jsx("button",{onClick:()=>x(!g),className:"text-sm font-semibold",children:g?"Ocultar":"Entregar"})]}),g&&i.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[i.jsx("textarea",{value:v.observaciones,onChange:j=>y({...v,observaciones:j.target.value}),onBlur:_,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),i.jsx("input",{type:"url",value:v.enlace,onChange:j=>y({...v,enlace:j.target.value}),onBlur:_,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),i.jsx("input",{type:"file",onChange:w,className:"text-sm"}),m.archivoAdjunto&&i.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",m.archivoAdjunto.nombre]})]}),m.feedbackProfesor&&i.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[i.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),i.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:m.feedbackProfesor})]})]})};return l?i.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),t.length>0?t.map(f=>{const h=f.tareas||[],g=n.filter(v=>v.planificacionId===f.id).filter(v=>v.completada).length,x=h.length>0?g/h.length*100:0;return i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[i.jsxs("button",{onClick:()=>o(s===f.id?null:f.id),className:"w-full text-left",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:f.nombreProyecto}),i.jsxs("div",{className:"mt-2 space-y-1",children:[i.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[i.jsx("span",{children:"Progreso"}),i.jsxs("span",{children:[Math.round(x),"%"]})]}),i.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:i.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${x}%`}})})]})]}),s===f.id&&i.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:h.length>0?h.map(v=>i.jsx(d,{plan:f,tarea:v},v.id)):i.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},f.id)}):i.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[i.jsx("span",{className:"text-5xl",children:"🎉"}),i.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),i.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},Qit=({data:e})=>i.jsx("div",{className:"space-y-4",children:e.map((r,n)=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),i.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:i.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),Hit=({currentUser:e})=>{const[t,r]=C.useState([]),[n,a]=C.useState(!1),[s,o]=C.useState(null),[l,c]=C.useState(null),[u,d]=C.useState(hw),f=C.useCallback(async()=>{a(!0);try{const v=(await oZe(e.nombreCompleto)).sort((y,w)=>new Date(w.fecha).getTime()-new Date(y.fecha).getTime());r(v),o(null)}catch(x){console.error("Error al cargar acompañamientos desde Firestore",x),o("No se pudieron cargar tus acompañamientos desde la nube.")}finally{a(!1)}},[e.nombreCompleto]),h=C.useCallback(async()=>{try{const x=await lZe();x&&d(x)}catch(x){console.error("Error al cargar rúbrica personalizada",x)}},[]);C.useEffect(()=>{f(),h()},[f,h]);const m=C.useMemo(()=>{if(!l)return[];const x={};return u.forEach(v=>{x[v.domain]={total:0,count:0},v.criteria.forEach(y=>{const w=l.rubricaResultados[y.name];w&&(x[v.domain].total+=w,x[v.domain].count++)})}),Object.entries(x).map(([v,y])=>({label:v,value:y.count>0?y.total/y.count:0}))},[l,u]),g=x=>{const v=new vr;v.setFont("helvetica","bold"),v.setFontSize(10),v.setTextColor(100),v.text("LICEO INDUSTRIAL DE RECOLETA",v.internal.pageSize.getWidth()/2,15,{align:"center"}),v.setFont("helvetica","bold"),v.setFontSize(16),v.setTextColor(40),v.text("Informe de Acompañamiento Docente",v.internal.pageSize.getWidth()/2,25,{align:"center"}),v.setFontSize(12),v.setFont("helvetica","normal"),xi(v,{startY:35,body:[["Docente:",x.docente],["Fecha:",new Date(x.fecha).toLocaleDateString("es-CL")],["Asignatura:",x.asignatura],["Curso:",x.curso],["Bloques:",x.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let y=v.lastAutoTable.finalY+15;if(Object.keys(x.rubricaResultados).length>0){const T=[],j=["Débil","Incipiente","Satisfactorio","Avanzado"];u.forEach(I=>{T.push([{content:I.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),I.criteria.forEach(E=>{const S=x.rubricaResultados[E.name],B=S?j[S-1]:"No evaluado";T.push([E.name,B])})}),xi(v,{startY:y,head:[["Indicador","Nivel de Logro"]],body:T,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),y=v.lastAutoTable.finalY+15}const w=(T,j)=>{if(!j)return;y>250&&(v.addPage(),y=20,v.setFont("helvetica","bold"),v.setFontSize(10),v.setTextColor(100),v.text("LICEO INDUSTRIAL DE RECOLETA",v.internal.pageSize.getWidth()/2,15,{align:"center"}),y=25),v.setFont("helvetica","bold"),v.setFontSize(14),v.setTextColor(40),v.text(T,14,y),y+=8,v.setFont("helvetica","normal"),v.setFontSize(11),v.setTextColor(60);const I=v.splitTextToSize(j.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);v.text(I,14,y),y+=I.length*5+10};w("Observaciones Generales",x.observacionesGenerales),w("Retroalimentación Consolidada",x.retroalimentacionConsolidada);const _=v.getNumberOfPages();for(let T=1;T<=_;T++)v.setPage(T),v.setFontSize(8),v.setTextColor(128),v.text(`Página ${T} de ${_}`,v.internal.pageSize.getWidth()/2,v.internal.pageSize.getHeight()-10,{align:"center"});v.save(`Acompanamiento_${e.nombreCompleto.replace(/\s/g,"_")}_${new Date(x.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return l?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("button",{onClick:()=>c(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(l.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",l.curso," - ",l.asignatura]})]}),i.jsxs("button",{onClick:()=>g(l),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[i.jsx(nte,{})," Exportar PDF"]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2 space-y-6",children:i.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[i.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:i.jsx("p",{className:"whitespace-pre-wrap",children:l.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),i.jsx("h3",{children:"Observaciones Generales"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:i.jsx("p",{className:"whitespace-pre-wrap",children:l.observacionesGenerales||"Sin observaciones."})})]})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:i.jsx(Qit,{data:m})})]})]})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),n&&i.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),s&&i.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!n&&t.length===0&&i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),i.jsx("div",{className:"space-y-4",children:!n&&t.length>0?t.map(x=>i.jsx("button",{onClick:()=>c(x),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[x.curso," - ",x.asignatura]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(x.fecha).toLocaleDateString("es-CL"),x.bloques&&` | Bloques: ${x.bloques}`]}),Object.keys(x.rubricaResultados).length>0&&i.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(x.rubricaResultados).length," criterios"]})]}),i.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},x.id)):!n&&i.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsx("span",{className:"text-5xl",children:"👍"}),i.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},Vit=e=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const t=pt(Er,"planificaciones"),r=Vt(t,cr("fechaCreacion","desc"));return hr(r,a=>{const s=[];a.forEach(o=>{const l=o.data();s.push({id:o.id,...l})}),console.log("✅ Todas las planificaciones cargadas:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar todas las planificaciones:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",t),t}},zit=(e,t)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",e),!e)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const r=pt(Er,"planificaciones"),n=Vt(r,wr("userId","==",e),cr("fechaCreacion","desc"));return hr(n,s=>{const o=[];s.forEach(l=>{const c=l.data();o.push({id:l.id,...c})}),console.log("✅ Planificaciones del usuario cargadas:",o.length),t(o)},s=>{throw console.error("❌ Error al cargar planificaciones del usuario:",s),s})}catch(r){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",r),r}};function $it(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}const Git=$it("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var qit={value:function(){}};function ide(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new F5(r)}function F5(e){this._=e}function Kit(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}F5.prototype=ide.prototype={constructor:F5,on:function(e,t){var r=this._,n=Kit(e+"",r),a,s=-1,o=n.length;if(arguments.length<2){for(;++s<o;)if((a=(e=n[s]).type)&&(a=Wit(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(a=(e=n[s]).type)r[a]=KW(r[a],e.name,t);else if(t==null)for(a in r)r[a]=KW(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new F5(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function Wit(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function KW(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=qit,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}const Xit=Object.freeze(Object.defineProperty({__proto__:null,dispatch:ide},Symbol.toStringTag,{value:"Module"})),Yit=Nhe(Xit);var qI,WW;function Jit(){if(WW)return qI;WW=1;const e=Yit.dispatch,t=Math.PI/180,r={archimedean:x,rectangular:v},n=64,a=2048;qI=function(){var T=[256,256],j=s,I=o,E=c,S=l,B=l,M=u,R=d,k=x,D=[],L=1/0,Z=e("word","end"),V=null,q=Math.random,G={},K=w;G.canvas=function(P){return arguments.length?(K=_(P),G):K},G.start=function(){var P=ee(K()),U=y((T[0]>>5)*T[1]),z=null,J=D.length,te=-1,se=[],ie=D.map(function(de,Be){return de.text=j.call(this,de,Be),de.font=I.call(this,de,Be),de.style=S.call(this,de,Be),de.weight=B.call(this,de,Be),de.rotate=M.call(this,de,Be),de.size=~~E.call(this,de,Be),de.padding=R.call(this,de,Be),de}).sort(function(de,Be){return Be.size-de.size});return V&&clearInterval(V),V=setInterval(ce,0),ce(),G;function ce(){for(var de=Date.now();Date.now()-de<L&&++te<J&&V;){var Be=ie[te];Be.x=T[0]*(q()+.5)>>1,Be.y=T[1]*(q()+.5)>>1,f(P,Be,ie,te),Be.hasText&&W(U,Be,z)&&(se.push(Be),Z.call("word",G,Be),z?m(z,Be):z=[{x:Be.x+Be.x0,y:Be.y+Be.y0},{x:Be.x+Be.x1,y:Be.y+Be.y1}],Be.x-=T[0]>>1,Be.y-=T[1]>>1)}te>=J&&(G.stop(),Z.call("end",G,se,z))}},G.stop=function(){V&&(clearInterval(V),V=null);for(const P of D)delete P.sprite;return G};function ee(P){const U=P.getContext("2d",{willReadFrequently:!0});P.width=P.height=1;const z=Math.sqrt(U.getImageData(0,0,1,1).data.length>>2);return P.width=(n<<5)/z,P.height=a/z,U.fillStyle=U.strokeStyle="red",{context:U,ratio:z}}function W(P,U,z){T[0],T[1];for(var J=U.x,te=U.y,se=Math.sqrt(T[0]*T[0]+T[1]*T[1]),ie=k(T),ce=q()<.5?1:-1,de=-ce,Be,ae,Se;(Be=ie(de+=ce))&&(ae=~~Be[0],Se=~~Be[1],!(Math.min(Math.abs(ae),Math.abs(Se))>=se));)if(U.x=J+ae,U.y=te+Se,!(U.x+U.x0<0||U.y+U.y0<0||U.x+U.x1>T[0]||U.y+U.y1>T[1])&&(!z||g(U,z))&&!h(U,P,T[0])){for(var ke=U.sprite,ve=U.width>>5,le=T[0]>>5,be=U.x-(ve<<4),Pe=be&127,Ue=32-Pe,pe=U.y1-U.y0,Oe=(U.y+U.y0)*le+(be>>5),Le,Ge=0;Ge<pe;Ge++){Le=0;for(var et=0;et<=ve;et++)P[Oe+et]|=Le<<Ue|(et<ve?(Le=ke[Ge*ve+et])>>>Pe:0);Oe+=le}return!0}return!1}return G.timeInterval=function(P){return arguments.length?(L=P??1/0,G):L},G.words=function(P){return arguments.length?(D=P,G):D},G.size=function(P){return arguments.length?(T=[+P[0],+P[1]],G):T},G.font=function(P){return arguments.length?(I=_(P),G):I},G.fontStyle=function(P){return arguments.length?(S=_(P),G):S},G.fontWeight=function(P){return arguments.length?(B=_(P),G):B},G.rotate=function(P){return arguments.length?(M=_(P),G):M},G.text=function(P){return arguments.length?(j=_(P),G):j},G.spiral=function(P){return arguments.length?(k=r[P]||P,G):k},G.fontSize=function(P){return arguments.length?(E=_(P),G):E},G.padding=function(P){return arguments.length?(R=_(P),G):R},G.random=function(P){return arguments.length?(q=P,G):q},G.on=function(){var P=Z.on.apply(Z,arguments);return P===Z?G:P},G};function s(T){return T.text}function o(){return"serif"}function l(){return"normal"}function c(T){return Math.sqrt(T.value)}function u(){return(~~(random()*6)-3)*30}function d(){return 1}function f(T,j,I,E){if(!j.sprite){var S=T.context,B=T.ratio;S.clearRect(0,0,(n<<5)/B,a/B);var M=0,R=0,k=0,D=I.length;for(--E;++E<D;){j=I[E],S.save(),S.font=j.style+" "+j.weight+" "+~~((j.size+1)/B)+"px "+j.font;const Be=S.measureText(j.text),ae=-Math.floor(Be.width/2);let Se=(Be.width+1)*B,ke=j.size<<1;if(j.rotate){var L=Math.sin(j.rotate*t),Z=Math.cos(j.rotate*t),V=Se*Z,q=Se*L,G=ke*Z,K=ke*L;Se=Math.max(Math.abs(V+K),Math.abs(V-K))+31>>5<<5,ke=~~Math.max(Math.abs(q+G),Math.abs(q-G))}else Se=Se+31>>5<<5;if(ke>k&&(k=ke),M+Se>=n<<5&&(M=0,R+=k,k=0),R+ke>=a)break;S.translate((M+(Se>>1))/B,(R+(ke>>1))/B),j.rotate&&S.rotate(j.rotate*t),S.fillText(j.text,ae,0),j.padding&&(S.lineWidth=2*j.padding,S.strokeText(j.text,ae,0)),S.restore(),j.width=Se,j.height=ke,j.xoff=M,j.yoff=R,j.x1=Se>>1,j.y1=ke>>1,j.x0=-j.x1,j.y0=-j.y1,j.hasText=!0,M+=Se}for(var ee=S.getImageData(0,0,(n<<5)/B,a/B).data,W=[];--E>=0;)if(j=I[E],!!j.hasText){for(var P=j.width,U=P>>5,z=j.y1-j.y0,J=0;J<z*U;J++)W[J]=0;if(M=j.xoff,M==null)return;R=j.yoff;for(var te=0,se=-1,ie=0;ie<z;ie++){for(var J=0;J<P;J++){var ce=U*ie+(J>>5),de=ee[(R+ie)*(n<<5)+(M+J)<<2]?1<<31-J%32:0;W[ce]|=de,te|=de}te?se=ie:(j.y0++,z--,ie--,R++)}j.y1=j.y0+se,j.sprite=W.slice(0,(j.y1-j.y0)*U)}}}function h(T,j,I){I>>=5;for(var E=T.sprite,S=T.width>>5,B=T.x-(S<<4),M=B&127,R=32-M,k=T.y1-T.y0,D=(T.y+T.y0)*I+(B>>5),L,Z=0;Z<k;Z++){L=0;for(var V=0;V<=S;V++)if((L<<R|(V<S?(L=E[Z*S+V])>>>M:0))&j[D+V])return!0;D+=I}return!1}function m(T,j){var I=T[0],E=T[1];j.x+j.x0<I.x&&(I.x=j.x+j.x0),j.y+j.y0<I.y&&(I.y=j.y+j.y0),j.x+j.x1>E.x&&(E.x=j.x+j.x1),j.y+j.y1>E.y&&(E.y=j.y+j.y1)}function g(T,j){return T.x+T.x1>j[0].x&&T.x+T.x0<j[1].x&&T.y+T.y1>j[0].y&&T.y+T.y0<j[1].y}function x(T){var j=T[0]/T[1];return function(I){return[j*(I*=.1)*Math.cos(I),I*Math.sin(I)]}}function v(T){var j=4,I=j*T[0]/T[1],E=0,S=0;return function(B){var M=B<0?-1:1;switch(Math.sqrt(1+4*M*B)-M&3){case 0:E+=I;break;case 1:S+=j;break;case 2:E-=I;break;default:S-=j;break}return[E,S]}}function y(T){for(var j=[],I=-1;++I<T;)j[I]=0;return j}function w(){return document.createElement("canvas")}function _(T){return typeof T=="function"?T:function(){return T}}return qI}var Zit=Jit();const eot=jl(Zit),tot=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),rot=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),not=()=>i.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),aot=e=>{const[t,r]=C.useState([]),[n,a]=C.useState(!0),[s,o]=C.useState(null),l=C.useMemo(()=>(e==null?void 0:e.profile)==="SUBDIRECCION",[e]);return C.useEffect(()=>{if(!(e!=null&&e.email)&&!(e!=null&&e.id)){o("Usuario no autenticado"),a(!1);return}try{let c;const u=d=>{r(d),a(!1),o(null)};if(l)c=Vit(u);else{const d=e.email||e.id||"";c=zit(u,d)}return c}catch(c){o(c instanceof Error?c.message:"Error al conectar con la base de datos"),a(!1)}},[e,l]),{planificaciones:t,loading:n,error:s,canViewAllPlans:l}},sot=({plan:e,onClose:t})=>i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:t,children:i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:r=>r.stopPropagation(),children:[i.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreUnidad}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.asignatura," | ",e.nivel," | Autor: ",e.autor||"N/A"]})]}),i.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:i.jsx(rot,{})})]}),i.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[i.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),i.jsxs("p",{className:"mt-2",children:[i.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),i.jsx("div",{className:"mt-3",children:i.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof e.progreso=="number"?`${e.progreso}%`:"No registrado"]})})]}),i.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",e.detallesLeccion.length,")"]}),i.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:e.detallesLeccion.map((r,n)=>i.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[i.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",n+1,": ",r.actividades]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("span",{children:[i.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),i.jsxs("span",{children:[i.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]})]})]},n))}),e.reflexionUnidad&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexión Docente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),e.reflexionUnidad.ordenHabilidades&&e.reflexionUnidad.ordenHabilidades.length>0?i.jsx("ul",{className:"space-y-2",children:e.reflexionUnidad.ordenHabilidades.map((r,n)=>i.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[i.jsxs("span",{className:"font-bold text-amber-500",children:[n+1,"."]})," ",r]},r))}):i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.fortalezas||"N/A"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.mejoras||"N/A"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafíos"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),XW=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],iot=["1º Medio","2º Medio","3º Medio","4º Medio"],oot=({words:e})=>{const t=C.useRef(null);return C.useEffect(()=>{if(!e.length||!t.current)return;const r=Mu(t.current);r.selectAll("*").remove();const n=eot().size([500,350]).words(e.map(s=>({...s}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(s=>Math.sqrt(s.value)*12).on("end",a);n.start();function a(s){r.attr("width",n.size()[0]).attr("height",n.size()[1]).append("g").attr("transform",`translate(${n.size()[0]/2},${n.size()[1]/2})`).selectAll("text").data(s).enter().append("text").style("font-size",o=>`${o.size}px`).style("font-family","Impact").style("fill",(o,l)=>v4(Git)(l.toString())).attr("text-anchor","middle").attr("transform",o=>`translate(${[o.x,o.y]})rotate(${o.rotate})`).text(o=>o.text)}},[e]),i.jsx("svg",{ref:t})},lot=({planificaciones:e})=>{const[t,r]=C.useState("todos"),[n,a]=C.useState("todos"),s=C.useMemo(()=>["todos",...Array.from(new Set(e.map(d=>d.asignatura)))],[e]),o=C.useMemo(()=>e.filter(d=>(t==="todos"||d.nivel===t)&&(n==="todos"||d.asignatura===n)&&d.reflexionUnidad),[e,t,n]),l=C.useMemo(()=>{const d=XW.reduce((f,h)=>({...f,[h]:0}),{});return o.forEach(f=>{var h,m;return(m=(h=f.reflexionUnidad)==null?void 0:h.ordenHabilidades)==null?void 0:m.forEach((g,x)=>{d[g]!==void 0&&(d[g]+=XW.length-x)})}),Object.entries(d).map(([f,h])=>({text:f,value:h})).sort((f,h)=>h.value-f.value)},[o]),c=C.useMemo(()=>{const d=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),h=(o.map(m=>{var g,x;return`${((g=m.reflexionUnidad)==null?void 0:g.fortalezas)||""} ${((x=m.reflexionUnidad)==null?void 0:x.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((m,g)=>(d.has(g)||(m[g]=(m[g]||0)+1),m),{});return Object.entries(h).map(([m,g])=>({text:m,value:g})).sort((m,g)=>g.value-m.value).slice(0,50)},[o]),u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return i.jsxs("div",{className:"animate-fade-in",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),i.jsxs("select",{value:t,onChange:d=>r(d.target.value),className:u,children:[i.jsx("option",{value:"todos",children:"Todos los Niveles"}),iot.map(d=>i.jsx("option",{value:d,children:d},d))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsx("select",{value:n,onChange:d=>a(d.target.value),className:u,children:s.map(d=>i.jsx("option",{value:d,children:d==="todos"?"Todas las Asignaturas":d},d))})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),l.every(d=>d.value===0)?i.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):i.jsx("ul",{className:"space-y-3",children:l.map((d,f)=>i.jsxs("li",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:f+1}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:d.text}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:i.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${d.value/(l[0].value||1)*100}%`}})})]})]},d.text))})]}),i.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),c.length>0?i.jsx(oot,{words:c}):i.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},cot=({currentUser:e})=>{const{planificaciones:t,loading:r,error:n,canViewAllPlans:a}=aot(e),[s,o]=C.useState("seguimiento"),[l,c]=C.useState("1º"),[u,d]=C.useState(null),[f,h]=C.useState(null),m=C.useMemo(()=>{const v={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"};return t.filter(y=>y.nivel===v[l]&&y.tipo==="Unidad")},[t,l]),g=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];if(!(e!=null&&e.id))return i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{children:"Usuario no autenticado."})});if(r)return i.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[i.jsx(not,{}),i.jsx("span",{children:"Cargando planificaciones..."})]});if(n)return i.jsx("div",{className:"text-center py-8",children:i.jsxs("p",{className:"text-red-500",children:["Error: ",n]})});const x=()=>i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:i.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(v=>i.jsx("button",{onClick:()=>c(v.key),className:`${l===v.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:v.label},v.key))})}),m.length===0?i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):i.jsx("div",{className:"space-y-4",children:Bs.map(v=>{const y=m.filter(_=>_.asignatura===v);if(y.length===0)return null;const w=u===v;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[i.jsxs("button",{onClick:()=>d(w?null:v),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:v}),i.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," unidad",y.length>1?"es":""]})]}),i.jsx("span",{className:`transform transition-transform ${w?"rotate-180":""}`,children:i.jsx(tot,{})})]}),w&&i.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:i.jsx("ul",{className:"space-y-3",children:y.map(_=>i.jsx("li",{children:i.jsxs("button",{onClick:()=>h(_),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:_.nombreUnidad}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",_.autor||"N/A"]})]})},_.id))})})]},v)})})]});return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&i.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"👑 Vista administrativa"})]}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:i.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>o("seguimiento"),className:`${s==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),i.jsx("button",{onClick:()=>o("analisis"),className:`${s==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Análisis de Reflexiones"})]})}),s==="seguimiento"&&x(),s==="analisis"&&i.jsx(lot,{planificaciones:t.filter(v=>v.tipo==="Unidad")})]}),f&&i.jsx(sot,{plan:f,onClose:()=>h(null)})]})},fj="analisisTaxonomicos",uot=async()=>{try{const e=Vt(pt(Er,fj),cr("uploadDate","desc"));return(await mn(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener todos los análisis:",e),new Error("No se pudieron cargar los análisis taxonómicos")}},dot=async e=>{if(!e)return[];try{const t=Vt(pt(Er,fj),wr("userId","==",e),cr("uploadDate","desc"));return(await mn(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener análisis por usuario:",t),new Error("No se pudieron cargar los análisis del usuario")}},fot=async e=>{try{return{id:(await an(pt(Er,fj),e)).id,...e}}catch(t){throw console.error("Error al crear análisis:",t),new Error("No se pudo crear el análisis taxonómico")}},Aot=async e=>{try{const t=rr(Er,fj,e);await ka(t)}catch(t){throw console.error("Error al eliminar análisis:",t,"ID:",e),new Error("No se pudo eliminar el análisis taxonómico")}},YW=["1º Medio","2º Medio","3º Medio","4º Medio"],GA=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],qx={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},hot=()=>i.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),JW=({currentUser:e})=>{const[t,r]=C.useState([]),[n,a]=C.useState(!1),[s,o]=C.useState(null),[l,c]=C.useState(null),[u,d]=C.useState(""),[f,h]=C.useState(!1),[m,g]=C.useState(null),[x,v]=C.useState(null),[y,w]=C.useState(""),[_,T]=C.useState(""),[j,I]=C.useState(""),[E,S]=C.useState(""),[B,M]=C.useState("resumen"),R=C.useCallback(async()=>{if(e!=null&&e.id){a(!0);try{const K=e.profile==="SUBDIRECCION"?await uot():await dot(e.id);r(K),o(null)}catch(K){console.error("Error al cargar análisis:",K),o("No se pudieron cargar los análisis.")}finally{a(!1)}}},[e]);C.useEffect(()=>{R()},[R]);const k=async K=>{var W;const ee=(W=K.target.files)==null?void 0:W[0];if(ee){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(ee.type)){o("Por favor, suba un archivo PDF o DOCX válido.");return}g(ee),d(ee.name),o(null);const U=new FileReader;U.onloadend=()=>{var J;const z=(J=U.result)==null?void 0:J.split(",")[1];if(!z){o("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),v(null);return}v({mimeType:ee.type,data:z})},U.onerror=()=>o("Error al leer el archivo."),U.readAsDataURL(ee)}},D=async()=>{if(!u.trim()||!x){o("Debe subir un documento y asignarle un nombre para analizar.");return}if(!y||!_){o("Seleccione Nivel y Asignatura antes de analizar.");return}h(!0),o(null);const K=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser válido.
        `,ee={type:"object",properties:{analysisResults:{type:"array",items:{type:"object",properties:{question:{type:"string"},habilidadBloom:{type:"string",enum:GA}},required:["question","habilidadBloom"]}},summary:{type:"object",properties:GA.reduce((W,P)=>({...W,[P]:{type:"number"}}),{})}},required:["analysisResults","summary"]};try{Sb("Análisis Taxonómico",e);const W="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",U=new Ps(W).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{responseMimeType:"application/json",responseSchema:ee}}),z={inlineData:{mimeType:x.mimeType,data:x.data}},te=(await U.generateContent([K,z])).response.text();let se;try{se=JSON.parse(te)}catch(de){throw console.error("Error al parsear JSON:",de),console.error("Respuesta recibida (no es JSON válido):",te),new Error("La respuesta de la IA no tuvo un formato válido. Intente de nuevo.")}const ie={documentName:u,uploadDate:new Date().toISOString(),userId:e.id,analysisResults:se.analysisResults,summary:se.summary,nivel:y,asignatura:_},ce=await fot(ie);await R(),c(ce),d(""),g(null),v(null),w(""),T("")}catch(W){console.error(W);const P=W instanceof Error?W.message:"Hubo un error al analizar el documento.";o(P)}finally{h(!1)}},L=async K=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await Aot(K),await R(),(l==null?void 0:l.id)===K&&c(null)}catch{o("No se pudo eliminar el análisis.")}},Z=C.useMemo(()=>t.filter(K=>{const ee=j?K.nivel===j:!0,W=E?K.asignatura===E:!0;return ee&&W}),[t,j,E]),V=C.useMemo(()=>{const K={Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0};Z.forEach(W=>{GA.forEach(P=>{var z;const U=((z=W.summary)==null?void 0:z[P])||0;K[P]+=U})});const ee=Object.values(K).reduce((W,P)=>W+P,0);return{acc:K,total:ee}},[Z]),q=C.useMemo(()=>{const K=new Map;Z.forEach(W=>{const P=W.asignatura||"Sin asignatura";K.has(P)||K.set(P,{Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0});const U=K.get(P);GA.forEach(z=>{var J;U[z]+=((J=W.summary)==null?void 0:J[z])||0})});const ee=Array.from(K.entries()).map(([W,P])=>({asignatura:W,counts:P,total:Object.values(P).reduce((U,z)=>U+z,0)}));return ee.sort((W,P)=>P.total-W.total),ee},[Z]),G=C.useMemo(()=>l?Object.values(l.summary).reduce((K,ee)=>K+(ee||0),0):0,[l]);return i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonomico de Evaluaciones"}),s&&i.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),i.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:i.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),i.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[i.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:k,accept:".pdf,.doc,.docx"}),i.jsx("span",{children:"Cargue un archivo"})]}),i.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),i.jsx("p",{className:"text-xs text-slate-500",children:m?m.name:"PDF, DOCX hasta 10MB"})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),i.jsxs("select",{value:y,onChange:K=>w(K.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione"}),YW.map(K=>i.jsx("option",{value:K,children:K},K))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),i.jsxs("select",{value:_,onChange:K=>T(K.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Seleccione"}),Bs.map(K=>i.jsx("option",{value:K,children:K},K))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),i.jsx("input",{type:"text",id:"documentName",value:u,onChange:K=>d(K.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),i.jsx("button",{onClick:D,disabled:f||!x,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:f?i.jsx(hot,{}):"Analizar con IA"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),n?i.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):t.length===0?i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados."}):i.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.map(K=>i.jsxs("button",{onClick:()=>c(K),className:`w-full text-left p-3 rounded-md border ${(l==null?void 0:l.id)===K.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[i.jsx("p",{className:"font-semibold truncate",children:K.documentName}),i.jsx("p",{className:"text-xs text-slate-500",children:new Date(K.uploadDate).toLocaleString("es-CL")}),(K.nivel||K.asignatura)&&i.jsxs("p",{className:"text-xs text-slate-500",children:[K.nivel||"Nivel s/i"," • ",K.asignatura||"Asignatura s/i"]})]},K.id))})]})]}),i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Nivel"}),i.jsxs("select",{value:j,onChange:K=>I(K.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todos"}),YW.map(K=>i.jsx("option",{value:K,children:K},K))]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Asignatura"}),i.jsxs("select",{value:E,onChange:K=>S(K.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[i.jsx("option",{value:"",children:"Todas"}),Bs.map(K=>i.jsx("option",{value:K,children:K},K))]})]}),i.jsx("button",{type:"button",onClick:()=>{I(""),S("")},className:"px-4 py-2 rounded-md bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-200 font-semibold",children:"Limpiar filtros"})]})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-4",children:i.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>M("resumen"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${B==="resumen"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Resumen Global"}),i.jsx("button",{onClick:()=>M("comparacion"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${B==="comparacion"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Comparación por Asignatura"})]})}),B==="resumen"?i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Resumen Global de Habilidades"}),i.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[Z.length," análisis considerados"]})]}),i.jsx("div",{className:"space-y-3",children:GA.map(K=>{const ee=V.acc[K],W=V.total>0?ee/V.total*100:0;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:K}),i.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[ee," (",W.toFixed(0),"%)"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:i.jsx("div",{className:`${qx[K]} h-4 rounded-full`,style:{width:`${W}%`}})})]},K)})}),i.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 gap-3",children:GA.map(K=>i.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg border dark:border-slate-700",children:[i.jsx("span",{className:"text-sm",children:K}),i.jsx("span",{className:`text-xs font-bold text-white px-2 py-1 rounded ${qx[K]}`,children:V.acc[K]})]},K))})]}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Comparación por Asignatura"}),i.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[q.length," asignaturas comparadas"]})]}),q.length===0?i.jsx("div",{className:"text-sm text-slate-500",children:"No hay datos con los filtros actuales."}):i.jsx("div",{className:"space-y-5",children:q.map(K=>{const ee=K.total||1;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:K.asignatura}),i.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[K.total," ítems"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-5 overflow-hidden flex",children:GA.map(W=>{const P=K.counts[W]||0,U=P/ee*100;return i.jsx("div",{className:`${qx[W]} h-5`,style:{width:`${U}%`},title:`${W}: ${P} (${U.toFixed(0)}%)`},W)})}),i.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:GA.map(W=>i.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[i.jsx("span",{className:`inline-block w-3 h-3 rounded ${qx[W]}`}),i.jsx("span",{children:W})]},W))})]},K.asignatura)})})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:l?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.documentName}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(l.uploadDate).toLocaleString("es-CL"),(l.nivel||l.asignatura)&&i.jsxs(i.Fragment,{children:[" ","• ",l.nivel||"Nivel s/i"," • ",l.asignatura||"Asignatura s/i"]})]})]}),i.jsx("button",{onClick:()=>L(l.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado del Documento (",G," preguntas)"]}),i.jsx("div",{className:"space-y-3",children:GA.map(K=>{const ee=l.summary[K]||0,W=G>0?ee/G*100:0;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:K}),i.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[ee," (",W.toFixed(0),"%)"]})]}),i.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:i.jsx("div",{className:`${qx[K]} h-4 rounded-full`,style:{width:`${W}%`}})})]},K)})})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),i.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:l.analysisResults.map((K,ee)=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:K.question}),i.jsx("td",{className:"px-4 py-3 text-sm",children:i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${qx[K.habilidadBloom]}`,children:K.habilidadBloom})})]},ee))})]})})]})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})]})},$S="empresas_practicas",mot="usuarios",zM="rutas_supervision",$M=e=>{const t=e.data();return{id:e.id,...t}};async function pot(e){const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4&region=CL`;try{const a=await(await fetch(r)).json();return a.status==="OK"&&a.results[0]?a.results[0].geometry.location:null}catch(n){return console.error("Error en la llamada a la API de Geocodificación:",n),null}}const got=e=>{const t=Vt(pt(lt,$S),cr("nombre","asc"));return hr(t,r=>{const n=r.docs.map(a=>$M(a));e(n)},r=>console.error("Error al suscribirse a empresas:",r))},xot=async e=>{const t=e.calificaciones.reduce((n,a)=>n+(a.score||0),0),r={...e,puntajeTotal:t};if(e.direccion){const n=await pot(e.direccion);n&&(r.coordenadas=n)}if("id"in e&&e.id){const{id:n,...a}=r,s=rr(lt,$S,n);return await yi(s,a,{merge:!0}),n}else return(await an(pt(lt,$S),{...r,createdAt:za()})).id},vot=async e=>{const t=rr(lt,$S,e);await ka(t)},bot=e=>{const t=Vt(pt(lt,mot),wr("profile","==","PROFESORADO"),cr("nombreCompleto","asc"));return hr(t,r=>{const n=r.docs.map(a=>$M(a));e(n)},r=>console.error("Error al suscribirse a profesores:",r))},yot=async e=>(await an(pt(lt,zM),{...e,createdAt:za()})).id,wot=e=>{const t=Vt(pt(lt,zM),cr("createdAt","desc"));return hr(t,r=>{const n=r.docs.map(a=>$M(a));e(n)},r=>console.error("Error al suscribirse a rutas guardadas:",r))},Eot=async e=>{const t=rr(lt,zM,e);await ka(t)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lg=function(){return lg=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},lg.apply(this,arguments)};function Not(e,t,r,n){return new(r||(r=Promise))(function(a,s){function o(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){var d;u.done?a(u.value):(d=u.value,d instanceof r?d:new r(function(f){f(d)})).then(o,l)}c((n=n.apply(e,[])).next())})}function Cot(e,t){var r,n,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(u){return function(d){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&d[0]?n.return:d[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,d[1])).done)return a;switch(n=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return o.label++,{value:d[1],done:!1};case 5:o.label++,n=d[1],d=[0];continue;case 7:d=o.ops.pop(),o.trys.pop();continue;default:if(a=o.trys,!((a=a.length>0&&a[a.length-1])||d[0]!==6&&d[0]!==2)){o=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){o.label=d[1];break}if(d[0]===6&&o.label<a[1]){o.label=a[1],a=d;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(d);break}a[2]&&o.ops.pop(),o.trys.pop();continue}d=t.call(e,o)}catch(f){d=[6,f],n=0}finally{r=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([c,u])}}}function Lr(){return Lr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lr.apply(this,arguments)}function cg(e){return cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cg(e)}function ode(e){var t=function(r,n){if(cg(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n);if(cg(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return cg(t)==="symbol"?t:String(t)}function Nv(e,t,r){return(t=ode(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZW(Object(r),!0).forEach(function(n){Nv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eX(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ode(n.key),n)}}function aD(e,t){return aD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},aD(e,t)}function GS(e){return GS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},GS(e)}function _ot(e,t){if(t&&(cg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e)}function Sot(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=GS(e);if(t){var a=GS(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _ot(this,r)}}function sD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lde(e,t){if(e){if(typeof e=="string")return sD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sD(e,t):void 0}}function GM(e){return function(t){if(Array.isArray(t))return sD(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||lde(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var kot=function(){function e(r){var n=this;this._insertTag=function(a){var s;s=n.tags.length===0?n.insertionPoint?n.insertionPoint.nextSibling:n.prepend?n.container.firstChild:n.before:n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(a,s),n.tags.push(a)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(s){var o=document.createElement("style");return o.setAttribute("data-emotion",s.key),s.nonce!==void 0&&o.setAttribute("nonce",s.nonce),o.appendChild(document.createTextNode("")),o.setAttribute("data-s",""),o}(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var a=function(s){if(s.sheet)return s.sheet;for(var o=0;o<document.styleSheets.length;o++)if(document.styleSheets[o].ownerNode===s)return document.styleSheets[o]}(n);try{a.insertRule(r,a.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),ju="-ms-",tX="-moz-",Zn="-webkit-",qM="decl",cde="@keyframes",jot=Math.abs,Aj=String.fromCharCode,Bot=Object.assign;function ude(e){return e.trim()}function sa(e,t,r){return e.replace(t,r)}function iD(e,t){return e.indexOf(t)}function go(e,t){return 0|e.charCodeAt(t)}function F2(e,t,r){return e.slice(t,r)}function Uf(e){return e.length}function KM(e){return e.length}function IC(e,t){return t.push(e),e}var hj=1,Db=1,dde=0,uc=0,mi=0,x1="";function mj(e,t,r,n,a,s,o){return{value:e,root:t,parent:r,type:n,props:a,children:s,line:hj,column:Db,length:o,return:""}}function Sy(e,t){return Bot(mj("",null,null,"",null,null,0),e,{length:-e.length},t)}function qc(){return mi=uc<dde?go(x1,uc++):0,Db++,mi===10&&(Db=1,hj++),mi}function sA(){return go(x1,uc)}function O5(){return uc}function TE(e,t){return F2(x1,e,t)}function O2(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function fde(e){return hj=Db=1,dde=Uf(x1=e),uc=0,[]}function Ade(e){return x1="",e}function D5(e){return ude(TE(uc-1,oD(e===91?e+2:e===40?e+1:e)))}function Tot(e){for(;(mi=sA())&&mi<33;)qc();return O2(e)>2||O2(mi)>3?"":" "}function Iot(e,t){for(;--t&&qc()&&!(mi<48||mi>102||mi>57&&mi<65||mi>70&&mi<97););return TE(e,O5()+(t<6&&sA()==32&&qc()==32))}function oD(e){for(;qc();)switch(mi){case e:return uc;case 34:case 39:e!==34&&e!==39&&oD(mi);break;case 40:e===41&&oD(e);break;case 92:qc()}return uc}function Fot(e,t){for(;qc()&&e+mi!==57&&(e+mi!==84||sA()!==47););return"/*"+TE(t,uc-1)+"*"+Aj(e===47?e:qc())}function Oot(e){for(;!O2(sA());)qc();return TE(e,uc)}function rX(e){return Ade(P5("",null,null,null,[""],e=fde(e),0,[0],e))}function P5(e,t,r,n,a,s,o,l,c){for(var u=0,d=0,f=o,h=0,m=0,g=0,x=1,v=1,y=1,w=0,_="",T=a,j=s,I=n,E=_;v;)switch(g=w,w=qc()){case 40:if(g!=108&&go(E,f-1)==58){iD(E+=sa(D5(w),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:E+=D5(w);break;case 9:case 10:case 13:case 32:E+=Tot(g);break;case 92:E+=Iot(O5()-1,7);continue;case 47:switch(sA()){case 42:case 47:IC(Dot(Fot(qc(),O5()),t,r),c);break;default:E+="/"}break;case 123*x:l[u++]=Uf(E)*y;case 125*x:case 59:case 0:switch(w){case 0:case 125:v=0;case 59+d:m>0&&Uf(E)-f&&IC(m>32?aX(E+";",n,r,f-1):aX(sa(E," ","")+";",n,r,f-2),c);break;case 59:E+=";";default:if(IC(I=nX(E,t,r,u,d,a,l,_,T=[],j=[],f),s),w===123)if(d===0)P5(E,t,I,I,T,s,f,l,j);else switch(h===99&&go(E,3)===110?100:h){case 100:case 109:case 115:P5(e,I,I,n&&IC(nX(e,I,I,0,0,a,l,_,a,T=[],f),j),a,j,f,l,n?T:j);break;default:P5(E,I,I,I,[""],j,0,l,j)}}u=d=m=0,x=y=1,_=E="",f=o;break;case 58:f=1+Uf(E),m=g;default:if(x<1){if(w==123)--x;else if(w==125&&x++==0&&(mi=uc>0?go(x1,--uc):0,Db--,mi===10&&(Db=1,hj--),mi==125))continue}switch(E+=Aj(w),w*x){case 38:y=d>0?1:(E+="\f",-1);break;case 44:l[u++]=(Uf(E)-1)*y,y=1;break;case 64:sA()===45&&(E+=D5(qc())),h=sA(),d=f=Uf(_=E+=Oot(O5())),w++;break;case 45:g===45&&Uf(E)==2&&(x=0)}}return s}function nX(e,t,r,n,a,s,o,l,c,u,d){for(var f=a-1,h=a===0?s:[""],m=KM(h),g=0,x=0,v=0;g<n;++g)for(var y=0,w=F2(e,f+1,f=jot(x=o[g])),_=e;y<m;++y)(_=ude(x>0?h[y]+" "+w:sa(w,/&\f/g,h[y])))&&(c[v++]=_);return mj(e,t,r,a===0?"rule":l,c,u,d)}function Dot(e,t,r){return mj(e,t,r,"comm",Aj(mi),F2(e,2,-2),0)}function aX(e,t,r,n){return mj(e,t,r,qM,F2(e,0,n),F2(e,n+1,-1),n)}function ug(e,t){for(var r="",n=KM(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function sX(e,t,r,n){switch(e.type){case"@import":case qM:return e.return=e.return||e.value;case"comm":return"";case cde:return e.return=e.value+"{"+ug(e.children,n)+"}";case"rule":e.value=e.props.join(",")}return Uf(r=ug(e.children,n))?e.return=e.value+"{"+r+"}":""}function iX(e){var t=KM(e);return function(r,n,a,s){for(var o="",l=0;l<t;l++)o+=e[l](r,n,a,s)||"";return o}}function Pot(e){return function(t){t.root||(t=t.return)&&e(t)}}function hde(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Rot=function(e,t,r){for(var n=0,a=0;n=a,a=sA(),n===38&&a===12&&(t[r]=1),!O2(a);)qc();return TE(e,uc)},Lot=function(e,t){return Ade(function(r,n){var a=-1,s=44;do switch(O2(s)){case 0:s===38&&sA()===12&&(n[a]=1),r[a]+=Rot(uc-1,n,a);break;case 2:r[a]+=D5(s);break;case 4:if(s===44){r[++a]=sA()===58?"&\f":"",n[a]=r[a].length;break}default:r[a]+=Aj(s)}while(s=qc());return r}(fde(e),t))},oX=new WeakMap,Mot=function(e){if(e.type==="rule"&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(!(r=r.parent))return;if((e.props.length!==1||t.charCodeAt(0)===58||oX.get(r))&&!n){oX.set(e,!0);for(var a=[],s=Lot(t,a),o=r.props,l=0,c=0;l<s.length;l++)for(var u=0;u<o.length;u++,c++)e.props[c]=a[l]?s[l].replace(/&\f/g,o[u]):o[u]+" "+s[l]}}},Uot=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function mde(e,t){switch(function(r,n){return 45^go(r,0)?(((n<<2^go(r,0))<<2^go(r,1))<<2^go(r,2))<<2^go(r,3):0}(e,t)){case 5103:return Zn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Zn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Zn+e+tX+e+ju+e+e;case 6828:case 4268:return Zn+e+ju+e+e;case 6165:return Zn+e+ju+"flex-"+e+e;case 5187:return Zn+e+sa(e,/(\w+).+(:[^]+)/,Zn+"box-$1$2-ms-flex-$1$2")+e;case 5443:return Zn+e+ju+"flex-item-"+sa(e,/flex-|-self/,"")+e;case 4675:return Zn+e+ju+"flex-line-pack"+sa(e,/align-content|flex-|-self/,"")+e;case 5548:return Zn+e+ju+sa(e,"shrink","negative")+e;case 5292:return Zn+e+ju+sa(e,"basis","preferred-size")+e;case 6060:return Zn+"box-"+sa(e,"-grow","")+Zn+e+ju+sa(e,"grow","positive")+e;case 4554:return Zn+sa(e,/([^-])(transform)/g,"$1"+Zn+"$2")+e;case 6187:return sa(sa(sa(e,/(zoom-|grab)/,Zn+"$1"),/(image-set)/,Zn+"$1"),e,"")+e;case 5495:case 3959:return sa(e,/(image-set\([^]*)/,Zn+"$1$`$1");case 4968:return sa(sa(e,/(.+:)(flex-)?(.*)/,Zn+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+Zn+e+e;case 4095:case 3583:case 4068:case 2532:return sa(e,/(.+)-inline(.+)/,Zn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Uf(e)-1-t>6)switch(go(e,t+1)){case 109:if(go(e,t+4)!==45)break;case 102:return sa(e,/(.+:)(.+)-([^]+)/,"$1"+Zn+"$2-$3$1"+tX+(go(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~iD(e,"stretch")?mde(sa(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(go(e,t+1)!==115)break;case 6444:switch(go(e,Uf(e)-3-(~iD(e,"!important")&&10))){case 107:return sa(e,":",":"+Zn)+e;case 101:return sa(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Zn+(go(e,14)===45?"inline-":"")+"box$3$1"+Zn+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(go(e,t+11)){case 114:return Zn+e+ju+sa(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Zn+e+ju+sa(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Zn+e+ju+sa(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Zn+e+ju+e+e}return e}var lX,FC,R5=typeof document<"u",Qot=R5?void 0:(lX=function(){return hde(function(){var e={};return function(t){return e[t]}})},FC=new WeakMap,function(e){if(FC.has(e))return FC.get(e);var t=lX(e);return FC.set(e,t),t}),Hot=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case qM:e.return=mde(e.value,e.length);break;case cde:return ug([Sy(e,{value:sa(e.value,"@","@"+Zn)})],n);case"rule":if(e.length)return function(a,s){return a.map(s).join("")}(e.props,function(a){switch(function(s,o){return(s=o.exec(s))?s[0]:s}(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ug([Sy(e,{props:[sa(a,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return ug([Sy(e,{props:[sa(a,/:(plac\w+)/,":"+Zn+"input-$1")]}),Sy(e,{props:[sa(a,/:(plac\w+)/,":-moz-$1")]}),Sy(e,{props:[sa(a,/:(plac\w+)/,"-ms-input-$1")]})],n)}return""})}}],pde=function(e){var t=e.key;if(R5&&t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){y.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var n=e.stylisPlugins||Hot,a,s,o={},l=[];R5&&(a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var w=y.getAttribute("data-emotion").split(" "),_=1;_<w.length;_++)o[w[_]]=!0;l.push(y)}));var c=[Mot,Uot];if(R5){var u,d=[sX,Pot(function(y){u.insert(y)})],f=iX(c.concat(n,d));s=function(y,w,_,T){u=_,ug(rX(y?y+"{"+w.styles+"}":w.styles),f),T&&(v.inserted[w.name]=!0)}}else{var h=[sX],m=iX(c.concat(n,h)),g=Qot(n)(t),x=function(y,w){var _=w.name;return g[_]===void 0&&(g[_]=ug(rX(y?y+"{"+w.styles+"}":w.styles),m)),g[_]};s=function(y,w,_,T){var j=w.name,I=x(y,w);return v.compat===void 0?(T&&(v.inserted[j]=!0),I):T?void(v.inserted[j]=I):I}}var v={key:t,sheet:new kot({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:s};return v.sheet.hydrate(l),v};function oa(e,t,r){return e(r={path:t,exports:{},require:function(n,a){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(a==null&&r.path)}},r.exports),r.exports}var so=typeof Symbol=="function"&&Symbol.for,lD=so?Symbol.for("react.element"):60103,cD=so?Symbol.for("react.portal"):60106,L5=so?Symbol.for("react.fragment"):60107,M5=so?Symbol.for("react.strict_mode"):60108,U5=so?Symbol.for("react.profiler"):60114,Q5=so?Symbol.for("react.provider"):60109,H5=so?Symbol.for("react.context"):60110,uD=so?Symbol.for("react.async_mode"):60111,qS=so?Symbol.for("react.concurrent_mode"):60111,V5=so?Symbol.for("react.forward_ref"):60112,z5=so?Symbol.for("react.suspense"):60113,Vot=so?Symbol.for("react.suspense_list"):60120,$5=so?Symbol.for("react.memo"):60115,G5=so?Symbol.for("react.lazy"):60116,zot=so?Symbol.for("react.block"):60121,$ot=so?Symbol.for("react.fundamental"):60117,Got=so?Symbol.for("react.responder"):60118,qot=so?Symbol.for("react.scope"):60119;function Ic(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case lD:switch(e=e.type){case uD:case qS:case L5:case U5:case M5:case z5:return e;default:switch(e=e&&e.$$typeof){case H5:case V5:case G5:case $5:case Q5:return e;default:return t}}case cD:return t}}}function cX(e){return Ic(e)===qS}var Kot={AsyncMode:uD,ConcurrentMode:qS,ContextConsumer:H5,ContextProvider:Q5,Element:lD,ForwardRef:V5,Fragment:L5,Lazy:G5,Memo:$5,Portal:cD,Profiler:U5,StrictMode:M5,Suspense:z5,isAsyncMode:function(e){return cX(e)||Ic(e)===uD},isConcurrentMode:cX,isContextConsumer:function(e){return Ic(e)===H5},isContextProvider:function(e){return Ic(e)===Q5},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===lD},isForwardRef:function(e){return Ic(e)===V5},isFragment:function(e){return Ic(e)===L5},isLazy:function(e){return Ic(e)===G5},isMemo:function(e){return Ic(e)===$5},isPortal:function(e){return Ic(e)===cD},isProfiler:function(e){return Ic(e)===U5},isStrictMode:function(e){return Ic(e)===M5},isSuspense:function(e){return Ic(e)===z5},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===L5||e===qS||e===U5||e===M5||e===z5||e===Vot||typeof e=="object"&&e!==null&&(e.$$typeof===G5||e.$$typeof===$5||e.$$typeof===Q5||e.$$typeof===H5||e.$$typeof===V5||e.$$typeof===$ot||e.$$typeof===Got||e.$$typeof===qot||e.$$typeof===zot)},typeOf:Ic};oa(function(e,t){});var uX=oa(function(e){e.exports=Kot}),dX={};dX[uX.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},dX[uX.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var dD=typeof document<"u";function gde(e,t,r){var n="";return r.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):n+=a+" "}),n}var WM=function(e,t,r){var n=e.key+"-"+t.name;(r===!1||dD===!1&&e.compat!==void 0)&&e.registered[n]===void 0&&(e.registered[n]=t.styles)},XM=function(e,t,r){WM(e,t,r);var n=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a="",s=t;do{var o=e.insert(t===s?"."+n:"",s,e.sheet,!0);dD||o===void 0||(a+=o),s=s.next}while(s!==void 0);if(!dD&&a.length!==0)return a}},Wot={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Xot=/[A-Z]|^ms/g,Yot=/_EMO_([^_]+?)_([^]*?)_EMO_/g,xde=function(e){return e.charCodeAt(1)===45},fX=function(e){return e!=null&&typeof e!="boolean"},KI=hde(function(e){return xde(e)?e:e.replace(Xot,"-$&").toLowerCase()}),AX=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(Yot,function(r,n,a){return Qf={name:n,styles:a,next:Qf},n})}return Wot[e]===1||xde(e)||typeof t!="number"||t===0?t:t+"px"};function Tw(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":if(r.anim===1)return Qf={name:r.name,styles:r.styles,next:Qf},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)Qf={name:n.name,styles:n.styles,next:Qf},n=n.next;var a=r.styles+";";return a}return function(c,u,d){var f="";if(Array.isArray(d))for(var h=0;h<d.length;h++)f+=Tw(c,u,d[h])+";";else for(var m in d){var g=d[m];if(typeof g!="object")u!=null&&u[g]!==void 0?f+=m+"{"+u[g]+"}":fX(g)&&(f+=KI(m)+":"+AX(m,g)+";");else if(!Array.isArray(g)||typeof g[0]!="string"||u!=null&&u[g[0]]!==void 0){var x=Tw(c,u,g);switch(m){case"animation":case"animationName":f+=KI(m)+":"+x+";";break;default:f+=m+"{"+x+"}"}}else for(var v=0;v<g.length;v++)fX(g[v])&&(f+=KI(m)+":"+AX(m,g[v])+";")}return f}(e,t,r);case"function":if(e!==void 0){var s=Qf,o=r(e);return Qf=s,Tw(e,t,o)}break}if(t==null)return r;var l=t[r];return l!==void 0?l:r}var Qf,hX=/label:\s*([^\s;\n{]+)\s*(;|$)/g,pj=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,a="";Qf=void 0;var s=e[0];s==null||s.raw===void 0?(n=!1,a+=Tw(r,t,s)):a+=s[0];for(var o=1;o<e.length;o++)a+=Tw(r,t,e[o]),n&&(a+=s[o]);hX.lastIndex=0;for(var l,c="";(l=hX.exec(a))!==null;)c+="-"+l[1];var u=function(d){for(var f,h=0,m=0,g=d.length;g>=4;++m,g-=4)f=1540483477*(65535&(f=255&d.charCodeAt(m)|(255&d.charCodeAt(++m))<<8|(255&d.charCodeAt(++m))<<16|(255&d.charCodeAt(++m))<<24))+(59797*(f>>>16)<<16),h=1540483477*(65535&(f^=f>>>24))+(59797*(f>>>16)<<16)^1540483477*(65535&h)+(59797*(h>>>16)<<16);switch(g){case 3:h^=(255&d.charCodeAt(m+2))<<16;case 2:h^=(255&d.charCodeAt(m+1))<<8;case 1:h=1540483477*(65535&(h^=255&d.charCodeAt(m)))+(59797*(h>>>16)<<16)}return(((h=1540483477*(65535&(h^=h>>>13))+(59797*(h>>>16)<<16))^h>>>15)>>>0).toString(36)}(a)+c;return{name:u,styles:a,next:Qf}},Jot=typeof document<"u",Zot=function(e){return e()},vde=!!C.useInsertionEffect&&C.useInsertionEffect,bde=Jot&&vde||Zot,mX=vde||C.useLayoutEffect,Wv=typeof document<"u",YM={}.hasOwnProperty,KS=C.createContext(typeof HTMLElement<"u"?pde({key:"css"}):null);KS.Provider;var gj=function(e){return C.forwardRef(function(t,r){var n=C.useContext(KS);return e(t,n,r)})};Wv||(gj=function(e){return function(t){var r=C.useContext(KS);return r===null?(r=pde({key:"css"}),C.createElement(KS.Provider,{value:r},e(t,r))):e(t,r)}});var JM=C.createContext({}),fD="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",elt=function(e,t){var r={};for(var n in t)YM.call(t,n)&&(r[n]=t[n]);return r[fD]=e,r},tlt=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;WM(t,r,n);var a=bde(function(){return XM(t,r,n)});if(!Wv&&a!==void 0){for(var s,o=r.name,l=r.next;l!==void 0;)o+=" "+l.name,l=l.next;return C.createElement("style",((s={})["data-emotion"]=t.key+" "+o,s.dangerouslySetInnerHTML={__html:a},s.nonce=t.sheet.nonce,s))}return null},rlt=gj(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var a=e[fD],s=[n],o="";typeof e.className=="string"?o=gde(t.registered,s,e.className):e.className!=null&&(o=e.className+" ");var l=pj(s,void 0,C.useContext(JM));o+=t.key+"-"+l.name;var c={};for(var u in e)!YM.call(e,u)||u==="css"||u===fD||(c[u]=e[u]);return c.ref=r,c.className=o,C.createElement(C.Fragment,null,C.createElement(tlt,{cache:t,serialized:l,isStringTag:typeof a=="string"}),C.createElement(a,c))});oa(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});var Ir=function(e,t){var r=arguments;if(t==null||!YM.call(t,"css"))return C.createElement.apply(void 0,r);var n=r.length,a=new Array(n);a[0]=rlt,a[1]=elt(e,t);for(var s=2;s<n;s++)a[s]=r[s];return C.createElement.apply(null,a)};gj(function(e,t){var r=e.styles,n=pj([r],void 0,C.useContext(JM));if(!Wv){for(var a,s=n.name,o=n.styles,l=n.next;l!==void 0;)s+=" "+l.name,o+=l.styles,l=l.next;var c=t.compat===!0,u=t.insert("",{name:s,styles:o},t.sheet,c);return c?null:C.createElement("style",((a={})["data-emotion"]=t.key+"-global "+s,a.dangerouslySetInnerHTML={__html:u},a.nonce=t.sheet.nonce,a))}var d=C.useRef();return mX(function(){var f=t.key+"-global",h=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),m=!1,g=document.querySelector('style[data-emotion="'+f+" "+n.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),g!==null&&(m=!0,g.setAttribute("data-emotion",f),h.hydrate([g])),d.current=[h,m],function(){h.flush()}},[t]),mX(function(){var f=d.current,h=f[0];if(f[1])f[1]=!1;else{if(n.next!==void 0&&XM(t,n.next,!0),h.tags.length){var m=h.tags[h.tags.length-1].nextElementSibling;h.before=m,h.flush()}t.insert("",n,h,!1)}},[t,n.name]),null});function ZM(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return pj(t)}var nlt=function e(t){for(var r=t.length,n=0,a="";n<r;n++){var s=t[n];if(s!=null){var o=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))o=e(s);else for(var l in o="",s)s[l]&&l&&(o&&(o+=" "),o+=l);break;default:o=s}o&&(a&&(a+=" "),a+=o)}}return a};function alt(e,t,r){var n=[],a=gde(e,n,r);return n.length<2?r:a+t(n)}var slt=function(e){var t,r=e.cache,n=e.serializedArr,a=bde(function(){for(var s="",o=0;o<n.length;o++){var l=XM(r,n[o],!1);Wv||l===void 0||(s+=l)}if(!Wv)return s});return Wv||a.length===0?null:C.createElement("style",((t={})["data-emotion"]=r.key+" "+n.map(function(s){return s.name}).join(" "),t.dangerouslySetInnerHTML={__html:a},t.nonce=r.sheet.nonce,t))};gj(function(e,t){var r=[],n=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=pj(l,t.registered);return r.push(u),WM(t,u,!1),t.key+"-"+u.name},a={css:n,cx:function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return alt(t.registered,n,nlt(l))},theme:C.useContext(JM)},s=e.children(a);return C.createElement(C.Fragment,null,C.createElement(slt,{cache:t,serializedArr:r}),s)});function qi(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var s,o,l,c,u=[],d=!0,f=!1;try{if(l=(a=a.call(r)).next,n===0){if(Object(a)!==a)return;d=!1}else for(;!(d=(s=l.call(a)).done)&&(u.push(s.value),u.length!==n);d=!0);}catch(h){f=!0,o=h}finally{try{if(!d&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(f)throw o}}return u}}(e,t)||lde(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function zf(e,t){if(e==null)return{};var r,n,a=function(o,l){if(o==null)return{};var c,u,d={},f=Object.keys(o);for(u=0;u<f.length;u++)c=f[u],l.indexOf(c)>=0||(d[c]=o[c]);return d}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ph(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function yde(e){return ph(e).getComputedStyle(e)}const OC=Math.round;function wde(e){return Nde(e)?(e.nodeName||"").toLowerCase():""}let DC;function Ede(e){return e instanceof ph(e).HTMLElement}function q5(e){return e instanceof ph(e).Element}function Nde(e){return e instanceof ph(e).Node}function pX(e){return typeof ShadowRoot>"u"?!1:e instanceof ph(e).ShadowRoot||e instanceof ShadowRoot}function Cde(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=yde(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function ilt(){return/^((?!chrome|android).)*safari/i.test(function(){if(DC)return DC;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(DC=e.brands.map(t=>t.brand+"/"+t.version).join(" "),DC):navigator.userAgent}())}function _de(e){return q5(e)?e:e.contextElement}const Sde={x:1,y:1};function gX(e){const t=_de(e);if(!Ede(t))return Sde;const r=t.getBoundingClientRect(),{width:n,height:a,fallback:s}=function(c){const u=yde(c);let d=parseFloat(u.width),f=parseFloat(u.height);const h=c.offsetWidth,m=c.offsetHeight,g=OC(d)!==h||OC(f)!==m;return g&&(d=h,f=m),{width:d,height:f,fallback:g}}(t);let o=(s?OC(r.width):r.width)/n,l=(s?OC(r.height):r.height)/a;return o&&Number.isFinite(o)||(o=1),l&&Number.isFinite(l)||(l=1),{x:o,y:l}}function xX(e,t,r,n){var a,s;t===void 0&&(t=!1),r===void 0&&(r=!1);const o=e.getBoundingClientRect(),l=_de(e);let c=Sde;t&&(c=gX(e));const u=l?ph(l):window,d=ilt()&&r;let f=(o.left+(d&&((a=u.visualViewport)==null?void 0:a.offsetLeft)||0))/c.x,h=(o.top+(d&&((s=u.visualViewport)==null?void 0:s.offsetTop)||0))/c.y,m=o.width/c.x,g=o.height/c.y;if(l){const x=ph(l),v=n;let y=x.frameElement;for(;y&&n&&v!==x;){const w=gX(y),_=y.getBoundingClientRect(),T=getComputedStyle(y);_.x+=(y.clientLeft+parseFloat(T.paddingLeft))*w.x,_.y+=(y.clientTop+parseFloat(T.paddingTop))*w.y,f*=w.x,h*=w.y,m*=w.x,g*=w.y,f+=_.x,h+=_.y,y=ph(y).frameElement}}return{width:m,height:g,top:h,right:f+m,bottom:h+g,left:f,x:f,y:h}}function olt(e){if(wde(e)==="html")return e;const t=e.assignedSlot||e.parentNode||pX(e)&&e.host||function(r){return((Nde(r)?r.ownerDocument:r.document)||window.document).documentElement}(e);return pX(t)?t.host:t}function kde(e){const t=olt(e);return function(r){return["html","body","#document"].includes(wde(r))}(t)?t.ownerDocument.body:Ede(t)&&Cde(t)?t:kde(t)}function K5(e,t){var r;t===void 0&&(t=[]);const n=kde(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),s=ph(n);return a?t.concat(s,s.visualViewport||[],Cde(n)?n:[]):t.concat(n,K5(n))}var AD=typeof document<"u"?C.useLayoutEffect:C.useEffect,llt=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],WS=function(){};function clt(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function ult(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var s=[].concat(n);if(t&&e)for(var o in t)t.hasOwnProperty(o)&&t[o]&&s.push("".concat(clt(e,o)));return s.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var vX=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):cg(e)==="object"&&e!==null?[e]:[];var t},bX=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,Cr({},zf(e,llt))},Cs=function(e,t,r){var n=e.cx,a=e.getStyles,s=e.getClassNames,o=e.className;return{css:a(t,e),className:n(r??{},s(t,e),o)}};function xj(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function jde(e){return xj(e)?window.pageYOffset:e.scrollTop}function XS(e,t){xj(e)?window.scrollTo(0,t):e.scrollTop=t}function dlt(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function PC(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:WS,a=jde(e),s=t-a,o=10,l=0;function c(){var u=dlt(l+=o,a,s,r);XS(e,u),l<r?window.requestAnimationFrame(c):n(e)}c()}function yX(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=t.offsetHeight/3;n.bottom+a>r.bottom?XS(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):n.top-a<r.top&&XS(e,Math.max(t.offsetTop-a,0))}function wX(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var Bde=!1,flt={get passive(){return Bde=!0}},RC=typeof window<"u"?window:{};RC.addEventListener&&RC.removeEventListener&&(RC.addEventListener("p",WS,flt),RC.removeEventListener("p",WS,!1));var Alt=Bde;function hlt(e){return e!=null}function LC(e,t,r){return e?t:r}var mlt=["children","innerProps"],plt=["children","innerProps"];function glt(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,a=e.placement,s=e.shouldScroll,o=e.isFixedPosition,l=e.controlHeight,c=function(Z){var V=getComputedStyle(Z),q=V.position==="absolute",G=/(auto|scroll)/;if(V.position==="fixed")return document.documentElement;for(var K=Z;K=K.parentElement;)if(V=getComputedStyle(K),(!q||V.position!=="static")&&G.test(V.overflow+V.overflowY+V.overflowX))return K;return document.documentElement}(r),u={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return u;var d,f=c.getBoundingClientRect().height,h=r.getBoundingClientRect(),m=h.bottom,g=h.height,x=h.top,v=r.offsetParent.getBoundingClientRect().top,y=o||xj(d=c)?window.innerHeight:d.clientHeight,w=jde(c),_=parseInt(getComputedStyle(r).marginBottom,10),T=parseInt(getComputedStyle(r).marginTop,10),j=v-T,I=y-x,E=j+w,S=f-w-x,B=m-y+w+_,M=w+x-T,R=160;switch(a){case"auto":case"bottom":if(I>=g)return{placement:"bottom",maxHeight:t};if(S>=g&&!o)return s&&PC(c,B,R),{placement:"bottom",maxHeight:t};if(!o&&S>=n||o&&I>=n)return s&&PC(c,B,R),{placement:"bottom",maxHeight:o?I-_:S-_};if(a==="auto"||o){var k=t,D=o?j:E;return D>=n&&(k=Math.min(D-_-l,t)),{placement:"top",maxHeight:k}}if(a==="bottom")return s&&XS(c,B),{placement:"bottom",maxHeight:t};break;case"top":if(j>=g)return{placement:"top",maxHeight:t};if(E>=g&&!o)return s&&PC(c,M,R),{placement:"top",maxHeight:t};if(!o&&E>=n||o&&j>=n){var L=t;return(!o&&E>=n||o&&j>=n)&&(L=o?j-T:E-T),s&&PC(c,M,R),{placement:"top",maxHeight:L}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return u}var EX,Tde=function(e){return e==="auto"?"bottom":e},Ide=C.createContext(null),xlt=function(e){var t=e.children,r=e.minMenuHeight,n=e.maxMenuHeight,a=e.menuPlacement,s=e.menuPosition,o=e.menuShouldScrollIntoView,l=e.theme,c=(C.useContext(Ide)||{}).setPortalPlacement,u=C.useRef(null),d=qi(C.useState(n),2),f=d[0],h=d[1],m=qi(C.useState(null),2),g=m[0],x=m[1],v=l.spacing.controlHeight;return AD(function(){var y=u.current;if(y){var w=s==="fixed",_=glt({maxHeight:n,menuEl:y,minHeight:r,placement:a,shouldScroll:o&&!w,isFixedPosition:w,controlHeight:v});h(_.maxHeight),x(_.placement),c==null||c(_.placement)}},[n,a,s,o,r,c,v]),t({ref:u,placerProps:Cr(Cr({},e),{},{placement:g||Tde(a),maxHeight:f})})},vlt=function(e){var t=e.children,r=e.innerRef,n=e.innerProps;return Ir("div",Lr({},Cs(e,"menu",{menu:!0}),{ref:r},n),t)},Fde=function(e,t){var r=e.theme,n=r.spacing.baseUnit,a=r.colors;return Cr({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},blt=Fde,ylt=Fde,wlt=["size"],Elt=["innerProps","isRtl","size"],WI,XI,Nlt={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Ode=function(e){var t=e.size,r=zf(e,wlt);return Ir("svg",Lr({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Nlt},r))},YI=function(e){return Ir(Ode,Lr({size:20},e),Ir("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},NX=function(e){return Ir(Ode,Lr({size:20},e),Ir("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Dde=function(e,t){var r=e.isFocused,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return Cr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*a,":hover":{color:r?s.neutral80:s.neutral40}})},Clt=Dde,_lt=Dde,Slt=function(){var e=ZM.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(EX||(WI=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],XI||(XI=WI.slice(0)),EX=Object.freeze(Object.defineProperties(WI,{raw:{value:Object.freeze(XI)}})))),JI=function(e){var t=e.delay,r=e.offset;return Ir("span",{css:ZM({animation:"".concat(Slt," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},klt=function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.innerRef,s=e.innerProps,o=e.menuIsOpen;return Ir("div",Lr({ref:a},Cs(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":o}),s,{"aria-disabled":r||void 0}),t)},jlt=["data"],Blt=function(e){var t=e.children,r=e.cx,n=e.getStyles,a=e.getClassNames,s=e.Heading,o=e.headingProps,l=e.innerProps,c=e.label,u=e.theme,d=e.selectProps;return Ir("div",Lr({},Cs(e,"group",{group:!0}),l),Ir(s,Lr({},o,{selectProps:d,theme:u,getStyles:n,getClassNames:a,cx:r}),c),Ir("div",null,t))},Tlt=["innerRef","isDisabled","isHidden","inputClassName"],Pde={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},Ilt={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Cr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},Pde)},Flt=function(e){return Cr({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},Pde)},CX=function(e){var t=e.children,r=e.innerProps;return Ir("div",r,t)},Olt=function(e){var t=e.children,r=e.components,n=e.data,a=e.innerProps,s=e.isDisabled,o=e.removeProps,l=e.selectProps,c=r.Container,u=r.Label,d=r.Remove;return Ir(c,{data:n,innerProps:Cr(Cr({},Cs(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:l},Ir(u,{data:n,innerProps:Cr({},Cs(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},t),Ir(d,{data:n,innerProps:Cr(Cr({},Cs(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},o),selectProps:l}))},Dlt={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return Ir("div",Lr({},Cs(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||Ir(YI,null))},Control:klt,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return Ir("div",Lr({},Cs(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||Ir(NX,null))},DownChevron:NX,CrossIcon:YI,Group:Blt,GroupHeading:function(e){var t=bX(e);t.data;var r=zf(t,jlt);return Ir("div",Lr({},Cs(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return Ir("div",Lr({},Cs(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return Ir("span",Lr({},t,Cs(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,r=e.value,n=bX(e),a=n.innerRef,s=n.isDisabled,o=n.isHidden,l=n.inputClassName,c=zf(n,Tlt);return Ir("div",Lr({},Cs(e,"input",{"input-container":!0}),{"data-value":r||""}),Ir("input",Lr({className:t({input:!0},l),ref:a,style:Flt(o),disabled:s},c)))},LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,n=e.size,a=n===void 0?4:n,s=zf(e,Elt);return Ir("div",Lr({},Cs(Cr(Cr({},s),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Ir(JI,{delay:0,offset:r}),Ir(JI,{delay:160,offset:!0}),Ir(JI,{delay:320,offset:!r}))},Menu:vlt,MenuList:function(e){var t=e.children,r=e.innerProps,n=e.innerRef,a=e.isMulti;return Ir("div",Lr({},Cs(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:n},r),t)},MenuPortal:function(e){var t=e.appendTo,r=e.children,n=e.controlElement,a=e.innerProps,s=e.menuPlacement,o=e.menuPosition,l=C.useRef(null),c=C.useRef(null),u=qi(C.useState(Tde(s)),2),d=u[0],f=u[1],h=C.useMemo(function(){return{setPortalPlacement:f}},[]),m=qi(C.useState(null),2),g=m[0],x=m[1],v=C.useCallback(function(){if(n){var T=function(E){var S=E.getBoundingClientRect();return{bottom:S.bottom,height:S.height,left:S.left,right:S.right,top:S.top,width:S.width}}(n),j=o==="fixed"?0:window.pageYOffset,I=T[d]+j;I===(g==null?void 0:g.offset)&&T.left===(g==null?void 0:g.rect.left)&&T.width===(g==null?void 0:g.rect.width)||x({offset:I,rect:T})}},[n,o,d,g==null?void 0:g.offset,g==null?void 0:g.rect.left,g==null?void 0:g.rect.width]);AD(function(){v()},[v]);var y=C.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),n&&l.current&&(c.current=function(T,j,I,E){E===void 0&&(E={});const{ancestorScroll:S=!0,ancestorResize:B=!0,elementResize:M=!0,animationFrame:R=!1}=E,k=S&&!R,D=k||B?[...q5(T)?K5(T):T.contextElement?K5(T.contextElement):[],...K5(j)]:[];D.forEach(q=>{k&&q.addEventListener("scroll",I,{passive:!0}),B&&q.addEventListener("resize",I)});let L,Z=null;if(M){let q=!0;Z=new ResizeObserver(()=>{q||I(),q=!1}),q5(T)&&!R&&Z.observe(T),q5(T)||!T.contextElement||R||Z.observe(T.contextElement),Z.observe(j)}let V=R?xX(T):null;return R&&function q(){const G=xX(T);!V||G.x===V.x&&G.y===V.y&&G.width===V.width&&G.height===V.height||I(),V=G,L=requestAnimationFrame(q)}(),I(),()=>{var q;D.forEach(G=>{k&&G.removeEventListener("scroll",I),B&&G.removeEventListener("resize",I)}),(q=Z)==null||q.disconnect(),Z=null,R&&cancelAnimationFrame(L)}}(n,l.current,v,{elementResize:"ResizeObserver"in window}))},[n,v]);AD(function(){y()},[y]);var w=C.useCallback(function(T){l.current=T,y()},[y]);if(!t&&o!=="fixed"||!g)return null;var _=Ir("div",Lr({ref:w},Cs(Cr(Cr({},e),{},{offset:g.offset,position:o,rect:g.rect}),"menuPortal",{"menu-portal":!0}),a),r);return Ir(Ide.Provider,{value:h},t?n8.createPortal(_,t):_)},LoadingMessage:function(e){var t=e.children,r=t===void 0?"Loading...":t,n=e.innerProps,a=zf(e,plt);return Ir("div",Lr({},Cs(Cr(Cr({},a),{},{children:r,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),r)},NoOptionsMessage:function(e){var t=e.children,r=t===void 0?"No options":t,n=e.innerProps,a=zf(e,mlt);return Ir("div",Lr({},Cs(Cr(Cr({},a),{},{children:r,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),r)},MultiValue:Olt,MultiValueContainer:CX,MultiValueLabel:CX,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return Ir("div",Lr({role:"button"},r),t||Ir(YI,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.innerRef,o=e.innerProps;return Ir("div",Lr({},Cs(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":a}),{ref:s,"aria-disabled":r},o),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return Ir("div",Lr({},Cs(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,n=e.isDisabled,a=e.isRtl;return Ir("div",Lr({},Cs(e,"container",{"--is-disabled":n,"--is-rtl":a}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,n=e.innerProps;return Ir("div",Lr({},Cs(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,n=e.isMulti,a=e.hasValue;return Ir("div",Lr({},Cs(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":a}),r),t)}},_X=Number.isNaN||function(e){return typeof e=="number"&&e!=e};function Plt(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],a=t[r],!(n===a||_X(n)&&_X(a)))return!1;var n,a;return!0}for(var Rlt={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},SX=function(e){return Ir("span",Lr({css:Rlt},e))},Llt={guidance:function(e){var t=e.isSearchable,r=e.isMulti,n=e.tabSelectsValue,a=e.context,s=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,n=r===void 0?"":r,a=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return"option ".concat(n,s?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,n=e.options,a=e.label,s=a===void 0?"":a,o=e.selectValue,l=e.isDisabled,c=e.isSelected,u=e.isAppleDevice,d=function(m,g){return m&&m.length?"".concat(m.indexOf(g)+1," of ").concat(m.length):""};if(t==="value"&&o)return"value ".concat(s," focused, ").concat(d(o,r),".");if(t==="menu"&&u){var f=l?" disabled":"",h="".concat(c?" selected":"").concat(f);return"".concat(s).concat(h,", ").concat(d(n,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},Mlt=function(e){var t=e.ariaSelection,r=e.focusedOption,n=e.focusedValue,a=e.focusableOptions,s=e.isFocused,o=e.selectValue,l=e.selectProps,c=e.id,u=e.isAppleDevice,d=l.ariaLiveMessages,f=l.getOptionLabel,h=l.inputValue,m=l.isMulti,g=l.isOptionDisabled,x=l.isSearchable,v=l.menuIsOpen,y=l.options,w=l.screenReaderStatus,_=l.tabSelectsValue,T=l.isLoading,j=l["aria-label"],I=l["aria-live"],E=C.useMemo(function(){return Cr(Cr({},Llt),d||{})},[d]),S=C.useMemo(function(){var L,Z="";if(t&&E.onChange){var V=t.option,q=t.options,G=t.removedValue,K=t.removedValues,ee=t.value,W=G||V||(L=ee,Array.isArray(L)?null:L),P=W?f(W):"",U=q||K||void 0,z=U?U.map(f):[],J=Cr({isDisabled:W&&g(W,o),label:P,labels:z},t);Z=E.onChange(J)}return Z},[t,E,g,o,f]),B=C.useMemo(function(){var L="",Z=r||n,V=!!(r&&o&&o.includes(r));if(Z&&E.onFocus){var q={focused:Z,label:f(Z),isDisabled:g(Z,o),isSelected:V,options:a,context:Z===r?"menu":"value",selectValue:o,isAppleDevice:u};L=E.onFocus(q)}return L},[r,n,f,g,E,a,o,u]),M=C.useMemo(function(){var L="";if(v&&y.length&&!T&&E.onFilter){var Z=w({count:a.length});L=E.onFilter({inputValue:h,resultsMessage:Z})}return L},[a,h,v,E,y,w,T]),R=(t==null?void 0:t.action)==="initial-input-focus",k=C.useMemo(function(){var L="";if(E.guidance){var Z=n?"value":v?"menu":"input";L=E.guidance({"aria-label":j,context:Z,isDisabled:r&&g(r,o),isMulti:m,isSearchable:x,tabSelectsValue:_,isInitialFocus:R})}return L},[j,r,n,m,g,x,v,E,o,_,R]),D=Ir(C.Fragment,null,Ir("span",{id:"aria-selection"},S),Ir("span",{id:"aria-focused"},B),Ir("span",{id:"aria-results"},M),Ir("span",{id:"aria-guidance"},k));return Ir(C.Fragment,null,Ir(SX,{id:c},R&&D),Ir(SX,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!R&&D))},ZI=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],Ult=new RegExp("["+ZI.map(function(e){return e.letters}).join("")+"]","g"),Rde={},e6=0;e6<ZI.length;e6++)for(var t6=ZI[e6],r6=0;r6<t6.letters.length;r6++)Rde[t6.letters[r6]]=t6.base;var Lde=function(e){return e.replace(Ult,function(t){return Rde[t]})},Qlt=function(e,t){t===void 0&&(t=Plt);var r=null;function n(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var o=e.apply(this,a);return r={lastResult:o,lastArgs:a,lastThis:this},o}return n.clear=function(){r=null},n}(Lde),kX=function(e){return e.replace(/^\s+|\s+$/g,"")},Hlt=function(e){return"".concat(e.label," ").concat(e.value)},Vlt=["innerRef"];function zlt(e){var t=e.innerRef,r=function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];var l=Object.entries(n).filter(function(c){var u=qi(c,1)[0];return!s.includes(u)});return l.reduce(function(c,u){var d=qi(u,2),f=d[0],h=d[1];return c[f]=h,c},{})}(zf(e,Vlt),"onExited","in","enter","exit","appear");return Ir("input",Lr({ref:t},r,{css:ZM({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var jX=["boxSizing","height","overflow","paddingRight","position"],BX={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function TX(e){e.preventDefault()}function IX(e){e.stopPropagation()}function FX(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function OX(){return"ontouchstart"in window||navigator.maxTouchPoints}var DX=!(typeof window>"u"||!window.document||!window.document.createElement),ky=0,Kx={capture:!1,passive:!1},$lt=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},Glt={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function qlt(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,a=function(o){var l=o.isEnabled,c=o.onBottomArrive,u=o.onBottomLeave,d=o.onTopArrive,f=o.onTopLeave,h=C.useRef(!1),m=C.useRef(!1),g=C.useRef(0),x=C.useRef(null),v=C.useCallback(function(I,E){if(x.current!==null){var S=x.current,B=S.scrollTop,M=S.scrollHeight,R=S.clientHeight,k=x.current,D=E>0,L=M-R-B,Z=!1;L>E&&h.current&&(u&&u(I),h.current=!1),D&&m.current&&(f&&f(I),m.current=!1),D&&E>L?(c&&!h.current&&c(I),k.scrollTop=M,Z=!0,h.current=!0):!D&&-E>B&&(d&&!m.current&&d(I),k.scrollTop=0,Z=!0,m.current=!0),Z&&function(V){V.cancelable&&V.preventDefault(),V.stopPropagation()}(I)}},[c,u,d,f]),y=C.useCallback(function(I){v(I,I.deltaY)},[v]),w=C.useCallback(function(I){g.current=I.changedTouches[0].clientY},[]),_=C.useCallback(function(I){var E=g.current-I.changedTouches[0].clientY;v(I,E)},[v]),T=C.useCallback(function(I){if(I){var E=!!Alt&&{passive:!1};I.addEventListener("wheel",y,E),I.addEventListener("touchstart",w,E),I.addEventListener("touchmove",_,E)}},[_,w,y]),j=C.useCallback(function(I){I&&(I.removeEventListener("wheel",y,!1),I.removeEventListener("touchstart",w,!1),I.removeEventListener("touchmove",_,!1))},[_,w,y]);return C.useEffect(function(){if(l){var I=x.current;return T(I),function(){j(I)}}},[l,T,j]),function(I){x.current=I}}({isEnabled:n===void 0||n,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=function(o){var l=o.isEnabled,c=o.accountForScrollbars,u=c===void 0||c,d=C.useRef({}),f=C.useRef(null),h=C.useCallback(function(g){if(DX){var x=document.body,v=x&&x.style;if(u&&jX.forEach(function(T){var j=v&&v[T];d.current[T]=j}),u&&ky<1){var y=parseInt(d.current.paddingRight,10)||0,w=document.body?document.body.clientWidth:0,_=window.innerWidth-w+y||0;Object.keys(BX).forEach(function(T){var j=BX[T];v&&(v[T]=j)}),v&&(v.paddingRight="".concat(_,"px"))}x&&OX()&&(x.addEventListener("touchmove",TX,Kx),g&&(g.addEventListener("touchstart",FX,Kx),g.addEventListener("touchmove",IX,Kx))),ky+=1}},[u]),m=C.useCallback(function(g){if(DX){var x=document.body,v=x&&x.style;ky=Math.max(ky-1,0),u&&ky<1&&jX.forEach(function(y){var w=d.current[y];v&&(v[y]=w)}),x&&OX()&&(x.removeEventListener("touchmove",TX,Kx),g&&(g.removeEventListener("touchstart",FX,Kx),g.removeEventListener("touchmove",IX,Kx)))}},[u]);return C.useEffect(function(){if(l){var g=f.current;return h(g),function(){m(g)}}},[l,h,m]),function(g){f.current=g}}({isEnabled:r});return Ir(C.Fragment,null,r&&Ir("div",{onClick:$lt,css:Glt}),t(function(o){a(o),s(o)}))}var Klt={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Wlt=function(e){var t=e.name,r=e.onFocus;return Ir("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:Klt,value:"",onChange:function(){}})};function hD(e){var t;return typeof window<"u"&&window.navigator!=null&&e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform)}function Mde(){return hD(/^Mac/i)}function Xlt(){return hD(/^iPhone/i)||hD(/^iPad/i)||Mde()&&navigator.maxTouchPoints>1}var Ylt,Jlt={clearIndicator:_lt,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.theme,s=a.colors,o=a.borderRadius;return Cr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:n?s.primary:s.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:n?s.primary:s.neutral30}})},dropdownIndicator:Clt,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,n=r.colors,a=r.spacing;return Cr({label:"group",cursor:"default",display:"block"},t?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*a.baseUnit,paddingRight:3*a.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return Cr({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:2*a,marginTop:2*a})},input:function(e,t){var r=e.isDisabled,n=e.value,a=e.theme,s=a.spacing,o=a.colors;return Cr(Cr({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},Ilt),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:o.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,n=e.size,a=e.theme,s=a.colors,o=a.spacing.baseUnit;return Cr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*o})},loadingMessage:ylt,menu:function(e,t){var r,n=e.placement,a=e.theme,s=a.borderRadius,o=a.spacing,l=a.colors;return Cr((Nv(r={label:"menu"},function(c){return c?{bottom:"top",top:"bottom"}[c]:"bottom"}(n),"100%"),Nv(r,"position","absolute"),Nv(r,"width","100%"),Nv(r,"zIndex",1),r),t?{}:{backgroundColor:l.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},menuList:function(e,t){var r=e.maxHeight,n=e.theme.spacing.baseUnit;return Cr({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:n,paddingTop:n})},menuPortal:function(e){var t=e.rect,r=e.offset,n=e.position;return{left:t.left,position:n,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors;return Cr({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:n.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,n=r.borderRadius,a=r.colors,s=e.cropWithEllipsis;return Cr({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:n/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors,o=e.isFocused;return Cr({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:o?s.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},noOptionsMessage:blt,option:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.theme,o=s.spacing,l=s.colors;return Cr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?l.primary:n?l.primary25:"transparent",color:r?l.neutral20:a?l.neutral0:"inherit",padding:"".concat(2*o.baseUnit,"px ").concat(3*o.baseUnit,"px"),":active":{backgroundColor:r?void 0:a?l.primary:l.primary50}})},placeholder:function(e,t){var r=e.theme,n=r.spacing,a=r.colors;return Cr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing,s=n.colors;return Cr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,n=e.isMulti,a=e.hasValue,s=e.selectProps.controlShouldRenderValue;return Cr({alignItems:"center",display:n&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}},n6={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},Zlt={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:wX(),captureMenuScroll:!wX(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var r=Cr({ignoreCase:!0,ignoreAccents:!0,stringify:Hlt,trim:!0,matchFrom:"any"},Ylt),n=r.ignoreCase,a=r.ignoreAccents,s=r.stringify,o=r.trim,l=r.matchFrom,c=o?kX(t):t,u=o?kX(s(e)):s(e);return n&&(c=c.toLowerCase(),u=u.toLowerCase()),a&&(c=Qlt(c),u=Lde(u)),l==="start"?u.substr(0,c.length)===c:u.indexOf(c)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function PX(e,t,r,n){return{type:"option",data:t,isDisabled:Qde(e,t,r),isSelected:Hde(e,t,r),label:Ude(e,t),value:YS(e,t),index:n}}function MC(e,t){return e.options.map(function(r,n){if("options"in r){var a=r.options.map(function(o,l){return PX(e,o,t,l)}).filter(function(o){return MX(e,o)});return a.length>0?{type:"group",data:r,options:a,index:n}:void 0}var s=PX(e,r,t,n);return MX(e,s)?s:void 0}).filter(hlt)}function RX(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,GM(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function LX(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,GM(n.options.map(function(a){return{data:a.data,id:"".concat(t,"-").concat(n.index,"-").concat(a.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function MX(e,t){var r=e.inputValue,n=r===void 0?"":r,a=t.data,s=t.isSelected,o=t.label,l=t.value;return(!zde(e)||!s)&&Vde(e,{label:o,value:l,data:a},n)}var a6=function(e,t){var r;return((r=e.find(function(n){return n.data===t}))===null||r===void 0?void 0:r.id)||null},Ude=function(e,t){return e.getOptionLabel(t)},YS=function(e,t){return e.getOptionValue(t)};function Qde(e,t,r){return typeof e.isOptionDisabled=="function"&&e.isOptionDisabled(t,r)}function Hde(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=YS(e,t);return r.some(function(a){return YS(e,a)===n})}function Vde(e,t,r){return!e.filterOption||e.filterOption(t,r)}var zde=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},ect=1,$de=function(e){(function(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(l&&l.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),l&&aD(o,l)})(s,C.Component);var t,r,n,a=Sot(s);function s(o){var l;if(function(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}(this,s),(l=a.call(this,o)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},l.blockOptionHover=!1,l.isComposing=!1,l.commonProps=void 0,l.initialTouchX=0,l.initialTouchY=0,l.openAfterFocus=!1,l.scrollToFocusedOptionOnUpdate=!1,l.userIsDragging=void 0,l.isAppleDevice=Mde()||Xlt(),l.controlRef=null,l.getControlRef=function(f){l.controlRef=f},l.focusedOptionRef=null,l.getFocusedOptionRef=function(f){l.focusedOptionRef=f},l.menuListRef=null,l.getMenuListRef=function(f){l.menuListRef=f},l.inputRef=null,l.getInputRef=function(f){l.inputRef=f},l.focus=l.focusInput,l.blur=l.blurInput,l.onChange=function(f,h){var m=l.props,g=m.onChange,x=m.name;h.name=x,l.ariaOnChange(f,h),g(f,h)},l.setValue=function(f,h,m){var g=l.props,x=g.closeMenuOnSelect,v=g.isMulti,y=g.inputValue;l.onInputChange("",{action:"set-value",prevInputValue:y}),x&&(l.setState({inputIsHiddenAfterUpdate:!v}),l.onMenuClose()),l.setState({clearFocusValueOnUpdate:!0}),l.onChange(f,{action:h,option:m})},l.selectOption=function(f){var h=l.props,m=h.blurInputOnSelect,g=h.isMulti,x=h.name,v=l.state.selectValue,y=g&&l.isOptionSelected(f,v),w=l.isOptionDisabled(f,v);if(y){var _=l.getOptionValue(f);l.setValue(v.filter(function(T){return l.getOptionValue(T)!==_}),"deselect-option",f)}else{if(w)return void l.ariaOnChange(f,{action:"select-option",option:f,name:x});g?l.setValue([].concat(GM(v),[f]),"select-option",f):l.setValue(f,"select-option")}m&&l.blurInput()},l.removeValue=function(f){var h=l.props.isMulti,m=l.state.selectValue,g=l.getOptionValue(f),x=m.filter(function(y){return l.getOptionValue(y)!==g}),v=LC(h,x,x[0]||null);l.onChange(v,{action:"remove-value",removedValue:f}),l.focusInput()},l.clearValue=function(){var f=l.state.selectValue;l.onChange(LC(l.props.isMulti,[],null),{action:"clear",removedValues:f})},l.popValue=function(){var f=l.props.isMulti,h=l.state.selectValue,m=h[h.length-1],g=h.slice(0,h.length-1),x=LC(f,g,g[0]||null);l.onChange(x,{action:"pop-value",removedValue:m})},l.getFocusedOptionId=function(f){return a6(l.state.focusableOptionsWithIds,f)},l.getFocusableOptionsWithIds=function(){return LX(MC(l.props,l.state.selectValue),l.getElementId("option"))},l.getValue=function(){return l.state.selectValue},l.cx=function(){for(var f=arguments.length,h=new Array(f),m=0;m<f;m++)h[m]=arguments[m];return ult.apply(void 0,[l.props.classNamePrefix].concat(h))},l.getOptionLabel=function(f){return Ude(l.props,f)},l.getOptionValue=function(f){return YS(l.props,f)},l.getStyles=function(f,h){var m=l.props.unstyled,g=Jlt[f](h,m);g.boxSizing="border-box";var x=l.props.styles[f];return x?x(g,h):g},l.getClassNames=function(f,h){var m,g;return(m=(g=l.props.classNames)[f])===null||m===void 0?void 0:m.call(g,h)},l.getElementId=function(f){return"".concat(l.state.instancePrefix,"-").concat(f)},l.getComponents=function(){return f=l.props,Cr(Cr({},Dlt),f.components);var f},l.buildCategorizedOptions=function(){return MC(l.props,l.state.selectValue)},l.getCategorizedOptions=function(){return l.props.menuIsOpen?l.buildCategorizedOptions():[]},l.buildFocusableOptions=function(){return RX(l.buildCategorizedOptions())},l.getFocusableOptions=function(){return l.props.menuIsOpen?l.buildFocusableOptions():[]},l.ariaOnChange=function(f,h){l.setState({ariaSelection:Cr({value:f},h)})},l.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),l.focusInput())},l.onMenuMouseMove=function(f){l.blockOptionHover=!1},l.onControlMouseDown=function(f){if(!f.defaultPrevented){var h=l.props.openMenuOnClick;l.state.isFocused?l.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&l.onMenuClose():h&&l.openMenu("first"):(h&&(l.openAfterFocus=!0),l.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},l.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0||l.props.isDisabled)){var h=l.props,m=h.isMulti,g=h.menuIsOpen;l.focusInput(),g?(l.setState({inputIsHiddenAfterUpdate:!m}),l.onMenuClose()):l.openMenu("first"),f.preventDefault()}},l.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(l.clearValue(),f.preventDefault(),l.openAfterFocus=!1,f.type==="touchend"?l.focusInput():setTimeout(function(){return l.focusInput()}))},l.onScroll=function(f){typeof l.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&xj(f.target)&&l.props.onMenuClose():typeof l.props.closeMenuOnScroll=="function"&&l.props.closeMenuOnScroll(f)&&l.props.onMenuClose()},l.onCompositionStart=function(){l.isComposing=!0},l.onCompositionEnd=function(){l.isComposing=!1},l.onTouchStart=function(f){var h=f.touches,m=h&&h.item(0);m&&(l.initialTouchX=m.clientX,l.initialTouchY=m.clientY,l.userIsDragging=!1)},l.onTouchMove=function(f){var h=f.touches,m=h&&h.item(0);if(m){var g=Math.abs(m.clientX-l.initialTouchX),x=Math.abs(m.clientY-l.initialTouchY);l.userIsDragging=g>5||x>5}},l.onTouchEnd=function(f){l.userIsDragging||(l.controlRef&&!l.controlRef.contains(f.target)&&l.menuListRef&&!l.menuListRef.contains(f.target)&&l.blurInput(),l.initialTouchX=0,l.initialTouchY=0)},l.onControlTouchEnd=function(f){l.userIsDragging||l.onControlMouseDown(f)},l.onClearIndicatorTouchEnd=function(f){l.userIsDragging||l.onClearIndicatorMouseDown(f)},l.onDropdownIndicatorTouchEnd=function(f){l.userIsDragging||l.onDropdownIndicatorMouseDown(f)},l.handleInputChange=function(f){var h=l.props.inputValue,m=f.currentTarget.value;l.setState({inputIsHiddenAfterUpdate:!1}),l.onInputChange(m,{action:"input-change",prevInputValue:h}),l.props.menuIsOpen||l.onMenuOpen()},l.onInputFocus=function(f){l.props.onFocus&&l.props.onFocus(f),l.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(l.openAfterFocus||l.props.openMenuOnFocus)&&l.openMenu("first"),l.openAfterFocus=!1},l.onInputBlur=function(f){var h=l.props.inputValue;l.menuListRef&&l.menuListRef.contains(document.activeElement)?l.inputRef.focus():(l.props.onBlur&&l.props.onBlur(f),l.onInputChange("",{action:"input-blur",prevInputValue:h}),l.onMenuClose(),l.setState({focusedValue:null,isFocused:!1}))},l.onOptionHover=function(f){if(!l.blockOptionHover&&l.state.focusedOption!==f){var h=l.getFocusableOptions().indexOf(f);l.setState({focusedOption:f,focusedOptionId:h>-1?l.getFocusedOptionId(f):null})}},l.shouldHideSelectedOptions=function(){return zde(l.props)},l.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),l.focus()},l.onKeyDown=function(f){var h=l.props,m=h.isMulti,g=h.backspaceRemovesValue,x=h.escapeClearsValue,v=h.inputValue,y=h.isClearable,w=h.isDisabled,_=h.menuIsOpen,T=h.onKeyDown,j=h.tabSelectsValue,I=h.openMenuOnFocus,E=l.state,S=E.focusedOption,B=E.focusedValue,M=E.selectValue;if(!(w||typeof T=="function"&&(T(f),f.defaultPrevented))){switch(l.blockOptionHover=!0,f.key){case"ArrowLeft":if(!m||v)return;l.focusValue("previous");break;case"ArrowRight":if(!m||v)return;l.focusValue("next");break;case"Delete":case"Backspace":if(v)return;if(B)l.removeValue(B);else{if(!g)return;m?l.popValue():y&&l.clearValue()}break;case"Tab":if(l.isComposing||f.shiftKey||!_||!j||!S||I&&l.isOptionSelected(S,M))return;l.selectOption(S);break;case"Enter":if(f.keyCode===229)break;if(_){if(!S||l.isComposing)return;l.selectOption(S);break}return;case"Escape":_?(l.setState({inputIsHiddenAfterUpdate:!1}),l.onInputChange("",{action:"menu-close",prevInputValue:v}),l.onMenuClose()):y&&x&&l.clearValue();break;case" ":if(v)return;if(!_){l.openMenu("first");break}if(!S)return;l.selectOption(S);break;case"ArrowUp":_?l.focusOption("up"):l.openMenu("last");break;case"ArrowDown":_?l.focusOption("down"):l.openMenu("first");break;case"PageUp":if(!_)return;l.focusOption("pageup");break;case"PageDown":if(!_)return;l.focusOption("pagedown");break;case"Home":if(!_)return;l.focusOption("first");break;case"End":if(!_)return;l.focusOption("last");break;default:return}f.preventDefault()}},l.state.instancePrefix="react-select-"+(l.props.instanceId||++ect),l.state.selectValue=vX(o.value),o.menuIsOpen&&l.state.selectValue.length){var c=l.getFocusableOptionsWithIds(),u=l.buildFocusableOptions(),d=u.indexOf(l.state.selectValue[0]);l.state.focusableOptionsWithIds=c,l.state.focusedOption=u[d],l.state.focusedOptionId=a6(c,u[d])}return l}return t=s,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&yX(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(o){var l=this.props,c=l.isDisabled,u=l.menuIsOpen,d=this.state.isFocused;(d&&!c&&o.isDisabled||d&&u&&!o.menuIsOpen)&&this.focusInput(),d&&c&&!o.isDisabled?this.setState({isFocused:!1},this.onMenuClose):d||c||!o.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(yX(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(o,l){this.props.onInputChange(o,l)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(o){var l=this,c=this.state,u=c.selectValue,d=c.isFocused,f=this.buildFocusableOptions(),h=o==="first"?0:f.length-1;if(!this.props.isMulti){var m=f.indexOf(u[0]);m>-1&&(h=m)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:f[h],focusedOptionId:this.getFocusedOptionId(f[h])},function(){return l.onMenuOpen()})}},{key:"focusValue",value:function(o){var l=this.state,c=l.selectValue,u=l.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=c.indexOf(u);u||(d=-1);var f=c.length-1,h=-1;if(c.length){switch(o){case"previous":h=d===0?0:d===-1?f:d-1;break;case"next":d>-1&&d<f&&(h=d+1)}this.setState({inputIsHidden:h!==-1,focusedValue:c[h]})}}}},{key:"focusOption",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",l=this.props.pageSize,c=this.state.focusedOption,u=this.getFocusableOptions();if(u.length){var d=0,f=u.indexOf(c);c||(f=-1),o==="up"?d=f>0?f-1:u.length-1:o==="down"?d=(f+1)%u.length:o==="pageup"?(d=f-l)<0&&(d=0):o==="pagedown"?(d=f+l)>u.length-1&&(d=u.length-1):o==="last"&&(d=u.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:u[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(u[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(n6):Cr(Cr({},n6),this.props.theme):n6}},{key:"getCommonProps",value:function(){var o=this.clearValue,l=this.cx,c=this.getStyles,u=this.getClassNames,d=this.getValue,f=this.selectOption,h=this.setValue,m=this.props,g=m.isMulti,x=m.isRtl,v=m.options;return{clearValue:o,cx:l,getStyles:c,getClassNames:u,getValue:d,hasValue:this.hasValue(),isMulti:g,isRtl:x,options:v,selectOption:f,selectProps:m,setValue:h,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var o=this.props,l=o.isClearable,c=o.isMulti;return l===void 0?c:l}},{key:"isOptionDisabled",value:function(o,l){return Qde(this.props,o,l)}},{key:"isOptionSelected",value:function(o,l){return Hde(this.props,o,l)}},{key:"filterOption",value:function(o,l){return Vde(this.props,o,l)}},{key:"formatOptionLabel",value:function(o,l){if(typeof this.props.formatOptionLabel=="function"){var c=this.props.inputValue,u=this.state.selectValue;return this.props.formatOptionLabel(o,{context:l,inputValue:c,selectValue:u})}return this.getOptionLabel(o)}},{key:"formatGroupLabel",value:function(o){return this.props.formatGroupLabel(o)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var o=this.props,l=o.isDisabled,c=o.isSearchable,u=o.inputId,d=o.inputValue,f=o.tabIndex,h=o.form,m=o.menuIsOpen,g=o.required,x=this.getComponents().Input,v=this.state,y=v.inputIsHidden,w=v.ariaSelection,_=this.commonProps,T=u||this.getElementId("input"),j=Cr(Cr(Cr({"aria-autocomplete":"list","aria-expanded":m,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},m&&{"aria-controls":this.getElementId("listbox")}),!c&&{"aria-readonly":!0}),this.hasValue()?(w==null?void 0:w.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return c?C.createElement(x,Lr({},_,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:T,innerRef:this.getInputRef,isDisabled:l,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:f,form:h,type:"text",value:d},j)):C.createElement(zlt,Lr({id:T,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:WS,onFocus:this.onInputFocus,disabled:l,tabIndex:f,inputMode:"none",form:h,value:""},j))}},{key:"renderPlaceholderOrValue",value:function(){var o=this,l=this.getComponents(),c=l.MultiValue,u=l.MultiValueContainer,d=l.MultiValueLabel,f=l.MultiValueRemove,h=l.SingleValue,m=l.Placeholder,g=this.commonProps,x=this.props,v=x.controlShouldRenderValue,y=x.isDisabled,w=x.isMulti,_=x.inputValue,T=x.placeholder,j=this.state,I=j.selectValue,E=j.focusedValue,S=j.isFocused;if(!this.hasValue()||!v)return _?null:C.createElement(m,Lr({},g,{key:"placeholder",isDisabled:y,isFocused:S,innerProps:{id:this.getElementId("placeholder")}}),T);if(w)return I.map(function(M,R){var k=M===E,D="".concat(o.getOptionLabel(M),"-").concat(o.getOptionValue(M));return C.createElement(c,Lr({},g,{components:{Container:u,Label:d,Remove:f},isFocused:k,isDisabled:y,key:D,index:R,removeProps:{onClick:function(){return o.removeValue(M)},onTouchEnd:function(){return o.removeValue(M)},onMouseDown:function(L){L.preventDefault()}},data:M}),o.formatOptionLabel(M,"value"))});if(_)return null;var B=I[0];return C.createElement(h,Lr({},g,{data:B,isDisabled:y}),this.formatOptionLabel(B,"value"))}},{key:"renderClearIndicator",value:function(){var o=this.getComponents().ClearIndicator,l=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;if(!this.isClearable()||!o||u||!this.hasValue()||d)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return C.createElement(o,Lr({},l,{innerProps:h,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var o=this.getComponents().LoadingIndicator,l=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;return o&&d?C.createElement(o,Lr({},l,{innerProps:{"aria-hidden":"true"},isDisabled:u,isFocused:f})):null}},{key:"renderIndicatorSeparator",value:function(){var o=this.getComponents(),l=o.DropdownIndicator,c=o.IndicatorSeparator;if(!l||!c)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused;return C.createElement(c,Lr({},u,{isDisabled:d,isFocused:f}))}},{key:"renderDropdownIndicator",value:function(){var o=this.getComponents().DropdownIndicator;if(!o)return null;var l=this.commonProps,c=this.props.isDisabled,u=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return C.createElement(o,Lr({},l,{innerProps:d,isDisabled:c,isFocused:u}))}},{key:"renderMenu",value:function(){var o=this,l=this.getComponents(),c=l.Group,u=l.GroupHeading,d=l.Menu,f=l.MenuList,h=l.MenuPortal,m=l.LoadingMessage,g=l.NoOptionsMessage,x=l.Option,v=this.commonProps,y=this.state.focusedOption,w=this.props,_=w.captureMenuScroll,T=w.inputValue,j=w.isLoading,I=w.loadingMessage,E=w.minMenuHeight,S=w.maxMenuHeight,B=w.menuIsOpen,M=w.menuPlacement,R=w.menuPosition,k=w.menuPortalTarget,D=w.menuShouldBlockScroll,L=w.menuShouldScrollIntoView,Z=w.noOptionsMessage,V=w.onMenuScrollToTop,q=w.onMenuScrollToBottom;if(!B)return null;var G,K=function(z,J){var te=z.type,se=z.data,ie=z.isDisabled,ce=z.isSelected,de=z.label,Be=z.value,ae=y===se,Se=ie?void 0:function(){return o.onOptionHover(se)},ke=ie?void 0:function(){return o.selectOption(se)},ve="".concat(o.getElementId("option"),"-").concat(J),le={id:ve,onClick:ke,onMouseMove:Se,onMouseOver:Se,tabIndex:-1,role:"option","aria-selected":o.isAppleDevice?void 0:ce};return C.createElement(x,Lr({},v,{innerProps:le,data:se,isDisabled:ie,isSelected:ce,key:ve,label:de,type:te,value:Be,isFocused:ae,innerRef:ae?o.getFocusedOptionRef:void 0}),o.formatOptionLabel(z.data,"menu"))};if(this.hasOptions())G=this.getCategorizedOptions().map(function(z){if(z.type==="group"){var J=z.data,te=z.options,se=z.index,ie="".concat(o.getElementId("group"),"-").concat(se),ce="".concat(ie,"-heading");return C.createElement(c,Lr({},v,{key:ie,data:J,options:te,Heading:u,headingProps:{id:ce,data:z.data},label:o.formatGroupLabel(z.data)}),z.options.map(function(de){return K(de,"".concat(se,"-").concat(de.index))}))}if(z.type==="option")return K(z,"".concat(z.index))});else if(j){var ee=I({inputValue:T});if(ee===null)return null;G=C.createElement(m,v,ee)}else{var W=Z({inputValue:T});if(W===null)return null;G=C.createElement(g,v,W)}var P={minMenuHeight:E,maxMenuHeight:S,menuPlacement:M,menuPosition:R,menuShouldScrollIntoView:L},U=C.createElement(xlt,Lr({},v,P),function(z){var J=z.ref,te=z.placerProps,se=te.placement,ie=te.maxHeight;return C.createElement(d,Lr({},v,P,{innerRef:J,innerProps:{onMouseDown:o.onMenuMouseDown,onMouseMove:o.onMenuMouseMove},isLoading:j,placement:se}),C.createElement(qlt,{captureEnabled:_,onTopArrive:V,onBottomArrive:q,lockEnabled:D},function(ce){return C.createElement(f,Lr({},v,{innerRef:function(de){o.getMenuListRef(de),ce(de)},innerProps:{role:"listbox","aria-multiselectable":v.isMulti,id:o.getElementId("listbox")},isLoading:j,maxHeight:ie,focusedOption:y}),G)}))});return k||R==="fixed"?C.createElement(h,Lr({},v,{appendTo:k,controlElement:this.controlRef,menuPlacement:M,menuPosition:R}),U):U}},{key:"renderFormField",value:function(){var o=this,l=this.props,c=l.delimiter,u=l.isDisabled,d=l.isMulti,f=l.name,h=l.required,m=this.state.selectValue;if(h&&!this.hasValue()&&!u)return C.createElement(Wlt,{name:f,onFocus:this.onValueInputFocus});if(f&&!u){if(d){if(c){var g=m.map(function(y){return o.getOptionValue(y)}).join(c);return C.createElement("input",{name:f,type:"hidden",value:g})}var x=m.length>0?m.map(function(y,w){return C.createElement("input",{key:"i-".concat(w),name:f,type:"hidden",value:o.getOptionValue(y)})}):C.createElement("input",{name:f,type:"hidden",value:""});return C.createElement("div",null,x)}var v=m[0]?this.getOptionValue(m[0]):"";return C.createElement("input",{name:f,type:"hidden",value:v})}}},{key:"renderLiveRegion",value:function(){var o=this.commonProps,l=this.state,c=l.ariaSelection,u=l.focusedOption,d=l.focusedValue,f=l.isFocused,h=l.selectValue,m=this.getFocusableOptions();return C.createElement(Mlt,Lr({},o,{id:this.getElementId("live-region"),ariaSelection:c,focusedOption:u,focusedValue:d,isFocused:f,selectValue:h,focusableOptions:m,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var o=this.getComponents(),l=o.Control,c=o.IndicatorsContainer,u=o.SelectContainer,d=o.ValueContainer,f=this.props,h=f.className,m=f.id,g=f.isDisabled,x=f.menuIsOpen,v=this.state.isFocused,y=this.commonProps=this.getCommonProps();return C.createElement(u,Lr({},y,{className:h,innerProps:{id:m,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:v}),this.renderLiveRegion(),C.createElement(l,Lr({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:v,menuIsOpen:x}),C.createElement(d,Lr({},y,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),C.createElement(c,Lr({},y,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],n=[{key:"getDerivedStateFromProps",value:function(o,l){var c=l.prevProps,u=l.clearFocusValueOnUpdate,d=l.inputIsHiddenAfterUpdate,f=l.ariaSelection,h=l.isFocused,m=l.prevWasFocused,g=l.instancePrefix,x=o.options,v=o.value,y=o.menuIsOpen,w=o.inputValue,_=o.isMulti,T=vX(v),j={};if(c&&(v!==c.value||x!==c.options||y!==c.menuIsOpen||w!==c.inputValue)){var I=y?function(D,L){return RX(MC(D,L))}(o,T):[],E=y?LX(MC(o,T),"".concat(g,"-option")):[],S=u?function(D,L){var Z=D.focusedValue,V=D.selectValue.indexOf(Z);if(V>-1){if(L.indexOf(Z)>-1)return Z;if(V<L.length)return L[V]}return null}(l,T):null,B=function(D,L){var Z=D.focusedOption;return Z&&L.indexOf(Z)>-1?Z:L[0]}(l,I);j={selectValue:T,focusedOption:B,focusedOptionId:a6(E,B),focusableOptionsWithIds:E,focusedValue:S,clearFocusValueOnUpdate:!1}}var M=d!=null&&o!==c?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},R=f,k=h&&m;return h&&!k&&(R={value:LC(_,T,T[0]||null),options:T,action:"initial-input-focus"},k=!m),(f==null?void 0:f.action)==="initial-input-focus"&&(R=null),Cr(Cr(Cr({},j),M),{},{prevProps:o,ariaSelection:R,prevWasFocused:k})}}],r&&eX(t.prototype,r),n&&eX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();$de.defaultProps=Zlt;var tct=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],rct=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],e7=oa(function(e){function t(r){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),nct=oa(function(e){var t=e7.default;e.exports=function(r,n){if(t(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n||"default");if(t(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)},e.exports.__esModule=!0,e.exports.default=e.exports}),Gde=oa(function(e){var t=e7.default;e.exports=function(r){var n=nct(r,"string");return t(n)==="symbol"?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}),act=oa(function(e){e.exports=function(t,r,n){return(r=Gde(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){function t(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);n&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),a.push.apply(a,s)}return a}e.exports=function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?t(Object(a),!0).forEach(function(s){act(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r},e.exports.__esModule=!0,e.exports.default=e.exports}),oa(function(e){e.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),oa(function(e){function t(r,n){for(var a=0;a<n.length;a++){var s=n[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,Gde(s.key),s)}}e.exports=function(r,n,a){return n&&t(r.prototype,n),a&&t(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r},e.exports.__esModule=!0,e.exports.default=e.exports});var sct=oa(function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&sct(t,r)},e.exports.__esModule=!0,e.exports.default=e.exports});var UX=oa(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),ict=oa(function(e){e.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}),oct=oa(function(e){e.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.__esModule=!0,e.exports.default=e.exports}),lct=oa(function(e){var t=e7.default;e.exports=function(r,n){if(n&&(t(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oct(r)},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t){var r=ict();return function(){var n,a=UX(t);if(r){var s=UX(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return lct(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports});var mD=oa(function(e){e.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a},e.exports.__esModule=!0,e.exports.default=e.exports}),cct=oa(function(e){e.exports=function(t){if(Array.isArray(t))return mD(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),uct=oa(function(e){e.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),qde=oa(function(e){e.exports=function(t,r){if(t){if(typeof t=="string")return mD(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mD(t,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}),dct=oa(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t){return cct(t)||uct(t)||qde(t)||dct()},e.exports.__esModule=!0,e.exports.default=e.exports});var fct=oa(function(e){e.exports=function(t){if(Array.isArray(t))return t},e.exports.__esModule=!0,e.exports.default=e.exports}),Act=oa(function(e){e.exports=function(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,o,l,c=[],u=!0,d=!1;try{if(o=(n=n.call(t)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=o.call(n)).done)&&(c.push(a.value),c.length!==r);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw s}}return c}},e.exports.__esModule=!0,e.exports.default=e.exports}),hct=oa(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t,r){return fct(t)||Act(t,r)||qde(t,r)||hct()},e.exports.__esModule=!0,e.exports.default=e.exports});var mct=oa(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)>=0||(s[n]=t[n]);return s},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s=mct(t,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s},e.exports.__esModule=!0,e.exports.default=e.exports}),oa(function(e){e.exports=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))},e.exports.__esModule=!0,e.exports.default=e.exports});var pct=C.forwardRef(function(e,t){var r=function(a){var s=a.defaultOptions,o=s!==void 0&&s,l=a.cacheOptions,c=l!==void 0&&l,u=a.loadOptions;a.options;var d=a.isLoading,f=d!==void 0&&d,h=a.onInputChange,m=a.filterOption,g=m===void 0?null:m,x=zf(a,rct),v=x.inputValue,y=C.useRef(void 0),w=C.useRef(!1),_=qi(C.useState(Array.isArray(o)?o:void 0),2),T=_[0],j=_[1],I=qi(C.useState(v!==void 0?v:""),2),E=I[0],S=I[1],B=qi(C.useState(o===!0),2),M=B[0],R=B[1],k=qi(C.useState(void 0),2),D=k[0],L=k[1],Z=qi(C.useState([]),2),V=Z[0],q=Z[1],G=qi(C.useState(!1),2),K=G[0],ee=G[1],W=qi(C.useState({}),2),P=W[0],U=W[1],z=qi(C.useState(void 0),2),J=z[0],te=z[1],se=qi(C.useState(void 0),2),ie=se[0],ce=se[1];c!==ie&&(U({}),ce(c)),o!==J&&(j(Array.isArray(o)?o:void 0),te(o)),C.useEffect(function(){return w.current=!0,function(){w.current=!1}},[]);var de=C.useCallback(function(Se,ke){if(!u)return ke();var ve=u(Se,ke);ve&&typeof ve.then=="function"&&ve.then(ke,function(){return ke()})},[u]);C.useEffect(function(){o===!0&&de(E,function(Se){w.current&&(j(Se||[]),R(!!y.current))})},[]);var Be=C.useCallback(function(Se,ke){var ve=function(be,Pe,Ue){if(Ue){var pe=Ue(be,Pe);if(typeof pe=="string")return pe}return be}(Se,ke,h);if(!ve)return y.current=void 0,S(""),L(""),q([]),R(!1),void ee(!1);if(c&&P[ve])S(ve),L(ve),q(P[ve]),R(!1),ee(!1);else{var le=y.current={};S(ve),R(!0),ee(!D),de(ve,function(be){w&&le===y.current&&(y.current=void 0,R(!1),L(ve),q(be||[]),ee(!1),U(be?Cr(Cr({},P),{},Nv({},ve,be)):P))})}},[c,de,D,P,h]),ae=K?[]:E&&D?V:T||[];return Cr(Cr({},x),{},{options:ae,isLoading:M||f,onInputChange:Be,filterOption:g})}(e),n=function(a){var s=a.defaultInputValue,o=s===void 0?"":s,l=a.defaultMenuIsOpen,c=l!==void 0&&l,u=a.defaultValue,d=u===void 0?null:u,f=a.inputValue,h=a.menuIsOpen,m=a.onChange,g=a.onInputChange,x=a.onMenuClose,v=a.onMenuOpen,y=a.value,w=zf(a,tct),_=qi(C.useState(f!==void 0?f:o),2),T=_[0],j=_[1],I=qi(C.useState(h!==void 0?h:c),2),E=I[0],S=I[1],B=qi(C.useState(y!==void 0?y:d),2),M=B[0],R=B[1],k=C.useCallback(function(K,ee){typeof m=="function"&&m(K,ee),R(K)},[m]),D=C.useCallback(function(K,ee){var W;typeof g=="function"&&(W=g(K,ee)),j(W!==void 0?W:K)},[g]),L=C.useCallback(function(){typeof v=="function"&&v(),S(!0)},[v]),Z=C.useCallback(function(){typeof x=="function"&&x(),S(!1)},[x]),V=f!==void 0?f:T,q=h!==void 0?h:E,G=y!==void 0?y:M;return Cr(Cr({},w),{},{inputValue:V,menuIsOpen:q,onChange:k,onInputChange:D,onMenuClose:Z,onMenuOpen:L,value:G})}(r);return C.createElement($de,Lr({ref:t},n))}),gct=pct,xct=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;a--!=0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;a--!=0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!=0;){var o=s[a];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r},Cv;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(Cv||(Cv={}));class Rp{constructor({apiKey:t,authReferrerPolicy:r,channel:n,client:a,id:s="__googleMapsScriptId",language:o,libraries:l=[],mapIds:c,nonce:u,region:d,retries:f=3,url:h="https://maps.googleapis.com/maps/api/js",version:m}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=n,this.client=a,this.id=s||"__googleMapsScriptId",this.language=o,this.libraries=l,this.mapIds=c,this.nonce=u,this.region=d,this.retries=f,this.url=h,this.version=m,Rp.instance){if(!xct(this.options,Rp.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Rp.instance.options)}`);return Rp.instance}Rp.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Cv.FAILURE:this.done?Cv.SUCCESS:this.loading?Cv.LOADING:Cv.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(n=>{n?r(n.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=t,r.onerror=this.loadErrorCallback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var vct=function(e,t,r){var n,a=e.bounds,s=e.location,o=function(c,u){var d={};for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&u.indexOf(f)<0&&(d[f]=c[f]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(f=Object.getOwnPropertySymbols(c);h<f.length;h++)u.indexOf(f[h])<0&&Object.prototype.propertyIsEnumerable.call(c,f[h])&&(d[f[h]]=c[f[h]])}return d}(e,["bounds","location"]),l=lg({input:t},o);return r&&(l.sessionToken=r),a&&(l.bounds=new((n=google.maps.LatLngBounds).bind.apply(n,function(){for(var c=0,u=0,d=arguments.length;u<d;u++)c+=arguments[u].length;var f=Array(c),h=0;for(u=0;u<d;u++)for(var m=arguments[u],g=0,x=m.length;g<x;g++,h++)f[h]=m[g];return f}([void 0],a)))),s&&(l.location=new google.maps.LatLng(s)),l},bct=function(e){var t=e.autocompletionRequest,r=e.debounce,n=e.minLengthAutocomplete,a=e.placesService,s=e.sessionToken,o=e.withSessionToken,l=function(c,u,d){d===void 0&&(d={});var f=d.maxWait,h=C.useRef(null),m=C.useRef([]),g=d.leading,x=d.trailing===void 0||d.trailing,v=C.useRef(!1),y=C.useRef(null),w=C.useRef(!1),_=C.useRef(c);_.current=c;var T=C.useCallback(function(){clearTimeout(y.current),clearTimeout(h.current),h.current=null,m.current=[],y.current=null,v.current=!1},[]);C.useEffect(function(){return w.current=!1,function(){w.current=!0}},[]);var j=C.useCallback(function(){for(var E=[],S=0;S<arguments.length;S++)E[S]=arguments[S];m.current=E,clearTimeout(y.current),v.current&&(v.current=!1),y.current||!g||v.current||(_.current.apply(_,E),v.current=!0),y.current=setTimeout(function(){var B=!0;g&&v.current&&(B=!1),T(),!w.current&&x&&B&&_.current.apply(_,E)},u),f&&!h.current&&x&&(h.current=setTimeout(function(){var B=m.current;T(),w.current||_.current.apply(null,B)},f))},[f,u,T,g,x]),I=C.useCallback(function(){y.current&&(_.current.apply(null,m.current),T())},[T]);return[j,T,I]}(function(c,u){if(!a)return u([]);if(c.length<n)return u([]);var d=lg({},t);a.getPlacePredictions(vct(d,c,o&&s),function(f){u((f||[]).map(function(h){return{label:h.description,value:h}}))})},r)[0];return l},QX=C.forwardRef(function(e,t){var r,n,a,s,o,l,c,u,d=function(x){var v=x.apiKey,y=x.apiOptions,w=x.onLoadFailed,_=C.useState(void 0),T=_[0],j=_[1],I=C.useState(void 0),E=I[0],S=I[1],B=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");j(new window.google.maps.places.AutocompleteService),S(new google.maps.places.AutocompleteSessionToken)};return C.useEffect(function(){v?Not(void 0,void 0,void 0,function(){var M;return Cot(this,function(R){switch(R.label){case 0:if(!v)return[2];R.label=1;case 1:return R.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new Rp(lg({apiKey:v},lg({libraries:["places"]},y))).load()];case 2:R.sent(),R.label=3;case 3:return B(),[3,5];case 4:return M=R.sent(),typeof w=="function"&&w(M),[3,5];case 5:return[2]}})}):B()},[]),{placesService:T,sessionToken:E,setSessionToken:S}}({apiKey:(r=e.apiKey)!==null&&r!==void 0?r:"",apiOptions:(n=e.apiOptions)!==null&&n!==void 0?n:{},onLoadFailed:(a=e.onLoadFailed)!==null&&a!==void 0?a:console.error}),f=d.placesService,h=d.sessionToken,m=d.setSessionToken,g=bct({autocompletionRequest:(s=e.autocompletionRequest)!==null&&s!==void 0?s:{},debounce:(o=e.debounce)!==null&&o!==void 0?o:300,minLengthAutocomplete:(l=e.minLengthAutocomplete)!==null&&l!==void 0?l:0,placesService:f,sessionToken:h,withSessionToken:(c=e.withSessionToken)!==null&&c!==void 0&&c});return C.useImperativeHandle(t,function(){return{getSessionToken:function(){return h},refreshSessionToken:function(){m(new google.maps.places.AutocompleteSessionToken)}}},[h]),at.createElement(gct,lg({},(u=e.selectProps)!==null&&u!==void 0?u:{},{loadOptions:g,getOptionValue:function(x){return x.value.place_id}}))});/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var pD=function(e,t){return pD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},pD(e,t)};function Jd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");pD(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var gD=function(){return gD=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},gD.apply(this,arguments)};function gl(e,t,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(e,[])).next())})}function $o(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function UC(e,t,r){if(arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||t)}var Ph=function(){function e(t,r,n,a){this.left=t,this.top=r,this.width=n,this.height=a}return e.prototype.add=function(t,r,n,a){return new e(this.left+t,this.top+r,this.width+n,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),vj=function(e,t){return Ph.fromClientRect(e,t.getBoundingClientRect())},yct=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),a=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new Ph(0,0,n,a)},bj=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Ks=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var o=e[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},HX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wct=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var QC=0;QC<HX.length;QC++)wct[HX.charCodeAt(QC)]=QC;var VX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ew=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var HC=0;HC<VX.length;HC++)ew[VX.charCodeAt(HC)]=HC;var Ect=function(e){var t=e.length*.75,r=e.length,n,a=0,s,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=ew[e.charCodeAt(n)],o=ew[e.charCodeAt(n+1)],l=ew[e.charCodeAt(n+2)],c=ew[e.charCodeAt(n+3)],d[a++]=s<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},Nct=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},Cct=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},dg=5,t7=11,s6=2,_ct=t7-dg,Kde=65536>>dg,Sct=1<<dg,i6=Sct-1,kct=1024>>dg,jct=Kde+kct,Bct=jct,Tct=32,Ict=Bct+Tct,Fct=65536>>t7,Oct=1<<_ct,Dct=Oct-1,zX=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},Pct=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},Rct=function(e,t){var r=Ect(e),n=Array.isArray(r)?Cct(r):new Uint32Array(r),a=Array.isArray(r)?Nct(r):new Uint16Array(r),s=24,o=zX(a,s/2,n[4]/2),l=n[5]===2?zX(a,(s+n[4])/2):Pct(n,Math.ceil((s+n[4])/4));return new Lct(n[0],n[1],n[2],n[3],o,l)},Lct=function(){function e(t,r,n,a,s,o){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=o}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>dg],r=(r<<s6)+(t&i6),this.data[r];if(t<=65535)return r=this.index[Kde+(t-55296>>dg)],r=(r<<s6)+(t&i6),this.data[r];if(t<this.highStart)return r=Ict-Fct+(t>>t7),r=this.index[r],r+=t>>dg&Dct,r=this.index[r],r=(r<<s6)+(t&i6),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),$X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Mct=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var VC=0;VC<$X.length;VC++)Mct[$X.charCodeAt(VC)]=VC;var Uct="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",GX=50,Qct=1,Wde=2,Xde=3,Hct=4,Vct=5,qX=7,Yde=8,KX=9,tm=10,xD=11,WX=12,vD=13,zct=14,tw=15,bD=16,zC=17,jy=18,$ct=19,XX=20,yD=21,By=22,o6=23,Wx=24,Fc=25,rw=26,nw=27,Xx=28,Gct=29,Lp=30,qct=31,$C=32,GC=33,wD=34,ED=35,ND=36,D2=37,CD=38,W5=39,X5=40,l6=41,Jde=42,Kct=43,Wct=[9001,65288],Zde="!",kn="×",qC="÷",_D=Rct(Uct),qA=[Lp,ND],SD=[Qct,Wde,Xde,Vct],efe=[tm,Yde],YX=[nw,rw],Xct=SD.concat(efe),JX=[CD,W5,X5,wD,ED],Yct=[tw,vD],Jct=function(e,t){t===void 0&&(t="strict");var r=[],n=[],a=[];return e.forEach(function(s,o){var l=_D.get(s);if(l>GX?(a.push(!0),l-=GX):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(o),r.push(bD);if(l===Hct||l===xD){if(o===0)return n.push(o),r.push(Lp);var c=r[o-1];return Xct.indexOf(c)===-1?(n.push(n[o-1]),r.push(c)):(n.push(o),r.push(Lp))}if(n.push(o),l===qct)return r.push(t==="strict"?yD:D2);if(l===Jde||l===Gct)return r.push(Lp);if(l===Kct)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(D2):r.push(Lp);r.push(l)}),[n,r,a]},c6=function(e,t,r,n){var a=n[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var s=r;s<=n.length;){s++;var o=n[s];if(o===t)return!0;if(o!==tm)break}if(a===tm)for(var s=r;s>0;){s--;var l=n[s];if(Array.isArray(e)?e.indexOf(l)!==-1:e===l)for(var c=r;c<=n.length;){c++;var o=n[c];if(o===t)return!0;if(o!==tm)break}if(l!==tm)break}return!1},ZX=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n===tm)r--;else return n}return 0},Zct=function(e,t,r,n,a){if(r[n]===0)return kn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return kn;var o=s-1,l=s+1,c=t[s],u=o>=0?t[o]:0,d=t[l];if(c===Wde&&d===Xde)return kn;if(SD.indexOf(c)!==-1)return Zde;if(SD.indexOf(d)!==-1||efe.indexOf(d)!==-1)return kn;if(ZX(s,t)===Yde)return qC;if(_D.get(e[s])===xD||(c===$C||c===GC)&&_D.get(e[l])===xD||c===qX||d===qX||c===KX||[tm,vD,tw].indexOf(c)===-1&&d===KX||[zC,jy,$ct,Wx,Xx].indexOf(d)!==-1||ZX(s,t)===By||c6(o6,By,s,t)||c6([zC,jy],yD,s,t)||c6(WX,WX,s,t))return kn;if(c===tm)return qC;if(c===o6||d===o6)return kn;if(d===bD||c===bD)return qC;if([vD,tw,yD].indexOf(d)!==-1||c===zct||u===ND&&Yct.indexOf(c)!==-1||c===Xx&&d===ND||d===XX||qA.indexOf(d)!==-1&&c===Fc||qA.indexOf(c)!==-1&&d===Fc||c===nw&&[D2,$C,GC].indexOf(d)!==-1||[D2,$C,GC].indexOf(c)!==-1&&d===rw||qA.indexOf(c)!==-1&&YX.indexOf(d)!==-1||YX.indexOf(c)!==-1&&qA.indexOf(d)!==-1||[nw,rw].indexOf(c)!==-1&&(d===Fc||[By,tw].indexOf(d)!==-1&&t[l+1]===Fc)||[By,tw].indexOf(c)!==-1&&d===Fc||c===Fc&&[Fc,Xx,Wx].indexOf(d)!==-1)return kn;if([Fc,Xx,Wx,zC,jy].indexOf(d)!==-1)for(var f=s;f>=0;){var h=t[f];if(h===Fc)return kn;if([Xx,Wx].indexOf(h)!==-1)f--;else break}if([nw,rw].indexOf(d)!==-1)for(var f=[zC,jy].indexOf(c)!==-1?o:s;f>=0;){var h=t[f];if(h===Fc)return kn;if([Xx,Wx].indexOf(h)!==-1)f--;else break}if(CD===c&&[CD,W5,wD,ED].indexOf(d)!==-1||[W5,wD].indexOf(c)!==-1&&[W5,X5].indexOf(d)!==-1||[X5,ED].indexOf(c)!==-1&&d===X5||JX.indexOf(c)!==-1&&[XX,rw].indexOf(d)!==-1||JX.indexOf(d)!==-1&&c===nw||qA.indexOf(c)!==-1&&qA.indexOf(d)!==-1||c===Wx&&qA.indexOf(d)!==-1||qA.concat(Fc).indexOf(c)!==-1&&d===By&&Wct.indexOf(e[l])===-1||qA.concat(Fc).indexOf(d)!==-1&&c===jy)return kn;if(c===l6&&d===l6){for(var m=r[s],g=1;m>0&&(m--,t[m]===l6);)g++;if(g%2!==0)return kn}return c===$C&&d===GC?kn:qC},eut=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=Jct(e,t.lineBreak),n=r[0],a=r[1],s=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(l){return[Fc,Lp,Jde].indexOf(l)!==-1?D2:l}));var o=t.wordBreak==="keep-all"?s.map(function(l,c){return l&&e[c]>=19968&&e[c]<=40959}):void 0;return[n,a,o]},tut=function(){function e(t,r,n,a){this.codePoints=t,this.required=r===Zde,this.start=n,this.end=a}return e.prototype.slice=function(){return Ks.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),rut=function(e,t){var r=bj(e),n=eut(r,t),a=n[0],s=n[1],o=n[2],l=r.length,c=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var d=kn;u<l&&(d=Zct(r,s,a,++u,o))===kn;);if(d!==kn||u===l){var f=new tut(r,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},nut=1,aut=2,IE=4,eY=8,JS=10,tY=47,Iw=92,sut=9,iut=32,KC=34,Ty=61,out=35,lut=36,cut=37,WC=39,XC=40,Iy=41,uut=95,Zl=45,dut=33,fut=60,Aut=62,hut=64,mut=91,put=93,gut=61,xut=123,YC=63,vut=125,rY=124,but=126,yut=128,nY=65533,u6=42,qp=43,wut=44,Eut=58,Nut=59,P2=46,Cut=0,_ut=8,Sut=11,kut=14,jut=31,But=127,If=-1,tfe=48,rfe=97,nfe=101,Tut=102,Iut=117,Fut=122,afe=65,sfe=69,ife=70,Out=85,Dut=90,Xo=function(e){return e>=tfe&&e<=57},Put=function(e){return e>=55296&&e<=57343},Yx=function(e){return Xo(e)||e>=afe&&e<=ife||e>=rfe&&e<=Tut},Rut=function(e){return e>=rfe&&e<=Fut},Lut=function(e){return e>=afe&&e<=Dut},Mut=function(e){return Rut(e)||Lut(e)},Uut=function(e){return e>=yut},JC=function(e){return e===JS||e===sut||e===iut},ZS=function(e){return Mut(e)||Uut(e)||e===uut},aY=function(e){return ZS(e)||Xo(e)||e===Zl},Qut=function(e){return e>=Cut&&e<=_ut||e===Sut||e>=kut&&e<=jut||e===But},V0=function(e,t){return e!==Iw?!1:t!==JS},ZC=function(e,t,r){return e===Zl?ZS(t)||V0(t,r):ZS(e)?!0:!!(e===Iw&&V0(e,t))},d6=function(e,t,r){return e===qp||e===Zl?Xo(t)?!0:t===P2&&Xo(r):Xo(e===P2?t:e)},Hut=function(e){var t=0,r=1;(e[t]===qp||e[t]===Zl)&&(e[t]===Zl&&(r=-1),t++);for(var n=[];Xo(e[t]);)n.push(e[t++]);var a=n.length?parseInt(Ks.apply(void 0,n),10):0;e[t]===P2&&t++;for(var s=[];Xo(e[t]);)s.push(e[t++]);var o=s.length,l=o?parseInt(Ks.apply(void 0,s),10):0;(e[t]===sfe||e[t]===nfe)&&t++;var c=1;(e[t]===qp||e[t]===Zl)&&(e[t]===Zl&&(c=-1),t++);for(var u=[];Xo(e[t]);)u.push(e[t++]);var d=u.length?parseInt(Ks.apply(void 0,u),10):0;return r*(a+l*Math.pow(10,-o))*Math.pow(10,c*d)},Vut={type:2},zut={type:3},$ut={type:4},Gut={type:13},qut={type:8},Kut={type:21},Wut={type:9},Xut={type:10},Yut={type:11},Jut={type:12},Zut={type:14},e5={type:23},edt={type:1},tdt={type:25},rdt={type:24},ndt={type:26},adt={type:27},sdt={type:28},idt={type:29},odt={type:31},kD={type:32},ofe=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(bj(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==kD;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case KC:return this.consumeStringToken(KC);case out:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(aY(r)||V0(n,a)){var s=ZC(r,n,a)?aut:nut,o=this.consumeName();return{type:5,value:o,flags:s}}break;case lut:if(this.peekCodePoint(0)===Ty)return this.consumeCodePoint(),Gut;break;case WC:return this.consumeStringToken(WC);case XC:return Vut;case Iy:return zut;case u6:if(this.peekCodePoint(0)===Ty)return this.consumeCodePoint(),Zut;break;case qp:if(d6(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case wut:return $ut;case Zl:var l=t,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(d6(l,c,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(ZC(l,c,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===Zl&&u===Aut)return this.consumeCodePoint(),this.consumeCodePoint(),rdt;break;case P2:if(d6(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case tY:if(this.peekCodePoint(0)===u6)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===u6&&(d=this.consumeCodePoint(),d===tY))return this.consumeToken();if(d===If)return this.consumeToken()}break;case Eut:return ndt;case Nut:return adt;case fut:if(this.peekCodePoint(0)===dut&&this.peekCodePoint(1)===Zl&&this.peekCodePoint(2)===Zl)return this.consumeCodePoint(),this.consumeCodePoint(),tdt;break;case hut:var f=this.peekCodePoint(0),h=this.peekCodePoint(1),m=this.peekCodePoint(2);if(ZC(f,h,m)){var o=this.consumeName();return{type:7,value:o}}break;case mut:return sdt;case Iw:if(V0(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case put:return idt;case gut:if(this.peekCodePoint(0)===Ty)return this.consumeCodePoint(),qut;break;case xut:return Yut;case vut:return Jut;case Iut:case Out:var g=this.peekCodePoint(0),x=this.peekCodePoint(1);return g===qp&&(Yx(x)||x===YC)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case rY:if(this.peekCodePoint(0)===Ty)return this.consumeCodePoint(),Wut;if(this.peekCodePoint(0)===rY)return this.consumeCodePoint(),Kut;break;case but:if(this.peekCodePoint(0)===Ty)return this.consumeCodePoint(),Xut;break;case If:return kD}return JC(t)?(this.consumeWhiteSpace(),odt):Xo(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):ZS(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Ks(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();Yx(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var n=!1;r===YC&&t.length<6;)t.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(Ks.apply(void 0,t.map(function(c){return c===YC?tfe:c})),16),s=parseInt(Ks.apply(void 0,t.map(function(c){return c===YC?ife:c})),16);return{type:30,start:a,end:s}}var o=parseInt(Ks.apply(void 0,t),16);if(this.peekCodePoint(0)===Zl&&Yx(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];Yx(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var s=parseInt(Ks.apply(void 0,l),16);return{type:30,start:o,end:s}}else return{type:30,start:o,end:o}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===XC?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===XC?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===If)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===WC||r===KC){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===If||this.peekCodePoint(0)===Iy)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),e5)}for(;;){var a=this.consumeCodePoint();if(a===If||a===Iy)return{type:22,value:Ks.apply(void 0,t)};if(JC(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===If||this.peekCodePoint(0)===Iy?(this.consumeCodePoint(),{type:22,value:Ks.apply(void 0,t)}):(this.consumeBadUrlRemnants(),e5);if(a===KC||a===WC||a===XC||Qut(a))return this.consumeBadUrlRemnants(),e5;if(a===Iw)if(V0(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),e5;else t.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;JC(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===Iy||t===If)return;V0(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,n="";t>0;){var a=Math.min(r,t);n+=Ks.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),n},e.prototype.consumeStringToken=function(t){var r="",n=0;do{var a=this._value[n];if(a===If||a===void 0||a===t)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===JS)return this._value.splice(0,n),edt;if(a===Iw){var s=this._value[n+1];s!==If&&s!==void 0&&(s===JS?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):V0(a,s)&&(r+=this.consumeStringSlice(n),r+=Ks(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=IE,n=this.peekCodePoint(0);for((n===qp||n===Zl)&&t.push(this.consumeCodePoint());Xo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===P2&&Xo(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=eY;Xo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===sfe||n===nfe)&&((a===qp||a===Zl)&&Xo(s)||Xo(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=eY;Xo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[Hut(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],n=t[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);if(ZC(a,s,o)){var l=this.consumeName();return{type:15,number:r,flags:n,unit:l}}return a===cut?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Yx(t)){for(var r=Ks(t);Yx(this.peekCodePoint(0))&&r.length<6;)r+=Ks(this.consumeCodePoint());JC(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||Put(n)||n>1114111?nY:n}return t===If?nY:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(aY(r))t+=Ks(r);else if(V0(r,this.peekCodePoint(0)))t+=Ks(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),lfe=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new ofe;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||cdt(n,t))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?kD:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),FE=function(e){return e.type===15},v1=function(e){return e.type===17},wa=function(e){return e.type===20},ldt=function(e){return e.type===0},jD=function(e,t){return wa(e)&&e.value===t},cfe=function(e){return e.type!==31},Pb=function(e){return e.type!==31&&e.type!==4},AA=function(e){var t=[],r=[];return e.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&t.push(r),t},cdt=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},Lm=function(e){return e.type===17||e.type===15},pi=function(e){return e.type===16||Lm(e)},ufe=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},No={type:17,number:0,flags:IE},r7={type:16,number:50,flags:IE},rm={type:16,number:100,flags:IE},aw=function(e,t,r){var n=e[0],a=e[1];return[Pa(n,t),Pa(typeof a<"u"?a:n,r)]},Pa=function(e,t){if(e.type===16)return e.number/100*t;if(FE(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},dfe="deg",ffe="grad",Afe="rad",hfe="turn",yj={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case dfe:return Math.PI*t.number/180;case ffe:return Math.PI/200*t.number;case Afe:return t.number;case hfe:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},mfe=function(e){return e.type===15&&(e.unit===dfe||e.unit===ffe||e.unit===Afe||e.unit===hfe)},pfe=function(e){var t=e.filter(wa).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[No,No];case"to top":case"bottom":return Vu(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[No,rm];case"to right":case"left":return Vu(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[rm,rm];case"to bottom":case"top":return Vu(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[rm,No];case"to left":case"right":return Vu(270)}return 0},Vu=function(e){return Math.PI*e/180},gm={name:"color",parse:function(e,t){if(t.type===18){var r=udt[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3);return nm(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3),o=t.value.substring(3,4);return nm(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6);return nm(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6),o=t.value.substring(6,8);return nm(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(o,16)/255)}}if(t.type===20){var l=gh[t.value.toUpperCase()];if(typeof l<"u")return l}return gh.TRANSPARENT}},xm=function(e){return(255&e)===0},Gi=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+n+","+r+","+t/255+")":"rgb("+a+","+n+","+r+")"},nm=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(n*255)<<0)>>>0},sY=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},iY=function(e,t){var r=t.filter(Pb);if(r.length===3){var n=r.map(sY),a=n[0],s=n[1],o=n[2];return nm(a,s,o,1)}if(r.length===4){var l=r.map(sY),a=l[0],s=l[1],o=l[2],c=l[3];return nm(a,s,o,c)}return 0};function f6(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var oY=function(e,t){var r=t.filter(Pb),n=r[0],a=r[1],s=r[2],o=r[3],l=(n.type===17?Vu(n.number):yj.parse(e,n))/(Math.PI*2),c=pi(a)?a.number/100:0,u=pi(s)?s.number/100:0,d=typeof o<"u"&&pi(o)?Pa(o,1):1;if(c===0)return nm(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,h=u*2-f,m=f6(h,f,l+1/3),g=f6(h,f,l),x=f6(h,f,l-1/3);return nm(m*255,g*255,x*255,d)},udt={hsl:oY,hsla:oY,rgb:iY,rgba:iY},Fw=function(e,t){return gm.parse(e,lfe.create(t).parseComponentValue())},gh={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},ddt={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(wa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},fdt={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},wj=function(e,t){var r=gm.parse(e,t[0]),n=t[1];return n&&pi(n)?{color:r,stop:n}:{color:r,stop:null}},lY=function(e,t){var r=e[0],n=e[e.length-1];r.stop===null&&(r.stop=No),n.stop===null&&(n.stop=rm);for(var a=[],s=0,o=0;o<e.length;o++){var l=e[o].stop;if(l!==null){var c=Pa(l,t);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,o=0;o<a.length;o++){var d=a[o];if(d===null)u===null&&(u=o);else if(u!==null){for(var f=o-u,h=a[u-1],m=(d-h)/(f+1),g=1;g<=f;g++)a[u+g-1]=m*g;u=null}}return e.map(function(x,v){var y=x.color;return{color:y,stop:Math.max(Math.min(1,a[v]/t),0)}})},Adt=function(e,t,r){var n=t/2,a=r/2,s=Pa(e[0],t)-n,o=a-Pa(e[1],r);return(Math.atan2(o,s)+Math.PI*2)%(Math.PI*2)},hdt=function(e,t,r){var n=typeof e=="number"?e:Adt(e,t,r),a=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),s=t/2,o=r/2,l=a/2,c=Math.sin(n-Math.PI/2)*l,u=Math.cos(n-Math.PI/2)*l;return[a,s-u,s+u,o-c,o+c]},_d=function(e,t){return Math.sqrt(e*e+t*t)},cY=function(e,t,r,n,a){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(o,l){var c=l[0],u=l[1],d=_d(r-c,n-u);return(a?d<o.optimumDistance:d>o.optimumDistance)?{optimumCorner:l,optimumDistance:d}:o},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},mdt=function(e,t,r,n,a){var s=0,o=0;switch(e.size){case 0:e.shape===0?s=o=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-n)),o=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)s=o=Math.min(_d(t,r),_d(t,r-a),_d(t-n,r),_d(t-n,r-a));else if(e.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-n)),c=cY(n,a,t,r,!0),u=c[0],d=c[1];s=_d(u-t,(d-r)/l),o=l*s}break;case 1:e.shape===0?s=o=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-n)),o=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)s=o=Math.max(_d(t,r),_d(t,r-a),_d(t-n,r),_d(t-n,r-a));else if(e.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-n)),f=cY(n,a,t,r,!1),u=f[0],d=f[1];s=_d(u-t,(d-r)/l),o=l*s}break}return Array.isArray(e.size)&&(s=Pa(e.size[0],n),o=e.size.length===2?Pa(e.size[1],a):s),[s,o]},pdt=function(e,t){var r=Vu(180),n=[];return AA(t).forEach(function(a,s){if(s===0){var o=a[0];if(o.type===20&&o.value==="to"){r=pfe(a);return}else if(mfe(o)){r=yj.parse(e,o);return}}var l=wj(e,a);n.push(l)}),{angle:r,stops:n,type:1}},t5=function(e,t){var r=Vu(180),n=[];return AA(t).forEach(function(a,s){if(s===0){var o=a[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){r=pfe(a);return}else if(mfe(o)){r=(yj.parse(e,o)+Vu(270))%Vu(360);return}}var l=wj(e,a);n.push(l)}),{angle:r,stops:n,type:1}},gdt=function(e,t){var r=Vu(180),n=[],a=1,s=0,o=3,l=[];return AA(t).forEach(function(c,u){var d=c[0];if(u===0){if(wa(d)&&d.value==="linear"){a=1;return}else if(wa(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=gm.parse(e,d.values[0]);n.push({stop:No,color:f})}else if(d.name==="to"){var f=gm.parse(e,d.values[0]);n.push({stop:rm,color:f})}else if(d.name==="color-stop"){var h=d.values.filter(Pb);if(h.length===2){var f=gm.parse(e,h[1]),m=h[0];v1(m)&&n.push({stop:{type:16,number:m.number*100,flags:m.flags},color:f})}}}}),a===1?{angle:(r+Vu(180))%Vu(360),stops:n,type:a}:{size:o,shape:s,stops:n,position:l,type:a}},gfe="closest-side",xfe="farthest-side",vfe="closest-corner",bfe="farthest-corner",yfe="circle",wfe="ellipse",Efe="cover",Nfe="contain",xdt=function(e,t){var r=0,n=3,a=[],s=[];return AA(t).forEach(function(o,l){var c=!0;if(l===0){var u=!1;c=o.reduce(function(f,h){if(u)if(wa(h))switch(h.value){case"center":return s.push(r7),f;case"top":case"left":return s.push(No),f;case"right":case"bottom":return s.push(rm),f}else(pi(h)||Lm(h))&&s.push(h);else if(wa(h))switch(h.value){case yfe:return r=0,!1;case wfe:return r=1,!1;case"at":return u=!0,!1;case gfe:return n=0,!1;case Efe:case xfe:return n=1,!1;case Nfe:case vfe:return n=2,!1;case bfe:return n=3,!1}else if(Lm(h)||pi(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return f},c)}if(c){var d=wj(e,o);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},r5=function(e,t){var r=0,n=3,a=[],s=[];return AA(t).forEach(function(o,l){var c=!0;if(l===0?c=o.reduce(function(d,f){if(wa(f))switch(f.value){case"center":return s.push(r7),!1;case"top":case"left":return s.push(No),!1;case"right":case"bottom":return s.push(rm),!1}else if(pi(f)||Lm(f))return s.push(f),!1;return d},c):l===1&&(c=o.reduce(function(d,f){if(wa(f))switch(f.value){case yfe:return r=0,!1;case wfe:return r=1,!1;case Nfe:case gfe:return n=0,!1;case xfe:return n=1,!1;case vfe:return n=2,!1;case Efe:case bfe:return n=3,!1}else if(Lm(f)||pi(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},c)),c){var u=wj(e,o);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},vdt=function(e){return e.type===1},bdt=function(e){return e.type===2},n7={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var n=Cfe[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function ydt(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!Cfe[e.name])}var Cfe={"linear-gradient":pdt,"-moz-linear-gradient":t5,"-ms-linear-gradient":t5,"-o-linear-gradient":t5,"-webkit-linear-gradient":t5,"radial-gradient":xdt,"-moz-radial-gradient":r5,"-ms-radial-gradient":r5,"-o-radial-gradient":r5,"-webkit-radial-gradient":r5,"-webkit-gradient":gdt},wdt={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(n){return Pb(n)&&ydt(n)}).map(function(n){return n7.parse(e,n)})}},Edt={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(wa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Ndt={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return AA(t).map(function(r){return r.filter(pi)}).map(ufe)}},Cdt={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return AA(t).map(function(r){return r.filter(wa).map(function(n){return n.value}).join(" ")}).map(_dt)}},_dt=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Xv;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(Xv||(Xv={}));var Sdt={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return AA(t).map(function(r){return r.filter(kdt)})}},kdt=function(e){return wa(e)||pi(e)},Ej=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},jdt=Ej("top"),Bdt=Ej("right"),Tdt=Ej("bottom"),Idt=Ej("left"),Nj=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return ufe(r.filter(pi))}}},Fdt=Nj("top-left"),Odt=Nj("top-right"),Ddt=Nj("bottom-right"),Pdt=Nj("bottom-left"),Cj=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Rdt=Cj("top"),Ldt=Cj("right"),Mdt=Cj("bottom"),Udt=Cj("left"),_j=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return FE(r)?r.number:0}}},Qdt=_j("top"),Hdt=_j("right"),Vdt=_j("bottom"),zdt=_j("left"),$dt={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Gdt={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},qdt={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).reduce(function(r,n){return r|Kdt(n.value)},0)}},Kdt=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Wdt={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Xdt={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},ek;(function(e){e.NORMAL="normal",e.STRICT="strict"})(ek||(ek={}));var Ydt={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return ek.STRICT;case"normal":default:return ek.NORMAL}}},Jdt={name:"line-height",initialValue:"normal",prefix:!1,type:4},uY=function(e,t){return wa(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:pi(e)?Pa(e,t):t},Zdt={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:n7.parse(e,t)}},eft={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},BD={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Sj=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},tft=Sj("top"),rft=Sj("right"),nft=Sj("bottom"),aft=Sj("left"),sft={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},ift={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},kj=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},oft=kj("top"),lft=kj("right"),cft=kj("bottom"),uft=kj("left"),dft={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},fft={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Aft={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&jD(t[0],"none")?[]:AA(t).map(function(r){for(var n={color:gh.TRANSPARENT,offsetX:No,offsetY:No,blur:No},a=0,s=0;s<r.length;s++){var o=r[s];Lm(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:n.blur=o,a++):n.color=gm.parse(e,o)}return n})}},hft={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},mft={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=xft[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},pft=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},gft=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=t[0],n=t[1];t[2],t[3];var a=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var o=t[12],l=t[13];return t[14],t[15],t.length===16?[r,n,a,s,o,l]:null},xft={matrix:pft,matrix3d:gft},dY={type:16,number:50,flags:IE},vft=[dY,dY],bft={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(pi);return r.length!==2?vft:[r[0],r[1]]}},yft={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Ow;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(Ow||(Ow={}));var wft={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return Ow.BREAK_ALL;case"keep-all":return Ow.KEEP_ALL;case"normal":default:return Ow.NORMAL}}},Eft={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(v1(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},_fe={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},Nft={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return v1(t)?t.number:1}},Cft={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_ft={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},Sft={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},kft={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},jft={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(v1(t))return t.number;if(wa(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},Bft={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(wa).map(function(r){return r.value})}},Tft={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},ji=function(e,t){return(e&t)!==0},Ift={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},Fft={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=t.filter(cfe),s=0;s<a.length;s++){var o=a[s],l=a[s+1];if(o.type===20){var c=l&&v1(l)?l.number:1;n.push({counter:o.value,increment:c})}}return n}},Oft={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],n=t.filter(cfe),a=0;a<n.length;a++){var s=n[a],o=n[a+1];if(wa(s)&&s.value!=="none"){var l=o&&v1(o)?o.number:0;r.push({counter:s.value,reset:l})}}return r}},Dft={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(FE).map(function(r){return _fe.parse(e,r)})}},Pft={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var n=[],a=t.filter(ldt);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var o=a[s].value,l=a[s+1].value;n.push({open:o,close:l})}return n}},fY=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},Rft={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&jD(t[0],"none")?[]:AA(t).map(function(r){for(var n={color:255,offsetX:No,offsetY:No,blur:No,spread:No,inset:!1},a=0,s=0;s<r.length;s++){var o=r[s];jD(o,"inset")?n.inset=!0:Lm(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:a===2?n.blur=o:n.spread=o,a++):n.color=gm.parse(e,o)}return n})}},Lft={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],n=[];return t.filter(wa).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},Mft={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Uft={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return FE(t)?t.number:0}},Qft=function(){function e(t,r){var n,a;this.animationDuration=lr(t,Dft,r.animationDuration),this.backgroundClip=lr(t,ddt,r.backgroundClip),this.backgroundColor=lr(t,fdt,r.backgroundColor),this.backgroundImage=lr(t,wdt,r.backgroundImage),this.backgroundOrigin=lr(t,Edt,r.backgroundOrigin),this.backgroundPosition=lr(t,Ndt,r.backgroundPosition),this.backgroundRepeat=lr(t,Cdt,r.backgroundRepeat),this.backgroundSize=lr(t,Sdt,r.backgroundSize),this.borderTopColor=lr(t,jdt,r.borderTopColor),this.borderRightColor=lr(t,Bdt,r.borderRightColor),this.borderBottomColor=lr(t,Tdt,r.borderBottomColor),this.borderLeftColor=lr(t,Idt,r.borderLeftColor),this.borderTopLeftRadius=lr(t,Fdt,r.borderTopLeftRadius),this.borderTopRightRadius=lr(t,Odt,r.borderTopRightRadius),this.borderBottomRightRadius=lr(t,Ddt,r.borderBottomRightRadius),this.borderBottomLeftRadius=lr(t,Pdt,r.borderBottomLeftRadius),this.borderTopStyle=lr(t,Rdt,r.borderTopStyle),this.borderRightStyle=lr(t,Ldt,r.borderRightStyle),this.borderBottomStyle=lr(t,Mdt,r.borderBottomStyle),this.borderLeftStyle=lr(t,Udt,r.borderLeftStyle),this.borderTopWidth=lr(t,Qdt,r.borderTopWidth),this.borderRightWidth=lr(t,Hdt,r.borderRightWidth),this.borderBottomWidth=lr(t,Vdt,r.borderBottomWidth),this.borderLeftWidth=lr(t,zdt,r.borderLeftWidth),this.boxShadow=lr(t,Rft,r.boxShadow),this.color=lr(t,$dt,r.color),this.direction=lr(t,Gdt,r.direction),this.display=lr(t,qdt,r.display),this.float=lr(t,Wdt,r.cssFloat),this.fontFamily=lr(t,Sft,r.fontFamily),this.fontSize=lr(t,kft,r.fontSize),this.fontStyle=lr(t,Tft,r.fontStyle),this.fontVariant=lr(t,Bft,r.fontVariant),this.fontWeight=lr(t,jft,r.fontWeight),this.letterSpacing=lr(t,Xdt,r.letterSpacing),this.lineBreak=lr(t,Ydt,r.lineBreak),this.lineHeight=lr(t,Jdt,r.lineHeight),this.listStyleImage=lr(t,Zdt,r.listStyleImage),this.listStylePosition=lr(t,eft,r.listStylePosition),this.listStyleType=lr(t,BD,r.listStyleType),this.marginTop=lr(t,tft,r.marginTop),this.marginRight=lr(t,rft,r.marginRight),this.marginBottom=lr(t,nft,r.marginBottom),this.marginLeft=lr(t,aft,r.marginLeft),this.opacity=lr(t,Nft,r.opacity);var s=lr(t,sft,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=lr(t,ift,r.overflowWrap),this.paddingTop=lr(t,oft,r.paddingTop),this.paddingRight=lr(t,lft,r.paddingRight),this.paddingBottom=lr(t,cft,r.paddingBottom),this.paddingLeft=lr(t,uft,r.paddingLeft),this.paintOrder=lr(t,Lft,r.paintOrder),this.position=lr(t,fft,r.position),this.textAlign=lr(t,dft,r.textAlign),this.textDecorationColor=lr(t,Cft,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=lr(t,_ft,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=lr(t,Aft,r.textShadow),this.textTransform=lr(t,hft,r.textTransform),this.transform=lr(t,mft,r.transform),this.transformOrigin=lr(t,bft,r.transformOrigin),this.visibility=lr(t,yft,r.visibility),this.webkitTextStrokeColor=lr(t,Mft,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=lr(t,Uft,r.webkitTextStrokeWidth),this.wordBreak=lr(t,wft,r.wordBreak),this.zIndex=lr(t,Eft,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return xm(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return ji(this.display,4)||ji(this.display,33554432)||ji(this.display,268435456)||ji(this.display,536870912)||ji(this.display,67108864)||ji(this.display,134217728)},e}(),Hft=function(){function e(t,r){this.content=lr(t,Ift,r.content),this.quotes=lr(t,Pft,r.quotes)}return e}(),AY=function(){function e(t,r){this.counterIncrement=lr(t,Fft,r.counterIncrement),this.counterReset=lr(t,Oft,r.counterReset)}return e}(),lr=function(e,t,r){var n=new ofe,a=r!==null&&typeof r<"u"?r.toString():t.initialValue;n.write(a);var s=new lfe(n.read());switch(t.type){case 2:var o=s.parseComponentValue();return t.parse(e,wa(o)?o.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return yj.parse(e,s.parseComponentValue());case"color":return gm.parse(e,s.parseComponentValue());case"image":return n7.parse(e,s.parseComponentValue());case"length":var l=s.parseComponentValue();return Lm(l)?l:No;case"length-percentage":var c=s.parseComponentValue();return pi(c)?c:No;case"time":return _fe.parse(e,s.parseComponentValue())}break}},Vft="data-html2canvas-debug",zft=function(e){var t=e.getAttribute(Vft);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},TD=function(e,t){var r=zft(e);return r===1||t===r},hA=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,TD(r,3))debugger;this.styles=new Qft(t,window.getComputedStyle(r,null)),OD(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=vj(this.context,r),TD(r,4)&&(this.flags|=16)}return e}(),$ft="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",hY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",sw=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var n5=0;n5<hY.length;n5++)sw[hY.charCodeAt(n5)]=n5;var Gft=function(e){var t=e.length*.75,r=e.length,n,a=0,s,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=sw[e.charCodeAt(n)],o=sw[e.charCodeAt(n+1)],l=sw[e.charCodeAt(n+2)],c=sw[e.charCodeAt(n+3)],d[a++]=s<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},qft=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},Kft=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},fg=5,a7=11,A6=2,Wft=a7-fg,Sfe=65536>>fg,Xft=1<<fg,h6=Xft-1,Yft=1024>>fg,Jft=Sfe+Yft,Zft=Jft,eAt=32,tAt=Zft+eAt,rAt=65536>>a7,nAt=1<<Wft,aAt=nAt-1,mY=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},sAt=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},iAt=function(e,t){var r=Gft(e),n=Array.isArray(r)?Kft(r):new Uint32Array(r),a=Array.isArray(r)?qft(r):new Uint16Array(r),s=24,o=mY(a,s/2,n[4]/2),l=n[5]===2?mY(a,(s+n[4])/2):sAt(n,Math.ceil((s+n[4])/4));return new oAt(n[0],n[1],n[2],n[3],o,l)},oAt=function(){function e(t,r,n,a,s,o){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=o}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>fg],r=(r<<A6)+(t&h6),this.data[r];if(t<=65535)return r=this.index[Sfe+(t-55296>>fg)],r=(r<<A6)+(t&h6),this.data[r];if(t<this.highStart)return r=tAt-rAt+(t>>a7),r=this.index[r],r+=t>>fg&aAt,r=this.index[r],r=(r<<A6)+(t&h6),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),pY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lAt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var a5=0;a5<pY.length;a5++)lAt[pY.charCodeAt(a5)]=a5;var cAt=1,m6=2,p6=3,gY=4,xY=5,uAt=7,vY=8,g6=9,x6=10,bY=11,yY=12,wY=13,EY=14,v6=15,dAt=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},fAt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var o=e[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},AAt=iAt($ft),Du="×",b6="÷",hAt=function(e){return AAt.get(e)},mAt=function(e,t,r){var n=r-2,a=t[n],s=t[r-1],o=t[r];if(s===m6&&o===p6)return Du;if(s===m6||s===p6||s===gY||o===m6||o===p6||o===gY)return b6;if(s===vY&&[vY,g6,bY,yY].indexOf(o)!==-1||(s===bY||s===g6)&&(o===g6||o===x6)||(s===yY||s===x6)&&o===x6||o===wY||o===xY||o===uAt||s===cAt)return Du;if(s===wY&&o===EY){for(;a===xY;)a=t[--n];if(a===EY)return Du}if(s===v6&&o===v6){for(var l=0;a===v6;)l++,a=t[--n];if(l%2===0)return Du}return b6},pAt=function(e){var t=dAt(e),r=t.length,n=0,a=0,s=t.map(hAt);return{next:function(){if(n>=r)return{done:!0,value:null};for(var o=Du;n<r&&(o=mAt(t,s,++n))===Du;);if(o!==Du||n===r){var l=fAt.apply(null,t.slice(a,n));return a=n,{value:l,done:!1}}return{done:!0,value:null}}}},gAt=function(e){for(var t=pAt(e),r=[],n;!(n=t.next()).done;)n.value&&r.push(n.value.slice());return r},xAt=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(e.body.removeChild(n),s===t)return!0}}return!1},vAt=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,a=bj(n.data).map(function(c){return Ks(c)}),s=0,o={},l=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var f=d.x>o.x||d.y>o.y;return o=d,u===0?!0:f});return e.body.removeChild(t),l},bAt=function(){return typeof new Image().crossOrigin<"u"},yAt=function(){return typeof new XMLHttpRequest().responseType=="string"},wAt=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},NY=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},EAt=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=t.toDataURL();a.src=s;var o=ID(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),CY(o).then(function(l){n.drawImage(l,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=e.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",NY(c)?CY(ID(r,r,0,0,u)):Promise.reject(!1)}).then(function(l){return n.drawImage(l,0,0),NY(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},ID=function(e,t,r,n,a){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",t.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(a),o},CY=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},xo={get SUPPORT_RANGE_BOUNDS(){var e=xAt(document);return Object.defineProperty(xo,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=xo.SUPPORT_RANGE_BOUNDS&&vAt(document);return Object.defineProperty(xo,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=wAt(document);return Object.defineProperty(xo,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?EAt(document):Promise.resolve(!1);return Object.defineProperty(xo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=bAt();return Object.defineProperty(xo,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=yAt();return Object.defineProperty(xo,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(xo,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(xo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Dw=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),NAt=function(e,t,r,n){var a=SAt(t,r),s=[],o=0;return a.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(xo.SUPPORT_RANGE_BOUNDS){var c=_Y(n,o,l.length).getClientRects();if(c.length>1){var u=s7(l),d=0;u.forEach(function(h){s.push(new Dw(h,Ph.fromDOMRectList(e,_Y(n,d+o,h.length).getClientRects()))),d+=h.length})}else s.push(new Dw(l,Ph.fromDOMRectList(e,c)))}else{var f=n.splitText(l.length);s.push(new Dw(l,CAt(e,n))),n=f}else xo.SUPPORT_RANGE_BOUNDS||(n=n.splitText(l.length));o+=l.length}),s},CAt=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(n,t);var s=vj(e,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return Ph.EMPTY},_Y=function(e,t,r){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},s7=function(e){if(xo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return gAt(e)},_At=function(e,t){if(xo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(n){return n.segment})}return jAt(e,t)},SAt=function(e,t){return t.letterSpacing!==0?s7(e):_At(e,t)},kAt=[32,160,4961,65792,65793,4153,4241],jAt=function(e,t){for(var r=rut(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],a,s=function(){if(a.value){var o=a.value.slice(),l=bj(o),c="";l.forEach(function(u){kAt.indexOf(u)===-1?c+=Ks(u):(c.length&&n.push(c),n.push(Ks(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},BAt=function(){function e(t,r,n){this.text=TAt(r.data,n.textTransform),this.textBounds=NAt(t,this.text,n,r)}return e}(),TAt=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(IAt,FAt);case 2:return e.toUpperCase();default:return e}},IAt=/(^|\s|:|-|\(|\))([a-z])/g,FAt=function(e,t,r){return e.length>0?t+r.toUpperCase():e},kfe=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return t}(hA),jfe=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return t}(hA),Bfe=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=new XMLSerializer,o=vj(r,n);return n.setAttribute("width",o.width+"px"),n.setAttribute("height",o.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t}(hA),Tfe=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(hA),FD=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return t}(hA),OAt=[{type:15,flags:0,unit:"px",number:3}],DAt=[{type:16,flags:0,number:50}],PAt=function(e){return e.width>e.height?new Ph(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new Ph(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},RAt=function(e){var t=e.type===LAt?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},tk="checkbox",rk="radio",LAt="password",SY=707406591,i7=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=RAt(n),(a.type===tk||a.type===rk)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=PAt(a.bounds)),a.type){case tk:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=OAt;break;case rk:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=DAt;break}return a}return t}(hA),Ife=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return t}(hA),Ffe=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(hA),Ofe=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=Pfe(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?Fw(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):gh.TRANSPARENT,o=n.contentWindow.document.body?Fw(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):gh.TRANSPARENT;a.backgroundColor=xm(s)?xm(o)?a.styles.backgroundColor:o:s}}catch{}return a}return t}(hA),MAt=["OL","UL","MENU"],Y5=function(e,t,r,n){for(var a=t.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,Rfe(a)&&a.data.trim().length>0)r.textNodes.push(new BAt(e,a,r.styles));else if(_v(a))if(Qfe(a)&&a.assignedNodes)a.assignedNodes().forEach(function(l){return Y5(e,l,r,n)});else{var o=Dfe(e,a);o.styles.isVisible()&&(UAt(a,o,n)?o.flags|=4:QAt(o.styles)&&(o.flags|=2),MAt.indexOf(a.tagName)!==-1&&(o.flags|=8),r.elements.push(o),a.slot,a.shadowRoot?Y5(e,a.shadowRoot,o,n):!nk(a)&&!Lfe(a)&&!ak(a)&&Y5(e,a,o,n))}},Dfe=function(e,t){return DD(t)?new kfe(e,t):Mfe(t)?new jfe(e,t):Lfe(t)?new Bfe(e,t):HAt(t)?new Tfe(e,t):VAt(t)?new FD(e,t):zAt(t)?new i7(e,t):ak(t)?new Ife(e,t):nk(t)?new Ffe(e,t):Ufe(t)?new Ofe(e,t):new hA(e,t)},Pfe=function(e,t){var r=Dfe(e,t);return r.flags|=4,Y5(e,t,r,r),r},UAt=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||o7(e)&&r.styles.isTransparent()},QAt=function(e){return e.isPositioned()||e.isFloating()},Rfe=function(e){return e.nodeType===Node.TEXT_NODE},_v=function(e){return e.nodeType===Node.ELEMENT_NODE},OD=function(e){return _v(e)&&typeof e.style<"u"&&!J5(e)},J5=function(e){return typeof e.className=="object"},HAt=function(e){return e.tagName==="LI"},VAt=function(e){return e.tagName==="OL"},zAt=function(e){return e.tagName==="INPUT"},$At=function(e){return e.tagName==="HTML"},Lfe=function(e){return e.tagName==="svg"},o7=function(e){return e.tagName==="BODY"},Mfe=function(e){return e.tagName==="CANVAS"},kY=function(e){return e.tagName==="VIDEO"},DD=function(e){return e.tagName==="IMG"},Ufe=function(e){return e.tagName==="IFRAME"},jY=function(e){return e.tagName==="STYLE"},GAt=function(e){return e.tagName==="SCRIPT"},nk=function(e){return e.tagName==="TEXTAREA"},ak=function(e){return e.tagName==="SELECT"},Qfe=function(e){return e.tagName==="SLOT"},BY=function(e){return e.tagName.indexOf("-")>0},qAt=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(n){return r.counters[n].pop()})},e.prototype.parse=function(t){var r=this,n=t.counterIncrement,a=t.counterReset,s=!0;n!==null&&n.forEach(function(l){var c=r.counters[l.counter];c&&l.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var o=[];return s&&a.forEach(function(l){var c=r.counters[l.counter];o.push(l.counter),c||(c=r.counters[l.counter]=[]),c.push(l.reset)}),o},e}(),TY={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},IY={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},KAt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},WAt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Jx=function(e,t,r,n,a,s){return e<t||e>r?R2(e,a,s.length>0):n.integers.reduce(function(o,l,c){for(;e>=l;)e-=l,o+=n.values[c];return o},"")+s},Hfe=function(e,t,r,n){var a="";do r||e--,a=n(e)+a,e/=t;while(e*t>=t);return a},$s=function(e,t,r,n,a){var s=r-t+1;return(e<0?"-":"")+(Hfe(Math.abs(e),s,n,function(o){return Ks(Math.floor(o%s)+t)})+a)},Np=function(e,t,r){r===void 0&&(r=". ");var n=t.length;return Hfe(Math.abs(e),n,!1,function(a){return t[Math.floor(a%n)]})+r},fv=1,R0=2,L0=4,iw=8,KA=function(e,t,r,n,a,s){if(e<-9999||e>9999)return R2(e,4,a.length>0);var o=Math.abs(e),l=a;if(o===0)return t[0]+l;for(var c=0;o>0&&c<=4;c++){var u=o%10;u===0&&ji(s,fv)&&l!==""?l=t[u]+l:u>1||u===1&&c===0||u===1&&c===1&&ji(s,R0)||u===1&&c===1&&ji(s,L0)&&e>100||u===1&&c>1&&ji(s,iw)?l=t[u]+(c>0?r[c-1]:"")+l:u===1&&c>0&&(l=r[c-1]+l),o=Math.floor(o/10)}return(e<0?n:"")+l},FY="十百千萬",OY="拾佰仟萬",DY="マイナス",y6="마이너스",R2=function(e,t,r){var n=r?". ":"",a=r?"、":"",s=r?", ":"",o=r?" ":"";switch(t){case 0:return"•"+o;case 1:return"◦"+o;case 2:return"◾"+o;case 5:var l=$s(e,48,57,!0,n);return l.length<4?"0"+l:l;case 4:return Np(e,"〇一二三四五六七八九",a);case 6:return Jx(e,1,3999,TY,3,n).toLowerCase();case 7:return Jx(e,1,3999,TY,3,n);case 8:return $s(e,945,969,!1,n);case 9:return $s(e,97,122,!1,n);case 10:return $s(e,65,90,!1,n);case 11:return $s(e,1632,1641,!0,n);case 12:case 49:return Jx(e,1,9999,IY,3,n);case 35:return Jx(e,1,9999,IY,3,n).toLowerCase();case 13:return $s(e,2534,2543,!0,n);case 14:case 30:return $s(e,6112,6121,!0,n);case 15:return Np(e,"子丑寅卯辰巳午未申酉戌亥",a);case 16:return Np(e,"甲乙丙丁戊己庚辛壬癸",a);case 17:case 48:return KA(e,"零一二三四五六七八九",FY,"負",a,R0|L0|iw);case 47:return KA(e,"零壹貳參肆伍陸柒捌玖",OY,"負",a,fv|R0|L0|iw);case 42:return KA(e,"零一二三四五六七八九",FY,"负",a,R0|L0|iw);case 41:return KA(e,"零壹贰叁肆伍陆柒捌玖",OY,"负",a,fv|R0|L0|iw);case 26:return KA(e,"〇一二三四五六七八九","十百千万",DY,a,0);case 25:return KA(e,"零壱弐参四伍六七八九","拾百千万",DY,a,fv|R0|L0);case 31:return KA(e,"영일이삼사오육칠팔구","십백천만",y6,s,fv|R0|L0);case 33:return KA(e,"零一二三四五六七八九","十百千萬",y6,s,0);case 32:return KA(e,"零壹貳參四五六七八九","拾百千",y6,s,fv|R0|L0);case 18:return $s(e,2406,2415,!0,n);case 20:return Jx(e,1,19999,WAt,3,n);case 21:return $s(e,2790,2799,!0,n);case 22:return $s(e,2662,2671,!0,n);case 22:return Jx(e,1,10999,KAt,3,n);case 23:return Np(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Np(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return $s(e,3302,3311,!0,n);case 28:return Np(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",a);case 29:return Np(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",a);case 34:return $s(e,3792,3801,!0,n);case 37:return $s(e,6160,6169,!0,n);case 38:return $s(e,4160,4169,!0,n);case 39:return $s(e,2918,2927,!0,n);case 40:return $s(e,1776,1785,!0,n);case 43:return $s(e,3046,3055,!0,n);case 44:return $s(e,3174,3183,!0,n);case 45:return $s(e,3664,3673,!0,n);case 46:return $s(e,3872,3881,!0,n);case 3:default:return $s(e,48,57,!0,n)}},Vfe="data-html2canvas-ignore",PY=function(){function e(t,r,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new qAt,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var n=this,a=XAt(t,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,o=t.defaultView.pageYOffset,l=a.contentWindow,c=l.document,u=ZAt(a).then(function(){return gl(n,void 0,void 0,function(){var d,f;return $o(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(nht),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,JAt(c)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(tht(document.doctype)+"<html></html>"),rht(this.referenceElement.ownerDocument,s,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},e.prototype.createElementClone=function(t){if(TD(t,2))debugger;if(Mfe(t))return this.createCanvasClone(t);if(kY(t))return this.createVideoClone(t);if(jY(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return DD(r)&&(DD(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),BY(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return w6(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,o){return o&&typeof o.cssText=="string"?s+o.cssText:s},""),a=t.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var s=t.getContext("2d"),o=a.getContext("2d");if(o)if(!this.options.allowTaint&&s)o.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var l=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}o.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},e.prototype.appendChildNode=function(t,r,n){(!_v(r)||!GAt(r)&&!r.hasAttribute(Vfe)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!_v(r)||!jY(r))&&t.appendChild(this.cloneNode(r,n))},e.prototype.cloneChildNodes=function(t,r,n){for(var a=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(_v(s)&&Qfe(s)&&typeof s.assignedNodes=="function"){var o=s.assignedNodes();o.length&&o.forEach(function(l){return a.appendChildNode(r,l,n)})}else this.appendChildNode(r,s,n)},e.prototype.cloneNode=function(t,r){if(Rfe(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&_v(t)&&(OD(t)||J5(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var s=n.getComputedStyle(t),o=n.getComputedStyle(t,":before"),l=n.getComputedStyle(t,":after");this.referenceElement===t&&OD(a)&&(this.clonedReferenceElement=a),o7(a)&&iht(a);var c=this.counters.parse(new AY(this.context,s)),u=this.resolvePseudoContent(t,a,o,Pw.BEFORE);BY(t)&&(r=!0),kY(t)||this.cloneChildNodes(t,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(t,a,l,Pw.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||J5(t))&&!Ufe(t)||r)&&w6(s,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(nk(t)||ak(t))&&(nk(a)||ak(a))&&(a.value=t.value),a}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,n,a){var s=this;if(n){var o=n.content,l=r.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||n.display==="none")){this.counters.parse(new AY(this.context,n));var c=new Hft(this.context,n),u=l.createElement("html2canvaspseudoelement");w6(n,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(l.createTextNode(f.value));else if(f.type===22){var h=l.createElement("img");h.src=f.value,h.style.opacity="1",u.appendChild(h)}else if(f.type===18){if(f.name==="attr"){var m=f.values.filter(wa);m.length&&u.appendChild(l.createTextNode(t.getAttribute(m[0].value)||""))}else if(f.name==="counter"){var g=f.values.filter(Pb),x=g[0],v=g[1];if(x&&wa(x)){var y=s.counters.getCounterValue(x.value),w=v&&wa(v)?BD.parse(s.context,v.value):3;u.appendChild(l.createTextNode(R2(y,w,!1)))}}else if(f.name==="counters"){var _=f.values.filter(Pb),x=_[0],T=_[1],v=_[2];if(x&&wa(x)){var j=s.counters.getCounterValues(x.value),I=v&&wa(v)?BD.parse(s.context,v.value):3,E=T&&T.type===0?T.value:"",S=j.map(function(R){return R2(R,I,!1)}).join(E);u.appendChild(l.createTextNode(S))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(l.createTextNode(fY(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode(fY(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(f.value))}}),u.className=PD+" "+RD;var d=a===Pw.BEFORE?" "+PD:" "+RD;return J5(r)?r.className.baseValue+=d:r.className+=d,u}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),Pw;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(Pw||(Pw={}));var XAt=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(Vfe,"true"),e.body.appendChild(r),r},YAt=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},JAt=function(e){return Promise.all([].slice.call(e.images,0).map(YAt))},ZAt=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},eht=["all","d","content"],w6=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);eht.indexOf(n)===-1&&t.style.setProperty(n,e.getPropertyValue(n))}return t},tht=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},rht=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},nht=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},aht=":before",sht=":after",PD="___html2canvas___pseudoelement_before",RD="___html2canvas___pseudoelement_after",RY=`{
    content: "" !important;
    display: none !important;
}`,iht=function(e){oht(e,"."+PD+aht+RY+`
         .`+RD+sht+RY)},oht=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},zfe=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),lht=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(N6(t)||fht(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return gl(this,void 0,void 0,function(){var r,n,a,s,o=this;return $o(this,function(l){switch(l.label){case 0:return r=zfe.isSameOrigin(t),n=!E6(t)&&this._options.useCORS===!0&&xo.SUPPORT_CORS_IMAGES&&!r,a=!E6(t)&&!r&&!N6(t)&&typeof this._options.proxy=="string"&&xo.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!E6(t)&&!N6(t)&&!a&&!n?[2]:(s=t,a?[4,this.proxy(s)]:[3,2]);case 1:s=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(Aht(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),o._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(s,o){var l=xo.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(h){return o(h)},!1),f.readAsDataURL(c.response)}else o("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=o;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(t)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return o("Timed out ("+d+"ms) proxying "+a)}}c.send()})},e}(),cht=/^data:image\/svg\+xml/i,uht=/^data:image\/.*;base64,/i,dht=/^data:image\/.*/i,fht=function(e){return xo.SUPPORT_SVG_DRAWING||!hht(e)},E6=function(e){return dht.test(e)},Aht=function(e){return uht.test(e)},N6=function(e){return e.substr(0,4)==="blob"},hht=function(e){return e.substr(-3).toLowerCase()==="svg"||cht.test(e)},sr=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),Zx=function(e,t,r){return new sr(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},s5=function(){function e(t,r,n,a){this.type=1,this.start=t,this.startControl=r,this.endControl=n,this.end=a}return e.prototype.subdivide=function(t,r){var n=Zx(this.start,this.startControl,t),a=Zx(this.startControl,this.endControl,t),s=Zx(this.endControl,this.end,t),o=Zx(n,a,t),l=Zx(a,s,t),c=Zx(o,l,t);return r?new e(this.start,n,o,c):new e(c,l,s,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Lu=function(e){return e.type===1},mht=function(){function e(t){var r=t.styles,n=t.bounds,a=aw(r.borderTopLeftRadius,n.width,n.height),s=a[0],o=a[1],l=aw(r.borderTopRightRadius,n.width,n.height),c=l[0],u=l[1],d=aw(r.borderBottomRightRadius,n.width,n.height),f=d[0],h=d[1],m=aw(r.borderBottomLeftRadius,n.width,n.height),g=m[0],x=m[1],v=[];v.push((s+c)/n.width),v.push((g+f)/n.width),v.push((o+x)/n.height),v.push((u+h)/n.height);var y=Math.max.apply(Math,v);y>1&&(s/=y,o/=y,c/=y,u/=y,f/=y,h/=y,g/=y,x/=y);var w=n.width-c,_=n.height-h,T=n.width-f,j=n.height-x,I=r.borderTopWidth,E=r.borderRightWidth,S=r.borderBottomWidth,B=r.borderLeftWidth,M=Pa(r.paddingTop,t.bounds.width),R=Pa(r.paddingRight,t.bounds.width),k=Pa(r.paddingBottom,t.bounds.width),D=Pa(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?Ya(n.left+B/3,n.top+I/3,s-B/3,o-I/3,aa.TOP_LEFT):new sr(n.left+B/3,n.top+I/3),this.topRightBorderDoubleOuterBox=s>0||o>0?Ya(n.left+w,n.top+I/3,c-E/3,u-I/3,aa.TOP_RIGHT):new sr(n.left+n.width-E/3,n.top+I/3),this.bottomRightBorderDoubleOuterBox=f>0||h>0?Ya(n.left+T,n.top+_,f-E/3,h-S/3,aa.BOTTOM_RIGHT):new sr(n.left+n.width-E/3,n.top+n.height-S/3),this.bottomLeftBorderDoubleOuterBox=g>0||x>0?Ya(n.left+B/3,n.top+j,g-B/3,x-S/3,aa.BOTTOM_LEFT):new sr(n.left+B/3,n.top+n.height-S/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?Ya(n.left+B*2/3,n.top+I*2/3,s-B*2/3,o-I*2/3,aa.TOP_LEFT):new sr(n.left+B*2/3,n.top+I*2/3),this.topRightBorderDoubleInnerBox=s>0||o>0?Ya(n.left+w,n.top+I*2/3,c-E*2/3,u-I*2/3,aa.TOP_RIGHT):new sr(n.left+n.width-E*2/3,n.top+I*2/3),this.bottomRightBorderDoubleInnerBox=f>0||h>0?Ya(n.left+T,n.top+_,f-E*2/3,h-S*2/3,aa.BOTTOM_RIGHT):new sr(n.left+n.width-E*2/3,n.top+n.height-S*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||x>0?Ya(n.left+B*2/3,n.top+j,g-B*2/3,x-S*2/3,aa.BOTTOM_LEFT):new sr(n.left+B*2/3,n.top+n.height-S*2/3),this.topLeftBorderStroke=s>0||o>0?Ya(n.left+B/2,n.top+I/2,s-B/2,o-I/2,aa.TOP_LEFT):new sr(n.left+B/2,n.top+I/2),this.topRightBorderStroke=s>0||o>0?Ya(n.left+w,n.top+I/2,c-E/2,u-I/2,aa.TOP_RIGHT):new sr(n.left+n.width-E/2,n.top+I/2),this.bottomRightBorderStroke=f>0||h>0?Ya(n.left+T,n.top+_,f-E/2,h-S/2,aa.BOTTOM_RIGHT):new sr(n.left+n.width-E/2,n.top+n.height-S/2),this.bottomLeftBorderStroke=g>0||x>0?Ya(n.left+B/2,n.top+j,g-B/2,x-S/2,aa.BOTTOM_LEFT):new sr(n.left+B/2,n.top+n.height-S/2),this.topLeftBorderBox=s>0||o>0?Ya(n.left,n.top,s,o,aa.TOP_LEFT):new sr(n.left,n.top),this.topRightBorderBox=c>0||u>0?Ya(n.left+w,n.top,c,u,aa.TOP_RIGHT):new sr(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||h>0?Ya(n.left+T,n.top+_,f,h,aa.BOTTOM_RIGHT):new sr(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=g>0||x>0?Ya(n.left,n.top+j,g,x,aa.BOTTOM_LEFT):new sr(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||o>0?Ya(n.left+B,n.top+I,Math.max(0,s-B),Math.max(0,o-I),aa.TOP_LEFT):new sr(n.left+B,n.top+I),this.topRightPaddingBox=c>0||u>0?Ya(n.left+Math.min(w,n.width-E),n.top+I,w>n.width+E?0:Math.max(0,c-E),Math.max(0,u-I),aa.TOP_RIGHT):new sr(n.left+n.width-E,n.top+I),this.bottomRightPaddingBox=f>0||h>0?Ya(n.left+Math.min(T,n.width-B),n.top+Math.min(_,n.height-S),Math.max(0,f-E),Math.max(0,h-S),aa.BOTTOM_RIGHT):new sr(n.left+n.width-E,n.top+n.height-S),this.bottomLeftPaddingBox=g>0||x>0?Ya(n.left+B,n.top+Math.min(j,n.height-S),Math.max(0,g-B),Math.max(0,x-S),aa.BOTTOM_LEFT):new sr(n.left+B,n.top+n.height-S),this.topLeftContentBox=s>0||o>0?Ya(n.left+B+D,n.top+I+M,Math.max(0,s-(B+D)),Math.max(0,o-(I+M)),aa.TOP_LEFT):new sr(n.left+B+D,n.top+I+M),this.topRightContentBox=c>0||u>0?Ya(n.left+Math.min(w,n.width+B+D),n.top+I+M,w>n.width+B+D?0:c-B+D,u-(I+M),aa.TOP_RIGHT):new sr(n.left+n.width-(E+R),n.top+I+M),this.bottomRightContentBox=f>0||h>0?Ya(n.left+Math.min(T,n.width-(B+D)),n.top+Math.min(_,n.height+I+M),Math.max(0,f-(E+R)),h-(S+k),aa.BOTTOM_RIGHT):new sr(n.left+n.width-(E+R),n.top+n.height-(S+k)),this.bottomLeftContentBox=g>0||x>0?Ya(n.left+B+D,n.top+j,Math.max(0,g-(B+D)),x-(S+k),aa.BOTTOM_LEFT):new sr(n.left+B+D,n.top+n.height-(S+k))}return e}(),aa;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(aa||(aa={}));var Ya=function(e,t,r,n,a){var s=4*((Math.sqrt(2)-1)/3),o=r*s,l=n*s,c=e+r,u=t+n;switch(a){case aa.TOP_LEFT:return new s5(new sr(e,u),new sr(e,u-l),new sr(c-o,t),new sr(c,t));case aa.TOP_RIGHT:return new s5(new sr(e,t),new sr(e+o,t),new sr(c,u-l),new sr(c,u));case aa.BOTTOM_RIGHT:return new s5(new sr(c,t),new sr(c,t+l),new sr(e+o,u),new sr(e,u));case aa.BOTTOM_LEFT:default:return new s5(new sr(c,u),new sr(c-o,u),new sr(e,t+l),new sr(e,t))}},sk=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},pht=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},ik=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},ght=function(){function e(t,r,n){this.offsetX=t,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return e}(),i5=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),xht=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),vht=function(e){return e.type===0},$fe=function(e){return e.type===1},bht=function(e){return e.type===2},LY=function(e,t){return e.length===t.length?e.some(function(r,n){return r===t[n]}):!1},yht=function(e,t,r,n,a){return e.map(function(s,o){switch(o){case 0:return s.add(t,r);case 1:return s.add(t+n,r);case 2:return s.add(t+n,r+a);case 3:return s.add(t,r+a)}return s})},Gfe=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),qfe=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new mht(this.container),this.container.styles.opacity<1&&this.effects.push(new xht(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new ght(n,a,s))}if(this.container.styles.overflowX!==0){var o=sk(this.curves),l=ik(this.curves);LY(o,l)?this.effects.push(new i5(o,6)):(this.effects.push(new i5(o,2)),this.effects.push(new i5(l,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!$fe(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var o=sk(n.curves),l=ik(n.curves);LY(o,l)||a.unshift(new i5(l,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return ji(c.target,t)})},e}(),LD=function(e,t,r,n){e.container.elements.forEach(function(a){var s=ji(a.flags,4),o=ji(a.flags,2),l=new qfe(a,e);ji(a.styles.display,2048)&&n.push(l);var c=ji(a.flags,8)?[]:n;if(s||o){var u=s||a.styles.isPositioned()?r:t,d=new Gfe(l);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var h=0;u.negativeZIndex.some(function(g,x){return f>g.element.container.styles.zIndex.order?(h=x,!1):h>0}),u.negativeZIndex.splice(h,0,d)}else if(f>0){var m=0;u.positiveZIndex.some(function(g,x){return f>=g.element.container.styles.zIndex.order?(m=x+1,!1):m>0}),u.positiveZIndex.splice(m,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);LD(l,d,s?d:r,c)}else a.styles.isInlineLevel()?t.inlineLevel.push(l):t.nonInlineLevel.push(l),LD(l,t,r,c);ji(a.flags,8)&&Kfe(a,c)})},Kfe=function(e,t){for(var r=e instanceof FD?e.start:1,n=e instanceof FD?e.reversed:!1,a=0;a<t.length;a++){var s=t[a];s.container instanceof Tfe&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=R2(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},wht=function(e){var t=new qfe(e,null),r=new Gfe(t),n=[];return LD(t,r,r,n),Kfe(t.container,n),r},MY=function(e,t){switch(t){case 0:return zu(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return zu(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return zu(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return zu(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},Eht=function(e,t){switch(t){case 0:return zu(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return zu(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return zu(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return zu(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},Nht=function(e,t){switch(t){case 0:return zu(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return zu(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return zu(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return zu(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},Cht=function(e,t){switch(t){case 0:return o5(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return o5(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return o5(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return o5(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},o5=function(e,t){var r=[];return Lu(e)?r.push(e.subdivide(.5,!1)):r.push(e),Lu(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},zu=function(e,t,r,n){var a=[];return Lu(e)?a.push(e.subdivide(.5,!1)):a.push(e),Lu(r)?a.push(r.subdivide(.5,!0)):a.push(r),Lu(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),Lu(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},Wfe=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},ok=function(e){var t=e.styles,r=e.bounds,n=Pa(t.paddingLeft,r.width),a=Pa(t.paddingRight,r.width),s=Pa(t.paddingTop,r.width),o=Pa(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+a),-(t.borderTopWidth+t.borderBottomWidth+s+o))},_ht=function(e,t){return e===0?t.bounds:e===2?ok(t):Wfe(t)},Sht=function(e,t){return e===0?t.bounds:e===2?ok(t):Wfe(t)},C6=function(e,t,r){var n=_ht(Av(e.styles.backgroundOrigin,t),e),a=Sht(Av(e.styles.backgroundClip,t),e),s=kht(Av(e.styles.backgroundSize,t),r,n),o=s[0],l=s[1],c=aw(Av(e.styles.backgroundPosition,t),n.width-o,n.height-l),u=jht(Av(e.styles.backgroundRepeat,t),c,s,n,a),d=Math.round(n.left+c[0]),f=Math.round(n.top+c[1]);return[u,d,f,o,l]},ev=function(e){return wa(e)&&e.value===Xv.AUTO},l5=function(e){return typeof e=="number"},kht=function(e,t,r){var n=t[0],a=t[1],s=t[2],o=e[0],l=e[1];if(!o)return[0,0];if(pi(o)&&l&&pi(l))return[Pa(o,r.width),Pa(l,r.height)];var c=l5(s);if(wa(o)&&(o.value===Xv.CONTAIN||o.value===Xv.COVER)){if(l5(s)){var u=r.width/r.height;return u<s!=(o.value===Xv.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=l5(n),f=l5(a),h=d||f;if(ev(o)&&(!l||ev(l))){if(d&&f)return[n,a];if(!c&&!h)return[r.width,r.height];if(h&&c){var m=d?n:a*s,g=f?a:n/s;return[m,g]}var x=d?n:r.width,v=f?a:r.height;return[x,v]}if(c){var y=0,w=0;return pi(o)?y=Pa(o,r.width):pi(l)&&(w=Pa(l,r.height)),ev(o)?y=w*s:(!l||ev(l))&&(w=y/s),[y,w]}var _=null,T=null;if(pi(o)?_=Pa(o,r.width):l&&pi(l)&&(T=Pa(l,r.height)),_!==null&&(!l||ev(l))&&(T=d&&f?_/n*a:r.height),T!==null&&ev(o)&&(_=d&&f?T/a*n:r.width),_!==null&&T!==null)return[_,T];throw new Error("Unable to calculate background-size for element")},Av=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},jht=function(e,t,r,n,a){var s=t[0],o=t[1],l=r[0],c=r[1];switch(e){case 2:return[new sr(Math.round(n.left),Math.round(n.top+o)),new sr(Math.round(n.left+n.width),Math.round(n.top+o)),new sr(Math.round(n.left+n.width),Math.round(c+n.top+o)),new sr(Math.round(n.left),Math.round(c+n.top+o))];case 3:return[new sr(Math.round(n.left+s),Math.round(n.top)),new sr(Math.round(n.left+s+l),Math.round(n.top)),new sr(Math.round(n.left+s+l),Math.round(n.height+n.top)),new sr(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new sr(Math.round(n.left+s),Math.round(n.top+o)),new sr(Math.round(n.left+s+l),Math.round(n.top+o)),new sr(Math.round(n.left+s+l),Math.round(n.top+o+c)),new sr(Math.round(n.left+s),Math.round(n.top+o+c))];default:return[new sr(Math.round(a.left),Math.round(a.top)),new sr(Math.round(a.left+a.width),Math.round(a.top)),new sr(Math.round(a.left+a.width),Math.round(a.height+a.top)),new sr(Math.round(a.left),Math.round(a.height+a.top))]}},Bht="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",UY="Hidden Text",Tht=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",o.appendChild(n),a.src=Bht,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(UY)),n.appendChild(s),n.appendChild(a);var l=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(UY)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:l,middle:c}},e.prototype.getMetrics=function(t,r){var n=t+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,r)),this._data[n]},e}(),Xfe=function(){function e(t,r){this.context=t,this.options=r}return e}(),Iht=1e4,Fht=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new Tht(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return t.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},t.prototype.applyEffect=function(r){this.ctx.save(),bht(r)&&(this.ctx.globalAlpha=r.opacity),vht(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),$fe(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return gl(this,void 0,void 0,function(){var n;return $o(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return gl(this,void 0,void 0,function(){return $o(this,function(n){switch(n.label){case 0:if(ji(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var o=s7(r.text);o.reduce(function(l,c){return s.ctx.fillText(c,l,r.bounds.top+a),l+s.ctx.measureText(c).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),a=Lht(r.fontFamily).join(", "),s=FE(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},t.prototype.renderTextNode=function(r,n){return gl(this,void 0,void 0,function(){var a,s,o,l,c,u,d,f,h=this;return $o(this,function(m){return a=this.createFontStyle(n),s=a[0],o=a[1],l=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(o,l),u=c.baseline,d=c.middle,f=n.paintOrder,r.textBounds.forEach(function(g){f.forEach(function(x){switch(x){case 0:h.ctx.fillStyle=Gi(n.color),h.renderTextWithLetterSpacing(g,n.letterSpacing,u);var v=n.textShadow;v.length&&g.text.trim().length&&(v.slice(0).reverse().forEach(function(y){h.ctx.shadowColor=Gi(y.color),h.ctx.shadowOffsetX=y.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=y.offsetY.number*h.options.scale,h.ctx.shadowBlur=y.blur.number,h.renderTextWithLetterSpacing(g,n.letterSpacing,u)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=Gi(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(y){switch(y){case 1:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+u),g.bounds.width,1);break;case 2:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:h.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+d),g.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&g.text.trim().length&&(h.ctx.strokeStyle=Gi(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+u)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=ok(r),o=ik(n);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return gl(this,void 0,void 0,function(){var n,a,s,o,l,c,w,w,u,d,f,h,T,m,g,j,x,v,y,w,_,T,j;return $o(this,function(I){switch(I.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,o=0,l=n.textNodes,I.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,s)]):[3,4];case 2:I.sent(),I.label=3;case 3:return o++,[3,1];case 4:if(!(n instanceof kfe))return[3,8];I.label=5;case 5:return I.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return w=I.sent(),this.renderReplacedElement(n,a,w),[3,8];case 7:return I.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof jfe&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof Bfe))return[3,12];I.label=9;case 9:return I.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return w=I.sent(),this.renderReplacedElement(n,a,w),[3,12];case 11:return I.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof Ofe&&n.tree?(u=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=I.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),I.label=14;case 14:if(n instanceof i7&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===tk?n.checked&&(this.ctx.save(),this.path([new sr(n.bounds.left+f*.39363,n.bounds.top+f*.79),new sr(n.bounds.left+f*.16,n.bounds.top+f*.5549),new sr(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new sr(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new sr(n.bounds.left+f*.72983,n.bounds.top+f*.23),new sr(n.bounds.left+f*.84,n.bounds.top+f*.34085),new sr(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=Gi(SY),this.ctx.fill(),this.ctx.restore()):n.type===rk&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Gi(SY),this.ctx.fill(),this.ctx.restore())),Oht(n)&&n.value.length){switch(h=this.createFontStyle(s),T=h[0],m=h[1],g=this.fontMetrics.getMetrics(T,m).baseline,this.ctx.font=T,this.ctx.fillStyle=Gi(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Pht(n.styles.textAlign),j=ok(n),x=0,n.styles.textAlign){case 1:x+=j.width/2;break;case 2:x+=j.width;break}v=j.add(x,0,0,-j.height/2+1),this.ctx.save(),this.path([new sr(j.left,j.top),new sr(j.left+j.width,j.top),new sr(j.left+j.width,j.top+j.height),new sr(j.left,j.top+j.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Dw(n.value,v),s.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ji(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(y=n.styles.listStyleImage,y.type!==0)return[3,18];w=void 0,_=y.url,I.label=15;case 15:return I.trys.push([15,17,,18]),[4,this.context.cache.match(_)];case 16:return w=I.sent(),this.ctx.drawImage(w,n.bounds.left-(w.width+10),n.bounds.top),[3,18];case 17:return I.sent(),this.context.logger.error("Error loading list-style-image "+_),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(T=this.createFontStyle(s)[0],this.ctx.font=T,this.ctx.fillStyle=Gi(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",j=new Ph(n.bounds.left,n.bounds.top+Pa(n.styles.paddingTop,n.bounds.width),n.bounds.width,uY(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Dw(r.listValue,j),s.letterSpacing,uY(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),I.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return gl(this,void 0,void 0,function(){var n,a,y,s,o,y,l,c,y,u,d,y,f,h,y,m,g,y,x,v,y;return $o(this,function(w){switch(w.label){case 0:if(ji(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:w.sent(),n=0,a=r.negativeZIndex,w.label=2;case 2:return n<a.length?(y=a[n],[4,this.renderStack(y)]):[3,5];case 3:w.sent(),w.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:w.sent(),s=0,o=r.nonInlineLevel,w.label=7;case 7:return s<o.length?(y=o[s],[4,this.renderNode(y)]):[3,10];case 8:w.sent(),w.label=9;case 9:return s++,[3,7];case 10:l=0,c=r.nonPositionedFloats,w.label=11;case 11:return l<c.length?(y=c[l],[4,this.renderStack(y)]):[3,14];case 12:w.sent(),w.label=13;case 13:return l++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,w.label=15;case 15:return u<d.length?(y=d[u],[4,this.renderStack(y)]):[3,18];case 16:w.sent(),w.label=17;case 17:return u++,[3,15];case 18:f=0,h=r.inlineLevel,w.label=19;case 19:return f<h.length?(y=h[f],[4,this.renderNode(y)]):[3,22];case 20:w.sent(),w.label=21;case 21:return f++,[3,19];case 22:m=0,g=r.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return m<g.length?(y=g[m],[4,this.renderStack(y)]):[3,26];case 24:w.sent(),w.label=25;case 25:return m++,[3,23];case 26:x=0,v=r.positiveZIndex,w.label=27;case 27:return x<v.length?(y=v[x],[4,this.renderStack(y)]):[3,30];case 28:w.sent(),w.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var o=Lu(a)?a.start:a;s===0?n.ctx.moveTo(o.x,o.y):n.ctx.lineTo(o.x,o.y),Lu(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},t.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var o=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,l=o.createElement("canvas");l.width=Math.max(1,n),l.height=Math.max(1,a);var c=l.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),l},t.prototype.renderBackgroundImage=function(r){return gl(this,void 0,void 0,function(){var n,a,s,o,l,c;return $o(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,h,m,M,V,q,D,L,S,g,M,V,q,D,L,x,v,y,w,_,T,j,I,E,S,B,M,R,k,D,L,Z,V,q,G,K,ee,W,P,U,z,J;return $o(this,function(te){switch(te.label){case 0:if(d.type!==0)return[3,5];f=void 0,h=d.url,te.label=1;case 1:return te.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return f=te.sent(),[3,4];case 3:return te.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return f&&(m=C6(r,n,[f.width,f.height,f.width/f.height]),M=m[0],V=m[1],q=m[2],D=m[3],L=m[4],S=s.ctx.createPattern(s.resizeImage(f,D,L),"repeat"),s.renderRepeat(M,S,V,q)),[3,6];case 5:vdt(d)?(g=C6(r,n,[null,null,null]),M=g[0],V=g[1],q=g[2],D=g[3],L=g[4],x=hdt(d.angle,D,L),v=x[0],y=x[1],w=x[2],_=x[3],T=x[4],j=document.createElement("canvas"),j.width=D,j.height=L,I=j.getContext("2d"),E=I.createLinearGradient(y,_,w,T),lY(d.stops,v).forEach(function(se){return E.addColorStop(se.stop,Gi(se.color))}),I.fillStyle=E,I.fillRect(0,0,D,L),D>0&&L>0&&(S=s.ctx.createPattern(j,"repeat"),s.renderRepeat(M,S,V,q))):bdt(d)&&(B=C6(r,n,[null,null,null]),M=B[0],R=B[1],k=B[2],D=B[3],L=B[4],Z=d.position.length===0?[r7]:d.position,V=Pa(Z[0],D),q=Pa(Z[Z.length-1],L),G=mdt(d,V,q,D,L),K=G[0],ee=G[1],K>0&&ee>0&&(W=s.ctx.createRadialGradient(R+V,k+q,0,R+V,k+q,K),lY(d.stops,K*2).forEach(function(se){return W.addColorStop(se.stop,Gi(se.color))}),s.path(M),s.ctx.fillStyle=W,K!==ee?(P=r.bounds.left+.5*r.bounds.width,U=r.bounds.top+.5*r.bounds.height,z=ee/K,J=1/z,s.ctx.save(),s.ctx.translate(P,U),s.ctx.transform(1,0,0,z,0,0),s.ctx.translate(-P,-U),s.ctx.fillRect(R,J*(k-U)+U,D,L*J),s.ctx.restore()):s.ctx.fill())),te.label=6;case 6:return n--,[2]}})},s=this,o=0,l=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return o<l.length?(c=l[o],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,n,a){return gl(this,void 0,void 0,function(){return $o(this,function(s){return this.path(MY(a,n)),this.ctx.fillStyle=Gi(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,n,a,s){return gl(this,void 0,void 0,function(){var o,l;return $o(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return o=Eht(s,a),this.path(o),this.ctx.fillStyle=Gi(r),this.ctx.fill(),l=Nht(s,a),this.path(l),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return gl(this,void 0,void 0,function(){var n,a,s,o,l,c,u,d,f=this;return $o(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!xm(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],o=Dht(Av(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),xm(n.backgroundColor)||(this.ctx.fillStyle=Gi(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(m){f.ctx.save();var g=sk(r.curves),x=m.inset?0:Iht,v=yht(g,-x+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(f.path(g),f.ctx.clip(),f.mask(v)):(f.mask(g),f.ctx.clip(),f.path(v)),f.ctx.shadowOffsetX=m.offsetX.number+x,f.ctx.shadowOffsetY=m.offsetY.number,f.ctx.shadowColor=Gi(m.color),f.ctx.shadowBlur=m.blur.number,f.ctx.fillStyle=m.inset?Gi(m.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),h.label=2;case 2:l=0,c=0,u=s,h.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!xm(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:h.sent(),h.label=11;case 11:l++,h.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,n,a,s,o){return gl(this,void 0,void 0,function(){var l,c,u,d,f,h,m,g,x,v,y,w,_,T,j,I,j,I;return $o(this,function(E){return this.ctx.save(),l=Cht(s,a),c=MY(s,a),o===2&&(this.path(c),this.ctx.clip()),Lu(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),Lu(c[1])?(f=c[1].end.x,h=c[1].end.y):(f=c[1].x,h=c[1].y),a===0||a===2?m=Math.abs(u-f):m=Math.abs(d-h),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(c.slice(0,2)),g=n<3?n*3:n*2,x=n<3?n*2:n,o===3&&(g=n,x=n),v=!0,m<=g*2?v=!1:m<=g*2+x?(y=m/(2*g+x),g*=y,x*=y):(w=Math.floor((m+x)/(g+x)),_=(m-w*g)/(w-1),T=(m-(w+1)*g)/w,x=T<=0||Math.abs(x-_)<Math.abs(x-T)?_:T),v&&(o===3?this.ctx.setLineDash([0,g+x]):this.ctx.setLineDash([g,x])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Gi(r),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(Lu(c[0])&&(j=c[3],I=c[0],this.ctx.beginPath(),this.formatPath([new sr(j.end.x,j.end.y),new sr(I.start.x,I.start.y)]),this.ctx.stroke()),Lu(c[1])&&(j=c[1],I=c[2],this.ctx.beginPath(),this.formatPath([new sr(j.end.x,j.end.y),new sr(I.start.x,I.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return gl(this,void 0,void 0,function(){var n;return $o(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Gi(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=wht(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(Xfe),Oht=function(e){return e instanceof Ffe||e instanceof Ife?!0:e instanceof i7&&e.type!==rk&&e.type!==tk},Dht=function(e,t){switch(e){case 0:return sk(t);case 2:return pht(t);case 1:default:return ik(t)}},Pht=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},Rht=["-apple-system","system-ui"],Lht=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return Rht.indexOf(t)===-1}):e},Mht=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return t.prototype.render=function(r){return gl(this,void 0,void 0,function(){var n,a;return $o(this,function(s){switch(s.label){case 0:return n=ID(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,Uht(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Gi(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(Xfe),Uht=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Qht=function(){function e(t){var r=t.id,n=t.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,UC([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,UC([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,UC([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,UC([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),Hht=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new Qht({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new lht(this,t)}return e.instanceCount=1,e}(),MD=function(e,t){return t===void 0&&(t={}),Vht(e,t)};typeof window<"u"&&zfe.setContext(window);var Vht=function(e,t){return gl(void 0,void 0,void 0,function(){var r,n,a,s,o,l,c,u,d,f,h,m,g,x,v,y,w,_,T,j,E,I,E,S,B,M,R,k,D,L,Z,V,q,G,K,ee,W,P,U,z;return $o(this,function(J){switch(J.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(S=t.allowTaint)!==null&&S!==void 0?S:!1,imageTimeout:(B=t.imageTimeout)!==null&&B!==void 0?B:15e3,proxy:t.proxy,useCORS:(M=t.useCORS)!==null&&M!==void 0?M:!1},s=gD({logging:(R=t.logging)!==null&&R!==void 0?R:!0,cache:t.cache},a),o={windowWidth:(k=t.windowWidth)!==null&&k!==void 0?k:n.innerWidth,windowHeight:(D=t.windowHeight)!==null&&D!==void 0?D:n.innerHeight,scrollX:(L=t.scrollX)!==null&&L!==void 0?L:n.pageXOffset,scrollY:(Z=t.scrollY)!==null&&Z!==void 0?Z:n.pageYOffset},l=new Ph(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),c=new Hht(s,l),u=(V=t.foreignObjectRendering)!==null&&V!==void 0?V:!1,d={allowTaint:(q=t.allowTaint)!==null&&q!==void 0?q:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),f=new PY(c,e,d),h=f.clonedReferenceElement,h?[4,f.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=J.sent(),g=o7(h)||$At(h)?yct(h.ownerDocument):vj(c,h),x=g.width,v=g.height,y=g.left,w=g.top,_=zht(c,h,t.backgroundColor),T={canvas:t.canvas,backgroundColor:_,scale:(K=(G=t.scale)!==null&&G!==void 0?G:n.devicePixelRatio)!==null&&K!==void 0?K:1,x:((ee=t.x)!==null&&ee!==void 0?ee:0)+y,y:((W=t.y)!==null&&W!==void 0?W:0)+w,width:(P=t.width)!==null&&P!==void 0?P:Math.ceil(x),height:(U=t.height)!==null&&U!==void 0?U:Math.ceil(v)},u?(c.logger.debug("Document cloned, using foreign object rendering"),E=new Mht(c,T),[4,E.render(h)]):[3,3];case 2:return j=J.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+y+","+w+" with size "+x+"x"+v+" using computed rendering"),c.logger.debug("Starting DOM parsing"),I=Pfe(c,h),_===I.styles.backgroundColor&&(I.styles.backgroundColor=gh.TRANSPARENT),c.logger.debug("Starting renderer for element at "+T.x+","+T.y+" with size "+T.width+"x"+T.height),E=new Fht(c,T),[4,E.render(I)];case 4:j=J.sent(),J.label=5;case 5:return(!((z=t.removeContainer)!==null&&z!==void 0)||z)&&(PY.destroy(m)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,j]}})})},zht=function(e,t,r){var n=t.ownerDocument,a=n.documentElement?Fw(e,getComputedStyle(n.documentElement).backgroundColor):gh.TRANSPARENT,s=n.body?Fw(e,getComputedStyle(n.body).backgroundColor):gh.TRANSPARENT,o=typeof r=="string"?Fw(e,r):r===null?gh.TRANSPARENT:4294967295;return t===n.documentElement?xm(a)?xm(s)?o:s:a:o};const $ht=Object.freeze(Object.defineProperty({__proto__:null,default:MD},Symbol.toStringTag,{value:"Module"})),Ght=e=>{const[t,r]=C.useState(!1),[n,a]=C.useState(null);return C.useEffect(()=>{const s="google-maps-script";if(document.getElementById(s)||window.google){r(!0);return}const o=document.createElement("script");o.id=s,o.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,directions&loading=async`,o.async=!0,o.defer=!0,o.onload=()=>r(!0),o.onerror=()=>a(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(o)},[e]),{isLoaded:t,error:n}},Yfe=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de práctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisión y mentoría"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicación interna"}],qht=["Mecánica Industrial","Mecánica Automotriz"],Kht=()=>({nombre:"",rut:"",direccion:"",contacto:"",email:"",area:"",cupos:1,coordenadas:null,calificaciones:Yfe.map(e=>({...e,score:null})),estudiantesAsignados:[],docenteSupervisor:void 0}),QY=({empresas:e,isLoaded:t,route:r})=>{const n=C.useRef(null),a=C.useRef(null),s=C.useRef([]),o=C.useRef(null),l=e.filter(c=>{var u,d;return((u=c.coordenadas)==null?void 0:u.lat)&&((d=c.coordenadas)==null?void 0:d.lng)});return C.useEffect(()=>{!t||!n.current||!window.google||(a.current||(a.current=new window.google.maps.Map(n.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11})),o.current||(o.current=new window.google.maps.DirectionsRenderer),s.current.forEach(c=>c.setMap(null)),s.current=[],o.current.setMap(null),r?(o.current.setMap(a.current),o.current.setDirections(r)):l.forEach(c=>{const u=new window.google.maps.Marker({position:{lat:c.coordenadas.lat,lng:c.coordenadas.lng},map:a.current,title:c.nombre}),d=new window.google.maps.InfoWindow({content:`<div style="font-weight: bold;">${c.nombre}</div><div>${c.direccion}</div>`});u.addListener("click",()=>{d.open(a.current,u)}),s.current.push(u)}))},[l,t,r]),i.jsxs("div",{className:"relative",id:"map-container-for-pdf",children:[i.jsx("div",{ref:n,className:"h-[600px] w-full rounded-lg border"}),!r&&l.length===0&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:i.jsx("div",{className:"text-center p-6",children:i.jsx("p",{className:"text-gray-600 text-lg",children:"📍 No hay empresas geo-localizadas"})})})]})},Wht=({route:e,travelMode:t})=>{const a=t==="TRANSIT"?45:30,s=e.routes[0].legs.reduce((f,h)=>{var m;return f+(((m=h.duration)==null?void 0:m.value)||0)},0),l=(e.routes[0].legs.length>1?e.routes[0].legs.length-1:0)*a*60,c=s+l,u=e.routes[0].legs.reduce((f,h)=>{var m;return f+(((m=h.distance)==null?void 0:m.value)||0)},0),d=t==="DRIVING"?u/1e3/12*1300:0;return i.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-slate-50",id:"route-details-for-pdf",children:[i.jsx("h3",{className:"text-xl font-bold mb-3",children:"Detalles de la Ruta"}),i.jsx("div",{className:"space-y-4",children:e.routes[0].legs.map((f,h)=>{var m,g,x;return i.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("h4",{className:"font-bold text-lg",children:["Tramo ",h+1,": ",f.start_address.split(",")[0]," → ",f.end_address.split(",")[0]]}),i.jsxs("div",{className:"text-sm text-gray-600",children:[(m=f.duration)==null?void 0:m.text," • ",(g=f.distance)==null?void 0:g.text]})]}),t==="TRANSIT"&&i.jsx("div",{className:"space-y-3",children:(x=f.steps)==null?void 0:x.map((v,y)=>v.transit&&i.jsxs("div",{className:"flex items-start gap-2 text-sm py-1",children:[i.jsx("span",{className:"text-lg",children:"🚌"}),i.jsx("span",{dangerouslySetInnerHTML:{__html:v.instructions}})]},y))})]},h)})}),i.jsxs("div",{className:"mt-4 pt-4 border-t font-bold text-right",children:[i.jsxs("p",{children:["Tiempo de viaje: ",Math.round(s/60)," min"]}),i.jsxs("p",{children:["Tiempo en paradas: ",Math.round(l/60)," min"]}),i.jsxs("p",{className:"text-lg",children:["Duración Total Estimada: ",Math.round(c/60)," min"]}),i.jsxs("p",{children:["Distancia Total: ",(u/1e3).toFixed(1)," km"]}),t==="DRIVING"&&i.jsxs("p",{className:"text-green-600",children:["Costo Bencina Aprox: $",d.toLocaleString("es-CL",{maximumFractionDigits:0})]})]})]})},HY=async e=>window.google?new Promise(t=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e,fields:["geometry"]},(n,a)=>{var s;a===window.google.maps.places.PlacesServiceStatus.OK&&((s=n==null?void 0:n.geometry)!=null&&s.location)?t({lat:n.geometry.location.lat(),lng:n.geometry.location.lng()}):t(null)})}):null,Xht=({data:e})=>{const t=["#0088FE","#00C49F","#FFBB28","#FF8042"];return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Especialidad"}),i.jsx(ih,{width:"100%",height:300,children:i.jsxs(sM,{children:[i.jsx(Q4,{data:e.porEspecialidad,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0,children:e.porEspecialidad.map((r,n)=>i.jsx(Fm,{fill:t[n%t.length]},`cell-${n}`))}),i.jsx(sh,{})]})})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Supervisor"}),i.jsx(ih,{width:"100%",height:300,children:i.jsxs(N2,{data:e.porSupervisor,layout:"vertical",children:[i.jsx(E2,{strokeDasharray:"3 3"}),i.jsx(Bg,{type:"number"}),i.jsx(Tg,{type:"category",dataKey:"name",width:150}),i.jsx(sh,{}),i.jsx(_b,{dataKey:"value",fill:"#82ca9d",name:"Empresas"})]})})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 lg:col-span-3",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Distribución por Comuna"}),i.jsx(ih,{width:"100%",height:300,children:i.jsxs(N2,{data:e.porComuna,children:[i.jsx(E2,{strokeDasharray:"3 3"}),i.jsx(Bg,{dataKey:"name"}),i.jsx(Tg,{}),i.jsx(sh,{}),i.jsx(_b,{dataKey:"value",fill:"#8884d8",name:"Empresas"})]})})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Calificación por Ámbito"}),i.jsx(ih,{width:"100%",height:300,children:i.jsxs(Xqe,{cx:"50%",cy:"50%",outerRadius:"80%",data:e.calificacionPorAmbito,children:[i.jsx(Eoe,{}),i.jsx(U4,{dataKey:"subject"}),i.jsx(L4,{angle:30,domain:[0,5]}),i.jsx(JL,{name:"Promedio",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),i.jsx(sh,{})]})})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Ranking de Empresas"}),i.jsx("div",{className:"overflow-y-auto max-h-[300px]",children:i.jsx("ul",{className:"space-y-2",children:e.ranking.map((r,n)=>i.jsxs("li",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-50",children:[i.jsxs("span",{className:"font-semibold",children:[n+1,". ",r.nombre]}),i.jsxs("span",{className:"font-bold text-amber-500",children:[r.promedio.toFixed(1)," ★"]})]},r.id))})})]})]})},Yht=()=>{const[e,t]=C.useState([]),[r,n]=C.useState([]),[a,s]=C.useState("list"),[o,l]=C.useState(null),[c,u]=C.useState(!0),[d,f]=C.useState(null),[h,m]=C.useState(null),[g,x]=C.useState(null),[v,y]=C.useState([]),[w,_]=C.useState(null),[T,j]=C.useState(!1),[I,E]=C.useState("DRIVING"),[S,B]=C.useState(""),[M,R]=C.useState([]),k="AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4",{isLoaded:D}=Ght(k);C.useEffect(()=>{u(!0);const ie=got(t),ce=bot(n),de=wot(R);return u(!1),()=>{ie(),ce(),de()}},[]);const L=C.useMemo(()=>{const ie=e.reduce((Se,ke)=>{const ve=ke.area||"Sin especificar";return Se[ve]=(Se[ve]||0)+1,Se},{}),ce=e.reduce((Se,ke)=>{var le;const ve=((le=ke.docenteSupervisor)==null?void 0:le.nombreCompleto)||"Sin asignar";return Se[ve]=(Se[ve]||0)+1,Se},{}),de=e.reduce((Se,ke)=>{const ve=ke.direccion.split(",").map(be=>be.trim()),le=ve.length>1?ve[1]:"Desconocida";return Se[le]=(Se[le]||0)+1,Se},{}),Be=Yfe.map(Se=>{const ke=e.flatMap(le=>{var be;return(be=le.calificaciones.find(Pe=>Pe.elemento===Se.elemento))==null?void 0:be.score}).filter(le=>le!=null),ve=ke.length>0?ke.reduce((le,be)=>le+be,0)/ke.length:0;return{subject:Se.elemento.split(" ")[0],A:ve,fullMark:5}}),ae=e.map(Se=>{const ke=Se.calificaciones.map(le=>le.score).filter(le=>le!=null),ve=ke.length>0?ke.reduce((le,be)=>le+be,0)/ke.length:0;return{...Se,promedio:ve}}).filter(Se=>Se.promedio>0).sort((Se,ke)=>ke.promedio-Se.promedio);return{porEspecialidad:Object.entries(ie).map(([Se,ke])=>({name:Se,value:ke})),porSupervisor:Object.entries(ce).map(([Se,ke])=>({name:Se,value:ke})),porComuna:Object.entries(de).map(([Se,ke])=>({name:Se,value:ke})),calificacionPorAmbito:Be,ranking:ae}},[e]),Z=async()=>{if(o)try{await xot(o),s("list"),l(null),f(null)}catch{alert("No se pudo guardar la empresa.")}},V=async ie=>{window.confirm("¿Está seguro de eliminar esta empresa?")&&await vot(ie)},q=(ie,ce)=>{l(de=>de?{...de,[ie]:ce}:null)},G=async ie=>{var ce;if(f(ie),(ce=ie==null?void 0:ie.value)!=null&&ce.place_id&&D){const de=await HY(ie.value.place_id);q("direccion",ie.label||""),q("coordenadas",de)}else q("direccion",(ie==null?void 0:ie.label)||"")},K=ie=>{l(JSON.parse(JSON.stringify(ie))),ie.direccion&&f({label:ie.direccion,value:{description:ie.direccion}}),s("form")},ee=async ie=>{var ce;if(m(ie),(ce=ie==null?void 0:ie.value)!=null&&ce.place_id&&D){const de=await HY(ie.value.place_id);x(de)}},W=ie=>{y(ce=>ce.some(de=>de.id===ie.id)?ce.filter(de=>de.id!==ie.id):[...ce,ie])},P=()=>{if(!g||v.length===0||!D)return;j(!0);const ie=new window.google.maps.DirectionsService,ce=v.filter(de=>de.coordenadas).map(de=>({location:de.coordenadas,stopover:!0}));ie.route({origin:g,destination:g,waypoints:ce,optimizeWaypoints:!0,travelMode:window.google.maps.TravelMode[I]},(de,Be)=>{j(!1),Be===window.google.maps.DirectionsStatus.OK&&de?_(de):alert("No se pudo calcular la ruta: "+Be)})},U=()=>{_(null),m(null),x(null),y([]),B("")},z=async()=>{if(!S||!h||!g||v.length===0){alert("Por favor, asigna un nombre a la ruta y asegúrate de tener un punto de partida y empresas seleccionadas.");return}const ie={nombre:S,startPoint:{label:h.label,coords:g},empresas:v.map(ce=>({id:ce.id,nombre:ce.nombre,coordenadas:ce.coordenadas})),travelMode:I};try{await yot(ie),alert("Ruta guardada con éxito."),s("saved-routes")}catch{alert("Error al guardar la ruta.")}},J=async()=>{const ie=document.getElementById("map-container-for-pdf"),ce=document.getElementById("route-details-for-pdf");if(!ie||!ce)return;const de=new vr("p","mm","a4"),Be=de.internal.pageSize.getWidth();de.text(`Ruta de Supervisión: ${S||"Sin nombre"}`,10,15),de.setFontSize(10),de.text(`Fecha: ${new Date().toLocaleDateString("es-CL")}`,10,22);const Se=(await MD(ie,{useCORS:!0})).toDataURL("image/png");de.addImage(Se,"PNG",10,30,Be-20,100);const ve=(await MD(ce)).toDataURL("image/png"),le=de.getImageProperties(ve),be=le.height*(Be-20)/le.width;de.addImage(ve,"PNG",10,135,Be-20,be),de.save(`ruta-${S||"supervision"}.pdf`)},te=ie=>{m({label:ie.startPoint.label,value:null}),x(ie.startPoint.coords),y(ie.empresas),E(ie.travelMode),B(ie.nombre),s("route")},se=async ie=>{window.confirm("¿Estás seguro de que quieres eliminar esta ruta guardada?")&&(await Eot(ie),alert("Ruta eliminada."))};return c?i.jsx("div",{className:"text-center p-8",children:"Cargando..."}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Gestión de Empresas"}),i.jsxs("div",{className:"flex items-center gap-4",children:[a!=="list"&&i.jsx("button",{onClick:()=>{s("list"),f(null),l(null),U()},className:"font-semibold hover:text-blue-600",children:"← Volver al listado"}),a==="list"&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>s("dashboard"),title:"Dashboard",className:"bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[i.jsx(fte,{size:18})," Dashboard"]}),i.jsx("button",{onClick:()=>s("saved-routes"),title:"Rutas Guardadas",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Rutas Guardadas"}),i.jsx("button",{onClick:()=>s("route"),title:"Ruta de Supervisión",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ruta de Supervisión"}),i.jsx("button",{onClick:()=>s("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:"🗺️"}),i.jsx("button",{onClick:()=>{l(Kht()),s("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),a==="dashboard"&&i.jsx(Xht,{data:L}),a==="saved-routes"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Rutas de Supervisión Guardadas"}),i.jsx("div",{className:"space-y-3",children:M.length===0?i.jsx("p",{className:"text-gray-500",children:"No tienes rutas guardadas."}):M.map(ie=>i.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold",children:ie.nombre}),i.jsxs("p",{className:"text-sm text-slate-500",children:[ie.empresas.length," paradas"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>te(ie),className:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm",children:"Cargar"}),i.jsx("button",{onClick:()=>se(ie.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm",children:"Eliminar"})]})]},ie.id))})]}),a==="route"&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Planificador de Ruta de Supervisión"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1. Ingresa un nombre para la ruta"}),i.jsx("input",{type:"text",value:S,onChange:ie=>B(ie.target.value),placeholder:"Ej: Supervisión Zona Norte",className:"input-style w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2. Ingresa el punto de partida"}),i.jsx(QX,{apiKey:k,selectProps:{value:h,onChange:ee,placeholder:"Buscar dirección de partida..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Elige el modo de transporte"}),i.jsxs("div",{className:"flex gap-4 rounded-lg bg-slate-100 p-1",children:[i.jsx("button",{onClick:()=>E("DRIVING"),className:`w-full py-2 rounded-md transition ${I==="DRIVING"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Automóvil"}),i.jsx("button",{onClick:()=>E("TRANSIT"),className:`w-full py-2 rounded-md transition ${I==="TRANSIT"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Transporte Público"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"4. Selecciona las empresas a visitar"}),i.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2 space-y-2",children:e.filter(ie=>ie.coordenadas).map(ie=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:`route-${ie.id}`,checked:v.some(ce=>ce.id===ie.id),onChange:()=>W(ie),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i.jsx("label",{htmlFor:`route-${ie.id}`,className:"ml-3 text-sm text-gray-700",children:ie.nombre})]},ie.id))})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("button",{onClick:P,disabled:!g||v.length===0||T,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:T?"Calculando...":"Visualizar Ruta"}),i.jsx("button",{onClick:z,disabled:!S||!g||v.length===0,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Guardar Ruta"}),i.jsx("button",{onClick:J,disabled:!w,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Exportar PDF"}),i.jsx("button",{onClick:U,className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors",children:"Limpiar"})]})]}),i.jsx("div",{children:i.jsx(QY,{empresas:v,isLoaded:D,route:w})})]}),w&&i.jsx(Wht,{route:w,travelMode:I})]}),a==="map"&&i.jsx(QY,{empresas:e,isLoaded:D}),a==="list"&&i.jsx("div",{className:"space-y-3",children:e.length===0?i.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas."}):e.map(ie=>{var ce;return i.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg",children:ie.nombre}),i.jsxs("p",{className:"text-sm text-slate-500",children:[ie.rut," | ",ie.direccion]}),i.jsxs("p",{className:"text-sm text-slate-600",children:["Área: ",ie.area||"No especificada"," | Cupos: ",ie.cupos," | Supervisor: ",((ce=ie.docenteSupervisor)==null?void 0:ce.nombreCompleto)||"Ninguno"]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:()=>K(ie),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),i.jsx("button",{onClick:()=>V(ie.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},ie.id)})}),a==="form"&&o&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"id"in o?"Editando Empresa":"Nueva Empresa"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(kwe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{value:o.nombre,onChange:ie=>q("nombre",ie.target.value),placeholder:"Nombre Empresa",className:"input-style pl-10",required:!0})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(v2e,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{value:o.rut,onChange:ie=>q("rut",ie.target.value),placeholder:"RUT Empresa",className:"input-style pl-10",required:!0})]}),i.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[i.jsx(S_,{className:"absolute left-3 top-5 -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),i.jsx("div",{className:"w-full pl-10",children:i.jsx(QX,{apiKey:k,selectProps:{value:d,onChange:G,placeholder:"Buscar dirección..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(Yw,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{value:o.contacto,onChange:ie=>q("contacto",ie.target.value),placeholder:"Contacto",className:"input-style pl-10"})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(R2e,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{type:"email",value:o.email||"",onChange:ie=>q("email",ie.target.value),placeholder:"Correo electrónico",className:"input-style pl-10"})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(_o,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsx("input",{type:"number",value:o.cupos,onChange:ie=>q("cupos",parseInt(ie.target.value)||1),placeholder:"N° de cupos",className:"input-style pl-10",min:"1"})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(N_,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsxs("select",{value:o.area||"",onChange:ie=>q("area",ie.target.value),className:"input-style pl-10 w-full",children:[i.jsx("option",{value:"",disabled:!0,children:"Seleccione un área"}),qht.map(ie=>i.jsx("option",{value:ie,children:ie},ie))]})]}),i.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[i.jsx(Yw,{className:"absolute left-3 w-5 h-5 text-slate-400"}),i.jsxs("select",{value:o.docenteSupervisor?JSON.stringify(o.docenteSupervisor):"",onChange:ie=>{const ce=ie.target.value;q("docenteSupervisor",ce?JSON.parse(ce):void 0)},className:"input-style pl-10 w-full",children:[i.jsx("option",{value:"",children:"Sin supervisor asignado"}),r.map(ie=>i.jsx("option",{value:JSON.stringify({id:ie.id,nombre:ie.nombreCompleto}),children:ie.nombreCompleto},ie.id))]})]})]}),i.jsxs("div",{className:"space-y-4 pt-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Evaluación de la Empresa"}),o.calificaciones.map((ie,ce)=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[i.jsx(EEe,{className:"w-5 h-5 text-slate-400"}),i.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700",children:ie.elemento}),i.jsxs("select",{value:ie.score||"",onChange:de=>{const Be=[...o.calificaciones];Be[ce].score=de.target.value?parseInt(de.target.value):null,q("calificaciones",Be)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[i.jsx("option",{value:"",children:"Sin calificar"}),[1,2,3,4,5].map(de=>i.jsx("option",{value:de,children:de},de))]})]},ce))]}),i.jsx("div",{className:"pt-6",children:i.jsx("button",{onClick:Z,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition-colors",disabled:!o.nombre||!o.rut,children:"Guardar Empresa"})})]})]})},l7="dpd_actividades",Jfe="dpd_respuestas",Jht="usuarios";function Zht(e,{includeArchived:t=!1}={}){const r=pt(lt,l7),n=t?Vt(r,cr("createdAt","desc")):Vt(r,wr("isArchived","==",!1),cr("createdAt","desc"));return hr(n,a=>{const s=a.docs.map(o=>({id:o.id,...o.data()}));e(s)})}async function e0t(e){const t=pt(lt,l7);return(await an(t,{...e,isArchived:!1,createdAt:za(),updatedAt:za()})).id}async function t0t(e){const t=rr(lt,l7,e);await ka(t)}function r0t(e,t){const r=pt(lt,Jfe),n=Vt(r,wr("activityId","==",e),cr("createdAt","desc"));return hr(n,a=>{const s=a.docs.map(o=>({id:o.id,...o.data()}));t(s)})}async function n0t(e){const t=pt(lt,Jfe);return(await an(t,{...e,createdAt:za()})).id}function a0t(e,t){const r=pt(lt,Jht),n=Vt(r,wr("profile","in",e));return hr(n,a=>{const s=a.docs.map(o=>{const l=o.data();return{id:o.id,nombre:(l==null?void 0:l.displayName)||(l==null?void 0:l.name)||(l==null?void 0:l.email)||"Sin nombre",profile:l==null?void 0:l.profile,email:l==null?void 0:l.email}});t(s)})}function Zfe(e){return(e||"").trim().split(/\s+/).filter(Boolean).length}const s0t=[{model:"gemini-1.5-pro",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}},{model:"gemini-2.5-flash-lite",generationConfig:{temperature:.7,maxOutputTokens:1024}}],eAe=()=>{const e="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";try{return new Ps(e)}catch(t){return console.error("Error al inicializar Gemini:",t),null}};async function i0t(e,t){try{const r=e.getGenerativeModel(t);return await r.generateContent("test"),r}catch(r){return console.warn(`Modelo ${t.model} no disponible:`,r),null}}async function L2(){const e=eAe();if(!e)return null;for(const t of s0t){const r=await i0t(e,t);if(r)return console.log(`Usando modelo ${t.model}`),r}return console.error("No se encontró ningún modelo de Gemini disponible"),null}function tAe(e){try{const t=e.trim().replace(/^```json/i,"").replace(/^```/i,"").replace(/```$/i,"");return JSON.parse(t)}catch{return null}}function o0t(e){const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t}async function l0t(e,t=3){var n;const r=await L2();if(!r)return _6(e,t);try{const a=`Genera ${t} preguntas de selección múltiple sobre el tema "${e}".
    Para cada pregunta, proporciona:
    1. Un enunciado claro y conciso
    2. 4 opciones de respuesta plausibles
    
    Devuelve las preguntas en formato JSON como este:
    {
      "preguntas": [
        {
          "enunciado": "¿Pregunta 1?",
          "opciones": ["Opción 1", "Opción 2", "Opción 3", "Opción 4"]
        }
      ]
    }`,o=(await r.generateContent(a)).response.text(),l=tAe(o);return(n=l==null?void 0:l.preguntas)!=null&&n.length?l.preguntas.slice(0,t):(console.warn("Formato inesperado de respuesta:",o),_6(e,t))}catch(a){return console.error("Error al generar preguntas:",a),_6(e,t)}}async function c0t(e,t=30){var n;const r=await L2();if(!r)return S6(e);try{const a=e.filter(u=>u&&u.trim());if(a.length===0)return[];const s=`Analiza estas respuestas y extrae los conceptos clave con su relevancia:
    ${a.join(`
---
`)}
    
    Responde en formato JSON:
    {
      "keywords": [
        { "keyword": "concepto1", "score": 0.9 },
        { "keyword": "concepto2", "score": 0.8 }
      ]
    }
    
    Incluye hasta ${t} conceptos más relevantes.`,l=(await r.generateContent(s)).response.text(),c=tAe(l);return(n=c==null?void 0:c.keywords)!=null&&n.length?c.keywords.filter(u=>u.keyword&&typeof u.score=="number").slice(0,t):(console.warn("Formato inesperado de respuesta:",l),S6(e))}catch(a){return console.error("Error al analizar respuestas:",a),S6(e)}}function _6(e,t){const r=["Totalmente de acuerdo","De acuerdo","Neutral","En desacuerdo","Totalmente en desacuerdo"];return Array(t).fill(null).map((n,a)=>({enunciado:`Pregunta ${a+1} sobre ${e}`,opciones:o0t(r).slice(0,4)}))}function S6(e){const t=new Set(["el","la","los","las","un","una","unos","unas","de","del","a","ante","con","en","para","por","sobre","y","o","pero","si","no","que","cual","quien","como"]),r={},n=e.join(" ").toLowerCase().split(/\W+/).filter(a=>a.length>3&&!t.has(a));for(const a of n)r[a]=(r[a]||0)+1;return Object.entries(r).sort(([,a],[,s])=>s-a).slice(0,20).map(([a,s])=>({keyword:a,score:Math.min(1,s/n.length)}))}async function u0t(){const e=eAe();if(!e)return null;const t={model:"gemini-1.5-pro",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}};try{const r=e.getGenerativeModel(t);return await r.generateContent("test"),console.log(`Usando modelo optimizado: ${t.model}`),r}catch(r){return console.warn("Modelo Pro no disponible, usando fallback:",r),L2()}}async function d0t(e,t=2,r=!0){const n=e.substring(0,50).replace(/\n/g," ")+"...";console.log(`Iniciando generación con IA. Prompt: "${n}"`),console.log(`Configuración: maxRetries=${t}, useProModel=${r}`);let a;try{if(r?(console.log("Intentando usar modelo Pro prioritariamente..."),a=await u0t(),a||(console.warn("Modelo Pro no disponible, intentando fallback a modelos alternativos"),a=await L2())):a=await L2(),!a)throw console.error("No se pudo inicializar ningún modelo de Gemini"),new Error("No se encontró un modelo de Gemini disponible. Verifique su conexión a internet y la API key.")}catch(u){throw console.error("Error al inicializar modelo de Gemini:",u),new Error(`Error al inicializar el modelo de IA: ${u.message}`)}let s=0,o,l="",c=0;for(;s<=t;){try{console.log(`Intento ${s+1}/${t+1} de generación con IA`);const u=e+`

IMPORTANTE: Devuelve SOLO el JSON estructurado sin comentarios adicionales. El JSON debe ser válido y parseable.`,d=await a.generateContent(u);if(d!=null&&d.response&&typeof d.response.text=="function"){const f=d.response.text();if(f&&f.length>100){if(console.log(`Respuesta generada exitosamente (${f.length} caracteres)`),f.includes("{")&&f.includes("}")||f.includes("[")&&f.includes("]"))return console.log("La respuesta contiene estructuras JSON"),f;if(console.warn("La respuesta no parece contener JSON válido"),f.length>c&&(l=f,c=f.length),s===t)return console.log("Usando la mejor respuesta disponible en el último intento"),l}else console.warn("Respuesta de IA demasiado corta, reintentando...")}else if(d){const f=typeof d=="string"?d:JSON.stringify(d);return console.warn("Formato de respuesta inesperado, usando fallback a string"),f}else console.warn("No se recibió respuesta válida del modelo")}catch(u){console.error(`Error en intento ${s+1}:`,u),o=u,u.message&&(u.message.includes("token")||u.message.includes("length")||u.message.includes("limit"))&&(console.log("Error relacionado con límites de tokens, intentando simplificar el prompt"),e=e.substring(0,Math.floor(e.length*.75)))}if(s++,s<=t){const u=Math.min(1e3*Math.pow(2,s),8e3);console.log(`Esperando ${u}ms antes de reintentar...`),await new Promise(d=>setTimeout(d,u))}}if(l)return console.log("Devolviendo la mejor respuesta disponible después de agotar reintentos"),l;throw console.error(`Todos los intentos de generación fallaron después de ${t+1} intentos`),o||new Error("No se pudo generar contenido después de múltiples intentos. Por favor, intente nuevamente.")}const lk=500,VY=()=>({titulo:"",dimension:"Liderazgo Curricular",subdimension:"Planificación y organización del currículo",creadorPerfil:"PROFESORADO",creadorId:"",creadorNombre:"",preguntas:[],aiTema:"",aiCantidad:3}),Fy=at.memo(({title:e,icon:t,right:r,children:n})=>i.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-4 md:p-6 shadow-sm",children:[i.jsxs("header",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[t,e]}),r]}),n]})),f0t=at.memo(({value:e,onChange:t,canCreate:r})=>{const n=(a,s)=>i.jsx("button",{onClick:()=>t(a),className:`px-3 py-1.5 rounded-lg text-sm border transition ${e===a?"bg-indigo-600 text-white border-indigo-600":"bg-white hover:bg-indigo-50"}`,disabled:a==="crear"&&!r,title:a==="crear"&&!r?"Tu perfil no crea actividades":"",children:s},a);return i.jsxs("div",{className:"flex items-center gap-2",children:[n("responder","Responder"),n("dashboard","Dashboard"),n("crear","Nueva actividad")]})}),A0t=at.memo(({items:e,selectedId:t,onSelect:r,canDelete:n,onDelete:a})=>e.length?i.jsx("ul",{className:"space-y-2",children:e.map(s=>{const o=s.id===t;return i.jsxs("li",{children:[i.jsxs("button",{onClick:()=>r(s.id),className:`w-full flex items-center justify-between gap-2 rounded-xl border px-3 py-2 text-left transition ${o?"border-indigo-600 bg-indigo-600 text-white":"border-slate-200 bg-white hover:bg-indigo-50"}`,title:`${s.titulo} • ${s.dimension} / ${s.subdimension}`,children:[i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(xg,{className:"w-4 h-4"}),i.jsx("span",{className:"font-medium",children:s.titulo})]}),i.jsx(aR,{className:"w-4 h-4 opacity-70"})]}),n(s)&&i.jsx("button",{onClick:()=>a(s.id,s.titulo),className:"mt-1 text-xs text-red-600 hover:underline",title:"Eliminar actividad",children:"Eliminar"})]},s.id)})}):i.jsxs("div",{className:"p-4 text-sm text-slate-500 flex items-center gap-2",children:[i.jsx(A2e,{className:"w-4 h-4"})," Aún no hay actividades creadas."]})),k6=at.memo(({label:e,value:t,pill:r})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-slate-500",children:[e,":"]}),r?i.jsx("span",{className:"px-2 py-0.5 rounded-full bg-indigo-50 text-indigo-700 text-xs",children:t}):i.jsx("span",{className:"font-medium",children:t})]})),h0t=at.memo(({label:e,value:t,total:r=0})=>{const n=r>0?t/r*100:t>0?100:0,a=n>=75?"from-emerald-500":n>=50?"from-blue-500":n>=25?"from-amber-500":"from-rose-500";return i.jsxs("div",{className:"relative mt-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),i.jsx("span",{className:"text-sm font-medium text-slate-700",children:t})]}),i.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5",children:i.jsx("div",{className:`h-2.5 rounded-full bg-gradient-to-r ${a} to-transparent transition-all duration-500`,style:{width:`${Math.min(100,n)}%`}})})]})}),m0t=at.memo(({option:e,options:t,onChangeText:r,onDelete:n})=>{const a=C.useCallback(o=>r(e.id,o.target.value),[e.id,r]),s=C.useCallback(()=>n(e.id),[e.id,n]);return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{value:e.text,onChange:a,className:"flex-1 border rounded-lg px-3 py-1.5",placeholder:`Opción ${t.findIndex(o=>o.id===e.id)+1}`}),i.jsx("button",{onClick:s,className:"text-red-600 hover:text-red-700",title:"Eliminar opción",children:i.jsx(Is,{className:"w-4 h-4"})})]})}),p0t=at.memo(({q:e,index:t,onRemove:r,onPatch:n})=>{const a=C.useCallback(f=>n(e.id,{enunciado:f.target.value}),[e.id,n]),s=C.useCallback(f=>n(e.id,{maxPalabras:parseInt(f.target.value||"500")}),[e.id,n]),o=C.useCallback(f=>n(e.id,{multiple:f.target.checked}),[e.id,n]),l=C.useCallback(()=>n(e.id,{opciones:[...e.opciones,{id:crypto.randomUUID(),text:""}]}),[e.id,e.opciones,n]),c=C.useCallback((f,h)=>{n(e.id,{opciones:e.opciones.map(m=>m.id===f?{...m,text:h}:m)})},[e.id,e.opciones,n]),u=C.useCallback(f=>n(e.id,{opciones:e.opciones.filter(h=>h.id!==f)}),[e.id,e.opciones,n]),d=C.useCallback(()=>r(e.id),[e.id,r]);return i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("span",{className:"text-sm text-slate-600",children:["#",t+1," • ",e.tipo==="abierta"?"Abierta":"Selección múltiple"]}),i.jsx("button",{onClick:d,className:"text-red-600 hover:text-red-700",title:"Eliminar",children:i.jsx(Is,{className:"w-4 h-4"})})]}),i.jsx("input",{value:e.enunciado,onChange:a,className:"w-full border rounded-lg px-3 py-2 mb-2",placeholder:"Escribe el enunciado de la pregunta"}),e.tipo==="abierta"?i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("label",{className:"text-sm",children:"Máx. palabras"}),i.jsx("input",{type:"number",min:50,max:1e3,value:e.maxPalabras||lk,onChange:s,className:"w-24 border rounded-lg px-2 py-1"})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:e.multiple??!0,onChange:o})," Permitir selección múltiple"]}),e.opciones.map(f=>i.jsx(m0t,{option:f,options:e.opciones,onChangeText:c,onDelete:u},f.id)),i.jsx("button",{onClick:l,className:"text-sm text-sky-700 hover:underline",children:"+ Añadir opción"})]})]})}),g0t=at.memo(({q:e,respuestas:t,onChange:r})=>{var o,l;const n=C.useCallback(c=>r(e,c.target.value),[e,r]);if(e.tipo==="abierta"){const c=((o=t[e.id])==null?void 0:o.valorTexto)||"";return i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),i.jsx("textarea",{rows:5,value:c,onChange:n,placeholder:`Máximo ${e.maxPalabras||lk} palabras…`,className:"w-full border rounded-lg px-3 py-2"}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[Zfe(c)," / ",e.maxPalabras||lk," palabras"]})]})}const a=((l=t[e.id])==null?void 0:l.seleccionados)||[],s=c=>{let u=new Set(a);a.includes(c)?u.delete(c):e.multiple?u.add(c):u=new Set([c]),r(e,Array.from(u))};return i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),i.jsx("div",{className:"flex flex-col gap-2",children:(e.opciones||[]).map((c,u)=>{const d=a.includes(c);return i.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:e.multiple?"checkbox":"radio",name:e.multiple?`answer-${e.id}[]`:`answer-${e.id}`,checked:d,onChange:()=>s(c)}),i.jsx("span",{children:c})]},`${e.id}-${u}`)})})]})}),x0t=({currentUser:e})=>{var P;const[t,r]=C.useState("responder"),[n,a]=C.useState([]),[s,o]=C.useState(""),[l,c]=C.useState(""),[u,d]=C.useState(VY()),f=C.useCallback(U=>d(z=>({...z,...U})),[]),[h,m]=C.useState([]),[g,x]=C.useState({}),[v,y]=C.useState([]),w=dH.includes(e==null?void 0:e.profile)||(e==null?void 0:e.isAdmin);C.useEffect(()=>{const U=Zht(z=>{a(z),o(J=>{var te;return J||(((te=z[0])==null?void 0:te.id)??"")})});return()=>U()},[]),C.useEffect(()=>{const U=a0t(["PROFESORADO","SUBDIRECCION"],z=>{m(z),d(J=>{if(J.creadorId)return J;const te=z.find(se=>se.id===(e==null?void 0:e.uid));return te?{...J,creadorId:te.id,creadorNombre:te.nombre,creadorPerfil:te.profile||J.creadorPerfil}:J})});return()=>U()},[e]),C.useEffect(()=>{if(!s)return;const U=r0t(s,y);return()=>U()},[s]);const _=C.useMemo(()=>n.find(U=>U.id===s),[n,s]);C.useMemo(()=>JA[u.dimension]||[],[u.dimension]),C.useEffect(()=>{d(U=>{const z=JA[U.dimension]||[],J=z.includes(U.subdimension)?U.subdimension:z[0]||"";return J===U.subdimension?U:{...U,subdimension:J}})},[u.dimension]);const T=C.useCallback(()=>{const U={id:crypto.randomUUID(),tipo:"abierta",enunciado:"Escribe aquí tu pregunta abierta",maxPalabras:lk};d(z=>({...z,preguntas:[...z.preguntas,U]}))},[]),j=C.useCallback(()=>{const U={id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:"Selecciona la(s) opción(es) que corresponda(n)",opciones:[{id:crypto.randomUUID(),text:"Opción 1"},{id:crypto.randomUUID(),text:"Opción 2"},{id:crypto.randomUUID(),text:"Opción 3"},{id:crypto.randomUUID(),text:"Opción 4"}],multiple:!0};d(z=>({...z,preguntas:[...z.preguntas,U]}))},[]),I=C.useCallback((U,z)=>{d(J=>({...J,preguntas:J.preguntas.map(te=>te.id===U?{...te,...z}:te)}))},[]),E=C.useCallback(U=>{d(z=>({...z,preguntas:z.preguntas.filter(J=>J.id!==U)}))},[]),[S,B]=C.useState(!1),M=C.useCallback(async()=>{if(!(!u.aiTema||u.aiCantidad<1)){B(!0);try{const z=(await l0t(u.aiTema,u.aiCantidad)).map(J=>({id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:J.enunciado,opciones:J.opciones.slice(0,5).map(te=>({id:crypto.randomUUID(),text:te})),multiple:!0}));d(J=>({...J,preguntas:[...J.preguntas,...z]}))}finally{B(!1)}}},[u.aiTema,u.aiCantidad]),[R,k]=C.useState([]);C.useEffect(()=>{(async()=>{var J;if(!_)return;const z=[];for(const te of v)if(te.respuestas)for(const[se,ie]of Object.entries(te.respuestas)){const ce=_.preguntas.find(Be=>Be.id===se);if(!ce||ce.tipo!=="abierta")continue;const de=ie;de.tipo==="abierta"&&((J=de.valorTexto)!=null&&J.trim())&&z.push(de.valorTexto.trim())}if(console.log("Respuestas abiertas encontradas:",z.length),z.length>0)try{const te=await c0t(z,30);console.log("Keywords generadas:",te),k(te)}catch(te){console.error("Error al extraer keywords:",te),k([])}else k([])})()},[_,v]);const D=C.useMemo(()=>{if(!_)return{};const U={};for(const z of _.preguntas)z.tipo==="seleccion_multiple"&&(U[z.id]={},(z.opciones||[]).forEach(J=>U[z.id][J]=0));for(const z of v)for(const[J,te]of Object.entries(z.respuestas||{})){const se=te;if((se==null?void 0:se.tipo)==="seleccion_multiple")for(const ie of se.seleccionados||[])U[J]||(U[J]={}),U[J][ie]=(U[J][ie]||0)+1}return U},[_,v]),L=C.useCallback(U=>U.map(z=>z.tipo==="abierta"?z:{...z,opciones:z.opciones.map(J=>J.text)}),[]),Z=C.useCallback(()=>d(VY()),[]),V=C.useCallback(async()=>{if(!u.titulo.trim())return alert("Debes ingresar un título");if(!u.creadorId)return alert("Debes seleccionar un creador");const U={titulo:u.titulo,dimension:u.dimension,subdimension:u.subdimension,creadorId:u.creadorId,creadorNombre:u.creadorNombre,creadorPerfil:u.creadorPerfil,preguntas:L(u.preguntas)},z=await e0t(U);Z(),o(z),r("responder")},[u,L,Z]),q=C.useCallback(async(U,z)=>{var te;if(window.confirm(`¿Eliminar "${z}"?
Se eliminarán la actividad, sus preguntas y respuestas. Esta acción no se puede deshacer.`)){if(await t0t(U),s===U){const se=n.filter(ie=>ie.id!==U);o(((te=se[0])==null?void 0:te.id)||""),se.length||r("crear")}alert("Actividad eliminada.")}},[s,n]),G=C.useCallback(async()=>{if(!_||!v.length)return;const U=new vr("p","mm","a4"),z=20;let J=z;U.setFontSize(20),U.text(`Informe: ${_.titulo}`,z,J),J+=10,U.setFontSize(12),U.text(`Dimensión: ${_.dimension}`,z,J+=10),U.text(`Subdimensión: ${_.subdimension}`,z,J+=7),U.text(`Creador: ${_.creadorNombre} (${_.creadorPerfil})`,z,J+=7),U.text(`Total de respuestas: ${v.length}`,z,J+=7),J+=10;for(const te of _.preguntas){if(J>250&&(U.addPage(),J=z),U.setFontSize(14),U.text(`Pregunta: ${te.enunciado}`,z,J+=10),J+=5,U.setFontSize(12),te.tipo==="seleccion_multiple"){const se=D[te.id]||{},ie=v.length;Object.entries(se).forEach(([ce,de])=>{const Be=ie>0?Math.round(de/ie*100):0;U.text(`${ce}: ${de} respuestas (${Be}%)`,z+5,J+=7)})}else{U.text("Respuestas:",z,J+=7);for(const se of v){const ie=se.respuestas[te.id];if((ie==null?void 0:ie.tipo)==="abierta"&&ie.valorTexto){J>250&&(U.addPage(),J=z),U.text(`${se.userNombre}:`,z+5,J+=7);const ce=U.splitTextToSize(ie.valorTexto,170);U.text(ce,z+10,J+=7),J+=ce.length*7}}}J+=10}if(R.length>0){J>250&&(U.addPage(),J=z),U.setFontSize(14),U.text("Conceptos clave detectados:",z,J+=10),U.setFontSize(12);const te=R.map(ie=>`${ie.keyword} (${Math.round(ie.score*100)}%)`).join(", "),se=U.splitTextToSize(te,170);U.text(se,z,J+=7)}U.save(`informe_${_.titulo.replace(/\s+/g,"_")}.pdf`)},[_,v,D,R]),K=C.useCallback(U=>{const z=e==null?void 0:e.isAdmin,J=U.creadorId===(e==null?void 0:e.uid);return w&&(z||J)},[e,w]),ee=C.useCallback((U,z)=>{x(J=>({...J,[U.id]:U.tipo==="abierta"?{tipo:"abierta",valorTexto:z}:{tipo:"seleccion_multiple",seleccionados:z}}))},[]),W=C.useCallback(async()=>{if(_){for(const U of _.preguntas){const z=g[U.id];if(z&&U.tipo==="abierta"&&U.maxPalabras){const J=Zfe(z.valorTexto||"");if(J>U.maxPalabras)return alert(`La respuesta a "${U.enunciado}" supera el máximo de ${U.maxPalabras} palabras (${J}).`)}}await n0t({activityId:_.id,userId:(e==null?void 0:e.uid)||"anon",userNombre:(e==null?void 0:e.displayName)||(e==null?void 0:e.name)||"Anónimo",respuestas:g}),x({}),alert("¡Respuestas enviadas!")}},[_,g,e]);return i.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[i.jsxs("header",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(oR,{className:"w-7 h-7 text-indigo-600"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Desarrollo Profesional Docente"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Crea sesiones, responde y explora insights en tiempo real."})]})]}),i.jsx(f0t,{value:t,onChange:r,canCreate:w})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[i.jsx("aside",{className:"lg:col-span-4 xl:col-span-3",children:i.jsx(Fy,{title:"Actividades",icon:i.jsx(xg,{className:"w-5 h-5 text-indigo-600"}),children:i.jsx(A0t,{items:n,selectedId:s,onSelect:U=>{o(U),r("responder")},canDelete:K,onDelete:q})})}),i.jsxs("main",{className:"lg:col-span-8 xl:col-span-9 space-y-6",children:[t==="crear"&&w&&i.jsxs(Fy,{title:"Nueva actividad / sesión",icon:i.jsx(xH,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("button",{onClick:V,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[i.jsx(Kc,{className:"w-4 h-4"}),"Guardar"]}),children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Título"}),i.jsx("input",{value:u.titulo,onChange:U=>f({titulo:U.target.value}),placeholder:"Ej: Comunidades de aprendizaje 1",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Área de trabajo (Dimensión PME)"}),i.jsx("select",{value:u.dimension,onChange:U=>f({dimension:U.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:Object.keys(JA).map(U=>i.jsx("option",{value:U,children:U},U))}),i.jsx("select",{value:u.subdimension,onChange:U=>f({subdimension:U.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:(JA[u.dimension]||[]).map(U=>i.jsx("option",{value:U,children:U},U))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Creador • Perfil"}),i.jsx("select",{value:u.creadorPerfil,onChange:U=>f({creadorPerfil:U.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:dH.map(U=>i.jsx("option",{value:U,children:U},U))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Creador • Usuario"}),i.jsxs("select",{value:u.creadorId,onChange:U=>{const z=U.target.value,J=h.find(te=>te.id===z);f({creadorId:z,creadorNombre:(J==null?void 0:J.nombre)||""})},className:"w-full border rounded-lg px-3 py-2 bg-white",children:[i.jsx("option",{value:"",children:"Seleccione…"}),h.filter(U=>U.profile===u.creadorPerfil).map(U=>i.jsx("option",{value:U.id,children:U.nombre},U.id))]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[i.jsx(Ate,{className:"w-4 h-4"})," Preguntas"]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[i.jsxs("button",{onClick:T,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[i.jsx(Co,{className:"w-4 h-4"})," Abierta"]}),i.jsxs("button",{onClick:j,className:"inline-flex items-center gap-2 bg-sky-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[i.jsx(Co,{className:"w-4 h-4"})," Selección múltiple"]}),i.jsxs("div",{className:"ms-auto flex items-center gap-2",children:[i.jsxs("div",{className:"hidden md:inline-flex items-center gap-1 text-slate-500 text-xs",children:[i.jsx(UEe,{className:"w-4 h-4"})," IA"]}),i.jsx("input",{value:u.aiTema,onChange:U=>f({aiTema:U.target.value}),placeholder:"Tema para IA (p. ej., evaluación formativa)",className:"border rounded-lg px-3 py-1.5"}),i.jsx("input",{type:"number",min:1,max:10,value:u.aiCantidad,onChange:U=>f({aiCantidad:parseInt(U.target.value||"1")}),className:"w-20 border rounded-lg px-3 py-1.5"}),i.jsxs("button",{onClick:M,disabled:S||!u.aiTema,className:"inline-flex items-center gap-2 bg-fuchsia-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90 disabled:opacity-50",children:[i.jsx(Jp,{className:"w-4 h-4"}),S?"Generando…":"Generar con IA"]})]})]}),i.jsxs("div",{className:"space-y-4",children:[u.preguntas.map((U,z)=>i.jsx(p0t,{q:U,index:z,onRemove:E,onPatch:I},U.id)),u.preguntas.length===0&&i.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2",children:[i.jsx(es,{className:"w-4 h-4"}),"Añade preguntas abiertas o de selección múltiple (o usa IA)."]})]})]})]}),t==="responder"&&_&&i.jsx(Fy,{title:`Responder: ${_.titulo}`,icon:i.jsx(_o,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("button",{onClick:W,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[i.jsx(Kc,{className:"w-4 h-4"}),"Enviar respuestas"]}),children:i.jsxs("div",{className:"grid gap-4",children:[i.jsxs("div",{className:"grid md:grid-cols-3 gap-3 text-sm",children:[i.jsx(k6,{pill:!0,label:"Dimensión",value:_.dimension}),i.jsx(k6,{pill:!0,label:"Subdimensión",value:_.subdimension}),i.jsx(k6,{pill:!0,label:"Creador",value:`${_.creadorNombre} • ${_.creadorPerfil}`})]}),_.preguntas.map(U=>i.jsx(g0t,{q:U,respuestas:g,onChange:ee},U.id))]})}),t==="respuestas_individuales"&&_&&i.jsx(Fy,{title:`Respuestas individuales: ${_.titulo}`,icon:i.jsx(_o,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:G,disabled:!v.length,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:v.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[i.jsx(Eh,{className:"w-4 h-4"}),"Descargar informe"]}),i.jsxs("button",{onClick:()=>{c(""),r("dashboard")},className:"inline-flex items-center gap-2 bg-slate-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[i.jsx(zc,{className:"w-4 h-4"}),"Volver al dashboard"]})]}),children:i.jsxs("div",{className:"grid md:grid-cols-12 gap-6",children:[i.jsx("div",{className:"md:col-span-4 lg:col-span-3",children:i.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[i.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[i.jsx(ly,{className:"w-5 h-5 text-indigo-600"}),"Usuarios (",v.length,")"]}),i.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto pr-2",children:v.length>0?v.map(U=>{var z;return i.jsxs("button",{onClick:()=>c(U.userId),className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${l===U.userId?"bg-indigo-50 text-indigo-700 font-medium border border-indigo-200 shadow-sm":"hover:bg-slate-50 border border-transparent"}`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-1.5 bg-indigo-100 rounded-lg",children:i.jsx(ly,{className:"w-4 h-4 text-indigo-600"})}),i.jsx("span",{className:"font-medium",children:U.userNombre})]}),i.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1.5",children:[i.jsx(ic,{className:"w-3.5 h-3.5"}),new Date(((z=U.createdAt)==null?void 0:z.seconds)*1e3).toLocaleDateString()]})]},U.userId)}):i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(ly,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"No hay respuestas todavía"})]})})]})}),i.jsx("div",{className:"md:col-span-8 lg:col-span-9",children:l?i.jsxs(i.Fragment,{children:[i.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2 text-lg",children:[i.jsx(xH,{className:"w-5 h-5 text-indigo-600"}),"Respuestas de:"," ",i.jsx("span",{className:"text-indigo-600",children:(P=v.find(U=>U.userId===l))==null?void 0:P.userNombre})]}),i.jsx("div",{className:"space-y-6",children:_.preguntas.map(U=>{var te;const z=v.find(se=>se.userId===l),J=(te=z==null?void 0:z.respuestas)==null?void 0:te[U.id];return console.log("Respuesta encontrada:",{preguntaId:U.id,tipo:U.tipo,respuesta:J}),i.jsxs("div",{className:"bg-white p-6 border border-slate-200 rounded-xl shadow-sm",children:[i.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[i.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg shrink-0",children:U.tipo==="abierta"?i.jsx(vH,{className:"w-5 h-5 text-indigo-600"}):i.jsx(Ov,{className:"w-5 h-5 text-indigo-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-900",children:U.enunciado}),i.jsx("p",{className:"text-sm text-slate-500 mt-1",children:U.tipo==="abierta"?"Respuesta abierta":"Selección múltiple"})]})]}),U.tipo==="abierta"?(J==null?void 0:J.tipo)==="abierta"&&J.valorTexto?i.jsx("div",{className:"mt-3 bg-slate-50 rounded-lg p-4",children:i.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:J.valorTexto})}):i.jsx("p",{className:"text-slate-500 italic mt-3",children:"Sin respuesta"}):i.jsxs("div",{className:"space-y-2 mt-3",children:[(U.opciones||[]).map(se=>{const ce=((J==null?void 0:J.tipo)==="seleccion_multiple"?J.seleccionados||[]:[]).includes(se.text);return i.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-all ${ce?"border-indigo-200 bg-indigo-50 text-indigo-700 shadow-sm":"border-slate-200 text-slate-500"}`,children:[i.jsx("div",{className:"flex-shrink-0",children:ce?i.jsx(es,{className:"w-4 h-4 text-indigo-600"}):i.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 rounded-full"})}),i.jsx("span",{className:"text-sm",children:typeof se=="string"?se:se.text})]},typeof se=="string"?se:se.id)}),!J&&i.jsx("p",{className:"text-slate-500 italic mt-1 text-sm",children:"Sin respuesta"})]})]},U.id)})})]}):i.jsx("div",{className:"text-center text-slate-500 py-12",children:"Selecciona un usuario para ver sus respuestas"})})]})}),t==="dashboard"&&_&&i.jsxs(Fy,{title:`Dashboard: ${_.titulo}`,icon:i.jsx(qw,{className:"w-5 h-5 text-indigo-600"}),right:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>r("respuestas_individuales"),className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:[i.jsx(ly,{className:"w-4 h-4"}),"Ver respuestas individuales"]}),K(_)&&i.jsxs("button",{onClick:()=>q(_.id,_.titulo),className:"inline-flex items-center gap-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[i.jsx(Is,{className:"w-4 h-4"}),"Eliminar actividad"]})]}),children:[i.jsx("div",{className:"mb-6",children:i.jsxs("button",{onClick:G,disabled:!v.length,className:"w-full md:w-auto inline-flex items-center justify-center gap-2 bg-emerald-600 text-white px-6 py-3 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-lg font-medium",title:v.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[i.jsx(Eh,{className:"w-5 h-5"}),"Descargar Informe Global"]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:i.jsx(ly,{className:"w-5 h-5 text-indigo-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Total respuestas"}),i.jsx("p",{className:"text-xl font-semibold",children:v.length})]})]})}),i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:i.jsx(Ov,{className:"w-5 h-5 text-emerald-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Preguntas"}),i.jsx("p",{className:"text-xl font-semibold",children:_.preguntas.length})]})]})}),i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:i.jsx(vg,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Creador"}),i.jsx("p",{className:"text-sm font-medium truncate",children:_.creadorNombre})]})]})}),i.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:i.jsx(ic,{className:"w-5 h-5 text-purple-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Fecha"}),i.jsx("p",{className:"text-sm font-medium",children:(()=>{const U=_.createdAt,z=U!=null&&U.toDate?U.toDate():U!=null&&U.seconds?new Date(U.seconds*1e3):U?new Date(U):null;return z?z.toLocaleDateString():"No disponible"})()})]})]})})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(mw,{className:"w-5 h-5 text-indigo-600"}),i.jsx("h4",{className:"font-semibold",children:"Resultados de selección múltiple"})]}),i.jsxs("div",{className:"space-y-4",children:[_.preguntas.filter(U=>U.tipo==="seleccion_multiple").map(U=>i.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[i.jsx("p",{className:"font-medium mb-3 text-slate-700",children:U.enunciado}),Object.entries(D[U.id]||{}).map(([z,J])=>i.jsx(h0t,{label:z,value:J},z)),i.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1",children:[i.jsx(lb,{className:"w-4 h-4"}),"Total respuestas: ",v.length]})]},U.id)),_.preguntas.filter(U=>U.tipo==="seleccion_multiple").length===0&&i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(Ov,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"No hay preguntas de selección múltiple en esta actividad."})]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(Ewe,{className:"w-5 h-5 text-indigo-600"}),i.jsx("h4",{className:"font-semibold",children:"Conceptos clave (IA)"})]}),R.length?i.jsx("div",{className:"flex flex-wrap gap-2",children:R.map(U=>i.jsx("span",{className:"rounded-full px-3 py-1.5 text-sm bg-gradient-to-r from-indigo-50 to-purple-50 text-indigo-700 border border-indigo-100 shadow-sm transition-transform hover:scale-105",style:{fontSize:`${12+Math.round(U.score*18)}px`},children:U.keyword},U.keyword))}):i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(vH,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"Aún no hay suficientes respuestas abiertas para mostrar conceptos."})]})]})]})]})]})]})]})};var OE=e=>e.type==="checkbox",Kp=e=>e instanceof Date,yl=e=>e==null;const rAe=e=>typeof e=="object";var ti=e=>!yl(e)&&!Array.isArray(e)&&rAe(e)&&!Kp(e),v0t=e=>ti(e)&&e.target?OE(e.target)?e.target.checked:e.target.value:e,b0t=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,y0t=(e,t)=>e.has(b0t(t)),w0t=e=>{const t=e.constructor&&e.constructor.prototype;return ti(t)&&t.hasOwnProperty("isPrototypeOf")},c7=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ja(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(c7&&(e instanceof Blob||n))&&(r||ti(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!w0t(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Ja(e[a]));else return e;return t}var jj=e=>/^\w*$/.test(e),Za=e=>e===void 0,Bj=e=>Array.isArray(e)?e.filter(Boolean):[],u7=e=>Bj(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ur=(e,t,r)=>{if(!t||!ti(e))return r;const n=(jj(t)?[t]:u7(t)).reduce((a,s)=>yl(a)?a:a[s],e);return Za(n)||n===e?Za(e[t])?r:e[t]:n},Mf=e=>typeof e=="boolean",Oa=(e,t,r)=>{let n=-1;const a=jj(t)?[t]:u7(t),s=a.length,o=s-1;for(;++n<s;){const l=a[n];let c=r;if(n!==o){const u=e[l];c=ti(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const zY={BLUR:"blur",FOCUS_OUT:"focusout"},Uu={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},WA={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},nAe=at.createContext(null);nAe.displayName="HookFormContext";const E0t=()=>at.useContext(nAe);var N0t=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const o=s;return t._proxyFormState[o]!==Uu.all&&(t._proxyFormState[o]=!n||Uu.all),e[o]}});return a};const aAe=typeof window<"u"?at.useLayoutEffect:at.useEffect;var Yf=e=>typeof e=="string",C0t=(e,t,r,n,a)=>Yf(e)?(n&&t.watch.add(e),ur(r,e,a)):Array.isArray(e)?e.map(s=>(n&&t.watch.add(s),ur(r,s))):(n&&(t.watchAll=!0),r),UD=e=>yl(e)||!rAe(e);function X0(e,t,r=new WeakSet){if(UD(e)||UD(t))return e===t;if(Kp(e)&&Kp(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const s of n){const o=e[s];if(!a.includes(s))return!1;if(s!=="ref"){const l=t[s];if(Kp(o)&&Kp(l)||ti(o)&&ti(l)||Array.isArray(o)&&Array.isArray(l)?!X0(o,l,r):o!==l)return!1}}return!0}var _0t=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},sc=e=>Array.isArray(e)?e:[e],$Y=()=>{let e=[];return{get observers(){return e},next:a=>{for(const s of e)s.next&&s.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(s=>s!==a)}}),unsubscribe:()=>{e=[]}}},xl=e=>ti(e)&&!Object.keys(e).length,d7=e=>e.type==="file",Td=e=>typeof e=="function",ck=e=>{if(!c7)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},sAe=e=>e.type==="select-multiple",f7=e=>e.type==="radio",S0t=e=>f7(e)||OE(e),j6=e=>ck(e)&&e.isConnected;function k0t(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Za(e)?n++:e[t[n++]];return e}function j0t(e){for(const t in e)if(e.hasOwnProperty(t)&&!Za(e[t]))return!1;return!0}function qs(e,t){const r=Array.isArray(t)?t:jj(t)?[t]:u7(t),n=r.length===1?e:k0t(e,r),a=r.length-1,s=r[a];return n&&delete n[s],a!==0&&(ti(n)&&xl(n)||Array.isArray(n)&&j0t(n))&&qs(e,r.slice(0,-1)),e}var iAe=e=>{for(const t in e)if(Td(e[t]))return!0;return!1};function uk(e,t={}){const r=Array.isArray(e);if(ti(e)||r)for(const n in e)Array.isArray(e[n])||ti(e[n])&&!iAe(e[n])?(t[n]=Array.isArray(e[n])?[]:{},uk(e[n],t[n])):yl(e[n])||(t[n]=!0);return t}function oAe(e,t,r){const n=Array.isArray(e);if(ti(e)||n)for(const a in e)Array.isArray(e[a])||ti(e[a])&&!iAe(e[a])?Za(t)||UD(r[a])?r[a]=Array.isArray(e[a])?uk(e[a],[]):{...uk(e[a])}:oAe(e[a],yl(t)?{}:t[a],r[a]):r[a]=!X0(e[a],t[a]);return r}var Oy=(e,t)=>oAe(e,t,uk(t));const GY={value:!1,isValid:!1},qY={value:!0,isValid:!0};var lAe=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Za(e[0].attributes.value)?Za(e[0].value)||e[0].value===""?qY:{value:e[0].value,isValid:!0}:qY:GY}return GY},cAe=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Za(e)?e:t?e===""?NaN:e&&+e:r&&Yf(e)?new Date(e):n?n(e):e;const KY={isValid:!1,value:null};var uAe=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,KY):KY;function WY(e){const t=e.ref;return d7(t)?t.files:f7(t)?uAe(e.refs).value:sAe(t)?[...t.selectedOptions].map(({value:r})=>r):OE(t)?lAe(e.refs).value:cAe(Za(t.value)?e.ref.value:t.value,e)}var B0t=(e,t,r,n)=>{const a={};for(const s of e){const o=ur(t,s);o&&Oa(a,s,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},dk=e=>e instanceof RegExp,Dy=e=>Za(e)?e:dk(e)?e.source:ti(e)?dk(e.value)?e.value.source:e.value:e,Sv=e=>({isOnSubmit:!e||e===Uu.onSubmit,isOnBlur:e===Uu.onBlur,isOnChange:e===Uu.onChange,isOnAll:e===Uu.all,isOnTouch:e===Uu.onTouched});const XY="AsyncFunction";var T0t=e=>!!e&&!!e.validate&&!!(Td(e.validate)&&e.validate.constructor.name===XY||ti(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===XY)),I0t=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),QD=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Yv=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const s=ur(e,a);if(s){const{_f:o,...l}=s;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(Yv(l,t))break}else if(ti(l)&&Yv(l,t))break}}};function YY(e,t,r){const n=ur(e,r);if(n||jj(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),o=ur(t,s),l=ur(e,s);if(o&&!Array.isArray(o)&&r!==s)return{name:r};if(l&&l.type)return{name:s,error:l};if(l&&l.root&&l.root.type)return{name:`${s}.root`,error:l.root};a.pop()}return{name:r}}var F0t=(e,t,r,n)=>{r(e);const{name:a,...s}=e;return xl(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(o=>t[o]===(!n||Uu.all))},O0t=(e,t,r)=>!e||!t||e===t||sc(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),D0t=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,P0t=(e,t)=>!Bj(ur(e,t)).length&&qs(e,t),dAe=(e,t,r)=>{const n=sc(ur(e,r));return Oa(n,"root",t[r]),Oa(e,r,n),e},Z5=e=>Yf(e);function JY(e,t,r="validate"){if(Z5(e)||Array.isArray(e)&&e.every(Z5)||Mf(e)&&!e)return{type:r,message:Z5(e)?e:"",ref:t}}var tv=e=>ti(e)&&!dk(e)?e:{value:e,message:""},HD=async(e,t,r,n,a,s)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:m,validate:g,name:x,valueAsNumber:v,mount:y}=e._f,w=ur(r,x);if(!y||t.has(x))return{};const _=l?l[0]:o,T=k=>{a&&_.reportValidity&&(_.setCustomValidity(Mf(k)?"":k||""),_.reportValidity())},j={},I=f7(o),E=OE(o),S=I||E,B=(v||d7(o))&&Za(o.value)&&Za(w)||ck(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,M=_0t.bind(null,x,n,j),R=(k,D,L,Z=WA.maxLength,V=WA.minLength)=>{const q=k?D:L;j[x]={type:k?Z:V,message:q,ref:o,...M(k?Z:V,q)}};if(s?!Array.isArray(w)||!w.length:c&&(!S&&(B||yl(w))||Mf(w)&&!w||E&&!lAe(l).isValid||I&&!uAe(l).isValid)){const{value:k,message:D}=Z5(c)?{value:!!c,message:c}:tv(c);if(k&&(j[x]={type:WA.required,message:D,ref:_,...M(WA.required,D)},!n))return T(D),j}if(!B&&(!yl(f)||!yl(h))){let k,D;const L=tv(h),Z=tv(f);if(!yl(w)&&!isNaN(w)){const V=o.valueAsNumber||w&&+w;yl(L.value)||(k=V>L.value),yl(Z.value)||(D=V<Z.value)}else{const V=o.valueAsDate||new Date(w),q=ee=>new Date(new Date().toDateString()+" "+ee),G=o.type=="time",K=o.type=="week";Yf(L.value)&&w&&(k=G?q(w)>q(L.value):K?w>L.value:V>new Date(L.value)),Yf(Z.value)&&w&&(D=G?q(w)<q(Z.value):K?w<Z.value:V<new Date(Z.value))}if((k||D)&&(R(!!k,L.message,Z.message,WA.max,WA.min),!n))return T(j[x].message),j}if((u||d)&&!B&&(Yf(w)||s&&Array.isArray(w))){const k=tv(u),D=tv(d),L=!yl(k.value)&&w.length>+k.value,Z=!yl(D.value)&&w.length<+D.value;if((L||Z)&&(R(L,k.message,D.message),!n))return T(j[x].message),j}if(m&&!B&&Yf(w)){const{value:k,message:D}=tv(m);if(dk(k)&&!w.match(k)&&(j[x]={type:WA.pattern,message:D,ref:o,...M(WA.pattern,D)},!n))return T(D),j}if(g){if(Td(g)){const k=await g(w,r),D=JY(k,_);if(D&&(j[x]={...D,...M(WA.validate,D.message)},!n))return T(D.message),j}else if(ti(g)){let k={};for(const D in g){if(!xl(k)&&!n)break;const L=JY(await g[D](w,r),_,D);L&&(k={...L,...M(D,L.message)},T(L.message),n&&(j[x]=k))}if(!xl(k)&&(j[x]={ref:_,...k},!n))return j}}return T(!0),j};const R0t={mode:Uu.onSubmit,reValidateMode:Uu.onChange,shouldFocusError:!0};function L0t(e={}){let t={...R0t,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Td(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=ti(t.defaultValues)||ti(t.values)?Ja(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:Ja(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:$Y(),state:$Y()},m=t.criteriaMode===Uu.all,g=pe=>Oe=>{clearTimeout(u),u=setTimeout(pe,Oe)},x=async pe=>{if(!t.disabled&&(d.isValid||f.isValid||pe)){const Oe=t.resolver?xl((await E()).errors):await B(n,!0);Oe!==r.isValid&&h.state.next({isValid:Oe})}},v=(pe,Oe)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((pe||Array.from(l.mount)).forEach(Le=>{Le&&(Oe?Oa(r.validatingFields,Le,Oe):qs(r.validatingFields,Le))}),h.state.next({validatingFields:r.validatingFields,isValidating:!xl(r.validatingFields)}))},y=(pe,Oe=[],Le,Ge,et=!0,ut=!0)=>{if(Ge&&Le&&!t.disabled){if(o.action=!0,ut&&Array.isArray(ur(n,pe))){const xt=Le(ur(n,pe),Ge.argA,Ge.argB);et&&Oa(n,pe,xt)}if(ut&&Array.isArray(ur(r.errors,pe))){const xt=Le(ur(r.errors,pe),Ge.argA,Ge.argB);et&&Oa(r.errors,pe,xt),P0t(r.errors,pe)}if((d.touchedFields||f.touchedFields)&&ut&&Array.isArray(ur(r.touchedFields,pe))){const xt=Le(ur(r.touchedFields,pe),Ge.argA,Ge.argB);et&&Oa(r.touchedFields,pe,xt)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Oy(a,s)),h.state.next({name:pe,isDirty:R(pe,Oe),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Oa(s,pe,Oe)},w=(pe,Oe)=>{Oa(r.errors,pe,Oe),h.state.next({errors:r.errors})},_=pe=>{r.errors=pe,h.state.next({errors:r.errors,isValid:!1})},T=(pe,Oe,Le,Ge)=>{const et=ur(n,pe);if(et){const ut=ur(s,pe,Za(Le)?ur(a,pe):Le);Za(ut)||Ge&&Ge.defaultChecked||Oe?Oa(s,pe,Oe?ut:WY(et._f)):L(pe,ut),o.mount&&x()}},j=(pe,Oe,Le,Ge,et)=>{let ut=!1,xt=!1;const It={name:pe};if(!t.disabled){if(!Le||Ge){(d.isDirty||f.isDirty)&&(xt=r.isDirty,r.isDirty=It.isDirty=R(),ut=xt!==It.isDirty);const Mt=X0(ur(a,pe),Oe);xt=!!ur(r.dirtyFields,pe),Mt?qs(r.dirtyFields,pe):Oa(r.dirtyFields,pe,!0),It.dirtyFields=r.dirtyFields,ut=ut||(d.dirtyFields||f.dirtyFields)&&xt!==!Mt}if(Le){const Mt=ur(r.touchedFields,pe);Mt||(Oa(r.touchedFields,pe,Le),It.touchedFields=r.touchedFields,ut=ut||(d.touchedFields||f.touchedFields)&&Mt!==Le)}ut&&et&&h.state.next(It)}return ut?It:{}},I=(pe,Oe,Le,Ge)=>{const et=ur(r.errors,pe),ut=(d.isValid||f.isValid)&&Mf(Oe)&&r.isValid!==Oe;if(t.delayError&&Le?(c=g(()=>w(pe,Le)),c(t.delayError)):(clearTimeout(u),c=null,Le?Oa(r.errors,pe,Le):qs(r.errors,pe)),(Le?!X0(et,Le):et)||!xl(Ge)||ut){const xt={...Ge,...ut&&Mf(Oe)?{isValid:Oe}:{},errors:r.errors,name:pe};r={...r,...xt},h.state.next(xt)}},E=async pe=>{v(pe,!0);const Oe=await t.resolver(s,t.context,B0t(pe||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return v(pe),Oe},S=async pe=>{const{errors:Oe}=await E(pe);if(pe)for(const Le of pe){const Ge=ur(Oe,Le);Ge?Oa(r.errors,Le,Ge):qs(r.errors,Le)}else r.errors=Oe;return Oe},B=async(pe,Oe,Le={valid:!0})=>{for(const Ge in pe){const et=pe[Ge];if(et){const{_f:ut,...xt}=et;if(ut){const It=l.array.has(ut.name),Mt=et._f&&T0t(et._f);Mt&&d.validatingFields&&v([Ge],!0);const Pt=await HD(et,l.disabled,s,m,t.shouldUseNativeValidation&&!Oe,It);if(Mt&&d.validatingFields&&v([Ge]),Pt[ut.name]&&(Le.valid=!1,Oe))break;!Oe&&(ur(Pt,ut.name)?It?dAe(r.errors,Pt,ut.name):Oa(r.errors,ut.name,Pt[ut.name]):qs(r.errors,ut.name))}!xl(xt)&&await B(xt,Oe,Le)}}return Le.valid},M=()=>{for(const pe of l.unMount){const Oe=ur(n,pe);Oe&&(Oe._f.refs?Oe._f.refs.every(Le=>!j6(Le)):!j6(Oe._f.ref))&&se(pe)}l.unMount=new Set},R=(pe,Oe)=>!t.disabled&&(pe&&Oe&&Oa(s,pe,Oe),!X0(ee(),a)),k=(pe,Oe,Le)=>C0t(pe,l,{...o.mount?s:Za(Oe)?a:Yf(pe)?{[pe]:Oe}:Oe},Le,Oe),D=pe=>Bj(ur(o.mount?s:a,pe,t.shouldUnregister?ur(a,pe,[]):[])),L=(pe,Oe,Le={})=>{const Ge=ur(n,pe);let et=Oe;if(Ge){const ut=Ge._f;ut&&(!ut.disabled&&Oa(s,pe,cAe(Oe,ut)),et=ck(ut.ref)&&yl(Oe)?"":Oe,sAe(ut.ref)?[...ut.ref.options].forEach(xt=>xt.selected=et.includes(xt.value)):ut.refs?OE(ut.ref)?ut.refs.forEach(xt=>{(!xt.defaultChecked||!xt.disabled)&&(Array.isArray(et)?xt.checked=!!et.find(It=>It===xt.value):xt.checked=et===xt.value||!!et)}):ut.refs.forEach(xt=>xt.checked=xt.value===et):d7(ut.ref)?ut.ref.value="":(ut.ref.value=et,ut.ref.type||h.state.next({name:pe,values:Ja(s)})))}(Le.shouldDirty||Le.shouldTouch)&&j(pe,et,Le.shouldTouch,Le.shouldDirty,!0),Le.shouldValidate&&K(pe)},Z=(pe,Oe,Le)=>{for(const Ge in Oe){if(!Oe.hasOwnProperty(Ge))return;const et=Oe[Ge],ut=pe+"."+Ge,xt=ur(n,ut);(l.array.has(pe)||ti(et)||xt&&!xt._f)&&!Kp(et)?Z(ut,et,Le):L(ut,et,Le)}},V=(pe,Oe,Le={})=>{const Ge=ur(n,pe),et=l.array.has(pe),ut=Ja(Oe);Oa(s,pe,ut),et?(h.array.next({name:pe,values:Ja(s)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&Le.shouldDirty&&h.state.next({name:pe,dirtyFields:Oy(a,s),isDirty:R(pe,ut)})):Ge&&!Ge._f&&!yl(ut)?Z(pe,ut,Le):L(pe,ut,Le),QD(pe,l)&&h.state.next({...r,name:pe}),h.state.next({name:o.mount?pe:void 0,values:Ja(s)})},q=async pe=>{o.mount=!0;const Oe=pe.target;let Le=Oe.name,Ge=!0;const et=ur(n,Le),ut=Mt=>{Ge=Number.isNaN(Mt)||Kp(Mt)&&isNaN(Mt.getTime())||X0(Mt,ur(s,Le,Mt))},xt=Sv(t.mode),It=Sv(t.reValidateMode);if(et){let Mt,Pt;const Ht=Oe.type?WY(et._f):v0t(pe),wt=pe.type===zY.BLUR||pe.type===zY.FOCUS_OUT,Tr=!I0t(et._f)&&!t.resolver&&!ur(r.errors,Le)&&!et._f.deps||D0t(wt,ur(r.touchedFields,Le),r.isSubmitted,It,xt),tr=QD(Le,l,wt);Oa(s,Le,Ht),wt?(!Oe||!Oe.readOnly)&&(et._f.onBlur&&et._f.onBlur(pe),c&&c(0)):et._f.onChange&&et._f.onChange(pe);const sn=j(Le,Ht,wt),kr=!xl(sn)||tr;if(!wt&&h.state.next({name:Le,type:pe.type,values:Ja(s)}),Tr)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?wt&&x():wt||x()),kr&&h.state.next({name:Le,...tr?{}:sn});if(!wt&&tr&&h.state.next({...r}),t.resolver){const{errors:$r}=await E([Le]);if(ut(Ht),Ge){const Fn=YY(r.errors,n,Le),Pr=YY($r,n,Fn.name||Le);Mt=Pr.error,Le=Pr.name,Pt=xl($r)}}else v([Le],!0),Mt=(await HD(et,l.disabled,s,m,t.shouldUseNativeValidation))[Le],v([Le]),ut(Ht),Ge&&(Mt?Pt=!1:(d.isValid||f.isValid)&&(Pt=await B(n,!0)));Ge&&(et._f.deps&&K(et._f.deps),I(Le,Pt,Mt,sn))}},G=(pe,Oe)=>{if(ur(r.errors,Oe)&&pe.focus)return pe.focus(),1},K=async(pe,Oe={})=>{let Le,Ge;const et=sc(pe);if(t.resolver){const ut=await S(Za(pe)?pe:et);Le=xl(ut),Ge=pe?!et.some(xt=>ur(ut,xt)):Le}else pe?(Ge=(await Promise.all(et.map(async ut=>{const xt=ur(n,ut);return await B(xt&&xt._f?{[ut]:xt}:xt)}))).every(Boolean),!(!Ge&&!r.isValid)&&x()):Ge=Le=await B(n);return h.state.next({...!Yf(pe)||(d.isValid||f.isValid)&&Le!==r.isValid?{}:{name:pe},...t.resolver||!pe?{isValid:Le}:{},errors:r.errors}),Oe.shouldFocus&&!Ge&&Yv(n,G,pe?et:l.mount),Ge},ee=pe=>{const Oe={...o.mount?s:a};return Za(pe)?Oe:Yf(pe)?ur(Oe,pe):pe.map(Le=>ur(Oe,Le))},W=(pe,Oe)=>({invalid:!!ur((Oe||r).errors,pe),isDirty:!!ur((Oe||r).dirtyFields,pe),error:ur((Oe||r).errors,pe),isValidating:!!ur(r.validatingFields,pe),isTouched:!!ur((Oe||r).touchedFields,pe)}),P=pe=>{pe&&sc(pe).forEach(Oe=>qs(r.errors,Oe)),h.state.next({errors:pe?r.errors:{}})},U=(pe,Oe,Le)=>{const Ge=(ur(n,pe,{_f:{}})._f||{}).ref,et=ur(r.errors,pe)||{},{ref:ut,message:xt,type:It,...Mt}=et;Oa(r.errors,pe,{...Mt,...Oe,ref:Ge}),h.state.next({name:pe,errors:r.errors,isValid:!1}),Le&&Le.shouldFocus&&Ge&&Ge.focus&&Ge.focus()},z=(pe,Oe)=>Td(pe)?h.state.subscribe({next:Le=>"values"in Le&&pe(k(void 0,Oe),Le)}):k(pe,Oe,!0),J=pe=>h.state.subscribe({next:Oe=>{O0t(pe.name,Oe.name,pe.exact)&&F0t(Oe,pe.formState||d,be,pe.reRenderRoot)&&pe.callback({values:{...s},...r,...Oe,defaultValues:a})}}).unsubscribe,te=pe=>(o.mount=!0,f={...f,...pe.formState},J({...pe,formState:f})),se=(pe,Oe={})=>{for(const Le of pe?sc(pe):l.mount)l.mount.delete(Le),l.array.delete(Le),Oe.keepValue||(qs(n,Le),qs(s,Le)),!Oe.keepError&&qs(r.errors,Le),!Oe.keepDirty&&qs(r.dirtyFields,Le),!Oe.keepTouched&&qs(r.touchedFields,Le),!Oe.keepIsValidating&&qs(r.validatingFields,Le),!t.shouldUnregister&&!Oe.keepDefaultValue&&qs(a,Le);h.state.next({values:Ja(s)}),h.state.next({...r,...Oe.keepDirty?{isDirty:R()}:{}}),!Oe.keepIsValid&&x()},ie=({disabled:pe,name:Oe})=>{(Mf(pe)&&o.mount||pe||l.disabled.has(Oe))&&(pe?l.disabled.add(Oe):l.disabled.delete(Oe))},ce=(pe,Oe={})=>{let Le=ur(n,pe);const Ge=Mf(Oe.disabled)||Mf(t.disabled);return Oa(n,pe,{...Le||{},_f:{...Le&&Le._f?Le._f:{ref:{name:pe}},name:pe,mount:!0,...Oe}}),l.mount.add(pe),Le?ie({disabled:Mf(Oe.disabled)?Oe.disabled:t.disabled,name:pe}):T(pe,!0,Oe.value),{...Ge?{disabled:Oe.disabled||t.disabled}:{},...t.progressive?{required:!!Oe.required,min:Dy(Oe.min),max:Dy(Oe.max),minLength:Dy(Oe.minLength),maxLength:Dy(Oe.maxLength),pattern:Dy(Oe.pattern)}:{},name:pe,onChange:q,onBlur:q,ref:et=>{if(et){ce(pe,Oe),Le=ur(n,pe);const ut=Za(et.value)&&et.querySelectorAll&&et.querySelectorAll("input,select,textarea")[0]||et,xt=S0t(ut),It=Le._f.refs||[];if(xt?It.find(Mt=>Mt===ut):ut===Le._f.ref)return;Oa(n,pe,{_f:{...Le._f,...xt?{refs:[...It.filter(j6),ut,...Array.isArray(ur(a,pe))?[{}]:[]],ref:{type:ut.type,name:pe}}:{ref:ut}}}),T(pe,!1,void 0,ut)}else Le=ur(n,pe,{}),Le._f&&(Le._f.mount=!1),(t.shouldUnregister||Oe.shouldUnregister)&&!(y0t(l.array,pe)&&o.action)&&l.unMount.add(pe)}}},de=()=>t.shouldFocusError&&Yv(n,G,l.mount),Be=pe=>{Mf(pe)&&(h.state.next({disabled:pe}),Yv(n,(Oe,Le)=>{const Ge=ur(n,Le);Ge&&(Oe.disabled=Ge._f.disabled||pe,Array.isArray(Ge._f.refs)&&Ge._f.refs.forEach(et=>{et.disabled=Ge._f.disabled||pe}))},0,!1))},ae=(pe,Oe)=>async Le=>{let Ge;Le&&(Le.preventDefault&&Le.preventDefault(),Le.persist&&Le.persist());let et=Ja(s);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:ut,values:xt}=await E();r.errors=ut,et=Ja(xt)}else await B(n);if(l.disabled.size)for(const ut of l.disabled)qs(et,ut);if(qs(r.errors,"root"),xl(r.errors)){h.state.next({errors:{}});try{await pe(et,Le)}catch(ut){Ge=ut}}else Oe&&await Oe({...r.errors},Le),de(),setTimeout(de);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:xl(r.errors)&&!Ge,submitCount:r.submitCount+1,errors:r.errors}),Ge)throw Ge},Se=(pe,Oe={})=>{ur(n,pe)&&(Za(Oe.defaultValue)?V(pe,Ja(ur(a,pe))):(V(pe,Oe.defaultValue),Oa(a,pe,Ja(Oe.defaultValue))),Oe.keepTouched||qs(r.touchedFields,pe),Oe.keepDirty||(qs(r.dirtyFields,pe),r.isDirty=Oe.defaultValue?R(pe,Ja(ur(a,pe))):R()),Oe.keepError||(qs(r.errors,pe),d.isValid&&x()),h.state.next({...r}))},ke=(pe,Oe={})=>{const Le=pe?Ja(pe):a,Ge=Ja(Le),et=xl(pe),ut=et?a:Ge;if(Oe.keepDefaultValues||(a=Le),!Oe.keepValues){if(Oe.keepDirtyValues){const xt=new Set([...l.mount,...Object.keys(Oy(a,s))]);for(const It of Array.from(xt))ur(r.dirtyFields,It)?Oa(ut,It,ur(s,It)):V(It,ur(ut,It))}else{if(c7&&Za(pe))for(const xt of l.mount){const It=ur(n,xt);if(It&&It._f){const Mt=Array.isArray(It._f.refs)?It._f.refs[0]:It._f.ref;if(ck(Mt)){const Pt=Mt.closest("form");if(Pt){Pt.reset();break}}}}if(Oe.keepFieldsRef)for(const xt of l.mount)V(xt,ur(ut,xt));else n={}}s=t.shouldUnregister?Oe.keepDefaultValues?Ja(a):{}:Ja(ut),h.array.next({values:{...ut}}),h.state.next({values:{...ut}})}l={mount:Oe.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!Oe.keepIsValid||!!Oe.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:Oe.keepSubmitCount?r.submitCount:0,isDirty:et?!1:Oe.keepDirty?r.isDirty:!!(Oe.keepDefaultValues&&!X0(pe,a)),isSubmitted:Oe.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:et?{}:Oe.keepDirtyValues?Oe.keepDefaultValues&&s?Oy(a,s):r.dirtyFields:Oe.keepDefaultValues&&pe?Oy(a,pe):Oe.keepDirty?r.dirtyFields:{},touchedFields:Oe.keepTouched?r.touchedFields:{},errors:Oe.keepErrors?r.errors:{},isSubmitSuccessful:Oe.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},ve=(pe,Oe)=>ke(Td(pe)?pe(s):pe,Oe),le=(pe,Oe={})=>{const Le=ur(n,pe),Ge=Le&&Le._f;if(Ge){const et=Ge.refs?Ge.refs[0]:Ge.ref;et.focus&&(et.focus(),Oe.shouldSelect&&Td(et.select)&&et.select())}},be=pe=>{r={...r,...pe}},Ue={control:{register:ce,unregister:se,getFieldState:W,handleSubmit:ae,setError:U,_subscribe:J,_runSchema:E,_focusError:de,_getWatch:k,_getDirty:R,_setValid:x,_setFieldArray:y,_setDisabledField:ie,_setErrors:_,_getFieldArray:D,_reset:ke,_resetDefaultValues:()=>Td(t.defaultValues)&&t.defaultValues().then(pe=>{ve(pe,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:M,_disableForm:Be,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return s},get _state(){return o},set _state(pe){o=pe},get _defaultValues(){return a},get _names(){return l},set _names(pe){l=pe},get _formState(){return r},get _options(){return t},set _options(pe){t={...t,...pe}}},subscribe:te,trigger:K,register:ce,handleSubmit:ae,watch:z,setValue:V,getValues:ee,reset:ve,resetField:Se,clearErrors:P,unregister:se,setError:U,setFocus:le,getFieldState:W};return{...Ue,formControl:Ue}}var P0=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},B6=(e,t,r={})=>r.shouldFocus||Za(r.shouldFocus)?r.focusName||`${e}.${Za(r.focusIndex)?t:r.focusIndex}.`:"",T6=(e,t)=>[...e,...sc(t)],I6=e=>Array.isArray(e)?e.map(()=>{}):void 0;function F6(e,t,r){return[...e.slice(0,t),...sc(r),...e.slice(t)]}var O6=(e,t,r)=>Array.isArray(e)?(Za(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],D6=(e,t)=>[...sc(t),...sc(e)];function M0t(e,t){let r=0;const n=[...e];for(const a of t)n.splice(a-r,1),r++;return Bj(n).length?n:[]}var P6=(e,t)=>Za(t)?[]:M0t(e,sc(t).sort((r,n)=>r-n)),R6=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},ZY=(e,t,r)=>(e[t]=r,e);function U0t(e){const t=E0t(),{control:r=t.control,name:n,keyName:a="id",shouldUnregister:s,rules:o}=e,[l,c]=at.useState(r._getFieldArray(n)),u=at.useRef(r._getFieldArray(n).map(P0)),d=at.useRef(l),f=at.useRef(!1);d.current=l,r._names.array.add(n),at.useMemo(()=>o&&r.register(n,o),[r,o,n]),aAe(()=>r._subjects.array.subscribe({next:({values:j,name:I})=>{if(I===n||!I){const E=ur(j,n);Array.isArray(E)&&(c(E),u.current=E.map(P0))}}}).unsubscribe,[r,n]);const h=at.useCallback(j=>{f.current=!0,r._setFieldArray(n,j)},[r,n]),m=(j,I)=>{const E=sc(Ja(j)),S=T6(r._getFieldArray(n),E);r._names.focus=B6(n,S.length-1,I),u.current=T6(u.current,E.map(P0)),h(S),c(S),r._setFieldArray(n,S,T6,{argA:I6(j)})},g=(j,I)=>{const E=sc(Ja(j)),S=D6(r._getFieldArray(n),E);r._names.focus=B6(n,0,I),u.current=D6(u.current,E.map(P0)),h(S),c(S),r._setFieldArray(n,S,D6,{argA:I6(j)})},x=j=>{const I=P6(r._getFieldArray(n),j);u.current=P6(u.current,j),h(I),c(I),!Array.isArray(ur(r._fields,n))&&Oa(r._fields,n,void 0),r._setFieldArray(n,I,P6,{argA:j})},v=(j,I,E)=>{const S=sc(Ja(I)),B=F6(r._getFieldArray(n),j,S);r._names.focus=B6(n,j,E),u.current=F6(u.current,j,S.map(P0)),h(B),c(B),r._setFieldArray(n,B,F6,{argA:j,argB:I6(I)})},y=(j,I)=>{const E=r._getFieldArray(n);R6(E,j,I),R6(u.current,j,I),h(E),c(E),r._setFieldArray(n,E,R6,{argA:j,argB:I},!1)},w=(j,I)=>{const E=r._getFieldArray(n);O6(E,j,I),O6(u.current,j,I),h(E),c(E),r._setFieldArray(n,E,O6,{argA:j,argB:I},!1)},_=(j,I)=>{const E=Ja(I),S=ZY(r._getFieldArray(n),j,E);u.current=[...S].map((B,M)=>!B||M===j?P0():u.current[M]),h(S),c([...S]),r._setFieldArray(n,S,ZY,{argA:j,argB:E},!0,!1)},T=j=>{const I=sc(Ja(j));u.current=I.map(P0),h([...I]),c([...I]),r._setFieldArray(n,[...I],E=>E,{},!0,!1)};return at.useEffect(()=>{if(r._state.action=!1,QD(n,r._names)&&r._subjects.state.next({...r._formState}),f.current&&(!Sv(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!Sv(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(j=>{const I=ur(j.errors,n),E=ur(r._formState.errors,n);(E?!I&&E.type||I&&(E.type!==I.type||E.message!==I.message):I&&I.type)&&(I?Oa(r._formState.errors,n,I):qs(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const j=ur(r._fields,n);j&&j._f&&!(Sv(r._options.reValidateMode).isOnSubmit&&Sv(r._options.mode).isOnSubmit)&&HD(j,r._names.disabled,r._formValues,r._options.criteriaMode===Uu.all,r._options.shouldUseNativeValidation,!0).then(I=>!xl(I)&&r._subjects.state.next({errors:dAe(r._formState.errors,I,n)}))}r._subjects.state.next({name:n,values:Ja(r._formValues)}),r._names.focus&&Yv(r._fields,(j,I)=>{if(r._names.focus&&I.startsWith(r._names.focus)&&j.focus)return j.focus(),1}),r._names.focus="",r._setValid(),f.current=!1},[l,n,r]),at.useEffect(()=>(!ur(r._formValues,n)&&r._setFieldArray(n),()=>{const j=(I,E)=>{const S=ur(r._fields,I);S&&S._f&&(S._f.mount=E)};r._options.shouldUnregister||s?r.unregister(n):j(n,!1)}),[n,r,a,s]),{swap:at.useCallback(y,[h,n,r]),move:at.useCallback(w,[h,n,r]),prepend:at.useCallback(g,[h,n,r]),append:at.useCallback(m,[h,n,r]),remove:at.useCallback(x,[h,n,r]),insert:at.useCallback(v,[h,n,r]),update:at.useCallback(_,[h,n,r]),replace:at.useCallback(T,[h,n,r]),fields:at.useMemo(()=>l.map((j,I)=>({...j,[a]:u.current[I]||P0()})),[l,a])}}function Q0t(e={}){const t=at.useRef(void 0),r=at.useRef(void 0),[n,a]=at.useState({isDirty:!1,isValidating:!1,isLoading:Td(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Td(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Td(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=L0t(e);t.current={...l,formState:n}}const s=t.current.control;return s._options=e,aAe(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>a({...s._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),s._formState.isReady=!0,o},[s]),at.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),at.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),at.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),at.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),at.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==n.isDirty&&s._subjects.state.next({isDirty:o})}},[s,n.isDirty]),at.useEffect(()=>{e.values&&!X0(e.values,r.current)?(s._reset(e.values,{keepFieldsRef:!0,...s._options.resetOptions}),r.current=e.values,a(o=>({...o}))):s._resetDefaultValues()},[s,e.values]),at.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),t.current.formState=N0t(n,s),t.current}const VD=pt(Er,"alternancias");async function H0t(e){return(await an(VD,{...e,createdAt:za(),updatedAt:za()})).id}async function V0t({especialidad:e,pageSize:t=10,lastDoc:r}){let n=Vt(VD,cr("createdAt","desc"),Ld(t));e&&(n=Vt(VD,wr("especialidad","==",e),cr("createdAt","desc"),Ld(t))),r&&(n=Vt(n,kee(r)));const a=await mn(n);return{items:a.docs.map(o=>({id:o.id,...o.data()})),lastDoc:a.docs[a.docs.length-1]}}async function z0t(e,t){const r=rr(Er,"alternancias",e);await Bl(r,{...t,updatedAt:za()})}async function $0t(e){const t=rr(Er,"alternancias",e);await ka(t)}async function G0t(e,t,r){const n=pt(Er,"alternancias",e,t);await an(n,{...r,createdAt:za()})}async function q0t(e,t){const r=`alternancias/${e}/evidencias/${Date.now()}_${t.name}`,n=J2(eR,r);await YP(n,t);const a=await $k(n);return await G0t(e,"evidencias",{url:a,path:r,nombre:t.name}),{url:a,path:r}}const Cp=({title:e,icon:t,children:r,accent:n="indigo"})=>{const a={indigo:"border-indigo-200 bg-indigo-50/60",emerald:"border-emerald-200 bg-emerald-50/60",amber:"border-amber-200 bg-amber-50/60",sky:"border-sky-200 bg-sky-50/60",slate:"border-slate-200 bg-white/70"};return i.jsxs("div",{className:`rounded-2xl border ${a[n]} p-4 md:p-5 shadow-sm`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-9 h-9 rounded-xl bg-white shadow-sm border border-slate-200",children:t}),i.jsx("h2",{className:"text-lg md:text-xl font-semibold text-slate-800",children:e})]}),r]})},Ff=({children:e,hint:t})=>i.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),t&&i.jsx("span",{className:"text-[11px] text-slate-500",children:t})]}),c5=({children:e,tone:t="indigo"})=>{const r={indigo:"bg-indigo-100 text-indigo-700 border-indigo-200",emerald:"bg-emerald-100 text-emerald-700 border-emerald-200",amber:"bg-amber-100 text-amber-800 border-amber-200",sky:"bg-sky-100 text-sky-700 border-sky-200"};return i.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${r[t]}`,children:e})},_p=({title:e,onClick:t,tone:r="neutral",children:n,type:a="button",disabled:s})=>{const o={primary:"bg-indigo-600 hover:bg-indigo-700 text-white border border-indigo-700 shadow-sm",danger:"bg-rose-600 hover:bg-rose-700 text-white border border-rose-700 shadow-sm",warning:"bg-amber-500 hover:bg-amber-600 text-white border border-amber-600 shadow-sm",success:"bg-emerald-600 hover:bg-emerald-700 text-white border border-emerald-700 shadow-sm",neutral:"bg-white hover:bg-slate-50 text-slate-700 border border-slate-200 shadow-sm"};return i.jsx("button",{type:a,title:e,onClick:t,disabled:s,className:`inline-flex items-center gap-2 px-3 py-2 rounded-xl text-sm transition ${o[r]} disabled:opacity-60`,children:n})},K0t=({currentUser:e})=>{const[t,r]=C.useState([]),[n,a]=C.useState(null),[s,o]=C.useState(!1),{register:l,control:c,handleSubmit:u,reset:d,watch:f,setValue:h,formState:{isSubmitting:m}}=Q0t({defaultValues:{especialidad:"",curso:[],institucion:"",modulos:[],tipoAlternancia:[],fundamentacion:"",actividades:[],equipo:[],contrapartes:[],tutores:[],analisisCurricular:""}}),g=U0t({control:c,name:"actividades"}),x=["COORDINACION_TP","SUBDIRECCION"],v=((e==null?void 0:e.role)||"").toString().trim().toUpperCase();if(!(!v||x.some(L=>v.includes(L))))return i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"rounded-xl border border-rose-200 bg-rose-50/60 p-4 text-rose-700 flex items-center gap-2",children:[i.jsx(xEe,{className:"w-5 h-5"}),"Acceso no autorizado"]})});const w=L=>(L||"").replace(/\s*[-–]\s*\d+\s*horas?$/i,"").trim(),_=(L,Z)=>{var V;return!L||!Z?[]:((V=ewe[L])==null?void 0:V[Z])??[]},T=f("especialidad"),j=f("modulos")||[],I=C.useMemo(()=>T?Yye[T]??[]:[],[T]),E=C.useMemo(()=>T?Zye[T]??[]:[],[T]);C.useEffect(()=>{h("curso",[]),h("modulos",[]);const L=[...f("actividades")||[]].map(Z=>({...Z,modulo:"",oa:""}));h("actividades",L)},[T]),C.useEffect(()=>{const L=[...f("actividades")||[]].map(Z=>Z.modulo&&!j.includes(Z.modulo)?{...Z,modulo:"",oa:""}:Z);h("actividades",L)},[j]);const S=async()=>{o(!0);const{items:L}=await V0t({});r(L),o(!1)};C.useEffect(()=>{S()},[]);const B=async L=>{n?await z0t(n,{...L}):await H0t({...L,createdBy:(e==null?void 0:e.email)||"desconocido"}),d(),a(null),await S()},M=L=>{const Z=Array.isArray(L.curso)?L.curso:L.curso?[L.curso]:[],V=Array.isArray(L.modulos)?L.modulos.map(G=>w(G)):[],q=Array.isArray(L.actividades)?L.actividades.map(G=>({...G,modulo:G!=null&&G.modulo?w(G.modulo):"",oa:(G==null?void 0:G.oa)||""})):[];d({...L,curso:Z,modulos:V,actividades:q}),a(L.id),window.scrollTo({top:0,behavior:"smooth"})},R=async L=>{confirm("¿Eliminar esta alternancia?")&&(await $0t(L),await S())},k=async(L,Z)=>{await q0t(L,Z),alert("Evidencia subida correctamente")},D=L=>{const Z=Array.from(L.currentTarget.selectedOptions).map(V=>V.value);h("curso",Z,{shouldDirty:!0})};return i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsx("div",{className:"mb-6 rounded-2xl bg-gradient-to-r from-indigo-600 via-sky-600 to-emerald-600 text-white p-5 shadow-sm",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-11 h-11 rounded-xl bg-white/10 flex items-center justify-center",children:i.jsx(N_,{className:"w-6 h-6"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl md:text-2xl font-semibold",children:"Formación por Alternancia"}),i.jsx("p",{className:"text-white/90 text-sm",children:"Registra planes, actividades y evidencias. Interfaz moderna, responsiva y con íconos."})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(_p,{title:"Nuevo plan",onClick:()=>{d(),a(null)},tone:"neutral",children:[i.jsx(Nh,{className:"w-4 h-4"}),"Limpiar"]}),i.jsxs(_p,{title:"Guardar",type:"submit",tone:"success",disabled:m,children:[m?i.jsx(wl,{className:"w-4 h-4 animate-spin"}):i.jsx(Kc,{className:"w-4 h-4"}),"Guardar"]})]})]})}),i.jsx(Cp,{title:"Planes guardados",icon:i.jsx(xg,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:s?i.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[i.jsx(wl,{className:"w-4 h-4 animate-spin"})," Cargando…"]}):t.length===0?i.jsx("p",{className:"text-slate-500 text-sm",children:"No hay alternancias registradas"}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(L=>i.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm hover:shadow-md transition",children:i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-semibold",children:[i.jsx(Yp,{className:"w-4 h-4 text-indigo-600"}),L.especialidad]}),i.jsxs("div",{className:"text-sm text-slate-600 flex flex-wrap gap-2",children:[i.jsx(c5,{tone:"indigo",children:Array.isArray(L.curso)?L.curso.join(", "):L.curso}),i.jsx(c5,{tone:"sky",children:L.institucion}),(Array.isArray(L.tipoAlternancia)?L.tipoAlternancia:[]).slice(0,2).map(Z=>i.jsx(c5,{tone:"emerald",children:Z},Z))]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-1 rounded-xl bg-amber-500 hover:bg-amber-600 text-white text-xs px-3 py-2 transition",children:[i.jsx(Yb,{className:"w-4 h-4"}),i.jsx("input",{type:"file",className:"hidden",onChange:Z=>Z.target.files&&k(L.id,Z.target.files[0])}),"Evidencia"]}),i.jsxs(_p,{title:"Editar",onClick:()=>M(L),children:[i.jsx(k_,{className:"w-4 h-4"})," Editar"]}),i.jsxs(_p,{title:"Eliminar",onClick:()=>R(L.id),tone:"danger",children:[i.jsx(Is,{className:"w-4 h-4"})," Eliminar"]})]})]})},L.id))})}),i.jsxs("form",{onSubmit:u(B),className:"mt-6 space-y-5",children:[i.jsx(Cp,{title:"Contexto de la Alternancia",icon:i.jsx(C_,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx(Ff,{children:"Especialidad"}),i.jsxs("div",{className:"relative",children:[i.jsx(Yp,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),i.jsxs("select",{...l("especialidad"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-indigo-100",children:[i.jsx("option",{value:"",children:"Selecciona…"}),Wye.map(L=>i.jsx("option",{value:L,children:L},L))]})]})]}),i.jsxs("div",{children:[i.jsx(Ff,{children:"Institución"}),i.jsxs("div",{className:"relative",children:[i.jsx(C_,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),i.jsxs("select",{...l("institucion"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-sky-100",children:[i.jsx("option",{value:"",children:"Selecciona…"}),Xye.map(L=>i.jsx("option",{value:L,children:L},L))]})]})]}),i.jsxs("div",{children:[i.jsx(Ff,{hint:"Ctrl/Cmd + clic para seleccionar múltiples cursos.",children:"Cursos"}),i.jsxs("div",{className:"relative",children:[i.jsx(_o,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),i.jsx("select",{multiple:!0,size:4,...l("curso"),onChange:D,className:"w-full min-h-[120px] rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-emerald-100 disabled:opacity-50",disabled:!T,children:T?I.map(L=>i.jsx("option",{value:L,children:L},L)):i.jsx("option",{value:"",children:"Elige especialidad primero"})})]}),i.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(f("curso")||[]).map(L=>i.jsx(c5,{tone:"sky",children:L},L))})]})]})}),i.jsx(Cp,{title:"Módulos implicados",icon:i.jsx(oR,{className:"w-5 h-5 text-emerald-700"}),accent:"emerald",children:T?i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:E.map(L=>i.jsxs("label",{className:"flex items-start gap-2 rounded-xl border border-emerald-200 bg-white p-3 shadow-sm hover:shadow transition",children:[i.jsx("input",{type:"checkbox",value:L,className:"mt-1 accent-emerald-600",...l("modulos")}),i.jsx("span",{className:"text-sm text-slate-700",children:L})]},L))}):i.jsx("p",{className:"text-sm text-slate-500",children:"Elige una especialidad para ver los módulos."})}),i.jsx(Cp,{title:"Tipo de Alternancia",icon:i.jsx(Ov,{className:"w-5 h-5 text-amber-700"}),accent:"amber",children:i.jsx("div",{className:"flex gap-3 flex-wrap",children:Jye.map(L=>i.jsxs("label",{className:"inline-flex items-center gap-2 rounded-full border border-amber-200 bg-white px-3 py-2 text-sm shadow-sm hover:shadow transition",children:[i.jsx("input",{type:"checkbox",value:L,className:"accent-amber-600",...l("tipoAlternancia")}),i.jsx("span",{className:"text-slate-700",children:L})]},L))})}),i.jsx(Cp,{title:"Fundamentación técnico‑pedagógica",icon:i.jsx(vwe,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:i.jsx("textarea",{...l("fundamentacion"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Describe brevemente la finalidad pedagógica, vínculos curriculares y el aporte para los estudiantes."})}),i.jsx(Cp,{title:"Plan de actividades",icon:i.jsx(xg,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:i.jsxs("div",{className:"space-y-3",children:[g.fields.map((L,Z)=>{const V=f(`actividades.${Z}.modulo`)||"",q=_(T,V);return i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Ff,{children:"Fecha"}),i.jsx(ic,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),i.jsx("input",{type:"date",placeholder:"Fecha",...l(`actividades.${Z}.fecha`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{children:[i.jsx(Ff,{children:"Tipo"}),i.jsx("input",{placeholder:"Pasantía, visita, taller...",...l(`actividades.${Z}.tipo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{children:[i.jsx(Ff,{children:"Actividad"}),i.jsx("input",{placeholder:"Descripción breve",...l(`actividades.${Z}.actividad`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Ff,{children:"Lugar"}),i.jsx(S_,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),i.jsx("input",{placeholder:"Empresa/IP/CFT/Lab",...l(`actividades.${Z}.lugar`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Ff,{children:"Evidencias"}),i.jsx(ute,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),i.jsx("input",{placeholder:"Informe, fotos, lista asistencia...",...l(`actividades.${Z}.evidencias`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]})]}),i.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx(Ff,{children:"Módulo"}),i.jsxs("select",{...l(`actividades.${Z}.modulo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!T||j.length===0,children:[i.jsx("option",{value:"",children:!T&&"Elige especialidad arriba"||j.length===0&&"Selecciona módulos arriba"||"Selecciona…"}),j.map(G=>i.jsx("option",{value:G,children:G},G))]})]}),i.jsxs("div",{children:[i.jsx(Ff,{children:"Objetivo de Aprendizaje (OA)"}),i.jsxs("select",{...l(`actividades.${Z}.oa`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!V||q.length===0,children:[i.jsx("option",{value:"",children:V?q.length===0?"Sin OA definidos para este módulo":"Selecciona…":"Selecciona módulo primero"}),q.map(G=>i.jsx("option",{value:G,children:G},G))]})]})]}),i.jsx("div",{className:"mt-3 flex justify-end",children:i.jsxs(_p,{title:"Eliminar fila",onClick:()=>g.remove(Z),tone:"danger",children:[i.jsx(Is,{className:"w-4 h-4"}),"Eliminar actividad"]})})]},L.id)}),i.jsxs(_p,{title:"Agregar actividad",onClick:()=>g.append({fecha:"",tipo:"",actividad:"",lugar:"",evidencias:"",modulo:"",oa:""}),tone:"primary",children:[i.jsx(Co,{className:"w-4 h-4"})," Agregar actividad"]})]})}),i.jsx(Cp,{title:"Análisis Curricular",icon:i.jsx(Yp,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:i.jsx("textarea",{...l("analisisCurricular"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Módulos implicados + OA/AE asociados + distribución de horas (liceo/otro lugar)."})}),i.jsx("div",{className:"flex items-center justify-end gap-2",children:i.jsxs(_p,{title:"Guardar",type:"submit",tone:"success",disabled:m,children:[m?i.jsx(wl,{className:"w-4 h-4 animate-spin"}):i.jsx(es,{className:"w-4 h-4"}),"Guardar"]})})]})]})},zD=["INCIPIENTE","EN_DESARROLLO","LOGRADO","SOBRESALIENTE"],W0t={INCIPIENTE:25},X0t=["AULA","TALLER","EMPRESA"],eJ={escalaMin:1,escalaMax:7,porcentajeAprobacion:60,notaAprobacion:4,regla:"lineal"},Y0t="tp_especialidades",J0t="tp_modulos",Z0t="tp_resultados_aprendizaje",emt="tp_criterios_evaluacion",$D="tp_rubricas",fAe="tp_evidencias",AAe="tp_evaluaciones_comp",GD="config_evaluacion/competencias",tJ=()=>Date.now(),hAe=async()=>{const e=await Hm(rr(Er,GD));return e.exists()?e.data():(await yi(rr(Er,GD),eJ),eJ)},tmt=(e,t)=>{const{escalaMin:r,escalaMax:n,porcentajeAprobacion:a,notaAprobacion:s}=t;if(e<=a){const o=(s-r)/(a-0||1);return Number((r+o*(e-0)).toFixed(1))}else{const o=(n-s)/(100-a||1);return Number((s+o*(e-a)).toFixed(1))}},rmt=async(e,t)=>{const r=await hAe();let n=0,a=0;Object.entries(t).forEach(([l,c])=>{a+=c;const u=e[l],d=(u==null?void 0:u.puntaje)??W0t.INCIPIENTE;n+=d*c/100});const s=a?n/a*100:0,o=tmt(s,r);return{puntajeTotal:n,porcentaje:s,nota:o}},nmt=e=>{const t=Vt(pt(Er,Y0t),cr("nombre"));return hr(t,r=>{e(r.docs.map(n=>({id:n.id,...n.data()})))})},amt=async e=>{const t=Vt(pt(Er,J0t),wr("especialidadId","==",e),cr("nombre"));return(await mn(t)).docs.map(n=>({id:n.id,...n.data()}))},smt=async e=>{const t=Vt(pt(Er,Z0t),wr("moduloId","==",e),cr("codigo"));return(await mn(t)).docs.map(n=>({id:n.id,...n.data()}))},imt=async e=>{const t=Vt(pt(Er,emt),wr("raId","==",e),cr("codigo"));return(await mn(t)).docs.map(n=>({id:n.id,...n.data()}))},omt=async e=>e.id?(await Bl(rr(Er,$D,e.id),{...e,updatedAt:tJ()}),e.id):(await an(pt(Er,$D),{...e,updatedAt:tJ()})).id,mAe=async e=>{const t=Vt(pt(Er,$D),wr("raId","==",e)),n=(await mn(t)).docs[0];return n?{id:n.id,...n.data()}:null},lmt=async(e,t)=>{const r=J2(eR,t),n=await YP(r,e);return{url:await $k(n.ref),path:n.ref.fullPath}},cmt=e=>an(pt(Er,fAe),e),umt=(e,t)=>{const r=Vt(pt(Er,fAe),wr("raId","==",e),cr("fecha","desc"));return hr(r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},dmt=async e=>{const t=await mAe(e.raId),r=(t==null?void 0:t.ponderacionCE)??{},{puntajeTotal:n,porcentaje:a,nota:s}=await rmt(e.ceIdScores,r);return an(pt(Er,AAe),{...e,puntajeTotal:n,porcentaje:a,nota:s})},fmt=(e,t)=>{const r=Vt(pt(Er,AAe),wr("raId","==",e),cr("fecha","desc"));return hr(r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},Amt=async e=>{const t=await hAe();await yi(rr(Er,GD),{...t,...e},{merge:!0})},hmt=({raId:e,ces:t,rubrica:r,onSaved:n,currentUserId:a})=>{const[s,o]=C.useState(null);if(C.useEffect(()=>{o(e?r??{id:"",raId:e,niveles:zD,descriptores:[],ponderacionCE:Object.fromEntries(t.map(f=>[f.id,f.peso])),updatedAt:Date.now(),createdBy:a}:null)},[e,r,t,a]),!e)return i.jsx("div",{children:"Selecciona un RA para editar su rúbrica."});if(!s)return null;const l=(f,h)=>{o(m=>m&&{...m,ponderacionCE:{...m.ponderacionCE,[f]:h}})},c=(f,h,m)=>{o(g=>{if(!g)return g;const x=g.descriptores.filter(v=>!(v.ceId===f&&v.nivel===h));return{...g,descriptores:[...x,{ceId:f,nivel:h,descriptor:m,puntaje:h==="SOBRESALIENTE"?100:h==="LOGRADO"?75:h==="EN_DESARROLLO"?50:25}]}})},u=C.useMemo(()=>Object.values(s.ponderacionCE).reduce((f,h)=>f+(Number(h)||0),0),[s.ponderacionCE]),d=async()=>{const f=await omt(s);n==null||n(f)};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Rúbrica por CE (debe sumar 100%)"}),i.jsxs("div",{className:`px-2 py-1 rounded-full text-xs ${u===100?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:["Total: ",u,"%"]})]}),i.jsx("div",{className:"space-y-4",children:t.map(f=>i.jsxs("div",{className:"border rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"font-semibold text-slate-800",children:[f.codigo," — ",f.descriptor]}),i.jsxs("div",{className:"text-xs text-slate-500",children:["Evidencia esperada: ",f.evidenciaEsperada||"—"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-xs text-slate-500",children:"Peso"}),i.jsx("input",{type:"number",className:"w-20 border rounded-lg px-2 py-1",value:s.ponderacionCE[f.id]??0,onChange:h=>l(f.id,Number(h.target.value))}),i.jsx("span",{className:"text-xs text-slate-500",children:"%"})]})]}),i.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3",children:zD.map(h=>{const m=s.descriptores.find(g=>g.ceId===f.id&&g.nivel===h);return i.jsxs("div",{className:"bg-slate-50 border rounded-lg p-3",children:[i.jsx("div",{className:"text-xs font-medium text-slate-600 mb-1",children:h.replace("_"," ")}),i.jsx("textarea",{className:"w-full border rounded-lg px-2 py-1 text-sm",rows:2,value:(m==null?void 0:m.descriptor)||"",onChange:g=>c(f.id,h,g.target.value),placeholder:"Descriptor observable y medible…"})]},h)})})]},f.id))}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:d,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:[i.jsx(Kc,{className:"w-4 h-4"}),i.jsx("span",{children:"Guardar rúbrica"})]})})]})},mmt=({raId:e,currentUser:t,evidencias:r})=>{const[n,a]=C.useState(""),[s,o]=C.useState(""),[l,c]=C.useState("AULA"),[u,d]=C.useState(null),[f,h]=C.useState(""),[m,g]=C.useState(!1);if(!e)return i.jsx("div",{children:"Selecciona una RA para gestionar evidencias."});const x=async()=>{if(!(!u||!n)){g(!0);try{const v=u.name.split(".").pop(),y=`evidencias/${e}/${n}/${Date.now()}.${v}`,{url:w,path:_}=await lmt(u,y);await cmt({estudianteId:n,raId:e,ceId:s||void 0,url:w,tipo:pmt(u.name),fecha:Date.now(),autorId:t.id,contexto:l,observaciones:f,storagePath:_}),d(null),h(""),a(""),o("")}finally{g(!1)}}};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[i.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Estudiante (ID)",value:n,onChange:v=>a(v.target.value)}),i.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"CE (opcional)",value:s,onChange:v=>o(v.target.value)}),i.jsxs("select",{className:"border rounded-xl px-3 py-2",value:l,onChange:v=>c(v.target.value),children:[i.jsx("option",{value:"AULA",children:"AULA"}),i.jsx("option",{value:"TALLER",children:"TALLER"}),i.jsx("option",{value:"EMPRESA",children:"EMPRESA"})]}),i.jsx("input",{type:"file",onChange:v=>{var y;return d(((y=v.target.files)==null?void 0:y[0])||null)},className:"border rounded-xl px-3 py-2"})]}),i.jsx("textarea",{className:"w-full border rounded-xl px-3 py-2",rows:2,placeholder:"Observaciones…",value:f,onChange:v=>h(v.target.value)}),i.jsxs("button",{onClick:x,disabled:m||!u||!n,className:`flex items-center gap-2 rounded-xl px-4 py-2 ${m||!u||!n?"bg-slate-200 text-slate-500":"bg-indigo-600 hover:bg-indigo-700 text-white"}`,children:[i.jsx(Yb,{className:"w-4 h-4"}),i.jsx("span",{children:"Subir evidencia"})]}),i.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:r.map(v=>i.jsxs("a",{href:v.url,target:"_blank",rel:"noreferrer",className:"border rounded-xl p-3 hover:shadow",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[gmt(v.tipo),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:new Date(v.fecha).toLocaleString()}),i.jsxs("div",{className:"text-xs text-slate-500",children:[v.contexto," — Est.: ",v.estudianteId]})]})]}),v.observaciones&&i.jsx("div",{className:"text-xs text-slate-600 mt-2",children:v.observaciones})]},v.id))})]})},pmt=e=>{var r;const t=(r=e.split(".").pop())==null?void 0:r.toLowerCase();return["png","jpg","jpeg","webp","gif"].includes(t||"")?"imagen":["mp4","mov","avi","mkv","webm"].includes(t||"")?"video":["pdf","doc","docx","ppt","pptx","xls","xlsx","txt","csv"].includes(t||"")?"documento":"otro"},gmt=e=>{switch(e){case"imagen":return i.jsx(w2e,{className:"w-5 h-5 text-rose-600"});case"video":return i.jsx(l2e,{className:"w-5 h-5 text-indigo-600"});case"documento":return i.jsx(Md,{className:"w-5 h-5 text-emerald-600"});default:return i.jsx(Yb,{className:"w-5 h-5 text-slate-500"})}},rJ=["#6366F1","#22C55E","#F59E0B","#EF4444","#14B8A6","#8B5CF6","#F43F5E"],xmt=({raId:e})=>{const[t,r]=C.useState([]);if(C.useEffect(()=>{if(!e){r([]);return}const o=fmt(e,r);return()=>o()},[e]),!e)return i.jsx("div",{children:"Selecciona una RA para visualizar el dashboard."});const n=C.useMemo(()=>{const o={};return t.forEach(l=>{const c=l.curso||"—";o[c]||(o[c]={curso:c,promedio:0,n:0}),o[c].promedio+=l.nota,o[c].n+=1}),Object.values(o).map(l=>({curso:l.curso,promedio:Number((l.promedio/(l.n||1)).toFixed(2)),n:l.n}))},[t]),a=C.useMemo(()=>{const o={"1.0-3.9":0,"4.0-4.9":0,"5.0-5.9":0,"6.0-7.0":0};return t.forEach(l=>{l.nota<4?o["1.0-3.9"]++:l.nota<5?o["4.0-4.9"]++:l.nota<6?o["5.0-5.9"]++:o["6.0-7.0"]++}),Object.entries(o).map(([l,c])=>({rango:l,value:c}))},[t]),s=()=>{const o=t.map(u=>({id:u.id,estudianteId:u.estudianteId,curso:u.curso,raId:u.raId,porcentaje:u.porcentaje,nota:u.nota,fecha:new Date(u.fecha).toISOString(),contexto:u.contexto})),l=Ti.book_new(),c=Ti.json_to_sheet(o);Ti.book_append_sheet(l,c,"Evaluaciones_RA"),lE(l,`evaluaciones_${e}.xlsx`)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[i.jsx(zc,{className:"w-5 h-5 text-indigo-600"}),"Resumen de logro por curso"]}),i.jsxs("button",{onClick:s,className:"flex items-center gap-2 border rounded-xl px-3 py-2 hover:bg-slate-50",children:[i.jsx(Eh,{className:"w-4 h-4"}),i.jsx("span",{children:"Descargar CSV"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx("div",{className:"h-72 border rounded-xl p-3",children:i.jsx(ih,{width:"100%",height:"100%",children:i.jsxs(N2,{data:n,children:[i.jsx(Bg,{dataKey:"curso"}),i.jsx(Tg,{domain:[1,7]}),i.jsx(sh,{}),i.jsx(_b,{dataKey:"promedio"})]})})}),i.jsx("div",{className:"h-72 border rounded-xl p-3",children:i.jsx(ih,{width:"100%",height:"100%",children:i.jsxs(sM,{children:[i.jsx(Q4,{data:a,dataKey:"value",nameKey:"rango",outerRadius:90,label:!0,children:a.map((o,l)=>i.jsx(Fm,{fill:rJ[l%rJ.length]},`c-${l}`))}),i.jsx(sh,{}),i.jsx(n1,{})]})})})]}),i.jsx("div",{className:"text-xs text-slate-500",children:"Nota: los promedios consideran la conversión lineal configurable (Decreto 67)."})]})},Py=({active:e,onClick:t,icon:r,label:n})=>i.jsxs("button",{onClick:t,className:`flex items-center gap-2 px-3 py-2 rounded-full transition 
    ${e?"bg-indigo-600 text-white shadow":"bg-white text-slate-700 hover:bg-slate-100 border"}`,children:[r,i.jsx("span",{className:"font-medium",children:n})]}),rv=({children:e,className:t})=>i.jsx("div",{className:`bg-white rounded-2xl shadow-sm border p-4 ${t||""}`,children:e}),vmt=({currentUser:e})=>{const[t,r]=C.useState("planificacion"),[n,a]=C.useState([]),[s,o]=C.useState([]),[l,c]=C.useState([]),[u,d]=C.useState([]),[f,h]=C.useState({}),[m,g]=C.useState(null),[x,v]=C.useState([]);C.useEffect(()=>{const w=nmt(a);return()=>w()},[]),C.useEffect(()=>{f.especialidadId?amt(f.especialidadId).then(o):o([]),h(w=>({...w,moduloId:void 0,raId:void 0})),c([]),d([]),g(null)},[f.especialidadId]),C.useEffect(()=>{f.moduloId?smt(f.moduloId).then(c):c([]),h(w=>({...w,raId:void 0})),d([]),g(null)},[f.moduloId]),C.useEffect(()=>{if(f.raId){imt(f.raId).then(d),mAe(f.raId).then(g);const w=umt(f.raId,v);return()=>w()}else d([]),g(null),v([])},[f.raId]);const y=f.raId&&u.length>0;return i.jsxs("div",{className:"w-full min-h-screen bg-slate-50",children:[i.jsx("div",{className:"sticky top-0 z-10 bg-white border-b",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(oR,{className:"w-6 h-6 text-indigo-600"}),i.jsx("h1",{className:"text-xl font-semibold text-slate-800",children:"Evaluación por Competencias EMTP"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Py,{active:t==="planificacion",onClick:()=>r("planificacion"),icon:i.jsx(xg,{className:"w-4 h-4"}),label:"Planificar"}),i.jsx(Py,{active:t==="evaluar",onClick:()=>r("evaluar"),icon:i.jsx(lEe,{className:"w-4 h-4"}),label:"Evaluar"}),i.jsx(Py,{active:t==="evidencias",onClick:()=>r("evidencias"),icon:i.jsx(Yb,{className:"w-4 h-4"}),label:"Evidencias"}),i.jsx(Py,{active:t==="dashboard",onClick:()=>r("dashboard"),icon:i.jsx(zc,{className:"w-4 h-4"}),label:"Dashboard"}),i.jsx(Py,{active:t==="config",onClick:()=>r("config"),icon:i.jsx(pEe,{className:"w-4 h-4"}),label:"Config"})]})]})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[i.jsx(rv,{children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Especialidad"}),i.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.especialidadId||"",onChange:w=>h({especialidadId:w.target.value}),children:[i.jsx("option",{value:"",children:"— Selecciona —"}),n.map(w=>i.jsx("option",{value:w.id,children:w.nombre},w.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Módulo"}),i.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.moduloId||"",onChange:w=>h(_=>({..._,moduloId:w.target.value})),children:[i.jsx("option",{value:"",children:"— Selecciona —"}),s.map(w=>i.jsx("option",{value:w.id,children:w.nombre},w.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Resultado de Aprendizaje (RA)"}),i.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.raId||"",onChange:w=>h(_=>({..._,raId:w.target.value})),children:[i.jsx("option",{value:"",children:"— Selecciona —"}),l.map(w=>i.jsxs("option",{value:w.id,children:[w.codigo," — ",w.enunciado.slice(0,60),w.enunciado.length>60?"…":""]},w.id))]})]})]})}),t==="planificacion"&&i.jsx(rv,{children:i.jsx(hmt,{raId:f.raId,ces:u,rubrica:m,onSaved:w=>{},currentUserId:e.id})}),t==="evaluar"&&i.jsxs(rv,{children:[!y&&i.jsx("div",{className:"text-slate-600",children:"Selecciona una RA con criterios (CE) para comenzar a evaluar."}),y&&i.jsx(bmt,{raId:f.raId,ces:u,currentUser:e})]}),t==="evidencias"&&i.jsx(rv,{children:i.jsx(mmt,{raId:f.raId,currentUser:e,evidencias:x})}),t==="dashboard"&&i.jsx(rv,{children:i.jsx(xmt,{raId:f.raId})}),t==="config"&&i.jsx(rv,{children:i.jsx(ymt,{})})]})]})},bmt=({raId:e,ces:t,currentUser:r})=>{const[n,a]=C.useState(""),[s,o]=C.useState(r.curso||""),[l,c]=C.useState("AULA"),[u,d]=C.useState(""),[f,h]=C.useState({}),m=(v,y,w)=>{h(_=>({..._,[v]:{nivel:y,puntaje:w}}))},g=n&&Object.keys(f).length===t.length,x=async()=>{const v={estudianteId:n,curso:s,raId:e,ceIdScores:f,evaluadorId:r.id,fecha:Date.now(),contexto:l,retroalimentacion:u};await dmt(v),d(""),h({}),a("")};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Estudiante (ID)"}),i.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:n,onChange:v=>a(v.target.value),placeholder:"rut_o_uid"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Curso"}),i.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:s,onChange:v=>o(v.target.value),placeholder:"p.ej. 3ºB"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Contexto"}),i.jsx("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:l,onChange:v=>c(v.target.value),children:X0t.map(v=>i.jsx("option",{value:v,children:v},v))})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("button",{disabled:!g,onClick:x,className:`w-full flex items-center justify-center gap-2 rounded-xl px-3 py-2 transition ${g?"bg-emerald-600 hover:bg-emerald-700 text-white":"bg-slate-200 text-slate-500 cursor-not-allowed"}`,children:[i.jsx(es,{className:"w-4 h-4"}),i.jsx("span",{children:"Guardar evaluación"})]})})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:t.map(v=>i.jsxs("div",{className:"border rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h4",{className:"font-semibold text-slate-800",children:[v.codigo," — ",v.descriptor]}),i.jsxs("span",{className:"text-xs text-slate-500",children:["Peso ",v.peso,"%"]})]}),i.jsx("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-2",children:zD.map(y=>{var w;return i.jsx("button",{onClick:()=>m(v.id,y,y==="SOBRESALIENTE"?100:y==="LOGRADO"?75:y==="EN_DESARROLLO"?50:25),className:`px-3 py-2 rounded-lg border text-sm ${((w=f[v.id])==null?void 0:w.nivel)===y?"bg-indigo-600 text-white":"bg-white hover:bg-slate-50"}`,children:y.replace("_"," ")},y)})})]},v.id))}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Retroalimentación formativa"}),i.jsx("textarea",{value:u,onChange:v=>d(v.target.value),className:"mt-1 w-full border rounded-xl px-3 py-2",rows:3,placeholder:"Sugerencias específicas para mejorar..."})]})]})},ymt=()=>{const[e,t]=C.useState(60),[r,n]=C.useState(4),a=async()=>{await Amt({porcentajeAprobacion:e,notaAprobacion:r})};return i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Porcentaje de aprobación (%)"}),i.jsx("input",{type:"number",className:"mt-1 w-full border rounded-xl px-3 py-2",value:e,onChange:s=>t(Number(s.target.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500",children:"Nota de aprobación"}),i.jsx("input",{type:"number",step:"0.1",className:"mt-1 w-full border rounded-xl px-3 py-2",value:r,onChange:s=>n(Number(s.target.value))})]}),i.jsx("button",{onClick:a,className:"self-end bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:"Guardar"})]})},nJ=["Localizar información explícita","Realizar inferencias a partir del texto","Interpretar y relacionar información del texto","Reflexionar sobre el texto y evaluarlo","Analizar aspectos formales del texto","Reconocer tipos de texto según su propósito comunicativo","Comprender vocabulario en contexto"],aJ=["Números y operaciones","Álgebra y funciones","Geometría","Probabilidad y estadística","Resolución de problemas","Modelamiento matemático","Argumentación y comunicación matemática"],b1="simce_sets",A7="simce_resultados";async function wmt(e){try{return(await an(pt(lt,b1),e)).id}catch(t){throw console.error("Error al crear set de preguntas:",t),new Error("No se pudo crear el set de preguntas")}}async function Emt(e,t){try{await Bl(rr(lt,b1,e),t)}catch(r){throw console.error("Error al actualizar set de preguntas:",r),new Error("No se pudo actualizar el set de preguntas")}}async function Nmt(e){try{const t=await Hm(rr(lt,b1,e));if(t.exists())return{id:t.id,...t.data()};throw new Error("El set de preguntas no existe")}catch(t){throw console.error("Error al obtener set de preguntas:",t),new Error("No se pudo obtener el set de preguntas")}}async function pAe(e){try{const t=Vt(pt(lt,b1),wr("creadorId","==",e),cr("fechaCreacion","desc"));return(await mn(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener sets de preguntas:",t),new Error("No se pudieron obtener los sets de preguntas")}}async function Cmt(e){try{const t=Vt(pt(lt,b1),wr("cursosAsignados","array-contains",e),cr("fechaCreacion","desc"));return(await mn(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener sets de preguntas por curso:",t),new Error("No se pudieron obtener los sets de preguntas")}}async function _mt(e){try{await ka(rr(lt,b1,e))}catch(t){throw console.error("Error al eliminar set de preguntas:",t),new Error("No se pudo eliminar el set de preguntas")}}async function Smt(e){try{return(await an(pt(lt,A7),e)).id}catch(t){throw console.error("Error al guardar resultado de intento:",t),new Error("No se pudo guardar el resultado")}}async function gAe(e){try{const t=Vt(pt(lt,A7),wr("setId","==",e),cr("fechaEnvio","desc"));return(await mn(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener resultados por set:",t),new Error("No se pudieron obtener los resultados")}}async function kmt(e){try{const t=Vt(pt(lt,A7),wr("estudianteId","==",e),cr("fechaEnvio","desc"));return(await mn(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener resultados por estudiante:",t),new Error("No se pudieron obtener los resultados del estudiante")}}async function jmt(e,t){try{return(await Cmt(t)).map(n=>({id:n.id,titulo:n.titulo,descripcion:n.descripcion||"",asignatura:n.asignatura,preguntas:n.preguntas,fechaAsignacion:n.fechaCreacion||new Date().toISOString()}))}catch(r){return console.error("Error en obtenerEvaluacionesEstudiante:",r),[]}}async function qD(e){try{return await Nmt(e)||null}catch(t){return console.error("Error en obtenerEvaluacionPorId:",t),null}}async function Bmt(e){try{const t={...e,setId:e.evaluacionId||e.setId||null,respuestas:e.respuestas||[],porcentajeAciertos:e.porcentajeLogro||e.porcentajeAciertos||0,nivelLogro:e.nivelLogro||"Insuficiente",fechaEnvio:e.fechaRealizacion||new Date().toISOString()};return await Smt(t)}catch(t){throw console.error("Error en guardarIntentoEvaluacion:",t),t}}async function Tmt(e,t){try{return(await kmt(e)).filter(a=>a.setId===t)}catch(r){return console.error("Error en verificarIntentoExistente:",r),[]}}async function Imt(e){try{return(await pAe(e)).map(r=>({id:r.id,titulo:r.titulo,descripcion:r.descripcion||"",asignatura:r.asignatura,preguntas:r.preguntas,fechaCreacion:r.fechaCreacion||new Date().toISOString(),cursosAsignados:r.cursosAsignados||[]}))}catch(t){return console.error("Error en obtenerEvaluacionesPorProfesor:",t),[]}}async function Fmt(e){try{return await gAe(e)}catch(t){return console.error("Error en obtenerIntentosPorEvaluacion:",t),[]}}async function Omt(e,t){try{const n=(await gAe(e)).filter(h=>h.estudianteId&&h.curso===t),a=n.length;if(a===0)return{totalEstudiantes:0,promedioLogro:0,nivelPredominante:"Insuficiente",porcentajeAdecuado:0,porcentajeElemental:0,porcentajeInsuficiente:0,porEjeTematico:[],porPregunta:[]};const s=n.reduce((h,m)=>h+(m.porcentajeAciertos||m.porcentajeLogro||0),0)/a;let o=0,l=0,c=0;n.forEach(h=>{const m=h.porcentajeAciertos||h.porcentajeLogro||0;m>=80?o++:m>=50?l++:c++});const u=o/a*100,d=l/a*100,f=c/a*100;return{totalEstudiantes:a,promedioLogro:s,nivelPredominante:u>=Math.max(d,f)?"Adecuado":d>=f?"Elemental":"Insuficiente",porcentajeAdecuado:u,porcentajeElemental:d,porcentajeInsuficiente:f,porEjeTematico:[],porPregunta:[]}}catch(r){return console.error("Error en obtenerEstadisticasPorCurso:",r),null}}function Dmt(e){if(!e)return;let t=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`).replace(/\n{3,}/g,`

`).replace(/\t/g,"  ").trim();const r=4e3;return t.length>r&&(console.log(`Texto proporcionado truncado de ${t.length} a ${r} caracteres`),t=t.substring(0,r)+`

[Texto truncado por límite de tamaño]`),t}async function Pmt(e,t){try{let r;typeof e=="string"?r={asignatura:e,cantidad:t??5}:(r=e,r.textoProporcionado&&(r.textoProporcionado=Dmt(r.textoProporcionado)));const n=r.cantidad??4,a=4;r.nivel&&!["1M","2M"].includes(r.nivel)&&(r.nivel=r.nivel==="1"?"1M":r.nivel==="2"?"2M":r.nivel),console.log(`Generando ${n} preguntas de ${r.asignatura}, nivel ${r.nivel||"1M"}`);const s=Rmt(r,n,a);console.log("Enviando prompt a la IA (usando modelo Pro para mejor calidad)...");const o=await d0t(s,2,!0);if(!o)throw console.error("La IA no devolvió respuesta"),new Error("No se recibió respuesta del modelo de IA. Por favor, intente nuevamente.");return console.log("Procesando respuesta de la IA..."),Mmt(o,n,r)}catch(r){throw console.error("Error en generarPreguntasSimce:",r),r instanceof Error?r:new Error("Ocurrió un error al generar las preguntas SIMCE. Por favor, intente nuevamente.")}}function Rmt(e,t,r){const n=e.asignatura,s=(e.nivel||"1M")==="1M"?"1º medio":"2º medio",o=e.dificultad||"media",l={baja:"facil",media:"media",alta:"dificil"},c=[];if(c.push("Eres un generador pedagógico especializado en preguntas tipo SIMCE para Chile."),c.push(`Tu tarea es crear exactamente ${t} preguntas de alta calidad de la asignatura "${n}" para nivel ${s} (Chile).`),n==="Lectura"){c.push(`
ESPECIFICACIONES PARA LECTURA:`);const u=e.habilidadesLectura&&e.habilidadesLectura.length>0?e.habilidadesLectura:["Localizar información","Relacionar información","Interpretar","Reflexionar y evaluar"];c.push(`- Habilidades a evaluar: ${u.join(", ")}`),c.push("- Cada pregunta debe evaluar específicamente UNA de estas habilidades."),c.push("- Distribuye las preguntas entre las habilidades seleccionadas.");const d=e.textoProporcionado&&e.textoProporcionado.trim().length>0,f=e.textoBaseLectura&&e.textoBaseLectura.trim().length>0;d?(c.push(`
- IMPORTANTE: Utilizarás EXCLUSIVAMENTE el texto proporcionado por el usuario para generar preguntas.`),c.push("- NO generes un texto adicional, usa únicamente el texto que se proporciona más adelante."),c.push("- Todas las preguntas deben estar directamente basadas en este texto.")):f?(c.push(`
- Utilizarás el texto base proporcionado para generar preguntas.`),c.push("- Todas las preguntas deben estar directamente basadas en este texto.")):(c.push(`
- Como no se ha proporcionado un texto base, DEBES CREAR un texto original:`),c.push("  * Extensión: 200-350 palabras"),c.push("  * Apropiado para estudiantes de "+s),c.push("  * Culturalmente relevante para Chile, pero neutro (sin controversias)"),c.push("  * Sin marcas comerciales ni contenido con derechos de autor"),c.push('  * El texto debe incluirse en la propiedad "textoBase" del primer ítem solamente'))}else if(n==="Matemática"){c.push(`
ESPECIFICACIONES PARA MATEMÁTICA:`);const u=e.ejesMatematica&&e.ejesMatematica.length>0?e.ejesMatematica:["Números","Álgebra y Funciones","Geometría","Probabilidad y Estadística"];c.push(`- Ejes temáticos a evaluar: ${u.join(", ")}`),c.push("- Cada pregunta debe evaluar específicamente UNO de estos ejes."),c.push("- Distribuye las preguntas entre los ejes seleccionados."),c.push("- Usa contextos matemáticos realistas y escolares, relevantes para la vida diaria de estudiantes chilenos."),e.textoProporcionado&&(c.push(`
- IMPORTANTE: Utilizarás el texto proporcionado por el usuario como contexto o referencia para generar problemas matemáticos.`),c.push("- Las preguntas pueden incluir datos o situaciones mencionadas en el texto."))}if(c.push(`
REGLAS DE FORMATO DE SALIDA:`),c.push("- Devuelve UN ÚNICO bloque JSON (sin texto adicional antes o después)."),c.push("- El JSON debe ser un arreglo de objetos; cada objeto representa una pregunta con este esquema EXACTO:"),c.push("  {"),c.push('    "id": "p1",'),c.push('    "enunciado": "Texto del enunciado...",'),c.push('    "alternativas": ['),c.push('      {"id": "A", "texto": "...", "esCorrecta": true, "explicacion": "Justificación detallada..."},'),c.push('      {"id": "B", "texto": "...", "esCorrecta": false},'),c.push('      {"id": "C", "texto": "...", "esCorrecta": false},'),c.push('      {"id": "D", "texto": "...", "esCorrecta": false}'),c.push("    ],"),n==="Lectura"?(c.push('    "habilidad": "Una de las habilidades especificadas",'),e.textoBaseLectura||c.push('    "textoBase": "El texto completo aquí (solo en el primer ítem)",')):c.push('    "eje": "Uno de los ejes especificados",'),c.push('    "estandarAprendizaje": "Estándar curricular específico",'),c.push(`    "dificultad": "${l[o]}"`),c.push("  }"),c.push(`
REGLAS DE CALIDAD:`),c.push("1. Enunciados claros y directos, sin ambigüedades."),c.push(`2. EXACTAMENTE ${r} alternativas por pregunta (etiquetadas A, B, C, D).`),c.push("3. Solo UNA alternativa correcta por pregunta."),c.push('4. La alternativa correcta debe tener "esCorrecta": true y debe incluir una "explicacion" pedagógica.'),c.push("5. Distractores (alternativas incorrectas) deben representar errores típicos (conceptuales o procedimentales)."),c.push("6. Las preguntas deben estar alineadas rigurosamente con el currículum chileno para "+s+"."),c.push(`7. Ajusta el nivel de dificultad a "${o}" (${l[o]}).`),c.push("8. Usa lenguaje claro, inclusivo y español chileno estándar."),c.push("9. Evita contenido con derechos de autor, marcas comerciales y temas sensibles."),e.contextoCurricular&&(c.push(`
CONTEXTO CURRICULAR ESPECÍFICO:`),c.push(e.contextoCurricular),c.push("- Alinea tus ítems al contexto curricular provisto.")),e.textoProporcionado||e.textoBaseLectura&&n==="Lectura"){const u=!!e.textoProporcionado,d=u?`
TEXTO PROPORCIONADO POR EL USUARIO:`:`
TEXTO BASE PARA LECTURA:`;c.push(d);const f=e.textoProporcionado||e.textoBaseLectura;c.push('"""'),c.push(f),c.push('"""'),c.push(`
- Formula las preguntas ÚNICAMENTE sobre este texto.`),c.push("- IMPORTANTE: NO incluyas el texto en la propiedad textoBase del JSON, ya fue provisto externamente."),u&&(c.push("- Este es un texto proporcionado por el usuario, asegúrate de formular preguntas relevantes y precisas."),n==="Matemática"&&(c.push("- Para matemáticas, extrae datos numéricos y situaciones del texto para formular problemas matemáticos relacionados."),c.push("- Cuando sea relevante, inventa datos numéricos coherentes con la situación para completar los problemas.")))}return c.push(`
IMPORTANTE: Produce SOLO el arreglo JSON, sin texto introductorio ni comentarios adicionales.`),c.join(`
`)}function Lmt(e){if(!e||typeof e!="string")return console.error("Texto de entrada inválido:",e),null;console.log("Iniciando extracción JSON con algoritmo mejorado..."),e=e.replace(/^\uFEFF/,"");try{const t=e.match(/```(?:json)?\s*([\s\S]*?)\s*```/ig);if(t&&t.length>0){console.log(`Encontrados ${t.length} bloques de código potenciales`);for(const r of t){const n=r.replace(/```(?:json)?|```/ig,"").trim();console.log(`Probando bloque de código: ${n.substring(0,50)}...`);const a=nv(n);try{return JSON.parse(a),console.log("JSON válido extraído del bloque de código"),a}catch{console.log("JSON en este bloque de código es inválido, continuando con siguiente bloque...")}}}}catch(t){console.log("Error procesando bloques de código:",t)}try{const t=/(\[\s*\{[\s\S]*?\}\s*\])/i.exec(e);if(t&&t[1]){const r=nv(t[1].trim());try{return JSON.parse(r),console.log("JSON completo válido encontrado directamente"),r}catch{console.log("JSON completo parece inválido, continuando...")}}}catch(t){console.log("Error buscando JSON completo:",t)}try{const t=e.indexOf("[");if(t>=0&&e.indexOf('"id":',t)>t){console.log("Analizando estructura desde el inicio del array...");const n=e.lastIndexOf("]");let a;if(n>t)a=e.substring(t,n+1);else{const o=/"id"\s*:\s*"p\d+"/g;let l,c=-1,u="";for(;(l=o.exec(e))!==null;)c=l.index,u=l[0];if(console.log(`Última pregunta encontrada: ${u} en posición ${c}`),c>0){let d=e.indexOf('"id":',c+u.length);d===-1?d=e.length:(d=e.lastIndexOf("}",d),d===-1?d=e.length:d+=1),a=e.substring(t,d)+"]"}else a=e.substring(t)+"]"}const s=nv(a);try{return JSON.parse(s),console.log("JSON reconstruido desde inicio del array"),s}catch{console.log("JSON reconstruido inválido, continuando...")}}}catch(t){console.log("Error en estrategia de reconstrucción desde inicio:",t)}try{console.log("Buscando primera pregunta completa...");const r=/\{[\s\S]*?"id"\s*:\s*"p1"[\s\S]*?"enunciado"[\s\S]*?"alternativas"[\s\S]*?\}/.exec(e);if(r){let n=r[0];if(n.includes('"alternativas"')&&n.includes('"id": "A"')){const a=["A","B","C","D"],s=[];for(const o of a)n.includes(`"id": "${o}"`)&&s.push(o);if(console.log(`Alternativas encontradas en p1: ${s.join(", ")}`),s.length>0){const o=n.indexOf('"alternativas"');if(!n.substring(o).includes("]}")){console.log("Estructura de alternativas incompleta, reconstruyendo...");let d=-1,f="";for(const h of s){const m=n.lastIndexOf(`"id": "${h}"`);m>d&&(d=m,f=h)}if(d!==-1){console.log(`Última alternativa completa: ${f}`);const h=n.indexOf("}",d);h!==-1&&(n=n.substring(0,h+1),n.includes("]}")||(n+="]}"))}}let c=`[${n}]`;const u=nv(c);try{return JSON.parse(u),console.log("Primera pregunta reconstruida con éxito"),u}catch(d){console.log("Error al parsear primera pregunta reconstruida:",d)}}}}}catch(t){console.log("Error buscando primera pregunta:",t)}try{console.log("Intentando extracción quirúrgica del enunciado...");const t=e.match(/"enunciado"\s*:\s*"([^"]+)"/);if(t&&t[1]){const r=t[1].replace(/"/g,'\\"');console.log("Enunciado encontrado:",r.substring(0,30)+"...");let n="A";const a=e.match(/"respuesta"\s*:\s*"([A-D])"/);a&&a[1]&&(n=a[1]);let s="No disponible";const o=e.match(/"explicacion"\s*:\s*"([^"]+)"/);o&&o[1]&&(s=o[1].replace(/"/g,'\\"'));const l=`[{
        "id": "p1",
        "enunciado": "${r}",
        "alternativas": [
          {"id": "A", "texto": "Opción recuperada parcialmente", "esCorrecta": ${n==="A"}, "explicacion": "${n==="A"?s:""}"},
          {"id": "B", "texto": "Opción recuperada parcialmente", "esCorrecta": ${n==="B"}, "explicacion": "${n==="B"?s:""}"},
          {"id": "C", "texto": "Opción recuperada parcialmente", "esCorrecta": ${n==="C"}, "explicacion": "${n==="C"?s:""}"},
          {"id": "D", "texto": "Opción recuperada parcialmente", "esCorrecta": ${n==="D"}, "explicacion": "${n==="D"?s:""}"}
        ],
        "respuesta": "${n}",
        "explicacion": "${s}",
        "habilidad": "Recuperación parcial",
        "estandarAprendizaje": "Contenido recuperado parcialmente"
      }]`;try{const c=nv(l);return JSON.parse(c),console.log("Generado JSON de emergencia con enunciado recuperado"),c}catch(c){console.log("Error al parsear JSON de emergencia:",c)}}}catch(t){console.log("Error en extracción quirúrgica:",t)}try{return console.log("Construyendo JSON mínimo de respaldo..."),nv(`[{
      "id": "p1",
      "enunciado": "La respuesta de la IA no pudo ser procesada correctamente. Por favor, intente nuevamente.",
      "alternativas": [
        {"id": "A", "texto": "Volver a generar preguntas", "esCorrecta": true, "explicacion": "El sistema detectó un formato incorrecto en la respuesta de la IA y no pudo procesarla."},
        {"id": "B", "texto": "Opción no disponible", "esCorrecta": false},
        {"id": "C", "texto": "Opción no disponible", "esCorrecta": false},
        {"id": "D", "texto": "Opción no disponible", "esCorrecta": false}
      ],
      "respuesta": "A",
      "explicacion": "Se recomienda intentar generar nuevamente o con diferentes parámetros."
    }]`)}catch(t){console.error("Error final en construcción de JSON de respaldo:",t)}return console.error("Todos los métodos de extracción JSON fallaron"),null}function nv(e){const t=e;console.log(`Limpiando JSON (primeros 50 caracteres): ${e.substring(0,50).replace(/\n/g,"\\n")}...`);const r=()=>{if(e.includes('"alternativas"')&&e.lastIndexOf('"alternativas"')>e.lastIndexOf("]"))return console.log("JSON truncado detectado en array de alternativas"),!0;const f=e.lastIndexOf("{"),h=e.lastIndexOf("}");if(f>h)return console.log("JSON truncado con objeto incompleto al final"),!0;const m=(w,_)=>(w.match(new RegExp("\\"+_,"g"))||[]).length,g=m(e,"{"),x=m(e,"}"),v=m(e,"["),y=m(e,"]");return g!==x||v!==y?(console.log("JSON con estructura desbalanceada",{llaveAbiertas:g,llaveCerradas:x,corcheteAbiertos:v,corcheteCerrados:y}),!0):!1},n=[];for(let f=0;f<e.length;f++){const h=e.charCodeAt(f);h<32&&h!==9&&h!==10&&h!==13&&n.push({posicion:f,codigo:h,contexto:e.substring(Math.max(0,f-15),f)+"|PROBLEMA|"+e.substring(f+1,f+15)})}n.length>0&&(console.log(`Detectados ${n.length} caracteres de control problemáticos`),n.slice(0,3).forEach(f=>{console.log(`Carácter de control en posición ${f.posicion}, código U+${f.codigo.toString(16).padStart(4,"0")}`),console.log(`Contexto: ${f.contexto}`)})),e=e.replace(/^\uFEFF/,"");let a="";for(let f=0;f<e.length;f++){const h=e.charCodeAt(f);h>=32&&h<=126||h===9||h===10||h===13?a+=e[f]:a+=" "}if(e=a,e=e.replace(/\/\/.*/g,""),e=e.replace(/\/\*[\s\S]*?\*\//g,""),e=e.replace(/(\s*)(\w+)(\s*):(\s*)/g,'$1"$2"$3:$4'),e=e.replace(/,(\s*[\]}])/g,"$1"),r()){console.log("Intentando reparar JSON truncado...");const f=e.match(/\{\s*"id"\s*:\s*"p1"[\s\S]*?(?="id"|$)/);if(f){let h=f[0];if(h.includes('"enunciado"')&&h.includes('"alternativas"')&&!h.includes('"}]}')&&(h.match(/"id"\s*:\s*"[A-D]"/g)||[]).length>0){let g=-1,x=-1,v=0;for(;(x=h.indexOf(`"id": "${String.fromCharCode(65+v)}"`,x+1))!==-1&&(g=x,v++,!(v>=4)););if(g!==-1){const y=h.indexOf("}",g);if(y!==-1){let w=h.substring(0,y+1);w+=" ] }",e=`[ ${w} ]`,console.log("JSON reconstruido desde alternativa incompleta")}}}}}let s="",o=!1,l=!1;for(let f=0;f<e.length;f++){const h=e[f],m=e.charCodeAt(f);o?l?(s+=h,l=!1):h==="\\"?(s+=h,l=!0):h==='"'?(s+=h,o=!1):m<32?(s+="\\u"+("0000"+m.toString(16)).slice(-4),console.log(`Escapado carácter de control en posición ${f}: U+${m.toString(16).padStart(4,"0")}`)):h==='"'&&e[f-1]!=="\\"?(s+='\\"',console.log(`Escapada comilla sin escapar en posición ${f}`)):s+=h:(h==='"'&&!o&&(o=!0),s+=h)}e=s,e=e.replace(/:(\s*)(true|false)(\s*[,}])/g,(f,h,m,g)=>": "+m+g),e=e.replace(/"(explicacion|explanation)"\s*:\s*"([^"]*)"/g,(f,h,m)=>{const g=m.replace(/"/g,'\\"');return`"${h}": "${g}"`}),e=e.replace(/[ \t]+/g," ").trim(),!e.startsWith("[")&&e.includes('"id": "p1"')&&(e=`[${e}]`,console.log("Encapsulando objeto en array")),!(e.endsWith("}]")||e.endsWith('"]'))&&e.includes('"id": "p1"')&&(e.lastIndexOf("{")>e.lastIndexOf("}")&&(e+="}",console.log("Cerrando objeto abierto")),e.lastIndexOf("[")>e.lastIndexOf("]")&&(e+="]",console.log("Cerrando array abierto"))),e.includes('"alternativas"')&&!e.includes("]")&&(e+="]",console.log("Cerrando array de alternativas truncado"));const u=e.match(/"alternativas"\s*:\s*\[\s*{\s*"id"\s*:\s*"A".*?"explicacion"\s*:\s*"[^"]*"(?!\s*})/);if(u){const f=e.indexOf(u[0])+u[0].length;e=e.substring(0,f)+" }"+e.substring(f),console.log("Reparado cierre de alternativa")}const d=f=>{if(e.length>=f+10){const h=e.substring(Math.max(0,f-20),Math.min(e.length,f+20));console.log(`Verificando contexto alrededor de posición ${f}: "${h}"`);const m=[];for(let g=Math.max(0,f-5);g<Math.min(e.length,f+5);g++)m.push({pos:g,char:e[g],code:e.charCodeAt(g),hex:e.charCodeAt(g).toString(16).padStart(4,"0")});console.log("Análisis de caracteres alrededor de posición específica:"),m.forEach(g=>{console.log(`Pos ${g.pos}: "${g.char}" (U+${g.hex})`)})}};d(392);try{e.includes("textoBase")&&(e=e.replace(/"textoBase"\s*:\s*"([^"]*)"/g,(f,h)=>`"textoBase": "${h.replace(/[\n\r\t\f\v]/g," ").replace(/\s+/g," ")}"`),console.log("Aplicada normalización especial para campo textoBase")),e.includes('"explicacion"')&&(e=e.replace(/"explicacion"\s*:\s*"([^"]*)"/g,(f,h)=>`"explicacion": "${h.replace(/[\n\r\t\f\v]/g," ").replace(/\s+/g," ")}"`),console.log("Aplicada normalización especial para campos explicacion")),JSON.parse(e),console.log("JSON limpio válido")}catch(f){console.log("JSON sigue siendo inválido después de limpieza, intentando reparación más agresiva"),console.error("Error específico:",f.message);try{if(f.message&&f.message.includes("position")){const g=f.message.match(/position (\d+)/);if(g){const x=parseInt(g[1]);console.log(`Error en posición específica: ${x}`);const v=e.substring(Math.max(0,x-30),Math.min(e.length,x+30));if(console.log(`Contexto del error: "${v}"`),x===392||x>380&&x<400){console.log("¡Detectado el error típico en posición ~392! Aplicando corrección específica..."),d(x);try{const y=e.lastIndexOf('"',x),w=e.indexOf('"',x);if(y!==-1&&w!==-1){const _=e.substring(0,y+1),T=e.substring(w);e=_+"Contenido reemplazado debido a caracteres de control"+T,console.log("Aplicada corrección específica para error en posición 392");try{return JSON.parse(e),console.log("Corrección específica exitosa"),e}catch{console.log("La corrección específica falló, continuando...")}}}catch(y){console.log("Error durante corrección específica:",y)}}if(v.includes('"textoBase"')||v.includes('"explicacion"')){const y=e.lastIndexOf('"',x)+1,w=e.indexOf('"',x);if(y>=0&&w>=0){const _=e.substring(y,w),T=_.substring(0,Math.min(100,_.length));e=e.substring(0,y)+T+e.substring(w),console.log("Aplicada reparación de campo con truncado de contenido");try{return JSON.parse(e),console.log("Reparación exitosa por truncado de contenido"),e}catch{console.log("Reparación por truncado falló, continuando con reconstrucción completa")}}}}}const h=e.match(/"id"\s*:\s*"([^"]*)"/),m=e.match(/"enunciado"\s*:\s*"([^"]*)"/);if(h&&m){const g=h[1],x=m[1],v=x.length>150?x.substring(0,150)+"...":x;console.log(`Reconstruyendo con id="${g}" y enunciado="${v.substring(0,30)}..."`);const y=`[{
          "id": "${g}",
          "enunciado": "${v}",
          "alternativas": [
            {"id": "A", "texto": "Alternativa A (reconstruida)", "esCorrecta": true, "explicacion": "Alternativa reconstruida automáticamente debido a problemas en el formato JSON."},
            {"id": "B", "texto": "Alternativa B", "esCorrecta": false},
            {"id": "C", "texto": "Alternativa C", "esCorrecta": false},
            {"id": "D", "texto": "Alternativa D", "esCorrecta": false}
          ],
          "estandarAprendizaje": "Contenido reconstruido debido a problemas en el formato JSON"
        }]`;try{JSON.parse(y),console.log("Generada versión de emergencia del JSON"),e=y}catch{console.log("Error al parsear JSON de emergencia, creando versión básica"),e=`[{
            "id": "p1",
            "enunciado": "No fue posible procesar la respuesta. Por favor, intente nuevamente.",
            "alternativas": [
              {"id": "A", "texto": "Intentar nuevamente", "esCorrecta": true, "explicacion": "Se recomienda volver a intentar la generación."},
              {"id": "B", "texto": "Opción B", "esCorrecta": false},
              {"id": "C", "texto": "Opción C", "esCorrecta": false},
              {"id": "D", "texto": "Opción D", "esCorrecta": false}
            ],
            "habilidad": "Diagnóstico",
            "estandarAprendizaje": "Error en generación"
          }]`}}else console.log("No se encontraron datos mínimos para reconstrucción, usando JSON de fallback mínimo"),e=`[{
          "id": "p1",
          "enunciado": "No fue posible procesar la respuesta de la IA. Por favor, intente nuevamente.",
          "alternativas": [
            {"id": "A", "texto": "Volver a intentar", "esCorrecta": true, "explicacion": "El sistema detectó un formato incorrecto en la respuesta de la IA."},
            {"id": "B", "texto": "Modificar parámetros", "esCorrecta": false},
            {"id": "C", "texto": "Usar menos preguntas", "esCorrecta": false},
            {"id": "D", "texto": "Contactar soporte", "esCorrecta": false}
          ],
          "habilidad": "Diagnóstico",
          "estandarAprendizaje": "Error en formato de respuesta"
        }]`}catch(h){console.log("Error durante la reconstrucción manual:",h),e=`[{
        "id": "p1",
        "enunciado": "Error crítico en el procesamiento de la respuesta.",
        "alternativas": [
          {"id": "A", "texto": "Intentar nuevamente", "esCorrecta": true, "explicacion": "Error técnico en el procesamiento de la respuesta."},
          {"id": "B", "texto": "Opción B", "esCorrecta": false},
          {"id": "C", "texto": "Opción C", "esCorrecta": false},
          {"id": "D", "texto": "Opción D", "esCorrecta": false}
        ]
      }]`}}if(t!==e){console.log("Se realizaron modificaciones al JSON original");try{JSON.parse(e)}catch(f){console.error("JSON final sigue siendo inválido:",f),console.log("JSON limpiado (primeros 100 caracteres):",e.substring(0,100))}}return e}function Mmt(e,t,r){if(!e||typeof e!="string")throw console.error("Respuesta de IA inválida:",e),new Error("No se recibió una respuesta válida de la IA");console.log("Procesando respuesta de la IA...");try{console.log(`Respuesta recibida: ${e.length} caracteres. Primeros 100:`,e.substring(0,100).replace(/\n/g,"\\n"));const n=Lmt(e);if(!n)return console.error("No se pudo extraer JSON de la respuesta después de múltiples intentos"),Ry(1,"La IA generó una respuesta en un formato que no se pudo procesar. Por favor, intente nuevamente.");console.log("JSON extraído correctamente, intentando parsear...");let a;try{a=JSON.parse(n),console.log("JSON parseado correctamente:",typeof a,Array.isArray(a)?a.length:"no es array")}catch(l){console.error("Error al parsear el JSON final:",l,"JSON parcial:",n.substring(0,200)),console.log("Intentando reparación de emergencia del JSON...");try{const c=n.match(/\[\s*\{.*?\}\s*(?:\]|$)/s);if(c){const u=c[0].endsWith("]")?c[0]:c[0]+"]";a=JSON.parse(u),console.log("Reparación parcial exitosa")}else throw new Error("No se pudo reparar el JSON")}catch{return console.log("Creando objeto de respaldo después de error de parseo final"),Ry(1,"La IA generó una respuesta en formato incorrecto. Por favor, intente nuevamente con diferentes parámetros.")}}if(!Array.isArray(a))if(console.log("La respuesta no es un array, encapsulándola"),typeof a=="object"&&a!==null)a=[a];else return console.error("La respuesta no es un objeto que podamos encapsular:",typeof a),Ry(1,"La respuesta recibida no tiene el formato esperado. Por favor, intente nuevamente.");if(a=a.filter(l=>l&&typeof l=="object"),a.length===0)return console.error("No se encontraron preguntas válidas después de filtrar"),Ry(1,"No se pudieron extraer preguntas válidas de la respuesta. Por favor, intente nuevamente.");console.log(`Se encontraron ${a.length} preguntas para procesar`);let s;r!=null&&r.textoProporcionado?(s=r.textoProporcionado,console.log("Usando texto proporcionado por el usuario como textoBase")):a.length>0&&a[0].textoBase?(s=a[0].textoBase,console.log("Se encontró textoBase generado por la IA para preguntas de Lectura")):r!=null&&r.textoBaseLectura&&(s=r.textoBaseLectura,console.log("Usando textoBaseLectura de las opciones"));const o=a.slice(0,t).map((l,c)=>{try{if(console.log(`Procesando pregunta ${c+1}...`),!l||typeof l!="object")throw new Error(`La pregunta ${c+1} no es un objeto válido`);if(!l.enunciado&&!l.pregunta&&!l.texto){console.warn(`La pregunta ${c+1} no tiene enunciado, buscando alternativas...`);const g=Object.entries(l).find(([x,v])=>typeof v=="string"&&v.length>20&&["contenido","stem","question","statement"].includes(x.toLowerCase()));if(g)l.enunciado=g[1],console.log(`Usando '${g[0]}' como enunciado`);else throw new Error(`No se encontró enunciado para la pregunta ${c+1}`)}let u=Array.isArray(l.alternativas)?l.alternativas:[];u.length===0&&(l.A||l.a||l.opciones||l.options)&&(console.log("Detectado formato alternativo de alternativas"),l.opciones&&Array.isArray(l.opciones)?u=l.opciones:l.options&&Array.isArray(l.options)?u=l.options:u=["A","B","C","D"].map(g=>{const x=l[g],v=l[g.toLowerCase()],y=x!==void 0?x:v;if(y){if(typeof y=="string")return{id:g,texto:y,esCorrecta:l.respuesta===g||l.correcta===g};if(typeof y=="object")return{id:g,...y}}return{id:g,texto:`Alternativa ${g}`,esCorrecta:!1}})),u.length===0&&(console.log("No se encontraron alternativas, creando alternativas por defecto"),u=[{id:"A",texto:"Opción A (generada automáticamente)",esCorrecta:!0},{id:"B",texto:"Opción B (generada automáticamente)",esCorrecta:!1},{id:"C",texto:"Opción C (generada automáticamente)",esCorrecta:!1},{id:"D",texto:"Opción D (generada automáticamente)",esCorrecta:!1}]);const d=u.map((g,x)=>{if(!g)return console.warn(`Alternativa ${x} es nula o indefinida, creando alternativa por defecto`),{id:String.fromCharCode(65+x),texto:`Alternativa ${String.fromCharCode(65+x)} (generada por defecto)`,esCorrecta:!1};if(typeof g=="string")return{id:String.fromCharCode(65+x),texto:g,esCorrecta:l.respuesta===String.fromCharCode(65+x)||l.correcta===String.fromCharCode(65+x)||l.respuesta===x||l.respuesta===(x+1).toString()};const v=(g==null?void 0:g.texto)||(g==null?void 0:g.text)||(g==null?void 0:g.contenido)||(g==null?void 0:g.content)||`Alternativa ${String.fromCharCode(65+x)}`;let y=(g==null?void 0:g.id)||String.fromCharCode(65+x);typeof y=="number"&&(y=String.fromCharCode(64+y));let w=!1;((g==null?void 0:g.esCorrecta)===!0||(g==null?void 0:g.isCorrect)===!0||(g==null?void 0:g.correct)===!0)&&(w=!0);const _=l.respuesta||l.correcta||l.respuestaCorrecta||l.correct;return _&&(_===y||_===x||_===x+1||_===(x+1).toString())&&(w=!0),{id:y,texto:v,esCorrecta:w,explicacion:(g==null?void 0:g.explicacion)||(g==null?void 0:g.explanation)||""}}).filter(g=>g&&g.texto);for(d.length===0&&(console.warn("No hay alternativas válidas después de filtrar, creando por defecto"),d.push({id:"A",texto:"Alternativa A (por defecto)",esCorrecta:!0},{id:"B",texto:"Alternativa B (por defecto)",esCorrecta:!1},{id:"C",texto:"Alternativa C (por defecto)",esCorrecta:!1},{id:"D",texto:"Alternativa D (por defecto)",esCorrecta:!1}));d.length<4;){const g=String.fromCharCode(65+d.length);console.log(`Agregando alternativa ${g} faltante`),d.push({id:g,texto:`Alternativa ${g} (agregada automáticamente)`,esCorrecta:!1})}d.length>4&&(console.log(`Demasiadas alternativas (${d.length}), conservando solo 4`),d.splice(4)),d.some(g=>g.esCorrecta)||(console.log("No se encontró alternativa marcada como correcta, marcando la primera"),d[0].esCorrecta=!0);const f=d.find(g=>g.esCorrecta),h=(f==null?void 0:f.explicacion)||l.explicacion||l.explanation||"";return h&&f&&!f.explicacion&&(f.explicacion=h),f&&!f.explicacion&&(f.explicacion=`La respuesta correcta es la alternativa ${f.id}`),{id:l.id||`p${c+1}`,enunciado:l.enunciado||l.pregunta||l.texto||`Pregunta ${c+1}`,alternativas:d,estandarAprendizaje:l.estandarAprendizaje||l.estandar||l.standard||"",habilidad:l.habilidad||l.eje||l.skill||l.axis||"",textoBase:c===0?s:void 0,createdAt:za(),dificultad:l.dificultad||l.difficulty||"media"}}catch(u){return console.error(`Error procesando pregunta ${c+1}:`,u),Umt(c+1)}});return console.log(`Procesamiento completado: ${o.length} preguntas procesadas`),o}catch(n){return console.error("Error general en procesarRespuestaIA:",n),Ry(t,"Ocurrió un error al procesar la respuesta de la IA. Por favor, intente nuevamente.")}}function Umt(e){return{id:`p${e}`,enunciado:`Pregunta ${e} (no se pudo generar correctamente)`,alternativas:[{id:"A",texto:"Intentar nuevamente",esCorrecta:!0,explicacion:"Se recomienda volver a intentar la generación con el modelo Pro."},{id:"B",texto:"Modificar parámetros",esCorrecta:!1},{id:"C",texto:"Reducir complejidad",esCorrecta:!1},{id:"D",texto:"Contactar soporte",esCorrecta:!1}],habilidad:"No disponible",estandarAprendizaje:"No disponible",createdAt:za(),dificultad:"media"}}function Ry(e,t){const r=[];for(let n=0;n<e;n++)r.push({id:`p${n+1}`,enunciado:n===0?t:`Pregunta ${n+1} (no disponible)`,alternativas:[{id:"A",texto:"Intentar nuevamente",esCorrecta:!0,explicacion:"Se recomienda volver a intentar la generación."},{id:"B",texto:"Modificar parámetros de generación",esCorrecta:!1},{id:"C",texto:"Usar menos cantidad de preguntas",esCorrecta:!1},{id:"D",texto:"Revisar el contexto proporcionado",esCorrecta:!1}],habilidad:"Diagnóstico",estandarAprendizaje:"Error en generación",createdAt:za(),dificultad:"media"});return r}const Qmt=({currentUser:e})=>{const[t,r]=C.useState([]),[n,a]=C.useState(!0),[s,o]=C.useState("lista"),[l,c]=C.useState(null),[u,d]=C.useState(""),[f,h]=C.useState("todas"),[m,g]=C.useState(!1),[x,v]=C.useState({titulo:"",descripcion:"",asignatura:"Lectura",preguntas:[],cursosAsignados:[],barajarPreguntas:!0,barajarAlternativas:!0}),[y,w]=C.useState(!1),[_,T]=C.useState(null),[j,I]=C.useState([]),[E,S]=C.useState([]),[B,M]=C.useState(""),[R,k]=C.useState(!1),[D,L]=C.useState(null),[Z,V]=C.useState(null);C.useEffect(()=>{(async()=>{try{a(!0);const le=await pAe(e.uid||"");r(le);const be=await mM(),Pe=new Set;e.cursos&&e.cursos.length>0?e.cursos.forEach(pe=>Pe.add(pe)):os.forEach(pe=>Pe.add(pe)),be.filter(pe=>pe.profile==="ESTUDIANTE"&&pe.curso).forEach(pe=>{pe.curso&&Pe.add(pe.curso)});const Ue=Array.from(Pe).sort().map(pe=>({id:pe,nombre:q(pe)}));I(Ue)}catch(le){console.error("Error al cargar datos iniciales:",le),T("No se pudieron cargar los datos necesarios")}finally{a(!1)}})()},[e]);const q=ve=>{const le=ve.match(/^(\d+)º?([A-E])$/i);if(le){const be=le[1],Pe=le[2].toUpperCase();return`${be}º Medio ${Pe}`}return ve};C.useEffect(()=>{S(B?j.filter(ve=>ve.nombre.toLowerCase().includes(B.toLowerCase())):[])},[B,j]);const G=()=>t.filter(ve=>{const le=ve.titulo.toLowerCase().includes(u.toLowerCase()),be=f==="todas"||ve.asignatura===f;return le&&be}),K=()=>{g(!0),c(null),v({titulo:"",descripcion:"",asignatura:"Lectura",preguntas:[],cursosAsignados:[],barajarPreguntas:!0,barajarAlternativas:!0}),L(null),V(null),z(ve=>({...ve,textoProporcionado:""})),o("detalle")},ee=ve=>{g(!0),c(ve),v({...ve}),o("detalle")},W=async ve=>{if(window.confirm(`¿Estás seguro de eliminar el set "${ve.titulo}"? Esta acción no se puede deshacer.`))try{await _mt(ve.id),r(le=>le.filter(be=>be.id!==ve.id))}catch(le){console.error("Error al eliminar set:",le),T("No se pudo eliminar el set de preguntas")}},P=async()=>{try{if(!x.titulo){T("El título es obligatorio");return}if(!x.preguntas||x.preguntas.length===0){T("Debe agregar al menos una pregunta");return}if(a(!0),l)await Emt(l.id,x),r(ve=>ve.map(le=>le.id===l.id?{...le,...x}:le));else{const ve={...x,creadorId:e.uid||"",creadorNombre:e.nombreCompleto||"",fechaCreacion:new Date().toISOString()},be={id:await wmt(ve),...ve};r(Pe=>[be,...Pe])}g(!1),o("lista"),T(null)}catch(ve){console.error("Error al guardar evaluación:",ve),T("No se pudo guardar la evaluación")}finally{a(!1)}},[U,z]=C.useState({nivel:"1M",cantidadPreguntas:"4",dificultad:"media",textoProporcionado:"",habilidadesLectura:{"Localizar información":!0,"Relacionar información":!0,Interpretar:!0,"Reflexionar y evaluar":!0},ejesMatematica:{Números:!0,"Álgebra y Funciones":!0,Geometría:!0,"Probabilidad y Estadística":!0}}),[J,te]=C.useState({tipo:"",mensaje:""}),se=async()=>{var ve;try{if(!x.asignatura){T("Seleccione una asignatura para generar preguntas");return}w(!0),T(null),te({tipo:"",mensaje:""});let le,be;x.asignatura==="Lectura"?(le=Object.entries(U.habilidadesLectura).filter(([Ue,pe])=>pe).map(([Ue])=>Ue),le.length===0&&(le=["Localizar información","Relacionar información","Interpretar","Reflexionar y evaluar"])):x.asignatura==="Matemática"&&(be=Object.entries(U.ejesMatematica).filter(([Ue,pe])=>pe).map(([Ue])=>Ue),be.length===0&&(be=["Números","Álgebra y Funciones","Geometría","Probabilidad y Estadística"])),te({tipo:"warning",mensaje:`Generando ${U.cantidadPreguntas} preguntas de ${x.asignatura}. Este proceso puede tardar unos segundos...`});const Pe=await Pmt({asignatura:x.asignatura,cantidad:parseInt(U.cantidadPreguntas),nivel:U.nivel,opcionesPorPregunta:4,habilidadesLectura:le,ejesMatematica:be,dificultad:U.dificultad,contextoCurricular:x.descripcion,textoProporcionado:((ve=U.textoProporcionado)==null?void 0:ve.trim())||void 0});if(!Pe||Pe.length===0)throw new Error("No se generaron preguntas. Intente nuevamente.");v(Ue=>({...Ue,preguntas:[...Ue.preguntas||[],...Pe]})),te({tipo:"success",mensaje:`¡Se generaron ${Pe.length} preguntas correctamente!`}),setTimeout(()=>{te({tipo:"",mensaje:""})},5e3)}catch(le){console.error("Error al generar preguntas:",le);let be="No se pudieron generar las preguntas. Intente nuevamente.";le instanceof Error&&(le.message.includes("JSON")?be="Hubo un problema con el formato de las respuestas generadas. Intente nuevamente.":be=le.message),T(be),te({tipo:"error",mensaje:be})}finally{w(!1)}},ie=()=>{const ve={id:`p${Date.now()}`,enunciado:"",alternativas:[{id:"A",texto:"",esCorrecta:!0,explicacion:""},{id:"B",texto:"",esCorrecta:!1},{id:"C",texto:"",esCorrecta:!1},{id:"D",texto:"",esCorrecta:!1}],estandarAprendizaje:x.asignatura==="Lectura"?nJ[0]:aJ[0]};V(ve)},ce=ve=>{V({...ve})},de=()=>{if(!Z)return;if(!Z.enunciado){T("El enunciado de la pregunta es obligatorio");return}if(!Z.alternativas.find(be=>be.esCorrecta)){T("Debe marcar una alternativa como correcta");return}if(Z.alternativas.filter(be=>!be.texto).length>0){T("Todas las alternativas deben tener texto");return}Z.id.startsWith("p")?v(be=>({...be,preguntas:[...be.preguntas||[],Z]})):v(be=>{var Pe;return{...be,preguntas:((Pe=be.preguntas)==null?void 0:Pe.map(Ue=>Ue.id===Z.id?Z:Ue))||[]}}),V(null),T(null)},Be=ve=>{v(le=>{var be;return{...le,preguntas:((be=le.preguntas)==null?void 0:be.filter(Pe=>Pe.id!==ve))||[]}})},ae=ve=>{v(le=>{const be=le.cursosAsignados||[];return be.includes(ve)?{...le,cursosAsignados:be.filter(Pe=>Pe!==ve)}:{...le,cursosAsignados:[...be,ve]}})},Se=()=>{const ve=G();return n?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(um,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando evaluaciones..."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Xb,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4"}),i.jsx("input",{type:"text",placeholder:"Buscar evaluaciones...",className:"pl-9 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:u,onChange:le=>d(le.target.value)})]}),i.jsxs("select",{className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",value:f,onChange:le=>h(le.target.value),children:[i.jsx("option",{value:"todas",children:"Todas las asignaturas"}),i.jsx("option",{value:"Lectura",children:"Lectura"}),i.jsx("option",{value:"Matemática",children:"Matemática"})]})]}),i.jsxs("button",{onClick:K,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md",children:[i.jsx(Co,{className:"w-4 h-4"}),"Nueva evaluación"]})]}),i.jsx("div",{className:"space-y-4",children:ve.length===0?i.jsxs("div",{className:"text-center py-8 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx(iR,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:u||f!=="todas"?"No se encontraron evaluaciones con los filtros seleccionados":"No hay evaluaciones creadas aún. Crea tu primera evaluación SIMCE."}),(u||f!=="todas")&&i.jsx("button",{onClick:()=>{d(""),h("todas")},className:"mt-4 text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 hover:dark:text-indigo-300 text-sm font-medium",children:"Limpiar filtros"})]}):ve.map(le=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"p-4 flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:`p-2 rounded-md mr-3 ${le.asignatura==="Lectura"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:le.asignatura==="Lectura"?i.jsx(ol,{className:"w-5 h-5"}):i.jsx(nR,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg text-slate-800 dark:text-slate-200",children:le.titulo}),le.descripcion&&i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm mt-1",children:le.descripcion}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[i.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:[le.preguntas.length," preguntas"]}),i.jsx("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:le.asignatura}),le.cursosAsignados&&le.cursosAsignados.length>0&&i.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs flex items-center gap-1",children:[i.jsx(_o,{className:"w-3 h-3"}),le.cursosAsignados.length," ",le.cursosAsignados.length===1?"curso":"cursos"]}),i.jsx("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-md text-xs",children:new Date(le.fechaCreacion).toLocaleDateString()})]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>c(le),className:"p-2 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded-full hover:bg-slate-100 hover:dark:bg-slate-700",title:"Ver detalles",children:i.jsx(cte,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>ee(le),className:"p-2 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded-full hover:bg-slate-100 hover:dark:bg-slate-700",title:"Editar evaluación",children:i.jsx(j_,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>W(le),className:"p-2 text-red-500 hover:text-red-700 dark:text-red-400 hover:dark:text-red-300 rounded-full hover:bg-red-50 hover:dark:bg-red-900/20",title:"Eliminar evaluación",children:i.jsx(Is,{className:"w-4 h-4"})})]})]}),(l==null?void 0:l.id)===le.id&&i.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 p-4",children:[i.jsxs("h4",{className:"font-medium mb-3",children:["Preguntas (",le.preguntas.length,")"]}),i.jsx("div",{className:"space-y-4 max-h-64 overflow-y-auto pr-2",children:le.preguntas.map((be,Pe)=>i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md",children:[i.jsxs("p",{className:"font-medium",children:[i.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 py-0.5 px-1.5 rounded text-xs mr-1.5",children:Pe+1}),be.enunciado]}),i.jsx("div",{className:"mt-2 ml-6 space-y-1",children:be.alternativas.map(Ue=>i.jsxs("div",{className:`flex items-center ${Ue.esCorrecta?"text-green-700 dark:text-green-500 font-medium":""}`,children:[i.jsxs("span",{className:"mr-1.5 min-w-[16px]",children:[Ue.id,")"]}),i.jsx("span",{children:Ue.texto}),Ue.esCorrecta&&i.jsx(es,{className:"ml-1 w-3.5 h-3.5 text-green-600 dark:text-green-500"})]},Ue.id))}),i.jsxs("div",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:[i.jsx("span",{className:"font-semibold",children:"Estándar:"})," ",be.estandarAprendizaje]})]},be.id))}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{onClick:()=>c(null),className:"text-sm text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200",children:"Cerrar"})})]})]},le.id))})]})},ke=()=>{var ve;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold",children:l?"Editar evaluación":"Nueva evaluación"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{g(!1),o("lista"),T(null)},className:"px-3 py-1.5 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-md text-sm",children:"Cancelar"}),i.jsxs("button",{onClick:P,className:"px-4 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm flex items-center gap-1.5",disabled:n,children:[i.jsx(Kc,{className:"w-4 h-4"}),"Guardar evaluación"]})]})]}),_&&i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-300 p-3 rounded-md flex items-center gap-2",children:[i.jsx(Xw,{className:"w-5 h-5 flex-shrink-0"}),i.jsx("span",{children:_})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 border border-slate-200 dark:border-slate-700 rounded-lg",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la evaluación *"}),i.jsx("input",{type:"text",value:x.titulo,onChange:le=>v({...x,titulo:le.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Ej: Evaluación SIMCE 4° Básico - Lectura"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Asignatura *"}),i.jsxs("select",{value:x.asignatura,onChange:le=>v({...x,asignatura:le.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",children:[i.jsx("option",{value:"Lectura",children:"Lectura"}),i.jsx("option",{value:"Matemática",children:"Matemática"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción (opcional)"}),i.jsx("textarea",{value:x.descripcion,onChange:le=>v({...x,descripcion:le.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Breve descripción de la evaluación",rows:3})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Asignar a cursos"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",value:B,onChange:le=>{M(le.target.value),k(!0)},onFocus:()=>k(!0),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Buscar curso..."}),R&&(E.length>0||B)&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-md shadow-md max-h-60 overflow-y-auto",children:E.length===0&&B?i.jsx("div",{className:"p-3 text-center text-slate-500 dark:text-slate-400",children:"No se encontraron cursos"}):E.map(le=>i.jsxs("div",{className:"px-3 py-2 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center",onClick:()=>{ae(le.id),M("")},children:[i.jsx("div",{className:`w-4 h-4 border rounded mr-2 flex items-center justify-center ${(x.cursosAsignados||[]).includes(le.id)?"bg-indigo-600 border-indigo-600":"border-slate-400 dark:border-slate-500"}`,children:(x.cursosAsignados||[]).includes(le.id)&&i.jsx(ote,{className:"w-3 h-3 text-white"})}),i.jsx("span",{children:le.nombre})]},le.id))})]}),(x.cursosAsignados||[]).length>0&&i.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:(x.cursosAsignados||[]).map(le=>{const be=j.find(Pe=>Pe.id===le);return i.jsxs("div",{className:"flex items-center bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-md text-sm",children:[i.jsx("span",{children:(be==null?void 0:be.nombre)||le}),i.jsx("button",{onClick:()=>ae(le),className:"ml-1 text-slate-500 hover:text-slate-700 dark:text-slate-400 hover:dark:text-slate-200",children:i.jsx(Nh,{className:"w-3 h-3"})})]},le)})})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Configuración de presentación"})}),i.jsxs("div",{className:"flex space-x-6",children:[i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:x.barajarPreguntas,onChange:le=>v({...x,barajarPreguntas:le.target.checked}),className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Barajar preguntas"})]}),i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:x.barajarAlternativas,onChange:le=>v({...x,barajarAlternativas:le.target.checked}),className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Barajar alternativas"})]})]})]})]}),i.jsxs("div",{className:"mb-5 bg-slate-50 dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-md font-semibold mb-3",children:"Opciones de generación con IA"}),J.mensaje&&i.jsxs("div",{className:`mb-4 p-3 rounded-md flex items-center gap-2 ${J.tipo==="error"?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-300":J.tipo==="warning"?"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 text-amber-800 dark:text-amber-300":"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-800 dark:text-green-300"}`,children:[J.tipo==="error"&&i.jsx(Xw,{className:"w-5 h-5 flex-shrink-0"}),J.tipo==="warning"&&i.jsx(um,{className:"w-5 h-5 flex-shrink-0 animate-spin"}),J.tipo==="success"&&i.jsx(es,{className:"w-5 h-5 flex-shrink-0"}),i.jsx("span",{children:J.mensaje})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Texto base (opcional)"}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:"Si proporciona un texto, las preguntas se generarán basadas en él. Si lo deja vacío, la IA generará automáticamente un texto adecuado."}),i.jsx("textarea",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500 resize-y",value:U.textoProporcionado||"",onChange:le=>z({...U,textoProporcionado:le.target.value}),placeholder:x.asignatura==="Lectura"?"Ingrese aquí un texto para generar preguntas de comprensión lectora...":"Ingrese aquí un texto para crear problemas matemáticos relacionados...",rows:6})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Nivel"}),i.jsxs("select",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500",value:U.nivel,onChange:le=>z({...U,nivel:le.target.value}),children:[i.jsx("option",{value:"1M",children:"1º Medio"}),i.jsx("option",{value:"2M",children:"2º Medio"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cantidad de preguntas"}),i.jsxs("select",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500",value:U.cantidadPreguntas,onChange:le=>z({...U,cantidadPreguntas:le.target.value}),children:[i.jsx("option",{value:"2",children:"2 preguntas"}),i.jsx("option",{value:"4",children:"4 preguntas"}),i.jsx("option",{value:"6",children:"6 preguntas"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Dificultad"}),i.jsxs("select",{className:"w-full rounded-md border-slate-300 dark:border-slate-700 dark:bg-slate-800 text-sm focus:border-indigo-500 focus:ring-indigo-500",value:U.dificultad,onChange:le=>z({...U,dificultad:le.target.value}),children:[i.jsx("option",{value:"baja",children:"Baja"}),i.jsx("option",{value:"media",children:"Media"}),i.jsx("option",{value:"alta",children:"Alta"})]})]})]}),x.asignatura==="Lectura"&&i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades de Lectura"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(U.habilidadesLectura).map(([le,be])=>i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:be,onChange:()=>{z({...U,habilidadesLectura:{...U.habilidadesLectura,[le]:!be}})},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 mr-2"}),i.jsx("span",{className:"text-sm",children:le})]},le))})]}),x.asignatura==="Matemática"&&i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ejes de Matemática"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(U.ejesMatematica).map(([le,be])=>i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:be,onChange:()=>{z({...U,ejesMatematica:{...U.ejesMatematica,[le]:!be}})},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 mr-2"}),i.jsx("span",{className:"text-sm",children:le})]},le))})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{onClick:se,disabled:y,className:`px-4 py-2 text-white rounded-md text-sm flex items-center gap-2 ${y?"bg-amber-500 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:y?i.jsxs(i.Fragment,{children:[i.jsx(um,{className:"w-4 h-4 animate-spin"}),"Generando preguntas..."]}):i.jsxs(i.Fragment,{children:[i.jsx(W2e,{className:"w-4 h-4"}),"Generar preguntas con IA"]})})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("h3",{className:"text-lg font-semibold",children:["Preguntas (",(x.preguntas||[]).length,")"]}),i.jsx("div",{className:"flex gap-2",children:i.jsxs("button",{onClick:ie,className:"px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm flex items-center gap-1.5",children:[i.jsx(Co,{className:"w-4 h-4"}),"Agregar pregunta manualmente"]})})]}),Z?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 border border-slate-200 dark:border-slate-700 rounded-lg",children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Enunciado de la pregunta *"}),i.jsx("textarea",{value:Z.enunciado,onChange:le=>V({...Z,enunciado:le.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Escribe el enunciado de la pregunta...",rows:3})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Estándar de aprendizaje *"}),i.jsx("select",{value:Z.estandarAprendizaje,onChange:le=>V({...Z,estandarAprendizaje:le.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",children:x.asignatura==="Lectura"?nJ.map((le,be)=>i.jsx("option",{value:le,children:le},be)):aJ.map((le,be)=>i.jsx("option",{value:le,children:le},be))})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Habilidad (opcional)"}),i.jsx("input",{type:"text",value:Z.habilidad||"",onChange:le=>V({...Z,habilidad:le.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",placeholder:"Ej: Interpretar, Analizar, Resolver problemas..."})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block mb-3 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Alternativas * (marca una como correcta)"}),i.jsx("div",{className:"space-y-3",children:Z.alternativas.map((le,be)=>i.jsxs("div",{className:"flex items-start",children:[i.jsxs("div",{className:"flex items-center mt-1 mr-2",children:[i.jsx("input",{type:"radio",checked:le.esCorrecta,onChange:()=>{V({...Z,alternativas:Z.alternativas.map(Pe=>({...Pe,esCorrecta:Pe.id===le.id}))})},className:"rounded-full border-slate-300 text-indigo-600 focus:ring-indigo-500"}),i.jsxs("span",{className:"ml-1 font-semibold",children:[le.id,")"]})]}),i.jsx("div",{className:"flex-1",children:i.jsx("textarea",{value:le.texto,onChange:Pe=>{V({...Z,alternativas:Z.alternativas.map(Ue=>Ue.id===le.id?{...Ue,texto:Pe.target.value}:Ue)})},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:`Texto de la alternativa ${le.id}...`,rows:2})})]},le.id))})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Explicación para alternativa correcta (recomendado)"}),i.jsx("textarea",{value:((ve=Z.alternativas.find(le=>le.esCorrecta))==null?void 0:ve.explicacion)||"",onChange:le=>{V({...Z,alternativas:Z.alternativas.map(be=>be.esCorrecta?{...be,explicacion:le.target.value}:be)})},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 resize-none",placeholder:"Explica por qué esta es la respuesta correcta...",rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>{V(null),T(null)},className:"px-3 py-1.5 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-md text-sm",children:"Cancelar"}),i.jsxs("button",{onClick:de,className:"px-4 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm flex items-center gap-1.5",children:[i.jsx(Kc,{className:"w-4 h-4"}),"Guardar pregunta"]})]})]}):i.jsx("div",{className:"space-y-4",children:(x.preguntas||[]).length===0?i.jsxs("div",{className:"text-center py-8 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx(lte,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay preguntas agregadas aún. Puedes generar preguntas automáticamente o agregarlas manualmente."})]}):(x.preguntas||[]).map((le,be)=>{var Pe,Ue;return i.jsx("div",{className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"font-medium",children:[i.jsxs("span",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",be+1]}),le.enunciado]}),i.jsx("div",{className:"mt-3 ml-6 space-y-1",children:le.alternativas.map(pe=>i.jsxs("div",{className:`flex items-center ${pe.esCorrecta?"text-green-700 dark:text-green-500 font-medium":""}`,children:[i.jsxs("span",{className:"mr-2",children:[pe.id,")"]}),i.jsx("span",{children:pe.texto}),pe.esCorrecta&&i.jsx(es,{className:"ml-1.5 w-4 h-4 text-green-600 dark:text-green-500"})]},pe.id))}),i.jsxs("div",{className:"mt-3 text-xs text-slate-500 dark:text-slate-400",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Estándar:"})," ",le.estandarAprendizaje]}),le.habilidad&&i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Habilidad:"})," ",le.habilidad]}),((Pe=le.alternativas.find(pe=>pe.esCorrecta))==null?void 0:Pe.explicacion)&&i.jsxs("div",{className:"mt-1 bg-green-50 dark:bg-green-900/20 p-2 rounded-md border border-green-100 dark:border-green-800/30 text-green-800 dark:text-green-300",children:[i.jsx("span",{className:"font-semibold",children:"Explicación:"})," ",(Ue=le.alternativas.find(pe=>pe.esCorrecta))==null?void 0:Ue.explicacion]})]})]}),i.jsxs("div",{className:"flex gap-1 ml-3",children:[i.jsx("button",{onClick:()=>ce(le),className:"p-1.5 text-slate-600 hover:text-slate-900 dark:text-slate-400 hover:dark:text-slate-200 rounded hover:bg-slate-100 hover:dark:bg-slate-700",title:"Editar pregunta",children:i.jsx(j_,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>Be(le.id),className:"p-1.5 text-red-500 hover:text-red-700 dark:text-red-400 hover:dark:text-red-300 rounded hover:bg-red-50 hover:dark:bg-red-900/20",title:"Eliminar pregunta",children:i.jsx(Is,{className:"w-4 h-4"})})]})]})},le.id)})})]})]})};return i.jsxs(i.Fragment,{children:[s==="lista"&&!m&&Se(),(s==="detalle"||m)&&ke()]})},Hmt=({currentUser:e})=>{const[t,r]=C.useState([]),[n,a]=C.useState(null),[s,o]=C.useState({}),[l,c]=C.useState(!0),[u,d]=C.useState(!1),[f,h]=C.useState(!1),[m,g]=C.useState(null),[x,v]=C.useState(null),[y,w]=C.useState(null),[_,T]=C.useState([]),[j,I]=C.useState(null);C.useEffect(()=>{(async()=>{if(e.uid)try{c(!0);const D=await jmt(e.uid,e.curso||"");r(D)}catch(D){console.error("Error al cargar evaluaciones:",D),v("No se pudieron cargar las evaluaciones disponibles")}finally{c(!1)}})()},[e]);const E=async k=>{try{c(!0),o({}),v(null),g(null),h(!1);const D=await Tmt(e.uid||"",k);if(T(D),D.length>0){I(D[0]),h(!0);const L=await qD(k);if(L){a(L);const Z=D[0],V=L.preguntas.map(q=>{var K;const G=((K=Z.respuestas.find(ee=>ee.preguntaId===q.id))==null?void 0:K.alternativaSeleccionada)||"";return{preguntaId:q.id,pregunta:q,respuestaSeleccionada:G,esCorrecta:G===q.respuestaCorrecta}});g({porcentajeLogro:Z.porcentajeLogro,nivelLogro:Z.nivelLogro,respuestasCorrectas:V.filter(q=>q.esCorrecta).length,totalPreguntas:L.preguntas.length,detalle:V})}}else{const L=await qD(k);if(L){const Z=[...L.preguntas].sort(()=>Math.random()-.5);Z.forEach(V=>{V.alternativas=[...V.alternativas].sort(()=>Math.random()-.5)}),a({...L,preguntas:Z}),w(Date.now())}}}catch(D){console.error("Error al seleccionar evaluación:",D),v("No se pudo cargar la evaluación seleccionada")}finally{c(!1)}},S=(k,D)=>{o({...s,[k]:D})},B=async()=>{if(n)try{const k=n.preguntas.map(P=>P.id),D=Object.keys(s);if(D.length<k.length){v(`Debe responder todas las preguntas antes de enviar (faltan ${k.length-D.length})`);return}d(!0);let L=0;const Z=n.preguntas.map(P=>{const U=s[P.id],z=U===P.respuestaCorrecta;return z&&L++,{preguntaId:P.id,pregunta:P,respuestaSeleccionada:U,esCorrecta:z}}),V=n.preguntas.length,q=L/V*100;let G;q>=80?G="Adecuado":q>=50?G="Elemental":G="Insuficiente";const K=Date.now(),ee=y?Math.floor((K-y)/1e3):0,W={evaluacionId:n.id,estudianteId:e.uid||"",estudianteNombre:e.nombreCompleto||"",respuestas:Object.entries(s).map(([P,U])=>({preguntaId:P,alternativaSeleccionada:U})),porcentajeLogro:q,nivelLogro:G,fechaRealizacion:new Date().toISOString(),tiempoRealizacion:ee};await Bmt(W),g({porcentajeLogro:q,nivelLogro:G,respuestasCorrectas:L,totalPreguntas:V,detalle:Z}),h(!0)}catch(k){console.error("Error al enviar respuestas:",k),v("Ocurrió un error al enviar sus respuestas. Intente nuevamente.")}finally{d(!1)}},M=k=>{const D=Math.floor(k/60),L=k%60;return`${D}:${L<10?"0":""}${L}`},R=k=>{switch(k){case"Adecuado":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"Elemental":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"Insuficiente":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-slate-100 text-slate-800 dark:bg-slate-900/30 dark:text-slate-300"}};return l?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(um,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando evaluaciones..."})]}):i.jsx("div",{className:"space-y-6",children:n?f?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Resultados: ",n.titulo]}),i.jsx("button",{onClick:()=>{a(null),g(null),h(!1)},className:"text-slate-600 hover:text-slate-900 font-semibold dark:text-slate-400 dark:hover:text-slate-200",children:"Volver a evaluaciones"})]}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-6 rounded-lg mb-6",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Tu nivel de logro"}),i.jsx("div",{className:`text-lg font-bold px-4 py-1 rounded-md ${R((m==null?void 0:m.nivelLogro)||"")}`,children:m==null?void 0:m.nivelLogro}),i.jsxs("div",{className:"mt-4",children:[i.jsx(Rwe,{className:"w-16 h-16 mx-auto text-indigo-500 mb-2"}),i.jsxs("div",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400",children:[m==null?void 0:m.porcentajeLogro.toFixed(1),"%"]}),i.jsxs("div",{className:"text-slate-600 dark:text-slate-400",children:[m==null?void 0:m.respuestasCorrectas," de ",m==null?void 0:m.totalPreguntas," correctas"]})]})]}),i.jsx("div",{className:"w-full max-w-md h-6 bg-slate-200 dark:bg-slate-600 rounded-full overflow-hidden mt-4",children:i.jsx("div",{className:`h-full ${(m==null?void 0:m.nivelLogro)==="Adecuado"?"bg-green-500":(m==null?void 0:m.nivelLogro)==="Elemental"?"bg-yellow-500":"bg-red-500"}`,style:{width:`${(m==null?void 0:m.porcentajeLogro)||0}%`}})}),i.jsxs("div",{className:"flex justify-between w-full max-w-md text-xs mt-1",children:[i.jsx("span",{children:"0%"}),i.jsx("span",{children:"50%"}),i.jsx("span",{children:"100%"})]})]})}),i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Detalle de respuestas"}),i.jsx("div",{className:"space-y-6",children:m==null?void 0:m.detalle.map((k,D)=>i.jsxs("div",{className:"p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("h4",{className:"font-bold mb-2",children:[i.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",D+1]}),k.pregunta.enunciado]}),i.jsx("div",{className:"ml-6 mt-3 space-y-2",children:k.pregunta.alternativas.map(L=>i.jsxs("div",{className:`flex items-start ${L.id===k.respuestaSeleccionada?L.id===k.pregunta.respuestaCorrecta?"text-green-700 dark:text-green-400 font-semibold":"text-red-700 dark:text-red-400 font-semibold":L.id===k.pregunta.respuestaCorrecta?"text-green-700 dark:text-green-400 font-semibold":""}`,children:[i.jsxs("div",{className:"font-bold mr-2 min-w-[20px]",children:[L.id,")"]}),i.jsx("div",{children:L.texto}),L.id===k.respuestaSeleccionada&&L.id===k.pregunta.respuestaCorrecta&&i.jsx(es,{className:"w-4 h-4 ml-1 text-green-600 dark:text-green-400"}),L.id===k.respuestaSeleccionada&&L.id!==k.pregunta.respuestaCorrecta&&i.jsx(Ww,{className:"w-4 h-4 ml-1 text-red-600 dark:text-red-400"}),L.id!==k.respuestaSeleccionada&&L.id===k.pregunta.respuestaCorrecta&&i.jsx(es,{className:"w-4 h-4 ml-1 text-green-600 dark:text-green-400"})]},L.id))}),i.jsx("div",{className:"mt-4 text-sm",children:i.jsxs("div",{className:"bg-green-50 text-green-800 dark:bg-green-900/20 dark:text-green-300 p-2 rounded-md",children:[i.jsx("span",{className:"font-semibold",children:"Explicación:"})," ",k.pregunta.explicacion]})})]},k.preguntaId))}),i.jsx("div",{className:"mt-6 flex justify-center",children:i.jsx("button",{onClick:()=>{a(null),g(null),h(!1)},className:"py-2 px-4 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Volver a evaluaciones"})})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:n.titulo}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[n.asignatura," - ",n.preguntas.length," preguntas"]})]}),i.jsx("button",{onClick:()=>{window.confirm("¿Está seguro que desea salir? Se perderán todas las respuestas.")&&a(null)},className:"text-slate-600 hover:text-slate-900 font-semibold dark:text-slate-400 dark:hover:text-slate-200",children:"Cancelar"})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800 mb-6 flex items-start",children:[i.jsx(Xw,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-500 mr-2 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-yellow-800 dark:text-yellow-400",children:"Instrucciones"}),i.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 list-disc pl-5",children:[i.jsx("li",{children:"Responde todas las preguntas antes de enviar."}),i.jsx("li",{children:"Solo tienes un intento para responder."}),i.jsx("li",{children:"Una vez enviado, podrás ver tu resultado y las respuestas correctas."}),i.jsx("li",{children:"No refresques ni cierres la página durante la evaluación."})]})]})]}),x&&i.jsxs("div",{className:"mb-4 p-3 bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200 rounded-md flex items-center",children:[i.jsx(Ww,{className:"w-4 h-4 mr-2"}),x]}),i.jsx("div",{className:"space-y-6",children:n.preguntas.map((k,D)=>i.jsxs("div",{className:`p-4 rounded-lg border ${s[k.id]?"border-green-200 dark:border-green-700/50":"border-slate-200 dark:border-slate-700"}`,children:[i.jsxs("h4",{className:"font-bold mb-2",children:[i.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",D+1]}),k.enunciado]}),i.jsx("div",{className:"ml-6 mt-3 space-y-2",children:k.alternativas.map(L=>i.jsxs("div",{className:`flex items-center p-2 rounded-md cursor-pointer ${s[k.id]===L.id?"bg-indigo-100 dark:bg-indigo-900/50":"hover:bg-slate-100 dark:hover:bg-slate-700/50"}`,onClick:()=>S(k.id,L.id),children:[i.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center mr-3 ${s[k.id]===L.id?"border-indigo-600 dark:border-indigo-400":"border-slate-400 dark:border-slate-500"}`,children:s[k.id]===L.id&&i.jsx("div",{className:"w-3 h-3 rounded-full bg-indigo-600 dark:bg-indigo-400"})}),i.jsxs("div",{className:"font-bold mr-2",children:[L.id,")"]}),i.jsx("div",{children:L.texto})]},L.id))}),!s[k.id]&&i.jsx("div",{className:"mt-2 text-amber-600 dark:text-amber-400 text-sm",children:"Por favor selecciona una respuesta"})]},k.id))}),i.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[i.jsxs("div",{className:"text-slate-600 dark:text-slate-400 flex items-center",children:[i.jsx(Gf,{className:"w-4 h-4 mr-1"}),i.jsx("span",{className:"text-sm",children:y&&i.jsxs(i.Fragment,{children:["Tiempo transcurrido: ",M(Math.floor((Date.now()-y)/1e3))]})})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:[Object.keys(s).length," de ",n.preguntas.length," respondidas"]}),i.jsx("button",{onClick:B,disabled:u||Object.keys(s).length!==n.preguntas.length,className:"py-2 px-4 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 flex items-center gap-2",children:u?i.jsxs(i.Fragment,{children:[i.jsx(um,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Enviando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(hEe,{className:"w-4 h-4"}),i.jsx("span",{children:"Enviar respuestas"})]})})]})]})]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones disponibles"}),t.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(ute,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay evaluaciones asignadas para tu curso en este momento."})]}):i.jsx("div",{className:"space-y-4",children:t.map(k=>i.jsx("div",{className:"p-4 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>E(k.id),children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:`p-2 rounded-md mr-4 ${k.asignatura==="Lectura"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:k.asignatura==="Lectura"?i.jsx(ol,{className:"w-6 h-6"}):i.jsx(nR,{className:"w-6 h-6"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-lg",children:k.titulo}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:k.descripcion}),i.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:k.asignatura}),i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:[k.preguntas.length," preguntas"]}),i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:new Date(k.fechaAsignacion).toLocaleDateString()})]})]})]})},k.id))})]})})},Vmt=({currentUser:e})=>{const[t,r]=C.useState([]),[n,a]=C.useState(null),[s,o]=C.useState([]),[l,c]=C.useState(null),[u,d]=C.useState(!0),[f,h]=C.useState(null),[m,g]=C.useState("general"),[x,v]=C.useState("todos");C.useEffect(()=>{(async()=>{try{d(!0);const M=await Imt(e.uid||"");r(M)}catch(M){console.error("Error al cargar evaluaciones:",M),h("No se pudieron cargar las evaluaciones")}finally{d(!1)}})()},[e]);const y=async B=>{try{d(!0),h(null);const M=await qD(B);if(M){a(M);const R=await Fmt(B);if(o(R),R.length>0){const k=[...new Set(R.map(L=>{var Z;return(Z=L.estudiante)==null?void 0:Z.curso}).filter(Boolean))],D=await Promise.all(k.map(L=>Omt(B,L||"")));D.length>0&&c(D[0])}}}catch(M){console.error("Error al seleccionar evaluación:",M),h("No se pudo cargar la información de la evaluación seleccionada")}finally{d(!1)}},w=async()=>{console.log("Generando Excel...")},_=B=>{switch(B){case"Adecuado":return"text-green-600 dark:text-green-400";case"Elemental":return"text-yellow-600 dark:text-yellow-400";case"Insuficiente":return"text-red-600 dark:text-red-400";default:return"text-slate-600 dark:text-slate-400"}},T=B=>{switch(B){case"Adecuado":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"Elemental":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"Insuficiente":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-slate-100 text-slate-800 dark:bg-slate-900/30 dark:text-slate-300"}},j=()=>{if(!l)return null;const{porcentajeAdecuado:B,porcentajeElemental:M,porcentajeInsuficiente:R}=l;return i.jsxs("div",{className:"mt-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Distribución por niveles de logro"}),i.jsxs("div",{className:"w-full h-8 rounded-md overflow-hidden flex mb-2",children:[i.jsx("div",{className:"h-full bg-green-500 dark:bg-green-600 transition-all",style:{width:`${B}%`}}),i.jsx("div",{className:"h-full bg-yellow-500 dark:bg-yellow-600 transition-all",style:{width:`${M}%`}}),i.jsx("div",{className:"h-full bg-red-500 dark:bg-red-600 transition-all",style:{width:`${R}%`}})]}),i.jsxs("div",{className:"flex justify-between text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 bg-green-500 dark:bg-green-600 rounded-sm mr-1"}),i.jsxs("span",{children:["Adecuado: ",B.toFixed(1),"%"]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 bg-yellow-500 dark:bg-yellow-600 rounded-sm mr-1"}),i.jsxs("span",{children:["Elemental: ",M.toFixed(1),"%"]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 bg-red-500 dark:bg-red-600 rounded-sm mr-1"}),i.jsxs("span",{children:["Insuficiente: ",R.toFixed(1),"%"]})]})]})]})},I=()=>l?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-blue-100 dark:bg-blue-900/50",children:i.jsx(_o,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estudiantes evaluados"}),i.jsx("div",{className:"text-2xl font-bold",children:l.totalEstudiantes})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-indigo-100 dark:bg-indigo-900/50",children:i.jsx(ite,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Promedio de logro"}),i.jsxs("div",{className:"text-2xl font-bold",children:[l.promedioLogro.toFixed(1),"%"]})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-green-100 dark:bg-green-900/50",children:i.jsx(Awe,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Nivel predominante"}),i.jsx("div",{className:`text-2xl font-bold ${_(l.nivelPredominante)}`,children:l.nivelPredominante})]})]})})]}),j(),i.jsxs("div",{className:"mt-8",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Estadísticas por eje temático"}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:i.jsx("div",{className:"space-y-4",children:l.porEjeTematico.map((B,M)=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"font-medium",children:B.eje}),i.jsxs("span",{className:"text-sm",children:[B.promedio.toFixed(1),"%"]})]}),i.jsx("div",{className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-full",children:i.jsx("div",{className:`h-full rounded-full ${B.promedio>=80?"bg-green-500":B.promedio>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${B.promedio}%`}})})]},M))})})]})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(um,{className:"w-12 h-12 mx-auto mb-3 text-slate-400"}),i.jsx("p",{children:"No hay datos disponibles para mostrar"})]}),E=()=>{const B=s.filter(M=>x==="todos"?!0:M.nivelLogro.toLowerCase()===x);return i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Resultados por estudiante"}),i.jsx("div",{className:"flex space-x-2",children:i.jsxs("select",{className:"text-sm border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 px-2 py-1",value:x,onChange:M=>v(M.target.value),children:[i.jsx("option",{value:"todos",children:"Todos los niveles"}),i.jsx("option",{value:"adecuado",children:"Adecuado"}),i.jsx("option",{value:"elemental",children:"Elemental"}),i.jsx("option",{value:"insuficiente",children:"Insuficiente"})]})})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Estudiante"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Curso"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"% Logro"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Nivel"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Correctas"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Tiempo"}),i.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-slate-200",children:"Fecha"})]})}),i.jsx("tbody",{children:B.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"px-4 py-6 text-center text-slate-600 dark:text-slate-400",children:"No hay datos para mostrar con los filtros seleccionados"})}):B.map(M=>{var R;return i.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"px-4 py-3",children:M.estudianteNombre||"Desconocido"}),i.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:((R=M.estudiante)==null?void 0:R.curso)||"-"}),i.jsxs("td",{className:"px-4 py-3 font-semibold",children:[M.porcentajeLogro.toFixed(1),"%"]}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${T(M.nivelLogro)}`,children:M.nivelLogro})}),i.jsxs("td",{className:"px-4 py-3",children:[M.respuestasCorrectas||"-","/",(n==null?void 0:n.preguntas.length)||"-"]}),i.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:M.tiempoRealizacion?`${Math.floor(M.tiempoRealizacion/60)}:${(M.tiempoRealizacion%60).toString().padStart(2,"0")}`:"-"}),i.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400",children:new Date(M.fechaRealizacion).toLocaleDateString()})]},M.id)})})]})})})]})},S=()=>!n||!(l!=null&&l.porPregunta)||!l.porPregunta.length?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(um,{className:"w-12 h-12 mx-auto mb-3 text-slate-400"}),i.jsx("p",{children:"No hay datos disponibles para mostrar"})]}):i.jsxs("div",{className:"mt-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Análisis por pregunta"}),i.jsx("div",{className:"space-y-6",children:l.porPregunta.map((B,M)=>{var k;const R=n.preguntas.find(D=>D.id===B.preguntaId);return R?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-bold mb-2",children:[i.jsxs("span",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 py-0.5 px-2 rounded-md mr-2",children:["Pregunta ",M+1]}),R.enunciado]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[i.jsx("span",{className:"font-medium",children:"Eje temático:"})," ",R.ejeTematico||"No especificado"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Porcentaje de acierto"}),i.jsxs("div",{className:`text-xl font-bold ${B.porcentajeAcierto>=80?"text-green-600 dark:text-green-400":B.porcentajeAcierto>=50?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}`,children:[B.porcentajeAcierto.toFixed(1),"%"]})]})]}),i.jsx("div",{className:"mt-4",children:i.jsx("div",{className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-full mb-2",children:i.jsx("div",{className:`h-full rounded-full ${B.porcentajeAcierto>=80?"bg-green-500":B.porcentajeAcierto>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${B.porcentajeAcierto}%`}})})}),i.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Distribución de respuestas"}),i.jsx("div",{className:"space-y-2",children:B.distribucionRespuestas.map(D=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs ${D.alternativaId===R.respuestaCorrecta?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300"} mr-2`,children:D.alternativaId}),i.jsx("div",{className:"flex-1",children:i.jsx("div",{className:"w-full h-4 bg-slate-200 dark:bg-slate-700 rounded-sm overflow-hidden",children:i.jsx("div",{className:`h-full ${D.alternativaId===R.respuestaCorrecta?"bg-green-500 dark:bg-green-600":"bg-red-500 dark:bg-red-600"}`,style:{width:`${D.porcentaje}%`}})})}),i.jsxs("div",{className:"ml-2 w-10 text-right text-sm",children:[D.porcentaje.toFixed(0),"%"]})]},D.alternativaId))})]}),i.jsxs("div",{children:[i.jsx("h5",{className:"text-sm font-semibold mb-2",children:"Alternativa correcta"}),i.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded border border-green-200 dark:border-green-800 text-green-800 dark:text-green-300",children:i.jsxs("div",{className:"flex items-start",children:[i.jsxs("div",{className:"font-bold mr-2",children:[R.respuestaCorrecta,")"]}),i.jsx("div",{children:(k=R.alternativas.find(D=>D.id===R.respuestaCorrecta))==null?void 0:k.texto})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("h5",{className:"text-sm font-semibold mb-1",children:"Dificultad"}),i.jsx("div",{className:`inline-block px-3 py-1 rounded text-sm ${B.porcentajeAcierto>=80?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":B.porcentajeAcierto>=50?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:B.porcentajeAcierto>=80?"Baja":B.porcentajeAcierto>=50?"Media":"Alta"})]})]})]})]},B.preguntaId):null})})]});return u?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(um,{className:"w-8 h-8 text-indigo-500 animate-spin mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando información..."})]}):i.jsx("div",{className:"space-y-6",children:n?i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-slate-200 dark:border-slate-700 pb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:n.titulo}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[n.asignatura," • ",n.cursoObjetivo," • ",s.length," estudiantes evaluados"]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:w,className:"py-2 px-3 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center gap-1 text-sm",children:[i.jsx(Eh,{className:"w-4 h-4"}),i.jsx("span",{children:"Exportar"})]}),i.jsx("button",{onClick:()=>a(null),className:"py-2 px-3 bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded-md hover:bg-slate-300 dark:hover:bg-slate-600 text-sm",children:"Volver"})]})]}),f&&i.jsxs("div",{className:"mb-4 p-3 bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200 rounded-md flex items-center",children:[i.jsx(Ww,{className:"w-4 h-4 mr-2"}),f]}),i.jsxs("div",{className:"flex border-b border-slate-200 dark:border-slate-700 mb-6",children:[i.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${m==="general"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>g("general"),children:"Vista general"}),i.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${m==="porEstudiante"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>g("porEstudiante"),children:"Por estudiante"}),i.jsx("button",{className:`py-2 px-4 border-b-2 font-medium text-sm ${m==="porPregunta"?"border-indigo-600 text-indigo-600 dark:text-indigo-400 dark:border-indigo-400":"border-transparent text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,onClick:()=>g("porPregunta"),children:"Por pregunta"})]}),m==="general"&&I(),m==="porEstudiante"&&E(),m==="porPregunta"&&S()]}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md border border-slate-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones para analizar"}),t.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Yp,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No hay evaluaciones SIMCE creadas aún."})]}):i.jsx("div",{className:"space-y-4",children:t.map(B=>i.jsx("div",{className:"p-4 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>y(B.id),children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:`p-2 rounded-md mr-4 ${B.asignatura==="Lectura"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"}`,children:B.asignatura==="Lectura"?i.jsx(ol,{className:"w-6 h-6"}):i.jsx(nR,{className:"w-6 h-6"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-lg",children:B.titulo}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:B.descripcion}),i.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:B.asignatura}),i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:[B.preguntas.length," preguntas"]}),i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200",children:new Date(B.fechaCreacion).toLocaleDateString()})]})]})]})},B.id))})]})})},u5=({currentUser:e})=>{const[t,r]=C.useState("generador"),n=(e==null?void 0:e.profile)===Gt.PROFESORADO||(e==null?void 0:e.profile)===Gt.SUBDIRECCION||(e==null?void 0:e.profile)===Gt.COORDINACION_TP,a=(e==null?void 0:e.profile)===Gt.ESTUDIANTE;return C.useEffect(()=>{a&&r("evaluacion")},[a]),i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación SIMCE"})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md overflow-hidden",children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex",children:[n&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>r("generador"),className:`flex items-center gap-2 px-4 py-3 ${t==="generador"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[i.jsx(k_,{className:"w-4 h-4"}),i.jsx("span",{children:"Generador de Preguntas"})]}),i.jsxs("button",{onClick:()=>r("resultados"),className:`flex items-center gap-2 px-4 py-3 ${t==="resultados"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[i.jsx(zc,{className:"w-4 h-4"}),i.jsx("span",{children:"Resultados"})]})]}),a&&i.jsxs("button",{onClick:()=>r("evaluacion"),className:`flex items-center gap-2 px-4 py-3 ${t==="evaluacion"?"text-indigo-600 border-b-2 border-indigo-600 font-medium":"text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[i.jsx(Ov,{className:"w-4 h-4"}),i.jsx("span",{children:"Mis Evaluaciones"})]})]})}),i.jsxs("div",{className:"p-6",children:[n&&t==="generador"&&i.jsx(Qmt,{currentUser:e}),n&&t==="resultados"&&i.jsx(Vmt,{currentUser:e}),a&&t==="evaluacion"&&i.jsx(Hmt,{currentUser:e}),!n&&!a&&i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:"No tienes permisos para acceder a este módulo."})})]})]})]})},zmt=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},$mt=({currentUser:e,onLogout:t,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,unreadMessagesCount:s,refreshUnreadCount:o})=>{const l=e.profile,c=C.useMemo(()=>{const T=Gye[l]||[];return l!==Gt.ESTUDIANTE?T:T.filter(j=>{if(j.name==="Asistencia a Empresa"){const I=zmt(e.curso||"");return I.startsWith("3º")||I.startsWith("4º")}return!0})},[l,e.curso]),[u,d]=C.useState(null),[f,h]=C.useState(!1),[m,g]=C.useState(!1),x=C.useRef([]);C.useEffect(()=>{c&&c.length>0?d(c[0]):d(null)},[l,c]);const v=C.useCallback(T=>{d(T),window.innerWidth<768&&h(!1)},[]),y=C.useCallback(T=>{const j=c.find(I=>I.name===T);j&&v(j)},[c,v]),w=()=>i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center h-20 px-4 border-b border-white/10 bg-[#121926]",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-400 flex items-center justify-center shadow-inner",children:i.jsx("span",{className:"text-slate-900 inline-flex items-center justify-center",children:i.jsx(Bye,{className:"w-5 h-5"})})}),!m&&i.jsx("span",{className:"text-white font-extrabold text-xl tracking-tight",children:"Gestión LIR"})]}),i.jsx("button",{type:"button",onClick:()=>g(T=>!T),className:"ml-auto w-9 h-9 inline-flex items-center justify-center rounded-full hover:bg-white/10 transition",title:m?"Expandir":"Colapsar",children:m?i.jsx(aR,{className:"w-5 h-5 text-slate-200"}):i.jsx(Kw,{className:"w-5 h-5 text-slate-200"})})]}),i.jsx("nav",{className:"flex-1 overflow-y-auto p-3 bg-[#1B2433]",onKeyDown:T=>{var I,E,S;const j=x.current.findIndex(B=>B===document.activeElement);if(T.key==="ArrowDown"){T.preventDefault();const B=Math.min(j===-1?0:j+1,x.current.length-1);(I=x.current[B])==null||I.focus()}else if(T.key==="ArrowUp"){T.preventDefault();const B=Math.max(j===-1?0:j-1,0);(E=x.current[B])==null||E.focus()}else T.key==="Enter"&&j>=0&&((S=x.current[j])==null||S.click())},children:i.jsx("div",{className:"space-y-1",children:c.map((T,j)=>{const I=(u==null?void 0:u.name)===T.name;return i.jsxs("button",{ref:E=>x.current[j]=E,onClick:()=>v(T),className:`w-full group flex items-center ${m?"justify-center px-2":"justify-start px-4"} gap-3 py-3 rounded-2xl transition-all
                  ${I?"bg-amber-400 text-slate-900 font-bold shadow-md":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:m?T.name:void 0,children:[i.jsx("span",{className:`shrink-0 ${I?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:T.icon}),!m&&i.jsx("span",{className:"text-[1.05rem] leading-tight whitespace-normal break-words text-left",children:T.name})]},T.name)})})})]}),_=()=>{if(!u)return i.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full flex items-center justify-center",children:i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Seleccione un módulo del menú para comenzar."})});if(u.name==="Calendario Académico")return i.jsx(rWe,{profile:l});if(u.name==="Muro de Anuncios")return i.jsx(oWe,{currentUser:e});if(u.name==="Mensajería Interna")return i.jsx(bZe,{currentUser:e,refreshUnreadCount:o});if(u.name==="Generador de Actas")return i.jsx(mWe,{});if(u.name==="Desarrollo Profesional")return i.jsx(x0t,{currentUser:e});if(l===Gt.SUBDIRECCION){if(u.name==="Dashboard")return i.jsx(xNe,{currentUser:e});if(u.name==="Administración")return i.jsx(gYe,{});if(u.name==="Seguimiento Curricular")return i.jsx(cot,{currentUser:e});if(u.name==="Acompañamiento docente")return i.jsx(fZe,{currentUser:e});if(u.name==="Análisis Taxonómico")return i.jsx(JW,{currentUser:e});if(u.name==="SIMCE")return i.jsx(u5,{currentUser:e});if(u.name==="Interdisciplinario")return i.jsx(oW,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return i.jsx(ANe,{currentUser:e});if(u.name==="Crear horarios")return i.jsx(S6e,{});if(u.name==="Seguimiento de acciones pedagógicas")return i.jsx(rKe,{});if(u.name==="Inclusión")return i.jsx(rW,{currentUser:e})}if(l===Gt.PROFESORADO){if(u.name==="Planificación")return i.jsx(KKe,{currentUser:e});if(u.name==="Mis Acompañamientos")return i.jsx(Hit,{currentUser:e});if(u.name==="Recursos de Aprendizaje")return i.jsx(kit,{});if(u.name==="Análisis Taxonómico")return i.jsx(JW,{currentUser:e});if(u.name==="SIMCE")return i.jsx(u5,{currentUser:e});if(u.name==="Interdisciplinario")return i.jsx(oW,{});if(u.name==="Inclusión")return i.jsx(rW,{currentUser:e});if(u.name==="Actividades Remotas")return i.jsx(qYe,{});if(u.name==="Evaluación de Aprendizajes")return i.jsx(hYe,{});if(u.name==="Evaluaciones Formativas")return i.jsx(qJe,{currentUser:e});if(u.name==="Evaluación de Competencias")return i.jsx(vmt,{currentUser:e})}if(l===Gt.COORDINACION_TP){if(u.name==="Seguimiento Dual")return i.jsx(SYe,{});if(u.name==="Asistencia Dual")return i.jsx(TJe,{});if(u.name==="Pañol")return i.jsx(QZe,{});if(u.name==="SIMCE")return i.jsx(u5,{currentUser:e});if(u.name==="Gestión de Empresas")return i.jsx(Yht,{});if(u.name==="Alternancia TP")return i.jsx(K0t,{})}if(l===Gt.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return i.jsx(lJe,{currentUser:e});if(u.name==="Evaluación Formativa")return i.jsx(Dit,{currentUser:e});if(u.name==="Tareas Interdisciplinarias")return i.jsx(Uit,{currentUser:e});if(u.name==="SIMCE")return i.jsx(u5,{currentUser:e});if(u.name==="Asistencia a Empresa")return i.jsx(EJe,{currentUser:e})}return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full animate-fade-in",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),i.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",i.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return i.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-b from-slate-100 to-slate-50 dark:from-slate-950 dark:to-slate-900",children:[i.jsx(KEe,{currentUser:e,onLogout:t,onNavigate:y,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,toggleSidebar:()=>h(T=>!T),unreadMessagesCount:s,refreshUnreadCount:o}),i.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f&&i.jsx("div",{onClick:()=>h(!1),className:"fixed inset-0 bg-black/40 backdrop-blur-[1px] z-20 md:hidden"}),i.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 ${m?"w-16":"w-72"} 
          bg-[#0F1724] text-white flex flex-col transform md:translate-x-0
          ${f?"translate-x-0":"-translate-x-full"} md:translate-x-0
          transition-all duration-300 ease-in-out border-r border-white/10`,children:i.jsx(w,{})}),i.jsx("main",{className:"flex-1 overflow-y-auto",children:i.jsxs("div",{className:"relative p-5 md:p-8 space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{className:"md:hidden inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow hover:shadow-md transition",onClick:()=>h(!0),title:"Abrir menú",children:i.jsx(H2e,{className:"w-5 h-5"})}),(u==null?void 0:u.icon)&&i.jsx("span",{className:"inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow",children:u.icon}),i.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-slate-100",children:(u==null?void 0:u.name)??"Dashboard"})]})}),i.jsx("div",{className:"min-h-[60vh]",children:_()})]})})]})]})},Gmt=({onSelectProfile:e,isAdminView:t=!1})=>i.jsxs("div",{className:`relative flex flex-col items-center justify-center min-h-screen p-6 overflow-hidden
                    bg-gradient-to-br from-blue-50 via-blue-100 to-yellow-50
                    dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[i.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[i.jsx("div",{className:`absolute -top-24 -left-16 h-72 w-72 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-yellow-300 to-yellow-200
                        dark:from-yellow-400/20 dark:to-yellow-500/20`}),i.jsx("div",{className:`absolute top-40 -right-10 h-80 w-80 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-blue-300 to-sky-300
                        dark:from-blue-500/20 dark:to-sky-500/20`}),i.jsx("div",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 h-96 w-96 rounded-full blur-3xl opacity-30
                        bg-gradient-to-tr from-sky-200 to-blue-200
                        dark:from-sky-500/20 dark:to-blue-500/20`})]}),i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("div",{className:"mb-4 flex justify-center items-center",children:i.jsx(rR,{})}),i.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mt-2 drop-shadow-sm",children:"Gestión Pedagógica LIR"}),i.jsx("p",{className:"text-slate-700/80 dark:text-slate-300/80 mt-2 text-lg",children:t?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:$ye.map(r=>i.jsxs("button",{onClick:()=>e(r.id),className:`group relative overflow-hidden p-8 rounded-2xl
                       bg-white/10 dark:bg-white/5
                       backdrop-blur-xl border border-white/30 dark:border-white/10
                       shadow-lg hover:shadow-2xl hover:-translate-y-1.5
                       transition-all duration-300 ease-out
                       focus:outline-none focus:ring-4 focus:ring-yellow-400/40`,children:[i.jsx("div",{className:`pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100
                            transition-opacity duration-300
                            bg-gradient-to-br from-white/40 to-transparent`}),i.jsx("div",{className:"text-slate-800 dark:text-slate-200 group-hover:text-yellow-500 transition-colors duration-300",children:r.icon}),i.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-900 dark:text-slate-100 drop-shadow-[0_1px_0_rgba(0,0,0,0.1)]",children:r.label})]},r.id))}),i.jsxs("footer",{className:"absolute bottom-4 text-slate-600 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),qmt=()=>{const[e,t]=C.useState(null),[r,n]=C.useState(null),[a,s]=C.useState(!0),[o,l]=C.useState(null),[c,u]=C.useState(!1),[d,f]=C.useState(null),[h,m]=C.useState(null);C.useEffect(()=>{const T=new URLSearchParams(window.location.search),j=T.get("auth"),I=T.get("userId");T.get("module"),j==="success"&&I&&(m("¡Autorización de Google Slides completada exitosamente!"),setTimeout(()=>{const E=window.location.pathname;window.history.replaceState({},document.title,E),m(null)},3e3))},[]),C.useEffect(()=>{const T=UJ(Hg,async j=>{if(t(j),j)try{const I=await rte(j.email);I?(n(I),I.profile===Gt.SUBDIRECCION&&u(!0)):(l("Usuario no encontrado en la base de datos. Contacte al administrador."),await sB())}catch{l("Error al conectar con la base de datos."),await sB()}else n(null),f(null),u(!1),l(null);s(!1)});return()=>T()},[]);const g=async(T,j)=>{if(l(null),!T.trim()||!j.trim()){l("Por favor ingrese email y contraseña");return}try{await _ye(T.trim(),j)}catch(I){switch(I.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":l("Credenciales inválidas. Verifique su email y contraseña.");break;case"auth/too-many-requests":l("Demasiados intentos fallidos. Intente más tarde.");break;case"auth/network-request-failed":l("Error de conexión. Verifique su internet.");break;default:l("Ocurrió un error al intentar iniciar sesión.")}}},x=async T=>{try{await Sye(T)}catch(j){console.error("Error al enviar email de recuperación:",j)}},v=T=>{f(T),u(!1)},y=()=>{u(!0),f(null)},w=async()=>{try{await sB()}catch(T){console.error("Error al cerrar sesión:",T)}};if(a)return i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"mb-4 flex justify-center items-center",children:i.jsx(rR,{})}),i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."})]})});if(!e||!r)return i.jsx(twe,{onLoginAttempt:g,onForgotPasswordRequest:x,error:o});if(c&&r.profile===Gt.SUBDIRECCION)return i.jsx(Gmt,{onSelectProfile:v,isAdminView:!0});const _=d||r.profile;return i.jsxs(i.Fragment,{children:[h&&i.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-green-500 text-white p-4 rounded-lg shadow-lg flex items-center gap-2",children:[i.jsx("span",{className:"text-lg",children:"✅"}),i.jsx("span",{children:h})]}),i.jsx($mt,{currentUser:{...r,profile:_},onLogout:w,onChangeProfile:r.profile===Gt.SUBDIRECCION?y:void 0,canChangeProfile:r.profile===Gt.SUBDIRECCION})]})},xAe=document.getElementById("root");if(!xAe)throw new Error("Could not find root element to mount to");const Kmt=Dhe.createRoot(xAe);Kmt.render(i.jsx(at.StrictMode,{children:i.jsx(qmt,{})}));export{ga as _,Xmt as c,jl as g};
