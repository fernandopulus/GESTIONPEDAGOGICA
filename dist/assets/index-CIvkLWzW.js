(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var BUe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Pq(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var a_={exports:{}},Ng={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c3;function Oq(){if(c3)return Ng;c3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var i=null;if(a!==void 0&&(i=""+a),s.key!==void 0&&(i=""+s.key),"key"in s){a={};for(var o in s)o!=="key"&&(a[o]=s[o])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:i,ref:s!==void 0?s:null,props:a}}return Ng.Fragment=e,Ng.jsx=n,Ng.jsxs=n,Ng}var u3;function jq(){return u3||(u3=1,a_.exports=Oq()),a_.exports}var c=jq(),i_={exports:{}},Yn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A3;function Qq(){if(A3)return Yn;A3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function m(K){return K===null||typeof K!="object"?null:(K=h&&K[h]||K["@@iterator"],typeof K=="function"?K:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,x={};function C(K,ie,O){this.props=K,this.context=ie,this.refs=x,this.updater=O||p}C.prototype.isReactComponent={},C.prototype.setState=function(K,ie){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,ie,"setState")},C.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function S(){}S.prototype=C.prototype;function k(K,ie,O){this.props=K,this.context=ie,this.refs=x,this.updater=O||p}var I=k.prototype=new S;I.constructor=k,y(I,C.prototype),I.isPureReactComponent=!0;var F=Array.isArray,U={H:null,A:null,T:null,S:null,V:null},R=Object.prototype.hasOwnProperty;function E(K,ie,O,W,Z,re){return O=re.ref,{$$typeof:t,type:K,key:ie,ref:O!==void 0?O:null,props:re}}function _(K,ie){return E(K.type,ie,void 0,void 0,void 0,K.props)}function B(K){return typeof K=="object"&&K!==null&&K.$$typeof===t}function j(K){var ie={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(O){return ie[O]})}var D=/\/+/g;function L(K,ie){return typeof K=="object"&&K!==null&&K.key!=null?j(""+K.key):ie.toString(36)}function Q(){}function H(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(Q,Q):(K.status="pending",K.then(function(ie){K.status==="pending"&&(K.status="fulfilled",K.value=ie)},function(ie){K.status==="pending"&&(K.status="rejected",K.reason=ie)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function te(K,ie,O,W,Z){var re=typeof K;(re==="undefined"||re==="boolean")&&(K=null);var se=!1;if(K===null)se=!0;else switch(re){case"bigint":case"string":case"number":se=!0;break;case"object":switch(K.$$typeof){case t:case e:se=!0;break;case d:return se=K._init,te(se(K._payload),ie,O,W,Z)}}if(se)return Z=Z(K),se=W===""?"."+L(K,0):W,F(Z)?(O="",se!=null&&(O=se.replace(D,"$&/")+"/"),te(Z,ie,O,"",function(be){return be})):Z!=null&&(B(Z)&&(Z=_(Z,O+(Z.key==null||K&&K.key===Z.key?"":(""+Z.key).replace(D,"$&/")+"/")+se)),ie.push(Z)),1;se=0;var de=W===""?".":W+":";if(F(K))for(var pe=0;pe<K.length;pe++)W=K[pe],re=de+L(W,pe),se+=te(W,ie,O,re,Z);else if(pe=m(K),typeof pe=="function")for(K=pe.call(K),pe=0;!(W=K.next()).done;)W=W.value,re=de+L(W,pe++),se+=te(W,ie,O,re,Z);else if(re==="object"){if(typeof K.then=="function")return te(H(K),ie,O,W,Z);throw ie=String(K),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return se}function Y(K,ie,O){if(K==null)return K;var W=[],Z=0;return te(K,W,"","",function(re){return ie.call(O,re,Z++)}),W}function ne(K){if(K._status===-1){var ie=K._result;ie=ie(),ie.then(function(O){(K._status===0||K._status===-1)&&(K._status=1,K._result=O)},function(O){(K._status===0||K._status===-1)&&(K._status=2,K._result=O)}),K._status===-1&&(K._status=0,K._result=ie)}if(K._status===1)return K._result.default;throw K._result}var V=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)};function J(){}return Yn.Children={map:Y,forEach:function(K,ie,O){Y(K,function(){ie.apply(this,arguments)},O)},count:function(K){var ie=0;return Y(K,function(){ie++}),ie},toArray:function(K){return Y(K,function(ie){return ie})||[]},only:function(K){if(!B(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Yn.Component=C,Yn.Fragment=n,Yn.Profiler=s,Yn.PureComponent=k,Yn.StrictMode=r,Yn.Suspense=l,Yn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Yn.__COMPILER_RUNTIME={__proto__:null,c:function(K){return U.H.useMemoCache(K)}},Yn.cache=function(K){return function(){return K.apply(null,arguments)}},Yn.cloneElement=function(K,ie,O){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var W=y({},K.props),Z=K.key,re=void 0;if(ie!=null)for(se in ie.ref!==void 0&&(re=void 0),ie.key!==void 0&&(Z=""+ie.key),ie)!R.call(ie,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&ie.ref===void 0||(W[se]=ie[se]);var se=arguments.length-2;if(se===1)W.children=O;else if(1<se){for(var de=Array(se),pe=0;pe<se;pe++)de[pe]=arguments[pe+2];W.children=de}return E(K.type,Z,void 0,void 0,re,W)},Yn.createContext=function(K){return K={$$typeof:i,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:a,_context:K},K},Yn.createElement=function(K,ie,O){var W,Z={},re=null;if(ie!=null)for(W in ie.key!==void 0&&(re=""+ie.key),ie)R.call(ie,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(Z[W]=ie[W]);var se=arguments.length-2;if(se===1)Z.children=O;else if(1<se){for(var de=Array(se),pe=0;pe<se;pe++)de[pe]=arguments[pe+2];Z.children=de}if(K&&K.defaultProps)for(W in se=K.defaultProps,se)Z[W]===void 0&&(Z[W]=se[W]);return E(K,re,void 0,void 0,null,Z)},Yn.createRef=function(){return{current:null}},Yn.forwardRef=function(K){return{$$typeof:o,render:K}},Yn.isValidElement=B,Yn.lazy=function(K){return{$$typeof:d,_payload:{_status:-1,_result:K},_init:ne}},Yn.memo=function(K,ie){return{$$typeof:u,type:K,compare:ie===void 0?null:ie}},Yn.startTransition=function(K){var ie=U.T,O={};U.T=O;try{var W=K(),Z=U.S;Z!==null&&Z(O,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(J,V)}catch(re){V(re)}finally{U.T=ie}},Yn.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Yn.use=function(K){return U.H.use(K)},Yn.useActionState=function(K,ie,O){return U.H.useActionState(K,ie,O)},Yn.useCallback=function(K,ie){return U.H.useCallback(K,ie)},Yn.useContext=function(K){return U.H.useContext(K)},Yn.useDebugValue=function(){},Yn.useDeferredValue=function(K,ie){return U.H.useDeferredValue(K,ie)},Yn.useEffect=function(K,ie,O){var W=U.H;if(typeof O=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(K,ie)},Yn.useId=function(){return U.H.useId()},Yn.useImperativeHandle=function(K,ie,O){return U.H.useImperativeHandle(K,ie,O)},Yn.useInsertionEffect=function(K,ie){return U.H.useInsertionEffect(K,ie)},Yn.useLayoutEffect=function(K,ie){return U.H.useLayoutEffect(K,ie)},Yn.useMemo=function(K,ie){return U.H.useMemo(K,ie)},Yn.useOptimistic=function(K,ie){return U.H.useOptimistic(K,ie)},Yn.useReducer=function(K,ie,O){return U.H.useReducer(K,ie,O)},Yn.useRef=function(K){return U.H.useRef(K)},Yn.useState=function(K){return U.H.useState(K)},Yn.useSyncExternalStore=function(K,ie,O){return U.H.useSyncExternalStore(K,ie,O)},Yn.useTransition=function(){return U.H.useTransition()},Yn.version="19.1.1",Yn}var d3;function _v(){return d3||(d3=1,i_.exports=Qq()),i_.exports}var G=_v();const gt=Tb(G);var o_={exports:{}},Bg={},l_={exports:{}},c_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f3;function Hq(){return f3||(f3=1,function(t){function e(Y,ne){var V=Y.length;Y.push(ne);e:for(;0<V;){var J=V-1>>>1,K=Y[J];if(0<s(K,ne))Y[J]=ne,Y[V]=K,V=J;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var ne=Y[0],V=Y.pop();if(V!==ne){Y[0]=V;e:for(var J=0,K=Y.length,ie=K>>>1;J<ie;){var O=2*(J+1)-1,W=Y[O],Z=O+1,re=Y[Z];if(0>s(W,V))Z<K&&0>s(re,W)?(Y[J]=re,Y[Z]=V,J=Z):(Y[J]=W,Y[O]=V,J=O);else if(Z<K&&0>s(re,V))Y[J]=re,Y[Z]=V,J=Z;else break e}}return ne}function s(Y,ne){var V=Y.sortIndex-ne.sortIndex;return V!==0?V:Y.id-ne.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var l=[],u=[],d=1,h=null,m=3,p=!1,y=!1,x=!1,C=!1,S=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function F(Y){for(var ne=n(u);ne!==null;){if(ne.callback===null)r(u);else if(ne.startTime<=Y)r(u),ne.sortIndex=ne.expirationTime,e(l,ne);else break;ne=n(u)}}function U(Y){if(x=!1,F(Y),!y)if(n(l)!==null)y=!0,R||(R=!0,L());else{var ne=n(u);ne!==null&&te(U,ne.startTime-Y)}}var R=!1,E=-1,_=5,B=-1;function j(){return C?!0:!(t.unstable_now()-B<_)}function D(){if(C=!1,R){var Y=t.unstable_now();B=Y;var ne=!0;try{e:{y=!1,x&&(x=!1,k(E),E=-1),p=!0;var V=m;try{t:{for(F(Y),h=n(l);h!==null&&!(h.expirationTime>Y&&j());){var J=h.callback;if(typeof J=="function"){h.callback=null,m=h.priorityLevel;var K=J(h.expirationTime<=Y);if(Y=t.unstable_now(),typeof K=="function"){h.callback=K,F(Y),ne=!0;break t}h===n(l)&&r(l),F(Y)}else r(l);h=n(l)}if(h!==null)ne=!0;else{var ie=n(u);ie!==null&&te(U,ie.startTime-Y),ne=!1}}break e}finally{h=null,m=V,p=!1}ne=void 0}}finally{ne?L():R=!1}}}var L;if(typeof I=="function")L=function(){I(D)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,H=Q.port2;Q.port1.onmessage=D,L=function(){H.postMessage(null)}}else L=function(){S(D,0)};function te(Y,ne){E=S(function(){Y(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(Y){switch(m){case 1:case 2:case 3:var ne=3;break;default:ne=m}var V=m;m=ne;try{return Y()}finally{m=V}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(Y,ne){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var V=m;m=Y;try{return ne()}finally{m=V}},t.unstable_scheduleCallback=function(Y,ne,V){var J=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?J+V:J):V=J,Y){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=V+K,Y={id:d++,callback:ne,priorityLevel:Y,startTime:V,expirationTime:K,sortIndex:-1},V>J?(Y.sortIndex=V,e(u,Y),n(l)===null&&Y===n(u)&&(x?(k(E),E=-1):x=!0,te(U,V-J))):(Y.sortIndex=K,e(l,Y),y||p||(y=!0,R||(R=!0,L()))),Y},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(Y){var ne=m;return function(){var V=m;m=ne;try{return Y.apply(this,arguments)}finally{m=V}}}}(c_)),c_}var h3;function Vq(){return h3||(h3=1,l_.exports=Hq()),l_.exports}var u_={exports:{}},Pi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m3;function zq(){if(m3)return Pi;m3=1;var t=_v();function e(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(l,u,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:h==null?null:""+h,children:l,containerInfo:u,implementation:d}}var i=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Pi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Pi.createPortal=function(l,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(l,u,null,d)},Pi.flushSync=function(l){var u=i.T,d=r.p;try{if(i.T=null,r.p=2,l)return l()}finally{i.T=u,r.p=d,r.d.f()}},Pi.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(l,u))},Pi.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Pi.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin),m=typeof u.integrity=="string"?u.integrity:void 0,p=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?r.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:p}):d==="script"&&r.d.X(l,{crossOrigin:h,integrity:m,fetchPriority:p,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Pi.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(l)},Pi.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin);r.d.L(l,d,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Pi.preloadModule=function(l,u){if(typeof l=="string")if(u){var d=o(u.as,u.crossOrigin);r.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(l)},Pi.requestFormReset=function(l){r.d.r(l)},Pi.unstable_batchedUpdates=function(l,u){return l(u)},Pi.useFormState=function(l,u,d){return i.H.useFormState(l,u,d)},Pi.useFormStatus=function(){return i.H.useHostTransitionStatus()},Pi.version="19.1.1",Pi}var p3;function Q8(){if(p3)return u_.exports;p3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),u_.exports=zq(),u_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g3;function Gq(){if(g3)return Bg;g3=1;var t=Vq(),e=_v(),n=Q8();function r(A){var f="https://react.dev/errors/"+A;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+A+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function a(A){var f=A,g=A;if(A.alternate)for(;f.return;)f=f.return;else{A=f;do f=A,(f.flags&4098)!==0&&(g=f.return),A=f.return;while(A)}return f.tag===3?g:null}function i(A){if(A.tag===13){var f=A.memoizedState;if(f===null&&(A=A.alternate,A!==null&&(f=A.memoizedState)),f!==null)return f.dehydrated}return null}function o(A){if(a(A)!==A)throw Error(r(188))}function l(A){var f=A.alternate;if(!f){if(f=a(A),f===null)throw Error(r(188));return f!==A?null:A}for(var g=A,b=f;;){var M=g.return;if(M===null)break;var z=M.alternate;if(z===null){if(b=M.return,b!==null){g=b;continue}break}if(M.child===z.child){for(z=M.child;z;){if(z===g)return o(M),A;if(z===b)return o(M),f;z=z.sibling}throw Error(r(188))}if(g.return!==b.return)g=M,b=z;else{for(var le=!1,ye=M.child;ye;){if(ye===g){le=!0,g=M,b=z;break}if(ye===b){le=!0,b=M,g=z;break}ye=ye.sibling}if(!le){for(ye=z.child;ye;){if(ye===g){le=!0,g=z,b=M;break}if(ye===b){le=!0,b=z,g=M;break}ye=ye.sibling}if(!le)throw Error(r(189))}}if(g.alternate!==b)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?A:f}function u(A){var f=A.tag;if(f===5||f===26||f===27||f===6)return A;for(A=A.child;A!==null;){if(f=u(A),f!==null)return f;A=A.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),I=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function L(A){return A===null||typeof A!="object"?null:(A=D&&A[D]||A["@@iterator"],typeof A=="function"?A:null)}var Q=Symbol.for("react.client.reference");function H(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===Q?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case y:return"Fragment";case C:return"Profiler";case x:return"StrictMode";case U:return"Suspense";case R:return"SuspenseList";case B:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case p:return"Portal";case I:return(A.displayName||"Context")+".Provider";case k:return(A._context.displayName||"Context")+".Consumer";case F:var f=A.render;return A=A.displayName,A||(A=f.displayName||f.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case E:return f=A.displayName||null,f!==null?f:H(A.type)||"Memo";case _:f=A._payload,A=A._init;try{return H(A(f))}catch{}}return null}var te=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},J=[],K=-1;function ie(A){return{current:A}}function O(A){0>K||(A.current=J[K],J[K]=null,K--)}function W(A,f){K++,J[K]=A.current,A.current=f}var Z=ie(null),re=ie(null),se=ie(null),de=ie(null);function pe(A,f){switch(W(se,f),W(re,A),W(Z,null),f.nodeType){case 9:case 11:A=(A=f.documentElement)&&(A=A.namespaceURI)?MI(A):0;break;default:if(A=f.tagName,f=f.namespaceURI)f=MI(f),A=PI(f,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}O(Z),W(Z,A)}function be(){O(Z),O(re),O(se)}function Se(A){A.memoizedState!==null&&W(de,A);var f=Z.current,g=PI(f,A.type);f!==g&&(W(re,A),W(Z,g))}function me(A){re.current===A&&(O(Z),O(re)),de.current===A&&(O(de),Cg._currentValue=V)}var ce=Object.prototype.hasOwnProperty,Me=t.unstable_scheduleCallback,Ze=t.unstable_cancelCallback,Fe=t.unstable_shouldYield,Ce=t.unstable_requestPaint,Re=t.unstable_now,ze=t.unstable_getCurrentPriorityLevel,Je=t.unstable_ImmediatePriority,dt=t.unstable_UserBlockingPriority,_t=t.unstable_NormalPriority,ft=t.unstable_LowPriority,Rt=t.unstable_IdlePriority,Ut=t.log,Zt=t.unstable_setDisableYieldValue,Mt=null,jt=null;function Wt(A){if(typeof Ut=="function"&&Zt(A),jt&&typeof jt.setStrictMode=="function")try{jt.setStrictMode(Mt,A)}catch{}}var Ue=Math.clz32?Math.clz32:Xe,Oe=Math.log,Ie=Math.LN2;function Xe(A){return A>>>=0,A===0?32:31-(Oe(A)/Ie|0)|0}var mt=256,Yt=4194304;function Kt(A){var f=A&42;if(f!==0)return f;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function rn(A,f,g){var b=A.pendingLanes;if(b===0)return 0;var M=0,z=A.suspendedLanes,le=A.pingedLanes;A=A.warmLanes;var ye=b&134217727;return ye!==0?(b=ye&~z,b!==0?M=Kt(b):(le&=ye,le!==0?M=Kt(le):g||(g=ye&~A,g!==0&&(M=Kt(g))))):(ye=b&~z,ye!==0?M=Kt(ye):le!==0?M=Kt(le):g||(g=b&~A,g!==0&&(M=Kt(g)))),M===0?0:f!==0&&f!==M&&(f&z)===0&&(z=M&-M,g=f&-f,z>=g||z===32&&(g&4194048)!==0)?f:M}function qn(A,f){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&f)===0}function un(A,f){switch(A){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xr(){var A=mt;return mt<<=1,(mt&4194048)===0&&(mt=256),A}function jn(){var A=Yt;return Yt<<=1,(Yt&62914560)===0&&(Yt=4194304),A}function Sr(A){for(var f=[],g=0;31>g;g++)f.push(A);return f}function qr(A,f){A.pendingLanes|=f,f!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function on(A,f,g,b,M,z){var le=A.pendingLanes;A.pendingLanes=g,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=g,A.entangledLanes&=g,A.errorRecoveryDisabledLanes&=g,A.shellSuspendCounter=0;var ye=A.entanglements,Le=A.expirationTimes,it=A.hiddenUpdates;for(g=le&~g;0<g;){var xt=31-Ue(g),St=1<<xt;ye[xt]=0,Le[xt]=-1;var lt=it[xt];if(lt!==null)for(it[xt]=null,xt=0;xt<lt.length;xt++){var ct=lt[xt];ct!==null&&(ct.lane&=-536870913)}g&=~St}b!==0&&en(A,b,0),z!==0&&M===0&&A.tag!==0&&(A.suspendedLanes|=z&~(le&~f))}function en(A,f,g){A.pendingLanes|=f,A.suspendedLanes&=~f;var b=31-Ue(f);A.entangledLanes|=f,A.entanglements[b]=A.entanglements[b]|1073741824|g&4194090}function zn(A,f){var g=A.entangledLanes|=f;for(A=A.entanglements;g;){var b=31-Ue(g),M=1<<b;M&f|A[b]&f&&(A[b]|=f),g&=~M}}function xa(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function rs(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function ks(){var A=ne.p;return A!==0?A:(A=window.event,A===void 0?32:r3(A.type))}function Ua(A,f){var g=ne.p;try{return ne.p=A,f()}finally{ne.p=g}}var $t=Math.random().toString(36).slice(2),vr="__reactFiber$"+$t,ur="__reactProps$"+$t,Mr="__reactContainer$"+$t,Kr="__reactEvents$"+$t,ss="__reactListeners$"+$t,fe="__reactHandles$"+$t,Be="__reactResources$"+$t,Ee="__reactMarker$"+$t;function _e(A){delete A[vr],delete A[ur],delete A[Kr],delete A[ss],delete A[fe]}function Te(A){var f=A[vr];if(f)return f;for(var g=A.parentNode;g;){if(f=g[Mr]||g[vr]){if(g=f.alternate,f.child!==null||g!==null&&g.child!==null)for(A=HI(A);A!==null;){if(g=A[vr])return g;A=HI(A)}return f}A=g,g=A.parentNode}return null}function ke(A){if(A=A[vr]||A[Mr]){var f=A.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return A}return null}function Ye(A){var f=A.tag;if(f===5||f===26||f===27||f===6)return A.stateNode;throw Error(r(33))}function ot(A){var f=A[Be];return f||(f=A[Be]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function qe(A){A[Ee]=!0}var tt=new Set,st={};function Et(A,f){Dt(A,f),Dt(A+"Capture",f)}function Dt(A,f){for(st[A]=f,A=0;A<f.length;A++)tt.add(f[A])}var Vt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ft={},Pt={};function yn(A){return ce.call(Pt,A)?!0:ce.call(Ft,A)?!1:Vt.test(A)?Pt[A]=!0:(Ft[A]=!0,!1)}function Kn(A,f,g){if(yn(f))if(g===null)A.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":A.removeAttribute(f);return;case"boolean":var b=f.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){A.removeAttribute(f);return}}A.setAttribute(f,""+g)}}function $n(A,f,g){if(g===null)A.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(f);return}A.setAttribute(f,""+g)}}function Jn(A,f,g,b){if(b===null)A.removeAttribute(g);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(g);return}A.setAttributeNS(f,g,""+b)}}var js,Ti;function Qs(A){if(js===void 0)try{throw Error()}catch(g){var f=g.stack.trim().match(/\n( *(at )?)/);js=f&&f[1]||"",Ti=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+js+A+Ti}var va=!1;function na(A,f){if(!A||va)return"";va=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(f){var St=function(){throw Error()};if(Object.defineProperty(St.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(St,[])}catch(ct){var lt=ct}Reflect.construct(A,[],St)}else{try{St.call()}catch(ct){lt=ct}A.call(St.prototype)}}else{try{throw Error()}catch(ct){lt=ct}(St=A())&&typeof St.catch=="function"&&St.catch(function(){})}}catch(ct){if(ct&&lt&&typeof ct.stack=="string")return[ct.stack,lt.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var z=b.DetermineComponentFrameRoot(),le=z[0],ye=z[1];if(le&&ye){var Le=le.split(`
`),it=ye.split(`
`);for(M=b=0;b<Le.length&&!Le[b].includes("DetermineComponentFrameRoot");)b++;for(;M<it.length&&!it[M].includes("DetermineComponentFrameRoot");)M++;if(b===Le.length||M===it.length)for(b=Le.length-1,M=it.length-1;1<=b&&0<=M&&Le[b]!==it[M];)M--;for(;1<=b&&0<=M;b--,M--)if(Le[b]!==it[M]){if(b!==1||M!==1)do if(b--,M--,0>M||Le[b]!==it[M]){var xt=`
`+Le[b].replace(" at new "," at ");return A.displayName&&xt.includes("<anonymous>")&&(xt=xt.replace("<anonymous>",A.displayName)),xt}while(1<=b&&0<=M);break}}}finally{va=!1,Error.prepareStackTrace=g}return(g=A?A.displayName||A.name:"")?Qs(g):""}function Ma(A){switch(A.tag){case 26:case 27:case 5:return Qs(A.type);case 16:return Qs("Lazy");case 13:return Qs("Suspense");case 19:return Qs("SuspenseList");case 0:case 15:return na(A.type,!1);case 11:return na(A.type.render,!1);case 1:return na(A.type,!0);case 31:return Qs("Activity");default:return""}}function as(A){try{var f="";do f+=Ma(A),A=A.return;while(A);return f}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function ya(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function Zc(A){var f=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function dd(A){var f=Zc(A)?"checked":"value",g=Object.getOwnPropertyDescriptor(A.constructor.prototype,f),b=""+A[f];if(!A.hasOwnProperty(f)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var M=g.get,z=g.set;return Object.defineProperty(A,f,{configurable:!0,get:function(){return M.call(this)},set:function(le){b=""+le,z.call(this,le)}}),Object.defineProperty(A,f,{enumerable:g.enumerable}),{getValue:function(){return b},setValue:function(le){b=""+le},stopTracking:function(){A._valueTracker=null,delete A[f]}}}}function Cl(A){A._valueTracker||(A._valueTracker=dd(A))}function oA(A){if(!A)return!1;var f=A._valueTracker;if(!f)return!0;var g=f.getValue(),b="";return A&&(b=Zc(A)?A.checked?"true":"false":A.value),A=b,A!==g?(f.setValue(A),!0):!1}function Pa(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var eu=/[\n"\\]/g;function yr(A){return A.replace(eu,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Oa(A,f,g,b,M,z,le,ye){A.name="",le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?A.type=le:A.removeAttribute("type"),f!=null?le==="number"?(f===0&&A.value===""||A.value!=f)&&(A.value=""+ya(f)):A.value!==""+ya(f)&&(A.value=""+ya(f)):le!=="submit"&&le!=="reset"||A.removeAttribute("value"),f!=null?_l(A,le,ya(f)):g!=null?_l(A,le,ya(g)):b!=null&&A.removeAttribute("value"),M==null&&z!=null&&(A.defaultChecked=!!z),M!=null&&(A.checked=M&&typeof M!="function"&&typeof M!="symbol"),ye!=null&&typeof ye!="function"&&typeof ye!="symbol"&&typeof ye!="boolean"?A.name=""+ya(ye):A.removeAttribute("name")}function El(A,f,g,b,M,z,le,ye){if(z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(A.type=z),f!=null||g!=null){if(!(z!=="submit"&&z!=="reset"||f!=null))return;g=g!=null?""+ya(g):"",f=f!=null?""+ya(f):g,ye||f===A.value||(A.value=f),A.defaultValue=f}b=b??M,b=typeof b!="function"&&typeof b!="symbol"&&!!b,A.checked=ye?A.checked:!!b,A.defaultChecked=!!b,le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"&&(A.name=le)}function _l(A,f,g){f==="number"&&Pa(A.ownerDocument)===A||A.defaultValue===""+g||(A.defaultValue=""+g)}function wo(A,f,g,b){if(A=A.options,f){f={};for(var M=0;M<g.length;M++)f["$"+g[M]]=!0;for(g=0;g<A.length;g++)M=f.hasOwnProperty("$"+A[g].value),A[g].selected!==M&&(A[g].selected=M),M&&b&&(A[g].defaultSelected=!0)}else{for(g=""+ya(g),f=null,M=0;M<A.length;M++){if(A[M].value===g){A[M].selected=!0,b&&(A[M].defaultSelected=!0);return}f!==null||A[M].disabled||(f=A[M])}f!==null&&(f.selected=!0)}}function kr(A,f,g){if(f!=null&&(f=""+ya(f),f!==A.value&&(A.value=f),g==null)){A.defaultValue!==f&&(A.defaultValue=f);return}A.defaultValue=g!=null?""+ya(g):""}function Sl(A,f,g,b){if(f==null){if(b!=null){if(g!=null)throw Error(r(92));if(te(b)){if(1<b.length)throw Error(r(93));b=b[0]}g=b}g==null&&(g=""),f=g}g=ya(f),A.defaultValue=g,b=A.textContent,b===g&&b!==""&&b!==null&&(A.value=b)}function Ni(A,f){if(f){var g=A.firstChild;if(g&&g===A.lastChild&&g.nodeType===3){g.nodeValue=f;return}}A.textContent=f}var Ko=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fd(A,f,g){var b=f.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?b?A.setProperty(f,""):f==="float"?A.cssFloat="":A[f]="":b?A.setProperty(f,g):typeof g!="number"||g===0||Ko.has(f)?f==="float"?A.cssFloat=g:A[f]=(""+g).trim():A[f]=g+"px"}function lA(A,f,g){if(f!=null&&typeof f!="object")throw Error(r(62));if(A=A.style,g!=null){for(var b in g)!g.hasOwnProperty(b)||f!=null&&f.hasOwnProperty(b)||(b.indexOf("--")===0?A.setProperty(b,""):b==="float"?A.cssFloat="":A[b]="");for(var M in f)b=f[M],f.hasOwnProperty(M)&&g[M]!==b&&fd(A,M,b)}else for(var z in f)f.hasOwnProperty(z)&&fd(A,z,f[z])}function cA(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $o=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wo(A){return tu.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var bo=null;function $r(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var Yo=null,Co=null;function _n(A){var f=ke(A);if(f&&(A=f.stateNode)){var g=A[ur]||null;e:switch(A=f.stateNode,f.type){case"input":if(Oa(A,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),f=g.name,g.type==="radio"&&f!=null){for(g=A;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+yr(""+f)+'"][type="radio"]'),f=0;f<g.length;f++){var b=g[f];if(b!==A&&b.form===A.form){var M=b[ur]||null;if(!M)throw Error(r(90));Oa(b,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name)}}for(f=0;f<g.length;f++)b=g[f],b.form===A.form&&oA(b)}break e;case"textarea":kr(A,g.value,g.defaultValue);break e;case"select":f=g.value,f!=null&&wo(A,!!g.multiple,f,!1)}}}var Eo=!1;function hd(A,f,g){if(Eo)return A(f,g);Eo=!0;try{var b=A(f);return b}finally{if(Eo=!1,(Yo!==null||Co!==null)&&(P1(),Yo&&(f=Yo,A=Co,Co=Yo=null,_n(f),A)))for(f=0;f<A.length;f++)_n(A[f])}}function $a(A,f){var g=A.stateNode;if(g===null)return null;var b=g[ur]||null;if(b===null)return null;g=b[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(A=A.type,b=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!b;break e;default:A=!1}if(A)return null;if(g&&typeof g!="function")throw Error(r(231,f,typeof g));return g}var Bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ai=!1;if(Bi)try{var _o={};Object.defineProperty(_o,"passive",{get:function(){Ai=!0}}),window.addEventListener("test",_o,_o),window.removeEventListener("test",_o,_o)}catch{Ai=!1}var ki=null,Tl=null,Xo=null;function uA(){if(Xo)return Xo;var A,f=Tl,g=f.length,b,M="value"in ki?ki.value:ki.textContent,z=M.length;for(A=0;A<g&&f[A]===M[A];A++);var le=g-A;for(b=1;b<=le&&f[g-b]===M[z-b];b++);return Xo=M.slice(A,1<b?1-b:void 0)}function Ii(A){var f=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&f===13&&(A=13)):A=f,A===10&&(A=13),32<=A||A===13?A:0}function Wa(){return!0}function So(){return!1}function Hs(A){function f(g,b,M,z,le){this._reactName=g,this._targetInst=M,this.type=b,this.nativeEvent=z,this.target=le,this.currentTarget=null;for(var ye in A)A.hasOwnProperty(ye)&&(g=A[ye],this[ye]=g?g(z):z[ye]);return this.isDefaultPrevented=(z.defaultPrevented!=null?z.defaultPrevented:z.returnValue===!1)?Wa:So,this.isPropagationStopped=So,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Wa)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Wa)},persist:function(){},isPersistent:Wa}),f}var ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nl=Hs(ar),To=d({},ar,{view:0,detail:0}),AA=Hs(To),dc,fc,lo,Ya=d({},To,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fl,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==lo&&(lo&&A.type==="mousemove"?(dc=A.screenX-lo.screenX,fc=A.screenY-lo.screenY):fc=dc=0,lo=A),dc)},movementY:function(A){return"movementY"in A?A.movementY:fc}}),Vs=Hs(Ya),md=d({},Ya,{dataTransfer:0}),Bl=Hs(md),ja=d({},To,{relatedTarget:0}),kl=Hs(ja),Jo=d({},ar,{animationName:0,elapsedTime:0,pseudoElement:0}),nu=Hs(Jo),hc=d({},ar,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),ru=Hs(hc),dA=d({},ar,{data:0}),mc=Hs(dA),Il={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gc(A){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(A):(A=su[A])?!!f[A]:!1}function Fl(){return gc}var pd=d({},To,{key:function(A){if(A.key){var f=Il[A.key]||A.key;if(f!=="Unidentified")return f}return A.type==="keypress"?(A=Ii(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?pc[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fl,charCode:function(A){return A.type==="keypress"?Ii(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?Ii(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),Zo=Hs(pd),Dl=d({},Ya,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xc=Hs(Dl),Xa=d({},To,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fl}),au=Hs(Xa),q=d({},ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ae=Hs(q),De=d({},Ya,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Pe=Hs(De),Ke=d({},ar,{newState:0,oldState:0}),At=Hs(Ke),Bt=[9,13,27,32],zt=Bi&&"CompositionEvent"in window,N=null;Bi&&"documentMode"in document&&(N=document.documentMode);var ee=Bi&&"TextEvent"in window&&!N,oe=Bi&&(!zt||N&&8<N&&11>=N),ve=" ",Ge=!1;function at(A,f){switch(A){case"keyup":return Bt.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kt(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var Sn=!1;function ir(A,f){switch(A){case"compositionend":return kt(f);case"keypress":return f.which!==32?null:(Ge=!0,ve);case"textInput":return A=f.data,A===ve&&Ge?null:A;default:return null}}function Pn(A,f){if(Sn)return A==="compositionend"||!zt&&at(A,f)?(A=uA(),Xo=Tl=ki=null,Sn=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return oe&&f.locale!=="ko"?null:f.data;default:return null}}var Ir={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Or(A){var f=A&&A.nodeName&&A.nodeName.toLowerCase();return f==="input"?!!Ir[A.type]:f==="textarea"}function No(A,f,g,b){Yo?Co?Co.push(b):Co=[b]:Yo=b,f=z1(f,"onChange"),0<f.length&&(g=new Nl("onChange","change",null,g,b),A.push({event:g,listeners:f}))}var Is=null,Fi=null;function Rl(A){FI(A,0)}function iu(A){var f=Ye(A);if(oA(f))return A}function gd(A,f){if(A==="change")return f}var fA=!1;if(Bi){var ra;if(Bi){var ou="oninput"in document;if(!ou){var hA=document.createElement("div");hA.setAttribute("oninput","return;"),ou=typeof hA.oninput=="function"}ra=ou}else ra=!1;fA=ra&&(!document.documentMode||9<document.documentMode)}function mA(){Is&&(Is.detachEvent("onpropertychange",xd),Fi=Is=null)}function xd(A){if(A.propertyName==="value"&&iu(Fi)){var f=[];No(f,Fi,A,$r(A)),hd(Rl,f)}}function Di(A,f,g){A==="focusin"?(mA(),Is=f,Fi=g,Is.attachEvent("onpropertychange",xd)):A==="focusout"&&mA()}function zp(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return iu(Fi)}function Jf(A,f){if(A==="click")return iu(f)}function E0(A,f){if(A==="input"||A==="change")return iu(f)}function Bo(A,f){return A===f&&(A!==0||1/A===1/f)||A!==A&&f!==f}var wa=typeof Object.is=="function"?Object.is:Bo;function lu(A,f){if(wa(A,f))return!0;if(typeof A!="object"||A===null||typeof f!="object"||f===null)return!1;var g=Object.keys(A),b=Object.keys(f);if(g.length!==b.length)return!1;for(b=0;b<g.length;b++){var M=g[b];if(!ce.call(f,M)||!wa(A[M],f[M]))return!1}return!0}function Zf(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function vc(A,f){var g=Zf(A);A=0;for(var b;g;){if(g.nodeType===3){if(b=A+g.textContent.length,A<=f&&b>=f)return{node:g,offset:f-A};A=b}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Zf(g)}}function cu(A,f){return A&&f?A===f?!0:A&&A.nodeType===3?!1:f&&f.nodeType===3?cu(A,f.parentNode):"contains"in A?A.contains(f):A.compareDocumentPosition?!!(A.compareDocumentPosition(f)&16):!1:!1}function di(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var f=Pa(A.document);f instanceof A.HTMLIFrameElement;){try{var g=typeof f.contentWindow.location.href=="string"}catch{g=!1}if(g)A=f.contentWindow;else break;f=Pa(A.document)}return f}function Qa(A){var f=A&&A.nodeName&&A.nodeName.toLowerCase();return f&&(f==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||f==="textarea"||A.contentEditable==="true")}var uu=Bi&&"documentMode"in document&&11>=document.documentMode,Ri=null,el=null,Ll=null,tl=!1;function Es(A,f,g){var b=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;tl||Ri==null||Ri!==Pa(b)||(b=Ri,"selectionStart"in b&&Qa(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Ll&&lu(Ll,b)||(Ll=b,b=z1(el,"onSelect"),0<b.length&&(f=new Nl("onSelect","select",null,f,g),A.push({event:f,listeners:b}),f.target=Ri)))}function nl(A,f){var g={};return g[A.toLowerCase()]=f.toLowerCase(),g["Webkit"+A]="webkit"+f,g["Moz"+A]="moz"+f,g}var zs={animationend:nl("Animation","AnimationEnd"),animationiteration:nl("Animation","AnimationIteration"),animationstart:nl("Animation","AnimationStart"),transitionrun:nl("Transition","TransitionRun"),transitionstart:nl("Transition","TransitionStart"),transitioncancel:nl("Transition","TransitionCancel"),transitionend:nl("Transition","TransitionEnd")},Li={},pA={};Bi&&(pA=document.createElement("div").style,"AnimationEvent"in window||(delete zs.animationend.animation,delete zs.animationiteration.animation,delete zs.animationstart.animation),"TransitionEvent"in window||delete zs.transitionend.transition);function Ul(A){if(Li[A])return Li[A];if(!zs[A])return A;var f=zs[A],g;for(g in f)if(f.hasOwnProperty(g)&&g in pA)return Li[A]=f[g];return A}var vd=Ul("animationend"),Au=Ul("animationiteration"),du=Ul("animationstart"),fu=Ul("transitionrun"),gA=Ul("transitionstart"),yd=Ul("transitioncancel"),hu=Ul("transitionend"),yc=new Map,xA="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xA.push("scrollEnd");function _s(A,f){yc.set(A,f),Et(f,[A])}var co=new WeakMap;function tr(A,f){if(typeof A=="object"&&A!==null){var g=co.get(A);return g!==void 0?g:(f={value:A,source:f,stack:as(f)},co.set(A,f),f)}return{value:A,source:f,stack:as(f)}}var nr=[],is=0,Fs=0;function ko(){for(var A=is,f=Fs=is=0;f<A;){var g=nr[f];nr[f++]=null;var b=nr[f];nr[f++]=null;var M=nr[f];nr[f++]=null;var z=nr[f];if(nr[f++]=null,b!==null&&M!==null){var le=b.pending;le===null?M.next=M:(M.next=le.next,le.next=M),b.pending=M}z!==0&&_0(g,M,z)}}function mu(A,f,g,b){nr[is++]=A,nr[is++]=f,nr[is++]=g,nr[is++]=b,Fs|=b,A.lanes|=b,A=A.alternate,A!==null&&(A.lanes|=b)}function pu(A,f,g,b){return mu(A,f,g,b),vA(A)}function wc(A,f){return mu(A,null,null,f),vA(A)}function _0(A,f,g){A.lanes|=g;var b=A.alternate;b!==null&&(b.lanes|=g);for(var M=!1,z=A.return;z!==null;)z.childLanes|=g,b=z.alternate,b!==null&&(b.childLanes|=g),z.tag===22&&(A=z.stateNode,A===null||A._visibility&1||(M=!0)),A=z,z=z.return;return A.tag===3?(z=A.stateNode,M&&f!==null&&(M=31-Ue(g),A=z.hiddenUpdates,b=A[M],b===null?A[M]=[f]:b.push(f),f.lane=g|536870912),z):null}function vA(A){if(50<mg)throw mg=0,BE=null,Error(r(185));for(var f=A.return;f!==null;)A=f,f=A.return;return A.tag===3?A.stateNode:null}var ba={};function Io(A,f,g,b){this.tag=A,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ja(A,f,g,b){return new Io(A,f,g,b)}function wd(A){return A=A.prototype,!(!A||!A.isReactComponent)}function Ml(A,f){var g=A.alternate;return g===null?(g=Ja(A.tag,f,A.key,A.mode),g.elementType=A.elementType,g.type=A.type,g.stateNode=A.stateNode,g.alternate=A,A.alternate=g):(g.pendingProps=f,g.type=A.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=A.flags&65011712,g.childLanes=A.childLanes,g.lanes=A.lanes,g.child=A.child,g.memoizedProps=A.memoizedProps,g.memoizedState=A.memoizedState,g.updateQueue=A.updateQueue,f=A.dependencies,g.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},g.sibling=A.sibling,g.index=A.index,g.ref=A.ref,g.refCleanup=A.refCleanup,g}function eh(A,f){A.flags&=65011714;var g=A.alternate;return g===null?(A.childLanes=0,A.lanes=f,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=g.childLanes,A.lanes=g.lanes,A.child=g.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=g.memoizedProps,A.memoizedState=g.memoizedState,A.updateQueue=g.updateQueue,A.type=g.type,f=g.dependencies,A.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),A}function yA(A,f,g,b,M,z){var le=0;if(b=A,typeof A=="function")wd(A)&&(le=1);else if(typeof A=="string")le=_q(A,g,Z.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case B:return A=Ja(31,g,f,M),A.elementType=B,A.lanes=z,A;case y:return bc(g.children,M,z,f);case x:le=8,M|=24;break;case C:return A=Ja(12,g,f,M|2),A.elementType=C,A.lanes=z,A;case U:return A=Ja(13,g,f,M),A.elementType=U,A.lanes=z,A;case R:return A=Ja(19,g,f,M),A.elementType=R,A.lanes=z,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case S:case I:le=10;break e;case k:le=9;break e;case F:le=11;break e;case E:le=14;break e;case _:le=16,b=null;break e}le=29,g=Error(r(130,A===null?"null":typeof A,"")),b=null}return f=Ja(le,g,f,M),f.elementType=A,f.type=b,f.lanes=z,f}function bc(A,f,g,b){return A=Ja(7,A,b,f),A.lanes=g,A}function S0(A,f,g){return A=Ja(6,A,null,f),A.lanes=g,A}function th(A,f,g){return f=Ja(4,A.children!==null?A.children:[],A.key,f),f.lanes=g,f.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},f}var gu=[],Cc=0,bd=null,T0=0,Fo=[],uo=0,wA=null,Ec=1,_c="";function bA(A,f){gu[Cc++]=T0,gu[Cc++]=bd,bd=A,T0=f}function l1(A,f,g){Fo[uo++]=Ec,Fo[uo++]=_c,Fo[uo++]=wA,wA=A;var b=Ec;A=_c;var M=32-Ue(b)-1;b&=~(1<<M),g+=1;var z=32-Ue(f)+M;if(30<z){var le=M-M%5;z=(b&(1<<le)-1).toString(32),b>>=le,M-=le,Ec=1<<32-Ue(f)+M|g<<M|b,_c=z+A}else Ec=1<<z|g<<M|b,_c=A}function nh(A){A.return!==null&&(bA(A,1),l1(A,1,0))}function rh(A){for(;A===bd;)bd=gu[--Cc],gu[Cc]=null,T0=gu[--Cc],gu[Cc]=null;for(;A===wA;)wA=Fo[--uo],Fo[uo]=null,_c=Fo[--uo],Fo[uo]=null,Ec=Fo[--uo],Fo[uo]=null}var sa=null,Ss=null,Tr=!1,xu=null,Pl=!1,Gp=Error(r(519));function CA(A){var f=Error(r(418,""));throw Cd(tr(f,A)),Gp}function c1(A){var f=A.stateNode,g=A.type,b=A.memoizedProps;switch(f[vr]=A,f[ur]=b,g){case"dialog":dr("cancel",f),dr("close",f);break;case"iframe":case"object":case"embed":dr("load",f);break;case"video":case"audio":for(g=0;g<gg.length;g++)dr(gg[g],f);break;case"source":dr("error",f);break;case"img":case"image":case"link":dr("error",f),dr("load",f);break;case"details":dr("toggle",f);break;case"input":dr("invalid",f),El(f,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0),Cl(f);break;case"select":dr("invalid",f);break;case"textarea":dr("invalid",f),Sl(f,b.value,b.defaultValue,b.children),Cl(f)}g=b.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||f.textContent===""+g||b.suppressHydrationWarning===!0||UI(f.textContent,g)?(b.popover!=null&&(dr("beforetoggle",f),dr("toggle",f)),b.onScroll!=null&&dr("scroll",f),b.onScrollEnd!=null&&dr("scrollend",f),b.onClick!=null&&(f.onclick=G1),f=!0):f=!1,f||CA(A)}function Sc(A){for(sa=A.return;sa;)switch(sa.tag){case 5:case 13:Pl=!1;return;case 27:case 3:Pl=!0;return;default:sa=sa.return}}function fi(A){if(A!==sa)return!1;if(!Tr)return Sc(A),Tr=!0,!1;var f=A.tag,g;if((g=f!==3&&f!==27)&&((g=f===5)&&(g=A.type,g=!(g!=="form"&&g!=="button")||GE(A.type,A.memoizedProps)),g=!g),g&&Ss&&CA(A),Sc(A),f===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(r(317));e:{for(A=A.nextSibling,f=0;A;){if(A.nodeType===8)if(g=A.data,g==="/$"){if(f===0){Ss=Rc(A.nextSibling);break e}f--}else g!=="$"&&g!=="$!"&&g!=="$?"||f++;A=A.nextSibling}Ss=null}}else f===27?(f=Ss,jd(A.type)?(A=WE,WE=null,Ss=A):Ss=f):Ss=sa?Rc(A.stateNode.nextSibling):null;return!0}function Ao(){Ss=sa=null,Tr=!1}function u1(){var A=xu;return A!==null&&(Lo===null?Lo=A:Lo.push.apply(Lo,A),xu=null),A}function Cd(A){xu===null?xu=[A]:xu.push(A)}var Ol=ie(null),Ca=null,Tc=null;function vu(A,f,g){W(Ol,f._currentValue),f._currentValue=g}function jl(A){A._currentValue=Ol.current,O(Ol)}function N0(A,f,g){for(;A!==null;){var b=A.alternate;if((A.childLanes&f)!==f?(A.childLanes|=f,b!==null&&(b.childLanes|=f)):b!==null&&(b.childLanes&f)!==f&&(b.childLanes|=f),A===g)break;A=A.return}}function B0(A,f,g,b){var M=A.child;for(M!==null&&(M.return=A);M!==null;){var z=M.dependencies;if(z!==null){var le=M.child;z=z.firstContext;e:for(;z!==null;){var ye=z;z=M;for(var Le=0;Le<f.length;Le++)if(ye.context===f[Le]){z.lanes|=g,ye=z.alternate,ye!==null&&(ye.lanes|=g),N0(z.return,g,A),b||(le=null);break e}z=ye.next}}else if(M.tag===18){if(le=M.return,le===null)throw Error(r(341));le.lanes|=g,z=le.alternate,z!==null&&(z.lanes|=g),N0(le,g,A),le=null}else le=M.child;if(le!==null)le.return=M;else for(le=M;le!==null;){if(le===A){le=null;break}if(M=le.sibling,M!==null){M.return=le.return,le=M;break}le=le.return}M=le}}function Ed(A,f,g,b){A=null;for(var M=f,z=!1;M!==null;){if(!z){if((M.flags&524288)!==0)z=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var le=M.alternate;if(le===null)throw Error(r(387));if(le=le.memoizedProps,le!==null){var ye=M.type;wa(M.pendingProps.value,le.value)||(A!==null?A.push(ye):A=[ye])}}else if(M===de.current){if(le=M.alternate,le===null)throw Error(r(387));le.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(A!==null?A.push(Cg):A=[Cg])}M=M.return}A!==null&&B0(f,A,g,b),f.flags|=262144}function k0(A){for(A=A.firstContext;A!==null;){if(!wa(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function Ql(A){Ca=A,Tc=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function aa(A){return I0(Ca,A)}function yu(A,f){return Ca===null&&Ql(A),I0(A,f)}function I0(A,f){var g=f._currentValue;if(f={context:f,memoizedValue:g,next:null},Tc===null){if(A===null)throw Error(r(308));Tc=f,A.dependencies={lanes:0,firstContext:f},A.flags|=524288}else Tc=Tc.next=f;return g}var eE=typeof AbortController<"u"?AbortController:function(){var A=[],f=this.signal={aborted:!1,addEventListener:function(g,b){A.push(b)}};this.abort=function(){f.aborted=!0,A.forEach(function(g){return g()})}},A1=t.unstable_scheduleCallback,tE=t.unstable_NormalPriority,ia={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qp(){return{controller:new eE,data:new Map,refCount:0}}function sh(A){A.refCount--,A.refCount===0&&A1(tE,function(){A.controller.abort()})}var ah=null,Kp=0,EA=0,Nc=null;function nE(A,f){if(ah===null){var g=ah=[];Kp=0,EA=UE(),Nc={status:"pending",value:void 0,then:function(b){g.push(b)}}}return Kp++,f.then(d1,d1),f}function d1(){if(--Kp===0&&ah!==null){Nc!==null&&(Nc.status="fulfilled");var A=ah;ah=null,EA=0,Nc=null;for(var f=0;f<A.length;f++)(0,A[f])()}}function f1(A,f){var g=[],b={status:"pending",value:null,reason:null,then:function(M){g.push(M)}};return A.then(function(){b.status="fulfilled",b.value=f;for(var M=0;M<g.length;M++)(0,g[M])(f)},function(M){for(b.status="rejected",b.reason=M,M=0;M<g.length;M++)(0,g[M])(void 0)}),b}var T=Y.S;Y.S=function(A,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&nE(A,f),T!==null&&T(A,f)};var P=ie(null);function X(){var A=P.current;return A!==null?A:hs.pooledCache}function ae(A,f){f===null?W(P,P.current):W(P,f.pool)}function ue(){var A=X();return A===null?null:{parent:ia._currentValue,pool:A}}var he=Error(r(460)),ge=Error(r(474)),xe=Error(r(542)),we={then:function(){}};function Ne(A){return A=A.status,A==="fulfilled"||A==="rejected"}function je(){}function rt(A,f,g){switch(g=A[g],g===void 0?A.push(f):g!==f&&(f.then(je,je),f=g),f.status){case"fulfilled":return f.value;case"rejected":throw A=f.reason,bt(A),A;default:if(typeof f.status=="string")f.then(je,je);else{if(A=hs,A!==null&&100<A.shellSuspendCounter)throw Error(r(482));A=f,A.status="pending",A.then(function(b){if(f.status==="pending"){var M=f;M.status="fulfilled",M.value=b}},function(b){if(f.status==="pending"){var M=f;M.status="rejected",M.reason=b}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw A=f.reason,bt(A),A}throw et=f,he}}var et=null;function $e(){if(et===null)throw Error(r(459));var A=et;return et=null,A}function bt(A){if(A===he||A===xe)throw Error(r(483))}var ut=!1;function Qe(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ve(A,f){A=A.updateQueue,f.updateQueue===A&&(f.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function pt(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function Ct(A,f,g){var b=A.updateQueue;if(b===null)return null;if(b=b.shared,(Yr&2)!==0){var M=b.pending;return M===null?f.next=f:(f.next=M.next,M.next=f),b.pending=f,f=vA(A),_0(A,null,g),f}return mu(A,b,f,g),vA(A)}function vt(A,f,g){if(f=f.updateQueue,f!==null&&(f=f.shared,(g&4194048)!==0)){var b=f.lanes;b&=A.pendingLanes,g|=b,f.lanes=g,zn(A,g)}}function Jt(A,f){var g=A.updateQueue,b=A.alternate;if(b!==null&&(b=b.updateQueue,g===b)){var M=null,z=null;if(g=g.firstBaseUpdate,g!==null){do{var le={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};z===null?M=z=le:z=z.next=le,g=g.next}while(g!==null);z===null?M=z=f:z=z.next=f}else M=z=f;g={baseState:b.baseState,firstBaseUpdate:M,lastBaseUpdate:z,shared:b.shared,callbacks:b.callbacks},A.updateQueue=g;return}A=g.lastBaseUpdate,A===null?g.firstBaseUpdate=f:A.next=f,g.lastBaseUpdate=f}var Ht=!1;function An(){if(Ht){var A=Nc;if(A!==null)throw A}}function Gt(A,f,g,b){Ht=!1;var M=A.updateQueue;ut=!1;var z=M.firstBaseUpdate,le=M.lastBaseUpdate,ye=M.shared.pending;if(ye!==null){M.shared.pending=null;var Le=ye,it=Le.next;Le.next=null,le===null?z=it:le.next=it,le=Le;var xt=A.alternate;xt!==null&&(xt=xt.updateQueue,ye=xt.lastBaseUpdate,ye!==le&&(ye===null?xt.firstBaseUpdate=it:ye.next=it,xt.lastBaseUpdate=Le))}if(z!==null){var St=M.baseState;le=0,xt=it=Le=null,ye=z;do{var lt=ye.lane&-536870913,ct=lt!==ye.lane;if(ct?(Er&lt)===lt:(b&lt)===lt){lt!==0&&lt===EA&&(Ht=!0),xt!==null&&(xt=xt.next={lane:0,tag:ye.tag,payload:ye.payload,callback:null,next:null});e:{var Un=A,Tn=ye;lt=f;var ls=g;switch(Tn.tag){case 1:if(Un=Tn.payload,typeof Un=="function"){St=Un.call(ls,St,lt);break e}St=Un;break e;case 3:Un.flags=Un.flags&-65537|128;case 0:if(Un=Tn.payload,lt=typeof Un=="function"?Un.call(ls,St,lt):Un,lt==null)break e;St=d({},St,lt);break e;case 2:ut=!0}}lt=ye.callback,lt!==null&&(A.flags|=64,ct&&(A.flags|=8192),ct=M.callbacks,ct===null?M.callbacks=[lt]:ct.push(lt))}else ct={lane:lt,tag:ye.tag,payload:ye.payload,callback:ye.callback,next:null},xt===null?(it=xt=ct,Le=St):xt=xt.next=ct,le|=lt;if(ye=ye.next,ye===null){if(ye=M.shared.pending,ye===null)break;ct=ye,ye=ct.next,ct.next=null,M.lastBaseUpdate=ct,M.shared.pending=null}}while(!0);xt===null&&(Le=St),M.baseState=Le,M.firstBaseUpdate=it,M.lastBaseUpdate=xt,z===null&&(M.shared.lanes=0),Ud|=le,A.lanes=le,A.memoizedState=St}}function br(A,f){if(typeof A!="function")throw Error(r(191,A));A.call(f)}function Fr(A,f){var g=A.callbacks;if(g!==null)for(A.callbacks=null,A=0;A<g.length;A++)br(g[A],f)}var Zn=ie(null),Wn=ie(0);function jr(A,f){A=RA,W(Wn,A),W(Zn,f),RA=A|f.baseLanes}function Dr(){W(Wn,RA),W(Zn,Zn.current)}function On(){RA=Wn.current,O(Zn),O(Wn)}var Wr=0,wn=null,In=null,wr=null,Cr=!1,Ea=!1,oa=!1,Ds=0,Rs=0,Gs=null,Do=0;function Rr(){throw Error(r(321))}function qs(A,f){if(f===null)return!1;for(var g=0;g<f.length&&g<A.length;g++)if(!wa(A[g],f[g]))return!1;return!0}function rl(A,f,g,b,M,z){return Wr=z,wn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Y.H=A===null||A.memoizedState===null?pk:gk,oa=!1,z=g(b,M),oa=!1,Ea&&(z=_A(f,g,b,M)),wu(A),z}function wu(A){Y.H=_1;var f=In!==null&&In.next!==null;if(Wr=0,wr=In=wn=null,Cr=!1,Rs=0,Gs=null,f)throw Error(r(300));A===null||Za||(A=A.dependencies,A!==null&&k0(A)&&(Za=!0))}function _A(A,f,g,b){wn=A;var M=0;do{if(Ea&&(Gs=null),Rs=0,Ea=!1,25<=M)throw Error(r(301));if(M+=1,wr=In=null,A.updateQueue!=null){var z=A.updateQueue;z.lastEffect=null,z.events=null,z.stores=null,z.memoCache!=null&&(z.memoCache.index=0)}Y.H=UG,z=f(g,b)}while(Ea);return z}function bu(){var A=Y.H,f=A.useState()[0];return f=typeof f.then=="function"?Cu(f):f,A=A.useState()[0],(In!==null?In.memoizedState:null)!==A&&(wn.flags|=1024),f}function fs(){var A=Ds!==0;return Ds=0,A}function ih(A,f,g){f.updateQueue=A.updateQueue,f.flags&=-2053,A.lanes&=~g}function F0(A){if(Cr){for(A=A.memoizedState;A!==null;){var f=A.queue;f!==null&&(f.pending=null),A=A.next}Cr=!1}Wr=0,wr=In=wn=null,Ea=!1,Rs=Ds=0,Gs=null}function hi(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wr===null?wn.memoizedState=wr=A:wr=wr.next=A,wr}function gs(){if(In===null){var A=wn.alternate;A=A!==null?A.memoizedState:null}else A=In.next;var f=wr===null?wn.memoizedState:wr.next;if(f!==null)wr=f,In=A;else{if(A===null)throw wn.alternate===null?Error(r(467)):Error(r(310));In=A,A={memoizedState:In.memoizedState,baseState:In.baseState,baseQueue:In.baseQueue,queue:In.queue,next:null},wr===null?wn.memoizedState=wr=A:wr=wr.next=A}return wr}function SA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cu(A){var f=Rs;return Rs+=1,Gs===null&&(Gs=[]),A=rt(Gs,A,f),f=wn,(wr===null?f.memoizedState:wr.next)===null&&(f=f.alternate,Y.H=f===null||f.memoizedState===null?pk:gk),A}function Ui(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return Cu(A);if(A.$$typeof===I)return aa(A)}throw Error(r(438,String(A)))}function Eu(A){var f=null,g=wn.updateQueue;if(g!==null&&(f=g.memoCache),f==null){var b=wn.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(f={data:b.data.map(function(M){return M.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),g===null&&(g=SA(),wn.updateQueue=g),g.memoCache=f,g=f.data[f.index],g===void 0)for(g=f.data[f.index]=Array(A),b=0;b<A;b++)g[b]=j;return f.index++,g}function Mi(A,f){return typeof f=="function"?f(A):f}function oh(A){var f=gs();return _d(f,In,A)}function _d(A,f,g){var b=A.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=g;var M=A.baseQueue,z=b.pending;if(z!==null){if(M!==null){var le=M.next;M.next=z.next,z.next=le}f.baseQueue=M=z,b.pending=null}if(z=A.baseState,M===null)A.memoizedState=z;else{f=M.next;var ye=le=null,Le=null,it=f,xt=!1;do{var St=it.lane&-536870913;if(St!==it.lane?(Er&St)===St:(Wr&St)===St){var lt=it.revertLane;if(lt===0)Le!==null&&(Le=Le.next={lane:0,revertLane:0,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null}),St===EA&&(xt=!0);else if((Wr&lt)===lt){it=it.next,lt===EA&&(xt=!0);continue}else St={lane:0,revertLane:it.revertLane,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null},Le===null?(ye=Le=St,le=z):Le=Le.next=St,wn.lanes|=lt,Ud|=lt;St=it.action,oa&&g(z,St),z=it.hasEagerState?it.eagerState:g(z,St)}else lt={lane:St,revertLane:it.revertLane,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null},Le===null?(ye=Le=lt,le=z):Le=Le.next=lt,wn.lanes|=St,Ud|=St;it=it.next}while(it!==null&&it!==f);if(Le===null?le=z:Le.next=ye,!wa(z,A.memoizedState)&&(Za=!0,xt&&(g=Nc,g!==null)))throw g;A.memoizedState=z,A.baseState=le,A.baseQueue=Le,b.lastRenderedState=z}return M===null&&(b.lanes=0),[A.memoizedState,b.dispatch]}function D0(A){var f=gs(),g=f.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=A;var b=g.dispatch,M=g.pending,z=f.memoizedState;if(M!==null){g.pending=null;var le=M=M.next;do z=A(z,le.action),le=le.next;while(le!==M);wa(z,f.memoizedState)||(Za=!0),f.memoizedState=z,f.baseQueue===null&&(f.baseState=z),g.lastRenderedState=z}return[z,b]}function lh(A,f,g){var b=wn,M=gs(),z=Tr;if(z){if(g===void 0)throw Error(r(407));g=g()}else g=f();var le=!wa((In||M).memoizedState,g);le&&(M.memoizedState=g,Za=!0),M=M.queue;var ye=Sd.bind(null,b,M,A);if(Bd(2048,8,ye,[A]),M.getSnapshot!==f||le||wr!==null&&wr.memoizedState.tag&1){if(b.flags|=2048,kc(9,dh(),ch.bind(null,b,M,g,f),null),hs===null)throw Error(r(349));z||(Wr&124)!==0||R0(b,f,g)}return g}function R0(A,f,g){A.flags|=16384,A={getSnapshot:f,value:g},f=wn.updateQueue,f===null?(f=SA(),wn.updateQueue=f,f.stores=[A]):(g=f.stores,g===null?f.stores=[A]:g.push(A))}function ch(A,f,g,b){f.value=g,f.getSnapshot=b,h1(f)&&m1(A)}function Sd(A,f,g){return g(function(){h1(f)&&m1(A)})}function h1(A){var f=A.getSnapshot;A=A.value;try{var g=f();return!wa(A,g)}catch{return!0}}function m1(A){var f=wc(A,2);f!==null&&cl(f,A,2)}function uh(A){var f=hi();if(typeof A=="function"){var g=A;if(A=g(),oa){Wt(!0);try{g()}finally{Wt(!1)}}}return f.memoizedState=f.baseState=A,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:A},f}function Bc(A,f,g,b){return A.baseState=g,_d(A,In,typeof b=="function"?b:Mi)}function rE(A,f,g,b,M){if(E1(A))throw Error(r(485));if(A=f.action,A!==null){var z={payload:M,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){z.listeners.push(le)}};Y.T!==null?g(!0):z.isTransition=!1,b(z),g=f.pending,g===null?(z.next=f.pending=z,p1(f,z)):(z.next=g.next,f.pending=g.next=z)}}function p1(A,f){var g=f.action,b=f.payload,M=A.state;if(f.isTransition){var z=Y.T,le={};Y.T=le;try{var ye=g(M,b),Le=Y.S;Le!==null&&Le(le,ye),g1(A,f,ye)}catch(it){Td(A,f,it)}finally{Y.T=z}}else try{z=g(M,b),g1(A,f,z)}catch(it){Td(A,f,it)}}function g1(A,f,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(b){$p(A,f,b)},function(b){return Td(A,f,b)}):$p(A,f,g)}function $p(A,f,g){f.status="fulfilled",f.value=g,Wp(f),A.state=g,f=A.pending,f!==null&&(g=f.next,g===f?A.pending=null:(g=g.next,f.next=g,p1(A,g)))}function Td(A,f,g){var b=A.pending;if(A.pending=null,b!==null){b=b.next;do f.status="rejected",f.reason=g,Wp(f),f=f.next;while(f!==b)}A.action=null}function Wp(A){A=A.listeners;for(var f=0;f<A.length;f++)(0,A[f])()}function Yp(A,f){return f}function Ah(A,f){if(Tr){var g=hs.formState;if(g!==null){e:{var b=wn;if(Tr){if(Ss){t:{for(var M=Ss,z=Pl;M.nodeType!==8;){if(!z){M=null;break t}if(M=Rc(M.nextSibling),M===null){M=null;break t}}z=M.data,M=z==="F!"||z==="F"?M:null}if(M){Ss=Rc(M.nextSibling),b=M.data==="F!";break e}}CA(b)}b=!1}b&&(f=g[0])}}return g=hi(),g.memoizedState=g.baseState=f,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yp,lastRenderedState:f},g.queue=b,g=fk.bind(null,wn,b),b.dispatch=g,b=uh(!1),z=sE.bind(null,wn,!1,b.queue),b=hi(),M={state:f,dispatch:null,action:A,pending:null},b.queue=M,g=rE.bind(null,wn,M,z,g),M.dispatch=g,b.memoizedState=A,[f,g,!1]}function L0(A){var f=gs();return Nd(f,In,A)}function Nd(A,f,g){if(f=_d(A,f,Yp)[0],A=oh(Mi)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var b=Cu(f)}catch(le){throw le===he?xe:le}else b=f;f=gs();var M=f.queue,z=M.dispatch;return g!==f.memoizedState&&(wn.flags|=2048,kc(9,dh(),x1.bind(null,M,g),null)),[b,z,A]}function x1(A,f){A.action=f}function v1(A){var f=gs(),g=In;if(g!==null)return Nd(f,g,A);gs(),f=f.memoizedState,g=gs();var b=g.queue.dispatch;return g.memoizedState=A,[f,b,!1]}function kc(A,f,g,b){return A={tag:A,create:g,deps:b,inst:f,next:null},f=wn.updateQueue,f===null&&(f=SA(),wn.updateQueue=f),g=f.lastEffect,g===null?f.lastEffect=A.next=A:(b=g.next,g.next=A,A.next=b,f.lastEffect=A),A}function dh(){return{destroy:void 0,resource:void 0}}function U0(){return gs().memoizedState}function sl(A,f,g,b){var M=hi();b=b===void 0?null:b,wn.flags|=A,M.memoizedState=kc(1|f,dh(),g,b)}function Bd(A,f,g,b){var M=gs();b=b===void 0?null:b;var z=M.memoizedState.inst;In!==null&&b!==null&&qs(b,In.memoizedState.deps)?M.memoizedState=kc(f,z,g,b):(wn.flags|=A,M.memoizedState=kc(1|f,z,g,b))}function Xp(A,f){sl(8390656,8,A,f)}function y1(A,f){Bd(2048,8,A,f)}function Jp(A,f){return Bd(4,2,A,f)}function TA(A,f){return Bd(4,4,A,f)}function w1(A,f){if(typeof f=="function"){A=A();var g=f(A);return function(){typeof g=="function"?g():f(null)}}if(f!=null)return A=A(),f.current=A,function(){f.current=null}}function Zp(A,f,g){g=g!=null?g.concat([A]):null,Bd(4,4,w1.bind(null,f,A),g)}function eg(){}function tg(A,f){var g=gs();f=f===void 0?null:f;var b=g.memoizedState;return f!==null&&qs(f,b[1])?b[0]:(g.memoizedState=[A,f],A)}function b1(A,f){var g=gs();f=f===void 0?null:f;var b=g.memoizedState;if(f!==null&&qs(f,b[1]))return b[0];if(b=A(),oa){Wt(!0);try{A()}finally{Wt(!1)}}return g.memoizedState=[b,f],b}function NA(A,f,g){return g===void 0||(Wr&1073741824)!==0?A.memoizedState=f:(A.memoizedState=g,A=cI(),wn.lanes|=A,Ud|=A,g)}function M0(A,f,g,b){return wa(g,f)?g:Zn.current!==null?(A=NA(A,g,b),wa(A,f)||(Za=!0),A):(Wr&42)===0?(Za=!0,A.memoizedState=g):(A=cI(),wn.lanes|=A,Ud|=A,f)}function fh(A,f,g,b,M){var z=ne.p;ne.p=z!==0&&8>z?z:8;var le=Y.T,ye={};Y.T=ye,sE(A,!1,f,g);try{var Le=M(),it=Y.S;if(it!==null&&it(ye,Le),Le!==null&&typeof Le=="object"&&typeof Le.then=="function"){var xt=f1(Le,b);ag(A,f,xt,ll(A))}else ag(A,f,b,ll(A))}catch(St){ag(A,f,{then:function(){},status:"rejected",reason:St},ll())}finally{ne.p=z,Y.T=le}}function Ic(){}function Hl(A,f,g,b){if(A.tag!==5)throw Error(r(476));var M=Fc(A).queue;fh(A,M,f,V,g===null?Ic:function(){return hh(A),g(b)})}function Fc(A){var f=A.memoizedState;if(f!==null)return f;f={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:V},next:null};var g={};return f.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:g},next:null},A.memoizedState=f,A=A.alternate,A!==null&&(A.memoizedState=f),f}function hh(A){var f=Fc(A).next.queue;ag(A,f,{},ll())}function mh(){return aa(Cg)}function ng(){return gs().memoizedState}function C1(){return gs().memoizedState}function rg(A){for(var f=A.return;f!==null;){switch(f.tag){case 24:case 3:var g=ll();A=pt(g);var b=Ct(f,A,g);b!==null&&(cl(b,f,g),vt(b,f,g)),f={cache:qp()},A.payload=f;return}f=f.return}}function sg(A,f,g){var b=ll();g={lane:b,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},E1(A)?hk(f,g):(g=pu(A,f,g,b),g!==null&&(cl(g,A,b),mk(g,f,b)))}function fk(A,f,g){var b=ll();ag(A,f,g,b)}function ag(A,f,g,b){var M={lane:b,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(E1(A))hk(f,M);else{var z=A.alternate;if(A.lanes===0&&(z===null||z.lanes===0)&&(z=f.lastRenderedReducer,z!==null))try{var le=f.lastRenderedState,ye=z(le,g);if(M.hasEagerState=!0,M.eagerState=ye,wa(ye,le))return mu(A,f,M,0),hs===null&&ko(),!1}catch{}finally{}if(g=pu(A,f,M,b),g!==null)return cl(g,A,b),mk(g,f,b),!0}return!1}function sE(A,f,g,b){if(b={lane:2,revertLane:UE(),action:b,hasEagerState:!1,eagerState:null,next:null},E1(A)){if(f)throw Error(r(479))}else f=pu(A,g,b,2),f!==null&&cl(f,A,2)}function E1(A){var f=A.alternate;return A===wn||f!==null&&f===wn}function hk(A,f){Ea=Cr=!0;var g=A.pending;g===null?f.next=f:(f.next=g.next,g.next=f),A.pending=f}function mk(A,f,g){if((g&4194048)!==0){var b=f.lanes;b&=A.pendingLanes,g|=b,f.lanes=g,zn(A,g)}}var _1={readContext:aa,use:Ui,useCallback:Rr,useContext:Rr,useEffect:Rr,useImperativeHandle:Rr,useLayoutEffect:Rr,useInsertionEffect:Rr,useMemo:Rr,useReducer:Rr,useRef:Rr,useState:Rr,useDebugValue:Rr,useDeferredValue:Rr,useTransition:Rr,useSyncExternalStore:Rr,useId:Rr,useHostTransitionStatus:Rr,useFormState:Rr,useActionState:Rr,useOptimistic:Rr,useMemoCache:Rr,useCacheRefresh:Rr},pk={readContext:aa,use:Ui,useCallback:function(A,f){return hi().memoizedState=[A,f===void 0?null:f],A},useContext:aa,useEffect:Xp,useImperativeHandle:function(A,f,g){g=g!=null?g.concat([A]):null,sl(4194308,4,w1.bind(null,f,A),g)},useLayoutEffect:function(A,f){return sl(4194308,4,A,f)},useInsertionEffect:function(A,f){sl(4,2,A,f)},useMemo:function(A,f){var g=hi();f=f===void 0?null:f;var b=A();if(oa){Wt(!0);try{A()}finally{Wt(!1)}}return g.memoizedState=[b,f],b},useReducer:function(A,f,g){var b=hi();if(g!==void 0){var M=g(f);if(oa){Wt(!0);try{g(f)}finally{Wt(!1)}}}else M=f;return b.memoizedState=b.baseState=M,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:M},b.queue=A,A=A.dispatch=sg.bind(null,wn,A),[b.memoizedState,A]},useRef:function(A){var f=hi();return A={current:A},f.memoizedState=A},useState:function(A){A=uh(A);var f=A.queue,g=fk.bind(null,wn,f);return f.dispatch=g,[A.memoizedState,g]},useDebugValue:eg,useDeferredValue:function(A,f){var g=hi();return NA(g,A,f)},useTransition:function(){var A=uh(!1);return A=fh.bind(null,wn,A.queue,!0,!1),hi().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,f,g){var b=wn,M=hi();if(Tr){if(g===void 0)throw Error(r(407));g=g()}else{if(g=f(),hs===null)throw Error(r(349));(Er&124)!==0||R0(b,f,g)}M.memoizedState=g;var z={value:g,getSnapshot:f};return M.queue=z,Xp(Sd.bind(null,b,z,A),[A]),b.flags|=2048,kc(9,dh(),ch.bind(null,b,z,g,f),null),g},useId:function(){var A=hi(),f=hs.identifierPrefix;if(Tr){var g=_c,b=Ec;g=(b&~(1<<32-Ue(b)-1)).toString(32)+g,f="«"+f+"R"+g,g=Ds++,0<g&&(f+="H"+g.toString(32)),f+="»"}else g=Do++,f="«"+f+"r"+g.toString(32)+"»";return A.memoizedState=f},useHostTransitionStatus:mh,useFormState:Ah,useActionState:Ah,useOptimistic:function(A){var f=hi();f.memoizedState=f.baseState=A;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=g,f=sE.bind(null,wn,!0,g),g.dispatch=f,[A,f]},useMemoCache:Eu,useCacheRefresh:function(){return hi().memoizedState=rg.bind(null,wn)}},gk={readContext:aa,use:Ui,useCallback:tg,useContext:aa,useEffect:y1,useImperativeHandle:Zp,useInsertionEffect:Jp,useLayoutEffect:TA,useMemo:b1,useReducer:oh,useRef:U0,useState:function(){return oh(Mi)},useDebugValue:eg,useDeferredValue:function(A,f){var g=gs();return M0(g,In.memoizedState,A,f)},useTransition:function(){var A=oh(Mi)[0],f=gs().memoizedState;return[typeof A=="boolean"?A:Cu(A),f]},useSyncExternalStore:lh,useId:ng,useHostTransitionStatus:mh,useFormState:L0,useActionState:L0,useOptimistic:function(A,f){var g=gs();return Bc(g,In,A,f)},useMemoCache:Eu,useCacheRefresh:C1},UG={readContext:aa,use:Ui,useCallback:tg,useContext:aa,useEffect:y1,useImperativeHandle:Zp,useInsertionEffect:Jp,useLayoutEffect:TA,useMemo:b1,useReducer:D0,useRef:U0,useState:function(){return D0(Mi)},useDebugValue:eg,useDeferredValue:function(A,f){var g=gs();return In===null?NA(g,A,f):M0(g,In.memoizedState,A,f)},useTransition:function(){var A=D0(Mi)[0],f=gs().memoizedState;return[typeof A=="boolean"?A:Cu(A),f]},useSyncExternalStore:lh,useId:ng,useHostTransitionStatus:mh,useFormState:v1,useActionState:v1,useOptimistic:function(A,f){var g=gs();return In!==null?Bc(g,In,A,f):(g.baseState=A,[A,g.queue.dispatch])},useMemoCache:Eu,useCacheRefresh:C1},P0=null,ig=0;function S1(A){var f=ig;return ig+=1,P0===null&&(P0=[]),rt(P0,A,f)}function og(A,f){f=f.props.ref,A.ref=f!==void 0?f:null}function T1(A,f){throw f.$$typeof===h?Error(r(525)):(A=Object.prototype.toString.call(f),Error(r(31,A==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":A)))}function xk(A){var f=A._init;return f(A._payload)}function vk(A){function f(We,He){if(A){var nt=We.deletions;nt===null?(We.deletions=[He],We.flags|=16):nt.push(He)}}function g(We,He){if(!A)return null;for(;He!==null;)f(We,He),He=He.sibling;return null}function b(We){for(var He=new Map;We!==null;)We.key!==null?He.set(We.key,We):He.set(We.index,We),We=We.sibling;return He}function M(We,He){return We=Ml(We,He),We.index=0,We.sibling=null,We}function z(We,He,nt){return We.index=nt,A?(nt=We.alternate,nt!==null?(nt=nt.index,nt<He?(We.flags|=67108866,He):nt):(We.flags|=67108866,He)):(We.flags|=1048576,He)}function le(We){return A&&We.alternate===null&&(We.flags|=67108866),We}function ye(We,He,nt,wt){return He===null||He.tag!==6?(He=S0(nt,We.mode,wt),He.return=We,He):(He=M(He,nt),He.return=We,He)}function Le(We,He,nt,wt){var ln=nt.type;return ln===y?xt(We,He,nt.props.children,wt,nt.key):He!==null&&(He.elementType===ln||typeof ln=="object"&&ln!==null&&ln.$$typeof===_&&xk(ln)===He.type)?(He=M(He,nt.props),og(He,nt),He.return=We,He):(He=yA(nt.type,nt.key,nt.props,null,We.mode,wt),og(He,nt),He.return=We,He)}function it(We,He,nt,wt){return He===null||He.tag!==4||He.stateNode.containerInfo!==nt.containerInfo||He.stateNode.implementation!==nt.implementation?(He=th(nt,We.mode,wt),He.return=We,He):(He=M(He,nt.children||[]),He.return=We,He)}function xt(We,He,nt,wt,ln){return He===null||He.tag!==7?(He=bc(nt,We.mode,wt,ln),He.return=We,He):(He=M(He,nt),He.return=We,He)}function St(We,He,nt){if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return He=S0(""+He,We.mode,nt),He.return=We,He;if(typeof He=="object"&&He!==null){switch(He.$$typeof){case m:return nt=yA(He.type,He.key,He.props,null,We.mode,nt),og(nt,He),nt.return=We,nt;case p:return He=th(He,We.mode,nt),He.return=We,He;case _:var wt=He._init;return He=wt(He._payload),St(We,He,nt)}if(te(He)||L(He))return He=bc(He,We.mode,nt,null),He.return=We,He;if(typeof He.then=="function")return St(We,S1(He),nt);if(He.$$typeof===I)return St(We,yu(We,He),nt);T1(We,He)}return null}function lt(We,He,nt,wt){var ln=He!==null?He.key:null;if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return ln!==null?null:ye(We,He,""+nt,wt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case m:return nt.key===ln?Le(We,He,nt,wt):null;case p:return nt.key===ln?it(We,He,nt,wt):null;case _:return ln=nt._init,nt=ln(nt._payload),lt(We,He,nt,wt)}if(te(nt)||L(nt))return ln!==null?null:xt(We,He,nt,wt,null);if(typeof nt.then=="function")return lt(We,He,S1(nt),wt);if(nt.$$typeof===I)return lt(We,He,yu(We,nt),wt);T1(We,nt)}return null}function ct(We,He,nt,wt,ln){if(typeof wt=="string"&&wt!==""||typeof wt=="number"||typeof wt=="bigint")return We=We.get(nt)||null,ye(He,We,""+wt,ln);if(typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case m:return We=We.get(wt.key===null?nt:wt.key)||null,Le(He,We,wt,ln);case p:return We=We.get(wt.key===null?nt:wt.key)||null,it(He,We,wt,ln);case _:var or=wt._init;return wt=or(wt._payload),ct(We,He,nt,wt,ln)}if(te(wt)||L(wt))return We=We.get(nt)||null,xt(He,We,wt,ln,null);if(typeof wt.then=="function")return ct(We,He,nt,S1(wt),ln);if(wt.$$typeof===I)return ct(We,He,nt,yu(He,wt),ln);T1(He,wt)}return null}function Un(We,He,nt,wt){for(var ln=null,or=null,fn=He,Nn=He=0,ti=null;fn!==null&&Nn<nt.length;Nn++){fn.index>Nn?(ti=fn,fn=null):ti=fn.sibling;var Lr=lt(We,fn,nt[Nn],wt);if(Lr===null){fn===null&&(fn=ti);break}A&&fn&&Lr.alternate===null&&f(We,fn),He=z(Lr,He,Nn),or===null?ln=Lr:or.sibling=Lr,or=Lr,fn=ti}if(Nn===nt.length)return g(We,fn),Tr&&bA(We,Nn),ln;if(fn===null){for(;Nn<nt.length;Nn++)fn=St(We,nt[Nn],wt),fn!==null&&(He=z(fn,He,Nn),or===null?ln=fn:or.sibling=fn,or=fn);return Tr&&bA(We,Nn),ln}for(fn=b(fn);Nn<nt.length;Nn++)ti=ct(fn,We,Nn,nt[Nn],wt),ti!==null&&(A&&ti.alternate!==null&&fn.delete(ti.key===null?Nn:ti.key),He=z(ti,He,Nn),or===null?ln=ti:or.sibling=ti,or=ti);return A&&fn.forEach(function(Gd){return f(We,Gd)}),Tr&&bA(We,Nn),ln}function Tn(We,He,nt,wt){if(nt==null)throw Error(r(151));for(var ln=null,or=null,fn=He,Nn=He=0,ti=null,Lr=nt.next();fn!==null&&!Lr.done;Nn++,Lr=nt.next()){fn.index>Nn?(ti=fn,fn=null):ti=fn.sibling;var Gd=lt(We,fn,Lr.value,wt);if(Gd===null){fn===null&&(fn=ti);break}A&&fn&&Gd.alternate===null&&f(We,fn),He=z(Gd,He,Nn),or===null?ln=Gd:or.sibling=Gd,or=Gd,fn=ti}if(Lr.done)return g(We,fn),Tr&&bA(We,Nn),ln;if(fn===null){for(;!Lr.done;Nn++,Lr=nt.next())Lr=St(We,Lr.value,wt),Lr!==null&&(He=z(Lr,He,Nn),or===null?ln=Lr:or.sibling=Lr,or=Lr);return Tr&&bA(We,Nn),ln}for(fn=b(fn);!Lr.done;Nn++,Lr=nt.next())Lr=ct(fn,We,Nn,Lr.value,wt),Lr!==null&&(A&&Lr.alternate!==null&&fn.delete(Lr.key===null?Nn:Lr.key),He=z(Lr,He,Nn),or===null?ln=Lr:or.sibling=Lr,or=Lr);return A&&fn.forEach(function(Mq){return f(We,Mq)}),Tr&&bA(We,Nn),ln}function ls(We,He,nt,wt){if(typeof nt=="object"&&nt!==null&&nt.type===y&&nt.key===null&&(nt=nt.props.children),typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case m:e:{for(var ln=nt.key;He!==null;){if(He.key===ln){if(ln=nt.type,ln===y){if(He.tag===7){g(We,He.sibling),wt=M(He,nt.props.children),wt.return=We,We=wt;break e}}else if(He.elementType===ln||typeof ln=="object"&&ln!==null&&ln.$$typeof===_&&xk(ln)===He.type){g(We,He.sibling),wt=M(He,nt.props),og(wt,nt),wt.return=We,We=wt;break e}g(We,He);break}else f(We,He);He=He.sibling}nt.type===y?(wt=bc(nt.props.children,We.mode,wt,nt.key),wt.return=We,We=wt):(wt=yA(nt.type,nt.key,nt.props,null,We.mode,wt),og(wt,nt),wt.return=We,We=wt)}return le(We);case p:e:{for(ln=nt.key;He!==null;){if(He.key===ln)if(He.tag===4&&He.stateNode.containerInfo===nt.containerInfo&&He.stateNode.implementation===nt.implementation){g(We,He.sibling),wt=M(He,nt.children||[]),wt.return=We,We=wt;break e}else{g(We,He);break}else f(We,He);He=He.sibling}wt=th(nt,We.mode,wt),wt.return=We,We=wt}return le(We);case _:return ln=nt._init,nt=ln(nt._payload),ls(We,He,nt,wt)}if(te(nt))return Un(We,He,nt,wt);if(L(nt)){if(ln=L(nt),typeof ln!="function")throw Error(r(150));return nt=ln.call(nt),Tn(We,He,nt,wt)}if(typeof nt.then=="function")return ls(We,He,S1(nt),wt);if(nt.$$typeof===I)return ls(We,He,yu(We,nt),wt);T1(We,nt)}return typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint"?(nt=""+nt,He!==null&&He.tag===6?(g(We,He.sibling),wt=M(He,nt),wt.return=We,We=wt):(g(We,He),wt=S0(nt,We.mode,wt),wt.return=We,We=wt),le(We)):g(We,He)}return function(We,He,nt,wt){try{ig=0;var ln=ls(We,He,nt,wt);return P0=null,ln}catch(fn){if(fn===he||fn===xe)throw fn;var or=Ja(29,fn,null,We.mode);return or.lanes=wt,or.return=We,or}finally{}}}var O0=vk(!0),yk=vk(!1),Vl=ie(null),_u=null;function kd(A){var f=A.alternate;W(Ha,Ha.current&1),W(Vl,A),_u===null&&(f===null||Zn.current!==null||f.memoizedState!==null)&&(_u=A)}function wk(A){if(A.tag===22){if(W(Ha,Ha.current),W(Vl,A),_u===null){var f=A.alternate;f!==null&&f.memoizedState!==null&&(_u=A)}}else Id()}function Id(){W(Ha,Ha.current),W(Vl,Vl.current)}function BA(A){O(Vl),_u===A&&(_u=null),O(Ha)}var Ha=ie(0);function N1(A){for(var f=A;f!==null;){if(f.tag===13){var g=f.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||$E(g)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===A)break;for(;f.sibling===null;){if(f.return===null||f.return===A)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function aE(A,f,g,b){f=A.memoizedState,g=g(b,f),g=g==null?f:d({},f,g),A.memoizedState=g,A.lanes===0&&(A.updateQueue.baseState=g)}var iE={enqueueSetState:function(A,f,g){A=A._reactInternals;var b=ll(),M=pt(b);M.payload=f,g!=null&&(M.callback=g),f=Ct(A,M,b),f!==null&&(cl(f,A,b),vt(f,A,b))},enqueueReplaceState:function(A,f,g){A=A._reactInternals;var b=ll(),M=pt(b);M.tag=1,M.payload=f,g!=null&&(M.callback=g),f=Ct(A,M,b),f!==null&&(cl(f,A,b),vt(f,A,b))},enqueueForceUpdate:function(A,f){A=A._reactInternals;var g=ll(),b=pt(g);b.tag=2,f!=null&&(b.callback=f),f=Ct(A,b,g),f!==null&&(cl(f,A,g),vt(f,A,g))}};function bk(A,f,g,b,M,z,le){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(b,z,le):f.prototype&&f.prototype.isPureReactComponent?!lu(g,b)||!lu(M,z):!0}function Ck(A,f,g,b){A=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(g,b),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(g,b),f.state!==A&&iE.enqueueReplaceState(f,f.state,null)}function ph(A,f){var g=f;if("ref"in f){g={};for(var b in f)b!=="ref"&&(g[b]=f[b])}if(A=A.defaultProps){g===f&&(g=d({},g));for(var M in A)g[M]===void 0&&(g[M]=A[M])}return g}var B1=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function Ek(A){B1(A)}function _k(A){console.error(A)}function Sk(A){B1(A)}function k1(A,f){try{var g=A.onUncaughtError;g(f.value,{componentStack:f.stack})}catch(b){setTimeout(function(){throw b})}}function Tk(A,f,g){try{var b=A.onCaughtError;b(g.value,{componentStack:g.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function oE(A,f,g){return g=pt(g),g.tag=3,g.payload={element:null},g.callback=function(){k1(A,f)},g}function Nk(A){return A=pt(A),A.tag=3,A}function Bk(A,f,g,b){var M=g.type.getDerivedStateFromError;if(typeof M=="function"){var z=b.value;A.payload=function(){return M(z)},A.callback=function(){Tk(f,g,b)}}var le=g.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(A.callback=function(){Tk(f,g,b),typeof M!="function"&&(Md===null?Md=new Set([this]):Md.add(this));var ye=b.stack;this.componentDidCatch(b.value,{componentStack:ye!==null?ye:""})})}function MG(A,f,g,b,M){if(g.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(f=g.alternate,f!==null&&Ed(f,g,M,!0),g=Vl.current,g!==null){switch(g.tag){case 13:return _u===null?IE():g.alternate===null&&Ks===0&&(Ks=3),g.flags&=-257,g.flags|=65536,g.lanes=M,b===we?g.flags|=16384:(f=g.updateQueue,f===null?g.updateQueue=new Set([b]):f.add(b),DE(A,b,M)),!1;case 22:return g.flags|=65536,b===we?g.flags|=16384:(f=g.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([b])},g.updateQueue=f):(g=f.retryQueue,g===null?f.retryQueue=new Set([b]):g.add(b)),DE(A,b,M)),!1}throw Error(r(435,g.tag))}return DE(A,b,M),IE(),!1}if(Tr)return f=Vl.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=M,b!==Gp&&(A=Error(r(422),{cause:b}),Cd(tr(A,g)))):(b!==Gp&&(f=Error(r(423),{cause:b}),Cd(tr(f,g))),A=A.current.alternate,A.flags|=65536,M&=-M,A.lanes|=M,b=tr(b,g),M=oE(A.stateNode,b,M),Jt(A,M),Ks!==4&&(Ks=2)),!1;var z=Error(r(520),{cause:b});if(z=tr(z,g),hg===null?hg=[z]:hg.push(z),Ks!==4&&(Ks=2),f===null)return!0;b=tr(b,g),g=f;do{switch(g.tag){case 3:return g.flags|=65536,A=M&-M,g.lanes|=A,A=oE(g.stateNode,b,A),Jt(g,A),!1;case 1:if(f=g.type,z=g.stateNode,(g.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Md===null||!Md.has(z))))return g.flags|=65536,M&=-M,g.lanes|=M,M=Nk(M),Bk(M,A,g,b),Jt(g,M),!1}g=g.return}while(g!==null);return!1}var kk=Error(r(461)),Za=!1;function mi(A,f,g,b){f.child=A===null?yk(f,null,g,b):O0(f,A.child,g,b)}function Ik(A,f,g,b,M){g=g.render;var z=f.ref;if("ref"in b){var le={};for(var ye in b)ye!=="ref"&&(le[ye]=b[ye])}else le=b;return Ql(f),b=rl(A,f,g,le,z,M),ye=fs(),A!==null&&!Za?(ih(A,f,M),kA(A,f,M)):(Tr&&ye&&nh(f),f.flags|=1,mi(A,f,b,M),f.child)}function Fk(A,f,g,b,M){if(A===null){var z=g.type;return typeof z=="function"&&!wd(z)&&z.defaultProps===void 0&&g.compare===null?(f.tag=15,f.type=z,Dk(A,f,z,b,M)):(A=yA(g.type,null,b,f,f.mode,M),A.ref=f.ref,A.return=f,f.child=A)}if(z=A.child,!mE(A,M)){var le=z.memoizedProps;if(g=g.compare,g=g!==null?g:lu,g(le,b)&&A.ref===f.ref)return kA(A,f,M)}return f.flags|=1,A=Ml(z,b),A.ref=f.ref,A.return=f,f.child=A}function Dk(A,f,g,b,M){if(A!==null){var z=A.memoizedProps;if(lu(z,b)&&A.ref===f.ref)if(Za=!1,f.pendingProps=b=z,mE(A,M))(A.flags&131072)!==0&&(Za=!0);else return f.lanes=A.lanes,kA(A,f,M)}return lE(A,f,g,b,M)}function Rk(A,f,g){var b=f.pendingProps,M=b.children,z=A!==null?A.memoizedState:null;if(b.mode==="hidden"){if((f.flags&128)!==0){if(b=z!==null?z.baseLanes|g:g,A!==null){for(M=f.child=A.child,z=0;M!==null;)z=z|M.lanes|M.childLanes,M=M.sibling;f.childLanes=z&~b}else f.childLanes=0,f.child=null;return Lk(A,f,b,g)}if((g&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},A!==null&&ae(f,z!==null?z.cachePool:null),z!==null?jr(f,z):Dr(),wk(f);else return f.lanes=f.childLanes=536870912,Lk(A,f,z!==null?z.baseLanes|g:g,g)}else z!==null?(ae(f,z.cachePool),jr(f,z),Id(),f.memoizedState=null):(A!==null&&ae(f,null),Dr(),Id());return mi(A,f,M,g),f.child}function Lk(A,f,g,b){var M=X();return M=M===null?null:{parent:ia._currentValue,pool:M},f.memoizedState={baseLanes:g,cachePool:M},A!==null&&ae(f,null),Dr(),wk(f),A!==null&&Ed(A,f,b,!0),null}function I1(A,f){var g=f.ref;if(g===null)A!==null&&A.ref!==null&&(f.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(r(284));(A===null||A.ref!==g)&&(f.flags|=4194816)}}function lE(A,f,g,b,M){return Ql(f),g=rl(A,f,g,b,void 0,M),b=fs(),A!==null&&!Za?(ih(A,f,M),kA(A,f,M)):(Tr&&b&&nh(f),f.flags|=1,mi(A,f,g,M),f.child)}function Uk(A,f,g,b,M,z){return Ql(f),f.updateQueue=null,g=_A(f,b,g,M),wu(A),b=fs(),A!==null&&!Za?(ih(A,f,z),kA(A,f,z)):(Tr&&b&&nh(f),f.flags|=1,mi(A,f,g,z),f.child)}function Mk(A,f,g,b,M){if(Ql(f),f.stateNode===null){var z=ba,le=g.contextType;typeof le=="object"&&le!==null&&(z=aa(le)),z=new g(b,z),f.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,z.updater=iE,f.stateNode=z,z._reactInternals=f,z=f.stateNode,z.props=b,z.state=f.memoizedState,z.refs={},Qe(f),le=g.contextType,z.context=typeof le=="object"&&le!==null?aa(le):ba,z.state=f.memoizedState,le=g.getDerivedStateFromProps,typeof le=="function"&&(aE(f,g,le,b),z.state=f.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(le=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),le!==z.state&&iE.enqueueReplaceState(z,z.state,null),Gt(f,b,z,M),An(),z.state=f.memoizedState),typeof z.componentDidMount=="function"&&(f.flags|=4194308),b=!0}else if(A===null){z=f.stateNode;var ye=f.memoizedProps,Le=ph(g,ye);z.props=Le;var it=z.context,xt=g.contextType;le=ba,typeof xt=="object"&&xt!==null&&(le=aa(xt));var St=g.getDerivedStateFromProps;xt=typeof St=="function"||typeof z.getSnapshotBeforeUpdate=="function",ye=f.pendingProps!==ye,xt||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(ye||it!==le)&&Ck(f,z,b,le),ut=!1;var lt=f.memoizedState;z.state=lt,Gt(f,b,z,M),An(),it=f.memoizedState,ye||lt!==it||ut?(typeof St=="function"&&(aE(f,g,St,b),it=f.memoizedState),(Le=ut||bk(f,g,Le,b,lt,it,le))?(xt||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(f.flags|=4194308)):(typeof z.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=b,f.memoizedState=it),z.props=b,z.state=it,z.context=le,b=Le):(typeof z.componentDidMount=="function"&&(f.flags|=4194308),b=!1)}else{z=f.stateNode,Ve(A,f),le=f.memoizedProps,xt=ph(g,le),z.props=xt,St=f.pendingProps,lt=z.context,it=g.contextType,Le=ba,typeof it=="object"&&it!==null&&(Le=aa(it)),ye=g.getDerivedStateFromProps,(it=typeof ye=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(le!==St||lt!==Le)&&Ck(f,z,b,Le),ut=!1,lt=f.memoizedState,z.state=lt,Gt(f,b,z,M),An();var ct=f.memoizedState;le!==St||lt!==ct||ut||A!==null&&A.dependencies!==null&&k0(A.dependencies)?(typeof ye=="function"&&(aE(f,g,ye,b),ct=f.memoizedState),(xt=ut||bk(f,g,xt,b,lt,ct,Le)||A!==null&&A.dependencies!==null&&k0(A.dependencies))?(it||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(b,ct,Le),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(b,ct,Le)),typeof z.componentDidUpdate=="function"&&(f.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof z.componentDidUpdate!="function"||le===A.memoizedProps&&lt===A.memoizedState||(f.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||le===A.memoizedProps&&lt===A.memoizedState||(f.flags|=1024),f.memoizedProps=b,f.memoizedState=ct),z.props=b,z.state=ct,z.context=Le,b=xt):(typeof z.componentDidUpdate!="function"||le===A.memoizedProps&&lt===A.memoizedState||(f.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||le===A.memoizedProps&&lt===A.memoizedState||(f.flags|=1024),b=!1)}return z=b,I1(A,f),b=(f.flags&128)!==0,z||b?(z=f.stateNode,g=b&&typeof g.getDerivedStateFromError!="function"?null:z.render(),f.flags|=1,A!==null&&b?(f.child=O0(f,A.child,null,M),f.child=O0(f,null,g,M)):mi(A,f,g,M),f.memoizedState=z.state,A=f.child):A=kA(A,f,M),A}function Pk(A,f,g,b){return Ao(),f.flags|=256,mi(A,f,g,b),f.child}var cE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uE(A){return{baseLanes:A,cachePool:ue()}}function AE(A,f,g){return A=A!==null?A.childLanes&~g:0,f&&(A|=zl),A}function Ok(A,f,g){var b=f.pendingProps,M=!1,z=(f.flags&128)!==0,le;if((le=z)||(le=A!==null&&A.memoizedState===null?!1:(Ha.current&2)!==0),le&&(M=!0,f.flags&=-129),le=(f.flags&32)!==0,f.flags&=-33,A===null){if(Tr){if(M?kd(f):Id(),Tr){var ye=Ss,Le;if(Le=ye){e:{for(Le=ye,ye=Pl;Le.nodeType!==8;){if(!ye){ye=null;break e}if(Le=Rc(Le.nextSibling),Le===null){ye=null;break e}}ye=Le}ye!==null?(f.memoizedState={dehydrated:ye,treeContext:wA!==null?{id:Ec,overflow:_c}:null,retryLane:536870912,hydrationErrors:null},Le=Ja(18,null,null,0),Le.stateNode=ye,Le.return=f,f.child=Le,sa=f,Ss=null,Le=!0):Le=!1}Le||CA(f)}if(ye=f.memoizedState,ye!==null&&(ye=ye.dehydrated,ye!==null))return $E(ye)?f.lanes=32:f.lanes=536870912,null;BA(f)}return ye=b.children,b=b.fallback,M?(Id(),M=f.mode,ye=F1({mode:"hidden",children:ye},M),b=bc(b,M,g,null),ye.return=f,b.return=f,ye.sibling=b,f.child=ye,M=f.child,M.memoizedState=uE(g),M.childLanes=AE(A,le,g),f.memoizedState=cE,b):(kd(f),dE(f,ye))}if(Le=A.memoizedState,Le!==null&&(ye=Le.dehydrated,ye!==null)){if(z)f.flags&256?(kd(f),f.flags&=-257,f=fE(A,f,g)):f.memoizedState!==null?(Id(),f.child=A.child,f.flags|=128,f=null):(Id(),M=b.fallback,ye=f.mode,b=F1({mode:"visible",children:b.children},ye),M=bc(M,ye,g,null),M.flags|=2,b.return=f,M.return=f,b.sibling=M,f.child=b,O0(f,A.child,null,g),b=f.child,b.memoizedState=uE(g),b.childLanes=AE(A,le,g),f.memoizedState=cE,f=M);else if(kd(f),$E(ye)){if(le=ye.nextSibling&&ye.nextSibling.dataset,le)var it=le.dgst;le=it,b=Error(r(419)),b.stack="",b.digest=le,Cd({value:b,source:null,stack:null}),f=fE(A,f,g)}else if(Za||Ed(A,f,g,!1),le=(g&A.childLanes)!==0,Za||le){if(le=hs,le!==null&&(b=g&-g,b=(b&42)!==0?1:xa(b),b=(b&(le.suspendedLanes|g))!==0?0:b,b!==0&&b!==Le.retryLane))throw Le.retryLane=b,wc(A,b),cl(le,A,b),kk;ye.data==="$?"||IE(),f=fE(A,f,g)}else ye.data==="$?"?(f.flags|=192,f.child=A.child,f=null):(A=Le.treeContext,Ss=Rc(ye.nextSibling),sa=f,Tr=!0,xu=null,Pl=!1,A!==null&&(Fo[uo++]=Ec,Fo[uo++]=_c,Fo[uo++]=wA,Ec=A.id,_c=A.overflow,wA=f),f=dE(f,b.children),f.flags|=4096);return f}return M?(Id(),M=b.fallback,ye=f.mode,Le=A.child,it=Le.sibling,b=Ml(Le,{mode:"hidden",children:b.children}),b.subtreeFlags=Le.subtreeFlags&65011712,it!==null?M=Ml(it,M):(M=bc(M,ye,g,null),M.flags|=2),M.return=f,b.return=f,b.sibling=M,f.child=b,b=M,M=f.child,ye=A.child.memoizedState,ye===null?ye=uE(g):(Le=ye.cachePool,Le!==null?(it=ia._currentValue,Le=Le.parent!==it?{parent:it,pool:it}:Le):Le=ue(),ye={baseLanes:ye.baseLanes|g,cachePool:Le}),M.memoizedState=ye,M.childLanes=AE(A,le,g),f.memoizedState=cE,b):(kd(f),g=A.child,A=g.sibling,g=Ml(g,{mode:"visible",children:b.children}),g.return=f,g.sibling=null,A!==null&&(le=f.deletions,le===null?(f.deletions=[A],f.flags|=16):le.push(A)),f.child=g,f.memoizedState=null,g)}function dE(A,f){return f=F1({mode:"visible",children:f},A.mode),f.return=A,A.child=f}function F1(A,f){return A=Ja(22,A,null,f),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function fE(A,f,g){return O0(f,A.child,null,g),A=dE(f,f.pendingProps.children),A.flags|=2,f.memoizedState=null,A}function jk(A,f,g){A.lanes|=f;var b=A.alternate;b!==null&&(b.lanes|=f),N0(A.return,f,g)}function hE(A,f,g,b,M){var z=A.memoizedState;z===null?A.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:b,tail:g,tailMode:M}:(z.isBackwards=f,z.rendering=null,z.renderingStartTime=0,z.last=b,z.tail=g,z.tailMode=M)}function Qk(A,f,g){var b=f.pendingProps,M=b.revealOrder,z=b.tail;if(mi(A,f,b.children,g),b=Ha.current,(b&2)!==0)b=b&1|2,f.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=f.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&jk(A,g,f);else if(A.tag===19)jk(A,g,f);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===f)break e;for(;A.sibling===null;){if(A.return===null||A.return===f)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}b&=1}switch(W(Ha,b),M){case"forwards":for(g=f.child,M=null;g!==null;)A=g.alternate,A!==null&&N1(A)===null&&(M=g),g=g.sibling;g=M,g===null?(M=f.child,f.child=null):(M=g.sibling,g.sibling=null),hE(f,!1,M,g,z);break;case"backwards":for(g=null,M=f.child,f.child=null;M!==null;){if(A=M.alternate,A!==null&&N1(A)===null){f.child=M;break}A=M.sibling,M.sibling=g,g=M,M=A}hE(f,!0,g,null,z);break;case"together":hE(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function kA(A,f,g){if(A!==null&&(f.dependencies=A.dependencies),Ud|=f.lanes,(g&f.childLanes)===0)if(A!==null){if(Ed(A,f,g,!1),(g&f.childLanes)===0)return null}else return null;if(A!==null&&f.child!==A.child)throw Error(r(153));if(f.child!==null){for(A=f.child,g=Ml(A,A.pendingProps),f.child=g,g.return=f;A.sibling!==null;)A=A.sibling,g=g.sibling=Ml(A,A.pendingProps),g.return=f;g.sibling=null}return f.child}function mE(A,f){return(A.lanes&f)!==0?!0:(A=A.dependencies,!!(A!==null&&k0(A)))}function PG(A,f,g){switch(f.tag){case 3:pe(f,f.stateNode.containerInfo),vu(f,ia,A.memoizedState.cache),Ao();break;case 27:case 5:Se(f);break;case 4:pe(f,f.stateNode.containerInfo);break;case 10:vu(f,f.type,f.memoizedProps.value);break;case 13:var b=f.memoizedState;if(b!==null)return b.dehydrated!==null?(kd(f),f.flags|=128,null):(g&f.child.childLanes)!==0?Ok(A,f,g):(kd(f),A=kA(A,f,g),A!==null?A.sibling:null);kd(f);break;case 19:var M=(A.flags&128)!==0;if(b=(g&f.childLanes)!==0,b||(Ed(A,f,g,!1),b=(g&f.childLanes)!==0),M){if(b)return Qk(A,f,g);f.flags|=128}if(M=f.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),W(Ha,Ha.current),b)break;return null;case 22:case 23:return f.lanes=0,Rk(A,f,g);case 24:vu(f,ia,A.memoizedState.cache)}return kA(A,f,g)}function Hk(A,f,g){if(A!==null)if(A.memoizedProps!==f.pendingProps)Za=!0;else{if(!mE(A,g)&&(f.flags&128)===0)return Za=!1,PG(A,f,g);Za=(A.flags&131072)!==0}else Za=!1,Tr&&(f.flags&1048576)!==0&&l1(f,T0,f.index);switch(f.lanes=0,f.tag){case 16:e:{A=f.pendingProps;var b=f.elementType,M=b._init;if(b=M(b._payload),f.type=b,typeof b=="function")wd(b)?(A=ph(b,A),f.tag=1,f=Mk(null,f,b,A,g)):(f.tag=0,f=lE(null,f,b,A,g));else{if(b!=null){if(M=b.$$typeof,M===F){f.tag=11,f=Ik(null,f,b,A,g);break e}else if(M===E){f.tag=14,f=Fk(null,f,b,A,g);break e}}throw f=H(b)||b,Error(r(306,f,""))}}return f;case 0:return lE(A,f,f.type,f.pendingProps,g);case 1:return b=f.type,M=ph(b,f.pendingProps),Mk(A,f,b,M,g);case 3:e:{if(pe(f,f.stateNode.containerInfo),A===null)throw Error(r(387));b=f.pendingProps;var z=f.memoizedState;M=z.element,Ve(A,f),Gt(f,b,null,g);var le=f.memoizedState;if(b=le.cache,vu(f,ia,b),b!==z.cache&&B0(f,[ia],g,!0),An(),b=le.element,z.isDehydrated)if(z={element:b,isDehydrated:!1,cache:le.cache},f.updateQueue.baseState=z,f.memoizedState=z,f.flags&256){f=Pk(A,f,b,g);break e}else if(b!==M){M=tr(Error(r(424)),f),Cd(M),f=Pk(A,f,b,g);break e}else{switch(A=f.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(Ss=Rc(A.firstChild),sa=f,Tr=!0,xu=null,Pl=!0,g=yk(f,null,b,g),f.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(Ao(),b===M){f=kA(A,f,g);break e}mi(A,f,b,g)}f=f.child}return f;case 26:return I1(A,f),A===null?(g=qI(f.type,null,f.pendingProps,null))?f.memoizedState=g:Tr||(g=f.type,A=f.pendingProps,b=q1(se.current).createElement(g),b[vr]=f,b[ur]=A,gi(b,g,A),qe(b),f.stateNode=b):f.memoizedState=qI(f.type,A.memoizedProps,f.pendingProps,A.memoizedState),null;case 27:return Se(f),A===null&&Tr&&(b=f.stateNode=VI(f.type,f.pendingProps,se.current),sa=f,Pl=!0,M=Ss,jd(f.type)?(WE=M,Ss=Rc(b.firstChild)):Ss=M),mi(A,f,f.pendingProps.children,g),I1(A,f),A===null&&(f.flags|=4194304),f.child;case 5:return A===null&&Tr&&((M=b=Ss)&&(b=dq(b,f.type,f.pendingProps,Pl),b!==null?(f.stateNode=b,sa=f,Ss=Rc(b.firstChild),Pl=!1,M=!0):M=!1),M||CA(f)),Se(f),M=f.type,z=f.pendingProps,le=A!==null?A.memoizedProps:null,b=z.children,GE(M,z)?b=null:le!==null&&GE(M,le)&&(f.flags|=32),f.memoizedState!==null&&(M=rl(A,f,bu,null,null,g),Cg._currentValue=M),I1(A,f),mi(A,f,b,g),f.child;case 6:return A===null&&Tr&&((A=g=Ss)&&(g=fq(g,f.pendingProps,Pl),g!==null?(f.stateNode=g,sa=f,Ss=null,A=!0):A=!1),A||CA(f)),null;case 13:return Ok(A,f,g);case 4:return pe(f,f.stateNode.containerInfo),b=f.pendingProps,A===null?f.child=O0(f,null,b,g):mi(A,f,b,g),f.child;case 11:return Ik(A,f,f.type,f.pendingProps,g);case 7:return mi(A,f,f.pendingProps,g),f.child;case 8:return mi(A,f,f.pendingProps.children,g),f.child;case 12:return mi(A,f,f.pendingProps.children,g),f.child;case 10:return b=f.pendingProps,vu(f,f.type,b.value),mi(A,f,b.children,g),f.child;case 9:return M=f.type._context,b=f.pendingProps.children,Ql(f),M=aa(M),b=b(M),f.flags|=1,mi(A,f,b,g),f.child;case 14:return Fk(A,f,f.type,f.pendingProps,g);case 15:return Dk(A,f,f.type,f.pendingProps,g);case 19:return Qk(A,f,g);case 31:return b=f.pendingProps,g=f.mode,b={mode:b.mode,children:b.children},A===null?(g=F1(b,g),g.ref=f.ref,f.child=g,g.return=f,f=g):(g=Ml(A.child,b),g.ref=f.ref,f.child=g,g.return=f,f=g),f;case 22:return Rk(A,f,g);case 24:return Ql(f),b=aa(ia),A===null?(M=X(),M===null&&(M=hs,z=qp(),M.pooledCache=z,z.refCount++,z!==null&&(M.pooledCacheLanes|=g),M=z),f.memoizedState={parent:b,cache:M},Qe(f),vu(f,ia,M)):((A.lanes&g)!==0&&(Ve(A,f),Gt(f,null,null,g),An()),M=A.memoizedState,z=f.memoizedState,M.parent!==b?(M={parent:b,cache:b},f.memoizedState=M,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=M),vu(f,ia,b)):(b=z.cache,vu(f,ia,b),b!==M.cache&&B0(f,[ia],g,!0))),mi(A,f,f.pendingProps.children,g),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function IA(A){A.flags|=4}function Vk(A,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!XI(f)){if(f=Vl.current,f!==null&&((Er&4194048)===Er?_u!==null:(Er&62914560)!==Er&&(Er&536870912)===0||f!==_u))throw et=we,ge;A.flags|=8192}}function D1(A,f){f!==null&&(A.flags|=4),A.flags&16384&&(f=A.tag!==22?jn():536870912,A.lanes|=f,V0|=f)}function lg(A,f){if(!Tr)switch(A.tailMode){case"hidden":f=A.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?A.tail=null:g.sibling=null;break;case"collapsed":g=A.tail;for(var b=null;g!==null;)g.alternate!==null&&(b=g),g=g.sibling;b===null?f||A.tail===null?A.tail=null:A.tail.sibling=null:b.sibling=null}}function Ls(A){var f=A.alternate!==null&&A.alternate.child===A.child,g=0,b=0;if(f)for(var M=A.child;M!==null;)g|=M.lanes|M.childLanes,b|=M.subtreeFlags&65011712,b|=M.flags&65011712,M.return=A,M=M.sibling;else for(M=A.child;M!==null;)g|=M.lanes|M.childLanes,b|=M.subtreeFlags,b|=M.flags,M.return=A,M=M.sibling;return A.subtreeFlags|=b,A.childLanes=g,f}function OG(A,f,g){var b=f.pendingProps;switch(rh(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ls(f),null;case 1:return Ls(f),null;case 3:return g=f.stateNode,b=null,A!==null&&(b=A.memoizedState.cache),f.memoizedState.cache!==b&&(f.flags|=2048),jl(ia),be(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(A===null||A.child===null)&&(fi(f)?IA(f):A===null||A.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,u1())),Ls(f),null;case 26:return g=f.memoizedState,A===null?(IA(f),g!==null?(Ls(f),Vk(f,g)):(Ls(f),f.flags&=-16777217)):g?g!==A.memoizedState?(IA(f),Ls(f),Vk(f,g)):(Ls(f),f.flags&=-16777217):(A.memoizedProps!==b&&IA(f),Ls(f),f.flags&=-16777217),null;case 27:me(f),g=se.current;var M=f.type;if(A!==null&&f.stateNode!=null)A.memoizedProps!==b&&IA(f);else{if(!b){if(f.stateNode===null)throw Error(r(166));return Ls(f),null}A=Z.current,fi(f)?c1(f):(A=VI(M,b,g),f.stateNode=A,IA(f))}return Ls(f),null;case 5:if(me(f),g=f.type,A!==null&&f.stateNode!=null)A.memoizedProps!==b&&IA(f);else{if(!b){if(f.stateNode===null)throw Error(r(166));return Ls(f),null}if(A=Z.current,fi(f))c1(f);else{switch(M=q1(se.current),A){case 1:A=M.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:A=M.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":A=M.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":A=M.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":A=M.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof b.is=="string"?M.createElement("select",{is:b.is}):M.createElement("select"),b.multiple?A.multiple=!0:b.size&&(A.size=b.size);break;default:A=typeof b.is=="string"?M.createElement(g,{is:b.is}):M.createElement(g)}}A[vr]=f,A[ur]=b;e:for(M=f.child;M!==null;){if(M.tag===5||M.tag===6)A.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===f)break e;for(;M.sibling===null;){if(M.return===null||M.return===f)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}f.stateNode=A;e:switch(gi(A,g,b),g){case"button":case"input":case"select":case"textarea":A=!!b.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&IA(f)}}return Ls(f),f.flags&=-16777217,null;case 6:if(A&&f.stateNode!=null)A.memoizedProps!==b&&IA(f);else{if(typeof b!="string"&&f.stateNode===null)throw Error(r(166));if(A=se.current,fi(f)){if(A=f.stateNode,g=f.memoizedProps,b=null,M=sa,M!==null)switch(M.tag){case 27:case 5:b=M.memoizedProps}A[vr]=f,A=!!(A.nodeValue===g||b!==null&&b.suppressHydrationWarning===!0||UI(A.nodeValue,g)),A||CA(f)}else A=q1(A).createTextNode(b),A[vr]=f,f.stateNode=A}return Ls(f),null;case 13:if(b=f.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(M=fi(f),b!==null&&b.dehydrated!==null){if(A===null){if(!M)throw Error(r(318));if(M=f.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(r(317));M[vr]=f}else Ao(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Ls(f),M=!1}else M=u1(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=M),M=!0;if(!M)return f.flags&256?(BA(f),f):(BA(f),null)}if(BA(f),(f.flags&128)!==0)return f.lanes=g,f;if(g=b!==null,A=A!==null&&A.memoizedState!==null,g){b=f.child,M=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(M=b.alternate.memoizedState.cachePool.pool);var z=null;b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(z=b.memoizedState.cachePool.pool),z!==M&&(b.flags|=2048)}return g!==A&&g&&(f.child.flags|=8192),D1(f,f.updateQueue),Ls(f),null;case 4:return be(),A===null&&jE(f.stateNode.containerInfo),Ls(f),null;case 10:return jl(f.type),Ls(f),null;case 19:if(O(Ha),M=f.memoizedState,M===null)return Ls(f),null;if(b=(f.flags&128)!==0,z=M.rendering,z===null)if(b)lg(M,!1);else{if(Ks!==0||A!==null&&(A.flags&128)!==0)for(A=f.child;A!==null;){if(z=N1(A),z!==null){for(f.flags|=128,lg(M,!1),A=z.updateQueue,f.updateQueue=A,D1(f,A),f.subtreeFlags=0,A=g,g=f.child;g!==null;)eh(g,A),g=g.sibling;return W(Ha,Ha.current&1|2),f.child}A=A.sibling}M.tail!==null&&Re()>U1&&(f.flags|=128,b=!0,lg(M,!1),f.lanes=4194304)}else{if(!b)if(A=N1(z),A!==null){if(f.flags|=128,b=!0,A=A.updateQueue,f.updateQueue=A,D1(f,A),lg(M,!0),M.tail===null&&M.tailMode==="hidden"&&!z.alternate&&!Tr)return Ls(f),null}else 2*Re()-M.renderingStartTime>U1&&g!==536870912&&(f.flags|=128,b=!0,lg(M,!1),f.lanes=4194304);M.isBackwards?(z.sibling=f.child,f.child=z):(A=M.last,A!==null?A.sibling=z:f.child=z,M.last=z)}return M.tail!==null?(f=M.tail,M.rendering=f,M.tail=f.sibling,M.renderingStartTime=Re(),f.sibling=null,A=Ha.current,W(Ha,b?A&1|2:A&1),f):(Ls(f),null);case 22:case 23:return BA(f),On(),b=f.memoizedState!==null,A!==null?A.memoizedState!==null!==b&&(f.flags|=8192):b&&(f.flags|=8192),b?(g&536870912)!==0&&(f.flags&128)===0&&(Ls(f),f.subtreeFlags&6&&(f.flags|=8192)):Ls(f),g=f.updateQueue,g!==null&&D1(f,g.retryQueue),g=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(g=A.memoizedState.cachePool.pool),b=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==g&&(f.flags|=2048),A!==null&&O(P),null;case 24:return g=null,A!==null&&(g=A.memoizedState.cache),f.memoizedState.cache!==g&&(f.flags|=2048),jl(ia),Ls(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function jG(A,f){switch(rh(f),f.tag){case 1:return A=f.flags,A&65536?(f.flags=A&-65537|128,f):null;case 3:return jl(ia),be(),A=f.flags,(A&65536)!==0&&(A&128)===0?(f.flags=A&-65537|128,f):null;case 26:case 27:case 5:return me(f),null;case 13:if(BA(f),A=f.memoizedState,A!==null&&A.dehydrated!==null){if(f.alternate===null)throw Error(r(340));Ao()}return A=f.flags,A&65536?(f.flags=A&-65537|128,f):null;case 19:return O(Ha),null;case 4:return be(),null;case 10:return jl(f.type),null;case 22:case 23:return BA(f),On(),A!==null&&O(P),A=f.flags,A&65536?(f.flags=A&-65537|128,f):null;case 24:return jl(ia),null;case 25:return null;default:return null}}function zk(A,f){switch(rh(f),f.tag){case 3:jl(ia),be();break;case 26:case 27:case 5:me(f);break;case 4:be();break;case 13:BA(f);break;case 19:O(Ha);break;case 10:jl(f.type);break;case 22:case 23:BA(f),On(),A!==null&&O(P);break;case 24:jl(ia)}}function cg(A,f){try{var g=f.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var M=b.next;g=M;do{if((g.tag&A)===A){b=void 0;var z=g.create,le=g.inst;b=z(),le.destroy=b}g=g.next}while(g!==M)}}catch(ye){As(f,f.return,ye)}}function Fd(A,f,g){try{var b=f.updateQueue,M=b!==null?b.lastEffect:null;if(M!==null){var z=M.next;b=z;do{if((b.tag&A)===A){var le=b.inst,ye=le.destroy;if(ye!==void 0){le.destroy=void 0,M=f;var Le=g,it=ye;try{it()}catch(xt){As(M,Le,xt)}}}b=b.next}while(b!==z)}}catch(xt){As(f,f.return,xt)}}function Gk(A){var f=A.updateQueue;if(f!==null){var g=A.stateNode;try{Fr(f,g)}catch(b){As(A,A.return,b)}}}function qk(A,f,g){g.props=ph(A.type,A.memoizedProps),g.state=A.memoizedState;try{g.componentWillUnmount()}catch(b){As(A,f,b)}}function ug(A,f){try{var g=A.ref;if(g!==null){switch(A.tag){case 26:case 27:case 5:var b=A.stateNode;break;case 30:b=A.stateNode;break;default:b=A.stateNode}typeof g=="function"?A.refCleanup=g(b):g.current=b}}catch(M){As(A,f,M)}}function Su(A,f){var g=A.ref,b=A.refCleanup;if(g!==null)if(typeof b=="function")try{b()}catch(M){As(A,f,M)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(M){As(A,f,M)}else g.current=null}function Kk(A){var f=A.type,g=A.memoizedProps,b=A.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":g.autoFocus&&b.focus();break e;case"img":g.src?b.src=g.src:g.srcSet&&(b.srcset=g.srcSet)}}catch(M){As(A,A.return,M)}}function pE(A,f,g){try{var b=A.stateNode;oq(b,A.type,g,f),b[ur]=f}catch(M){As(A,A.return,M)}}function $k(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&jd(A.type)||A.tag===4}function gE(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||$k(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&jd(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function xE(A,f,g){var b=A.tag;if(b===5||b===6)A=A.stateNode,f?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(A,f):(f=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,f.appendChild(A),g=g._reactRootContainer,g!=null||f.onclick!==null||(f.onclick=G1));else if(b!==4&&(b===27&&jd(A.type)&&(g=A.stateNode,f=null),A=A.child,A!==null))for(xE(A,f,g),A=A.sibling;A!==null;)xE(A,f,g),A=A.sibling}function R1(A,f,g){var b=A.tag;if(b===5||b===6)A=A.stateNode,f?g.insertBefore(A,f):g.appendChild(A);else if(b!==4&&(b===27&&jd(A.type)&&(g=A.stateNode),A=A.child,A!==null))for(R1(A,f,g),A=A.sibling;A!==null;)R1(A,f,g),A=A.sibling}function Wk(A){var f=A.stateNode,g=A.memoizedProps;try{for(var b=A.type,M=f.attributes;M.length;)f.removeAttributeNode(M[0]);gi(f,b,g),f[vr]=A,f[ur]=g}catch(z){As(A,A.return,z)}}var FA=!1,la=!1,vE=!1,Yk=typeof WeakSet=="function"?WeakSet:Set,ei=null;function QG(A,f){if(A=A.containerInfo,VE=J1,A=di(A),Qa(A)){if("selectionStart"in A)var g={start:A.selectionStart,end:A.selectionEnd};else e:{g=(g=A.ownerDocument)&&g.defaultView||window;var b=g.getSelection&&g.getSelection();if(b&&b.rangeCount!==0){g=b.anchorNode;var M=b.anchorOffset,z=b.focusNode;b=b.focusOffset;try{g.nodeType,z.nodeType}catch{g=null;break e}var le=0,ye=-1,Le=-1,it=0,xt=0,St=A,lt=null;t:for(;;){for(var ct;St!==g||M!==0&&St.nodeType!==3||(ye=le+M),St!==z||b!==0&&St.nodeType!==3||(Le=le+b),St.nodeType===3&&(le+=St.nodeValue.length),(ct=St.firstChild)!==null;)lt=St,St=ct;for(;;){if(St===A)break t;if(lt===g&&++it===M&&(ye=le),lt===z&&++xt===b&&(Le=le),(ct=St.nextSibling)!==null)break;St=lt,lt=St.parentNode}St=ct}g=ye===-1||Le===-1?null:{start:ye,end:Le}}else g=null}g=g||{start:0,end:0}}else g=null;for(zE={focusedElem:A,selectionRange:g},J1=!1,ei=f;ei!==null;)if(f=ei,A=f.child,(f.subtreeFlags&1024)!==0&&A!==null)A.return=f,ei=A;else for(;ei!==null;){switch(f=ei,z=f.alternate,A=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&z!==null){A=void 0,g=f,M=z.memoizedProps,z=z.memoizedState,b=g.stateNode;try{var Un=ph(g.type,M,g.elementType===g.type);A=b.getSnapshotBeforeUpdate(Un,z),b.__reactInternalSnapshotBeforeUpdate=A}catch(Tn){As(g,g.return,Tn)}}break;case 3:if((A&1024)!==0){if(A=f.stateNode.containerInfo,g=A.nodeType,g===9)KE(A);else if(g===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":KE(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(r(163))}if(A=f.sibling,A!==null){A.return=f.return,ei=A;break}ei=f.return}}function Xk(A,f,g){var b=g.flags;switch(g.tag){case 0:case 11:case 15:Dd(A,g),b&4&&cg(5,g);break;case 1:if(Dd(A,g),b&4)if(A=g.stateNode,f===null)try{A.componentDidMount()}catch(le){As(g,g.return,le)}else{var M=ph(g.type,f.memoizedProps);f=f.memoizedState;try{A.componentDidUpdate(M,f,A.__reactInternalSnapshotBeforeUpdate)}catch(le){As(g,g.return,le)}}b&64&&Gk(g),b&512&&ug(g,g.return);break;case 3:if(Dd(A,g),b&64&&(A=g.updateQueue,A!==null)){if(f=null,g.child!==null)switch(g.child.tag){case 27:case 5:f=g.child.stateNode;break;case 1:f=g.child.stateNode}try{Fr(A,f)}catch(le){As(g,g.return,le)}}break;case 27:f===null&&b&4&&Wk(g);case 26:case 5:Dd(A,g),f===null&&b&4&&Kk(g),b&512&&ug(g,g.return);break;case 12:Dd(A,g);break;case 13:Dd(A,g),b&4&&eI(A,g),b&64&&(A=g.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(g=YG.bind(null,g),hq(A,g))));break;case 22:if(b=g.memoizedState!==null||FA,!b){f=f!==null&&f.memoizedState!==null||la,M=FA;var z=la;FA=b,(la=f)&&!z?Rd(A,g,(g.subtreeFlags&8772)!==0):Dd(A,g),FA=M,la=z}break;case 30:break;default:Dd(A,g)}}function Jk(A){var f=A.alternate;f!==null&&(A.alternate=null,Jk(f)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(f=A.stateNode,f!==null&&_e(f)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var Ts=null,Ro=!1;function DA(A,f,g){for(g=g.child;g!==null;)Zk(A,f,g),g=g.sibling}function Zk(A,f,g){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(Mt,g)}catch{}switch(g.tag){case 26:la||Su(g,f),DA(A,f,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:la||Su(g,f);var b=Ts,M=Ro;jd(g.type)&&(Ts=g.stateNode,Ro=!1),DA(A,f,g),vg(g.stateNode),Ts=b,Ro=M;break;case 5:la||Su(g,f);case 6:if(b=Ts,M=Ro,Ts=null,DA(A,f,g),Ts=b,Ro=M,Ts!==null)if(Ro)try{(Ts.nodeType===9?Ts.body:Ts.nodeName==="HTML"?Ts.ownerDocument.body:Ts).removeChild(g.stateNode)}catch(z){As(g,f,z)}else try{Ts.removeChild(g.stateNode)}catch(z){As(g,f,z)}break;case 18:Ts!==null&&(Ro?(A=Ts,QI(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,g.stateNode),Tg(A)):QI(Ts,g.stateNode));break;case 4:b=Ts,M=Ro,Ts=g.stateNode.containerInfo,Ro=!0,DA(A,f,g),Ts=b,Ro=M;break;case 0:case 11:case 14:case 15:la||Fd(2,g,f),la||Fd(4,g,f),DA(A,f,g);break;case 1:la||(Su(g,f),b=g.stateNode,typeof b.componentWillUnmount=="function"&&qk(g,f,b)),DA(A,f,g);break;case 21:DA(A,f,g);break;case 22:la=(b=la)||g.memoizedState!==null,DA(A,f,g),la=b;break;default:DA(A,f,g)}}function eI(A,f){if(f.memoizedState===null&&(A=f.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{Tg(A)}catch(g){As(f,f.return,g)}}function HG(A){switch(A.tag){case 13:case 19:var f=A.stateNode;return f===null&&(f=A.stateNode=new Yk),f;case 22:return A=A.stateNode,f=A._retryCache,f===null&&(f=A._retryCache=new Yk),f;default:throw Error(r(435,A.tag))}}function yE(A,f){var g=HG(A);f.forEach(function(b){var M=XG.bind(null,A,b);g.has(b)||(g.add(b),b.then(M,M))})}function al(A,f){var g=f.deletions;if(g!==null)for(var b=0;b<g.length;b++){var M=g[b],z=A,le=f,ye=le;e:for(;ye!==null;){switch(ye.tag){case 27:if(jd(ye.type)){Ts=ye.stateNode,Ro=!1;break e}break;case 5:Ts=ye.stateNode,Ro=!1;break e;case 3:case 4:Ts=ye.stateNode.containerInfo,Ro=!0;break e}ye=ye.return}if(Ts===null)throw Error(r(160));Zk(z,le,M),Ts=null,Ro=!1,z=M.alternate,z!==null&&(z.return=null),M.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)tI(f,A),f=f.sibling}var Dc=null;function tI(A,f){var g=A.alternate,b=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:al(f,A),il(A),b&4&&(Fd(3,A,A.return),cg(3,A),Fd(5,A,A.return));break;case 1:al(f,A),il(A),b&512&&(la||g===null||Su(g,g.return)),b&64&&FA&&(A=A.updateQueue,A!==null&&(b=A.callbacks,b!==null&&(g=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=g===null?b:g.concat(b))));break;case 26:var M=Dc;if(al(f,A),il(A),b&512&&(la||g===null||Su(g,g.return)),b&4){var z=g!==null?g.memoizedState:null;if(b=A.memoizedState,g===null)if(b===null)if(A.stateNode===null){e:{b=A.type,g=A.memoizedProps,M=M.ownerDocument||M;t:switch(b){case"title":z=M.getElementsByTagName("title")[0],(!z||z[Ee]||z[vr]||z.namespaceURI==="http://www.w3.org/2000/svg"||z.hasAttribute("itemprop"))&&(z=M.createElement(b),M.head.insertBefore(z,M.querySelector("head > title"))),gi(z,b,g),z[vr]=A,qe(z),b=z;break e;case"link":var le=WI("link","href",M).get(b+(g.href||""));if(le){for(var ye=0;ye<le.length;ye++)if(z=le[ye],z.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&z.getAttribute("rel")===(g.rel==null?null:g.rel)&&z.getAttribute("title")===(g.title==null?null:g.title)&&z.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){le.splice(ye,1);break t}}z=M.createElement(b),gi(z,b,g),M.head.appendChild(z);break;case"meta":if(le=WI("meta","content",M).get(b+(g.content||""))){for(ye=0;ye<le.length;ye++)if(z=le[ye],z.getAttribute("content")===(g.content==null?null:""+g.content)&&z.getAttribute("name")===(g.name==null?null:g.name)&&z.getAttribute("property")===(g.property==null?null:g.property)&&z.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&z.getAttribute("charset")===(g.charSet==null?null:g.charSet)){le.splice(ye,1);break t}}z=M.createElement(b),gi(z,b,g),M.head.appendChild(z);break;default:throw Error(r(468,b))}z[vr]=A,qe(z),b=z}A.stateNode=b}else YI(M,A.type,A.stateNode);else A.stateNode=$I(M,b,A.memoizedProps);else z!==b?(z===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):z.count--,b===null?YI(M,A.type,A.stateNode):$I(M,b,A.memoizedProps)):b===null&&A.stateNode!==null&&pE(A,A.memoizedProps,g.memoizedProps)}break;case 27:al(f,A),il(A),b&512&&(la||g===null||Su(g,g.return)),g!==null&&b&4&&pE(A,A.memoizedProps,g.memoizedProps);break;case 5:if(al(f,A),il(A),b&512&&(la||g===null||Su(g,g.return)),A.flags&32){M=A.stateNode;try{Ni(M,"")}catch(ct){As(A,A.return,ct)}}b&4&&A.stateNode!=null&&(M=A.memoizedProps,pE(A,M,g!==null?g.memoizedProps:M)),b&1024&&(vE=!0);break;case 6:if(al(f,A),il(A),b&4){if(A.stateNode===null)throw Error(r(162));b=A.memoizedProps,g=A.stateNode;try{g.nodeValue=b}catch(ct){As(A,A.return,ct)}}break;case 3:if(W1=null,M=Dc,Dc=K1(f.containerInfo),al(f,A),Dc=M,il(A),b&4&&g!==null&&g.memoizedState.isDehydrated)try{Tg(f.containerInfo)}catch(ct){As(A,A.return,ct)}vE&&(vE=!1,nI(A));break;case 4:b=Dc,Dc=K1(A.stateNode.containerInfo),al(f,A),il(A),Dc=b;break;case 12:al(f,A),il(A);break;case 13:al(f,A),il(A),A.child.flags&8192&&A.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(SE=Re()),b&4&&(b=A.updateQueue,b!==null&&(A.updateQueue=null,yE(A,b)));break;case 22:M=A.memoizedState!==null;var Le=g!==null&&g.memoizedState!==null,it=FA,xt=la;if(FA=it||M,la=xt||Le,al(f,A),la=xt,FA=it,il(A),b&8192)e:for(f=A.stateNode,f._visibility=M?f._visibility&-2:f._visibility|1,M&&(g===null||Le||FA||la||gh(A)),g=null,f=A;;){if(f.tag===5||f.tag===26){if(g===null){Le=g=f;try{if(z=Le.stateNode,M)le=z.style,typeof le.setProperty=="function"?le.setProperty("display","none","important"):le.display="none";else{ye=Le.stateNode;var St=Le.memoizedProps.style,lt=St!=null&&St.hasOwnProperty("display")?St.display:null;ye.style.display=lt==null||typeof lt=="boolean"?"":(""+lt).trim()}}catch(ct){As(Le,Le.return,ct)}}}else if(f.tag===6){if(g===null){Le=f;try{Le.stateNode.nodeValue=M?"":Le.memoizedProps}catch(ct){As(Le,Le.return,ct)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===A)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===A)break e;for(;f.sibling===null;){if(f.return===null||f.return===A)break e;g===f&&(g=null),f=f.return}g===f&&(g=null),f.sibling.return=f.return,f=f.sibling}b&4&&(b=A.updateQueue,b!==null&&(g=b.retryQueue,g!==null&&(b.retryQueue=null,yE(A,g))));break;case 19:al(f,A),il(A),b&4&&(b=A.updateQueue,b!==null&&(A.updateQueue=null,yE(A,b)));break;case 30:break;case 21:break;default:al(f,A),il(A)}}function il(A){var f=A.flags;if(f&2){try{for(var g,b=A.return;b!==null;){if($k(b)){g=b;break}b=b.return}if(g==null)throw Error(r(160));switch(g.tag){case 27:var M=g.stateNode,z=gE(A);R1(A,z,M);break;case 5:var le=g.stateNode;g.flags&32&&(Ni(le,""),g.flags&=-33);var ye=gE(A);R1(A,ye,le);break;case 3:case 4:var Le=g.stateNode.containerInfo,it=gE(A);xE(A,it,Le);break;default:throw Error(r(161))}}catch(xt){As(A,A.return,xt)}A.flags&=-3}f&4096&&(A.flags&=-4097)}function nI(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var f=A;nI(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),A=A.sibling}}function Dd(A,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)Xk(A,f.alternate,f),f=f.sibling}function gh(A){for(A=A.child;A!==null;){var f=A;switch(f.tag){case 0:case 11:case 14:case 15:Fd(4,f,f.return),gh(f);break;case 1:Su(f,f.return);var g=f.stateNode;typeof g.componentWillUnmount=="function"&&qk(f,f.return,g),gh(f);break;case 27:vg(f.stateNode);case 26:case 5:Su(f,f.return),gh(f);break;case 22:f.memoizedState===null&&gh(f);break;case 30:gh(f);break;default:gh(f)}A=A.sibling}}function Rd(A,f,g){for(g=g&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var b=f.alternate,M=A,z=f,le=z.flags;switch(z.tag){case 0:case 11:case 15:Rd(M,z,g),cg(4,z);break;case 1:if(Rd(M,z,g),b=z,M=b.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(it){As(b,b.return,it)}if(b=z,M=b.updateQueue,M!==null){var ye=b.stateNode;try{var Le=M.shared.hiddenCallbacks;if(Le!==null)for(M.shared.hiddenCallbacks=null,M=0;M<Le.length;M++)br(Le[M],ye)}catch(it){As(b,b.return,it)}}g&&le&64&&Gk(z),ug(z,z.return);break;case 27:Wk(z);case 26:case 5:Rd(M,z,g),g&&b===null&&le&4&&Kk(z),ug(z,z.return);break;case 12:Rd(M,z,g);break;case 13:Rd(M,z,g),g&&le&4&&eI(M,z);break;case 22:z.memoizedState===null&&Rd(M,z,g),ug(z,z.return);break;case 30:break;default:Rd(M,z,g)}f=f.sibling}}function wE(A,f){var g=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(g=A.memoizedState.cachePool.pool),A=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(A=f.memoizedState.cachePool.pool),A!==g&&(A!=null&&A.refCount++,g!=null&&sh(g))}function bE(A,f){A=null,f.alternate!==null&&(A=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==A&&(f.refCount++,A!=null&&sh(A))}function Tu(A,f,g,b){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)rI(A,f,g,b),f=f.sibling}function rI(A,f,g,b){var M=f.flags;switch(f.tag){case 0:case 11:case 15:Tu(A,f,g,b),M&2048&&cg(9,f);break;case 1:Tu(A,f,g,b);break;case 3:Tu(A,f,g,b),M&2048&&(A=null,f.alternate!==null&&(A=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==A&&(f.refCount++,A!=null&&sh(A)));break;case 12:if(M&2048){Tu(A,f,g,b),A=f.stateNode;try{var z=f.memoizedProps,le=z.id,ye=z.onPostCommit;typeof ye=="function"&&ye(le,f.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(Le){As(f,f.return,Le)}}else Tu(A,f,g,b);break;case 13:Tu(A,f,g,b);break;case 23:break;case 22:z=f.stateNode,le=f.alternate,f.memoizedState!==null?z._visibility&2?Tu(A,f,g,b):Ag(A,f):z._visibility&2?Tu(A,f,g,b):(z._visibility|=2,j0(A,f,g,b,(f.subtreeFlags&10256)!==0)),M&2048&&wE(le,f);break;case 24:Tu(A,f,g,b),M&2048&&bE(f.alternate,f);break;default:Tu(A,f,g,b)}}function j0(A,f,g,b,M){for(M=M&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var z=A,le=f,ye=g,Le=b,it=le.flags;switch(le.tag){case 0:case 11:case 15:j0(z,le,ye,Le,M),cg(8,le);break;case 23:break;case 22:var xt=le.stateNode;le.memoizedState!==null?xt._visibility&2?j0(z,le,ye,Le,M):Ag(z,le):(xt._visibility|=2,j0(z,le,ye,Le,M)),M&&it&2048&&wE(le.alternate,le);break;case 24:j0(z,le,ye,Le,M),M&&it&2048&&bE(le.alternate,le);break;default:j0(z,le,ye,Le,M)}f=f.sibling}}function Ag(A,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var g=A,b=f,M=b.flags;switch(b.tag){case 22:Ag(g,b),M&2048&&wE(b.alternate,b);break;case 24:Ag(g,b),M&2048&&bE(b.alternate,b);break;default:Ag(g,b)}f=f.sibling}}var dg=8192;function Q0(A){if(A.subtreeFlags&dg)for(A=A.child;A!==null;)sI(A),A=A.sibling}function sI(A){switch(A.tag){case 26:Q0(A),A.flags&dg&&A.memoizedState!==null&&Tq(Dc,A.memoizedState,A.memoizedProps);break;case 5:Q0(A);break;case 3:case 4:var f=Dc;Dc=K1(A.stateNode.containerInfo),Q0(A),Dc=f;break;case 22:A.memoizedState===null&&(f=A.alternate,f!==null&&f.memoizedState!==null?(f=dg,dg=16777216,Q0(A),dg=f):Q0(A));break;default:Q0(A)}}function aI(A){var f=A.alternate;if(f!==null&&(A=f.child,A!==null)){f.child=null;do f=A.sibling,A.sibling=null,A=f;while(A!==null)}}function fg(A){var f=A.deletions;if((A.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var b=f[g];ei=b,oI(b,A)}aI(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)iI(A),A=A.sibling}function iI(A){switch(A.tag){case 0:case 11:case 15:fg(A),A.flags&2048&&Fd(9,A,A.return);break;case 3:fg(A);break;case 12:fg(A);break;case 22:var f=A.stateNode;A.memoizedState!==null&&f._visibility&2&&(A.return===null||A.return.tag!==13)?(f._visibility&=-3,L1(A)):fg(A);break;default:fg(A)}}function L1(A){var f=A.deletions;if((A.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var b=f[g];ei=b,oI(b,A)}aI(A)}for(A=A.child;A!==null;){switch(f=A,f.tag){case 0:case 11:case 15:Fd(8,f,f.return),L1(f);break;case 22:g=f.stateNode,g._visibility&2&&(g._visibility&=-3,L1(f));break;default:L1(f)}A=A.sibling}}function oI(A,f){for(;ei!==null;){var g=ei;switch(g.tag){case 0:case 11:case 15:Fd(8,g,f);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var b=g.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:sh(g.memoizedState.cache)}if(b=g.child,b!==null)b.return=g,ei=b;else e:for(g=A;ei!==null;){b=ei;var M=b.sibling,z=b.return;if(Jk(b),b===g){ei=null;break e}if(M!==null){M.return=z,ei=M;break e}ei=z}}}var VG={getCacheForType:function(A){var f=aa(ia),g=f.data.get(A);return g===void 0&&(g=A(),f.data.set(A,g)),g}},zG=typeof WeakMap=="function"?WeakMap:Map,Yr=0,hs=null,Ar=null,Er=0,Xr=0,ol=null,Ld=!1,H0=!1,CE=!1,RA=0,Ks=0,Ud=0,xh=0,EE=0,zl=0,V0=0,hg=null,Lo=null,_E=!1,SE=0,U1=1/0,M1=null,Md=null,pi=0,Pd=null,z0=null,G0=0,TE=0,NE=null,lI=null,mg=0,BE=null;function ll(){if((Yr&2)!==0&&Er!==0)return Er&-Er;if(Y.T!==null){var A=EA;return A!==0?A:UE()}return ks()}function cI(){zl===0&&(zl=(Er&536870912)===0||Tr?xr():536870912);var A=Vl.current;return A!==null&&(A.flags|=32),zl}function cl(A,f,g){(A===hs&&(Xr===2||Xr===9)||A.cancelPendingCommit!==null)&&(q0(A,0),Od(A,Er,zl,!1)),qr(A,g),((Yr&2)===0||A!==hs)&&(A===hs&&((Yr&2)===0&&(xh|=g),Ks===4&&Od(A,Er,zl,!1)),Nu(A))}function uI(A,f,g){if((Yr&6)!==0)throw Error(r(327));var b=!g&&(f&124)===0&&(f&A.expiredLanes)===0||qn(A,f),M=b?KG(A,f):FE(A,f,!0),z=b;do{if(M===0){H0&&!b&&Od(A,f,0,!1);break}else{if(g=A.current.alternate,z&&!GG(g)){M=FE(A,f,!1),z=!1;continue}if(M===2){if(z=f,A.errorRecoveryDisabledLanes&z)var le=0;else le=A.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){f=le;e:{var ye=A;M=hg;var Le=ye.current.memoizedState.isDehydrated;if(Le&&(q0(ye,le).flags|=256),le=FE(ye,le,!1),le!==2){if(CE&&!Le){ye.errorRecoveryDisabledLanes|=z,xh|=z,M=4;break e}z=Lo,Lo=M,z!==null&&(Lo===null?Lo=z:Lo.push.apply(Lo,z))}M=le}if(z=!1,M!==2)continue}}if(M===1){q0(A,0),Od(A,f,0,!0);break}e:{switch(b=A,z=M,z){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:Od(b,f,zl,!Ld);break e;case 2:Lo=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(M=SE+300-Re(),10<M)){if(Od(b,f,zl,!Ld),rn(b,0,!0)!==0)break e;b.timeoutHandle=OI(AI.bind(null,b,g,Lo,M1,_E,f,zl,xh,V0,Ld,z,2,-0,0),M);break e}AI(b,g,Lo,M1,_E,f,zl,xh,V0,Ld,z,0,-0,0)}}break}while(!0);Nu(A)}function AI(A,f,g,b,M,z,le,ye,Le,it,xt,St,lt,ct){if(A.timeoutHandle=-1,St=f.subtreeFlags,(St&8192||(St&16785408)===16785408)&&(bg={stylesheets:null,count:0,unsuspend:Sq},sI(f),St=Nq(),St!==null)){A.cancelPendingCommit=St(xI.bind(null,A,f,z,g,b,M,le,ye,Le,xt,1,lt,ct)),Od(A,z,le,!it);return}xI(A,f,z,g,b,M,le,ye,Le)}function GG(A){for(var f=A;;){var g=f.tag;if((g===0||g===11||g===15)&&f.flags&16384&&(g=f.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var b=0;b<g.length;b++){var M=g[b],z=M.getSnapshot;M=M.value;try{if(!wa(z(),M))return!1}catch{return!1}}if(g=f.child,f.subtreeFlags&16384&&g!==null)g.return=f,f=g;else{if(f===A)break;for(;f.sibling===null;){if(f.return===null||f.return===A)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Od(A,f,g,b){f&=~EE,f&=~xh,A.suspendedLanes|=f,A.pingedLanes&=~f,b&&(A.warmLanes|=f),b=A.expirationTimes;for(var M=f;0<M;){var z=31-Ue(M),le=1<<z;b[z]=-1,M&=~le}g!==0&&en(A,g,f)}function P1(){return(Yr&6)===0?(pg(0),!1):!0}function kE(){if(Ar!==null){if(Xr===0)var A=Ar.return;else A=Ar,Tc=Ca=null,F0(A),P0=null,ig=0,A=Ar;for(;A!==null;)zk(A.alternate,A),A=A.return;Ar=null}}function q0(A,f){var g=A.timeoutHandle;g!==-1&&(A.timeoutHandle=-1,cq(g)),g=A.cancelPendingCommit,g!==null&&(A.cancelPendingCommit=null,g()),kE(),hs=A,Ar=g=Ml(A.current,null),Er=f,Xr=0,ol=null,Ld=!1,H0=qn(A,f),CE=!1,V0=zl=EE=xh=Ud=Ks=0,Lo=hg=null,_E=!1,(f&8)!==0&&(f|=f&32);var b=A.entangledLanes;if(b!==0)for(A=A.entanglements,b&=f;0<b;){var M=31-Ue(b),z=1<<M;f|=A[M],b&=~z}return RA=f,ko(),g}function dI(A,f){wn=null,Y.H=_1,f===he||f===xe?(f=$e(),Xr=3):f===ge?(f=$e(),Xr=4):Xr=f===kk?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,ol=f,Ar===null&&(Ks=1,k1(A,tr(f,A.current)))}function fI(){var A=Y.H;return Y.H=_1,A===null?_1:A}function hI(){var A=Y.A;return Y.A=VG,A}function IE(){Ks=4,Ld||(Er&4194048)!==Er&&Vl.current!==null||(H0=!0),(Ud&134217727)===0&&(xh&134217727)===0||hs===null||Od(hs,Er,zl,!1)}function FE(A,f,g){var b=Yr;Yr|=2;var M=fI(),z=hI();(hs!==A||Er!==f)&&(M1=null,q0(A,f)),f=!1;var le=Ks;e:do try{if(Xr!==0&&Ar!==null){var ye=Ar,Le=ol;switch(Xr){case 8:kE(),le=6;break e;case 3:case 2:case 9:case 6:Vl.current===null&&(f=!0);var it=Xr;if(Xr=0,ol=null,K0(A,ye,Le,it),g&&H0){le=0;break e}break;default:it=Xr,Xr=0,ol=null,K0(A,ye,Le,it)}}qG(),le=Ks;break}catch(xt){dI(A,xt)}while(!0);return f&&A.shellSuspendCounter++,Tc=Ca=null,Yr=b,Y.H=M,Y.A=z,Ar===null&&(hs=null,Er=0,ko()),le}function qG(){for(;Ar!==null;)mI(Ar)}function KG(A,f){var g=Yr;Yr|=2;var b=fI(),M=hI();hs!==A||Er!==f?(M1=null,U1=Re()+500,q0(A,f)):H0=qn(A,f);e:do try{if(Xr!==0&&Ar!==null){f=Ar;var z=ol;t:switch(Xr){case 1:Xr=0,ol=null,K0(A,f,z,1);break;case 2:case 9:if(Ne(z)){Xr=0,ol=null,pI(f);break}f=function(){Xr!==2&&Xr!==9||hs!==A||(Xr=7),Nu(A)},z.then(f,f);break e;case 3:Xr=7;break e;case 4:Xr=5;break e;case 7:Ne(z)?(Xr=0,ol=null,pI(f)):(Xr=0,ol=null,K0(A,f,z,7));break;case 5:var le=null;switch(Ar.tag){case 26:le=Ar.memoizedState;case 5:case 27:var ye=Ar;if(!le||XI(le)){Xr=0,ol=null;var Le=ye.sibling;if(Le!==null)Ar=Le;else{var it=ye.return;it!==null?(Ar=it,O1(it)):Ar=null}break t}}Xr=0,ol=null,K0(A,f,z,5);break;case 6:Xr=0,ol=null,K0(A,f,z,6);break;case 8:kE(),Ks=6;break e;default:throw Error(r(462))}}$G();break}catch(xt){dI(A,xt)}while(!0);return Tc=Ca=null,Y.H=b,Y.A=M,Yr=g,Ar!==null?0:(hs=null,Er=0,ko(),Ks)}function $G(){for(;Ar!==null&&!Fe();)mI(Ar)}function mI(A){var f=Hk(A.alternate,A,RA);A.memoizedProps=A.pendingProps,f===null?O1(A):Ar=f}function pI(A){var f=A,g=f.alternate;switch(f.tag){case 15:case 0:f=Uk(g,f,f.pendingProps,f.type,void 0,Er);break;case 11:f=Uk(g,f,f.pendingProps,f.type.render,f.ref,Er);break;case 5:F0(f);default:zk(g,f),f=Ar=eh(f,RA),f=Hk(g,f,RA)}A.memoizedProps=A.pendingProps,f===null?O1(A):Ar=f}function K0(A,f,g,b){Tc=Ca=null,F0(f),P0=null,ig=0;var M=f.return;try{if(MG(A,M,f,g,Er)){Ks=1,k1(A,tr(g,A.current)),Ar=null;return}}catch(z){if(M!==null)throw Ar=M,z;Ks=1,k1(A,tr(g,A.current)),Ar=null;return}f.flags&32768?(Tr||b===1?A=!0:H0||(Er&536870912)!==0?A=!1:(Ld=A=!0,(b===2||b===9||b===3||b===6)&&(b=Vl.current,b!==null&&b.tag===13&&(b.flags|=16384))),gI(f,A)):O1(f)}function O1(A){var f=A;do{if((f.flags&32768)!==0){gI(f,Ld);return}A=f.return;var g=OG(f.alternate,f,RA);if(g!==null){Ar=g;return}if(f=f.sibling,f!==null){Ar=f;return}Ar=f=A}while(f!==null);Ks===0&&(Ks=5)}function gI(A,f){do{var g=jG(A.alternate,A);if(g!==null){g.flags&=32767,Ar=g;return}if(g=A.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!f&&(A=A.sibling,A!==null)){Ar=A;return}Ar=A=g}while(A!==null);Ks=6,Ar=null}function xI(A,f,g,b,M,z,le,ye,Le){A.cancelPendingCommit=null;do j1();while(pi!==0);if((Yr&6)!==0)throw Error(r(327));if(f!==null){if(f===A.current)throw Error(r(177));if(z=f.lanes|f.childLanes,z|=Fs,on(A,g,z,le,ye,Le),A===hs&&(Ar=hs=null,Er=0),z0=f,Pd=A,G0=g,TE=z,NE=M,lI=b,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,JG(_t,function(){return CI(),null})):(A.callbackNode=null,A.callbackPriority=0),b=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||b){b=Y.T,Y.T=null,M=ne.p,ne.p=2,le=Yr,Yr|=4;try{QG(A,f,g)}finally{Yr=le,ne.p=M,Y.T=b}}pi=1,vI(),yI(),wI()}}function vI(){if(pi===1){pi=0;var A=Pd,f=z0,g=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||g){g=Y.T,Y.T=null;var b=ne.p;ne.p=2;var M=Yr;Yr|=4;try{tI(f,A);var z=zE,le=di(A.containerInfo),ye=z.focusedElem,Le=z.selectionRange;if(le!==ye&&ye&&ye.ownerDocument&&cu(ye.ownerDocument.documentElement,ye)){if(Le!==null&&Qa(ye)){var it=Le.start,xt=Le.end;if(xt===void 0&&(xt=it),"selectionStart"in ye)ye.selectionStart=it,ye.selectionEnd=Math.min(xt,ye.value.length);else{var St=ye.ownerDocument||document,lt=St&&St.defaultView||window;if(lt.getSelection){var ct=lt.getSelection(),Un=ye.textContent.length,Tn=Math.min(Le.start,Un),ls=Le.end===void 0?Tn:Math.min(Le.end,Un);!ct.extend&&Tn>ls&&(le=ls,ls=Tn,Tn=le);var We=vc(ye,Tn),He=vc(ye,ls);if(We&&He&&(ct.rangeCount!==1||ct.anchorNode!==We.node||ct.anchorOffset!==We.offset||ct.focusNode!==He.node||ct.focusOffset!==He.offset)){var nt=St.createRange();nt.setStart(We.node,We.offset),ct.removeAllRanges(),Tn>ls?(ct.addRange(nt),ct.extend(He.node,He.offset)):(nt.setEnd(He.node,He.offset),ct.addRange(nt))}}}}for(St=[],ct=ye;ct=ct.parentNode;)ct.nodeType===1&&St.push({element:ct,left:ct.scrollLeft,top:ct.scrollTop});for(typeof ye.focus=="function"&&ye.focus(),ye=0;ye<St.length;ye++){var wt=St[ye];wt.element.scrollLeft=wt.left,wt.element.scrollTop=wt.top}}J1=!!VE,zE=VE=null}finally{Yr=M,ne.p=b,Y.T=g}}A.current=f,pi=2}}function yI(){if(pi===2){pi=0;var A=Pd,f=z0,g=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||g){g=Y.T,Y.T=null;var b=ne.p;ne.p=2;var M=Yr;Yr|=4;try{Xk(A,f.alternate,f)}finally{Yr=M,ne.p=b,Y.T=g}}pi=3}}function wI(){if(pi===4||pi===3){pi=0,Ce();var A=Pd,f=z0,g=G0,b=lI;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?pi=5:(pi=0,z0=Pd=null,bI(A,A.pendingLanes));var M=A.pendingLanes;if(M===0&&(Md=null),rs(g),f=f.stateNode,jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(Mt,f,void 0,(f.current.flags&128)===128)}catch{}if(b!==null){f=Y.T,M=ne.p,ne.p=2,Y.T=null;try{for(var z=A.onRecoverableError,le=0;le<b.length;le++){var ye=b[le];z(ye.value,{componentStack:ye.stack})}}finally{Y.T=f,ne.p=M}}(G0&3)!==0&&j1(),Nu(A),M=A.pendingLanes,(g&4194090)!==0&&(M&42)!==0?A===BE?mg++:(mg=0,BE=A):mg=0,pg(0)}}function bI(A,f){(A.pooledCacheLanes&=f)===0&&(f=A.pooledCache,f!=null&&(A.pooledCache=null,sh(f)))}function j1(A){return vI(),yI(),wI(),CI()}function CI(){if(pi!==5)return!1;var A=Pd,f=TE;TE=0;var g=rs(G0),b=Y.T,M=ne.p;try{ne.p=32>g?32:g,Y.T=null,g=NE,NE=null;var z=Pd,le=G0;if(pi=0,z0=Pd=null,G0=0,(Yr&6)!==0)throw Error(r(331));var ye=Yr;if(Yr|=4,iI(z.current),rI(z,z.current,le,g),Yr=ye,pg(0,!1),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(Mt,z)}catch{}return!0}finally{ne.p=M,Y.T=b,bI(A,f)}}function EI(A,f,g){f=tr(g,f),f=oE(A.stateNode,f,2),A=Ct(A,f,2),A!==null&&(qr(A,2),Nu(A))}function As(A,f,g){if(A.tag===3)EI(A,A,g);else for(;f!==null;){if(f.tag===3){EI(f,A,g);break}else if(f.tag===1){var b=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Md===null||!Md.has(b))){A=tr(g,A),g=Nk(2),b=Ct(f,g,2),b!==null&&(Bk(g,b,f,A),qr(b,2),Nu(b));break}}f=f.return}}function DE(A,f,g){var b=A.pingCache;if(b===null){b=A.pingCache=new zG;var M=new Set;b.set(f,M)}else M=b.get(f),M===void 0&&(M=new Set,b.set(f,M));M.has(g)||(CE=!0,M.add(g),A=WG.bind(null,A,f,g),f.then(A,A))}function WG(A,f,g){var b=A.pingCache;b!==null&&b.delete(f),A.pingedLanes|=A.suspendedLanes&g,A.warmLanes&=~g,hs===A&&(Er&g)===g&&(Ks===4||Ks===3&&(Er&62914560)===Er&&300>Re()-SE?(Yr&2)===0&&q0(A,0):EE|=g,V0===Er&&(V0=0)),Nu(A)}function _I(A,f){f===0&&(f=jn()),A=wc(A,f),A!==null&&(qr(A,f),Nu(A))}function YG(A){var f=A.memoizedState,g=0;f!==null&&(g=f.retryLane),_I(A,g)}function XG(A,f){var g=0;switch(A.tag){case 13:var b=A.stateNode,M=A.memoizedState;M!==null&&(g=M.retryLane);break;case 19:b=A.stateNode;break;case 22:b=A.stateNode._retryCache;break;default:throw Error(r(314))}b!==null&&b.delete(f),_I(A,g)}function JG(A,f){return Me(A,f)}var Q1=null,$0=null,RE=!1,H1=!1,LE=!1,vh=0;function Nu(A){A!==$0&&A.next===null&&($0===null?Q1=$0=A:$0=$0.next=A),H1=!0,RE||(RE=!0,eq())}function pg(A,f){if(!LE&&H1){LE=!0;do for(var g=!1,b=Q1;b!==null;){if(A!==0){var M=b.pendingLanes;if(M===0)var z=0;else{var le=b.suspendedLanes,ye=b.pingedLanes;z=(1<<31-Ue(42|A)+1)-1,z&=M&~(le&~ye),z=z&201326741?z&201326741|1:z?z|2:0}z!==0&&(g=!0,BI(b,z))}else z=Er,z=rn(b,b===hs?z:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(z&3)===0||qn(b,z)||(g=!0,BI(b,z));b=b.next}while(g);LE=!1}}function ZG(){SI()}function SI(){H1=RE=!1;var A=0;vh!==0&&(lq()&&(A=vh),vh=0);for(var f=Re(),g=null,b=Q1;b!==null;){var M=b.next,z=TI(b,f);z===0?(b.next=null,g===null?Q1=M:g.next=M,M===null&&($0=g)):(g=b,(A!==0||(z&3)!==0)&&(H1=!0)),b=M}pg(A)}function TI(A,f){for(var g=A.suspendedLanes,b=A.pingedLanes,M=A.expirationTimes,z=A.pendingLanes&-62914561;0<z;){var le=31-Ue(z),ye=1<<le,Le=M[le];Le===-1?((ye&g)===0||(ye&b)!==0)&&(M[le]=un(ye,f)):Le<=f&&(A.expiredLanes|=ye),z&=~ye}if(f=hs,g=Er,g=rn(A,A===f?g:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),b=A.callbackNode,g===0||A===f&&(Xr===2||Xr===9)||A.cancelPendingCommit!==null)return b!==null&&b!==null&&Ze(b),A.callbackNode=null,A.callbackPriority=0;if((g&3)===0||qn(A,g)){if(f=g&-g,f===A.callbackPriority)return f;switch(b!==null&&Ze(b),rs(g)){case 2:case 8:g=dt;break;case 32:g=_t;break;case 268435456:g=Rt;break;default:g=_t}return b=NI.bind(null,A),g=Me(g,b),A.callbackPriority=f,A.callbackNode=g,f}return b!==null&&b!==null&&Ze(b),A.callbackPriority=2,A.callbackNode=null,2}function NI(A,f){if(pi!==0&&pi!==5)return A.callbackNode=null,A.callbackPriority=0,null;var g=A.callbackNode;if(j1()&&A.callbackNode!==g)return null;var b=Er;return b=rn(A,A===hs?b:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),b===0?null:(uI(A,b,f),TI(A,Re()),A.callbackNode!=null&&A.callbackNode===g?NI.bind(null,A):null)}function BI(A,f){if(j1())return null;uI(A,f,!0)}function eq(){uq(function(){(Yr&6)!==0?Me(Je,ZG):SI()})}function UE(){return vh===0&&(vh=xr()),vh}function kI(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:Wo(""+A)}function II(A,f){var g=f.ownerDocument.createElement("input");return g.name=f.name,g.value=f.value,A.id&&g.setAttribute("form",A.id),f.parentNode.insertBefore(g,f),A=new FormData(A),g.parentNode.removeChild(g),A}function tq(A,f,g,b,M){if(f==="submit"&&g&&g.stateNode===M){var z=kI((M[ur]||null).action),le=b.submitter;le&&(f=(f=le[ur]||null)?kI(f.formAction):le.getAttribute("formAction"),f!==null&&(z=f,le=null));var ye=new Nl("action","action",null,b,M);A.push({event:ye,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(vh!==0){var Le=le?II(M,le):new FormData(M);Hl(g,{pending:!0,data:Le,method:M.method,action:z},null,Le)}}else typeof z=="function"&&(ye.preventDefault(),Le=le?II(M,le):new FormData(M),Hl(g,{pending:!0,data:Le,method:M.method,action:z},z,Le))},currentTarget:M}]})}}for(var ME=0;ME<xA.length;ME++){var PE=xA[ME],nq=PE.toLowerCase(),rq=PE[0].toUpperCase()+PE.slice(1);_s(nq,"on"+rq)}_s(vd,"onAnimationEnd"),_s(Au,"onAnimationIteration"),_s(du,"onAnimationStart"),_s("dblclick","onDoubleClick"),_s("focusin","onFocus"),_s("focusout","onBlur"),_s(fu,"onTransitionRun"),_s(gA,"onTransitionStart"),_s(yd,"onTransitionCancel"),_s(hu,"onTransitionEnd"),Dt("onMouseEnter",["mouseout","mouseover"]),Dt("onMouseLeave",["mouseout","mouseover"]),Dt("onPointerEnter",["pointerout","pointerover"]),Dt("onPointerLeave",["pointerout","pointerover"]),Et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Et("onBeforeInput",["compositionend","keypress","textInput","paste"]),Et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sq=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gg));function FI(A,f){f=(f&4)!==0;for(var g=0;g<A.length;g++){var b=A[g],M=b.event;b=b.listeners;e:{var z=void 0;if(f)for(var le=b.length-1;0<=le;le--){var ye=b[le],Le=ye.instance,it=ye.currentTarget;if(ye=ye.listener,Le!==z&&M.isPropagationStopped())break e;z=ye,M.currentTarget=it;try{z(M)}catch(xt){B1(xt)}M.currentTarget=null,z=Le}else for(le=0;le<b.length;le++){if(ye=b[le],Le=ye.instance,it=ye.currentTarget,ye=ye.listener,Le!==z&&M.isPropagationStopped())break e;z=ye,M.currentTarget=it;try{z(M)}catch(xt){B1(xt)}M.currentTarget=null,z=Le}}}}function dr(A,f){var g=f[Kr];g===void 0&&(g=f[Kr]=new Set);var b=A+"__bubble";g.has(b)||(DI(f,A,2,!1),g.add(b))}function OE(A,f,g){var b=0;f&&(b|=4),DI(g,A,b,f)}var V1="_reactListening"+Math.random().toString(36).slice(2);function jE(A){if(!A[V1]){A[V1]=!0,tt.forEach(function(g){g!=="selectionchange"&&(sq.has(g)||OE(g,!1,A),OE(g,!0,A))});var f=A.nodeType===9?A:A.ownerDocument;f===null||f[V1]||(f[V1]=!0,OE("selectionchange",!1,f))}}function DI(A,f,g,b){switch(r3(f)){case 2:var M=Iq;break;case 8:M=Fq;break;default:M=e_}g=M.bind(null,f,g,A),M=void 0,!Ai||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(M=!0),b?M!==void 0?A.addEventListener(f,g,{capture:!0,passive:M}):A.addEventListener(f,g,!0):M!==void 0?A.addEventListener(f,g,{passive:M}):A.addEventListener(f,g,!1)}function QE(A,f,g,b,M){var z=b;if((f&1)===0&&(f&2)===0&&b!==null)e:for(;;){if(b===null)return;var le=b.tag;if(le===3||le===4){var ye=b.stateNode.containerInfo;if(ye===M)break;if(le===4)for(le=b.return;le!==null;){var Le=le.tag;if((Le===3||Le===4)&&le.stateNode.containerInfo===M)return;le=le.return}for(;ye!==null;){if(le=Te(ye),le===null)return;if(Le=le.tag,Le===5||Le===6||Le===26||Le===27){b=z=le;continue e}ye=ye.parentNode}}b=b.return}hd(function(){var it=z,xt=$r(g),St=[];e:{var lt=yc.get(A);if(lt!==void 0){var ct=Nl,Un=A;switch(A){case"keypress":if(Ii(g)===0)break e;case"keydown":case"keyup":ct=Zo;break;case"focusin":Un="focus",ct=kl;break;case"focusout":Un="blur",ct=kl;break;case"beforeblur":case"afterblur":ct=kl;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ct=Vs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ct=Bl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ct=au;break;case vd:case Au:case du:ct=nu;break;case hu:ct=Ae;break;case"scroll":case"scrollend":ct=AA;break;case"wheel":ct=Pe;break;case"copy":case"cut":case"paste":ct=ru;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ct=xc;break;case"toggle":case"beforetoggle":ct=At}var Tn=(f&4)!==0,ls=!Tn&&(A==="scroll"||A==="scrollend"),We=Tn?lt!==null?lt+"Capture":null:lt;Tn=[];for(var He=it,nt;He!==null;){var wt=He;if(nt=wt.stateNode,wt=wt.tag,wt!==5&&wt!==26&&wt!==27||nt===null||We===null||(wt=$a(He,We),wt!=null&&Tn.push(xg(He,wt,nt))),ls)break;He=He.return}0<Tn.length&&(lt=new ct(lt,Un,null,g,xt),St.push({event:lt,listeners:Tn}))}}if((f&7)===0){e:{if(lt=A==="mouseover"||A==="pointerover",ct=A==="mouseout"||A==="pointerout",lt&&g!==bo&&(Un=g.relatedTarget||g.fromElement)&&(Te(Un)||Un[Mr]))break e;if((ct||lt)&&(lt=xt.window===xt?xt:(lt=xt.ownerDocument)?lt.defaultView||lt.parentWindow:window,ct?(Un=g.relatedTarget||g.toElement,ct=it,Un=Un?Te(Un):null,Un!==null&&(ls=a(Un),Tn=Un.tag,Un!==ls||Tn!==5&&Tn!==27&&Tn!==6)&&(Un=null)):(ct=null,Un=it),ct!==Un)){if(Tn=Vs,wt="onMouseLeave",We="onMouseEnter",He="mouse",(A==="pointerout"||A==="pointerover")&&(Tn=xc,wt="onPointerLeave",We="onPointerEnter",He="pointer"),ls=ct==null?lt:Ye(ct),nt=Un==null?lt:Ye(Un),lt=new Tn(wt,He+"leave",ct,g,xt),lt.target=ls,lt.relatedTarget=nt,wt=null,Te(xt)===it&&(Tn=new Tn(We,He+"enter",Un,g,xt),Tn.target=nt,Tn.relatedTarget=ls,wt=Tn),ls=wt,ct&&Un)t:{for(Tn=ct,We=Un,He=0,nt=Tn;nt;nt=W0(nt))He++;for(nt=0,wt=We;wt;wt=W0(wt))nt++;for(;0<He-nt;)Tn=W0(Tn),He--;for(;0<nt-He;)We=W0(We),nt--;for(;He--;){if(Tn===We||We!==null&&Tn===We.alternate)break t;Tn=W0(Tn),We=W0(We)}Tn=null}else Tn=null;ct!==null&&RI(St,lt,ct,Tn,!1),Un!==null&&ls!==null&&RI(St,ls,Un,Tn,!0)}}e:{if(lt=it?Ye(it):window,ct=lt.nodeName&&lt.nodeName.toLowerCase(),ct==="select"||ct==="input"&&lt.type==="file")var ln=gd;else if(Or(lt))if(fA)ln=E0;else{ln=zp;var or=Di}else ct=lt.nodeName,!ct||ct.toLowerCase()!=="input"||lt.type!=="checkbox"&&lt.type!=="radio"?it&&cA(it.elementType)&&(ln=gd):ln=Jf;if(ln&&(ln=ln(A,it))){No(St,ln,g,xt);break e}or&&or(A,lt,it),A==="focusout"&&it&&lt.type==="number"&&it.memoizedProps.value!=null&&_l(lt,"number",lt.value)}switch(or=it?Ye(it):window,A){case"focusin":(Or(or)||or.contentEditable==="true")&&(Ri=or,el=it,Ll=null);break;case"focusout":Ll=el=Ri=null;break;case"mousedown":tl=!0;break;case"contextmenu":case"mouseup":case"dragend":tl=!1,Es(St,g,xt);break;case"selectionchange":if(uu)break;case"keydown":case"keyup":Es(St,g,xt)}var fn;if(zt)e:{switch(A){case"compositionstart":var Nn="onCompositionStart";break e;case"compositionend":Nn="onCompositionEnd";break e;case"compositionupdate":Nn="onCompositionUpdate";break e}Nn=void 0}else Sn?at(A,g)&&(Nn="onCompositionEnd"):A==="keydown"&&g.keyCode===229&&(Nn="onCompositionStart");Nn&&(oe&&g.locale!=="ko"&&(Sn||Nn!=="onCompositionStart"?Nn==="onCompositionEnd"&&Sn&&(fn=uA()):(ki=xt,Tl="value"in ki?ki.value:ki.textContent,Sn=!0)),or=z1(it,Nn),0<or.length&&(Nn=new mc(Nn,A,null,g,xt),St.push({event:Nn,listeners:or}),fn?Nn.data=fn:(fn=kt(g),fn!==null&&(Nn.data=fn)))),(fn=ee?ir(A,g):Pn(A,g))&&(Nn=z1(it,"onBeforeInput"),0<Nn.length&&(or=new mc("onBeforeInput","beforeinput",null,g,xt),St.push({event:or,listeners:Nn}),or.data=fn)),tq(St,A,it,g,xt)}FI(St,f)})}function xg(A,f,g){return{instance:A,listener:f,currentTarget:g}}function z1(A,f){for(var g=f+"Capture",b=[];A!==null;){var M=A,z=M.stateNode;if(M=M.tag,M!==5&&M!==26&&M!==27||z===null||(M=$a(A,g),M!=null&&b.unshift(xg(A,M,z)),M=$a(A,f),M!=null&&b.push(xg(A,M,z))),A.tag===3)return b;A=A.return}return[]}function W0(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function RI(A,f,g,b,M){for(var z=f._reactName,le=[];g!==null&&g!==b;){var ye=g,Le=ye.alternate,it=ye.stateNode;if(ye=ye.tag,Le!==null&&Le===b)break;ye!==5&&ye!==26&&ye!==27||it===null||(Le=it,M?(it=$a(g,z),it!=null&&le.unshift(xg(g,it,Le))):M||(it=$a(g,z),it!=null&&le.push(xg(g,it,Le)))),g=g.return}le.length!==0&&A.push({event:f,listeners:le})}var aq=/\r\n?/g,iq=/\u0000|\uFFFD/g;function LI(A){return(typeof A=="string"?A:""+A).replace(aq,`
`).replace(iq,"")}function UI(A,f){return f=LI(f),LI(A)===f}function G1(){}function os(A,f,g,b,M,z){switch(g){case"children":typeof b=="string"?f==="body"||f==="textarea"&&b===""||Ni(A,b):(typeof b=="number"||typeof b=="bigint")&&f!=="body"&&Ni(A,""+b);break;case"className":$n(A,"class",b);break;case"tabIndex":$n(A,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":$n(A,g,b);break;case"style":lA(A,b,z);break;case"data":if(f!=="object"){$n(A,"data",b);break}case"src":case"href":if(b===""&&(f!=="a"||g!=="href")){A.removeAttribute(g);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){A.removeAttribute(g);break}b=Wo(""+b),A.setAttribute(g,b);break;case"action":case"formAction":if(typeof b=="function"){A.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof z=="function"&&(g==="formAction"?(f!=="input"&&os(A,f,"name",M.name,M,null),os(A,f,"formEncType",M.formEncType,M,null),os(A,f,"formMethod",M.formMethod,M,null),os(A,f,"formTarget",M.formTarget,M,null)):(os(A,f,"encType",M.encType,M,null),os(A,f,"method",M.method,M,null),os(A,f,"target",M.target,M,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){A.removeAttribute(g);break}b=Wo(""+b),A.setAttribute(g,b);break;case"onClick":b!=null&&(A.onclick=G1);break;case"onScroll":b!=null&&dr("scroll",A);break;case"onScrollEnd":b!=null&&dr("scrollend",A);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(g=b.__html,g!=null){if(M.children!=null)throw Error(r(60));A.innerHTML=g}}break;case"multiple":A.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":A.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){A.removeAttribute("xlink:href");break}g=Wo(""+b),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?A.setAttribute(g,""+b):A.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?A.setAttribute(g,""):A.removeAttribute(g);break;case"capture":case"download":b===!0?A.setAttribute(g,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?A.setAttribute(g,b):A.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?A.setAttribute(g,b):A.removeAttribute(g);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?A.removeAttribute(g):A.setAttribute(g,b);break;case"popover":dr("beforetoggle",A),dr("toggle",A),Kn(A,"popover",b);break;case"xlinkActuate":Jn(A,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":Jn(A,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":Jn(A,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":Jn(A,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":Jn(A,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":Jn(A,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":Jn(A,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":Jn(A,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":Jn(A,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":Kn(A,"is",b);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=$o.get(g)||g,Kn(A,g,b))}}function HE(A,f,g,b,M,z){switch(g){case"style":lA(A,b,z);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(g=b.__html,g!=null){if(M.children!=null)throw Error(r(60));A.innerHTML=g}}break;case"children":typeof b=="string"?Ni(A,b):(typeof b=="number"||typeof b=="bigint")&&Ni(A,""+b);break;case"onScroll":b!=null&&dr("scroll",A);break;case"onScrollEnd":b!=null&&dr("scrollend",A);break;case"onClick":b!=null&&(A.onclick=G1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!st.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(M=g.endsWith("Capture"),f=g.slice(2,M?g.length-7:void 0),z=A[ur]||null,z=z!=null?z[g]:null,typeof z=="function"&&A.removeEventListener(f,z,M),typeof b=="function")){typeof z!="function"&&z!==null&&(g in A?A[g]=null:A.hasAttribute(g)&&A.removeAttribute(g)),A.addEventListener(f,b,M);break e}g in A?A[g]=b:b===!0?A.setAttribute(g,""):Kn(A,g,b)}}}function gi(A,f,g){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":dr("error",A),dr("load",A);var b=!1,M=!1,z;for(z in g)if(g.hasOwnProperty(z)){var le=g[z];if(le!=null)switch(z){case"src":b=!0;break;case"srcSet":M=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:os(A,f,z,le,g,null)}}M&&os(A,f,"srcSet",g.srcSet,g,null),b&&os(A,f,"src",g.src,g,null);return;case"input":dr("invalid",A);var ye=z=le=M=null,Le=null,it=null;for(b in g)if(g.hasOwnProperty(b)){var xt=g[b];if(xt!=null)switch(b){case"name":M=xt;break;case"type":le=xt;break;case"checked":Le=xt;break;case"defaultChecked":it=xt;break;case"value":z=xt;break;case"defaultValue":ye=xt;break;case"children":case"dangerouslySetInnerHTML":if(xt!=null)throw Error(r(137,f));break;default:os(A,f,b,xt,g,null)}}El(A,z,ye,Le,it,le,M,!1),Cl(A);return;case"select":dr("invalid",A),b=le=z=null;for(M in g)if(g.hasOwnProperty(M)&&(ye=g[M],ye!=null))switch(M){case"value":z=ye;break;case"defaultValue":le=ye;break;case"multiple":b=ye;default:os(A,f,M,ye,g,null)}f=z,g=le,A.multiple=!!b,f!=null?wo(A,!!b,f,!1):g!=null&&wo(A,!!b,g,!0);return;case"textarea":dr("invalid",A),z=M=b=null;for(le in g)if(g.hasOwnProperty(le)&&(ye=g[le],ye!=null))switch(le){case"value":b=ye;break;case"defaultValue":M=ye;break;case"children":z=ye;break;case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(91));break;default:os(A,f,le,ye,g,null)}Sl(A,b,M,z),Cl(A);return;case"option":for(Le in g)if(g.hasOwnProperty(Le)&&(b=g[Le],b!=null))switch(Le){case"selected":A.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:os(A,f,Le,b,g,null)}return;case"dialog":dr("beforetoggle",A),dr("toggle",A),dr("cancel",A),dr("close",A);break;case"iframe":case"object":dr("load",A);break;case"video":case"audio":for(b=0;b<gg.length;b++)dr(gg[b],A);break;case"image":dr("error",A),dr("load",A);break;case"details":dr("toggle",A);break;case"embed":case"source":case"link":dr("error",A),dr("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(it in g)if(g.hasOwnProperty(it)&&(b=g[it],b!=null))switch(it){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:os(A,f,it,b,g,null)}return;default:if(cA(f)){for(xt in g)g.hasOwnProperty(xt)&&(b=g[xt],b!==void 0&&HE(A,f,xt,b,g,void 0));return}}for(ye in g)g.hasOwnProperty(ye)&&(b=g[ye],b!=null&&os(A,f,ye,b,g,null))}function oq(A,f,g,b){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var M=null,z=null,le=null,ye=null,Le=null,it=null,xt=null;for(ct in g){var St=g[ct];if(g.hasOwnProperty(ct)&&St!=null)switch(ct){case"checked":break;case"value":break;case"defaultValue":Le=St;default:b.hasOwnProperty(ct)||os(A,f,ct,null,b,St)}}for(var lt in b){var ct=b[lt];if(St=g[lt],b.hasOwnProperty(lt)&&(ct!=null||St!=null))switch(lt){case"type":z=ct;break;case"name":M=ct;break;case"checked":it=ct;break;case"defaultChecked":xt=ct;break;case"value":le=ct;break;case"defaultValue":ye=ct;break;case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(r(137,f));break;default:ct!==St&&os(A,f,lt,ct,b,St)}}Oa(A,le,ye,Le,it,xt,z,M);return;case"select":ct=le=ye=lt=null;for(z in g)if(Le=g[z],g.hasOwnProperty(z)&&Le!=null)switch(z){case"value":break;case"multiple":ct=Le;default:b.hasOwnProperty(z)||os(A,f,z,null,b,Le)}for(M in b)if(z=b[M],Le=g[M],b.hasOwnProperty(M)&&(z!=null||Le!=null))switch(M){case"value":lt=z;break;case"defaultValue":ye=z;break;case"multiple":le=z;default:z!==Le&&os(A,f,M,z,b,Le)}f=ye,g=le,b=ct,lt!=null?wo(A,!!g,lt,!1):!!b!=!!g&&(f!=null?wo(A,!!g,f,!0):wo(A,!!g,g?[]:"",!1));return;case"textarea":ct=lt=null;for(ye in g)if(M=g[ye],g.hasOwnProperty(ye)&&M!=null&&!b.hasOwnProperty(ye))switch(ye){case"value":break;case"children":break;default:os(A,f,ye,null,b,M)}for(le in b)if(M=b[le],z=g[le],b.hasOwnProperty(le)&&(M!=null||z!=null))switch(le){case"value":lt=M;break;case"defaultValue":ct=M;break;case"children":break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(91));break;default:M!==z&&os(A,f,le,M,b,z)}kr(A,lt,ct);return;case"option":for(var Un in g)if(lt=g[Un],g.hasOwnProperty(Un)&&lt!=null&&!b.hasOwnProperty(Un))switch(Un){case"selected":A.selected=!1;break;default:os(A,f,Un,null,b,lt)}for(Le in b)if(lt=b[Le],ct=g[Le],b.hasOwnProperty(Le)&&lt!==ct&&(lt!=null||ct!=null))switch(Le){case"selected":A.selected=lt&&typeof lt!="function"&&typeof lt!="symbol";break;default:os(A,f,Le,lt,b,ct)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tn in g)lt=g[Tn],g.hasOwnProperty(Tn)&&lt!=null&&!b.hasOwnProperty(Tn)&&os(A,f,Tn,null,b,lt);for(it in b)if(lt=b[it],ct=g[it],b.hasOwnProperty(it)&&lt!==ct&&(lt!=null||ct!=null))switch(it){case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(r(137,f));break;default:os(A,f,it,lt,b,ct)}return;default:if(cA(f)){for(var ls in g)lt=g[ls],g.hasOwnProperty(ls)&&lt!==void 0&&!b.hasOwnProperty(ls)&&HE(A,f,ls,void 0,b,lt);for(xt in b)lt=b[xt],ct=g[xt],!b.hasOwnProperty(xt)||lt===ct||lt===void 0&&ct===void 0||HE(A,f,xt,lt,b,ct);return}}for(var We in g)lt=g[We],g.hasOwnProperty(We)&&lt!=null&&!b.hasOwnProperty(We)&&os(A,f,We,null,b,lt);for(St in b)lt=b[St],ct=g[St],!b.hasOwnProperty(St)||lt===ct||lt==null&&ct==null||os(A,f,St,lt,b,ct)}var VE=null,zE=null;function q1(A){return A.nodeType===9?A:A.ownerDocument}function MI(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function PI(A,f){if(A===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&f==="foreignObject"?0:A}function GE(A,f){return A==="textarea"||A==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var qE=null;function lq(){var A=window.event;return A&&A.type==="popstate"?A===qE?!1:(qE=A,!0):(qE=null,!1)}var OI=typeof setTimeout=="function"?setTimeout:void 0,cq=typeof clearTimeout=="function"?clearTimeout:void 0,jI=typeof Promise=="function"?Promise:void 0,uq=typeof queueMicrotask=="function"?queueMicrotask:typeof jI<"u"?function(A){return jI.resolve(null).then(A).catch(Aq)}:OI;function Aq(A){setTimeout(function(){throw A})}function jd(A){return A==="head"}function QI(A,f){var g=f,b=0,M=0;do{var z=g.nextSibling;if(A.removeChild(g),z&&z.nodeType===8)if(g=z.data,g==="/$"){if(0<b&&8>b){g=b;var le=A.ownerDocument;if(g&1&&vg(le.documentElement),g&2&&vg(le.body),g&4)for(g=le.head,vg(g),le=g.firstChild;le;){var ye=le.nextSibling,Le=le.nodeName;le[Ee]||Le==="SCRIPT"||Le==="STYLE"||Le==="LINK"&&le.rel.toLowerCase()==="stylesheet"||g.removeChild(le),le=ye}}if(M===0){A.removeChild(z),Tg(f);return}M--}else g==="$"||g==="$?"||g==="$!"?M++:b=g.charCodeAt(0)-48;else b=0;g=z}while(g);Tg(f)}function KE(A){var f=A.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var g=f;switch(f=f.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":KE(g),_e(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}A.removeChild(g)}}function dq(A,f,g,b){for(;A.nodeType===1;){var M=g;if(A.nodeName.toLowerCase()!==f.toLowerCase()){if(!b&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(b){if(!A[Ee])switch(f){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(z=A.getAttribute("rel"),z==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(z!==M.rel||A.getAttribute("href")!==(M.href==null||M.href===""?null:M.href)||A.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin)||A.getAttribute("title")!==(M.title==null?null:M.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(z=A.getAttribute("src"),(z!==(M.src==null?null:M.src)||A.getAttribute("type")!==(M.type==null?null:M.type)||A.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin))&&z&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(f==="input"&&A.type==="hidden"){var z=M.name==null?null:""+M.name;if(M.type==="hidden"&&A.getAttribute("name")===z)return A}else return A;if(A=Rc(A.nextSibling),A===null)break}return null}function fq(A,f,g){if(f==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!g||(A=Rc(A.nextSibling),A===null))return null;return A}function $E(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function hq(A,f){var g=A.ownerDocument;if(A.data!=="$?"||g.readyState==="complete")f();else{var b=function(){f(),g.removeEventListener("DOMContentLoaded",b)};g.addEventListener("DOMContentLoaded",b),A._reactRetry=b}}function Rc(A){for(;A!=null;A=A.nextSibling){var f=A.nodeType;if(f===1||f===3)break;if(f===8){if(f=A.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return A}var WE=null;function HI(A){A=A.previousSibling;for(var f=0;A;){if(A.nodeType===8){var g=A.data;if(g==="$"||g==="$!"||g==="$?"){if(f===0)return A;f--}else g==="/$"&&f++}A=A.previousSibling}return null}function VI(A,f,g){switch(f=q1(g),A){case"html":if(A=f.documentElement,!A)throw Error(r(452));return A;case"head":if(A=f.head,!A)throw Error(r(453));return A;case"body":if(A=f.body,!A)throw Error(r(454));return A;default:throw Error(r(451))}}function vg(A){for(var f=A.attributes;f.length;)A.removeAttributeNode(f[0]);_e(A)}var Gl=new Map,zI=new Set;function K1(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var LA=ne.d;ne.d={f:mq,r:pq,D:gq,C:xq,L:vq,m:yq,X:bq,S:wq,M:Cq};function mq(){var A=LA.f(),f=P1();return A||f}function pq(A){var f=ke(A);f!==null&&f.tag===5&&f.type==="form"?hh(f):LA.r(A)}var Y0=typeof document>"u"?null:document;function GI(A,f,g){var b=Y0;if(b&&typeof f=="string"&&f){var M=yr(f);M='link[rel="'+A+'"][href="'+M+'"]',typeof g=="string"&&(M+='[crossorigin="'+g+'"]'),zI.has(M)||(zI.add(M),A={rel:A,crossOrigin:g,href:f},b.querySelector(M)===null&&(f=b.createElement("link"),gi(f,"link",A),qe(f),b.head.appendChild(f)))}}function gq(A){LA.D(A),GI("dns-prefetch",A,null)}function xq(A,f){LA.C(A,f),GI("preconnect",A,f)}function vq(A,f,g){LA.L(A,f,g);var b=Y0;if(b&&A&&f){var M='link[rel="preload"][as="'+yr(f)+'"]';f==="image"&&g&&g.imageSrcSet?(M+='[imagesrcset="'+yr(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(M+='[imagesizes="'+yr(g.imageSizes)+'"]')):M+='[href="'+yr(A)+'"]';var z=M;switch(f){case"style":z=X0(A);break;case"script":z=J0(A)}Gl.has(z)||(A=d({rel:"preload",href:f==="image"&&g&&g.imageSrcSet?void 0:A,as:f},g),Gl.set(z,A),b.querySelector(M)!==null||f==="style"&&b.querySelector(yg(z))||f==="script"&&b.querySelector(wg(z))||(f=b.createElement("link"),gi(f,"link",A),qe(f),b.head.appendChild(f)))}}function yq(A,f){LA.m(A,f);var g=Y0;if(g&&A){var b=f&&typeof f.as=="string"?f.as:"script",M='link[rel="modulepreload"][as="'+yr(b)+'"][href="'+yr(A)+'"]',z=M;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":z=J0(A)}if(!Gl.has(z)&&(A=d({rel:"modulepreload",href:A},f),Gl.set(z,A),g.querySelector(M)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(wg(z)))return}b=g.createElement("link"),gi(b,"link",A),qe(b),g.head.appendChild(b)}}}function wq(A,f,g){LA.S(A,f,g);var b=Y0;if(b&&A){var M=ot(b).hoistableStyles,z=X0(A);f=f||"default";var le=M.get(z);if(!le){var ye={loading:0,preload:null};if(le=b.querySelector(yg(z)))ye.loading=5;else{A=d({rel:"stylesheet",href:A,"data-precedence":f},g),(g=Gl.get(z))&&YE(A,g);var Le=le=b.createElement("link");qe(Le),gi(Le,"link",A),Le._p=new Promise(function(it,xt){Le.onload=it,Le.onerror=xt}),Le.addEventListener("load",function(){ye.loading|=1}),Le.addEventListener("error",function(){ye.loading|=2}),ye.loading|=4,$1(le,f,b)}le={type:"stylesheet",instance:le,count:1,state:ye},M.set(z,le)}}}function bq(A,f){LA.X(A,f);var g=Y0;if(g&&A){var b=ot(g).hoistableScripts,M=J0(A),z=b.get(M);z||(z=g.querySelector(wg(M)),z||(A=d({src:A,async:!0},f),(f=Gl.get(M))&&XE(A,f),z=g.createElement("script"),qe(z),gi(z,"link",A),g.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},b.set(M,z))}}function Cq(A,f){LA.M(A,f);var g=Y0;if(g&&A){var b=ot(g).hoistableScripts,M=J0(A),z=b.get(M);z||(z=g.querySelector(wg(M)),z||(A=d({src:A,async:!0,type:"module"},f),(f=Gl.get(M))&&XE(A,f),z=g.createElement("script"),qe(z),gi(z,"link",A),g.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},b.set(M,z))}}function qI(A,f,g,b){var M=(M=se.current)?K1(M):null;if(!M)throw Error(r(446));switch(A){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(f=X0(g.href),g=ot(M).hoistableStyles,b=g.get(f),b||(b={type:"style",instance:null,count:0,state:null},g.set(f,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){A=X0(g.href);var z=ot(M).hoistableStyles,le=z.get(A);if(le||(M=M.ownerDocument||M,le={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},z.set(A,le),(z=M.querySelector(yg(A)))&&!z._p&&(le.instance=z,le.state.loading=5),Gl.has(A)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Gl.set(A,g),z||Eq(M,A,g,le.state))),f&&b===null)throw Error(r(528,""));return le}if(f&&b!==null)throw Error(r(529,""));return null;case"script":return f=g.async,g=g.src,typeof g=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=J0(g),g=ot(M).hoistableScripts,b=g.get(f),b||(b={type:"script",instance:null,count:0,state:null},g.set(f,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,A))}}function X0(A){return'href="'+yr(A)+'"'}function yg(A){return'link[rel="stylesheet"]['+A+"]"}function KI(A){return d({},A,{"data-precedence":A.precedence,precedence:null})}function Eq(A,f,g,b){A.querySelector('link[rel="preload"][as="style"]['+f+"]")?b.loading=1:(f=A.createElement("link"),b.preload=f,f.addEventListener("load",function(){return b.loading|=1}),f.addEventListener("error",function(){return b.loading|=2}),gi(f,"link",g),qe(f),A.head.appendChild(f))}function J0(A){return'[src="'+yr(A)+'"]'}function wg(A){return"script[async]"+A}function $I(A,f,g){if(f.count++,f.instance===null)switch(f.type){case"style":var b=A.querySelector('style[data-href~="'+yr(g.href)+'"]');if(b)return f.instance=b,qe(b),b;var M=d({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return b=(A.ownerDocument||A).createElement("style"),qe(b),gi(b,"style",M),$1(b,g.precedence,A),f.instance=b;case"stylesheet":M=X0(g.href);var z=A.querySelector(yg(M));if(z)return f.state.loading|=4,f.instance=z,qe(z),z;b=KI(g),(M=Gl.get(M))&&YE(b,M),z=(A.ownerDocument||A).createElement("link"),qe(z);var le=z;return le._p=new Promise(function(ye,Le){le.onload=ye,le.onerror=Le}),gi(z,"link",b),f.state.loading|=4,$1(z,g.precedence,A),f.instance=z;case"script":return z=J0(g.src),(M=A.querySelector(wg(z)))?(f.instance=M,qe(M),M):(b=g,(M=Gl.get(z))&&(b=d({},g),XE(b,M)),A=A.ownerDocument||A,M=A.createElement("script"),qe(M),gi(M,"link",b),A.head.appendChild(M),f.instance=M);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(b=f.instance,f.state.loading|=4,$1(b,g.precedence,A));return f.instance}function $1(A,f,g){for(var b=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),M=b.length?b[b.length-1]:null,z=M,le=0;le<b.length;le++){var ye=b[le];if(ye.dataset.precedence===f)z=ye;else if(z!==M)break}z?z.parentNode.insertBefore(A,z.nextSibling):(f=g.nodeType===9?g.head:g,f.insertBefore(A,f.firstChild))}function YE(A,f){A.crossOrigin==null&&(A.crossOrigin=f.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=f.referrerPolicy),A.title==null&&(A.title=f.title)}function XE(A,f){A.crossOrigin==null&&(A.crossOrigin=f.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=f.referrerPolicy),A.integrity==null&&(A.integrity=f.integrity)}var W1=null;function WI(A,f,g){if(W1===null){var b=new Map,M=W1=new Map;M.set(g,b)}else M=W1,b=M.get(g),b||(b=new Map,M.set(g,b));if(b.has(A))return b;for(b.set(A,null),g=g.getElementsByTagName(A),M=0;M<g.length;M++){var z=g[M];if(!(z[Ee]||z[vr]||A==="link"&&z.getAttribute("rel")==="stylesheet")&&z.namespaceURI!=="http://www.w3.org/2000/svg"){var le=z.getAttribute(f)||"";le=A+le;var ye=b.get(le);ye?ye.push(z):b.set(le,[z])}}return b}function YI(A,f,g){A=A.ownerDocument||A,A.head.insertBefore(g,f==="title"?A.querySelector("head > title"):null)}function _q(A,f,g){if(g===1||f.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return A=f.disabled,typeof f.precedence=="string"&&A==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function XI(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var bg=null;function Sq(){}function Tq(A,f,g){if(bg===null)throw Error(r(475));var b=bg;if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var M=X0(g.href),z=A.querySelector(yg(M));if(z){A=z._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(b.count++,b=Y1.bind(b),A.then(b,b)),f.state.loading|=4,f.instance=z,qe(z);return}z=A.ownerDocument||A,g=KI(g),(M=Gl.get(M))&&YE(g,M),z=z.createElement("link"),qe(z);var le=z;le._p=new Promise(function(ye,Le){le.onload=ye,le.onerror=Le}),gi(z,"link",g),f.instance=z}b.stylesheets===null&&(b.stylesheets=new Map),b.stylesheets.set(f,A),(A=f.state.preload)&&(f.state.loading&3)===0&&(b.count++,f=Y1.bind(b),A.addEventListener("load",f),A.addEventListener("error",f))}}function Nq(){if(bg===null)throw Error(r(475));var A=bg;return A.stylesheets&&A.count===0&&JE(A,A.stylesheets),0<A.count?function(f){var g=setTimeout(function(){if(A.stylesheets&&JE(A,A.stylesheets),A.unsuspend){var b=A.unsuspend;A.unsuspend=null,b()}},6e4);return A.unsuspend=f,function(){A.unsuspend=null,clearTimeout(g)}}:null}function Y1(){if(this.count--,this.count===0){if(this.stylesheets)JE(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var X1=null;function JE(A,f){A.stylesheets=null,A.unsuspend!==null&&(A.count++,X1=new Map,f.forEach(Bq,A),X1=null,Y1.call(A))}function Bq(A,f){if(!(f.state.loading&4)){var g=X1.get(A);if(g)var b=g.get(null);else{g=new Map,X1.set(A,g);for(var M=A.querySelectorAll("link[data-precedence],style[data-precedence]"),z=0;z<M.length;z++){var le=M[z];(le.nodeName==="LINK"||le.getAttribute("media")!=="not all")&&(g.set(le.dataset.precedence,le),b=le)}b&&g.set(null,b)}M=f.instance,le=M.getAttribute("data-precedence"),z=g.get(le)||b,z===b&&g.set(null,M),g.set(le,M),this.count++,b=Y1.bind(this),M.addEventListener("load",b),M.addEventListener("error",b),z?z.parentNode.insertBefore(M,z.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(M,A.firstChild)),f.state.loading|=4}}var Cg={$$typeof:I,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function kq(A,f,g,b,M,z,le,ye){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Sr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sr(0),this.hiddenUpdates=Sr(null),this.identifierPrefix=b,this.onUncaughtError=M,this.onCaughtError=z,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ye,this.incompleteTransitions=new Map}function JI(A,f,g,b,M,z,le,ye,Le,it,xt,St){return A=new kq(A,f,g,le,ye,Le,it,St),f=1,z===!0&&(f|=24),z=Ja(3,null,null,f),A.current=z,z.stateNode=A,f=qp(),f.refCount++,A.pooledCache=f,f.refCount++,z.memoizedState={element:b,isDehydrated:g,cache:f},Qe(z),A}function ZI(A){return A?(A=ba,A):ba}function e3(A,f,g,b,M,z){M=ZI(M),b.context===null?b.context=M:b.pendingContext=M,b=pt(f),b.payload={element:g},z=z===void 0?null:z,z!==null&&(b.callback=z),g=Ct(A,b,f),g!==null&&(cl(g,A,f),vt(g,A,f))}function t3(A,f){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var g=A.retryLane;A.retryLane=g!==0&&g<f?g:f}}function ZE(A,f){t3(A,f),(A=A.alternate)&&t3(A,f)}function n3(A){if(A.tag===13){var f=wc(A,67108864);f!==null&&cl(f,A,67108864),ZE(A,67108864)}}var J1=!0;function Iq(A,f,g,b){var M=Y.T;Y.T=null;var z=ne.p;try{ne.p=2,e_(A,f,g,b)}finally{ne.p=z,Y.T=M}}function Fq(A,f,g,b){var M=Y.T;Y.T=null;var z=ne.p;try{ne.p=8,e_(A,f,g,b)}finally{ne.p=z,Y.T=M}}function e_(A,f,g,b){if(J1){var M=t_(b);if(M===null)QE(A,f,b,Z1,g),s3(A,b);else if(Rq(M,A,f,g,b))b.stopPropagation();else if(s3(A,b),f&4&&-1<Dq.indexOf(A)){for(;M!==null;){var z=ke(M);if(z!==null)switch(z.tag){case 3:if(z=z.stateNode,z.current.memoizedState.isDehydrated){var le=Kt(z.pendingLanes);if(le!==0){var ye=z;for(ye.pendingLanes|=2,ye.entangledLanes|=2;le;){var Le=1<<31-Ue(le);ye.entanglements[1]|=Le,le&=~Le}Nu(z),(Yr&6)===0&&(U1=Re()+500,pg(0))}}break;case 13:ye=wc(z,2),ye!==null&&cl(ye,z,2),P1(),ZE(z,2)}if(z=t_(b),z===null&&QE(A,f,b,Z1,g),z===M)break;M=z}M!==null&&b.stopPropagation()}else QE(A,f,b,null,g)}}function t_(A){return A=$r(A),n_(A)}var Z1=null;function n_(A){if(Z1=null,A=Te(A),A!==null){var f=a(A);if(f===null)A=null;else{var g=f.tag;if(g===13){if(A=i(f),A!==null)return A;A=null}else if(g===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;A=null}else f!==A&&(A=null)}}return Z1=A,null}function r3(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ze()){case Je:return 2;case dt:return 8;case _t:case ft:return 32;case Rt:return 268435456;default:return 32}default:return 32}}var r_=!1,Qd=null,Hd=null,Vd=null,Eg=new Map,_g=new Map,zd=[],Dq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function s3(A,f){switch(A){case"focusin":case"focusout":Qd=null;break;case"dragenter":case"dragleave":Hd=null;break;case"mouseover":case"mouseout":Vd=null;break;case"pointerover":case"pointerout":Eg.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":_g.delete(f.pointerId)}}function Sg(A,f,g,b,M,z){return A===null||A.nativeEvent!==z?(A={blockedOn:f,domEventName:g,eventSystemFlags:b,nativeEvent:z,targetContainers:[M]},f!==null&&(f=ke(f),f!==null&&n3(f)),A):(A.eventSystemFlags|=b,f=A.targetContainers,M!==null&&f.indexOf(M)===-1&&f.push(M),A)}function Rq(A,f,g,b,M){switch(f){case"focusin":return Qd=Sg(Qd,A,f,g,b,M),!0;case"dragenter":return Hd=Sg(Hd,A,f,g,b,M),!0;case"mouseover":return Vd=Sg(Vd,A,f,g,b,M),!0;case"pointerover":var z=M.pointerId;return Eg.set(z,Sg(Eg.get(z)||null,A,f,g,b,M)),!0;case"gotpointercapture":return z=M.pointerId,_g.set(z,Sg(_g.get(z)||null,A,f,g,b,M)),!0}return!1}function a3(A){var f=Te(A.target);if(f!==null){var g=a(f);if(g!==null){if(f=g.tag,f===13){if(f=i(g),f!==null){A.blockedOn=f,Ua(A.priority,function(){if(g.tag===13){var b=ll();b=xa(b);var M=wc(g,b);M!==null&&cl(M,g,b),ZE(g,b)}});return}}else if(f===3&&g.stateNode.current.memoizedState.isDehydrated){A.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}A.blockedOn=null}function ey(A){if(A.blockedOn!==null)return!1;for(var f=A.targetContainers;0<f.length;){var g=t_(A.nativeEvent);if(g===null){g=A.nativeEvent;var b=new g.constructor(g.type,g);bo=b,g.target.dispatchEvent(b),bo=null}else return f=ke(g),f!==null&&n3(f),A.blockedOn=g,!1;f.shift()}return!0}function i3(A,f,g){ey(A)&&g.delete(f)}function Lq(){r_=!1,Qd!==null&&ey(Qd)&&(Qd=null),Hd!==null&&ey(Hd)&&(Hd=null),Vd!==null&&ey(Vd)&&(Vd=null),Eg.forEach(i3),_g.forEach(i3)}function ty(A,f){A.blockedOn===f&&(A.blockedOn=null,r_||(r_=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Lq)))}var ny=null;function o3(A){ny!==A&&(ny=A,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ny===A&&(ny=null);for(var f=0;f<A.length;f+=3){var g=A[f],b=A[f+1],M=A[f+2];if(typeof b!="function"){if(n_(b||g)===null)continue;break}var z=ke(g);z!==null&&(A.splice(f,3),f-=3,Hl(z,{pending:!0,data:M,method:g.method,action:b},b,M))}}))}function Tg(A){function f(Le){return ty(Le,A)}Qd!==null&&ty(Qd,A),Hd!==null&&ty(Hd,A),Vd!==null&&ty(Vd,A),Eg.forEach(f),_g.forEach(f);for(var g=0;g<zd.length;g++){var b=zd[g];b.blockedOn===A&&(b.blockedOn=null)}for(;0<zd.length&&(g=zd[0],g.blockedOn===null);)a3(g),g.blockedOn===null&&zd.shift();if(g=(A.ownerDocument||A).$$reactFormReplay,g!=null)for(b=0;b<g.length;b+=3){var M=g[b],z=g[b+1],le=M[ur]||null;if(typeof z=="function")le||o3(g);else if(le){var ye=null;if(z&&z.hasAttribute("formAction")){if(M=z,le=z[ur]||null)ye=le.formAction;else if(n_(M)!==null)continue}else ye=le.action;typeof ye=="function"?g[b+1]=ye:(g.splice(b,3),b-=3),o3(g)}}}function s_(A){this._internalRoot=A}ry.prototype.render=s_.prototype.render=function(A){var f=this._internalRoot;if(f===null)throw Error(r(409));var g=f.current,b=ll();e3(g,b,A,f,null,null)},ry.prototype.unmount=s_.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var f=A.containerInfo;e3(A.current,2,null,A,null,null),P1(),f[Mr]=null}};function ry(A){this._internalRoot=A}ry.prototype.unstable_scheduleHydration=function(A){if(A){var f=ks();A={blockedOn:null,target:A,priority:f};for(var g=0;g<zd.length&&f!==0&&f<zd[g].priority;g++);zd.splice(g,0,A),g===0&&a3(A)}};var l3=e.version;if(l3!=="19.1.1")throw Error(r(527,l3,"19.1.1"));ne.findDOMNode=function(A){var f=A._reactInternals;if(f===void 0)throw typeof A.render=="function"?Error(r(188)):(A=Object.keys(A).join(","),Error(r(268,A)));return A=l(f),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var Uq={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sy.isDisabled&&sy.supportsFiber)try{Mt=sy.inject(Uq),jt=sy}catch{}}return Bg.createRoot=function(A,f){if(!s(A))throw Error(r(299));var g=!1,b="",M=Ek,z=_k,le=Sk,ye=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(M=f.onUncaughtError),f.onCaughtError!==void 0&&(z=f.onCaughtError),f.onRecoverableError!==void 0&&(le=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(ye=f.unstable_transitionCallbacks)),f=JI(A,1,!1,null,null,g,b,M,z,le,ye,null),A[Mr]=f.current,jE(A),new s_(f)},Bg.hydrateRoot=function(A,f,g){if(!s(A))throw Error(r(299));var b=!1,M="",z=Ek,le=_k,ye=Sk,Le=null,it=null;return g!=null&&(g.unstable_strictMode===!0&&(b=!0),g.identifierPrefix!==void 0&&(M=g.identifierPrefix),g.onUncaughtError!==void 0&&(z=g.onUncaughtError),g.onCaughtError!==void 0&&(le=g.onCaughtError),g.onRecoverableError!==void 0&&(ye=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(Le=g.unstable_transitionCallbacks),g.formState!==void 0&&(it=g.formState)),f=JI(A,1,!0,f,g??null,b,M,z,le,ye,Le,it),f.context=ZI(null),g=f.current,b=ll(),b=xa(b),M=pt(b),M.callback=null,Ct(g,M,b),g=b,f.current.lanes=g,qr(f,g),Nu(f),A[Mr]=f.current,jE(A),new ry(f)},Bg.version="19.1.1",Bg}var x3;function qq(){if(x3)return o_.exports;x3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),o_.exports=Gq(),o_.exports}var Kq=qq();const $q=Tb(Kq),Wq=()=>{};var v3={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H8=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Yq=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],i=t[n++],o=t[n++],l=((s&7)<<18|(a&63)<<12|(i&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const a=t[n++],i=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|i&63)}}return e.join("")},V8={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],i=s+1<t.length,o=i?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,d=a>>2,h=(a&3)<<4|o>>4;let m=(o&15)<<2|u>>6,p=u&63;l||(p=64,i||(m=64)),r.push(n[d],n[h],n[m],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(H8(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Yq(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],o=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||o==null||u==null||h==null)throw new Xq;const m=a<<2|o>>4;if(r.push(m),u!==64){const p=o<<4&240|u>>2;if(r.push(p),h!==64){const y=u<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Xq extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Jq=function(t){const e=H8(t);return V8.encodeByteArray(e,!0)},cw=function(t){return Jq(t).replace(/\./g,"")},z8=function(t){try{return V8.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zq(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eK=()=>Zq().__FIREBASE_DEFAULTS__,tK=()=>{if(typeof process>"u"||typeof v3>"u")return;const t=v3.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},nK=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&z8(t[1]);return e&&JSON.parse(e)},Nb=()=>{try{return Wq()||eK()||tK()||nK()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},G8=t=>{var e,n;return(n=(e=Nb())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},q8=t=>{const e=G8(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},K8=()=>{var t;return(t=Nb())==null?void 0:t.config},$8=t=>{var e;return(e=Nb())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rK{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xN(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sK(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[cw(JSON.stringify(n)),cw(JSON.stringify(i)),""].join(".")}const fx={};function aK(){const t={prod:[],emulator:[]};for(const e of Object.keys(fx))fx[e]?t.emulator.push(e):t.prod.push(e);return t}function iK(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let y3=!1;function vN(t,e){if(typeof window>"u"||typeof document>"u"||!A0(window.location.host)||fx[t]===e||fx[t]||y3)return;fx[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",a=aK().prod.length>0;function i(){const m=document.getElementById(r);m&&m.remove()}function o(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,p){m.setAttribute("width","24"),m.setAttribute("id",p),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{y3=!0,i()},m}function d(m,p){m.setAttribute("id",p),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function h(){const m=iK(r),p=n("text"),y=document.getElementById(p)||document.createElement("span"),x=n("learnmore"),C=document.getElementById(x)||document.createElement("a"),S=n("preprendIcon"),k=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const I=m.element;o(I),d(C,x);const F=u();l(k,S),I.append(k,y,C,F),document.body.appendChild(I)}a?(y.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oK(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ro())}function lK(){var e;const t=(e=Nb())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cK(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uK(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function AK(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dK(){const t=ro();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function fK(){return!lK()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hK(){try{return typeof indexedDB=="object"}catch{return!1}}function mK(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pK="FirebaseError";class eA extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=pK,Object.setPrototypeOf(this,eA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sv.prototype.create)}}class Sv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],i=a?gK(a,r):"Error",o=`${this.serviceName}: ${i} (${s}).`;return new eA(s,o,r)}}function gK(t,e){return t.replace(xK,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const xK=/\{\$([^}]+)}/g;function vK(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function If(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],i=e[s];if(w3(a)&&w3(i)){if(!If(a,i))return!1}else if(a!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function w3(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qg(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Kg(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function yK(t,e){const n=new wK(t,e);return n.subscribe.bind(n)}class wK{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");bK(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=A_),s.error===void 0&&(s.error=A_),s.complete===void 0&&(s.complete=A_);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bK(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function A_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(t){return t&&t._delegate?t._delegate:t}class Ff{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CK=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new rK;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_K(e))try{this.getOrInitializeService({instanceIdentifier:Ch})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Ch){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ch){return this.instances.has(e)}getOptions(e=Ch){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&i.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:EK(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ch){return this.component?this.component.multipleInstances?e:Ch:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function EK(t){return t===Ch?void 0:t}function _K(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SK{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CK(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(mr||(mr={}));const TK={debug:mr.DEBUG,verbose:mr.VERBOSE,info:mr.INFO,warn:mr.WARN,error:mr.ERROR,silent:mr.SILENT},NK=mr.INFO,BK={[mr.DEBUG]:"log",[mr.VERBOSE]:"log",[mr.INFO]:"info",[mr.WARN]:"warn",[mr.ERROR]:"error"},kK=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=BK[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let yN=class{constructor(e){this.name=e,this._logLevel=NK,this._logHandler=kK,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TK[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mr.DEBUG,...e),this._logHandler(this,mr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mr.VERBOSE,...e),this._logHandler(this,mr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mr.INFO,...e),this._logHandler(this,mr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mr.WARN,...e),this._logHandler(this,mr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mr.ERROR,...e),this._logHandler(this,mr.ERROR,...e)}};const IK=(t,e)=>e.some(n=>t instanceof n);let b3,C3;function FK(){return b3||(b3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DK(){return C3||(C3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const W8=new WeakMap,r5=new WeakMap,Y8=new WeakMap,d_=new WeakMap,wN=new WeakMap;function RK(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",i)},a=()=>{n(vf(t.result)),s()},i=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&W8.set(n,t)}).catch(()=>{}),wN.set(e,t),e}function LK(t){if(r5.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",i),t.removeEventListener("abort",i)},a=()=>{n(),s()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",i),t.addEventListener("abort",i)});r5.set(t,e)}let s5={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return r5.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Y8.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vf(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function UK(t){s5=t(s5)}function MK(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(f_(this),e,...n);return Y8.set(r,e.sort?e.sort():[e]),vf(r)}:DK().includes(t)?function(...e){return t.apply(f_(this),e),vf(W8.get(this))}:function(...e){return vf(t.apply(f_(this),e))}}function PK(t){return typeof t=="function"?MK(t):(t instanceof IDBTransaction&&LK(t),IK(t,FK())?new Proxy(t,s5):t)}function vf(t){if(t instanceof IDBRequest)return RK(t);if(d_.has(t))return d_.get(t);const e=PK(t);return e!==t&&(d_.set(t,e),wN.set(e,t)),e}const f_=t=>wN.get(t);function OK(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const i=indexedDB.open(t,e),o=vf(i);return r&&i.addEventListener("upgradeneeded",l=>{r(vf(i.result),l.oldVersion,l.newVersion,vf(i.transaction),l)}),n&&i.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{a&&l.addEventListener("close",()=>a()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const jK=["get","getKey","getAll","getAllKeys","count"],QK=["put","add","delete","clear"],h_=new Map;function E3(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(h_.get(e))return h_.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=QK.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||jK.includes(n)))return;const a=async function(i,...o){const l=this.transaction(i,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),s&&l.done]))[0]};return h_.set(e,a),a}UK(t=>({...t,get:(e,n,r)=>E3(e,n)||t.get(e,n,r),has:(e,n)=>!!E3(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HK{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VK(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function VK(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const a5="@firebase/app",_3="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=new yN("@firebase/app"),zK="@firebase/app-compat",GK="@firebase/analytics-compat",qK="@firebase/analytics",KK="@firebase/app-check-compat",$K="@firebase/app-check",WK="@firebase/auth",YK="@firebase/auth-compat",XK="@firebase/database",JK="@firebase/data-connect",ZK="@firebase/database-compat",e$="@firebase/functions",t$="@firebase/functions-compat",n$="@firebase/installations",r$="@firebase/installations-compat",s$="@firebase/messaging",a$="@firebase/messaging-compat",i$="@firebase/performance",o$="@firebase/performance-compat",l$="@firebase/remote-config",c$="@firebase/remote-config-compat",u$="@firebase/storage",A$="@firebase/storage-compat",d$="@firebase/firestore",f$="@firebase/ai",h$="@firebase/firestore-compat",m$="firebase",p$="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5="[DEFAULT]",g$={[a5]:"fire-core",[zK]:"fire-core-compat",[qK]:"fire-analytics",[GK]:"fire-analytics-compat",[$K]:"fire-app-check",[KK]:"fire-app-check-compat",[WK]:"fire-auth",[YK]:"fire-auth-compat",[XK]:"fire-rtdb",[JK]:"fire-data-connect",[ZK]:"fire-rtdb-compat",[e$]:"fire-fn",[t$]:"fire-fn-compat",[n$]:"fire-iid",[r$]:"fire-iid-compat",[s$]:"fire-fcm",[a$]:"fire-fcm-compat",[i$]:"fire-perf",[o$]:"fire-perf-compat",[l$]:"fire-rc",[c$]:"fire-rc-compat",[u$]:"fire-gcs",[A$]:"fire-gcs-compat",[d$]:"fire-fst",[h$]:"fire-fst-compat",[f$]:"fire-vertex","fire-js":"fire-js",[m$]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=new Map,x$=new Map,o5=new Map;function S3(t,e){try{t.container.addComponent(e)}catch(n){XA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Yh(t){const e=t.name;if(o5.has(e))return XA.debug(`There were multiple attempts to register component ${e}.`),!1;o5.set(e,t);for(const n of Px.values())S3(n,t);for(const n of x$.values())S3(n,t);return!0}function Bb(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function tc(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yf=new Sv("app","Firebase",v$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y${constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ff("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp=p$;function bN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:i5,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw yf.create("bad-app-name",{appName:String(s)});if(n||(n=K8()),!n)throw yf.create("no-options");const a=Px.get(s);if(a){if(If(n,a.options)&&If(r,a.config))return a;throw yf.create("duplicate-app",{appName:s})}const i=new SK(s);for(const l of o5.values())i.addComponent(l);const o=new y$(n,r,i);return Px.set(s,o),o}function CN(t=i5){const e=Px.get(t);if(!e&&t===i5&&K8())return bN();if(!e)throw yf.create("no-app",{appName:t});return e}function T3(){return Array.from(Px.values())}function Hu(t,e,n){let r=g$[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const i=[`Unable to register library "${r}" with version "${e}":`];s&&i.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&i.push("and"),a&&i.push(`version name "${e}" contains illegal characters (whitespace or "/")`),XA.warn(i.join(" "));return}Yh(new Ff(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w$="firebase-heartbeat-database",b$=1,Ox="firebase-heartbeat-store";let m_=null;function X8(){return m_||(m_=OK(w$,b$,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ox)}catch(n){console.warn(n)}}}}).catch(t=>{throw yf.create("idb-open",{originalErrorMessage:t.message})})),m_}async function C$(t){try{const n=(await X8()).transaction(Ox),r=await n.objectStore(Ox).get(J8(t));return await n.done,r}catch(e){if(e instanceof eA)XA.warn(e.message);else{const n=yf.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});XA.warn(n.message)}}}async function N3(t,e){try{const r=(await X8()).transaction(Ox,"readwrite");await r.objectStore(Ox).put(e,J8(t)),await r.done}catch(n){if(n instanceof eA)XA.warn(n.message);else{const r=yf.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});XA.warn(r.message)}}}function J8(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E$=1024,_$=30;class S${constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new N$(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=B3();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(i=>i.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>_$){const i=B$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){XA.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=B3(),{heartbeatsToSend:r,unsentEntries:s}=T$(this._heartbeatsCache.heartbeats),a=cw(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return XA.warn(n),""}}}function B3(){return new Date().toISOString().substring(0,10)}function T$(t,e=E$){const n=[];let r=t.slice();for(const s of t){const a=n.find(i=>i.agent===s.agent);if(a){if(a.dates.push(s.date),k3(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),k3(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class N${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hK()?mK().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await C$(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return N3(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return N3(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function k3(t){return cw(JSON.stringify({version:2,heartbeats:t})).length}function B$(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k$(t){Yh(new Ff("platform-logger",e=>new HK(e),"PRIVATE")),Yh(new Ff("heartbeat",e=>new S$(e),"PRIVATE")),Hu(a5,_3,t),Hu(a5,_3,"esm2020"),Hu("fire-js","")}k$("");function Z8(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const I$=Z8,eP=new Sv("auth","Firebase",Z8());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=new yN("@firebase/auth");function F$(t,...e){uw.logLevel<=mr.WARN&&uw.warn(`Auth (${Sp}): ${t}`,...e)}function y2(t,...e){uw.logLevel<=mr.ERROR&&uw.error(`Auth (${Sp}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t,...e){throw EN(t,...e)}function Vu(t,...e){return EN(t,...e)}function tP(t,e,n){const r={...I$(),[e]:n};return new Sv("auth","Firebase",r).create(e,{appName:t.name})}function wf(t){return tP(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function EN(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return eP.create(t,...e)}function Rn(t,e,...n){if(!t)throw EN(e,...n)}function jA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw y2(e),new Error(e)}function JA(t,e){t||jA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function D$(){return I3()==="http:"||I3()==="https:"}function I3(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(D$()||uK()||"connection"in navigator)?navigator.onLine:!0}function L$(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,n){this.shortDelay=e,this.longDelay=n,JA(n>e,"Short delay should be less than long delay!"),this.isMobile=oK()||AK()}get(){return R$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(t,e){JA(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M$=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],P$=new Nv(3e4,6e4);function qf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function id(t,e,n,r,s={}){return rP(t,s,async()=>{let a={},i={};r&&(e==="GET"?i=r:a={body:JSON.stringify(r)});const o=Tv({key:t.config.apiKey,...i}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...a};return cK()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&A0(t.emulatorConfig.host)&&(u.credentials="include"),nP.fetch()(await sP(t,t.config.apiHost,n,o),u)})}async function rP(t,e,n){t._canInitEmulator=!1;const r={...U$,...e};try{const s=new j$(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const i=await a.json();if("needConfirmation"in i)throw ay(t,"account-exists-with-different-credential",i);if(a.ok&&!("errorMessage"in i))return i;{const o=a.ok?i.errorMessage:i.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ay(t,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw ay(t,"email-already-in-use",i);if(l==="USER_DISABLED")throw ay(t,"user-disabled",i);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw tP(t,d,u);Kc(t,d)}}catch(s){if(s instanceof eA)throw s;Kc(t,"network-request-failed",{message:String(s)})}}async function kb(t,e,n,r,s={}){const a=await id(t,e,n,r,s);return"mfaPendingCredential"in a&&Kc(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function sP(t,e,n,r){const s=`${e}${n}?${r}`,a=t,i=a.config.emulator?_N(t.config,s):`${t.config.apiScheme}://${s}`;return M$.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(i).toString():i}function O$(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class j${clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Vu(this.auth,"network-request-failed")),P$.get())})}}function ay(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Vu(t,e,r);return s.customData._tokenResponse=n,s}function F3(t){return t!==void 0&&t.enterprise!==void 0}class Q${constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return O$(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function H$(t,e){return id(t,"GET","/v2/recaptchaConfig",qf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V$(t,e){return id(t,"POST","/v1/accounts:delete",e)}async function Aw(t,e){return id(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function z$(t,e=!1){const n=Bs(t),r=await n.getIdToken(e),s=SN(r);Rn(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,i=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:hx(p_(s.auth_time)),issuedAtTime:hx(p_(s.iat)),expirationTime:hx(p_(s.exp)),signInProvider:i||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function p_(t){return Number(t)*1e3}function SN(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return y2("JWT malformed, contained fewer than 3 sections"),null;try{const s=z8(n);return s?JSON.parse(s):(y2("Failed to decode base64 JWT payload"),null)}catch(s){return y2("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function D3(t){const e=SN(t);return Rn(e,"internal-error"),Rn(typeof e.exp<"u","internal-error"),Rn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jx(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof eA&&G$(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function G$({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q${constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hx(this.lastLoginAt),this.creationTime=hx(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dw(t){var h;const e=t.auth,n=await t.getIdToken(),r=await jx(t,Aw(e,{idToken:n}));Rn(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=(h=s.providerUserInfo)!=null&&h.length?aP(s.providerUserInfo):[],i=$$(t.providerData,a),o=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(i!=null&&i.length),u=o?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new c5(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function K$(t){const e=Bs(t);await dw(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $$(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function aP(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W$(t,e){const n=await rP(t,{},async()=>{const r=Tv({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,i=await sP(t,s,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return t.emulatorConfig&&A0(t.emulatorConfig.host)&&(l.credentials="include"),nP.fetch()(i,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Y$(t,e){return id(t,"POST","/v2/accounts:revokeToken",qf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Rn(e.idToken,"internal-error"),Rn(typeof e.idToken<"u","internal-error"),Rn(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):D3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Rn(e.length!==0,"internal-error");const n=D3(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Rn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await W$(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,i=new Om;return r&&(Rn(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),s&&(Rn(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),a&&(Rn(typeof a=="number","internal-error",{appName:e}),i.expirationTime=a),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Om,this.toJSON())}_performRefresh(){return jA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t,e){Rn(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qc{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new q$(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new c5(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await jx(this,this.stsTokenManager.getToken(this.auth,e));return Rn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return z$(this,e)}reload(){return K$(this)}_assign(e){this!==e&&(Rn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qc({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Rn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await dw(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tc(this.auth.app))return Promise.reject(wf(this.auth));const e=await this.getIdToken();return await jx(this,V$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,a=n.phoneNumber??void 0,i=n.photoURL??void 0,o=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:m,isAnonymous:p,providerData:y,stsTokenManager:x}=n;Rn(h&&x,e,"internal-error");const C=Om.fromJSON(this.name,x);Rn(typeof h=="string",e,"internal-error"),qd(r,e.name),qd(s,e.name),Rn(typeof m=="boolean",e,"internal-error"),Rn(typeof p=="boolean",e,"internal-error"),qd(a,e.name),qd(i,e.name),qd(o,e.name),qd(l,e.name),qd(u,e.name),qd(d,e.name);const S=new Qc({uid:h,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:p,photoURL:i,phoneNumber:a,tenantId:o,stsTokenManager:C,createdAt:u,lastLoginAt:d});return y&&Array.isArray(y)&&(S.providerData=y.map(k=>({...k}))),l&&(S._redirectEventId=l),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new Om;s.updateFromServerResponse(n);const a=new Qc({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await dw(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Rn(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?aP(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),o=new Om;o.updateFromIdToken(r);const l=new Qc({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:i}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new c5(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3=new Map;function QA(t){JA(t instanceof Function,"Expected a class definition");let e=R3.get(t);return e?(JA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,R3.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}iP.type="NONE";const L3=iP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(t,e,n){return`firebase:${t}:${e}:${n}`}class jm{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=w2(this.userKey,s.apiKey,a),this.fullPersistenceKey=w2("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Aw(this.auth,{idToken:e}).catch(()=>{});return n?Qc._fromGetAccountInfoResponse(this.auth,n,e):null}return Qc._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new jm(QA(L3),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=s[0]||QA(L3);const i=w2(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const d=await u._get(i);if(d){let h;if(typeof d=="string"){const m=await Aw(e,{idToken:d}).catch(()=>{});if(!m)break;h=await Qc._fromGetAccountInfoResponse(e,m,d)}else h=Qc._fromJSON(e,d);u!==a&&(o=h),a=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new jm(a,e,r):(a=l[0],o&&await a._set(i,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(i)}catch{}})),new jm(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U3(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(oP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dP(e))return"Blackberry";if(fP(e))return"Webos";if(lP(e))return"Safari";if((e.includes("chrome/")||cP(e))&&!e.includes("edge/"))return"Chrome";if(AP(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function oP(t=ro()){return/firefox\//i.test(t)}function lP(t=ro()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cP(t=ro()){return/crios\//i.test(t)}function uP(t=ro()){return/iemobile/i.test(t)}function AP(t=ro()){return/android/i.test(t)}function dP(t=ro()){return/blackberry/i.test(t)}function fP(t=ro()){return/webos/i.test(t)}function TN(t=ro()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function X$(t=ro()){var e;return TN(t)&&!!((e=window.navigator)!=null&&e.standalone)}function J$(){return dK()&&document.documentMode===10}function hP(t=ro()){return TN(t)||AP(t)||fP(t)||dP(t)||/windows phone/i.test(t)||uP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(t,e=[]){let n;switch(t){case"Browser":n=U3(ro());break;case"Worker":n=`${U3(ro())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Sp}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((i,o)=>{try{const l=e(a);i(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eW(t,e={}){return id(t,"GET","/v2/passwordPolicy",qf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tW=6;class nW{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??tW,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new M3(this),this.idTokenSubscription=new M3(this),this.beforeStateQueue=new Z$(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=QA(n)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await jm.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Aw(this,{idToken:e}),r=await Qc._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(tc(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(a=this.redirectUser)==null?void 0:a._redirectEventId,o=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Rn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await dw(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=L$()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tc(this.app))return Promise.reject(wf(this));const n=e?Bs(e):null;return n&&Rn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Rn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tc(this.app)?Promise.reject(wf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tc(this.app)?Promise.reject(wf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(QA(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await eW(this),n=new nW(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Sv("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Y$(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&QA(e)||this._popupRedirectResolver;Rn(n,this,"argument-error"),this.redirectPersistenceManager=await jm.create(this,[QA(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Rn(o,this,"internal-error"),o.then(()=>{i||a(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{i=!0,l()}}else{const l=e.addObserver(n);return()=>{i=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Rn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(tc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&F$(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function d0(t){return Bs(t)}class M3{constructor(e){this.auth=e,this.observer=null,this.addObserver=yK(n=>this.observer=n)}get next(){return Rn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ib={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sW(t){Ib=t}function pP(t){return Ib.loadJS(t)}function aW(){return Ib.recaptchaEnterpriseScript}function iW(){return Ib.gapiScript}function oW(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class lW{constructor(){this.enterprise=new cW}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class cW{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const uW="recaptcha-enterprise",gP="NO_RECAPTCHA";class AW{constructor(e){this.type=uW,this.auth=d0(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(i,o)=>{H$(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new Q$(l);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,i(u.siteKey)}}).catch(l=>{o(l)})})}function s(a,i,o){const l=window.grecaptcha;F3(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(u=>{i(u)}).catch(()=>{i(gP)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new lW().execute("siteKey",{action:"verify"}):new Promise((a,i)=>{r(this.auth).then(o=>{if(!n&&F3(window.grecaptcha))s(o,a,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let l=aW();l.length!==0&&(l+=o),pP(l).then(()=>{s(o,a,i)}).catch(u=>{i(u)})}}).catch(o=>{i(o)})})}}async function P3(t,e,n,r=!1,s=!1){const a=new AW(t);let i;if(s)i=gP;else try{i=await a.verify(n)}catch{i=await a.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function u5(t,e,n,r,s){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await P3(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await P3(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dW(t,e){const n=Bb(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(If(a,e??{}))return s;Kc(s,"already-initialized")}return n.initialize({options:e})}function fW(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(QA);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function hW(t,e,n){const r=d0(t);Rn(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=xP(e),{host:i,port:o}=mW(e),l=o===null?"":`:${o}`,u={url:`${a}//${i}${l}/`},d=Object.freeze({host:i,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Rn(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Rn(If(u,r.config.emulator)&&If(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,A0(i)?(xN(`${a}//${i}${l}`),vN("Auth",!0)):pW()}function xP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mW(t){const e=xP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:O3(r.substr(a.length+1))}}else{const[a,i]=r.split(":");return{host:a,port:O3(i)}}}function O3(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function pW(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return jA("not implemented")}_getIdTokenResponse(e){return jA("not implemented")}_linkToIdToken(e,n){return jA("not implemented")}_getReauthenticationResolver(e){return jA("not implemented")}}async function gW(t,e){return id(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xW(t,e){return kb(t,"POST","/v1/accounts:signInWithPassword",qf(t,e))}async function vW(t,e){return id(t,"POST","/v1/accounts:sendOobCode",qf(t,e))}async function yW(t,e){return vW(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wW(t,e){return kb(t,"POST","/v1/accounts:signInWithEmailLink",qf(t,e))}async function bW(t,e){return kb(t,"POST","/v1/accounts:signInWithEmailLink",qf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx extends NN{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Qx(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Qx(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return u5(e,n,"signInWithPassword",xW);case"emailLink":return wW(e,{email:this._email,oobCode:this._password});default:Kc(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return u5(e,r,"signUpPassword",gW);case"emailLink":return bW(e,{idToken:n,email:this._email,oobCode:this._password});default:Kc(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qm(t,e){return kb(t,"POST","/v1/accounts:signInWithIdp",qf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CW="http://localhost";class Xh extends NN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Xh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Kc("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=n;if(!r||!s)return null;const i=new Xh(r,s);return i.idToken=a.idToken||void 0,i.accessToken=a.accessToken||void 0,i.secret=a.secret,i.nonce=a.nonce,i.pendingToken=a.pendingToken||null,i}_getIdTokenResponse(e){const n=this.buildRequest();return Qm(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Qm(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Qm(e,n)}buildRequest(){const e={requestUri:CW,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Tv(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EW(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _W(t){const e=qg(Kg(t)).link,n=e?qg(Kg(e)).deep_link_id:null,r=qg(Kg(t)).deep_link_id;return(r?qg(Kg(r)).link:null)||r||n||e||t}class BN{constructor(e){const n=qg(Kg(e)),r=n.apiKey??null,s=n.oobCode??null,a=EW(n.mode??null);Rn(r&&s&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=_W(e);try{return new BN(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(){this.providerId=Tp.PROVIDER_ID}static credential(e,n){return Qx._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=BN.parseLink(n);return Rn(r,"argument-error"),Qx._fromEmailAndCode(e,r.code,r.tenantId)}}Tp.PROVIDER_ID="password";Tp.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Tp.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv extends vP{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf extends Bv{constructor(){super("facebook.com")}static credential(e){return Xh._fromParams({providerId:sf.PROVIDER_ID,signInMethod:sf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sf.credentialFromTaggedObject(e)}static credentialFromError(e){return sf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sf.credential(e.oauthAccessToken)}catch{return null}}}sf.FACEBOOK_SIGN_IN_METHOD="facebook.com";sf.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af extends Bv{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Xh._fromParams({providerId:af.PROVIDER_ID,signInMethod:af.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return af.credentialFromTaggedObject(e)}static credentialFromError(e){return af.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return af.credential(n,r)}catch{return null}}}af.GOOGLE_SIGN_IN_METHOD="google.com";af.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of extends Bv{constructor(){super("github.com")}static credential(e){return Xh._fromParams({providerId:of.PROVIDER_ID,signInMethod:of.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return of.credentialFromTaggedObject(e)}static credentialFromError(e){return of.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return of.credential(e.oauthAccessToken)}catch{return null}}}of.GITHUB_SIGN_IN_METHOD="github.com";of.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf extends Bv{constructor(){super("twitter.com")}static credential(e,n){return Xh._fromParams({providerId:lf.PROVIDER_ID,signInMethod:lf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return lf.credentialFromTaggedObject(e)}static credentialFromError(e){return lf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return lf.credential(n,r)}catch{return null}}}lf.TWITTER_SIGN_IN_METHOD="twitter.com";lf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await Qc._fromIdTokenResponse(e,r,s),i=j3(r);return new op({user:a,providerId:i,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=j3(r);return new op({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function j3(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw extends eA{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,fw.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new fw(e,n,r,s)}}function yP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?fw._fromErrorAndOperation(t,a,e,r):a})}async function SW(t,e,n=!1){const r=await jx(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return op._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TW(t,e,n=!1){const{auth:r}=t;if(tc(r.app))return Promise.reject(wf(r));const s="reauthenticate";try{const a=await jx(t,yP(r,s,e,t),n);Rn(a.idToken,r,"internal-error");const i=SN(a.idToken);Rn(i,r,"internal-error");const{sub:o}=i;return Rn(t.uid===o,r,"user-mismatch"),op._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Kc(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wP(t,e,n=!1){if(tc(t.app))return Promise.reject(wf(t));const r="signIn",s=await yP(t,r,e),a=await op._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function NW(t,e){return wP(d0(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BW(t){const e=d0(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function kW(t,e,n){const r=d0(t);await u5(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",yW)}function IW(t,e,n){return tc(t.app)?Promise.reject(wf(t)):NW(Bs(t),Tp.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&BW(t),r})}function FW(t,e,n,r){return Bs(t).onIdTokenChanged(e,n,r)}function DW(t,e,n){return Bs(t).beforeAuthStateChanged(e,n)}function bP(t,e,n,r){return Bs(t).onAuthStateChanged(e,n,r)}function RW(t){return Bs(t).signOut()}const hw="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hw,"1"),this.storage.removeItem(hw),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LW=1e3,UW=10;class EP extends CP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((i,o,l)=>{this.notifyListeners(i,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(r);!n&&this.localCache[r]===i||this.notifyListeners(r,i)},a=this.storage.getItem(r);J$()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,UW):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},LW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}EP.type="LOCAL";const MW=EP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P extends CP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}_P.type="SESSION";const SP=_P;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PW(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Fb(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,i=this.handlersMap[s];if(!(i!=null&&i.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const o=Array.from(i).map(async u=>u(n.origin,a)),l=await PW(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fb.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,i;return new Promise((o,l)=>{const u=kN("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);i={messageChannel:s,onMessage(h){const m=h;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(m.data.response);break;default:clearTimeout(d),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(){return window}function jW(t){zu().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(){return typeof zu().WorkerGlobalScope<"u"&&typeof zu().importScripts=="function"}async function QW(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HW(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function VW(){return TP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP="firebaseLocalStorageDb",zW=1,mw="firebaseLocalStorage",BP="fbase_key";class kv{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Db(t,e){return t.transaction([mw],e?"readwrite":"readonly").objectStore(mw)}function GW(){const t=indexedDB.deleteDatabase(NP);return new kv(t).toPromise()}function A5(){const t=indexedDB.open(NP,zW);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(mw,{keyPath:BP})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(mw)?e(r):(r.close(),await GW(),e(await A5()))})})}async function Q3(t,e,n){const r=Db(t,!0).put({[BP]:e,value:n});return new kv(r).toPromise()}async function qW(t,e){const n=Db(t,!1).get(e),r=await new kv(n).toPromise();return r===void 0?null:r.value}function H3(t,e){const n=Db(t,!0).delete(e);return new kv(n).toPromise()}const KW=800,$W=3;class kP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await A5(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$W)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fb._getInstance(VW()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await QW(),!this.activeServiceWorker)return;this.sender=new OW(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HW()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await A5();return await Q3(e,hw,"1"),await H3(e,hw),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Q3(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>qW(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>H3(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Db(s,!1).getAll();return new kv(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kP.type="LOCAL";const WW=kP;new Nv(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YW(t,e){return e?QA(e):(Rn(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN extends NN{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qm(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Qm(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Qm(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function XW(t){return wP(t.auth,new IN(t),t.bypassAuthState)}function JW(t){const{auth:e,user:n}=t;return Rn(n,e,"internal-error"),TW(n,new IN(t),t.bypassAuthState)}async function ZW(t){const{auth:e,user:n}=t;return Rn(n,e,"internal-error"),SW(n,new IN(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:i,type:o}=e;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XW;case"linkViaPopup":case"linkViaRedirect":return ZW;case"reauthViaPopup":case"reauthViaRedirect":return JW;default:Kc(this.auth,"internal-error")}}resolve(e){JA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){JA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eY=new Nv(2e3,1e4);class Bm extends IP{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Bm.currentPopupAction&&Bm.currentPopupAction.cancel(),Bm.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Rn(e,this.auth,"internal-error"),e}async onExecution(){JA(this.filter.length===1,"Popup operations only handle one event");const e=kN();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Vu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bm.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,eY.get())};e()}}Bm.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tY="pendingRedirect",b2=new Map;class nY extends IP{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=b2.get(this.auth._key());if(!e){try{const r=await rY(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}b2.set(this.auth._key(),e)}return this.bypassAuthState||b2.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rY(t,e){const n=iY(e),r=aY(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function sY(t,e){b2.set(t._key(),e)}function aY(t){return QA(t._redirectPersistence)}function iY(t){return w2(tY,t.config.apiKey,t.name)}async function oY(t,e,n=!1){if(tc(t.app))return Promise.reject(wf(t));const r=d0(t),s=YW(r,e),i=await new nY(r,s,n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lY=600*1e3;class cY{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uY(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!FP(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Vu(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lY&&this.cachedEventUids.clear(),this.cachedEventUids.has(V3(e))}saveEventToCache(e){this.cachedEventUids.add(V3(e)),this.lastProcessedEventTime=Date.now()}}function V3(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function FP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function uY(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AY(t,e={}){return id(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dY=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fY=/^https?/;async function hY(t){if(t.config.emulator)return;const{authorizedDomains:e}=await AY(t);for(const n of e)try{if(mY(n))return}catch{}Kc(t,"unauthorized-domain")}function mY(t){const e=l5(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===r}if(!fY.test(n))return!1;if(dY.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pY=new Nv(3e4,6e4);function z3(){const t=zu().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function gY(t){return new Promise((e,n)=>{var s,a,i;function r(){z3(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{z3(),n(Vu(t,"network-request-failed"))},timeout:pY.get()})}if((a=(s=zu().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((i=zu().gapi)!=null&&i.load)r();else{const o=oW("iframefcb");return zu()[o]=()=>{gapi.load?r():n(Vu(t,"network-request-failed"))},pP(`${iW()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw C2=null,e})}let C2=null;function xY(t){return C2=C2||gY(t),C2}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vY=new Nv(5e3,15e3),yY="__/auth/iframe",wY="emulator/auth/iframe",bY={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CY=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function EY(t){const e=t.config;Rn(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_N(e,wY):`https://${t.config.authDomain}/${yY}`,r={apiKey:e.apiKey,appName:t.name,v:Sp},s=CY.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Tv(r).slice(1)}`}async function _Y(t){const e=await xY(t),n=zu().gapi;return Rn(n,t,"internal-error"),e.open({where:document.body,url:EY(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bY,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const i=Vu(t,"network-request-failed"),o=zu().setTimeout(()=>{a(i)},vY.get());function l(){zu().clearTimeout(o),s(r)}r.ping(l).then(l,()=>{a(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SY={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TY=500,NY=600,BY="_blank",kY="http://localhost";class G3{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IY(t,e,n,r=TY,s=NY){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l={...SY,width:r.toString(),height:s.toString(),top:a,left:i},u=ro().toLowerCase();n&&(o=cP(u)?BY:n),oP(u)&&(e=e||kY,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[p,y])=>`${m}${p}=${y},`,"");if(X$(u)&&o!=="_self")return FY(e||"",o),new G3(null);const h=window.open(e||"",o,d);Rn(h,t,"popup-blocked");try{h.focus()}catch{}return new G3(h)}function FY(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DY="__/auth/handler",RY="emulator/auth/handler",LY=encodeURIComponent("fac");async function q3(t,e,n,r,s,a){Rn(t.config.authDomain,t,"auth-domain-config-required"),Rn(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Sp,eventId:s};if(e instanceof vP){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",vK(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))i[d]=h}if(e instanceof Bv){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await t._getAppCheckToken(),u=l?`#${LY}=${encodeURIComponent(l)}`:"";return`${UY(t)}?${Tv(o).slice(1)}${u}`}function UY({config:t}){return t.emulator?_N(t,RY):`https://${t.authDomain}/${DY}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="webStorageSupport";class MY{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SP,this._completeRedirectFn=oY,this._overrideRedirectResult=sY}async _openPopup(e,n,r,s){var i;JA((i=this.eventManagers[e._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await q3(e,n,r,l5(),s);return IY(e,a,kN())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await q3(e,n,r,l5(),s);return jW(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(JA(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await _Y(e),r=new cY(e);return n.register("authEvent",s=>(Rn(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(g_,{type:g_},s=>{var i;const a=(i=s==null?void 0:s[0])==null?void 0:i[g_];a!==void 0&&n(!!a),Kc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=hY(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return hP()||lP()||TN()}}const PY=MY;var K3="@firebase/auth",$3="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OY{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Rn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jY(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QY(t){Yh(new Ff("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;Rn(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mP(t)},u=new rW(r,s,a,l);return fW(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Yh(new Ff("auth-internal",e=>{const n=d0(e.getProvider("auth").getImmediate());return(r=>new OY(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hu(K3,$3,jY(t)),Hu(K3,$3,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HY=300,VY=$8("authIdTokenMaxAge")||HY;let W3=null;const zY=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>VY)return;const s=n==null?void 0:n.token;W3!==s&&(W3=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function DP(t=CN()){const e=Bb(t,"auth");if(e.isInitialized())return e.getImmediate();const n=dW(t,{popupRedirectResolver:PY,persistence:[WW,MW,SP]}),r=$8("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const i=zY(a.toString());DW(n,i,()=>i(n.currentUser)),FW(n,o=>i(o))}}const s=G8("auth");return s&&hW(n,`http://${s}`),n}function GY(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}sW({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=Vu("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",GY().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QY("Browser");var qY="firebase",KY="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hu(qY,KY,"app");var Y3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bf,RP;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,_){function B(){}B.prototype=_.prototype,E.D=_.prototype,E.prototype=new B,E.prototype.constructor=E,E.C=function(j,D,L){for(var Q=Array(arguments.length-2),H=2;H<arguments.length;H++)Q[H-2]=arguments[H];return _.prototype[D].apply(j,Q)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,_,B){B||(B=0);var j=Array(16);if(typeof _=="string")for(var D=0;16>D;++D)j[D]=_.charCodeAt(B++)|_.charCodeAt(B++)<<8|_.charCodeAt(B++)<<16|_.charCodeAt(B++)<<24;else for(D=0;16>D;++D)j[D]=_[B++]|_[B++]<<8|_[B++]<<16|_[B++]<<24;_=E.g[0],B=E.g[1],D=E.g[2];var L=E.g[3],Q=_+(L^B&(D^L))+j[0]+3614090360&4294967295;_=B+(Q<<7&4294967295|Q>>>25),Q=L+(D^_&(B^D))+j[1]+3905402710&4294967295,L=_+(Q<<12&4294967295|Q>>>20),Q=D+(B^L&(_^B))+j[2]+606105819&4294967295,D=L+(Q<<17&4294967295|Q>>>15),Q=B+(_^D&(L^_))+j[3]+3250441966&4294967295,B=D+(Q<<22&4294967295|Q>>>10),Q=_+(L^B&(D^L))+j[4]+4118548399&4294967295,_=B+(Q<<7&4294967295|Q>>>25),Q=L+(D^_&(B^D))+j[5]+1200080426&4294967295,L=_+(Q<<12&4294967295|Q>>>20),Q=D+(B^L&(_^B))+j[6]+2821735955&4294967295,D=L+(Q<<17&4294967295|Q>>>15),Q=B+(_^D&(L^_))+j[7]+4249261313&4294967295,B=D+(Q<<22&4294967295|Q>>>10),Q=_+(L^B&(D^L))+j[8]+1770035416&4294967295,_=B+(Q<<7&4294967295|Q>>>25),Q=L+(D^_&(B^D))+j[9]+2336552879&4294967295,L=_+(Q<<12&4294967295|Q>>>20),Q=D+(B^L&(_^B))+j[10]+4294925233&4294967295,D=L+(Q<<17&4294967295|Q>>>15),Q=B+(_^D&(L^_))+j[11]+2304563134&4294967295,B=D+(Q<<22&4294967295|Q>>>10),Q=_+(L^B&(D^L))+j[12]+1804603682&4294967295,_=B+(Q<<7&4294967295|Q>>>25),Q=L+(D^_&(B^D))+j[13]+4254626195&4294967295,L=_+(Q<<12&4294967295|Q>>>20),Q=D+(B^L&(_^B))+j[14]+2792965006&4294967295,D=L+(Q<<17&4294967295|Q>>>15),Q=B+(_^D&(L^_))+j[15]+1236535329&4294967295,B=D+(Q<<22&4294967295|Q>>>10),Q=_+(D^L&(B^D))+j[1]+4129170786&4294967295,_=B+(Q<<5&4294967295|Q>>>27),Q=L+(B^D&(_^B))+j[6]+3225465664&4294967295,L=_+(Q<<9&4294967295|Q>>>23),Q=D+(_^B&(L^_))+j[11]+643717713&4294967295,D=L+(Q<<14&4294967295|Q>>>18),Q=B+(L^_&(D^L))+j[0]+3921069994&4294967295,B=D+(Q<<20&4294967295|Q>>>12),Q=_+(D^L&(B^D))+j[5]+3593408605&4294967295,_=B+(Q<<5&4294967295|Q>>>27),Q=L+(B^D&(_^B))+j[10]+38016083&4294967295,L=_+(Q<<9&4294967295|Q>>>23),Q=D+(_^B&(L^_))+j[15]+3634488961&4294967295,D=L+(Q<<14&4294967295|Q>>>18),Q=B+(L^_&(D^L))+j[4]+3889429448&4294967295,B=D+(Q<<20&4294967295|Q>>>12),Q=_+(D^L&(B^D))+j[9]+568446438&4294967295,_=B+(Q<<5&4294967295|Q>>>27),Q=L+(B^D&(_^B))+j[14]+3275163606&4294967295,L=_+(Q<<9&4294967295|Q>>>23),Q=D+(_^B&(L^_))+j[3]+4107603335&4294967295,D=L+(Q<<14&4294967295|Q>>>18),Q=B+(L^_&(D^L))+j[8]+1163531501&4294967295,B=D+(Q<<20&4294967295|Q>>>12),Q=_+(D^L&(B^D))+j[13]+2850285829&4294967295,_=B+(Q<<5&4294967295|Q>>>27),Q=L+(B^D&(_^B))+j[2]+4243563512&4294967295,L=_+(Q<<9&4294967295|Q>>>23),Q=D+(_^B&(L^_))+j[7]+1735328473&4294967295,D=L+(Q<<14&4294967295|Q>>>18),Q=B+(L^_&(D^L))+j[12]+2368359562&4294967295,B=D+(Q<<20&4294967295|Q>>>12),Q=_+(B^D^L)+j[5]+4294588738&4294967295,_=B+(Q<<4&4294967295|Q>>>28),Q=L+(_^B^D)+j[8]+2272392833&4294967295,L=_+(Q<<11&4294967295|Q>>>21),Q=D+(L^_^B)+j[11]+1839030562&4294967295,D=L+(Q<<16&4294967295|Q>>>16),Q=B+(D^L^_)+j[14]+4259657740&4294967295,B=D+(Q<<23&4294967295|Q>>>9),Q=_+(B^D^L)+j[1]+2763975236&4294967295,_=B+(Q<<4&4294967295|Q>>>28),Q=L+(_^B^D)+j[4]+1272893353&4294967295,L=_+(Q<<11&4294967295|Q>>>21),Q=D+(L^_^B)+j[7]+4139469664&4294967295,D=L+(Q<<16&4294967295|Q>>>16),Q=B+(D^L^_)+j[10]+3200236656&4294967295,B=D+(Q<<23&4294967295|Q>>>9),Q=_+(B^D^L)+j[13]+681279174&4294967295,_=B+(Q<<4&4294967295|Q>>>28),Q=L+(_^B^D)+j[0]+3936430074&4294967295,L=_+(Q<<11&4294967295|Q>>>21),Q=D+(L^_^B)+j[3]+3572445317&4294967295,D=L+(Q<<16&4294967295|Q>>>16),Q=B+(D^L^_)+j[6]+76029189&4294967295,B=D+(Q<<23&4294967295|Q>>>9),Q=_+(B^D^L)+j[9]+3654602809&4294967295,_=B+(Q<<4&4294967295|Q>>>28),Q=L+(_^B^D)+j[12]+3873151461&4294967295,L=_+(Q<<11&4294967295|Q>>>21),Q=D+(L^_^B)+j[15]+530742520&4294967295,D=L+(Q<<16&4294967295|Q>>>16),Q=B+(D^L^_)+j[2]+3299628645&4294967295,B=D+(Q<<23&4294967295|Q>>>9),Q=_+(D^(B|~L))+j[0]+4096336452&4294967295,_=B+(Q<<6&4294967295|Q>>>26),Q=L+(B^(_|~D))+j[7]+1126891415&4294967295,L=_+(Q<<10&4294967295|Q>>>22),Q=D+(_^(L|~B))+j[14]+2878612391&4294967295,D=L+(Q<<15&4294967295|Q>>>17),Q=B+(L^(D|~_))+j[5]+4237533241&4294967295,B=D+(Q<<21&4294967295|Q>>>11),Q=_+(D^(B|~L))+j[12]+1700485571&4294967295,_=B+(Q<<6&4294967295|Q>>>26),Q=L+(B^(_|~D))+j[3]+2399980690&4294967295,L=_+(Q<<10&4294967295|Q>>>22),Q=D+(_^(L|~B))+j[10]+4293915773&4294967295,D=L+(Q<<15&4294967295|Q>>>17),Q=B+(L^(D|~_))+j[1]+2240044497&4294967295,B=D+(Q<<21&4294967295|Q>>>11),Q=_+(D^(B|~L))+j[8]+1873313359&4294967295,_=B+(Q<<6&4294967295|Q>>>26),Q=L+(B^(_|~D))+j[15]+4264355552&4294967295,L=_+(Q<<10&4294967295|Q>>>22),Q=D+(_^(L|~B))+j[6]+2734768916&4294967295,D=L+(Q<<15&4294967295|Q>>>17),Q=B+(L^(D|~_))+j[13]+1309151649&4294967295,B=D+(Q<<21&4294967295|Q>>>11),Q=_+(D^(B|~L))+j[4]+4149444226&4294967295,_=B+(Q<<6&4294967295|Q>>>26),Q=L+(B^(_|~D))+j[11]+3174756917&4294967295,L=_+(Q<<10&4294967295|Q>>>22),Q=D+(_^(L|~B))+j[2]+718787259&4294967295,D=L+(Q<<15&4294967295|Q>>>17),Q=B+(L^(D|~_))+j[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(D+(Q<<21&4294967295|Q>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+L&4294967295}r.prototype.u=function(E,_){_===void 0&&(_=E.length);for(var B=_-this.blockSize,j=this.B,D=this.h,L=0;L<_;){if(D==0)for(;L<=B;)s(this,E,L),L+=this.blockSize;if(typeof E=="string"){for(;L<_;)if(j[D++]=E.charCodeAt(L++),D==this.blockSize){s(this,j),D=0;break}}else for(;L<_;)if(j[D++]=E[L++],D==this.blockSize){s(this,j),D=0;break}}this.h=D,this.o+=_},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;var B=8*this.o;for(_=E.length-8;_<E.length;++_)E[_]=B&255,B/=256;for(this.u(E),E=Array(16),_=B=0;4>_;++_)for(var j=0;32>j;j+=8)E[B++]=this.g[_]>>>j&255;return E};function a(E,_){var B=o;return Object.prototype.hasOwnProperty.call(B,E)?B[E]:B[E]=_(E)}function i(E,_){this.h=_;for(var B=[],j=!0,D=E.length-1;0<=D;D--){var L=E[D]|0;j&&L==_||(B[D]=L,j=!1)}this.g=B}var o={};function l(E){return-128<=E&&128>E?a(E,function(_){return new i([_|0],0>_?-1:0)}):new i([E|0],0>E?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return h;if(0>E)return C(u(-E));for(var _=[],B=1,j=0;E>=B;j++)_[j]=E/B|0,B*=4294967296;return new i(_,0)}function d(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return C(d(E.substring(1),_));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=u(Math.pow(_,8)),j=h,D=0;D<E.length;D+=8){var L=Math.min(8,E.length-D),Q=parseInt(E.substring(D,D+L),_);8>L?(L=u(Math.pow(_,L)),j=j.j(L).add(u(Q))):(j=j.j(B),j=j.add(u(Q)))}return j}var h=l(0),m=l(1),p=l(16777216);t=i.prototype,t.m=function(){if(x(this))return-C(this).m();for(var E=0,_=1,B=0;B<this.g.length;B++){var j=this.i(B);E+=(0<=j?j:4294967296+j)*_,_*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(y(this))return"0";if(x(this))return"-"+C(this).toString(E);for(var _=u(Math.pow(E,6)),B=this,j="";;){var D=F(B,_).g;B=S(B,D.j(_));var L=((0<B.g.length?B.g[0]:B.h)>>>0).toString(E);if(B=D,y(B))return L+j;for(;6>L.length;)L="0"+L;j=L+j}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function y(E){if(E.h!=0)return!1;for(var _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function x(E){return E.h==-1}t.l=function(E){return E=S(this,E),x(E)?-1:y(E)?0:1};function C(E){for(var _=E.g.length,B=[],j=0;j<_;j++)B[j]=~E.g[j];return new i(B,~E.h).add(m)}t.abs=function(){return x(this)?C(this):this},t.add=function(E){for(var _=Math.max(this.g.length,E.g.length),B=[],j=0,D=0;D<=_;D++){var L=j+(this.i(D)&65535)+(E.i(D)&65535),Q=(L>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);j=Q>>>16,L&=65535,Q&=65535,B[D]=Q<<16|L}return new i(B,B[B.length-1]&-2147483648?-1:0)};function S(E,_){return E.add(C(_))}t.j=function(E){if(y(this)||y(E))return h;if(x(this))return x(E)?C(this).j(C(E)):C(C(this).j(E));if(x(E))return C(this.j(C(E)));if(0>this.l(p)&&0>E.l(p))return u(this.m()*E.m());for(var _=this.g.length+E.g.length,B=[],j=0;j<2*_;j++)B[j]=0;for(j=0;j<this.g.length;j++)for(var D=0;D<E.g.length;D++){var L=this.i(j)>>>16,Q=this.i(j)&65535,H=E.i(D)>>>16,te=E.i(D)&65535;B[2*j+2*D]+=Q*te,k(B,2*j+2*D),B[2*j+2*D+1]+=L*te,k(B,2*j+2*D+1),B[2*j+2*D+1]+=Q*H,k(B,2*j+2*D+1),B[2*j+2*D+2]+=L*H,k(B,2*j+2*D+2)}for(j=0;j<_;j++)B[j]=B[2*j+1]<<16|B[2*j];for(j=_;j<2*_;j++)B[j]=0;return new i(B,0)};function k(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function I(E,_){this.g=E,this.h=_}function F(E,_){if(y(_))throw Error("division by zero");if(y(E))return new I(h,h);if(x(E))return _=F(C(E),_),new I(C(_.g),C(_.h));if(x(_))return _=F(E,C(_)),new I(C(_.g),_.h);if(30<E.g.length){if(x(E)||x(_))throw Error("slowDivide_ only works with positive integers.");for(var B=m,j=_;0>=j.l(E);)B=U(B),j=U(j);var D=R(B,1),L=R(j,1);for(j=R(j,2),B=R(B,2);!y(j);){var Q=L.add(j);0>=Q.l(E)&&(D=D.add(B),L=Q),j=R(j,1),B=R(B,1)}return _=S(E,D.j(_)),new I(D,_)}for(D=h;0<=E.l(_);){for(B=Math.max(1,Math.floor(E.m()/_.m())),j=Math.ceil(Math.log(B)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),L=u(B),Q=L.j(_);x(Q)||0<Q.l(E);)B-=j,L=u(B),Q=L.j(_);y(L)&&(L=m),D=D.add(L),E=S(E,Q)}return new I(D,E)}t.A=function(E){return F(this,E).h},t.and=function(E){for(var _=Math.max(this.g.length,E.g.length),B=[],j=0;j<_;j++)B[j]=this.i(j)&E.i(j);return new i(B,this.h&E.h)},t.or=function(E){for(var _=Math.max(this.g.length,E.g.length),B=[],j=0;j<_;j++)B[j]=this.i(j)|E.i(j);return new i(B,this.h|E.h)},t.xor=function(E){for(var _=Math.max(this.g.length,E.g.length),B=[],j=0;j<_;j++)B[j]=this.i(j)^E.i(j);return new i(B,this.h^E.h)};function U(E){for(var _=E.g.length+1,B=[],j=0;j<_;j++)B[j]=E.i(j)<<1|E.i(j-1)>>>31;return new i(B,E.h)}function R(E,_){var B=_>>5;_%=32;for(var j=E.g.length-B,D=[],L=0;L<j;L++)D[L]=0<_?E.i(L+B)>>>_|E.i(L+B+1)<<32-_:E.i(L+B);return new i(D,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,RP=r,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,bf=i}).apply(typeof Y3<"u"?Y3:typeof self<"u"?self:typeof window<"u"?window:{});var iy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LP,$g,UP,E2,d5,MP,PP,OP;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(N,ee,oe){return N==Array.prototype||N==Object.prototype||(N[ee]=oe.value),N};function n(N){N=[typeof globalThis=="object"&&globalThis,N,typeof window=="object"&&window,typeof self=="object"&&self,typeof iy=="object"&&iy];for(var ee=0;ee<N.length;++ee){var oe=N[ee];if(oe&&oe.Math==Math)return oe}throw Error("Cannot find global object")}var r=n(this);function s(N,ee){if(ee)e:{var oe=r;N=N.split(".");for(var ve=0;ve<N.length-1;ve++){var Ge=N[ve];if(!(Ge in oe))break e;oe=oe[Ge]}N=N[N.length-1],ve=oe[N],ee=ee(ve),ee!=ve&&ee!=null&&e(oe,N,{configurable:!0,writable:!0,value:ee})}}function a(N,ee){N instanceof String&&(N+="");var oe=0,ve=!1,Ge={next:function(){if(!ve&&oe<N.length){var at=oe++;return{value:ee(at,N[at]),done:!1}}return ve=!0,{done:!0,value:void 0}}};return Ge[Symbol.iterator]=function(){return Ge},Ge}s("Array.prototype.values",function(N){return N||function(){return a(this,function(ee,oe){return oe})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(N){var ee=typeof N;return ee=ee!="object"?ee:N?Array.isArray(N)?"array":ee:"null",ee=="array"||ee=="object"&&typeof N.length=="number"}function u(N){var ee=typeof N;return ee=="object"&&N!=null||ee=="function"}function d(N,ee,oe){return N.call.apply(N.bind,arguments)}function h(N,ee,oe){if(!N)throw Error();if(2<arguments.length){var ve=Array.prototype.slice.call(arguments,2);return function(){var Ge=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ge,ve),N.apply(ee,Ge)}}return function(){return N.apply(ee,arguments)}}function m(N,ee,oe){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function p(N,ee){var oe=Array.prototype.slice.call(arguments,1);return function(){var ve=oe.slice();return ve.push.apply(ve,arguments),N.apply(this,ve)}}function y(N,ee){function oe(){}oe.prototype=ee.prototype,N.aa=ee.prototype,N.prototype=new oe,N.prototype.constructor=N,N.Qb=function(ve,Ge,at){for(var kt=Array(arguments.length-2),Sn=2;Sn<arguments.length;Sn++)kt[Sn-2]=arguments[Sn];return ee.prototype[Ge].apply(ve,kt)}}function x(N){const ee=N.length;if(0<ee){const oe=Array(ee);for(let ve=0;ve<ee;ve++)oe[ve]=N[ve];return oe}return[]}function C(N,ee){for(let oe=1;oe<arguments.length;oe++){const ve=arguments[oe];if(l(ve)){const Ge=N.length||0,at=ve.length||0;N.length=Ge+at;for(let kt=0;kt<at;kt++)N[Ge+kt]=ve[kt]}else N.push(ve)}}class S{constructor(ee,oe){this.i=ee,this.j=oe,this.h=0,this.g=null}get(){let ee;return 0<this.h?(this.h--,ee=this.g,this.g=ee.next,ee.next=null):ee=this.i(),ee}}function k(N){return/^[\s\xa0]*$/.test(N)}function I(){var N=o.navigator;return N&&(N=N.userAgent)?N:""}function F(N){return F[" "](N),N}F[" "]=function(){};var U=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function R(N,ee,oe){for(const ve in N)ee.call(oe,N[ve],ve,N)}function E(N,ee){for(const oe in N)ee.call(void 0,N[oe],oe,N)}function _(N){const ee={};for(const oe in N)ee[oe]=N[oe];return ee}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(N,ee){let oe,ve;for(let Ge=1;Ge<arguments.length;Ge++){ve=arguments[Ge];for(oe in ve)N[oe]=ve[oe];for(let at=0;at<B.length;at++)oe=B[at],Object.prototype.hasOwnProperty.call(ve,oe)&&(N[oe]=ve[oe])}}function D(N){var ee=1;N=N.split(":");const oe=[];for(;0<ee&&N.length;)oe.push(N.shift()),ee--;return N.length&&oe.push(N.join(":")),oe}function L(N){o.setTimeout(()=>{throw N},0)}function Q(){var N=J;let ee=null;return N.g&&(ee=N.g,N.g=N.g.next,N.g||(N.h=null),ee.next=null),ee}class H{constructor(){this.h=this.g=null}add(ee,oe){const ve=te.get();ve.set(ee,oe),this.h?this.h.next=ve:this.g=ve,this.h=ve}}var te=new S(()=>new Y,N=>N.reset());class Y{constructor(){this.next=this.g=this.h=null}set(ee,oe){this.h=ee,this.g=oe,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,V=!1,J=new H,K=()=>{const N=o.Promise.resolve(void 0);ne=()=>{N.then(ie)}};var ie=()=>{for(var N;N=Q();){try{N.h.call(N.g)}catch(oe){L(oe)}var ee=te;ee.j(N),100>ee.h&&(ee.h++,N.next=ee.g,ee.g=N)}V=!1};function O(){this.s=this.s,this.C=this.C}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(N,ee){this.type=N,this.g=this.target=ee,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var N=!1,ee=Object.defineProperty({},"passive",{get:function(){N=!0}});try{const oe=()=>{};o.addEventListener("test",oe,ee),o.removeEventListener("test",oe,ee)}catch{}return N}();function re(N,ee){if(W.call(this,N?N.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,N){var oe=this.type=N.type,ve=N.changedTouches&&N.changedTouches.length?N.changedTouches[0]:null;if(this.target=N.target||N.srcElement,this.g=ee,ee=N.relatedTarget){if(U){e:{try{F(ee.nodeName);var Ge=!0;break e}catch{}Ge=!1}Ge||(ee=null)}}else oe=="mouseover"?ee=N.fromElement:oe=="mouseout"&&(ee=N.toElement);this.relatedTarget=ee,ve?(this.clientX=ve.clientX!==void 0?ve.clientX:ve.pageX,this.clientY=ve.clientY!==void 0?ve.clientY:ve.pageY,this.screenX=ve.screenX||0,this.screenY=ve.screenY||0):(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0),this.button=N.button,this.key=N.key||"",this.ctrlKey=N.ctrlKey,this.altKey=N.altKey,this.shiftKey=N.shiftKey,this.metaKey=N.metaKey,this.pointerId=N.pointerId||0,this.pointerType=typeof N.pointerType=="string"?N.pointerType:se[N.pointerType]||"",this.state=N.state,this.i=N,N.defaultPrevented&&re.aa.h.call(this)}}y(re,W);var se={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var N=this.i;N.preventDefault?N.preventDefault():N.returnValue=!1};var de="closure_listenable_"+(1e6*Math.random()|0),pe=0;function be(N,ee,oe,ve,Ge){this.listener=N,this.proxy=null,this.src=ee,this.type=oe,this.capture=!!ve,this.ha=Ge,this.key=++pe,this.da=this.fa=!1}function Se(N){N.da=!0,N.listener=null,N.proxy=null,N.src=null,N.ha=null}function me(N){this.src=N,this.g={},this.h=0}me.prototype.add=function(N,ee,oe,ve,Ge){var at=N.toString();N=this.g[at],N||(N=this.g[at]=[],this.h++);var kt=Me(N,ee,ve,Ge);return-1<kt?(ee=N[kt],oe||(ee.fa=!1)):(ee=new be(ee,this.src,at,!!ve,Ge),ee.fa=oe,N.push(ee)),ee};function ce(N,ee){var oe=ee.type;if(oe in N.g){var ve=N.g[oe],Ge=Array.prototype.indexOf.call(ve,ee,void 0),at;(at=0<=Ge)&&Array.prototype.splice.call(ve,Ge,1),at&&(Se(ee),N.g[oe].length==0&&(delete N.g[oe],N.h--))}}function Me(N,ee,oe,ve){for(var Ge=0;Ge<N.length;++Ge){var at=N[Ge];if(!at.da&&at.listener==ee&&at.capture==!!oe&&at.ha==ve)return Ge}return-1}var Ze="closure_lm_"+(1e6*Math.random()|0),Fe={};function Ce(N,ee,oe,ve,Ge){if(Array.isArray(ee)){for(var at=0;at<ee.length;at++)Ce(N,ee[at],oe,ve,Ge);return null}return oe=Zt(oe),N&&N[de]?N.K(ee,oe,u(ve)?!!ve.capture:!1,Ge):Re(N,ee,oe,!1,ve,Ge)}function Re(N,ee,oe,ve,Ge,at){if(!ee)throw Error("Invalid event type");var kt=u(Ge)?!!Ge.capture:!!Ge,Sn=Rt(N);if(Sn||(N[Ze]=Sn=new me(N)),oe=Sn.add(ee,oe,ve,kt,at),oe.proxy)return oe;if(ve=ze(),oe.proxy=ve,ve.src=N,ve.listener=oe,N.addEventListener)Z||(Ge=kt),Ge===void 0&&(Ge=!1),N.addEventListener(ee.toString(),ve,Ge);else if(N.attachEvent)N.attachEvent(_t(ee.toString()),ve);else if(N.addListener&&N.removeListener)N.addListener(ve);else throw Error("addEventListener and attachEvent are unavailable.");return oe}function ze(){function N(oe){return ee.call(N.src,N.listener,oe)}const ee=ft;return N}function Je(N,ee,oe,ve,Ge){if(Array.isArray(ee))for(var at=0;at<ee.length;at++)Je(N,ee[at],oe,ve,Ge);else ve=u(ve)?!!ve.capture:!!ve,oe=Zt(oe),N&&N[de]?(N=N.i,ee=String(ee).toString(),ee in N.g&&(at=N.g[ee],oe=Me(at,oe,ve,Ge),-1<oe&&(Se(at[oe]),Array.prototype.splice.call(at,oe,1),at.length==0&&(delete N.g[ee],N.h--)))):N&&(N=Rt(N))&&(ee=N.g[ee.toString()],N=-1,ee&&(N=Me(ee,oe,ve,Ge)),(oe=-1<N?ee[N]:null)&&dt(oe))}function dt(N){if(typeof N!="number"&&N&&!N.da){var ee=N.src;if(ee&&ee[de])ce(ee.i,N);else{var oe=N.type,ve=N.proxy;ee.removeEventListener?ee.removeEventListener(oe,ve,N.capture):ee.detachEvent?ee.detachEvent(_t(oe),ve):ee.addListener&&ee.removeListener&&ee.removeListener(ve),(oe=Rt(ee))?(ce(oe,N),oe.h==0&&(oe.src=null,ee[Ze]=null)):Se(N)}}}function _t(N){return N in Fe?Fe[N]:Fe[N]="on"+N}function ft(N,ee){if(N.da)N=!0;else{ee=new re(ee,this);var oe=N.listener,ve=N.ha||N.src;N.fa&&dt(N),N=oe.call(ve,ee)}return N}function Rt(N){return N=N[Ze],N instanceof me?N:null}var Ut="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zt(N){return typeof N=="function"?N:(N[Ut]||(N[Ut]=function(ee){return N.handleEvent(ee)}),N[Ut])}function Mt(){O.call(this),this.i=new me(this),this.M=this,this.F=null}y(Mt,O),Mt.prototype[de]=!0,Mt.prototype.removeEventListener=function(N,ee,oe,ve){Je(this,N,ee,oe,ve)};function jt(N,ee){var oe,ve=N.F;if(ve)for(oe=[];ve;ve=ve.F)oe.push(ve);if(N=N.M,ve=ee.type||ee,typeof ee=="string")ee=new W(ee,N);else if(ee instanceof W)ee.target=ee.target||N;else{var Ge=ee;ee=new W(ve,N),j(ee,Ge)}if(Ge=!0,oe)for(var at=oe.length-1;0<=at;at--){var kt=ee.g=oe[at];Ge=Wt(kt,ve,!0,ee)&&Ge}if(kt=ee.g=N,Ge=Wt(kt,ve,!0,ee)&&Ge,Ge=Wt(kt,ve,!1,ee)&&Ge,oe)for(at=0;at<oe.length;at++)kt=ee.g=oe[at],Ge=Wt(kt,ve,!1,ee)&&Ge}Mt.prototype.N=function(){if(Mt.aa.N.call(this),this.i){var N=this.i,ee;for(ee in N.g){for(var oe=N.g[ee],ve=0;ve<oe.length;ve++)Se(oe[ve]);delete N.g[ee],N.h--}}this.F=null},Mt.prototype.K=function(N,ee,oe,ve){return this.i.add(String(N),ee,!1,oe,ve)},Mt.prototype.L=function(N,ee,oe,ve){return this.i.add(String(N),ee,!0,oe,ve)};function Wt(N,ee,oe,ve){if(ee=N.i.g[String(ee)],!ee)return!0;ee=ee.concat();for(var Ge=!0,at=0;at<ee.length;++at){var kt=ee[at];if(kt&&!kt.da&&kt.capture==oe){var Sn=kt.listener,ir=kt.ha||kt.src;kt.fa&&ce(N.i,kt),Ge=Sn.call(ir,ve)!==!1&&Ge}}return Ge&&!ve.defaultPrevented}function Ue(N,ee,oe){if(typeof N=="function")oe&&(N=m(N,oe));else if(N&&typeof N.handleEvent=="function")N=m(N.handleEvent,N);else throw Error("Invalid listener argument");return 2147483647<Number(ee)?-1:o.setTimeout(N,ee||0)}function Oe(N){N.g=Ue(()=>{N.g=null,N.i&&(N.i=!1,Oe(N))},N.l);const ee=N.h;N.h=null,N.m.apply(null,ee)}class Ie extends O{constructor(ee,oe){super(),this.m=ee,this.l=oe,this.h=null,this.i=!1,this.g=null}j(ee){this.h=arguments,this.g?this.i=!0:Oe(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xe(N){O.call(this),this.h=N,this.g={}}y(Xe,O);var mt=[];function Yt(N){R(N.g,function(ee,oe){this.g.hasOwnProperty(oe)&&dt(ee)},N),N.g={}}Xe.prototype.N=function(){Xe.aa.N.call(this),Yt(this)},Xe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kt=o.JSON.stringify,rn=o.JSON.parse,qn=class{stringify(N){return o.JSON.stringify(N,void 0)}parse(N){return o.JSON.parse(N,void 0)}};function un(){}un.prototype.h=null;function xr(N){return N.h||(N.h=N.i())}function jn(){}var Sr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qr(){W.call(this,"d")}y(qr,W);function on(){W.call(this,"c")}y(on,W);var en={},zn=null;function xa(){return zn=zn||new Mt}en.La="serverreachability";function rs(N){W.call(this,en.La,N)}y(rs,W);function ks(N){const ee=xa();jt(ee,new rs(ee))}en.STAT_EVENT="statevent";function Ua(N,ee){W.call(this,en.STAT_EVENT,N),this.stat=ee}y(Ua,W);function $t(N){const ee=xa();jt(ee,new Ua(ee,N))}en.Ma="timingevent";function vr(N,ee){W.call(this,en.Ma,N),this.size=ee}y(vr,W);function ur(N,ee){if(typeof N!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){N()},ee)}function Mr(){this.g=!0}Mr.prototype.xa=function(){this.g=!1};function Kr(N,ee,oe,ve,Ge,at){N.info(function(){if(N.g)if(at)for(var kt="",Sn=at.split("&"),ir=0;ir<Sn.length;ir++){var Pn=Sn[ir].split("=");if(1<Pn.length){var Ir=Pn[0];Pn=Pn[1];var Or=Ir.split("_");kt=2<=Or.length&&Or[1]=="type"?kt+(Ir+"="+Pn+"&"):kt+(Ir+"=redacted&")}}else kt=null;else kt=at;return"XMLHTTP REQ ("+ve+") [attempt "+Ge+"]: "+ee+`
`+oe+`
`+kt})}function ss(N,ee,oe,ve,Ge,at,kt){N.info(function(){return"XMLHTTP RESP ("+ve+") [ attempt "+Ge+"]: "+ee+`
`+oe+`
`+at+" "+kt})}function fe(N,ee,oe,ve){N.info(function(){return"XMLHTTP TEXT ("+ee+"): "+Ee(N,oe)+(ve?" "+ve:"")})}function Be(N,ee){N.info(function(){return"TIMEOUT: "+ee})}Mr.prototype.info=function(){};function Ee(N,ee){if(!N.g)return ee;if(!ee)return null;try{var oe=JSON.parse(ee);if(oe){for(N=0;N<oe.length;N++)if(Array.isArray(oe[N])){var ve=oe[N];if(!(2>ve.length)){var Ge=ve[1];if(Array.isArray(Ge)&&!(1>Ge.length)){var at=Ge[0];if(at!="noop"&&at!="stop"&&at!="close")for(var kt=1;kt<Ge.length;kt++)Ge[kt]=""}}}}return Kt(oe)}catch{return ee}}var _e={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Te={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ke;function Ye(){}y(Ye,un),Ye.prototype.g=function(){return new XMLHttpRequest},Ye.prototype.i=function(){return{}},ke=new Ye;function ot(N,ee,oe,ve){this.j=N,this.i=ee,this.l=oe,this.R=ve||1,this.U=new Xe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qe}function qe(){this.i=null,this.g="",this.h=!1}var tt={},st={};function Et(N,ee,oe){N.L=1,N.v=Sl(Oa(ee)),N.m=oe,N.P=!0,Dt(N,null)}function Dt(N,ee){N.F=Date.now(),Pt(N),N.A=Oa(N.v);var oe=N.A,ve=N.R;Array.isArray(ve)||(ve=[String(ve)]),_n(oe.i,"t",ve),N.C=0,oe=N.j.J,N.h=new qe,N.g=Ae(N.j,oe?ee:null,!N.m),0<N.O&&(N.M=new Ie(m(N.Y,N,N.g),N.O)),ee=N.U,oe=N.g,ve=N.ca;var Ge="readystatechange";Array.isArray(Ge)||(Ge&&(mt[0]=Ge.toString()),Ge=mt);for(var at=0;at<Ge.length;at++){var kt=Ce(oe,Ge[at],ve||ee.handleEvent,!1,ee.h||ee);if(!kt)break;ee.g[kt.key]=kt}ee=N.H?_(N.H):{},N.m?(N.u||(N.u="POST"),ee["Content-Type"]="application/x-www-form-urlencoded",N.g.ea(N.A,N.u,N.m,ee)):(N.u="GET",N.g.ea(N.A,N.u,null,ee)),ks(),Kr(N.i,N.u,N.A,N.l,N.R,N.m)}ot.prototype.ca=function(N){N=N.target;const ee=this.M;ee&&Vs(N)==3?ee.j():this.Y(N)},ot.prototype.Y=function(N){try{if(N==this.g)e:{const Or=Vs(this.g);var ee=this.g.Ba();const No=this.g.Z();if(!(3>Or)&&(Or!=3||this.g&&(this.h.h||this.g.oa()||md(this.g)))){this.J||Or!=4||ee==7||(ee==8||0>=No?ks(3):ks(2)),Kn(this);var oe=this.g.Z();this.X=oe;t:if(Vt(this)){var ve=md(this.g);N="";var Ge=ve.length,at=Vs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jn(this),$n(this);var kt="";break t}this.h.i=new o.TextDecoder}for(ee=0;ee<Ge;ee++)this.h.h=!0,N+=this.h.i.decode(ve[ee],{stream:!(at&&ee==Ge-1)});ve.length=0,this.h.g+=N,this.C=0,kt=this.h.g}else kt=this.g.oa();if(this.o=oe==200,ss(this.i,this.u,this.A,this.l,this.R,Or,oe),this.o){if(this.T&&!this.K){t:{if(this.g){var Sn,ir=this.g;if((Sn=ir.g?ir.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Sn)){var Pn=Sn;break t}}Pn=null}if(oe=Pn)fe(this.i,this.l,oe,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,js(this,oe);else{this.o=!1,this.s=3,$t(12),Jn(this),$n(this);break e}}if(this.P){oe=!0;let Is;for(;!this.J&&this.C<kt.length;)if(Is=Ft(this,kt),Is==st){Or==4&&(this.s=4,$t(14),oe=!1),fe(this.i,this.l,null,"[Incomplete Response]");break}else if(Is==tt){this.s=4,$t(15),fe(this.i,this.l,kt,"[Invalid Chunk]"),oe=!1;break}else fe(this.i,this.l,Is,null),js(this,Is);if(Vt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Or!=4||kt.length!=0||this.h.h||(this.s=1,$t(16),oe=!1),this.o=this.o&&oe,!oe)fe(this.i,this.l,kt,"[Invalid Chunked Response]"),Jn(this),$n(this);else if(0<kt.length&&!this.W){this.W=!0;var Ir=this.j;Ir.g==this&&Ir.ba&&!Ir.M&&(Ir.j.info("Great, no buffering proxy detected. Bytes received: "+kt.length),Fl(Ir),Ir.M=!0,$t(11))}}else fe(this.i,this.l,kt,null),js(this,kt);Or==4&&Jn(this),this.o&&!this.J&&(Or==4?Dl(this.j,this):(this.o=!1,Pt(this)))}else Bl(this.g),oe==400&&0<kt.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),Jn(this),$n(this)}}}catch{}finally{}};function Vt(N){return N.g?N.u=="GET"&&N.L!=2&&N.j.Ca:!1}function Ft(N,ee){var oe=N.C,ve=ee.indexOf(`
`,oe);return ve==-1?st:(oe=Number(ee.substring(oe,ve)),isNaN(oe)?tt:(ve+=1,ve+oe>ee.length?st:(ee=ee.slice(ve,ve+oe),N.C=ve+oe,ee)))}ot.prototype.cancel=function(){this.J=!0,Jn(this)};function Pt(N){N.S=Date.now()+N.I,yn(N,N.I)}function yn(N,ee){if(N.B!=null)throw Error("WatchDog timer not null");N.B=ur(m(N.ba,N),ee)}function Kn(N){N.B&&(o.clearTimeout(N.B),N.B=null)}ot.prototype.ba=function(){this.B=null;const N=Date.now();0<=N-this.S?(Be(this.i,this.A),this.L!=2&&(ks(),$t(17)),Jn(this),this.s=2,$n(this)):yn(this,this.S-N)};function $n(N){N.j.G==0||N.J||Dl(N.j,N)}function Jn(N){Kn(N);var ee=N.M;ee&&typeof ee.ma=="function"&&ee.ma(),N.M=null,Yt(N.U),N.g&&(ee=N.g,N.g=null,ee.abort(),ee.ma())}function js(N,ee){try{var oe=N.j;if(oe.G!=0&&(oe.g==N||Ma(oe.h,N))){if(!N.K&&Ma(oe.h,N)&&oe.G==3){try{var ve=oe.Da.g.parse(ee)}catch{ve=null}if(Array.isArray(ve)&&ve.length==3){var Ge=ve;if(Ge[0]==0){e:if(!oe.u){if(oe.g)if(oe.g.F+3e3<N.F)Zo(oe),nu(oe);else break e;gc(oe),$t(18)}}else oe.za=Ge[1],0<oe.za-oe.T&&37500>Ge[2]&&oe.F&&oe.v==0&&!oe.C&&(oe.C=ur(m(oe.Za,oe),6e3));if(1>=na(oe.h)&&oe.ca){try{oe.ca()}catch{}oe.ca=void 0}}else Xa(oe,11)}else if((N.K||oe.g==N)&&Zo(oe),!k(ee))for(Ge=oe.Da.g.parse(ee),ee=0;ee<Ge.length;ee++){let Pn=Ge[ee];if(oe.T=Pn[0],Pn=Pn[1],oe.G==2)if(Pn[0]=="c"){oe.K=Pn[1],oe.ia=Pn[2];const Ir=Pn[3];Ir!=null&&(oe.la=Ir,oe.j.info("VER="+oe.la));const Or=Pn[4];Or!=null&&(oe.Aa=Or,oe.j.info("SVER="+oe.Aa));const No=Pn[5];No!=null&&typeof No=="number"&&0<No&&(ve=1.5*No,oe.L=ve,oe.j.info("backChannelRequestTimeoutMs_="+ve)),ve=oe;const Is=N.g;if(Is){const Fi=Is.g?Is.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fi){var at=ve.h;at.g||Fi.indexOf("spdy")==-1&&Fi.indexOf("quic")==-1&&Fi.indexOf("h2")==-1||(at.j=at.l,at.g=new Set,at.h&&(as(at,at.h),at.h=null))}if(ve.D){const Rl=Is.g?Is.g.getResponseHeader("X-HTTP-Session-Id"):null;Rl&&(ve.ya=Rl,kr(ve.I,ve.D,Rl))}}oe.G=3,oe.l&&oe.l.ua(),oe.ba&&(oe.R=Date.now()-N.F,oe.j.info("Handshake RTT: "+oe.R+"ms")),ve=oe;var kt=N;if(ve.qa=q(ve,ve.J?ve.ia:null,ve.W),kt.K){ya(ve.h,kt);var Sn=kt,ir=ve.L;ir&&(Sn.I=ir),Sn.B&&(Kn(Sn),Pt(Sn)),ve.g=kt}else su(ve);0<oe.i.length&&ru(oe)}else Pn[0]!="stop"&&Pn[0]!="close"||Xa(oe,7);else oe.G==3&&(Pn[0]=="stop"||Pn[0]=="close"?Pn[0]=="stop"?Xa(oe,7):Jo(oe):Pn[0]!="noop"&&oe.l&&oe.l.ta(Pn),oe.v=0)}}ks(4)}catch{}}var Ti=class{constructor(N,ee){this.g=N,this.map=ee}};function Qs(N){this.l=N||10,o.PerformanceNavigationTiming?(N=o.performance.getEntriesByType("navigation"),N=0<N.length&&(N[0].nextHopProtocol=="hq"||N[0].nextHopProtocol=="h2")):N=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=N?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function va(N){return N.h?!0:N.g?N.g.size>=N.j:!1}function na(N){return N.h?1:N.g?N.g.size:0}function Ma(N,ee){return N.h?N.h==ee:N.g?N.g.has(ee):!1}function as(N,ee){N.g?N.g.add(ee):N.h=ee}function ya(N,ee){N.h&&N.h==ee?N.h=null:N.g&&N.g.has(ee)&&N.g.delete(ee)}Qs.prototype.cancel=function(){if(this.i=Zc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const N of this.g.values())N.cancel();this.g.clear()}};function Zc(N){if(N.h!=null)return N.i.concat(N.h.D);if(N.g!=null&&N.g.size!==0){let ee=N.i;for(const oe of N.g.values())ee=ee.concat(oe.D);return ee}return x(N.i)}function dd(N){if(N.V&&typeof N.V=="function")return N.V();if(typeof Map<"u"&&N instanceof Map||typeof Set<"u"&&N instanceof Set)return Array.from(N.values());if(typeof N=="string")return N.split("");if(l(N)){for(var ee=[],oe=N.length,ve=0;ve<oe;ve++)ee.push(N[ve]);return ee}ee=[],oe=0;for(ve in N)ee[oe++]=N[ve];return ee}function Cl(N){if(N.na&&typeof N.na=="function")return N.na();if(!N.V||typeof N.V!="function"){if(typeof Map<"u"&&N instanceof Map)return Array.from(N.keys());if(!(typeof Set<"u"&&N instanceof Set)){if(l(N)||typeof N=="string"){var ee=[];N=N.length;for(var oe=0;oe<N;oe++)ee.push(oe);return ee}ee=[],oe=0;for(const ve in N)ee[oe++]=ve;return ee}}}function oA(N,ee){if(N.forEach&&typeof N.forEach=="function")N.forEach(ee,void 0);else if(l(N)||typeof N=="string")Array.prototype.forEach.call(N,ee,void 0);else for(var oe=Cl(N),ve=dd(N),Ge=ve.length,at=0;at<Ge;at++)ee.call(void 0,ve[at],oe&&oe[at],N)}var Pa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eu(N,ee){if(N){N=N.split("&");for(var oe=0;oe<N.length;oe++){var ve=N[oe].indexOf("="),Ge=null;if(0<=ve){var at=N[oe].substring(0,ve);Ge=N[oe].substring(ve+1)}else at=N[oe];ee(at,Ge?decodeURIComponent(Ge.replace(/\+/g," ")):"")}}}function yr(N){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,N instanceof yr){this.h=N.h,El(this,N.j),this.o=N.o,this.g=N.g,_l(this,N.s),this.l=N.l;var ee=N.i,oe=new bo;oe.i=ee.i,ee.g&&(oe.g=new Map(ee.g),oe.h=ee.h),wo(this,oe),this.m=N.m}else N&&(ee=String(N).match(Pa))?(this.h=!1,El(this,ee[1]||"",!0),this.o=Ni(ee[2]||""),this.g=Ni(ee[3]||"",!0),_l(this,ee[4]),this.l=Ni(ee[5]||"",!0),wo(this,ee[6]||"",!0),this.m=Ni(ee[7]||"")):(this.h=!1,this.i=new bo(null,this.h))}yr.prototype.toString=function(){var N=[],ee=this.j;ee&&N.push(Ko(ee,lA,!0),":");var oe=this.g;return(oe||ee=="file")&&(N.push("//"),(ee=this.o)&&N.push(Ko(ee,lA,!0),"@"),N.push(encodeURIComponent(String(oe)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),oe=this.s,oe!=null&&N.push(":",String(oe))),(oe=this.l)&&(this.g&&oe.charAt(0)!="/"&&N.push("/"),N.push(Ko(oe,oe.charAt(0)=="/"?$o:cA,!0))),(oe=this.i.toString())&&N.push("?",oe),(oe=this.m)&&N.push("#",Ko(oe,Wo)),N.join("")};function Oa(N){return new yr(N)}function El(N,ee,oe){N.j=oe?Ni(ee,!0):ee,N.j&&(N.j=N.j.replace(/:$/,""))}function _l(N,ee){if(ee){if(ee=Number(ee),isNaN(ee)||0>ee)throw Error("Bad port number "+ee);N.s=ee}else N.s=null}function wo(N,ee,oe){ee instanceof bo?(N.i=ee,hd(N.i,N.h)):(oe||(ee=Ko(ee,tu)),N.i=new bo(ee,N.h))}function kr(N,ee,oe){N.i.set(ee,oe)}function Sl(N){return kr(N,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),N}function Ni(N,ee){return N?ee?decodeURI(N.replace(/%25/g,"%2525")):decodeURIComponent(N):""}function Ko(N,ee,oe){return typeof N=="string"?(N=encodeURI(N).replace(ee,fd),oe&&(N=N.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N):null}function fd(N){return N=N.charCodeAt(0),"%"+(N>>4&15).toString(16)+(N&15).toString(16)}var lA=/[#\/\?@]/g,cA=/[#\?:]/g,$o=/[#\?]/g,tu=/[#\?@]/g,Wo=/#/g;function bo(N,ee){this.h=this.g=null,this.i=N||null,this.j=!!ee}function $r(N){N.g||(N.g=new Map,N.h=0,N.i&&eu(N.i,function(ee,oe){N.add(decodeURIComponent(ee.replace(/\+/g," ")),oe)}))}t=bo.prototype,t.add=function(N,ee){$r(this),this.i=null,N=Eo(this,N);var oe=this.g.get(N);return oe||this.g.set(N,oe=[]),oe.push(ee),this.h+=1,this};function Yo(N,ee){$r(N),ee=Eo(N,ee),N.g.has(ee)&&(N.i=null,N.h-=N.g.get(ee).length,N.g.delete(ee))}function Co(N,ee){return $r(N),ee=Eo(N,ee),N.g.has(ee)}t.forEach=function(N,ee){$r(this),this.g.forEach(function(oe,ve){oe.forEach(function(Ge){N.call(ee,Ge,ve,this)},this)},this)},t.na=function(){$r(this);const N=Array.from(this.g.values()),ee=Array.from(this.g.keys()),oe=[];for(let ve=0;ve<ee.length;ve++){const Ge=N[ve];for(let at=0;at<Ge.length;at++)oe.push(ee[ve])}return oe},t.V=function(N){$r(this);let ee=[];if(typeof N=="string")Co(this,N)&&(ee=ee.concat(this.g.get(Eo(this,N))));else{N=Array.from(this.g.values());for(let oe=0;oe<N.length;oe++)ee=ee.concat(N[oe])}return ee},t.set=function(N,ee){return $r(this),this.i=null,N=Eo(this,N),Co(this,N)&&(this.h-=this.g.get(N).length),this.g.set(N,[ee]),this.h+=1,this},t.get=function(N,ee){return N?(N=this.V(N),0<N.length?String(N[0]):ee):ee};function _n(N,ee,oe){Yo(N,ee),0<oe.length&&(N.i=null,N.g.set(Eo(N,ee),x(oe)),N.h+=oe.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const N=[],ee=Array.from(this.g.keys());for(var oe=0;oe<ee.length;oe++){var ve=ee[oe];const at=encodeURIComponent(String(ve)),kt=this.V(ve);for(ve=0;ve<kt.length;ve++){var Ge=at;kt[ve]!==""&&(Ge+="="+encodeURIComponent(String(kt[ve]))),N.push(Ge)}}return this.i=N.join("&")};function Eo(N,ee){return ee=String(ee),N.j&&(ee=ee.toLowerCase()),ee}function hd(N,ee){ee&&!N.j&&($r(N),N.i=null,N.g.forEach(function(oe,ve){var Ge=ve.toLowerCase();ve!=Ge&&(Yo(this,ve),_n(this,Ge,oe))},N)),N.j=ee}function $a(N,ee){const oe=new Mr;if(o.Image){const ve=new Image;ve.onload=p(Ai,oe,"TestLoadImage: loaded",!0,ee,ve),ve.onerror=p(Ai,oe,"TestLoadImage: error",!1,ee,ve),ve.onabort=p(Ai,oe,"TestLoadImage: abort",!1,ee,ve),ve.ontimeout=p(Ai,oe,"TestLoadImage: timeout",!1,ee,ve),o.setTimeout(function(){ve.ontimeout&&ve.ontimeout()},1e4),ve.src=N}else ee(!1)}function Bi(N,ee){const oe=new Mr,ve=new AbortController,Ge=setTimeout(()=>{ve.abort(),Ai(oe,"TestPingServer: timeout",!1,ee)},1e4);fetch(N,{signal:ve.signal}).then(at=>{clearTimeout(Ge),at.ok?Ai(oe,"TestPingServer: ok",!0,ee):Ai(oe,"TestPingServer: server error",!1,ee)}).catch(()=>{clearTimeout(Ge),Ai(oe,"TestPingServer: error",!1,ee)})}function Ai(N,ee,oe,ve,Ge){try{Ge&&(Ge.onload=null,Ge.onerror=null,Ge.onabort=null,Ge.ontimeout=null),ve(oe)}catch{}}function _o(){this.g=new qn}function ki(N,ee,oe){const ve=oe||"";try{oA(N,function(Ge,at){let kt=Ge;u(Ge)&&(kt=Kt(Ge)),ee.push(ve+at+"="+encodeURIComponent(kt))})}catch(Ge){throw ee.push(ve+"type="+encodeURIComponent("_badmap")),Ge}}function Tl(N){this.l=N.Ub||null,this.j=N.eb||!1}y(Tl,un),Tl.prototype.g=function(){return new Xo(this.l,this.j)},Tl.prototype.i=function(N){return function(){return N}}({});function Xo(N,ee){Mt.call(this),this.D=N,this.o=ee,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Xo,Mt),t=Xo.prototype,t.open=function(N,ee){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=N,this.A=ee,this.readyState=1,Wa(this)},t.send=function(N){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const ee={headers:this.u,method:this.B,credentials:this.m,cache:void 0};N&&(ee.body=N),(this.D||o).fetch(new Request(this.A,ee)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ii(this)),this.readyState=0},t.Sa=function(N){if(this.g&&(this.l=N,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=N.headers,this.readyState=2,Wa(this)),this.g&&(this.readyState=3,Wa(this),this.g)))if(this.responseType==="arraybuffer")N.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in N){if(this.j=N.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uA(this)}else N.text().then(this.Ra.bind(this),this.ga.bind(this))};function uA(N){N.j.read().then(N.Pa.bind(N)).catch(N.ga.bind(N))}t.Pa=function(N){if(this.g){if(this.o&&N.value)this.response.push(N.value);else if(!this.o){var ee=N.value?N.value:new Uint8Array(0);(ee=this.v.decode(ee,{stream:!N.done}))&&(this.response=this.responseText+=ee)}N.done?Ii(this):Wa(this),this.readyState==3&&uA(this)}},t.Ra=function(N){this.g&&(this.response=this.responseText=N,Ii(this))},t.Qa=function(N){this.g&&(this.response=N,Ii(this))},t.ga=function(){this.g&&Ii(this)};function Ii(N){N.readyState=4,N.l=null,N.j=null,N.v=null,Wa(N)}t.setRequestHeader=function(N,ee){this.u.append(N,ee)},t.getResponseHeader=function(N){return this.h&&this.h.get(N.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const N=[],ee=this.h.entries();for(var oe=ee.next();!oe.done;)oe=oe.value,N.push(oe[0]+": "+oe[1]),oe=ee.next();return N.join(`\r
`)};function Wa(N){N.onreadystatechange&&N.onreadystatechange.call(N)}Object.defineProperty(Xo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(N){this.m=N?"include":"same-origin"}});function So(N){let ee="";return R(N,function(oe,ve){ee+=ve,ee+=":",ee+=oe,ee+=`\r
`}),ee}function Hs(N,ee,oe){e:{for(ve in oe){var ve=!1;break e}ve=!0}ve||(oe=So(oe),typeof N=="string"?oe!=null&&encodeURIComponent(String(oe)):kr(N,ee,oe))}function ar(N){Mt.call(this),this.headers=new Map,this.o=N||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(ar,Mt);var Nl=/^https?$/i,To=["POST","PUT"];t=ar.prototype,t.Ha=function(N){this.J=N},t.ea=function(N,ee,oe,ve){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+N);ee=ee?ee.toUpperCase():"GET",this.D=N,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ke.g(),this.v=this.o?xr(this.o):xr(ke),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(ee,String(N),!0),this.B=!1}catch(at){AA(this,at);return}if(N=oe||"",oe=new Map(this.headers),ve)if(Object.getPrototypeOf(ve)===Object.prototype)for(var Ge in ve)oe.set(Ge,ve[Ge]);else if(typeof ve.keys=="function"&&typeof ve.get=="function")for(const at of ve.keys())oe.set(at,ve.get(at));else throw Error("Unknown input type for opt_headers: "+String(ve));ve=Array.from(oe.keys()).find(at=>at.toLowerCase()=="content-type"),Ge=o.FormData&&N instanceof o.FormData,!(0<=Array.prototype.indexOf.call(To,ee,void 0))||ve||Ge||oe.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[at,kt]of oe)this.g.setRequestHeader(at,kt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ya(this),this.u=!0,this.g.send(N),this.u=!1}catch(at){AA(this,at)}};function AA(N,ee){N.h=!1,N.g&&(N.j=!0,N.g.abort(),N.j=!1),N.l=ee,N.m=5,dc(N),lo(N)}function dc(N){N.A||(N.A=!0,jt(N,"complete"),jt(N,"error"))}t.abort=function(N){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=N||7,jt(this,"complete"),jt(this,"abort"),lo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),lo(this,!0)),ar.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?fc(this):this.bb())},t.bb=function(){fc(this)};function fc(N){if(N.h&&typeof i<"u"&&(!N.v[1]||Vs(N)!=4||N.Z()!=2)){if(N.u&&Vs(N)==4)Ue(N.Ea,0,N);else if(jt(N,"readystatechange"),Vs(N)==4){N.h=!1;try{const kt=N.Z();e:switch(kt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ee=!0;break e;default:ee=!1}var oe;if(!(oe=ee)){var ve;if(ve=kt===0){var Ge=String(N.D).match(Pa)[1]||null;!Ge&&o.self&&o.self.location&&(Ge=o.self.location.protocol.slice(0,-1)),ve=!Nl.test(Ge?Ge.toLowerCase():"")}oe=ve}if(oe)jt(N,"complete"),jt(N,"success");else{N.m=6;try{var at=2<Vs(N)?N.g.statusText:""}catch{at=""}N.l=at+" ["+N.Z()+"]",dc(N)}}finally{lo(N)}}}}function lo(N,ee){if(N.g){Ya(N);const oe=N.g,ve=N.v[0]?()=>{}:null;N.g=null,N.v=null,ee||jt(N,"ready");try{oe.onreadystatechange=ve}catch{}}}function Ya(N){N.I&&(o.clearTimeout(N.I),N.I=null)}t.isActive=function(){return!!this.g};function Vs(N){return N.g?N.g.readyState:0}t.Z=function(){try{return 2<Vs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(N){if(this.g){var ee=this.g.responseText;return N&&ee.indexOf(N)==0&&(ee=ee.substring(N.length)),rn(ee)}};function md(N){try{if(!N.g)return null;if("response"in N.g)return N.g.response;switch(N.H){case"":case"text":return N.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in N.g)return N.g.mozResponseArrayBuffer}return null}catch{return null}}function Bl(N){const ee={};N=(N.g&&2<=Vs(N)&&N.g.getAllResponseHeaders()||"").split(`\r
`);for(let ve=0;ve<N.length;ve++){if(k(N[ve]))continue;var oe=D(N[ve]);const Ge=oe[0];if(oe=oe[1],typeof oe!="string")continue;oe=oe.trim();const at=ee[Ge]||[];ee[Ge]=at,at.push(oe)}E(ee,function(ve){return ve.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ja(N,ee,oe){return oe&&oe.internalChannelParams&&oe.internalChannelParams[N]||ee}function kl(N){this.Aa=0,this.i=[],this.j=new Mr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ja("failFast",!1,N),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ja("baseRetryDelayMs",5e3,N),this.cb=ja("retryDelaySeedMs",1e4,N),this.Wa=ja("forwardChannelMaxRetries",2,N),this.wa=ja("forwardChannelRequestTimeoutMs",2e4,N),this.pa=N&&N.xmlHttpFactory||void 0,this.Xa=N&&N.Tb||void 0,this.Ca=N&&N.useFetchStreams||!1,this.L=void 0,this.J=N&&N.supportsCrossDomainXhr||!1,this.K="",this.h=new Qs(N&&N.concurrentRequestLimit),this.Da=new _o,this.P=N&&N.fastHandshake||!1,this.O=N&&N.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=N&&N.Rb||!1,N&&N.xa&&this.j.xa(),N&&N.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&N&&N.detectBufferingProxy||!1,this.ja=void 0,N&&N.longPollingTimeout&&0<N.longPollingTimeout&&(this.ja=N.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=kl.prototype,t.la=8,t.G=1,t.connect=function(N,ee,oe,ve){$t(0),this.W=N,this.H=ee||{},oe&&ve!==void 0&&(this.H.OSID=oe,this.H.OAID=ve),this.F=this.X,this.I=q(this,null,this.W),ru(this)};function Jo(N){if(hc(N),N.G==3){var ee=N.U++,oe=Oa(N.I);if(kr(oe,"SID",N.K),kr(oe,"RID",ee),kr(oe,"TYPE","terminate"),Il(N,oe),ee=new ot(N,N.j,ee),ee.L=2,ee.v=Sl(Oa(oe)),oe=!1,o.navigator&&o.navigator.sendBeacon)try{oe=o.navigator.sendBeacon(ee.v.toString(),"")}catch{}!oe&&o.Image&&(new Image().src=ee.v,oe=!0),oe||(ee.g=Ae(ee.j,null),ee.g.ea(ee.v)),ee.F=Date.now(),Pt(ee)}au(N)}function nu(N){N.g&&(Fl(N),N.g.cancel(),N.g=null)}function hc(N){nu(N),N.u&&(o.clearTimeout(N.u),N.u=null),Zo(N),N.h.cancel(),N.s&&(typeof N.s=="number"&&o.clearTimeout(N.s),N.s=null)}function ru(N){if(!va(N.h)&&!N.s){N.s=!0;var ee=N.Ga;ne||K(),V||(ne(),V=!0),J.add(ee,N),N.B=0}}function dA(N,ee){return na(N.h)>=N.h.j-(N.s?1:0)?!1:N.s?(N.i=ee.D.concat(N.i),!0):N.G==1||N.G==2||N.B>=(N.Va?0:N.Wa)?!1:(N.s=ur(m(N.Ga,N,ee),xc(N,N.B)),N.B++,!0)}t.Ga=function(N){if(this.s)if(this.s=null,this.G==1){if(!N){this.U=Math.floor(1e5*Math.random()),N=this.U++;const Ge=new ot(this,this.j,N);let at=this.o;if(this.S&&(at?(at=_(at),j(at,this.S)):at=this.S),this.m!==null||this.O||(Ge.H=at,at=null),this.P)e:{for(var ee=0,oe=0;oe<this.i.length;oe++){t:{var ve=this.i[oe];if("__data__"in ve.map&&(ve=ve.map.__data__,typeof ve=="string")){ve=ve.length;break t}ve=void 0}if(ve===void 0)break;if(ee+=ve,4096<ee){ee=oe;break e}if(ee===4096||oe===this.i.length-1){ee=oe+1;break e}}ee=1e3}else ee=1e3;ee=pc(this,Ge,ee),oe=Oa(this.I),kr(oe,"RID",N),kr(oe,"CVER",22),this.D&&kr(oe,"X-HTTP-Session-Id",this.D),Il(this,oe),at&&(this.O?ee="headers="+encodeURIComponent(String(So(at)))+"&"+ee:this.m&&Hs(oe,this.m,at)),as(this.h,Ge),this.Ua&&kr(oe,"TYPE","init"),this.P?(kr(oe,"$req",ee),kr(oe,"SID","null"),Ge.T=!0,Et(Ge,oe,null)):Et(Ge,oe,ee),this.G=2}}else this.G==3&&(N?mc(this,N):this.i.length==0||va(this.h)||mc(this))};function mc(N,ee){var oe;ee?oe=ee.l:oe=N.U++;const ve=Oa(N.I);kr(ve,"SID",N.K),kr(ve,"RID",oe),kr(ve,"AID",N.T),Il(N,ve),N.m&&N.o&&Hs(ve,N.m,N.o),oe=new ot(N,N.j,oe,N.B+1),N.m===null&&(oe.H=N.o),ee&&(N.i=ee.D.concat(N.i)),ee=pc(N,oe,1e3),oe.I=Math.round(.5*N.wa)+Math.round(.5*N.wa*Math.random()),as(N.h,oe),Et(oe,ve,ee)}function Il(N,ee){N.H&&R(N.H,function(oe,ve){kr(ee,ve,oe)}),N.l&&oA({},function(oe,ve){kr(ee,ve,oe)})}function pc(N,ee,oe){oe=Math.min(N.i.length,oe);var ve=N.l?m(N.l.Na,N.l,N):null;e:{var Ge=N.i;let at=-1;for(;;){const kt=["count="+oe];at==-1?0<oe?(at=Ge[0].g,kt.push("ofs="+at)):at=0:kt.push("ofs="+at);let Sn=!0;for(let ir=0;ir<oe;ir++){let Pn=Ge[ir].g;const Ir=Ge[ir].map;if(Pn-=at,0>Pn)at=Math.max(0,Ge[ir].g-100),Sn=!1;else try{ki(Ir,kt,"req"+Pn+"_")}catch{ve&&ve(Ir)}}if(Sn){ve=kt.join("&");break e}}}return N=N.i.splice(0,oe),ee.D=N,ve}function su(N){if(!N.g&&!N.u){N.Y=1;var ee=N.Fa;ne||K(),V||(ne(),V=!0),J.add(ee,N),N.v=0}}function gc(N){return N.g||N.u||3<=N.v?!1:(N.Y++,N.u=ur(m(N.Fa,N),xc(N,N.v)),N.v++,!0)}t.Fa=function(){if(this.u=null,pd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var N=2*this.R;this.j.info("BP detection timer enabled: "+N),this.A=ur(m(this.ab,this),N)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$t(10),nu(this),pd(this))};function Fl(N){N.A!=null&&(o.clearTimeout(N.A),N.A=null)}function pd(N){N.g=new ot(N,N.j,"rpc",N.Y),N.m===null&&(N.g.H=N.o),N.g.O=0;var ee=Oa(N.qa);kr(ee,"RID","rpc"),kr(ee,"SID",N.K),kr(ee,"AID",N.T),kr(ee,"CI",N.F?"0":"1"),!N.F&&N.ja&&kr(ee,"TO",N.ja),kr(ee,"TYPE","xmlhttp"),Il(N,ee),N.m&&N.o&&Hs(ee,N.m,N.o),N.L&&(N.g.I=N.L);var oe=N.g;N=N.ia,oe.L=1,oe.v=Sl(Oa(ee)),oe.m=null,oe.P=!0,Dt(oe,N)}t.Za=function(){this.C!=null&&(this.C=null,nu(this),gc(this),$t(19))};function Zo(N){N.C!=null&&(o.clearTimeout(N.C),N.C=null)}function Dl(N,ee){var oe=null;if(N.g==ee){Zo(N),Fl(N),N.g=null;var ve=2}else if(Ma(N.h,ee))oe=ee.D,ya(N.h,ee),ve=1;else return;if(N.G!=0){if(ee.o)if(ve==1){oe=ee.m?ee.m.length:0,ee=Date.now()-ee.F;var Ge=N.B;ve=xa(),jt(ve,new vr(ve,oe)),ru(N)}else su(N);else if(Ge=ee.s,Ge==3||Ge==0&&0<ee.X||!(ve==1&&dA(N,ee)||ve==2&&gc(N)))switch(oe&&0<oe.length&&(ee=N.h,ee.i=ee.i.concat(oe)),Ge){case 1:Xa(N,5);break;case 4:Xa(N,10);break;case 3:Xa(N,6);break;default:Xa(N,2)}}}function xc(N,ee){let oe=N.Ta+Math.floor(Math.random()*N.cb);return N.isActive()||(oe*=2),oe*ee}function Xa(N,ee){if(N.j.info("Error code "+ee),ee==2){var oe=m(N.fb,N),ve=N.Xa;const Ge=!ve;ve=new yr(ve||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||El(ve,"https"),Sl(ve),Ge?$a(ve.toString(),oe):Bi(ve.toString(),oe)}else $t(2);N.G=0,N.l&&N.l.sa(ee),au(N),hc(N)}t.fb=function(N){N?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function au(N){if(N.G=0,N.ka=[],N.l){const ee=Zc(N.h);(ee.length!=0||N.i.length!=0)&&(C(N.ka,ee),C(N.ka,N.i),N.h.i.length=0,x(N.i),N.i.length=0),N.l.ra()}}function q(N,ee,oe){var ve=oe instanceof yr?Oa(oe):new yr(oe);if(ve.g!="")ee&&(ve.g=ee+"."+ve.g),_l(ve,ve.s);else{var Ge=o.location;ve=Ge.protocol,ee=ee?ee+"."+Ge.hostname:Ge.hostname,Ge=+Ge.port;var at=new yr(null);ve&&El(at,ve),ee&&(at.g=ee),Ge&&_l(at,Ge),oe&&(at.l=oe),ve=at}return oe=N.D,ee=N.ya,oe&&ee&&kr(ve,oe,ee),kr(ve,"VER",N.la),Il(N,ve),ve}function Ae(N,ee,oe){if(ee&&!N.J)throw Error("Can't create secondary domain capable XhrIo object.");return ee=N.Ca&&!N.pa?new ar(new Tl({eb:oe})):new ar(N.pa),ee.Ha(N.J),ee}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function De(){}t=De.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Pe(){}Pe.prototype.g=function(N,ee){return new Ke(N,ee)};function Ke(N,ee){Mt.call(this),this.g=new kl(ee),this.l=N,this.h=ee&&ee.messageUrlParams||null,N=ee&&ee.messageHeaders||null,ee&&ee.clientProtocolHeaderRequired&&(N?N["X-Client-Protocol"]="webchannel":N={"X-Client-Protocol":"webchannel"}),this.g.o=N,N=ee&&ee.initMessageHeaders||null,ee&&ee.messageContentType&&(N?N["X-WebChannel-Content-Type"]=ee.messageContentType:N={"X-WebChannel-Content-Type":ee.messageContentType}),ee&&ee.va&&(N?N["X-WebChannel-Client-Profile"]=ee.va:N={"X-WebChannel-Client-Profile":ee.va}),this.g.S=N,(N=ee&&ee.Sb)&&!k(N)&&(this.g.m=N),this.v=ee&&ee.supportsCrossDomainXhr||!1,this.u=ee&&ee.sendRawJson||!1,(ee=ee&&ee.httpSessionIdParam)&&!k(ee)&&(this.g.D=ee,N=this.h,N!==null&&ee in N&&(N=this.h,ee in N&&delete N[ee])),this.j=new zt(this)}y(Ke,Mt),Ke.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ke.prototype.close=function(){Jo(this.g)},Ke.prototype.o=function(N){var ee=this.g;if(typeof N=="string"){var oe={};oe.__data__=N,N=oe}else this.u&&(oe={},oe.__data__=Kt(N),N=oe);ee.i.push(new Ti(ee.Ya++,N)),ee.G==3&&ru(ee)},Ke.prototype.N=function(){this.g.l=null,delete this.j,Jo(this.g),delete this.g,Ke.aa.N.call(this)};function At(N){qr.call(this),N.__headers__&&(this.headers=N.__headers__,this.statusCode=N.__status__,delete N.__headers__,delete N.__status__);var ee=N.__sm__;if(ee){e:{for(const oe in ee){N=oe;break e}N=void 0}(this.i=N)&&(N=this.i,ee=ee!==null&&N in ee?ee[N]:void 0),this.data=ee}else this.data=N}y(At,qr);function Bt(){on.call(this),this.status=1}y(Bt,on);function zt(N){this.g=N}y(zt,De),zt.prototype.ua=function(){jt(this.g,"a")},zt.prototype.ta=function(N){jt(this.g,new At(N))},zt.prototype.sa=function(N){jt(this.g,new Bt)},zt.prototype.ra=function(){jt(this.g,"b")},Pe.prototype.createWebChannel=Pe.prototype.g,Ke.prototype.send=Ke.prototype.o,Ke.prototype.open=Ke.prototype.m,Ke.prototype.close=Ke.prototype.close,OP=function(){return new Pe},PP=function(){return xa()},MP=en,d5={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_e.NO_ERROR=0,_e.TIMEOUT=8,_e.HTTP_ERROR=6,E2=_e,Te.COMPLETE="complete",UP=Te,jn.EventType=Sr,Sr.OPEN="a",Sr.CLOSE="b",Sr.ERROR="c",Sr.MESSAGE="d",Mt.prototype.listen=Mt.prototype.K,$g=jn,ar.prototype.listenOnce=ar.prototype.L,ar.prototype.getLastError=ar.prototype.Ka,ar.prototype.getLastErrorCode=ar.prototype.Ba,ar.prototype.getStatus=ar.prototype.Z,ar.prototype.getResponseJson=ar.prototype.Oa,ar.prototype.getResponseText=ar.prototype.oa,ar.prototype.send=ar.prototype.ea,ar.prototype.setWithCredentials=ar.prototype.Ha,LP=ar}).apply(typeof iy<"u"?iy:typeof self<"u"?self:typeof window<"u"?window:{});const X3="@firebase/firestore",J3="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qi.UNAUTHENTICATED=new qi(null),qi.GOOGLE_CREDENTIALS=new qi("google-credentials-uid"),qi.FIRST_PARTY=new qi("first-party-uid"),qi.MOCK_USER=new qi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Np="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh=new yN("@firebase/firestore");function ym(){return Jh.logLevel}function sn(t,...e){if(Jh.logLevel<=mr.DEBUG){const n=e.map(FN);Jh.debug(`Firestore (${Np}): ${t}`,...n)}}function ZA(t,...e){if(Jh.logLevel<=mr.ERROR){const n=e.map(FN);Jh.error(`Firestore (${Np}): ${t}`,...n)}}function lp(t,...e){if(Jh.logLevel<=mr.WARN){const n=e.map(FN);Jh.warn(`Firestore (${Np}): ${t}`,...n)}}function FN(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,jP(t,r,n)}function jP(t,e,n){let r=`FIRESTORE (${Np}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ZA(r),new Error(r)}function zr(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||jP(e,s,r)}function Vn(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xt extends eA{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $Y{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(qi.UNAUTHENTICATED))}shutdown(){}}class WY{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class YY{constructor(e){this.t=e,this.currentUser=qi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){zr(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let a=new GA;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new GA,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{sn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(sn("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new GA)}},0),i()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(sn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(zr(typeof r.accessToken=="string",31837,{l:r}),new QP(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return zr(e===null||typeof e=="string",2055,{h:e}),new qi(e)}}class XY{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=qi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class JY{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new XY(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(qi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Z3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZY{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tc(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){zr(this.o===void 0,3512);const r=a=>{a.error!=null&&sn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const i=a.token!==this.m;return this.m=a.token,sn("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{sn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):sn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Z3(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(zr(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Z3(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eX(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=eX(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function pr(t,e){return t<e?-1:t>e?1:0}function f5(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),a=e.charAt(r);if(s!==a)return x_(s)===x_(a)?pr(s,a):x_(s)?1:-1}return pr(t.length,e.length)}const tX=55296,nX=57343;function x_(t){const e=t.charCodeAt(0);return e>=tX&&e<=nX}function cp(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF="__name__";class Lu{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ln(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ln(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Lu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Lu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=Lu.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return pr(e.length,n.length)}static compareSegments(e,n){const r=Lu.isNumericId(e),s=Lu.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Lu.extractNumericId(e).compare(Lu.extractNumericId(n)):f5(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bf.fromString(e.substring(4,e.length-2))}}class ms extends Lu{construct(e,n,r){return new ms(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Xt(yt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ms(n)}static emptyPath(){return new ms([])}}const rX=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ci extends Lu{construct(e,n,r){return new Ci(e,n,r)}static isValidIdentifier(e){return rX.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ci.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===eF}static keyField(){return new Ci([eF])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new Xt(yt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let i=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new Xt(yt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Xt(yt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else o==="`"?(i=!i,s++):o!=="."||i?(r+=o,s++):(a(),s++)}if(a(),i)throw new Xt(yt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ci(n)}static emptyPath(){return new Ci([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.path=e}static fromPath(e){return new vn(ms.fromString(e))}static fromName(e){return new vn(ms.fromString(e).popFirst(5))}static empty(){return new vn(ms.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ms.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ms.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new vn(new ms(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(t,e,n){if(!n)throw new Xt(yt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sX(t,e,n,r){if(e===!0&&r===!0)throw new Xt(yt.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tF(t){if(!vn.isDocumentKey(t))throw new Xt(yt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function nF(t){if(vn.isDocumentKey(t))throw new Xt(yt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function VP(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Rb(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ln(12329,{type:typeof t})}function go(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Xt(yt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rb(t);throw new Xt(yt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function aX(t,e){if(e<=0)throw new Xt(yt.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(t,e){const n={typeString:t};return e&&(n.value=e),n}function Iv(t,e){if(!VP(t))throw new Xt(yt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const i=t[r];if(s&&typeof i!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&i!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Xt(yt.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF=-62135596800,sF=1e6;class mn{static now(){return mn.fromMillis(Date.now())}static fromDate(e){return mn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*sF);return new mn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Xt(yt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Xt(yt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<rF)throw new Xt(yt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xt(yt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sF}_compareTo(e){return this.seconds===e.seconds?pr(this.nanoseconds,e.nanoseconds):pr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Iv(e,mn._jsonSchema))return new mn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rF;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mn._jsonSchemaVersion="firestore/timestamp/1.0",mn._jsonSchema={type:Fa("string",mn._jsonSchemaVersion),seconds:Fa("number"),nanoseconds:Fa("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{static fromTimestamp(e){return new Qn(e)}static min(){return new Qn(new mn(0,0))}static max(){return new Qn(new mn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=-1;function iX(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Qn.fromTimestamp(r===1e9?new mn(n+1,0):new mn(n,r));return new Df(s,vn.empty(),e)}function oX(t){return new Df(t.readTime,t.key,Hx)}class Df{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Df(Qn.min(),vn.empty(),Hx)}static max(){return new Df(Qn.max(),vn.empty(),Hx)}}function lX(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=vn.comparator(t.documentKey,e.documentKey),n!==0?n:pr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cX="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uX{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bp(t){if(t.code!==yt.FAILED_PRECONDITION||t.message!==cX)throw t;sn("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ln(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Tt((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Tt?n:Tt.resolve(n)}catch(n){return Tt.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Tt.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Tt.reject(n)}static resolve(e){return new Tt((n,r)=>{n(e)})}static reject(e){return new Tt((n,r)=>{r(e)})}static waitFor(e){return new Tt((n,r)=>{let s=0,a=0,i=!1;e.forEach(o=>{++s,o.next(()=>{++a,i&&a===s&&n()},l=>r(l))}),i=!0,a===s&&n()})}static or(e){let n=Tt.resolve(!1);for(const r of e)n=n.next(s=>s?Tt.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new Tt((r,s)=>{const a=e.length,i=new Array(a);let o=0;for(let l=0;l<a;l++){const u=l;n(e[u]).next(d=>{i[u]=d,++o,o===a&&r(i)},d=>s(d))}})}static doWhile(e,n){return new Tt((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function AX(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function kp(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Lb.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=-1;function Ub(t){return t==null}function pw(t){return t===0&&1/t==-1/0}function dX(t){return typeof t=="number"&&Number.isInteger(t)&&!pw(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP="";function fX(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=aF(e)),e=hX(t.get(n),e);return aF(e)}function hX(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case zP:n+="";break;default:n+=a}}return n}function aF(t){return t+zP+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iF(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Kf(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function GP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,n){this.comparator=e,this.root=n||wi.EMPTY}insert(e,n){return new Ps(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wi.BLACK,null,null))}remove(e){return new Ps(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wi.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oy(this.root,e,this.comparator,!1)}getReverseIterator(){return new oy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oy(this.root,e,this.comparator,!0)}}class oy{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wi{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??wi.RED,this.left=s??wi.EMPTY,this.right=a??wi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new wi(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return wi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return wi.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ln(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ln(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ln(27949);return e+(this.isRed()?0:1)}}wi.EMPTY=null,wi.RED=!0,wi.BLACK=!1;wi.EMPTY=new class{constructor(){this.size=0}get key(){throw Ln(57766)}get value(){throw Ln(16141)}get color(){throw Ln(16727)}get left(){throw Ln(29726)}get right(){throw Ln(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new wi(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.comparator=e,this.data=new Ps(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new oF(this.data.getIterator())}getIteratorFrom(e){return new oF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ga)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ga(this.comparator);return n.data=e,n}}class oF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e){this.fields=e,e.sort(Ci.comparator)}static empty(){return new gl([])}unionWith(e){let n=new Ga(Ci.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new gl(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cp(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new qP("Invalid base64 string: "+a):a}}(e);return new Si(n)}static fromUint8Array(e){const n=function(s){let a="";for(let i=0;i<s.length;++i)a+=String.fromCharCode(s[i]);return a}(e);return new Si(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Si.EMPTY_BYTE_STRING=new Si("");const mX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rf(t){if(zr(!!t,39018),typeof t=="string"){let e=0;const n=mX.exec(t);if(zr(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:da(t.seconds),nanos:da(t.nanos)}}function da(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Lf(t){return typeof t=="string"?Si.fromBase64String(t):Si.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="server_timestamp",$P="__type__",WP="__previous_value__",YP="__local_write_time__";function LN(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[$P])==null?void 0:r.stringValue)===KP}function Mb(t){const e=t.mapValue.fields[WP];return LN(e)?Mb(e):e}function Vx(t){const e=Rf(t.mapValue.fields[YP].timestampValue);return new mn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pX{constructor(e,n,r,s,a,i,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=d}}const gw="(default)";class zx{constructor(e,n){this.projectId=e,this.database=n||gw}static empty(){return new zx("","")}get isDefaultDatabase(){return this.database===gw}isEqual(e){return e instanceof zx&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP="__type__",gX="__max__",ly={mapValue:{}},JP="__vector__",xw="value";function Uf(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?LN(t)?4:vX(t)?9007199254740991:xX(t)?10:11:Ln(28295,{value:t})}function Ju(t,e){if(t===e)return!0;const n=Uf(t);if(n!==Uf(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vx(t).isEqual(Vx(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const i=Rf(s.timestampValue),o=Rf(a.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return Lf(s.bytesValue).isEqual(Lf(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return da(s.geoPointValue.latitude)===da(a.geoPointValue.latitude)&&da(s.geoPointValue.longitude)===da(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return da(s.integerValue)===da(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const i=da(s.doubleValue),o=da(a.doubleValue);return i===o?pw(i)===pw(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return cp(t.arrayValue.values||[],e.arrayValue.values||[],Ju);case 10:case 11:return function(s,a){const i=s.mapValue.fields||{},o=a.mapValue.fields||{};if(iF(i)!==iF(o))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(o[l]===void 0||!Ju(i[l],o[l])))return!1;return!0}(t,e);default:return Ln(52216,{left:t})}}function Gx(t,e){return(t.values||[]).find(n=>Ju(n,e))!==void 0}function up(t,e){if(t===e)return 0;const n=Uf(t),r=Uf(e);if(n!==r)return pr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pr(t.booleanValue,e.booleanValue);case 2:return function(a,i){const o=da(a.integerValue||a.doubleValue),l=da(i.integerValue||i.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return lF(t.timestampValue,e.timestampValue);case 4:return lF(Vx(t),Vx(e));case 5:return f5(t.stringValue,e.stringValue);case 6:return function(a,i){const o=Lf(a),l=Lf(i);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(a,i){const o=a.split("/"),l=i.split("/");for(let u=0;u<o.length&&u<l.length;u++){const d=pr(o[u],l[u]);if(d!==0)return d}return pr(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,i){const o=pr(da(a.latitude),da(i.latitude));return o!==0?o:pr(da(a.longitude),da(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return cF(t.arrayValue,e.arrayValue);case 10:return function(a,i){var m,p,y,x;const o=a.fields||{},l=i.fields||{},u=(m=o[xw])==null?void 0:m.arrayValue,d=(p=l[xw])==null?void 0:p.arrayValue,h=pr(((y=u==null?void 0:u.values)==null?void 0:y.length)||0,((x=d==null?void 0:d.values)==null?void 0:x.length)||0);return h!==0?h:cF(u,d)}(t.mapValue,e.mapValue);case 11:return function(a,i){if(a===ly.mapValue&&i===ly.mapValue)return 0;if(a===ly.mapValue)return 1;if(i===ly.mapValue)return-1;const o=a.fields||{},l=Object.keys(o),u=i.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const m=f5(l[h],d[h]);if(m!==0)return m;const p=up(o[l[h]],u[d[h]]);if(p!==0)return p}return pr(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Ln(23264,{he:n})}}function lF(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pr(t,e);const n=Rf(t),r=Rf(e),s=pr(n.seconds,r.seconds);return s!==0?s:pr(n.nanos,r.nanos)}function cF(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=up(n[s],r[s]);if(a)return a}return pr(n.length,r.length)}function Ap(t){return h5(t)}function h5(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Rf(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Lf(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return vn.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=h5(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const i of r)a?a=!1:s+=",",s+=`${i}:${h5(n.fields[i])}`;return s+"}"}(t.mapValue):Ln(61005,{value:t})}function _2(t){switch(Uf(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mb(t);return e?16+_2(e):16;case 5:return 2*t.stringValue.length;case 6:return Lf(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+_2(a),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Kf(r.fields,(a,i)=>{s+=a.length+_2(i)}),s}(t.mapValue);default:throw Ln(13486,{value:t})}}function uF(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function m5(t){return!!t&&"integerValue"in t}function UN(t){return!!t&&"arrayValue"in t}function AF(t){return!!t&&"nullValue"in t}function dF(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function S2(t){return!!t&&"mapValue"in t}function xX(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[XP])==null?void 0:r.stringValue)===JP}function mx(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Kf(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=mx(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=mx(t.arrayValue.values[n]);return e}return{...t}}function vX(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===gX}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this.value=e}static empty(){return new Oo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!S2(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=mx(n)}setAll(e){let n=Ci.emptyPath(),r={},s=[];e.forEach((i,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=o.popLast()}i?r[o.lastSegment()]=mx(i):s.push(o.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());S2(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ju(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];S2(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Kf(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new Oo(mx(this.value))}}function ZP(t){const e=[];return Kf(t.fields,(n,r)=>{const s=new Ci([n]);if(S2(r)){const a=ZP(r.mapValue).fields;if(a.length===0)e.push(s);else for(const i of a)e.push(s.child(i))}else e.push(s)}),new gl(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n,r,s,a,i,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Yi(e,0,Qn.min(),Qn.min(),Qn.min(),Oo.empty(),0)}static newFoundDocument(e,n,r,s){return new Yi(e,1,n,Qn.min(),r,s,0)}static newNoDocument(e,n){return new Yi(e,2,n,Qn.min(),Qn.min(),Oo.empty(),0)}static newUnknownDocument(e,n){return new Yi(e,3,n,Qn.min(),Qn.min(),Oo.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Qn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,n){this.position=e,this.inclusive=n}}function fF(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],i=t.position[s];if(a.field.isKeyField()?r=vn.comparator(vn.fromName(i.referenceValue),n.key):r=up(i,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function hF(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ju(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,n="asc"){this.field=e,this.dir=n}}function yX(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{}class Ia extends eO{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new bX(e,n,r):n==="array-contains"?new _X(e,r):n==="in"?new SX(e,r):n==="not-in"?new TX(e,r):n==="array-contains-any"?new NX(e,r):new Ia(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new CX(e,r):new EX(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(up(n,this.value)):n!==null&&Uf(this.value)===Uf(n)&&this.matchesComparison(up(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ln(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $c extends eO{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new $c(e,n)}matches(e){return tO(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function tO(t){return t.op==="and"}function nO(t){return wX(t)&&tO(t)}function wX(t){for(const e of t.filters)if(e instanceof $c)return!1;return!0}function p5(t){if(t instanceof Ia)return t.field.canonicalString()+t.op.toString()+Ap(t.value);if(nO(t))return t.filters.map(e=>p5(e)).join(",");{const e=t.filters.map(n=>p5(n)).join(",");return`${t.op}(${e})`}}function rO(t,e){return t instanceof Ia?function(r,s){return s instanceof Ia&&r.op===s.op&&r.field.isEqual(s.field)&&Ju(r.value,s.value)}(t,e):t instanceof $c?function(r,s){return s instanceof $c&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,i,o)=>a&&rO(i,s.filters[o]),!0):!1}(t,e):void Ln(19439)}function sO(t){return t instanceof Ia?function(n){return`${n.field.canonicalString()} ${n.op} ${Ap(n.value)}`}(t):t instanceof $c?function(n){return n.op.toString()+" {"+n.getFilters().map(sO).join(" ,")+"}"}(t):"Filter"}class bX extends Ia{constructor(e,n,r){super(e,n,r),this.key=vn.fromName(r.referenceValue)}matches(e){const n=vn.comparator(e.key,this.key);return this.matchesComparison(n)}}class CX extends Ia{constructor(e,n){super(e,"in",n),this.keys=aO("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class EX extends Ia{constructor(e,n){super(e,"not-in",n),this.keys=aO("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function aO(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>vn.fromName(r.referenceValue))}class _X extends Ia{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return UN(n)&&Gx(n.arrayValue,this.value)}}class SX extends Ia{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gx(this.value.arrayValue,n)}}class TX extends Ia{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gx(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Gx(this.value.arrayValue,n)}}class NX extends Ia{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!UN(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Gx(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BX{constructor(e,n=null,r=[],s=[],a=null,i=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=i,this.endAt=o,this.Te=null}}function mF(t,e=null,n=[],r=[],s=null,a=null,i=null){return new BX(t,e,n,r,s,a,i)}function MN(t){const e=Vn(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>p5(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Ub(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ap(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ap(r)).join(",")),e.Te=n}return e.Te}function PN(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!yX(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!rO(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hF(t.startAt,e.startAt)&&hF(t.endAt,e.endAt)}function g5(t){return vn.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,n=null,r=[],s=[],a=null,i="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=i,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function kX(t,e,n,r,s,a,i,o){return new Ip(t,e,n,r,s,a,i,o)}function Pb(t){return new Ip(t)}function pF(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function iO(t){return t.collectionGroup!==null}function px(t){const e=Vn(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new Ga(Ci.comparator);return i.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new qx(a,r))}),n.has(Ci.keyField().canonicalString())||e.Ie.push(new qx(Ci.keyField(),r))}return e.Ie}function Gu(t){const e=Vn(t);return e.Ee||(e.Ee=IX(e,px(t))),e.Ee}function IX(t,e){if(t.limitType==="F")return mF(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new qx(s.field,a)});const n=t.endAt?new vw(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new vw(t.startAt.position,t.startAt.inclusive):null;return mF(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function x5(t,e){const n=t.filters.concat([e]);return new Ip(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function yw(t,e,n){return new Ip(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ob(t,e){return PN(Gu(t),Gu(e))&&t.limitType===e.limitType}function oO(t){return`${MN(Gu(t))}|lt:${t.limitType}`}function wm(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>sO(s)).join(", ")}]`),Ub(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ap(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ap(s)).join(",")),`Target(${r})`}(Gu(t))}; limitType=${t.limitType})`}function jb(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):vn.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of px(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(i,o,l){const u=fF(i,o,l);return i.inclusive?u<=0:u<0}(r.startAt,px(r),s)||r.endAt&&!function(i,o,l){const u=fF(i,o,l);return i.inclusive?u>=0:u>0}(r.endAt,px(r),s))}(t,e)}function FX(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lO(t){return(e,n)=>{let r=!1;for(const s of px(t)){const a=DX(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function DX(t,e,n){const r=t.field.isKeyField()?vn.comparator(e.key,n.key):function(a,i,o){const l=i.data.field(a),u=o.data.field(a);return l!==null&&u!==null?up(l,u):Ln(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ln(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Kf(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return GP(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RX=new Ps(vn.comparator);function ed(){return RX}const cO=new Ps(vn.comparator);function Wg(...t){let e=cO;for(const n of t)e=e.insert(n.key,n);return e}function uO(t){let e=cO;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ih(){return gx()}function AO(){return gx()}function gx(){return new f0(t=>t.toString(),(t,e)=>t.isEqual(e))}const LX=new Ps(vn.comparator),UX=new Ga(vn.comparator);function gr(...t){let e=UX;for(const n of t)e=e.add(n);return e}const MX=new Ga(pr);function PX(){return MX}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pw(e)?"-0":e}}function dO(t){return{integerValue:""+t}}function OX(t,e){return dX(e)?dO(e):ON(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(){this._=void 0}}function jX(t,e,n){return t instanceof Kx?function(s,a){const i={fields:{[$P]:{stringValue:KP},[YP]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&LN(a)&&(a=Mb(a)),a&&(i.fields[WP]=a),{mapValue:i}}(n,e):t instanceof dp?hO(t,e):t instanceof $x?mO(t,e):function(s,a){const i=fO(s,a),o=gF(i)+gF(s.Ae);return m5(i)&&m5(s.Ae)?dO(o):ON(s.serializer,o)}(t,e)}function QX(t,e,n){return t instanceof dp?hO(t,e):t instanceof $x?mO(t,e):n}function fO(t,e){return t instanceof ww?function(r){return m5(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Kx extends Qb{}class dp extends Qb{constructor(e){super(),this.elements=e}}function hO(t,e){const n=pO(e);for(const r of t.elements)n.some(s=>Ju(s,r))||n.push(r);return{arrayValue:{values:n}}}class $x extends Qb{constructor(e){super(),this.elements=e}}function mO(t,e){let n=pO(e);for(const r of t.elements)n=n.filter(s=>!Ju(s,r));return{arrayValue:{values:n}}}class ww extends Qb{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function gF(t){return da(t.integerValue||t.doubleValue)}function pO(t){return UN(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,n){this.field=e,this.transform=n}}function HX(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof dp&&s instanceof dp||r instanceof $x&&s instanceof $x?cp(r.elements,s.elements,Ju):r instanceof ww&&s instanceof ww?Ju(r.Ae,s.Ae):r instanceof Kx&&s instanceof Kx}(t.transform,e.transform)}class VX{constructor(e,n){this.version=e,this.transformResults=n}}class xo{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xo}static exists(e){return new xo(void 0,e)}static updateTime(e){return new xo(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function T2(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hb{}function xO(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Vb(t.key,xo.none()):new Fv(t.key,t.data,xo.none());{const n=t.data,r=Oo.empty();let s=new Ga(Ci.comparator);for(let a of e.fields)if(!s.has(a)){let i=n.field(a);i===null&&a.length>1&&(a=a.popLast(),i=n.field(a)),i===null?r.delete(a):r.set(a,i),s=s.add(a)}return new $f(t.key,r,new gl(s.toArray()),xo.none())}}function zX(t,e,n){t instanceof Fv?function(s,a,i){const o=s.value.clone(),l=vF(s.fieldTransforms,a,i.transformResults);o.setAll(l),a.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof $f?function(s,a,i){if(!T2(s.precondition,a))return void a.convertToUnknownDocument(i.version);const o=vF(s.fieldTransforms,a,i.transformResults),l=a.data;l.setAll(vO(s)),l.setAll(o),a.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,n):function(s,a,i){a.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function xx(t,e,n,r){return t instanceof Fv?function(a,i,o,l){if(!T2(a.precondition,i))return o;const u=a.value.clone(),d=yF(a.fieldTransforms,l,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof $f?function(a,i,o,l){if(!T2(a.precondition,i))return o;const u=yF(a.fieldTransforms,l,i),d=i.data;return d.setAll(vO(a)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(a,i,o){return T2(a.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function GX(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=fO(r.transform,s||null);a!=null&&(n===null&&(n=Oo.empty()),n.set(r.field,a))}return n||null}function xF(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&cp(r,s,(a,i)=>HX(a,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fv extends Hb{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $f extends Hb{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function vO(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function vF(t,e,n){const r=new Map;zr(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const a=t[s],i=a.transform,o=e.data.field(a.field);r.set(a.field,QX(i,o,n[s]))}return r}function yF(t,e,n){const r=new Map;for(const s of t){const a=s.transform,i=n.data.field(s.field);r.set(s.field,jX(a,i,e))}return r}class Vb extends Hb{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qX extends Hb{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KX{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&zX(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=xx(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=xx(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=AO();return this.mutations.forEach(s=>{const a=e.get(s.key),i=a.overlayedDocument;let o=this.applyToLocalView(i,a.mutatedFields);o=n.has(s.key)?null:o;const l=xO(i,o);l!==null&&r.set(s.key,l),i.isValidDocument()||i.convertToNoDocument(Qn.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),gr())}isEqual(e){return this.batchId===e.batchId&&cp(this.mutations,e.mutations,(n,r)=>xF(n,r))&&cp(this.baseMutations,e.baseMutations,(n,r)=>xF(n,r))}}class jN{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){zr(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return LX}();const a=e.mutations;for(let i=0;i<a.length;i++)s=s.insert(a[i].key,r[i].version);return new jN(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $X{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WX{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sa,_r;function YX(t){switch(t){case yt.OK:return Ln(64938);case yt.CANCELLED:case yt.UNKNOWN:case yt.DEADLINE_EXCEEDED:case yt.RESOURCE_EXHAUSTED:case yt.INTERNAL:case yt.UNAVAILABLE:case yt.UNAUTHENTICATED:return!1;case yt.INVALID_ARGUMENT:case yt.NOT_FOUND:case yt.ALREADY_EXISTS:case yt.PERMISSION_DENIED:case yt.FAILED_PRECONDITION:case yt.ABORTED:case yt.OUT_OF_RANGE:case yt.UNIMPLEMENTED:case yt.DATA_LOSS:return!0;default:return Ln(15467,{code:t})}}function yO(t){if(t===void 0)return ZA("GRPC error has no .code"),yt.UNKNOWN;switch(t){case Sa.OK:return yt.OK;case Sa.CANCELLED:return yt.CANCELLED;case Sa.UNKNOWN:return yt.UNKNOWN;case Sa.DEADLINE_EXCEEDED:return yt.DEADLINE_EXCEEDED;case Sa.RESOURCE_EXHAUSTED:return yt.RESOURCE_EXHAUSTED;case Sa.INTERNAL:return yt.INTERNAL;case Sa.UNAVAILABLE:return yt.UNAVAILABLE;case Sa.UNAUTHENTICATED:return yt.UNAUTHENTICATED;case Sa.INVALID_ARGUMENT:return yt.INVALID_ARGUMENT;case Sa.NOT_FOUND:return yt.NOT_FOUND;case Sa.ALREADY_EXISTS:return yt.ALREADY_EXISTS;case Sa.PERMISSION_DENIED:return yt.PERMISSION_DENIED;case Sa.FAILED_PRECONDITION:return yt.FAILED_PRECONDITION;case Sa.ABORTED:return yt.ABORTED;case Sa.OUT_OF_RANGE:return yt.OUT_OF_RANGE;case Sa.UNIMPLEMENTED:return yt.UNIMPLEMENTED;case Sa.DATA_LOSS:return yt.DATA_LOSS;default:return Ln(39323,{code:t})}}(_r=Sa||(Sa={}))[_r.OK=0]="OK",_r[_r.CANCELLED=1]="CANCELLED",_r[_r.UNKNOWN=2]="UNKNOWN",_r[_r.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_r[_r.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_r[_r.NOT_FOUND=5]="NOT_FOUND",_r[_r.ALREADY_EXISTS=6]="ALREADY_EXISTS",_r[_r.PERMISSION_DENIED=7]="PERMISSION_DENIED",_r[_r.UNAUTHENTICATED=16]="UNAUTHENTICATED",_r[_r.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_r[_r.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_r[_r.ABORTED=10]="ABORTED",_r[_r.OUT_OF_RANGE=11]="OUT_OF_RANGE",_r[_r.UNIMPLEMENTED=12]="UNIMPLEMENTED",_r[_r.INTERNAL=13]="INTERNAL",_r[_r.UNAVAILABLE=14]="UNAVAILABLE",_r[_r.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XX(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JX=new bf([4294967295,4294967295],0);function wF(t){const e=XX().encode(t),n=new RP;return n.update(e),new Uint8Array(n.digest())}function bF(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new bf([n,r],0),new bf([s,a],0)]}class QN{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Yg(`Invalid padding: ${n}`);if(r<0)throw new Yg(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yg(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Yg(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=bf.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(bf.fromNumber(r)));return s.compare(JX)===1&&(s=new bf([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=wF(e),[r,s]=bF(n);for(let a=0;a<this.hashCount;a++){const i=this.ye(r,s,a);if(!this.we(i))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),i=new QN(a,s,n);return r.forEach(o=>i.insert(o)),i}insert(e){if(this.ge===0)return;const n=wF(e),[r,s]=bF(n);for(let a=0;a<this.hashCount;a++){const i=this.ye(r,s,a);this.Se(i)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Yg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Dv.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new zb(Qn.min(),s,new Ps(pr),ed(),gr())}}class Dv{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Dv(r,n,gr(),gr(),gr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class wO{constructor(e,n){this.targetId=e,this.Ce=n}}class bO{constructor(e,n,r=Si.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class CF{constructor(){this.ve=0,this.Fe=EF(),this.Me=Si.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=gr(),n=gr(),r=gr();return this.Fe.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ln(38017,{changeType:a})}}),new Dv(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=EF()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,zr(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ZX{constructor(e){this.Ge=e,this.ze=new Map,this.je=ed(),this.Je=cy(),this.He=cy(),this.Ye=new Ps(pr)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ln(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const a=s.target;if(g5(a))if(r===0){const i=new vn(a.path);this.et(n,i,Yi.newNoDocument(i,Qn.min()))}else zr(r===1,20013,{expectedCount:r});else{const i=this._t(n);if(i!==r){const o=this.ut(e),l=o?this.ct(o,e,i):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let i,o;try{i=Lf(r).toUint8Array()}catch(l){if(l instanceof qP)return lp("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new QN(i,s,a)}catch(l){return lp(l instanceof Yg?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(n,a,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((a,i)=>{const o=this.ot(i);if(o){if(a.current&&g5(o.target)){const l=new vn(o.target.path);this.It(l).has(i)||this.Et(i,l)||this.et(i,l,Yi.newNoDocument(l,e))}a.Be&&(n.set(i,a.ke()),a.qe())}});let r=gr();this.He.forEach((a,i)=>{let o=!0;i.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(a))}),this.je.forEach((a,i)=>i.setReadTime(e));const s=new zb(e,n,this.Ye,this.je,r);return this.je=ed(),this.Je=cy(),this.He=cy(),this.Ye=new Ps(pr),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new CF,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ga(pr),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ga(pr),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||sn("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new CF),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function cy(){return new Ps(vn.comparator)}function EF(){return new Ps(vn.comparator)}const eJ={asc:"ASCENDING",desc:"DESCENDING"},tJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nJ={and:"AND",or:"OR"};class rJ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function v5(t,e){return t.useProto3Json||Ub(e)?e:{value:e}}function bw(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CO(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function sJ(t,e){return bw(t,e.toTimestamp())}function qu(t){return zr(!!t,49232),Qn.fromTimestamp(function(n){const r=Rf(n);return new mn(r.seconds,r.nanos)}(t))}function HN(t,e){return y5(t,e).canonicalString()}function y5(t,e){const n=function(s){return new ms(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function EO(t){const e=ms.fromString(t);return zr(BO(e),10190,{key:e.toString()}),e}function w5(t,e){return HN(t.databaseId,e.path)}function v_(t,e){const n=EO(e);if(n.get(1)!==t.databaseId.projectId)throw new Xt(yt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Xt(yt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new vn(SO(n))}function _O(t,e){return HN(t.databaseId,e)}function aJ(t){const e=EO(t);return e.length===4?ms.emptyPath():SO(e)}function b5(t){return new ms(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function SO(t){return zr(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function _F(t,e,n){return{name:w5(t,e),fields:n.value.mapValue.fields}}function iJ(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ln(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(u,d){return u.useProto3Json?(zr(d===void 0||typeof d=="string",58123),Si.fromBase64String(d||"")):(zr(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Si.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(u){const d=u.code===void 0?yt.UNKNOWN:yO(u.code);return new Xt(d,u.message||"")}(i);n=new bO(r,s,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=v_(t,r.document.name),a=qu(r.document.updateTime),i=r.document.createTime?qu(r.document.createTime):Qn.min(),o=new Oo({mapValue:{fields:r.document.fields}}),l=Yi.newFoundDocument(s,a,i,o),u=r.targetIds||[],d=r.removedTargetIds||[];n=new N2(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=v_(t,r.document),a=r.readTime?qu(r.readTime):Qn.min(),i=Yi.newNoDocument(s,a),o=r.removedTargetIds||[];n=new N2([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=v_(t,r.document),a=r.removedTargetIds||[];n=new N2([],a,s,null)}else{if(!("filter"in e))return Ln(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,i=new WX(s,a),o=r.targetId;n=new wO(o,i)}}return n}function oJ(t,e){let n;if(e instanceof Fv)n={update:_F(t,e.key,e.value)};else if(e instanceof Vb)n={delete:w5(t,e.key)};else if(e instanceof $f)n={update:_F(t,e.key,e.data),updateMask:pJ(e.fieldMask)};else{if(!(e instanceof qX))return Ln(16599,{Vt:e.type});n={verify:w5(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,i){const o=i.transform;if(o instanceof Kx)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof dp)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof $x)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof ww)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw Ln(20930,{transform:i.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:sJ(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ln(27497)}(t,e.precondition)),n}function lJ(t,e){return t&&t.length>0?(zr(e!==void 0,14353),t.map(n=>function(s,a){let i=s.updateTime?qu(s.updateTime):qu(a);return i.isEqual(Qn.min())&&(i=qu(a)),new VX(i,s.transformResults||[])}(n,e))):[]}function cJ(t,e){return{documents:[_O(t,e.path)]}}function uJ(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=_O(t,s);const a=function(u){if(u.length!==0)return NO($c.create(u,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const i=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:bm(m.field),direction:fJ(m.dir)}}(d))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=v5(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function AJ(t){let e=aJ(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){zr(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let a=[];n.where&&(a=function(h){const m=TO(h);return m instanceof $c&&nO(m)?m.getFilters():[m]}(n.where));let i=[];n.orderBy&&(i=function(h){return h.map(m=>function(y){return new qx(Cm(y.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(m))}(n.orderBy));let o=null;n.limit&&(o=function(h){let m;return m=typeof h=="object"?h.value:h,Ub(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(h){const m=!!h.before,p=h.values||[];return new vw(p,m)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const m=!h.before,p=h.values||[];return new vw(p,m)}(n.endAt)),kX(e,s,i,a,o,"F",l,u)}function dJ(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ln(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function TO(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Cm(n.unaryFilter.field);return Ia.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Cm(n.unaryFilter.field);return Ia.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Cm(n.unaryFilter.field);return Ia.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Cm(n.unaryFilter.field);return Ia.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ln(61313);default:return Ln(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ia.create(Cm(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ln(58110);default:return Ln(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $c.create(n.compositeFilter.filters.map(r=>TO(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ln(1026)}}(n.compositeFilter.op))}(t):Ln(30097,{filter:t})}function fJ(t){return eJ[t]}function hJ(t){return tJ[t]}function mJ(t){return nJ[t]}function bm(t){return{fieldPath:t.canonicalString()}}function Cm(t){return Ci.fromServerFormat(t.fieldPath)}function NO(t){return t instanceof Ia?function(n){if(n.op==="=="){if(dF(n.value))return{unaryFilter:{field:bm(n.field),op:"IS_NAN"}};if(AF(n.value))return{unaryFilter:{field:bm(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(dF(n.value))return{unaryFilter:{field:bm(n.field),op:"IS_NOT_NAN"}};if(AF(n.value))return{unaryFilter:{field:bm(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bm(n.field),op:hJ(n.op),value:n.value}}}(t):t instanceof $c?function(n){const r=n.getFilters().map(s=>NO(s));return r.length===1?r[0]:{compositeFilter:{op:mJ(n.op),filters:r}}}(t):Ln(54877,{filter:t})}function pJ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function BO(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n,r,s,a=Qn.min(),i=Qn.min(),o=Si.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Af(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Af(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Af(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Af(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gJ{constructor(e){this.yt=e}}function xJ(t){const e=AJ({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?yw(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vJ{constructor(){this.Cn=new yJ}addToCollectionParentIndex(e,n){return this.Cn.add(n),Tt.resolve()}getCollectionParents(e,n){return Tt.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Tt.resolve()}deleteFieldIndex(e,n){return Tt.resolve()}deleteAllFieldIndexes(e){return Tt.resolve()}createTargetIndexes(e,n){return Tt.resolve()}getDocumentsMatchingTarget(e,n){return Tt.resolve(null)}getIndexType(e,n){return Tt.resolve(0)}getFieldIndexes(e,n){return Tt.resolve([])}getNextCollectionGroupToUpdate(e){return Tt.resolve(null)}getMinOffset(e,n){return Tt.resolve(Df.min())}getMinOffsetFromCollectionGroup(e,n){return Tt.resolve(Df.min())}updateCollectionGroup(e,n,r){return Tt.resolve()}updateIndexEntries(e,n){return Tt.resolve()}}class yJ{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ga(ms.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ga(ms.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kO=41943040;class Mo{static withCacheSize(e){return new Mo(e,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mo.DEFAULT_COLLECTION_PERCENTILE=10,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mo.DEFAULT=new Mo(kO,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mo.DISABLED=new Mo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new fp(0)}static cr(){return new fp(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF="LruGarbageCollector",wJ=1048576;function NF([t,e],[n,r]){const s=pr(t,n);return s===0?pr(e,r):s}class bJ{constructor(e){this.Ir=e,this.buffer=new Ga(NF),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();NF(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class CJ{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){sn(TF,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){kp(n)?sn(TF,"Ignoring IndexedDB error during garbage collection: ",n):await Bp(n)}await this.Vr(3e5)})}}class EJ{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Tt.resolve(Lb.ce);const r=new bJ(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(sn("LruGarbageCollector","Garbage collection skipped; disabled"),Tt.resolve(SF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(sn("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),SF):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,a,i,o,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(sn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,i=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,o=Date.now(),this.removeTargets(e,r,n))).next(h=>(a=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),ym()<=mr.DEBUG&&sn("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${s} in `+(o-i)+`ms
	Removed ${a} targets in `+(l-o)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),Tt.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:h})))}}function _J(t,e){return new EJ(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SJ{constructor(){this.changes=new f0(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Yi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Tt.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TJ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NJ{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&xx(r.mutation,s,gl.empty(),mn.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,gr()).next(()=>r))}getLocalViewOfDocuments(e,n,r=gr()){const s=Ih();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let i=Wg();return a.forEach((o,l)=>{i=i.insert(o,l.overlayedDocument)}),i}))}getOverlayedDocuments(e,n){const r=Ih();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,gr()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((i,o)=>{n.set(i,o)})})}computeViews(e,n,r,s){let a=ed();const i=gx(),o=function(){return gx()}();return n.forEach((l,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof $f)?a=a.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),xx(d.mutation,u,d.mutation.getFieldMask(),mn.now())):i.set(u.key,gl.empty())}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((u,d)=>i.set(u,d)),n.forEach((u,d)=>o.set(u,new TJ(d,i.get(u)??null))),o))}recalculateAndSaveOverlays(e,n){const r=gx();let s=new Ps((i,o)=>i-o),a=gr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(i=>{for(const o of i)o.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||gl.empty();d=o.applyToLocalView(u,d),r.set(l,d);const h=(s.get(o.batchId)||gr()).add(l);s=s.insert(o.batchId,h)})}).next(()=>{const i=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,d=l.value,h=AO();d.forEach(m=>{if(!a.has(m)){const p=xO(n.get(m),r.get(m));p!==null&&h.set(m,p),a=a.add(m)}}),i.push(this.documentOverlayCache.saveOverlays(e,u,h))}return Tt.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(i){return vn.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):iO(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const i=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):Tt.resolve(Ih());let o=Hx,l=a;return i.next(u=>Tt.forEach(u,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),a.get(d)?Tt.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,l,u,gr())).next(d=>({batchId:o,changes:uO(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new vn(n)).next(r=>{let s=Wg();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let i=Wg();return this.indexManager.getCollectionParents(e,a).next(o=>Tt.forEach(o,l=>{const u=function(h,m){return new Ip(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(d=>{d.forEach((h,m)=>{i=i.insert(h,m)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(a=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(i=>{a.forEach((l,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,Yi.newInvalidDocument(d)))});let o=Wg();return i.forEach((l,u)=>{const d=a.get(l);d!==void 0&&xx(d.mutation,u,gl.empty(),mn.now()),jb(n,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BJ{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Tt.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:qu(s.createTime)}}(n)),Tt.resolve()}getNamedQuery(e,n){return Tt.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:xJ(s.bundledQuery),readTime:qu(s.readTime)}}(n)),Tt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kJ{constructor(){this.overlays=new Ps(vn.comparator),this.qr=new Map}getOverlay(e,n){return Tt.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ih();return Tt.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.St(e,n,a)}),Tt.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(r)),Tt.resolve()}getOverlaysForCollection(e,n,r){const s=Ih(),a=n.length+1,i=new vn(n.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&l.largestBatchId>r&&s.set(l.getKey(),l)}return Tt.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new Ps((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=a.get(u.largestBatchId);d===null&&(d=Ih(),a=a.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=Ih(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=s)););return Tt.resolve(o)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const i=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new $X(n,r));let a=this.qr.get(n);a===void 0&&(a=gr(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IJ{constructor(){this.sessionToken=Si.EMPTY_BYTE_STRING}getSessionToken(e){return Tt.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Tt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(){this.Qr=new Ga(si.$r),this.Ur=new Ga(si.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new si(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new si(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new vn(new ms([])),r=new si(n,e),s=new si(n,e+1),a=[];return this.Ur.forEachInRange([r,s],i=>{this.Gr(i),a.push(i.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new vn(new ms([])),r=new si(n,e),s=new si(n,e+1);let a=gr();return this.Ur.forEachInRange([r,s],i=>{a=a.add(i.key)}),a}containsKey(e){const n=new si(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class si{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return vn.comparator(e.key,n.key)||pr(e.Yr,n.Yr)}static Kr(e,n){return pr(e.Yr,n.Yr)||vn.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FJ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ga(si.$r)}checkEmpty(e){return Tt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new KX(a,n,r,s);this.mutationQueue.push(i);for(const o of s)this.Zr=this.Zr.add(new si(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Tt.resolve(i)}lookupMutationBatch(e,n){return Tt.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),a=s<0?0:s;return Tt.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Tt.resolve(this.mutationQueue.length===0?RN:this.tr-1)}getAllMutationBatches(e){return Tt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new si(n,0),s=new si(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,s],i=>{const o=this.Xr(i.Yr);a.push(o)}),Tt.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ga(pr);return n.forEach(s=>{const a=new si(s,0),i=new si(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,i],o=>{r=r.add(o.Yr)})}),Tt.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;vn.isDocumentKey(a)||(a=a.child(""));const i=new si(new vn(a),0);let o=new Ga(pr);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(o=o.add(l.Yr)),!0)},i),Tt.resolve(this.ti(o))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){zr(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Tt.forEach(n.mutations,s=>{const a=new si(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new si(n,0),s=this.Zr.firstAfterOrEqual(r);return Tt.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Tt.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DJ{constructor(e){this.ri=e,this.docs=function(){return new Ps(vn.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,i=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:i}),this.size+=i-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Tt.resolve(r?r.document.mutableCopy():Yi.newInvalidDocument(n))}getEntries(e,n){let r=ed();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Yi.newInvalidDocument(s))}),Tt.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=ed();const i=n.path,o=new vn(i.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||lX(oX(d),r)<=0||(s.has(d.key)||jb(n,d))&&(a=a.insert(d.key,d.mutableCopy()))}return Tt.resolve(a)}getAllFromCollectionGroup(e,n,r,s){Ln(9500)}ii(e,n){return Tt.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new RJ(this)}getSize(e){return Tt.resolve(this.size)}}class RJ extends SJ{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),Tt.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LJ{constructor(e){this.persistence=e,this.si=new f0(n=>MN(n),PN),this.lastRemoteSnapshotVersion=Qn.min(),this.highestTargetId=0,this.oi=0,this._i=new VN,this.targetCount=0,this.ai=fp.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),Tt.resolve()}getLastRemoteSnapshotVersion(e){return Tt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Tt.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Tt.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Tt.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new fp(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Tt.resolve()}updateTargetData(e,n){return this.Pr(n),Tt.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Tt.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.si.delete(i),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),Tt.waitFor(a).next(()=>s)}getTargetCount(e){return Tt.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Tt.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Tt.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(i=>{a.push(s.markPotentiallyOrphaned(e,i))}),Tt.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Tt.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Tt.resolve(r)}containsKey(e,n){return Tt.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e,n){this.ui={},this.overlays={},this.ci=new Lb(0),this.li=!1,this.li=!0,this.hi=new IJ,this.referenceDelegate=e(this),this.Pi=new LJ(this),this.indexManager=new vJ,this.remoteDocumentCache=function(s){return new DJ(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new gJ(n),this.Ii=new BJ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new kJ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new FJ(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){sn("MemoryPersistence","Starting transaction:",e);const s=new UJ(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ai(e,n){return Tt.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class UJ extends uX{constructor(e){super(),this.currentSequenceNumber=e}}class zN{constructor(e){this.persistence=e,this.Ri=new VN,this.Vi=null}static mi(e){return new zN(e)}get fi(){if(this.Vi)return this.Vi;throw Ln(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Tt.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Tt.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Tt.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.fi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Tt.forEach(this.fi,r=>{const s=vn.fromPath(r);return this.gi(e,s).next(a=>{a||n.removeEntry(s,Qn.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Tt.or([()=>Tt.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Cw{constructor(e,n){this.persistence=e,this.pi=new f0(r=>fX(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=_J(this,n)}static mi(e,n){return new Cw(e,n)}Ei(){}di(e){return Tt.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return Tt.forEach(this.pi,(r,s)=>this.br(e,r,s).next(a=>a?Tt.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,i=>this.br(e,i,n).next(o=>{o||(r++,a.removeEntry(i,Qn.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Tt.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Tt.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Tt.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Tt.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=_2(e.data.value)),n}br(e,n,r){return Tt.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return Tt.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=gr(),s=gr();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new GN(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MJ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PJ{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return fK()?8:AX(ro())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.ys(e,n).next(i=>{a.result=i}).next(()=>{if(!a.result)return this.ws(e,n,s,r).next(i=>{a.result=i})}).next(()=>{if(a.result)return;const i=new MJ;return this.Ss(e,n,i).next(o=>{if(a.result=o,this.Vs)return this.bs(e,n,i,o.size)})}).next(()=>a.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ym()<=mr.DEBUG&&sn("QueryEngine","SDK will not create cache indexes for query:",wm(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Tt.resolve()):(ym()<=mr.DEBUG&&sn("QueryEngine","Query:",wm(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ym()<=mr.DEBUG&&sn("QueryEngine","The SDK decides to create cache indexes for query:",wm(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gu(n))):Tt.resolve())}ys(e,n){if(pF(n))return Tt.resolve(null);let r=Gu(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=yw(n,null,"F"),r=Gu(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const i=gr(...a);return this.ps.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,o);return this.Cs(n,u,i,l.readTime)?this.ys(e,yw(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,s){return pF(n)||s.isEqual(Qn.min())?Tt.resolve(null):this.ps.getDocuments(e,r).next(a=>{const i=this.Ds(n,a);return this.Cs(n,i,r,s)?Tt.resolve(null):(ym()<=mr.DEBUG&&sn("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),wm(n)),this.vs(e,i,n,iX(s,Hx)).next(o=>o))})}Ds(e,n){let r=new Ga(lO(e));return n.forEach((s,a)=>{jb(e,a)&&(r=r.add(a))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,n,r){return ym()<=mr.DEBUG&&sn("QueryEngine","Using full collection scan to execute query:",wm(n)),this.ps.getDocumentsMatchingQuery(e,n,Df.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(i=>{a=a.insert(i.key,i)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="LocalStore",OJ=3e8;class jJ{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ps(pr),this.xs=new f0(a=>MN(a),PN),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NJ(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function QJ(t,e,n,r){return new jJ(t,e,n,r)}async function FO(t,e){const n=Vn(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const i=[],o=[];let l=gr();for(const u of s){i.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of a){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:i,addedBatchIds:o}))})})}function HJ(t,e){const n=Vn(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,u,d){const h=u.batch,m=h.keys();let p=Tt.resolve();return m.forEach(y=>{p=p.next(()=>d.getEntry(l,y)).next(x=>{const C=u.docVersions.get(y);zr(C!==null,48541),x.version.compareTo(C)<0&&(h.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(l,h))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=gr();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function DO(t){const e=Vn(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function VJ(t,e){const n=Vn(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const i=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const o=[];e.targetChanges.forEach((d,h)=>{const m=s.get(h);if(!m)return;o.push(n.Pi.removeMatchingKeys(a,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(a,d.addedDocuments,h)));let p=m.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(Si.EMPTY_BYTE_STRING,Qn.min()).withLastLimboFreeSnapshotVersion(Qn.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),s=s.insert(h,p),function(x,C,S){return x.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=OJ?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(m,p,d)&&o.push(n.Pi.updateTargetData(a,p))});let l=ed(),u=gr();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,d))}),o.push(zJ(a,i,e.documentUpdates).next(d=>{l=d.ks,u=d.qs})),!r.isEqual(Qn.min())){const d=n.Pi.getLastRemoteSnapshotVersion(a).next(h=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r));o.push(d)}return Tt.waitFor(o).next(()=>i.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,l,u)).next(()=>l)}).then(a=>(n.Ms=s,a))}function zJ(t,e,n){let r=gr(),s=gr();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let i=ed();return n.forEach((o,l)=>{const u=a.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(Qn.min())?(e.removeEntry(o,l.readTime),i=i.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),i=i.insert(o,l)):sn(qN,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{ks:i,qs:s}})}function GJ(t,e){const n=Vn(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=RN),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function qJ(t,e){const n=Vn(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(a=>a?(s=a,Tt.resolve(s)):n.Pi.allocateTargetId(r).next(i=>(s=new Af(e,i,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function C5(t,e,n){const r=Vn(t),s=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,i=>r.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!kp(i))throw i;sn(qN,`Failed to update sequence numbers for target ${e}: ${i}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function BF(t,e,n){const r=Vn(t);let s=Qn.min(),a=gr();return r.persistence.runTransaction("Execute query","readwrite",i=>function(l,u,d){const h=Vn(l),m=h.xs.get(d);return m!==void 0?Tt.resolve(h.Ms.get(m)):h.Pi.getTargetData(u,d)}(r,i,Gu(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(i,o.targetId).next(l=>{a=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(i,e,n?s:Qn.min(),n?a:gr())).next(o=>(KJ(r,FX(e),o),{documents:o,Qs:a})))}function KJ(t,e,n){let r=t.Os.get(e)||Qn.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Os.set(e,r)}class kF{constructor(){this.activeTargetIds=PX()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $J{constructor(){this.Mo=new kF,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new kF,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WJ{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF="ConnectivityMonitor";class FF{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){sn(IF,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){sn(IF,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uy=null;function E5(){return uy===null?uy=function(){return 268435456+Math.round(2147483648*Math.random())}():uy++,"0x"+uy.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="RestConnection",YJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class XJ{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===gw?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,a){const i=E5(),o=this.zo(e,n.toUriEncodedString());sn(y_,`Sending RPC '${e}' ${i}:`,o,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,a);const{host:u}=new URL(o),d=A0(u);return this.Jo(e,o,l,r,d).then(h=>(sn(y_,`Received RPC '${e}' ${i}: `,h),h),h=>{throw lp(y_,`RPC '${e}' ${i} failed with error: `,h,"url: ",o,"request:",r),h})}Ho(e,n,r,s,a,i){return this.Go(e,n,r,s,a)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Np}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}zo(e,n){const r=YJ[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JJ{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="WebChannelConnection";class ZJ extends XJ{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,a){const i=E5();return new Promise((o,l)=>{const u=new LP;u.setWithCredentials(!0),u.listenOnce(UP.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case E2.NO_ERROR:const h=u.getResponseJson();sn(Oi,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case E2.TIMEOUT:sn(Oi,`RPC '${e}' ${i} timed out`),l(new Xt(yt.DEADLINE_EXCEEDED,"Request time out"));break;case E2.HTTP_ERROR:const m=u.getStatus();if(sn(Oi,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const y=p==null?void 0:p.error;if(y&&y.status&&y.message){const x=function(S){const k=S.toLowerCase().replace(/_/g,"-");return Object.values(yt).indexOf(k)>=0?k:yt.UNKNOWN}(y.status);l(new Xt(x,y.message))}else l(new Xt(yt.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Xt(yt.UNAVAILABLE,"Connection failed."));break;default:Ln(9055,{l_:e,streamId:i,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{sn(Oi,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);sn(Oi,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}T_(e,n,r){const s=E5(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=OP(),o=PP(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=a.join("");sn(Oi,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=i.createWebChannel(d,l);this.I_(h);let m=!1,p=!1;const y=new JJ({Yo:C=>{p?sn(Oi,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(m||(sn(Oi,`Opening RPC '${e}' stream ${s} transport.`),h.open(),m=!0),sn(Oi,`RPC '${e}' stream ${s} sending:`,C),h.send(C))},Zo:()=>h.close()}),x=(C,S,k)=>{C.listen(S,I=>{try{k(I)}catch(F){setTimeout(()=>{throw F},0)}})};return x(h,$g.EventType.OPEN,()=>{p||(sn(Oi,`RPC '${e}' stream ${s} transport opened.`),y.o_())}),x(h,$g.EventType.CLOSE,()=>{p||(p=!0,sn(Oi,`RPC '${e}' stream ${s} transport closed`),y.a_(),this.E_(h))}),x(h,$g.EventType.ERROR,C=>{p||(p=!0,lp(Oi,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),y.a_(new Xt(yt.UNAVAILABLE,"The operation could not be completed")))}),x(h,$g.EventType.MESSAGE,C=>{var S;if(!p){const k=C.data[0];zr(!!k,16349);const I=k,F=(I==null?void 0:I.error)||((S=I[0])==null?void 0:S.error);if(F){sn(Oi,`RPC '${e}' stream ${s} received error:`,F);const U=F.status;let R=function(B){const j=Sa[B];if(j!==void 0)return yO(j)}(U),E=F.message;R===void 0&&(R=yt.INTERNAL,E="Unknown error status: "+U+" with message "+F.message),p=!0,y.a_(new Xt(R,E)),h.close()}else sn(Oi,`RPC '${e}' stream ${s} received:`,k),y.u_(k)}}),x(o,MP.STAT_EVENT,C=>{C.stat===d5.PROXY?sn(Oi,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===d5.NOPROXY&&sn(Oi,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.__()},0),y}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function w_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(t){return new rJ(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&sn("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF="PersistentStream";class LO{constructor(e,n,r,s,a,i,o,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=a,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new RO(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===yt.RESOURCE_EXHAUSTED?(ZA(n.toString()),ZA("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===yt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Xt(yt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return sn(DF,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(sn(DF,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eZ extends LO{constructor(e,n,r,s,a,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,i),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=iJ(this.serializer,e),r=function(a){if(!("targetChange"in a))return Qn.min();const i=a.targetChange;return i.targetIds&&i.targetIds.length?Qn.min():i.readTime?qu(i.readTime):Qn.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=b5(this.serializer),n.addTarget=function(a,i){let o;const l=i.target;if(o=g5(l)?{documents:cJ(a,l)}:{query:uJ(a,l).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=CO(a,i.resumeToken);const u=v5(a,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(Qn.min())>0){o.readTime=bw(a,i.snapshotVersion.toTimestamp());const u=v5(a,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const r=dJ(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=b5(this.serializer),n.removeTarget=e,this.q_(n)}}class tZ extends LO{constructor(e,n,r,s,a,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,i),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return zr(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,zr(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){zr(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=lJ(e.writeResults,e.commitTime),r=qu(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=b5(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>oJ(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nZ{}class rZ extends nZ{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Xt(yt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,i])=>this.connection.Go(e,y5(n,r),s,a,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===yt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Xt(yt.UNKNOWN,a.toString())})}Ho(e,n,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(e,y5(n,r),s,i,o,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===yt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Xt(yt.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class sZ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ZA(n),this.aa=!1):sn("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh="RemoteStore";class aZ{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(i=>{r.enqueueAndForget(async()=>{h0(this)&&(sn(Zh,"Restarting streams for network reachability change."),await async function(l){const u=Vn(l);u.Ea.add(4),await Rv(u),u.Ra.set("Unknown"),u.Ea.delete(4),await qb(u)}(this))})}),this.Ra=new sZ(r,s)}}async function qb(t){if(h0(t))for(const e of t.da)await e(!0)}async function Rv(t){for(const e of t.da)await e(!1)}function UO(t,e){const n=Vn(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),YN(n)?WN(n):Fp(n).O_()&&$N(n,e))}function KN(t,e){const n=Vn(t),r=Fp(n);n.Ia.delete(e),r.O_()&&MO(n,e),n.Ia.size===0&&(r.O_()?r.L_():h0(n)&&n.Ra.set("Unknown"))}function $N(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qn.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fp(t).Y_(e)}function MO(t,e){t.Va.Ue(e),Fp(t).Z_(e)}function WN(t){t.Va=new ZX({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Fp(t).start(),t.Ra.ua()}function YN(t){return h0(t)&&!Fp(t).x_()&&t.Ia.size>0}function h0(t){return Vn(t).Ea.size===0}function PO(t){t.Va=void 0}async function iZ(t){t.Ra.set("Online")}async function oZ(t){t.Ia.forEach((e,n)=>{$N(t,e)})}async function lZ(t,e){PO(t),YN(t)?(t.Ra.ha(e),WN(t)):t.Ra.set("Unknown")}async function cZ(t,e,n){if(t.Ra.set("Online"),e instanceof bO&&e.state===2&&e.cause)try{await async function(s,a){const i=a.cause;for(const o of a.targetIds)s.Ia.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.Ia.delete(o),s.Va.removeTarget(o))}(t,e)}catch(r){sn(Zh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ew(t,r)}else if(e instanceof N2?t.Va.Ze(e):e instanceof wO?t.Va.st(e):t.Va.tt(e),!n.isEqual(Qn.min()))try{const r=await DO(t.localStore);n.compareTo(r)>=0&&await function(a,i){const o=a.Va.Tt(i);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=a.Ia.get(u);d&&a.Ia.set(u,d.withResumeToken(l.resumeToken,i))}}),o.targetMismatches.forEach((l,u)=>{const d=a.Ia.get(l);if(!d)return;a.Ia.set(l,d.withResumeToken(Si.EMPTY_BYTE_STRING,d.snapshotVersion)),MO(a,l);const h=new Af(d.target,l,u,d.sequenceNumber);$N(a,h)}),a.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){sn(Zh,"Failed to raise snapshot:",r),await Ew(t,r)}}async function Ew(t,e,n){if(!kp(e))throw e;t.Ea.add(1),await Rv(t),t.Ra.set("Offline"),n||(n=()=>DO(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{sn(Zh,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await qb(t)})}function OO(t,e){return e().catch(n=>Ew(t,n,e))}async function Kb(t){const e=Vn(t),n=Mf(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:RN;for(;uZ(e);)try{const s=await GJ(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,AZ(e,s)}catch(s){await Ew(e,s)}jO(e)&&QO(e)}function uZ(t){return h0(t)&&t.Ta.length<10}function AZ(t,e){t.Ta.push(e);const n=Mf(t);n.O_()&&n.X_&&n.ea(e.mutations)}function jO(t){return h0(t)&&!Mf(t).x_()&&t.Ta.length>0}function QO(t){Mf(t).start()}async function dZ(t){Mf(t).ra()}async function fZ(t){const e=Mf(t);for(const n of t.Ta)e.ea(n.mutations)}async function hZ(t,e,n){const r=t.Ta.shift(),s=jN.from(r,e,n);await OO(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Kb(t)}async function mZ(t,e){e&&Mf(t).X_&&await async function(r,s){if(function(i){return YX(i)&&i!==yt.ABORTED}(s.code)){const a=r.Ta.shift();Mf(r).B_(),await OO(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Kb(r)}}(t,e),jO(t)&&QO(t)}async function RF(t,e){const n=Vn(t);n.asyncQueue.verifyOperationInProgress(),sn(Zh,"RemoteStore received new credentials");const r=h0(n);n.Ea.add(3),await Rv(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await qb(n)}async function pZ(t,e){const n=Vn(t);e?(n.Ea.delete(2),await qb(n)):e||(n.Ea.add(2),await Rv(n),n.Ra.set("Unknown"))}function Fp(t){return t.ma||(t.ma=function(n,r,s){const a=Vn(n);return a.sa(),new eZ(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:iZ.bind(null,t),t_:oZ.bind(null,t),r_:lZ.bind(null,t),H_:cZ.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),YN(t)?WN(t):t.Ra.set("Unknown")):(await t.ma.stop(),PO(t))})),t.ma}function Mf(t){return t.fa||(t.fa=function(n,r,s){const a=Vn(n);return a.sa(),new tZ(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:dZ.bind(null,t),r_:mZ.bind(null,t),ta:fZ.bind(null,t),na:hZ.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Kb(t)):(await t.fa.stop(),t.Ta.length>0&&(sn(Zh,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new GA,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const i=Date.now()+r,o=new XN(e,n,i,s,a);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xt(yt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function JN(t,e){if(ZA("AsyncQueue",`${e}: ${t}`),kp(t))return new Xt(yt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{static emptySet(e){return new Hm(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||vn.comparator(n.key,r.key):(n,r)=>vn.comparator(n.key,r.key),this.keyedMap=Wg(),this.sortedSet=new Ps(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Hm)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Hm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(){this.ga=new Ps(vn.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ln(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class hp{constructor(e,n,r,s,a,i,o,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,a){const i=[];return n.forEach(o=>{i.push({type:0,doc:o})}),new hp(e,n,Hm.emptySet(n),i,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ob(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gZ{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class xZ{constructor(){this.queries=UF(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Vn(n),a=s.queries;s.queries=UF(),a.forEach((i,o)=>{for(const l of o.Sa)l.onError(r)})})(this,new Xt(yt.ABORTED,"Firestore shutting down"))}}function UF(){return new f0(t=>oO(t),Ob)}async function ZN(t,e){const n=Vn(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.ba()&&e.Da()&&(r=2):(a=new gZ,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(i){const o=JN(i,`Initialization of query '${wm(e.query)}' failed`);return void e.onError(o)}n.queries.set(s,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&t4(n)}async function e4(t,e){const n=Vn(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const i=a.Sa.indexOf(e);i>=0&&(a.Sa.splice(i,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function vZ(t,e){const n=Vn(t);let r=!1;for(const s of e){const a=s.query,i=n.queries.get(a);if(i){for(const o of i.Sa)o.Fa(s)&&(r=!0);i.wa=s}}r&&t4(n)}function yZ(t,e,n){const r=Vn(t),s=r.queries.get(e);if(s)for(const a of s.Sa)a.onError(n);r.queries.delete(e)}function t4(t){t.Ca.forEach(e=>{e.next()})}var _5,MF;(MF=_5||(_5={})).Ma="default",MF.Cache="cache";class n4{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new hp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=hp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_5.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e){this.key=e}}class VO{constructor(e){this.key=e}}class wZ{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=gr(),this.mutatedKeys=gr(),this.eu=lO(e),this.tu=new Hm(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new LF,s=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,i=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const m=s.get(d),p=jb(this.query,h)?h:null,y=!!m&&this.mutatedKeys.has(m.key),x=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let C=!1;m&&p?m.data.isEqual(p.data)?y!==x&&(r.track({type:3,doc:p}),C=!0):this.su(m,p)||(r.track({type:2,doc:p}),C=!0,(l&&this.eu(p,l)>0||u&&this.eu(p,u)<0)&&(o=!0)):!m&&p?(r.track({type:0,doc:p}),C=!0):m&&!p&&(r.track({type:1,doc:m}),C=!0,(l||u)&&(o=!0)),C&&(p?(i=i.add(p),a=x?a.add(d):a.delete(d)):(i=i.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),a=a.delete(d.key),r.track({type:1,doc:d})}return{tu:i,iu:r,Cs:o,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((d,h)=>function(p,y){const x=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ln(20277,{Rt:C})}};return x(p)-x(y)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const o=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,i.length!==0||u?{snapshot:new hp(this.query,e.tu,a,i,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new LF,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=gr(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new VO(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new HO(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=gr();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return hp.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const r4="SyncEngine";class bZ{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class CZ{constructor(e){this.key=e,this.hu=!1}}class EZ{constructor(e,n,r,s,a,i){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new f0(o=>oO(o),Ob),this.Iu=new Map,this.Eu=new Set,this.du=new Ps(vn.comparator),this.Au=new Map,this.Ru=new VN,this.Vu={},this.mu=new Map,this.fu=fp.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _Z(t,e,n=!0){const r=WO(t);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await zO(r,e,n,!0),s}async function SZ(t,e){const n=WO(t);await zO(n,e,!0,!1)}async function zO(t,e,n,r){const s=await qJ(t.localStore,Gu(e)),a=s.targetId,i=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await TZ(t,e,a,i==="current",s.resumeToken)),t.isPrimaryClient&&n&&UO(t.remoteStore,s),o}async function TZ(t,e,n,r,s){t.pu=(h,m,p)=>async function(x,C,S,k){let I=C.view.ru(S);I.Cs&&(I=await BF(x.localStore,C.query,!1).then(({documents:E})=>C.view.ru(E,I)));const F=k&&k.targetChanges.get(C.targetId),U=k&&k.targetMismatches.get(C.targetId)!=null,R=C.view.applyChanges(I,x.isPrimaryClient,F,U);return OF(x,C.targetId,R.au),R.snapshot}(t,h,m,p);const a=await BF(t.localStore,e,!0),i=new wZ(e,a.Qs),o=i.ru(a.documents),l=Dv.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=i.applyChanges(o,t.isPrimaryClient,l);OF(t,n,u.au);const d=new bZ(e,n,i);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function NZ(t,e,n){const r=Vn(t),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter(i=>!Ob(i,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await C5(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&KN(r.remoteStore,s.targetId),S5(r,s.targetId)}).catch(Bp)):(S5(r,s.targetId),await C5(r.localStore,s.targetId,!0))}async function BZ(t,e){const n=Vn(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),KN(n.remoteStore,r.targetId))}async function kZ(t,e,n){const r=MZ(t);try{const s=await function(i,o){const l=Vn(i),u=mn.now(),d=o.reduce((p,y)=>p.add(y.key),gr());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=ed(),x=gr();return l.Ns.getEntries(p,d).next(C=>{y=C,y.forEach((S,k)=>{k.isValidDocument()||(x=x.add(S))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,y)).next(C=>{h=C;const S=[];for(const k of o){const I=GX(k,h.get(k.key).overlayedDocument);I!=null&&S.push(new $f(k.key,I,ZP(I.value.mapValue),xo.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,S,o)}).next(C=>{m=C;const S=C.applyToLocalDocumentSet(h,x);return l.documentOverlayCache.saveOverlays(p,C.batchId,S)})}).then(()=>({batchId:m.batchId,changes:uO(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,l){let u=i.Vu[i.currentUser.toKey()];u||(u=new Ps(pr)),u=u.insert(o,l),i.Vu[i.currentUser.toKey()]=u}(r,s.batchId,n),await Lv(r,s.changes),await Kb(r.remoteStore)}catch(s){const a=JN(s,"Failed to persist write");n.reject(a)}}async function GO(t,e){const n=Vn(t);try{const r=await VJ(n.localStore,e);e.targetChanges.forEach((s,a)=>{const i=n.Au.get(a);i&&(zr(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?i.hu=!0:s.modifiedDocuments.size>0?zr(i.hu,14607):s.removedDocuments.size>0&&(zr(i.hu,42227),i.hu=!1))}),await Lv(n,r,e)}catch(r){await Bp(r)}}function PF(t,e,n){const r=Vn(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((a,i)=>{const o=i.view.va(e);o.snapshot&&s.push(o.snapshot)}),function(i,o){const l=Vn(i);l.onlineState=o;let u=!1;l.queries.forEach((d,h)=>{for(const m of h.Sa)m.va(o)&&(u=!0)}),u&&t4(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function IZ(t,e,n){const r=Vn(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),a=s&&s.key;if(a){let i=new Ps(vn.comparator);i=i.insert(a,Yi.newNoDocument(a,Qn.min()));const o=gr().add(a),l=new zb(Qn.min(),new Map,new Ps(pr),i,o);await GO(r,l),r.du=r.du.remove(a),r.Au.delete(e),s4(r)}else await C5(r.localStore,e,!1).then(()=>S5(r,e,n)).catch(Bp)}async function FZ(t,e){const n=Vn(t),r=e.batch.batchId;try{const s=await HJ(n.localStore,e);KO(n,r,null),qO(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Lv(n,s)}catch(s){await Bp(s)}}async function DZ(t,e,n){const r=Vn(t);try{const s=await function(i,o){const l=Vn(i);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,o).next(h=>(zr(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);KO(r,e,n),qO(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Lv(r,s)}catch(s){await Bp(s)}}function qO(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function KO(t,e,n){const r=Vn(t);let s=r.Vu[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function S5(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||$O(t,r)})}function $O(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(KN(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),s4(t))}function OF(t,e,n){for(const r of n)r instanceof HO?(t.Ru.addReference(r.key,e),RZ(t,r)):r instanceof VO?(sn(r4,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||$O(t,r.key)):Ln(19791,{wu:r})}function RZ(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(sn(r4,"New document in limbo: "+n),t.Eu.add(r),s4(t))}function s4(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new vn(ms.fromString(e)),r=t.fu.next();t.Au.set(r,new CZ(n)),t.du=t.du.insert(n,r),UO(t.remoteStore,new Af(Gu(Pb(n.path)),r,"TargetPurposeLimboResolution",Lb.ce))}}async function Lv(t,e,n){const r=Vn(t),s=[],a=[],i=[];r.Tu.isEmpty()||(r.Tu.forEach((o,l)=>{i.push(r.pu(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){s.push(u);const h=GN.As(l.targetId,u);a.push(h)}}))}),await Promise.all(i),r.Pu.H_(s),await async function(l,u){const d=Vn(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Tt.forEach(u,m=>Tt.forEach(m.Es,p=>d.persistence.referenceDelegate.addReference(h,m.targetId,p)).next(()=>Tt.forEach(m.ds,p=>d.persistence.referenceDelegate.removeReference(h,m.targetId,p)))))}catch(h){if(!kp(h))throw h;sn(qN,"Failed to update sequence numbers: "+h)}for(const h of u){const m=h.targetId;if(!h.fromCache){const p=d.Ms.get(m),y=p.snapshotVersion,x=p.withLastLimboFreeSnapshotVersion(y);d.Ms=d.Ms.insert(m,x)}}}(r.localStore,a))}async function LZ(t,e){const n=Vn(t);if(!n.currentUser.isEqual(e)){sn(r4,"User change. New user:",e.toKey());const r=await FO(n.localStore,e);n.currentUser=e,function(a,i){a.mu.forEach(o=>{o.forEach(l=>{l.reject(new Xt(yt.CANCELLED,i))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Lv(n,r.Ls)}}function UZ(t,e){const n=Vn(t),r=n.Au.get(e);if(r&&r.hu)return gr().add(r.key);{let s=gr();const a=n.Iu.get(e);if(!a)return s;for(const i of a){const o=n.Tu.get(i);s=s.unionWith(o.view.nu)}return s}}function WO(t){const e=Vn(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=GO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IZ.bind(null,e),e.Pu.H_=vZ.bind(null,e.eventManager),e.Pu.yu=yZ.bind(null,e.eventManager),e}function MZ(t){const e=Vn(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FZ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DZ.bind(null,e),e}class _w{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gb(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return QJ(this.persistence,new PJ,e.initialUser,this.serializer)}Cu(e){return new IO(zN.mi,this.serializer)}Du(e){return new $J}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_w.provider={build:()=>new _w};class PZ extends _w{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){zr(this.persistence.referenceDelegate instanceof Cw,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new CJ(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Mo.withCacheSize(this.cacheSizeBytes):Mo.DEFAULT;return new IO(r=>Cw.mi(r,n),this.serializer)}}class T5{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>PF(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=LZ.bind(null,this.syncEngine),await pZ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new xZ}()}createDatastore(e){const n=Gb(e.databaseInfo.databaseId),r=function(a){return new ZJ(a)}(e.databaseInfo);return function(a,i,o,l){return new rZ(a,i,o,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,i,o){return new aZ(r,s,a,i,o)}(this.localStore,this.datastore,e.asyncQueue,n=>PF(this.syncEngine,n,0),function(){return FF.v()?new FF:new WJ}())}createSyncEngine(e,n){return function(s,a,i,o,l,u,d){const h=new EZ(s,a,i,o,l,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=Vn(s);sn(Zh,"RemoteStore shutting down."),a.Ea.add(5),await Rv(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}T5.provider={build:()=>new T5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ZA("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="FirestoreClient";class OZ{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=qi.UNAUTHENTICATED,this.clientId=DN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async i=>{sn(Pf,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(sn(Pf,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new GA;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=JN(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function b_(t,e){t.asyncQueue.verifyOperationInProgress(),sn(Pf,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await FO(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function jF(t,e){t.asyncQueue.verifyOperationInProgress();const n=await jZ(t);sn(Pf,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>RF(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>RF(e.remoteStore,s)),t._onlineComponents=e}async function jZ(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){sn(Pf,"Using user provided OfflineComponentProvider");try{await b_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===yt.FAILED_PRECONDITION||s.code===yt.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;lp("Error using user provided cache. Falling back to memory cache: "+n),await b_(t,new _w)}}else sn(Pf,"Using default OfflineComponentProvider"),await b_(t,new PZ(void 0));return t._offlineComponents}async function YO(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(sn(Pf,"Using user provided OnlineComponentProvider"),await jF(t,t._uninitializedComponentsProvider._online)):(sn(Pf,"Using default OnlineComponentProvider"),await jF(t,new T5))),t._onlineComponents}function QZ(t){return YO(t).then(e=>e.syncEngine)}async function Sw(t){const e=await YO(t),n=e.eventManager;return n.onListen=_Z.bind(null,e.syncEngine),n.onUnlisten=NZ.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=SZ.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BZ.bind(null,e.syncEngine),n}function HZ(t,e,n={}){const r=new GA;return t.asyncQueue.enqueueAndForget(async()=>function(a,i,o,l,u){const d=new a4({next:m=>{d.Nu(),i.enqueueAndForget(()=>e4(a,h));const p=m.docs.has(o);!p&&m.fromCache?u.reject(new Xt(yt.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&l&&l.source==="server"?u.reject(new Xt(yt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new n4(Pb(o.path),d,{includeMetadataChanges:!0,qa:!0});return ZN(a,h)}(await Sw(t),t.asyncQueue,e,n,r)),r.promise}function VZ(t,e,n={}){const r=new GA;return t.asyncQueue.enqueueAndForget(async()=>function(a,i,o,l,u){const d=new a4({next:m=>{d.Nu(),i.enqueueAndForget(()=>e4(a,h)),m.fromCache&&l.source==="server"?u.reject(new Xt(yt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new n4(o,d,{includeMetadataChanges:!0,qa:!0});return ZN(a,h)}(await Sw(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO="firestore.googleapis.com",HF=!0;class VF{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Xt(yt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=JO,this.ssl=HF}else this.host=e.host,this.ssl=e.ssl??HF;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=kO;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wJ)throw new Xt(yt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sX("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XO(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Xt(yt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Xt(yt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Xt(yt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $b{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VF({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xt(yt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Xt(yt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VF(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $Y;switch(r.type){case"firstParty":return new JY(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Xt(yt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=QF.get(n);r&&(sn("ComponentProvider","Removing Datastore"),QF.delete(n),r.terminate())}(this),Promise.resolve()}}function zZ(t,e,n,r={}){var u;t=go(t,$b);const s=A0(e),a=t._getSettings(),i={...a,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${n}`;s&&(xN(`https://${o}`),vN("Firestore",!0)),a.host!==JO&&a.host!==o&&lp("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...a,host:o,ssl:s,emulatorOptions:r};if(!If(l,i)&&(t._setSettings(l),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=qi.MOCK_USER;else{d=sK(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Xt(yt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new qi(m)}t._authCredentials=new WY(new QP(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new od(this.firestore,e,this._query)}}class Xs{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xs(this.firestore,e,this._key)}toJSON(){return{type:Xs._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Iv(n,Xs._jsonSchema))return new Xs(e,r||null,new vn(ms.fromString(n.referencePath)))}}Xs._jsonSchemaVersion="firestore/documentReference/1.0",Xs._jsonSchema={type:Fa("string",Xs._jsonSchemaVersion),referencePath:Fa("string")};class Cf extends od{constructor(e,n,r){super(e,n,Pb(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xs(this.firestore,null,new vn(e))}withConverter(e){return new Cf(this.firestore,e,this._path)}}function Lt(t,e,...n){if(t=Bs(t),HP("collection","path",e),t instanceof $b){const r=ms.fromString(e,...n);return nF(r),new Cf(t,null,r)}{if(!(t instanceof Xs||t instanceof Cf))throw new Xt(yt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ms.fromString(e,...n));return nF(r),new Cf(t.firestore,null,r)}}function Cn(t,e,...n){if(t=Bs(t),arguments.length===1&&(e=DN.newId()),HP("doc","path",e),t instanceof $b){const r=ms.fromString(e,...n);return tF(r),new Xs(t,null,new vn(r))}{if(!(t instanceof Xs||t instanceof Cf))throw new Xt(yt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ms.fromString(e,...n));return tF(r),new Xs(t.firestore,t instanceof Cf?t.converter:null,new vn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF="AsyncQueue";class GF{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new RO(this,"async_queue_retry"),this._c=()=>{const r=w_();r&&sn(zF,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=w_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=w_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new GA;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!kp(e))throw e;sn(zF,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ZA("INTERNAL UNHANDLED ERROR: ",qF(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=XN.createAndSchedule(this,e,n,r,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&Ln(47125,{Pc:qF(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function qF(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KF(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Zu extends $b{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new GF,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new GF(e),this._firestoreClient=void 0,await e}}}function ZO(t,e){const n=typeof t=="object"?t:CN(),r=typeof t=="string"?t:gw,s=Bb(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=q8("firestore");a&&zZ(s,...a)}return s}function Uv(t){if(t._terminated)throw new Xt(yt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||GZ(t),t._firestoreClient}function GZ(t){var r,s,a;const e=t._freezeSettings(),n=function(o,l,u,d){return new pX(o,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,XO(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new OZ(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nc(Si.fromBase64String(e))}catch(n){throw new Xt(yt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new nc(Si.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:nc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Iv(e,nc._jsonSchema))return nc.fromBase64String(e.bytes)}}nc._jsonSchemaVersion="firestore/bytes/1.0",nc._jsonSchema={type:Fa("string",nc._jsonSchemaVersion),bytes:Fa("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Xt(yt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ci(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Xt(yt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Xt(yt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pr(this._lat,e._lat)||pr(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ku._jsonSchemaVersion}}static fromJSON(e){if(Iv(e,Ku._jsonSchema))return new Ku(e.latitude,e.longitude)}}Ku._jsonSchemaVersion="firestore/geoPoint/1.0",Ku._jsonSchema={type:Fa("string",Ku._jsonSchemaVersion),latitude:Fa("number"),longitude:Fa("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:$u._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Iv(e,$u._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new $u(e.vectorValues);throw new Xt(yt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$u._jsonSchemaVersion="firestore/vectorValue/1.0",$u._jsonSchema={type:Fa("string",$u._jsonSchemaVersion),vectorValues:Fa("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qZ=/^__.*__$/;class KZ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new $f(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fv(e,this.data,n,this.fieldTransforms)}}class ej{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new $f(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function tj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ln(40011,{Ac:t})}}class Wb{constructor(e,n,r,s,a,i){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Wb({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Tw(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(tj(this.Ac)&&qZ.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class $Z{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gb(e)}Cc(e,n,r,s=!1){return new Wb({Ac:e,methodName:n,Dc:r,path:Ci.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ov(t){const e=t._freezeSettings(),n=Gb(t._databaseId);return new $Z(t._databaseId,!!e.ignoreUndefinedProperties,n)}function i4(t,e,n,r,s,a={}){const i=t.Cc(a.merge||a.mergeFields?2:0,e,n,s);c4("Data must be an object, but it was:",i,r);const o=sj(r,i);let l,u;if(a.merge)l=new gl(i.fieldMask),u=i.fieldTransforms;else if(a.mergeFields){const d=[];for(const h of a.mergeFields){const m=N5(e,h,n);if(!i.contains(m))throw new Xt(yt.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);ij(d,m)||d.push(m)}l=new gl(d),u=i.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=i.fieldTransforms;return new KZ(new Oo(o),l,u)}class Yb extends Pv{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yb}}function WZ(t,e,n){return new Wb({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class o4 extends Pv{_toFieldTransform(e){return new gO(e.path,new Kx)}isEqual(e){return e instanceof o4}}class l4 extends Pv{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=WZ(this,e,!0),r=this.vc.map(a=>Dp(a,n)),s=new dp(r);return new gO(e.path,s)}isEqual(e){return e instanceof l4&&If(this.vc,e.vc)}}function nj(t,e,n,r){const s=t.Cc(1,e,n);c4("Data must be an object, but it was:",s,r);const a=[],i=Oo.empty();Kf(r,(l,u)=>{const d=u4(e,l,n);u=Bs(u);const h=s.yc(d);if(u instanceof Yb)a.push(d);else{const m=Dp(u,h);m!=null&&(a.push(d),i.set(d,m))}});const o=new gl(a);return new ej(i,o,s.fieldTransforms)}function rj(t,e,n,r,s,a){const i=t.Cc(1,e,n),o=[N5(e,r,n)],l=[s];if(a.length%2!=0)throw new Xt(yt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)o.push(N5(e,a[m])),l.push(a[m+1]);const u=[],d=Oo.empty();for(let m=o.length-1;m>=0;--m)if(!ij(u,o[m])){const p=o[m];let y=l[m];y=Bs(y);const x=i.yc(p);if(y instanceof Yb)u.push(p);else{const C=Dp(y,x);C!=null&&(u.push(p),d.set(p,C))}}const h=new gl(u);return new ej(d,h,i.fieldTransforms)}function YZ(t,e,n,r=!1){return Dp(n,t.Cc(r?4:3,e))}function Dp(t,e){if(aj(t=Bs(t)))return c4("Unsupported field value:",e,t),sj(t,e);if(t instanceof Pv)return function(r,s){if(!tj(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const a=[];let i=0;for(const o of r){let l=Dp(o,s.wc(i));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),i++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=Bs(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return OX(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=mn.fromDate(r);return{timestampValue:bw(s.serializer,a)}}if(r instanceof mn){const a=new mn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:bw(s.serializer,a)}}if(r instanceof Ku)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof nc)return{bytesValue:CO(s.serializer,r._byteString)};if(r instanceof Xs){const a=s.databaseId,i=r.firestore._databaseId;if(!i.isEqual(a))throw s.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:HN(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof $u)return function(i,o){return{mapValue:{fields:{[XP]:{stringValue:JP},[xw]:{arrayValue:{values:i.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return ON(o.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Rb(r)}`)}(t,e)}function sj(t,e){const n={};return GP(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Kf(t,(r,s)=>{const a=Dp(s,e.mc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function aj(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof mn||t instanceof Ku||t instanceof nc||t instanceof Xs||t instanceof Pv||t instanceof $u)}function c4(t,e,n){if(!aj(n)||!VP(n)){const r=Rb(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function N5(t,e,n){if((e=Bs(e))instanceof Mv)return e._internalPath;if(typeof e=="string")return u4(t,e);throw Tw("Field path arguments must be of type string or ",t,!1,void 0,n)}const XZ=new RegExp("[~\\*/\\[\\]]");function u4(t,e,n){if(e.search(XZ)>=0)throw Tw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Mv(...e.split("."))._internalPath}catch{throw Tw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Tw(t,e,n,r,s){const a=r&&!r.isEmpty(),i=s!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||i)&&(l+=" (found",a&&(l+=` in field ${r}`),i&&(l+=` in document ${s}`),l+=")"),new Xt(yt.INVALID_ARGUMENT,o+t+l)}function ij(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Xs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Xb("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class JZ extends oj{data(){return super.data()}}function Xb(t,e){return typeof e=="string"?u4(t,e):e instanceof Mv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Xt(yt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class A4{}class d4 extends A4{}function an(t,e,...n){let r=[];e instanceof A4&&r.push(e),r=r.concat(n),function(a){const i=a.filter(l=>l instanceof f4).length,o=a.filter(l=>l instanceof Jb).length;if(i>1||i>0&&o>0)throw new Xt(yt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Jb extends d4{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Jb(e,n,r)}_apply(e){const n=this._parse(e);return cj(e._query,n),new od(e.firestore,e.converter,x5(e._query,n))}_parse(e){const n=Ov(e.firestore);return function(a,i,o,l,u,d,h){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Xt(yt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){WF(h,d);const y=[];for(const x of h)y.push($F(l,a,x));m={arrayValue:{values:y}}}else m=$F(l,a,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||WF(h,d),m=YZ(o,i,h,d==="in"||d==="not-in");return Ia.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Vr(t,e,n){const r=e,s=Xb("where",t);return Jb._create(s,r,n)}class f4 extends A4{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new f4(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:$c.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let i=s;const o=a.getFlattenedFilters();for(const l of o)cj(i,l),i=x5(i,l)}(e._query,n),new od(e.firestore,e.converter,x5(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class h4 extends d4{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new h4(e,n)}_apply(e){const n=function(s,a,i){if(s.startAt!==null)throw new Xt(yt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Xt(yt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qx(a,i)}(e._query,this._field,this._direction);return new od(e.firestore,e.converter,function(s,a){const i=s.explicitOrderBy.concat([a]);return new Ip(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function sr(t,e="asc"){const n=e,r=Xb("orderBy",t);return h4._create(r,n)}class m4 extends d4{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new m4(e,n,r)}_apply(e){return new od(e.firestore,e.converter,yw(e._query,this._limit,this._limitType))}}function Ef(t){return aX("limit",t),m4._create("limit",t,"F")}function $F(t,e,n){if(typeof(n=Bs(n))=="string"){if(n==="")throw new Xt(yt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iO(e)&&n.indexOf("/")!==-1)throw new Xt(yt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ms.fromString(n));if(!vn.isDocumentKey(r))throw new Xt(yt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return uF(t,new vn(r))}if(n instanceof Xs)return uF(t,n._key);throw new Xt(yt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rb(n)}.`)}function WF(t,e){if(!Array.isArray(t)||t.length===0)throw new Xt(yt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cj(t,e){const n=function(s,a){for(const i of s)for(const o of i.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Xt(yt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Xt(yt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ZZ{convertValue(e,n="none"){switch(Uf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return da(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Lf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ln(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Kf(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var r,s,a;const n=(a=(s=(r=e.fields)==null?void 0:r[xw].arrayValue)==null?void 0:s.values)==null?void 0:a.map(i=>da(i.doubleValue));return new $u(n)}convertGeoPoint(e){return new Ku(da(e.latitude),da(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Mb(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Vx(e));default:return null}}convertTimestamp(e){const n=Rf(e);return new mn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ms.fromString(e);zr(BO(r),9688,{name:e});const s=new zx(r.get(1),r.get(3)),a=new vn(r.popFirst(5));return s.isEqual(n)||ZA(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Xg{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uh extends oj{constructor(e,n,r,s,a,i){super(e,n,r,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new B2(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Xb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(yt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Uh._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Uh._jsonSchemaVersion="firestore/documentSnapshot/1.0",Uh._jsonSchema={type:Fa("string",Uh._jsonSchemaVersion),bundleSource:Fa("string","DocumentSnapshot"),bundleName:Fa("string"),bundle:Fa("string")};class B2 extends Uh{data(e={}){return super.data(e)}}class Mh{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Xg(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new B2(this._firestore,this._userDataWriter,r.key,r,new Xg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Xt(yt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const l=new B2(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Xg(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const l=new B2(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Xg(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:eee(o.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(yt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Mh._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=DN.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eee(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ln(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(t){t=go(t,Xs);const e=go(t.firestore,Zu);return HZ(Uv(e),t._key).then(n=>uj(e,t,n))}Mh._jsonSchemaVersion="firestore/querySnapshot/1.0",Mh._jsonSchema={type:Fa("string",Mh._jsonSchemaVersion),bundleSource:Fa("string","QuerySnapshot"),bundleName:Fa("string"),bundle:Fa("string")};class g4 extends ZZ{constructor(e){super(),this.firestore=e}convertBytes(e){return new nc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xs(this.firestore,null,n)}}function Da(t){t=go(t,od);const e=go(t.firestore,Zu),n=Uv(e),r=new g4(e);return lj(t._query),VZ(n,t._query).then(s=>new Mh(e,r,t,s))}function io(t,e,n){t=go(t,Xs);const r=go(t.firestore,Zu),s=p4(t.converter,e,n);return Hv(r,[i4(Ov(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,xo.none())])}function Qv(t,e,n,...r){t=go(t,Xs);const s=go(t.firestore,Zu),a=Ov(s);let i;return i=typeof(e=Bs(e))=="string"||e instanceof Mv?rj(a,"updateDoc",t._key,e,n,r):nj(a,"updateDoc",t._key,e),Hv(s,[i.toMutation(t._key,xo.exists(!0))])}function Ka(t){return Hv(go(t.firestore,Zu),[new Vb(t._key,xo.none())])}function Cs(t,e){const n=go(t.firestore,Zu),r=Cn(t),s=p4(t.converter,e);return Hv(n,[i4(Ov(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,xo.exists(!1))]).then(()=>r)}function En(t,...e){var l,u,d;t=Bs(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||KF(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(KF(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(u=h.error)==null?void 0:u.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let a,i,o;if(t instanceof Xs)i=go(t.firestore,Zu),o=Pb(t._key.path),a={next:h=>{e[r]&&e[r](uj(i,t,h))},error:e[r+1],complete:e[r+2]};else{const h=go(t,od);i=go(h.firestore,Zu),o=h._query;const m=new g4(i);a={next:p=>{e[r]&&e[r](new Mh(i,m,h,p))},error:e[r+1],complete:e[r+2]},lj(t._query)}return function(m,p,y,x){const C=new a4(x),S=new n4(p,C,y);return m.asyncQueue.enqueueAndForget(async()=>ZN(await Sw(m),S)),()=>{C.Nu(),m.asyncQueue.enqueueAndForget(async()=>e4(await Sw(m),S))}}(Uv(i),o,s,a)}function Hv(t,e){return function(r,s){const a=new GA;return r.asyncQueue.enqueueAndForget(async()=>kZ(await QZ(r),s,a)),a.promise}(Uv(t),e)}function uj(t,e,n){const r=n.docs.get(e._key),s=new g4(t);return new Uh(t,s,e._key,r,new Xg(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tee{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ov(e)}set(e,n,r){this._verifyNotCommitted();const s=C_(e,this._firestore),a=p4(s.converter,n,r),i=i4(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(i.toMutation(s._key,xo.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const a=C_(e,this._firestore);let i;return i=typeof(n=Bs(n))=="string"||n instanceof Mv?rj(this._dataReader,"WriteBatch.update",a._key,n,r,s):nj(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(i.toMutation(a._key,xo.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=C_(e,this._firestore);return this._mutations=this._mutations.concat(new Vb(n._key,xo.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xt(yt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function C_(t,e){if((t=Bs(t)).firestore!==e)throw new Xt(yt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function nee(){return new o4("serverTimestamp")}function ree(...t){return new l4("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(t){return Uv(t=go(t,Zu)),new tee(t,e=>Hv(t,e))}(function(e,n=!0){(function(s){Np=s})(Sp),Yh(new Ff("firestore",(r,{instanceIdentifier:s,options:a})=>{const i=r.getProvider("app").getImmediate(),o=new Zu(new YY(r.getProvider("auth-internal")),new ZY(i,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Xt(yt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zx(u.options.projectId,d)}(i,s),i);return a={useFetchStreams:n,...a},o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),Hu(X3,J3,e),Hu(X3,J3,"esm2020")})();const see={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},Aj=bN(see),Vv=DP(Aj),er=ZO(Aj),aee=Object.freeze(Object.defineProperty({__proto__:null,auth:Vv,db:er},Symbol.toStringTag,{value:"Module"})),iee=async(t,e)=>{try{return(await IW(Vv,t,e)).user}catch(n){throw console.error("Error en loginUser helper:",n),n}},E_=async()=>{try{await RW(Vv)}catch(t){throw console.error("Error en logoutUser helper:",t),t}},oee=async t=>{try{await kW(Vv,t)}catch(e){throw console.error("Error en resetPassword helper:",e),e}},dj=async t=>{try{const e=Cn(er,"usuarios",t),n=await jv(e);return n.exists()?{id:n.id,...n.data()}:(console.warn(`No se encontró perfil en Firestore para: ${t}`),null)}catch(e){throw console.error("Error en getUserProfile helper:",e),e}};var qt=(t=>(t.SUBDIRECCION="SUBDIRECCION",t.PROFESORADO="PROFESORADO",t.COORDINACION_TP="COORDINACION_TP",t.ESTUDIANTE="ESTUDIANTE",t))(qt||{}),fr=(t=>(t.EVALUACION="Evaluación",t.ACTO="Acto",t.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",t.SALIDA_PEDAGOGICA="Salida Pedagógica",t))(fr||{}),Sh=(t=>(t.PRUEBA_PARCIAL="Prueba parcial",t.GUIA_APRENDIZAJE="Guía de Aprendizaje",t.RUBRICA="Rúbrica",t.PAUTA_COTEJO="Pauta de Cotejo",t))(Sh||{});const lee=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),La="w-6 h-6",Zb="w-24 h-24",v4=()=>c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo Gestión Pedagógica LIR",className:"w-32 h-32 object-contain"}),cee=()=>c.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M9 18h6"}),c.jsx("path",{d:"M10 22h4"}),c.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),uee=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),Aee=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Jg=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),Zg=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),fj=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),dee=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Zb,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),fee=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Zb,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),hee=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Zb,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),mee=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Zb,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),pee=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),YF=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),Ay=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),__=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),dy=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),S_=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),XF=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),gee=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),xee=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),vee=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),yee=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),JF=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),wee=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),T_=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),bee=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:La,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),Cee=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:La,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),ZF=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:La,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),Eee=[{id:qt.SUBDIRECCION,label:"Subdirección Pedagógica",icon:c.jsx(dee,{})},{id:qt.PROFESORADO,label:"Profesorado",icon:c.jsx(fee,{})},{id:qt.COORDINACION_TP,label:"Coordinación TP",icon:c.jsx(hee,{})},{id:qt.ESTUDIANTE,label:"Estudiantes",icon:c.jsx(mee,{})}],_ee={[qt.SUBDIRECCION]:[{name:"Dashboard",icon:c.jsx(pee,{})},{name:"Administración",icon:c.jsx(yee,{})},{name:"Seguimiento Curricular",icon:c.jsx(Cee,{})},{name:"Acompañamiento docente",icon:c.jsx(vee,{})},{name:"Análisis Taxonómico",icon:c.jsx(ZF,{})},{name:"Interdisciplinario",icon:c.jsx(T_,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:c.jsx(YF,{})},{name:"Crear horarios",icon:c.jsx(__,{})},{name:"Seguimiento de acciones pedagógicas",icon:c.jsx(dy,{})},{name:"Inclusión",icon:c.jsx(JF,{})},{name:"Calendario Académico",icon:c.jsx(Ay,{})},{name:"Muro de Anuncios",icon:c.jsx(Jg,{})},{name:"Mensajería Interna",icon:c.jsx(Zg,{})},{name:"Generador de Actas",icon:c.jsx(S_,{})}],[qt.PROFESORADO]:[{name:"Planificación",icon:c.jsx(XF,{})},{name:"Mis Acompañamientos",icon:c.jsx(wee,{})},{name:"Recursos de Aprendizaje",icon:c.jsx(gee,{})},{name:"Análisis Taxonómico",icon:c.jsx(ZF,{})},{name:"Interdisciplinario",icon:c.jsx(T_,{})},{name:"Inclusión",icon:c.jsx(JF,{})},{name:"Actividades Remotas",icon:c.jsx(xee,{})},{name:"Evaluación de Aprendizajes",icon:c.jsx(S_,{})},{name:"Evaluaciones Formativas",icon:c.jsx(dy,{})},{name:"Calendario Académico",icon:c.jsx(Ay,{})},{name:"Muro de Anuncios",icon:c.jsx(Jg,{})},{name:"Mensajería Interna",icon:c.jsx(Zg,{})},{name:"Generador de Actas",icon:c.jsx(YF,{})}],[qt.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:c.jsx(dy,{})},{name:"Asistencia Dual",icon:c.jsx(__,{})},{name:"Pañol",icon:c.jsx(bee,{})},{name:"Gestión de Empresas",icon:c.jsx(lee,{})},{name:"Calendario Académico",icon:c.jsx(Ay,{})},{name:"Muro de Anuncios",icon:c.jsx(Jg,{})},{name:"Mensajería Interna",icon:c.jsx(Zg,{})},{name:"Generador de Actas",icon:c.jsx(S_,{})}],[qt.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:c.jsx(XF,{})},{name:"Evaluación Formativa",icon:c.jsx(dy,{})},{name:"Tareas Interdisciplinarias",icon:c.jsx(T_,{})},{name:"Asistencia a Empresa",icon:c.jsx(__,{})},{name:"Calendario Académico",icon:c.jsx(Ay,{})},{name:"Muro de Anuncios",icon:c.jsx(Jg,{})},{name:"Mensajería Interna",icon:c.jsx(Zg,{})}]},e6=["Currículum y Evaluación","Convivencia Escolar","Orientación","Gestión Pedagógica General"],fy=["Pendiente","En Proceso","Cumplida"],km=["1º Medio","2º Medio","3º Medio","4º Medio"],po=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],Js=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],B5=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],k2=["Lunes","Martes","Miércoles","Jueves","Viernes"],k5=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],See={"1º y 2º medio":{"Lengua y Literatura":6,Matemática:6,Inglés:3,"Historia y Geografía":4,"Educación Física":2,Ciencias:4,"Artes/Música":2,Tecnología:2,Orientación:1},"3º y 4º medio (Humanista-Científico)":{"Lengua y Literatura":4,Matemática:4,Inglés:2,"Historia y Geografía":3,"Educación Ciudadana":2,Filosofía:3,"Ciencias para la Ciudadanía":2,"Educación Física":2},"3º y 4º medio (Técnico-Profesional)":{"Lengua y Literatura":2,Matemática:2,Inglés:2,"Historia y Geografía":2,Filosofía:2,"Educación Física":2,"Módulo TP":18}},cf={[fr.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[fr.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[fr.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[fr.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},Tee=Object.values(Sh),N_=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],B_=["Vinculado","Desvinculado","En proceso","Empresa"],Ph=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],Nee=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],Nw=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],vx=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],hj=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],hy=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],Bee=({onLoginAttempt:t,onForgotPasswordRequest:e,error:n})=>{const[r,s]=G.useState(""),[a,i]=G.useState(""),[o,l]=G.useState("login"),u=m=>{m.preventDefault(),t(r,a)},d=m=>{m.preventDefault(),e(r),l("forgot_sent")},h=()=>o==="forgot"?c.jsxs("form",{onSubmit:d,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:m=>s(m.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),c.jsx("div",{className:"text-sm text-center",children:c.jsx("button",{type:"button",onClick:()=>l("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):o==="forgot_sent"?c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),c.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",c.jsx("strong",{children:r}),", hemos enviado un enlace para restablecer su contraseña."]}),c.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),c.jsx("button",{type:"button",onClick:()=>{l("login"),s("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):c.jsxs("form",{onSubmit:u,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:m=>s(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a,onChange:m=>i(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),n&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:c.jsx("p",{children:n})}),c.jsx("div",{className:"text-sm text-center",children:c.jsx("button",{type:"button",onClick:()=>l("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(v4,{})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),c.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:h()}),c.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},k_=({trigger:t,children:e,onOpen:n})=>{const[r,s]=G.useState(!1),a=G.useRef(null),i=()=>{const l=!r;s(l),l&&n&&n()},o=l=>{a.current&&!a.current.contains(l.target)&&s(!1)};return G.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),c.jsxs("div",{className:"relative",ref:a,children:[c.jsx("div",{onClick:i,children:t}),r&&c.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>s(!1),children:e})]})},t6="usuariosLiceo",kee=({user:t,onClose:e,onSave:n})=>{const[r,s]=G.useState({nombreCompleto:t.nombreCompleto,email:t.email,fotoUrl:t.fotoUrl||""}),a=o=>{s({...r,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const l={...t,...r};try{const u=localStorage.getItem(t6);let d=u?JSON.parse(u):[];const h=d.findIndex(m=>m.id===t.id);h>-1?d[h]=l:d.push(l),localStorage.setItem(t6,JSON.stringify(d)),n(l),e()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:c.jsxs("form",{onSubmit:i,children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),c.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:r.fotoUrl,onChange:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),c.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:r.nombreCompleto,onChange:a,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),c.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:a,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),c.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.profile})]})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},n6="usuariosLiceo",Iee=({user:t,onClose:e,onSave:n})=>{const[r,s]=G.useState(""),[a,i]=G.useState(""),[o,l]=G.useState(null),u=d=>{if(d.preventDefault(),l(null),!r){l("La contraseña no puede estar en blanco.");return}if(r!==a){l("Las contraseñas no coinciden.");return}const h={...t,password:r};try{const m=localStorage.getItem(n6);let p=m?JSON.parse(m):[];const y=p.findIndex(x=>x.id===t.id);y>-1?p[y]=h:p.push(h),localStorage.setItem(n6,JSON.stringify(p)),n(h),e()}catch(m){console.error("Failed to save new password:",m),l("No se pudo guardar la nueva contraseña.")}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:c.jsxs("form",{onSubmit:u,children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),c.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.email})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:r,onChange:d=>s(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:a,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:c.jsx("p",{children:o})})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})},r6="anunciosMuro",s6="mensajesInternos",a6="lir-read-status",Fee=({user:t})=>{if(t.fotoUrl)return c.jsx("img",{src:t.fotoUrl,alt:t.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const e=t.nombreCompleto||"",n=String(e).split(" ").filter(r=>r).map(r=>r[0]).join("").toUpperCase();return c.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:n.substring(0,2)})},Dee=({currentUser:t,onLogout:e,onNavigate:n,onUserUpdate:r,onChangeProfile:s,canChangeProfile:a,toggleSidebar:i,unreadMessagesCount:o,refreshUnreadCount:l})=>{const[u,d]=G.useState([]),[h,m]=G.useState([]),[p,y]=G.useState(!1),[x,C]=G.useState(!1),S=G.useCallback(()=>{try{const U=localStorage.getItem(`${a6}-${t.id}`);return U?JSON.parse(U):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[t.id]),k=G.useCallback(U=>{try{localStorage.setItem(`${a6}-${t.id}`,JSON.stringify(U))}catch(R){console.error("Failed to set read status:",R)}},[t.id]);G.useEffect(()=>{const U=JSON.parse(localStorage.getItem(r6)||"[]"),R=S();d(U.filter(_=>!R.announcements.includes(_.id)));const E=JSON.parse(localStorage.getItem(s6)||"[]");m(E.filter(_=>_.para===t.email).sort((_,B)=>new Date(B.fecha).getTime()-new Date(_.fecha).getTime()).slice(0,5))},[t.id,S,o]);const I=()=>{const U=S(),R=JSON.parse(localStorage.getItem(r6)||"[]").map(E=>E.id);U.announcements=R,k(U),d([])},F=()=>{const U=S(),E=JSON.parse(localStorage.getItem(s6)||"[]").filter(_=>_.para===t.email).map(_=>_.id);U.messages=[...new Set([...U.messages,...E])],k(U),l()};return c.jsxs(c.Fragment,{children:[c.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:c.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:i,children:c.jsx(uee,{})}),c.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>n("Dashboard"),children:[c.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),c.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),c.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),c.jsx("div",{className:"flex-1 flex justify-center",children:c.jsx("button",{onClick:()=>n("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:c.jsx(Aee,{})})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"flex items-center gap-3",children:c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"h-10 w-10 object-contain"})}),c.jsx(k_,{onOpen:I,trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Notificaciones",children:[c.jsx(Jg,{}),u.length>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),c.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(U=>c.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[c.jsx("p",{className:"font-bold dark:text-slate-200",children:U.titulo}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:U.mensaje})]},U.id)),u.length===0&&c.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),c.jsx("button",{onClick:()=>n("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),c.jsx(k_,{onOpen:F,trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[c.jsx(Zg,{}),o>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:o})]}),children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),c.jsxs("ul",{className:"mt-1",children:[h.slice(0,3).map(U=>c.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[c.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",U.de]}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:U.asunto})]},U.id)),h.length===0&&c.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),c.jsx("button",{onClick:()=>n("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),c.jsx(k_,{trigger:c.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:c.jsx(Fee,{user:t})}),children:c.jsxs("div",{className:"p-2",children:[c.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:t.nombreCompleto}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:t.profile})]}),c.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[c.jsx("li",{children:c.jsx("button",{onClick:()=>y(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),c.jsx("li",{children:c.jsx("button",{onClick:()=>C(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),a&&c.jsx("li",{children:c.jsx("button",{onClick:s,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"👑 Cambiar Vista"})}),c.jsx("li",{children:c.jsx("button",{onClick:e,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),p&&c.jsx(kee,{user:t,onClose:()=>y(!1),onSave:r}),x&&c.jsx(Iee,{user:t,onClose:()=>C(!1),onSave:r})]})};var yh={};const Ree={apiKey:yh.NEXT_PUBLIC_FIREBASE_API_KEY||"tu-api-key",authDomain:yh.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"tu-proyecto.firebaseapp.com",projectId:yh.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"tu-proyecto-id",storageBucket:yh.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"tu-proyecto.appspot.com",messagingSenderId:yh.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"123456789",appId:yh.NEXT_PUBLIC_FIREBASE_APP_ID||"1:123456789:web:abcdef",measurementId:yh.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-XXXXXXXXXX"},mj=T3().length===0?bN(Ree):T3()[0],It=ZO(mj),Lee=DP(mj),zv="reemplazos_docentes",Uee="usuarios",y4=t=>{var n,r,s,a;const e=t.data();return{id:t.id,...e,fechaCreacion:((r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaCreacion,fechaActualizacion:((a=(s=e.fechaActualizacion)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString())||e.fechaActualizacion}},Mee=t=>{const e=t.data();return{id:t.id,...e}},Pee=async(t,e)=>{try{const n={...t,userId:e,fechaCreacion:mn.fromDate(new Date),fechaActualizacion:mn.fromDate(new Date)};return(await Cs(Lt(It,zv),n)).id}catch(n){throw console.error("Error al guardar reemplazo:",n),new Error("No se pudo guardar el reemplazo")}},Oee=async(t,e)=>{try{const n=Cn(It,zv,t),r=await jv(n);if(!r.exists()||r.data().userId!==e)throw new Error("No tienes permisos para eliminar este reemplazo");await Ka(n)}catch(n){throw console.error("Error al eliminar reemplazo:",n),new Error("No se pudo eliminar el reemplazo")}},jee=(t,e,n=50)=>{try{const r=an(Lt(It,zv),Vr("userId","==",t),sr("diaAusencia","desc"),Ef(n));return En(r,s=>{const a=s.docs.map(y4);e(a)},s=>{console.error("Error en suscripción a reemplazos:",s),e([])})}catch(r){return console.error("Error al crear la suscripción de reemplazos:",r),()=>{}}},Qee=t=>{try{const e=an(Lt(It,Uee),Vr("profile","==",qt.PROFESORADO));return En(e,r=>{const s=r.docs.map(Mee);t(s)},r=>{console.error("Error al obtener la lista de profesores:",r),t([])})}catch(e){return console.error("Error al crear la suscripción de profesores:",e),()=>{}}},Hee=async t=>{try{const e=an(Lt(It,zv),Vr("userId","==",t)),r=(await Da(e)).docs.map(y4),s=r.length,a=r.filter(o=>o.resultado==="Hora realizada").length,i=r.filter(o=>o.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:s,horasRealizadas:a,horasCubiertas:i,porcentajeRealizadas:s>0?a/s*100:0}}catch(e){throw console.error("Error al obtener estadísticas:",e),new Error("No se pudieron obtener las estadísticas")}},Vee=async(t,e)=>{try{if(!e.trim())return[];const n=an(Lt(It,zv),Vr("userId","==",t),sr("diaAusencia","desc"),Ef(100)),s=(await Da(n)).docs.map(y4),a=e.toLowerCase();return s.filter(i=>i.docenteAusente.toLowerCase().includes(a)||i.docenteReemplazante.toLowerCase().includes(a)||i.curso.toLowerCase().includes(a)||i.diaAusencia.includes(a)||i.asignaturaAusente.toLowerCase().includes(a)||i.asignaturaReemplazante.toLowerCase().includes(a))}catch(n){return console.error("Error en búsqueda de reemplazos:",n),[]}},zee=Array.from({length:12},(t,e)=>e+1),i6={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},Gee=t=>{const[e,n]=G.useState([]),[r,s]=G.useState(!0),[a,i]=G.useState(null);G.useEffect(()=>t?jee(t,h=>{n(h),s(!1)}):void 0,[t]);const o=G.useCallback(async d=>{try{return i(null),await Pee(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al guardar"),h}},[t]),l=G.useCallback(async d=>{try{i(null),await Oee(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al eliminar"),h}},[t]),u=G.useCallback(async d=>{try{return i(null),d.trim()?await Vee(t,d):e}catch(h){return i(h instanceof Error?h.message:"Error en la búsqueda"),[]}},[t,e]);return{reemplazos:e,loading:r,error:a,save:o,remove:l,search:u}},qee=()=>{const[t,e]=G.useState([]),[n,r]=G.useState(!0);G.useEffect(()=>Qee(i=>{e(i),r(!1)}),[]);const s=G.useMemo(()=>t.map(a=>a.nombreCompleto).sort(),[t]);return{profesores:t,profesorNames:s,loading:n}},Kee=({selectedBlocks:t,onChange:e,legend:n,disabled:r=!1})=>c.jsxs("fieldset",{children:[c.jsx("legend",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:n}),c.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2",children:zee.map(s=>c.jsxs("label",{className:`flex items-center space-x-2 p-2 border rounded-lg transition-colors ${r?"opacity-50 cursor-not-allowed":"hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-700"}`,children:[c.jsx("input",{type:"checkbox",value:s,checked:t.includes(s),onChange:e,disabled:r,className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500 disabled:opacity-50"}),c.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:s})]},s))})]}),$ee=({userId:t})=>{const[e,n]=G.useState(null),[r,s]=G.useState(!1),a=G.useCallback(async()=>{try{s(!0);const i=new Date,o=(i.getMonth()+1).toString(),l=i.getFullYear().toString(),u=await Hee(t);n(u)}catch(i){console.error("Error al cargar estadísticas:",i)}finally{s(!1)}},[t]);return G.useEffect(()=>{t&&a()},[t,a]),r?c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("div",{className:"animate-pulse flex justify-center",children:c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):e?c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[c.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Estadísticas del Mes"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.totalReemplazos}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Total"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:e.horasRealizadas}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Realizadas"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:e.horasCubiertas}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Cubiertas"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[e.porcentajeRealizadas.toFixed(1),"%"]}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Efectividad"})]})]})]}):null},Wee=({currentUser:t})=>{const e=t.email||t.id||"",{reemplazos:n,save:r,remove:s,search:a,loading:i,error:o}=Gee(e),{profesorNames:l,loading:u}=qee(),[d,h]=G.useState(i6),[m,p]=G.useState(""),[y,x]=G.useState([]),[C,S]=G.useState(null),[k,I]=G.useState(!1),[F,U]=G.useState(!1);G.useEffect(()=>{(async()=>{if(!m.trim()){x(n);return}U(!0);try{const L=await a(m);x(L)}catch(L){console.error("Error en búsqueda:",L),x(n)}finally{U(!1)}})()},[n,m,a]);const R=G.useCallback(D=>{const{name:L,value:Q}=D.target;h(H=>({...H,[L]:Q}))},[]),E=G.useCallback(D=>{const L=parseInt(D.target.value,10);h(Q=>{const H=Q.bloquesAfectados,te=H.includes(L)?H.filter(Y=>Y!==L):[...H,L].sort((Y,ne)=>Y-ne);return{...Q,bloquesAfectados:te}})},[]),_=G.useCallback(async D=>{D.preventDefault(),S(null),I(!0);const{docenteAusente:L,asignaturaAusente:Q,curso:H,diaAusencia:te,bloquesAfectados:Y,docenteReemplazante:ne,asignaturaReemplazante:V}=d;if(!L||!Q||!H||!te||!ne||!V||Y.length===0){S("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),I(!1);return}if(L===ne){S("El docente ausente y el reemplazante no pueden ser la misma persona."),I(!1);return}const J=new Date(te),K=new Date;if(K.setHours(0,0,0,0),J<K&&!window.confirm("La fecha seleccionada es anterior a hoy. ¿Desea continuar?")){I(!1);return}try{const ie=Q.trim().toLowerCase()===V.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",O={...d,resultado:ie};await r(O),h(i6);const W=ie==="Hora realizada"?"✅ Reemplazo registrado - Hora realizada":"⚠️ Reemplazo registrado - Hora cubierta, no realizada",Z=document.createElement("div");Z.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",Z.textContent=W,document.body.appendChild(Z),setTimeout(()=>{document.body.contains(Z)&&document.body.removeChild(Z)},3e3)}catch(ie){console.error("Error al guardar reemplazo:",ie),S("Error al guardar el reemplazo. Por favor, intente nuevamente.")}finally{I(!1)}},[d,r]),B=G.useCallback(async D=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await s(D)}catch(L){console.error("Error al eliminar reemplazo:",L),alert("Error al eliminar el reemplazo. Por favor, intente nuevamente.")}},[s]),j="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400 disabled:opacity-50 disabled:cursor-not-allowed";return!t||!t.email&&!t.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx($ee,{userId:e}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Registro de Inasistencias y Reemplazos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete el formulario para registrar una nueva suplencia."}),u?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando profesores..."})]}):c.jsxs("form",{onSubmit:_,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Ausente"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docenteAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),c.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:R,className:j,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(D=>c.jsx("option",{value:D,children:D},D))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignaturaAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:R,className:j,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),po.map(D=>c.jsx("option",{value:D,children:D},D))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:d.curso,onChange:R,className:j,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),Js.map(D=>c.jsx("option",{value:D,children:D},D))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"diaAusencia",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Día Ausencia"}),c.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:R,className:j,disabled:k,required:!0})]}),c.jsx(Kee,{legend:"Bloques Afectados",selectedBlocks:d.bloquesAfectados,onChange:E,disabled:k})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Reemplazante"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docenteReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),c.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:R,className:j,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(D=>c.jsx("option",{value:D,children:D},D))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignaturaReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:R,className:j,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),po.map(D=>c.jsx("option",{value:D,children:D},D))]})]}),d.asignaturaAusente&&d.asignaturaReemplazante&&c.jsxs("div",{className:"mt-6 p-4 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600",children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Vista Previa del Resultado:"}),c.jsx("div",{className:`px-3 py-2 rounded-full text-sm font-semibold inline-flex ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"✅ Hora realizada":"⚠️ Hora cubierta, no realizada"}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden - se considera hora realizada":"Las asignaturas no coinciden - se considera hora cubierta pero no realizada"})]})]})]}),(C||o)&&c.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:c.jsx("p",{className:"text-red-600 dark:text-red-400",children:C||o})}),c.jsx("div",{className:"pt-4 text-right",children:c.jsxs("button",{type:"submit",disabled:k||u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[k&&c.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),k?"Registrando...":"Registrar Reemplazo"]})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Reemplazos"}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)...",value:m,onChange:D=>p(D.target.value),className:`${j} md:w-1/2 pl-10`,disabled:F}),c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:F?c.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"}):c.jsx("svg",{className:"h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),m&&c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:F?"Buscando...":`${y.length} resultado(s) encontrado(s)`})]}),i?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando reemplazos..."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Ausente"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Reemplazante"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Bloques"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Resultado"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:y.length>0?y.map(D=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(D.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:D.curso}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[D.docenteAusente,c.jsx("br",{}),c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:D.asignaturaAusente})]}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[D.docenteReemplazante,c.jsx("br",{}),c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:D.asignaturaReemplazante})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:D.bloquesAfectados.join(", ")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${D.resultado==="Hora realizada"?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:D.resultado})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm",children:c.jsx("button",{onClick:()=>B(D.id),title:"Eliminar registro",className:"p-1 text-red-600 hover:text-red-800 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors disabled:opacity-50",disabled:k,children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},D.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:m?"No se encontraron registros que coincidan con la búsqueda.":"No hay registros de reemplazos."})})})]})}),y.length>0&&!m&&c.jsxs("div",{className:"mt-4 text-sm text-slate-500 dark:text-slate-400 text-center",children:["Mostrando los últimos ",y.length," registros"]})]})]})},Yee=t=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const e=Lt(er,"reemplazos"),n=an(e,sr("fecha","desc"));return En(n,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log("✅ Reemplazos cargados para dashboard:",a.length),t(a)},s=>{throw console.error("❌ Error al cargar reemplazos:",s),s})}catch(e){throw console.error("❌ Error al configurar suscripción a reemplazos:",e),e}},Xee=t=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const e=Lt(er,"acompanamientos"),n=an(e,sr("fecha","desc"));return En(n,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log("✅ Acompañamientos cargados para dashboard:",a.length),t(a)},s=>{throw console.error("❌ Error al cargar acompañamientos:",s),s})}catch(e){throw console.error("❌ Error al configurar suscripción a acompañamientos:",e),e}},Jee=t=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const e=Lt(er,"calendar_events"),n=an(e,sr("date","asc"));return En(n,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log("✅ Eventos del calendario cargados para dashboard:",a.length),t(a)},s=>{throw console.error("❌ Error al cargar eventos del calendario:",s),s})}catch(e){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",e),e}},Bu=({title:t,value:e,description:n,isLoading:r=!1})=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),r?c.jsxs("div",{className:"flex items-center mt-2",children:[c.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:e}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:n})]})]}),wh=({title:t,data:e,colorClass:n,valueFormatter:r=a=>String(a),isLoading:s=!1})=>{const a=G.useMemo(()=>e.map(o=>typeof o.value=="number"?o.value:parseFloat(String(o.value))||0),[e]),i=G.useMemo(()=>Math.max(...a,1),[a]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),s?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):c.jsx("div",{className:"space-y-4",children:e.length>0?e.sort((o,l)=>(typeof l.value=="number"?l.value:0)-(typeof o.value=="number"?o.value:0)).map((o,l)=>{const u=typeof o.value=="number"?o.value:parseFloat(String(o.value))||0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:o.label}),c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:r(o.value)})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:`${n} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/i*100}%`}})})]},o.label+l)}):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},Zee=()=>{const[t,e]=G.useState([]),[n,r]=G.useState([]),[s,a]=G.useState([]),[i,o]=G.useState(!0),[l,u]=G.useState(null);return G.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let d=0;const h=3,m=()=>{d++,d>=h&&(o(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const p=Yee(C=>{e(C),m()}),y=Xee(C=>{r(C),m()}),x=Jee(C=>{a(C),m()});return()=>{p(),y(),x()}}catch(p){console.error("❌ Error al configurar suscripciones del dashboard:",p),u(p instanceof Error?p.message:"Error al cargar datos del dashboard"),o(!1)}},[]),{registros:t,acompanamientos:n,calendarEvents:s,loading:i,error:l}},ete=({currentUser:t})=>{var h,m;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",t),console.log("🔍 Dashboard - currentUser.profile:",t==null?void 0:t.profile),console.log("🔍 Dashboard - Verificación de perfil:",(t==null?void 0:t.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(t==null?void 0:t.profile)),console.log("🔍 Dashboard - Profile length:",(h=t==null?void 0:t.profile)==null?void 0:h.length),console.log("🔍 Dashboard - Profile con comillas:",`"${t==null?void 0:t.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((m=t==null?void 0:t.profile)==null?void 0:m.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:e,acompanamientos:n,calendarEvents:r,loading:s,error:a}=Zee(),[i,o]=G.useState(vx);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:e.length,acompanamientos:n.length,calendarEvents:r.length,loading:s,error:a,currentUser:t==null?void 0:t.profile}),G.useEffect(()=>{try{const p=localStorage.getItem("acompanamientoDocenteCustomRubrica");o(p?JSON.parse(p):vx)}catch(p){console.error("Error al leer rúbrica personalizada",p),o(vx)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!t),console.log("🔍 Dashboard - profile value:",`"${t==null?void 0:t.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(t==null?void 0:t.profile)==="SUBDIRECCION"),!t)return console.log("❌ Dashboard - currentUser es null/undefined"),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(t.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",t.profile),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),c.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[c.jsx("p",{children:c.jsx("strong",{children:"Debug Info:"})}),c.jsxs("p",{children:['Su perfil actual: "',t.profile,'"']}),c.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),c.jsxs("p",{children:["Usuario: ",t.email||t.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),a)return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),c.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:a}),c.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const l=G.useMemo(()=>{const p=e.length;if(p===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const y=e.filter(U=>U.resultado==="Hora realizada").length,x=p-y,C=`${(y/p*100).toFixed(1)}%`,S=(U,R)=>U.reduce((E,_)=>{const B=_[R];return typeof B=="string"&&(E[B]=(E[B]||0)+1),E},{}),k=S(e,"docenteAusente"),I=S(e,"docenteReemplazante"),F=S(e,"curso");return{totalInasistencias:p,horasRealizadas:y,horasCubiertas:x,tasaCobertura:C,inasistenciasPorDocente:Object.entries(k).map(([U,R])=>({label:U,value:R})),reemplazosPorDocente:Object.entries(I).map(([U,R])=>({label:U,value:R})),inasistenciasPorCurso:Object.entries(F).map(([U,R])=>({label:U,value:R})),distribucionResultados:[{label:"Hora Realizada",value:y},{label:"Hora Cubierta",value:x}]}},[e]),u=G.useMemo(()=>{const p=n.length;if(p===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const y=new Map;i.forEach(R=>{R.criteria.forEach(E=>{y.set(E.name,R.domain)})});let x=0,C=0;const S={},k={};n.forEach(R=>{S[R.docente]||(S[R.docente]={total:0,count:0}),Object.entries(R.rubricaResultados).forEach(([E,_])=>{x+=_,C++,S[R.docente].total+=_,S[R.docente].count++;const B=y.get(E);B&&(k[B]||(k[B]={total:0,count:0}),k[B].total+=_,k[B].count++)})});const I=C>0?(x/C).toFixed(2):"N/A",F=Object.entries(S).map(([R,E])=>({label:R,value:E.count>0?(E.total/E.count).toFixed(2):0})),U=Object.entries(k).map(([R,E])=>({label:R,value:E.count>0?(E.total/E.count).toFixed(2):0}));return{totalAcompanamientos:p,promedioGeneral:I,desempenoPorDocente:F,desempenoPorDominio:U}},[n,i]),d=G.useMemo(()=>{const p={[fr.EVALUACION]:0,[fr.ACTO]:0,[fr.ACTIVIDAD_FOCALIZADA]:0,[fr.SALIDA_PEDAGOGICA]:0};for(const x of r)p.hasOwnProperty(x.type)&&p[x.type]++;const y=Object.entries(p).map(([x,C])=>({label:cf[x].label,value:C}));return{totalEvaluaciones:p[fr.EVALUACION],totalActos:p[fr.ACTO],totalActividadesFocalizadas:p[fr.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:p[fr.SALIDA_PEDAGOGICA],distribucionEventos:y}},[r]);return s?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):l.totalInasistencias===0&&u.totalAcompanamientos===0&&r.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"📊"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),c.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[c.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),c.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),c.jsx("p",{children:"• Calendario Académico"})]})]}):c.jsxs("div",{className:"space-y-12 animate-fade-in",children:[c.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[c.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),c.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),c.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),e.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(Bu,{title:"Total Inasistencias",value:l.totalInasistencias,description:"Registros totales",isLoading:s}),c.jsx(Bu,{title:"Horas Realizadas",value:l.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:s}),c.jsx(Bu,{title:"Horas Cubiertas",value:l.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:s}),c.jsx(Bu,{title:"Tasa de Cobertura Efectiva",value:l.tasaCobertura,description:"% de horas realizadas",isLoading:s})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(wh,{title:"Inasistencias por Docente",data:l.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:s}),c.jsx(wh,{title:"Reemplazos por Docente",data:l.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:s}),c.jsx(wh,{title:"Inasistencias por Curso",data:l.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:s}),c.jsx(wh,{title:"Distribución de Resultados",data:l.distribucionResultados,colorClass:"bg-green-400",isLoading:s})]})]}),n.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(Bu,{title:"Total Acompañamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:s}),c.jsx(Bu,{title:"Promedio General",value:u.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:s})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(wh,{title:"Desempeño Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:p=>Number(p).toFixed(2),isLoading:s}),c.jsx(wh,{title:"Desempeño Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:p=>Number(p).toFixed(2),isLoading:s})]})]}),r.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(Bu,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:s}),c.jsx(Bu,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:s}),c.jsx(Bu,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:s}),c.jsx(Bu,{title:"Salidas Pedagógicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:s})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(wh,{title:"Distribución de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:s}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),s?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):c.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[r.filter(p=>new Date(p.date)>=new Date).slice(0,5).map((p,y)=>{var x,C;return c.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:p.responsables||"Evento sin título"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(p.date).toLocaleDateString("es-CL")}),p.ubicacion&&c.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",p.ubicacion]})]}),c.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((x=cf[p.type])==null?void 0:x.color)||"bg-gray-100 text-gray-800"}`,children:((C=cf[p.type])==null?void 0:C.label)||p.type})]})},p.id||y)}),r.filter(p=>new Date(p.date)>=new Date).length===0&&c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),c.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:e.length+n.length+r.length}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...e.map(p=>p.docenteAusente),...n.map(p=>p.docente)]).size}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(e.filter(p=>p.resultado==="Hora realizada").length/Math.max(e.length,1)*100),"%"]}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),c.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[c.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),c.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})};var o6;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(o6||(o6={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var l6;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(l6||(l6={}));var c6;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(c6||(c6={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6=["user","model","function","system"];var A6;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(A6||(A6={}));var d6;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(d6||(d6={}));var f6;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(f6||(f6={}));var h6;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(h6||(h6={}));var yx;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(yx||(yx={}));var m6;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(m6||(m6={}));var p6;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(p6||(p6={}));var g6;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(g6||(g6={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Z0 extends Ji{constructor(e,n){super(e),this.response=n}}class pj extends Ji{constructor(e,n,r,s){super(e),this.status=n,this.statusText=r,this.errorDetails=s}}class _f extends Ji{}class gj extends Ji{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tte="https://generativelanguage.googleapis.com",nte="v1beta",rte="0.24.1",ste="genai-js";var e0;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(e0||(e0={}));class ate{constructor(e,n,r,s,a){this.model=e,this.task=n,this.apiKey=r,this.stream=s,this.requestOptions=a}toString(){var e,n;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||nte;let a=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||tte}/${r}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function ite(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${ste}/${rte}`),e.join(" ")}async function ote(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",ite(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let r=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(s){throw new _f(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${s.message}`)}for(const[s,a]of r.entries()){if(s==="x-goog-api-key")throw new _f(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new _f(`Header name ${s} can only be set using the apiClient field`);n.append(s,a)}}return n}async function lte(t,e,n,r,s,a){const i=new ate(t,e,n,r,a);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},dte(a)),{method:"POST",headers:await ote(i),body:s})}}async function Gv(t,e,n,r,s,a={},i=fetch){const{url:o,fetchOptions:l}=await lte(t,e,n,r,s,a);return cte(o,l,i)}async function cte(t,e,n=fetch){let r;try{r=await n(t,e)}catch(s){ute(s,t)}return r.ok||await Ate(r,t),r}function ute(t,e){let n=t;throw n.name==="AbortError"?(n=new gj(`Request aborted when fetching ${e.toString()}: ${t.message}`),n.stack=t.stack):t instanceof pj||t instanceof _f||(n=new Ji(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function Ate(t,e){let n="",r;try{const s=await t.json();n=s.error.message,s.error.details&&(n+=` ${JSON.stringify(s.error.details)}`,r=s.error.details)}catch{}throw new pj(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,r)}function dte(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),I2(t.candidates[0]))throw new Z0(`${ef(t)}`,t);return fte(t)}else if(t.promptFeedback)throw new Z0(`Text not available. ${ef(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),I2(t.candidates[0]))throw new Z0(`${ef(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),x6(t)[0]}else if(t.promptFeedback)throw new Z0(`Function call not available. ${ef(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),I2(t.candidates[0]))throw new Z0(`${ef(t)}`,t);return x6(t)}else if(t.promptFeedback)throw new Z0(`Function call not available. ${ef(t)}`,t)},t}function fte(t){var e,n,r,s;const a=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const i of(s=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)i.text&&a.push(i.text),i.executableCode&&a.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&a.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function x6(t){var e,n,r,s;const a=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const i of(s=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)i.functionCall&&a.push(i.functionCall);if(a.length>0)return a}const hte=[yx.RECITATION,yx.SAFETY,yx.LANGUAGE];function I2(t){return!!t.finishReason&&hte.includes(t.finishReason)}function ef(t){var e,n,r;let s="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)s+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(s+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((r=t.candidates)===null||r===void 0)&&r[0]){const a=t.candidates[0];I2(a)&&(s+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(s+=`: ${a.finishMessage}`))}return s}function Wx(t){return this instanceof Wx?(this.v=t,this):new Wx(t)}function mte(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,a=[];return s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s;function i(m){r[m]&&(s[m]=function(p){return new Promise(function(y,x){a.push([m,p,y,x])>1||o(m,p)})})}function o(m,p){try{l(r[m](p))}catch(y){h(a[0][3],y)}}function l(m){m.value instanceof Wx?Promise.resolve(m.value.v).then(u,d):h(a[0][2],m)}function u(m){o("next",m)}function d(m){o("throw",m)}function h(m,p){m(p),a.shift(),a.length&&o(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function pte(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=vte(e),[r,s]=n.tee();return{stream:xte(r),response:gte(s)}}async function gte(t){const e=[],n=t.getReader();for(;;){const{done:r,value:s}=await n.read();if(r)return w4(yte(e));e.push(s)}}function xte(t){return mte(this,arguments,function*(){const n=t.getReader();for(;;){const{value:r,done:s}=yield Wx(n.read());if(s)break;yield yield Wx(w4(r))}})}function vte(t){const e=t.getReader();return new ReadableStream({start(r){let s="";return a();function a(){return e.read().then(({value:i,done:o})=>{if(o){if(s.trim()){r.error(new Ji("Failed to parse stream"));return}r.close();return}s+=i;let l=s.match(v6),u;for(;l;){try{u=JSON.parse(l[1])}catch{r.error(new Ji(`Error parsing JSON response: "${l[1]}"`));return}r.enqueue(u),s=s.substring(l[0].length),l=s.match(v6)}return a()}).catch(i=>{let o=i;throw o.stack=i.stack,o.name==="AbortError"?o=new gj("Request aborted when reading from the stream"):o=new Ji("Error reading from the stream"),o})}}})}function yte(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of t){if(r.candidates){let s=0;for(const a of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[s]||(n.candidates[s]={index:s}),n.candidates[s].citationMetadata=a.citationMetadata,n.candidates[s].groundingMetadata=a.groundingMetadata,n.candidates[s].finishReason=a.finishReason,n.candidates[s].finishMessage=a.finishMessage,n.candidates[s].safetyRatings=a.safetyRatings,a.content&&a.content.parts){n.candidates[s].content||(n.candidates[s].content={role:a.content.role||"user",parts:[]});const i={};for(const o of a.content.parts)o.text&&(i.text=o.text),o.functionCall&&(i.functionCall=o.functionCall),o.executableCode&&(i.executableCode=o.executableCode),o.codeExecutionResult&&(i.codeExecutionResult=o.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),n.candidates[s].content.parts.push(i)}s++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xj(t,e,n,r){const s=await Gv(e,e0.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),r);return pte(s)}async function vj(t,e,n,r){const a=await(await Gv(e,e0.GENERATE_CONTENT,t,!1,JSON.stringify(n),r)).json();return{response:w4(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function Yx(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return wte(e)}function wte(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,s=!1;for(const a of t)"functionResponse"in a?(n.parts.push(a),s=!0):(e.parts.push(a),r=!0);if(r&&s)throw new Ji("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!s)throw new Ji("No content is provided for sending chat message.");return r?e:n}function bte(t,e){var n;let r={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const s=t.generateContentRequest!=null;if(t.contents){if(s)throw new _f("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=t.contents}else if(s)r=Object.assign(Object.assign({},r),t.generateContentRequest);else{const a=Yx(t);r.contents=[a]}return{generateContentRequest:r}}function y6(t){let e;return t.contents?e=t:e={contents:[Yx(t)]},t.systemInstruction&&(e.systemInstruction=yj(t.systemInstruction)),e}function Cte(t){return typeof t=="string"||Array.isArray(t)?{content:Yx(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Ete={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function _te(t){let e=!1;for(const n of t){const{role:r,parts:s}=n;if(!e&&r!=="user")throw new Ji(`First content should be with role 'user', got ${r}`);if(!u6.includes(r))throw new Ji(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(u6)}`);if(!Array.isArray(s))throw new Ji("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new Ji("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of s)for(const l of w6)l in o&&(a[l]+=1);const i=Ete[r];for(const o of w6)if(!i.includes(o)&&a[o]>0)throw new Ji(`Content with role '${r}' can't contain '${o}' part`);e=!0}}function b6(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const r of n.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6="SILENT_ERROR";class Ste{constructor(e,n,r,s={}){this.model=n,this.params=r,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(_te(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var r,s,a,i,o,l;await this._sendPromise;const u=Yx(e),d={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},h=Object.assign(Object.assign({},this._requestOptions),n);let m;return this._sendPromise=this._sendPromise.then(()=>vj(this._apiKey,this.model,d,h)).then(p=>{var y;if(b6(p.response)){this._history.push(u);const x=Object.assign({parts:[],role:"model"},(y=p.response.candidates)===null||y===void 0?void 0:y[0].content);this._history.push(x)}else{const x=ef(p.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}m=p}).catch(p=>{throw this._sendPromise=Promise.resolve(),p}),await this._sendPromise,m}async sendMessageStream(e,n={}){var r,s,a,i,o,l;await this._sendPromise;const u=Yx(e),d={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},h=Object.assign(Object.assign({},this._requestOptions),n),m=xj(this._apiKey,this.model,d,h);return this._sendPromise=this._sendPromise.then(()=>m).catch(p=>{throw new Error(C6)}).then(p=>p.response).then(p=>{if(b6(p)){this._history.push(u);const y=Object.assign({},p.candidates[0].content);y.role||(y.role="model"),this._history.push(y)}else{const y=ef(p);y&&console.warn(`sendMessageStream() was unsuccessful. ${y}. Inspect response object for details.`)}}).catch(p=>{p.message!==C6&&console.error(p)}),m}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tte(t,e,n,r){return(await Gv(e,e0.COUNT_TOKENS,t,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nte(t,e,n,r){return(await Gv(e,e0.EMBED_CONTENT,t,!1,JSON.stringify(n),r)).json()}async function Bte(t,e,n,r){const s=n.requests.map(i=>Object.assign(Object.assign({},i),{model:e}));return(await Gv(e,e0.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:s}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(e,n,r={}){this.apiKey=e,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=yj(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var r;const s=y6(e),a=Object.assign(Object.assign({},this._requestOptions),n);return vj(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),a)}async generateContentStream(e,n={}){var r;const s=y6(e),a=Object.assign(Object.assign({},this._requestOptions),n);return xj(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),a)}startChat(e){var n;return new Ste(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const r=bte(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),n);return Tte(this.apiKey,this.model,r,s)}async embedContent(e,n={}){const r=Cte(e),s=Object.assign(Object.assign({},this._requestOptions),n);return Nte(this.apiKey,this.model,r,s)}async batchEmbedContents(e,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return Bte(this.apiKey,this.model,e,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new Ji("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new E6(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,r){if(!e.name)throw new _f("Cached content must contain a `name` field.");if(!e.model)throw new _f("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const i of s)if(n!=null&&n[i]&&e[i]&&(n==null?void 0:n[i])!==e[i]){if(i==="model"){const o=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,l=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(o===l)continue}throw new _f(`Different value for "${i}" specified in modelParams (${n[i]}) and cachedContent (${e[i]})`)}const a=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new E6(this.apiKey,a,r)}}const b4="horario_asignaciones",wj="horarios_generados",kte="usuarios",bj=t=>{const e=t.data();return{id:t.id,...e}},Ite=t=>{const e=an(Lt(It,b4));return En(e,r=>{const s=r.docs.map(a=>bj(a));t(s)},r=>{console.error("Error al suscribirse a las asignaciones:",r),t([])})},Fte=async t=>{try{return(await Cs(Lt(It,b4),t)).id}catch(e){throw console.error("Error al agregar asignación:",e),new Error("No se pudo agregar la asignación.")}},Dte=async t=>{try{const e=Cn(It,b4,t);await Ka(e)}catch(e){throw console.error("Error al eliminar asignación:",e),new Error("No se pudo eliminar la asignación.")}},_6=async t=>{try{const e=Cn(It,wj,"global");await io(e,{data:t})}catch(e){throw console.error("Error al guardar los horarios:",e),new Error("No se pudieron guardar los horarios generados.")}},Rte=t=>{const e=Cn(It,wj,"global");return En(e,r=>{r.exists()?t(r.data().data||{}):t({})},r=>{console.error("Error al suscribirse a los horarios:",r),t({})})},Lte=t=>{const e=an(Lt(It,kte),Vr("profile","==",qt.PROFESORADO));return En(e,r=>{const s=r.docs.map(a=>bj(a));t(s)},r=>{console.error("Error al suscribirse a los profesores:",r),t([])})},Ute=({horarios:t})=>Object.keys(t).length===0?c.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'Aún no se ha generado ningún horario. Utilice la pestaña de "Configuración" para generar uno.'})}):c.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full border-collapse",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:c.jsxs("tr",{children:[c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),Js.map(e=>c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:e},e))]})}),c.jsx("tbody",{children:k2.map(e=>c.jsxs(gt.Fragment,{children:[c.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:c.jsx("th",{colSpan:2+Js.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:e.toUpperCase()})}),k5.map(({bloque:n,inicio:r,fin:s})=>c.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:n}),c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${r} - ${s}`}),Js.map(a=>{var o,l;const i=(l=(o=t[a])==null?void 0:o[e])==null?void 0:l[n];return c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:i!=null&&i.asignatura?c.jsxs("div",{className:"flex flex-col justify-center h-full",children:[c.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:i.asignatura}),c.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",i.profesor,")"]})]}):c.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${a}-${e}-${n}`)})]},`${e}-${n}`))]},e))})]})}),Mte=()=>{const[t,e]=G.useState([]),[n,r]=G.useState({curso:"",asignatura:"",profesor:""}),[s,a]=G.useState([]),[i,o]=G.useState({}),[l,u]=G.useState(Js[0]),[d,h]=G.useState(!1),[m,p]=G.useState(!0),[y,x]=G.useState(null),[C,S]=G.useState(null),[k,I]=G.useState(null),[F,U]=G.useState({asignatura:"",profesor:""}),[R,E]=G.useState("edicion"),[_,B]=G.useState("");G.useEffect(()=>{p(!0);const V=Ite(e),J=Rte(o),K=Lte(ie=>{const O=ie.map(W=>W.nombreCompleto).sort();a(O),p(!1)});return()=>{V(),J(),K()}},[]);const j=async V=>{if(V.preventDefault(),x(null),!n.curso||!n.asignatura||!n.profesor){x("Todos los campos de la asignación son obligatorios.");return}try{await Fte({curso:n.curso,asignatura:n.asignatura,profesor:n.profesor}),r({curso:"",asignatura:"",profesor:""})}catch(J){x(J instanceof Error?J.message:"Error al guardar la asignación.")}},D=async V=>{try{await Dte(V)}catch(J){x(J instanceof Error?J.message:"Error al eliminar la asignación.")}},L=async()=>{if(t.length===0){x("Debe agregar al menos una asignación de profesor antes de generar el horario.");return}h(!0),x(null),S(null);try{const V="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",J=new Ra(V),K=`
                Eres un asistente experto en planificación de horarios escolares para un liceo técnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Días de la semana: ${k2.join(", ")}
                - Bloques horarios por día: 10 bloques con los siguientes horarios: ${JSON.stringify(k5,null,2)}
                - Cursos del liceo: ${Js.join(", ")}

                **Contexto Adicional de Especialidades (3º y 4º Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecánica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecánica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3°/4° Medio Automotriz" y "3°/4° Medio Industrial" correctamente.

                **Reglas de Asignación de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura según el nivel del curso:
                ${JSON.stringify(See,null,2)}
                Notas sobre las reglas:
                - '1º y 2º medio' aplica a cursos que empiezan con '1º' o '2º'.
                - '3º y 4º medio' aplica a cursos que empiezan con '3º' o '4º'.
                - Algunas reglas aplican a cursos específicos (ej. Mecánica).

                **Asignaciones de Profesores (Input):**
                Aquí está la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(t,null,2)}

                **REGLA CRÍTICA INVIOLABLE:**
                La restricción más importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo día y mismo bloque horario. Es físicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las demás. No deben existir topes de horario para ningún profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${_||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma más balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo día si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un único objeto JSON válido, sin texto adicional, explicaciones, ni el bloque \`\`\`json. La estructura del JSON debe ser la siguiente:
                {
                  "1ºA": {
                    "Lunes": { "1": { "asignatura": "Matemática", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemática", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1ºB": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada día de la semana. Cada día tiene claves para cada bloque del 1 al 10. Si un bloque está vacío, usa \`{ "asignatura": null, "profesor": null }\`.
            `,re=(await(await J.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(K)).response).text().replace(/^```json\s*|```\s*$/g,""),se=JSON.parse(re);await _6(se),S("¡Horario generado y guardado con éxito!")}catch(V){console.error("Error al generar horario con IA:",V),x("Ocurrió un error al contactar con la IA o al procesar la respuesta. Revisa la consola para más detalles.")}finally{h(!1)}},Q=(V,J,K)=>{I({dia:V,bloque:J}),U({asignatura:(K==null?void 0:K.asignatura)||"",profesor:(K==null?void 0:K.profesor)||""})},H=async()=>{if(!k)return;const{dia:V,bloque:J}=k,K=JSON.parse(JSON.stringify(i));K[l]||(K[l]={}),K[l][V]||(K[l][V]={}),K[l][V][J]={asignatura:F.asignatura||null,profesor:F.profesor||null};try{await _6(K),I(null)}catch(ie){x(ie instanceof Error?ie.message:"Error al guardar la edición.")}},te="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",Y=()=>{const V=i[l]||{};return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[c.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),k2.map(J=>c.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:J},J))]})}),c.jsx("tbody",{children:k5.map(({bloque:J,inicio:K,fin:ie})=>c.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[c.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:J}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${K} - ${ie}`})]}),k2.map(O=>{var re;const W=(k==null?void 0:k.dia)===O&&(k==null?void 0:k.bloque)===J,Z=(re=V[O])==null?void 0:re[J];return c.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!W&&Q(O,J,Z),children:W?c.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[c.jsx("input",{type:"text",placeholder:"Asignatura",value:F.asignatura,onChange:se=>U(de=>({...de,asignatura:se.target.value})),className:te+" text-xs mb-1"}),c.jsx("input",{type:"text",placeholder:"Profesor",value:F.profesor,onChange:se=>U(de=>({...de,profesor:se.target.value})),className:te+" text-xs"}),c.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[c.jsx("button",{onClick:()=>I(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),c.jsx("button",{onClick:H,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):Z!=null&&Z.asignatura?c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:Z.asignatura}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",Z.profesor,")"]})]}):c.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${O}-${J}`)})]},J))})]})})},ne=()=>c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🔧 1. Configuración de Asignaciones"}),c.jsxs("form",{onSubmit:j,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:n.curso,onChange:V=>r(J=>({...J,curso:V.target.value})),className:te,children:[c.jsx("option",{value:"",children:"Seleccione"}),Js.map(V=>c.jsx("option",{value:V,children:V},V))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignatura",value:n.asignatura,onChange:V=>r(J=>({...J,asignatura:V.target.value})),className:te,children:[c.jsx("option",{value:"",children:"Seleccione"}),po.map(V=>c.jsx("option",{value:V,children:V},V))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),c.jsxs("select",{name:"profesor",value:n.profesor,onChange:V=>r(J=>({...J,profesor:V.target.value})),className:te,children:[c.jsx("option",{value:"",children:"Seleccione"}),s.map(V=>c.jsx("option",{value:V,children:V},V))]})]}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),c.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:c.jsx("ul",{className:"space-y-2",children:t.map(V=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[c.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[V.curso," - ",V.asignatura," - ",c.jsx("strong",{children:V.profesor})]}),c.jsx("button",{onClick:()=>D(V.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:"×"})]},V.id))})})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🧠 2. Generación Automática con IA"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),c.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:_,onChange:V=>B(V.target.value),rows:3,placeholder:"Ej: Dejar los módulos teóricos en la mañana y los prácticos en la tarde. Evitar poner 2 bloques de matemática seguidos.",className:te})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("button",{onClick:L,disabled:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[d&&c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Generando...":"Generar Horario Completo"]}),y&&c.jsx("p",{className:"text-red-600",children:y}),C&&c.jsx("p",{className:"text-green-600",children:C})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"📅 3. Visualización y Edición por Curso"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),c.jsx("select",{id:"selectCurso",value:l,onChange:V=>u(V.target.value),className:te+" md:w-1/3",children:Js.map(V=>c.jsx("option",{value:V,children:V},V))})]}),Object.keys(i).length>0?Y():c.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Aún no se ha generado ningún horario. Utilice el botón de generación con IA."})})]})]});return m?c.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>E("edicion"),className:`${R==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuración y Edición por Curso"}),c.jsx("button",{onClick:()=>E("global"),className:`${R==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),R==="edicion"?ne():c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),c.jsx(Ute,{horarios:i})]})]})},eC="acciones",Pte=async()=>{try{const t=an(Lt(er,eC),sr("fechaRegistro","desc"));return(await Da(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener acciones:",t),new Error("No se pudieron cargar las acciones pedagógicas")}},Ote=async t=>{try{return{id:(await Cs(Lt(er,eC),{...t,fechaRegistro:t.fechaRegistro||new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear acción:",e),new Error("No se pudo crear la acción pedagógica")}},S6=async(t,e)=>{try{const n=Cn(er,eC,t);await Qv(n,{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error al actualizar acción:",n,"ID:",t),new Error("No se pudo actualizar la acción pedagógica")}},jte=async t=>{try{const e=Cn(er,eC,t);await Ka(e)}catch(e){throw console.error("Error al eliminar acción:",e,"ID:",t),new Error("No se pudo eliminar la acción pedagógica")}},T6={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",area:"",descripcion:"",fechaCumplimiento:"",estado:"Pendiente",enlaceDocumento:""},Qte={Pendiente:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En Proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Cumplida:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300"},Hte=()=>{const[t,e]=G.useState([]),[n,r]=G.useState(!1),[s,a]=G.useState(null),[i,o]=G.useState(T6),[l,u]=G.useState(null),[d,h]=G.useState(""),[m,p]=G.useState(""),[y,x]=G.useState(""),C=G.useCallback(async()=>{r(!0);try{const B=await Pte();e(B),a(null)}catch(B){console.error("Error al cargar acciones:",B),a("No se pudieron cargar las acciones pedagógicas.")}finally{r(!1)}},[]);G.useEffect(()=>{C()},[C]);const S=G.useCallback(B=>{const{name:j,value:D}=B.target;o(L=>({...L,[j]:D}))},[]),k=G.useCallback(()=>{o(T6),u(null),a(null)},[]),I=G.useCallback(async B=>{if(B.preventDefault(),!i.responsable||!i.area||!i.descripcion||!i.fechaCumplimiento){a("Los campos responsables, área, descripción y fecha de cumplimiento son obligatorios.");return}try{l?await S6(l,i):await Ote(i),await C(),k()}catch(j){console.error("Error al guardar acción:",j),a("Error al guardar la acción.")}},[i,l,C,k]),F=G.useCallback(B=>{window.scrollTo({top:0,behavior:"smooth"}),u(B.id),o({...B,enlaceDocumento:B.enlaceDocumento||""})},[]),U=G.useCallback(async B=>{if(window.confirm("¿Está seguro de que desea eliminar esta acción?"))try{await jte(B),await C()}catch(j){console.error("Error al eliminar acción:",j),a("No se pudo eliminar la acción.")}},[C]),R=G.useCallback(async B=>{try{const j=t.find(D=>D.id===B);if(j){const L=(fy.indexOf(j.estado)+1)%fy.length,Q=fy[L];await S6(B,{estado:Q}),await C()}}catch(j){console.error("Error al cambiar estado:",j),a("No se pudo cambiar el estado de la acción.")}},[t,C]),E=G.useMemo(()=>t.filter(B=>{const j=d===""||B.responsable.toLowerCase().includes(d.toLowerCase())||B.descripcion.toLowerCase().includes(d.toLowerCase()),D=m===""||B.area===m,L=y===""||B.estado===y;return j&&D&&L}),[t,d,m,y]),_="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Acciones Pedagógicas"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:l?"Editando acción existente.":"Registre una nueva acción de seguimiento."}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),c.jsxs("form",{onSubmit:I,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaRegistro",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Registro"}),c.jsx("input",{type:"date",name:"fechaRegistro",value:i.fechaRegistro,onChange:S,className:_})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),c.jsx("input",{type:"text",name:"responsable",value:i.responsable,onChange:S,placeholder:"Nombre del responsable",className:_})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"area",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Área Vinculada"}),c.jsxs("select",{name:"area",value:i.area,onChange:S,className:_,children:[c.jsx("option",{value:"",children:"Seleccione un área"}),e6.map(B=>c.jsx("option",{value:B,children:B},B))]})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Descripción de la Acción"}),c.jsx("textarea",{name:"descripcion",value:i.descripcion,onChange:S,rows:3,placeholder:"Detalle de la acción a realizar...",className:_})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaCumplimiento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Cumplimiento"}),c.jsx("input",{type:"date",name:"fechaCumplimiento",value:i.fechaCumplimiento,onChange:S,className:_})]}),c.jsxs("div",{className:"lg:col-span-2",children:[c.jsx("label",{htmlFor:"enlaceDocumento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace a Documento (Opcional)"}),c.jsx("input",{type:"url",name:"enlaceDocumento",value:i.enlaceDocumento||"",onChange:S,placeholder:"https://ejemplo.com/documento",className:_})]})]}),c.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[l&&c.jsx("button",{type:"button",onClick:k,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Acción":"Registrar Acción"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Tabla de Seguimiento"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por responsable o palabra clave...",value:d,onChange:B=>h(B.target.value),className:_+" md:col-span-1"}),c.jsxs("select",{value:m,onChange:B=>p(B.target.value),className:_,children:[c.jsx("option",{value:"",children:"Filtrar por Área"}),e6.map(B=>c.jsx("option",{value:B,children:B},B))]}),c.jsxs("select",{value:y,onChange:B=>x(B.target.value),className:_,children:[c.jsx("option",{value:"",children:"Filtrar por Estado"}),fy.map(B=>c.jsx("option",{value:B,children:B},B))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Responsable"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Descripción"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fechas"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:n?c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"text-center py-10",children:"Cargando..."})}):E.length>0?E.map(B=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:B.responsable}),c.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:B.area})]}),c.jsx("td",{className:"px-4 py-4 text-sm text-slate-600 dark:text-slate-300 max-w-sm whitespace-normal",children:B.descripcion}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:[c.jsxs("div",{children:["Reg: ",B.fechaRegistro]}),c.jsxs("div",{className:"font-semibold",children:["Comp: ",B.fechaCumplimiento]})]}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm",children:c.jsx("button",{onClick:()=>R(B.id),className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Qte[B.estado]}`,children:B.estado})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[B.enlaceDocumento&&c.jsx("a",{href:B.enlaceDocumento,target:"_blank",rel:"noopener noreferrer",title:"Ver Documento",className:"text-indigo-600 hover:text-indigo-800 p-1 rounded-full hover:bg-indigo-100 dark:hover:bg-indigo-900/40 inline-block align-middle",children:"🔗"}),c.jsx("button",{onClick:()=>F(B),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),c.jsx("button",{onClick:()=>U(B.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},B.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"text-center py-10 text-slate-500",children:"No se encontraron acciones."})})})]})})]})]})},tC="planificaciones",Cj="actividades_calendario",Ej=t=>{var n,r,s;const e=t.data();return{id:t.id,...e,fechaCreacion:((s=(r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n))==null?void 0:s.toISOString())||e.fechaCreacion}},Vte=async(t,e)=>{try{const n={...t,userId:e,fechaCreacion:mn.fromDate(new Date),fechaActualizacion:mn.fromDate(new Date)};return(await Cs(Lt(It,tC),n)).id}catch(n){throw console.error("Error al guardar planificación:",n),new Error("No se pudo guardar la planificación")}},zte=async(t,e,n)=>{try{const r=Cn(It,tC,t),s=await jv(r);if(!s.exists()||s.data().userId!==n)throw new Error("No tienes permisos para actualizar esta planificación");await Qv(r,{...e,fechaActualizacion:mn.fromDate(new Date)})}catch(r){throw console.error("Error al actualizar planificación:",r),new Error("No se pudo actualizar la planificación")}},Gte=async(t,e)=>{try{const n=Cn(It,tC,t),r=await jv(n);if(!r.exists()||r.data().userId!==e)throw new Error("No tienes permisos para eliminar esta planificación");await Ka(n)}catch(n){throw console.error("Error al eliminar planificación:",n),new Error("No se pudo eliminar la planificación")}},qte=(t,e)=>{const n=an(Lt(It,tC),Vr("userId","==",t),sr("fechaCreacion","desc"));return En(n,r=>{const s=r.docs.map(Ej);e(s)},r=>{console.error("Error en suscripción a planificaciones:",r)})},Kte=async(t,e)=>{try{const n={...t,userId:e,fechaCreacion:mn.fromDate(new Date),fechaActualizacion:mn.fromDate(new Date)};return(await Cs(Lt(It,Cj),n)).id}catch(n){throw console.error("Error al guardar actividad:",n),new Error("No se pudo guardar la actividad")}},$te=(t,e)=>{const n=an(Lt(It,Cj),Vr("userId","==",t),sr("fecha","desc"));return En(n,r=>{const s=r.docs.map(Ej);e(s)},r=>{console.error("Error en suscripción a actividades:",r)})},Wte=t=>{const[e,n]=G.useState([]),[r,s]=G.useState(!0),[a,i]=G.useState(null);return G.useEffect(()=>t?(s(!0),qte(t,h=>{n(h),s(!1)})):void 0,[t]),{planificaciones:e,loading:r,error:a,save:async d=>{try{return i(null),await Vte(d,t)}catch(h){throw i(h.message||"Error al guardar planificación"),h}},update:async(d,h)=>{try{i(null),await zte(d,h,t)}catch(m){throw i(m.message||"Error al actualizar planificación"),m}},remove:async d=>{try{i(null),await Gte(d,t)}catch(h){throw i(h.message||"Error al eliminar planificación"),h}}}},I5=t=>{const e=new Date().toISOString();console.log(`[${e}] API Call: ${t}`)},Yte=t=>{const[e,n]=G.useState([]),[r,s]=G.useState(!0),[a,i]=G.useState(null);G.useEffect(()=>t?$te(t,u=>{n(u),s(!1)}):void 0,[t]);const o=G.useCallback(async l=>{try{return i(null),await Kte(l,t)}catch(u){throw i(u instanceof Error?u.message:"Error al guardar actividad"),u}},[t]);return{actividades:e,loading:r,error:a,save:o}},Xte=({lesson:t,onClose:e,onSave:n,isLoading:r=!1})=>{const[s,a]=G.useState(t),i=l=>{a({...s,[l.target.name]:l.target.value})},o=async()=>{try{await n(s),e()}catch(l){console.error("Error al guardar lección:",l)}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),c.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(s).map(([l,u])=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:l.replace(/([A-Z])/g," $1")}),c.jsx("textarea",{name:l,value:u,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:r})]},l))}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[c.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:r,children:"Cancelar"}),c.jsxs("button",{onClick:o,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:r,children:[r&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},Jte=({plan:t,onEditLesson:e,onUseLesson:n,isLoading:r=!1,onUpdatePlan:s})=>{const[a,i]=G.useState(t.progreso??0),[o,l]=G.useState(!1),u=async d=>{const h=parseInt(d.target.value,10);i(h),l(!0);try{t.id&&s&&(await s(t.id,{progreso:h}),console.log("✅ Progreso actualizado exitosamente"))}catch(m){console.error("❌ Error completo:",m),alert(`Error al guardar el avance: ${m.message}`),i(t.progreso??0)}finally{l(!1)}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",t.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Indicadores de Evaluación:"})," ",t.indicadoresEvaluacion]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("input",{type:"range",min:0,max:100,value:a,onChange:u,disabled:o||r}),c.jsxs("span",{className:"font-bold w-12",children:[a,"%"]}),o&&c.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),c.jsx("div",{className:"space-y-4",children:t.detallesLeccion.map((d,h)=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[c.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",h+1,": ",d.actividades]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo:"})," ",d.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Contenidos:"})," ",d.contenidosConceptuales]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Habilidad (Bloom):"})," ",d.habilidadesBloom]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Perfil de Egreso:"})," ",d.perfilEgreso]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Interdisciplinariedad:"})," ",d.asignaturasInterdisciplinariedad]})]}),c.jsxs("div",{className:"flex gap-2 mt-4",children:[c.jsx("button",{onClick:()=>e(h,d),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:r,children:"Editar"}),c.jsx("button",{onClick:()=>n(d,t),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:r,children:"Usar para Plan de Clase"})]})]},h))})]})},Zte=({plan:t,onBack:e,onSave:n,onDelete:r,isLoading:s=!1})=>{const[a,i]=G.useState(t),[o,l]=G.useState(!1),u=h=>{const{name:m,value:p}=h.target,[y,x]=m.split(".");i(y==="momentosClase"?C=>({...C,momentosClase:{...C.momentosClase,[x]:p}}):C=>({...C,[m]:p}))},d=async()=>{l(!0);try{await n(a)}catch(h){console.error("Error al guardar plan de clase:",h)}finally{l(!1)}};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:t.nombreClase}),c.jsx("button",{onClick:e,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:s||o,children:"← Volver"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),c.jsx("textarea",{name:"momentosClase.inicio",value:a.momentosClase.inicio,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:s||o})]}),c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),c.jsx("textarea",{name:"momentosClase.desarrollo",value:a.momentosClase.desarrollo,onChange:u,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:s||o})]}),c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),c.jsx("textarea",{name:"momentosClase.cierre",value:a.momentosClase.cierre,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:s||o})]})]}),c.jsx("div",{className:"text-right mt-6",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("button",{onClick:()=>r(t.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:s||o,children:"🗑️ Eliminar Plan"}),c.jsxs("button",{onClick:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:s||o,children:[o&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},ene=({userId:t})=>{const{actividades:e,save:n}=Yte(t),[r,s]=G.useState("list"),[a,i]=G.useState(null),[o,l]=G.useState(!1),[u,d]=G.useState(!1),h={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[m,p]=G.useState(h);G.useEffect(()=>{r==="summary"&&a&&y()},[r,a,t]);const y=async()=>{if(a)try{d(!1)}catch(R){console.error("Error al verificar evento en calendario:",R)}},x=R=>{const{name:E,value:_}=R.target;p(B=>({...B,[E]:_}))},C=(R,E,_)=>{p(B=>({...B,tareas:B.tareas.map(j=>j.id===R?{...j,[E]:_}:j)}))},S=()=>{p(R=>({...R,tareas:[...R.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},k=R=>{p(E=>({...E,tareas:E.tareas.filter(_=>_.id!==R)}))},I=async R=>{R.preventDefault(),l(!0);const E=`Basado en la siguiente información de una actividad, genera un objetivo claro y conciso para esta.
    - Nombre: ${m.nombre}
    - Descripción: ${m.descripcion}
    - Tareas: ${m.tareas.map(_=>_.descripcion).join(", ")}
    El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propósito principal de la actividad.`;try{I5("Planificación - Actividad Calendario");const _="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Q=(await(await new Ra(_).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(E)).response).text(),H={...m,objetivo:Q.replace(/(\*\*|\*)/g,"")},te=await n(H),Y={...H,id:te};i(Y),s("summary")}catch(_){console.error("Error al generar objetivo con IA:",_),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él.");try{const B={...m,objetivo:"No generado"},j=await n(B),D={...B,id:j};i(D),s("summary")}catch(B){console.error("Error al guardar actividad:",B),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{l(!1)}},F=async R=>{if(R)try{d(!0),alert("Actividad marcada como añadida al calendario (funcionalidad en desarrollo).")}catch(E){console.error("Error adding to calendar:",E),alert("Hubo un error al agregar la actividad al calendario.")}},U="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white";return r==="form"?c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:c.jsxs("form",{onSubmit:I,className:"space-y-8",children:[c.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-bold mb-4",children:"Información General"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("input",{name:"nombre",value:m.nombre,onChange:x,placeholder:"Nombre de la Actividad",className:U,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{name:"fecha",type:"date",value:m.fecha,onChange:x,className:U,required:!0,disabled:o}),c.jsx("input",{name:"hora",type:"time",value:m.hora,onChange:x,className:U,required:!0,disabled:o})]}),c.jsx("textarea",{name:"descripcion",value:m.descripcion,onChange:x,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:U,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{name:"ubicacion",value:m.ubicacion,onChange:x,placeholder:"Ubicación",className:U,required:!0,disabled:o}),c.jsx("input",{name:"participantes",value:m.participantes,onChange:x,placeholder:"Participantes",className:U,required:!0,disabled:o})]}),c.jsx("textarea",{name:"recursosGenerales",value:m.recursosGenerales,onChange:x,placeholder:"Recursos Generales Necesarios",rows:2,className:U,disabled:o})]})]}),c.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),c.jsx("button",{type:"button",onClick:S,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:o,children:"+ Agregar Tarea"})]}),c.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:m.tareas.map((R,E)=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[c.jsx("button",{type:"button",onClick:()=>k(R.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:o,children:"×"}),c.jsx("textarea",{value:R.descripcion,onChange:_=>C(R.id,"descripcion",_.target.value),placeholder:`Descripción de la Tarea ${E+1}`,rows:2,className:U,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[c.jsx("input",{value:R.responsable,onChange:_=>C(R.id,"responsable",_.target.value),placeholder:"Responsable",className:U,required:!0,disabled:o}),c.jsx("input",{value:R.recursos,onChange:_=>C(R.id,"recursos",_.target.value),placeholder:"Recursos Necesarios",className:U,disabled:o})]})]},R.id))})]}),c.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[c.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),c.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{type:"button",onClick:()=>s("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:o,children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:o?c.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):r==="summary"&&a?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[c.jsx("span",{className:"text-2xl",children:"✓"}),c.jsxs("div",{children:[c.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),c.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),c.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),c.jsxs("div",{className:"space-y-4 text-sm",children:[c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),c.jsx("span",{children:a.nombre})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),c.jsx("span",{children:new Date(`${a.fecha}T${a.hora}`).toLocaleString("es-CL")})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),c.jsx("p",{children:a.descripcion})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),c.jsx("span",{children:a.ubicacion})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),c.jsx("span",{children:a.participantes})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),c.jsx("p",{children:a.recursosGenerales})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),c.jsx("p",{children:a.objetivo})]})]}),c.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[c.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),c.jsx("button",{onClick:()=>F(a),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),c.jsx("button",{onClick:()=>{s("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),c.jsx("button",{onClick:()=>{s("form"),p(h)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),c.jsx("div",{className:"space-y-3",children:e.length>0?e.map(R=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:R.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(R.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",R.ubicacion]})]},R.id)):c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},tne=({currentUser:t})=>{const e=t.uid||t.email||t.id||"",{planificaciones:n,save:r,update:s,remove:a,loading:i}=Wte(e),o={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[l,u]=G.useState(o),[d,h]=G.useState(null),[m,p]=G.useState(!1),[y,x]=G.useState(null),[C,S]=G.useState("unidad"),[k,I]=G.useState(null),[F,U]=G.useState(null),R=G.useMemo(()=>t.asignaturas||[],[t.asignaturas]),E=G.useMemo(()=>{const K=t.cursos||[],ie=new Set;return K.forEach(O=>{O.startsWith("1º")?ie.add("1º Medio"):O.startsWith("2º")?ie.add("2º Medio"):O.startsWith("3º")?ie.add("3º Medio"):O.startsWith("4º")&&ie.add("4º Medio")}),Array.from(ie)},[t.cursos]);G.useEffect(()=>{u(K=>({...K,asignatura:R[0]||"",nivel:E[0]||""})),console.log("🔍 Debug datos usuario y planificaciones:",{currentUser:{uid:t.uid,email:t.email,id:t.id,nombreCompleto:t.nombreCompleto},userId:e,planificacionesCount:n.length,planificacionesAutores:n.map(K=>({id:K.id,autor:K.autor,tipo:K.tipo,coincideConUserId:K.autor===e}))})},[R,E,t,e,n]);const _=K=>{const{name:ie,value:O}=K.target;u(W=>({...W,[ie]:ie==="cantidadClases"?parseInt(O,10):O}))},B=()=>{const{asignatura:K,nivel:ie,nombreUnidad:O,contenidos:W,cantidadClases:Z,observaciones:re,ideasParaUnidad:se}=l;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica completa en formato JSON estructurado, basándote en la información proporcionada.

    **Información Base:**
    - Asignatura: ${K}
    - Nivel: ${ie}
    - Nombre de la Unidad: "${O}"
    - Contenidos clave a trabajar (insumo principal): "${W}"
    - Cantidad de clases para la unidad: ${Z}
    - Ideas y perspectiva del docente para la unidad: "${se||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${re||"Ninguna"}"

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${Z} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
        - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},j=async K=>{if(K.preventDefault(),p(!0),x(null),!l.contenidos||!l.nombreUnidad){x("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),p(!1);return}try{I5("Planificación - Unidad");const ie="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",W=new Ra(ie).getGenerativeModel({model:"gemini-1.5-flash-latest"}),Z=B(),re={type:"object",properties:{objetivosAprendizaje:{type:"string"},indicadoresEvaluacion:{type:"string"},detallesLeccion:{type:"array",items:{type:"object",properties:{objetivosAprendizaje:{type:"string"},contenidosConceptuales:{type:"string"},habilidadesBloom:{type:"string"},perfilEgreso:{type:"string"},actividades:{type:"string"},asignaturasInterdisciplinariedad:{type:"string"}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},pe=(await(await W.generateContent({contents:[{parts:[{text:Z}]}],generationConfig:{responseMimeType:"application/json",responseSchema:re}})).response).text(),be=JSON.parse(pe),Se={fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Unidad",asignatura:l.asignatura,nivel:l.nivel,nombreUnidad:l.nombreUnidad,contenidos:l.contenidos,cantidadClases:l.cantidadClases,observaciones:l.observaciones,ideasParaUnidad:l.ideasParaUnidad,objetivosAprendizaje:be.objetivosAprendizaje,indicadoresEvaluacion:be.indicadoresEvaluacion,detallesLeccion:be.detallesLeccion};if(d)await s(d.id,Se),h({...Se,id:d.id});else{const me=await r(Se);h({...Se,id:me})}}catch(ie){console.error("Error al generar planificación con IA",ie),x("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{p(!1)}},D=async(K,ie)=>{p(!0),x(null);const O=`A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${ie.asignatura}
    - Nivel: ${ie.nivel}
    - Objetivo de la clase: ${K.objetivosAprendizaje}
    - Contenidos: ${K.contenidosConceptuales}
    - Actividades sugeridas: ${K.actividades}
    
    Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{I5("Planificación - Utilizar Clase");const W="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",re=new Ra(W).getGenerativeModel({model:"gemini-1.5-flash-latest"}),se={type:"object",properties:{inicio:{type:"string"},desarrollo:{type:"string"},cierre:{type:"string"}},required:["inicio","desarrollo","cierre"]},be=(await(await re.generateContent({contents:[{parts:[{text:O}]}],generationConfig:{responseMimeType:"application/json",responseSchema:se}})).response).text(),Se=JSON.parse(be),me={fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Clase",asignatura:ie.asignatura,nivel:ie.nivel,contenidos:K.contenidosConceptuales,observaciones:"",nombreClase:K.actividades,duracionClase:80,momentosClase:Se,detalleLeccionOrigen:K};await r(me),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),S("clase")}catch(W){console.error("Error al generar plan de clase con IA",W),x("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{p(!1)}},L=K=>{K.tipo==="Unidad"&&(u({asignatura:K.asignatura,nivel:K.nivel,nombreUnidad:K.nombreUnidad,contenidos:K.contenidos,cantidadClases:K.cantidadClases,observaciones:K.observaciones,ideasParaUnidad:K.ideasParaUnidad||""}),h(K),window.scrollTo({top:0,behavior:"smooth"}))},Q=async K=>{if(window.confirm("¿Está seguro de que desea eliminar esta planificación?"))try{await a(K),(d==null?void 0:d.id)===K&&(h(null),u(o))}catch(ie){console.error("Error al eliminar planificación:",ie),alert("Error al eliminar la planificación. Por favor, intente nuevamente.")}},H=async K=>{if(window.confirm("¿Está seguro de que desea eliminar este plan de clase?"))try{await a(K),(k==null?void 0:k.id)===K&&I(null),console.log("✅ Plan de clase eliminado exitosamente")}catch(ie){console.error("Error al eliminar plan de clase:",ie),alert("Error al eliminar el plan de clase. Por favor, intente nuevamente.")}},te=(K,ie)=>{d&&U({planId:d.id,lessonIndex:K,lessonData:ie})},Y=async K=>{if(F)try{const{planId:ie,lessonIndex:O}=F,W=n.find(se=>se.id===ie&&se.tipo==="Unidad");if(!W)return;const Z=[...W.detallesLeccion];Z[O]=K;const re={...W,detallesLeccion:Z};await s(ie,re),h(re),U(null)}catch(ie){console.error("Error al actualizar lección:",ie),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},ne="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",V=()=>c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsxs("form",{onSubmit:j,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:l.asignatura,onChange:_,className:ne,disabled:m,children:R.length>0?R.map(K=>c.jsx("option",{value:K,children:K},K)):c.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:l.nivel,onChange:_,className:ne,disabled:m,children:E.length>0?E.map(K=>c.jsx("option",{value:K,children:K},K)):c.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"nombreUnidad",value:l.nombreUnidad,onChange:_,className:ne,placeholder:"Ej: La Célula y sus procesos",disabled:m})]}),c.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[c.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenidos",value:l.contenidos,onChange:_,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificación debe abordar.",className:ne,disabled:m})]}),c.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[c.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),c.jsx("textarea",{name:"ideasParaUnidad",value:l.ideasParaUnidad,onChange:_,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:ne,disabled:m})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),c.jsx("input",{type:"number",name:"cantidadClases",value:l.cantidadClases,onChange:_,className:ne,min:"1",max:"20",disabled:m})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),c.jsx("textarea",{name:"observaciones",value:l.observaciones,onChange:_,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:ne,disabled:m})]})]}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:m||i,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[150px] dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:m?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d?"Regenerar":"Generar Plan"})}),y&&c.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:y})]})]}),d&&c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),c.jsx(Jte,{plan:d,onEditLesson:te,onUseLesson:D,onUpdatePlan:s,isLoading:m})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:"space-y-4",children:n.filter(K=>K.tipo==="Unidad").length>0?n.filter(K=>K.tipo==="Unidad").map(K=>c.jsx("div",{className:`p-4 border rounded-lg ${(d==null?void 0:d.id)===K.id?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:K.nombreUnidad}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(K.fechaCreacion).toLocaleString("es-CL")]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",K.contenidos]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>L(K),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm disabled:opacity-50",disabled:m,children:"Ver y Editar"}),c.jsx("button",{onClick:()=>Q(K.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 disabled:opacity-50",disabled:m,children:"🗑️"})]})]})},K.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),J=()=>{const K=n.filter(ie=>ie.tipo==="Clase").sort((ie,O)=>new Date(O.fechaCreacion).getTime()-new Date(ie.fechaCreacion).getTime());return k?c.jsx(Zte,{plan:k,onBack:()=>I(null),onDelete:H,onSave:async ie=>{try{await s(ie.id,ie),I(ie)}catch(O){console.error("Error al actualizar plan de clase:",O),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:m}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Planes de Clase Guardados"}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:"space-y-4",children:K.length>0?K.map(ie=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ie.nombreClase}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(ie.fechaCreacion).toLocaleString("es-CL")]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",ie.contenidos]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:()=>I(ie),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},ie.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return!t||!t.email&&!t.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>S("unidad"),className:`${C==="unidad"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Unidad"}),c.jsx("button",{onClick:()=>S("clase"),className:`${C==="clase"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Clase"}),c.jsx("button",{onClick:()=>S("calendario"),className:`${C==="calendario"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Actividades Calendario"})]})}),C==="unidad"&&V(),C==="clase"&&J(),C==="calendario"&&c.jsx(ene,{userId:e}),F&&c.jsx(Xte,{lesson:F.lessonData,onClose:()=>U(null),onSave:Y,isLoading:m})]})},nC="events",nne=async()=>{try{const t=an(Lt(er,nC),sr("date","asc"));return(await Da(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener eventos:",t),new Error("No se pudieron cargar los eventos del calendario")}},rne=async t=>{try{return{id:(await Cs(Lt(er,nC),{...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear evento:",e),new Error("No se pudo crear el evento del calendario")}},sne=async(t,e)=>{try{const n=Cn(er,nC,t);await Qv(n,{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error al actualizar evento:",n,"ID:",t),new Error("No se pudo actualizar el evento del calendario")}},ane=async t=>{try{const e=Cn(er,nC,t);await Ka(e)}catch(e){throw console.error("Error al eliminar evento:",e,"ID:",t),new Error("No se pudo eliminar el evento del calendario")}},ine=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],one=t=>{switch(t.type){case fr.EVALUACION:return`${t.subtype} - ${t.asignatura}`;case fr.ACTO:return`Acto: ${t.ubicacion}`;case fr.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case fr.SALIDA_PEDAGOGICA:return`Salida: ${t.ubicacion}`;default:return"Evento"}},lne=({isOpen:t,onClose:e,onSave:n,onDelete:r,event:s,date:a,isLoading:i})=>{const[o,l]=G.useState({});G.useEffect(()=>{l(s||{type:fr.EVALUACION,subtype:Sh.PRUEBA_PARCIAL,asignatura:po[0],curso:Js[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[s,t]);const u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",d=x=>{const{name:C,value:S}=x.target;l(k=>({...k,[C]:S}))},h=x=>{l(C=>{if(C.type===fr.SALIDA_PEDAGOGICA){const S=C.cursos||[],k=S.includes(x)?S.filter(I=>I!==x):[...S,x];return{...C,cursos:k.sort()}}return C})},m=x=>{var S;x.preventDefault();let C;switch(o.type){case fr.EVALUACION:const k={date:a,type:fr.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos};(o.subtype===Sh.RUBRICA||o.subtype===Sh.PAUTA_COTEJO)&&((S=o.enlace)!=null&&S.trim())&&(k.enlace=o.enlace.trim()),C=k;break;case fr.ACTO:C={date:a,type:fr.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case fr.ACTIVIDAD_FOCALIZADA:C={date:a,type:fr.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case fr.SALIDA_PEDAGOGICA:C={date:a,type:fr.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos};break;default:console.error("Tipo de evento no reconocido");return}n(C)};if(!t)return null;const p=new Date(`${a}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),y=()=>{switch(o.type){case fr.EVALUACION:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subtipo"}),c.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:d,required:!0,className:u,children:Tee.map(x=>c.jsx("option",{value:x,children:x},x))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:d,required:!0,className:u,children:po.map(x=>c.jsx("option",{value:x,children:x},x))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:d,required:!0,className:u,children:Js.map(x=>c.jsx("option",{value:x,children:x},x))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenidos"}),c.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(o.subtype===Sh.RUBRICA||o.subtype===Sh.PAUTA_COTEJO)&&c.jsxs("div",{children:[c.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),c.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case fr.ACTO:case fr.ACTIVIDAD_FOCALIZADA:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsables"}),c.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación"}),c.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Horario"}),c.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario||"",onChange:d,required:!0,className:u})]})]});case fr.SALIDA_PEDAGOGICA:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),c.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),c.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:u})]}),c.jsxs("fieldset",{children:[c.jsx("legend",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),c.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border p-2 rounded-md dark:border-slate-600 text-slate-700 dark:text-slate-300",children:Js.map(x=>c.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[c.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(x),onChange:()=>h(x),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{children:x})]},x))})]})]});default:return null}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:e,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg animate-fade-in-up",onClick:x=>x.stopPropagation(),children:c.jsxs("form",{onSubmit:m,children:[c.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:s?"Editar Evento":"Agregar Evento"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6 font-semibold",children:p}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),c.jsx("select",{id:"type",name:"type",value:o.type,onChange:d,className:u,children:Object.values(fr).map(x=>c.jsx("option",{value:x,children:x},x))})]}),y()]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 px-6 py-4 rounded-b-xl flex justify-between items-center",children:[c.jsx("div",{children:s&&r&&c.jsx("button",{type:"button",onClick:r,disabled:i,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:i?"Eliminando...":"Eliminar"})}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{type:"button",onClick:e,disabled:i,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 disabled:opacity-50",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:i,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50",children:i?"Guardando...":"Guardar"})]})]})]})})})},cne=({profile:t})=>{const[e,n]=G.useState(new Date),[r,s]=G.useState([]),[a,i]=G.useState(!1),[o,l]=G.useState(null),[u,d]=G.useState(!1),[h,m]=G.useState(Object.values(fr)),[p,y]=G.useState(!1),[x,C]=G.useState(null),[S,k]=G.useState(null),I=G.useCallback(async()=>{i(!0);try{const D=await nne();s(D),l(null)}catch(D){console.error("Error al cargar eventos desde Firestore",D),l("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);G.useEffect(()=>{I()},[I]);const F=G.useMemo(()=>{const D=e.getFullYear(),L=e.getMonth(),Q=new Date(D,L,1).getDay(),H=new Date(D,L+1,0).getDate(),te=[];let Y=1;for(let ne=0;ne<6;ne++){const V=[];for(let J=0;J<7;J++)ne===0&&J<Q||Y>H?V.push(null):(V.push(new Date(D,L,Y)),Y++);if(te.push(V),Y>H)break}return te},[e]),U=D=>{m(L=>L.includes(D)?L.filter(Q=>Q!==D):[...L,D])},R=()=>{h.length===Object.values(fr).length?m([]):m(Object.values(fr))},E=D=>{t!==qt.ESTUDIANTE&&(C(D.toISOString().split("T")[0]),k(null),y(!0))},_=(D,L)=>{L.stopPropagation(),t!==qt.ESTUDIANTE&&(C(D.date),k(D),y(!0))},B=async D=>{d(!0);try{S?await sne(S.id,D):await rne(D),await I(),y(!1)}catch(L){console.error("Error al guardar evento:",L);const Q=L instanceof Error?L.message:"Error desconocido";l(`Error al guardar el evento: ${Q}`)}finally{d(!1)}},j=async()=>{if(S){d(!0);try{await ane(S.id),await I(),y(!1)}catch(D){console.error("Error al eliminar evento:",D);const L=D instanceof Error?D.message:"Error desconocido";l(`No se pudo eliminar el evento: ${L}`)}finally{d(!1)}}};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Calendario Académico"}),a&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando eventos desde la nube..."}),o&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:o}),!a&&r.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay eventos registrados en la nube."}),c.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsx("p",{className:"text-sm",children:"Recuerda que el calendario escolar completo se encuentra disponible en la intranet. Este calendario es de exclusivo uso evaluativo y académico."})})]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Filtrar por tipo de evento:"}),c.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[c.jsx("button",{onClick:R,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-slate-700 text-white hover:bg-slate-600 dark:bg-slate-600 dark:hover:bg-slate-500 transition-colors",children:h.length===Object.values(fr).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(fr).map(D=>c.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2 ${h.includes(D)?`shadow-sm ${cf[D].color}`:"bg-slate-100 text-slate-600 hover:bg-slate-200 opacity-70 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600 dark:opacity-60"}`,children:[c.jsx("input",{type:"checkbox",checked:h.includes(D),onChange:()=>U(D),className:"hidden"}),c.jsx("span",{children:cf[D].icon}),c.jsx("span",{children:cf[D].label})]},D))]})]}),c.jsxs("div",{className:"border dark:border-slate-700 rounded-lg overflow-hidden",children:[c.jsxs("header",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 border-b dark:border-slate-700",children:[c.jsx("button",{onClick:()=>n(new Date(e.setMonth(e.getMonth()-1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:"<"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize",children:e.toLocaleString("es-CL",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>n(new Date(e.setMonth(e.getMonth()+1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:">"}),c.jsx("button",{onClick:()=>n(new Date),className:"ml-4 bg-slate-800 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Hoy"})]}),c.jsx("div",{className:"grid grid-cols-7",children:ine.map(D=>c.jsx("div",{className:"text-center font-semibold text-slate-500 dark:text-slate-400 text-sm py-3 bg-slate-50 dark:bg-slate-700/50 border-b border-r dark:border-slate-700",children:D},D))}),c.jsx("div",{className:"grid grid-cols-7 grid-rows-6",children:F.flat().map((D,L)=>{const Q=D&&D.toDateString()===new Date().toDateString(),H=D==null?void 0:D.toISOString().split("T")[0],te=H?r.filter(Y=>Y.date===H&&h.includes(Y.type)):[];return c.jsx("div",{onClick:()=>D&&E(D),className:`border-b border-r dark:border-slate-700 p-2 h-36 flex flex-col overflow-hidden relative group ${D?t!==qt.ESTUDIANTE?"cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50":"":"bg-slate-50 dark:bg-slate-800/50"}`,children:D&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:`self-end text-sm font-semibold ${Q?"bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-600 dark:text-slate-300"}`,children:D.getDate()}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:te.map(Y=>c.jsxs("div",{onClick:ne=>_(Y,ne),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${cf[Y.type].color}`,children:[c.jsx("span",{children:cf[Y.type].icon}),c.jsx("span",{className:"truncate",children:one(Y)})]},Y.id))}),t!==qt.ESTUDIANTE&&c.jsx("button",{className:"absolute bottom-1 right-1 bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-lg font-bold",children:"+"})]})},L)})})]}),p&&c.jsx(lne,{isOpen:p,onClose:()=>y(!1),onSave:B,onDelete:j,event:S,date:x,isLoading:u})]})},rC="anuncios",une=async()=>{try{const t=an(Lt(er,rC),sr("fechaPublicacion","desc"));return(await Da(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener anuncios:",t),new Error("No se pudieron cargar los anuncios")}},Ane=async t=>{try{return{id:(await Cs(Lt(er,rC),{...t,fechaPublicacion:t.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear anuncio:",e),new Error("No se pudo crear el anuncio")}},dne=async(t,e)=>{try{const n=Cn(er,rC,t);await Qv(n,{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error al actualizar anuncio:",n,"ID:",t),new Error("No se pudo actualizar el anuncio")}},fne=async t=>{try{const e=Cn(er,rC,t);await Ka(e)}catch(e){throw console.error("Error al eliminar anuncio:",e,"ID:",t),new Error("No se pudo eliminar el anuncio")}},N6=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],hne=({currentUser:t})=>{const[e,n]=G.useState([]),[r,s]=G.useState(!1),[a,i]=G.useState(null),[o,l]=G.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=G.useState({tipo:"Todos",cursos:[]}),h=G.useCallback(async()=>{s(!0);try{const E=await une();n(E),i(null)}catch(E){console.error("Error al cargar anuncios desde Firestore",E),i("No se pudieron cargar los anuncios desde la nube.")}finally{s(!1)}},[]);G.useEffect(()=>{h()},[h]);const m=E=>{const{name:_,value:B}=E.target;l(j=>({...j,[_]:B}))},p=E=>{d({tipo:E,cursos:E==="Cursos"?[]:void 0})},y=E=>{d(_=>{var j;if(_.tipo!=="Cursos")return _;const B=(j=_.cursos)!=null&&j.includes(E)?_.cursos.filter(D=>D!==E):[..._.cursos||[],E];return{..._,cursos:B}})},x=async E=>{if(E.preventDefault(),!o.titulo||!o.mensaje){alert("Título y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const _={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:t.nombreCompleto,profileCreador:t.profile,destinatarios:u,...o};await Ane(_),await h(),l({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(_){console.error("Error al crear anuncio:",_),i("Error al publicar el anuncio en la nube.")}},C=async E=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await fne(E),await h()}catch(_){console.error("Error al eliminar anuncio:",_),i("No se pudo eliminar el anuncio en la nube.")}},S=async E=>{try{const _=e.find(B=>B.id===E);_&&(await dne(E,{destacado:!_.destacado}),await h())}catch(_){console.error("Error al actualizar anuncio:",_),i("No se pudo actualizar el estado del anuncio en la nube.")}},k=G.useMemo(()=>[...e].sort((E,_)=>E.destacado&&!_.destacado?-1:!E.destacado&&_.destacado?1:new Date(_.fechaPublicacion).getTime()-new Date(E.fechaPublicacion).getTime()),[e]),I=G.useMemo(()=>{const E=t.profile,_=t.curso;return k.filter(B=>{if(E===qt.SUBDIRECCION)return!0;if(!B.destinatarios)return E!==qt.ESTUDIANTE;const{tipo:j,cursos:D}=B.destinatarios;return j==="Todos"||j==="Profesores"&&E===qt.PROFESORADO||j==="Coordinación TP"&&E===qt.COORDINACION_TP?!0:j==="Cursos"?E===qt.ESTUDIANTE?D==null?void 0:D.includes(_||""):!0:!1})},[k,t]),F=E=>t.profile===qt.ESTUDIANTE?!1:t.profile===qt.SUBDIRECCION||t.profile===E.profileCreador,U=()=>t.profile===qt.SUBDIRECCION||t.profile===qt.PROFESORADO,R="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),r&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),t.profile!==qt.ESTUDIANTE?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),c.jsxs("form",{onSubmit:x,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),c.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:m,required:!0,className:R})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),c.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:m,required:!0,rows:4,className:R})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),c.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(E=>c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"destinatarioTipo",value:E,checked:u.tipo===E,onChange:()=>p(E),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),c.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:E.replace("Coordinación TP","Coord. TP")})]},E))})]}),u.tipo==="Cursos"&&c.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:Js.map(E=>{var _;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(_=u.cursos)==null?void 0:_.includes(E),onChange:()=>y(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:E})]},E)})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),c.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:m,placeholder:"https://ejemplo.com/documento.pdf",className:R})]}),c.jsx("div",{className:"pt-2 text-right",children:c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!r&&I.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!r&&I.length>0&&I.map((E,_)=>{const B=N6[_%N6.length];return c.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${B.bg} ${B.rotate}`,children:[E.destacado&&c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:c.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),c.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:E.titulo}),c.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:E.mensaje}),E.adjunto&&c.jsx("div",{className:"font-sans text-sm mb-4",children:c.jsxs("a",{href:E.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),c.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold",children:E.autor}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(E.fechaPublicacion).toLocaleString("es-CL")})]}),c.jsxs("div",{className:"flex items-center",children:[U()&&c.jsx("button",{onClick:()=>S(E.id),title:E.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:c.jsx("span",{className:`text-xl transition-opacity ${E.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),F(E)&&c.jsx("button",{onClick:()=>C(E.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},E.id)})})]})},_j="api_logs",mne=async(t,e)=>{try{const n={module:t,userId:e.id,userEmail:e.email,userName:e.nombreCompleto,timestamp:mn.fromDate(new Date)};await Cs(Lt(It,_j),n)}catch(n){console.error("Error al registrar la llamada a la API en Firestore:",n)}},pne=t=>{const e=an(Lt(It,_j),sr("timestamp","desc"));return En(e,r=>{const s=r.docs.map(a=>{var o,l;const i=a.data();return{id:a.id,...i,timestamp:((l=(o=i.timestamp)==null?void 0:o.toDate)==null?void 0:l.call(o).toISOString())||i.timestamp}});t(s)},r=>{console.error("Error al suscribirse a los logs de API:",r),t([])})},t0=(t,e)=>{if(!e||!e.id||!e.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es inválido o no está en sesión.");return}mne(t,e)},C4="actas_de_reunion",gne=t=>{var n,r;const e=t.data();return{id:t.id,...e,fechaCreacion:((r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaCreacion}},xne=t=>{const e=an(Lt(It,C4),sr("fechaCreacion","desc"));return En(e,r=>{const s=r.docs.map(a=>gne(a));t(s)},r=>{console.error("Error al suscribirse a las actas:",r),t([])})},vne=async(t,e)=>{try{const n={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,fechaCreacion:mn.fromDate(new Date(t.fechaCreacion))};return(await Cs(Lt(It,C4),n)).id}catch(n){throw console.error("Error al crear el acta:",n),new Error("No se pudo crear el acta.")}},yne=async t=>{try{const e=Cn(It,C4,t);await Ka(e)}catch(e){throw console.error("Error al eliminar el acta:",e),new Error("No se pudo eliminar el acta.")}},Sj=window.SpeechRecognition||window.webkitSpeechRecognition,B6=!!Sj,wne=({isListening:t})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),bne=({currentUser:t})=>{const[e,n]=G.useState([]),[r,s]=G.useState(null),[a,i]=G.useState({tipoReunion:N_[0],asistentes:"",textoReunion:""}),[o,l]=G.useState(!1),[u,d]=G.useState(!1),[h,m]=G.useState(!0),[p,y]=G.useState(null),x=G.useRef(null);G.useEffect(()=>{m(!0);const E=xne(_=>{n(_),!r&&_.length>0&&s(_[0]),m(!1)});return()=>E()},[r]);const C=E=>{const{name:_,value:B}=E.target;i(j=>({...j,[_]:B}))},S=G.useCallback(()=>{var E;if(!B6){y("El reconocimiento de voz no es compatible con este navegador.");return}o?(E=x.current)==null||E.stop():(x.current=new Sj,x.current.lang="es-CL",x.current.continuous=!0,x.current.interimResults=!0,x.current.onresult=_=>{let B="";for(let j=_.resultIndex;j<_.results.length;++j)_.results[j].isFinal&&(B+=_.results[j][0].transcript+". ");i(j=>({...j,textoReunion:j.textoReunion+B}))},x.current.onstart=()=>l(!0),x.current.onend=()=>l(!1),x.current.onerror=_=>{console.error("Speech recognition error",_.error),y(`Error de reconocimiento: ${_.error}`),l(!1)},x.current.start())},[o]),k=async E=>{E.preventDefault();const{tipoReunion:_,asistentes:B,textoReunion:j}=a;if(!_||!B.trim()||!j.trim()){y("Todos los campos son obligatorios.");return}d(!0),y(null);try{t0("Generador de Actas");const D="",Q=new globalThis.GoogleGenerativeAI(D).getGenerativeModel({model:"gemini-pro"}),H=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${j}"
                
                Asistentes a la reunión para referencia de nombres: ${B}
            `,V=(await(await Q.generateContent(H)).response).text().replace(/^```json\s*|```\s*$/g,""),J=JSON.parse(V),K={fechaCreacion:new Date().toISOString(),...a,...J},ie=await vne(K,t);i({tipoReunion:N_[0],asistentes:"",textoReunion:""})}catch(D){console.error("Error al analizar acta con IA:",D),y("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{d(!1)}},I=async E=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?"))try{await yne(E),(r==null?void 0:r.id)===E&&s(e.length>1?e[1]:null)}catch(_){console.error("Error deleting acta:",_),alert("No se pudo eliminar el acta.")}},F=E=>{s(E)},U=E=>E.temas||E.acuerdos||E.plazos||E.responsables?c.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),E.temas&&E.temas.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.temas.map((B,j)=>c.jsx("li",{children:B},j))})]}),E.acuerdos&&E.acuerdos.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.acuerdos.map((B,j)=>c.jsx("li",{children:B},j))})]}),E.plazos&&E.plazos.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.plazos.map((B,j)=>c.jsx("li",{children:B},j))})]}),E.responsables&&E.responsables.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.responsables.map((B,j)=>c.jsx("li",{children:B},j))})]})]}):null,R="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return h?c.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[c.jsxs("div",{className:"md:col-span-1 space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),c.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",c.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),c.jsxs("form",{onSubmit:k,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),c.jsx("select",{name:"tipoReunion",value:a.tipoReunion,onChange:C,required:!0,className:R,children:N_.map(E=>c.jsx("option",{value:E,children:E},E))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),c.jsx("textarea",{name:"asistentes",value:a.asistentes,onChange:C,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:R})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{name:"textoReunion",value:a.textoReunion,onChange:C,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:R}),B6&&c.jsx("button",{type:"button",onClick:S,title:o?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${o?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:c.jsx(wne,{isListening:o})})]})]}),p&&c.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:p}),c.jsx("div",{className:"pt-2 text-right",children:c.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:u?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),c.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:e.length>0?e.map(E=>c.jsxs("button",{onClick:()=>F(E),className:`w-full text-left p-3 rounded-lg border transition-colors ${(r==null?void 0:r.id)===E.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.tipoReunion}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(E.fechaCreacion).toLocaleDateString("es-CL")})]},E.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),c.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:r?c.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${r.tipoReunion}`}),c.jsx("button",{onClick:()=>I(r.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[c.jsx("strong",{children:"Fecha:"})," ",new Date(r.fechaCreacion).toLocaleString("es-CL")]}),c.jsx("h2",{children:"Asistentes"}),c.jsx("ul",{className:"list-disc pl-5",children:String(r.asistentes||"").split(",").map((E,_)=>E.trim()&&c.jsx("li",{children:E.trim()},_))}),U(r),c.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:c.jsx("p",{children:r.textoReunion})})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[c.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})},Cne="modulepreload",Ene=function(t){return"/"+t},k6={},Bw=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=i(n.map(u=>{if(u=Ene(u),u in k6)return;k6[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Cne,d||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((p,y)=>{m.addEventListener("load",p),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return s.then(i=>{for(const o of i||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function es(t){"@babel/helpers - typeof";return es=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},es(t)}var Zi=Uint8Array,xl=Uint16Array,E4=Int32Array,sC=new Zi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),aC=new Zi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),F5=new Zi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Tj=function(t,e){for(var n=new xl(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var s=new E4(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)s[a]=a-n[r]<<5|r;return{b:n,r:s}},Nj=Tj(sC,2),Bj=Nj.b,D5=Nj.r;Bj[28]=258,D5[258]=28;var kj=Tj(aC,0),_ne=kj.b,I6=kj.r,R5=new xl(32768);for(var ys=0;ys<32768;++ys){var Kd=(ys&43690)>>1|(ys&21845)<<1;Kd=(Kd&52428)>>2|(Kd&13107)<<2,Kd=(Kd&61680)>>4|(Kd&3855)<<4,R5[ys]=((Kd&65280)>>8|(Kd&255)<<8)>>1}var Wu=function(t,e,n){for(var r=t.length,s=0,a=new xl(e);s<r;++s)t[s]&&++a[t[s]-1];var i=new xl(e);for(s=1;s<e;++s)i[s]=i[s-1]+a[s-1]<<1;var o;if(n){o=new xl(1<<e);var l=15-e;for(s=0;s<r;++s)if(t[s])for(var u=s<<4|t[s],d=e-t[s],h=i[t[s]-1]++<<d,m=h|(1<<d)-1;h<=m;++h)o[R5[h]>>l]=u}else for(o=new xl(r),s=0;s<r;++s)t[s]&&(o[s]=R5[i[t[s]-1]++]>>15-t[s]);return o},Of=new Zi(288);for(var ys=0;ys<144;++ys)Of[ys]=8;for(var ys=144;ys<256;++ys)Of[ys]=9;for(var ys=256;ys<280;++ys)Of[ys]=7;for(var ys=280;ys<288;++ys)Of[ys]=8;var Xx=new Zi(32);for(var ys=0;ys<32;++ys)Xx[ys]=5;var Sne=Wu(Of,9,0),Tne=Wu(Of,9,1),Nne=Wu(Xx,5,0),Bne=Wu(Xx,5,1),I_=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Lc=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},F_=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},_4=function(t){return(t+7)/8|0},Ij=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Zi(t.subarray(e,n))},kne=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Oc=function(t,e,n){var r=new Error(e||kne[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Oc),!n)throw r;return r},Ine=function(t,e,n,r){var s=t.length,a=0;if(!s||e.f&&!e.l)return n||new Zi(0);var i=!n,o=i||e.i!=2,l=e.i;i&&(n=new Zi(s*3));var u=function(me){var ce=n.length;if(me>ce){var Me=new Zi(Math.max(ce*2,me));Me.set(n),n=Me}},d=e.f||0,h=e.p||0,m=e.b||0,p=e.l,y=e.d,x=e.m,C=e.n,S=s*8;do{if(!p){d=Lc(t,h,1);var k=Lc(t,h+1,3);if(h+=3,k)if(k==1)p=Tne,y=Bne,x=9,C=5;else if(k==2){var R=Lc(t,h,31)+257,E=Lc(t,h+10,15)+4,_=R+Lc(t,h+5,31)+1;h+=14;for(var B=new Zi(_),j=new Zi(19),D=0;D<E;++D)j[F5[D]]=Lc(t,h+D*3,7);h+=E*3;for(var L=I_(j),Q=(1<<L)-1,H=Wu(j,L,1),D=0;D<_;){var te=H[Lc(t,h,Q)];h+=te&15;var I=te>>4;if(I<16)B[D++]=I;else{var Y=0,ne=0;for(I==16?(ne=3+Lc(t,h,3),h+=2,Y=B[D-1]):I==17?(ne=3+Lc(t,h,7),h+=3):I==18&&(ne=11+Lc(t,h,127),h+=7);ne--;)B[D++]=Y}}var V=B.subarray(0,R),J=B.subarray(R);x=I_(V),C=I_(J),p=Wu(V,x,1),y=Wu(J,C,1)}else Oc(1);else{var I=_4(h)+4,F=t[I-4]|t[I-3]<<8,U=I+F;if(U>s){l&&Oc(0);break}o&&u(m+F),n.set(t.subarray(I,U),m),e.b=m+=F,e.p=h=U*8,e.f=d;continue}if(h>S){l&&Oc(0);break}}o&&u(m+131072);for(var K=(1<<x)-1,ie=(1<<C)-1,O=h;;O=h){var Y=p[F_(t,h)&K],W=Y>>4;if(h+=Y&15,h>S){l&&Oc(0);break}if(Y||Oc(2),W<256)n[m++]=W;else if(W==256){O=h,p=null;break}else{var Z=W-254;if(W>264){var D=W-257,re=sC[D];Z=Lc(t,h,(1<<re)-1)+Bj[D],h+=re}var se=y[F_(t,h)&ie],de=se>>4;se||Oc(3),h+=se&15;var J=_ne[de];if(de>3){var re=aC[de];J+=F_(t,h)&(1<<re)-1,h+=re}if(h>S){l&&Oc(0);break}o&&u(m+131072);var pe=m+Z;if(m<J){var be=a-J,Se=Math.min(J,pe);for(be+m<0&&Oc(3);m<Se;++m)n[m]=r[be+m]}for(;m<pe;++m)n[m]=n[m-J]}}e.l=p,e.p=O,e.b=m,e.f=d,p&&(d=1,e.m=x,e.d=y,e.n=C)}while(!d);return m!=n.length&&i?Ij(n,0,m):n.subarray(0,m)},UA=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},kg=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},D_=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var s=n.length,a=n.slice();if(!s)return{t:Dj,l:0};if(s==1){var i=new Zi(n[0].s+1);return i[n[0].s]=1,{t:i,l:1}}n.sort(function(U,R){return U.f-R.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],u=0,d=1,h=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=s-1;)o=n[n[u].f<n[h].f?u++:h++],l=n[u!=d&&n[u].f<n[h].f?u++:h++],n[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var m=a[0].s,r=1;r<s;++r)a[r].s>m&&(m=a[r].s);var p=new xl(m+1),y=L5(n[d-1],p,0);if(y>e){var r=0,x=0,C=y-e,S=1<<C;for(a.sort(function(R,E){return p[E.s]-p[R.s]||R.f-E.f});r<s;++r){var k=a[r].s;if(p[k]>e)x+=S-(1<<y-p[k]),p[k]=e;else break}for(x>>=C;x>0;){var I=a[r].s;p[I]<e?x-=1<<e-p[I]++-1:++r}for(;r>=0&&x;--r){var F=a[r].s;p[F]==e&&(--p[F],++x)}y=e}return{t:new Zi(p),l:y}},L5=function(t,e,n){return t.s==-1?Math.max(L5(t.l,e,n+1),L5(t.r,e,n+1)):e[t.s]=n},F6=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new xl(++e),r=0,s=t[0],a=1,i=function(l){n[r++]=l},o=1;o<=e;++o)if(t[o]==s&&o!=e)++a;else{if(!s&&a>2){for(;a>138;a-=138)i(32754);a>2&&(i(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(i(s),--a;a>6;a-=6)i(8304);a>2&&(i(a-3<<5|8208),a=0)}for(;a--;)i(s);a=1,s=t[o]}return{c:n.subarray(0,r),n:e}},Ig=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},Fj=function(t,e,n){var r=n.length,s=_4(e+2);t[s]=r&255,t[s+1]=r>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var a=0;a<r;++a)t[s+a+4]=n[a];return(s+4+r)*8},D6=function(t,e,n,r,s,a,i,o,l,u,d){UA(e,d++,n),++s[256];for(var h=D_(s,15),m=h.t,p=h.l,y=D_(a,15),x=y.t,C=y.l,S=F6(m),k=S.c,I=S.n,F=F6(x),U=F.c,R=F.n,E=new xl(19),_=0;_<k.length;++_)++E[k[_]&31];for(var _=0;_<U.length;++_)++E[U[_]&31];for(var B=D_(E,7),j=B.t,D=B.l,L=19;L>4&&!j[F5[L-1]];--L);var Q=u+5<<3,H=Ig(s,Of)+Ig(a,Xx)+i,te=Ig(s,m)+Ig(a,x)+i+14+3*L+Ig(E,j)+2*E[16]+3*E[17]+7*E[18];if(l>=0&&Q<=H&&Q<=te)return Fj(e,d,t.subarray(l,l+u));var Y,ne,V,J;if(UA(e,d,1+(te<H)),d+=2,te<H){Y=Wu(m,p,0),ne=m,V=Wu(x,C,0),J=x;var K=Wu(j,D,0);UA(e,d,I-257),UA(e,d+5,R-1),UA(e,d+10,L-4),d+=14;for(var _=0;_<L;++_)UA(e,d+3*_,j[F5[_]]);d+=3*L;for(var ie=[k,U],O=0;O<2;++O)for(var W=ie[O],_=0;_<W.length;++_){var Z=W[_]&31;UA(e,d,K[Z]),d+=j[Z],Z>15&&(UA(e,d,W[_]>>5&127),d+=W[_]>>12)}}else Y=Sne,ne=Of,V=Nne,J=Xx;for(var _=0;_<o;++_){var re=r[_];if(re>255){var Z=re>>18&31;kg(e,d,Y[Z+257]),d+=ne[Z+257],Z>7&&(UA(e,d,re>>23&31),d+=sC[Z]);var se=re&31;kg(e,d,V[se]),d+=J[se],se>3&&(kg(e,d,re>>5&8191),d+=aC[se])}else kg(e,d,Y[re]),d+=ne[re]}return kg(e,d,Y[256]),d+ne[256]},Fne=new E4([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Dj=new Zi(0),Dne=function(t,e,n,r,s,a){var i=a.z||t.length,o=new Zi(r+i+5*(1+Math.ceil(i/7e3))+s),l=o.subarray(r,o.length-s),u=a.l,d=(a.r||0)&7;if(e){d&&(l[0]=a.r>>3);for(var h=Fne[e-1],m=h>>13,p=h&8191,y=(1<<n)-1,x=a.p||new xl(32768),C=a.h||new xl(y+1),S=Math.ceil(n/3),k=2*S,I=function(Ze){return(t[Ze]^t[Ze+1]<<S^t[Ze+2]<<k)&y},F=new E4(25e3),U=new xl(288),R=new xl(32),E=0,_=0,B=a.i||0,j=0,D=a.w||0,L=0;B+2<i;++B){var Q=I(B),H=B&32767,te=C[Q];if(x[H]=te,C[Q]=H,D<=B){var Y=i-B;if((E>7e3||j>24576)&&(Y>423||!u)){d=D6(t,l,0,F,U,R,_,j,L,B-L,d),j=E=_=0,L=B;for(var ne=0;ne<286;++ne)U[ne]=0;for(var ne=0;ne<30;++ne)R[ne]=0}var V=2,J=0,K=p,ie=H-te&32767;if(Y>2&&Q==I(B-ie))for(var O=Math.min(m,Y)-1,W=Math.min(32767,B),Z=Math.min(258,Y);ie<=W&&--K&&H!=te;){if(t[B+V]==t[B+V-ie]){for(var re=0;re<Z&&t[B+re]==t[B+re-ie];++re);if(re>V){if(V=re,J=ie,re>O)break;for(var se=Math.min(ie,re-2),de=0,ne=0;ne<se;++ne){var pe=B-ie+ne&32767,be=x[pe],Se=pe-be&32767;Se>de&&(de=Se,te=pe)}}}H=te,te=x[H],ie+=H-te&32767}if(J){F[j++]=268435456|D5[V]<<18|I6[J];var me=D5[V]&31,ce=I6[J]&31;_+=sC[me]+aC[ce],++U[257+me],++R[ce],D=B+V,++E}else F[j++]=t[B],++U[t[B]]}}for(B=Math.max(B,D);B<i;++B)F[j++]=t[B],++U[t[B]];d=D6(t,l,u,F,U,R,_,j,L,B-L,d),u||(a.r=d&7|l[d/8|0]<<3,d-=7,a.h=C,a.p=x,a.i=B,a.w=D)}else{for(var B=a.w||0;B<i+u;B+=65535){var Me=B+65535;Me>=i&&(l[d/8|0]=u,Me=i),d=Fj(l,d+1,t.subarray(B,Me))}a.i=i}return Ij(o,0,r+_4(d)+s)},Rj=function(){var t=1,e=0;return{p:function(n){for(var r=t,s=e,a=n.length|0,i=0;i!=a;){for(var o=Math.min(i+2655,a);i<o;++i)s+=r+=n[i];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}t=r,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},Rne=function(t,e,n,r,s){if(!s&&(s={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),i=new Zi(a.length+t.length);i.set(a),i.set(t,a.length),t=i,s.w=a.length}return Dne(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,s)},Lj=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},Lne=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=Rj();s.p(e.dictionary),Lj(t,2,s.d())}},Une=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Oc(6,"invalid zlib data"),(t[1]>>5&1)==1&&Oc(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function U5(t,e){e||(e={});var n=Rj();n.p(t);var r=Rne(t,e,e.dictionary?6:2,4);return Lne(r,e),Lj(r,r.length-4,n.d()),r}function Mne(t,e){return Ine(t.subarray(Une(t),-4),{i:2},e,e)}var Pne=typeof TextDecoder<"u"&&new TextDecoder,One=0;try{Pne.decode(Dj,{stream:!0}),One=1}catch{}var Fn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function R_(){Fn.console&&typeof Fn.console.log=="function"&&Fn.console.log.apply(Fn.console,arguments)}var ds={log:R_,warn:function(t){Fn.console&&(typeof Fn.console.warn=="function"?Fn.console.warn.apply(Fn.console,arguments):R_.call(null,arguments))},error:function(t){Fn.console&&(typeof Fn.console.error=="function"?Fn.console.error.apply(Fn.console,arguments):R_(t))}};function L_(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Eh(r.response,e,n)},r.onerror=function(){ds.error("could not download file")},r.send()}function R6(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function my(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var wx,M5,Eh=Fn.saveAs||((typeof window>"u"?"undefined":es(window))!=="object"||window!==Fn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Fn.URL||Fn.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?R6(s.href)?L_(t,e,n):my(s,s.target="_blank"):my(s)):(s.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){my(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(R6(t))L_(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){my(r)})}else navigator.msSaveOrOpenBlob(function(s,a){return a===void 0?a={autoBom:!1}:es(a)!=="object"&&(ds.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return L_(t,e,n);var s=t.type==="application/octet-stream",a=/constructor/i.test(Fn.HTMLElement)||Fn.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||s&&a)&&(typeof FileReader>"u"?"undefined":es(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},o.readAsDataURL(t)}else{var l=Fn.URL||Fn.webkitURL,u=l.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Uj(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<n.length;r++){var s=n[r].re,a=n[r].process,i=s.exec(t);i&&(e=a(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function U_(t,e){var n=t[0],r=t[1],s=t[2],a=t[3];n=ji(n,r,s,a,e[0],7,-680876936),a=ji(a,n,r,s,e[1],12,-389564586),s=ji(s,a,n,r,e[2],17,606105819),r=ji(r,s,a,n,e[3],22,-1044525330),n=ji(n,r,s,a,e[4],7,-176418897),a=ji(a,n,r,s,e[5],12,1200080426),s=ji(s,a,n,r,e[6],17,-1473231341),r=ji(r,s,a,n,e[7],22,-45705983),n=ji(n,r,s,a,e[8],7,1770035416),a=ji(a,n,r,s,e[9],12,-1958414417),s=ji(s,a,n,r,e[10],17,-42063),r=ji(r,s,a,n,e[11],22,-1990404162),n=ji(n,r,s,a,e[12],7,1804603682),a=ji(a,n,r,s,e[13],12,-40341101),s=ji(s,a,n,r,e[14],17,-1502002290),n=Qi(n,r=ji(r,s,a,n,e[15],22,1236535329),s,a,e[1],5,-165796510),a=Qi(a,n,r,s,e[6],9,-1069501632),s=Qi(s,a,n,r,e[11],14,643717713),r=Qi(r,s,a,n,e[0],20,-373897302),n=Qi(n,r,s,a,e[5],5,-701558691),a=Qi(a,n,r,s,e[10],9,38016083),s=Qi(s,a,n,r,e[15],14,-660478335),r=Qi(r,s,a,n,e[4],20,-405537848),n=Qi(n,r,s,a,e[9],5,568446438),a=Qi(a,n,r,s,e[14],9,-1019803690),s=Qi(s,a,n,r,e[3],14,-187363961),r=Qi(r,s,a,n,e[8],20,1163531501),n=Qi(n,r,s,a,e[13],5,-1444681467),a=Qi(a,n,r,s,e[2],9,-51403784),s=Qi(s,a,n,r,e[7],14,1735328473),n=Hi(n,r=Qi(r,s,a,n,e[12],20,-1926607734),s,a,e[5],4,-378558),a=Hi(a,n,r,s,e[8],11,-2022574463),s=Hi(s,a,n,r,e[11],16,1839030562),r=Hi(r,s,a,n,e[14],23,-35309556),n=Hi(n,r,s,a,e[1],4,-1530992060),a=Hi(a,n,r,s,e[4],11,1272893353),s=Hi(s,a,n,r,e[7],16,-155497632),r=Hi(r,s,a,n,e[10],23,-1094730640),n=Hi(n,r,s,a,e[13],4,681279174),a=Hi(a,n,r,s,e[0],11,-358537222),s=Hi(s,a,n,r,e[3],16,-722521979),r=Hi(r,s,a,n,e[6],23,76029189),n=Hi(n,r,s,a,e[9],4,-640364487),a=Hi(a,n,r,s,e[12],11,-421815835),s=Hi(s,a,n,r,e[15],16,530742520),n=Vi(n,r=Hi(r,s,a,n,e[2],23,-995338651),s,a,e[0],6,-198630844),a=Vi(a,n,r,s,e[7],10,1126891415),s=Vi(s,a,n,r,e[14],15,-1416354905),r=Vi(r,s,a,n,e[5],21,-57434055),n=Vi(n,r,s,a,e[12],6,1700485571),a=Vi(a,n,r,s,e[3],10,-1894986606),s=Vi(s,a,n,r,e[10],15,-1051523),r=Vi(r,s,a,n,e[1],21,-2054922799),n=Vi(n,r,s,a,e[8],6,1873313359),a=Vi(a,n,r,s,e[15],10,-30611744),s=Vi(s,a,n,r,e[6],15,-1560198380),r=Vi(r,s,a,n,e[13],21,1309151649),n=Vi(n,r,s,a,e[4],6,-145523070),a=Vi(a,n,r,s,e[11],10,-1120210379),s=Vi(s,a,n,r,e[2],15,718787259),r=Vi(r,s,a,n,e[9],21,-343485551),t[0]=df(n,t[0]),t[1]=df(r,t[1]),t[2]=df(s,t[2]),t[3]=df(a,t[3])}function iC(t,e,n,r,s,a){return e=df(df(e,t),df(r,a)),df(e<<s|e>>>32-s,n)}function ji(t,e,n,r,s,a,i){return iC(e&n|~e&r,t,e,s,a,i)}function Qi(t,e,n,r,s,a,i){return iC(e&r|n&~r,t,e,s,a,i)}function Hi(t,e,n,r,s,a,i){return iC(e^n^r,t,e,s,a,i)}function Vi(t,e,n,r,s,a,i){return iC(n^(e|~r),t,e,s,a,i)}function Mj(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)U_(r,jne(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(U_(r,s),e=0;e<16;e++)s[e]=0;return s[14]=8*n,U_(r,s),r}function jne(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}wx=Fn.atob.bind(Fn),M5=Fn.btoa.bind(Fn);var L6="0123456789abcdef".split("");function Qne(t){for(var e="",n=0;n<4;n++)e+=L6[t>>8*n+4&15]+L6[t>>8*n&15];return e}function Hne(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function P5(t){return Mj(t).map(Hne).join("")}var Vne=function(t){for(var e=0;e<t.length;e++)t[e]=Qne(t[e]);return t.join("")}(Mj("hello"))!="5d41402abc4b2a76b9719d911017c592";function df(t,e){if(Vne){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function O5(t,e){var n,r,s,a;if(t!==n){for(var i=(s=t,a=1+(256/t.length>>0),new Array(a+1).join(s)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var d=o[l];u=(u+d+i.charCodeAt(l))%256,o[l]=o[u],o[u]=d}n=t,r=o}else o=r;var h=e.length,m=0,p=0,y="";for(l=0;l<h;l++)p=(p+(d=o[m=(m+1)%256]))%256,o[m]=o[p],o[p]=d,i=o[(o[m]+o[p])%256],y+=String.fromCharCode(e.charCodeAt(l)^i);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var U6={print:4,modify:8,copy:16,"annot-forms":32};function Em(t,e,n,r){this.v=1,this.r=2;var s=192;t.forEach(function(o){if(U6.perm!==void 0)throw new Error("Invalid permission: "+o);s+=U6[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),i=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,i),this.P=-(1+(255^s)),this.encryptionKey=P5(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=O5(this.encryptionKey,this.padding)}function _m(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var s=t.charCodeAt(r);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[r]}return e}function M6(t){if(es(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,s){if(s=s||!1,typeof n!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var a=Math.random().toString(35);return e[n][a]=[r,!!s],a},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var a in e[n]){var i=e[n][a];try{i[0].apply(t,r)}catch(o){Fn.console&&ds.error("jsPDF PubSub Error",o.message,o)}i[1]&&s.push(a)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function kw(t){if(!(this instanceof kw))return new kw(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function Pj(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Th(t,e,n,r,s){if(!(this instanceof Th))return new Th(t,e,n,r,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,Pj.call(this,r,s)}function Im(t,e,n,r,s){if(!(this instanceof Im))return new Im(t,e,n,r,s);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,Pj.call(this,r,s)}function hn(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],a=arguments[3],i=[],o=1,l=16,u="S",d=null;es(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,s=t.format||s,a=t.compress||t.compressPdf||a,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),i=t.filters||(a===!0?["FlateEncode"]:i),r=r||"mm",n=(""+(n||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,m={},p={internal:{},__private__:{}};p.__private__.PubSub=M6;var y="1.3",x=p.__private__.getPdfVersion=function(){return y};p.__private__.setPdfVersion=function(q){y=q};var C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return C};var S=p.__private__.getPageFormat=function(q){return C[q]};s=s||"a4";var k={COMPAT:"compat",ADVANCED:"advanced"},I=k.COMPAT;function F(){this.saveGraphicsState(),Ce(new $t(Ie,0,0,-Ie,0,Xa()*Ie).toString()+" cm"),this.setFontSize(this.getFontSize()/Ie),u="n",I=k.ADVANCED}function U(){this.restoreGraphicsState(),u="S",I=k.COMPAT}var R=p.__private__.combineFontStyleAndFontWeight=function(q,Ae){if(q=="bold"&&Ae=="normal"||q=="bold"&&Ae==400||q=="normal"&&Ae=="italic"||q=="bold"&&Ae=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ae&&(q=Ae==400||Ae==="normal"?q==="italic"?"italic":"normal":Ae!=700&&Ae!=="bold"||q!=="normal"?(Ae==700?"bold":Ae)+""+q:"bold"),q};p.advancedAPI=function(q){var Ae=I===k.COMPAT;return Ae&&F.call(this),typeof q!="function"||(q(this),Ae&&U.call(this)),this},p.compatAPI=function(q){var Ae=I===k.ADVANCED;return Ae&&U.call(this),typeof q!="function"||(q(this),Ae&&F.call(this)),this},p.isAdvancedAPI=function(){return I===k.ADVANCED};var E,_=function(q){if(I!==k.ADVANCED)throw new Error(q+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},B=p.roundToPrecision=p.__private__.roundToPrecision=function(q,Ae){var De=e||Ae;if(isNaN(q)||isNaN(De))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return q.toFixed(De).replace(/0+$/,"")};E=p.hpf=p.__private__.hpf=typeof l=="number"?function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.hpf");return B(q,l)}:l==="smart"?function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.hpf");return B(q,q>-1&&q<1?16:5)}:function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.hpf");return B(q,16)};var j=p.f2=p.__private__.f2=function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.f2");return B(q,2)},D=p.__private__.f3=function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.f3");return B(q,3)},L=p.scale=p.__private__.scale=function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.scale");return I===k.COMPAT?q*Ie:I===k.ADVANCED?q:void 0},Q=function(q){return I===k.COMPAT?Xa()-q:I===k.ADVANCED?q:void 0},H=function(q){return L(Q(q))};p.__private__.setPrecision=p.setPrecision=function(q){typeof parseInt(q,10)=="number"&&(e=parseInt(q,10))};var te,Y="00000000000000000000000000000000",ne=p.__private__.getFileId=function(){return Y},V=p.__private__.setFileId=function(q){return Y=q!==void 0&&/^[a-fA-F0-9]{32}$/.test(q)?q.toUpperCase():Y.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&($r=new Em(d.userPermissions,d.userPassword,d.ownerPassword,Y)),Y};p.setFileId=function(q){return V(q),this},p.getFileId=function(){return ne()};var J=p.__private__.convertDateToPDFDate=function(q){var Ae=q.getTimezoneOffset(),De=Ae<0?"+":"-",Pe=Math.floor(Math.abs(Ae/60)),Ke=Math.abs(Ae%60),At=[De,Z(Pe),"'",Z(Ke),"'"].join("");return["D:",q.getFullYear(),Z(q.getMonth()+1),Z(q.getDate()),Z(q.getHours()),Z(q.getMinutes()),Z(q.getSeconds()),At].join("")},K=p.__private__.convertPDFDateToDate=function(q){var Ae=parseInt(q.substr(2,4),10),De=parseInt(q.substr(6,2),10)-1,Pe=parseInt(q.substr(8,2),10),Ke=parseInt(q.substr(10,2),10),At=parseInt(q.substr(12,2),10),Bt=parseInt(q.substr(14,2),10);return new Date(Ae,De,Pe,Ke,At,Bt,0)},ie=p.__private__.setCreationDate=function(q){var Ae;if(q===void 0&&(q=new Date),q instanceof Date)Ae=J(q);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(q))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ae=q}return te=Ae},O=p.__private__.getCreationDate=function(q){var Ae=te;return q==="jsDate"&&(Ae=K(te)),Ae};p.setCreationDate=function(q){return ie(q),this},p.getCreationDate=function(q){return O(q)};var W,Z=p.__private__.padd2=function(q){return("0"+parseInt(q)).slice(-2)},re=p.__private__.padd2Hex=function(q){return("00"+(q=q.toString())).substr(q.length)},se=0,de=[],pe=[],be=0,Se=[],me=[],ce=!1,Me=pe,Ze=function(){se=0,be=0,pe=[],de=[],Se=[],Ee=ss(),_e=ss()};p.__private__.setCustomOutputDestination=function(q){ce=!0,Me=q};var Fe=function(q){ce||(Me=q)};p.__private__.resetCustomOutputDestination=function(){ce=!1,Me=pe};var Ce=p.__private__.out=function(q){return q=q.toString(),be+=q.length+1,Me.push(q),Me},Re=p.__private__.write=function(q){return Ce(arguments.length===1?q.toString():Array.prototype.join.call(arguments," "))},ze=p.__private__.getArrayBuffer=function(q){for(var Ae=q.length,De=new ArrayBuffer(Ae),Pe=new Uint8Array(De);Ae--;)Pe[Ae]=q.charCodeAt(Ae);return De},Je=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Je};var dt=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(q){return dt=I===k.ADVANCED?q/Ie:q,this};var _t,ft=p.__private__.getFontSize=p.getFontSize=function(){return I===k.COMPAT?dt:dt*Ie},Rt=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(q){return Rt=q,this},p.__private__.getR2L=p.getR2L=function(){return Rt};var Ut,Zt=p.__private__.setZoomMode=function(q){var Ae=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(q))_t=q;else if(isNaN(q)){if(Ae.indexOf(q)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+q+'" is not recognized.');_t=q}else _t=parseInt(q,10)};p.__private__.getZoomMode=function(){return _t};var Mt,jt=p.__private__.setPageMode=function(q){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(q)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+q+'" is not recognized.');Ut=q};p.__private__.getPageMode=function(){return Ut};var Wt=p.__private__.setLayoutMode=function(q){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(q)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+q+'" is not recognized.');Mt=q};p.__private__.getLayoutMode=function(){return Mt},p.__private__.setDisplayMode=p.setDisplayMode=function(q,Ae,De){return Zt(q),Wt(Ae),jt(De),this};var Ue={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(q){if(Object.keys(Ue).indexOf(q)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ue[q]},p.__private__.getDocumentProperties=function(){return Ue},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(q){for(var Ae in Ue)Ue.hasOwnProperty(Ae)&&q[Ae]&&(Ue[Ae]=q[Ae]);return this},p.__private__.setDocumentProperty=function(q,Ae){if(Object.keys(Ue).indexOf(q)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ue[q]=Ae};var Oe,Ie,Xe,mt,Yt,Kt={},rn={},qn=[],un={},xr={},jn={},Sr={},qr=null,on=0,en=[],zn=new M6(p),xa=t.hotfixes||[],rs={},ks={},Ua=[],$t=function q(Ae,De,Pe,Ke,At,Bt){if(!(this instanceof q))return new q(Ae,De,Pe,Ke,At,Bt);isNaN(Ae)&&(Ae=1),isNaN(De)&&(De=0),isNaN(Pe)&&(Pe=0),isNaN(Ke)&&(Ke=1),isNaN(At)&&(At=0),isNaN(Bt)&&(Bt=0),this._matrix=[Ae,De,Pe,Ke,At,Bt]};Object.defineProperty($t.prototype,"sx",{get:function(){return this._matrix[0]},set:function(q){this._matrix[0]=q}}),Object.defineProperty($t.prototype,"shy",{get:function(){return this._matrix[1]},set:function(q){this._matrix[1]=q}}),Object.defineProperty($t.prototype,"shx",{get:function(){return this._matrix[2]},set:function(q){this._matrix[2]=q}}),Object.defineProperty($t.prototype,"sy",{get:function(){return this._matrix[3]},set:function(q){this._matrix[3]=q}}),Object.defineProperty($t.prototype,"tx",{get:function(){return this._matrix[4]},set:function(q){this._matrix[4]=q}}),Object.defineProperty($t.prototype,"ty",{get:function(){return this._matrix[5]},set:function(q){this._matrix[5]=q}}),Object.defineProperty($t.prototype,"a",{get:function(){return this._matrix[0]},set:function(q){this._matrix[0]=q}}),Object.defineProperty($t.prototype,"b",{get:function(){return this._matrix[1]},set:function(q){this._matrix[1]=q}}),Object.defineProperty($t.prototype,"c",{get:function(){return this._matrix[2]},set:function(q){this._matrix[2]=q}}),Object.defineProperty($t.prototype,"d",{get:function(){return this._matrix[3]},set:function(q){this._matrix[3]=q}}),Object.defineProperty($t.prototype,"e",{get:function(){return this._matrix[4]},set:function(q){this._matrix[4]=q}}),Object.defineProperty($t.prototype,"f",{get:function(){return this._matrix[5]},set:function(q){this._matrix[5]=q}}),Object.defineProperty($t.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty($t.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty($t.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty($t.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),$t.prototype.join=function(q){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(q)},$t.prototype.multiply=function(q){var Ae=q.sx*this.sx+q.shy*this.shx,De=q.sx*this.shy+q.shy*this.sy,Pe=q.shx*this.sx+q.sy*this.shx,Ke=q.shx*this.shy+q.sy*this.sy,At=q.tx*this.sx+q.ty*this.shx+this.tx,Bt=q.tx*this.shy+q.ty*this.sy+this.ty;return new $t(Ae,De,Pe,Ke,At,Bt)},$t.prototype.decompose=function(){var q=this.sx,Ae=this.shy,De=this.shx,Pe=this.sy,Ke=this.tx,At=this.ty,Bt=Math.sqrt(q*q+Ae*Ae),zt=(q/=Bt)*De+(Ae/=Bt)*Pe;De-=q*zt,Pe-=Ae*zt;var N=Math.sqrt(De*De+Pe*Pe);return zt/=N,q*(Pe/=N)<Ae*(De/=N)&&(q=-q,Ae=-Ae,zt=-zt,Bt=-Bt),{scale:new $t(Bt,0,0,N,0,0),translate:new $t(1,0,0,1,Ke,At),rotate:new $t(q,Ae,-Ae,q,0,0),skew:new $t(1,0,zt,1,0,0)}},$t.prototype.toString=function(q){return this.join(" ")},$t.prototype.inversed=function(){var q=this.sx,Ae=this.shy,De=this.shx,Pe=this.sy,Ke=this.tx,At=this.ty,Bt=1/(q*Pe-Ae*De),zt=Pe*Bt,N=-Ae*Bt,ee=-De*Bt,oe=q*Bt;return new $t(zt,N,ee,oe,-zt*Ke-ee*At,-N*Ke-oe*At)},$t.prototype.applyToPoint=function(q){var Ae=q.x*this.sx+q.y*this.shx+this.tx,De=q.x*this.shy+q.y*this.sy+this.ty;return new pc(Ae,De)},$t.prototype.applyToRectangle=function(q){var Ae=this.applyToPoint(q),De=this.applyToPoint(new pc(q.x+q.w,q.y+q.h));return new su(Ae.x,Ae.y,De.x-Ae.x,De.y-Ae.y)},$t.prototype.clone=function(){var q=this.sx,Ae=this.shy,De=this.shx,Pe=this.sy,Ke=this.tx,At=this.ty;return new $t(q,Ae,De,Pe,Ke,At)},p.Matrix=$t;var vr=p.matrixMult=function(q,Ae){return Ae.multiply(q)},ur=new $t(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=ur;var Mr=function(q,Ae){if(!xr[q]){var De=(Ae instanceof Th?"Sh":"P")+(Object.keys(un).length+1).toString(10);Ae.id=De,xr[q]=De,un[De]=Ae,zn.publish("addPattern",Ae)}};p.ShadingPattern=Th,p.TilingPattern=Im,p.addShadingPattern=function(q,Ae){return _("addShadingPattern()"),Mr(q,Ae),this},p.beginTilingPattern=function(q){_("beginTilingPattern()"),Fl(q.boundingBox[0],q.boundingBox[1],q.boundingBox[2]-q.boundingBox[0],q.boundingBox[3]-q.boundingBox[1],q.matrix)},p.endTilingPattern=function(q,Ae){_("endTilingPattern()"),Ae.stream=me[W].join(`
`),Mr(q,Ae),zn.publish("endTilingPattern",Ae),Ua.pop().restore()};var Kr=p.__private__.newObject=function(){var q=ss();return fe(q,!0),q},ss=p.__private__.newObjectDeferred=function(){return se++,de[se]=function(){return be},se},fe=function(q,Ae){return Ae=typeof Ae=="boolean"&&Ae,de[q]=be,Ae&&Ce(q+" 0 obj"),q},Be=p.__private__.newAdditionalObject=function(){var q={objId:ss(),content:""};return Se.push(q),q},Ee=ss(),_e=ss(),Te=p.__private__.decodeColorString=function(q){var Ae=q.split(" ");if(Ae.length!==2||Ae[1]!=="g"&&Ae[1]!=="G")Ae.length===5&&(Ae[4]==="k"||Ae[4]==="K")&&(Ae=[(1-Ae[0])*(1-Ae[3]),(1-Ae[1])*(1-Ae[3]),(1-Ae[2])*(1-Ae[3]),"r"]);else{var De=parseFloat(Ae[0]);Ae=[De,De,De,"r"]}for(var Pe="#",Ke=0;Ke<3;Ke++)Pe+=("0"+Math.floor(255*parseFloat(Ae[Ke])).toString(16)).slice(-2);return Pe},ke=p.__private__.encodeColorString=function(q){var Ae;typeof q=="string"&&(q={ch1:q});var De=q.ch1,Pe=q.ch2,Ke=q.ch3,At=q.ch4,Bt=q.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof De=="string"&&De.charAt(0)!=="#"){var zt=new Uj(De);if(zt.ok)De=zt.toHex();else if(!/^\d*\.?\d*$/.test(De))throw new Error('Invalid color "'+De+'" passed to jsPDF.encodeColorString.')}if(typeof De=="string"&&/^#[0-9A-Fa-f]{3}$/.test(De)&&(De="#"+De[1]+De[1]+De[2]+De[2]+De[3]+De[3]),typeof De=="string"&&/^#[0-9A-Fa-f]{6}$/.test(De)){var N=parseInt(De.substr(1),16);De=N>>16&255,Pe=N>>8&255,Ke=255&N}if(Pe===void 0||At===void 0&&De===Pe&&Pe===Ke)if(typeof De=="string")Ae=De+" "+Bt[0];else switch(q.precision){case 2:Ae=j(De/255)+" "+Bt[0];break;case 3:default:Ae=D(De/255)+" "+Bt[0]}else if(At===void 0||es(At)==="object"){if(At&&!isNaN(At.a)&&At.a===0)return Ae=["1.","1.","1.",Bt[1]].join(" ");if(typeof De=="string")Ae=[De,Pe,Ke,Bt[1]].join(" ");else switch(q.precision){case 2:Ae=[j(De/255),j(Pe/255),j(Ke/255),Bt[1]].join(" ");break;default:case 3:Ae=[D(De/255),D(Pe/255),D(Ke/255),Bt[1]].join(" ")}}else if(typeof De=="string")Ae=[De,Pe,Ke,At,Bt[2]].join(" ");else switch(q.precision){case 2:Ae=[j(De),j(Pe),j(Ke),j(At),Bt[2]].join(" ");break;case 3:default:Ae=[D(De),D(Pe),D(Ke),D(At),Bt[2]].join(" ")}return Ae},Ye=p.__private__.getFilters=function(){return i},ot=p.__private__.putStream=function(q){var Ae=(q=q||{}).data||"",De=q.filters||Ye(),Pe=q.alreadyAppliedFilters||[],Ke=q.addLength1||!1,At=Ae.length,Bt=q.objectId,zt=function(Sn){return Sn};if(d!==null&&Bt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(zt=$r.encryptor(Bt,0));var N={};De===!0&&(De=["FlateEncode"]);var ee=q.additionalKeyValues||[],oe=(N=hn.API.processDataByFilters!==void 0?hn.API.processDataByFilters(Ae,De):{data:Ae,reverseChain:[]}).reverseChain+(Array.isArray(Pe)?Pe.join(" "):Pe.toString());if(N.data.length!==0&&(ee.push({key:"Length",value:N.data.length}),Ke===!0&&ee.push({key:"Length1",value:At})),oe.length!=0)if(oe.split("/").length-1==1)ee.push({key:"Filter",value:oe});else{ee.push({key:"Filter",value:"["+oe+"]"});for(var ve=0;ve<ee.length;ve+=1)if(ee[ve].key==="DecodeParms"){for(var Ge=[],at=0;at<N.reverseChain.split("/").length-1;at+=1)Ge.push("null");Ge.push(ee[ve].value),ee[ve].value="["+Ge.join(" ")+"]"}}Ce("<<");for(var kt=0;kt<ee.length;kt++)Ce("/"+ee[kt].key+" "+ee[kt].value);Ce(">>"),N.data.length!==0&&(Ce("stream"),Ce(zt(N.data)),Ce("endstream"))},qe=p.__private__.putPage=function(q){var Ae=q.number,De=q.data,Pe=q.objId,Ke=q.contentsObjId;fe(Pe,!0),Ce("<</Type /Page"),Ce("/Parent "+q.rootDictionaryObjId+" 0 R"),Ce("/Resources "+q.resourceDictionaryObjId+" 0 R"),Ce("/MediaBox ["+parseFloat(E(q.mediaBox.bottomLeftX))+" "+parseFloat(E(q.mediaBox.bottomLeftY))+" "+E(q.mediaBox.topRightX)+" "+E(q.mediaBox.topRightY)+"]"),q.cropBox!==null&&Ce("/CropBox ["+E(q.cropBox.bottomLeftX)+" "+E(q.cropBox.bottomLeftY)+" "+E(q.cropBox.topRightX)+" "+E(q.cropBox.topRightY)+"]"),q.bleedBox!==null&&Ce("/BleedBox ["+E(q.bleedBox.bottomLeftX)+" "+E(q.bleedBox.bottomLeftY)+" "+E(q.bleedBox.topRightX)+" "+E(q.bleedBox.topRightY)+"]"),q.trimBox!==null&&Ce("/TrimBox ["+E(q.trimBox.bottomLeftX)+" "+E(q.trimBox.bottomLeftY)+" "+E(q.trimBox.topRightX)+" "+E(q.trimBox.topRightY)+"]"),q.artBox!==null&&Ce("/ArtBox ["+E(q.artBox.bottomLeftX)+" "+E(q.artBox.bottomLeftY)+" "+E(q.artBox.topRightX)+" "+E(q.artBox.topRightY)+"]"),typeof q.userUnit=="number"&&q.userUnit!==1&&Ce("/UserUnit "+q.userUnit),zn.publish("putPage",{objId:Pe,pageContext:en[Ae],pageNumber:Ae,page:De}),Ce("/Contents "+Ke+" 0 R"),Ce(">>"),Ce("endobj");var At=De.join(`
`);return I===k.ADVANCED&&(At+=`
Q`),fe(Ke,!0),ot({data:At,filters:Ye(),objectId:Ke}),Ce("endobj"),Pe},tt=p.__private__.putPages=function(){var q,Ae,De=[];for(q=1;q<=on;q++)en[q].objId=ss(),en[q].contentsObjId=ss();for(q=1;q<=on;q++)De.push(qe({number:q,data:me[q],objId:en[q].objId,contentsObjId:en[q].contentsObjId,mediaBox:en[q].mediaBox,cropBox:en[q].cropBox,bleedBox:en[q].bleedBox,trimBox:en[q].trimBox,artBox:en[q].artBox,userUnit:en[q].userUnit,rootDictionaryObjId:Ee,resourceDictionaryObjId:_e}));fe(Ee,!0),Ce("<</Type /Pages");var Pe="/Kids [";for(Ae=0;Ae<on;Ae++)Pe+=De[Ae]+" 0 R ";Ce(Pe+"]"),Ce("/Count "+on),Ce(">>"),Ce("endobj"),zn.publish("postPutPages")},st=function(q){zn.publish("putFont",{font:q,out:Ce,newObject:Kr,putStream:ot}),q.isAlreadyPutted!==!0&&(q.objectNumber=Kr(),Ce("<<"),Ce("/Type /Font"),Ce("/BaseFont /"+_m(q.postScriptName)),Ce("/Subtype /Type1"),typeof q.encoding=="string"&&Ce("/Encoding /"+q.encoding),Ce("/FirstChar 32"),Ce("/LastChar 255"),Ce(">>"),Ce("endobj"))},Et=function(){for(var q in Kt)Kt.hasOwnProperty(q)&&(h===!1||h===!0&&m.hasOwnProperty(q))&&st(Kt[q])},Dt=function(q){q.objectNumber=Kr();var Ae=[];Ae.push({key:"Type",value:"/XObject"}),Ae.push({key:"Subtype",value:"/Form"}),Ae.push({key:"BBox",value:"["+[E(q.x),E(q.y),E(q.x+q.width),E(q.y+q.height)].join(" ")+"]"}),Ae.push({key:"Matrix",value:"["+q.matrix.toString()+"]"});var De=q.pages[1].join(`
`);ot({data:De,additionalKeyValues:Ae,objectId:q.objectNumber}),Ce("endobj")},Vt=function(){for(var q in rs)rs.hasOwnProperty(q)&&Dt(rs[q])},Ft=function(q,Ae){var De,Pe=[],Ke=1/(Ae-1);for(De=0;De<1;De+=Ke)Pe.push(De);if(Pe.push(1),q[0].offset!=0){var At={offset:0,color:q[0].color};q.unshift(At)}if(q[q.length-1].offset!=1){var Bt={offset:1,color:q[q.length-1].color};q.push(Bt)}for(var zt="",N=0,ee=0;ee<Pe.length;ee++){for(De=Pe[ee];De>q[N+1].offset;)N++;var oe=q[N].offset,ve=(De-oe)/(q[N+1].offset-oe),Ge=q[N].color,at=q[N+1].color;zt+=re(Math.round((1-ve)*Ge[0]+ve*at[0]).toString(16))+re(Math.round((1-ve)*Ge[1]+ve*at[1]).toString(16))+re(Math.round((1-ve)*Ge[2]+ve*at[2]).toString(16))}return zt.trim()},Pt=function(q,Ae){Ae||(Ae=21);var De=Kr(),Pe=Ft(q.colors,Ae),Ke=[];Ke.push({key:"FunctionType",value:"0"}),Ke.push({key:"Domain",value:"[0.0 1.0]"}),Ke.push({key:"Size",value:"["+Ae+"]"}),Ke.push({key:"BitsPerSample",value:"8"}),Ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ot({data:Pe,additionalKeyValues:Ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:De}),Ce("endobj"),q.objectNumber=Kr(),Ce("<< /ShadingType "+q.type),Ce("/ColorSpace /DeviceRGB");var At="/Coords ["+E(parseFloat(q.coords[0]))+" "+E(parseFloat(q.coords[1]))+" ";q.type===2?At+=E(parseFloat(q.coords[2]))+" "+E(parseFloat(q.coords[3])):At+=E(parseFloat(q.coords[2]))+" "+E(parseFloat(q.coords[3]))+" "+E(parseFloat(q.coords[4]))+" "+E(parseFloat(q.coords[5])),Ce(At+="]"),q.matrix&&Ce("/Matrix ["+q.matrix.toString()+"]"),Ce("/Function "+De+" 0 R"),Ce("/Extend [true true]"),Ce(">>"),Ce("endobj")},yn=function(q,Ae){var De=ss(),Pe=Kr();Ae.push({resourcesOid:De,objectOid:Pe}),q.objectNumber=Pe;var Ke=[];Ke.push({key:"Type",value:"/Pattern"}),Ke.push({key:"PatternType",value:"1"}),Ke.push({key:"PaintType",value:"1"}),Ke.push({key:"TilingType",value:"1"}),Ke.push({key:"BBox",value:"["+q.boundingBox.map(E).join(" ")+"]"}),Ke.push({key:"XStep",value:E(q.xStep)}),Ke.push({key:"YStep",value:E(q.yStep)}),Ke.push({key:"Resources",value:De+" 0 R"}),q.matrix&&Ke.push({key:"Matrix",value:"["+q.matrix.toString()+"]"}),ot({data:q.stream,additionalKeyValues:Ke,objectId:q.objectNumber}),Ce("endobj")},Kn=function(q){var Ae;for(Ae in un)un.hasOwnProperty(Ae)&&(un[Ae]instanceof Th?Pt(un[Ae]):un[Ae]instanceof Im&&yn(un[Ae],q))},$n=function(q){for(var Ae in q.objectNumber=Kr(),Ce("<<"),q)switch(Ae){case"opacity":Ce("/ca "+j(q[Ae]));break;case"stroke-opacity":Ce("/CA "+j(q[Ae]))}Ce(">>"),Ce("endobj")},Jn=function(){var q;for(q in jn)jn.hasOwnProperty(q)&&$n(jn[q])},js=function(){for(var q in Ce("/XObject <<"),rs)rs.hasOwnProperty(q)&&rs[q].objectNumber>=0&&Ce("/"+q+" "+rs[q].objectNumber+" 0 R");zn.publish("putXobjectDict"),Ce(">>")},Ti=function(){$r.oid=Kr(),Ce("<<"),Ce("/Filter /Standard"),Ce("/V "+$r.v),Ce("/R "+$r.r),Ce("/U <"+$r.toHexString($r.U)+">"),Ce("/O <"+$r.toHexString($r.O)+">"),Ce("/P "+$r.P),Ce(">>"),Ce("endobj")},Qs=function(){for(var q in Ce("/Font <<"),Kt)Kt.hasOwnProperty(q)&&(h===!1||h===!0&&m.hasOwnProperty(q))&&Ce("/"+q+" "+Kt[q].objectNumber+" 0 R");Ce(">>")},va=function(){if(Object.keys(un).length>0){for(var q in Ce("/Shading <<"),un)un.hasOwnProperty(q)&&un[q]instanceof Th&&un[q].objectNumber>=0&&Ce("/"+q+" "+un[q].objectNumber+" 0 R");zn.publish("putShadingPatternDict"),Ce(">>")}},na=function(q){if(Object.keys(un).length>0){for(var Ae in Ce("/Pattern <<"),un)un.hasOwnProperty(Ae)&&un[Ae]instanceof p.TilingPattern&&un[Ae].objectNumber>=0&&un[Ae].objectNumber<q&&Ce("/"+Ae+" "+un[Ae].objectNumber+" 0 R");zn.publish("putTilingPatternDict"),Ce(">>")}},Ma=function(){if(Object.keys(jn).length>0){var q;for(q in Ce("/ExtGState <<"),jn)jn.hasOwnProperty(q)&&jn[q].objectNumber>=0&&Ce("/"+q+" "+jn[q].objectNumber+" 0 R");zn.publish("putGStateDict"),Ce(">>")}},as=function(q){fe(q.resourcesOid,!0),Ce("<<"),Ce("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Qs(),va(),na(q.objectOid),Ma(),js(),Ce(">>"),Ce("endobj")},ya=function(){var q=[];Et(),Jn(),Vt(),Kn(q),zn.publish("putResources"),q.forEach(as),as({resourcesOid:_e,objectOid:Number.MAX_SAFE_INTEGER}),zn.publish("postPutResources")},Zc=function(){zn.publish("putAdditionalObjects");for(var q=0;q<Se.length;q++){var Ae=Se[q];fe(Ae.objId,!0),Ce(Ae.content),Ce("endobj")}zn.publish("postPutAdditionalObjects")},dd=function(q){rn[q.fontName]=rn[q.fontName]||{},rn[q.fontName][q.fontStyle]=q.id},Cl=function(q,Ae,De,Pe,Ke){var At={id:"F"+(Object.keys(Kt).length+1).toString(10),postScriptName:q,fontName:Ae,fontStyle:De,encoding:Pe,isStandardFont:Ke||!1,metadata:{}};return zn.publish("addFont",{font:At,instance:this}),Kt[At.id]=At,dd(At),At.id},oA=function(q){for(var Ae=0,De=Je.length;Ae<De;Ae++){var Pe=Cl.call(this,q[Ae][0],q[Ae][1],q[Ae][2],Je[Ae][3],!0);h===!1&&(m[Pe]=!0);var Ke=q[Ae][0].split("-");dd({id:Pe,fontName:Ke[0],fontStyle:Ke[1]||""})}zn.publish("addFonts",{fonts:Kt,dictionary:rn})},Pa=function(q){return q.foo=function(){try{return q.apply(this,arguments)}catch(Pe){var Ae=Pe.stack||"";~Ae.indexOf(" at ")&&(Ae=Ae.split(" at ")[1]);var De="Error in function "+Ae.split(`
`)[0].split("<")[0]+": "+Pe.message;if(!Fn.console)throw new Error(De);Fn.console.error(De,Pe),Fn.alert&&alert(De)}},q.foo.bar=q,q.foo},eu=function(q,Ae){var De,Pe,Ke,At,Bt,zt,N,ee,oe;if(Ke=(Ae=Ae||{}).sourceEncoding||"Unicode",Bt=Ae.outputEncoding,(Ae.autoencode||Bt)&&Kt[Oe].metadata&&Kt[Oe].metadata[Ke]&&Kt[Oe].metadata[Ke].encoding&&(At=Kt[Oe].metadata[Ke].encoding,!Bt&&Kt[Oe].encoding&&(Bt=Kt[Oe].encoding),!Bt&&At.codePages&&(Bt=At.codePages[0]),typeof Bt=="string"&&(Bt=At[Bt]),Bt)){for(N=!1,zt=[],De=0,Pe=q.length;De<Pe;De++)(ee=Bt[q.charCodeAt(De)])?zt.push(String.fromCharCode(ee)):zt.push(q[De]),zt[De].charCodeAt(0)>>8&&(N=!0);q=zt.join("")}for(De=q.length;N===void 0&&De!==0;)q.charCodeAt(De-1)>>8&&(N=!0),De--;if(!N)return q;for(zt=Ae.noBOM?[]:[254,255],De=0,Pe=q.length;De<Pe;De++){if((oe=(ee=q.charCodeAt(De))>>8)>>8)throw new Error("Character at position "+De+" of string '"+q+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");zt.push(oe),zt.push(ee-(oe<<8))}return String.fromCharCode.apply(void 0,zt)},yr=p.__private__.pdfEscape=p.pdfEscape=function(q,Ae){return eu(q,Ae).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Oa=p.__private__.beginPage=function(q){me[++on]=[],en[on]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(q[0]),topRightY:Number(q[1])}},wo(on),Fe(me[W])},El=function(q,Ae){var De,Pe,Ke;switch(n=Ae||n,typeof q=="string"&&(De=S(q.toLowerCase()),Array.isArray(De)&&(Pe=De[0],Ke=De[1])),Array.isArray(q)&&(Pe=q[0]*Ie,Ke=q[1]*Ie),isNaN(Pe)&&(Pe=s[0],Ke=s[1]),(Pe>14400||Ke>14400)&&(ds.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Pe=Math.min(14400,Pe),Ke=Math.min(14400,Ke)),s=[Pe,Ke],n.substr(0,1)){case"l":Ke>Pe&&(s=[Ke,Pe]);break;case"p":Pe>Ke&&(s=[Ke,Pe])}Oa(s),AA(Nl),Ce(ja),dA!==0&&Ce(dA+" J"),mc!==0&&Ce(mc+" j"),zn.publish("addPage",{pageNumber:on})},_l=function(q){q>0&&q<=on&&(me.splice(q,1),en.splice(q,1),on--,W>on&&(W=on),this.setPage(W))},wo=function(q){q>0&&q<=on&&(W=q)},kr=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return me.length-1},Sl=function(q,Ae,De){var Pe,Ke=void 0;return De=De||{},q=q!==void 0?q:Kt[Oe].fontName,Ae=Ae!==void 0?Ae:Kt[Oe].fontStyle,Pe=q.toLowerCase(),rn[Pe]!==void 0&&rn[Pe][Ae]!==void 0?Ke=rn[Pe][Ae]:rn[q]!==void 0&&rn[q][Ae]!==void 0?Ke=rn[q][Ae]:De.disableWarning===!1&&ds.warn("Unable to look up font label for font '"+q+"', '"+Ae+"'. Refer to getFontList() for available fonts."),Ke||De.noFallback||(Ke=rn.times[Ae])==null&&(Ke=rn.times.normal),Ke},Ni=p.__private__.putInfo=function(){var q=Kr(),Ae=function(Pe){return Pe};for(var De in d!==null&&(Ae=$r.encryptor(q,0)),Ce("<<"),Ce("/Producer ("+yr(Ae("jsPDF "+hn.version))+")"),Ue)Ue.hasOwnProperty(De)&&Ue[De]&&Ce("/"+De.substr(0,1).toUpperCase()+De.substr(1)+" ("+yr(Ae(Ue[De]))+")");Ce("/CreationDate ("+yr(Ae(te))+")"),Ce(">>"),Ce("endobj")},Ko=p.__private__.putCatalog=function(q){var Ae=(q=q||{}).rootDictionaryObjId||Ee;switch(Kr(),Ce("<<"),Ce("/Type /Catalog"),Ce("/Pages "+Ae+" 0 R"),_t||(_t="fullwidth"),_t){case"fullwidth":Ce("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ce("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ce("/OpenAction [3 0 R /Fit]");break;case"original":Ce("/OpenAction [3 0 R /XYZ null null 1]");break;default:var De=""+_t;De.substr(De.length-1)==="%"&&(_t=parseInt(_t)/100),typeof _t=="number"&&Ce("/OpenAction [3 0 R /XYZ null null "+j(_t)+"]")}switch(Mt||(Mt="continuous"),Mt){case"continuous":Ce("/PageLayout /OneColumn");break;case"single":Ce("/PageLayout /SinglePage");break;case"two":case"twoleft":Ce("/PageLayout /TwoColumnLeft");break;case"tworight":Ce("/PageLayout /TwoColumnRight")}Ut&&Ce("/PageMode /"+Ut),zn.publish("putCatalog"),Ce(">>"),Ce("endobj")},fd=p.__private__.putTrailer=function(){Ce("trailer"),Ce("<<"),Ce("/Size "+(se+1)),Ce("/Root "+se+" 0 R"),Ce("/Info "+(se-1)+" 0 R"),d!==null&&Ce("/Encrypt "+$r.oid+" 0 R"),Ce("/ID [ <"+Y+"> <"+Y+"> ]"),Ce(">>")},lA=p.__private__.putHeader=function(){Ce("%PDF-"+y),Ce("%ºß¬à")},cA=p.__private__.putXRef=function(){var q="0000000000";Ce("xref"),Ce("0 "+(se+1)),Ce("0000000000 65535 f ");for(var Ae=1;Ae<=se;Ae++)typeof de[Ae]=="function"?Ce((q+de[Ae]()).slice(-10)+" 00000 n "):de[Ae]!==void 0?Ce((q+de[Ae]).slice(-10)+" 00000 n "):Ce("0000000000 00000 n ")},$o=p.__private__.buildDocument=function(){Ze(),Fe(pe),zn.publish("buildDocument"),lA(),tt(),Zc(),ya(),d!==null&&Ti(),Ni(),Ko();var q=be;return cA(),fd(),Ce("startxref"),Ce(""+q),Ce("%%EOF"),Fe(me[W]),pe.join(`
`)},tu=p.__private__.getBlob=function(q){return new Blob([ze(q)],{type:"application/pdf"})},Wo=p.output=p.__private__.output=Pa(function(q,Ae){switch(typeof(Ae=Ae||{})=="string"?Ae={filename:Ae}:Ae.filename=Ae.filename||"generated.pdf",q){case void 0:return $o();case"save":p.save(Ae.filename);break;case"arraybuffer":return ze($o());case"blob":return tu($o());case"bloburi":case"bloburl":if(Fn.URL!==void 0&&typeof Fn.URL.createObjectURL=="function")return Fn.URL&&Fn.URL.createObjectURL(tu($o()))||void 0;ds.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var De="",Pe=$o();try{De=M5(Pe)}catch{De=M5(unescape(encodeURIComponent(Pe)))}return"data:application/pdf;filename="+Ae.filename+";base64,"+De;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Fn)==="[object Window]"){var Ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",At=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ae.pdfObjectUrl&&(Ke=Ae.pdfObjectUrl,At="");var Bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ke+'"'+At+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ae)+");<\/script></body></html>",zt=Fn.open();return zt!==null&&zt.document.write(Bt),zt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Fn)==="[object Window]"){var N='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ae.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ae.filename+'" width="500px" height="400px" /></body></html>',ee=Fn.open();if(ee!==null){ee.document.write(N);var oe=this;ee.document.documentElement.querySelector("#pdfViewer").onload=function(){ee.document.title=Ae.filename,ee.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(oe.output("bloburl"))}}return ee}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Fn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ve='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ae)+'"></iframe></body></html>',Ge=Fn.open();if(Ge!==null&&(Ge.document.write(ve),Ge.document.title=Ae.filename),Ge||typeof safari>"u")return Ge;break;case"datauri":case"dataurl":return Fn.document.location.href=this.output("datauristring",Ae);default:return null}}),bo=function(q){return Array.isArray(xa)===!0&&xa.indexOf(q)>-1};switch(r){case"pt":Ie=1;break;case"mm":Ie=72/25.4;break;case"cm":Ie=72/2.54;break;case"in":Ie=72;break;case"px":Ie=bo("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ie=12;break;case"ex":Ie=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ie=r}var $r=null;ie(),V();var Yo=function(q){return d!==null?$r.encryptor(q,0):function(Ae){return Ae}},Co=p.__private__.getPageInfo=p.getPageInfo=function(q){if(isNaN(q)||q%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:en[q].objId,pageNumber:q,pageContext:en[q]}},_n=p.__private__.getPageInfoByObjId=function(q){if(isNaN(q)||q%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ae in en)if(en[Ae].objId===q)break;return Co(Ae)},Eo=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:en[W].objId,pageNumber:W,pageContext:en[W]}};p.addPage=function(){return El.apply(this,arguments),this},p.setPage=function(){return wo.apply(this,arguments),Fe.call(this,me[W]),this},p.insertPage=function(q){return this.addPage(),this.movePage(W,q),this},p.movePage=function(q,Ae){var De,Pe;if(q>Ae){De=me[q],Pe=en[q];for(var Ke=q;Ke>Ae;Ke--)me[Ke]=me[Ke-1],en[Ke]=en[Ke-1];me[Ae]=De,en[Ae]=Pe,this.setPage(Ae)}else if(q<Ae){De=me[q],Pe=en[q];for(var At=q;At<Ae;At++)me[At]=me[At+1],en[At]=en[At+1];me[Ae]=De,en[Ae]=Pe,this.setPage(Ae)}return this},p.deletePage=function(){return _l.apply(this,arguments),this},p.__private__.text=p.text=function(q,Ae,De,Pe,Ke){var At,Bt,zt,N,ee,oe,ve,Ge,at,kt=(Pe=Pe||{}).scope||this;if(typeof q=="number"&&typeof Ae=="number"&&(typeof De=="string"||Array.isArray(De))){var Sn=De;De=Ae,Ae=q,q=Sn}if(arguments[3]instanceof $t?(_("The transform parameter of text() with a Matrix value"),at=Ke):(zt=arguments[4],N=arguments[5],es(ve=arguments[3])==="object"&&ve!==null||(typeof zt=="string"&&(N=zt,zt=null),typeof ve=="string"&&(N=ve,ve=null),typeof ve=="number"&&(zt=ve,ve=null),Pe={flags:ve,angle:zt,align:N})),isNaN(Ae)||isNaN(De)||q==null)throw new Error("Invalid arguments passed to jsPDF.text");if(q.length===0)return kt;var ir="",Pn=!1,Ir=typeof Pe.lineHeightFactor=="number"?Pe.lineHeightFactor:ar,Or=kt.internal.scaleFactor;function No(tr){return tr=tr.split("	").join(Array(Pe.TabLen||9).join(" ")),yr(tr,ve)}function Is(tr){for(var nr,is=tr.concat(),Fs=[],ko=is.length;ko--;)typeof(nr=is.shift())=="string"?Fs.push(nr):Array.isArray(tr)&&(nr.length===1||nr[1]===void 0&&nr[2]===void 0)?Fs.push(nr[0]):Fs.push([nr[0],nr[1],nr[2]]);return Fs}function Fi(tr,nr){var is;if(typeof tr=="string")is=nr(tr)[0];else if(Array.isArray(tr)){for(var Fs,ko,mu=tr.concat(),pu=[],wc=mu.length;wc--;)typeof(Fs=mu.shift())=="string"?pu.push(nr(Fs)[0]):Array.isArray(Fs)&&typeof Fs[0]=="string"&&(ko=nr(Fs[0],Fs[1],Fs[2]),pu.push([ko[0],ko[1],ko[2]]));is=pu}return is}var Rl=!1,iu=!0;if(typeof q=="string")Rl=!0;else if(Array.isArray(q)){var gd=q.concat();Bt=[];for(var fA,ra=gd.length;ra--;)(typeof(fA=gd.shift())!="string"||Array.isArray(fA)&&typeof fA[0]!="string")&&(iu=!1);Rl=iu}if(Rl===!1)throw new Error('Type of text must be string or Array. "'+q+'" is not recognized.');typeof q=="string"&&(q=q.match(/[\r?\n]/)?q.split(/\r\n|\r|\n/g):[q]);var ou=dt/kt.internal.scaleFactor,hA=ou*(Ir-1);switch(Pe.baseline){case"bottom":De-=hA;break;case"top":De+=ou-hA;break;case"hanging":De+=ou-2*hA;break;case"middle":De+=ou/2-hA}if((oe=Pe.maxWidth||0)>0&&(typeof q=="string"?q=kt.splitTextToSize(q,oe):Object.prototype.toString.call(q)==="[object Array]"&&(q=q.reduce(function(tr,nr){return tr.concat(kt.splitTextToSize(nr,oe))},[]))),At={text:q,x:Ae,y:De,options:Pe,mutex:{pdfEscape:yr,activeFontKey:Oe,fonts:Kt,activeFontSize:dt}},zn.publish("preProcessText",At),q=At.text,zt=(Pe=At.options).angle,!(at instanceof $t)&&zt&&typeof zt=="number"){zt*=Math.PI/180,Pe.rotationDirection===0&&(zt=-zt),I===k.ADVANCED&&(zt=-zt);var mA=Math.cos(zt),xd=Math.sin(zt);at=new $t(mA,xd,-xd,mA,0,0)}else zt&&zt instanceof $t&&(at=zt);I!==k.ADVANCED||at||(at=ur),(ee=Pe.charSpace||hc)!==void 0&&(ir+=E(L(ee))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ge=Pe.horizontalScale)!==void 0&&(ir+=E(100*Ge)+` Tz
`),Pe.lang;var Di=-1,zp=Pe.renderingMode!==void 0?Pe.renderingMode:Pe.stroke,Jf=kt.internal.getCurrentPageInfo().pageContext;switch(zp){case 0:case!1:case"fill":Di=0;break;case 1:case!0:case"stroke":Di=1;break;case 2:case"fillThenStroke":Di=2;break;case 3:case"invisible":Di=3;break;case 4:case"fillAndAddForClipping":Di=4;break;case 5:case"strokeAndAddPathForClipping":Di=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Di=6;break;case 7:case"addToPathForClipping":Di=7}var E0=Jf.usedRenderingMode!==void 0?Jf.usedRenderingMode:-1;Di!==-1?ir+=Di+` Tr
`:E0!==-1&&(ir+=`0 Tr
`),Di!==-1&&(Jf.usedRenderingMode=Di),N=Pe.align||"left";var Bo,wa=dt*Ir,lu=kt.internal.pageSize.getWidth(),Zf=Kt[Oe];ee=Pe.charSpace||hc,oe=Pe.maxWidth||0,ve=Object.assign({autoencode:!0,noBOM:!0},Pe.flags);var vc=[],cu=function(tr){return kt.getStringUnitWidth(tr,{font:Zf,charSpace:ee,fontSize:dt,doKerning:!1})*dt/Or};if(Object.prototype.toString.call(q)==="[object Array]"){var di;Bt=Is(q),N!=="left"&&(Bo=Bt.map(cu));var Qa,uu=0;if(N==="right"){Ae-=Bo[0],q=[],ra=Bt.length;for(var Ri=0;Ri<ra;Ri++)Ri===0?(Qa=Ya(Ae),di=Vs(De)):(Qa=L(uu-Bo[Ri]),di=-wa),q.push([Bt[Ri],Qa,di]),uu=Bo[Ri]}else if(N==="center"){Ae-=Bo[0]/2,q=[],ra=Bt.length;for(var el=0;el<ra;el++)el===0?(Qa=Ya(Ae),di=Vs(De)):(Qa=L((uu-Bo[el])/2),di=-wa),q.push([Bt[el],Qa,di]),uu=Bo[el]}else if(N==="left"){q=[],ra=Bt.length;for(var Ll=0;Ll<ra;Ll++)q.push(Bt[Ll])}else if(N==="justify"&&Zf.encoding==="Identity-H"){q=[],ra=Bt.length,oe=oe!==0?oe:lu;for(var tl=0,Es=0;Es<ra;Es++)if(di=Es===0?Vs(De):-wa,Qa=Es===0?Ya(Ae):tl,Es<ra-1){var nl=L((oe-Bo[Es])/(Bt[Es].split(" ").length-1)),zs=Bt[Es].split(" ");q.push([zs[0]+" ",Qa,di]),tl=0;for(var Li=1;Li<zs.length;Li++){var pA=(cu(zs[Li-1]+" "+zs[Li])-cu(zs[Li]))*Or+nl;Li==zs.length-1?q.push([zs[Li],pA,0]):q.push([zs[Li]+" ",pA,0]),tl-=pA}}else q.push([Bt[Es],Qa,di]);q.push(["",tl,0])}else{if(N!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(q=[],ra=Bt.length,oe=oe!==0?oe:lu,Es=0;Es<ra;Es++)di=Es===0?Vs(De):-wa,Qa=Es===0?Ya(Ae):0,Es<ra-1?vc.push(E(L((oe-Bo[Es])/(Bt[Es].split(" ").length-1)))):vc.push(0),q.push([Bt[Es],Qa,di])}}var Ul=typeof Pe.R2L=="boolean"?Pe.R2L:Rt;Ul===!0&&(q=Fi(q,function(tr,nr,is){return[tr.split("").reverse().join(""),nr,is]})),At={text:q,x:Ae,y:De,options:Pe,mutex:{pdfEscape:yr,activeFontKey:Oe,fonts:Kt,activeFontSize:dt}},zn.publish("postProcessText",At),q=At.text,Pn=At.mutex.isHex||!1;var vd=Kt[Oe].encoding;vd!=="WinAnsiEncoding"&&vd!=="StandardEncoding"||(q=Fi(q,function(tr,nr,is){return[No(tr),nr,is]})),Bt=Is(q),q=[];for(var Au,du,fu,gA=0,yd=1,hu=Array.isArray(Bt[0])?yd:gA,yc="",xA=function(tr,nr,is){var Fs="";return is instanceof $t?(is=typeof Pe.angle=="number"?vr(is,new $t(1,0,0,1,tr,nr)):vr(new $t(1,0,0,1,tr,nr),is),I===k.ADVANCED&&(is=vr(new $t(1,0,0,-1,0,0),is)),Fs=is.join(" ")+` Tm
`):Fs=E(tr)+" "+E(nr)+` Td
`,Fs},_s=0;_s<Bt.length;_s++){switch(yc="",hu){case yd:fu=(Pn?"<":"(")+Bt[_s][0]+(Pn?">":")"),Au=parseFloat(Bt[_s][1]),du=parseFloat(Bt[_s][2]);break;case gA:fu=(Pn?"<":"(")+Bt[_s]+(Pn?">":")"),Au=Ya(Ae),du=Vs(De)}vc!==void 0&&vc[_s]!==void 0&&(yc=vc[_s]+` Tw
`),_s===0?q.push(yc+xA(Au,du,at)+fu):hu===gA?q.push(yc+fu):hu===yd&&q.push(yc+xA(Au,du,at)+fu)}q=hu===gA?q.join(` Tj
T* `):q.join(` Tj
`),q+=` Tj
`;var co=`BT
/`;return co+=Oe+" "+dt+` Tf
`,co+=E(dt*Ir)+` TL
`,co+=Jo+`
`,co+=ir,co+=q,Ce(co+="ET"),m[Oe]=!0,kt};var hd=p.__private__.clip=p.clip=function(q){return Ce(q==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return hd("evenodd")},p.__private__.discardPath=p.discardPath=function(){return Ce("n"),this};var $a=p.__private__.isValidStyle=function(q){var Ae=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(q)!==-1&&(Ae=!0),Ae};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(q){return $a(q)&&(u=q),this};var Bi=p.__private__.getStyle=p.getStyle=function(q){var Ae=u;switch(q){case"D":case"S":Ae="S";break;case"F":Ae="f";break;case"FD":case"DF":Ae="B";break;case"f":case"f*":case"B":case"B*":Ae=q}return Ae},Ai=p.close=function(){return Ce("h"),this};p.stroke=function(){return Ce("S"),this},p.fill=function(q){return _o("f",q),this},p.fillEvenOdd=function(q){return _o("f*",q),this},p.fillStroke=function(q){return _o("B",q),this},p.fillStrokeEvenOdd=function(q){return _o("B*",q),this};var _o=function(q,Ae){es(Ae)==="object"?Xo(Ae,q):Ce(q)},ki=function(q){q===null||I===k.ADVANCED&&q===void 0||(q=Bi(q),Ce(q))};function Tl(q,Ae,De,Pe,Ke){var At=new Im(Ae||this.boundingBox,De||this.xStep,Pe||this.yStep,this.gState,Ke||this.matrix);At.stream=this.stream;var Bt=q+"$$"+this.cloneIndex+++"$$";return Mr(Bt,At),At}var Xo=function(q,Ae){var De=xr[q.key],Pe=un[De];if(Pe instanceof Th)Ce("q"),Ce(uA(Ae)),Pe.gState&&p.setGState(Pe.gState),Ce(q.matrix.toString()+" cm"),Ce("/"+De+" sh"),Ce("Q");else if(Pe instanceof Im){var Ke=new $t(1,0,0,-1,0,Xa());q.matrix&&(Ke=Ke.multiply(q.matrix||ur),De=Tl.call(Pe,q.key,q.boundingBox,q.xStep,q.yStep,Ke).id),Ce("q"),Ce("/Pattern cs"),Ce("/"+De+" scn"),Pe.gState&&p.setGState(Pe.gState),Ce(Ae),Ce("Q")}},uA=function(q){switch(q){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ii=p.moveTo=function(q,Ae){return Ce(E(L(q))+" "+E(H(Ae))+" m"),this},Wa=p.lineTo=function(q,Ae){return Ce(E(L(q))+" "+E(H(Ae))+" l"),this},So=p.curveTo=function(q,Ae,De,Pe,Ke,At){return Ce([E(L(q)),E(H(Ae)),E(L(De)),E(H(Pe)),E(L(Ke)),E(H(At)),"c"].join(" ")),this};p.__private__.line=p.line=function(q,Ae,De,Pe,Ke){if(isNaN(q)||isNaN(Ae)||isNaN(De)||isNaN(Pe)||!$a(Ke))throw new Error("Invalid arguments passed to jsPDF.line");return I===k.COMPAT?this.lines([[De-q,Pe-Ae]],q,Ae,[1,1],Ke||"S"):this.lines([[De-q,Pe-Ae]],q,Ae,[1,1]).stroke()},p.__private__.lines=p.lines=function(q,Ae,De,Pe,Ke,At){var Bt,zt,N,ee,oe,ve,Ge,at,kt,Sn,ir,Pn;if(typeof q=="number"&&(Pn=De,De=Ae,Ae=q,q=Pn),Pe=Pe||[1,1],At=At||!1,isNaN(Ae)||isNaN(De)||!Array.isArray(q)||!Array.isArray(Pe)||!$a(Ke)||typeof At!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ii(Ae,De),Bt=Pe[0],zt=Pe[1],ee=q.length,Sn=Ae,ir=De,N=0;N<ee;N++)(oe=q[N]).length===2?(Sn=oe[0]*Bt+Sn,ir=oe[1]*zt+ir,Wa(Sn,ir)):(ve=oe[0]*Bt+Sn,Ge=oe[1]*zt+ir,at=oe[2]*Bt+Sn,kt=oe[3]*zt+ir,Sn=oe[4]*Bt+Sn,ir=oe[5]*zt+ir,So(ve,Ge,at,kt,Sn,ir));return At&&Ai(),ki(Ke),this},p.path=function(q){for(var Ae=0;Ae<q.length;Ae++){var De=q[Ae],Pe=De.c;switch(De.op){case"m":Ii(Pe[0],Pe[1]);break;case"l":Wa(Pe[0],Pe[1]);break;case"c":So.apply(this,Pe);break;case"h":Ai()}}return this},p.__private__.rect=p.rect=function(q,Ae,De,Pe,Ke){if(isNaN(q)||isNaN(Ae)||isNaN(De)||isNaN(Pe)||!$a(Ke))throw new Error("Invalid arguments passed to jsPDF.rect");return I===k.COMPAT&&(Pe=-Pe),Ce([E(L(q)),E(H(Ae)),E(L(De)),E(L(Pe)),"re"].join(" ")),ki(Ke),this},p.__private__.triangle=p.triangle=function(q,Ae,De,Pe,Ke,At,Bt){if(isNaN(q)||isNaN(Ae)||isNaN(De)||isNaN(Pe)||isNaN(Ke)||isNaN(At)||!$a(Bt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[De-q,Pe-Ae],[Ke-De,At-Pe],[q-Ke,Ae-At]],q,Ae,[1,1],Bt,!0),this},p.__private__.roundedRect=p.roundedRect=function(q,Ae,De,Pe,Ke,At,Bt){if(isNaN(q)||isNaN(Ae)||isNaN(De)||isNaN(Pe)||isNaN(Ke)||isNaN(At)||!$a(Bt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var zt=4/3*(Math.SQRT2-1);return Ke=Math.min(Ke,.5*De),At=Math.min(At,.5*Pe),this.lines([[De-2*Ke,0],[Ke*zt,0,Ke,At-At*zt,Ke,At],[0,Pe-2*At],[0,At*zt,-Ke*zt,At,-Ke,At],[2*Ke-De,0],[-Ke*zt,0,-Ke,-At*zt,-Ke,-At],[0,2*At-Pe],[0,-At*zt,Ke*zt,-At,Ke,-At]],q+Ke,Ae,[1,1],Bt,!0),this},p.__private__.ellipse=p.ellipse=function(q,Ae,De,Pe,Ke){if(isNaN(q)||isNaN(Ae)||isNaN(De)||isNaN(Pe)||!$a(Ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var At=4/3*(Math.SQRT2-1)*De,Bt=4/3*(Math.SQRT2-1)*Pe;return Ii(q+De,Ae),So(q+De,Ae-Bt,q+At,Ae-Pe,q,Ae-Pe),So(q-At,Ae-Pe,q-De,Ae-Bt,q-De,Ae),So(q-De,Ae+Bt,q-At,Ae+Pe,q,Ae+Pe),So(q+At,Ae+Pe,q+De,Ae+Bt,q+De,Ae),ki(Ke),this},p.__private__.circle=p.circle=function(q,Ae,De,Pe){if(isNaN(q)||isNaN(Ae)||isNaN(De)||!$a(Pe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(q,Ae,De,De,Pe)},p.setFont=function(q,Ae,De){return De&&(Ae=R(Ae,De)),Oe=Sl(q,Ae,{disableWarning:!1}),this};var Hs=p.__private__.getFont=p.getFont=function(){return Kt[Sl.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var q,Ae,De={};for(q in rn)if(rn.hasOwnProperty(q))for(Ae in De[q]=[],rn[q])rn[q].hasOwnProperty(Ae)&&De[q].push(Ae);return De},p.addFont=function(q,Ae,De,Pe,Ke){var At=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&At.indexOf(arguments[3])!==-1?Ke=arguments[3]:arguments[3]&&At.indexOf(arguments[3])==-1&&(De=R(De,Pe)),Ke=Ke||"Identity-H",Cl.call(this,q,Ae,De,Ke)};var ar,Nl=t.lineWidth||.200025,To=p.__private__.getLineWidth=p.getLineWidth=function(){return Nl},AA=p.__private__.setLineWidth=p.setLineWidth=function(q){return Nl=q,Ce(E(L(q))+" w"),this};p.__private__.setLineDash=hn.API.setLineDash=hn.API.setLineDashPattern=function(q,Ae){if(q=q||[],Ae=Ae||0,isNaN(Ae)||!Array.isArray(q))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return q=q.map(function(De){return E(L(De))}).join(" "),Ae=E(L(Ae)),Ce("["+q+"] "+Ae+" d"),this};var dc=p.__private__.getLineHeight=p.getLineHeight=function(){return dt*ar};p.__private__.getLineHeight=p.getLineHeight=function(){return dt*ar};var fc=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(q){return typeof(q=q||1.15)=="number"&&(ar=q),this},lo=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return ar};fc(t.lineHeight);var Ya=p.__private__.getHorizontalCoordinate=function(q){return L(q)},Vs=p.__private__.getVerticalCoordinate=function(q){return I===k.ADVANCED?q:en[W].mediaBox.topRightY-en[W].mediaBox.bottomLeftY-L(q)},md=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(q){return E(Ya(q))},Bl=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(q){return E(Vs(q))},ja=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Te(ja)},p.__private__.setStrokeColor=p.setDrawColor=function(q,Ae,De,Pe){return ja=ke({ch1:q,ch2:Ae,ch3:De,ch4:Pe,pdfColorType:"draw",precision:2}),Ce(ja),this};var kl=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Te(kl)},p.__private__.setFillColor=p.setFillColor=function(q,Ae,De,Pe){return kl=ke({ch1:q,ch2:Ae,ch3:De,ch4:Pe,pdfColorType:"fill",precision:2}),Ce(kl),this};var Jo=t.textColor||"0 g",nu=p.__private__.getTextColor=p.getTextColor=function(){return Te(Jo)};p.__private__.setTextColor=p.setTextColor=function(q,Ae,De,Pe){return Jo=ke({ch1:q,ch2:Ae,ch3:De,ch4:Pe,pdfColorType:"text",precision:3}),this};var hc=t.charSpace,ru=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(hc||0)};p.__private__.setCharSpace=p.setCharSpace=function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return hc=q,this};var dA=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(q){var Ae=p.CapJoinStyles[q];if(Ae===void 0)throw new Error("Line cap style of '"+q+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return dA=Ae,Ce(Ae+" J"),this};var mc=0;p.__private__.setLineJoin=p.setLineJoin=function(q){var Ae=p.CapJoinStyles[q];if(Ae===void 0)throw new Error("Line join style of '"+q+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return mc=Ae,Ce(Ae+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(q){if(q=q||0,isNaN(q))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ce(E(L(q))+" M"),this},p.GState=kw,p.setGState=function(q){(q=typeof q=="string"?jn[Sr[q]]:Il(null,q)).equals(qr)||(Ce("/"+q.id+" gs"),qr=q)};var Il=function(q,Ae){if(!q||!Sr[q]){var De=!1;for(var Pe in jn)if(jn.hasOwnProperty(Pe)&&jn[Pe].equals(Ae)){De=!0;break}if(De)Ae=jn[Pe];else{var Ke="GS"+(Object.keys(jn).length+1).toString(10);jn[Ke]=Ae,Ae.id=Ke}return q&&(Sr[q]=Ae.id),zn.publish("addGState",Ae),Ae}};p.addGState=function(q,Ae){return Il(q,Ae),this},p.saveGraphicsState=function(){return Ce("q"),qn.push({key:Oe,size:dt,color:Jo}),this},p.restoreGraphicsState=function(){Ce("Q");var q=qn.pop();return Oe=q.key,dt=q.size,Jo=q.color,qr=null,this},p.setCurrentTransformationMatrix=function(q){return Ce(q.toString()+" cm"),this},p.comment=function(q){return Ce("#"+q),this};var pc=function(q,Ae){var De=q||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return De},set:function(At){isNaN(At)||(De=parseFloat(At))}});var Pe=Ae||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Pe},set:function(At){isNaN(At)||(Pe=parseFloat(At))}});var Ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ke},set:function(At){Ke=At.toString()}}),this},su=function(q,Ae,De,Pe){pc.call(this,q,Ae),this.type="rect";var Ke=De||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ke},set:function(Bt){isNaN(Bt)||(Ke=parseFloat(Bt))}});var At=Pe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return At},set:function(Bt){isNaN(Bt)||(At=parseFloat(Bt))}}),this},gc=function(){this.page=on,this.currentPage=W,this.pages=me.slice(0),this.pagesContext=en.slice(0),this.x=Xe,this.y=mt,this.matrix=Yt,this.width=Dl(W),this.height=Xa(W),this.outputDestination=Me,this.id="",this.objectNumber=-1};gc.prototype.restore=function(){on=this.page,W=this.currentPage,en=this.pagesContext,me=this.pages,Xe=this.x,mt=this.y,Yt=this.matrix,xc(W,this.width),au(W,this.height),Me=this.outputDestination};var Fl=function(q,Ae,De,Pe,Ke){Ua.push(new gc),on=W=0,me=[],Xe=q,mt=Ae,Yt=Ke,Oa([De,Pe])},pd=function(q){if(ks[q])Ua.pop().restore();else{var Ae=new gc,De="Xo"+(Object.keys(rs).length+1).toString(10);Ae.id=De,ks[q]=De,rs[De]=Ae,zn.publish("addFormObject",Ae),Ua.pop().restore()}};for(var Zo in p.beginFormObject=function(q,Ae,De,Pe,Ke){return Fl(q,Ae,De,Pe,Ke),this},p.endFormObject=function(q){return pd(q),this},p.doFormObject=function(q,Ae){var De=rs[ks[q]];return Ce("q"),Ce(Ae.toString()+" cm"),Ce("/"+De.id+" Do"),Ce("Q"),this},p.getFormObject=function(q){var Ae=rs[ks[q]];return{x:Ae.x,y:Ae.y,width:Ae.width,height:Ae.height,matrix:Ae.matrix}},p.save=function(q,Ae){return q=q||"generated.pdf",(Ae=Ae||{}).returnPromise=Ae.returnPromise||!1,Ae.returnPromise===!1?(Eh(tu($o()),q),typeof Eh.unload=="function"&&Fn.setTimeout&&setTimeout(Eh.unload,911),this):new Promise(function(De,Pe){try{var Ke=Eh(tu($o()),q);typeof Eh.unload=="function"&&Fn.setTimeout&&setTimeout(Eh.unload,911),De(Ke)}catch(At){Pe(At.message)}})},hn.API)hn.API.hasOwnProperty(Zo)&&(Zo==="events"&&hn.API.events.length?function(q,Ae){var De,Pe,Ke;for(Ke=Ae.length-1;Ke!==-1;Ke--)De=Ae[Ke][0],Pe=Ae[Ke][1],q.subscribe.apply(q,[De].concat(typeof Pe=="function"?[Pe]:Pe))}(zn,hn.API.events):p[Zo]=hn.API[Zo]);var Dl=p.getPageWidth=function(q){return(en[q=q||W].mediaBox.topRightX-en[q].mediaBox.bottomLeftX)/Ie},xc=p.setPageWidth=function(q,Ae){en[q].mediaBox.topRightX=Ae*Ie+en[q].mediaBox.bottomLeftX},Xa=p.getPageHeight=function(q){return(en[q=q||W].mediaBox.topRightY-en[q].mediaBox.bottomLeftY)/Ie},au=p.setPageHeight=function(q,Ae){en[q].mediaBox.topRightY=Ae*Ie+en[q].mediaBox.bottomLeftY};return p.internal={pdfEscape:yr,getStyle:Bi,getFont:Hs,getFontSize:ft,getCharSpace:ru,getTextColor:nu,getLineHeight:dc,getLineHeightFactor:lo,getLineWidth:To,write:Re,getHorizontalCoordinate:Ya,getVerticalCoordinate:Vs,getCoordinateString:md,getVerticalCoordinateString:Bl,collections:{},newObject:Kr,newAdditionalObject:Be,newObjectDeferred:ss,newObjectDeferredBegin:fe,getFilters:Ye,putStream:ot,events:zn,scaleFactor:Ie,pageSize:{getWidth:function(){return Dl(W)},setWidth:function(q){xc(W,q)},getHeight:function(){return Xa(W)},setHeight:function(q){au(W,q)}},encryptionOptions:d,encryption:$r,getEncryptor:Yo,output:Wo,getNumberOfPages:kr,pages:me,out:Ce,f2:j,f3:D,getPageInfo:Co,getPageInfoByObjId:_n,getCurrentPageInfo:Eo,getPDFVersion:x,Point:pc,Rectangle:su,Matrix:$t,hasHotfix:bo},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Dl(W)},set:function(q){xc(W,q)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Xa(W)},set:function(q){au(W,q)},enumerable:!0,configurable:!0}),oA.call(p,Je),Oe="F1",El(s,n),zn.publish("initialized"),p}Em.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Em.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Em.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Em.prototype.processOwnerPassword=function(t,e){return O5(P5(e).substr(0,5),t)},Em.prototype.encryptor=function(t,e){var n=P5(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return O5(n,r)}},kw.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||es(t)!==es(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},hn.API={events:[]},hn.version="2.5.2";var Ws=hn.API,S4=1,m0=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},em=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Hn=function(t){return t.toFixed(2)},$d=function(t){return t.toFixed(5)};Ws.__acroform__={};var qo=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},P6=function(t){return t*S4},Fu=function(t){var e=new jj,n=cn.internal.getHeight(t)||0,r=cn.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Hn(r)),Number(Hn(n))],e},zne=Ws.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},Gne=Ws.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},qne=Ws.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},fa=Ws.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return qne(t,e-1)},ha=Ws.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return zne(t,e-1)},ma=Ws.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Gne(t,e-1)},Kne=Ws.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,s=t[0],a=t[1],i=t[2],o=t[3],l={};return l.lowerLeft_X=n(s)||0,l.lowerLeft_Y=r(a+o)||0,l.upperRight_X=n(s+i)||0,l.upperRight_Y=r(a)||0,[Number(Hn(l.lowerLeft_X)),Number(Hn(l.lowerLeft_Y)),Number(Hn(l.upperRight_X)),Number(Hn(l.upperRight_Y))]},$ne=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=j5(t,n),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+Hn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Fu(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},j5=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(D){return D.split(`
`)}):s.map(function(D){return[D]});var a=n,i=cn.internal.getHeight(t)||0;i=i<0?-i:i;var o=cn.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(D,L,Q){if(D+1<s.length){var H=L+" "+s[D+1][0];return py(H,t,Q).width<=o-4}return!1};a++;e:for(;a>0;){e="",a--;var u,d,h=py("3",t,a).height,m=t.multiline?i-a:(i-h)/2,p=m+=2,y=0,x=0,C=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+py(e,t,a=12).width+", FieldWidth:"+o+`
`;break}for(var S="",k=0,I=0;I<s.length;I++)if(s.hasOwnProperty(I)){var F=!1;if(s[I].length!==1&&C!==s[I].length-1){if((h+2)*(k+2)+2>i)continue e;S+=s[I][C],F=!0,x=I,I--}else{S=(S+=s[I][C]+" ").substr(S.length-1)==" "?S.substr(0,S.length-1):S;var U=parseInt(I),R=l(U,S,a),E=I>=s.length-1;if(R&&!E){S+=" ",C=0;continue}if(R||E){if(E)x=U;else if(t.multiline&&(h+2)*(k+2)+2>i)continue e}else{if(!t.multiline||(h+2)*(k+2)+2>i)continue e;x=U}}for(var _="",B=y;B<=x;B++){var j=s[B];if(t.multiline){if(B===x){_+=j[C]+" ",C=(C+1)%j.length;continue}if(B===y){_+=j[j.length-1]+" ";continue}}_+=j[0]+" "}switch(_=_.substr(_.length-1)==" "?_.substr(0,_.length-1):_,d=py(_,t,a).width,t.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;case"left":default:u=2}e+=Hn(u)+" "+Hn(p)+` Td
`,e+="("+m0(_)+`) Tj
`,e+=-Hn(u)+` 0 Td
`,p=-(a+2),d=0,y=F?x:x+1,k++,S=""}break}return r.text=e,r.fontSize=a,r},py=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:s}},Wne={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Yne=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},Xne=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,s=t[n];e.internal.newObjectDeferredBegin(s.objId,!0),es(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[r]}},Jne=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Wc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Wne)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");S4=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Qj,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var a=r[s];a.objId=void 0,a.hasAnnotation&&Yne(a,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,s){var a=!r;for(var i in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(i)){var o=r[i],l=[],u=o.Rect;if(o.Rect&&(o.Rect=Kne(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=cn.createDefaultAppearanceStream(o),es(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=$ne(o);l.push({key:"AP",value:"<</N "+d+">>"}),s.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var h="";for(var m in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(m)){var p=o.appearanceStreamContent[m];if(h+="/"+m+" ",h+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var i in p)if(p.hasOwnProperty(i)){var y=p[i];typeof y=="function"&&(y=y.call(s,o)),h+="/"+i+" "+y+" ",s.internal.acroformPlugin.xForms.indexOf(y)>=0||s.internal.acroformPlugin.xForms.push(y)}}else typeof(y=p)=="function"&&(y=y.call(s,o)),h+="/"+i+" "+y,s.internal.acroformPlugin.xForms.indexOf(y)>=0||s.internal.acroformPlugin.xForms.push(y);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:o.objId}),s.internal.out("endobj")}a&&Xne(s.internal.acroformPlugin.xForms,s)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},Oj=Ws.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(i){return i};if(Array.isArray(t)){for(var s="[",a=0;a<t.length;a++)switch(a!==0&&(s+=" "),es(t[a])){case"boolean":case"number":case"object":s+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),s+="("+m0(r(t[a].toString()))+")"):s+=t[a].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},M_=function(t,e,n){var r=function(s){return s};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+m0(r(t))+")"},ju=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ju.prototype.toString=function(){return this.objId+" 0 R"},ju.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ju.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],s=this[r];s&&(Array.isArray(s)?t.push({key:r,value:Oj(s,this.objId,this.scope)}):s instanceof ju?(s.scope=this.scope,t.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:r,value:s}))}return t};var jj=function(){ju.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};qo(jj,ju);var Qj=function(){ju.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+m0(n(t))+")"}},set:function(n){t=n}})};qo(Qj,ju);var Wc=function t(){ju.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute F supplied.');e=S}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!fa(e,3)},set:function(S){S?this.F=ha(e,3):this.F=ma(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute Ff supplied.');n=S}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(S){r=S!==void 0?S:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(S){r[0]=S}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(S){r[1]=S}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(S){r[2]=S}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(S){r[3]=S}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(S){switch(S){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=S;break;default:throw new Error('Invalid value "'+S+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Iw)return;a="FieldObject"+t.FieldNum++}var S=function(k){return k};return this.scope&&(S=this.scope.internal.getEncryptor(this.objId)),"("+m0(S(a))+")"},set:function(S){a=S.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(S){a=S}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(S){i=S}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(S){o=S}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(S){l=S}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/S4:u},set:function(S){u=S}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(S){d=S}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof Iw||this instanceof Oh))return M_(h,this.objId,this.scope)},set:function(S){S=S.toString(),h=S}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof ii?m:M_(m,this.objId,this.scope)},set:function(S){S=S.toString(),m=this instanceof ii?S:S.substr(0,1)==="("?em(S.substr(1,S.length-2)):em(S)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ii?em(m.substr(1,m.length-1)):m},set:function(S){S=S.toString(),m=this instanceof ii?"/"+S:S}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(S){this.V=S}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof ii?p:M_(p,this.objId,this.scope)},set:function(S){S=S.toString(),p=this instanceof ii?S:S.substr(0,1)==="("?em(S.substr(1,S.length-2)):em(S)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ii?em(p.substr(1,p.length-1)):p},set:function(S){S=S.toString(),p=this instanceof ii?"/"+S:S}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(S){S=!!S,x=S}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(S){y=S}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,1)},set:function(S){S?this.Ff=ha(this.Ff,1):this.Ff=ma(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,2)},set:function(S){S?this.Ff=ha(this.Ff,2):this.Ff=ma(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,3)},set:function(S){S?this.Ff=ha(this.Ff,3):this.Ff=ma(this.Ff,3)}});var C=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(C!==null)return C},set:function(S){if([0,1,2].indexOf(S)===-1)throw new Error('Invalid value "'+S+'" for attribute Q supplied.');C=S}}),Object.defineProperty(this,"textAlign",{get:function(){var S;switch(C){case 0:default:S="left";break;case 1:S="center";break;case 2:S="right"}return S},configurable:!0,enumerable:!0,set:function(S){switch(S){case"right":case 2:C=2;break;case"center":case 1:C=1;break;case"left":case 0:default:C=0}}})};qo(Wc,ju);var Vm=function(){Wc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Oj(e,this.objId,this.scope)},set:function(n){var r,s;s=[],typeof(r=n)=="string"&&(s=function(a,i,o){o||(o=1);for(var l,u=[];l=i.exec(a);)u.push(l[o]);return u}(r,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,18)},set:function(n){n?this.Ff=ha(this.Ff,18):this.Ff=ma(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=ha(this.Ff,19):this.Ff=ma(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,20)},set:function(n){n?(this.Ff=ha(this.Ff,20),e.sort()):this.Ff=ma(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,22)},set:function(n){n?this.Ff=ha(this.Ff,22):this.Ff=ma(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,23)},set:function(n){n?this.Ff=ha(this.Ff,23):this.Ff=ma(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,27)},set:function(n){n?this.Ff=ha(this.Ff,27):this.Ff=ma(this.Ff,27)}}),this.hasAppearanceStream=!1};qo(Vm,Wc);var zm=function(){Vm.call(this),this.fontName="helvetica",this.combo=!1};qo(zm,Vm);var Gm=function(){zm.call(this),this.combo=!0};qo(Gm,zm);var F2=function(){Gm.call(this),this.edit=!0};qo(F2,Gm);var ii=function(){Wc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,15)},set:function(n){n?this.Ff=ha(this.Ff,15):this.Ff=ma(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,16)},set:function(n){n?this.Ff=ha(this.Ff,16):this.Ff=ma(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,17)},set:function(n){n?this.Ff=ha(this.Ff,17):this.Ff=ma(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,26)},set:function(n){n?this.Ff=ha(this.Ff,26):this.Ff=ma(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,s=[];for(r in s.push("<<"),e)s.push("/"+r+" ("+m0(n(e[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(n){es(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};qo(ii,Wc);var D2=function(){ii.call(this),this.pushButton=!0};qo(D2,ii);var qm=function(){ii.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};qo(qm,ii);var Iw=function(){var t,e;Wc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var a,i=[];for(a in i.push("<<"),r)i.push("/"+a+" ("+m0(s(r[a]))+")");return i.push(">>"),i.join(`
`)},set:function(s){es(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(s){n="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=cn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};qo(Iw,Wc),qm.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},qm.prototype.createOption=function(t){var e=new Iw;return e.Parent=this,e.optionName=t,this.Kids.push(e),Zne.call(this.scope,e),e};var R2=function(){ii.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=cn.CheckBox.createAppearanceStream()};qo(R2,ii);var Oh=function(){Wc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,13)},set:function(e){e?this.Ff=ha(this.Ff,13):this.Ff=ma(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,21)},set:function(e){e?this.Ff=ha(this.Ff,21):this.Ff=ma(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,23)},set:function(e){e?this.Ff=ha(this.Ff,23):this.Ff=ma(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,24)},set:function(e){e?this.Ff=ha(this.Ff,24):this.Ff=ma(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,25)},set:function(e){e?this.Ff=ha(this.Ff,25):this.Ff=ma(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,26)},set:function(e){e?this.Ff=ha(this.Ff,26):this.Ff=ma(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};qo(Oh,Wc);var L2=function(){Oh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,14)},set:function(t){t?this.Ff=ha(this.Ff,14):this.Ff=ma(this.Ff,14)}}),this.password=!0};qo(L2,Oh);var cn={CheckBox:{createAppearanceStream:function(){return{N:{On:cn.CheckBox.YesNormal},D:{On:cn.CheckBox.YesPushDown,Off:cn.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Fu(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),a=j5(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Hn(cn.internal.getWidth(t))+" "+Hn(cn.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Hn(a.fontSize)+" Tf "+s),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Fu(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),s=[],a=cn.internal.getHeight(t),i=cn.internal.getWidth(t),o=j5(t,t.caption);return s.push("1 g"),s.push("0 0 "+Hn(i)+" "+Hn(a)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Hn(i-1)+" "+Hn(a-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+n+" "+Hn(o.fontSize)+" Tf "+r),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=Fu(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Hn(cn.internal.getWidth(t))+" "+Hn(cn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:cn.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=cn.RadioButton.Circle.YesNormal,e.D[t]=cn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Fu(t);e.scope=t.scope;var n=[],r=cn.internal.getWidth(t)<=cn.internal.getHeight(t)?cn.internal.getWidth(t)/4:cn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=cn.internal.Bezier_C,a=Number((r*s).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+$d(cn.internal.getWidth(t)/2)+" "+$d(cn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Fu(t);e.scope=t.scope;var n=[],r=cn.internal.getWidth(t)<=cn.internal.getHeight(t)?cn.internal.getWidth(t)/4:cn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),a=Number((s*cn.internal.Bezier_C).toFixed(5)),i=Number((r*cn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+$d(cn.internal.getWidth(t)/2)+" "+$d(cn.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),n.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),n.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),n.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+$d(cn.internal.getWidth(t)/2)+" "+$d(cn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Fu(t);e.scope=t.scope;var n=[],r=cn.internal.getWidth(t)<=cn.internal.getHeight(t)?cn.internal.getWidth(t)/4:cn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),a=Number((s*cn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+$d(cn.internal.getWidth(t)/2)+" "+$d(cn.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),n.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),n.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),n.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:cn.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=cn.RadioButton.Cross.YesNormal,e.D[t]=cn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Fu(t);e.scope=t.scope;var n=[],r=cn.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Hn(cn.internal.getWidth(t)-2)+" "+Hn(cn.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Hn(r.x1.x)+" "+Hn(r.x1.y)+" m"),n.push(Hn(r.x2.x)+" "+Hn(r.x2.y)+" l"),n.push(Hn(r.x4.x)+" "+Hn(r.x4.y)+" m"),n.push(Hn(r.x3.x)+" "+Hn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Fu(t);e.scope=t.scope;var n=cn.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Hn(cn.internal.getWidth(t))+" "+Hn(cn.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Hn(cn.internal.getWidth(t)-2)+" "+Hn(cn.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Hn(n.x1.x)+" "+Hn(n.x1.y)+" m"),r.push(Hn(n.x2.x)+" "+Hn(n.x2.y)+" l"),r.push(Hn(n.x4.x)+" "+Hn(n.x4.y)+" m"),r.push(Hn(n.x3.x)+" "+Hn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Fu(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Hn(cn.internal.getWidth(t))+" "+Hn(cn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};cn.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=cn.internal.getWidth(t),n=cn.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},cn.internal.getWidth=function(t){var e=0;return es(t)==="object"&&(e=P6(t.Rect[2])),e},cn.internal.getHeight=function(t){var e=0;return es(t)==="object"&&(e=P6(t.Rect[3])),e};var Zne=Ws.addField=function(t){if(Jne(this,t),!(t instanceof Wc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Ws.AcroFormChoiceField=Vm,Ws.AcroFormListBox=zm,Ws.AcroFormComboBox=Gm,Ws.AcroFormEditBox=F2,Ws.AcroFormButton=ii,Ws.AcroFormPushButton=D2,Ws.AcroFormRadioButton=qm,Ws.AcroFormCheckBox=R2,Ws.AcroFormTextField=Oh,Ws.AcroFormPasswordField=L2,Ws.AcroFormAppearance=cn,Ws.AcroForm={ChoiceField:Vm,ListBox:zm,ComboBox:Gm,EditBox:F2,Button:ii,PushButton:D2,RadioButton:qm,CheckBox:R2,TextField:Oh,PasswordField:L2,Appearance:cn},hn.AcroForm={ChoiceField:Vm,ListBox:zm,ComboBox:Gm,EditBox:F2,Button:ii,PushButton:D2,RadioButton:qm,CheckBox:R2,TextField:Oh,PasswordField:L2,Appearance:cn};hn.AcroForm;function Hj(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(D,L){var Q,H,te,Y,ne,V=e;if((L=L||e)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(R(D))for(ne in n)for(te=n[ne],Q=0;Q<te.length;Q+=1){for(Y=!0,H=0;H<te[Q].length;H+=1)if(te[Q][H]!==void 0&&te[Q][H]!==D[H]){Y=!1;break}if(Y===!0){V=ne;break}}else for(ne in n)for(te=n[ne],Q=0;Q<te.length;Q+=1){for(Y=!0,H=0;H<te[Q].length;H+=1)if(te[Q][H]!==void 0&&te[Q][H]!==D.charCodeAt(H)){Y=!1;break}if(Y===!0){V=ne;break}}return V===e&&L!==e&&(V=L),V},s=function D(L){for(var Q=this.internal.write,H=this.internal.putStream,te=(0,this.internal.getFilters)();te.indexOf("FlateEncode")!==-1;)te.splice(te.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var Y=[];if(Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Image"}),Y.push({key:"Width",value:L.width}),Y.push({key:"Height",value:L.height}),L.colorSpace===C.INDEXED?Y.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(Y.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===C.DEVICE_CMYK&&Y.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Y.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&Y.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)){for(var ne="",V=0,J=L.transparency.length;V<J;V++)ne+=L.transparency[V]+" "+L.transparency[V]+" ";Y.push({key:"Mask",value:"["+ne+"]"})}L.sMask!==void 0&&Y.push({key:"SMask",value:L.objectId+1+" 0 R"});var K=L.filter!==void 0?["/"+L.filter]:void 0;if(H({data:L.data,additionalKeyValues:Y,alreadyAppliedFilters:K,objectId:L.objectId}),Q("endobj"),"sMask"in L&&L.sMask!==void 0){var ie="/Predictor "+L.predictor+" /Colors 1 /BitsPerComponent "+L.bitsPerComponent+" /Columns "+L.width,O={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:L.bitsPerComponent,decodeParameters:ie,data:L.sMask};"filter"in L&&(O.filter=L.filter),D.call(this,O)}if(L.colorSpace===C.INDEXED){var W=this.internal.newObject();H({data:_(new Uint8Array(L.palette)),objectId:W}),Q("endobj")}},a=function(){var D=this.internal.collections.addImage_images;for(var L in D)s.call(this,D[L])},i=function(){var D,L=this.internal.collections.addImage_images,Q=this.internal.write;for(var H in L)Q("/I"+(D=L[H]).index,D.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",i))},l=function(){var D=this.internal.collections.addImage_images;return o.call(this),D},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(D){return typeof t["process"+D.toUpperCase()]=="function"},h=function(D){return es(D)==="object"&&D.nodeType===1},m=function(D,L){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var Q=""+D.getAttribute("src");if(Q.indexOf("data:image/")===0)return wx(unescape(Q).split("base64,").pop());var H=t.loadFile(Q,!0);if(H!==void 0)return H}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var te;switch(L){case"PNG":te="image/png";break;case"WEBP":te="image/webp";break;case"JPEG":case"JPG":default:te="image/jpeg"}return wx(D.toDataURL(te,1).split("base64,").pop())}},p=function(D){var L=this.internal.collections.addImage_images;if(L){for(var Q in L)if(D===L[Q].alias)return L[Q]}},y=function(D,L,Q){return D||L||(D=-96,L=-96),D<0&&(D=-1*Q.width*72/D/this.internal.scaleFactor),L<0&&(L=-1*Q.height*72/L/this.internal.scaleFactor),D===0&&(D=L*Q.width/Q.height),L===0&&(L=D*Q.height/Q.width),[D,L]},x=function(D,L,Q,H,te,Y){var ne=y.call(this,Q,H,te),V=this.internal.getCoordinateString,J=this.internal.getVerticalCoordinateString,K=l.call(this);if(Q=ne[0],H=ne[1],K[te.index]=te,Y){Y*=Math.PI/180;var ie=Math.cos(Y),O=Math.sin(Y),W=function(re){return re.toFixed(4)},Z=[W(ie),W(O),W(-1*O),W(ie),0,0,"cm"]}this.internal.write("q"),Y?(this.internal.write([1,"0","0",1,V(D),J(L+H),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([V(Q),"0","0",V(H),"0","0","cm"].join(" "))):this.internal.write([V(Q),"0","0",V(H),V(D),J(L+H),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+te.index+" Do"),this.internal.write("Q")},C=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var S=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=t.__addimage__.sHashCode=function(D){var L,Q,H=0;if(typeof D=="string")for(Q=D.length,L=0;L<Q;L++)H=(H<<5)-H+D.charCodeAt(L),H|=0;else if(R(D))for(Q=D.byteLength/2,L=0;L<Q;L++)H=(H<<5)-H+D[L],H|=0;return H},I=t.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var L=!0;return D.length===0&&(L=!1),D.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(L=!1),L},F=t.__addimage__.extractImageFromDataUrl=function(D){var L=(D=D||"").split("base64,"),Q=null;if(L.length===2){var H=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(L[0]);Array.isArray(H)&&(Q={mimeType:H[1],charset:H[2],data:L[1]})}return Q},U=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(D){return U()&&D instanceof ArrayBuffer};var R=t.__addimage__.isArrayBufferView=function(D){return U()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},E=t.__addimage__.binaryStringToUint8Array=function(D){for(var L=D.length,Q=new Uint8Array(L),H=0;H<L;H++)Q[H]=D.charCodeAt(H);return Q},_=t.__addimage__.arrayBufferToBinaryString=function(D){for(var L="",Q=R(D)?D:new Uint8Array(D),H=0;H<Q.length;H+=8192)L+=String.fromCharCode.apply(null,Q.subarray(H,H+8192));return L};t.addImage=function(){var D,L,Q,H,te,Y,ne,V,J;if(typeof arguments[1]=="number"?(L=e,Q=arguments[1],H=arguments[2],te=arguments[3],Y=arguments[4],ne=arguments[5],V=arguments[6],J=arguments[7]):(L=arguments[1],Q=arguments[2],H=arguments[3],te=arguments[4],Y=arguments[5],ne=arguments[6],V=arguments[7],J=arguments[8]),es(D=arguments[0])==="object"&&!h(D)&&"imageData"in D){var K=D;D=K.imageData,L=K.format||L||e,Q=K.x||Q||0,H=K.y||H||0,te=K.w||K.width||te,Y=K.h||K.height||Y,ne=K.alias||ne,V=K.compression||V,J=K.rotation||K.angle||J}var ie=this.internal.getFilters();if(V===void 0&&ie.indexOf("FlateEncode")!==-1&&(V="SLOW"),isNaN(Q)||isNaN(H))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var O=B.call(this,D,L,ne,V);return x.call(this,Q,H,te,Y,O,J),this};var B=function(D,L,Q,H){var te,Y,ne;if(typeof D=="string"&&r(D)===e){D=unescape(D);var V=j(D,!1);(V!==""||(V=t.loadFile(D,!0))!==void 0)&&(D=V)}if(h(D)&&(D=m(D,L)),L=r(D,L),!d(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((ne=Q)==null||ne.length===0)&&(Q=function(J){return typeof J=="string"||R(J)?k(J):R(J.data)?k(J.data):null}(D)),(te=p.call(this,Q))||(U()&&(D instanceof Uint8Array||L==="RGBA"||(Y=D,D=E(D))),te=this["process"+L.toUpperCase()](D,u.call(this),Q,function(J){return J&&typeof J=="string"&&(J=J.toUpperCase()),J in t.image_compression?J:S.NONE}(H),Y)),!te)throw new Error("An unknown error occurred whilst processing the image.");return te},j=t.__addimage__.convertBase64ToBinaryString=function(D,L){var Q;L=typeof L!="boolean"||L;var H,te="";if(typeof D=="string"){H=(Q=F(D))!==null?Q.data:D;try{te=wx(H)}catch(Y){if(L)throw I(H)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Y.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return te};t.getImageProperties=function(D){var L,Q,H="";if(h(D)&&(D=m(D)),typeof D=="string"&&r(D)===e&&((H=j(D,!1))===""&&(H=t.loadFile(D)||""),D=H),Q=r(D),!d(Q))throw new Error("addImage does not support files of type '"+Q+"', please ensure that a plugin for '"+Q+"' support is added.");if(!U()||D instanceof Uint8Array||(D=E(D)),!(L=this["process"+Q.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=Q,L}})(hn.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};hn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,s,a,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,d=!1,h=0;h<u.length&&!d;h++)switch((r=u[h]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){r=u[m];var p=this.internal.pdfEscape,y=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),C=this.internal.newAdditionalObject(),S=this.internal.getEncryptor(x.objId),k=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(s="/Rect ["+i(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+p(S(r.contents))+")",a+=" /Popup "+C.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+p(S(k))+") >>",x.content=a;var I=x.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+i(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+I,r.open&&(a+=" /Open true"),a+=" >>",C.content=a,this.internal.write(x.objId,"0 R",C.objId,"0 R");break;case"freetext":s="/Rect ["+i(r.bounds.x)+" "+o(r.bounds.y)+" "+i(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var F=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+p(y(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+F+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var U=this.annotations._nameMap[r.options.name];r.options.pageNumber=U.page,r.options.top=U.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+p(y(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var R=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+R+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,s,a,i){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(n),y:u(r),w:l(n+s),h:u(r+a)},options:i,type:"link"})},t.textWithLink=function(n,r,s,a){var i,o,l=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){o=a.maxWidth;var d=this.splitTextToSize(n,o).length;i=Math.ceil(u*d)}else o=l,i=u;return this.text(n,r,s,a),s+=.2*u,a.align==="center"&&(r-=l/2),a.align==="right"&&(r-=l),this.link(r,s-u,o,i,a),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(hn.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(x){return e[x.charCodeAt(0)]!==void 0},i=t.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},o=t.__arabicParser__.isArabicEndLetter=function(x){return i(x)&&a(x)&&e[x.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(x){return i(x)&&s.indexOf(x.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return i(x)&&a(x)&&e[x.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(x){return i(x)&&a(x)&&e[x.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(x){return i(x)&&a(x)&&e[x.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(x){return i(x)&&a(x)&&e[x.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(x){var C=0,S=n,k="",I=0;for(C=0;C<x.length;C+=1)S[x.charCodeAt(C)]!==void 0?(I++,typeof(S=S[x.charCodeAt(C)])=="number"&&(k+=String.fromCharCode(S),S=n,I=0),C===x.length-1&&(S=n,k+=x.charAt(C-(I-1)),C-=I-1,I=0)):(S=n,k+=x.charAt(C-I),C-=I,I=0);return k};t.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&r[x.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(x,C,S){return i(x)?a(x)===!1?-1:!u(x)||!i(C)&&!i(S)||!i(S)&&o(C)||o(x)&&!i(C)||o(x)&&l(C)||o(x)&&o(C)?0:d(x)&&i(C)&&!o(C)&&i(S)&&u(S)?3:o(x)||!i(S)?1:2:-1},p=function(x){var C=0,S=0,k=0,I="",F="",U="",R=(x=x||"").split("\\s+"),E=[];for(C=0;C<R.length;C+=1){for(E.push(""),S=0;S<R[C].length;S+=1)I=R[C][S],F=R[C][S-1],U=R[C][S+1],i(I)?(k=m(I,F,U),E[C]+=k!==-1?String.fromCharCode(e[I.charCodeAt(0)][k]):I):E[C]+=I;E[C]=h(E[C])}return E.join(" ")},y=t.__arabicParser__.processArabic=t.processArabic=function(){var x,C=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,S=[];if(Array.isArray(C)){var k=0;for(S=[],k=0;k<C.length;k+=1)Array.isArray(C[k])?S.push([p(C[k][0]),C[k][1],C[k][2]]):S.push([p(C[k])]);x=S}else x=p(C);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};t.events.push(["preProcessText",y])}(hn.API),hn.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(o){n=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(o){a=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var s;if((n=n||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(hn.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(x){l=x}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(x){y=x}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){r.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),h=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,p=0,y=0,x=0,C=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var S=u.maxWidth;S>0?typeof l=="string"?l=this.splitTextToSize(l,S):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(I,F){return I.concat(C.splitTextToSize(F,S))},[])):l=Array.isArray(l)?l:[l];for(var k=0;k<l.length;k++)p<(x=this.getStringUnitWidth(l[k],{font:h})*d)&&(p=x);return p!==0&&(y=l.length),{w:p/=m,h:Math.max((y*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=t.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,p&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,d,h,m){if(r.call(this),!d)throw new Error("No data for PDF table.");var p,y,x,C,S=[],k=[],I=[],F={},U={},R=[],E=[],_=(m=m||{}).autoSize||!1,B=m.printHeaders!==!1,j=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,D=m.margins||Object.assign({width:this.getPageWidth()},e),L=typeof m.padding=="number"?m.padding:3,Q=m.headerBackgroundColor||"#c8c8c8",H=m.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=j,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=Q,this.internal.__cell__.headerTextColor=H,this.setFontSize(j),h==null)k=S=Object.keys(d[0]),I=S.map(function(){return"left"});else if(Array.isArray(h)&&es(h[0])==="object")for(S=h.map(function(K){return K.name}),k=h.map(function(K){return K.prompt||K.name||""}),I=h.map(function(K){return K.align||"left"}),p=0;p<h.length;p+=1)U[h[p].name]=h[p].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(k=S=h,I=S.map(function(){return"left"}));if(_||Array.isArray(h)&&typeof h[0]=="string")for(p=0;p<S.length;p+=1){for(F[C=S[p]]=d.map(function(K){return K[C]}),this.setFont(void 0,"bold"),R.push(this.getTextDimensions(k[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=F[C],this.setFont(void 0,"normal"),x=0;x<y.length;x+=1)R.push(this.getTextDimensions(y[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);U[C]=Math.max.apply(null,R)+L+L,R=[]}if(B){var te={};for(p=0;p<S.length;p+=1)te[S[p]]={},te[S[p]].text=k[p],te[S[p]].align=I[p];var Y=o.call(this,te,U);E=S.map(function(K){return new a(l,u,U[K],Y,te[K].text,void 0,te[K].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var ne=h.reduce(function(K,ie){return K[ie.name]=ie.align,K},{});for(p=0;p<d.length;p+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:p,data:d[p]},this);var V=o.call(this,d[p],U);for(x=0;x<S.length;x+=1){var J=d[p][S[x]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:p,col:x,data:J},this),i.call(this,new a(l,u,U[S[x]],V,J,p+2,ne[S[x]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var d=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(p){var y=l[p];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,u[p]-d-d)},this).map(function(p){return this.getLineHeightFactor()*p.length*h/m+d+d},this).reduce(function(p,y){return Math.max(p,y)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){d=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,m.push(d)),d.lineNumber=l;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(y)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),n=!1}}(hn.API);var Vj={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},zj=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Q5=Hj(zj),Gj=[100,200,300,400,500,600,700,800,900],ere=Hj(Gj);function H5(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(a){return Vj[a=a||"normal"]?a:"normal"}(t.style),r=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(a){return typeof Q5[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,n,r].join(" ")}}}function O6(t,e,n,r){var s;for(s=n;s>=0&&s<e.length;s+=r)if(t[e[s]])return t[e[s]];for(s=n;s>=0&&s<e.length;s-=r)if(t[e[s]])return t[e[s]]}var tre={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},j6={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Q6(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function nre(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",s=Object.assign({},tre,n.genericFontFamilies||{}),a=null,i=null,o=0;o<e.length;++o)if(s[(a=H5(e[o])).family]&&(a.family=s[a.family]),t.hasOwnProperty(a.family)){i=t[a.family];break}if(!(i=i||t[r]))throw new Error("Could not find a font-family for the rule '"+Q6(a)+"' and default family '"+r+"'.");if(i=function(l,u){if(u[l])return u[l];var d=Q5[l],h=d<=Q5.normal?-1:1,m=O6(u,zj,d,h);if(!m)throw new Error("Could not find a matching font-stretch value for "+l);return m}(a.stretch,i),i=function(l,u){if(u[l])return u[l];for(var d=Vj[l],h=0;h<d.length;++h)if(u[d[h]])return u[d[h]];throw new Error("Could not find a matching font-style for "+l)}(a.style,i),!(i=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var d=ere[l],h=O6(u,Gj,d,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(a.weight,i)))throw new Error("Failed to resolve a font for the rule '"+Q6(a)+"'.");return i}function H6(t){return t.trimLeft()}function rre(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function sre(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var gy,V6,z6,P_=["times"];(function(t){var e,n,r,s,a,i,o,l,u,d=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new l,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new i,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new i,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new d}]);var h=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=O;Object.defineProperty(this,"pdf",{get:function(){return W}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(Fe){Z=!!Fe}});var re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return re},set:function(Fe){re=!!Fe}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(Fe){isNaN(Fe)||(se=Fe)}});var de=0;Object.defineProperty(this,"posY",{get:function(){return de},set:function(Fe){isNaN(Fe)||(de=Fe)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Fe){var Ce;typeof Fe=="number"?Ce=[Fe,Fe,Fe,Fe]:((Ce=new Array(4))[0]=Fe[0],Ce[1]=Fe.length>=2?Fe[1]:Ce[0],Ce[2]=Fe.length>=3?Fe[2]:Ce[0],Ce[3]=Fe.length>=4?Fe[3]:Ce[1]),u.margin=Ce}});var pe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return pe},set:function(Fe){pe=Fe}});var be=0;Object.defineProperty(this,"lastBreak",{get:function(){return be},set:function(Fe){be=Fe}});var Se=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Se},set:function(Fe){Se=Fe}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Fe){Fe instanceof d&&(u=Fe)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Fe){u.path=Fe}});var me=[];Object.defineProperty(this,"ctxStack",{get:function(){return me},set:function(Fe){me=Fe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Fe){var Ce;Ce=m(Fe),this.ctx.fillStyle=Ce.style,this.ctx.isFillTransparent=Ce.a===0,this.ctx.fillOpacity=Ce.a,this.pdf.setFillColor(Ce.r,Ce.g,Ce.b,{a:Ce.a}),this.pdf.setTextColor(Ce.r,Ce.g,Ce.b,{a:Ce.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Fe){var Ce=m(Fe);this.ctx.strokeStyle=Ce.style,this.ctx.isStrokeTransparent=Ce.a===0,this.ctx.strokeOpacity=Ce.a,Ce.a===0?this.pdf.setDrawColor(255,255,255):(Ce.a,this.pdf.setDrawColor(Ce.r,Ce.g,Ce.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Fe){["butt","round","square"].indexOf(Fe)!==-1&&(this.ctx.lineCap=Fe,this.pdf.setLineCap(Fe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Fe){isNaN(Fe)||(this.ctx.lineWidth=Fe,this.pdf.setLineWidth(Fe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Fe){["bevel","round","miter"].indexOf(Fe)!==-1&&(this.ctx.lineJoin=Fe,this.pdf.setLineJoin(Fe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Fe){isNaN(Fe)||(this.ctx.miterLimit=Fe,this.pdf.setMiterLimit(Fe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Fe){this.ctx.textBaseline=Fe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Fe){["right","end","center","left","start"].indexOf(Fe)!==-1&&(this.ctx.textAlign=Fe)}});var ce=null;function Me(Fe,Ce){if(ce===null){var Re=function(ze){var Je=[];return Object.keys(ze).forEach(function(dt){ze[dt].forEach(function(_t){var ft=null;switch(_t){case"bold":ft={family:dt,weight:"bold"};break;case"italic":ft={family:dt,style:"italic"};break;case"bolditalic":ft={family:dt,weight:"bold",style:"italic"};break;case"":case"normal":ft={family:dt}}ft!==null&&(ft.ref={name:dt,style:_t},Je.push(ft))})}),Je}(Fe.getFontList());ce=function(ze){for(var Je={},dt=0;dt<ze.length;++dt){var _t=H5(ze[dt]),ft=_t.family,Rt=_t.stretch,Ut=_t.style,Zt=_t.weight;Je[ft]=Je[ft]||{},Je[ft][Rt]=Je[ft][Rt]||{},Je[ft][Rt][Ut]=Je[ft][Rt][Ut]||{},Je[ft][Rt][Ut][Zt]=_t}return Je}(Re.concat(Ce))}return ce}var Ze=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ze},set:function(Fe){ce=null,Ze=Fe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Fe){var Ce;if(this.ctx.font=Fe,(Ce=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Fe))!==null){var Re=Ce[1],ze=(Ce[2],Ce[3]),Je=Ce[4],dt=(Ce[5],Ce[6]),_t=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Je)[2];Je=Math.floor(_t==="px"?parseFloat(Je)*this.pdf.internal.scaleFactor:_t==="em"?parseFloat(Je)*this.pdf.getFontSize():parseFloat(Je)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Je);var ft=function(Ue){var Oe,Ie,Xe=[],mt=Ue.trim();if(mt==="")return P_;if(mt in j6)return[j6[mt]];for(;mt!=="";){switch(Ie=null,Oe=(mt=H6(mt)).charAt(0)){case'"':case"'":Ie=rre(mt.substring(1),Oe);break;default:Ie=sre(mt)}if(Ie===null||(Xe.push(Ie[0]),(mt=H6(Ie[1]))!==""&&mt.charAt(0)!==","))return P_;mt=mt.replace(/^,/,"")}return Xe}(dt);if(this.fontFaces){var Rt=nre(Me(this.pdf,this.fontFaces),ft.map(function(Ue){return{family:Ue,stretch:"normal",weight:ze,style:Re}}));this.pdf.setFont(Rt.ref.name,Rt.ref.style)}else{var Ut="";(ze==="bold"||parseInt(ze,10)>=700||Re==="bold")&&(Ut="bold"),Re==="italic"&&(Ut+="italic"),Ut.length===0&&(Ut="normal");for(var Zt="",Mt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},jt=0;jt<ft.length;jt++){if(this.pdf.internal.getFont(ft[jt],Ut,{noFallback:!0,disableWarning:!0})!==void 0){Zt=ft[jt];break}if(Ut==="bolditalic"&&this.pdf.internal.getFont(ft[jt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Zt=ft[jt],Ut="bold";else if(this.pdf.internal.getFont(ft[jt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Zt=ft[jt],Ut="normal";break}}if(Zt===""){for(var Wt=0;Wt<ft.length;Wt++)if(Mt[ft[Wt]]){Zt=Mt[ft[Wt]];break}}Zt=Zt===""?"Times":Zt,this.pdf.setFont(Zt,Ut)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Fe){this.ctx.globalCompositeOperation=Fe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Fe){this.ctx.globalAlpha=Fe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Fe){this.ctx.lineDashOffset=Fe,ie.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Fe){this.ctx.lineDash=Fe,ie.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Fe){this.ctx.ignoreClearRect=!!Fe}})};h.prototype.setLineDash=function(O){this.lineDash=O},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){F.call(this,"fill",!1)},h.prototype.stroke=function(){F.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(O,W){if(isNaN(O)||isNaN(W))throw ds.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new i(O,W));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new i(O,W)},h.prototype.closePath=function(){var O=new i(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&es(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){O=new i(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(O.x,O.y)},h.prototype.lineTo=function(O,W){if(isNaN(O)||isNaN(W))throw ds.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new i(O,W));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new i(Z.x,Z.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),F.call(this,null,!0)},h.prototype.quadraticCurveTo=function(O,W,Z,re){if(isNaN(Z)||isNaN(re)||isNaN(O)||isNaN(W))throw ds.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new i(Z,re)),de=this.ctx.transform.applyToPoint(new i(O,W));this.path.push({type:"qct",x1:de.x,y1:de.y,x:se.x,y:se.y}),this.ctx.lastPoint=new i(se.x,se.y)},h.prototype.bezierCurveTo=function(O,W,Z,re,se,de){if(isNaN(se)||isNaN(de)||isNaN(O)||isNaN(W)||isNaN(Z)||isNaN(re))throw ds.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var pe=this.ctx.transform.applyToPoint(new i(se,de)),be=this.ctx.transform.applyToPoint(new i(O,W)),Se=this.ctx.transform.applyToPoint(new i(Z,re));this.path.push({type:"bct",x1:be.x,y1:be.y,x2:Se.x,y2:Se.y,x:pe.x,y:pe.y}),this.ctx.lastPoint=new i(pe.x,pe.y)},h.prototype.arc=function(O,W,Z,re,se,de){if(isNaN(O)||isNaN(W)||isNaN(Z)||isNaN(re)||isNaN(se))throw ds.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(de=!!de,!this.ctx.transform.isIdentity){var pe=this.ctx.transform.applyToPoint(new i(O,W));O=pe.x,W=pe.y;var be=this.ctx.transform.applyToPoint(new i(0,Z)),Se=this.ctx.transform.applyToPoint(new i(0,0));Z=Math.sqrt(Math.pow(be.x-Se.x,2)+Math.pow(be.y-Se.y,2))}Math.abs(se-re)>=2*Math.PI&&(re=0,se=2*Math.PI),this.path.push({type:"arc",x:O,y:W,radius:Z,startAngle:re,endAngle:se,counterclockwise:de})},h.prototype.arcTo=function(O,W,Z,re,se){throw new Error("arcTo not implemented.")},h.prototype.rect=function(O,W,Z,re){if(isNaN(O)||isNaN(W)||isNaN(Z)||isNaN(re))throw ds.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,W),this.lineTo(O+Z,W),this.lineTo(O+Z,W+re),this.lineTo(O,W+re),this.lineTo(O,W),this.lineTo(O+Z,W),this.lineTo(O,W)},h.prototype.fillRect=function(O,W,Z,re){if(isNaN(O)||isNaN(W)||isNaN(Z)||isNaN(re))throw ds.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,W,Z,re),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},h.prototype.strokeRect=function(O,W,Z,re){if(isNaN(O)||isNaN(W)||isNaN(Z)||isNaN(re))throw ds.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(O,W,Z,re),this.stroke())},h.prototype.clearRect=function(O,W,Z,re){if(isNaN(O)||isNaN(W)||isNaN(Z)||isNaN(re))throw ds.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,W,Z,re))},h.prototype.save=function(O){O=typeof O!="boolean"||O;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var re=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=re}},h.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(W),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(O){var W,Z,re,se;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))W=0,Z=0,re=0,se=0;else{var de=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(de!==null)W=parseInt(de[1]),Z=parseInt(de[2]),re=parseInt(de[3]),se=1;else if((de=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)W=parseInt(de[1]),Z=parseInt(de[2]),re=parseInt(de[3]),se=parseFloat(de[4]);else{if(se=1,typeof O=="string"&&O.charAt(0)!=="#"){var pe=new Uj(O);O=pe.ok?pe.toHex():"#000000"}O.length===4?(W=O.substring(1,2),W+=W,Z=O.substring(2,3),Z+=Z,re=O.substring(3,4),re+=re):(W=O.substring(1,3),Z=O.substring(3,5),re=O.substring(5,7)),W=parseInt(W,16),Z=parseInt(Z,16),re=parseInt(re,16)}}return{r:W,g:Z,b:re,a:se,style:O}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(O,W,Z,re){if(isNaN(W)||isNaN(Z)||typeof O!="string")throw ds.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(re=isNaN(re)?void 0:re,!p.call(this)){var se=V(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;L.call(this,{text:O,x:W,y:Z,scale:de,angle:se,align:this.textAlign,maxWidth:re})}},h.prototype.strokeText=function(O,W,Z,re){if(isNaN(W)||isNaN(Z)||typeof O!="string")throw ds.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){re=isNaN(re)?void 0:re;var se=V(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;L.call(this,{text:O,x:W,y:Z,scale:de,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:re})}},h.prototype.measureText=function(O){if(typeof O!="string")throw ds.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,Z=this.pdf.internal.scaleFactor,re=W.internal.getFontSize(),se=W.getStringUnitWidth(O)*re/W.internal.scaleFactor,de=function(pe){var be=(pe=pe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return be}}),this};return new de({width:se*=Math.round(96*Z/72*1e4)/1e4})},h.prototype.scale=function(O,W){if(isNaN(O)||isNaN(W))throw ds.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new l(O,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},h.prototype.rotate=function(O){if(isNaN(O))throw ds.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new l(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},h.prototype.translate=function(O,W){if(isNaN(O)||isNaN(W))throw ds.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new l(1,0,0,1,O,W);this.ctx.transform=this.ctx.transform.multiply(Z)},h.prototype.transform=function(O,W,Z,re,se,de){if(isNaN(O)||isNaN(W)||isNaN(Z)||isNaN(re)||isNaN(se)||isNaN(de))throw ds.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var pe=new l(O,W,Z,re,se,de);this.ctx.transform=this.ctx.transform.multiply(pe)},h.prototype.setTransform=function(O,W,Z,re,se,de){O=isNaN(O)?1:O,W=isNaN(W)?0:W,Z=isNaN(Z)?0:Z,re=isNaN(re)?1:re,se=isNaN(se)?0:se,de=isNaN(de)?0:de,this.ctx.transform=new l(O,W,Z,re,se,de)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(O,W,Z,re,se,de,pe,be,Se){var me=this.pdf.getImageProperties(O),ce=1,Me=1,Ze=1,Fe=1;re!==void 0&&be!==void 0&&(Ze=be/re,Fe=Se/se,ce=me.width/re*be/re,Me=me.height/se*Se/se),de===void 0&&(de=W,pe=Z,W=0,Z=0),re!==void 0&&be===void 0&&(be=re,Se=se),re===void 0&&be===void 0&&(be=me.width,Se=me.height);for(var Ce,Re=this.ctx.transform.decompose(),ze=V(Re.rotate.shx),Je=new l,dt=(Je=(Je=(Je=Je.multiply(Re.translate)).multiply(Re.skew)).multiply(Re.scale)).applyToRectangle(new o(de-W*Ze,pe-Z*Fe,re*ce,se*Me)),_t=C.call(this,dt),ft=[],Rt=0;Rt<_t.length;Rt+=1)ft.indexOf(_t[Rt])===-1&&ft.push(_t[Rt]);if(I(ft),this.autoPaging)for(var Ut=ft[0],Zt=ft[ft.length-1],Mt=Ut;Mt<Zt+1;Mt++){this.pdf.setPage(Mt);var jt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Wt=Mt===1?this.posY+this.margin[0]:this.margin[0],Ue=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Oe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ie=Mt===1?0:Ue+(Mt-2)*Oe;if(this.ctx.clip_path.length!==0){var Xe=this.path;Ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Ce,this.posX+this.margin[3],-Ie+Wt+this.ctx.prevPageLastElemOffset),U.call(this,"fill",!0),this.path=Xe}var mt=JSON.parse(JSON.stringify(dt));mt=k([mt],this.posX+this.margin[3],-Ie+Wt+this.ctx.prevPageLastElemOffset)[0];var Yt=(Mt>Ut||Mt<Zt)&&x.call(this);Yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],jt,Oe,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",mt.x,mt.y,mt.w,mt.h,null,null,ze),Yt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(O,"JPEG",dt.x,dt.y,dt.w,dt.h,null,null,ze)};var C=function(O,W,Z){var re=[];W=W||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":re.push(Math.floor((O.y+se)/Z)+1);break;case"arc":re.push(Math.floor((O.y+se-O.radius)/Z)+1),re.push(Math.floor((O.y+se+O.radius)/Z)+1);break;case"qct":var de=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);re.push(Math.floor((de.y+se)/Z)+1),re.push(Math.floor((de.y+de.h+se)/Z)+1);break;case"bct":var pe=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);re.push(Math.floor((pe.y+se)/Z)+1),re.push(Math.floor((pe.y+pe.h+se)/Z)+1);break;case"rect":re.push(Math.floor((O.y+se)/Z)+1),re.push(Math.floor((O.y+O.h+se)/Z)+1)}for(var be=0;be<re.length;be+=1)for(;this.pdf.internal.getNumberOfPages()<re[be];)S.call(this);return re},S=function(){var O=this.fillStyle,W=this.strokeStyle,Z=this.font,re=this.lineCap,se=this.lineWidth,de=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=W,this.font=Z,this.lineCap=re,this.lineWidth=se,this.lineJoin=de},k=function(O,W,Z){for(var re=0;re<O.length;re++)switch(O[re].type){case"bct":O[re].x2+=W,O[re].y2+=Z;case"qct":O[re].x1+=W,O[re].y1+=Z;case"mt":case"lt":case"arc":default:O[re].x+=W,O[re].y+=Z}return O},I=function(O){return O.sort(function(W,Z){return W-Z})},F=function(O,W){for(var Z,re,se=this.fillStyle,de=this.strokeStyle,pe=this.lineCap,be=this.lineWidth,Se=Math.abs(be*this.ctx.transform.scaleX),me=this.lineJoin,ce=JSON.parse(JSON.stringify(this.path)),Me=JSON.parse(JSON.stringify(this.path)),Ze=[],Fe=0;Fe<Me.length;Fe++)if(Me[Fe].x!==void 0)for(var Ce=C.call(this,Me[Fe]),Re=0;Re<Ce.length;Re+=1)Ze.indexOf(Ce[Re])===-1&&Ze.push(Ce[Re]);for(var ze=0;ze<Ze.length;ze++)for(;this.pdf.internal.getNumberOfPages()<Ze[ze];)S.call(this);if(I(Ze),this.autoPaging)for(var Je=Ze[0],dt=Ze[Ze.length-1],_t=Je;_t<dt+1;_t++){this.pdf.setPage(_t),this.fillStyle=se,this.strokeStyle=de,this.lineCap=pe,this.lineWidth=Se,this.lineJoin=me;var ft=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Rt=_t===1?this.posY+this.margin[0]:this.margin[0],Ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Zt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Mt=_t===1?0:Ut+(_t-2)*Zt;if(this.ctx.clip_path.length!==0){var jt=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Z,this.posX+this.margin[3],-Mt+Rt+this.ctx.prevPageLastElemOffset),U.call(this,O,!0),this.path=jt}if(re=JSON.parse(JSON.stringify(ce)),this.path=k(re,this.posX+this.margin[3],-Mt+Rt+this.ctx.prevPageLastElemOffset),W===!1||_t===0){var Wt=(_t>Je||_t<dt)&&x.call(this);Wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ft,Zt,null).clip().discardPath()),U.call(this,O,W),Wt&&this.pdf.restoreGraphicsState()}this.lineWidth=be}else this.lineWidth=Se,U.call(this,O,W),this.lineWidth=be;this.path=ce},U=function(O,W){if((O!=="stroke"||W||!y.call(this))&&(O==="stroke"||W||!p.call(this))){for(var Z,re,se=[],de=this.path,pe=0;pe<de.length;pe++){var be=de[pe];switch(be.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:be,deltas:[],abs:[]});break;case"lt":var Se=se.length;if(de[pe-1]&&!isNaN(de[pe-1].x)&&(Z=[be.x-de[pe-1].x,be.y-de[pe-1].y],Se>0)){for(;Se>=0;Se--)if(se[Se-1].close!==!0&&se[Se-1].begin!==!0){se[Se-1].deltas.push(Z),se[Se-1].abs.push(be);break}}break;case"bct":Z=[be.x1-de[pe-1].x,be.y1-de[pe-1].y,be.x2-de[pe-1].x,be.y2-de[pe-1].y,be.x-de[pe-1].x,be.y-de[pe-1].y],se[se.length-1].deltas.push(Z);break;case"qct":var me=de[pe-1].x+2/3*(be.x1-de[pe-1].x),ce=de[pe-1].y+2/3*(be.y1-de[pe-1].y),Me=be.x+2/3*(be.x1-be.x),Ze=be.y+2/3*(be.y1-be.y),Fe=be.x,Ce=be.y;Z=[me-de[pe-1].x,ce-de[pe-1].y,Me-de[pe-1].x,Ze-de[pe-1].y,Fe-de[pe-1].x,Ce-de[pe-1].y],se[se.length-1].deltas.push(Z);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(be)}}re=W?null:O==="stroke"?"stroke":"fill";for(var Re=!1,ze=0;ze<se.length;ze++)if(se[ze].arc)for(var Je=se[ze].abs,dt=0;dt<Je.length;dt++){var _t=Je[dt];_t.type==="arc"?_.call(this,_t.x,_t.y,_t.radius,_t.startAngle,_t.endAngle,_t.counterclockwise,void 0,W,!Re):Q.call(this,_t.x,_t.y),Re=!0}else if(se[ze].close===!0)this.pdf.internal.out("h"),Re=!1;else if(se[ze].begin!==!0){var ft=se[ze].start.x,Rt=se[ze].start.y;H.call(this,se[ze].deltas,ft,Rt),Re=!0}re&&B.call(this,re),W&&j.call(this)}},R=function(O){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-Z;case"top":return O+W-Z;case"hanging":return O+W-2*Z;case"middle":return O+W/2-Z;case"ideographic":return O;case"alphabetic":default:return O}},E=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(W,Z){this.colorStops.push([W,Z])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var _=function(O,W,Z,re,se,de,pe,be,Se){for(var me=Y.call(this,Z,re,se,de),ce=0;ce<me.length;ce++){var Me=me[ce];ce===0&&(Se?D.call(this,Me.x1+O,Me.y1+W):Q.call(this,Me.x1+O,Me.y1+W)),te.call(this,O,W,Me.x2,Me.y2,Me.x3,Me.y3,Me.x4,Me.y4)}be?j.call(this):B.call(this,pe)},B=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},j=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(O,W){this.pdf.internal.out(n(O)+" "+r(W)+" m")},L=function(O){var W;switch(O.align){case"right":case"end":W="right";break;case"center":W="center";break;case"left":case"start":default:W="left"}var Z=this.pdf.getTextDimensions(O.text),re=R.call(this,O.y),se=E.call(this,re)-Z.h,de=this.ctx.transform.applyToPoint(new i(O.x,re)),pe=this.ctx.transform.decompose(),be=new l;be=(be=(be=be.multiply(pe.translate)).multiply(pe.skew)).multiply(pe.scale);for(var Se,me,ce,Me=this.ctx.transform.applyToRectangle(new o(O.x,re,Z.w,Z.h)),Ze=be.applyToRectangle(new o(O.x,se,Z.w,Z.h)),Fe=C.call(this,Ze),Ce=[],Re=0;Re<Fe.length;Re+=1)Ce.indexOf(Fe[Re])===-1&&Ce.push(Fe[Re]);if(I(Ce),this.autoPaging)for(var ze=Ce[0],Je=Ce[Ce.length-1],dt=ze;dt<Je+1;dt++){this.pdf.setPage(dt);var _t=dt===1?this.posY+this.margin[0]:this.margin[0],ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rt=this.pdf.internal.pageSize.height-this.margin[2],Ut=Rt-this.margin[0],Zt=this.pdf.internal.pageSize.width-this.margin[1],Mt=Zt-this.margin[3],jt=dt===1?0:ft+(dt-2)*Ut;if(this.ctx.clip_path.length!==0){var Wt=this.path;Se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Se,this.posX+this.margin[3],-1*jt+_t),U.call(this,"fill",!0),this.path=Wt}var Ue=k([JSON.parse(JSON.stringify(Ze))],this.posX+this.margin[3],-jt+_t+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(me*O.scale),ce=this.lineWidth,this.lineWidth=ce*O.scale);var Oe=this.autoPaging!=="text";if(Oe||Ue.y+Ue.h<=Rt){if(Oe||Ue.y>=_t&&Ue.x<=Zt){var Ie=Oe?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||Zt-Ue.x)[0],Xe=k([JSON.parse(JSON.stringify(Me))],this.posX+this.margin[3],-jt+_t+this.ctx.prevPageLastElemOffset)[0],mt=Oe&&(dt>ze||dt<Je)&&x.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Mt,Ut,null).clip().discardPath()),this.pdf.text(Ie,Xe.x,Xe.y,{angle:O.angle,align:W,renderingMode:O.renderingMode}),mt&&this.pdf.restoreGraphicsState()}}else Ue.y<Rt&&(this.ctx.prevPageLastElemOffset+=Rt-Ue.y);O.scale>=.01&&(this.pdf.setFontSize(me),this.lineWidth=ce)}else O.scale>=.01&&(me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(me*O.scale),ce=this.lineWidth,this.lineWidth=ce*O.scale),this.pdf.text(O.text,de.x+this.posX,de.y+this.posY,{angle:O.angle,align:W,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(me),this.lineWidth=ce)},Q=function(O,W,Z,re){Z=Z||0,re=re||0,this.pdf.internal.out(n(O+Z)+" "+r(W+re)+" l")},H=function(O,W,Z){return this.pdf.lines(O,W,Z,null,null)},te=function(O,W,Z,re,se,de,pe,be){this.pdf.internal.out([e(s(Z+O)),e(a(re+W)),e(s(se+O)),e(a(de+W)),e(s(pe+O)),e(a(be+W)),"c"].join(" "))},Y=function(O,W,Z,re){for(var se=2*Math.PI,de=Math.PI/2;W>Z;)W-=se;var pe=Math.abs(Z-W);pe<se&&re&&(pe=se-pe);for(var be=[],Se=re?-1:1,me=W;pe>1e-5;){var ce=me+Se*Math.min(pe,de);be.push(ne.call(this,O,me,ce)),pe-=Math.abs(ce-me),me=ce}return be},ne=function(O,W,Z){var re=(Z-W)/2,se=O*Math.cos(re),de=O*Math.sin(re),pe=se,be=-de,Se=pe*pe+be*be,me=Se+pe*se+be*de,ce=4/3*(Math.sqrt(2*Se*me)-me)/(pe*de-be*se),Me=pe-ce*be,Ze=be+ce*pe,Fe=Me,Ce=-Ze,Re=re+W,ze=Math.cos(Re),Je=Math.sin(Re);return{x1:O*Math.cos(W),y1:O*Math.sin(W),x2:Me*ze-Ze*Je,y2:Me*Je+Ze*ze,x3:Fe*ze-Ce*Je,y3:Fe*Je+Ce*ze,x4:O*Math.cos(Z),y4:O*Math.sin(Z)}},V=function(O){return 180*O/Math.PI},J=function(O,W,Z,re,se,de){var pe=O+.5*(Z-O),be=W+.5*(re-W),Se=se+.5*(Z-se),me=de+.5*(re-de),ce=Math.min(O,se,pe,Se),Me=Math.max(O,se,pe,Se),Ze=Math.min(W,de,be,me),Fe=Math.max(W,de,be,me);return new o(ce,Ze,Me-ce,Fe-Ze)},K=function(O,W,Z,re,se,de,pe,be){var Se,me,ce,Me,Ze,Fe,Ce,Re,ze,Je,dt,_t,ft,Rt,Ut=Z-O,Zt=re-W,Mt=se-Z,jt=de-re,Wt=pe-se,Ue=be-de;for(me=0;me<41;me++)ze=(Ce=(ce=O+(Se=me/40)*Ut)+Se*((Ze=Z+Se*Mt)-ce))+Se*(Ze+Se*(se+Se*Wt-Ze)-Ce),Je=(Re=(Me=W+Se*Zt)+Se*((Fe=re+Se*jt)-Me))+Se*(Fe+Se*(de+Se*Ue-Fe)-Re),me==0?(dt=ze,_t=Je,ft=ze,Rt=Je):(dt=Math.min(dt,ze),_t=Math.min(_t,Je),ft=Math.max(ft,ze),Rt=Math.max(Rt,Je));return new o(Math.round(dt),Math.round(_t),Math.round(ft-dt),Math.round(Rt-_t))},ie=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,W,Z=(O=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:W}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(hn.API),function(t){var e=function(a){var i,o,l,u,d,h,m,p,y,x;for(o=[],l=0,u=(a+=i="\0\0\0\0".slice(a.length%4||4)).length;u>l;l+=4)(d=(a.charCodeAt(l)<<24)+(a.charCodeAt(l+1)<<16)+(a.charCodeAt(l+2)<<8)+a.charCodeAt(l+3))!==0?(h=(d=((d=((d=((d=(d-(x=d%85))/85)-(y=d%85))/85)-(p=d%85))/85)-(m=d%85))/85)%85,o.push(h+33,m+33,p+33,y+33,x+33)):o.push(122);return function(C,S){for(var k=S;k>0;k--)C.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},n=function(a){var i,o,l,u,d,h=String,m="length",p=255,y="charCodeAt",x="slice",C="replace";for(a[x](-2),a=a[x](0,-2)[C](/\s/g,"")[C]("z","!!!!!"),l=[],u=0,d=(a+=i="uuuuu"[x](a[m]%5||5))[m];d>u;u+=5)o=52200625*(a[y](u)-33)+614125*(a[y](u+1)-33)+7225*(a[y](u+2)-33)+85*(a[y](u+3)-33)+(a[y](u+4)-33),l.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(S,k){for(var I=k;I>0;I--)S.pop()}(l,i[m]),h.fromCharCode.apply(h,l)},r=function(a){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),i.test(a)===!1)return"";for(var o="",l=0;l<a.length;l+=2)o+=String.fromCharCode("0x"+(a[l]+a[l+1]));return o},s=function(a){for(var i=new Uint8Array(a.length),o=a.length;o--;)i[o]=a.charCodeAt(o);return a=(i=U5(i)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};t.processDataByFilters=function(a,i){var o=0,l=a||"",u=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(hn.API),function(t){t.loadFile=function(e,n,r){return function(s,a,i){a=a!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(l,u,d){var h=new XMLHttpRequest,m=0,p=function(y){var x=y.length,C=[],S=String.fromCharCode;for(m=0;m<x;m+=1)C.push(S(255&y.charCodeAt(m)));return C.join("")};if(h.open("GET",l,!u),h.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(h.onload=function(){h.status===200?d(p(this.responseText)):d(void 0)}),h.send(null),u&&h.status===200)return p(h.responseText)}(s,a,i)}catch{}return o}(e,n,r)},t.loadImageFile=t.loadFile}(hn.API),function(t){function e(){return(Fn.html2canvas?Promise.resolve(Fn.html2canvas):Bw(()=>Promise.resolve().then(()=>HNe),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function n(){return(Fn.DOMPurify?Promise.resolve(Fn.DOMPurify):Bw(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var r=function(i){var o=es(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},s=function(i,o){var l=document.createElement(i);for(var u in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[u]=o.style[u];return l},a=function i(o){var l=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),u=i.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,i,1,[i])).set(o)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(i,o){return i.__proto__=o||a.prototype,i},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(n).then(function(l){return this.set({src:s("div",{innerHTML:i,dompurify:l})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},a.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(u,d){for(var h=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),m=u.firstChild;m;m=m.nextSibling)d!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||h.appendChild(l(m,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(h.width=u.width,h.height=u.height,h.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(h.value=u.value),h.addEventListener("load",function(){h.scrollTop=u.scrollTop,h.scrollLeft=u.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var m=0;m<u.length;++m){var p=u[m],y=p.src.find(function(x){return x.format==="truetype"});y&&l.addFont(y.url,p.ref.name,p.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),o(this.prop.container,h)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(i,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},a.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},a.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},a.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(i){if(r(i)!=="object")return this;var o=Object.keys(i||{}).map(function(l){if(l in a.template.prop)return function(){this.prop[l]=i[l]};switch(l){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[l]=i[l]}}},this);return this.then(function(){return this.thenList(o)})},a.prototype.get=function(i,o){return this.then(function(){var l=i in a.template.prop?this.prop[i]:this.opt[i];return o?o(l):l})},a.prototype.setMargin=function(i){return this.then(function(){switch(r(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},a.prototype.setPageSize=function(i){function o(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(i=i||hn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},a.prototype.setProgress=function(i,o,l,u){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(i,o,l,u){return this.setProgress(i?this.progress.val+i:null,o||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},a.prototype.then=function(i,o){var l=this;return this.thenCore(i,o,function(u,d){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,u),h}).then(u,d).then(function(h){return l.updateProgress(1),h})})},a.prototype.thenCore=function(i,o,l){l=l||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),d=l.call(u,i,o);return a.convert(d,this.__proto__)},a.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},a.prototype.thenList=function(i){var o=this;return i.forEach(function(l){o=o.thenCore(l)}),o},a.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return a.convert(o,this)},a.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},a.prototype.error=function(i){return this.then(function(){throw new Error(i)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,hn.getPageSize=function(i,o,l){if(es(i)==="object"){var u=i;i=u.orientation,o=u.unit||o,l=u.format||l}o=o||"mm",l=l||"a4",i=(""+(i||"P")).toLowerCase();var d,h=(""+l).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var p,y=0,x=0;if(m.hasOwnProperty(h))y=m[h][1]/d,x=m[h][0]/d;else try{y=l[1],x=l[0]}catch{throw new Error("Invalid format: "+l)}if(i==="p"||i==="portrait")i="p",x>y&&(p=x,x=y,y=p);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",y>x&&(p=x,x=y,y=p)}return{width:x,height:y,unit:o,k:d,orientation:i}},t.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(H5):null;var l=new a(o);return o.worker?l:l.from(i).doCallback()}}(hn.API),hn.API.addJS=function(t){return z6=t,this.internal.events.subscribe("postPutResources",function(){gy=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(gy+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),V6=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+z6+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){gy!==void 0&&V6!==void 0&&this.internal.out("/Names <</JavaScript "+gy+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=n.outline.render().split(/\r\n/),a=0;a<s.length;a++){var i=s[a],o=r.exec(i);if(o!=null){var l=o[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(a=0;a<u;a++){var h=n.internal.newObject();d.push(h);var m=n.internal.getPageInfo(a+1);n.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),a=0;a<d.length;a++)n.internal.write("(page_"+(a+1)+")"+d[a]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,s,a){var i={title:s,options:a,children:[]};return r==null&&(r=this.root),r.children.push(i),i},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var i=r.children[a];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var l=n.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,s){for(var a=0;a<s.children.length;a++)r.count++,this.count_r(r,s.children[a]);return r.count}}])}(hn.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,s,a,i,o){var l,u=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=i||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(h){for(var m,p=256*h.charCodeAt(4)+h.charCodeAt(5),y=h.length,x={width:0,height:0,numcomponents:1},C=4;C<y;C+=2){if(C+=p,e.indexOf(h.charCodeAt(C+1))!==-1){m=256*h.charCodeAt(C+5)+h.charCodeAt(C+6),x={width:256*h.charCodeAt(C+7)+h.charCodeAt(C+8),height:m,numcomponents:h.charCodeAt(C+9)};break}p=256*h.charCodeAt(C+2)+h.charCodeAt(C+3)}return x}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:n,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:r,alias:s}}return d}}(hn.API);var tm,xy,G6,q6,K6,are=function(){var t,e,n;function r(a){var i,o,l,u,d,h,m,p,y,x,C,S,k,I;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(i=this.readUInt32(),y=(function(){var F,U;for(U=[],F=0;F<4;++F)U.push(String.fromCharCode(this.data[this.pos++]));return U}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,h.delay=1e3*d/u,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,i-=4),a=(h!=null?h.data:void 0)||this.imgData,S=0;0<=i?S<i:S>i;0<=i?++S:--S)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((x=l-this.transparency.indexed.length)>0)for(k=0;0<=x?k<x:k>x;0<=x?++k:--k)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":m=(C=this.read(i)).indexOf(0),p=String.fromCharCode.apply(String,C.slice(0,m)),this.text[p]=String.fromCharCode.apply(String,C.slice(m+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(I=this.colorType)===4||I===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(a){var i,o;for(o=[],i=0;0<=a?i<a:i>a;0<=a?++i:--i)o.push(this.data[this.pos++]);return o},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(a){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),l=0,u=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function d(h,m,p,y){var x,C,S,k,I,F,U,R,E,_,B,j,D,L,Q,H,te,Y,ne,V,J,K=Math.ceil((u.width-h)/p),ie=Math.ceil((u.height-m)/y),O=u.width==K&&u.height==ie;for(L=i*K,j=O?o:new Uint8Array(L*ie),F=a.length,D=0,C=0;D<ie&&l<F;){switch(a[l++]){case 0:for(k=te=0;te<L;k=te+=1)j[C++]=a[l++];break;case 1:for(k=Y=0;Y<L;k=Y+=1)x=a[l++],I=k<i?0:j[C-i],j[C++]=(x+I)%256;break;case 2:for(k=ne=0;ne<L;k=ne+=1)x=a[l++],S=(k-k%i)/i,Q=D&&j[(D-1)*L+S*i+k%i],j[C++]=(Q+x)%256;break;case 3:for(k=V=0;V<L;k=V+=1)x=a[l++],S=(k-k%i)/i,I=k<i?0:j[C-i],Q=D&&j[(D-1)*L+S*i+k%i],j[C++]=(x+Math.floor((I+Q)/2))%256;break;case 4:for(k=J=0;J<L;k=J+=1)x=a[l++],S=(k-k%i)/i,I=k<i?0:j[C-i],D===0?Q=H=0:(Q=j[(D-1)*L+S*i+k%i],H=S&&j[(D-1)*L+(S-1)*i+k%i]),U=I+Q-H,R=Math.abs(U-I),_=Math.abs(U-Q),B=Math.abs(U-H),E=R<=_&&R<=B?I:_<=B?Q:H,j[C++]=(x+E)%256;break;default:throw new Error("Invalid filter algorithm: "+a[l-1])}if(!O){var W=((m+D*y)*u.width+h)*i,Z=D*L;for(k=0;k<K;k+=1){for(var re=0;re<i;re+=1)o[W++]=j[Z++];W+=(p-1)*i}}D++}}return a=Mne(a),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},r.prototype.decodePalette=function(){var a,i,o,l,u,d,h,m,p;for(o=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+o.length),l=0,a=0,i=h=0,m=o.length;h<m;i=h+=3)u[l++]=o[i],u[l++]=o[i+1],u[l++]=o[i+2],u[l++]=(p=d[a++])!=null?p:255;return u},r.prototype.copyToImageData=function(a,i){var o,l,u,d,h,m,p,y,x,C,S;if(l=this.colors,x=null,o=this.hasAlphaChannel,this.palette.length&&(x=(S=this._decodedPalette)!=null?S:this._decodedPalette=this.decodePalette(),l=4,o=!0),y=(u=a.data||a).length,h=x||i,d=m=0,l===1)for(;d<y;)p=x?4*i[d/4]:m,C=h[p++],u[d++]=C,u[d++]=C,u[d++]=C,u[d++]=o?h[p++]:255,m=p;else for(;d<y;)p=x?4*i[d/4]:m,u[d++]=h[p++],u[d++]=h[p++],u[d++]=h[p++],u[d++]=o?h[p++]:255,m=p},r.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var s=function(){if(Object.prototype.toString.call(Fn)==="[object Window]"){try{e=Fn.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(a){var i;if(s()===!0)return n.width=a.width,n.height=a.height,n.clearRect(0,0,a.width,a.height),n.putImageData(a,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(a){var i,o,l,u,d,h,m,p;if(this.animation){for(p=[],o=d=0,h=(m=this.animation.frames).length;d<h;o=++d)i=m[o],l=a.createImageData(i.width,i.height),u=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(l,u),i.imageData=l,p.push(i.image=t(l));return p}},r.prototype.renderFrame=function(a,i){var o,l,u;return o=(l=this.animation.frames)[i],u=l[i-1],i===0&&a.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?a.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&a.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&a.clearRect(o.xOffset,o.yOffset,o.width,o.height),a.drawImage(o.image,o.xOffset,o.yOffset)},r.prototype.animate=function(a){var i,o,l,u,d,h,m=this;return o=0,h=this.animation,u=h.numFrames,l=h.frames,d=h.numPlays,(i=function(){var p,y;if(p=o++%u,y=l[p],m.renderFrame(a,p),u>1&&o/u<d)return m.animation._timeout=setTimeout(i,y.delay)})()},r.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},r.prototype.render=function(a){var i,o;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,i=a.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function ire(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,s=t[e++],a=s>>7,i=1<<(7&s)+1;t[e++],t[e++];var o=null,l=null;a&&(o=e,l=i,e+=3*i);var u=!0,d=[],h=0,m=null,p=0,y=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,y=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var x=t[e++];h=t[e++]|t[e++]<<8,m=t[e++],(1&x)==0&&(m=null),p=x>>2&7,e++;break;case 254:for(;;){if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var C=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,I=t[e++]|t[e++]<<8,F=t[e++],U=F>>6&1,R=1<<(7&F)+1,E=o,_=l,B=!1;F>>7&&(B=!0,E=e,_=R,e+=3*R);var j=e;for(e++;;){var D;if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}d.push({x:C,y:S,width:k,height:I,has_local_palette:B,palette_offset:E,palette_size:_,data_offset:j,data_length:e-j,transparent_index:m,interlaced:!!U,delay:h,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return y},this.frameInfo=function(L){if(L<0||L>=d.length)throw new Error("Frame index out of range.");return d[L]},this.decodeAndBlitFrameBGRA=function(L,Q){var H=this.frameInfo(L),te=H.width*H.height,Y=new Uint8Array(te);$6(t,H.data_offset,Y,te);var ne=H.palette_offset,V=H.transparent_index;V===null&&(V=256);var J=H.width,K=n-J,ie=J,O=4*(H.y*n+H.x),W=4*((H.y+H.height)*n+H.x),Z=O,re=4*K;H.interlaced===!0&&(re+=4*n*7);for(var se=8,de=0,pe=Y.length;de<pe;++de){var be=Y[de];if(ie===0&&(ie=J,(Z+=re)>=W&&(re=4*K+4*n*(se-1),Z=O+(J+K)*(se<<1),se>>=1)),be===V)Z+=4;else{var Se=t[ne+3*be],me=t[ne+3*be+1],ce=t[ne+3*be+2];Q[Z++]=ce,Q[Z++]=me,Q[Z++]=Se,Q[Z++]=255}--ie}},this.decodeAndBlitFrameRGBA=function(L,Q){var H=this.frameInfo(L),te=H.width*H.height,Y=new Uint8Array(te);$6(t,H.data_offset,Y,te);var ne=H.palette_offset,V=H.transparent_index;V===null&&(V=256);var J=H.width,K=n-J,ie=J,O=4*(H.y*n+H.x),W=4*((H.y+H.height)*n+H.x),Z=O,re=4*K;H.interlaced===!0&&(re+=4*n*7);for(var se=8,de=0,pe=Y.length;de<pe;++de){var be=Y[de];if(ie===0&&(ie=J,(Z+=re)>=W&&(re=4*K+4*n*(se-1),Z=O+(J+K)*(se<<1),se>>=1)),be===V)Z+=4;else{var Se=t[ne+3*be],me=t[ne+3*be+1],ce=t[ne+3*be+2];Q[Z++]=Se,Q[Z++]=me,Q[Z++]=ce,Q[Z++]=255}--ie}}}function $6(t,e,n,r){for(var s=t[e++],a=1<<s,i=a+1,o=i+1,l=s+1,u=(1<<l)-1,d=0,h=0,m=0,p=t[e++],y=new Int32Array(4096),x=null;;){for(;d<16&&p!==0;)h|=t[e++]<<d,d+=8,p===1?p=t[e++]:--p;if(d<l)break;var C=h&u;if(h>>=l,d-=l,C!==a){if(C===i)break;for(var S=C<o?C:x,k=0,I=S;I>a;)I=y[I]>>8,++k;var F=I;if(m+k+(S!==C?1:0)>r)return void ds.log("Warning, gif stream longer than expected.");n[m++]=F;var U=m+=k;for(S!==C&&(n[m++]=F),I=S;k--;)I=y[I],n[--U]=255&I,I>>=8;x!==null&&o<4096&&(y[o++]=x<<8|F,o>=u+1&&l<12&&(++l,u=u<<1|1)),x=C}else o=i+1,u=(1<<(l=s+1))-1,x=null}return m!==r&&ds.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function O_(t){var e,n,r,s,a,i=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),d=new Array(64),h=new Array(65535),m=new Array(65535),p=new Array(64),y=new Array(64),x=[],C=0,S=7,k=new Array(64),I=new Array(64),F=new Array(64),U=new Array(256),R=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],j=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],te=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Y(O,W){for(var Z=0,re=0,se=new Array,de=1;de<=16;de++){for(var pe=1;pe<=O[de];pe++)se[W[re]]=[],se[W[re]][0]=Z,se[W[re]][1]=de,re++,Z++;Z*=2}return se}function ne(O){for(var W=O[0],Z=O[1]-1;Z>=0;)W&1<<Z&&(C|=1<<S),Z--,--S<0&&(C==255?(V(255),V(0)):V(C),S=7,C=0)}function V(O){x.push(O)}function J(O){V(O>>8&255),V(255&O)}function K(O,W,Z,re,se){for(var de,pe=se[0],be=se[240],Se=function(Je,dt){var _t,ft,Rt,Ut,Zt,Mt,jt,Wt,Ue,Oe,Ie=0;for(Ue=0;Ue<8;++Ue){_t=Je[Ie],ft=Je[Ie+1],Rt=Je[Ie+2],Ut=Je[Ie+3],Zt=Je[Ie+4],Mt=Je[Ie+5],jt=Je[Ie+6];var Xe=_t+(Wt=Je[Ie+7]),mt=_t-Wt,Yt=ft+jt,Kt=ft-jt,rn=Rt+Mt,qn=Rt-Mt,un=Ut+Zt,xr=Ut-Zt,jn=Xe+un,Sr=Xe-un,qr=Yt+rn,on=Yt-rn;Je[Ie]=jn+qr,Je[Ie+4]=jn-qr;var en=.707106781*(on+Sr);Je[Ie+2]=Sr+en,Je[Ie+6]=Sr-en;var zn=.382683433*((jn=xr+qn)-(on=Kt+mt)),xa=.5411961*jn+zn,rs=1.306562965*on+zn,ks=.707106781*(qr=qn+Kt),Ua=mt+ks,$t=mt-ks;Je[Ie+5]=$t+xa,Je[Ie+3]=$t-xa,Je[Ie+1]=Ua+rs,Je[Ie+7]=Ua-rs,Ie+=8}for(Ie=0,Ue=0;Ue<8;++Ue){_t=Je[Ie],ft=Je[Ie+8],Rt=Je[Ie+16],Ut=Je[Ie+24],Zt=Je[Ie+32],Mt=Je[Ie+40],jt=Je[Ie+48];var vr=_t+(Wt=Je[Ie+56]),ur=_t-Wt,Mr=ft+jt,Kr=ft-jt,ss=Rt+Mt,fe=Rt-Mt,Be=Ut+Zt,Ee=Ut-Zt,_e=vr+Be,Te=vr-Be,ke=Mr+ss,Ye=Mr-ss;Je[Ie]=_e+ke,Je[Ie+32]=_e-ke;var ot=.707106781*(Ye+Te);Je[Ie+16]=Te+ot,Je[Ie+48]=Te-ot;var qe=.382683433*((_e=Ee+fe)-(Ye=Kr+ur)),tt=.5411961*_e+qe,st=1.306562965*Ye+qe,Et=.707106781*(ke=fe+Kr),Dt=ur+Et,Vt=ur-Et;Je[Ie+40]=Vt+tt,Je[Ie+24]=Vt-tt,Je[Ie+8]=Dt+st,Je[Ie+56]=Dt-st,Ie++}for(Ue=0;Ue<64;++Ue)Oe=Je[Ue]*dt[Ue],p[Ue]=Oe>0?Oe+.5|0:Oe-.5|0;return p}(O,W),me=0;me<64;++me)y[E[me]]=Se[me];var ce=y[0]-Z;Z=y[0],ce==0?ne(re[0]):(ne(re[m[de=32767+ce]]),ne(h[de]));for(var Me=63;Me>0&&y[Me]==0;)Me--;if(Me==0)return ne(pe),Z;for(var Ze,Fe=1;Fe<=Me;){for(var Ce=Fe;y[Fe]==0&&Fe<=Me;)++Fe;var Re=Fe-Ce;if(Re>=16){Ze=Re>>4;for(var ze=1;ze<=Ze;++ze)ne(be);Re&=15}de=32767+y[Fe],ne(se[(Re<<4)+m[de]]),ne(h[de]),Fe++}return Me!=63&&ne(pe),Z}function ie(O){O=Math.min(Math.max(O,1),100),a!=O&&(function(W){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],re=0;re<64;re++){var se=i((Z[re]*W+50)/100);se=Math.min(Math.max(se,1),255),o[E[re]]=se}for(var de=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],pe=0;pe<64;pe++){var be=i((de[pe]*W+50)/100);be=Math.min(Math.max(be,1),255),l[E[pe]]=be}for(var Se=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],me=0,ce=0;ce<8;ce++)for(var Me=0;Me<8;Me++)u[me]=1/(o[E[me]]*Se[ce]*Se[Me]*8),d[me]=1/(l[E[me]]*Se[ce]*Se[Me]*8),me++}(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),a=O)}this.encode=function(O,W){W&&ie(W),x=new Array,C=0,S=7,J(65496),J(65504),J(16),V(74),V(70),V(73),V(70),V(0),V(1),V(1),V(0),J(1),J(1),V(0),V(0),function(){J(65499),J(132),V(0);for(var ft=0;ft<64;ft++)V(o[ft]);V(1);for(var Rt=0;Rt<64;Rt++)V(l[Rt])}(),function(ft,Rt){J(65472),J(17),V(8),J(Rt),J(ft),V(3),V(1),V(17),V(0),V(2),V(17),V(1),V(3),V(17),V(1)}(O.width,O.height),function(){J(65476),J(418),V(0);for(var ft=0;ft<16;ft++)V(_[ft+1]);for(var Rt=0;Rt<=11;Rt++)V(B[Rt]);V(16);for(var Ut=0;Ut<16;Ut++)V(j[Ut+1]);for(var Zt=0;Zt<=161;Zt++)V(D[Zt]);V(1);for(var Mt=0;Mt<16;Mt++)V(L[Mt+1]);for(var jt=0;jt<=11;jt++)V(Q[jt]);V(17);for(var Wt=0;Wt<16;Wt++)V(H[Wt+1]);for(var Ue=0;Ue<=161;Ue++)V(te[Ue])}(),J(65498),J(12),V(3),V(1),V(0),V(2),V(17),V(3),V(17),V(0),V(63),V(0);var Z=0,re=0,se=0;C=0,S=7,this.encode.displayName="_encode_";for(var de,pe,be,Se,me,ce,Me,Ze,Fe,Ce=O.data,Re=O.width,ze=O.height,Je=4*Re,dt=0;dt<ze;){for(de=0;de<Je;){for(me=Je*dt+de,Me=-1,Ze=0,Fe=0;Fe<64;Fe++)ce=me+(Ze=Fe>>3)*Je+(Me=4*(7&Fe)),dt+Ze>=ze&&(ce-=Je*(dt+1+Ze-ze)),de+Me>=Je&&(ce-=de+Me-Je+4),pe=Ce[ce++],be=Ce[ce++],Se=Ce[ce++],k[Fe]=(R[pe]+R[be+256>>0]+R[Se+512>>0]>>16)-128,I[Fe]=(R[pe+768>>0]+R[be+1024>>0]+R[Se+1280>>0]>>16)-128,F[Fe]=(R[pe+1280>>0]+R[be+1536>>0]+R[Se+1792>>0]>>16)-128;Z=K(k,u,Z,e,r),re=K(I,d,re,n,s),se=K(F,d,se,n,s),de+=32}dt+=8}if(S>=0){var _t=[];_t[1]=S+1,_t[0]=(1<<S+1)-1,ne(_t)}return J(65497),new Uint8Array(x)},t=t||50,function(){for(var O=String.fromCharCode,W=0;W<256;W++)U[W]=O(W)}(),e=Y(_,B),n=Y(L,Q),r=Y(j,D),s=Y(H,te),function(){for(var O=1,W=2,Z=1;Z<=15;Z++){for(var re=O;re<W;re++)m[32767+re]=Z,h[32767+re]=[],h[32767+re][1]=Z,h[32767+re][0]=re;for(var se=-(W-1);se<=-O;se++)m[32767+se]=Z,h[32767+se]=[],h[32767+se][1]=Z,h[32767+se][0]=W-1+se;O<<=1,W<<=1}}(),function(){for(var O=0;O<256;O++)R[O]=19595*O,R[O+256>>0]=38470*O,R[O+512>>0]=7471*O+32768,R[O+768>>0]=-11059*O,R[O+1024>>0]=-21709*O,R[O+1280>>0]=32768*O+8421375,R[O+1536>>0]=-27439*O,R[O+1792>>0]=-5329*O}(),ie(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Uc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function W6(t){function e(_){if(!_)throw Error("assert :P")}function n(_,B,j){for(var D=0;4>D;D++)if(_[B+D]!=j.charCodeAt(D))return!0;return!1}function r(_,B,j,D,L){for(var Q=0;Q<L;Q++)_[B+Q]=j[D+Q]}function s(_,B,j,D){for(var L=0;L<D;L++)_[B+L]=j}function a(_){return new Int32Array(_)}function i(_,B){for(var j=[],D=0;D<_;D++)j.push(new B);return j}function o(_,B){var j=[];return function D(L,Q,H){for(var te=H[Q],Y=0;Y<te&&(L.push(H.length>Q+1?[]:new B),!(H.length<Q+1));Y++)D(L[Y],Q+1,H)}(j,0,_),j}var l=function(){var _=this;function B(T,P){for(var X=1<<P-1>>>0;T&X;)X>>>=1;return X?(T&X-1)+X:T}function j(T,P,X,ae,ue){e(!(ae%X));do T[P+(ae-=X)]=ue;while(0<ae)}function D(T,P,X,ae,ue){if(e(2328>=ue),512>=ue)var he=a(512);else if((he=a(ue))==null)return 0;return function(ge,xe,we,Ne,je,rt){var et,$e,bt=xe,ut=1<<we,Qe=a(16),Ve=a(16);for(e(je!=0),e(Ne!=null),e(ge!=null),e(0<we),$e=0;$e<je;++$e){if(15<Ne[$e])return 0;++Qe[Ne[$e]]}if(Qe[0]==je)return 0;for(Ve[1]=0,et=1;15>et;++et){if(Qe[et]>1<<et)return 0;Ve[et+1]=Ve[et]+Qe[et]}for($e=0;$e<je;++$e)et=Ne[$e],0<Ne[$e]&&(rt[Ve[et]++]=$e);if(Ve[15]==1)return(Ne=new L).g=0,Ne.value=rt[0],j(ge,bt,1,ut,Ne),ut;var pt,Ct=-1,vt=ut-1,Jt=0,Ht=1,An=1,Gt=1<<we;for($e=0,et=1,je=2;et<=we;++et,je<<=1){if(Ht+=An<<=1,0>(An-=Qe[et]))return 0;for(;0<Qe[et];--Qe[et])(Ne=new L).g=et,Ne.value=rt[$e++],j(ge,bt+Jt,je,Gt,Ne),Jt=B(Jt,et)}for(et=we+1,je=2;15>=et;++et,je<<=1){if(Ht+=An<<=1,0>(An-=Qe[et]))return 0;for(;0<Qe[et];--Qe[et]){if(Ne=new L,(Jt&vt)!=Ct){for(bt+=Gt,pt=1<<(Ct=et)-we;15>Ct&&!(0>=(pt-=Qe[Ct]));)++Ct,pt<<=1;ut+=Gt=1<<(pt=Ct-we),ge[xe+(Ct=Jt&vt)].g=pt+we,ge[xe+Ct].value=bt-xe-Ct}Ne.g=et-we,Ne.value=rt[$e++],j(ge,bt+(Jt>>we),je,Gt,Ne),Jt=B(Jt,et)}}return Ht!=2*Ve[15]-1?0:ut}(T,P,X,ae,ue,he)}function L(){this.value=this.g=0}function Q(){this.value=this.g=0}function H(){this.G=i(5,L),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(ra,Q)}function te(T,P,X,ae){e(T!=null),e(P!=null),e(2147483648>ae),T.Ca=254,T.I=0,T.b=-8,T.Ka=0,T.oa=P,T.pa=X,T.Jd=P,T.Yc=X+ae,T.Zc=4<=ae?X+ae-4+1:X,de(T)}function Y(T,P){for(var X=0;0<P--;)X|=be(T,128)<<P;return X}function ne(T,P){var X=Y(T,P);return pe(T)?-X:X}function V(T,P,X,ae){var ue,he=0;for(e(T!=null),e(P!=null),e(4294967288>ae),T.Sb=ae,T.Ra=0,T.u=0,T.h=0,4<ae&&(ae=4),ue=0;ue<ae;++ue)he+=P[X+ue]<<8*ue;T.Ra=he,T.bb=ae,T.oa=P,T.pa=X}function J(T){for(;8<=T.u&&T.bb<T.Sb;)T.Ra>>>=8,T.Ra+=T.oa[T.pa+T.bb]<<mA-8>>>0,++T.bb,T.u-=8;Z(T)&&(T.h=1,T.u=0)}function K(T,P){if(e(0<=P),!T.h&&P<=hA){var X=W(T)&ou[P];return T.u+=P,J(T),X}return T.h=1,T.u=0}function ie(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function O(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(T){return T.Ra>>>(T.u&mA-1)>>>0}function Z(T){return e(T.bb<=T.Sb),T.h||T.bb==T.Sb&&T.u>mA}function re(T,P){T.u=P,T.h=Z(T)}function se(T){T.u>=xd&&(e(T.u>=xd),J(T))}function de(T){e(T!=null&&T.oa!=null),T.pa<T.Zc?(T.I=(T.oa[T.pa++]|T.I<<8)>>>0,T.b+=8):(e(T!=null&&T.oa!=null),T.pa<T.Yc?(T.b+=8,T.I=T.oa[T.pa++]|T.I<<8):T.Ka?T.b=0:(T.I<<=8,T.b+=8,T.Ka=1))}function pe(T){return Y(T,1)}function be(T,P){var X=T.Ca;0>T.b&&de(T);var ae=T.b,ue=X*P>>>8,he=(T.I>>>ae>ue)+0;for(he?(X-=ue,T.I-=ue+1<<ae>>>0):X=ue+1,ae=X,ue=0;256<=ae;)ue+=8,ae>>=8;return ae=7^ue+Di[ae],T.b-=ae,T.Ca=(X<<ae)-1,he}function Se(T,P,X){T[P+0]=X>>24&255,T[P+1]=X>>16&255,T[P+2]=X>>8&255,T[P+3]=X>>0&255}function me(T,P){return T[P+0]<<0|T[P+1]<<8}function ce(T,P){return me(T,P)|T[P+2]<<16}function Me(T,P){return me(T,P)|me(T,P+2)<<16}function Ze(T,P){var X=1<<P;return e(T!=null),e(0<P),T.X=a(X),T.X==null?0:(T.Mb=32-P,T.Xa=P,1)}function Fe(T,P){e(T!=null),e(P!=null),e(T.Xa==P.Xa),r(P.X,0,T.X,0,1<<P.Xa)}function Ce(){this.X=[],this.Xa=this.Mb=0}function Re(T,P,X,ae){e(X!=null),e(ae!=null);var ue=X[0],he=ae[0];return ue==0&&(ue=(T*he+P/2)/P),he==0&&(he=(P*ue+T/2)/T),0>=ue||0>=he?0:(X[0]=ue,ae[0]=he,1)}function ze(T,P){return T+(1<<P)-1>>>P}function Je(T,P){return((4278255360&T)+(4278255360&P)>>>0&4278255360)+((16711935&T)+(16711935&P)>>>0&16711935)>>>0}function dt(T,P){_[P]=function(X,ae,ue,he,ge,xe,we){var Ne;for(Ne=0;Ne<ge;++Ne){var je=_[T](xe[we+Ne-1],ue,he+Ne);xe[we+Ne]=Je(X[ae+Ne],je)}}}function _t(){this.ud=this.hd=this.jd=0}function ft(T,P){return((4278124286&(T^P))>>>1)+(T&P)>>>0}function Rt(T){return 0<=T&&256>T?T:0>T?0:255<T?255:void 0}function Ut(T,P){return Rt(T+(T-P+.5>>1))}function Zt(T,P,X){return Math.abs(P-X)-Math.abs(T-X)}function Mt(T,P,X,ae,ue,he,ge){for(ae=he[ge-1],X=0;X<ue;++X)he[ge+X]=ae=Je(T[P+X],ae)}function jt(T,P,X,ae,ue){var he;for(he=0;he<X;++he){var ge=T[P+he],xe=ge>>8&255,we=16711935&(we=(we=16711935&ge)+((xe<<16)+xe));ae[ue+he]=(4278255360&ge)+we>>>0}}function Wt(T,P){P.jd=T>>0&255,P.hd=T>>8&255,P.ud=T>>16&255}function Ue(T,P,X,ae,ue,he){var ge;for(ge=0;ge<ae;++ge){var xe=P[X+ge],we=xe>>>8,Ne=xe,je=255&(je=(je=xe>>>16)+((T.jd<<24>>24)*(we<<24>>24)>>>5));Ne=255&(Ne=(Ne=Ne+((T.hd<<24>>24)*(we<<24>>24)>>>5))+((T.ud<<24>>24)*(je<<24>>24)>>>5)),ue[he+ge]=(4278255360&xe)+(je<<16)+Ne}}function Oe(T,P,X,ae,ue){_[P]=function(he,ge,xe,we,Ne,je,rt,et,$e){for(we=rt;we<et;++we)for(rt=0;rt<$e;++rt)Ne[je++]=ue(xe[ae(he[ge++])])},_[T]=function(he,ge,xe,we,Ne,je,rt){var et=8>>he.b,$e=he.Ea,bt=he.K[0],ut=he.w;if(8>et)for(he=(1<<he.b)-1,ut=(1<<et)-1;ge<xe;++ge){var Qe,Ve=0;for(Qe=0;Qe<$e;++Qe)Qe&he||(Ve=ae(we[Ne++])),je[rt++]=ue(bt[Ve&ut]),Ve>>=et}else _["VP8LMapColor"+X](we,Ne,bt,ut,je,rt,ge,xe,$e)}}function Ie(T,P,X,ae,ue){for(X=P+X;P<X;){var he=T[P++];ae[ue++]=he>>16&255,ae[ue++]=he>>8&255,ae[ue++]=he>>0&255}}function Xe(T,P,X,ae,ue){for(X=P+X;P<X;){var he=T[P++];ae[ue++]=he>>16&255,ae[ue++]=he>>8&255,ae[ue++]=he>>0&255,ae[ue++]=he>>24&255}}function mt(T,P,X,ae,ue){for(X=P+X;P<X;){var he=(ge=T[P++])>>16&240|ge>>12&15,ge=ge>>0&240|ge>>28&15;ae[ue++]=he,ae[ue++]=ge}}function Yt(T,P,X,ae,ue){for(X=P+X;P<X;){var he=(ge=T[P++])>>16&248|ge>>13&7,ge=ge>>5&224|ge>>3&31;ae[ue++]=he,ae[ue++]=ge}}function Kt(T,P,X,ae,ue){for(X=P+X;P<X;){var he=T[P++];ae[ue++]=he>>0&255,ae[ue++]=he>>8&255,ae[ue++]=he>>16&255}}function rn(T,P,X,ae,ue,he){if(he==0)for(X=P+X;P<X;)Se(ae,((he=T[P++])[0]>>24|he[1]>>8&65280|he[2]<<8&16711680|he[3]<<24)>>>0),ue+=32;else r(ae,ue,T,P,X)}function qn(T,P){_[P][0]=_[T+"0"],_[P][1]=_[T+"1"],_[P][2]=_[T+"2"],_[P][3]=_[T+"3"],_[P][4]=_[T+"4"],_[P][5]=_[T+"5"],_[P][6]=_[T+"6"],_[P][7]=_[T+"7"],_[P][8]=_[T+"8"],_[P][9]=_[T+"9"],_[P][10]=_[T+"10"],_[P][11]=_[T+"11"],_[P][12]=_[T+"12"],_[P][13]=_[T+"13"],_[P][14]=_[T+"0"],_[P][15]=_[T+"0"]}function un(T){return T==th||T==gu||T==Cc||T==bd}function xr(){this.eb=[],this.size=this.A=this.fb=0}function jn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Sr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new xr,this.f.kb=new jn,this.sd=null}function qr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function on(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function en(T){return alert("todo:WebPSamplerProcessPlane"),T.T}function zn(T,P){var X=T.T,ae=P.ba.f.RGBA,ue=ae.eb,he=ae.fb+T.ka*ae.A,ge=Ca[P.ba.S],xe=T.y,we=T.O,Ne=T.f,je=T.N,rt=T.ea,et=T.W,$e=P.cc,bt=P.dc,ut=P.Mc,Qe=P.Nc,Ve=T.ka,pt=T.ka+T.T,Ct=T.U,vt=Ct+1>>1;for(Ve==0?ge(xe,we,null,null,Ne,je,rt,et,Ne,je,rt,et,ue,he,null,null,Ct):(ge(P.ec,P.fc,xe,we,$e,bt,ut,Qe,Ne,je,rt,et,ue,he-ae.A,ue,he,Ct),++X);Ve+2<pt;Ve+=2)$e=Ne,bt=je,ut=rt,Qe=et,je+=T.Rc,et+=T.Rc,he+=2*ae.A,ge(xe,(we+=2*T.fa)-T.fa,xe,we,$e,bt,ut,Qe,Ne,je,rt,et,ue,he-ae.A,ue,he,Ct);return we+=T.fa,T.j+pt<T.o?(r(P.ec,P.fc,xe,we,Ct),r(P.cc,P.dc,Ne,je,vt),r(P.Mc,P.Nc,rt,et,vt),X--):1&pt||ge(xe,we,null,null,Ne,je,rt,et,Ne,je,rt,et,ue,he+ae.A,null,null,Ct),X}function xa(T,P,X){var ae=T.F,ue=[T.J];if(ae!=null){var he=T.U,ge=P.ba.S,xe=ge==yA||ge==Cc;P=P.ba.f.RGBA;var we=[0],Ne=T.ka;we[0]=T.T,T.Kb&&(Ne==0?--we[0]:(--Ne,ue[0]-=T.width),T.j+T.ka+T.T==T.o&&(we[0]=T.o-T.j-Ne));var je=P.eb;Ne=P.fb+Ne*P.A,T=nr(ae,ue[0],T.width,he,we,je,Ne+(xe?0:3),P.A),e(X==we),T&&un(ge)&&co(je,Ne,xe,he,we,P.A)}return 0}function rs(T){var P=T.ma,X=P.ba.S,ae=11>X,ue=X==wd||X==eh||X==yA||X==bc||X==12||un(X);if(P.memory=null,P.Ib=null,P.Jb=null,P.Nd=null,!iu(P.Oa,T,ue?11:12))return 0;if(ue&&un(X)&&Bt(),T.da)alert("todo:use_scaling");else{if(ae){if(P.Ib=en,T.Kb){if(X=T.U+1>>1,P.memory=a(T.U+2*X),P.memory==null)return 0;P.ec=P.memory,P.fc=0,P.cc=P.ec,P.dc=P.fc+T.U,P.Mc=P.cc,P.Nc=P.dc+X,P.Ib=zn,Bt()}}else alert("todo:EmitYUV");ue&&(P.Jb=xa,ae&&Ke())}if(ae&&!A1){for(T=0;256>T;++T)tE[T]=89858*(T-128)+aa>>Ql,sh[T]=-22014*(T-128)+aa,qp[T]=-45773*(T-128),ia[T]=113618*(T-128)+aa>>Ql;for(T=yu;T<I0;++T)P=76283*(T-16)+aa>>Ql,ah[T-yu]=Ir(P,255),Kp[T-yu]=Ir(P+8>>4,15);A1=1}return 1}function ks(T){var P=T.ma,X=T.U,ae=T.T;return e(!(1&T.ka)),0>=X||0>=ae?0:(X=P.Ib(T,P),P.Jb!=null&&P.Jb(T,P,X),P.Dc+=X,1)}function Ua(T){T.ma.memory=null}function $t(T,P,X,ae){return K(T,8)!=47?0:(P[0]=K(T,14)+1,X[0]=K(T,14)+1,ae[0]=K(T,1),K(T,3)!=0?0:!T.h)}function vr(T,P){if(4>T)return T+1;var X=T-2>>1;return(2+(1&T)<<X)+K(P,X)+1}function ur(T,P){return 120<P?P-120:1<=(X=((X=_c[P-1])>>4)*T+(8-(15&X)))?X:1;var X}function Mr(T,P,X){var ae=W(X),ue=T[P+=255&ae].g-8;return 0<ue&&(re(X,X.u+8),ae=W(X),P+=T[P].value,P+=ae&(1<<ue)-1),re(X,X.u+T[P].g),T[P].value}function Kr(T,P,X){return X.g+=T.g,X.value+=T.value<<P>>>0,e(8>=X.g),T.g}function ss(T,P,X){var ae=T.xc;return e((P=ae==0?0:T.vc[T.md*(X>>ae)+(P>>ae)])<T.Wb),T.Ya[P]}function fe(T,P,X,ae){var ue=T.ab,he=T.c*P,ge=T.C;P=ge+P;var xe=X,we=ae;for(ae=T.Ta,X=T.Ua;0<ue--;){var Ne=T.gc[ue],je=ge,rt=P,et=xe,$e=we,bt=(we=ae,xe=X,Ne.Ea);switch(e(je<rt),e(rt<=Ne.nc),Ne.hc){case 2:E0(et,$e,(rt-je)*bt,we,xe);break;case 0:var ut=je,Qe=rt,Ve=we,pt=xe,Ct=(Gt=Ne).Ea;ut==0&&(zp(et,$e,null,null,1,Ve,pt),Mt(et,$e+1,0,0,Ct-1,Ve,pt+1),$e+=Ct,pt+=Ct,++ut);for(var vt=1<<Gt.b,Jt=vt-1,Ht=ze(Ct,Gt.b),An=Gt.K,Gt=Gt.w+(ut>>Gt.b)*Ht;ut<Qe;){var br=An,Fr=Gt,Zn=1;for(Jf(et,$e,Ve,pt-Ct,1,Ve,pt);Zn<Ct;){var Wn=(Zn&~Jt)+vt;Wn>Ct&&(Wn=Ct),(0,vc[br[Fr++]>>8&15])(et,$e+ +Zn,Ve,pt+Zn-Ct,Wn-Zn,Ve,pt+Zn),Zn=Wn}$e+=Ct,pt+=Ct,++ut&Jt||(Gt+=Ht)}rt!=Ne.nc&&r(we,xe-bt,we,xe+(rt-je-1)*bt,bt);break;case 1:for(bt=et,Qe=$e,Ct=(et=Ne.Ea)-(pt=et&~(Ve=($e=1<<Ne.b)-1)),ut=ze(et,Ne.b),vt=Ne.K,Ne=Ne.w+(je>>Ne.b)*ut;je<rt;){for(Jt=vt,Ht=Ne,An=new _t,Gt=Qe+pt,br=Qe+et;Qe<Gt;)Wt(Jt[Ht++],An),cu(An,bt,Qe,$e,we,xe),Qe+=$e,xe+=$e;Qe<br&&(Wt(Jt[Ht++],An),cu(An,bt,Qe,Ct,we,xe),Qe+=Ct,xe+=Ct),++je&Ve||(Ne+=ut)}break;case 3:if(et==we&&$e==xe&&0<Ne.b){for(Qe=we,et=bt=xe+(rt-je)*bt-(pt=(rt-je)*ze(Ne.Ea,Ne.b)),$e=we,Ve=xe,ut=[],pt=(Ct=pt)-1;0<=pt;--pt)ut[pt]=$e[Ve+pt];for(pt=Ct-1;0<=pt;--pt)Qe[et+pt]=ut[pt];Bo(Ne,je,rt,we,bt,we,xe)}else Bo(Ne,je,rt,et,$e,we,xe)}xe=ae,we=X}we!=X&&r(ae,X,xe,we,he)}function Be(T,P){var X=T.V,ae=T.Ba+T.c*T.C,ue=P-T.C;if(e(P<=T.l.o),e(16>=ue),0<ue){var he=T.l,ge=T.Ta,xe=T.Ua,we=he.width;if(fe(T,ue,X,ae),ue=xe=[xe],e((X=T.C)<(ae=P)),e(he.v<he.va),ae>he.o&&(ae=he.o),X<he.j){var Ne=he.j-X;X=he.j,ue[0]+=Ne*we}if(X>=ae?X=0:(ue[0]+=4*he.v,he.ka=X-he.j,he.U=he.va-he.v,he.T=ae-X,X=1),X){if(xe=xe[0],11>(X=T.ca).S){var je=X.f.RGBA,rt=(ae=X.S,ue=he.U,he=he.T,Ne=je.eb,je.A),et=he;for(je=je.fb+T.Ma*je.A;0<et--;){var $e=ge,bt=xe,ut=ue,Qe=Ne,Ve=je;switch(ae){case Ja:di($e,bt,ut,Qe,Ve);break;case wd:Qa($e,bt,ut,Qe,Ve);break;case th:Qa($e,bt,ut,Qe,Ve),co(Qe,Ve,0,ut,1,0);break;case Ml:el($e,bt,ut,Qe,Ve);break;case eh:rn($e,bt,ut,Qe,Ve,1);break;case gu:rn($e,bt,ut,Qe,Ve,1),co(Qe,Ve,0,ut,1,0);break;case yA:rn($e,bt,ut,Qe,Ve,0);break;case Cc:rn($e,bt,ut,Qe,Ve,0),co(Qe,Ve,1,ut,1,0);break;case bc:uu($e,bt,ut,Qe,Ve);break;case bd:uu($e,bt,ut,Qe,Ve),tr(Qe,Ve,ut,1,0);break;case S0:Ri($e,bt,ut,Qe,Ve);break;default:e(0)}xe+=we,je+=rt}T.Ma+=he}else alert("todo:EmitRescaledRowsYUVA");e(T.Ma<=X.height)}}T.C=P,e(T.C<=T.i)}function Ee(T){var P;if(0<T.ua)return 0;for(P=0;P<T.Wb;++P){var X=T.Ya[P].G,ae=T.Ya[P].H;if(0<X[1][ae[1]+0].g||0<X[2][ae[2]+0].g||0<X[3][ae[3]+0].g)return 0}return 1}function _e(T,P,X,ae,ue,he){if(T.Z!=0){var ge=T.qd,xe=T.rd;for(e(Ol[T.Z]!=null);P<X;++P)Ol[T.Z](ge,xe,ae,ue,ae,ue,he),ge=ae,xe=ue,ue+=he;T.qd=ge,T.rd=xe}}function Te(T,P){var X=T.l.ma,ae=X.Z==0||X.Z==1?T.l.j:T.C;if(ae=T.C<ae?ae:T.C,e(P<=T.l.o),P>ae){var ue=T.l.width,he=X.ca,ge=X.tb+ue*ae,xe=T.V,we=T.Ba+T.c*ae,Ne=T.gc;e(T.ab==1),e(Ne[0].hc==3),lu(Ne[0],ae,P,xe,we,he,ge),_e(X,ae,P,he,ge,ue)}T.C=T.Ma=P}function ke(T,P,X,ae,ue,he,ge){var xe=T.$/ae,we=T.$%ae,Ne=T.m,je=T.s,rt=X+T.$,et=rt;ue=X+ae*ue;var $e=X+ae*he,bt=280+je.ua,ut=T.Pb?xe:16777216,Qe=0<je.ua?je.Wa:null,Ve=je.wc,pt=rt<$e?ss(je,we,xe):null;e(T.C<he),e($e<=ue);var Ct=!1;e:for(;;){for(;Ct||rt<$e;){var vt=0;if(xe>=ut){var Jt=rt-X;e((ut=T).Pb),ut.wd=ut.m,ut.xd=Jt,0<ut.s.ua&&Fe(ut.s.Wa,ut.s.vb),ut=xe+l1}if(we&Ve||(pt=ss(je,we,xe)),e(pt!=null),pt.Qb&&(P[rt]=pt.qb,Ct=!0),!Ct)if(se(Ne),pt.jc){vt=Ne,Jt=P;var Ht=rt,An=pt.pd[W(vt)&ra-1];e(pt.jc),256>An.g?(re(vt,vt.u+An.g),Jt[Ht]=An.value,vt=0):(re(vt,vt.u+An.g-256),e(256<=An.value),vt=An.value),vt==0&&(Ct=!0)}else vt=Mr(pt.G[0],pt.H[0],Ne);if(Ne.h)break;if(Ct||256>vt){if(!Ct)if(pt.nd)P[rt]=(pt.qb|vt<<8)>>>0;else{if(se(Ne),Ct=Mr(pt.G[1],pt.H[1],Ne),se(Ne),Jt=Mr(pt.G[2],pt.H[2],Ne),Ht=Mr(pt.G[3],pt.H[3],Ne),Ne.h)break;P[rt]=(Ht<<24|Ct<<16|vt<<8|Jt)>>>0}if(Ct=!1,++rt,++we>=ae&&(we=0,++xe,ge!=null&&xe<=he&&!(xe%16)&&ge(T,xe),Qe!=null))for(;et<rt;)vt=P[et++],Qe.X[(506832829*vt&4294967295)>>>Qe.Mb]=vt}else if(280>vt){if(vt=vr(vt-256,Ne),Jt=Mr(pt.G[4],pt.H[4],Ne),se(Ne),Jt=ur(ae,Jt=vr(Jt,Ne)),Ne.h)break;if(rt-X<Jt||ue-rt<vt)break e;for(Ht=0;Ht<vt;++Ht)P[rt+Ht]=P[rt+Ht-Jt];for(rt+=vt,we+=vt;we>=ae;)we-=ae,++xe,ge!=null&&xe<=he&&!(xe%16)&&ge(T,xe);if(e(rt<=ue),we&Ve&&(pt=ss(je,we,xe)),Qe!=null)for(;et<rt;)vt=P[et++],Qe.X[(506832829*vt&4294967295)>>>Qe.Mb]=vt}else{if(!(vt<bt))break e;for(Ct=vt-280,e(Qe!=null);et<rt;)vt=P[et++],Qe.X[(506832829*vt&4294967295)>>>Qe.Mb]=vt;vt=rt,e(!(Ct>>>(Jt=Qe).Xa)),P[vt]=Jt.X[Ct],Ct=!0}Ct||e(Ne.h==Z(Ne))}if(T.Pb&&Ne.h&&rt<ue)e(T.m.h),T.a=5,T.m=T.wd,T.$=T.xd,0<T.s.ua&&Fe(T.s.vb,T.s.Wa);else{if(Ne.h)break e;ge!=null&&ge(T,xe>he?he:xe),T.a=0,T.$=rt-X}return 1}return T.a=3,0}function Ye(T){e(T!=null),T.vc=null,T.yc=null,T.Ya=null;var P=T.Wa;P!=null&&(P.X=null),T.vb=null,e(T!=null)}function ot(){var T=new pd;return T==null?null:(T.a=0,T.xb=Cd,qn("Predictor","VP8LPredictors"),qn("Predictor","VP8LPredictors_C"),qn("PredictorAdd","VP8LPredictorsAdd"),qn("PredictorAdd","VP8LPredictorsAdd_C"),E0=jt,cu=Ue,di=Ie,Qa=Xe,uu=mt,Ri=Yt,el=Kt,_.VP8LMapColor32b=wa,_.VP8LMapColor8b=Zf,T)}function qe(T,P,X,ae,ue){var he=1,ge=[T],xe=[P],we=ae.m,Ne=ae.s,je=null,rt=0;e:for(;;){if(X)for(;he&&K(we,1);){var et=ge,$e=xe,bt=ae,ut=1,Qe=bt.m,Ve=bt.gc[bt.ab],pt=K(Qe,2);if(bt.Oc&1<<pt)he=0;else{switch(bt.Oc|=1<<pt,Ve.hc=pt,Ve.Ea=et[0],Ve.nc=$e[0],Ve.K=[null],++bt.ab,e(4>=bt.ab),pt){case 0:case 1:Ve.b=K(Qe,3)+2,ut=qe(ze(Ve.Ea,Ve.b),ze(Ve.nc,Ve.b),0,bt,Ve.K),Ve.K=Ve.K[0];break;case 3:var Ct,vt=K(Qe,8)+1,Jt=16<vt?0:4<vt?1:2<vt?2:3;if(et[0]=ze(Ve.Ea,Jt),Ve.b=Jt,Ct=ut=qe(vt,1,0,bt,Ve.K)){var Ht,An=vt,Gt=Ve,br=1<<(8>>Gt.b),Fr=a(br);if(Fr==null)Ct=0;else{var Zn=Gt.K[0],Wn=Gt.w;for(Fr[0]=Gt.K[0][0],Ht=1;Ht<1*An;++Ht)Fr[Ht]=Je(Zn[Wn+Ht],Fr[Ht-1]);for(;Ht<4*br;++Ht)Fr[Ht]=0;Gt.K[0]=null,Gt.K[0]=Fr,Ct=1}}ut=Ct;break;case 2:break;default:e(0)}he=ut}}if(ge=ge[0],xe=xe[0],he&&K(we,1)&&!(he=1<=(rt=K(we,4))&&11>=rt)){ae.a=3;break e}var jr;if(jr=he)t:{var Dr,On,Wr,wn=ae,In=ge,wr=xe,Cr=rt,Ea=X,oa=wn.m,Ds=wn.s,Rs=[null],Gs=1,Do=0,Rr=bA[Cr];n:for(;;){if(Ea&&K(oa,1)){var qs=K(oa,3)+2,rl=ze(In,qs),wu=ze(wr,qs),_A=rl*wu;if(!qe(rl,wu,0,wn,Rs))break n;for(Rs=Rs[0],Ds.xc=qs,Dr=0;Dr<_A;++Dr){var bu=Rs[Dr]>>8&65535;Rs[Dr]=bu,bu>=Gs&&(Gs=bu+1)}}if(oa.h)break n;for(On=0;5>On;++On){var fs=uo[On];!On&&0<Cr&&(fs+=1<<Cr),Do<fs&&(Do=fs)}var ih=i(Gs*Rr,L),F0=Gs,hi=i(F0,H);if(hi==null)var gs=null;else e(65536>=F0),gs=hi;var SA=a(Do);if(gs==null||SA==null||ih==null){wn.a=1;break n}var Cu=ih;for(Dr=Wr=0;Dr<Gs;++Dr){var Ui=gs[Dr],Eu=Ui.G,Mi=Ui.H,oh=0,_d=1,D0=0;for(On=0;5>On;++On){fs=uo[On],Eu[On]=Cu,Mi[On]=Wr,!On&&0<Cr&&(fs+=1<<Cr);s:{var lh,R0=fs,ch=wn,Sd=SA,h1=Cu,m1=Wr,uh=0,Bc=ch.m,rE=K(Bc,1);if(s(Sd,0,0,R0),rE){var p1=K(Bc,1)+1,g1=K(Bc,1),$p=K(Bc,g1==0?1:8);Sd[$p]=1,p1==2&&(Sd[$p=K(Bc,8)]=1);var Td=1}else{var Wp=a(19),Yp=K(Bc,4)+4;if(19<Yp){ch.a=3;var Ah=0;break s}for(lh=0;lh<Yp;++lh)Wp[Ec[lh]]=K(Bc,3);var L0=void 0,Nd=void 0,x1=ch,v1=Wp,kc=R0,dh=Sd,U0=0,sl=x1.m,Bd=8,Xp=i(128,L);r:for(;D(Xp,0,7,v1,19);){if(K(sl,1)){var y1=2+2*K(sl,3);if((L0=2+K(sl,y1))>kc)break r}else L0=kc;for(Nd=0;Nd<kc&&L0--;){se(sl);var Jp=Xp[0+(127&W(sl))];re(sl,sl.u+Jp.g);var TA=Jp.value;if(16>TA)dh[Nd++]=TA,TA!=0&&(Bd=TA);else{var w1=TA==16,Zp=TA-16,eg=Fo[Zp],tg=K(sl,T0[Zp])+eg;if(Nd+tg>kc)break r;for(var b1=w1?Bd:0;0<tg--;)dh[Nd++]=b1}}U0=1;break r}U0||(x1.a=3),Td=U0}(Td=Td&&!Bc.h)&&(uh=D(h1,m1,8,Sd,R0)),Td&&uh!=0?Ah=uh:(ch.a=3,Ah=0)}if(Ah==0)break n;if(_d&&wA[On]==1&&(_d=Cu[Wr].g==0),oh+=Cu[Wr].g,Wr+=Ah,3>=On){var NA,M0=SA[0];for(NA=1;NA<fs;++NA)SA[NA]>M0&&(M0=SA[NA]);D0+=M0}}if(Ui.nd=_d,Ui.Qb=0,_d&&(Ui.qb=(Eu[3][Mi[3]+0].value<<24|Eu[1][Mi[1]+0].value<<16|Eu[2][Mi[2]+0].value)>>>0,oh==0&&256>Eu[0][Mi[0]+0].value&&(Ui.Qb=1,Ui.qb+=Eu[0][Mi[0]+0].value<<8)),Ui.jc=!Ui.Qb&&6>D0,Ui.jc){var fh,Ic=Ui;for(fh=0;fh<ra;++fh){var Hl=fh,Fc=Ic.pd[Hl],hh=Ic.G[0][Ic.H[0]+Hl];256<=hh.value?(Fc.g=hh.g+256,Fc.value=hh.value):(Fc.g=0,Fc.value=0,Hl>>=Kr(hh,8,Fc),Hl>>=Kr(Ic.G[1][Ic.H[1]+Hl],16,Fc),Hl>>=Kr(Ic.G[2][Ic.H[2]+Hl],0,Fc),Kr(Ic.G[3][Ic.H[3]+Hl],24,Fc))}}}Ds.vc=Rs,Ds.Wb=Gs,Ds.Ya=gs,Ds.yc=ih,jr=1;break t}jr=0}if(!(he=jr)){ae.a=3;break e}if(0<rt){if(Ne.ua=1<<rt,!Ze(Ne.Wa,rt)){ae.a=1,he=0;break e}}else Ne.ua=0;var mh=ae,ng=ge,C1=xe,rg=mh.s,sg=rg.xc;if(mh.c=ng,mh.i=C1,rg.md=ze(ng,sg),rg.wc=sg==0?-1:(1<<sg)-1,X){ae.xb=u1;break e}if((je=a(ge*xe))==null){ae.a=1,he=0;break e}he=(he=ke(ae,je,0,ge,xe,xe,null))&&!we.h;break e}return he?(ue!=null?ue[0]=je:(e(je==null),e(X)),ae.$=0,X||Ye(Ne)):Ye(Ne),he}function tt(T,P){var X=T.c*T.i,ae=X+P+16*P;return e(T.c<=P),T.V=a(ae),T.V==null?(T.Ta=null,T.Ua=0,T.a=1,0):(T.Ta=T.V,T.Ua=T.Ba+X+P,1)}function st(T,P){var X=T.C,ae=P-X,ue=T.V,he=T.Ba+T.c*X;for(e(P<=T.l.o);0<ae;){var ge=16<ae?16:ae,xe=T.l.ma,we=T.l.width,Ne=we*ge,je=xe.ca,rt=xe.tb+we*X,et=T.Ta,$e=T.Ua;fe(T,ge,ue,he),is(et,$e,je,rt,Ne),_e(xe,X,X+ge,je,rt,we),ae-=ge,ue+=ge*T.c,X+=ge}e(X==P),T.C=T.Ma=P}function Et(){this.ub=this.yd=this.td=this.Rb=0}function Dt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Vt(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Ft(){this.Yb=function(){var T=[];return function P(X,ae,ue){for(var he=ue[ae],ge=0;ge<he&&(X.push(ue.length>ae+1?[]:0),!(ue.length<ae+1));ge++)P(X[ge],ae+1,ue)}(T,0,[3,11]),T}()}function Pt(){this.jb=a(3),this.Wc=o([4,8],Ft),this.Xc=o([4,17],Ft)}function yn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Kn(){this.ld=this.La=this.dd=this.tc=0}function $n(){this.Na=this.la=0}function Jn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function js(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ti(){this.uc=this.M=this.Nb=0,this.wa=Array(new Kn),this.Y=0,this.ya=Array(new js),this.aa=0,this.l=new na}function Qs(){this.y=a(16),this.f=a(8),this.ea=a(8)}function va(){this.cb=this.a=0,this.sc="",this.m=new ie,this.Od=new Et,this.Kc=new Dt,this.ed=new yn,this.Qa=new Vt,this.Ic=this.$c=this.Aa=0,this.D=new Ti,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,ie),this.ia=0,this.pb=i(4,Jn),this.Pa=new Pt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Qs),this.Hd=0,this.rb=Array(new $n),this.sb=0,this.wa=Array(new Kn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new js),this.L=this.aa=0,this.gd=o([4,2],Kn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function na(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ma(){var T=new va;return T!=null&&(T.a=0,T.sc="OK",T.cb=0,T.Xb=0,sa||(sa=dd)),T}function as(T,P,X){return T.a==0&&(T.a=P,T.sc=X,T.cb=0),0}function ya(T,P,X){return 3<=X&&T[P+0]==157&&T[P+1]==1&&T[P+2]==42}function Zc(T,P){if(T==null)return 0;if(T.a=0,T.sc="OK",P==null)return as(T,2,"null VP8Io passed to VP8GetHeaders()");var X=P.data,ae=P.w,ue=P.ha;if(4>ue)return as(T,7,"Truncated header.");var he=X[ae+0]|X[ae+1]<<8|X[ae+2]<<16,ge=T.Od;if(ge.Rb=!(1&he),ge.td=he>>1&7,ge.yd=he>>4&1,ge.ub=he>>5,3<ge.td)return as(T,3,"Incorrect keyframe parameters.");if(!ge.yd)return as(T,4,"Frame not displayable.");ae+=3,ue-=3;var xe=T.Kc;if(ge.Rb){if(7>ue)return as(T,7,"cannot parse picture header");if(!ya(X,ae,ue))return as(T,3,"Bad code word");xe.c=16383&(X[ae+4]<<8|X[ae+3]),xe.Td=X[ae+4]>>6,xe.i=16383&(X[ae+6]<<8|X[ae+5]),xe.Ud=X[ae+6]>>6,ae+=7,ue-=7,T.za=xe.c+15>>4,T.Ub=xe.i+15>>4,P.width=xe.c,P.height=xe.i,P.Da=0,P.j=0,P.v=0,P.va=P.width,P.o=P.height,P.da=0,P.ib=P.width,P.hb=P.height,P.U=P.width,P.T=P.height,s((he=T.Pa).jb,0,255,he.jb.length),e((he=T.Qa)!=null),he.Cb=0,he.Bb=0,he.Fb=1,s(he.Zb,0,0,he.Zb.length),s(he.Lb,0,0,he.Lb)}if(ge.ub>ue)return as(T,7,"bad partition length");te(he=T.m,X,ae,ge.ub),ae+=ge.ub,ue-=ge.ub,ge.Rb&&(xe.Ld=pe(he),xe.Kd=pe(he)),xe=T.Qa;var we,Ne=T.Pa;if(e(he!=null),e(xe!=null),xe.Cb=pe(he),xe.Cb){if(xe.Bb=pe(he),pe(he)){for(xe.Fb=pe(he),we=0;4>we;++we)xe.Zb[we]=pe(he)?ne(he,7):0;for(we=0;4>we;++we)xe.Lb[we]=pe(he)?ne(he,6):0}if(xe.Bb)for(we=0;3>we;++we)Ne.jb[we]=pe(he)?Y(he,8):255}else xe.Bb=0;if(he.Ka)return as(T,3,"cannot parse segment header");if((xe=T.ed).zd=pe(he),xe.Tb=Y(he,6),xe.wb=Y(he,3),xe.Pc=pe(he),xe.Pc&&pe(he)){for(Ne=0;4>Ne;++Ne)pe(he)&&(xe.vd[Ne]=ne(he,6));for(Ne=0;4>Ne;++Ne)pe(he)&&(xe.od[Ne]=ne(he,6))}if(T.L=xe.Tb==0?0:xe.zd?1:2,he.Ka)return as(T,3,"cannot parse filter header");var je=ue;if(ue=we=ae,ae=we+je,xe=je,T.Xb=(1<<Y(T.m,2))-1,je<3*(Ne=T.Xb))X=7;else{for(we+=3*Ne,xe-=3*Ne,je=0;je<Ne;++je){var rt=X[ue+0]|X[ue+1]<<8|X[ue+2]<<16;rt>xe&&(rt=xe),te(T.Jc[+je],X,we,rt),we+=rt,xe-=rt,ue+=3}te(T.Jc[+Ne],X,we,xe),X=we<ae?0:5}if(X!=0)return as(T,X,"cannot parse partitions");for(X=Y(we=T.m,7),ue=pe(we)?ne(we,4):0,ae=pe(we)?ne(we,4):0,xe=pe(we)?ne(we,4):0,Ne=pe(we)?ne(we,4):0,we=pe(we)?ne(we,4):0,je=T.Qa,rt=0;4>rt;++rt){if(je.Cb){var et=je.Zb[rt];je.Fb||(et+=X)}else{if(0<rt){T.pb[rt]=T.pb[0];continue}et=X}var $e=T.pb[rt];$e.Sc[0]=nh[Ir(et+ue,127)],$e.Sc[1]=rh[Ir(et+0,127)],$e.Eb[0]=2*nh[Ir(et+ae,127)],$e.Eb[1]=101581*rh[Ir(et+xe,127)]>>16,8>$e.Eb[1]&&($e.Eb[1]=8),$e.Qc[0]=nh[Ir(et+Ne,117)],$e.Qc[1]=rh[Ir(et+we,127)],$e.lc=et+we}if(!ge.Rb)return as(T,4,"Not a key frame.");for(pe(he),ge=T.Pa,X=0;4>X;++X){for(ue=0;8>ue;++ue)for(ae=0;3>ae;++ae)for(xe=0;11>xe;++xe)Ne=be(he,CA[X][ue][ae][xe])?Y(he,8):Pl[X][ue][ae][xe],ge.Wc[X][ue].Yb[ae][xe]=Ne;for(ue=0;17>ue;++ue)ge.Xc[X][ue]=ge.Wc[X][c1[ue]]}return T.kc=pe(he),T.kc&&(T.Bd=Y(he,8)),T.cb=1}function dd(T,P,X,ae,ue,he,ge){var xe=P[ue].Yb[X];for(X=0;16>ue;++ue){if(!be(T,xe[X+0]))return ue;for(;!be(T,xe[X+1]);)if(xe=P[++ue].Yb[0],X=0,ue==16)return 16;var we=P[ue+1].Yb;if(be(T,xe[X+2])){var Ne=T,je=0;if(be(Ne,(et=xe)[(rt=X)+3]))if(be(Ne,et[rt+6])){for(xe=0,rt=2*(je=be(Ne,et[rt+8]))+(et=be(Ne,et[rt+9+je])),je=0,et=Ss[rt];et[xe];++xe)je+=je+be(Ne,et[xe]);je+=3+(8<<rt)}else be(Ne,et[rt+7])?(je=7+2*be(Ne,165),je+=be(Ne,145)):je=5+be(Ne,159);else je=be(Ne,et[rt+4])?3+be(Ne,et[rt+5]):2;xe=we[2]}else je=1,xe=we[1];we=ge+Tr[ue],0>(Ne=T).b&&de(Ne);var rt,et=Ne.b,$e=(rt=Ne.Ca>>1)-(Ne.I>>et)>>31;--Ne.b,Ne.Ca+=$e,Ne.Ca|=1,Ne.I-=(rt+1&$e)<<et,he[we]=((je^$e)-$e)*ae[(0<ue)+0]}return 16}function Cl(T){var P=T.rb[T.sb-1];P.la=0,P.Na=0,s(T.zc,0,0,T.zc.length),T.ja=0}function oA(T,P){if(T==null)return 0;if(P==null)return as(T,2,"NULL VP8Io parameter in VP8Decode().");if(!T.cb&&!Zc(T,P))return 0;if(e(T.cb),P.ac==null||P.ac(P)){P.ob&&(T.L=0);var X=Nc[T.L];if(T.L==2?(T.yb=0,T.zb=0):(T.yb=P.v-X>>4,T.zb=P.j-X>>4,0>T.yb&&(T.yb=0),0>T.zb&&(T.zb=0)),T.Va=P.o+15+X>>4,T.Hb=P.va+15+X>>4,T.Hb>T.za&&(T.Hb=T.za),T.Va>T.Ub&&(T.Va=T.Ub),0<T.L){var ae=T.ed;for(X=0;4>X;++X){var ue;if(T.Qa.Cb){var he=T.Qa.Lb[X];T.Qa.Fb||(he+=ae.Tb)}else he=ae.Tb;for(ue=0;1>=ue;++ue){var ge=T.gd[X][ue],xe=he;if(ae.Pc&&(xe+=ae.vd[0],ue&&(xe+=ae.od[0])),0<(xe=0>xe?0:63<xe?63:xe)){var we=xe;0<ae.wb&&(we=4<ae.wb?we>>2:we>>1)>9-ae.wb&&(we=9-ae.wb),1>we&&(we=1),ge.dd=we,ge.tc=2*xe+we,ge.ld=40<=xe?2:15<=xe?1:0}else ge.tc=0;ge.La=ue}}}X=0}else as(T,6,"Frame setup failed"),X=T.a;if(X=X==0){if(X){T.$c=0,0<T.Aa||(T.Ic=d1);e:{X=T.Ic,ae=4*(we=T.za);var Ne=32*we,je=we+1,rt=0<T.L?we*(0<T.Aa?2:1):0,et=(T.Aa==2?2:1)*we;if((ge=ae+832+(ue=3*(16*X+Nc[T.L])/2*Ne)+(he=T.Fa!=null&&0<T.Fa.length?T.Kc.c*T.Kc.i:0))!=ge)X=0;else{if(ge>T.Vb){if(T.Vb=0,T.Ec=a(ge),T.Fc=0,T.Ec==null){X=as(T,1,"no memory during frame initialization.");break e}T.Vb=ge}ge=T.Ec,xe=T.Fc,T.Ac=ge,T.Bc=xe,xe+=ae,T.Gd=i(Ne,Qs),T.Hd=0,T.rb=i(je+1,$n),T.sb=1,T.wa=rt?i(rt,Kn):null,T.Y=0,T.D.Nb=0,T.D.wa=T.wa,T.D.Y=T.Y,0<T.Aa&&(T.D.Y+=we),e(!0),T.oc=ge,T.pc=xe,xe+=832,T.ya=i(et,js),T.aa=0,T.D.ya=T.ya,T.D.aa=T.aa,T.Aa==2&&(T.D.aa+=we),T.R=16*we,T.B=8*we,we=(Ne=Nc[T.L])*T.R,Ne=Ne/2*T.B,T.sa=ge,T.ta=xe+we,T.qa=T.sa,T.ra=T.ta+16*X*T.R+Ne,T.Ha=T.qa,T.Ia=T.ra+8*X*T.B+Ne,T.$c=0,xe+=ue,T.mb=he?ge:null,T.nb=he?xe:null,e(xe+he<=T.Fc+T.Vb),Cl(T),s(T.Ac,T.Bc,0,ae),X=1}}if(X){if(P.ka=0,P.y=T.sa,P.O=T.ta,P.f=T.qa,P.N=T.ra,P.ea=T.Ha,P.Vd=T.Ia,P.fa=T.R,P.Rc=T.B,P.F=null,P.J=0,!wc){for(X=-255;255>=X;++X)Fs[255+X]=0>X?-X:X;for(X=-1020;1020>=X;++X)ko[1020+X]=-128>X?-128:127<X?127:X;for(X=-112;112>=X;++X)mu[112+X]=-16>X?-16:15<X?15:X;for(X=-255;510>=X;++X)pu[255+X]=0>X?0:255<X?255:X;wc=1}Ll=Ni,tl=_l,nl=wo,zs=kr,Li=Sl,Es=El,pA=kl,Ul=Jo,vd=ru,Au=dA,du=nu,fu=hc,gA=mc,yd=Il,hu=lo,yc=Ya,xA=Vs,_s=md,fi[0]=$a,fi[1]=fd,fi[2]=Eo,fi[3]=hd,fi[4]=Bi,fi[5]=_o,fi[6]=Ai,fi[7]=ki,fi[8]=Xo,fi[9]=Tl,Sc[0]=bo,Sc[1]=cA,Sc[2]=$o,Sc[3]=tu,Sc[4]=$r,Sc[5]=Yo,Sc[6]=Co,Ao[0]=So,Ao[1]=lA,Ao[2]=uA,Ao[3]=Ii,Ao[4]=ar,Ao[5]=Hs,Ao[6]=Nl,X=1}else X=0}X&&(X=function($e,bt){for($e.M=0;$e.M<$e.Va;++$e.M){var ut,Qe=$e.Jc[$e.M&$e.Xb],Ve=$e.m,pt=$e;for(ut=0;ut<pt.za;++ut){var Ct=Ve,vt=pt,Jt=vt.Ac,Ht=vt.Bc+4*ut,An=vt.zc,Gt=vt.ya[vt.aa+ut];if(vt.Qa.Bb?Gt.$b=be(Ct,vt.Pa.jb[0])?2+be(Ct,vt.Pa.jb[2]):be(Ct,vt.Pa.jb[1]):Gt.$b=0,vt.kc&&(Gt.Ad=be(Ct,vt.Bd)),Gt.Za=!be(Ct,145)+0,Gt.Za){var br=Gt.Ob,Fr=0;for(vt=0;4>vt;++vt){var Zn,Wn=An[0+vt];for(Zn=0;4>Zn;++Zn){Wn=Gp[Jt[Ht+Zn]][Wn];for(var jr=xu[be(Ct,Wn[0])];0<jr;)jr=xu[2*jr+be(Ct,Wn[jr])];Wn=-jr,Jt[Ht+Zn]=Wn}r(br,Fr,Jt,Ht,4),Fr+=4,An[0+vt]=Wn}}else Wn=be(Ct,156)?be(Ct,128)?1:3:be(Ct,163)?2:0,Gt.Ob[0]=Wn,s(Jt,Ht,Wn,4),s(An,0,Wn,4);Gt.Dd=be(Ct,142)?be(Ct,114)?be(Ct,183)?1:3:2:0}if(pt.m.Ka)return as($e,7,"Premature end-of-partition0 encountered.");for(;$e.ja<$e.za;++$e.ja){if(pt=Qe,Ct=(Ve=$e).rb[Ve.sb-1],Jt=Ve.rb[Ve.sb+Ve.ja],ut=Ve.ya[Ve.aa+Ve.ja],Ht=Ve.kc?ut.Ad:0)Ct.la=Jt.la=0,ut.Za||(Ct.Na=Jt.Na=0),ut.Hc=0,ut.Gc=0,ut.ia=0;else{var Dr,On;if(Ct=Jt,Jt=pt,Ht=Ve.Pa.Xc,An=Ve.ya[Ve.aa+Ve.ja],Gt=Ve.pb[An.$b],vt=An.ad,br=0,Fr=Ve.rb[Ve.sb-1],Wn=Zn=0,s(vt,br,0,384),An.Za)var Wr=0,wn=Ht[3];else{jr=a(16);var In=Ct.Na+Fr.Na;if(In=sa(Jt,Ht[1],In,Gt.Eb,0,jr,0),Ct.Na=Fr.Na=(0<In)+0,1<In)Ll(jr,0,vt,br);else{var wr=jr[0]+3>>3;for(jr=0;256>jr;jr+=16)vt[br+jr]=wr}Wr=1,wn=Ht[0]}var Cr=15&Ct.la,Ea=15&Fr.la;for(jr=0;4>jr;++jr){var oa=1&Ea;for(wr=On=0;4>wr;++wr)Cr=Cr>>1|(oa=(In=sa(Jt,wn,In=oa+(1&Cr),Gt.Sc,Wr,vt,br))>Wr)<<7,On=On<<2|(3<In?3:1<In?2:vt[br+0]!=0),br+=16;Cr>>=4,Ea=Ea>>1|oa<<7,Zn=(Zn<<8|On)>>>0}for(wn=Cr,Wr=Ea>>4,Dr=0;4>Dr;Dr+=2){for(On=0,Cr=Ct.la>>4+Dr,Ea=Fr.la>>4+Dr,jr=0;2>jr;++jr){for(oa=1&Ea,wr=0;2>wr;++wr)In=oa+(1&Cr),Cr=Cr>>1|(oa=0<(In=sa(Jt,Ht[2],In,Gt.Qc,0,vt,br)))<<3,On=On<<2|(3<In?3:1<In?2:vt[br+0]!=0),br+=16;Cr>>=2,Ea=Ea>>1|oa<<5}Wn|=On<<4*Dr,wn|=Cr<<4<<Dr,Wr|=(240&Ea)<<Dr}Ct.la=wn,Fr.la=Wr,An.Hc=Zn,An.Gc=Wn,An.ia=43690&Wn?0:Gt.ia,Ht=!(Zn|Wn)}if(0<Ve.L&&(Ve.wa[Ve.Y+Ve.ja]=Ve.gd[ut.$b][ut.Za],Ve.wa[Ve.Y+Ve.ja].La|=!Ht),pt.Ka)return as($e,7,"Premature end-of-file encountered.")}if(Cl($e),Ve=bt,pt=1,ut=(Qe=$e).D,Ct=0<Qe.L&&Qe.M>=Qe.zb&&Qe.M<=Qe.Va,Qe.Aa==0)e:{if(ut.M=Qe.M,ut.uc=Ct,Fi(Qe,ut),pt=1,ut=(On=Qe.D).Nb,Ct=(Wn=Nc[Qe.L])*Qe.R,Jt=Wn/2*Qe.B,jr=16*ut*Qe.R,wr=8*ut*Qe.B,Ht=Qe.sa,An=Qe.ta-Ct+jr,Gt=Qe.qa,vt=Qe.ra-Jt+wr,br=Qe.Ha,Fr=Qe.Ia-Jt+wr,Ea=(Cr=On.M)==0,Zn=Cr>=Qe.Va-1,Qe.Aa==2&&Fi(Qe,On),On.uc)for(oa=(In=Qe).D.M,e(In.D.uc),On=In.yb;On<In.Hb;++On){Wr=On,wn=oa;var Ds=(Rs=(fs=In).D).Nb;Dr=fs.R;var Rs=Rs.wa[Rs.Y+Wr],Gs=fs.sa,Do=fs.ta+16*Ds*Dr+16*Wr,Rr=Rs.dd,qs=Rs.tc;if(qs!=0)if(e(3<=qs),fs.L==1)0<Wr&&yc(Gs,Do,Dr,qs+4),Rs.La&&_s(Gs,Do,Dr,qs),0<wn&&hu(Gs,Do,Dr,qs+4),Rs.La&&xA(Gs,Do,Dr,qs);else{var rl=fs.B,wu=fs.qa,_A=fs.ra+8*Ds*rl+8*Wr,bu=fs.Ha,fs=fs.Ia+8*Ds*rl+8*Wr;Ds=Rs.ld,0<Wr&&(Ul(Gs,Do,Dr,qs+4,Rr,Ds),Au(wu,_A,bu,fs,rl,qs+4,Rr,Ds)),Rs.La&&(fu(Gs,Do,Dr,qs,Rr,Ds),yd(wu,_A,bu,fs,rl,qs,Rr,Ds)),0<wn&&(pA(Gs,Do,Dr,qs+4,Rr,Ds),vd(wu,_A,bu,fs,rl,qs+4,Rr,Ds)),Rs.La&&(du(Gs,Do,Dr,qs,Rr,Ds),gA(wu,_A,bu,fs,rl,qs,Rr,Ds))}}if(Qe.ia&&alert("todo:DitherRow"),Ve.put!=null){if(On=16*Cr,Cr=16*(Cr+1),Ea?(Ve.y=Qe.sa,Ve.O=Qe.ta+jr,Ve.f=Qe.qa,Ve.N=Qe.ra+wr,Ve.ea=Qe.Ha,Ve.W=Qe.Ia+wr):(On-=Wn,Ve.y=Ht,Ve.O=An,Ve.f=Gt,Ve.N=vt,Ve.ea=br,Ve.W=Fr),Zn||(Cr-=Wn),Cr>Ve.o&&(Cr=Ve.o),Ve.F=null,Ve.J=null,Qe.Fa!=null&&0<Qe.Fa.length&&On<Cr&&(Ve.J=au(Qe,Ve,On,Cr-On),Ve.F=Qe.mb,Ve.F==null&&Ve.F.length==0)){pt=as(Qe,3,"Could not decode alpha data.");break e}On<Ve.j&&(Wn=Ve.j-On,On=Ve.j,e(!(1&Wn)),Ve.O+=Qe.R*Wn,Ve.N+=Qe.B*(Wn>>1),Ve.W+=Qe.B*(Wn>>1),Ve.F!=null&&(Ve.J+=Ve.width*Wn)),On<Cr&&(Ve.O+=Ve.v,Ve.N+=Ve.v>>1,Ve.W+=Ve.v>>1,Ve.F!=null&&(Ve.J+=Ve.v),Ve.ka=On-Ve.j,Ve.U=Ve.va-Ve.v,Ve.T=Cr-On,pt=Ve.put(Ve))}ut+1!=Qe.Ic||Zn||(r(Qe.sa,Qe.ta-Ct,Ht,An+16*Qe.R,Ct),r(Qe.qa,Qe.ra-Jt,Gt,vt+8*Qe.B,Jt),r(Qe.Ha,Qe.Ia-Jt,br,Fr+8*Qe.B,Jt))}if(!pt)return as($e,6,"Output aborted.")}return 1}(T,P)),P.bc!=null&&P.bc(P),X&=1}return X?(T.cb=0,X):0}function Pa(T,P,X,ae,ue){ue=T[P+X+32*ae]+(ue>>3),T[P+X+32*ae]=-256&ue?0>ue?0:255:ue}function eu(T,P,X,ae,ue,he){Pa(T,P,0,X,ae+ue),Pa(T,P,1,X,ae+he),Pa(T,P,2,X,ae-he),Pa(T,P,3,X,ae-ue)}function yr(T){return(20091*T>>16)+T}function Oa(T,P,X,ae){var ue,he=0,ge=a(16);for(ue=0;4>ue;++ue){var xe=T[P+0]+T[P+8],we=T[P+0]-T[P+8],Ne=(35468*T[P+4]>>16)-yr(T[P+12]),je=yr(T[P+4])+(35468*T[P+12]>>16);ge[he+0]=xe+je,ge[he+1]=we+Ne,ge[he+2]=we-Ne,ge[he+3]=xe-je,he+=4,P++}for(ue=he=0;4>ue;++ue)xe=(T=ge[he+0]+4)+ge[he+8],we=T-ge[he+8],Ne=(35468*ge[he+4]>>16)-yr(ge[he+12]),Pa(X,ae,0,0,xe+(je=yr(ge[he+4])+(35468*ge[he+12]>>16))),Pa(X,ae,1,0,we+Ne),Pa(X,ae,2,0,we-Ne),Pa(X,ae,3,0,xe-je),he++,ae+=32}function El(T,P,X,ae){var ue=T[P+0]+4,he=35468*T[P+4]>>16,ge=yr(T[P+4]),xe=35468*T[P+1]>>16;eu(X,ae,0,ue+ge,T=yr(T[P+1]),xe),eu(X,ae,1,ue+he,T,xe),eu(X,ae,2,ue-he,T,xe),eu(X,ae,3,ue-ge,T,xe)}function _l(T,P,X,ae,ue){Oa(T,P,X,ae),ue&&Oa(T,P+16,X,ae+4)}function wo(T,P,X,ae){tl(T,P+0,X,ae,1),tl(T,P+32,X,ae+128,1)}function kr(T,P,X,ae){var ue;for(T=T[P+0]+4,ue=0;4>ue;++ue)for(P=0;4>P;++P)Pa(X,ae,P,ue,T)}function Sl(T,P,X,ae){T[P+0]&&zs(T,P+0,X,ae),T[P+16]&&zs(T,P+16,X,ae+4),T[P+32]&&zs(T,P+32,X,ae+128),T[P+48]&&zs(T,P+48,X,ae+128+4)}function Ni(T,P,X,ae){var ue,he=a(16);for(ue=0;4>ue;++ue){var ge=T[P+0+ue]+T[P+12+ue],xe=T[P+4+ue]+T[P+8+ue],we=T[P+4+ue]-T[P+8+ue],Ne=T[P+0+ue]-T[P+12+ue];he[0+ue]=ge+xe,he[8+ue]=ge-xe,he[4+ue]=Ne+we,he[12+ue]=Ne-we}for(ue=0;4>ue;++ue)ge=(T=he[0+4*ue]+3)+he[3+4*ue],xe=he[1+4*ue]+he[2+4*ue],we=he[1+4*ue]-he[2+4*ue],Ne=T-he[3+4*ue],X[ae+0]=ge+xe>>3,X[ae+16]=Ne+we>>3,X[ae+32]=ge-xe>>3,X[ae+48]=Ne-we>>3,ae+=64}function Ko(T,P,X){var ae,ue=P-32,he=ba,ge=255-T[ue-1];for(ae=0;ae<X;++ae){var xe,we=he,Ne=ge+T[P-1];for(xe=0;xe<X;++xe)T[P+xe]=we[Ne+T[ue+xe]];P+=32}}function fd(T,P){Ko(T,P,4)}function lA(T,P){Ko(T,P,8)}function cA(T,P){Ko(T,P,16)}function $o(T,P){var X;for(X=0;16>X;++X)r(T,P+32*X,T,P-32,16)}function tu(T,P){var X;for(X=16;0<X;--X)s(T,P,T[P-1],16),P+=32}function Wo(T,P,X){var ae;for(ae=0;16>ae;++ae)s(P,X+32*ae,T,16)}function bo(T,P){var X,ae=16;for(X=0;16>X;++X)ae+=T[P-1+32*X]+T[P+X-32];Wo(ae>>5,T,P)}function $r(T,P){var X,ae=8;for(X=0;16>X;++X)ae+=T[P-1+32*X];Wo(ae>>4,T,P)}function Yo(T,P){var X,ae=8;for(X=0;16>X;++X)ae+=T[P+X-32];Wo(ae>>4,T,P)}function Co(T,P){Wo(128,T,P)}function _n(T,P,X){return T+2*P+X+2>>2}function Eo(T,P){var X,ae=P-32;for(ae=new Uint8Array([_n(T[ae-1],T[ae+0],T[ae+1]),_n(T[ae+0],T[ae+1],T[ae+2]),_n(T[ae+1],T[ae+2],T[ae+3]),_n(T[ae+2],T[ae+3],T[ae+4])]),X=0;4>X;++X)r(T,P+32*X,ae,0,ae.length)}function hd(T,P){var X=T[P-1],ae=T[P-1+32],ue=T[P-1+64],he=T[P-1+96];Se(T,P+0,16843009*_n(T[P-1-32],X,ae)),Se(T,P+32,16843009*_n(X,ae,ue)),Se(T,P+64,16843009*_n(ae,ue,he)),Se(T,P+96,16843009*_n(ue,he,he))}function $a(T,P){var X,ae=4;for(X=0;4>X;++X)ae+=T[P+X-32]+T[P-1+32*X];for(ae>>=3,X=0;4>X;++X)s(T,P+32*X,ae,4)}function Bi(T,P){var X=T[P-1+0],ae=T[P-1+32],ue=T[P-1+64],he=T[P-1-32],ge=T[P+0-32],xe=T[P+1-32],we=T[P+2-32],Ne=T[P+3-32];T[P+0+96]=_n(ae,ue,T[P-1+96]),T[P+1+96]=T[P+0+64]=_n(X,ae,ue),T[P+2+96]=T[P+1+64]=T[P+0+32]=_n(he,X,ae),T[P+3+96]=T[P+2+64]=T[P+1+32]=T[P+0+0]=_n(ge,he,X),T[P+3+64]=T[P+2+32]=T[P+1+0]=_n(xe,ge,he),T[P+3+32]=T[P+2+0]=_n(we,xe,ge),T[P+3+0]=_n(Ne,we,xe)}function Ai(T,P){var X=T[P+1-32],ae=T[P+2-32],ue=T[P+3-32],he=T[P+4-32],ge=T[P+5-32],xe=T[P+6-32],we=T[P+7-32];T[P+0+0]=_n(T[P+0-32],X,ae),T[P+1+0]=T[P+0+32]=_n(X,ae,ue),T[P+2+0]=T[P+1+32]=T[P+0+64]=_n(ae,ue,he),T[P+3+0]=T[P+2+32]=T[P+1+64]=T[P+0+96]=_n(ue,he,ge),T[P+3+32]=T[P+2+64]=T[P+1+96]=_n(he,ge,xe),T[P+3+64]=T[P+2+96]=_n(ge,xe,we),T[P+3+96]=_n(xe,we,we)}function _o(T,P){var X=T[P-1+0],ae=T[P-1+32],ue=T[P-1+64],he=T[P-1-32],ge=T[P+0-32],xe=T[P+1-32],we=T[P+2-32],Ne=T[P+3-32];T[P+0+0]=T[P+1+64]=he+ge+1>>1,T[P+1+0]=T[P+2+64]=ge+xe+1>>1,T[P+2+0]=T[P+3+64]=xe+we+1>>1,T[P+3+0]=we+Ne+1>>1,T[P+0+96]=_n(ue,ae,X),T[P+0+64]=_n(ae,X,he),T[P+0+32]=T[P+1+96]=_n(X,he,ge),T[P+1+32]=T[P+2+96]=_n(he,ge,xe),T[P+2+32]=T[P+3+96]=_n(ge,xe,we),T[P+3+32]=_n(xe,we,Ne)}function ki(T,P){var X=T[P+0-32],ae=T[P+1-32],ue=T[P+2-32],he=T[P+3-32],ge=T[P+4-32],xe=T[P+5-32],we=T[P+6-32],Ne=T[P+7-32];T[P+0+0]=X+ae+1>>1,T[P+1+0]=T[P+0+64]=ae+ue+1>>1,T[P+2+0]=T[P+1+64]=ue+he+1>>1,T[P+3+0]=T[P+2+64]=he+ge+1>>1,T[P+0+32]=_n(X,ae,ue),T[P+1+32]=T[P+0+96]=_n(ae,ue,he),T[P+2+32]=T[P+1+96]=_n(ue,he,ge),T[P+3+32]=T[P+2+96]=_n(he,ge,xe),T[P+3+64]=_n(ge,xe,we),T[P+3+96]=_n(xe,we,Ne)}function Tl(T,P){var X=T[P-1+0],ae=T[P-1+32],ue=T[P-1+64],he=T[P-1+96];T[P+0+0]=X+ae+1>>1,T[P+2+0]=T[P+0+32]=ae+ue+1>>1,T[P+2+32]=T[P+0+64]=ue+he+1>>1,T[P+1+0]=_n(X,ae,ue),T[P+3+0]=T[P+1+32]=_n(ae,ue,he),T[P+3+32]=T[P+1+64]=_n(ue,he,he),T[P+3+64]=T[P+2+64]=T[P+0+96]=T[P+1+96]=T[P+2+96]=T[P+3+96]=he}function Xo(T,P){var X=T[P-1+0],ae=T[P-1+32],ue=T[P-1+64],he=T[P-1+96],ge=T[P-1-32],xe=T[P+0-32],we=T[P+1-32],Ne=T[P+2-32];T[P+0+0]=T[P+2+32]=X+ge+1>>1,T[P+0+32]=T[P+2+64]=ae+X+1>>1,T[P+0+64]=T[P+2+96]=ue+ae+1>>1,T[P+0+96]=he+ue+1>>1,T[P+3+0]=_n(xe,we,Ne),T[P+2+0]=_n(ge,xe,we),T[P+1+0]=T[P+3+32]=_n(X,ge,xe),T[P+1+32]=T[P+3+64]=_n(ae,X,ge),T[P+1+64]=T[P+3+96]=_n(ue,ae,X),T[P+1+96]=_n(he,ue,ae)}function uA(T,P){var X;for(X=0;8>X;++X)r(T,P+32*X,T,P-32,8)}function Ii(T,P){var X;for(X=0;8>X;++X)s(T,P,T[P-1],8),P+=32}function Wa(T,P,X){var ae;for(ae=0;8>ae;++ae)s(P,X+32*ae,T,8)}function So(T,P){var X,ae=8;for(X=0;8>X;++X)ae+=T[P+X-32]+T[P-1+32*X];Wa(ae>>4,T,P)}function Hs(T,P){var X,ae=4;for(X=0;8>X;++X)ae+=T[P+X-32];Wa(ae>>3,T,P)}function ar(T,P){var X,ae=4;for(X=0;8>X;++X)ae+=T[P-1+32*X];Wa(ae>>3,T,P)}function Nl(T,P){Wa(128,T,P)}function To(T,P,X){var ae=T[P-X],ue=T[P+0],he=3*(ue-ae)+_0[1020+T[P-2*X]-T[P+X]],ge=vA[112+(he+4>>3)];T[P-X]=ba[255+ae+vA[112+(he+3>>3)]],T[P+0]=ba[255+ue-ge]}function AA(T,P,X,ae){var ue=T[P+0],he=T[P+X];return Io[255+T[P-2*X]-T[P-X]]>ae||Io[255+he-ue]>ae}function dc(T,P,X,ae){return 4*Io[255+T[P-X]-T[P+0]]+Io[255+T[P-2*X]-T[P+X]]<=ae}function fc(T,P,X,ae,ue){var he=T[P-3*X],ge=T[P-2*X],xe=T[P-X],we=T[P+0],Ne=T[P+X],je=T[P+2*X],rt=T[P+3*X];return 4*Io[255+xe-we]+Io[255+ge-Ne]>ae?0:Io[255+T[P-4*X]-he]<=ue&&Io[255+he-ge]<=ue&&Io[255+ge-xe]<=ue&&Io[255+rt-je]<=ue&&Io[255+je-Ne]<=ue&&Io[255+Ne-we]<=ue}function lo(T,P,X,ae){var ue=2*ae+1;for(ae=0;16>ae;++ae)dc(T,P+ae,X,ue)&&To(T,P+ae,X)}function Ya(T,P,X,ae){var ue=2*ae+1;for(ae=0;16>ae;++ae)dc(T,P+ae*X,1,ue)&&To(T,P+ae*X,1)}function Vs(T,P,X,ae){var ue;for(ue=3;0<ue;--ue)lo(T,P+=4*X,X,ae)}function md(T,P,X,ae){var ue;for(ue=3;0<ue;--ue)Ya(T,P+=4,X,ae)}function Bl(T,P,X,ae,ue,he,ge,xe){for(he=2*he+1;0<ue--;){if(fc(T,P,X,he,ge))if(AA(T,P,X,xe))To(T,P,X);else{var we=T,Ne=P,je=X,rt=we[Ne-2*je],et=we[Ne-je],$e=we[Ne+0],bt=we[Ne+je],ut=we[Ne+2*je],Qe=27*(pt=_0[1020+3*($e-et)+_0[1020+rt-bt]])+63>>7,Ve=18*pt+63>>7,pt=9*pt+63>>7;we[Ne-3*je]=ba[255+we[Ne-3*je]+pt],we[Ne-2*je]=ba[255+rt+Ve],we[Ne-je]=ba[255+et+Qe],we[Ne+0]=ba[255+$e-Qe],we[Ne+je]=ba[255+bt-Ve],we[Ne+2*je]=ba[255+ut-pt]}P+=ae}}function ja(T,P,X,ae,ue,he,ge,xe){for(he=2*he+1;0<ue--;){if(fc(T,P,X,he,ge))if(AA(T,P,X,xe))To(T,P,X);else{var we=T,Ne=P,je=X,rt=we[Ne-je],et=we[Ne+0],$e=we[Ne+je],bt=vA[112+((ut=3*(et-rt))+4>>3)],ut=vA[112+(ut+3>>3)],Qe=bt+1>>1;we[Ne-2*je]=ba[255+we[Ne-2*je]+Qe],we[Ne-je]=ba[255+rt+ut],we[Ne+0]=ba[255+et-bt],we[Ne+je]=ba[255+$e-Qe]}P+=ae}}function kl(T,P,X,ae,ue,he){Bl(T,P,X,1,16,ae,ue,he)}function Jo(T,P,X,ae,ue,he){Bl(T,P,1,X,16,ae,ue,he)}function nu(T,P,X,ae,ue,he){var ge;for(ge=3;0<ge;--ge)ja(T,P+=4*X,X,1,16,ae,ue,he)}function hc(T,P,X,ae,ue,he){var ge;for(ge=3;0<ge;--ge)ja(T,P+=4,1,X,16,ae,ue,he)}function ru(T,P,X,ae,ue,he,ge,xe){Bl(T,P,ue,1,8,he,ge,xe),Bl(X,ae,ue,1,8,he,ge,xe)}function dA(T,P,X,ae,ue,he,ge,xe){Bl(T,P,1,ue,8,he,ge,xe),Bl(X,ae,1,ue,8,he,ge,xe)}function mc(T,P,X,ae,ue,he,ge,xe){ja(T,P+4*ue,ue,1,8,he,ge,xe),ja(X,ae+4*ue,ue,1,8,he,ge,xe)}function Il(T,P,X,ae,ue,he,ge,xe){ja(T,P+4,1,ue,8,he,ge,xe),ja(X,ae+4,1,ue,8,he,ge,xe)}function pc(){this.ba=new Sr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new on,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function su(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function gc(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Fl(){this.ua=0,this.Wa=new Ce,this.vb=new Ce,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new H,this.yc=new L}function pd(){this.xb=this.a=0,this.l=new na,this.ca=new Sr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new O,this.Pb=0,this.wd=new O,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Fl,this.ab=0,this.gc=i(4,gc),this.Oc=0}function Zo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new na,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Dl(T,P,X,ae,ue,he,ge){for(T=T==null?0:T[P+0],P=0;P<ge;++P)ue[he+P]=T+X[ae+P]&255,T=ue[he+P]}function xc(T,P,X,ae,ue,he,ge){var xe;if(T==null)Dl(null,null,X,ae,ue,he,ge);else for(xe=0;xe<ge;++xe)ue[he+xe]=T[P+xe]+X[ae+xe]&255}function Xa(T,P,X,ae,ue,he,ge){if(T==null)Dl(null,null,X,ae,ue,he,ge);else{var xe,we=T[P+0],Ne=we,je=we;for(xe=0;xe<ge;++xe)Ne=je+(we=T[P+xe])-Ne,je=X[ae+xe]+(-256&Ne?0>Ne?0:255:Ne)&255,Ne=we,ue[he+xe]=je}}function au(T,P,X,ae){var ue=P.width,he=P.o;if(e(T!=null&&P!=null),0>X||0>=ae||X+ae>he)return null;if(!T.Cc){if(T.ga==null){var ge;if(T.ga=new Zo,(ge=T.ga==null)||(ge=P.width*P.o,e(T.Gb.length==0),T.Gb=a(ge),T.Uc=0,T.Gb==null?ge=0:(T.mb=T.Gb,T.nb=T.Uc,T.rc=null,ge=1),ge=!ge),!ge){ge=T.ga;var xe=T.Fa,we=T.P,Ne=T.qc,je=T.mb,rt=T.nb,et=we+1,$e=Ne-1,bt=ge.l;if(e(xe!=null&&je!=null&&P!=null),Ol[0]=null,Ol[1]=Dl,Ol[2]=xc,Ol[3]=Xa,ge.ca=je,ge.tb=rt,ge.c=P.width,ge.i=P.height,e(0<ge.c&&0<ge.i),1>=Ne)P=0;else if(ge.$a=xe[we+0]>>0&3,ge.Z=xe[we+0]>>2&3,ge.Lc=xe[we+0]>>4&3,we=xe[we+0]>>6&3,0>ge.$a||1<ge.$a||4<=ge.Z||1<ge.Lc||we)P=0;else if(bt.put=ks,bt.ac=rs,bt.bc=Ua,bt.ma=ge,bt.width=P.width,bt.height=P.height,bt.Da=P.Da,bt.v=P.v,bt.va=P.va,bt.j=P.j,bt.o=P.o,ge.$a)e:{e(ge.$a==1),P=ot();t:for(;;){if(P==null){P=0;break e}if(e(ge!=null),ge.mc=P,P.c=ge.c,P.i=ge.i,P.l=ge.l,P.l.ma=ge,P.l.width=ge.c,P.l.height=ge.i,P.a=0,V(P.m,xe,et,$e),!qe(ge.c,ge.i,1,P,null)||(P.ab==1&&P.gc[0].hc==3&&Ee(P.s)?(ge.ic=1,xe=P.c*P.i,P.Ta=null,P.Ua=0,P.V=a(xe),P.Ba=0,P.V==null?(P.a=1,P=0):P=1):(ge.ic=0,P=tt(P,ge.c)),!P))break t;P=1;break e}ge.mc=null,P=0}else P=$e>=ge.c*ge.i;ge=!P}if(ge)return null;T.ga.Lc!=1?T.Ga=0:ae=he-X}e(T.ga!=null),e(X+ae<=he);e:{if(P=(xe=T.ga).c,he=xe.l.o,xe.$a==0){if(et=T.rc,$e=T.Vc,bt=T.Fa,we=T.P+1+X*P,Ne=T.mb,je=T.nb+X*P,e(we<=T.P+T.qc),xe.Z!=0)for(e(Ol[xe.Z]!=null),ge=0;ge<ae;++ge)Ol[xe.Z](et,$e,bt,we,Ne,je,P),et=Ne,$e=je,je+=P,we+=P;else for(ge=0;ge<ae;++ge)r(Ne,je,bt,we,P),et=Ne,$e=je,je+=P,we+=P;T.rc=et,T.Vc=$e}else{if(e(xe.mc!=null),P=X+ae,e((ge=xe.mc)!=null),e(P<=ge.i),ge.C>=P)P=1;else if(xe.ic||Ke(),xe.ic){xe=ge.V,et=ge.Ba,$e=ge.c;var ut=ge.i,Qe=(bt=1,we=ge.$/$e,Ne=ge.$%$e,je=ge.m,rt=ge.s,ge.$),Ve=$e*ut,pt=$e*P,Ct=rt.wc,vt=Qe<pt?ss(rt,Ne,we):null;e(Qe<=Ve),e(P<=ut),e(Ee(rt));t:for(;;){for(;!je.h&&Qe<pt;){if(Ne&Ct||(vt=ss(rt,Ne,we)),e(vt!=null),se(je),256>(ut=Mr(vt.G[0],vt.H[0],je)))xe[et+Qe]=ut,++Qe,++Ne>=$e&&(Ne=0,++we<=P&&!(we%16)&&Te(ge,we));else{if(!(280>ut)){bt=0;break t}ut=vr(ut-256,je);var Jt,Ht=Mr(vt.G[4],vt.H[4],je);if(se(je),!(Qe>=(Ht=ur($e,Ht=vr(Ht,je)))&&Ve-Qe>=ut)){bt=0;break t}for(Jt=0;Jt<ut;++Jt)xe[et+Qe+Jt]=xe[et+Qe+Jt-Ht];for(Qe+=ut,Ne+=ut;Ne>=$e;)Ne-=$e,++we<=P&&!(we%16)&&Te(ge,we);Qe<pt&&Ne&Ct&&(vt=ss(rt,Ne,we))}e(je.h==Z(je))}Te(ge,we>P?P:we);break t}!bt||je.h&&Qe<Ve?(bt=0,ge.a=je.h?5:3):ge.$=Qe,P=bt}else P=ke(ge,ge.V,ge.Ba,ge.c,ge.i,P,st);if(!P){ae=0;break e}}X+ae>=he&&(T.Cc=1),ae=1}if(!ae)return null;if(T.Cc&&((ae=T.ga)!=null&&(ae.mc=null),T.ga=null,0<T.Ga))return alert("todo:WebPDequantizeLevels"),null}return T.nb+X*ue}function q(T,P,X,ae,ue,he){for(;0<ue--;){var ge,xe=T,we=P+(X?1:0),Ne=T,je=P+(X?0:3);for(ge=0;ge<ae;++ge){var rt=Ne[je+4*ge];rt!=255&&(rt*=32897,xe[we+4*ge+0]=xe[we+4*ge+0]*rt>>23,xe[we+4*ge+1]=xe[we+4*ge+1]*rt>>23,xe[we+4*ge+2]=xe[we+4*ge+2]*rt>>23)}P+=he}}function Ae(T,P,X,ae,ue){for(;0<ae--;){var he;for(he=0;he<X;++he){var ge=T[P+2*he+0],xe=15&(Ne=T[P+2*he+1]),we=4369*xe,Ne=(240&Ne|Ne>>4)*we>>16;T[P+2*he+0]=(240&ge|ge>>4)*we>>16&240|(15&ge|ge<<4)*we>>16>>4&15,T[P+2*he+1]=240&Ne|xe}P+=ue}}function De(T,P,X,ae,ue,he,ge,xe){var we,Ne,je=255;for(Ne=0;Ne<ue;++Ne){for(we=0;we<ae;++we){var rt=T[P+we];he[ge+4*we]=rt,je&=rt}P+=X,ge+=xe}return je!=255}function Pe(T,P,X,ae,ue){var he;for(he=0;he<ue;++he)X[ae+he]=T[P+he]>>8}function Ke(){co=q,tr=Ae,nr=De,is=Pe}function At(T,P,X){_[T]=function(ae,ue,he,ge,xe,we,Ne,je,rt,et,$e,bt,ut,Qe,Ve,pt,Ct){var vt,Jt=Ct-1>>1,Ht=xe[we+0]|Ne[je+0]<<16,An=rt[et+0]|$e[bt+0]<<16;e(ae!=null);var Gt=3*Ht+An+131074>>2;for(P(ae[ue+0],255&Gt,Gt>>16,ut,Qe),he!=null&&(Gt=3*An+Ht+131074>>2,P(he[ge+0],255&Gt,Gt>>16,Ve,pt)),vt=1;vt<=Jt;++vt){var br=xe[we+vt]|Ne[je+vt]<<16,Fr=rt[et+vt]|$e[bt+vt]<<16,Zn=Ht+br+An+Fr+524296,Wn=Zn+2*(br+An)>>3;Gt=Wn+Ht>>1,Ht=(Zn=Zn+2*(Ht+Fr)>>3)+br>>1,P(ae[ue+2*vt-1],255&Gt,Gt>>16,ut,Qe+(2*vt-1)*X),P(ae[ue+2*vt-0],255&Ht,Ht>>16,ut,Qe+(2*vt-0)*X),he!=null&&(Gt=Zn+An>>1,Ht=Wn+Fr>>1,P(he[ge+2*vt-1],255&Gt,Gt>>16,Ve,pt+(2*vt-1)*X),P(he[ge+2*vt+0],255&Ht,Ht>>16,Ve,pt+(2*vt+0)*X)),Ht=br,An=Fr}1&Ct||(Gt=3*Ht+An+131074>>2,P(ae[ue+Ct-1],255&Gt,Gt>>16,ut,Qe+(Ct-1)*X),he!=null&&(Gt=3*An+Ht+131074>>2,P(he[ge+Ct-1],255&Gt,Gt>>16,Ve,pt+(Ct-1)*X)))}}function Bt(){Ca[Ja]=Tc,Ca[wd]=jl,Ca[Ml]=vu,Ca[eh]=N0,Ca[yA]=B0,Ca[bc]=Ed,Ca[S0]=k0,Ca[th]=jl,Ca[gu]=N0,Ca[Cc]=B0,Ca[bd]=Ed}function zt(T){return T&-16384?0>T?0:255:T>>eE}function N(T,P){return zt((19077*T>>8)+(26149*P>>8)-14234)}function ee(T,P,X){return zt((19077*T>>8)-(6419*P>>8)-(13320*X>>8)+8708)}function oe(T,P){return zt((19077*T>>8)+(33050*P>>8)-17685)}function ve(T,P,X,ae,ue){ae[ue+0]=N(T,X),ae[ue+1]=ee(T,P,X),ae[ue+2]=oe(T,P)}function Ge(T,P,X,ae,ue){ae[ue+0]=oe(T,P),ae[ue+1]=ee(T,P,X),ae[ue+2]=N(T,X)}function at(T,P,X,ae,ue){var he=ee(T,P,X);P=he<<3&224|oe(T,P)>>3,ae[ue+0]=248&N(T,X)|he>>5,ae[ue+1]=P}function kt(T,P,X,ae,ue){var he=240&oe(T,P)|15;ae[ue+0]=240&N(T,X)|ee(T,P,X)>>4,ae[ue+1]=he}function Sn(T,P,X,ae,ue){ae[ue+0]=255,ve(T,P,X,ae,ue+1)}function ir(T,P,X,ae,ue){Ge(T,P,X,ae,ue),ae[ue+3]=255}function Pn(T,P,X,ae,ue){ve(T,P,X,ae,ue),ae[ue+3]=255}function Ir(T,P){return 0>T?0:T>P?P:T}function Or(T,P,X){_[T]=function(ae,ue,he,ge,xe,we,Ne,je,rt){for(var et=je+(-2&rt)*X;je!=et;)P(ae[ue+0],he[ge+0],xe[we+0],Ne,je),P(ae[ue+1],he[ge+0],xe[we+0],Ne,je+X),ue+=2,++ge,++we,je+=2*X;1&rt&&P(ae[ue+0],he[ge+0],xe[we+0],Ne,je)}}function No(T,P,X){return X==0?T==0?P==0?6:5:P==0?4:0:X}function Is(T,P,X,ae,ue){switch(T>>>30){case 3:tl(P,X,ae,ue,0);break;case 2:Es(P,X,ae,ue);break;case 1:zs(P,X,ae,ue)}}function Fi(T,P){var X,ae,ue=P.M,he=P.Nb,ge=T.oc,xe=T.pc+40,we=T.oc,Ne=T.pc+584,je=T.oc,rt=T.pc+600;for(X=0;16>X;++X)ge[xe+32*X-1]=129;for(X=0;8>X;++X)we[Ne+32*X-1]=129,je[rt+32*X-1]=129;for(0<ue?ge[xe-1-32]=we[Ne-1-32]=je[rt-1-32]=129:(s(ge,xe-32-1,127,21),s(we,Ne-32-1,127,9),s(je,rt-32-1,127,9)),ae=0;ae<T.za;++ae){var et=P.ya[P.aa+ae];if(0<ae){for(X=-1;16>X;++X)r(ge,xe+32*X-4,ge,xe+32*X+12,4);for(X=-1;8>X;++X)r(we,Ne+32*X-4,we,Ne+32*X+4,4),r(je,rt+32*X-4,je,rt+32*X+4,4)}var $e=T.Gd,bt=T.Hd+ae,ut=et.ad,Qe=et.Hc;if(0<ue&&(r(ge,xe-32,$e[bt].y,0,16),r(we,Ne-32,$e[bt].f,0,8),r(je,rt-32,$e[bt].ea,0,8)),et.Za){var Ve=ge,pt=xe-32+16;for(0<ue&&(ae>=T.za-1?s(Ve,pt,$e[bt].y[15],4):r(Ve,pt,$e[bt+1].y,0,4)),X=0;4>X;X++)Ve[pt+128+X]=Ve[pt+256+X]=Ve[pt+384+X]=Ve[pt+0+X];for(X=0;16>X;++X,Qe<<=2)Ve=ge,pt=xe+EA[X],fi[et.Ob[X]](Ve,pt),Is(Qe,ut,16*+X,Ve,pt)}else if(Ve=No(ae,ue,et.Ob[0]),Sc[Ve](ge,xe),Qe!=0)for(X=0;16>X;++X,Qe<<=2)Is(Qe,ut,16*+X,ge,xe+EA[X]);for(X=et.Gc,Ve=No(ae,ue,et.Dd),Ao[Ve](we,Ne),Ao[Ve](je,rt),Qe=ut,Ve=we,pt=Ne,255&(et=X>>0)&&(170&et?nl(Qe,256,Ve,pt):Li(Qe,256,Ve,pt)),et=je,Qe=rt,255&(X>>=8)&&(170&X?nl(ut,320,et,Qe):Li(ut,320,et,Qe)),ue<T.Ub-1&&(r($e[bt].y,0,ge,xe+480,16),r($e[bt].f,0,we,Ne+224,8),r($e[bt].ea,0,je,rt+224,8)),X=8*he*T.B,$e=T.sa,bt=T.ta+16*ae+16*he*T.R,ut=T.qa,et=T.ra+8*ae+X,Qe=T.Ha,Ve=T.Ia+8*ae+X,X=0;16>X;++X)r($e,bt+X*T.R,ge,xe+32*X,16);for(X=0;8>X;++X)r(ut,et+X*T.B,we,Ne+32*X,8),r(Qe,Ve+X*T.B,je,rt+32*X,8)}}function Rl(T,P,X,ae,ue,he,ge,xe,we){var Ne=[0],je=[0],rt=0,et=we!=null?we.kd:0,$e=we??new su;if(T==null||12>X)return 7;$e.data=T,$e.w=P,$e.ha=X,P=[P],X=[X],$e.gb=[$e.gb];e:{var bt=P,ut=X,Qe=$e.gb;if(e(T!=null),e(ut!=null),e(Qe!=null),Qe[0]=0,12<=ut[0]&&!n(T,bt[0],"RIFF")){if(n(T,bt[0]+8,"WEBP")){Qe=3;break e}var Ve=Me(T,bt[0]+4);if(12>Ve||4294967286<Ve){Qe=3;break e}if(et&&Ve>ut[0]-8){Qe=7;break e}Qe[0]=Ve,bt[0]+=12,ut[0]-=12}Qe=0}if(Qe!=0)return Qe;for(Ve=0<$e.gb[0],X=X[0];;){e:{var pt=T;ut=P,Qe=X;var Ct=Ne,vt=je,Jt=bt=[0];if((Gt=rt=[rt])[0]=0,8>Qe[0])Qe=7;else{if(!n(pt,ut[0],"VP8X")){if(Me(pt,ut[0]+4)!=10){Qe=3;break e}if(18>Qe[0]){Qe=7;break e}var Ht=Me(pt,ut[0]+8),An=1+ce(pt,ut[0]+12);if(2147483648<=An*(pt=1+ce(pt,ut[0]+15))){Qe=3;break e}Jt!=null&&(Jt[0]=Ht),Ct!=null&&(Ct[0]=An),vt!=null&&(vt[0]=pt),ut[0]+=18,Qe[0]-=18,Gt[0]=1}Qe=0}}if(rt=rt[0],bt=bt[0],Qe!=0)return Qe;if(ut=!!(2&bt),!Ve&&rt)return 3;if(he!=null&&(he[0]=!!(16&bt)),ge!=null&&(ge[0]=ut),xe!=null&&(xe[0]=0),ge=Ne[0],bt=je[0],rt&&ut&&we==null){Qe=0;break}if(4>X){Qe=7;break}if(Ve&&rt||!Ve&&!rt&&!n(T,P[0],"ALPH")){X=[X],$e.na=[$e.na],$e.P=[$e.P],$e.Sa=[$e.Sa];e:{Ht=T,Qe=P,Ve=X;var Gt=$e.gb;Ct=$e.na,vt=$e.P,Jt=$e.Sa,An=22,e(Ht!=null),e(Ve!=null),pt=Qe[0];var br=Ve[0];for(e(Ct!=null),e(Jt!=null),Ct[0]=null,vt[0]=null,Jt[0]=0;;){if(Qe[0]=pt,Ve[0]=br,8>br){Qe=7;break e}var Fr=Me(Ht,pt+4);if(4294967286<Fr){Qe=3;break e}var Zn=8+Fr+1&-2;if(An+=Zn,0<Gt&&An>Gt){Qe=3;break e}if(!n(Ht,pt,"VP8 ")||!n(Ht,pt,"VP8L")){Qe=0;break e}if(br[0]<Zn){Qe=7;break e}n(Ht,pt,"ALPH")||(Ct[0]=Ht,vt[0]=pt+8,Jt[0]=Fr),pt+=Zn,br-=Zn}}if(X=X[0],$e.na=$e.na[0],$e.P=$e.P[0],$e.Sa=$e.Sa[0],Qe!=0)break}X=[X],$e.Ja=[$e.Ja],$e.xa=[$e.xa];e:if(Gt=T,Qe=P,Ve=X,Ct=$e.gb[0],vt=$e.Ja,Jt=$e.xa,Ht=Qe[0],pt=!n(Gt,Ht,"VP8 "),An=!n(Gt,Ht,"VP8L"),e(Gt!=null),e(Ve!=null),e(vt!=null),e(Jt!=null),8>Ve[0])Qe=7;else{if(pt||An){if(Gt=Me(Gt,Ht+4),12<=Ct&&Gt>Ct-12){Qe=3;break e}if(et&&Gt>Ve[0]-8){Qe=7;break e}vt[0]=Gt,Qe[0]+=8,Ve[0]-=8,Jt[0]=An}else Jt[0]=5<=Ve[0]&&Gt[Ht+0]==47&&!(Gt[Ht+4]>>5),vt[0]=Ve[0];Qe=0}if(X=X[0],$e.Ja=$e.Ja[0],$e.xa=$e.xa[0],P=P[0],Qe!=0)break;if(4294967286<$e.Ja)return 3;if(xe==null||ut||(xe[0]=$e.xa?2:1),ge=[ge],bt=[bt],$e.xa){if(5>X){Qe=7;break}xe=ge,et=bt,ut=he,T==null||5>X?T=0:5<=X&&T[P+0]==47&&!(T[P+4]>>5)?(Ve=[0],Gt=[0],Ct=[0],V(vt=new O,T,P,X),$t(vt,Ve,Gt,Ct)?(xe!=null&&(xe[0]=Ve[0]),et!=null&&(et[0]=Gt[0]),ut!=null&&(ut[0]=Ct[0]),T=1):T=0):T=0}else{if(10>X){Qe=7;break}xe=bt,T==null||10>X||!ya(T,P+3,X-3)?T=0:(et=T[P+0]|T[P+1]<<8|T[P+2]<<16,ut=16383&(T[P+7]<<8|T[P+6]),T=16383&(T[P+9]<<8|T[P+8]),1&et||3<(et>>1&7)||!(et>>4&1)||et>>5>=$e.Ja||!ut||!T?T=0:(ge&&(ge[0]=ut),xe&&(xe[0]=T),T=1))}if(!T||(ge=ge[0],bt=bt[0],rt&&(Ne[0]!=ge||je[0]!=bt)))return 3;we!=null&&(we[0]=$e,we.offset=P-we.w,e(4294967286>P-we.w),e(we.offset==we.ha-X));break}return Qe==0||Qe==7&&rt&&we==null?(he!=null&&(he[0]|=$e.na!=null&&0<$e.na.length),ae!=null&&(ae[0]=ge),ue!=null&&(ue[0]=bt),0):Qe}function iu(T,P,X){var ae=P.width,ue=P.height,he=0,ge=0,xe=ae,we=ue;if(P.Da=T!=null&&0<T.Da,P.Da&&(xe=T.cd,we=T.bd,he=T.v,ge=T.j,11>X||(he&=-2,ge&=-2),0>he||0>ge||0>=xe||0>=we||he+xe>ae||ge+we>ue))return 0;if(P.v=he,P.j=ge,P.va=he+xe,P.o=ge+we,P.U=xe,P.T=we,P.da=T!=null&&0<T.da,P.da){if(!Re(xe,we,X=[T.ib],he=[T.hb]))return 0;P.ib=X[0],P.hb=he[0]}return P.ob=T!=null&&T.ob,P.Kb=T==null||!T.Sd,P.da&&(P.ob=P.ib<3*ae/4&&P.hb<3*ue/4,P.Kb=0),1}function gd(T){if(T==null)return 2;if(11>T.S){var P=T.f.RGBA;P.fb+=(T.height-1)*P.A,P.A=-P.A}else P=T.f.kb,T=T.height,P.O+=(T-1)*P.fa,P.fa=-P.fa,P.N+=(T-1>>1)*P.Ab,P.Ab=-P.Ab,P.W+=(T-1>>1)*P.Db,P.Db=-P.Db,P.F!=null&&(P.J+=(T-1)*P.lb,P.lb=-P.lb);return 0}function fA(T,P,X,ae){if(ae==null||0>=T||0>=P)return 2;if(X!=null){if(X.Da){var ue=X.cd,he=X.bd,ge=-2&X.v,xe=-2&X.j;if(0>ge||0>xe||0>=ue||0>=he||ge+ue>T||xe+he>P)return 2;T=ue,P=he}if(X.da){if(!Re(T,P,ue=[X.ib],he=[X.hb]))return 2;T=ue[0],P=he[0]}}ae.width=T,ae.height=P;e:{var we=ae.width,Ne=ae.height;if(T=ae.S,0>=we||0>=Ne||!(T>=Ja&&13>T))T=2;else{if(0>=ae.Rd&&ae.sd==null){ge=he=ue=P=0;var je=(xe=we*f1[T])*Ne;if(11>T||(he=(Ne+1)/2*(P=(we+1)/2),T==12&&(ge=(ue=we)*Ne)),(Ne=a(je+2*he+ge))==null){T=1;break e}ae.sd=Ne,11>T?((we=ae.f.RGBA).eb=Ne,we.fb=0,we.A=xe,we.size=je):((we=ae.f.kb).y=Ne,we.O=0,we.fa=xe,we.Fd=je,we.f=Ne,we.N=0+je,we.Ab=P,we.Cd=he,we.ea=Ne,we.W=0+je+he,we.Db=P,we.Ed=he,T==12&&(we.F=Ne,we.J=0+je+2*he),we.Tc=ge,we.lb=ue)}if(P=1,ue=ae.S,he=ae.width,ge=ae.height,ue>=Ja&&13>ue)if(11>ue)T=ae.f.RGBA,P&=(xe=Math.abs(T.A))*(ge-1)+he<=T.size,P&=xe>=he*f1[ue],P&=T.eb!=null;else{T=ae.f.kb,xe=(he+1)/2,je=(ge+1)/2,we=Math.abs(T.fa),Ne=Math.abs(T.Ab);var rt=Math.abs(T.Db),et=Math.abs(T.lb),$e=et*(ge-1)+he;P&=we*(ge-1)+he<=T.Fd,P&=Ne*(je-1)+xe<=T.Cd,P=(P&=rt*(je-1)+xe<=T.Ed)&we>=he&Ne>=xe&rt>=xe,P&=T.y!=null,P&=T.f!=null,P&=T.ea!=null,ue==12&&(P&=et>=he,P&=$e<=T.Tc,P&=T.F!=null)}else P=0;T=P?0:2}}return T!=0||X!=null&&X.fd&&(T=gd(ae)),T}var ra=64,ou=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],hA=24,mA=32,xd=8,Di=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];dt("Predictor0","PredictorAdd0"),_.Predictor0=function(){return 4278190080},_.Predictor1=function(T){return T},_.Predictor2=function(T,P,X){return P[X+0]},_.Predictor3=function(T,P,X){return P[X+1]},_.Predictor4=function(T,P,X){return P[X-1]},_.Predictor5=function(T,P,X){return ft(ft(T,P[X+1]),P[X+0])},_.Predictor6=function(T,P,X){return ft(T,P[X-1])},_.Predictor7=function(T,P,X){return ft(T,P[X+0])},_.Predictor8=function(T,P,X){return ft(P[X-1],P[X+0])},_.Predictor9=function(T,P,X){return ft(P[X+0],P[X+1])},_.Predictor10=function(T,P,X){return ft(ft(T,P[X-1]),ft(P[X+0],P[X+1]))},_.Predictor11=function(T,P,X){var ae=P[X+0];return 0>=Zt(ae>>24&255,T>>24&255,(P=P[X-1])>>24&255)+Zt(ae>>16&255,T>>16&255,P>>16&255)+Zt(ae>>8&255,T>>8&255,P>>8&255)+Zt(255&ae,255&T,255&P)?ae:T},_.Predictor12=function(T,P,X){var ae=P[X+0];return(Rt((T>>24&255)+(ae>>24&255)-((P=P[X-1])>>24&255))<<24|Rt((T>>16&255)+(ae>>16&255)-(P>>16&255))<<16|Rt((T>>8&255)+(ae>>8&255)-(P>>8&255))<<8|Rt((255&T)+(255&ae)-(255&P)))>>>0},_.Predictor13=function(T,P,X){var ae=P[X-1];return(Ut((T=ft(T,P[X+0]))>>24&255,ae>>24&255)<<24|Ut(T>>16&255,ae>>16&255)<<16|Ut(T>>8&255,ae>>8&255)<<8|Ut(T>>0&255,ae>>0&255))>>>0};var zp=_.PredictorAdd0;_.PredictorAdd1=Mt,dt("Predictor2","PredictorAdd2"),dt("Predictor3","PredictorAdd3"),dt("Predictor4","PredictorAdd4"),dt("Predictor5","PredictorAdd5"),dt("Predictor6","PredictorAdd6"),dt("Predictor7","PredictorAdd7"),dt("Predictor8","PredictorAdd8"),dt("Predictor9","PredictorAdd9"),dt("Predictor10","PredictorAdd10"),dt("Predictor11","PredictorAdd11"),dt("Predictor12","PredictorAdd12"),dt("Predictor13","PredictorAdd13");var Jf=_.PredictorAdd2;Oe("ColorIndexInverseTransform","MapARGB","32b",function(T){return T>>8&255},function(T){return T}),Oe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(T){return T},function(T){return T>>8&255});var E0,Bo=_.ColorIndexInverseTransform,wa=_.MapARGB,lu=_.VP8LColorIndexInverseTransformAlpha,Zf=_.MapAlpha,vc=_.VP8LPredictorsAdd=[];vc.length=16,(_.VP8LPredictors=[]).length=16,(_.VP8LPredictorsAdd_C=[]).length=16,(_.VP8LPredictors_C=[]).length=16;var cu,di,Qa,uu,Ri,el,Ll,tl,Es,nl,zs,Li,pA,Ul,vd,Au,du,fu,gA,yd,hu,yc,xA,_s,co,tr,nr,is,Fs=a(511),ko=a(2041),mu=a(225),pu=a(767),wc=0,_0=ko,vA=mu,ba=pu,Io=Fs,Ja=0,wd=1,Ml=2,eh=3,yA=4,bc=5,S0=6,th=7,gu=8,Cc=9,bd=10,T0=[2,3,7],Fo=[3,3,11],uo=[280,256,256,256,40],wA=[0,1,1,1,0],Ec=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],_c=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],bA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],l1=8,nh=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],rh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],sa=null,Ss=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Tr=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],xu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Pl=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Gp=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],CA=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],c1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Sc=[],fi=[],Ao=[],u1=1,Cd=2,Ol=[],Ca=[];At("UpsampleRgbLinePair",ve,3),At("UpsampleBgrLinePair",Ge,3),At("UpsampleRgbaLinePair",Pn,4),At("UpsampleBgraLinePair",ir,4),At("UpsampleArgbLinePair",Sn,4),At("UpsampleRgba4444LinePair",kt,2),At("UpsampleRgb565LinePair",at,2);var Tc=_.UpsampleRgbLinePair,vu=_.UpsampleBgrLinePair,jl=_.UpsampleRgbaLinePair,N0=_.UpsampleBgraLinePair,B0=_.UpsampleArgbLinePair,Ed=_.UpsampleRgba4444LinePair,k0=_.UpsampleRgb565LinePair,Ql=16,aa=1<<Ql-1,yu=-227,I0=482,eE=6,A1=0,tE=a(256),ia=a(256),qp=a(256),sh=a(256),ah=a(I0-yu),Kp=a(I0-yu);Or("YuvToRgbRow",ve,3),Or("YuvToBgrRow",Ge,3),Or("YuvToRgbaRow",Pn,4),Or("YuvToBgraRow",ir,4),Or("YuvToArgbRow",Sn,4),Or("YuvToRgba4444Row",kt,2),Or("YuvToRgb565Row",at,2);var EA=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Nc=[0,2,8],nE=[8,7,6,4,4,2,2,2,1,1,1,1],d1=1;this.WebPDecodeRGBA=function(T,P,X,ae,ue){var he=wd,ge=new pc,xe=new Sr;ge.ba=xe,xe.S=he,xe.width=[xe.width],xe.height=[xe.height];var we=xe.width,Ne=xe.height,je=new qr;if(je==null||T==null)var rt=2;else e(je!=null),rt=Rl(T,P,X,je.width,je.height,je.Pd,je.Qd,je.format,null);if(rt!=0?we=0:(we!=null&&(we[0]=je.width[0]),Ne!=null&&(Ne[0]=je.height[0]),we=1),we){xe.width=xe.width[0],xe.height=xe.height[0],ae!=null&&(ae[0]=xe.width),ue!=null&&(ue[0]=xe.height);e:{if(ae=new na,(ue=new su).data=T,ue.w=P,ue.ha=X,ue.kd=1,P=[0],e(ue!=null),((T=Rl(ue.data,ue.w,ue.ha,null,null,null,P,null,ue))==0||T==7)&&P[0]&&(T=4),(P=T)==0){if(e(ge!=null),ae.data=ue.data,ae.w=ue.w+ue.offset,ae.ha=ue.ha-ue.offset,ae.put=ks,ae.ac=rs,ae.bc=Ua,ae.ma=ge,ue.xa){if((T=ot())==null){ge=1;break e}if(function(et,$e){var bt=[0],ut=[0],Qe=[0];t:for(;;){if(et==null)return 0;if($e==null)return et.a=2,0;if(et.l=$e,et.a=0,V(et.m,$e.data,$e.w,$e.ha),!$t(et.m,bt,ut,Qe)){et.a=3;break t}if(et.xb=Cd,$e.width=bt[0],$e.height=ut[0],!qe(bt[0],ut[0],1,et,null))break t;return 1}return e(et.a!=0),0}(T,ae)){if(ae=(P=fA(ae.width,ae.height,ge.Oa,ge.ba))==0){t:{ae=T;n:for(;;){if(ae==null){ae=0;break t}if(e(ae.s.yc!=null),e(ae.s.Ya!=null),e(0<ae.s.Wb),e((X=ae.l)!=null),e((ue=X.ma)!=null),ae.xb!=0){if(ae.ca=ue.ba,ae.tb=ue.tb,e(ae.ca!=null),!iu(ue.Oa,X,eh)){ae.a=2;break n}if(!tt(ae,X.width)||X.da)break n;if((X.da||un(ae.ca.S))&&Ke(),11>ae.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ae.ca.f.kb.F!=null&&Ke()),ae.Pb&&0<ae.s.ua&&ae.s.vb.X==null&&!Ze(ae.s.vb,ae.s.Wa.Xa)){ae.a=1;break n}ae.xb=0}if(!ke(ae,ae.V,ae.Ba,ae.c,ae.i,X.o,Be))break n;ue.Dc=ae.Ma,ae=1;break t}e(ae.a!=0),ae=0}ae=!ae}ae&&(P=T.a)}else P=T.a}else{if((T=new Ma)==null){ge=1;break e}if(T.Fa=ue.na,T.P=ue.P,T.qc=ue.Sa,Zc(T,ae)){if((P=fA(ae.width,ae.height,ge.Oa,ge.ba))==0){if(T.Aa=0,X=ge.Oa,e((ue=T)!=null),X!=null){if(0<(we=0>(we=X.Md)?0:100<we?255:255*we/100)){for(Ne=je=0;4>Ne;++Ne)12>(rt=ue.pb[Ne]).lc&&(rt.ia=we*nE[0>rt.lc?0:rt.lc]>>3),je|=rt.ia;je&&(alert("todo:VP8InitRandom"),ue.ia=1)}ue.Ga=X.Id,100<ue.Ga?ue.Ga=100:0>ue.Ga&&(ue.Ga=0)}oA(T,ae)||(P=T.a)}}else P=T.a}P==0&&ge.Oa!=null&&ge.Oa.fd&&(P=gd(ge.ba))}ge=P}he=ge!=0?null:11>he?xe.f.RGBA.eb:xe.f.kb.y}else he=null;return he};var f1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(_,B){for(var j="",D=0;D<4;D++)j+=String.fromCharCode(_[B++]);return j}function d(_,B){return(_[B+0]<<0|_[B+1]<<8|_[B+2]<<16)>>>0}function h(_,B){return(_[B+0]<<0|_[B+1]<<8|_[B+2]<<16|_[B+3]<<24)>>>0}new l;var m=[0],p=[0],y=[],x=new l,C=t,S=function(_,B){var j={},D=0,L=!1,Q=0,H=0;if(j.frames=[],!function(W,Z,re,se){for(var de=0;de<se;de++)if(W[Z+de]!=re.charCodeAt(de))return!0;return!1}(_,B,"RIFF",4)){var te,Y;for(h(_,B+=4),B+=8;B<_.length;){var ne=u(_,B),V=h(_,B+=4);B+=4;var J=V+(1&V);switch(ne){case"VP8 ":case"VP8L":j.frames[D]===void 0&&(j.frames[D]={}),(O=j.frames[D]).src_off=L?H:B-8,O.src_size=Q+V+8,D++,L&&(L=!1,Q=0,H=0);break;case"VP8X":(O=j.header={}).feature_flags=_[B];var K=B+4;O.canvas_width=1+d(_,K),K+=3,O.canvas_height=1+d(_,K),K+=3;break;case"ALPH":L=!0,Q=J+8,H=B-8;break;case"ANIM":(O=j.header).bgcolor=h(_,B),K=B+4,O.loop_count=(te=_)[(Y=K)+0]<<0|te[Y+1]<<8,K+=2;break;case"ANMF":var ie,O;(O=j.frames[D]={}).offset_x=2*d(_,B),B+=3,O.offset_y=2*d(_,B),B+=3,O.width=1+d(_,B),B+=3,O.height=1+d(_,B),B+=3,O.duration=d(_,B),B+=3,ie=_[B++],O.dispose=1&ie,O.blend=ie>>1&1}ne!="ANMF"&&(B+=J)}return j}}(C,0);S.response=C,S.rgbaoutput=!0,S.dataurl=!1;var k=S.header?S.header:null,I=S.frames?S.frames:null;if(k){k.loop_counter=k.loop_count,m=[k.canvas_height],p=[k.canvas_width];for(var F=0;F<I.length&&I[F].blend!=0;F++);}var U=I[0],R=x.WebPDecodeRGBA(C,U.src_off,U.src_size,p,m);U.rgba=R,U.imgwidth=p[0],U.imgheight=m[0];for(var E=0;E<p[0]*m[0]*4;E++)y[E]=R[E];return this.width=p,this.height=m,this.data=y,this}(function(t){var e=function(){return typeof U5=="function"},n=function(m,p,y,x){var C=4,S=i;switch(x){case t.image_compression.FAST:C=1,S=a;break;case t.image_compression.MEDIUM:C=6,S=o;break;case t.image_compression.SLOW:C=9,S=l}m=r(m,p,y,S);var k=U5(m,{level:C});return t.__addimage__.arrayBufferToBinaryString(k)},r=function(m,p,y,x){for(var C,S,k,I=m.length/p,F=new Uint8Array(m.length+I),U=d(),R=0;R<I;R+=1){if(k=R*p,C=m.subarray(k,k+p),x)F.set(x(C,y,S),k+R);else{for(var E,_=U.length,B=[];E<_;E+=1)B[E]=U[E](C,y,S);var j=h(B.concat());F.set(B[j],k+R)}S=C}return F},s=function(m){var p=Array.apply([],m);return p.unshift(0),p},a=function(m,p){var y,x=[],C=m.length;x[0]=1;for(var S=0;S<C;S+=1)y=m[S-p]||0,x[S+1]=m[S]-y+256&255;return x},i=function(m,p,y){var x,C=[],S=m.length;C[0]=2;for(var k=0;k<S;k+=1)x=y&&y[k]||0,C[k+1]=m[k]-x+256&255;return C},o=function(m,p,y){var x,C,S=[],k=m.length;S[0]=3;for(var I=0;I<k;I+=1)x=m[I-p]||0,C=y&&y[I]||0,S[I+1]=m[I]+256-(x+C>>>1)&255;return S},l=function(m,p,y){var x,C,S,k,I=[],F=m.length;I[0]=4;for(var U=0;U<F;U+=1)x=m[U-p]||0,C=y&&y[U]||0,S=y&&y[U-p]||0,k=u(x,C,S),I[U+1]=m[U]-k+256&255;return I},u=function(m,p,y){if(m===p&&p===y)return m;var x=Math.abs(p-y),C=Math.abs(m-y),S=Math.abs(m+p-y-y);return x<=C&&x<=S?m:C<=S?p:y},d=function(){return[s,a,i,o,l]},h=function(m){var p=m.map(function(y){return y.reduce(function(x,C){return x+Math.abs(C)},0)});return p.indexOf(Math.min.apply(null,p))};t.processPNG=function(m,p,y,x){var C,S,k,I,F,U,R,E,_,B,j,D,L,Q,H,te=this.decode.FLATE_DECODE,Y="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(k=new are(m)).imgData,S=k.bits,C=k.colorSpace,F=k.colors,[4,6].indexOf(k.colorType)!==-1){if(k.bits===8){_=(E=k.pixelBitlength==32?new Uint32Array(k.decodePixels().buffer):k.pixelBitlength==16?new Uint16Array(k.decodePixels().buffer):new Uint8Array(k.decodePixels().buffer)).length,j=new Uint8Array(_*k.colors),B=new Uint8Array(_);var ne,V=k.pixelBitlength-k.bits;for(Q=0,H=0;Q<_;Q++){for(L=E[Q],ne=0;ne<V;)j[H++]=L>>>ne&255,ne+=k.bits;B[Q]=L>>>ne&255}}if(k.bits===16){_=(E=new Uint32Array(k.decodePixels().buffer)).length,j=new Uint8Array(_*(32/k.pixelBitlength)*k.colors),B=new Uint8Array(_*(32/k.pixelBitlength)),D=k.colors>1,Q=0,H=0;for(var J=0;Q<_;)L=E[Q++],j[H++]=L>>>0&255,D&&(j[H++]=L>>>16&255,L=E[Q++],j[H++]=L>>>0&255),B[J++]=L>>>16&255;S=8}x!==t.image_compression.NONE&&e()?(m=n(j,k.width*k.colors,k.colors,x),R=n(B,k.width,1,x)):(m=j,R=B,te=void 0)}if(k.colorType===3&&(C=this.color_spaces.INDEXED,U=k.palette,k.transparency.indexed)){var K=k.transparency.indexed,ie=0;for(Q=0,_=K.length;Q<_;++Q)ie+=K[Q];if((ie/=255)===_-1&&K.indexOf(0)!==-1)I=[K.indexOf(0)];else if(ie!==_){for(E=k.decodePixels(),B=new Uint8Array(E.length),Q=0,_=E.length;Q<_;Q++)B[Q]=K[E[Q]];R=n(B,k.width,1)}}var O=function(W){var Z;switch(W){case t.image_compression.FAST:Z=11;break;case t.image_compression.MEDIUM:Z=13;break;case t.image_compression.SLOW:Z=14;break;default:Z=12}return Z}(x);return te===this.decode.FLATE_DECODE&&(Y="/Predictor "+O+" "),Y+="/Colors "+F+" /BitsPerComponent "+S+" /Columns "+k.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(R&&this.__addimage__.isArrayBuffer(R)||this.__addimage__.isArrayBufferView(R))&&(R=this.__addimage__.arrayBufferToBinaryString(R)),{alias:y,data:m,index:p,filter:te,decodeParameters:Y,transparency:I,palette:U,sMask:R,predictor:O,width:k.width,height:k.height,bitsPerComponent:S,colorSpace:C}}}})(hn.API),function(t){t.processGIF89A=function(e,n,r,s){var a=new ire(e),i=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:i,height:o},d=new O_(100).encode(u,100);return t.processJPEG.call(this,d,n,r,s)},t.processGIF87A=t.processGIF89A}(hn.API),Uc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:r,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Uc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){ds.log("bit decode error:"+n)}},Uc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}n!==0&&(this.pos+=4-n)}},Uc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<t;s++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+2*s*4,o=a>>4,l=15&a,u=this.palette[o];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*s+1>=this.width)break;u=this.palette[l],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},Uc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*r;if(s<this.palette.length){var i=this.palette[s];this.data[a]=i.red,this.data[a+1]=i.green,this.data[a+2]=i.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},Uc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(a&e)/e*255|0,o=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,u=a>>15?255:0,d=r*this.width*4+4*s;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=u}this.pos+=t}},Uc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,l=(i>>5&n)/n*255|0,u=(i>>11)/e*255|0,d=s*this.width*4+4*a;this.data[d]=u,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},Uc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*n;this.data[i]=a,this.data[i+1]=s,this.data[i+2]=r,this.data[i+3]=255}this.pos+=this.width%4}},Uc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=a,this.data[o+1]=s,this.data[o+2]=r,this.data[o+3]=i}},Uc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,s){var a=new Uc(e,!1),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},u=new O_(100).encode(l,100);return t.processJPEG.call(this,u,n,r,s)}}(hn.API),W6.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,s){var a=new W6(e),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},u=new O_(100).encode(l,100);return t.processJPEG.call(this,u,n,r,s)}}(hn.API),hn.API.processRGBA=function(t,e,n){for(var r=t.data,s=r.length,a=new Uint8Array(s/4*3),i=new Uint8Array(s/4),o=0,l=0,u=0;u<s;u+=4){var d=r[u],h=r[u+1],m=r[u+2],p=r[u+3];a[o++]=d,a[o++]=h,a[o++]=m,i[l++]=p}var y=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:y,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},hn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},tm=hn.API,xy=tm.getCharWidthsArray=function(t,e){var n,r,s=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,l=o.fof?o.fof:1,u=e.kerning?e.kerning:s.metadata.Unicode.kerning,d=u.fof?u.fof:1,h=e.doKerning!==!1,m=0,p=t.length,y=0,x=o[0]||l,C=[];for(n=0;n<p;n++)r=t.charCodeAt(n),typeof s.metadata.widthOfString=="function"?C.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+i*(1e3/a)||0)/1e3):(m=h&&es(u[r])==="object"&&!isNaN(parseInt(u[r][y],10))?u[r][y]/d:0,C.push((o[r]||x)/l+m)),y=r;return C},G6=tm.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return tm.processArabic&&(t=tm.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,s)/n:xy.apply(this,arguments).reduce(function(a,i){return a+i},0)},q6=function(t,e,n,r){for(var s=[],a=0,i=t.length,o=0;a!==i&&o+e[a]<n;)o+=e[a],a++;s.push(t.slice(0,a));var l=a;for(o=0;a!==i;)o+e[a]>r&&(s.push(t.slice(l,a)),o=0,l=a),o+=e[a],a++;return l!==a&&s.push(t.slice(l,a)),s},K6=function(t,e,n){n||(n={});var r,s,a,i,o,l,u,d=[],h=[d],m=n.textIndent||0,p=0,y=0,x=t.split(" "),C=xy.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?x[0].length+2:n.lineIndent||0){var S=Array(l).join(" "),k=[];x.map(function(F){(F=F.split(/\s*\n/)).length>1?k=k.concat(F.map(function(U,R){return(R&&U.length?`
`:"")+U})):k.push(F[0])}),x=k,l=G6.apply(this,[S,n])}for(a=0,i=x.length;a<i;a++){var I=0;if(r=x[a],l&&r[0]==`
`&&(r=r.substr(1),I=1),m+p+(y=(s=xy.apply(this,[r,n])).reduce(function(F,U){return F+U},0))>e||I){if(y>e){for(o=q6.apply(this,[r,s,e-(m+p),e]),d.push(o.shift()),d=[o.pop()];o.length;)h.push([o.shift()]);y=s.slice(r.length-(d[0]?d[0].length:0)).reduce(function(F,U){return F+U},0)}else d=[r];h.push(d),m=y+l,p=C}else d.push(r),m+=p+y,p=C}return u=l?function(F,U){return(U?S:"")+F.join(" ")}:function(F){return F.join(" ")},h.map(u)},tm.splitTextToSize=function(t,e,n){var r,s=(n=n||{}).fontSize||this.internal.getFontSize(),a=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var h=this.internal.getFont(d.fontName,d.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/s;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/s:0,a.lineIndent=n.lineIndent;var o,l,u=[];for(o=0,l=r.length;o<l;o++)u=u.concat(K6.apply(this,[r[o],i,a]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},s=0;s<e.length;s++)n[e[s]]="0123456789abcdef"[s],r["0123456789abcdef"[s]]=e[s];var a=function(h){return"0x"+parseInt(h,10).toString(16)},i=t.__fontmetrics__.compress=function(h){var m,p,y,x,C=["{"];for(var S in h){if(m=h[S],isNaN(parseInt(S,10))?p="'"+S+"'":(S=parseInt(S,10),p=(p=a(S).slice(2)).slice(0,-1)+r[p.slice(-1)]),typeof m=="number")m<0?(y=a(m).slice(3),x="-"):(y=a(m).slice(2),x=""),y=x+y.slice(0,-1)+r[y.slice(-1)];else{if(es(m)!=="object")throw new Error("Don't know what to do with value type "+es(m)+".");y=i(m)}C.push(p+y)}return C.push("}"),C.join("")},o=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,p,y,x,C={},S=1,k=C,I=[],F="",U="",R=h.length-1,E=1;E<R;E+=1)(x=h[E])=="'"?m?(y=m.join(""),m=void 0):m=[]:m?m.push(x):x=="{"?(I.push([k,y]),k={},y=void 0):x=="}"?((p=I.pop())[0][p[1]]=k,y=void 0,k=p[0]):x=="-"?S=-1:y===void 0?n.hasOwnProperty(x)?(F+=n[x],y=parseInt(F,16)*S,S=1,F=""):F+=x:n.hasOwnProperty(x)?(U+=n[x],k[y]=parseInt(U,16)*S,S=1,y=void 0,U=""):U+=x;return C},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var m=h.font,p=d.Unicode[m.postScriptName];p&&(m.metadata.Unicode={},m.metadata.Unicode.widths=p.widths,m.metadata.Unicode.kerning=p.kerning);var y=u.Unicode[m.postScriptName];y&&(m.metadata.Unicode.encoding=y,m.encoding=y.codePages[0])}])}(hn.API),function(t){var e=function(n){for(var r=n.length,s=new Uint8Array(r),a=0;a<r;a++)s[a]=n.charCodeAt(a);return s};t.API.events.push(["addFont",function(n){var r=void 0,s=n.font,a=n.instance;if(!s.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=a.existsFileInVFS(s.postScriptName)===!1?a.loadFile(s.postScriptName):a.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(wx(o)),i.metadata=t.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(s,r)}}])}(hn),function(t){function e(){return(Fn.canvg?Promise.resolve(Fn.canvg):Bw(()=>import("./index.es-Dwg7VwnW.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}hn.API.addSvgAsImage=function(n,r,s,a,i,o,l,u){if(isNaN(r)||isNaN(s))throw ds.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(i))throw ds.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=a,d.height=i;var h=d.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,d.width,d.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then(function(y){return y.fromString(h,n,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(m)}).then(function(){p.addImage(d.toDataURL("image/jpeg",1),r,s,a,i,l,u)})}}(),hn.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(e,n);return this},hn.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,s,a,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),l=[],u=0,d=0,h=0;function m(y,x){var C,S=!1;for(C=0;C<y.length;C+=1)y[C]===x&&(S=!0);return S}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var p=o.length;for(h=0;h<p;h+=1)n[o[h]].value=n[o[h]].defaultValue,n[o[h]].explicitSet=!1}if(es(t)==="object"){for(s in t)if(a=t[s],m(o,s)&&a!==void 0){if(n[s].type==="boolean"&&typeof a=="boolean")n[s].value=a;else if(n[s].type==="name"&&m(n[s].valueSet,a))n[s].value=a;else if(n[s].type==="integer"&&Number.isInteger(a))n[s].value=a;else if(n[s].type==="array"){for(u=0;u<a.length;u+=1)if(r=!0,a[u].length===1&&typeof a[u][0]=="number")l.push(String(a[u]-1));else if(a[u].length>1){for(d=0;d<a[u].length;d+=1)typeof a[u][d]!="number"&&(r=!1);r===!0&&l.push([a[u][0]-1,a[u][1]-1].join(" "))}n[s].value="["+l.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,x=[];for(y in n)n[y].explicitSet===!0&&(n[y].type==="name"?x.push("/"+y+" /"+n[y].value):x.push("/"+y+" "+n[y].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=a.length+i.length+o.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(s+a+i+o+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(hn.API),function(t){var e=t.API,n=e.pdfEscape16=function(a,i){for(var o,l=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],h=0,m=a.length;h<m;++h){if(o=i.metadata.characterToGlyph(a.charCodeAt(h)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=a.charCodeAt(h),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},r=function(a){var i,o,l,u,d,h,m;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,m=(o=Object.keys(a).sort(function(p,y){return p-y})).length;h<m;h++)i=o[h],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[i]!==void 0&&a[i]!==null&&typeof a[i].toString=="function"&&(u=("0000"+a[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),l.push("<"+i+"><"+u+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var h=o.metadata.Unicode.widths,m=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",y=0;y<m.length;y++)p+=String.fromCharCode(m[y]);var x=u();d({data:p,addLength1:!0,objectId:x}),l("endobj");var C=u();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:C}),l("endobj");var S=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+_m(o.fontName)),l("/FontFile2 "+x+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var k=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+_m(o.fontName)),l("/FontDescriptor "+S+" 0 R"),l("/W "+t.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+C+" 0 R"),l("/BaseFont /"+_m(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+k+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var h=o.metadata.rawData,m="",p=0;p<h.length;p++)m+=String.fromCharCode(h[p]);var y=u();d({data:m,addLength1:!0,objectId:y}),l("endobj");var x=u();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:x}),l("endobj");var C=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+y+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+_m(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var S=0;S<o.metadata.hmtx.widths.length;S++)o.metadata.hmtx.widths[S]=parseInt(o.metadata.hmtx.widths[S]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+_m(o.fontName)+"/FontDescriptor "+C+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]);var s=function(a){var i,o=a.text||"",l=a.x,u=a.y,d=a.options||{},h=a.mutex||{},m=h.pdfEscape,p=h.activeFontKey,y=h.fonts,x=p,C="",S=0,k="",I=y[x].encoding;if(y[x].encoding!=="Identity-H")return{text:o,x:l,y:u,options:d,mutex:h};for(k=o,x=p,Array.isArray(o)&&(k=o[0]),S=0;S<k.length;S+=1)y[x].metadata.hasOwnProperty("cmap")&&(i=y[x].metadata.cmap.unicode.codeMap[k[S].charCodeAt(0)]),i||k[S].charCodeAt(0)<256&&y[x].metadata.hasOwnProperty("Unicode")?C+=k[S]:C+="";var F="";return parseInt(x.slice(1))<14||I==="WinAnsiEncoding"?F=m(C,x).split("").map(function(U){return U.charCodeAt(0).toString(16)}).join(""):I==="Identity-H"&&(F=n(C,y[x])),h.isHex=!0,{text:F,x:l,y:u,options:d,mutex:h}};e.events.push(["postProcessText",function(a){var i=a.text||"",o=[],l={text:i,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?o.push([s(Object.assign({},l,{text:i[u][0]})).text,i[u][1],i[u][2]]):o.push(s(Object.assign({},l,{text:i[u]})).text);a.text=o}else a.text=s(Object.assign({},l,{text:i})).text}])}(hn),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(hn.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var s,a,i,o,l,u,d,h=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},C=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],S=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),k=!1,I=0;this.__bidiEngine__={};var F=function(D){var L=D.charCodeAt(),Q=L>>8,H=x[Q];return H!==void 0?h[256*H+(255&L)]:Q===252||Q===253?"AL":S.test(Q)?"L":Q===8?"R":"N"},U=function(D){for(var L,Q=0;Q<D.length;Q++){if((L=F(D.charAt(Q)))==="L")return!1;if(L==="R")return!0}return!1},R=function(D,L,Q,H){var te,Y,ne,V,J=L[H];switch(J){case"L":case"R":k=!1;break;case"N":case"AN":break;case"EN":k&&(J="AN");break;case"AL":k=!0,J="R";break;case"WS":J="N";break;case"CS":H<1||H+1>=L.length||(te=Q[H-1])!=="EN"&&te!=="AN"||(Y=L[H+1])!=="EN"&&Y!=="AN"?J="N":k&&(Y="AN"),J=Y===te?Y:"N";break;case"ES":J=(te=H>0?Q[H-1]:"B")==="EN"&&H+1<L.length&&L[H+1]==="EN"?"EN":"N";break;case"ET":if(H>0&&Q[H-1]==="EN"){J="EN";break}if(k){J="N";break}for(ne=H+1,V=L.length;ne<V&&L[ne]==="ET";)ne++;J=ne<V&&L[ne]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(V=L.length,ne=H+1;ne<V&&L[ne]==="NSM";)ne++;if(ne<V){var K=D[H],ie=K>=1425&&K<=2303||K===64286;if(te=L[ne],ie&&(te==="R"||te==="AL")){J="R";break}}}J=H<1||(te=L[H-1])==="B"?"N":Q[H-1];break;case"B":k=!1,s=!0,J=I;break;case"S":a=!0,J="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":k=!1;break;case"BN":J="N"}return J},E=function(D,L,Q){var H=D.split("");return Q&&_(H,Q,{hiLevel:I}),H.reverse(),L&&L.reverse(),H.join("")},_=function(D,L,Q){var H,te,Y,ne,V,J=-1,K=D.length,ie=0,O=[],W=I?p:m,Z=[];for(k=!1,s=!1,a=!1,te=0;te<K;te++)Z[te]=F(D[te]);for(Y=0;Y<K;Y++){if(V=ie,O[Y]=R(D,Z,O,Y),H=240&(ie=W[V][y[O[Y]]]),ie&=15,L[Y]=ne=W[ie][5],H>0)if(H===16){for(te=J;te<Y;te++)L[te]=1;J=-1}else J=-1;if(W[ie][6])J===-1&&(J=Y);else if(J>-1){for(te=J;te<Y;te++)L[te]=ne;J=-1}Z[Y]==="B"&&(L[Y]=0),Q.hiLevel|=ne}a&&function(re,se,de){for(var pe=0;pe<de;pe++)if(re[pe]==="S"){se[pe]=I;for(var be=pe-1;be>=0&&re[be]==="WS";be--)se[be]=I}}(Z,L,K)},B=function(D,L,Q,H,te){if(!(te.hiLevel<D)){if(D===1&&I===1&&!s)return L.reverse(),void(Q&&Q.reverse());for(var Y,ne,V,J,K=L.length,ie=0;ie<K;){if(H[ie]>=D){for(V=ie+1;V<K&&H[V]>=D;)V++;for(J=ie,ne=V-1;J<ne;J++,ne--)Y=L[J],L[J]=L[ne],L[ne]=Y,Q&&(Y=Q[J],Q[J]=Q[ne],Q[ne]=Y);ie=V}ie++}}},j=function(D,L,Q){var H=D.split(""),te={hiLevel:I};return Q||(Q=[]),_(H,Q,te),function(Y,ne,V){if(V.hiLevel!==0&&d)for(var J,K=0;K<Y.length;K++)ne[K]===1&&(J=C.indexOf(Y[K]))>=0&&(Y[K]=C[J+1])}(H,Q,te),B(2,H,L,Q,te),B(1,H,L,Q,te),H.join("")};return this.__bidiEngine__.doBidiReorder=function(D,L,Q){if(function(te,Y){if(Y)for(var ne=0;ne<te.length;ne++)Y[ne]=ne;o===void 0&&(o=U(te)),u===void 0&&(u=U(te))}(D,L),i||!l||u)if(i&&l&&o^u)I=o?1:0,D=E(D,L,Q);else if(!i&&l&&u)I=o?1:0,D=j(D,L,Q),D=E(D,L);else if(!i||o||l||u){if(i&&!l&&o^u)D=E(D,L),o?(I=0,D=j(D,L,Q)):(I=1,D=j(D,L,Q),D=E(D,L));else if(i&&o&&!l&&u)I=1,D=j(D,L,Q),D=E(D,L);else if(!i&&!l&&o^u){var H=d;o?(I=1,D=j(D,L,Q),I=0,d=!1,D=j(D,L,Q),d=H):(I=0,D=j(D,L,Q),D=E(D,L),I=1,d=!1,D=j(D,L,Q),d=H,D=E(D,L))}}else I=0,D=j(D,L,Q);else I=o?1:0,D=j(D,L,Q);return D},this.__bidiEngine__.setOptions=function(D){D&&(i=D.isInputVisual,l=D.isOutputVisual,o=D.isInputRtl,u=D.isOutputRtl,d=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var s=r.text,a=(r.x,r.y,r.options||{}),i=(r.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,n.setOptions(a),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(i=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?i.push([n.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):i.push([n.doBidiReorder(s[o])]);r.text=i}else r.text=n.doBidiReorder(s);n.setOptions({isInputVisual:!0})}])}(hn),hn.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new jf(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new wre(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new ore(this.contents),this.head=new cre(this),this.name=new hre(this),this.cmap=new qj(this),this.toUnicode={},this.hhea=new ure(this),this.maxp=new mre(this),this.hmtx=new pre(this),this.post=new dre(this),this.os2=new Are(this),this.loca=new yre(this),this.glyf=new gre(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,s,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,l,u;for(u=[],i=0,o=(l=this.bbox).length;i<o;i++)e=l[i],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),(32768&(n=s>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var s,a,i,o;for(i=0,a=0,o=(e=""+e).length;0<=o?a<o:a>o;a=0<=o?++a:--a)s=e.charCodeAt(a),i+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/n)||0;return i*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Yc,jf=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,s;for(s=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)s.push(this.writeByte(e.charCodeAt(n)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,s,a,i,o,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^a)+65536*(255^i)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*s+16777216*a+65536*i+256*o+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,s,a;for(a=[],r=0,s=e.length;r<s;r++)n=e[r],a.push(this.writeByte(n));return a},t}(),ore=function(){var t;function e(n){var r,s,a;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},s=0,a=this.tableCount;0<=a?s<a:s>a;s=0<=a?++s:--s)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,s,a,i,o,l,u,d,h,m,p,y,x;for(x in p=Object.keys(n).length,l=Math.log(2),h=16*Math.floor(Math.log(p)/l),i=Math.floor(h/l),d=16*p-h,(s=new jf).writeInt(this.scalarType),s.writeShort(p),s.writeShort(h),s.writeShort(i),s.writeShort(d),a=16*p,u=s.pos+a,o=null,y=[],n)for(m=n[x],s.writeString(x),s.writeInt(t(m)),s.writeInt(u),s.writeInt(m.length),y=y.concat(m),x==="head"&&(o=u),u+=m.length;u%4;)y.push(0),u++;return s.write(y),r=2981146554-t(s.data),s.pos=o+8,s.writeUInt32(r),s.data},t=function(n){var r,s,a,i;for(n=Kj.call(n);n.length%4;)n.push(0);for(a=new jf(n),s=0,r=0,i=n.length;r<i;r=r+=4)s+=a.readUInt32();return 4294967295&s},e}(),lre={}.hasOwnProperty,tA=function(t,e){for(var n in e)lre.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Yc=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var cre=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return tA(e,Yc),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new jf).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),Y6=function(){function t(e,n){var r,s,a,i,o,l,u,d,h,m,p,y,x,C,S,k,I;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),m=p/2,e.pos+=6,a=function(){var F,U;for(U=[],l=F=0;0<=m?F<m:F>m;l=0<=m?++F:--F)U.push(e.readUInt16());return U}(),e.pos+=2,x=function(){var F,U;for(U=[],l=F=0;0<=m?F<m:F>m;l=0<=m?++F:--F)U.push(e.readUInt16());return U}(),u=function(){var F,U;for(U=[],l=F=0;0<=m?F<m:F>m;l=0<=m?++F:--F)U.push(e.readUInt16());return U}(),d=function(){var F,U;for(U=[],l=F=0;0<=m?F<m:F>m;l=0<=m?++F:--F)U.push(e.readUInt16());return U}(),s=(this.length-e.pos+this.offset)/2,o=function(){var F,U;for(U=[],l=F=0;0<=s?F<s:F>s;l=0<=s?++F:--F)U.push(e.readUInt16());return U}(),l=S=0,I=a.length;S<I;l=++S)for(C=a[l],r=k=y=x[l];y<=C?k<=C:k>=C;r=y<=C?++k:--k)d[l]===0?i=r+u[l]:(i=o[d[l]/2+(r-y)-(m-l)]||0)!==0&&(i+=u[l]),this.codeMap[r]=65535&i}e.pos=h}return t.encode=function(e,n){var r,s,a,i,o,l,u,d,h,m,p,y,x,C,S,k,I,F,U,R,E,_,B,j,D,L,Q,H,te,Y,ne,V,J,K,ie,O,W,Z,re,se,de,pe,be,Se,me,ce;switch(H=new jf,i=Object.keys(e).sort(function(Me,Ze){return Me-Ze}),n){case"macroman":for(x=0,C=function(){var Me=[];for(y=0;y<256;++y)Me.push(0);return Me}(),k={0:0},a={},te=0,J=i.length;te<J;te++)k[be=e[s=i[te]]]==null&&(k[be]=++x),a[s]={old:e[s],new:k[e[s]]},C[s]=k[e[s]];return H.writeUInt16(1),H.writeUInt16(0),H.writeUInt32(12),H.writeUInt16(0),H.writeUInt16(262),H.writeUInt16(0),H.write(C),{charMap:a,subtable:H.data,maxGlyphID:x+1};case"unicode":for(L=[],h=[],I=0,k={},r={},S=u=null,Y=0,K=i.length;Y<K;Y++)k[U=e[s=i[Y]]]==null&&(k[U]=++I),r[s]={old:U,new:k[U]},o=k[U]-s,S!=null&&o===u||(S&&h.push(S),L.push(s),u=o),S=s;for(S&&h.push(S),h.push(65535),L.push(65535),j=2*(B=L.length),_=2*Math.pow(Math.log(B)/Math.LN2,2),m=Math.log(_/2)/Math.LN2,E=2*B-_,l=[],R=[],p=[],y=ne=0,ie=L.length;ne<ie;y=++ne){if(D=L[y],d=h[y],D===65535){l.push(0),R.push(0);break}if(D-(Q=r[D].new)>=32768)for(l.push(0),R.push(2*(p.length+B-y)),s=V=D;D<=d?V<=d:V>=d;s=D<=d?++V:--V)p.push(r[s].new);else l.push(Q-D),R.push(0)}for(H.writeUInt16(3),H.writeUInt16(1),H.writeUInt32(12),H.writeUInt16(4),H.writeUInt16(16+8*B+2*p.length),H.writeUInt16(0),H.writeUInt16(j),H.writeUInt16(_),H.writeUInt16(m),H.writeUInt16(E),de=0,O=h.length;de<O;de++)s=h[de],H.writeUInt16(s);for(H.writeUInt16(0),pe=0,W=L.length;pe<W;pe++)s=L[pe],H.writeUInt16(s);for(Se=0,Z=l.length;Se<Z;Se++)o=l[Se],H.writeUInt16(o);for(me=0,re=R.length;me<re;me++)F=R[me],H.writeUInt16(F);for(ce=0,se=p.length;ce<se;ce++)x=p[ce],H.writeUInt16(x);return{charMap:r,subtable:H.data,maxGlyphID:I+1}}},t}(),qj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return tA(e,Yc),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,s,a;for(n.pos=this.offset,this.version=n.readUInt16(),a=n.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)r=new Y6(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var s,a;return r==null&&(r="macroman"),s=Y6.encode(n,r),(a=new jf).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},e}(),ure=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return tA(e,Yc),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),Are=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return tA(e,Yc),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,s;for(s=[],r=0;r<10;++r)s.push(n.readByte());return s}(),this.charRange=function(){var r,s;for(s=[],r=0;r<4;++r)s.push(n.readInt());return s}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,s;for(s=[],r=0;r<2;r=++r)s.push(n.readInt());return s}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),dre=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return tA(e,Yc),e.prototype.tag="post",e.prototype.parse=function(n){var r,s,a;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var i;for(s=n.readUInt16(),this.glyphNameIndex=[],i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],a=[];n.pos<this.offset+this.length;)r=n.readByte(),a.push(this.names.push(n.readString(r)));return a;case 151552:return s=n.readUInt16(),this.offsets=n.read(s);case 196608:break;case 262144:return this.map=(function(){var o,l,u;for(u=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)u.push(n.readUInt32());return u}).call(this)}},e}(),fre=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},hre=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return tA(e,Yc),e.prototype.tag="name",e.prototype.parse=function(n){var r,s,a,i,o,l,u,d,h,m,p;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),s=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)s.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(u={},i=h=0,m=s.length;h<m;i=++h)a=s[i],n.pos=a.offset,d=n.readString(a.length),o=new fre(d,a),u[p=a.nameID]==null&&(u[p]=[]),u[a.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),mre=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return tA(e,Yc),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),pre=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return tA(e,Yc),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,s,a,i,o,l,u;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,h;for(h=[],r=d=0;0<=a?d<a:d>a;r=0<=a?++d:--d)h.push(n.readInt16());return h}(),this.widths=(function(){var d,h,m,p;for(p=[],d=0,h=(m=this.metrics).length;d<h;d++)i=m[d],p.push(i.advance);return p}).call(this),s=this.widths[this.widths.length-1],u=[],r=o=0;0<=a?o<a:o>a;r=0<=a?++o:--o)u.push(this.widths.push(s));return u},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),Kj=[].slice,gre=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return tA(e,Yc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,s,a,i,o,l,u,d,h,m;return n in this.cache?this.cache[n]:(i=this.file.loca,r=this.file.contents,s=i.indexOf(n),(a=i.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+s,o=(l=new jf(r.read(a))).readShort(),d=l.readShort(),m=l.readShort(),u=l.readShort(),h=l.readShort(),this.cache[n]=o===-1?new vre(l,d,m,u,h):new xre(l,o,d,m,u,h),this.cache[n]))},e.prototype.encode=function(n,r,s){var a,i,o,l,u;for(o=[],i=[],l=0,u=r.length;l<u;l++)a=n[r[l]],i.push(o.length),a&&(o=o.concat(a.encode(s)));return i.push(o.length),{table:o,offsets:i}},e}(),xre=function(){function t(e,n,r,s,a,i){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=s,this.xMax=a,this.yMax=i,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),vre=function(){function t(e,n,r,s,a){var i,o;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=s,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new jf(Kj.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),yre=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return tA(e,Yc),e.prototype.tag="loca",e.prototype.parse=function(n){var r,s;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=2)i.push(2*n.readUInt16());return i}).call(this):(function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=4)i.push(n.readUInt32());return i}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var s=new Uint32Array(this.offsets.length),a=0,i=0,o=0;o<s.length;++o)if(s[o]=a,i<r.length&&r[i]==o){++i,s[o]=a;var l=this.offsets[o],u=this.offsets[o+1]-l;u>0&&(a+=u)}for(var d=new Array(4*s.length),h=0;h<s.length;++h)d[4*h+3]=255&s[h],d[4*h+2]=(65280&s[h])>>8,d[4*h+1]=(16711680&s[h])>>16,d[4*h]=(4278190080&s[h])>>24;return d},e}(),wre=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,s,a;for(n in s=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[n],e[n]=s[r];return e},t.prototype.glyphsFor=function(e){var n,r,s,a,i,o,l;for(s={},i=0,o=e.length;i<o;i++)s[a=e[i]]=this.font.glyf.glyphFor(a);for(a in n=[],s)(r=s[a])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(a in l=this.glyphsFor(n))r=l[a],s[a]=r;return s},t.prototype.encode=function(e,n){var r,s,a,i,o,l,u,d,h,m,p,y,x,C,S;for(s in r=qj.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),p={0:0},S=r.charMap)p[(l=S[s]).old]=l.new;for(y in m=r.maxGlyphID,i)y in p||(p[y]=m++);return d=function(k){var I,F;for(I in F={},k)F[k[I]]=I;return F}(p),h=Object.keys(d).sort(function(k,I){return k-I}),x=function(){var k,I,F;for(F=[],k=0,I=h.length;k<I;k++)o=h[k],F.push(d[o]);return F}(),a=this.font.glyf.encode(i,x,p),u=this.font.loca.encode(a.offsets,x),C={cmap:this.font.cmap.raw(),glyf:a.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(C["OS/2"]=this.font.os2.raw()),this.font.directory.encode(C)},t}();hn.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,s,a,i;if(Array.isArray(n))return"["+function(){var o,l,u;for(u=[],o=0,l=n.length;o<l;o++)r=n[o],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(s in a=["<<"],n)i=n[s],a.push("/"+s+" "+e.convert(i));return a.push(">>"),a.join(`
`)}return""+n},e}();function $j(t,e,n,r,s){r=r||{};var a=1.15,i=s.internal.scaleFactor,o=s.internal.getFontSize()/i,l=s.getLineHeightFactor?s.getLineHeightFactor():a,u=o*l,d=/\r\n|\r|\n/g,h="",m=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(h=typeof t=="string"?t.split(d):t,m=h.length||1),n+=o*(2-a),r.valign==="middle"?n-=m/2*u:r.valign==="bottom"&&(n-=m*u),r.halign==="center"||r.halign==="right"){var p=o;if(r.halign==="center"&&(p*=.5),h&&m>=1){for(var y=0;y<h.length;y++)s.text(h[y],e-s.getStringUnitWidth(h[y])*p,n),n+=u;return s}e-=s.getStringUnitWidth(t)*p}return r.halign==="justify"?s.text(t,e,n,{maxWidth:r.maxWidth||100,align:"justify"}):s.text(t,e,n),s}var X6={},Km=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=e:X6=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,n){var r,s,a;n===void 0&&(n=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,l=i.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!n){var d=t.unifyColor(e.fillColor);d&&(r=this.jsPDFDocument).setFillColor.apply(r,d),d=t.unifyColor(e.textColor),d&&(s=this.jsPDFDocument).setTextColor.apply(s,d),d=t.unifyColor(e.lineColor),d&&(a=this.jsPDFDocument).setDrawColor.apply(a,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,n,r){return this.jsPDFDocument.splitTextToSize(e,n,r)},t.prototype.rect=function(e,n,r,s,a){return this.jsPDFDocument.rect(e,n,r,s,a)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return X6||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),V5=function(t,e){return V5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},V5(t,e)};function Wj(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");V5(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Yj=function(t){Wj(e,t);function e(n){var r=t.call(this)||this;return r._element=n,r}return e}(Array);function bre(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Cre(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function Fw(t,e,n){n.applyStyles(e,!0);var r=Array.isArray(t)?t:[t],s=r.map(function(a){return n.getTextWidth(a)}).reduce(function(a,i){return Math.max(a,i)},0);return s}function Xj(t,e,n,r){var s=e.settings.tableLineWidth,a=e.settings.tableLineColor;t.applyStyles({lineWidth:s,lineColor:a});var i=Jj(s,!1);i&&t.rect(n.x,n.y,e.getWidth(t.pageSize().width),r.y-n.y,i)}function Jj(t,e){var n=t>0,r=e||e===0;return n&&r?"DF":n?"S":r?"F":null}function oC(t,e){var n,r,s,a;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(n=t.left)!==null&&n!==void 0?n:e,top:(r=t.top)!==null&&r!==void 0?r:e,right:(s=t.right)!==null&&s!==void 0?s:e,bottom:(a=t.bottom)!==null&&a!==void 0?a:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function Zj(t,e){var n=oC(e.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function Ere(t,e,n,r,s){var a={},i=1.3333333333333333,o=j_(e,function(I){return s.getComputedStyle(I).backgroundColor});o!=null&&(a.fillColor=o);var l=j_(e,function(I){return s.getComputedStyle(I).color});l!=null&&(a.textColor=l);var u=Sre(r,n);u&&(a.cellPadding=u);var d="borderTopColor",h=i*n,m=r.borderTopWidth;if(r.borderBottomWidth===m&&r.borderRightWidth===m&&r.borderLeftWidth===m){var p=(parseFloat(m)||0)/h;p&&(a.lineWidth=p)}else a.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/h,right:(parseFloat(r.borderRightWidth)||0)/h,bottom:(parseFloat(r.borderBottomWidth)||0)/h,left:(parseFloat(r.borderLeftWidth)||0)/h},a.lineWidth.top||(a.lineWidth.right?d="borderRightColor":a.lineWidth.bottom?d="borderBottomColor":a.lineWidth.left&&(d="borderLeftColor"));var y=j_(e,function(I){return s.getComputedStyle(I)[d]});y!=null&&(a.lineColor=y);var x=["left","right","center","justify"];x.indexOf(r.textAlign)!==-1&&(a.halign=r.textAlign),x=["middle","bottom","top"],x.indexOf(r.verticalAlign)!==-1&&(a.valign=r.verticalAlign);var C=parseInt(r.fontSize||"");isNaN(C)||(a.fontSize=C/i);var S=_re(r);S&&(a.fontStyle=S);var k=(r.fontFamily||"").toLowerCase();return t.indexOf(k)!==-1&&(a.font=k),a}function _re(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function j_(t,e){var n=e7(t,e);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var s=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],a=parseInt(r[4]);return a===0||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function e7(t,e){var n=e(t);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?t.parentElement==null?null:e7(t.parentElement,e):n}function Sre(t,e){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],r=96/(72/e),s=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,a=n.map(function(o){return parseInt(o||"0")/r}),i=oC(a,0);return s>i.top&&(i.top=s),s>i.bottom&&(i.bottom=s),i}function t7(t,e,n,r,s){var a,i;r===void 0&&(r=!1),s===void 0&&(s=!1);var o;typeof e=="string"?o=n.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),u=t.scaleFactor(),d=[],h=[],m=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:d,body:h,foot:m};for(var p=0;p<o.rows.length;p++){var y=o.rows[p],x=(i=(a=y==null?void 0:y.parentElement)===null||a===void 0?void 0:a.tagName)===null||i===void 0?void 0:i.toLowerCase(),C=Tre(l,u,n,y,r,s);C&&(x==="thead"?d.push(C):x==="tfoot"?m.push(C):h.push(C))}return{head:d,body:h,foot:m}}function Tre(t,e,n,r,s,a){for(var i=new Yj(r),o=0;o<r.cells.length;o++){var l=r.cells[o],u=n.getComputedStyle(l);if(s||u.display!=="none"){var d=void 0;a&&(d=Ere(t,l,e,u,n)),i.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:Nre(l)})}}var h=n.getComputedStyle(r);if(i.length>0&&(s||h.display!=="none"))return i}function Nre(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),e.innerText||e.textContent||""}function Bre(t,e,n){for(var r=0,s=[t,e,n];r<s.length;r++){var a=s[r];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function HA(t,e,n,r,s){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a}function n7(t,e){var n=new Km(t),r=n.getDocumentOptions(),s=n.getGlobalOptions();Bre(s,r,e);var a=HA({},s,r,e),i;typeof window<"u"&&(i=window);var o=kre(s,r,e),l=Ire(s,r,e),u=Fre(n,a),d=Rre(n,a,i);return{id:e.tableId,content:d,hooks:l,styles:o,settings:u}}function kre(t,e,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(l){if(l==="columnStyles"){var u=t[l],d=e[l],h=n[l];r.columnStyles=HA({},u,d,h)}else{var m=[t,e,n],p=m.map(function(y){return y[l]||{}});r[l]=HA({},p[0],p[1],p[2])}},a=0,i=Object.keys(r);a<i.length;a++){var o=i[a];s(o)}return r}function Ire(t,e,n){for(var r=[t,e,n],s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,i=r;a<i.length;a++){var o=i[a];o.didParseCell&&s.didParseCell.push(o.didParseCell),o.willDrawCell&&s.willDrawCell.push(o.willDrawCell),o.didDrawCell&&s.didDrawCell.push(o.didDrawCell),o.willDrawPage&&s.willDrawPage.push(o.willDrawPage),o.didDrawPage&&s.didDrawPage.push(o.didDrawPage)}return s}function Fre(t,e){var n,r,s,a,i,o,l,u,d,h,m,p,y=oC(e.margin,40/t.scaleFactor()),x=(n=Dre(t,e.startY))!==null&&n!==void 0?n:y.top,C;e.showFoot===!0?C="everyPage":e.showFoot===!1?C="never":C=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var S;e.showHead===!0?S="everyPage":e.showHead===!1?S="never":S=(s=e.showHead)!==null&&s!==void 0?s:"everyPage";var k=(a=e.useCss)!==null&&a!==void 0?a:!1,I=e.theme||(k?"plain":"striped"),F=!!e.horizontalPageBreak,U=(i=e.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:k,theme:I,startY:x,margin:y,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:S,showFoot:C,tableLineWidth:(h=e.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(m=e.tableLineColor)!==null&&m!==void 0?m:200,horizontalPageBreak:F,horizontalPageBreakRepeat:U,horizontalPageBreakBehaviour:(p=e.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function Dre(t,e){var n=t.getLastAutoTable(),r=t.scaleFactor(),s=t.pageNumber(),a=!1;if(n&&n.startPageNumber){var i=n.startPageNumber+n.pageNumber-1;a=i===s}return typeof e=="number"?e:(e==null||e===!1)&&a&&(n==null?void 0:n.finalY)!=null?n.finalY+20/r:null}function Rre(t,e,n){var r=e.head||[],s=e.body||[],a=e.foot||[];if(e.html){var i=e.includeHiddenHtml;if(n){var o=t7(t,e.html,n,i,e.useCss)||{};r=o.head||r,s=o.body||r,a=o.foot||r}else console.error("Cannot parse html in non browser environment")}var l=e.columns||Lre(r,s,a);return{columns:l,head:r,body:s,foot:a}}function Lre(t,e,n){var r=t[0]||e[0]||n[0]||[],s=[];return Object.keys(r).filter(function(a){return a!=="_element"}).forEach(function(a){var i=1,o;Array.isArray(r)?o=r[parseInt(a)]:o=r[a],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var l=0;l<i;l++){var u=void 0;Array.isArray(r)?u=s.length:u=a+(l>0?"_".concat(l):"");var d={dataKey:u};s.push(d)}}),s}var z5=function(){function t(e,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=e.getDocument()}return t}(),Ure=function(t){Wj(e,t);function e(n,r,s,a,i,o){var l=t.call(this,n,r,o)||this;return l.cell=s,l.row=a,l.column=i,l.section=a.section,l}return e}(z5),Mre=function(){function t(e,n){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,n,r,s,a,i){for(var o=0,l=n;o<l.length;o++){var u=l[o],d=new Ure(e,this,r,s,a,i),h=u(d)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],h)return!1}return!0},t.prototype.callEndPageHooks=function(e,n){e.applyStyles(e.userStyles);for(var r=0,s=this.hooks.didDrawPage;r<s.length;r++){var a=s[r];a(new z5(e,this,n))}},t.prototype.callWillDrawPageHooks=function(e,n){for(var r=0,s=this.hooks.willDrawPage;r<s.length;r++){var a=s[r];a(new z5(e,this,n))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(s,a){return s+a.wrappedWidth},0);return n}else{var r=this.settings.margin;return e-r.left-r.right}},t}(),r7=function(){function t(e,n,r,s,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof Yj&&(this.raw=e._element,this.element=e._element),this.index=n,this.section=r,this.cells=s,this.spansMultiplePages=a}return t.prototype.getMaxCellHeight=function(e){var n=this;return e.reduce(function(r,s){var a;return Math.max(r,((a=n.cells[s.index])===null||a===void 0?void 0:a.height)||0)},0)},t.prototype.hasRowSpan=function(e){var n=this;return e.filter(function(r){var s=n.cells[r.index];return s?s.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,n){return this.getMaxCellHeight(n)<=e},t.prototype.getMinimumRowHeight=function(e,n){var r=this;return e.reduce(function(s,a){var i=r.cells[a.index];if(!i)return 0;var o=n.getLineHeight(i.styles.fontSize),l=i.padding("vertical"),u=l+o;return u>s?u:s},0)},t}(),s7=function(){function t(e,n,r){var s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(s=e.content)!==null&&s!==void 0?s:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var i=a!=null?""+a:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var s=this.width-this.padding("horizontal");r=this.x+s/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},t.prototype.getContentHeight=function(e,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,s=this.styles.fontSize/e*n,a=r*s+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},t.prototype.padding=function(e){var n=oC(this.styles.cellPadding,0);return e==="vertical"?n.top+n.bottom:e==="horizontal"?n.left+n.right:n[e]},t}(),Pre=function(){function t(e,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=n,this.index=r}return t.prototype.getMaxCustomCellWidth=function(e){for(var n=0,r=0,s=e.allRows();r<s.length;r++){var a=s[r],i=a.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(n=Math.max(n,i.styles.cellWidth))}return n},t}();function Ore(t,e){jre(t,e);var n=[],r=0;e.columns.forEach(function(a){var i=a.getMaxCustomCellWidth(e);i?a.width=i:(a.width=a.wrappedWidth,n.push(a)),r+=a.width});var s=e.getWidth(t.pageSize().width)-r;s&&(s=G5(n,s,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),s&&(s=G5(n,s,function(a){return a.minWidth})),s=Math.abs(s),!e.settings.horizontalPageBreak&&s>.1/t.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),Hre(e),Vre(e,t),Qre(e)}function jre(t,e){var n=t.scaleFactor(),r=e.settings.horizontalPageBreak,s=Zj(t,e);e.allRows().forEach(function(a){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],u=a.cells[l.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(t,d,u,a,l,null);var h=u.padding("horizontal");u.contentWidth=Fw(u.text,u.styles,t)+h;var m=Fw(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=m+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||r===!0)u.contentWidth>s?(u.minWidth=s,u.wrappedWidth=s):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var p=10/n;u.minWidth=u.styles.minCellWidth||p,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(a){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],u=a.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},h=d.cellWidth||d.minCellWidth;h&&typeof h=="number"&&(l.minWidth=h,l.wrappedWidth=h)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function G5(t,e,n){for(var r=e,s=t.reduce(function(p,y){return p+y.wrappedWidth},0),a=0;a<t.length;a++){var i=t[a],o=i.wrappedWidth/s,l=r*o,u=i.width+l,d=n(i),h=u<d?d:u;e-=h-i.width,i.width=h}if(e=Math.round(e*1e10)/1e10,e){var m=t.filter(function(p){return e<0?p.width>n(p):!0});m.length&&(e=G5(m,e,n))}return e}function Qre(t){for(var e={},n=1,r=t.allRows(),s=0;s<r.length;s++)for(var a=r[s],i=0,o=t.columns;i<o.length;i++){var l=o[i],u=e[l.index];if(n>1)n--,delete a.cells[l.index];else if(u)u.cell.height+=a.height,n=u.cell.colSpan,delete a.cells[l.index],u.left--,u.left<=1&&delete e[l.index];else{var d=a.cells[l.index];if(!d)continue;if(d.height=a.height,d.rowSpan>1){var h=r.length-s,m=d.rowSpan>h?h:d.rowSpan;e[l.index]={cell:d,left:m,row:a}}}}}function Hre(t){for(var e=t.allRows(),n=0;n<e.length;n++)for(var r=e[n],s=null,a=0,i=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(i-=1,i>1&&t.columns[o+1])a+=l.width,delete r.cells[l.index];else if(s){var u=s;delete r.cells[l.index],s=null,u.width=l.width+a}else{var u=r.cells[l.index];if(!u)continue;if(i=u.colSpan,a=0,u.colSpan>1){s=u,a+=l.width;continue}u.width=l.width+a}}}function Vre(t,e){for(var n={count:0,height:0},r=0,s=t.allRows();r<s.length;r++){for(var a=s[r],i=0,o=t.columns;i<o.length;i++){var l=o[i],u=a.cells[l.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=J6(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=J6(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var h=u.styles.overflow(u.text,d);typeof h=="string"?u.text=[h]:u.text=h}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var m=u.contentHeight/u.rowSpan;u.rowSpan>1&&n.count*n.height<m*u.rowSpan?n={height:m,count:u.rowSpan}:n&&n.count>0&&n.height>m&&(m=n.height),m>a.height&&(a.height=m)}}n.count--}}function J6(t,e,n,r,s){return t.map(function(a){return zre(a,e,n,r,s)})}function zre(t,e,n,r,s){var a=1e4*r.scaleFactor();if(e=Math.ceil(e*a)/a,e>=Fw(t,n,r))return t;for(;e<Fw(t+s,n,r)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+s}function a7(t,e){var n=new Km(t),r=Gre(e,n.scaleFactor()),s=new Mre(e,r);return Ore(n,s),n.applyStyles(n.userStyles),s}function Gre(t,e){var n=t.content,r=Kre(n.columns);if(n.head.length===0){var s=Z6(r,"head");s&&n.head.push(s)}if(n.foot.length===0){var s=Z6(r,"foot");s&&n.foot.push(s)}var a=t.settings.theme,i=t.styles;return{columns:r,head:Q_("head",n.head,r,i,a,e),body:Q_("body",n.body,r,i,a,e),foot:Q_("foot",n.foot,r,i,a,e)}}function Q_(t,e,n,r,s,a){var i={},o=e.map(function(l,u){for(var d=0,h={},m=0,p=0,y=0,x=n;y<x.length;y++){var C=x[y];if(i[C.index]==null||i[C.index].left===0)if(p===0){var S=void 0;Array.isArray(l)?S=l[C.index-m-d]:S=l[C.dataKey];var k={};typeof S=="object"&&!Array.isArray(S)&&(k=(S==null?void 0:S.styles)||{});var I=$re(t,C,u,s,r,a,k),F=new s7(S,I,t);h[C.dataKey]=F,h[C.index]=F,p=F.colSpan-1,i[C.index]={left:F.rowSpan-1,times:p}}else p--,m++;else i[C.index].left--,p=i[C.index].times,d++}return new r7(l,u,t,h)});return o}function Z6(t,e){var n={};return t.forEach(function(r){if(r.raw!=null){var s=qre(e,r.raw);s!=null&&(n[r.dataKey]=s)}}),Object.keys(n).length>0?n:null}function qre(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function Kre(t){return t.map(function(e,n){var r,s;return typeof e=="object"?s=(r=e.dataKey)!==null&&r!==void 0?r:n:s=n,new Pre(s,e,n)})}function $re(t,e,n,r,s,a,i){var o=Cre(r),l;t==="head"?l=s.headStyles:t==="body"?l=s.bodyStyles:t==="foot"&&(l=s.footStyles);var u=HA({},o.table,o[t],s.styles,l),d=s.columnStyles[e.dataKey]||s.columnStyles[e.index]||{},h=t==="body"?d:{},m=t==="body"&&n%2===0?HA({},o.alternateRow,s.alternateRowStyles):{},p=bre(a),y=HA({},p,u,m,h);return HA(y,i)}function Wre(t,e,n){var r;n===void 0&&(n={});var s=Zj(t,e),a=new Map,i=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(m){var p=e.columns.find(function(y){return y.dataKey===m||y.index===m});p&&!a.has(p.index)&&(a.set(p.index,!0),i.push(p.index),o.push(e.columns[p.index]),s-=p.wrappedWidth)});for(var u=!0,d=(r=n==null?void 0:n.start)!==null&&r!==void 0?r:0;d<e.columns.length;){if(a.has(d)){d++;continue}var h=e.columns[d].wrappedWidth;if(u||s>=h)u=!1,i.push(d),o.push(e.columns[d]),s-=h;else break;d++}return{colIndexes:i,columns:o,lastIndex:d-1}}function Yre(t,e){for(var n=[],r=0;r<e.columns.length;r++){var s=Wre(t,e,{start:r});s.columns.length&&(n.push(s),r=s.lastIndex)}return n}function i7(t,e){var n=e.settings,r=n.startY,s=n.margin,a={x:s.left,y:r},i=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=r+s.bottom+i;if(n.pageBreak==="avoid"){var l=e.body,u=l.reduce(function(m,p){return m+p.height},0);o+=u}var d=new Km(t);(n.pageBreak==="always"||n.startY!=null&&o>d.pageSize().height)&&(l7(d),a.y=s.top),e.callWillDrawPageHooks(d,a);var h=HA({},a);e.startPageNumber=d.pageNumber(),n.horizontalPageBreak?Xre(d,e,h,a):(d.applyStyles(d.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&e.head.forEach(function(m){return td(d,e,m,a,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(m,p){var y=p===e.body.length-1;Dw(d,e,m,y,h,a,e.columns)}),d.applyStyles(d.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&e.foot.forEach(function(m){return td(d,e,m,a,e.columns)})),Xj(d,e,h,a),e.callEndPageHooks(d,a),e.finalY=a.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function Xre(t,e,n,r){var s=Yre(t,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")s.forEach(function(u,d){t.applyStyles(t.userStyles),d>0?bx(t,e,n,r,u.columns,!0):eD(t,e,r,u.columns),Jre(t,e,n,r,u.columns),H_(t,e,r,u.columns)});else for(var i=-1,o=s[0],l=function(){var u=i;if(o){t.applyStyles(t.userStyles);var d=o.columns;i>=0?bx(t,e,n,r,d,!0):eD(t,e,r,d),u=tD(t,e,i+1,r,d),H_(t,e,r,d)}var h=u-i;s.slice(1).forEach(function(m){t.applyStyles(t.userStyles),bx(t,e,n,r,m.columns,!0),tD(t,e,i+1,r,m.columns,h),H_(t,e,r,m.columns)}),i=u};i<e.body.length-1;)l()}function eD(t,e,n,r){var s=e.settings;t.applyStyles(t.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&e.head.forEach(function(a){return td(t,e,a,n,r)})}function Jre(t,e,n,r,s){t.applyStyles(t.userStyles),e.body.forEach(function(a,i){var o=i===e.body.length-1;Dw(t,e,a,o,n,r,s)})}function tD(t,e,n,r,s,a){t.applyStyles(t.userStyles),a=a??e.body.length;var i=Math.min(n+a,e.body.length),o=-1;return e.body.slice(n,i).forEach(function(l,u){var d=n+u===e.body.length-1,h=o7(t,e,d,r);l.canEntireRowFit(h,s)&&(td(t,e,l,r,s),o=n+u)}),o}function H_(t,e,n,r){var s=e.settings;t.applyStyles(t.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&e.foot.forEach(function(a){return td(t,e,a,n,r)})}function Zre(t,e,n){var r=n.getLineHeight(t.styles.fontSize),s=t.padding("vertical"),a=Math.floor((e-s)/r);return Math.max(0,a)}function ese(t,e,n,r){var s={};t.spansMultiplePages=!0,t.height=0;for(var a=0,i=0,o=n.columns;i<o.length;i++){var l=o[i],u=t.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new s7(u.raw,u.styles,u.section);d=HA(d,u),d.text=[];var h=Zre(u,e,r);u.text.length>h&&(d.text=u.text.splice(h,u.text.length));var m=r.scaleFactor(),p=r.getLineHeightFactor();u.contentHeight=u.getContentHeight(m,p),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),d.contentHeight=d.getContentHeight(m,p),d.contentHeight>a&&(a=d.contentHeight),s[l.index]=d}}var y=new r7(t.raw,-1,t.section,s,!0);y.height=a;for(var x=0,C=n.columns;x<C.length;x++){var l=C[x],d=y.cells[l.index];d&&(d.height=y.height);var u=t.cells[l.index];u&&(u.height=t.height)}return y}function tse(t,e,n,r){var s=t.pageSize().height,a=r.settings.margin,i=a.top+a.bottom,o=s-i;e.section==="body"&&(o-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var l=e.getMinimumRowHeight(r.columns,t),u=l<n;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(r.columns),h=e.getMaxCellHeight(r.columns)>o;return h?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||r.settings.rowPageBreak==="avoid")}function Dw(t,e,n,r,s,a,i){var o=o7(t,e,r,a);if(n.canEntireRowFit(o,i))td(t,e,n,a,i);else if(tse(t,n,o,e)){var l=ese(n,o,e,t);td(t,e,n,a,i),bx(t,e,s,a,i),Dw(t,e,l,r,s,a,i)}else bx(t,e,s,a,i),Dw(t,e,n,r,s,a,i)}function td(t,e,n,r,s){r.x=e.settings.margin.left;for(var a=0,i=s;a<i.length;a++){var o=i[a],l=n.cells[o.index];if(!l){r.x+=o.width;continue}t.applyStyles(l.styles),l.x=r.x,l.y=r.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,l,n,o,r);if(u===!1){r.x+=o.width;continue}nse(t,l,r);var d=l.getTextPos();$j(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,n,o,r),r.x+=o.width}r.y+=n.height}function nse(t,e,n){var r=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof r.lineWidth=="number"){var s=Jj(r.lineWidth,r.fillColor);s&&t.rect(e.x,n.y,e.width,e.height,s)}else typeof r.lineWidth=="object"&&(r.fillColor&&t.rect(e.x,n.y,e.width,e.height,"F"),rse(t,e,n,r.lineWidth))}function rse(t,e,n,r){var s,a,i,o;r.top&&(s=n.x,a=n.y,i=n.x+e.width,o=n.y,r.right&&(i+=.5*r.right),r.left&&(s-=.5*r.left),l(r.top,s,a,i,o)),r.bottom&&(s=n.x,a=n.y+e.height,i=n.x+e.width,o=n.y+e.height,r.right&&(i+=.5*r.right),r.left&&(s-=.5*r.left),l(r.bottom,s,a,i,o)),r.left&&(s=n.x,a=n.y,i=n.x,o=n.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.left,s,a,i,o)),r.right&&(s=n.x+e.width,a=n.y,i=n.x+e.width,o=n.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.right,s,a,i,o));function l(u,d,h,m,p){t.getDocument().setLineWidth(u),t.getDocument().line(d,h,m,p,"S")}}function o7(t,e,n,r){var s=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&n)&&(s+=e.getFootHeight(e.columns)),t.pageSize().height-r.y-s}function bx(t,e,n,r,s,a){s===void 0&&(s=[]),a===void 0&&(a=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(o){return td(t,e,o,r,s)}),e.callEndPageHooks(t,r);var i=e.settings.margin;Xj(t,e,n,r),l7(t),e.pageNumber++,r.x=i.left,r.y=i.top,n.y=i.top,e.callWillDrawPageHooks(t,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return td(t,e,o,r,s)}),t.applyStyles(t.userStyles))}function l7(t){var e=t.pageNumber();t.setPage(e+1);var n=t.pageNumber();return n===e?(t.addPage(),!0):!1}function sse(t){t.API.autoTable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],s=n7(this,r),a=a7(this,s);return i7(this,a),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,n,r,s){$j(e,n,r,s,this)},t.API.autoTableSetDefaults=function(e){return Km.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,n){Km.setDefaults(e,n)},t.API.autoTableHtmlToJson=function(e,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var s=new Km(this),a=t7(s,e,window,n,!1),i=a.head,o=a.body,l=((r=i[0])===null||r===void 0?void 0:r.map(function(u){return u.content}))||[];return{columns:l,rows:o,data:o}}}var V_;function vl(t,e){var n=n7(t,e),r=a7(t,n);i7(t,r)}try{if(typeof window<"u"&&window){var nD=window,rD=nD.jsPDF||((V_=nD.jspdf)===null||V_===void 0?void 0:V_.jsPDF);rD&&sse(rD)}}catch(t){console.error("Could not apply autoTable plugin",t)}const T4="evaluaciones_pruebas",N4="evaluaciones_rubricas_estaticas",B4="evaluaciones_rubricas_interactivas",ase="usuarios",lC=t=>{var n,r;const e=t.data();return{id:t.id,...e,fechaCreacion:((r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaCreacion}},ise=t=>{const e=an(Lt(It,T4),sr("fechaCreacion","desc"));return En(e,r=>{t(r.docs.map(s=>lC(s)))},r=>{console.error("Error al suscribirse a las pruebas:",r),t([])})},ose=async t=>{try{const{id:e,...n}=t,r=Cn(It,T4,e);await io(r,{...n,fechaCreacion:mn.fromDate(new Date(n.fechaCreacion))})}catch(e){throw console.error("Error al guardar la prueba:",e),new Error("No se pudo guardar la prueba.")}},lse=async t=>{try{await Ka(Cn(It,T4,t))}catch(e){throw console.error("Error al eliminar la prueba:",e),new Error("No se pudo eliminar la prueba.")}},cse=t=>{const e=an(Lt(It,N4),sr("fechaCreacion","desc"));return En(e,r=>{t(r.docs.map(s=>lC(s)))},r=>{console.error("Error al suscribirse a las rúbricas estáticas:",r),t([])})},use=async t=>{try{const{id:e,...n}=t,r=Cn(It,N4,e);await io(r,{...n,fechaCreacion:mn.fromDate(new Date(n.fechaCreacion))})}catch(e){throw console.error("Error al guardar la rúbrica estática:",e),new Error("No se pudo guardar la rúbrica.")}},Ase=async t=>{try{await Ka(Cn(It,N4,t))}catch(e){throw console.error("Error al eliminar la rúbrica estática:",e),new Error("No se pudo eliminar la rúbrica.")}},dse=t=>{const e=an(Lt(It,B4));return En(e,r=>{t(r.docs.map(s=>lC(s)))},r=>{console.error("Error al suscribirse a las rúbricas interactivas:",r),t([])})},fse=async t=>{try{const{id:e,...n}=t,r=Cn(It,B4,e);await io(r,n)}catch(e){throw console.error("Error al guardar la rúbrica interactiva:",e),new Error("No se pudo guardar la rúbrica interactiva.")}},hse=async t=>{try{return(await Cs(Lt(It,B4),t)).id}catch(e){throw console.error("Error al crear la rúbrica interactiva:",e),new Error("No se pudo crear la rúbrica interactiva.")}},mse=t=>{const e=an(Lt(It,ase));return En(e,r=>{t(r.docs.map(s=>lC(s)))},r=>{console.error("Error al suscribirse a los usuarios:",r),t([])})},pse=["Selección múltiple","Verdadero o Falso","Desarrollo","Términos pareados","Comprensión de lectura"],sD={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},U2=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},gse=({open:t})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):c.jsxs(c.Fragment,{children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),xse=({item:t,index:e,showAnswers:n})=>{const r=G.useMemo(()=>t.tipo==="Términos pareados"?[...t.pares.map(s=>s.definicion)].sort(()=>Math.random()-.5):[],[t]);return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[e+1,". ",t.pregunta," (",t.puntaje," pts)"]}),t.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:t.habilidadBloom})]}),t.tipo==="Selección múltiple"&&c.jsx("div",{className:"ml-4 mt-2 space-y-2",children:t.opciones.map((s,a)=>{const i=n&&a===t.respuestaCorrecta;return c.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[c.jsx("div",{className:"w-5 h-5 border rounded-full"}),c.jsxs("span",{children:[String.fromCharCode(65+a),") ",s]})]},a)})}),t.tipo==="Desarrollo"&&c.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),t.tipo==="Verdadero o Falso"&&c.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[c.jsx("span",{children:"V ___ F ___"}),n&&c.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",t.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),t.tipo==="Términos pareados"&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),c.jsx("div",{className:"space-y-2",children:t.pares.map((s,a)=>c.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[a+1,". ",s.concepto]},a))})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definición"}),c.jsx("div",{className:"space-y-2",children:r.map((s,a)=>c.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:s},a))})]})]}),n&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[c.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),c.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:t.pares.map((s,a)=>c.jsxs("li",{children:[c.jsx("strong",{children:s.concepto})," → ",s.definicion]},a))})]})]}),t.tipo==="Comprensión de lectura"&&c.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[c.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:t.texto}),t.preguntas.map((s,a)=>{if(s.tipo==="Selección múltiple"){const i=s;return c.jsxs("div",{className:"pt-2",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[a+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),c.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,l)=>{const u=n&&l===i.respuestaCorrecta;return c.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/50":""}`,children:[c.jsx("div",{className:"w-5 h-5 border rounded-full"}),c.jsxs("span",{children:[String.fromCharCode(65+l),") ",o]})]},l)})})]},s.id)}if(s.tipo==="Desarrollo"){const i=s;return c.jsxs("div",{className:"pt-2",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[a+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),c.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},s.id)}return null})]})]},t.id)},vse=()=>{const[t,e]=G.useState([]),[n,r]=G.useState(null),[s,a]=G.useState(!1),[i,o]=G.useState(!1),[l,u]=G.useState(null),[d,h]=G.useState(!1),m={nombre:"",asignatura:po[0],nivel:km[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[p,y]=G.useState(m);G.useEffect(()=>{const E=ise(e);return()=>E()},[]);const x=E=>{const{name:_,value:B}=E.target;y(j=>({...j,[_]:B}))},C=E=>{y(_=>{const B={..._.tiposActividad};return B[E]?delete B[E]:B[E]=sD[E][0],{..._,tiposActividad:B}})},S=(E,_)=>{y(B=>({...B,tiposActividad:{...B.tiposActividad,[E]:_}}))},k=E=>{y(_=>{const B=_.selectedNee.includes(E)?_.selectedNee.filter(j=>j!==E):[..._.selectedNee,E];return{..._,selectedNee:B}})},I=async E=>{if(E.preventDefault(),!p.nombre.trim()||!p.contenido.trim()||Object.keys(p.tiposActividad).length===0){u("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}a(!0),u(null);const _=Object.entries(p.tiposActividad).map(([D,L])=>`- ${L} ítem(s) de tipo '${D}'`).join(`
`),B=p.isNee&&p.selectedNee.length>0?`
            **Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes características: ${p.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negación o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes más pequeñas si es posible.
            - Para 'Comprensión de Lectura', usa textos más cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Selección Múltiple', asegúrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",j=`
            Eres un experto en evaluación educativa para la educación media en Chile.
            Genera una prueba o guía de trabajo completa en formato JSON estructurado.
            
            Información base:
            - Nombre de la prueba: ${p.nombre}
            - Asignatura: ${p.asignatura}
            - Nivel: ${p.nivel}
            - Contenido a evaluar: "${p.contenido}"
            - Tipos y cantidad de ítems solicitados:
              ${_}
            - Nivel de Dificultad General: ${p.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
            
            ${B}

            Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json. El objeto debe contener:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluación.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de ítem solicitado. Cada actividad debe tener:
               - 'id': Un UUID generado por ti.
               - 'titulo': Un título descriptivo (ej: "Actividad 1: Selección Múltiple").
               - 'instrucciones': Instrucciones para esa actividad específica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID generado por ti.
                   - 'tipo': El tipo de ítem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numérico.
                   - 'habilidadBloom': La habilidad principal de la Taxonomía de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales según el tipo:
                       - Para 'Selección múltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (índice numérico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Términos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensión de lectura': 'texto' (un string que DEBE contener un texto original y coherente de 150 a 250 palabras, generado por ti, sobre el contenido a evaluar) y 'preguntas' (un array de sub-preguntas basadas en el texto que acabas de generar, las cuales pueden ser 'Selección múltiple' o 'Desarrollo', y cada una debe tener su propia 'id', 'pregunta', 'puntaje', 'habilidadBloom', etc.).
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{t0("Evaluación - Pruebas");const D="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",ne=(await(await new Ra(D).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(j)).response).text().replace(/^```json\s*|```\s*$/g,""),V=JSON.parse(ne);let J=0;V.actividades.forEach(ie=>{ie.items.forEach(O=>{J+=O.puntaje||0,O.tipo==="Comprensión de lectura"&&O.preguntas&&O.preguntas.forEach(W=>{J+=W.puntaje||0})})});const K={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:p.nombre,asignatura:p.asignatura,nivel:p.nivel,contenidoOriginal:p.contenido,tiposActividadOriginal:p.tiposActividad,objetivo:V.objetivo,instruccionesGenerales:V.instruccionesGenerales,puntajeIdeal:J,actividades:V.actividades,dificultad:p.dificultad,...p.isNee&&{adaptacionNEE:p.selectedNee}};r(K),h(!1)}catch(D){console.error(D),u("Error al generar la prueba con IA. Revisa la consola para más detalles.")}finally{a(!1)}},F=async()=>{if(n)try{await ose(n),alert("Prueba guardada con éxito.")}catch(E){console.error(E),alert("No se pudo guardar la prueba.")}},U=async E=>{if(window.confirm("¿Eliminar esta prueba?"))try{await lse(E),(n==null?void 0:n.id)===E&&r(null)}catch(_){console.error(_),alert("No se pudo eliminar la prueba.")}},R=async E=>{o(!0);const _=new hn("p","mm","a4"),B=20,j=_.internal.pageSize.getHeight(),D=_.internal.pageSize.getWidth(),L=D-B*2;let Q=B;const H=ne=>{ne.setFillColor(230,230,230),ne.rect(0,0,D,25,"F"),ne.setFontSize(9),ne.setTextColor(0,0,0),ne.text("LICEO INDUSTRIAL DE RECOLETA",B,15,{align:"left"}),ne.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",D-B,15,{align:"right"})};H(_),Q=30,_.setTextColor(0,0,0),_.setFont("helvetica","bold"),_.setFontSize(16),_.text(E.nombre,D/2,Q,{align:"center"}),Q+=10,vl(_,{startY:Q,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},E.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},E.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},E.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:E.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:E.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:ne=>{H(_)}}),Q=_.lastAutoTable.finalY+10;const te=ne=>{Q+ne>j-B&&(_.addPage(),H(_),Q=B+15,_.setTextColor(0,0,0))},Y=(ne,V)=>{_.setFont("helvetica",V.isBold?"bold":"normal"),_.setFontSize(V.fontSize);const J=Array.isArray(ne)?ne.join(`
`):ne;return _.getTextDimensions(J,{maxWidth:V.width}).h};for(const ne of E.actividades){let V=Y(ne.titulo,{fontSize:12,width:L,isBold:!0})+Y(ne.instrucciones,{fontSize:10,width:L})+12;te(V),_.setFont("helvetica","bold"),_.setFontSize(12),_.setTextColor(0,0,0),_.text(ne.titulo,B,Q),Q+=8,_.setFont("helvetica","normal"),_.setFontSize(10);const J=_.splitTextToSize(ne.instrucciones,L);_.text(J,B,Q),Q+=J.length*(10*.35*1.15)+4;for(const[K,ie]of ne.items.entries()){let O=0;const W=`${K+1}. ${ie.pregunta} (${ie.puntaje} pts)`;switch(O+=Y(W,{fontSize:10,width:L,isBold:!0}),ie.tipo){case"Selección múltiple":ie.opciones.forEach(se=>{O+=Y(se,{fontSize:10,width:L-5})+3}),O+=7;break;case"Verdadero o Falso":O+=10;break;case"Desarrollo":O+=30;break;case"Términos pareados":O+=ie.pares.length*12+20;break;case"Comprensión de lectura":const re=ie;O+=Y(re.texto,{fontSize:10,width:L-10})+10,re.preguntas.forEach(se=>{const de=`${se.pregunta} (${se.puntaje} pts)`;O+=Y(de,{fontSize:10,width:L-5,isBold:!0}),se.tipo==="Selección múltiple"?(se.opciones.forEach(pe=>{O+=Y(pe,{fontSize:10,width:L-10})+3}),O+=7):se.tipo==="Desarrollo"&&(O+=30),O+=5}),O+=15;break}te(O),_.setFont("helvetica","bold"),_.setFontSize(10),_.setTextColor(0,0,0);const Z=_.splitTextToSize(W,L);if(_.text(Z,B,Q),Q+=Z.length*5+4,_.setFont("helvetica","normal"),ie.tipo==="Selección múltiple")ie.opciones.forEach((re,se)=>{_.text(`${String.fromCharCode(65+se)}) ${re}`,B+5,Q),Q+=7});else if(ie.tipo==="Verdadero o Falso")_.text("V ______    F ______",B+5,Q),Q+=10;else if(ie.tipo==="Desarrollo")_.setDrawColor(200,200,200),_.setFillColor(245,245,245),_.rect(B,Q,L,25,"FD"),Q+=30;else if(ie.tipo==="Términos pareados"){const re=[...ie.pares.map(de=>de.definicion)].sort(()=>Math.random()-.5),se=ie.pares.map((de,pe)=>[`${pe+1}. ${de.concepto}`,`(   ) ${re[pe]}`]);vl(_,{startY:Q,head:[["Columna A: Concepto","Columna B: Definición"]],body:se,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:de=>H(_)}),Q=_.lastAutoTable.finalY+10}else if(ie.tipo==="Comprensión de lectura"){const re=ie;_.setFillColor(240,240,240),_.setDrawColor(200,200,200);const se=_.splitTextToSize(re.texto,L-10),de=se.length*(10*.35*1.15)+8;_.rect(B,Q,L,de,"FD"),Q+=4,_.setFont("helvetica","normal"),_.setFontSize(10),_.setTextColor(0,0,0),_.text(se,B+5,Q),Q+=de;for(const[pe,be]of re.preguntas.entries()){const Se=`${pe+1}. ${be.pregunta} (${be.puntaje} pts)`;_.setFont("helvetica","bold");const me=_.splitTextToSize(Se,L-5);_.text(me,B+5,Q),Q+=me.length*5+4,_.setFont("helvetica","normal"),be.tipo==="Selección múltiple"?be.opciones.forEach((ce,Me)=>{_.text(`${String.fromCharCode(65+Me)}) ${ce}`,B+10,Q),Q+=7}):be.tipo==="Desarrollo"&&(_.setDrawColor(200,200,200),_.setFillColor(245,245,245),_.rect(B+5,Q,L-5,25,"FD"),Q+=30)}}Q+=5}}_.save(`${E.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return n?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("button",{onClick:()=>r(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>h(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[c.jsx(gse,{open:!d})," ",c.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),c.jsx("button",{onClick:F,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),c.jsxs("button",{onClick:()=>R(n),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":c.jsx(fj,{})," PDF"]})]})]}),c.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[c.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[c.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),c.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),c.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:n.nombre}),c.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Asignatura:"})," ",n.asignatura]}),c.jsxs("p",{className:"text-right",children:[c.jsx("strong",{children:"Puntaje Ideal:"})," ",n.puntajeIdeal]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Nivel:"})," ",n.nivel]})]}),c.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[c.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",n.dificultad||"Intermedio"]}),n.adaptacionNEE&&n.adaptacionNEE.length>0&&c.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",n.adaptacionNEE.join(", ")]})]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",n.objetivo]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Instrucciones Generales:"})," ",n.instruccionesGenerales]})]}),n.actividades.map(E=>c.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:E.titulo}),c.jsx("p",{className:"italic text-sm mb-4",children:E.instrucciones}),c.jsx("div",{className:"space-y-6",children:E.items.map((_,B)=>c.jsx(xse,{item:_,index:B,showAnswers:d},_.id))})]},E.id))]})]}):c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),c.jsxs("form",{onSubmit:I,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"nombre",value:p.nombre,onChange:x,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),c.jsx("div",{}),c.jsx("select",{name:"asignatura",value:p.asignatura,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:po.map(E=>c.jsx("option",{children:E},E))}),c.jsx("select",{name:"nivel",value:p.nivel,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:km.map(E=>c.jsx("option",{children:E},E))})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),c.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((E,_)=>c.jsx("button",{type:"button",onClick:()=>y(B=>({...B,dificultad:E})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${_===0?"rounded-l-lg":""} ${_===2?"rounded-r-lg":""}
                                            ${p.dificultad===E?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:E},E))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:p.isNee,onChange:E=>y(_=>({..._,isNee:E.target.checked,selectedNee:E.target.checked?_.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),p.isNee&&c.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:Nw.map(E=>c.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:p.selectedNee.includes(E),onChange:()=>k(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:E})]},E))})]})]})]}),c.jsx("textarea",{name:"contenido",value:p.contenido,onChange:x,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("div",{className:"space-y-3",children:pse.map(E=>c.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:!!p.tiposActividad[E],onChange:()=>C(E),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:E})]}),p.tiposActividad[E]&&c.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),sD[E].map(_=>c.jsx("button",{type:"button",onClick:()=>S(E,_),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${p.tiposActividad[E]===_?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:_},_))]})]},E))}),l&&c.jsx("p",{className:"text-red-500 text-sm",children:l}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:s,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:s?"Generando...":"Generar Prueba"})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),c.jsx("div",{className:"space-y-2",children:t.length>0?t.map(E=>c.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[E.asignatura," - ",E.nivel," (",new Date(E.fechaCreacion).toLocaleDateString(),")"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>r(E),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),c.jsx("button",{onClick:()=>U(E.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},E.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},yse=({rubricas:t,onSave:e,onDelete:n,onCreate:r})=>{const[s,a]=G.useState(null),[i,o]=G.useState("list"),[l,u]=G.useState(!1),[d,h]=G.useState(""),m=async(U,R)=>{if(!U.trim()||!R.trim()){alert("El título y la descripción son obligatorios.");return}u(!0);const E=`Crea una rúbrica de evaluación detallada sobre "${U}" con el propósito de "${R}". Genera entre 3 y 5 dimensiones de evaluación. Para cada dimensión, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,_={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{t0("Evaluación - Rúbricas");const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",H=(await(await new Ra(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:_}})).response).text(),te=JSON.parse(H),Y={id:crypto.randomUUID(),titulo:U,descripcion:R,fechaCreacion:new Date().toISOString(),dimensiones:te.map(ne=>({id:crypto.randomUUID(),nombre:ne.dimension,niveles:{insuficiente:ne.insuficiente,suficiente:ne.suficiente,competente:ne.competente,avanzado:ne.avanzado}}))};a(Y)}catch(B){console.error(B),alert("Error al generar la rúbrica con IA.")}finally{u(!1)}},p=async()=>{if(!d.trim()||!s)return;const U=crypto.randomUUID(),R={id:U,nombre:d,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};a(B=>B?{...B,dimensiones:[...B.dimensiones,R]}:null),h("");const E=`Para una rúbrica sobre "${s.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensión: "${d}". Considera las dimensiones existentes como contexto: ${s.dimensiones.map(B=>B.nombre).join(", ")}. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,_={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{t0("Evaluación - Rúbricas (Añadir Dimensión)");const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",H=(await(await new Ra(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:_}})).response).text(),te=JSON.parse(H);a(Y=>Y?{...Y,dimensiones:Y.dimensiones.map(ne=>ne.id===U?{...ne,niveles:te,isLoading:!1}:ne)}:null)}catch(B){console.error("Error generating dimension descriptors:",B),alert("No se pudieron generar los descriptores."),a(j=>j?{...j,dimensiones:j.dimensiones.filter(D=>D.id!==U)}:null)}},y=()=>{if(!s)return;t.some(R=>R.id===s.id)?e(s):r(s),o("list"),a(null)},x=U=>{a(U),o("form")},C=()=>{a({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),o("form")},S=(U,R,E)=>{s&&a(_=>_?{..._,dimensiones:_.dimensiones.map(B=>B.id!==U?B:R==="nombre"?{...B,nombre:E}:{...B,niveles:{...B.niveles,[R]:E}})}:null)},k=(U,R)=>{a(E=>E?{...E,[U]:R}:null)},I=U=>{s&&a(R=>R?{...R,dimensiones:R.dimensiones.filter(E=>E.id!==U)}:null)},F=()=>{if(!s)return null;const U="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",R=`${U} resize-none text-sm`;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),c.jsx("button",{onClick:()=>o("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),c.jsx("input",{value:s.titulo,onChange:E=>k("titulo",E.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${U} mt-1`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),c.jsx("textarea",{value:s.descripcion,onChange:E=>k("descripcion",E.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${U} mt-1`})]})]}),s.dimensiones.length===0&&c.jsx("div",{className:"text-center py-4",children:c.jsx("button",{onClick:()=>m(s.titulo,s.descripcion),disabled:l||!s.titulo||!s.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:l?"Generando...":"✨ Generar Rúbrica con IA"})}),s.dimensiones.length>0&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:c.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(E=>c.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:E},E))})}),c.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:s.dimensiones.map(E=>c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 w-1/5",children:c.jsx("textarea",{value:E.nombre,onChange:_=>S(E.id,"nombre",_.target.value),rows:4,className:R})}),Object.keys(E.niveles).map(_=>c.jsx("td",{className:"p-2 w-1/5",children:E.isLoading?c.jsx("div",{className:"flex justify-center items-center h-full",children:c.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):c.jsx("textarea",{value:E.niveles[_],onChange:B=>S(E.id,_,B.target.value),rows:4,className:R})},_)),c.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:c.jsx("button",{onClick:()=>I(E.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},E.id))})]})}),c.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),c.jsx("input",{value:d,onChange:E=>h(E.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${U} mt-1`})]}),c.jsx("button",{onClick:p,disabled:!d.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),c.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:c.jsx("button",{onClick:y,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rúbrica"})})]})};return i==="list"?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),c.jsx("button",{onClick:C,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),t.length>0?t.map(U=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:U.titulo}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:U.descripcion})]}),c.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[c.jsx("button",{onClick:()=>x(U),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),c.jsx("button",{onClick:()=>n(U.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},U.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):F()},wse=({allUsers:t,rubricasEstaticas:e})=>{const[n,r]=G.useState([]),[s,a]=G.useState(null),[i,o]=G.useState(null),[l,u]=G.useState({rubricaEstaticaId:"",curso:""}),[d,h]=G.useState(null);G.useEffect(()=>{const k=dse(r);return()=>k()},[]);const m=async k=>{k.preventDefault();const I=e.find(U=>U.id===l.rubricaEstaticaId);if(!I||!l.curso){alert("Debe seleccionar una rúbrica y un curso.");return}const F={nombre:I.titulo,curso:l.curso,asignatura:"N/A",rubricaEstaticaId:I.id,resultados:{}};try{await hse(F),u({rubricaEstaticaId:"",curso:""})}catch(U){console.error(U),alert("No se pudo crear la evaluación con rúbrica.")}},p=k=>{a(k),o(JSON.parse(JSON.stringify(k)))},y=(k,I,F)=>{i&&o(U=>{if(!U)return null;const R=JSON.parse(JSON.stringify(U));return R.resultados[k]||(R.resultados[k]={puntajes:{},feedback:""}),R.resultados[k].puntajes[I]=F,R})},x=async()=>{if(i)try{await fse(i),a(i),alert("Cambios guardados.")}catch(k){console.error(k),alert("No se pudieron guardar los cambios.")}},C=G.useCallback(k=>{const I=i,F=e.find(j=>j.id===(I==null?void 0:I.rubricaEstaticaId));if(!I||!F)return{score:0,maxScore:0,grade:"N/A"};const U=F.dimensiones.length*4,R=I.resultados[k];if(!R)return{score:0,maxScore:U,grade:"1.0"};const E=Object.values(R.puntajes).reduce((j,D)=>j+D,0),_=1+6*(E/U),B=U>0?_.toFixed(1):"1.0";return{score:E,maxScore:U,grade:B}},[i,e]),S=async k=>{if(!i)return;const I=e.find(E=>E.id===i.rubricaEstaticaId),F=i.resultados[k];if(!I||!F||Object.keys(F.puntajes).length===0){alert("El estudiante no tiene puntajes para generar feedback.");return}h(k);const R=`Genera una retroalimentación constructiva para un estudiante basada en estos puntajes de rúbrica (de 1 a 4): ${I.dimensiones.map(E=>`${E.nombre}: ${F.puntajes[E.id]||"N/A"}/4`).join("; ")}. El nombre de la evaluación es "${I.titulo}". Destaca fortalezas y sugiere 1-2 áreas de mejora concretas. Sé breve y motivador.`;try{t0("Evaluación - Rúbricas Interactivas (Feedback)");const E="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",L=(await(await new Ra(E).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(R)).response).text();o(Q=>{if(!Q)return null;const H=JSON.parse(JSON.stringify(Q));return H.resultados[k].feedback=L.replace(/(\*\*|\*)/g,""),H})}catch(E){console.error(E),alert("Error al generar feedback.")}finally{h(null)}};if(s&&i){const k=e.find(F=>F.id===s.rubricaEstaticaId),I=t.filter(F=>F.profile===qt.ESTUDIANTE&&U2(F.curso||"")===s.curso).map(F=>F.nombreCompleto).sort();return k?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:s.nombre}),c.jsx("p",{className:"text-slate-500",children:s.curso})]}),c.jsx("button",{onClick:()=>a(null),className:"font-semibold text-slate-600",children:"← Volver"})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),k.dimensiones.map(F=>c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:F.nombre},F.id)),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentación"})]})}),c.jsx("tbody",{children:I.map(F=>{var _;const{score:U,maxScore:R,grade:E}=C(F);return c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:F}),k.dimensiones.map(B=>c.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:c.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(j=>{var D;return c.jsx("button",{onClick:()=>y(F,B.id,j),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((D=i.resultados[F])==null?void 0:D.puntajes[B.id])===j?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:j},j)})})},B.id)),c.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[U,"/",R]}),c.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:E}),c.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:c.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[c.jsx("p",{className:"text-xs w-full",children:((_=i.resultados[F])==null?void 0:_.feedback)||"Sin generar"}),c.jsx("button",{onClick:()=>S(F),disabled:d===F,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===F?"...":"Generar IA"})]})})]},F)})})]})}),c.jsx("div",{className:"mt-6 flex justify-end",children:c.jsx("button",{onClick:x,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):c.jsxs("div",{children:["Error: Rúbrica base no encontrada. ",c.jsx("button",{onClick:()=>a(null),children:"Volver"})]})}return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluación con Rúbrica"}),c.jsxs("form",{onSubmit:m,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[c.jsxs("select",{value:l.rubricaEstaticaId,onChange:k=>u({...l,rubricaEstaticaId:k.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una Rúbrica Guardada"}),e.map(k=>c.jsx("option",{value:k.id,children:k.titulo},k.id))]}),c.jsxs("select",{value:l.curso,onChange:k=>u({...l,curso:k.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un Curso"}),Js.map(k=>c.jsx("option",{value:k,children:k},k))]}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluación"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),c.jsx("div",{className:"space-y-2",children:n.map(k=>c.jsxs("button",{onClick:()=>p(k),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[c.jsx("p",{className:"font-semibold",children:k.nombre}),c.jsx("p",{className:"text-sm text-slate-500",children:k.curso})]},k.id))})]})]})},bse=({allUsers:t})=>{const[e,n]=G.useState(""),r=G.useMemo(()=>Array.from(new Set(t.filter(a=>a.profile===qt.ESTUDIANTE&&a.curso).map(a=>U2(a.curso)))).sort(),[t]),s=G.useMemo(()=>{const a=t.filter(i=>i.profile===qt.ESTUDIANTE);return e?a.filter(i=>U2(i.curso||"")===e).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):a.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[t,e]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nóminas de Cursos"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nóminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el módulo de ",c.jsx("strong",{className:"font-semibold",children:"Administración"}),"."]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),c.jsxs("select",{id:"curso-filter",value:e,onChange:a=>n(a.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),r.map(a=>c.jsx("option",{value:a,children:a},a))]})]}),c.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:s.length>0?s.map(a=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:a.nombreCompleto}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:U2(a.curso||"")}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:a.email})]},a.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},Cse=()=>{const[t,e]=G.useState("pruebas"),[n,r]=G.useState([]),[s,a]=G.useState([]),[i,o]=G.useState(!0);G.useEffect(()=>{o(!0);const h=mse(r),m=cse(p=>{a(p),o(!1)});return()=>{h(),m()}},[]);const l=async h=>{try{await use(h)}catch(m){console.error(m),alert("No se pudo guardar la rúbrica.")}},u=async h=>{try{await Ase(h)}catch(m){console.error(m),alert("No se pudo eliminar la rúbrica.")}},d=({tabName:h,label:m})=>c.jsx("button",{onClick:()=>e(h),className:`${t===h?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:m});return i?c.jsx("div",{className:"text-center py-10",children:"Cargando módulo de evaluaciones..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación de Aprendizajes"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx(d,{tabName:"pruebas",label:"Pruebas y Guías"}),c.jsx(d,{tabName:"rubricas",label:"Generador de Rúbricas"}),c.jsx(d,{tabName:"rubricasInteractivas",label:"Rúbricas Interactivas"}),c.jsx(d,{tabName:"nominas",label:"Gestión de Nóminas"})]})}),c.jsxs("div",{className:"mt-6",children:[t==="pruebas"&&c.jsx(vse,{}),t==="rubricas"&&c.jsx(yse,{rubricas:s,onSave:l,onDelete:u,onCreate:l}),t==="rubricasInteractivas"&&c.jsx(wse,{allUsers:n,rubricasEstaticas:s}),t==="nominas"&&c.jsx(bse,{allUsers:n})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Rw={};Rw.version="0.18.5";var c7=1252,Ese=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],k4={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},I4=function(t){Ese.indexOf(t)!=-1&&(c7=k4[0]=t)};function _se(){I4(1252)}var Hc=function(t){I4(t)};function F4(){Hc(1200),_se()}function aD(t){for(var e=[],n=0,r=t.length;n<r;++n)e[n]=t.charCodeAt(n);return e}function Sse(t){for(var e=[],n=0;n<t.length>>1;++n)e[n]=String.fromCharCode(t.charCodeAt(2*n)+(t.charCodeAt(2*n+1)<<8));return e.join("")}function u7(t){for(var e=[],n=0;n<t.length>>1;++n)e[n]=String.fromCharCode(t.charCodeAt(2*n+1)+(t.charCodeAt(2*n)<<8));return e.join("")}var ex=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1);return e==255&&n==254?Sse(t.slice(2)):e==254&&n==255?u7(t.slice(2)):e==65279?t.slice(1):t},vy=function(e){return String.fromCharCode(e)},iD=function(e){return String.fromCharCode(e)},Jx,ff="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Zx(t){for(var e="",n=0,r=0,s=0,a=0,i=0,o=0,l=0,u=0;u<t.length;)n=t.charCodeAt(u++),a=n>>2,r=t.charCodeAt(u++),i=(n&3)<<4|r>>4,s=t.charCodeAt(u++),o=(r&15)<<2|s>>6,l=s&63,isNaN(r)?o=l=64:isNaN(s)&&(l=64),e+=ff.charAt(a)+ff.charAt(i)+ff.charAt(o)+ff.charAt(l);return e}function wl(t){var e="",n=0,r=0,s=0,a=0,i=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)a=ff.indexOf(t.charAt(u++)),i=ff.indexOf(t.charAt(u++)),n=a<<2|i>>4,e+=String.fromCharCode(n),o=ff.indexOf(t.charAt(u++)),r=(i&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(r)),l=ff.indexOf(t.charAt(u++)),s=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(s));return e}var rr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),ld=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,n){return n?new Buffer(e,n):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Qf(t){return rr?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function oD(t){return rr?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var ml=function(e){return rr?ld(e,"binary"):e.split("").map(function(n){return n.charCodeAt(0)&255})};function cC(t){if(typeof ArrayBuffer>"u")return ml(t);for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),r=0;r!=t.length;++r)n[r]=t.charCodeAt(r)&255;return e}function Wf(t){if(Array.isArray(t))return t.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],n=0;n<t.length;++n)e[n]=String.fromCharCode(t[n]);return e.join("")}function Tse(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function D4(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return D4(new Uint8Array(t));for(var e=new Array(t.length),n=0;n<t.length;++n)e[n]=t[n];return e}var oi=rr?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:ld(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,n=0;for(e=0;e<t.length;++e)n+=t[e].length;var r=new Uint8Array(n),s=0;for(e=0,n=0;e<t.length;n+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)r.set(t[e],n);else{if(typeof t[e]=="string")throw"wtf";r.set(new Uint8Array(t[e]),n)}return r}return[].concat.apply([],t.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function Nse(t){for(var e=[],n=0,r=t.length+250,s=Qf(t.length+255),a=0;a<t.length;++a){var i=t.charCodeAt(a);if(i<128)s[n++]=i;else if(i<2048)s[n++]=192|i>>6&31,s[n++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=t.charCodeAt(++a)&1023;s[n++]=240|i>>8&7,s[n++]=128|i>>2&63,s[n++]=128|o>>6&15|(i&3)<<4,s[n++]=128|o&63}else s[n++]=224|i>>12&15,s[n++]=128|i>>6&63,s[n++]=128|i&63;n>r&&(e.push(s.slice(0,n)),n=0,s=Qf(65535),r=65530)}return e.push(s.slice(0,n)),oi(e)}var vo=/\u0000/g,tx=/[\u0001-\u0006]/g;function $m(t){for(var e="",n=t.length-1;n>=0;)e+=t.charAt(n--);return e}function Vc(t,e){var n=""+t;return n.length>=e?n:Ys("0",e-n.length)+n}function R4(t,e){var n=""+t;return n.length>=e?n:Ys(" ",e-n.length)+n}function Lw(t,e){var n=""+t;return n.length>=e?n:n+Ys(" ",e-n.length)}function Bse(t,e){var n=""+Math.round(t);return n.length>=e?n:Ys("0",e-n.length)+n}function kse(t,e){var n=""+t;return n.length>=e?n:Ys("0",e-n.length)+n}var lD=Math.pow(2,32);function nm(t,e){if(t>lD||t<-lD)return Bse(t,e);var n=Math.round(t);return kse(n,e)}function Uw(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var cD=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],z_=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Ise(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',t}var kn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},uD={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Fse={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Mw(t,e,n){for(var r=t<0?-1:1,s=t*r,a=0,i=1,o=0,l=1,u=0,d=0,h=Math.floor(s);u<e&&(h=Math.floor(s),o=h*i+a,d=h*u+l,!(s-h<5e-8));)s=1/(s-h),a=i,i=o,l=u,u=d;if(d>e&&(u>e?(d=l,o=a):(d=u,o=i)),!n)return[0,r*o,d];var m=Math.floor(r*o/d);return[m,r*o-m*d,d]}function Fh(t,e,n){if(t>2958465||t<0)return null;var r=t|0,s=Math.floor(86400*(t-r)),a=0,i=[],o={D:r,T:s,u:86400*(t-r)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(r+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++r,++o.D)),r===60)i=n?[1317,10,29]:[1900,2,29],a=3;else if(r===0)i=n?[1317,8,29]:[1900,1,0],a=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),r<60&&(a=(a+6)%7),n&&(a=Pse(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=a,o}var A7=new Date(1899,11,31,0,0,0),Dse=A7.getTime(),Rse=new Date(1900,2,1,0,0,0);function d7(t,e){var n=t.getTime();return e?n-=1461*24*60*60*1e3:t>=Rse&&(n+=1440*60*1e3),(n-(Dse+(t.getTimezoneOffset()-A7.getTimezoneOffset())*6e4))/(1440*60*1e3)}function L4(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Lse(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Use(t){var e=t<0?12:11,n=L4(t.toFixed(12));return n.length<=e||(n=t.toPrecision(10),n.length<=e)?n:t.toExponential(5)}function Mse(t){var e=L4(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function ev(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),n;return e>=-4&&e<=-1?n=t.toPrecision(10+e):Math.abs(e)<=9?n=Use(t):e===10?n=t.toFixed(10).substr(0,12):n=Mse(t),L4(Lse(n.toUpperCase()))}function n0(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):ev(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return uc(14,d7(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function Pse(t,e){e[0]-=581;var n=t.getDay();return t<60&&(n=(n+6)%7),n}function Ose(t,e,n,r){var s="",a=0,i=0,o=n.y,l,u=0;switch(t){case 98:o=n.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:l=n.m,u=e.length;break;case 3:return z_[n.m-1][1];case 5:return z_[n.m-1][0];default:return z_[n.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=n.d,u=e.length;break;case 3:return cD[n.q][0];default:return cD[n.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(n.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=n.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=n.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return n.u===0&&(e=="s"||e=="ss")?Vc(n.S,e.length):(r>=2?i=r===3?1e3:100:i=r===1?10:1,a=Math.round(i*(n.S+n.u)),a>=60*i&&(a=0),e==="s"?a===0?"0":""+a/i:(s=Vc(a,2+r),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=n.D*24+n.H;break;case"[m]":case"[mm]":l=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":l=((n.D*24+n.H)*60+n.M)*60+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:l=o,u=1;break}var d=u>0?Vc(l,u):"";return d}function hf(t){var e=3;if(t.length<=e)return t;for(var n=t.length%e,r=t.substr(0,n);n!=t.length;n+=e)r+=(r.length>0?",":"")+t.substr(n,e);return r}var f7=/%/g;function jse(t,e,n){var r=e.replace(f7,""),s=e.length-r.length;return qA(t,r,n*Math.pow(10,2*s))+Ys("%",s)}function Qse(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return qA(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function h7(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+h7(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),n=(e/Math.pow(10,a)).toPrecision(r+1+(s+a)%s),n.indexOf("e")===-1){var i=Math.floor(Math.log(e)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(i-n.length+a):n+="E+"+(i-a);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,s)+"."+n.substr(2+s),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var m7=/# (\?+)( ?)\/( ?)(\d+)/;function Hse(t,e,n){var r=parseInt(t[4],10),s=Math.round(e*r),a=Math.floor(s/r),i=s-a*r,o=r;return n+(a===0?"":""+a)+" "+(i===0?Ys(" ",t[1].length+1+t[4].length):R4(i,t[1].length)+t[2]+"/"+t[3]+Vc(o,t[4].length))}function Vse(t,e,n){return n+(e===0?"":""+e)+Ys(" ",t[1].length+2+t[4].length)}var p7=/^#*0*\.([0#]+)/,g7=/\).*[0#]/,x7=/\(###\) ###\\?-####/;function ho(t){for(var e="",n,r=0;r!=t.length;++r)switch(n=t.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(n)}return e}function AD(t,e){var n=Math.pow(10,e);return""+Math.round(t*n)/n}function dD(t,e){var n=t-Math.floor(t),r=Math.pow(10,e);return e<(""+Math.round(n*r)).length?0:Math.round(n*r)}function zse(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function Gse(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function $l(t,e,n){if(t.charCodeAt(0)===40&&!e.match(g7)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?$l("n",r,n):"("+$l("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return Qse(t,e,n);if(e.indexOf("%")!==-1)return jse(t,e,n);if(e.indexOf("E")!==-1)return h7(e,n);if(e.charCodeAt(0)===36)return"$"+$l(t,e.substr(e.charAt(1)==" "?2:1),n);var s,a,i,o,l=Math.abs(n),u=n<0?"-":"";if(e.match(/^00+$/))return u+nm(l,e.length);if(e.match(/^[#?]+$/))return s=nm(n,0),s==="0"&&(s=""),s.length>e.length?s:ho(e.substr(0,e.length-s.length))+s;if(a=e.match(m7))return Hse(a,l,u);if(e.match(/^#+0+$/))return u+nm(l,e.length-e.indexOf("0"));if(a=e.match(p7))return s=AD(n,a[1].length).replace(/^([^\.]+)$/,"$1."+ho(a[1])).replace(/\.$/,"."+ho(a[1])).replace(/\.(\d*)$/,function(y,x){return"."+x+Ys("0",ho(a[1]).length-x.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return u+AD(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return u+hf(nm(l,0));if(a=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+$l(t,e,-n):hf(""+(Math.floor(n)+zse(n,a[1].length)))+"."+Vc(dD(n,a[1].length),a[1].length);if(a=e.match(/^#,#*,#0/))return $l(t,e.replace(/^#,#*,/,""),n);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=$m($l(t,e.replace(/[\\-]/g,""),n)),i=0,$m($m(e.replace(/\\/g,"")).replace(/[0#]/g,function(y){return i<s.length?s.charAt(i++):y==="0"?"0":""}));if(e.match(x7))return s=$l(t,"##########",n),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=Mw(l,Math.pow(10,i)-1,!1),s=""+u,d=qA("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=Lw(o[2],i),d.length<a[4].length&&(d=ho(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=Mw(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?R4(o[1],i)+a[2]+"/"+a[3]+Lw(o[2],i):Ys(" ",2*i+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=nm(n,0),e.length<=s.length?s:ho(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var h=e.indexOf(".")-i,m=e.length-s.length-h;return ho(e.substr(0,h)+s+e.substr(e.length-m))}if(a=e.match(/^00,000\.([#0]*0)$/))return i=dD(n,a[1].length),n<0?"-"+$l(t,e,-n):hf(Gse(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?Vc(0,3-y.length):"")+y})+"."+Vc(i,a[1].length);switch(e){case"###,##0.00":return $l(t,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var p=hf(nm(l,0));return p!=="0"?u+p:"";case"###,###.00":return $l(t,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return $l(t,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function qse(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return qA(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function Kse(t,e,n){var r=e.replace(f7,""),s=e.length-r.length;return qA(t,r,n*Math.pow(10,2*s))+Ys("%",s)}function v7(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+v7(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),n=(e/Math.pow(10,a)).toPrecision(r+1+(s+a)%s),!n.match(/[Ee]/)){var i=Math.floor(Math.log(e)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(i-n.length+a):n+="E+"+(i-a),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function Du(t,e,n){if(t.charCodeAt(0)===40&&!e.match(g7)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Du("n",r,n):"("+Du("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return qse(t,e,n);if(e.indexOf("%")!==-1)return Kse(t,e,n);if(e.indexOf("E")!==-1)return v7(e,n);if(e.charCodeAt(0)===36)return"$"+Du(t,e.substr(e.charAt(1)==" "?2:1),n);var s,a,i,o,l=Math.abs(n),u=n<0?"-":"";if(e.match(/^00+$/))return u+Vc(l,e.length);if(e.match(/^[#?]+$/))return s=""+n,n===0&&(s=""),s.length>e.length?s:ho(e.substr(0,e.length-s.length))+s;if(a=e.match(m7))return Vse(a,l,u);if(e.match(/^#+0+$/))return u+Vc(l,e.length-e.indexOf("0"));if(a=e.match(p7))return s=(""+n).replace(/^([^\.]+)$/,"$1."+ho(a[1])).replace(/\.$/,"."+ho(a[1])),s=s.replace(/\.(\d*)$/,function(y,x){return"."+x+Ys("0",ho(a[1]).length-x.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return u+hf(""+l);if(a=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Du(t,e,-n):hf(""+n)+"."+Ys("0",a[1].length);if(a=e.match(/^#,#*,#0/))return Du(t,e.replace(/^#,#*,/,""),n);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=$m(Du(t,e.replace(/[\\-]/g,""),n)),i=0,$m($m(e.replace(/\\/g,"")).replace(/[0#]/g,function(y){return i<s.length?s.charAt(i++):y==="0"?"0":""}));if(e.match(x7))return s=Du(t,"##########",n),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=Mw(l,Math.pow(10,i)-1,!1),s=""+u,d=qA("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=Lw(o[2],i),d.length<a[4].length&&(d=ho(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=Mw(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?R4(o[1],i)+a[2]+"/"+a[3]+Lw(o[2],i):Ys(" ",2*i+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=""+n,e.length<=s.length?s:ho(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var h=e.indexOf(".")-i,m=e.length-s.length-h;return ho(e.substr(0,h)+s+e.substr(e.length-m))}if(a=e.match(/^00,000\.([#0]*0)$/))return n<0?"-"+Du(t,e,-n):hf(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?Vc(0,3-y.length):"")+y})+"."+Vc(0,a[1].length);switch(e){case"###,###":case"##,###":case"#,###":var p=hf(""+l);return p!=="0"?u+p:"";default:if(e.match(/\.[0#?]*$/))return Du(t,e.slice(0,e.lastIndexOf(".")),n)+ho(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function qA(t,e,n){return(n|0)===n?Du(t,e,n):$l(t,e,n)}function $se(t){for(var e=[],n=!1,r=0,s=0;r<t.length;++r)switch(t.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=t.substr(s,r-s),s=r+1}if(e[e.length]=t.substr(s),n===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var y7=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Rp(t){for(var e=0,n="",r="";e<t.length;)switch(n=t.charAt(e)){case"G":Uw(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="上午/下午")return!0;++e;break;case"[":for(r=n;t.charAt(e++)!=="]"&&e<t.length;)r+=t.charAt(e);if(r.match(y7))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(n=t.charAt(++e))>-1||n=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===n;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function Wse(t,e,n,r){for(var s=[],a="",i=0,o="",l="t",u,d,h,m="H";i<t.length;)switch(o=t.charAt(i)){case"G":if(!Uw(t,i))throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"G",v:"General"},i+=7;break;case'"':for(a="";(h=t.charCodeAt(++i))!==34&&i<t.length;)a+=String.fromCharCode(h);s[s.length]={t:"t",v:a},++i;break;case"\\":var p=t.charAt(++i),y=p==="("||p===")"?p:"t";s[s.length]={t:y,v:p},++i;break;case"_":s[s.length]={t:"t",v:" "},i+=2;break;case"@":s[s.length]={t:"T",v:e},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(u==null&&(u=Fh(e,n,t.charAt(i+1)==="2"),u==null))return"";s[s.length]={t:"X",v:t.substr(i,2)},l=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=Fh(e,n),u==null))return"";for(a=o;++i<t.length&&t.charAt(i).toLowerCase()===o;)a+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=m),s[s.length]={t:o,v:a},l=o;break;case"A":case"a":case"上":var x={t:o,v:o};if(u==null&&(u=Fh(e,n)),t.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(x.v=u.H>=12?"P":"A"),x.t="T",m="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(x.v=u.H>=12?"PM":"AM"),x.t="T",i+=5,m="h"):t.substr(i,5).toUpperCase()==="上午/下午"?(u!=null&&(x.v=u.H>=12?"下午":"上午"),x.t="T",i+=5,m="h"):(x.t="t",++i),u==null&&x.t==="T")return"";s[s.length]=x,l=o;break;case"[":for(a=o;t.charAt(i++)!=="]"&&i<t.length;)a+=t.charAt(i);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(y7)){if(u==null&&(u=Fh(e,n),u==null))return"";s[s.length]={t:"Z",v:a.toLowerCase()},l=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",Rp(t)||(s[s.length]={t:"t",v:a}));break;case".":if(u!=null){for(a=o;++i<t.length&&(o=t.charAt(i))==="0";)a+=o;s[s.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++i<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(i))>-1;)a+=o;s[s.length]={t:"n",v:a};break;case"?":for(a=o;t.charAt(++i)===o;)a+=o;s[s.length]={t:o,v:a},l=o;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":s[s.length]={t:r===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)a+=t.charAt(i);s[s.length]={t:"D",v:a};break;case" ":s[s.length]={t:o,v:o},++i;break;case"$":s[s.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"t",v:o},++i;break}var C=0,S=0,k;for(i=s.length-1,l="t";i>=0;--i)switch(s[i].t){case"h":case"H":s[i].t=m,l="h",C<1&&(C=1);break;case"s":(k=s[i].v.match(/\.0+$/))&&(S=Math.max(S,k[0].length-1)),C<3&&(C=3);case"d":case"y":case"M":case"e":l=s[i].t;break;case"m":l==="s"&&(s[i].t="M",C<2&&(C=2));break;case"X":break;case"Z":C<1&&s[i].v.match(/[Hh]/)&&(C=1),C<2&&s[i].v.match(/[Mm]/)&&(C=2),C<3&&s[i].v.match(/[Ss]/)&&(C=3)}switch(C){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var I="",F;for(i=0;i<s.length;++i)switch(s[i].t){case"t":case"T":case" ":case"D":break;case"X":s[i].v="",s[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[i].v=Ose(s[i].t.charCodeAt(0),s[i].v,u,S),s[i].t="t";break;case"n":case"?":for(F=i+1;s[F]!=null&&((o=s[F].t)==="?"||o==="D"||(o===" "||o==="t")&&s[F+1]!=null&&(s[F+1].t==="?"||s[F+1].t==="t"&&s[F+1].v==="/")||s[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[F].v==="/"||s[F].v===" "&&s[F+1]!=null&&s[F+1].t=="?"));)s[i].v+=s[F].v,s[F]={v:"",t:";"},++F;I+=s[i].v,i=F-1;break;case"G":s[i].t="t",s[i].v=n0(e,n);break}var U="",R,E;if(I.length>0){I.charCodeAt(0)==40?(R=e<0&&I.charCodeAt(0)===45?-e:e,E=qA("n",I,R)):(R=e<0&&r>1?-e:e,E=qA("n",I,R),R<0&&s[0]&&s[0].t=="t"&&(E=E.substr(1),s[0].v="-"+s[0].v)),F=E.length-1;var _=s.length;for(i=0;i<s.length;++i)if(s[i]!=null&&s[i].t!="t"&&s[i].v.indexOf(".")>-1){_=i;break}var B=s.length;if(_===s.length&&E.indexOf("E")===-1){for(i=s.length-1;i>=0;--i)s[i]==null||"n?".indexOf(s[i].t)===-1||(F>=s[i].v.length-1?(F-=s[i].v.length,s[i].v=E.substr(F+1,s[i].v.length)):F<0?s[i].v="":(s[i].v=E.substr(0,F+1),F=-1),s[i].t="t",B=i);F>=0&&B<s.length&&(s[B].v=E.substr(0,F+1)+s[B].v)}else if(_!==s.length&&E.indexOf("E")===-1){for(F=E.indexOf(".")-1,i=_;i>=0;--i)if(!(s[i]==null||"n?".indexOf(s[i].t)===-1)){for(d=s[i].v.indexOf(".")>-1&&i===_?s[i].v.indexOf(".")-1:s[i].v.length-1,U=s[i].v.substr(d+1);d>=0;--d)F>=0&&(s[i].v.charAt(d)==="0"||s[i].v.charAt(d)==="#")&&(U=E.charAt(F--)+U);s[i].v=U,s[i].t="t",B=i}for(F>=0&&B<s.length&&(s[B].v=E.substr(0,F+1)+s[B].v),F=E.indexOf(".")+1,i=_;i<s.length;++i)if(!(s[i]==null||"n?(".indexOf(s[i].t)===-1&&i!==_)){for(d=s[i].v.indexOf(".")>-1&&i===_?s[i].v.indexOf(".")+1:0,U=s[i].v.substr(0,d);d<s[i].v.length;++d)F<E.length&&(U+=E.charAt(F++));s[i].v=U,s[i].t="t",B=i}}}for(i=0;i<s.length;++i)s[i]!=null&&"n?".indexOf(s[i].t)>-1&&(R=r>1&&e<0&&i>0&&s[i-1].v==="-"?-e:e,s[i].v=qA(s[i].t,s[i].v,R),s[i].t="t");var j="";for(i=0;i!==s.length;++i)s[i]!=null&&(j+=s[i].v);return j}var fD=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function hD(t,e){if(e==null)return!1;var n=parseFloat(e[2]);switch(e[1]){case"=":if(t==n)return!0;break;case">":if(t>n)return!0;break;case"<":if(t<n)return!0;break;case"<>":if(t!=n)return!0;break;case">=":if(t>=n)return!0;break;case"<=":if(t<=n)return!0;break}return!1}function Yse(t,e){var n=$se(t),r=n.length,s=n[r-1].indexOf("@");if(r<4&&s>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof e!="number")return[4,n.length===4||s>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=s>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=s>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=s>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var a=e>0?n[0]:e<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[r,a];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var i=n[0].match(fD),o=n[1].match(fD);return hD(e,i)?[r,n[0]]:hD(e,o)?[r,n[1]]:[r,n[i!=null&&o!=null?2:1]]}return[r,a]}function uc(t,e,n){n==null&&(n={});var r="";switch(typeof t){case"string":t=="m/d/yy"&&n.dateNF?r=n.dateNF:r=t;break;case"number":t==14&&n.dateNF?r=n.dateNF:r=(n.table!=null?n.table:kn)[t],r==null&&(r=n.table&&n.table[uD[t]]||kn[uD[t]]),r==null&&(r=Fse[t]||"General");break}if(Uw(r,0))return n0(e,n);e instanceof Date&&(e=d7(e,n.date1904));var s=Yse(r,e);if(Uw(s[1]))return n0(e,n);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return Wse(s[1],e,n,s[0])}function KA(t,e){if(typeof e!="number"){e=+e||-1;for(var n=0;n<392;++n){if(kn[n]==null){e<0&&(e=n);continue}if(kn[n]==t){e=n;break}}e<0&&(e=391)}return kn[e]=t,e}function uC(t){for(var e=0;e!=392;++e)t[e]!==void 0&&KA(t[e],e)}function Lp(){kn=Ise()}var Xse={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},w7=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Jse(t){var e=typeof t=="number"?kn[t]:t;return e=e.replace(w7,"(\\d+)"),new RegExp("^"+e+"$")}function Zse(t,e,n){var r=-1,s=-1,a=-1,i=-1,o=-1,l=-1;(e.match(w7)||[]).forEach(function(h,m){var p=parseInt(n[m+1],10);switch(h.toLowerCase().charAt(0)){case"y":r=p;break;case"d":a=p;break;case"h":i=p;break;case"s":l=p;break;case"m":i>=0?o=p:s=p;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var u=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return i==-1&&o==-1&&l==-1?u:r==-1&&s==-1&&a==-1?d:u+"T"+d}var eae=function(){var t={};t.version="1.2.0";function e(){for(var E=0,_=new Array(256),B=0;B!=256;++B)E=B,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,_[B]=E;return typeof Int32Array<"u"?new Int32Array(_):_}var n=e();function r(E){var _=0,B=0,j=0,D=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(j=0;j!=256;++j)D[j]=E[j];for(j=0;j!=256;++j)for(B=E[j],_=256+j;_<4096;_+=256)B=D[_]=B>>>8^E[B&255];var L=[];for(j=1;j!=16;++j)L[j-1]=typeof Int32Array<"u"?D.subarray(j*256,j*256+256):D.slice(j*256,j*256+256);return L}var s=r(n),a=s[0],i=s[1],o=s[2],l=s[3],u=s[4],d=s[5],h=s[6],m=s[7],p=s[8],y=s[9],x=s[10],C=s[11],S=s[12],k=s[13],I=s[14];function F(E,_){for(var B=_^-1,j=0,D=E.length;j<D;)B=B>>>8^n[(B^E.charCodeAt(j++))&255];return~B}function U(E,_){for(var B=_^-1,j=E.length-15,D=0;D<j;)B=I[E[D++]^B&255]^k[E[D++]^B>>8&255]^S[E[D++]^B>>16&255]^C[E[D++]^B>>>24]^x[E[D++]]^y[E[D++]]^p[E[D++]]^m[E[D++]]^h[E[D++]]^d[E[D++]]^u[E[D++]]^l[E[D++]]^o[E[D++]]^i[E[D++]]^a[E[D++]]^n[E[D++]];for(j+=15;D<j;)B=B>>>8^n[(B^E[D++])&255];return~B}function R(E,_){for(var B=_^-1,j=0,D=E.length,L=0,Q=0;j<D;)L=E.charCodeAt(j++),L<128?B=B>>>8^n[(B^L)&255]:L<2048?(B=B>>>8^n[(B^(192|L>>6&31))&255],B=B>>>8^n[(B^(128|L&63))&255]):L>=55296&&L<57344?(L=(L&1023)+64,Q=E.charCodeAt(j++)&1023,B=B>>>8^n[(B^(240|L>>8&7))&255],B=B>>>8^n[(B^(128|L>>2&63))&255],B=B>>>8^n[(B^(128|Q>>6&15|(L&3)<<4))&255],B=B>>>8^n[(B^(128|Q&63))&255]):(B=B>>>8^n[(B^(224|L>>12&15))&255],B=B>>>8^n[(B^(128|L>>6&63))&255],B=B>>>8^n[(B^(128|L&63))&255]);return~B}return t.table=n,t.bstr=F,t.buf=U,t.str=R,t}(),xn=function(){var e={};e.version="1.2.1";function n(fe,Be){for(var Ee=fe.split("/"),_e=Be.split("/"),Te=0,ke=0,Ye=Math.min(Ee.length,_e.length);Te<Ye;++Te){if(ke=Ee[Te].length-_e[Te].length)return ke;if(Ee[Te]!=_e[Te])return Ee[Te]<_e[Te]?-1:1}return Ee.length-_e.length}function r(fe){if(fe.charAt(fe.length-1)=="/")return fe.slice(0,-1).indexOf("/")===-1?fe:r(fe.slice(0,-1));var Be=fe.lastIndexOf("/");return Be===-1?fe:fe.slice(0,Be+1)}function s(fe){if(fe.charAt(fe.length-1)=="/")return s(fe.slice(0,-1));var Be=fe.lastIndexOf("/");return Be===-1?fe:fe.slice(Be+1)}function a(fe,Be){typeof Be=="string"&&(Be=new Date(Be));var Ee=Be.getHours();Ee=Ee<<6|Be.getMinutes(),Ee=Ee<<5|Be.getSeconds()>>>1,fe.write_shift(2,Ee);var _e=Be.getFullYear()-1980;_e=_e<<4|Be.getMonth()+1,_e=_e<<5|Be.getDate(),fe.write_shift(2,_e)}function i(fe){var Be=fe.read_shift(2)&65535,Ee=fe.read_shift(2)&65535,_e=new Date,Te=Ee&31;Ee>>>=5;var ke=Ee&15;Ee>>>=4,_e.setMilliseconds(0),_e.setFullYear(Ee+1980),_e.setMonth(ke-1),_e.setDate(Te);var Ye=Be&31;Be>>>=5;var ot=Be&63;return Be>>>=6,_e.setHours(Be),_e.setMinutes(ot),_e.setSeconds(Ye<<1),_e}function o(fe){bi(fe,0);for(var Be={},Ee=0;fe.l<=fe.length-4;){var _e=fe.read_shift(2),Te=fe.read_shift(2),ke=fe.l+Te,Ye={};switch(_e){case 21589:Ee=fe.read_shift(1),Ee&1&&(Ye.mtime=fe.read_shift(4)),Te>5&&(Ee&2&&(Ye.atime=fe.read_shift(4)),Ee&4&&(Ye.ctime=fe.read_shift(4))),Ye.mtime&&(Ye.mt=new Date(Ye.mtime*1e3));break}fe.l=ke,Be[_e]=Ye}return Be}var l;function u(){return l||(l={})}function d(fe,Be){if(fe[0]==80&&fe[1]==75)return jn(fe,Be);if((fe[0]|32)==109&&(fe[1]|32)==105)return Ua(fe,Be);if(fe.length<512)throw new Error("CFB file size "+fe.length+" < 512");var Ee=3,_e=512,Te=0,ke=0,Ye=0,ot=0,qe=0,tt=[],st=fe.slice(0,512);bi(st,0);var Et=h(st);switch(Ee=Et[0],Ee){case 3:_e=512;break;case 4:_e=4096;break;case 0:if(Et[1]==0)return jn(fe,Be);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ee)}_e!==512&&(st=fe.slice(0,_e),bi(st,28));var Dt=fe.slice(0,_e);m(st,Ee);var Vt=st.read_shift(4,"i");if(Ee===3&&Vt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Vt);st.l+=4,Ye=st.read_shift(4,"i"),st.l+=4,st.chk("00100000","Mini Stream Cutoff Size: "),ot=st.read_shift(4,"i"),Te=st.read_shift(4,"i"),qe=st.read_shift(4,"i"),ke=st.read_shift(4,"i");for(var Ft=-1,Pt=0;Pt<109&&(Ft=st.read_shift(4,"i"),!(Ft<0));++Pt)tt[Pt]=Ft;var yn=p(fe,_e);C(qe,ke,yn,_e,tt);var Kn=k(yn,Ye,tt,_e);Kn[Ye].name="!Directory",Te>0&&ot!==Q&&(Kn[ot].name="!MiniFAT"),Kn[tt[0]].name="!FAT",Kn.fat_addrs=tt,Kn.ssz=_e;var $n={},Jn=[],js=[],Ti=[];I(Ye,Kn,yn,Jn,Te,$n,js,ot),y(js,Ti,Jn),Jn.shift();var Qs={FileIndex:js,FullPaths:Ti};return Be&&Be.raw&&(Qs.raw={header:Dt,sectors:yn}),Qs}function h(fe){if(fe[fe.l]==80&&fe[fe.l+1]==75)return[0,0];fe.chk(H,"Header Signature: "),fe.l+=16;var Be=fe.read_shift(2,"u");return[fe.read_shift(2,"u"),Be]}function m(fe,Be){var Ee=9;switch(fe.l+=2,Ee=fe.read_shift(2)){case 9:if(Be!=3)throw new Error("Sector Shift: Expected 9 saw "+Ee);break;case 12:if(Be!=4)throw new Error("Sector Shift: Expected 12 saw "+Ee);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ee)}fe.chk("0600","Mini Sector Shift: "),fe.chk("000000000000","Reserved: ")}function p(fe,Be){for(var Ee=Math.ceil(fe.length/Be)-1,_e=[],Te=1;Te<Ee;++Te)_e[Te-1]=fe.slice(Te*Be,(Te+1)*Be);return _e[Ee-1]=fe.slice(Ee*Be),_e}function y(fe,Be,Ee){for(var _e=0,Te=0,ke=0,Ye=0,ot=0,qe=Ee.length,tt=[],st=[];_e<qe;++_e)tt[_e]=st[_e]=_e,Be[_e]=Ee[_e];for(;ot<st.length;++ot)_e=st[ot],Te=fe[_e].L,ke=fe[_e].R,Ye=fe[_e].C,tt[_e]===_e&&(Te!==-1&&tt[Te]!==Te&&(tt[_e]=tt[Te]),ke!==-1&&tt[ke]!==ke&&(tt[_e]=tt[ke])),Ye!==-1&&(tt[Ye]=_e),Te!==-1&&_e!=tt[_e]&&(tt[Te]=tt[_e],st.lastIndexOf(Te)<ot&&st.push(Te)),ke!==-1&&_e!=tt[_e]&&(tt[ke]=tt[_e],st.lastIndexOf(ke)<ot&&st.push(ke));for(_e=1;_e<qe;++_e)tt[_e]===_e&&(ke!==-1&&tt[ke]!==ke?tt[_e]=tt[ke]:Te!==-1&&tt[Te]!==Te&&(tt[_e]=tt[Te]));for(_e=1;_e<qe;++_e)if(fe[_e].type!==0){if(ot=_e,ot!=tt[ot])do ot=tt[ot],Be[_e]=Be[ot]+"/"+Be[_e];while(ot!==0&&tt[ot]!==-1&&ot!=tt[ot]);tt[_e]=-1}for(Be[0]+="/",_e=1;_e<qe;++_e)fe[_e].type!==2&&(Be[_e]+="/")}function x(fe,Be,Ee){for(var _e=fe.start,Te=fe.size,ke=[],Ye=_e;Ee&&Te>0&&Ye>=0;)ke.push(Be.slice(Ye*L,Ye*L+L)),Te-=L,Ye=Nh(Ee,Ye*4);return ke.length===0?ht(0):oi(ke).slice(0,fe.size)}function C(fe,Be,Ee,_e,Te){var ke=Q;if(fe===Q){if(Be!==0)throw new Error("DIFAT chain shorter than expected")}else if(fe!==-1){var Ye=Ee[fe],ot=(_e>>>2)-1;if(!Ye)return;for(var qe=0;qe<ot&&(ke=Nh(Ye,qe*4))!==Q;++qe)Te.push(ke);C(Nh(Ye,_e-4),Be-1,Ee,_e,Te)}}function S(fe,Be,Ee,_e,Te){var ke=[],Ye=[];Te||(Te=[]);var ot=_e-1,qe=0,tt=0;for(qe=Be;qe>=0;){Te[qe]=!0,ke[ke.length]=qe,Ye.push(fe[qe]);var st=Ee[Math.floor(qe*4/_e)];if(tt=qe*4&ot,_e<4+tt)throw new Error("FAT boundary crossed: "+qe+" 4 "+_e);if(!fe[st])break;qe=Nh(fe[st],tt)}return{nodes:ke,data:SD([Ye])}}function k(fe,Be,Ee,_e){var Te=fe.length,ke=[],Ye=[],ot=[],qe=[],tt=_e-1,st=0,Et=0,Dt=0,Vt=0;for(st=0;st<Te;++st)if(ot=[],Dt=st+Be,Dt>=Te&&(Dt-=Te),!Ye[Dt]){qe=[];var Ft=[];for(Et=Dt;Et>=0;){Ft[Et]=!0,Ye[Et]=!0,ot[ot.length]=Et,qe.push(fe[Et]);var Pt=Ee[Math.floor(Et*4/_e)];if(Vt=Et*4&tt,_e<4+Vt)throw new Error("FAT boundary crossed: "+Et+" 4 "+_e);if(!fe[Pt]||(Et=Nh(fe[Pt],Vt),Ft[Et]))break}ke[Dt]={nodes:ot,data:SD([qe])}}return ke}function I(fe,Be,Ee,_e,Te,ke,Ye,ot){for(var qe=0,tt=_e.length?2:0,st=Be[fe].data,Et=0,Dt=0,Vt;Et<st.length;Et+=128){var Ft=st.slice(Et,Et+128);bi(Ft,64),Dt=Ft.read_shift(2),Vt=H4(Ft,0,Dt-tt),_e.push(Vt);var Pt={name:Vt,type:Ft.read_shift(1),color:Ft.read_shift(1),L:Ft.read_shift(4,"i"),R:Ft.read_shift(4,"i"),C:Ft.read_shift(4,"i"),clsid:Ft.read_shift(16),state:Ft.read_shift(4,"i"),start:0,size:0},yn=Ft.read_shift(2)+Ft.read_shift(2)+Ft.read_shift(2)+Ft.read_shift(2);yn!==0&&(Pt.ct=F(Ft,Ft.l-8));var Kn=Ft.read_shift(2)+Ft.read_shift(2)+Ft.read_shift(2)+Ft.read_shift(2);Kn!==0&&(Pt.mt=F(Ft,Ft.l-8)),Pt.start=Ft.read_shift(4,"i"),Pt.size=Ft.read_shift(4,"i"),Pt.size<0&&Pt.start<0&&(Pt.size=Pt.type=0,Pt.start=Q,Pt.name=""),Pt.type===5?(qe=Pt.start,Te>0&&qe!==Q&&(Be[qe].name="!StreamData")):Pt.size>=4096?(Pt.storage="fat",Be[Pt.start]===void 0&&(Be[Pt.start]=S(Ee,Pt.start,Be.fat_addrs,Be.ssz)),Be[Pt.start].name=Pt.name,Pt.content=Be[Pt.start].data.slice(0,Pt.size)):(Pt.storage="minifat",Pt.size<0?Pt.size=0:qe!==Q&&Pt.start!==Q&&Be[qe]&&(Pt.content=x(Pt,Be[qe].data,(Be[ot]||{}).data))),Pt.content&&bi(Pt.content,0),ke[Vt]=Pt,Ye.push(Pt)}}function F(fe,Be){return new Date((hl(fe,Be+4)/1e7*Math.pow(2,32)+hl(fe,Be)/1e7-11644473600)*1e3)}function U(fe,Be){return u(),d(l.readFileSync(fe),Be)}function R(fe,Be){var Ee=Be&&Be.type;switch(Ee||rr&&Buffer.isBuffer(fe)&&(Ee="buffer"),Ee||"base64"){case"file":return U(fe,Be);case"base64":return d(ml(wl(fe)),Be);case"binary":return d(ml(fe),Be)}return d(fe,Be)}function E(fe,Be){var Ee=Be||{},_e=Ee.root||"Root Entry";if(fe.FullPaths||(fe.FullPaths=[]),fe.FileIndex||(fe.FileIndex=[]),fe.FullPaths.length!==fe.FileIndex.length)throw new Error("inconsistent CFB structure");fe.FullPaths.length===0&&(fe.FullPaths[0]=_e+"/",fe.FileIndex[0]={name:_e,type:5}),Ee.CLSID&&(fe.FileIndex[0].clsid=Ee.CLSID),_(fe)}function _(fe){var Be="Sh33tJ5";if(!xn.find(fe,"/"+Be)){var Ee=ht(4);Ee[0]=55,Ee[1]=Ee[3]=50,Ee[2]=54,fe.FileIndex.push({name:Be,type:2,content:Ee,size:4,L:69,R:69,C:69}),fe.FullPaths.push(fe.FullPaths[0]+Be),B(fe)}}function B(fe,Be){E(fe);for(var Ee=!1,_e=!1,Te=fe.FullPaths.length-1;Te>=0;--Te){var ke=fe.FileIndex[Te];switch(ke.type){case 0:_e?Ee=!0:(fe.FileIndex.pop(),fe.FullPaths.pop());break;case 1:case 2:case 5:_e=!0,isNaN(ke.R*ke.L*ke.C)&&(Ee=!0),ke.R>-1&&ke.L>-1&&ke.R==ke.L&&(Ee=!0);break;default:Ee=!0;break}}if(!(!Ee&&!Be)){var Ye=new Date(1987,1,19),ot=0,qe=Object.create?Object.create(null):{},tt=[];for(Te=0;Te<fe.FullPaths.length;++Te)qe[fe.FullPaths[Te]]=!0,fe.FileIndex[Te].type!==0&&tt.push([fe.FullPaths[Te],fe.FileIndex[Te]]);for(Te=0;Te<tt.length;++Te){var st=r(tt[Te][0]);_e=qe[st],_e||(tt.push([st,{name:s(st).replace("/",""),type:1,clsid:Y,ct:Ye,mt:Ye,content:null}]),qe[st]=!0)}for(tt.sort(function(Vt,Ft){return n(Vt[0],Ft[0])}),fe.FullPaths=[],fe.FileIndex=[],Te=0;Te<tt.length;++Te)fe.FullPaths[Te]=tt[Te][0],fe.FileIndex[Te]=tt[Te][1];for(Te=0;Te<tt.length;++Te){var Et=fe.FileIndex[Te],Dt=fe.FullPaths[Te];if(Et.name=s(Dt).replace("/",""),Et.L=Et.R=Et.C=-(Et.color=1),Et.size=Et.content?Et.content.length:0,Et.start=0,Et.clsid=Et.clsid||Y,Te===0)Et.C=tt.length>1?1:-1,Et.size=0,Et.type=5;else if(Dt.slice(-1)=="/"){for(ot=Te+1;ot<tt.length&&r(fe.FullPaths[ot])!=Dt;++ot);for(Et.C=ot>=tt.length?-1:ot,ot=Te+1;ot<tt.length&&r(fe.FullPaths[ot])!=r(Dt);++ot);Et.R=ot>=tt.length?-1:ot,Et.type=1}else r(fe.FullPaths[Te+1]||"")==r(Dt)&&(Et.R=Te+1),Et.type=2}}}function j(fe,Be){var Ee=Be||{};if(Ee.fileType=="mad")return $t(fe,Ee);switch(B(fe),Ee.fileType){case"zip":return qr(fe,Ee)}var _e=function(Vt){for(var Ft=0,Pt=0,yn=0;yn<Vt.FileIndex.length;++yn){var Kn=Vt.FileIndex[yn];if(Kn.content){var $n=Kn.content.length;$n>0&&($n<4096?Ft+=$n+63>>6:Pt+=$n+511>>9)}}for(var Jn=Vt.FullPaths.length+3>>2,js=Ft+7>>3,Ti=Ft+127>>7,Qs=js+Pt+Jn+Ti,va=Qs+127>>7,na=va<=109?0:Math.ceil((va-109)/127);Qs+va+na+127>>7>va;)na=++va<=109?0:Math.ceil((va-109)/127);var Ma=[1,na,va,Ti,Jn,Pt,Ft,0];return Vt.FileIndex[0].size=Ft<<6,Ma[7]=(Vt.FileIndex[0].start=Ma[0]+Ma[1]+Ma[2]+Ma[3]+Ma[4]+Ma[5])+(Ma[6]+7>>3),Ma}(fe),Te=ht(_e[7]<<9),ke=0,Ye=0;{for(ke=0;ke<8;++ke)Te.write_shift(1,te[ke]);for(ke=0;ke<8;++ke)Te.write_shift(2,0);for(Te.write_shift(2,62),Te.write_shift(2,3),Te.write_shift(2,65534),Te.write_shift(2,9),Te.write_shift(2,6),ke=0;ke<3;++ke)Te.write_shift(2,0);for(Te.write_shift(4,0),Te.write_shift(4,_e[2]),Te.write_shift(4,_e[0]+_e[1]+_e[2]+_e[3]-1),Te.write_shift(4,0),Te.write_shift(4,4096),Te.write_shift(4,_e[3]?_e[0]+_e[1]+_e[2]-1:Q),Te.write_shift(4,_e[3]),Te.write_shift(-4,_e[1]?_e[0]-1:Q),Te.write_shift(4,_e[1]),ke=0;ke<109;++ke)Te.write_shift(-4,ke<_e[2]?_e[1]+ke:-1)}if(_e[1])for(Ye=0;Ye<_e[1];++Ye){for(;ke<236+Ye*127;++ke)Te.write_shift(-4,ke<_e[2]?_e[1]+ke:-1);Te.write_shift(-4,Ye===_e[1]-1?Q:Ye+1)}var ot=function(Vt){for(Ye+=Vt;ke<Ye-1;++ke)Te.write_shift(-4,ke+1);Vt&&(++ke,Te.write_shift(-4,Q))};for(Ye=ke=0,Ye+=_e[1];ke<Ye;++ke)Te.write_shift(-4,ne.DIFSECT);for(Ye+=_e[2];ke<Ye;++ke)Te.write_shift(-4,ne.FATSECT);ot(_e[3]),ot(_e[4]);for(var qe=0,tt=0,st=fe.FileIndex[0];qe<fe.FileIndex.length;++qe)st=fe.FileIndex[qe],st.content&&(tt=st.content.length,!(tt<4096)&&(st.start=Ye,ot(tt+511>>9)));for(ot(_e[6]+7>>3);Te.l&511;)Te.write_shift(-4,ne.ENDOFCHAIN);for(Ye=ke=0,qe=0;qe<fe.FileIndex.length;++qe)st=fe.FileIndex[qe],st.content&&(tt=st.content.length,!(!tt||tt>=4096)&&(st.start=Ye,ot(tt+63>>6)));for(;Te.l&511;)Te.write_shift(-4,ne.ENDOFCHAIN);for(ke=0;ke<_e[4]<<2;++ke){var Et=fe.FullPaths[ke];if(!Et||Et.length===0){for(qe=0;qe<17;++qe)Te.write_shift(4,0);for(qe=0;qe<3;++qe)Te.write_shift(4,-1);for(qe=0;qe<12;++qe)Te.write_shift(4,0);continue}st=fe.FileIndex[ke],ke===0&&(st.start=st.size?st.start-1:Q);var Dt=ke===0&&Ee.root||st.name;if(tt=2*(Dt.length+1),Te.write_shift(64,Dt,"utf16le"),Te.write_shift(2,tt),Te.write_shift(1,st.type),Te.write_shift(1,st.color),Te.write_shift(-4,st.L),Te.write_shift(-4,st.R),Te.write_shift(-4,st.C),st.clsid)Te.write_shift(16,st.clsid,"hex");else for(qe=0;qe<4;++qe)Te.write_shift(4,0);Te.write_shift(4,st.state||0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,st.start),Te.write_shift(4,st.size),Te.write_shift(4,0)}for(ke=1;ke<fe.FileIndex.length;++ke)if(st=fe.FileIndex[ke],st.size>=4096)if(Te.l=st.start+1<<9,rr&&Buffer.isBuffer(st.content))st.content.copy(Te,Te.l,0,st.size),Te.l+=st.size+511&-512;else{for(qe=0;qe<st.size;++qe)Te.write_shift(1,st.content[qe]);for(;qe&511;++qe)Te.write_shift(1,0)}for(ke=1;ke<fe.FileIndex.length;++ke)if(st=fe.FileIndex[ke],st.size>0&&st.size<4096)if(rr&&Buffer.isBuffer(st.content))st.content.copy(Te,Te.l,0,st.size),Te.l+=st.size+63&-64;else{for(qe=0;qe<st.size;++qe)Te.write_shift(1,st.content[qe]);for(;qe&63;++qe)Te.write_shift(1,0)}if(rr)Te.l=Te.length;else for(;Te.l<Te.length;)Te.write_shift(1,0);return Te}function D(fe,Be){var Ee=fe.FullPaths.map(function(qe){return qe.toUpperCase()}),_e=Ee.map(function(qe){var tt=qe.split("/");return tt[tt.length-(qe.slice(-1)=="/"?2:1)]}),Te=!1;Be.charCodeAt(0)===47?(Te=!0,Be=Ee[0].slice(0,-1)+Be):Te=Be.indexOf("/")!==-1;var ke=Be.toUpperCase(),Ye=Te===!0?Ee.indexOf(ke):_e.indexOf(ke);if(Ye!==-1)return fe.FileIndex[Ye];var ot=!ke.match(tx);for(ke=ke.replace(vo,""),ot&&(ke=ke.replace(tx,"!")),Ye=0;Ye<Ee.length;++Ye)if((ot?Ee[Ye].replace(tx,"!"):Ee[Ye]).replace(vo,"")==ke||(ot?_e[Ye].replace(tx,"!"):_e[Ye]).replace(vo,"")==ke)return fe.FileIndex[Ye];return null}var L=64,Q=-2,H="d0cf11e0a1b11ae1",te=[208,207,17,224,161,177,26,225],Y="00000000000000000000000000000000",ne={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Q,FREESECT:-1,HEADER_SIGNATURE:H,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Y,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function V(fe,Be,Ee){u();var _e=j(fe,Ee);l.writeFileSync(Be,_e)}function J(fe){for(var Be=new Array(fe.length),Ee=0;Ee<fe.length;++Ee)Be[Ee]=String.fromCharCode(fe[Ee]);return Be.join("")}function K(fe,Be){var Ee=j(fe,Be);switch(Be&&Be.type||"buffer"){case"file":return u(),l.writeFileSync(Be.filename,Ee),Ee;case"binary":return typeof Ee=="string"?Ee:J(Ee);case"base64":return Zx(typeof Ee=="string"?Ee:J(Ee));case"buffer":if(rr)return Buffer.isBuffer(Ee)?Ee:ld(Ee);case"array":return typeof Ee=="string"?ml(Ee):Ee}return Ee}var ie;function O(fe){try{var Be=fe.InflateRaw,Ee=new Be;if(Ee._processChunk(new Uint8Array([3,0]),Ee._finishFlushFlag),Ee.bytesRead)ie=fe;else throw new Error("zlib does not expose bytesRead")}catch(_e){console.error("cannot use native zlib: "+(_e.message||_e))}}function W(fe,Be){if(!ie)return un(fe,Be);var Ee=ie.InflateRaw,_e=new Ee,Te=_e._processChunk(fe.slice(fe.l),_e._finishFlushFlag);return fe.l+=_e.bytesRead,Te}function Z(fe){return ie?ie.deflateRawSync(fe):Oe(fe)}var re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],se=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],de=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function pe(fe){var Be=(fe<<1|fe<<11)&139536|(fe<<5|fe<<15)&558144;return(Be>>16|Be>>8|Be)&255}for(var be=typeof Uint8Array<"u",Se=be?new Uint8Array(256):[],me=0;me<256;++me)Se[me]=pe(me);function ce(fe,Be){var Ee=Se[fe&255];return Be<=8?Ee>>>8-Be:(Ee=Ee<<8|Se[fe>>8&255],Be<=16?Ee>>>16-Be:(Ee=Ee<<8|Se[fe>>16&255],Ee>>>24-Be))}function Me(fe,Be){var Ee=Be&7,_e=Be>>>3;return(fe[_e]|(Ee<=6?0:fe[_e+1]<<8))>>>Ee&3}function Ze(fe,Be){var Ee=Be&7,_e=Be>>>3;return(fe[_e]|(Ee<=5?0:fe[_e+1]<<8))>>>Ee&7}function Fe(fe,Be){var Ee=Be&7,_e=Be>>>3;return(fe[_e]|(Ee<=4?0:fe[_e+1]<<8))>>>Ee&15}function Ce(fe,Be){var Ee=Be&7,_e=Be>>>3;return(fe[_e]|(Ee<=3?0:fe[_e+1]<<8))>>>Ee&31}function Re(fe,Be){var Ee=Be&7,_e=Be>>>3;return(fe[_e]|(Ee<=1?0:fe[_e+1]<<8))>>>Ee&127}function ze(fe,Be,Ee){var _e=Be&7,Te=Be>>>3,ke=(1<<Ee)-1,Ye=fe[Te]>>>_e;return Ee<8-_e||(Ye|=fe[Te+1]<<8-_e,Ee<16-_e)||(Ye|=fe[Te+2]<<16-_e,Ee<24-_e)||(Ye|=fe[Te+3]<<24-_e),Ye&ke}function Je(fe,Be,Ee){var _e=Be&7,Te=Be>>>3;return _e<=5?fe[Te]|=(Ee&7)<<_e:(fe[Te]|=Ee<<_e&255,fe[Te+1]=(Ee&7)>>8-_e),Be+3}function dt(fe,Be,Ee){var _e=Be&7,Te=Be>>>3;return Ee=(Ee&1)<<_e,fe[Te]|=Ee,Be+1}function _t(fe,Be,Ee){var _e=Be&7,Te=Be>>>3;return Ee<<=_e,fe[Te]|=Ee&255,Ee>>>=8,fe[Te+1]=Ee,Be+8}function ft(fe,Be,Ee){var _e=Be&7,Te=Be>>>3;return Ee<<=_e,fe[Te]|=Ee&255,Ee>>>=8,fe[Te+1]=Ee&255,fe[Te+2]=Ee>>>8,Be+16}function Rt(fe,Be){var Ee=fe.length,_e=2*Ee>Be?2*Ee:Be+5,Te=0;if(Ee>=Be)return fe;if(rr){var ke=oD(_e);if(fe.copy)fe.copy(ke);else for(;Te<fe.length;++Te)ke[Te]=fe[Te];return ke}else if(be){var Ye=new Uint8Array(_e);if(Ye.set)Ye.set(fe);else for(;Te<Ee;++Te)Ye[Te]=fe[Te];return Ye}return fe.length=_e,fe}function Ut(fe){for(var Be=new Array(fe),Ee=0;Ee<fe;++Ee)Be[Ee]=0;return Be}function Zt(fe,Be,Ee){var _e=1,Te=0,ke=0,Ye=0,ot=0,qe=fe.length,tt=be?new Uint16Array(32):Ut(32);for(ke=0;ke<32;++ke)tt[ke]=0;for(ke=qe;ke<Ee;++ke)fe[ke]=0;qe=fe.length;var st=be?new Uint16Array(qe):Ut(qe);for(ke=0;ke<qe;++ke)tt[Te=fe[ke]]++,_e<Te&&(_e=Te),st[ke]=0;for(tt[0]=0,ke=1;ke<=_e;++ke)tt[ke+16]=ot=ot+tt[ke-1]<<1;for(ke=0;ke<qe;++ke)ot=fe[ke],ot!=0&&(st[ke]=tt[ot+16]++);var Et=0;for(ke=0;ke<qe;++ke)if(Et=fe[ke],Et!=0)for(ot=ce(st[ke],_e)>>_e-Et,Ye=(1<<_e+4-Et)-1;Ye>=0;--Ye)Be[ot|Ye<<Et]=Et&15|ke<<4;return _e}var Mt=be?new Uint16Array(512):Ut(512),jt=be?new Uint16Array(32):Ut(32);if(!be){for(var Wt=0;Wt<512;++Wt)Mt[Wt]=0;for(Wt=0;Wt<32;++Wt)jt[Wt]=0}(function(){for(var fe=[],Be=0;Be<32;Be++)fe.push(5);Zt(fe,jt,32);var Ee=[];for(Be=0;Be<=143;Be++)Ee.push(8);for(;Be<=255;Be++)Ee.push(9);for(;Be<=279;Be++)Ee.push(7);for(;Be<=287;Be++)Ee.push(8);Zt(Ee,Mt,288)})();var Ue=function(){for(var Be=be?new Uint8Array(32768):[],Ee=0,_e=0;Ee<de.length-1;++Ee)for(;_e<de[Ee+1];++_e)Be[_e]=Ee;for(;_e<32768;++_e)Be[_e]=29;var Te=be?new Uint8Array(259):[];for(Ee=0,_e=0;Ee<se.length-1;++Ee)for(;_e<se[Ee+1];++_e)Te[_e]=Ee;function ke(ot,qe){for(var tt=0;tt<ot.length;){var st=Math.min(65535,ot.length-tt),Et=tt+st==ot.length;for(qe.write_shift(1,+Et),qe.write_shift(2,st),qe.write_shift(2,~st&65535);st-- >0;)qe[qe.l++]=ot[tt++]}return qe.l}function Ye(ot,qe){for(var tt=0,st=0,Et=be?new Uint16Array(32768):[];st<ot.length;){var Dt=Math.min(65535,ot.length-st);if(Dt<10){for(tt=Je(qe,tt,+(st+Dt==ot.length)),tt&7&&(tt+=8-(tt&7)),qe.l=tt/8|0,qe.write_shift(2,Dt),qe.write_shift(2,~Dt&65535);Dt-- >0;)qe[qe.l++]=ot[st++];tt=qe.l*8;continue}tt=Je(qe,tt,+(st+Dt==ot.length)+2);for(var Vt=0;Dt-- >0;){var Ft=ot[st];Vt=(Vt<<5^Ft)&32767;var Pt=-1,yn=0;if((Pt=Et[Vt])&&(Pt|=st&-32768,Pt>st&&(Pt-=32768),Pt<st))for(;ot[Pt+yn]==ot[st+yn]&&yn<250;)++yn;if(yn>2){Ft=Te[yn],Ft<=22?tt=_t(qe,tt,Se[Ft+1]>>1)-1:(_t(qe,tt,3),tt+=5,_t(qe,tt,Se[Ft-23]>>5),tt+=3);var Kn=Ft<8?0:Ft-4>>2;Kn>0&&(ft(qe,tt,yn-se[Ft]),tt+=Kn),Ft=Be[st-Pt],tt=_t(qe,tt,Se[Ft]>>3),tt-=3;var $n=Ft<4?0:Ft-2>>1;$n>0&&(ft(qe,tt,st-Pt-de[Ft]),tt+=$n);for(var Jn=0;Jn<yn;++Jn)Et[Vt]=st&32767,Vt=(Vt<<5^ot[st])&32767,++st;Dt-=yn-1}else Ft<=143?Ft=Ft+48:tt=dt(qe,tt,1),tt=_t(qe,tt,Se[Ft]),Et[Vt]=st&32767,++st}tt=_t(qe,tt,0)-1}return qe.l=(tt+7)/8|0,qe.l}return function(qe,tt){return qe.length<8?ke(qe,tt):Ye(qe,tt)}}();function Oe(fe){var Be=ht(50+Math.floor(fe.length*1.1)),Ee=Ue(fe,Be);return Be.slice(0,Ee)}var Ie=be?new Uint16Array(32768):Ut(32768),Xe=be?new Uint16Array(32768):Ut(32768),mt=be?new Uint16Array(128):Ut(128),Yt=1,Kt=1;function rn(fe,Be){var Ee=Ce(fe,Be)+257;Be+=5;var _e=Ce(fe,Be)+1;Be+=5;var Te=Fe(fe,Be)+4;Be+=4;for(var ke=0,Ye=be?new Uint8Array(19):Ut(19),ot=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],qe=1,tt=be?new Uint8Array(8):Ut(8),st=be?new Uint8Array(8):Ut(8),Et=Ye.length,Dt=0;Dt<Te;++Dt)Ye[re[Dt]]=ke=Ze(fe,Be),qe<ke&&(qe=ke),tt[ke]++,Be+=3;var Vt=0;for(tt[0]=0,Dt=1;Dt<=qe;++Dt)st[Dt]=Vt=Vt+tt[Dt-1]<<1;for(Dt=0;Dt<Et;++Dt)(Vt=Ye[Dt])!=0&&(ot[Dt]=st[Vt]++);var Ft=0;for(Dt=0;Dt<Et;++Dt)if(Ft=Ye[Dt],Ft!=0){Vt=Se[ot[Dt]]>>8-Ft;for(var Pt=(1<<7-Ft)-1;Pt>=0;--Pt)mt[Vt|Pt<<Ft]=Ft&7|Dt<<3}var yn=[];for(qe=1;yn.length<Ee+_e;)switch(Vt=mt[Re(fe,Be)],Be+=Vt&7,Vt>>>=3){case 16:for(ke=3+Me(fe,Be),Be+=2,Vt=yn[yn.length-1];ke-- >0;)yn.push(Vt);break;case 17:for(ke=3+Ze(fe,Be),Be+=3;ke-- >0;)yn.push(0);break;case 18:for(ke=11+Re(fe,Be),Be+=7;ke-- >0;)yn.push(0);break;default:yn.push(Vt),qe<Vt&&(qe=Vt);break}var Kn=yn.slice(0,Ee),$n=yn.slice(Ee);for(Dt=Ee;Dt<286;++Dt)Kn[Dt]=0;for(Dt=_e;Dt<30;++Dt)$n[Dt]=0;return Yt=Zt(Kn,Ie,286),Kt=Zt($n,Xe,30),Be}function qn(fe,Be){if(fe[0]==3&&!(fe[1]&3))return[Qf(Be),2];for(var Ee=0,_e=0,Te=oD(Be||1<<18),ke=0,Ye=Te.length>>>0,ot=0,qe=0;(_e&1)==0;){if(_e=Ze(fe,Ee),Ee+=3,_e>>>1)_e>>1==1?(ot=9,qe=5):(Ee=rn(fe,Ee),ot=Yt,qe=Kt);else{Ee&7&&(Ee+=8-(Ee&7));var tt=fe[Ee>>>3]|fe[(Ee>>>3)+1]<<8;if(Ee+=32,tt>0)for(!Be&&Ye<ke+tt&&(Te=Rt(Te,ke+tt),Ye=Te.length);tt-- >0;)Te[ke++]=fe[Ee>>>3],Ee+=8;continue}for(;;){!Be&&Ye<ke+32767&&(Te=Rt(Te,ke+32767),Ye=Te.length);var st=ze(fe,Ee,ot),Et=_e>>>1==1?Mt[st]:Ie[st];if(Ee+=Et&15,Et>>>=4,(Et>>>8&255)===0)Te[ke++]=Et;else{if(Et==256)break;Et-=257;var Dt=Et<8?0:Et-4>>2;Dt>5&&(Dt=0);var Vt=ke+se[Et];Dt>0&&(Vt+=ze(fe,Ee,Dt),Ee+=Dt),st=ze(fe,Ee,qe),Et=_e>>>1==1?jt[st]:Xe[st],Ee+=Et&15,Et>>>=4;var Ft=Et<4?0:Et-2>>1,Pt=de[Et];for(Ft>0&&(Pt+=ze(fe,Ee,Ft),Ee+=Ft),!Be&&Ye<Vt&&(Te=Rt(Te,Vt+100),Ye=Te.length);ke<Vt;)Te[ke]=Te[ke-Pt],++ke}}}return Be?[Te,Ee+7>>>3]:[Te.slice(0,ke),Ee+7>>>3]}function un(fe,Be){var Ee=fe.slice(fe.l||0),_e=qn(Ee,Be);return fe.l+=_e[1],_e[0]}function xr(fe,Be){if(fe)typeof console<"u"&&console.error(Be);else throw new Error(Be)}function jn(fe,Be){var Ee=fe;bi(Ee,0);var _e=[],Te=[],ke={FileIndex:_e,FullPaths:Te};E(ke,{root:Be.root});for(var Ye=Ee.length-4;(Ee[Ye]!=80||Ee[Ye+1]!=75||Ee[Ye+2]!=5||Ee[Ye+3]!=6)&&Ye>=0;)--Ye;Ee.l=Ye+4,Ee.l+=4;var ot=Ee.read_shift(2);Ee.l+=6;var qe=Ee.read_shift(4);for(Ee.l=qe,Ye=0;Ye<ot;++Ye){Ee.l+=20;var tt=Ee.read_shift(4),st=Ee.read_shift(4),Et=Ee.read_shift(2),Dt=Ee.read_shift(2),Vt=Ee.read_shift(2);Ee.l+=8;var Ft=Ee.read_shift(4),Pt=o(Ee.slice(Ee.l+Et,Ee.l+Et+Dt));Ee.l+=Et+Dt+Vt;var yn=Ee.l;Ee.l=Ft+4,Sr(Ee,tt,st,ke,Pt),Ee.l=yn}return ke}function Sr(fe,Be,Ee,_e,Te){fe.l+=2;var ke=fe.read_shift(2),Ye=fe.read_shift(2),ot=i(fe);if(ke&8257)throw new Error("Unsupported ZIP encryption");for(var qe=fe.read_shift(4),tt=fe.read_shift(4),st=fe.read_shift(4),Et=fe.read_shift(2),Dt=fe.read_shift(2),Vt="",Ft=0;Ft<Et;++Ft)Vt+=String.fromCharCode(fe[fe.l++]);if(Dt){var Pt=o(fe.slice(fe.l,fe.l+Dt));(Pt[21589]||{}).mt&&(ot=Pt[21589].mt),((Te||{})[21589]||{}).mt&&(ot=Te[21589].mt)}fe.l+=Dt;var yn=fe.slice(fe.l,fe.l+tt);switch(Ye){case 8:yn=W(fe,st);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ye)}var Kn=!1;ke&8&&(qe=fe.read_shift(4),qe==134695760&&(qe=fe.read_shift(4),Kn=!0),tt=fe.read_shift(4),st=fe.read_shift(4)),tt!=Be&&xr(Kn,"Bad compressed size: "+Be+" != "+tt),st!=Ee&&xr(Kn,"Bad uncompressed size: "+Ee+" != "+st),ur(_e,Vt,yn,{unsafe:!0,mt:ot})}function qr(fe,Be){var Ee=Be||{},_e=[],Te=[],ke=ht(1),Ye=Ee.compression?8:0,ot=0,qe=0,tt=0,st=0,Et=0,Dt=fe.FullPaths[0],Vt=Dt,Ft=fe.FileIndex[0],Pt=[],yn=0;for(qe=1;qe<fe.FullPaths.length;++qe)if(Vt=fe.FullPaths[qe].slice(Dt.length),Ft=fe.FileIndex[qe],!(!Ft.size||!Ft.content||Vt=="Sh33tJ5")){var Kn=st,$n=ht(Vt.length);for(tt=0;tt<Vt.length;++tt)$n.write_shift(1,Vt.charCodeAt(tt)&127);$n=$n.slice(0,$n.l),Pt[Et]=eae.buf(Ft.content,0);var Jn=Ft.content;Ye==8&&(Jn=Z(Jn)),ke=ht(30),ke.write_shift(4,67324752),ke.write_shift(2,20),ke.write_shift(2,ot),ke.write_shift(2,Ye),Ft.mt?a(ke,Ft.mt):ke.write_shift(4,0),ke.write_shift(-4,Pt[Et]),ke.write_shift(4,Jn.length),ke.write_shift(4,Ft.content.length),ke.write_shift(2,$n.length),ke.write_shift(2,0),st+=ke.length,_e.push(ke),st+=$n.length,_e.push($n),st+=Jn.length,_e.push(Jn),ke=ht(46),ke.write_shift(4,33639248),ke.write_shift(2,0),ke.write_shift(2,20),ke.write_shift(2,ot),ke.write_shift(2,Ye),ke.write_shift(4,0),ke.write_shift(-4,Pt[Et]),ke.write_shift(4,Jn.length),ke.write_shift(4,Ft.content.length),ke.write_shift(2,$n.length),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(4,0),ke.write_shift(4,Kn),yn+=ke.l,Te.push(ke),yn+=$n.length,Te.push($n),++Et}return ke=ht(22),ke.write_shift(4,101010256),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,Et),ke.write_shift(2,Et),ke.write_shift(4,yn),ke.write_shift(4,st),ke.write_shift(2,0),oi([oi(_e),oi(Te),ke])}var on={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function en(fe,Be){if(fe.ctype)return fe.ctype;var Ee=fe.name||"",_e=Ee.match(/\.([^\.]+)$/);return _e&&on[_e[1]]||Be&&(_e=(Ee=Be).match(/[\.\\]([^\.\\])+$/),_e&&on[_e[1]])?on[_e[1]]:"application/octet-stream"}function zn(fe){for(var Be=Zx(fe),Ee=[],_e=0;_e<Be.length;_e+=76)Ee.push(Be.slice(_e,_e+76));return Ee.join(`\r
`)+`\r
`}function xa(fe){var Be=fe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(tt){var st=tt.charCodeAt(0).toString(16).toUpperCase();return"="+(st.length==1?"0"+st:st)});Be=Be.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Be.charAt(0)==`
`&&(Be="=0D"+Be.slice(1)),Be=Be.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ee=[],_e=Be.split(`\r
`),Te=0;Te<_e.length;++Te){var ke=_e[Te];if(ke.length==0){Ee.push("");continue}for(var Ye=0;Ye<ke.length;){var ot=76,qe=ke.slice(Ye,Ye+ot);qe.charAt(ot-1)=="="?ot--:qe.charAt(ot-2)=="="?ot-=2:qe.charAt(ot-3)=="="&&(ot-=3),qe=ke.slice(Ye,Ye+ot),Ye+=ot,Ye<ke.length&&(qe+="="),Ee.push(qe)}}return Ee.join(`\r
`)}function rs(fe){for(var Be=[],Ee=0;Ee<fe.length;++Ee){for(var _e=fe[Ee];Ee<=fe.length&&_e.charAt(_e.length-1)=="=";)_e=_e.slice(0,_e.length-1)+fe[++Ee];Be.push(_e)}for(var Te=0;Te<Be.length;++Te)Be[Te]=Be[Te].replace(/[=][0-9A-Fa-f]{2}/g,function(ke){return String.fromCharCode(parseInt(ke.slice(1),16))});return ml(Be.join(`\r
`))}function ks(fe,Be,Ee){for(var _e="",Te="",ke="",Ye,ot=0;ot<10;++ot){var qe=Be[ot];if(!qe||qe.match(/^\s*$/))break;var tt=qe.match(/^(.*?):\s*([^\s].*)$/);if(tt)switch(tt[1].toLowerCase()){case"content-location":_e=tt[2].trim();break;case"content-type":ke=tt[2].trim();break;case"content-transfer-encoding":Te=tt[2].trim();break}}switch(++ot,Te.toLowerCase()){case"base64":Ye=ml(wl(Be.slice(ot).join("")));break;case"quoted-printable":Ye=rs(Be.slice(ot));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Te)}var st=ur(fe,_e.slice(Ee.length),Ye,{unsafe:!0});ke&&(st.ctype=ke)}function Ua(fe,Be){if(J(fe.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ee=Be&&Be.root||"",_e=(rr&&Buffer.isBuffer(fe)?fe.toString("binary"):J(fe)).split(`\r
`),Te=0,ke="";for(Te=0;Te<_e.length;++Te)if(ke=_e[Te],!!/^Content-Location:/i.test(ke)&&(ke=ke.slice(ke.indexOf("file")),Ee||(Ee=ke.slice(0,ke.lastIndexOf("/")+1)),ke.slice(0,Ee.length)!=Ee))for(;Ee.length>0&&(Ee=Ee.slice(0,Ee.length-1),Ee=Ee.slice(0,Ee.lastIndexOf("/")+1),ke.slice(0,Ee.length)!=Ee););var Ye=(_e[1]||"").match(/boundary="(.*?)"/);if(!Ye)throw new Error("MAD cannot find boundary");var ot="--"+(Ye[1]||""),qe=[],tt=[],st={FileIndex:qe,FullPaths:tt};E(st);var Et,Dt=0;for(Te=0;Te<_e.length;++Te){var Vt=_e[Te];Vt!==ot&&Vt!==ot+"--"||(Dt++&&ks(st,_e.slice(Et,Te),Ee),Et=Te)}return st}function $t(fe,Be){var Ee=Be||{},_e=Ee.boundary||"SheetJS";_e="------="+_e;for(var Te=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+_e.slice(2)+'"',"","",""],ke=fe.FullPaths[0],Ye=ke,ot=fe.FileIndex[0],qe=1;qe<fe.FullPaths.length;++qe)if(Ye=fe.FullPaths[qe].slice(ke.length),ot=fe.FileIndex[qe],!(!ot.size||!ot.content||Ye=="Sh33tJ5")){Ye=Ye.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(yn){return"_x"+yn.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(yn){return"_u"+yn.charCodeAt(0).toString(16)+"_"});for(var tt=ot.content,st=rr&&Buffer.isBuffer(tt)?tt.toString("binary"):J(tt),Et=0,Dt=Math.min(1024,st.length),Vt=0,Ft=0;Ft<=Dt;++Ft)(Vt=st.charCodeAt(Ft))>=32&&Vt<128&&++Et;var Pt=Et>=Dt*4/5;Te.push(_e),Te.push("Content-Location: "+(Ee.root||"file:///C:/SheetJS/")+Ye),Te.push("Content-Transfer-Encoding: "+(Pt?"quoted-printable":"base64")),Te.push("Content-Type: "+en(ot,Ye)),Te.push(""),Te.push(Pt?xa(st):zn(st))}return Te.push(_e+`--\r
`),Te.join(`\r
`)}function vr(fe){var Be={};return E(Be,fe),Be}function ur(fe,Be,Ee,_e){var Te=_e&&_e.unsafe;Te||E(fe);var ke=!Te&&xn.find(fe,Be);if(!ke){var Ye=fe.FullPaths[0];Be.slice(0,Ye.length)==Ye?Ye=Be:(Ye.slice(-1)!="/"&&(Ye+="/"),Ye=(Ye+Be).replace("//","/")),ke={name:s(Be),type:2},fe.FileIndex.push(ke),fe.FullPaths.push(Ye),Te||xn.utils.cfb_gc(fe)}return ke.content=Ee,ke.size=Ee?Ee.length:0,_e&&(_e.CLSID&&(ke.clsid=_e.CLSID),_e.mt&&(ke.mt=_e.mt),_e.ct&&(ke.ct=_e.ct)),ke}function Mr(fe,Be){E(fe);var Ee=xn.find(fe,Be);if(Ee){for(var _e=0;_e<fe.FileIndex.length;++_e)if(fe.FileIndex[_e]==Ee)return fe.FileIndex.splice(_e,1),fe.FullPaths.splice(_e,1),!0}return!1}function Kr(fe,Be,Ee){E(fe);var _e=xn.find(fe,Be);if(_e){for(var Te=0;Te<fe.FileIndex.length;++Te)if(fe.FileIndex[Te]==_e)return fe.FileIndex[Te].name=s(Ee),fe.FullPaths[Te]=Ee,!0}return!1}function ss(fe){B(fe,!0)}return e.find=D,e.read=R,e.parse=d,e.write=K,e.writeFile=V,e.utils={cfb_new:vr,cfb_add:ur,cfb_del:Mr,cfb_mov:Kr,cfb_gc:ss,ReadShift:Cx,CheckField:V7,prep_blob:bi,bconcat:oi,use_zlib:O,_deflateRaw:Oe,_inflateRaw:un,consts:ne},e}();function tae(t){return typeof t=="string"?cC(t):Array.isArray(t)?Tse(t):t}function qv(t,e,n){if(typeof Deno<"u"){if(n&&typeof e=="string")switch(n){case"utf8":e=new TextEncoder(n).encode(e);break;case"binary":e=cC(e);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(t,e)}var r=n=="utf8"?Qu(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,t);if(typeof Blob<"u"){var s=new Blob([tae(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,t);if(typeof saveAs<"u")return saveAs(s,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=Wf(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function nae(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var n=e.read();return e.close(),n}catch(r){if(!r.message||!r.message.match(/onstruct/))throw r}throw new Error("Cannot access file "+t)}function ta(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(t,e[r])&&n.push(e[r]);return n}function mD(t,e){for(var n=[],r=ta(t),s=0;s!==r.length;++s)n[t[r[s]][e]]==null&&(n[t[r[s]][e]]=r[s]);return n}function AC(t){for(var e=[],n=ta(t),r=0;r!==n.length;++r)e[t[n[r]]]=n[r];return e}function dC(t){for(var e=[],n=ta(t),r=0;r!==n.length;++r)e[t[n[r]]]=parseInt(n[r],10);return e}function rae(t){for(var e=[],n=ta(t),r=0;r!==n.length;++r)e[t[n[r]]]==null&&(e[t[n[r]]]=[]),e[t[n[r]]].push(n[r]);return e}var Pw=new Date(1899,11,30,0,0,0);function qa(t,e){var n=t.getTime(),r=Pw.getTime()+(t.getTimezoneOffset()-Pw.getTimezoneOffset())*6e4;return(n-r)/(1440*60*1e3)}var b7=new Date,sae=Pw.getTime()+(b7.getTimezoneOffset()-Pw.getTimezoneOffset())*6e4,pD=b7.getTimezoneOffset();function fC(t){var e=new Date;return e.setTime(t*24*60*60*1e3+sae),e.getTimezoneOffset()!==pD&&e.setTime(e.getTime()+(e.getTimezoneOffset()-pD)*6e4),e}function aae(t){var e=0,n=0,r=!1,s=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var a=1;a!=s.length;++a)if(s[a]){switch(n=1,a>3&&(r=!0),s[a].slice(s[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[a].slice(s[a].length-1));case"D":n*=24;case"H":n*=60;case"M":if(r)n*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=n*parseInt(s[a],10)}return e}var gD=new Date("2017-02-19T19:06:09.000Z"),C7=isNaN(gD.getFullYear())?new Date("2/19/17"):gD,iae=C7.getFullYear()==2017;function ws(t,e){var n=new Date(t);if(iae)return e>0?n.setTime(n.getTime()+n.getTimezoneOffset()*60*1e3):e<0&&n.setTime(n.getTime()-n.getTimezoneOffset()*60*1e3),n;if(t instanceof Date)return t;if(C7.getFullYear()==1917&&!isNaN(n.getFullYear())){var r=n.getFullYear();return t.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function r0(t,e){if(rr&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return Qu(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Qu(u7(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return Qu(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Qu(new TextDecoder("utf-16be").decode(t.slice(2)))}var n={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(a){return n[a]||a})}catch{}for(var r=[],s=0;s!=t.length;++s)r.push(String.fromCharCode(t[s]));return r.join("")}function bs(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=bs(t[n]));return e}function Ys(t,e){for(var n="";n.length<e;)n+=t;return n}function zc(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var n=1,r=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(s,a){return n=-n,a}),!isNaN(e=Number(r)))?e/n:e}var oae=["january","february","march","april","may","june","july","august","september","october","november","december"];function mp(t){var e=new Date(t),n=new Date(NaN),r=e.getYear(),s=e.getMonth(),a=e.getDate();if(isNaN(a))return n;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&oae.indexOf(i)==-1)return n}else if(i.match(/[a-z]/))return n;return r<0||r>8099?n:(s>0||a>1)&&r!=101?e:t.match(/[^-0-9:,\/\\]/)?n:e}var lae=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(n,r,s){if(t||typeof r=="string")return n.split(r);for(var a=n.split(r),i=[a[0]],o=1;o<a.length;++o)i.push(s),i.push(a[o]);return i}}();function E7(t){return t?t.content&&t.type?r0(t.content,!0):t.data?ex(t.data):t.asNodeBuffer&&rr?ex(t.asNodeBuffer().toString("binary")):t.asBinary?ex(t.asBinary()):t._data&&t._data.getContent?ex(r0(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function _7(t){if(!t)return null;if(t.data)return aD(t.data);if(t.asNodeBuffer&&rr)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?aD(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function cae(t){return t&&t.name.slice(-4)===".bin"?_7(t):E7(t)}function Xl(t,e){for(var n=t.FullPaths||ta(t.files),r=e.toLowerCase().replace(/[\/]/g,"\\"),s=r.replace(/\\/g,"/"),a=0;a<n.length;++a){var i=n[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(r==i||s==i)return t.files?t.files[n[a]]:t.FileIndex[a]}return null}function U4(t,e){var n=Xl(t,e);if(n==null)throw new Error("Cannot find file "+e+" in zip");return n}function Ta(t,e,n){if(!n)return cae(U4(t,e));if(!e)return null;try{return Ta(t,e)}catch{return null}}function pl(t,e,n){if(!n)return E7(U4(t,e));if(!e)return null;try{return pl(t,e)}catch{return null}}function uae(t,e,n){return _7(U4(t,e))}function xD(t){for(var e=t.FullPaths||ta(t.files),n=[],r=0;r<e.length;++r)e[r].slice(-1)!="/"&&n.push(e[r].replace(/^Root Entry[\/]/,""));return n.sort()}function Xn(t,e,n){if(t.FullPaths){if(typeof n=="string"){var r;return rr?r=ld(n):r=Nse(n),xn.utils.cfb_add(t,e,r)}xn.utils.cfb_add(t,e,n)}else t.file(e,n)}function M4(){return xn.utils.cfb_new()}function S7(t,e){switch(e.type){case"base64":return xn.read(t,{type:"base64"});case"binary":return xn.read(t,{type:"binary"});case"buffer":case"array":return xn.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function nx(t,e){if(t.charAt(0)=="/")return t.slice(1);var n=e.split("/");e.slice(-1)!="/"&&n.pop();for(var r=t.split("/");r.length!==0;){var s=r.shift();s===".."?n.pop():s!=="."&&n.push(s)}return n.join("/")}var ga=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Aae=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,vD=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,dae=/<[^>]*>/g,oo=ga.match(vD)?vD:dae,fae=/<\w*:/,hae=/<(\/?)\w+:/;function Mn(t,e,n){for(var r={},s=0,a=0;s!==t.length&&!((a=t.charCodeAt(s))===32||a===10||a===13);++s);if(e||(r[0]=t.slice(0,s)),s===t.length)return r;var i=t.match(Aae),o=0,l="",u=0,d="",h="",m=1;if(i)for(u=0;u!=i.length;++u){for(h=i[u],a=0;a!=h.length&&h.charCodeAt(a)!==61;++a);for(d=h.slice(0,a).trim();h.charCodeAt(a+1)==32;)++a;for(m=(s=h.charCodeAt(a+1))==34||s==39?1:0,l=h.slice(a+1+m,h.length-m),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),r[d]=l,r[d.toLowerCase()]=l;else{var p=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(r[p]&&d.slice(o-3,o)=="ext")continue;r[p]=l,r[p.toLowerCase()]=l}}return r}function nA(t){return t.replace(hae,"<$1")}var T7={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},P4=AC(T7),Nr=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function n(r){var s=r+"",a=s.indexOf("<![CDATA[");if(a==-1)return s.replace(t,function(o,l){return T7[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var i=s.indexOf("]]>");return n(s.slice(0,a))+s.slice(a+9,i)+n(s.slice(i+3))}}(),O4=/[&<>'"]/g,mae=/[\u0000-\u0008\u000b-\u001f]/g;function ts(t){var e=t+"";return e.replace(O4,function(n){return P4[n]}).replace(mae,function(n){return"_x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+"_"})}function yD(t){return ts(t).replace(/ /g,"_x0020_")}var N7=/[\u0000-\u001f]/g;function j4(t){var e=t+"";return e.replace(O4,function(n){return P4[n]}).replace(/\n/g,"<br/>").replace(N7,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}function pae(t){var e=t+"";return e.replace(O4,function(n){return P4[n]}).replace(N7,function(n){return"&#x"+n.charCodeAt(0).toString(16).toUpperCase()+";"})}var wD=function(){var t=/&#(\d+);/g;function e(n,r){return String.fromCharCode(parseInt(r,10))}return function(r){return r.replace(t,e)}}();function gae(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function vs(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function G_(t){for(var e="",n=0,r=0,s=0,a=0,i=0,o=0;n<t.length;){if(r=t.charCodeAt(n++),r<128){e+=String.fromCharCode(r);continue}if(s=t.charCodeAt(n++),r>191&&r<224){i=(r&31)<<6,i|=s&63,e+=String.fromCharCode(i);continue}if(a=t.charCodeAt(n++),r<240){e+=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63);continue}i=t.charCodeAt(n++),o=((r&7)<<18|(s&63)<<12|(a&63)<<6|i&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function bD(t){var e=Qf(2*t.length),n,r,s=1,a=0,i=0,o;for(r=0;r<t.length;r+=s)s=1,(o=t.charCodeAt(r))<128?n=o:o<224?(n=(o&31)*64+(t.charCodeAt(r+1)&63),s=2):o<240?(n=(o&15)*4096+(t.charCodeAt(r+1)&63)*64+(t.charCodeAt(r+2)&63),s=3):(s=4,n=(o&7)*262144+(t.charCodeAt(r+1)&63)*4096+(t.charCodeAt(r+2)&63)*64+(t.charCodeAt(r+3)&63),n-=65536,i=55296+(n>>>10&1023),n=56320+(n&1023)),i!==0&&(e[a++]=i&255,e[a++]=i>>>8,i=0),e[a++]=n%256,e[a++]=n>>>8;return e.slice(0,a).toString("ucs2")}function CD(t){return ld(t,"binary").toString("utf8")}var yy="foo bar bazâð£",us=rr&&(CD(yy)==G_(yy)&&CD||bD(yy)==G_(yy)&&bD)||G_,Qu=rr?function(t){return ld(t,"utf8").toString("binary")}:function(t){for(var e=[],n=0,r=0,s=0;n<t.length;)switch(r=t.charCodeAt(n++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,s=t.charCodeAt(n++)-56320+(r<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},tv=function(){var t={};return function(n,r){var s=n+"|"+(r||"");return t[s]?t[s]:t[s]=new RegExp("<(?:\\w+:)?"+n+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+n+">",r||"")}}(),B7=function(){var t=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(n){for(var r=n.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)r=r.replace(t[s][0],t[s][1]);return r}}(),xae=function(){var t={};return function(n){return t[n]!==void 0?t[n]:t[n]=new RegExp("<(?:vt:)?"+n+">([\\s\\S]*?)</(?:vt:)?"+n+">","g")}}(),vae=/<\/?(?:vt:)?variant>/g,yae=/<(?:vt:)([^>]*)>([\s\S]*)</;function ED(t,e){var n=Mn(t),r=t.match(xae(n.baseType))||[],s=[];if(r.length!=n.size){if(e.WTF)throw new Error("unexpected vector length "+r.length+" != "+n.size);return s}return r.forEach(function(a){var i=a.replace(vae,"").match(yae);i&&s.push({v:us(i[2]),t:i[1]})}),s}var k7=/(^\s|\s$|\n)/;function Ei(t,e){return"<"+t+(e.match(k7)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function nv(t){return ta(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Ot(t,e,n){return"<"+t+(n!=null?nv(n):"")+(e!=null?(e.match(k7)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function q5(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(n){if(e)throw n}return""}function wae(t,e){switch(typeof t){case"string":var n=Ot("vt:lpwstr",ts(t));return n=n.replace(/&quot;/g,"_x0022_"),n;case"number":return Ot((t|0)==t?"vt:i4":"vt:r8",ts(String(t)));case"boolean":return Ot("vt:bool",t?"true":"false")}if(t instanceof Date)return Ot("vt:filetime",q5(t));throw new Error("Unable to serialize "+t)}function Q4(t){if(rr&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return us(Wf(D4(t)));throw new Error("Bad input format: expected Buffer or string")}var rv=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,za={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},p0=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],fl={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function bae(t,e){for(var n=1-2*(t[e+7]>>>7),r=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,a=5;a>=0;--a)s=s*256+t[e+a];return r==2047?s==0?n*(1/0):NaN:(r==0?r=-1022:(r-=1023,s+=Math.pow(2,52)),n*Math.pow(2,r-52)*s)}function Cae(t,e,n){var r=(e<0||1/e==-1/0?1:0)<<7,s=0,a=0,i=r?-e:e;isFinite(i)?i==0?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(e)?26985:0);for(var o=0;o<=5;++o,a/=256)t[n+o]=a&255;t[n+6]=(s&15)<<4|a&15,t[n+7]=s>>4|r}var _D=function(t){for(var e=[],n=10240,r=0;r<t[0].length;++r)if(t[0][r])for(var s=0,a=t[0][r].length;s<a;s+=n)e.push.apply(e,t[0][r].slice(s,s+n));return e},SD=rr?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:ld(e)})):_D(t)}:_D,TD=function(t,e,n){for(var r=[],s=e;s<n;s+=2)r.push(String.fromCharCode(VA(t,s)));return r.join("").replace(vo,"")},H4=rr?function(t,e,n){return Buffer.isBuffer(t)?t.toString("utf16le",e,n).replace(vo,""):TD(t,e,n)}:TD,ND=function(t,e,n){for(var r=[],s=e;s<e+n;++s)r.push(("0"+t[s].toString(16)).slice(-2));return r.join("")},I7=rr?function(t,e,n){return Buffer.isBuffer(t)?t.toString("hex",e,e+n):ND(t,e,n)}:ND,BD=function(t,e,n){for(var r=[],s=e;s<n;s++)r.push(String.fromCharCode(Sm(t,s)));return r.join("")},Kv=rr?function(e,n,r){return Buffer.isBuffer(e)?e.toString("utf8",n,r):BD(e,n,r)}:BD,F7=function(t,e){var n=hl(t,e);return n>0?Kv(t,e+4,e+4+n-1):""},D7=F7,R7=function(t,e){var n=hl(t,e);return n>0?Kv(t,e+4,e+4+n-1):""},L7=R7,U7=function(t,e){var n=2*hl(t,e);return n>0?Kv(t,e+4,e+4+n-1):""},M7=U7,P7=function(e,n){var r=hl(e,n);return r>0?H4(e,n+4,n+4+r):""},O7=P7,j7=function(t,e){var n=hl(t,e);return n>0?Kv(t,e+4,e+4+n):""},Q7=j7,H7=function(t,e){return bae(t,e)},Ow=H7,V4=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};rr&&(D7=function(e,n){if(!Buffer.isBuffer(e))return F7(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},L7=function(e,n){if(!Buffer.isBuffer(e))return R7(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},M7=function(e,n){if(!Buffer.isBuffer(e))return U7(e,n);var r=2*e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r-1)},O7=function(e,n){if(!Buffer.isBuffer(e))return P7(e,n);var r=e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r)},Q7=function(e,n){if(!Buffer.isBuffer(e))return j7(e,n);var r=e.readUInt32LE(n);return e.toString("utf8",n+4,n+4+r)},Ow=function(e,n){return Buffer.isBuffer(e)?e.readDoubleLE(n):H7(e,n)},V4=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Sm=function(t,e){return t[e]},VA=function(t,e){return t[e+1]*256+t[e]},Eae=function(t,e){var n=t[e+1]*256+t[e];return n<32768?n:(65535-n+1)*-1},hl=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Nh=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},_ae=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Cx(t,e){var n="",r,s,a=[],i,o,l,u;switch(e){case"dbcs":if(u=this.l,rr&&Buffer.isBuffer(this))n=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)n+=String.fromCharCode(VA(this,u)),u+=2;t*=2;break;case"utf8":n=Kv(this,this.l,this.l+t);break;case"utf16le":t*=2,n=H4(this,this.l,this.l+t);break;case"wstr":return Cx.call(this,t,"dbcs");case"lpstr-ansi":n=D7(this,this.l),t=4+hl(this,this.l);break;case"lpstr-cp":n=L7(this,this.l),t=4+hl(this,this.l);break;case"lpwstr":n=M7(this,this.l),t=4+2*hl(this,this.l);break;case"lpp4":t=4+hl(this,this.l),n=O7(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+hl(this,this.l),n=Q7(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,n="";(i=Sm(this,this.l+t++))!==0;)a.push(vy(i));n=a.join("");break;case"_wstr":for(t=0,n="";(i=VA(this,this.l+t))!==0;)a.push(vy(i)),t+=2;t+=2,n=a.join("");break;case"dbcs-cont":for(n="",u=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=Sm(this,u),this.l=u+1,o=Cx.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(vy(VA(this,u))),u+=2}n=a.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(n="",u=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=Sm(this,u),this.l=u+1,o=Cx.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(vy(Sm(this,u))),u+=1}n=a.join("");break;default:switch(t){case 1:return r=Sm(this,this.l),this.l++,r;case 2:return r=(e==="i"?Eae:VA)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(t>0?Nh:_ae)(this,this.l),this.l+=4,r):(s=hl(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=Ow(this,this.l):s=Ow([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:n=I7(this,this.l,t);break}}return this.l+=t,n}var Sae=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24&255},Tae=function(t,e,n){t[n]=e&255,t[n+1]=e>>8&255,t[n+2]=e>>16&255,t[n+3]=e>>24&255},Nae=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255};function Bae(t,e,n){var r=0,s=0;if(n==="dbcs"){for(s=0;s!=e.length;++s)Nae(this,e.charCodeAt(s),this.l+2*s);r=2*e.length}else if(n==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;r=e.length}else if(n==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(n==="utf16le"){var a=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var i=e.charCodeAt(s);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(t){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,Sae(this,e,this.l);break;case 8:if(r=8,n==="f"){Cae(this,e,this.l);break}case 16:break;case-4:r=4,Tae(this,e,this.l);break}return this.l+=r,this}function V7(t,e){var n=I7(this,this.l,t.length>>1);if(n!==t)throw new Error(e+"Expected "+t+" saw "+n);this.l+=t.length>>1}function bi(t,e){t.l=e,t.read_shift=Cx,t.chk=V7,t.write_shift=Bae}function so(t,e){t.l+=e}function ht(t){var e=Qf(t);return bi(e,0),e}function cd(t,e,n){if(t){var r,s,a;bi(t,t.l||0);for(var i=t.length,o=0,l=0;t.l<i;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var u=cv[o]||cv[65535];for(r=t.read_shift(1),a=r&127,s=1;s<4&&r&128;++s)a+=((r=t.read_shift(1))&127)<<7*s;l=t.l+a;var d=u.f&&u.f(t,a,n);if(t.l=l,e(d,u,o))return}}}function Ho(){var t=[],e=rr?256:2048,n=function(u){var d=ht(u);return bi(d,0),d},r=n(e),s=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&t.push(r),r=null)},a=function(u){return r&&u<r.length-r.l?r:(s(),r=n(Math.max(u+1,e)))},i=function(){return s(),oi(t)},o=function(u){s(),r=u,r.l==null&&(r.l=r.length),a(e)};return{next:a,push:o,end:i,_bufs:t}}function Nt(t,e,n,r){var s=+e,a;if(!isNaN(s)){r||(r=cv[s].p||(n||[]).length||0),a=1+(s>=128?1:0)+1,r>=128&&++a,r>=16384&&++a,r>=2097152&&++a;var i=t.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,(s&127)+128),i.write_shift(1,s>>7));for(var o=0;o!=4;++o)if(r>=128)i.write_shift(1,(r&127)+128),r>>=7;else{i.write_shift(1,r);break}r>0&&V4(n)&&t.push(n)}}function Ex(t,e,n){var r=bs(t);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function kD(t,e,n){var r=bs(t);return r.s=Ex(r.s,e.s,n),r.e=Ex(r.e,e.s,n),r}function _x(t,e){if(t.cRel&&t.c<0)for(t=bs(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=bs(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var n=Dn(t);return!t.cRel&&t.cRel!=null&&(n=Fae(n)),!t.rRel&&t.rRel!=null&&(n=kae(n)),n}function q_(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Us(t.s.c)+":"+(t.e.cRel?"":"$")+Us(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+pa(t.s.r)+":"+(t.e.rRel?"":"$")+pa(t.e.r):_x(t.s,e.biff)+":"+_x(t.e,e.biff)}function z4(t){return parseInt(Iae(t),10)-1}function pa(t){return""+(t+1)}function kae(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Iae(t){return t.replace(/\$(\d+)$/,"$1")}function G4(t){for(var e=Dae(t),n=0,r=0;r!==e.length;++r)n=26*n+e.charCodeAt(r)-64;return n-1}function Us(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function Fae(t){return t.replace(/^([A-Z])/,"$$$1")}function Dae(t){return t.replace(/^\$([A-Z])/,"$1")}function Rae(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ms(t){for(var e=0,n=0,r=0;r<t.length;++r){var s=t.charCodeAt(r);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(n=26*n+(s-64))}return{c:n-1,r:e-1}}function Dn(t){for(var e=t.c+1,n="";e;e=(e-1)/26|0)n=String.fromCharCode((e-1)%26+65)+n;return n+(t.r+1)}function zo(t){var e=t.indexOf(":");return e==-1?{s:Ms(t),e:Ms(t)}:{s:Ms(t.slice(0,e)),e:Ms(t.slice(e+1))}}function Gn(t,e){return typeof e>"u"||typeof e=="number"?Gn(t.s,t.e):(typeof t!="string"&&(t=Dn(t)),typeof e!="string"&&(e=Dn(e)),t==e?t:t+":"+e)}function Br(t){var e={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,s=0,a=t.length;for(n=0;r<a&&!((s=t.charCodeAt(r)-64)<1||s>26);++r)n=26*n+s;for(e.s.c=--n,n=0;r<a&&!((s=t.charCodeAt(r)-48)<0||s>9);++r)n=10*n+s;if(e.s.r=--n,r===a||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,n=0;r!=a&&!((s=t.charCodeAt(r)-64)<1||s>26);++r)n=26*n+s;for(e.e.c=--n,n=0;r!=a&&!((s=t.charCodeAt(r)-48)<0||s>9);++r)n=10*n+s;return e.e.r=--n,e}function ID(t,e){var n=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=uc(t.z,n?qa(e):e)}catch{}try{return t.w=uc((t.XF||{}).numFmtId||(n?14:0),n?qa(e):e)}catch{return""+e}}function nd(t,e,n){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&n&&n.dateNF&&(t.z=n.dateNF),t.t=="e"?ud[t.v]||t.v:e==null?ID(t,t.v):ID(t,e))}function Yf(t,e){var n=e&&e.sheet?e.sheet:"Sheet1",r={};return r[n]=t,{SheetNames:[n],Sheets:r}}function z7(t,e,n){var r=n||{},s=t?Array.isArray(t):r.dense,a=t||(s?[]:{}),i=0,o=0;if(a&&r.origin!=null){if(typeof r.origin=="number")i=r.origin;else{var l=typeof r.origin=="string"?Ms(r.origin):r.origin;i=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=Br(a["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=e[h].length;++m)if(!(typeof e[h][m]>"u")){var p={v:e[h][m]},y=i+h,x=o+m;if(u.s.r>y&&(u.s.r=y),u.s.c>x&&(u.s.c=x),u.e.r<y&&(u.e.r=y),u.e.c<x&&(u.e.c=x),e[h][m]&&typeof e[h][m]=="object"&&!Array.isArray(e[h][m])&&!(e[h][m]instanceof Date))p=e[h][m];else if(Array.isArray(p.v)&&(p.f=e[h][m][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(r.nullError)p.t="e",p.v=0;else if(r.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=r.dateNF||kn[14],r.cellDates?(p.t="d",p.w=uc(p.z,qa(p.v))):(p.t="n",p.v=qa(p.v),p.w=uc(p.z,p.v))):p.t="s";if(s)a[y]||(a[y]=[]),a[y][x]&&a[y][x].z&&(p.z=a[y][x].z),a[y][x]=p;else{var C=Dn({c:x,r:y});a[C]&&a[C].z&&(p.z=a[C].z),a[C]=p}}}return u.s.c<1e7&&(a["!ref"]=Gn(u)),a}function Up(t,e){return z7(null,t,e)}function Lae(t){return t.read_shift(4,"i")}function Gc(t,e){return e||(e=ht(4)),e.write_shift(4,t),e}function no(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function li(t,e){var n=!1;return e==null&&(n=!0,e=ht(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}function Uae(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function Mae(t,e){return e||(e=ht(4)),e.write_shift(2,0),e.write_shift(2,0),e}function q4(t,e){var n=t.l,r=t.read_shift(1),s=no(t),a=[],i={t:s,h:s};if((r&1)!==0){for(var o=t.read_shift(4),l=0;l!=o;++l)a.push(Uae(t));i.r=a}else i.r=[{ich:0,ifnt:0}];return t.l=n+e,i}function Pae(t,e){var n=!1;return e==null&&(n=!0,e=ht(15+4*t.t.length)),e.write_shift(1,0),li(t.t,e),n?e.slice(0,e.l):e}var Oae=q4;function jae(t,e){var n=!1;return e==null&&(n=!0,e=ht(23+4*t.t.length)),e.write_shift(1,1),li(t.t,e),e.write_shift(4,1),Mae({},e),n?e.slice(0,e.l):e}function Ac(t){var e=t.read_shift(4),n=t.read_shift(2);return n+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:n}}function g0(t,e){return e==null&&(e=ht(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function x0(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function v0(t,e){return e==null&&(e=ht(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var Qae=no,G7=li;function K4(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function jw(t,e){var n=!1;return e==null&&(n=!0,e=ht(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}var Hae=no,K5=K4,$4=jw;function W4(t){var e=t.slice(t.l,t.l+4),n=e[0]&1,r=e[0]&2;t.l+=4;var s=r===0?Ow([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Nh(e,0)>>2;return n?s/100:s}function q7(t,e){e==null&&(e=ht(4));var n=0,r=0,s=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?r=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(r=1,n=1),r)e.write_shift(-4,((n?s:t)<<2)+(n+2));else throw new Error("unsupported RkNumber "+t)}function K7(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function Vae(t,e){return e||(e=ht(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var y0=K7,Mp=Vae;function eo(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function s0(t,e){return(e||ht(8)).write_shift(8,t,"f")}function zae(t){var e={},n=t.read_shift(1),r=n>>>1,s=t.read_shift(1),a=t.read_shift(2,"i"),i=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,r){case 0:e.auto=1;break;case 1:e.index=s;var u=jh[s];u&&(e.rgb=av(u));break;case 2:e.rgb=av([i,o,l]);break;case 3:e.theme=s;break}return a!=0&&(e.tint=a>0?a/32767:a/32768),e}function Qw(t,e){if(e||(e=ht(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var n=t.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),e.write_shift(2,n),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=t.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function Gae(t){var e=t.read_shift(1);t.l++;var n={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return n}function qae(t,e){e||(e=ht(2));var n=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,n),e.write_shift(1,0),e}function $7(t,e){var n={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},r=t.read_shift(4);switch(r){case 0:return"";case 4294967295:case 4294967294:return n[t.read_shift(4)]||""}if(r>400)throw new Error("Unsupported Clipboard: "+r.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function Kae(t){return $7(t,1)}function $ae(t){return $7(t,2)}var Y4=2,Uo=3,wy=11,FD=12,Hw=19,by=64,Wae=65,Yae=71,Xae=4108,Jae=4126,ai=80,W7=81,Zae=[ai,W7],$5={1:{n:"CodePage",t:Y4},2:{n:"Category",t:ai},3:{n:"PresentationFormat",t:ai},4:{n:"ByteCount",t:Uo},5:{n:"LineCount",t:Uo},6:{n:"ParagraphCount",t:Uo},7:{n:"SlideCount",t:Uo},8:{n:"NoteCount",t:Uo},9:{n:"HiddenCount",t:Uo},10:{n:"MultimediaClipCount",t:Uo},11:{n:"ScaleCrop",t:wy},12:{n:"HeadingPairs",t:Xae},13:{n:"TitlesOfParts",t:Jae},14:{n:"Manager",t:ai},15:{n:"Company",t:ai},16:{n:"LinksUpToDate",t:wy},17:{n:"CharacterCount",t:Uo},19:{n:"SharedDoc",t:wy},22:{n:"HyperlinksChanged",t:wy},23:{n:"AppVersion",t:Uo,p:"version"},24:{n:"DigSig",t:Wae},26:{n:"ContentType",t:ai},27:{n:"ContentStatus",t:ai},28:{n:"Language",t:ai},29:{n:"Version",t:ai},255:{},2147483648:{n:"Locale",t:Hw},2147483651:{n:"Behavior",t:Hw},1919054434:{}},W5={1:{n:"CodePage",t:Y4},2:{n:"Title",t:ai},3:{n:"Subject",t:ai},4:{n:"Author",t:ai},5:{n:"Keywords",t:ai},6:{n:"Comments",t:ai},7:{n:"Template",t:ai},8:{n:"LastAuthor",t:ai},9:{n:"RevNumber",t:ai},10:{n:"EditTime",t:by},11:{n:"LastPrinted",t:by},12:{n:"CreatedDate",t:by},13:{n:"ModifiedDate",t:by},14:{n:"PageCount",t:Uo},15:{n:"WordCount",t:Uo},16:{n:"CharCount",t:Uo},17:{n:"Thumbnail",t:Yae},18:{n:"Application",t:ai},19:{n:"DocSecurity",t:Uo},255:{},2147483648:{n:"Locale",t:Hw},2147483651:{n:"Behavior",t:Hw},1919054434:{}},DD={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},eie=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function tie(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var nie=tie([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),jh=bs(nie),ud={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Y7={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},Y5={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Cy={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function X4(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function rie(t){var e=X4();if(!t||!t.match)return e;var n={};if((t.match(oo)||[]).forEach(function(r){var s=Mn(r);switch(s[0].replace(fae,"<")){case"<?xml":break;case"<Types":e.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":n[s.Extension]=s.ContentType;break;case"<Override":e[Y5[s.ContentType]]!==void 0&&e[Y5[s.ContentType]].push(s.PartName);break}}),e.xmlns!==za.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=n,delete e.calcchains,e}function X7(t,e){var n=rae(Y5),r=[],s;r[r.length]=ga,r[r.length]=Ot("Types",null,{xmlns:za.CT,"xmlns:xsd":za.xsd,"xmlns:xsi":za.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Ot("Default",null,{Extension:l[0],ContentType:l[1]})}));var a=function(l){t[l]&&t[l].length>0&&(s=t[l][0],r[r.length]=Ot("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:Cy[l][e.bookType]||Cy[l].xlsx}))},i=function(l){(t[l]||[]).forEach(function(u){r[r.length]=Ot("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:Cy[l][e.bookType]||Cy[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(u){r[r.length]=Ot("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:n[l][0]})})};return a("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var cr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function sv(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Sx(t,e){var n={"!id":{}};if(!t)return n;e.charAt(0)!=="/"&&(e="/"+e);var r={};return(t.match(oo)||[]).forEach(function(s){var a=Mn(s);if(a[0]==="<Relationship"){var i={};i.Type=a.Type,i.Target=a.Target,i.Id=a.Id,a.TargetMode&&(i.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:nx(a.Target,e);n[o]=i,r[a.Id]=i}}),n["!id"]=r,n}function Wm(t){var e=[ga,Ot("Relationships",null,{xmlns:za.RELS})];return ta(t["!id"]).forEach(function(n){e[e.length]=Ot("Relationship",null,t["!id"][n])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Zr(t,e,n,r,s,a){if(s||(s={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,s.Id="rId"+e,s.Type=r,s.Target=n,[cr.HLINK,cr.XPATH,cr.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),t["!id"][s.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][s.Id]=s,t[("/"+s.Target).replace("//","/")]=s,e}var sie="application/vnd.oasis.opendocument.spreadsheet";function aie(t,e){for(var n=Q4(t),r,s;r=rv.exec(n);)switch(r[3]){case"manifest":break;case"file-entry":if(s=Mn(r[0],!1),s.path=="/"&&s.type!==sie)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw r}}function iie(t){var e=[ga];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var n=0;n<t.length;++n)e.push('  <manifest:file-entry manifest:full-path="'+t[n][0]+'" manifest:media-type="'+t[n][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function RD(t,e,n){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function oie(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function lie(t){var e=[ga];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var n=0;n!=t.length;++n)e.push(RD(t[n][0],t[n][1])),e.push(oie("",t[n][0]));return e.push(RD("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function J7(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Rw.version+"</meta:generator></office:meta></office:document-meta>"}var lc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],cie=function(){for(var t=new Array(lc.length),e=0;e<lc.length;++e){var n=lc[e],r="(?:"+n[0].slice(0,n[0].indexOf(":"))+":)"+n[0].slice(n[0].indexOf(":")+1);t[e]=new RegExp("<"+r+"[^>]*>([\\s\\S]*?)</"+r+">")}return t}();function Z7(t){var e={};t=us(t);for(var n=0;n<lc.length;++n){var r=lc[n],s=t.match(cie[n]);s!=null&&s.length>0&&(e[r[1]]=Nr(s[1])),r[2]==="date"&&e[r[1]]&&(e[r[1]]=ws(e[r[1]]))}return e}function K_(t,e,n,r,s){s[t]!=null||e==null||e===""||(s[t]=e,e=ts(e),r[r.length]=n?Ot(t,e,n):Ei(t,e))}function eQ(t,e){var n=e||{},r=[ga,Ot("cp:coreProperties",null,{"xmlns:cp":za.CORE_PROPS,"xmlns:dc":za.dc,"xmlns:dcterms":za.dcterms,"xmlns:dcmitype":za.dcmitype,"xmlns:xsi":za.xsi})],s={};if(!t&&!n.Props)return r.join("");t&&(t.CreatedDate!=null&&K_("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:q5(t.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s),t.ModifiedDate!=null&&K_("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:q5(t.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s));for(var a=0;a!=lc.length;++a){var i=lc[a],o=n.Props&&n.Props[i[1]]!=null?n.Props[i[1]]:t?t[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&K_(i[0],o,null,r,s)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Qh=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],tQ=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function nQ(t,e,n,r){var s=[];if(typeof t=="string")s=ED(t,r);else for(var a=0;a<t.length;++a)s=s.concat(t[a].map(function(d){return{v:d}}));var i=typeof e=="string"?ED(e,r).map(function(d){return d.v}):e,o=0,l=0;if(i.length>0)for(var u=0;u!==s.length;u+=2){switch(l=+s[u+1].v,s[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":n.Worksheets=l,n.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":n.NamedRanges=l,n.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":n.Chartsheets=l,n.ChartNames=i.slice(o,o+l);break}o+=l}}function uie(t,e,n){var r={};return e||(e={}),t=us(t),Qh.forEach(function(s){var a=(t.match(tv(s[0]))||[])[1];switch(s[2]){case"string":a&&(e[s[1]]=Nr(a));break;case"bool":e[s[1]]=a==="true";break;case"raw":var i=t.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));i&&i.length>0&&(r[s[1]]=i[1]);break}}),r.HeadingPairs&&r.TitlesOfParts&&nQ(r.HeadingPairs,r.TitlesOfParts,e,n),e}function rQ(t){var e=[],n=Ot;return t||(t={}),t.Application="SheetJS",e[e.length]=ga,e[e.length]=Ot("Properties",null,{xmlns:za.EXT_PROPS,"xmlns:vt":za.vt}),Qh.forEach(function(r){if(t[r[1]]!==void 0){var s;switch(r[2]){case"string":s=ts(String(t[r[1]]));break;case"bool":s=t[r[1]]?"true":"false";break}s!==void 0&&(e[e.length]=n(r[0],s))}}),e[e.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=n("TitlesOfParts",n("vt:vector",t.SheetNames.map(function(r){return"<vt:lpstr>"+ts(r)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Aie=/<[^>]+>[^<]*/g;function die(t,e){var n={},r="",s=t.match(Aie);if(s)for(var a=0;a!=s.length;++a){var i=s[a],o=Mn(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":r=Nr(o.name);break;case"</property>":r=null;break;default:if(i.indexOf("<vt:")===0){var l=i.split(">"),u=l[0].slice(4),d=l[1];switch(u){case"lpstr":case"bstr":case"lpwstr":n[r]=Nr(d);break;case"bool":n[r]=vs(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":n[r]=parseInt(d,10);break;case"r4":case"r8":case"decimal":n[r]=parseFloat(d);break;case"filetime":case"date":n[r]=ws(d);break;case"cy":case"error":n[r]=Nr(d);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,l)}}else if(i.slice(0,2)!=="</"){if(e.WTF)throw new Error(i)}}}return n}function sQ(t){var e=[ga,Ot("Properties",null,{xmlns:za.CUST_PROPS,"xmlns:vt":za.vt})];if(!t)return e.join("");var n=1;return ta(t).forEach(function(s){++n,e[e.length]=Ot("property",wae(t[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:ts(s)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var X5={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},$_;function fie(t,e,n){$_||($_=AC(X5)),e=$_[e]||e,t[e]=n}function hie(t,e){var n=[];return ta(X5).map(function(r){for(var s=0;s<lc.length;++s)if(lc[s][1]==r)return lc[s];for(s=0;s<Qh.length;++s)if(Qh[s][1]==r)return Qh[s];throw r}).forEach(function(r){if(t[r[1]]!=null){var s=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:t[r[1]];switch(r[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),n.push(Ei(X5[r[1]]||r[1],s))}}),Ot("DocumentProperties",n.join(""),{xmlns:fl.o})}function mie(t,e){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",s=[];return t&&ta(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)){for(var i=0;i<lc.length;++i)if(a==lc[i][1])return;for(i=0;i<Qh.length;++i)if(a==Qh[i][1])return;for(i=0;i<n.length;++i)if(a==n[i])return;var o=t[a],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),s.push(Ot(yD(a),o,{"dt:dt":l}))}}),e&&ta(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)&&!(t&&Object.prototype.hasOwnProperty.call(t,a))){var i=e[a],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),s.push(Ot(yD(a),i,{"dt:dt":o}))}}),"<"+r+' xmlns="'+fl.o+'">'+s.join("")+"</"+r+">"}function J4(t){var e=t.read_shift(4),n=t.read_shift(4);return new Date((n/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function pie(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,n=e.getTime()/1e3+11644473600,r=n%Math.pow(2,32),s=(n-r)/Math.pow(2,32);r*=1e7,s*=1e7;var a=r/Math.pow(2,32)|0;a>0&&(r=r%Math.pow(2,32),s+=a);var i=ht(8);return i.write_shift(4,r),i.write_shift(4,s),i}function aQ(t,e,n){var r=t.l,s=t.read_shift(0,"lpstr-cp");if(n)for(;t.l-r&3;)++t.l;return s}function iQ(t,e,n){var r=t.read_shift(0,"lpwstr");return r}function oQ(t,e,n){return e===31?iQ(t):aQ(t,e,n)}function J5(t,e,n){return oQ(t,e,n===!1?0:4)}function gie(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return oQ(t,e,0)}function xie(t){for(var e=t.read_shift(4),n=[],r=0;r!=e;++r){var s=t.l;n[r]=t.read_shift(0,"lpwstr").replace(vo,""),t.l-s&2&&(t.l+=2)}return n}function vie(t){for(var e=t.read_shift(4),n=[],r=0;r!=e;++r)n[r]=t.read_shift(0,"lpstr-cp").replace(vo,"");return n}function yie(t){var e=t.l,n=Vw(t,W7);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var r=Vw(t,Uo);return[n,r]}function wie(t){for(var e=t.read_shift(4),n=[],r=0;r<e/2;++r)n.push(yie(t));return n}function LD(t,e){for(var n=t.read_shift(4),r={},s=0;s!=n;++s){var a=t.read_shift(4),i=t.read_shift(4);r[a]=t.read_shift(i,e===1200?"utf16le":"utf8").replace(vo,"").replace(tx,"!"),e===1200&&i%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),r}function lQ(t){var e=t.read_shift(4),n=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),n}function bie(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function Vw(t,e,n){var r=t.read_shift(2),s,a=n||{};if(t.l+=2,e!==FD&&r!==e&&Zae.indexOf(e)===-1&&!((e&65534)==4126&&(r&65534)==4126))throw new Error("Expected type "+e+" saw "+r);switch(e===FD?r:e){case 2:return s=t.read_shift(2,"i"),a.raw||(t.l+=2),s;case 3:return s=t.read_shift(4,"i"),s;case 11:return t.read_shift(4)!==0;case 19:return s=t.read_shift(4),s;case 30:return aQ(t,r,4).replace(vo,"");case 31:return iQ(t);case 64:return J4(t);case 65:return lQ(t);case 71:return bie(t);case 80:return J5(t,r,!a.raw).replace(vo,"");case 81:return gie(t,r).replace(vo,"");case 4108:return wie(t);case 4126:case 4127:return r==4127?xie(t):vie(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+r)}}function UD(t,e){var n=ht(4),r=ht(4);switch(n.write_shift(4,t==80?31:t),t){case 3:r.write_shift(-4,e);break;case 5:r=ht(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=pie(e);break;case 31:case 80:for(r=ht(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return oi([n,r])}function MD(t,e){var n=t.l,r=t.read_shift(4),s=t.read_shift(4),a=[],i=0,o=0,l=-1,u={};for(i=0;i!=s;++i){var d=t.read_shift(4),h=t.read_shift(4);a[i]=[d,h+n]}a.sort(function(k,I){return k[1]-I[1]});var m={};for(i=0;i!=s;++i){if(t.l!==a[i][1]){var p=!0;if(i>0&&e)switch(e[a[i-1][0]].t){case 2:t.l+2===a[i][1]&&(t.l+=2,p=!1);break;case 80:t.l<=a[i][1]&&(t.l=a[i][1],p=!1);break;case 4108:t.l<=a[i][1]&&(t.l=a[i][1],p=!1);break}if((!e||i==0)&&t.l<=a[i][1]&&(p=!1,t.l=a[i][1]),p)throw new Error("Read Error: Expected address "+a[i][1]+" at "+t.l+" :"+i)}if(e){var y=e[a[i][0]];if(m[y.n]=Vw(t,y.t,{raw:!0}),y.p==="version"&&(m[y.n]=String(m[y.n]>>16)+"."+("0000"+String(m[y.n]&65535)).slice(-4)),y.n=="CodePage")switch(m[y.n]){case 0:m[y.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Hc(o=m[y.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[y.n])}}else if(a[i][0]===1){if(o=m.CodePage=Vw(t,Y4),Hc(o),l!==-1){var x=t.l;t.l=a[l][1],u=LD(t,o),t.l=x}}else if(a[i][0]===0){if(o===0){l=i,t.l=a[i+1][1];continue}u=LD(t,o)}else{var C=u[a[i][0]],S;switch(t[t.l]){case 65:t.l+=4,S=lQ(t);break;case 30:t.l+=4,S=J5(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,S=J5(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,S=t.read_shift(4,"i");break;case 19:t.l+=4,S=t.read_shift(4);break;case 5:t.l+=4,S=t.read_shift(8,"f");break;case 11:t.l+=4,S=ua(t,4);break;case 64:t.l+=4,S=ws(J4(t));break;default:throw new Error("unparsed value: "+t[t.l])}m[C]=S}}return t.l=n+r,m}var cQ=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Cie(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function PD(t,e,n){var r=ht(8),s=[],a=[],i=8,o=0,l=ht(8),u=ht(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),a.push(l),s.push(u),i+=8+l.length,!e){u=ht(8),u.write_shift(4,0),s.unshift(u);var d=[ht(4)];for(d[0].write_shift(4,t.length),o=0;o<t.length;++o){var h=t[o][0];for(l=ht(8+2*(h.length+1)+(h.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,h.length+1),l.write_shift(0,h,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=oi(d),a.unshift(l),i+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(cQ.indexOf(t[o][0])>-1||tQ.indexOf(t[o][0])>-1)&&t[o][1]!=null){var m=t[o][1],p=0;if(e){p=+e[t[o][0]];var y=n[p];if(y.p=="version"&&typeof m=="string"){var x=m.split(".");m=(+x[0]<<16)+(+x[1]||0)}l=UD(y.t,m)}else{var C=Cie(m);C==-1&&(C=31,m=String(m)),l=UD(C,m)}a.push(l),u=ht(8),u.write_shift(4,e?p:2+o),s.push(u),i+=8+l.length}var S=8*(a.length+1);for(o=0;o<a.length;++o)s[o].write_shift(4,S),S+=a[o].length;return r.write_shift(4,i),r.write_shift(4,a.length),oi([r].concat(s).concat(a))}function OD(t,e,n){var r=t.content;if(!r)return{};bi(r,0);var s,a,i,o,l=0;r.chk("feff","Byte Order: "),r.read_shift(2);var u=r.read_shift(4),d=r.read_shift(16);if(d!==xn.utils.consts.HEADER_CLSID&&d!==n)throw new Error("Bad PropertySet CLSID "+d);if(s=r.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(a=r.read_shift(16),o=r.read_shift(4),s===1&&o!==r.l)throw new Error("Length mismatch: "+o+" !== "+r.l);s===2&&(i=r.read_shift(16),l=r.read_shift(4));var h=MD(r,e),m={SystemIdentifier:u};for(var p in h)m[p]=h[p];if(m.FMTID=a,s===1)return m;if(l-r.l==2&&(r.l+=2),r.l!==l)throw new Error("Length mismatch 2: "+r.l+" !== "+l);var y;try{y=MD(r,null)}catch{}for(p in y)m[p]=y[p];return m.FMTID=[a,i],m}function jD(t,e,n,r,s,a){var i=ht(s?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,xn.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,s?2:1),i.write_shift(16,e,"hex"),i.write_shift(4,s?68:48);var l=PD(t,n,r);if(o.push(l),s){var u=PD(s,null,null);i.write_shift(16,a,"hex"),i.write_shift(4,68+l.length),o.push(u)}return oi(o)}function Wd(t,e){return t.read_shift(e),null}function Eie(t,e){e||(e=ht(t));for(var n=0;n<t;++n)e.write_shift(1,0);return e}function _ie(t,e,n){for(var r=[],s=t.l+e;t.l<s;)r.push(n(t,s-t.l));if(s!==t.l)throw new Error("Slurp error");return r}function ua(t,e){return t.read_shift(e)===1}function mo(t,e){return e||(e=ht(2)),e.write_shift(2,+!!t),e}function Na(t){return t.read_shift(2,"u")}function Zl(t,e){return e||(e=ht(2)),e.write_shift(2,t),e}function uQ(t,e){return _ie(t,e,Na)}function Sie(t){var e=t.read_shift(1),n=t.read_shift(1);return n===1?e:e===1}function AQ(t,e,n){return n||(n=ht(2)),n.write_shift(1,e=="e"?+t:+!!t),n.write_shift(1,e=="e"?1:0),n}function $v(t,e,n){var r=t.read_shift(n&&n.biff>=12?2:1),s="sbcs-cont";if(n&&n.biff>=8,!n||n.biff==8){var a=t.read_shift(1);a&&(s="dbcs-cont")}else n.biff==12&&(s="wstr");n.biff>=2&&n.biff<=5&&(s="cpstr");var i=r?t.read_shift(r,s):"";return i}function Tie(t){var e=t.read_shift(2),n=t.read_shift(1),r=n&4,s=n&8,a=1+(n&1),i=0,o,l={};s&&(i=t.read_shift(2)),r&&(o=t.read_shift(4));var u=a==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,u);return s&&(t.l+=4*i),r&&(t.l+=o),l.t=d,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function Nie(t){var e=t.t||"",n=ht(3);n.write_shift(2,e.length),n.write_shift(1,1);var r=ht(2*e.length);r.write_shift(2*e.length,e,"utf16le");var s=[n,r];return oi(s)}function a0(t,e,n){var r;if(n){if(n.biff>=2&&n.biff<=5)return t.read_shift(e,"cpstr");if(n.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?r=t.read_shift(e,"sbcs-cont"):r=t.read_shift(e,"dbcs-cont"),r}function Wv(t,e,n){var r=t.read_shift(n&&n.biff==2?1:2);return r===0?(t.l++,""):a0(t,r,n)}function w0(t,e,n){if(n.biff>5)return Wv(t,e,n);var r=t.read_shift(1);return r===0?(t.l++,""):t.read_shift(r,n.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function dQ(t,e,n){return n||(n=ht(3+2*t.length)),n.write_shift(2,t.length),n.write_shift(1,1),n.write_shift(31,t,"utf16le"),n}function Bie(t){var e=t.read_shift(1);t.l++;var n=t.read_shift(2);return t.l+=2,[e,n]}function kie(t){var e=t.read_shift(4),n=t.l,r=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(r=!0),t.l=n);var s=t.read_shift((r?e-24:e)>>1,"utf16le").replace(vo,"");return r&&(t.l+=24),s}function Iie(t){for(var e=t.read_shift(2),n="";e-- >0;)n+="../";var r=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=t.read_shift(4);if(s===0)return n+r.replace(/\\/g,"/");var a=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=t.read_shift(a>>1,"utf16le").replace(vo,"");return n+i}function Fie(t,e){var n=t.read_shift(16);switch(n){case"e0c9ea79f9bace118c8200aa004ba90b":return kie(t);case"0303000000000000c000000000000046":return Iie(t);default:throw new Error("Unsupported Moniker "+n)}}function Ey(t){var e=t.read_shift(4),n=e>0?t.read_shift(e,"utf16le").replace(vo,""):"";return n}function QD(t,e){e||(e=ht(6+t.length*2)),e.write_shift(4,1+t.length);for(var n=0;n<t.length;++n)e.write_shift(2,t.charCodeAt(n));return e.write_shift(2,0),e}function Die(t,e){var n=t.l+e,r=t.read_shift(4);if(r!==2)throw new Error("Unrecognized streamVersion: "+r);var s=t.read_shift(2);t.l+=2;var a,i,o,l,u="",d,h;s&16&&(a=Ey(t,n-t.l)),s&128&&(i=Ey(t,n-t.l)),(s&257)===257&&(o=Ey(t,n-t.l)),(s&257)===1&&(l=Fie(t,n-t.l)),s&8&&(u=Ey(t,n-t.l)),s&32&&(d=t.read_shift(16)),s&64&&(h=J4(t)),t.l=n;var m=i||o||l||"";m&&u&&(m+="#"+u),m||(m="#"+u),s&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var p={Target:m};return d&&(p.guid=d),h&&(p.time=h),a&&(p.Tooltip=a),p}function Rie(t){var e=ht(512),n=0,r=t.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var s=r.indexOf("#"),a=s>-1?31:23;switch(r.charAt(0)){case"#":a=28;break;case".":a&=-3;break}e.write_shift(4,2),e.write_shift(4,a);var i=[8,6815827,6619237,4849780,83];for(n=0;n<i.length;++n)e.write_shift(4,i[n]);if(a==28)r=r.slice(1),QD(r,e);else if(a&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<i.length;++n)e.write_shift(1,parseInt(i[n],16));var o=s>-1?r.slice(0,s):r;for(e.write_shift(4,2*(o.length+1)),n=0;n<o.length;++n)e.write_shift(2,o.charCodeAt(n));e.write_shift(2,0),a&8&&QD(s>-1?r.slice(s+1):"",e)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<i.length;++n)e.write_shift(1,parseInt(i[n],16));for(var l=0;r.slice(l*3,l*3+3)=="../"||r.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)e.write_shift(1,r.charCodeAt(n+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),n=0;n<6;++n)e.write_shift(4,0)}return e.slice(0,e.l)}function fQ(t){var e=t.read_shift(1),n=t.read_shift(1),r=t.read_shift(1),s=t.read_shift(1);return[e,n,r,s]}function hQ(t,e){var n=fQ(t);return n[3]=0,n}function rA(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2);return{r:e,c:n,ixfe:r}}function i0(t,e,n,r){return r||(r=ht(6)),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n||0),r}function Lie(t){var e=t.read_shift(2),n=t.read_shift(2);return t.l+=8,{type:e,flags:n}}function Uie(t,e,n){return e===0?"":w0(t,e,n)}function Mie(t,e,n){var r=n.biff>8?4:2,s=t.read_shift(r),a=t.read_shift(r,"i"),i=t.read_shift(r,"i");return[s,a,i]}function mQ(t){var e=t.read_shift(2),n=W4(t);return[e,n]}function Pie(t,e,n){t.l+=4,e-=4;var r=t.l+e,s=$v(t,e,n),a=t.read_shift(2);if(r-=t.l,a!==r)throw new Error("Malformed AddinUdf: padding = "+r+" != "+a);return t.l+=a,s}function hC(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),s=t.read_shift(2);return{s:{c:r,r:e},e:{c:s,r:n}}}function pQ(t,e){return e||(e=ht(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function gQ(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(1),s=t.read_shift(1);return{s:{c:r,r:e},e:{c:s,r:n}}}var Oie=gQ;function xQ(t){t.l+=4;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2);return t.l+=12,[n,e,r]}function jie(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function Qie(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function zi(t){t.l+=2,t.l+=t.read_shift(2)}var Hie={0:zi,4:zi,5:zi,6:zi,7:Qie,8:zi,9:zi,10:zi,11:zi,12:zi,13:jie,14:zi,15:zi,16:zi,17:zi,18:zi,19:zi,20:zi,21:xQ};function Vie(t,e){for(var n=t.l+e,r=[];t.l<n;){var s=t.read_shift(2);t.l-=2;try{r.push(Hie[s](t,n-t.l))}catch{return t.l=n,r}}return t.l!=n&&(t.l=n),r}function _y(t,e){var n={BIFFVer:0,dt:0};switch(n.BIFFVer=t.read_shift(2),e-=2,e>=2&&(n.dt=t.read_shift(2),t.l-=2),n.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+n.BIFFVer)}return t.read_shift(e),n}function Z4(t,e,n){var r=1536,s=16;switch(n.bookType){case"biff8":break;case"biff5":r=1280,s=8;break;case"biff4":r=4,s=6;break;case"biff3":r=3,s=6;break;case"biff2":r=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=ht(s);return a.write_shift(2,r),a.write_shift(2,e),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function zie(t,e){return e===0||t.read_shift(2),1200}function Gie(t,e,n){if(n.enc)return t.l+=e,"";var r=t.l,s=w0(t,0,n);return t.read_shift(e+r-t.l),s}function qie(t,e){var n=!e||e.biff==8,r=ht(n?112:54);for(r.write_shift(e.biff==8?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}function Kie(t,e,n){var r=n&&n.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:r&16,fBelow:r&64,fRight:r&128}}function $ie(t,e,n){var r=t.read_shift(4),s=t.read_shift(1)&3,a=t.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var i=$v(t,0,n);return i.length===0&&(i="Sheet1"),{pos:r,hs:s,dt:a,name:i}}function Wie(t,e){var n=!e||e.biff>=8?2:1,r=ht(8+n*t.name.length);r.write_shift(4,t.pos),r.write_shift(1,t.hs||0),r.write_shift(1,t.dt),r.write_shift(1,t.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(n*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var s=r.slice(0,r.l);return s.l=r.l,s}function Yie(t,e){for(var n=t.l+e,r=t.read_shift(4),s=t.read_shift(4),a=[],i=0;i!=s&&t.l<n;++i)a.push(Tie(t));return a.Count=r,a.Unique=s,a}function Xie(t,e){var n=ht(8);n.write_shift(4,t.Count),n.write_shift(4,t.Unique);for(var r=[],s=0;s<t.length;++s)r[s]=Nie(t[s]);var a=oi([n].concat(r));return a.parts=[n.length].concat(r.map(function(i){return i.length})),a}function Jie(t,e){var n={};return n.dsst=t.read_shift(2),t.l+=e-2,n}function Zie(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var n=t.read_shift(2);t.l+=4;var r=t.read_shift(1);return t.l+=3,r&7&&(e.level=r&7),r&32&&(e.hidden=!0),r&64&&(e.hpt=n/20),e}function eoe(t){var e=Lie(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var n=t.read_shift(4);return n!==0}function toe(t){return t.read_shift(2),t.read_shift(4)}function HD(t,e,n){var r=0;n&&n.biff==2||(r=t.read_shift(2));var s=t.read_shift(2);n&&n.biff==2&&(r=1-(s>>15),s&=32767);var a={Unsynced:r&1,DyZero:(r&2)>>1,ExAsc:(r&4)>>2,ExDsc:(r&8)>>3};return[a,s]}function noe(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),i=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),u=t.read_shift(2);return{Pos:[e,n],Dim:[r,s],Flags:a,CurTab:i,FirstTab:o,Selected:l,TabRatio:u}}function roe(){var t=ht(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function soe(t,e,n){if(n&&n.biff>=2&&n.biff<5)return{};var r=t.read_shift(2);return{RTL:r&64}}function aoe(t){var e=ht(18),n=1718;return t&&t.RTL&&(n|=64),e.write_shift(2,n),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function ioe(){}function ooe(t,e,n){var r={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(n&&n.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return r.name=$v(t,0,n),r}function loe(t,e){var n=t.name||"Arial",r=e&&e.biff==5,s=r?15+n.length:16+2*n.length,a=ht(s);return a.write_shift(2,t.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,n.length),r||a.write_shift(1,1),a.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),a}function coe(t){var e=rA(t);return e.isst=t.read_shift(4),e}function uoe(t,e,n,r){var s=ht(10);return i0(t,e,r,s),s.write_shift(4,n),s}function Aoe(t,e,n){n.biffguess&&n.biff==2&&(n.biff=5);var r=t.l+e,s=rA(t);n.biff==2&&t.l++;var a=Wv(t,r-t.l,n);return s.val=a,s}function doe(t,e,n,r,s){var a=!s||s.biff==8,i=ht(8+ +a+(1+a)*n.length);return i0(t,e,r,i),i.write_shift(2,n.length),a&&i.write_shift(1,1),i.write_shift((1+a)*n.length,n,a?"utf16le":"sbcs"),i}function foe(t,e,n){var r=t.read_shift(2),s=w0(t,0,n);return[r,s]}function hoe(t,e,n,r){var s=n&&n.biff==5;r||(r=ht(s?3+e.length:5+2*e.length)),r.write_shift(2,t),r.write_shift(s?1:2,e.length),s||r.write_shift(1,1),r.write_shift((s?1:2)*e.length,e,s?"sbcs":"utf16le");var a=r.length>r.l?r.slice(0,r.l):r;return a.l==null&&(a.l=a.length),a}var moe=w0;function VD(t,e,n){var r=t.l+e,s=n.biff==8||!n.biff?4:2,a=t.read_shift(s),i=t.read_shift(s),o=t.read_shift(2),l=t.read_shift(2);return t.l=r,{s:{r:a,c:o},e:{r:i,c:l}}}function poe(t,e){var n=e.biff==8||!e.biff?4:2,r=ht(2*n+6);return r.write_shift(n,t.s.r),r.write_shift(n,t.e.r+1),r.write_shift(2,t.s.c),r.write_shift(2,t.e.c+1),r.write_shift(2,0),r}function goe(t){var e=t.read_shift(2),n=t.read_shift(2),r=mQ(t);return{r:e,c:n,ixfe:r[0],rknum:r[1]}}function xoe(t,e){for(var n=t.l+e-2,r=t.read_shift(2),s=t.read_shift(2),a=[];t.l<n;)a.push(mQ(t));if(t.l!==n)throw new Error("MulRK read error");var i=t.read_shift(2);if(a.length!=i-s+1)throw new Error("MulRK length mismatch");return{r,c:s,C:i,rkrec:a}}function voe(t,e){for(var n=t.l+e-2,r=t.read_shift(2),s=t.read_shift(2),a=[];t.l<n;)a.push(t.read_shift(2));if(t.l!==n)throw new Error("MulBlank read error");var i=t.read_shift(2);if(a.length!=i-s+1)throw new Error("MulBlank length mismatch");return{r,c:s,C:i,ixfe:a}}function yoe(t,e,n,r){var s={},a=t.read_shift(4),i=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return s.patternType=eie[o>>26],r.cellStyles&&(s.alc=a&7,s.fWrap=a>>3&1,s.alcV=a>>4&7,s.fJustLast=a>>7&1,s.trot=a>>8&255,s.cIndent=a>>16&15,s.fShrinkToFit=a>>20&1,s.iReadOrder=a>>22&2,s.fAtrNum=a>>26&1,s.fAtrFnt=a>>27&1,s.fAtrAlc=a>>28&1,s.fAtrBdr=a>>29&1,s.fAtrPat=a>>30&1,s.fAtrProt=a>>31&1,s.dgLeft=i&15,s.dgRight=i>>4&15,s.dgTop=i>>8&15,s.dgBottom=i>>12&15,s.icvLeft=i>>16&127,s.icvRight=i>>23&127,s.grbitDiag=i>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=l&127,s.icvBack=l>>7&127,s.fsxButton=l>>14&1),s}function woe(t,e,n){var r={};return r.ifnt=t.read_shift(2),r.numFmtId=t.read_shift(2),r.flags=t.read_shift(2),r.fStyle=r.flags>>2&1,e-=6,r.data=yoe(t,e,r.fStyle,n),r}function zD(t,e,n,r){var s=n&&n.biff==5;r||(r=ht(s?16:20)),r.write_shift(2,0),t.style?(r.write_shift(2,t.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,t.numFmtId||0),r.write_shift(2,e<<4));var a=0;return t.numFmtId>0&&s&&(a|=1024),r.write_shift(4,a),r.write_shift(4,0),s||r.write_shift(4,0),r.write_shift(2,0),r}function boe(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function Coe(t){var e=ht(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function GD(t,e,n){var r=rA(t);(n.biff==2||e==9)&&++t.l;var s=Sie(t);return r.val=s,r.t=s===!0||s===!1?"b":"e",r}function Eoe(t,e,n,r,s,a){var i=ht(8);return i0(t,e,r,i),AQ(n,a,i),i}function _oe(t,e,n){n.biffguess&&n.biff==2&&(n.biff=5);var r=rA(t),s=eo(t);return r.val=s,r}function Soe(t,e,n,r){var s=ht(14);return i0(t,e,r,s),s0(n,s),s}var qD=Uie;function Toe(t,e,n){var r=t.l+e,s=t.read_shift(2),a=t.read_shift(2);if(n.sbcch=a,a==1025||a==14849)return[a,s];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var i=a0(t,a),o=[];r>t.l;)o.push(Wv(t));return[a,s,i,o]}function KD(t,e,n){var r=t.read_shift(2),s,a={fBuiltIn:r&1,fWantAdvise:r>>>1&1,fWantPict:r>>>2&1,fOle:r>>>3&1,fOleLink:r>>>4&1,cf:r>>>5&1023,fIcon:r>>>15&1};return n.sbcch===14849&&(s=Pie(t,e-2,n)),a.body=s||t.read_shift(e-2),typeof s=="string"&&(a.Name=s),a}var Noe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function $D(t,e,n){var r=t.l+e,s=t.read_shift(2),a=t.read_shift(1),i=t.read_shift(1),o=t.read_shift(n&&n.biff==2?1:2),l=0;(!n||n.biff>=5)&&(n.biff!=5&&(t.l+=2),l=t.read_shift(2),n.biff==5&&(t.l+=2),t.l+=4);var u=a0(t,i,n);s&32&&(u=Noe[u.charCodeAt(0)]);var d=r-t.l;n&&n.biff==2&&--d;var h=r==t.l||o===0||!(d>0)?[]:VAe(t,d,n,o);return{chKey:a,Name:u,itab:l,rgce:h}}function vQ(t,e,n){if(n.biff<8)return Boe(t,e,n);for(var r=[],s=t.l+e,a=t.read_shift(n.biff>8?4:2);a--!==0;)r.push(Mie(t,n.biff>8?12:6,n));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return r}function Boe(t,e,n){t[t.l+1]==3&&t[t.l]++;var r=$v(t,e,n);return r.charCodeAt(0)==3?r.slice(1):r}function koe(t,e,n){if(n.biff<8){t.l+=e;return}var r=t.read_shift(2),s=t.read_shift(2),a=a0(t,r,n),i=a0(t,s,n);return[a,i]}function Ioe(t,e,n){var r=gQ(t);t.l++;var s=t.read_shift(1);return e-=8,[zAe(t,e,n),s,r]}function WD(t,e,n){var r=Oie(t);switch(n.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[r,QAe(t,e,n)]}function Foe(t){var e=t.read_shift(4)!==0,n=t.read_shift(4)!==0,r=t.read_shift(4);return[e,n,r]}function Doe(t,e,n){if(!(n.biff<8)){var r=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),i=t.read_shift(2),o=w0(t,0,n);return n.biff<8&&t.read_shift(1),[{r,c:s},o,i,a]}}function Roe(t,e,n){return Doe(t,e,n)}function Loe(t,e){for(var n=[],r=t.read_shift(2);r--;)n.push(hC(t));return n}function Uoe(t){var e=ht(2+t.length*8);e.write_shift(2,t.length);for(var n=0;n<t.length;++n)pQ(t[n],e);return e}function Moe(t,e,n){if(n&&n.biff<8)return Ooe(t,e,n);var r=xQ(t),s=Vie(t,e-22,r[1]);return{cmo:r,ft:s}}var Poe={8:function(t,e){var n=t.l+e;t.l+=10;var r=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var s=t.read_shift(1);return t.l+=s,t.l=n,{fmt:r}}};function Ooe(t,e,n){t.l+=4;var r=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var i=[];return i.push((Poe[r]||so)(t,e,n)),{cmo:[s,r,a],ft:i}}function joe(t,e,n){var r=t.l,s="";try{t.l+=4;var a=(n.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(a)==-1?t.l+=6:i=Bie(t,6,n);var o=t.read_shift(2);t.read_shift(2),Na(t,2);var l=t.read_shift(2);t.l+=l;for(var u=1;u<t.lens.length-1;++u){if(t.l-r!=t.lens[u])throw new Error("TxO: bad continue record");var d=t[t.l],h=a0(t,t.lens[u+1]-t.lens[u]-1);if(s+=h,s.length>=(d?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return t.l=r+e,{t:s}}catch{return t.l=r+e,{t:s}}}function Qoe(t,e){var n=hC(t);t.l+=16;var r=Die(t,e-24);return[n,r]}function Hoe(t){var e=ht(24),n=Ms(t[0]);e.write_shift(2,n.r),e.write_shift(2,n.r),e.write_shift(2,n.c),e.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)e.write_shift(1,parseInt(r[s],16));return oi([e,Rie(t[1])])}function Voe(t,e){t.read_shift(2);var n=hC(t),r=t.read_shift((e-10)/2,"dbcs-cont");return r=r.replace(vo,""),[n,r]}function zoe(t){var e=t[1].Tooltip,n=ht(10+2*(e.length+1));n.write_shift(2,2048);var r=Ms(t[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var s=0;s<e.length;++s)n.write_shift(2,e.charCodeAt(s));return n.write_shift(2,0),n}function Goe(t){var e=[0,0],n;return n=t.read_shift(2),e[0]=DD[n]||n,n=t.read_shift(2),e[1]=DD[n]||n,e}function qoe(t){return t||(t=ht(4)),t.write_shift(2,1),t.write_shift(2,1),t}function Koe(t){for(var e=t.read_shift(2),n=[];e-- >0;)n.push(hQ(t));return n}function $oe(t){for(var e=t.read_shift(2),n=[];e-- >0;)n.push(hQ(t));return n}function Woe(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function yQ(t,e,n){if(!n.cellStyles)return so(t,e);var r=n&&n.biff>=12?4:2,s=t.read_shift(r),a=t.read_shift(r),i=t.read_shift(r),o=t.read_shift(r),l=t.read_shift(2);r==2&&(t.l+=2);var u={s,e:a,w:i,ixfe:o,flags:l};return(n.biff>=5||!n.biff)&&(u.level=l>>8&7),u}function Yoe(t,e){var n=ht(12);n.write_shift(2,e),n.write_shift(2,e),n.write_shift(2,t.width*256),n.write_shift(2,0);var r=0;return t.hidden&&(r|=1),n.write_shift(1,r),r=t.level||0,n.write_shift(1,r),n.write_shift(2,0),n}function Xoe(t,e){var n={};return e<32||(t.l+=16,n.header=eo(t),n.footer=eo(t),t.l+=2),n}function Joe(t,e,n){var r={area:!1};if(n.biff!=5)return t.l+=e,r;var s=t.read_shift(1);return t.l+=3,s&16&&(r.area=!0),r}function Zoe(t){for(var e=ht(2*t),n=0;n<t;++n)e.write_shift(2,n+1);return e}var ele=rA,tle=uQ,nle=Wv;function rle(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),s={fmt:e,env:n,len:r,data:t.slice(t.l,t.l+r)};return t.l+=r,s}function sle(t,e,n){n.biffguess&&n.biff==5&&(n.biff=2);var r=rA(t);++t.l;var s=w0(t,e-7,n);return r.t="str",r.val=s,r}function ale(t){var e=rA(t);++t.l;var n=eo(t);return e.t="n",e.val=n,e}function ile(t,e,n){var r=ht(15);return Zv(r,t,e),r.write_shift(8,n,"f"),r}function ole(t){var e=rA(t);++t.l;var n=t.read_shift(2);return e.t="n",e.val=n,e}function lle(t,e,n){var r=ht(9);return Zv(r,t,e),r.write_shift(2,n),r}function cle(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function ule(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function Ale(t,e,n){var r=t.l+e,s=rA(t),a=t.read_shift(2),i=a0(t,a,n);return t.l=r,s.t="str",s.val=i,s}var dle=[2,3,48,49,131,139,140,245],Z5=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=AC({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(o,l){var u=[],d=Qf(1);switch(l.type){case"base64":d=ml(wl(o));break;case"binary":d=ml(o);break;case"buffer":case"array":d=o;break}bi(d,0);var h=d.read_shift(1),m=!!(h&136),p=!1,y=!1;switch(h){case 2:break;case 3:break;case 48:p=!0,m=!0;break;case 49:p=!0,m=!0;break;case 131:break;case 139:break;case 140:y=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var x=0,C=521;h==2&&(x=d.read_shift(2)),d.l+=3,h!=2&&(x=d.read_shift(4)),x>1048576&&(x=1e6),h!=2&&(C=d.read_shift(2));var S=d.read_shift(2),k=l.codepage||1252;h!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(k=t[d[d.l]]),d.l+=1,d.l+=2),y&&(d.l+=36);for(var I=[],F={},U=Math.min(d.length,h==2?521:C-10-(p?264:0)),R=y?32:11;d.l<U&&d[d.l]!=13;)switch(F={},F.name=Jx.utils.decode(k,d.slice(d.l,d.l+R)).replace(/[\u0000\r\n].*$/g,""),d.l+=R,F.type=String.fromCharCode(d.read_shift(1)),h!=2&&!y&&(F.offset=d.read_shift(4)),F.len=d.read_shift(1),h==2&&(F.offset=d.read_shift(2)),F.dec=d.read_shift(1),F.name.length&&I.push(F),h!=2&&(d.l+=y?13:14),F.type){case"B":(!p||F.len!=8)&&l.WTF&&console.log("Skipping "+F.name+":"+F.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+F.name+":"+F.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+F.type)}if(d[d.l]!==13&&(d.l=C-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=C;var E=0,_=0;for(u[0]=[],_=0;_!=I.length;++_)u[0][_]=I[_].name;for(;x-- >0;){if(d[d.l]===42){d.l+=S;continue}for(++d.l,u[++E]=[],_=0,_=0;_!=I.length;++_){var B=d.slice(d.l,d.l+I[_].len);d.l+=I[_].len,bi(B,0);var j=Jx.utils.decode(k,B);switch(I[_].type){case"C":j.trim().length&&(u[E][_]=j.replace(/\s+$/,""));break;case"D":j.length===8?u[E][_]=new Date(+j.slice(0,4),+j.slice(4,6)-1,+j.slice(6,8)):u[E][_]=j;break;case"F":u[E][_]=parseFloat(j.trim());break;case"+":case"I":u[E][_]=y?B.read_shift(-4,"i")^2147483648:B.read_shift(4,"i");break;case"L":switch(j.trim().toUpperCase()){case"Y":case"T":u[E][_]=!0;break;case"N":case"F":u[E][_]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+j+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));u[E][_]="##MEMO##"+(y?parseInt(j.trim(),10):B.read_shift(4));break;case"N":j=j.replace(/\u0000/g,"").trim(),j&&j!="."&&(u[E][_]=+j||0);break;case"@":u[E][_]=new Date(B.read_shift(-8,"f")-621356832e5);break;case"T":u[E][_]=new Date((B.read_shift(4)-2440588)*864e5+B.read_shift(4));break;case"Y":u[E][_]=B.read_shift(4,"i")/1e4+B.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[E][_]=-B.read_shift(-8,"f");break;case"B":if(p&&I[_].len==8){u[E][_]=B.read_shift(8,"f");break}case"G":case"P":B.l+=I[_].len;break;case"0":if(I[_].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+I[_].type)}}}if(h!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=I,u}function r(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var d=Up(n(o,u),u);return d["!cols"]=u.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete u.DBF,d}function s(o,l){try{return Yf(r(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,l){var u=l||{};if(+u.codepage>=0&&Hc(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=Ho(),h=qw(o,{header:1,raw:!0,cellDates:!0}),m=h[0],p=h.slice(1),y=o["!cols"]||[],x=0,C=0,S=0,k=1;for(x=0;x<m.length;++x){if(((y[x]||{}).DBF||{}).name){m[x]=y[x].DBF.name,++S;continue}if(m[x]!=null){if(++S,typeof m[x]=="number"&&(m[x]=m[x].toString(10)),typeof m[x]!="string")throw new Error("DBF Invalid column name "+m[x]+" |"+typeof m[x]+"|");if(m.indexOf(m[x])!==x){for(C=0;C<1024;++C)if(m.indexOf(m[x]+"_"+C)==-1){m[x]+="_"+C;break}}}}var I=Br(o["!ref"]),F=[],U=[],R=[];for(x=0;x<=I.e.c-I.s.c;++x){var E="",_="",B=0,j=[];for(C=0;C<p.length;++C)p[C][x]!=null&&j.push(p[C][x]);if(j.length==0||m[x]==null){F[x]="?";continue}for(C=0;C<j.length;++C){switch(typeof j[C]){case"number":_="B";break;case"string":_="C";break;case"boolean":_="L";break;case"object":_=j[C]instanceof Date?"D":"C";break;default:_="C"}B=Math.max(B,String(j[C]).length),E=E&&E!=_?"C":_}B>250&&(B=250),_=((y[x]||{}).DBF||{}).type,_=="C"&&y[x].DBF.len>B&&(B=y[x].DBF.len),E=="B"&&_=="N"&&(E="N",R[x]=y[x].DBF.dec,B=y[x].DBF.len),U[x]=E=="C"||_=="N"?B:a[E]||0,k+=U[x],F[x]=E}var D=d.next(32);for(D.write_shift(4,318902576),D.write_shift(4,p.length),D.write_shift(2,296+32*S),D.write_shift(2,k),x=0;x<4;++x)D.write_shift(4,0);for(D.write_shift(4,0|(+e[c7]||3)<<8),x=0,C=0;x<m.length;++x)if(m[x]!=null){var L=d.next(32),Q=(m[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);L.write_shift(1,Q,"sbcs"),L.write_shift(1,F[x]=="?"?"C":F[x],"sbcs"),L.write_shift(4,C),L.write_shift(1,U[x]||a[F[x]]||0),L.write_shift(1,R[x]||0),L.write_shift(1,2),L.write_shift(4,0),L.write_shift(1,0),L.write_shift(4,0),L.write_shift(4,0),C+=U[x]||a[F[x]]||0}var H=d.next(264);for(H.write_shift(4,13),x=0;x<65;++x)H.write_shift(4,0);for(x=0;x<p.length;++x){var te=d.next(k);for(te.write_shift(1,0),C=0;C<m.length;++C)if(m[C]!=null)switch(F[C]){case"L":te.write_shift(1,p[x][C]==null?63:p[x][C]?84:70);break;case"B":te.write_shift(8,p[x][C]||0,"f");break;case"N":var Y="0";for(typeof p[x][C]=="number"&&(Y=p[x][C].toFixed(R[C]||0)),S=0;S<U[C]-Y.length;++S)te.write_shift(1,32);te.write_shift(1,Y,"sbcs");break;case"D":p[x][C]?(te.write_shift(4,("0000"+p[x][C].getFullYear()).slice(-4),"sbcs"),te.write_shift(2,("00"+(p[x][C].getMonth()+1)).slice(-2),"sbcs"),te.write_shift(2,("00"+p[x][C].getDate()).slice(-2),"sbcs")):te.write_shift(8,"00000000","sbcs");break;case"C":var ne=String(p[x][C]!=null?p[x][C]:"").slice(0,U[C]);for(te.write_shift(1,ne,"sbcs"),S=0;S<U[C]-ne.length;++S)te.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:s,to_sheet:r,from_sheet:i}}(),wQ=function(){var t={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+ta(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(m,p){var y=t[p];return typeof y=="number"?iD(y):y},r=function(m,p,y){var x=p.charCodeAt(0)-32<<4|y.charCodeAt(0)-48;return x==59?m:iD(x)};t["|"]=254;function s(m,p){switch(p.type){case"base64":return a(wl(m),p);case"binary":return a(m,p);case"buffer":return a(rr&&Buffer.isBuffer(m)?m.toString("binary"):Wf(m),p);case"array":return a(r0(m),p)}throw new Error("Unrecognized type "+p.type)}function a(m,p){var y=m.split(/[\n\r]+/),x=-1,C=-1,S=0,k=0,I=[],F=[],U=null,R={},E=[],_=[],B=[],j=0,D;for(+p.codepage>=0&&Hc(+p.codepage);S!==y.length;++S){j=0;var L=y[S].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,n),Q=L.replace(/;;/g,"\0").split(";").map(function(re){return re.replace(/\u0000/g,";")}),H=Q[0],te;if(L.length>0)switch(H){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":Q[1].charAt(0)=="P"&&F.push(L.slice(3).replace(/;;/g,";"));break;case"C":var Y=!1,ne=!1,V=!1,J=!1,K=-1,ie=-1;for(k=1;k<Q.length;++k)switch(Q[k].charAt(0)){case"A":break;case"X":C=parseInt(Q[k].slice(1))-1,ne=!0;break;case"Y":for(x=parseInt(Q[k].slice(1))-1,ne||(C=0),D=I.length;D<=x;++D)I[D]=[];break;case"K":te=Q[k].slice(1),te.charAt(0)==='"'?te=te.slice(1,te.length-1):te==="TRUE"?te=!0:te==="FALSE"?te=!1:isNaN(zc(te))?isNaN(mp(te).getDate())||(te=ws(te)):(te=zc(te),U!==null&&Rp(U)&&(te=fC(te))),Y=!0;break;case"E":J=!0;var O=Ym(Q[k].slice(1),{r:x,c:C});I[x][C]=[I[x][C],O];break;case"S":V=!0,I[x][C]=[I[x][C],"S5S"];break;case"G":break;case"R":K=parseInt(Q[k].slice(1))-1;break;case"C":ie=parseInt(Q[k].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+L)}if(Y&&(I[x][C]&&I[x][C].length==2?I[x][C][0]=te:I[x][C]=te,U=null),V){if(J)throw new Error("SYLK shared formula cannot have own formula");var W=K>-1&&I[K][ie];if(!W||!W[1])throw new Error("SYLK shared formula cannot find base");I[x][C][1]=OQ(W[1],{r:x-K,c:C-ie})}break;case"F":var Z=0;for(k=1;k<Q.length;++k)switch(Q[k].charAt(0)){case"X":C=parseInt(Q[k].slice(1))-1,++Z;break;case"Y":for(x=parseInt(Q[k].slice(1))-1,D=I.length;D<=x;++D)I[D]=[];break;case"M":j=parseInt(Q[k].slice(1))/20;break;case"F":break;case"G":break;case"P":U=F[parseInt(Q[k].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(B=Q[k].slice(1).split(" "),D=parseInt(B[0],10);D<=parseInt(B[1],10);++D)j=parseInt(B[2],10),_[D-1]=j===0?{hidden:!0}:{wch:j},Hf(_[D-1]);break;case"C":C=parseInt(Q[k].slice(1))-1,_[C]||(_[C]={});break;case"R":x=parseInt(Q[k].slice(1))-1,E[x]||(E[x]={}),j>0?(E[x].hpt=j,E[x].hpx=gp(j)):j===0&&(E[x].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+L)}Z<1&&(U=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+L)}}return E.length>0&&(R["!rows"]=E),_.length>0&&(R["!cols"]=_),p&&p.sheetRows&&(I=I.slice(0,p.sheetRows)),[I,R]}function i(m,p){var y=s(m,p),x=y[0],C=y[1],S=Up(x,p);return ta(C).forEach(function(k){S[k]=C[k]}),S}function o(m,p){return Yf(i(m,p),p)}function l(m,p,y,x){var C="C;Y"+(y+1)+";X"+(x+1)+";K";switch(m.t){case"n":C+=m.v||0,m.f&&!m.F&&(C+=";E"+aB(m.f,{r:y,c:x}));break;case"b":C+=m.v?"TRUE":"FALSE";break;case"e":C+=m.w||m.v;break;case"d":C+='"'+(m.w||m.v)+'"';break;case"s":C+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return C}function u(m,p){p.forEach(function(y,x){var C="F;W"+(x+1)+" "+(x+1)+" ";y.hidden?C+="0":(typeof y.width=="number"&&!y.wpx&&(y.wpx=iv(y.width)),typeof y.wpx=="number"&&!y.wch&&(y.wch=ov(y.wpx)),typeof y.wch=="number"&&(C+=Math.round(y.wch))),C.charAt(C.length-1)!=" "&&m.push(C)})}function d(m,p){p.forEach(function(y,x){var C="F;";y.hidden?C+="M0;":y.hpt?C+="M"+20*y.hpt+";":y.hpx&&(C+="M"+20*lv(y.hpx)+";"),C.length>2&&m.push(C+"R"+(x+1))})}function h(m,p){var y=["ID;PWXL;N;E"],x=[],C=Br(m["!ref"]),S,k=Array.isArray(m),I=`\r
`;y.push("P;PGeneral"),y.push("F;P0;DG0G8;M255"),m["!cols"]&&u(y,m["!cols"]),m["!rows"]&&d(y,m["!rows"]),y.push("B;Y"+(C.e.r-C.s.r+1)+";X"+(C.e.c-C.s.c+1)+";D"+[C.s.c,C.s.r,C.e.c,C.e.r].join(" "));for(var F=C.s.r;F<=C.e.r;++F)for(var U=C.s.c;U<=C.e.c;++U){var R=Dn({r:F,c:U});S=k?(m[F]||[])[U]:m[R],!(!S||S.v==null&&(!S.f||S.F))&&x.push(l(S,m,F,U))}return y.join(I)+I+x.join(I)+I+"E"+I}return{to_workbook:o,to_sheet:i,from_sheet:h}}(),bQ=function(){function t(a,i){switch(i.type){case"base64":return e(wl(a),i);case"binary":return e(a,i);case"buffer":return e(rr&&Buffer.isBuffer(a)?a.toString("binary"):Wf(a),i);case"array":return e(r0(a),i)}throw new Error("Unrecognized type "+i.type)}function e(a,i){for(var o=a.split(`
`),l=-1,u=-1,d=0,h=[];d!==o.length;++d){if(o[d].trim()==="BOT"){h[++l]=[],u=0;continue}if(!(l<0)){var m=o[d].trim().split(","),p=m[0],y=m[1];++d;for(var x=o[d]||"";(x.match(/["]/g)||[]).length&1&&d<o.length-1;)x+=`
`+o[++d];switch(x=x.trim(),+p){case-1:if(x==="BOT"){h[++l]=[],u=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?h[l][u]=!0:x==="FALSE"?h[l][u]=!1:isNaN(zc(y))?isNaN(mp(y).getDate())?h[l][u]=y:h[l][u]=ws(y):h[l][u]=zc(y),++u;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),h[l][u++]=x!==""?x:null;break}if(x==="EOD")break}}return i&&i.sheetRows&&(h=h.slice(0,i.sheetRows)),h}function n(a,i){return Up(t(a,i),i)}function r(a,i){return Yf(n(a,i),i)}var s=function(){var a=function(l,u,d,h,m){l.push(u),l.push(d+","+h),l.push('"'+m.replace(/"/g,'""')+'"')},i=function(l,u,d,h){l.push(u+","+d),l.push(u==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(l){var u=[],d=Br(l["!ref"]),h,m=Array.isArray(l);a(u,"TABLE",0,1,"sheetjs"),a(u,"VECTORS",0,d.e.r-d.s.r+1,""),a(u,"TUPLES",0,d.e.c-d.s.c+1,""),a(u,"DATA",0,0,"");for(var p=d.s.r;p<=d.e.r;++p){i(u,-1,0,"BOT");for(var y=d.s.c;y<=d.e.c;++y){var x=Dn({r:p,c:y});if(h=m?(l[p]||[])[y]:l[x],!h){i(u,1,0,"");continue}switch(h.t){case"n":var C=h.w;!C&&h.v!=null&&(C=h.v),C==null?h.f&&!h.F?i(u,1,0,"="+h.f):i(u,1,0,""):i(u,0,C,"V");break;case"b":i(u,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=uc(h.z||kn[14],qa(ws(h.v)))),i(u,0,h.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var S=`\r
`,k=u.join(S);return k}}();return{to_workbook:r,to_sheet:n,from_sheet:s}}(),CQ=function(){function t(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(h,m){for(var p=h.split(`
`),y=-1,x=-1,C=0,S=[];C!==p.length;++C){var k=p[C].trim().split(":");if(k[0]==="cell"){var I=Ms(k[1]);if(S.length<=I.r)for(y=S.length;y<=I.r;++y)S[y]||(S[y]=[]);switch(y=I.r,x=I.c,k[2]){case"t":S[y][x]=t(k[3]);break;case"v":S[y][x]=+k[3];break;case"vtf":var F=k[k.length-1];case"vtc":switch(k[3]){case"nl":S[y][x]=!!+k[4];break;default:S[y][x]=+k[4];break}k[2]=="vtf"&&(S[y][x]=[S[y][x],F])}}}return m&&m.sheetRows&&(S=S.slice(0,m.sheetRows)),S}function r(h,m){return Up(n(h,m),m)}function s(h,m){return Yf(r(h,m),m)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(h){if(!h||!h["!ref"])return"";for(var m=[],p=[],y,x="",C=zo(h["!ref"]),S=Array.isArray(h),k=C.s.r;k<=C.e.r;++k)for(var I=C.s.c;I<=C.e.c;++I)if(x=Dn({r:k,c:I}),y=S?(h[k]||[])[I]:h[x],!(!y||y.v==null||y.t==="z")){switch(p=["cell",x,"t"],y.t){case"s":case"str":p.push(e(y.v));break;case"n":y.f?(p[2]="vtf",p[3]="n",p[4]=y.v,p[5]=e(y.f)):(p[2]="v",p[3]=y.v);break;case"b":p[2]="vt"+(y.f?"f":"c"),p[3]="nl",p[4]=y.v?"1":"0",p[5]=e(y.f||(y.v?"TRUE":"FALSE"));break;case"d":var F=qa(ws(y.v));p[2]="vtc",p[3]="nd",p[4]=""+F,p[5]=y.w||uc(y.z||kn[14],F);break;case"e":continue}m.push(p.join(":"))}return m.push("sheet:c:"+(C.e.c-C.s.c+1)+":r:"+(C.e.r-C.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function d(h){return[a,i,o,i,u(h),l].join(`
`)}return{to_workbook:s,to_sheet:r,from_sheet:d}}(),pp=function(){function t(d,h,m,p,y){y.raw?h[m][p]=d:d===""||(d==="TRUE"?h[m][p]=!0:d==="FALSE"?h[m][p]=!1:isNaN(zc(d))?isNaN(mp(d).getDate())?h[m][p]=d:h[m][p]=ws(d):h[m][p]=zc(d))}function e(d,h){var m=h||{},p=[];if(!d||d.length===0)return p;for(var y=d.split(/[\r\n]/),x=y.length-1;x>=0&&y[x].length===0;)--x;for(var C=10,S=0,k=0;k<=x;++k)S=y[k].indexOf(" "),S==-1?S=y[k].length:S++,C=Math.max(C,S);for(k=0;k<=x;++k){p[k]=[];var I=0;for(t(y[k].slice(0,C).trim(),p,k,I,m),I=1;I<=(y[k].length-C)/10+1;++I)t(y[k].slice(C+(I-1)*10,C+I*10).trim(),p,k,I,m)}return m.sheetRows&&(p=p.slice(0,m.sheetRows)),p}var n={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function s(d){for(var h={},m=!1,p=0,y=0;p<d.length;++p)(y=d.charCodeAt(p))==34?m=!m:!m&&y in n&&(h[y]=(h[y]||0)+1);y=[];for(p in h)Object.prototype.hasOwnProperty.call(h,p)&&y.push([h[p],p]);if(!y.length){h=r;for(p in h)Object.prototype.hasOwnProperty.call(h,p)&&y.push([h[p],p])}return y.sort(function(x,C){return x[0]-C[0]||r[x[1]]-r[C[1]]}),n[y.pop()[1]]||44}function a(d,h){var m=h||{},p="",y=m.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(p=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(p=d.charAt(4),d=d.slice(6)):p=s(d.slice(0,1024)):m&&m.FS?p=m.FS:p=s(d.slice(0,1024));var C=0,S=0,k=0,I=0,F=0,U=p.charCodeAt(0),R=!1,E=0,_=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var B=m.dateNF!=null?Jse(m.dateNF):null;function j(){var D=d.slice(I,F),L={};if(D.charAt(0)=='"'&&D.charAt(D.length-1)=='"'&&(D=D.slice(1,-1).replace(/""/g,'"')),D.length===0)L.t="z";else if(m.raw)L.t="s",L.v=D;else if(D.trim().length===0)L.t="s",L.v=D;else if(D.charCodeAt(0)==61)D.charCodeAt(1)==34&&D.charCodeAt(D.length-1)==34?(L.t="s",L.v=D.slice(2,-1).replace(/""/g,'"')):Tue(D)?(L.t="n",L.f=D.slice(1)):(L.t="s",L.v=D);else if(D=="TRUE")L.t="b",L.v=!0;else if(D=="FALSE")L.t="b",L.v=!1;else if(!isNaN(k=zc(D)))L.t="n",m.cellText!==!1&&(L.w=D),L.v=k;else if(!isNaN(mp(D).getDate())||B&&D.match(B)){L.z=m.dateNF||kn[14];var Q=0;B&&D.match(B)&&(D=Zse(D,m.dateNF,D.match(B)||[]),Q=1),m.cellDates?(L.t="d",L.v=ws(D,Q)):(L.t="n",L.v=qa(ws(D,Q))),m.cellText!==!1&&(L.w=uc(L.z,L.v instanceof Date?qa(L.v):L.v)),m.cellNF||delete L.z}else L.t="s",L.v=D;if(L.t=="z"||(m.dense?(y[C]||(y[C]=[]),y[C][S]=L):y[Dn({c:S,r:C})]=L),I=F+1,_=d.charCodeAt(I),x.e.c<S&&(x.e.c=S),x.e.r<C&&(x.e.r=C),E==U)++S;else if(S=0,++C,m.sheetRows&&m.sheetRows<=C)return!0}e:for(;F<d.length;++F)switch(E=d.charCodeAt(F)){case 34:_===34&&(R=!R);break;case U:case 10:case 13:if(!R&&j())break e;break}return F-I>0&&j(),y["!ref"]=Gn(x),y}function i(d,h){return!(h&&h.PRN)||h.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?a(d,h):Up(e(d,h),h)}function o(d,h){var m="",p=h.type=="string"?[0,0,0,0]:fB(d,h);switch(h.type){case"base64":m=wl(d);break;case"binary":m=d;break;case"buffer":h.codepage==65001?m=d.toString("utf8"):h.codepage&&typeof Jx<"u"||(m=rr&&Buffer.isBuffer(d)?d.toString("binary"):Wf(d));break;case"array":m=r0(d);break;case"string":m=d;break;default:throw new Error("Unrecognized type "+h.type)}return p[0]==239&&p[1]==187&&p[2]==191?m=us(m.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?m=us(m):h.type=="binary"&&typeof Jx<"u",m.slice(0,19)=="socialcalc:version:"?CQ.to_sheet(h.type=="string"?m:us(m),h):i(m,h)}function l(d,h){return Yf(o(d,h),h)}function u(d){for(var h=[],m=Br(d["!ref"]),p,y=Array.isArray(d),x=m.s.r;x<=m.e.r;++x){for(var C=[],S=m.s.c;S<=m.e.c;++S){var k=Dn({r:x,c:S});if(p=y?(d[x]||[])[S]:d[k],!p||p.v==null){C.push("          ");continue}for(var I=(p.w||(nd(p),p.w)||"").slice(0,10);I.length<10;)I+=" ";C.push(I+(S===0?" ":""))}h.push(C.join(""))}return h.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}}();function fle(t,e){var n=e||{},r=!!n.WTF;n.WTF=!0;try{var s=wQ.to_workbook(t,n);return n.WTF=r,s}catch(a){if(n.WTF=r,!a.message.match(/SYLK bad record ID/)&&r)throw a;return pp.to_workbook(t,e)}}var Hh=function(){function t(O,W,Z){if(O){bi(O,O.l||0);for(var re=Z.Enum||K;O.l<O.length;){var se=O.read_shift(2),de=re[se]||re[65535],pe=O.read_shift(2),be=O.l+pe,Se=de.f&&de.f(O,pe,Z);if(O.l=be,W(Se,de,se))return}}}function e(O,W){switch(W.type){case"base64":return n(ml(wl(O)),W);case"binary":return n(ml(O),W);case"buffer":case"array":return n(O,W)}throw"Unsupported type "+W.type}function n(O,W){if(!O)return O;var Z=W||{},re=Z.dense?[]:{},se="Sheet1",de="",pe=0,be={},Se=[],me=[],ce={s:{r:0,c:0},e:{r:0,c:0}},Me=Z.sheetRows||0;if(O[2]==0&&(O[3]==8||O[3]==9)&&O.length>=16&&O[14]==5&&O[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(O[2]==2)Z.Enum=K,t(O,function(Re,ze,Je){switch(Je){case 0:Z.vers=Re,Re>=4096&&(Z.qpro=!0);break;case 6:ce=Re;break;case 204:Re&&(de=Re);break;case 222:de=Re;break;case 15:case 51:Z.qpro||(Re[1].v=Re[1].v.slice(1));case 13:case 14:case 16:Je==14&&(Re[2]&112)==112&&(Re[2]&15)>1&&(Re[2]&15)<15&&(Re[1].z=Z.dateNF||kn[14],Z.cellDates&&(Re[1].t="d",Re[1].v=fC(Re[1].v))),Z.qpro&&Re[3]>pe&&(re["!ref"]=Gn(ce),be[se]=re,Se.push(se),re=Z.dense?[]:{},ce={s:{r:0,c:0},e:{r:0,c:0}},pe=Re[3],se=de||"Sheet"+(pe+1),de="");var dt=Z.dense?(re[Re[0].r]||[])[Re[0].c]:re[Dn(Re[0])];if(dt){dt.t=Re[1].t,dt.v=Re[1].v,Re[1].z!=null&&(dt.z=Re[1].z),Re[1].f!=null&&(dt.f=Re[1].f);break}Z.dense?(re[Re[0].r]||(re[Re[0].r]=[]),re[Re[0].r][Re[0].c]=Re[1]):re[Dn(Re[0])]=Re[1];break}},Z);else if(O[2]==26||O[2]==14)Z.Enum=ie,O[2]==14&&(Z.qpro=!0,O.l=0),t(O,function(Re,ze,Je){switch(Je){case 204:se=Re;break;case 22:Re[1].v=Re[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Re[3]>pe&&(re["!ref"]=Gn(ce),be[se]=re,Se.push(se),re=Z.dense?[]:{},ce={s:{r:0,c:0},e:{r:0,c:0}},pe=Re[3],se="Sheet"+(pe+1)),Me>0&&Re[0].r>=Me)break;Z.dense?(re[Re[0].r]||(re[Re[0].r]=[]),re[Re[0].r][Re[0].c]=Re[1]):re[Dn(Re[0])]=Re[1],ce.e.c<Re[0].c&&(ce.e.c=Re[0].c),ce.e.r<Re[0].r&&(ce.e.r=Re[0].r);break;case 27:Re[14e3]&&(me[Re[14e3][0]]=Re[14e3][1]);break;case 1537:me[Re[0]]=Re[1],Re[0]==pe&&(se=Re[1]);break}},Z);else throw new Error("Unrecognized LOTUS BOF "+O[2]);if(re["!ref"]=Gn(ce),be[de||se]=re,Se.push(de||se),!me.length)return{SheetNames:Se,Sheets:be};for(var Ze={},Fe=[],Ce=0;Ce<me.length;++Ce)be[Se[Ce]]?(Fe.push(me[Ce]||Se[Ce]),Ze[me[Ce]]=be[me[Ce]]||be[Se[Ce]]):(Fe.push(me[Ce]),Ze[me[Ce]]={"!ref":"A1"});return{SheetNames:Fe,Sheets:Ze}}function r(O,W){var Z=W||{};if(+Z.codepage>=0&&Hc(+Z.codepage),Z.type=="string")throw new Error("Cannot write WK1 to JS string");var re=Ho(),se=Br(O["!ref"]),de=Array.isArray(O),pe=[];Qt(re,0,a(1030)),Qt(re,6,l(se));for(var be=Math.min(se.e.r,8191),Se=se.s.r;Se<=be;++Se)for(var me=pa(Se),ce=se.s.c;ce<=se.e.c;++ce){Se===se.s.r&&(pe[ce]=Us(ce));var Me=pe[ce]+me,Ze=de?(O[Se]||[])[ce]:O[Me];if(!(!Ze||Ze.t=="z"))if(Ze.t=="n")(Ze.v|0)==Ze.v&&Ze.v>=-32768&&Ze.v<=32767?Qt(re,13,p(Se,ce,Ze.v)):Qt(re,14,x(Se,ce,Ze.v));else{var Fe=nd(Ze);Qt(re,15,h(Se,ce,Fe.slice(0,239)))}}return Qt(re,1),re.end()}function s(O,W){var Z=W||{};if(+Z.codepage>=0&&Hc(+Z.codepage),Z.type=="string")throw new Error("Cannot write WK3 to JS string");var re=Ho();Qt(re,0,i(O));for(var se=0,de=0;se<O.SheetNames.length;++se)(O.Sheets[O.SheetNames[se]]||{})["!ref"]&&Qt(re,27,J(O.SheetNames[se],de++));var pe=0;for(se=0;se<O.SheetNames.length;++se){var be=O.Sheets[O.SheetNames[se]];if(!(!be||!be["!ref"])){for(var Se=Br(be["!ref"]),me=Array.isArray(be),ce=[],Me=Math.min(Se.e.r,8191),Ze=Se.s.r;Ze<=Me;++Ze)for(var Fe=pa(Ze),Ce=Se.s.c;Ce<=Se.e.c;++Ce){Ze===Se.s.r&&(ce[Ce]=Us(Ce));var Re=ce[Ce]+Fe,ze=me?(be[Ze]||[])[Ce]:be[Re];if(!(!ze||ze.t=="z"))if(ze.t=="n")Qt(re,23,j(Ze,Ce,pe,ze.v));else{var Je=nd(ze);Qt(re,22,E(Ze,Ce,pe,Je.slice(0,239)))}}++pe}}return Qt(re,1),re.end()}function a(O){var W=ht(2);return W.write_shift(2,O),W}function i(O){var W=ht(26);W.write_shift(2,4096),W.write_shift(2,4),W.write_shift(4,0);for(var Z=0,re=0,se=0,de=0;de<O.SheetNames.length;++de){var pe=O.SheetNames[de],be=O.Sheets[pe];if(!(!be||!be["!ref"])){++se;var Se=zo(be["!ref"]);Z<Se.e.r&&(Z=Se.e.r),re<Se.e.c&&(re=Se.e.c)}}return Z>8191&&(Z=8191),W.write_shift(2,Z),W.write_shift(1,se),W.write_shift(1,re),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(1,1),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(4,0),W}function o(O,W,Z){var re={s:{c:0,r:0},e:{c:0,r:0}};return W==8&&Z.qpro?(re.s.c=O.read_shift(1),O.l++,re.s.r=O.read_shift(2),re.e.c=O.read_shift(1),O.l++,re.e.r=O.read_shift(2),re):(re.s.c=O.read_shift(2),re.s.r=O.read_shift(2),W==12&&Z.qpro&&(O.l+=2),re.e.c=O.read_shift(2),re.e.r=O.read_shift(2),W==12&&Z.qpro&&(O.l+=2),re.s.c==65535&&(re.s.c=re.e.c=re.s.r=re.e.r=0),re)}function l(O){var W=ht(8);return W.write_shift(2,O.s.c),W.write_shift(2,O.s.r),W.write_shift(2,O.e.c),W.write_shift(2,O.e.r),W}function u(O,W,Z){var re=[{c:0,r:0},{t:"n",v:0},0,0];return Z.qpro&&Z.vers!=20768?(re[0].c=O.read_shift(1),re[3]=O.read_shift(1),re[0].r=O.read_shift(2),O.l+=2):(re[2]=O.read_shift(1),re[0].c=O.read_shift(2),re[0].r=O.read_shift(2)),re}function d(O,W,Z){var re=O.l+W,se=u(O,W,Z);if(se[1].t="s",Z.vers==20768){O.l++;var de=O.read_shift(1);return se[1].v=O.read_shift(de,"utf8"),se}return Z.qpro&&O.l++,se[1].v=O.read_shift(re-O.l,"cstr"),se}function h(O,W,Z){var re=ht(7+Z.length);re.write_shift(1,255),re.write_shift(2,W),re.write_shift(2,O),re.write_shift(1,39);for(var se=0;se<re.length;++se){var de=Z.charCodeAt(se);re.write_shift(1,de>=128?95:de)}return re.write_shift(1,0),re}function m(O,W,Z){var re=u(O,W,Z);return re[1].v=O.read_shift(2,"i"),re}function p(O,W,Z){var re=ht(7);return re.write_shift(1,255),re.write_shift(2,W),re.write_shift(2,O),re.write_shift(2,Z,"i"),re}function y(O,W,Z){var re=u(O,W,Z);return re[1].v=O.read_shift(8,"f"),re}function x(O,W,Z){var re=ht(13);return re.write_shift(1,255),re.write_shift(2,W),re.write_shift(2,O),re.write_shift(8,Z,"f"),re}function C(O,W,Z){var re=O.l+W,se=u(O,W,Z);if(se[1].v=O.read_shift(8,"f"),Z.qpro)O.l=re;else{var de=O.read_shift(2);F(O.slice(O.l,O.l+de),se),O.l+=de}return se}function S(O,W,Z){var re=W&32768;return W&=-32769,W=(re?O:0)+(W>=8192?W-16384:W),(re?"":"$")+(Z?Us(W):pa(W))}var k={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},I=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function F(O,W){bi(O,0);for(var Z=[],re=0,se="",de="",pe="",be="";O.l<O.length;){var Se=O[O.l++];switch(Se){case 0:Z.push(O.read_shift(8,"f"));break;case 1:de=S(W[0].c,O.read_shift(2),!0),se=S(W[0].r,O.read_shift(2),!1),Z.push(de+se);break;case 2:{var me=S(W[0].c,O.read_shift(2),!0),ce=S(W[0].r,O.read_shift(2),!1);de=S(W[0].c,O.read_shift(2),!0),se=S(W[0].r,O.read_shift(2),!1),Z.push(me+ce+":"+de+se)}break;case 3:if(O.l<O.length){console.error("WK1 premature formula end");return}break;case 4:Z.push("("+Z.pop()+")");break;case 5:Z.push(O.read_shift(2));break;case 6:{for(var Me="";Se=O[O.l++];)Me+=String.fromCharCode(Se);Z.push('"'+Me.replace(/"/g,'""')+'"')}break;case 8:Z.push("-"+Z.pop());break;case 23:Z.push("+"+Z.pop());break;case 22:Z.push("NOT("+Z.pop()+")");break;case 20:case 21:be=Z.pop(),pe=Z.pop(),Z.push(["AND","OR"][Se-20]+"("+pe+","+be+")");break;default:if(Se<32&&I[Se])be=Z.pop(),pe=Z.pop(),Z.push(pe+I[Se]+be);else if(k[Se]){if(re=k[Se][1],re==69&&(re=O[O.l++]),re>Z.length){console.error("WK1 bad formula parse 0x"+Se.toString(16)+":|"+Z.join("|")+"|");return}var Ze=Z.slice(-re);Z.length-=re,Z.push(k[Se][0]+"("+Ze.join(",")+")")}else return Se<=7?console.error("WK1 invalid opcode "+Se.toString(16)):Se<=24?console.error("WK1 unsupported op "+Se.toString(16)):Se<=30?console.error("WK1 invalid opcode "+Se.toString(16)):Se<=115?console.error("WK1 unsupported function opcode "+Se.toString(16)):console.error("WK1 unrecognized opcode "+Se.toString(16))}}Z.length==1?W[1].f=""+Z[0]:console.error("WK1 bad formula parse |"+Z.join("|")+"|")}function U(O){var W=[{c:0,r:0},{t:"n",v:0},0];return W[0].r=O.read_shift(2),W[3]=O[O.l++],W[0].c=O[O.l++],W}function R(O,W){var Z=U(O);return Z[1].t="s",Z[1].v=O.read_shift(W-4,"cstr"),Z}function E(O,W,Z,re){var se=ht(6+re.length);se.write_shift(2,O),se.write_shift(1,Z),se.write_shift(1,W),se.write_shift(1,39);for(var de=0;de<re.length;++de){var pe=re.charCodeAt(de);se.write_shift(1,pe>=128?95:pe)}return se.write_shift(1,0),se}function _(O,W){var Z=U(O);Z[1].v=O.read_shift(2);var re=Z[1].v>>1;if(Z[1].v&1)switch(re&7){case 0:re=(re>>3)*5e3;break;case 1:re=(re>>3)*500;break;case 2:re=(re>>3)/20;break;case 3:re=(re>>3)/200;break;case 4:re=(re>>3)/2e3;break;case 5:re=(re>>3)/2e4;break;case 6:re=(re>>3)/16;break;case 7:re=(re>>3)/64;break}return Z[1].v=re,Z}function B(O,W){var Z=U(O),re=O.read_shift(4),se=O.read_shift(4),de=O.read_shift(2);if(de==65535)return re===0&&se===3221225472?(Z[1].t="e",Z[1].v=15):re===0&&se===3489660928?(Z[1].t="e",Z[1].v=42):Z[1].v=0,Z;var pe=de&32768;return de=(de&32767)-16446,Z[1].v=(1-pe*2)*(se*Math.pow(2,de+32)+re*Math.pow(2,de)),Z}function j(O,W,Z,re){var se=ht(14);if(se.write_shift(2,O),se.write_shift(1,Z),se.write_shift(1,W),re==0)return se.write_shift(4,0),se.write_shift(4,0),se.write_shift(2,65535),se;var de=0,pe=0,be=0,Se=0;return re<0&&(de=1,re=-re),pe=Math.log2(re)|0,re/=Math.pow(2,pe-31),Se=re>>>0,(Se&2147483648)==0&&(re/=2,++pe,Se=re>>>0),re-=Se,Se|=2147483648,Se>>>=0,re*=Math.pow(2,32),be=re>>>0,se.write_shift(4,be),se.write_shift(4,Se),pe+=16383+(de?32768:0),se.write_shift(2,pe),se}function D(O,W){var Z=B(O);return O.l+=W-14,Z}function L(O,W){var Z=U(O),re=O.read_shift(4);return Z[1].v=re>>6,Z}function Q(O,W){var Z=U(O),re=O.read_shift(8,"f");return Z[1].v=re,Z}function H(O,W){var Z=Q(O);return O.l+=W-10,Z}function te(O,W){return O[O.l+W-1]==0?O.read_shift(W,"cstr"):""}function Y(O,W){var Z=O[O.l++];Z>W-1&&(Z=W-1);for(var re="";re.length<Z;)re+=String.fromCharCode(O[O.l++]);return re}function ne(O,W,Z){if(!(!Z.qpro||W<21)){var re=O.read_shift(1);O.l+=17,O.l+=1,O.l+=2;var se=O.read_shift(W-21,"cstr");return[re,se]}}function V(O,W){for(var Z={},re=O.l+W;O.l<re;){var se=O.read_shift(2);if(se==14e3){for(Z[se]=[0,""],Z[se][0]=O.read_shift(2);O[O.l];)Z[se][1]+=String.fromCharCode(O[O.l]),O.l++;O.l++}}return Z}function J(O,W){var Z=ht(5+O.length);Z.write_shift(2,14e3),Z.write_shift(2,W);for(var re=0;re<O.length;++re){var se=O.charCodeAt(re);Z[Z.l++]=se>127?95:se}return Z[Z.l++]=0,Z}var K={0:{n:"BOF",f:Na},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:y},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:C},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:te},222:{n:"SHEETNAMELP",f:Y},65535:{n:""}},ie={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:R},23:{n:"NUMBER17",f:B},24:{n:"NUMBER18",f:_},25:{n:"FORMULA19",f:D},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:V},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:L},38:{n:"??"},39:{n:"NUMBER27",f:Q},40:{n:"FORMULA28",f:H},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:te},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ne},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:s,to_workbook:e}}();function hle(t){var e={},n=t.match(oo),r=0,s=!1;if(n)for(;r!=n.length;++r){var a=Mn(n[r]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;e.cp=k4[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=a.val;break;case"<sz":e.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":a.rgb&&(e.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+a[0])}}return e}var mle=function(){var t=tv("t"),e=tv("rPr");function n(a){var i=a.match(t);if(!i)return{t:"s",v:""};var o={t:"s",v:Nr(i[1])},l=a.match(e);return l&&(o.s=hle(l[1])),o}var r=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(i){return i.replace(r,"").split(s).map(n).filter(function(o){return o.v})}}(),ple=function(){var e=/(\r\n|\n)/g;function n(s,a,i){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),s.b&&(a.push("<b>"),i.push("</b>")),s.i&&(a.push("<i>"),i.push("</i>")),s.strike&&(a.push("<s>"),i.push("</s>"));var l=s.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(a.push("<"+l+">"),i.push("</"+l+">")),i.push("</span>"),s}function r(s){var a=[[],s.v,[]];return s.v?(s.s&&n(s.s,a[0],a[2]),a[0].join("")+a[1].replace(e,"<br/>")+a[2].join("")):""}return function(a){return a.map(r).join("")}}(),gle=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,xle=/<(?:\w+:)?r>/,vle=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function eB(t,e){var n=e?e.cellHTML:!0,r={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(r.t=Nr(us(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),r.r=us(t),n&&(r.h=j4(r.t))):t.match(xle)&&(r.r=us(t),r.t=Nr(us((t.replace(vle,"").match(gle)||[]).join("").replace(oo,""))),n&&(r.h=ple(mle(r.r)))),r):{t:""}}var yle=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,wle=/<(?:\w+:)?(?:si|sstItem)>/g,ble=/<\/(?:\w+:)?(?:si|sstItem)>/;function Cle(t,e){var n=[],r="";if(!t)return n;var s=t.match(yle);if(s){r=s[2].replace(wle,"").split(ble);for(var a=0;a!=r.length;++a){var i=eB(r[a].trim(),e);i!=null&&(n[n.length]=i)}s=Mn(s[1]),n.Count=s.count,n.Unique=s.uniqueCount}return n}var Ele=/^\s|\s$|[\t\n\r]/;function EQ(t,e){if(!e.bookSST)return"";var n=[ga];n[n.length]=Ot("sst",null,{xmlns:p0[0],count:t.Count,uniqueCount:t.Unique});for(var r=0;r!=t.length;++r)if(t[r]!=null){var s=t[r],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(Ele)&&(a+=' xml:space="preserve"'),a+=">"+ts(s.t)+"</t>"),a+="</si>",n[n.length]=a}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}function _le(t){return[t.read_shift(4),t.read_shift(4)]}function Sle(t,e){var n=[],r=!1;return cd(t,function(a,i,o){switch(o){case 159:n.Count=a[0],n.Unique=a[1];break;case 19:n.push(a);break;case 160:return!0;case 35:r=!0;break;case 36:r=!1;break;default:if(i.T,!r||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function Tle(t,e){return e||(e=ht(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var Nle=Pae;function Ble(t){var e=Ho();Nt(e,159,Tle(t));for(var n=0;n<t.length;++n)Nt(e,19,Nle(t[n]));return Nt(e,160),e.end()}function _Q(t){for(var e=[],n=t.split(""),r=0;r<n.length;++r)e[r]=n[r].charCodeAt(0);return e}function $A(t,e){var n={};return n.Major=t.read_shift(2),n.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),n}function kle(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=$A(t,4),e.U=$A(t,4),e.W=$A(t,4),e}function Ile(t){for(var e=t.read_shift(4),n=t.l+e-4,r={},s=t.read_shift(4),a=[];s-- >0;)a.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(r.name=t.read_shift(0,"lpp4"),r.comps=a,t.l!=n)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+n);return r}function Fle(t){var e=[];t.l+=4;for(var n=t.read_shift(4);n-- >0;)e.push(Ile(t));return e}function Dle(t){var e=[];t.l+=4;for(var n=t.read_shift(4);n-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function Rle(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=$A(t,4),e.U=$A(t,4),e.W=$A(t,4),e}function Lle(t){var e=Rle(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function SQ(t,e){var n=t.l+e,r={};r.Flags=t.read_shift(4)&63,t.l+=4,r.AlgID=t.read_shift(4);var s=!1;switch(r.AlgID){case 26126:case 26127:case 26128:s=r.Flags==36;break;case 26625:s=r.Flags==4;break;case 0:s=r.Flags==16||r.Flags==4||r.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+r.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return r.AlgIDHash=t.read_shift(4),r.KeySize=t.read_shift(4),r.ProviderType=t.read_shift(4),t.l+=8,r.CSPName=t.read_shift(n-t.l>>1,"utf16le"),t.l=n,r}function TQ(t,e){var n={},r=t.l+e;return t.l+=4,n.Salt=t.slice(t.l,t.l+16),t.l+=16,n.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),n.VerifierHash=t.slice(t.l,r),t.l=r,n}function Ule(t){var e=$A(t);switch(e.Minor){case 2:return[e.Minor,Mle(t)];case 3:return[e.Minor,Ple()];case 4:return[e.Minor,Ole(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function Mle(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var n=t.read_shift(4),r=SQ(t,n),s=TQ(t,t.length-t.l);return{t:"Std",h:r,v:s}}function Ple(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Ole(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var n=t.read_shift(t.length-t.l,"utf8"),r={};return n.replace(oo,function(a){var i=Mn(a);switch(nA(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){r[o]=i[o]});break;case"<dataIntegrity":r.encryptedHmacKey=i.encryptedHmacKey,r.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":r.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":r.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":r.encs.push(i);break;default:throw i[0]}}),r}function jle(t,e){var n={},r=n.EncryptionVersionInfo=$A(t,4);if(e-=4,r.Minor!=2)throw new Error("unrecognized minor version code: "+r.Minor);if(r.Major>4||r.Major<2)throw new Error("unrecognized major version code: "+r.Major);n.Flags=t.read_shift(4),e-=4;var s=t.read_shift(4);return e-=4,n.EncryptionHeader=SQ(t,s),e-=s,n.EncryptionVerifier=TQ(t,e),n}function Qle(t){var e={},n=e.EncryptionVersionInfo=$A(t,4);if(n.Major!=1||n.Minor!=1)throw"unrecognized version code "+n.Major+" : "+n.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function tB(t){var e=0,n,r=_Q(t),s=r.length+1,a,i,o,l,u;for(n=Qf(s),n[0]=r.length,a=1;a!=s;++a)n[a]=r[a-1];for(a=s-1;a>=0;--a)i=n[a],o=(e&16384)===0?0:1,l=e<<1&32767,u=o|l,e=u^i;return e^52811}var NQ=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],n=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],r=function(i){return(i/2|i*128)&255},s=function(i,o){return r(i^o)},a=function(i){for(var o=e[i.length-1],l=104,u=i.length-1;u>=0;--u)for(var d=i[u],h=0;h!=7;++h)d&64&&(o^=n[l]),d*=2,--l;return o};return function(i){for(var o=_Q(i),l=a(o),u=o.length,d=Qf(16),h=0;h!=16;++h)d[h]=0;var m,p,y;for((u&1)===1&&(m=l>>8,d[u]=s(t[0],m),--u,m=l&255,p=o[o.length-1],d[u]=s(p,m));u>0;)--u,m=l>>8,d[u]=s(o[u],m),--u,m=l&255,d[u]=s(o[u],m);for(u=15,y=15-o.length;y>0;)m=l>>8,d[u]=s(t[y],m),--u,--y,m=l&255,d[u]=s(o[u],m),--u,--y;return d}}(),Hle=function(t,e,n,r,s){s||(s=e),r||(r=NQ(t));var a,i;for(a=0;a!=e.length;++a)i=e[a],i^=r[n],i=(i>>5|i<<3)&255,s[a]=i,++n;return[s,n,r]},Vle=function(t){var e=0,n=NQ(t);return function(r){var s=Hle("",r,e,n);return e=s[1],s[0]}};function zle(t,e,n,r){var s={key:Na(t),verificationBytes:Na(t)};return n.password&&(s.verifier=tB(n.password)),r.valid=s.verificationBytes===s.verifier,r.valid&&(r.insitu=Vle(n.password)),s}function Gle(t,e,n){var r=n||{};return r.Info=t.read_shift(2),t.l-=2,r.Info===1?r.Data=Qle(t):r.Data=jle(t,e),r}function qle(t,e,n){var r={Type:n.biff>=8?t.read_shift(2):0};return r.Type?Gle(t,e-2,r):zle(t,n.biff>=8?e:e-2,n,r),r}var BQ=function(){function t(s,a){switch(a.type){case"base64":return e(wl(s),a);case"binary":return e(s,a);case"buffer":return e(rr&&Buffer.isBuffer(s)?s.toString("binary"):Wf(s),a);case"array":return e(r0(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){var i=a||{},o=i.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,h){Array.isArray(o)&&(o[h]=[]);for(var m=/\\\w+\b/g,p=0,y,x=-1;y=m.exec(d);){switch(y[0]){case"\\cell":var C=d.slice(p,m.lastIndex-y[0].length);if(C[0]==" "&&(C=C.slice(1)),++x,C.length){var S={v:C,t:"s"};Array.isArray(o)?o[h][x]=S:o[Dn({r:h,c:x})]=S}break}p=m.lastIndex}x>u.e.c&&(u.e.c=x)}),o["!ref"]=Gn(u),o}function n(s,a){return Yf(t(s,a),a)}function r(s){for(var a=["{\\rtf1\\ansi"],i=Br(s["!ref"]),o,l=Array.isArray(s),u=i.s.r;u<=i.e.r;++u){a.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)a.push("\\cellx"+(d+1));for(a.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var h=Dn({r:u,c:d});o=l?(s[u]||[])[d]:s[h],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(nd(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:n,to_sheet:t,from_sheet:r}}();function Kle(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function av(t){for(var e=0,n=1;e!=3;++e)n=n*256+(t[e]>255?255:t[e]<0?0:t[e]);return n.toString(16).toUpperCase().slice(1)}function $le(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255,s=Math.max(e,n,r),a=Math.min(e,n,r),i=s-a;if(i===0)return[0,0,e];var o=0,l=0,u=s+a;switch(l=i/(u>1?2-u:u),s){case e:o=((n-r)/i+6)%6;break;case n:o=(r-e)/i+2;break;case r:o=(e-n)/i+4;break}return[o/6,l,u/2]}function Wle(t){var e=t[0],n=t[1],r=t[2],s=n*2*(r<.5?r:1-r),a=r-s/2,i=[a,a,a],o=6*e,l;if(n!==0)switch(o|0){case 0:case 6:l=s*o,i[0]+=s,i[1]+=l;break;case 1:l=s*(2-o),i[0]+=l,i[1]+=s;break;case 2:l=s*(o-2),i[1]+=s,i[2]+=l;break;case 3:l=s*(4-o),i[1]+=l,i[2]+=s;break;case 4:l=s*(o-4),i[2]+=s,i[0]+=l;break;case 5:l=s*(6-o),i[2]+=l,i[0]+=s;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function zw(t,e){if(e===0)return t;var n=$le(Kle(t));return e<0?n[2]=n[2]*(1+e):n[2]=1-(1-n[2])*(1-e),av(Wle(n))}var kQ=6,Yle=15,Xle=1,Xi=kQ;function iv(t){return Math.floor((t+Math.round(128/Xi)/256)*Xi)}function ov(t){return Math.floor((t-5)/Xi*100+.5)/100}function Gw(t){return Math.round((t*Xi+5)/Xi*256)/256}function W_(t){return Gw(ov(iv(t)))}function nB(t){var e=Math.abs(t-W_(t)),n=Xi;if(e>.005)for(Xi=Xle;Xi<Yle;++Xi)Math.abs(t-W_(t))<=e&&(e=Math.abs(t-W_(t)),n=Xi);Xi=n}function Hf(t){t.width?(t.wpx=iv(t.width),t.wch=ov(t.wpx),t.MDW=Xi):t.wpx?(t.wch=ov(t.wpx),t.width=Gw(t.wch),t.MDW=Xi):typeof t.wch=="number"&&(t.width=Gw(t.wch),t.wpx=iv(t.width),t.MDW=Xi),t.customWidth&&delete t.customWidth}var Jle=96,IQ=Jle;function lv(t){return t*96/IQ}function gp(t){return t*IQ/96}var Zle={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function ece(t,e,n,r){e.Borders=[];var s={},a=!1;(t[0].match(oo)||[]).forEach(function(i){var o=Mn(i);switch(nA(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=vs(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=vs(o.diagonalDown)),e.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function tce(t,e,n,r){e.Fills=[];var s={},a=!1;(t[0].match(oo)||[]).forEach(function(i){var o=Mn(i);switch(nA(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},e.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function nce(t,e,n,r){e.Fonts=[];var s={},a=!1;(t[0].match(oo)||[]).forEach(function(i){var o=Mn(i);switch(nA(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=us(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?vs(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?vs(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?vs(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?vs(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?vs(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?vs(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?vs(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=k4[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=vs(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var l=jh[s.color.index];s.color.index==81&&(l=jh[1]),l||(l=jh[1]),s.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&n.themeElements&&n.themeElements.clrScheme&&(s.color.rgb=zw(n.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function rce(t,e,n){e.NumberFmt=[];for(var r=ta(kn),s=0;s<r.length;++s)e.NumberFmt[r[s]]=kn[r[s]];var a=t[0].match(oo);if(a)for(s=0;s<a.length;++s){var i=Mn(a[s]);switch(nA(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Nr(us(i.formatCode)),l=parseInt(i.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}KA(o,l)}}break;case"</numFmt>":break;default:if(n.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function sce(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)t[r]!=null&&(e[e.length]=Ot("numFmt",null,{numFmtId:r,formatCode:ts(t[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Ot("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var Sy=["numFmtId","fillId","fontId","borderId","xfId"],Ty=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function ace(t,e,n){e.CellXf=[];var r,s=!1;(t[0].match(oo)||[]).forEach(function(a){var i=Mn(a),o=0;switch(nA(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(r=i,delete r[0],o=0;o<Sy.length;++o)r[Sy[o]]&&(r[Sy[o]]=parseInt(r[Sy[o]],10));for(o=0;o<Ty.length;++o)r[Ty[o]]&&(r[Ty[o]]=vs(r[Ty[o]]));if(e.NumberFmt&&r.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[r.numFmtId]==e.NumberFmt[o]){r.numFmtId=o;break}}e.CellXf.push(r);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};i.vertical&&(l.vertical=i.vertical),i.horizontal&&(l.horizontal=i.horizontal),i.textRotation!=null&&(l.textRotation=i.textRotation),i.indent&&(l.indent=i.indent),i.wrapText&&(l.wrapText=vs(i.wrapText)),r.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function ice(t){var e=[];return e[e.length]=Ot("cellXfs",null),t.forEach(function(n){e[e.length]=Ot("xf",null,n)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Ot("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var oce=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,n=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,r=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var h;return(h=o.match(e))&&rce(h,d,u),(h=o.match(s))&&nce(h,d,l,u),(h=o.match(r))&&tce(h,d,l,u),(h=o.match(a))&&ece(h,d,l,u),(h=o.match(n))&&ace(h,d,u),d}}();function FQ(t,e){var n=[ga,Ot("styleSheet",null,{xmlns:p0[0],"xmlns:vt":za.vt})],r;return t.SSF&&(r=sce(t.SSF))!=null&&(n[n.length]=r),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=ice(e.cellXfs))&&(n[n.length]=r),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function lce(t,e){var n=t.read_shift(2),r=no(t);return[n,r]}function cce(t,e,n){n||(n=ht(6+4*e.length)),n.write_shift(2,t),li(e,n);var r=n.length>n.l?n.slice(0,n.l):n;return n.l==null&&(n.l=n.length),r}function uce(t,e,n){var r={};r.sz=t.read_shift(2)/20;var s=Gae(t);s.fItalic&&(r.italic=1),s.fCondense&&(r.condense=1),s.fExtend&&(r.extend=1),s.fShadow&&(r.shadow=1),s.fOutline&&(r.outline=1),s.fStrikeout&&(r.strike=1);var a=t.read_shift(2);switch(a===700&&(r.bold=1),t.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(r.underline=i);var o=t.read_shift(1);o>0&&(r.family=o);var l=t.read_shift(1);switch(l>0&&(r.charset=l),t.l++,r.color=zae(t),t.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=no(t),r}function Ace(t,e){e||(e=ht(153)),e.write_shift(2,t.sz*20),qae(t,e),e.write_shift(2,t.bold?700:400);var n=0;t.vertAlign=="superscript"?n=1:t.vertAlign=="subscript"&&(n=2),e.write_shift(2,n),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),Qw(t.color,e);var r=0;return r=2,e.write_shift(1,r),li(t.name,e),e.length>e.l?e.slice(0,e.l):e}var dce=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Y_,fce=so;function YD(t,e){e||(e=ht(84)),Y_||(Y_=AC(dce));var n=Y_[t.patternType];n==null&&(n=40),e.write_shift(4,n);var r=0;if(n!=40)for(Qw({auto:1},e),Qw({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function hce(t,e){var n=t.l+e,r=t.read_shift(2),s=t.read_shift(2);return t.l=n,{ixfe:r,numFmtId:s}}function DQ(t,e,n){n||(n=ht(16)),n.write_shift(2,e||0),n.write_shift(2,t.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);var r=0;return n.write_shift(1,r),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function Fg(t,e){return e||(e=ht(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var mce=so;function pce(t,e){return e||(e=ht(51)),e.write_shift(1,0),Fg(null,e),Fg(null,e),Fg(null,e),Fg(null,e),Fg(null,e),e.length>e.l?e.slice(0,e.l):e}function gce(t,e){return e||(e=ht(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),jw(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function xce(t,e,n){var r=ht(2052);return r.write_shift(4,t),jw(e,r),jw(n,r),r.length>r.l?r.slice(0,r.l):r}function vce(t,e,n){var r={};r.NumberFmt=[];for(var s in kn)r.NumberFmt[s]=kn[s];r.CellXf=[],r.Fonts=[];var a=[],i=!1;return cd(t,function(l,u,d){switch(d){case 44:r.NumberFmt[l[0]]=l[1],KA(l[1],l[0]);break;case 43:r.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=zw(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&r.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:a.push(d),i=!0;break;case 38:a.pop(),i=!1;break;default:if(u.T>0)a.push(d);else if(u.T<0)a.pop();else if(!i||n.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),r}function yce(t,e){if(e){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&++n}),n!=0&&(Nt(t,615,Gc(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&Nt(t,44,cce(s,e[s]))}),Nt(t,616))}}function wce(t){var e=1;Nt(t,611,Gc(e)),Nt(t,43,Ace({sz:12,color:{theme:1},name:"Calibri",family:2})),Nt(t,612)}function bce(t){var e=2;Nt(t,603,Gc(e)),Nt(t,45,YD({patternType:"none"})),Nt(t,45,YD({patternType:"gray125"})),Nt(t,604)}function Cce(t){var e=1;Nt(t,613,Gc(e)),Nt(t,46,pce()),Nt(t,614)}function Ece(t){var e=1;Nt(t,626,Gc(e)),Nt(t,47,DQ({numFmtId:0},65535)),Nt(t,627)}function _ce(t,e){Nt(t,617,Gc(e.length)),e.forEach(function(n){Nt(t,47,DQ(n,0))}),Nt(t,618)}function Sce(t){var e=1;Nt(t,619,Gc(e)),Nt(t,48,gce({xfId:0,name:"Normal"})),Nt(t,620)}function Tce(t){var e=0;Nt(t,505,Gc(e)),Nt(t,506)}function Nce(t){var e=0;Nt(t,508,xce(e,"TableStyleMedium9","PivotStyleMedium4")),Nt(t,509)}function Bce(t,e){var n=Ho();return Nt(n,278),yce(n,t.SSF),wce(n),bce(n),Cce(n),Ece(n),_ce(n,e.cellXfs),Sce(n),Tce(n),Nce(n),Nt(n,279),n.end()}var kce=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Ice(t,e,n){e.themeElements.clrScheme=[];var r={};(t[0].match(oo)||[]).forEach(function(s){var a=Mn(s);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":r.rgb=a.val;break;case"<a:sysClr":r.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(e.themeElements.clrScheme[kce.indexOf(a[0])]=r,r={}):r.name=a[0].slice(3,a[0].length-1);break;default:if(n&&n.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function Fce(){}function Dce(){}var Rce=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Lce=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Uce=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Mce(t,e,n){e.themeElements={};var r;[["clrScheme",Rce,Ice],["fontScheme",Lce,Fce],["fmtScheme",Uce,Dce]].forEach(function(s){if(!(r=t.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](r,e,n)})}var Pce=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function RQ(t,e){(!t||t.length===0)&&(t=rB());var n,r={};if(!(n=t.match(Pce)))throw new Error("themeElements not found in theme");return Mce(n[0],r,e),r.raw=t,r}function rB(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var n=[ga];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',n[n.length]='<a:font script="Hang" typeface="맑은 고딕"/>',n[n.length]='<a:font script="Hans" typeface="宋体"/>',n[n.length]='<a:font script="Hant" typeface="新細明體"/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',n[n.length]='<a:font script="Hang" typeface="맑은 고딕"/>',n[n.length]='<a:font script="Hans" typeface="宋体"/>',n[n.length]='<a:font script="Hant" typeface="新細明體"/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function Oce(t,e,n){var r=t.l+e,s=t.read_shift(4);if(s!==124226){if(!n.cellStyles){t.l=r;return}var a=t.slice(t.l);t.l=r;var i;try{i=S7(a,{type:"array"})}catch{return}var o=pl(i,"theme/theme/theme1.xml",!0);if(o)return RQ(o,n)}}function jce(t){return t.read_shift(4)}function Qce(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=Hce(t,4);break;case 2:e.xclrValue=fQ(t);break;case 3:e.xclrValue=jce(t);break;case 4:t.l+=4;break}return t.l+=8,e}function Hce(t,e){return so(t,e)}function Vce(t,e){return so(t,e)}function zce(t){var e=t.read_shift(2),n=t.read_shift(2)-4,r=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:r[1]=Qce(t);break;case 6:r[1]=Vce(t,n);break;case 14:case 15:r[1]=t.read_shift(n===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+n)}return r}function Gce(t,e){var n=t.l+e;t.l+=2;var r=t.read_shift(2);t.l+=2;for(var s=t.read_shift(2),a=[];s-- >0;)a.push(zce(t,n-t.l));return{ixfe:r,ext:a}}function qce(t,e){e.forEach(function(n){n[0]})}function Kce(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:no(t)}}function $ce(t){var e=ht(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),li(t.name,e),e.slice(0,e.l)}function Wce(t){for(var e=[],n=t.read_shift(4);n-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function Yce(t){var e=ht(4+8*t.length);e.write_shift(4,t.length);for(var n=0;n<t.length;++n)e.write_shift(4,t[n][0]),e.write_shift(4,t[n][1]);return e}function Xce(t,e){var n=ht(8+2*e.length);return n.write_shift(4,t),li(e,n),n.slice(0,n.l)}function Jce(t){return t.l+=4,t.read_shift(4)!=0}function Zce(t,e){var n=ht(8);return n.write_shift(4,t),n.write_shift(4,1),n}function eue(t,e,n){var r={Types:[],Cell:[],Value:[]},s=n||{},a=[],i=!1,o=2;return cd(t,function(l,u,d){switch(d){case 335:r.Types.push({name:l.name});break;case 51:l.forEach(function(h){o==1?r.Cell.push({type:r.Types[h[0]-1].name,index:h[1]}):o==0&&r.Value.push({type:r.Types[h[0]-1].name,index:h[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:a.push(d),i=!0;break;case 36:a.pop(),i=!1;break;default:if(!u.T){if(!i||s.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}function tue(){var t=Ho();return Nt(t,332),Nt(t,334,Gc(1)),Nt(t,335,$ce({name:"XLDAPR",version:12e4,flags:3496657072})),Nt(t,336),Nt(t,339,Xce(1,"XLDAPR")),Nt(t,52),Nt(t,35,Gc(514)),Nt(t,4096,Gc(0)),Nt(t,4097,Zl(1)),Nt(t,36),Nt(t,53),Nt(t,340),Nt(t,337,Zce(1)),Nt(t,51,Yce([[1,0]])),Nt(t,338),Nt(t,333),t.end()}function nue(t,e,n){var r={Types:[],Cell:[],Value:[]};if(!t)return r;var s=!1,a=2,i;return t.replace(oo,function(o){var l=Mn(o);switch(nA(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":r.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<r.Types.length;++u)r.Types[u].name==l.name&&(i=r.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?r.Cell.push({type:r.Types[l.t-1].name,index:+l.v}):a==0&&r.Value.push({type:r.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+l.i);break;default:if(!s&&n.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),r}function LQ(){var t=[ga];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function rue(t){var e=[];if(!t)return e;var n=1;return(t.match(oo)||[]).forEach(function(r){var s=Mn(r);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?n=s.i:s.i=n,e.push(s);break}}),e}function sue(t){var e={};e.i=t.read_shift(4);var n={};n.r=t.read_shift(4),n.c=t.read_shift(4),e.r=Dn(n);var r=t.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}function aue(t,e,n){var r=[];return cd(t,function(a,i,o){switch(o){case 63:r.push(a);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function iue(t,e,n,r){if(!t)return t;var s=r||{},a=!1;cd(t,function(o,l,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!l.T){if(!a||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function oue(t,e){if(!t)return"??";var n=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][n].Target}var Fm=1024;function UQ(t,e){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),s=[Ot("xml",null,{"xmlns:v":fl.v,"xmlns:o":fl.o,"xmlns:x":fl.x,"xmlns:mv":fl.mv}).replace(/\/>/,">"),Ot("o:shapelayout",Ot("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Ot("v:shapetype",[Ot("v:stroke",null,{joinstyle:"miter"}),Ot("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];Fm<t*1e3;)Fm+=1e3;return e.forEach(function(a){var i=Ms(a[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Ot("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Ot("v:fill",l,o),d={on:"t",obscured:"t"};++Fm,s=s.concat(["<v:shape"+nv({id:"_x0000_s"+Fm,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Ot("v:shadow",null,d),Ot("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Ei("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),Ei("x:AutoFill","False"),Ei("x:Row",String(i.r)),Ei("x:Column",String(i.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function XD(t,e,n,r){var s=Array.isArray(t),a;e.forEach(function(i){var o=Ms(i.ref);if(s?(t[o.r]||(t[o.r]=[]),a=t[o.r][o.c]):a=t[i.ref],!a){a={t:"z"},s?t[o.r][o.c]=a:t[i.ref]=a;var l=Br(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var u=Gn(l);u!==t["!ref"]&&(t["!ref"]=u)}a.c||(a.c=[]);var d={a:i.author,t:i.t,r:i.r,T:n};i.h&&(d.h=i.h);for(var h=a.c.length-1;h>=0;--h){if(!n&&a.c[h].T)return;n&&!a.c[h].T&&a.c.splice(h,1)}if(n&&r){for(h=0;h<r.length;++h)if(d.a==r[h].id){d.a=r[h].name||d.a;break}}a.c.push(d)})}function lue(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var n=[],r=[],s=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&n.push(o[1])}});var a=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=Mn(o[0]),u={author:l.authorId&&n[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=Ms(l.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var h=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!h&&!!h[1]&&eB(h[1])||{r:"",t:"",h:""};u.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),u.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=m.h),r.push(u)}}}}),r}function MQ(t){var e=[ga,Ot("comments",null,{xmlns:p0[0]})],n=[];return e.push("<authors>"),t.forEach(function(r){r[1].forEach(function(s){var a=ts(s.a);n.indexOf(a)==-1&&(n.push(a),e.push("<author>"+a+"</author>")),s.T&&s.ID&&n.indexOf("tc="+s.ID)==-1&&(n.push("tc="+s.ID),e.push("<author>tc="+s.ID+"</author>"))})}),n.length==0&&(n.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(r){var s=0,a=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?s=n.indexOf("tc="+r[1][0].ID):r[1].forEach(function(l){l.a&&(s=n.indexOf(ts(l.a))),a.push(l.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+s+'"><text>'),a.length<=1)e.push(Ei("t",ts(a[0]||"")));else{for(var i=`Comment:
    `+a[0]+`
`,o=1;o<a.length;++o)i+=`Reply:
    `+a[o]+`
`;e.push(Ei("t",ts(i)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function cue(t,e){var n=[],r=!1,s={},a=0;return t.replace(oo,function(o,l){var u=Mn(o);switch(nA(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&n.push(s);break;case"<text>":case"<text":a=l+o.length;break;case"</text>":s.t=t.slice(a,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":r=!0;break;case"</mentions>":r=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),n}function uue(t,e,n){var r=[ga,Ot("ThreadedComments",null,{xmlns:za.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(s){var a="";(s[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&e.indexOf(i.a)==-1&&e.push(i.a);var l={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};o==0?a=l.id:l.parentId=a,i.ID=l.id,i.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(i.a)).slice(-12)+"}"),r.push(Ot("threadedComment",Ei("text",i.t||""),l))})}),r.push("</ThreadedComments>"),r.join("")}function Aue(t,e){var n=[],r=!1;return t.replace(oo,function(a){var i=Mn(a);switch(nA(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":n.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&e.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return a}),n}function due(t){var e=[ga,Ot("personList",null,{xmlns:za.TCMNT,"xmlns:x":p0[0]}).replace(/[\/]>/,">")];return t.forEach(function(n,r){e.push(Ot("person",null,{displayName:n,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:n,providerId:"None"}))}),e.push("</personList>"),e.join("")}function fue(t){var e={};e.iauthor=t.read_shift(4);var n=y0(t);return e.rfx=n.s,e.ref=Dn(n.s),t.l+=16,e}function hue(t,e){return e==null&&(e=ht(36)),e.write_shift(4,t[1].iauthor),Mp(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var mue=no;function pue(t){return li(t.slice(0,54))}function gue(t,e){var n=[],r=[],s={},a=!1;return cd(t,function(o,l,u){switch(u){case 632:r.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=r[s.iauthor],delete s.iauthor,e.sheetRows&&s.rfx&&e.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,n.push(s);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!a||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),n}function xue(t){var e=Ho(),n=[];return Nt(e,628),Nt(e,630),t.forEach(function(r){r[1].forEach(function(s){n.indexOf(s.a)>-1||(n.push(s.a.slice(0,54)),Nt(e,632,pue(s.a)))})}),Nt(e,631),Nt(e,633),t.forEach(function(r){r[1].forEach(function(s){s.iauthor=n.indexOf(s.a);var a={s:Ms(r[0]),e:Ms(r[0])};Nt(e,635,hue([a,s])),s.t&&s.t.length>0&&Nt(e,637,jae(s)),Nt(e,636),delete s.iauthor})}),Nt(e,634),Nt(e,629),e.end()}var vue="application/vnd.ms-office.vbaProject";function yue(t){var e=xn.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(n,r){if(!(n.slice(-1)==="/"||!n.match(/_VBA_PROJECT_CUR/))){var s=n.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");xn.utils.cfb_add(e,s,t.FileIndex[r].content)}}),xn.write(e)}function wue(t,e){e.FullPaths.forEach(function(n,r){if(r!=0){var s=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&xn.utils.cfb_add(t,s,e.FileIndex[r].content)}})}var PQ=["xlsb","xlsm","xlam","biff8","xla"];function bue(){return{"!type":"dialog"}}function Cue(){return{"!type":"dialog"}}function Eue(){return{"!type":"macro"}}function _ue(){return{"!type":"macro"}}var Ym=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function n(r,s,a,i){var o=!1,l=!1;a.length==0?l=!0:a.charAt(0)=="["&&(l=!0,a=a.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=a.length>0?parseInt(a,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=e.c:--d,l?u+=e.r:--u,s+(o?"":"$")+Us(d)+(l?"":"$")+pa(u)}return function(s,a){return e=a,s.replace(t,n)}}(),sB=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,aB=function(){return function(e,n){return e.replace(sB,function(r,s,a,i,o,l){var u=G4(i)-(a?0:n.c),d=z4(l)-(o?0:n.r),h=d==0?"":o?d+1:"["+d+"]",m=u==0?"":a?u+1:"["+u+"]";return s+"R"+h+"C"+m})}}();function OQ(t,e){return t.replace(sB,function(n,r,s,a,i,o){return r+(s=="$"?s+a:Us(G4(a)+e.c))+(i=="$"?i+o:pa(z4(o)+e.r))})}function Sue(t,e,n){var r=zo(e),s=r.s,a=Ms(n),i={r:a.r-s.r,c:a.c-s.c};return OQ(t,i)}function Tue(t){return t.length!=1}function JD(t){return t.replace(/_xlfn\./g,"")}function _a(t){t.l+=1}function Vf(t,e){var n=t.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function jQ(t,e,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return QQ(t);n.biff==12&&(r=4)}var s=t.read_shift(r),a=t.read_shift(r),i=Vf(t),o=Vf(t);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function QQ(t){var e=Vf(t),n=Vf(t),r=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:n[0],c:s,cRel:n[1],rRel:n[2]}}}function Nue(t,e,n){if(n.biff<8)return QQ(t);var r=t.read_shift(n.biff==12?4:2),s=t.read_shift(n.biff==12?4:2),a=Vf(t),i=Vf(t);return{s:{r,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function HQ(t,e,n){if(n&&n.biff>=2&&n.biff<=5)return Bue(t);var r=t.read_shift(n&&n.biff==12?4:2),s=Vf(t);return{r,c:s[0],cRel:s[1],rRel:s[2]}}function Bue(t){var e=Vf(t),n=t.read_shift(1);return{r:e[0],c:n,cRel:e[1],rRel:e[2]}}function kue(t){var e=t.read_shift(2),n=t.read_shift(2);return{r:e,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function Iue(t,e,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return Fue(t);var s=t.read_shift(r>=12?4:2),a=t.read_shift(2),i=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;s>524287;)s-=1048576;if(i==1)for(;a>8191;)a=a-16384;return{r:s,c:a,cRel:i,rRel:o}}function Fue(t){var e=t.read_shift(2),n=t.read_shift(1),r=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),s==1&&n>=128&&(n=n-256),{r:e,c:n,cRel:s,rRel:r}}function Due(t,e,n){var r=(t[t.l++]&96)>>5,s=jQ(t,n.biff>=2&&n.biff<=5?6:8,n);return[r,s]}function Rue(t,e,n){var r=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),a=8;if(n)switch(n.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}var i=jQ(t,a,n);return[r,s,i]}function Lue(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}function Uue(t,e,n){var r=(t[t.l++]&96)>>5,s=t.read_shift(2),a=8;if(n)switch(n.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}return t.l+=a,[r,s]}function Mue(t,e,n){var r=(t[t.l++]&96)>>5,s=Nue(t,e-1,n);return[r,s]}function Pue(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n.biff==2?6:n.biff==12?14:7,[r]}function ZD(t){var e=t[t.l+1]&1,n=1;return t.l+=4,[e,n]}function Oue(t,e,n){t.l+=2;for(var r=t.read_shift(n&&n.biff==2?1:2),s=[],a=0;a<=r;++a)s.push(t.read_shift(n&&n.biff==2?1:2));return s}function jue(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function Que(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function Hue(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function Vue(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=n&&n.biff==2?3:4,[r]}function VQ(t){var e=t.read_shift(1),n=t.read_shift(1);return[e,n]}function zue(t){return t.read_shift(2),VQ(t)}function Gue(t){return t.read_shift(2),VQ(t)}function que(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=HQ(t,0,n);return[r,s]}function Kue(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=Iue(t,0,n);return[r,s]}function $ue(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);n&&n.biff==5&&(t.l+=12);var a=HQ(t,0,n);return[r,s,a]}function Wue(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(n&&n.biff<=3?1:2);return[JAe[s],qQ[s],r]}function Yue(t,e,n){var r=t[t.l++],s=t.read_shift(1),a=n&&n.biff<=3?[r==88?-1:0,t.read_shift(1)]:Xue(t);return[s,(a[0]===0?qQ:XAe)[a[1]]]}function Xue(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function Jue(t,e,n){t.l+=n&&n.biff==2?3:4}function Zue(t,e,n){if(t.l++,n&&n.biff==12)return[t.read_shift(4,"i"),0];var r=t.read_shift(2),s=t.read_shift(n&&n.biff==2?1:2);return[r,s]}function eAe(t){return t.l++,ud[t.read_shift(1)]}function tAe(t){return t.l++,t.read_shift(2)}function nAe(t){return t.l++,t.read_shift(1)!==0}function rAe(t){return t.l++,eo(t)}function sAe(t,e,n){return t.l++,$v(t,e-1,n)}function aAe(t,e){var n=[t.read_shift(1)];if(e==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=ua(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:n[1]=ud[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:n[1]=eo(t);break;case 2:n[1]=w0(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function iAe(t,e,n){for(var r=t.read_shift(n.biff==12?4:2),s=[],a=0;a!=r;++a)s.push((n.biff==12?y0:hC)(t));return s}function oAe(t,e,n){var r=0,s=0;n.biff==12?(r=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),r=1+t.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,--s==0&&(s=256));for(var a=0,i=[];a!=r&&(i[a]=[]);++a)for(var o=0;o!=s;++o)i[a][o]=aAe(t,n.biff);return i}function lAe(t,e,n){var r=t.read_shift(1)>>>5&3,s=!n||n.biff>=8?4:2,a=t.read_shift(s);switch(n.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[r,0,a]}function cAe(t,e,n){if(n.biff==5)return uAe(t);var r=t.read_shift(1)>>>5&3,s=t.read_shift(2),a=t.read_shift(4);return[r,s,a]}function uAe(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2,"i");t.l+=8;var r=t.read_shift(2);return t.l+=12,[e,n,r]}function AAe(t,e,n){var r=t.read_shift(1)>>>5&3;t.l+=n&&n.biff==2?3:4;var s=t.read_shift(n&&n.biff==2?1:2);return[r,s]}function dAe(t,e,n){var r=t.read_shift(1)>>>5&3,s=t.read_shift(n&&n.biff==2?1:2);return[r,s]}function fAe(t,e,n){var r=t.read_shift(1)>>>5&3;return t.l+=4,n.biff<8&&t.l--,n.biff==12&&(t.l+=2),[r]}function hAe(t,e,n){var r=(t[t.l++]&96)>>5,s=t.read_shift(2),a=4;if(n)switch(n.biff){case 5:a=15;break;case 12:a=6;break}return t.l+=a,[r,s]}var mAe=so,pAe=so,gAe=so;function Yv(t,e,n){return t.l+=2,[kue(t)]}function iB(t){return t.l+=6,[]}var xAe=Yv,vAe=iB,yAe=iB,wAe=Yv;function zQ(t){return t.l+=2,[Na(t),t.read_shift(2)&1]}var bAe=Yv,CAe=zQ,EAe=iB,_Ae=Yv,SAe=Yv,TAe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function NAe(t){t.l+=2;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),s=t.read_shift(2),a=t.read_shift(2),i=TAe[n>>2&31];return{ixti:e,coltype:n&3,rt:i,idx:r,c:s,C:a}}function BAe(t){return t.l+=2,[t.read_shift(4)]}function kAe(t,e,n){return t.l+=5,t.l+=2,t.l+=n.biff==2?1:4,["PTGSHEET"]}function IAe(t,e,n){return t.l+=n.biff==2?4:5,["PTGENDSHEET"]}function FAe(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function DAe(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function RAe(t){return t.l+=4,[0,0]}var eR={1:{n:"PtgExp",f:Zue},2:{n:"PtgTbl",f:gAe},3:{n:"PtgAdd",f:_a},4:{n:"PtgSub",f:_a},5:{n:"PtgMul",f:_a},6:{n:"PtgDiv",f:_a},7:{n:"PtgPower",f:_a},8:{n:"PtgConcat",f:_a},9:{n:"PtgLt",f:_a},10:{n:"PtgLe",f:_a},11:{n:"PtgEq",f:_a},12:{n:"PtgGe",f:_a},13:{n:"PtgGt",f:_a},14:{n:"PtgNe",f:_a},15:{n:"PtgIsect",f:_a},16:{n:"PtgUnion",f:_a},17:{n:"PtgRange",f:_a},18:{n:"PtgUplus",f:_a},19:{n:"PtgUminus",f:_a},20:{n:"PtgPercent",f:_a},21:{n:"PtgParen",f:_a},22:{n:"PtgMissArg",f:_a},23:{n:"PtgStr",f:sAe},26:{n:"PtgSheet",f:kAe},27:{n:"PtgEndSheet",f:IAe},28:{n:"PtgErr",f:eAe},29:{n:"PtgBool",f:nAe},30:{n:"PtgInt",f:tAe},31:{n:"PtgNum",f:rAe},32:{n:"PtgArray",f:Pue},33:{n:"PtgFunc",f:Wue},34:{n:"PtgFuncVar",f:Yue},35:{n:"PtgName",f:lAe},36:{n:"PtgRef",f:que},37:{n:"PtgArea",f:Due},38:{n:"PtgMemArea",f:AAe},39:{n:"PtgMemErr",f:mAe},40:{n:"PtgMemNoMem",f:pAe},41:{n:"PtgMemFunc",f:dAe},42:{n:"PtgRefErr",f:fAe},43:{n:"PtgAreaErr",f:Lue},44:{n:"PtgRefN",f:Kue},45:{n:"PtgAreaN",f:Mue},46:{n:"PtgMemAreaN",f:FAe},47:{n:"PtgMemNoMemN",f:DAe},57:{n:"PtgNameX",f:cAe},58:{n:"PtgRef3d",f:$ue},59:{n:"PtgArea3d",f:Rue},60:{n:"PtgRefErr3d",f:hAe},61:{n:"PtgAreaErr3d",f:Uue},255:{}},LAe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},UAe={1:{n:"PtgElfLel",f:zQ},2:{n:"PtgElfRw",f:_Ae},3:{n:"PtgElfCol",f:xAe},6:{n:"PtgElfRwV",f:SAe},7:{n:"PtgElfColV",f:wAe},10:{n:"PtgElfRadical",f:bAe},11:{n:"PtgElfRadicalS",f:EAe},13:{n:"PtgElfColS",f:vAe},15:{n:"PtgElfColSV",f:yAe},16:{n:"PtgElfRadicalLel",f:CAe},25:{n:"PtgList",f:NAe},29:{n:"PtgSxName",f:BAe},255:{}},MAe={0:{n:"PtgAttrNoop",f:RAe},1:{n:"PtgAttrSemi",f:Vue},2:{n:"PtgAttrIf",f:Que},4:{n:"PtgAttrChoose",f:Oue},8:{n:"PtgAttrGoto",f:jue},16:{n:"PtgAttrSum",f:Jue},32:{n:"PtgAttrBaxcel",f:ZD},33:{n:"PtgAttrBaxcel",f:ZD},64:{n:"PtgAttrSpace",f:zue},65:{n:"PtgAttrSpaceSemi",f:Gue},128:{n:"PtgAttrIfError",f:Hue},255:{}};function Xv(t,e,n,r){if(r.biff<8)return so(t,e);for(var s=t.l+e,a=[],i=0;i!==n.length;++i)switch(n[i][0]){case"PtgArray":n[i][1]=oAe(t,0,r),a.push(n[i][1]);break;case"PtgMemArea":n[i][2]=iAe(t,n[i][1],r),a.push(n[i][2]);break;case"PtgExp":r&&r.biff==12&&(n[i][1][1]=t.read_shift(4),a.push(n[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[i][0]}return e=s-t.l,e!==0&&a.push(so(t,e)),a}function Jv(t,e,n){for(var r=t.l+e,s,a,i=[];r!=t.l;)e=r-t.l,a=t[t.l],s=eR[a]||eR[LAe[a]],(a===24||a===25)&&(s=(a===24?UAe:MAe)[t[t.l+1]]),!s||!s.f?so(t,e):i.push([s.n,s.f(t,e,n)]);return i}function PAe(t){for(var e=[],n=0;n<t.length;++n){for(var r=t[n],s=[],a=0;a<r.length;++a){var i=r[a];if(i)switch(i[0]){case 2:s.push('"'+i[1].replace(/"/g,'""')+'"');break;default:s.push(i[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var OAe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function jAe(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function GQ(t,e,n){if(!t)return"SH33TJSERR0";if(n.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var r=t.XTI[e];if(n.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!r)return"SH33TJSERR1";var s="";if(n.biff>8)switch(t[r[0]][0]){case 357:return s=r[1]==-1?"#REF":t.SheetNames[r[1]],r[1]==r[2]?s:s+":"+t.SheetNames[r[2]];case 358:return n.SID!=null?t.SheetNames[n.SID]:"SH33TJSSAME"+t[r[0]][0];case 355:default:return"SH33TJSSRC"+t[r[0]][0]}switch(t[r[0]][0][0]){case 1025:return s=r[1]==-1?"#REF":t.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?s:s+":"+t.SheetNames[r[2]];case 14849:return t[r[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return t[r[0]][0][3]?(s=r[1]==-1?"#REF":t[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?s:s+":"+t[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function tR(t,e,n){var r=GQ(t,e,n);return r=="#REF"?r:jAe(r,n)}function $i(t,e,n,r,s){var a=s&&s.biff||8,i={s:{c:0,r:0}},o=[],l,u,d,h=0,m=0,p,y="";if(!t[0]||!t[0][0])return"";for(var x=-1,C="",S=0,k=t[0].length;S<k;++S){var I=t[0][S];switch(I[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),x>=0){switch(t[0][x][1][0]){case 0:C=Ys(" ",t[0][x][1][1]);break;case 1:C=Ys("\r",t[0][x][1][1]);break;default:if(C="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][x][1][0])}u=u+C,x=-1}o.push(u+OAe[I[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Ex(I[1][1],i,s),o.push(_x(d,a));break;case"PtgRefN":d=n?Ex(I[1][1],n,s):I[1][1],o.push(_x(d,a));break;case"PtgRef3d":h=I[1][1],d=Ex(I[1][2],i,s),y=tR(r,h,s),o.push(y+"!"+_x(d,a));break;case"PtgFunc":case"PtgFuncVar":var F=I[1][0],U=I[1][1];F||(F=0),F&=127;var R=F==0?[]:o.slice(-F);o.length-=F,U==="User"&&(U=R.shift()),o.push(U+"("+R.join(",")+")");break;case"PtgBool":o.push(I[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(I[1]);break;case"PtgNum":o.push(String(I[1]));break;case"PtgStr":o.push('"'+I[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(I[1]);break;case"PtgAreaN":p=kD(I[1][1],n?{s:n}:i,s),o.push(q_(p,s));break;case"PtgArea":p=kD(I[1][1],i,s),o.push(q_(p,s));break;case"PtgArea3d":h=I[1][1],p=I[1][2],y=tR(r,h,s),o.push(y+"!"+q_(p,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=I[1][2];var E=(r.names||[])[m-1]||(r[0]||[])[m],_=E?E.Name:"SH33TJSNAME"+String(m);_&&_.slice(0,6)=="_xlfn."&&!s.xlfn&&(_=_.slice(6)),o.push(_);break;case"PtgNameX":var B=I[1][1];m=I[1][2];var j;if(s.biff<=5)B<0&&(B=-B),r[B]&&(j=r[B][m]);else{var D="";if(((r[B]||[])[0]||[])[0]==14849||(((r[B]||[])[0]||[])[0]==1025?r[B][m]&&r[B][m].itab>0&&(D=r.SheetNames[r[B][m].itab-1]+"!"):D=r.SheetNames[m-1]+"!"),r[B]&&r[B][m])D+=r[B][m].Name;else if(r[0]&&r[0][m])D+=r[0][m].Name;else{var L=(GQ(r,B,s)||"").split(";;");L[m-1]?D=L[m-1]:D+="SH33TJSERRX"}o.push(D);break}j||(j={Name:"SH33TJSERRY"}),o.push(j.Name);break;case"PtgParen":var Q="(",H=")";if(x>=0){switch(C="",t[0][x][1][0]){case 2:Q=Ys(" ",t[0][x][1][1])+Q;break;case 3:Q=Ys("\r",t[0][x][1][1])+Q;break;case 4:H=Ys(" ",t[0][x][1][1])+H;break;case 5:H=Ys("\r",t[0][x][1][1])+H;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][x][1][0])}x=-1}o.push(Q+o.pop()+H);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:I[1][1],r:I[1][0]};var te={c:n.c,r:n.r};if(r.sharedf[Dn(d)]){var Y=r.sharedf[Dn(d)];o.push($i(Y,i,te,r,s))}else{var ne=!1;for(l=0;l!=r.arrayf.length;++l)if(u=r.arrayf[l],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push($i(u[1],i,te,r,s)),ne=!0;break}ne||o.push(I[1])}break;case"PtgArray":o.push("{"+PAe(I[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=S;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+I[1].idx+"[#"+I[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(I));default:throw new Error("Unrecognized Formula Token: "+String(I))}var V=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&x>=0&&V.indexOf(t[0][S][0])==-1){I=t[0][x];var J=!0;switch(I[1][0]){case 4:J=!1;case 0:C=Ys(" ",I[1][1]);break;case 5:J=!1;case 1:C=Ys("\r",I[1][1]);break;default:if(C="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+I[1][0])}o.push((J?C:"")+o.pop()+(J?"":C)),x=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function QAe(t,e,n){var r=t.l+e,s=n.biff==2?1:2,a,i=t.read_shift(s);if(i==65535)return[[],so(t,e-2)];var o=Jv(t,i,n);return e!==i+s&&(a=Xv(t,e-i-s,o,n)),t.l=r,[o,a]}function HAe(t,e,n){var r=t.l+e,s=n.biff==2?1:2,a,i=t.read_shift(s);if(i==65535)return[[],so(t,e-2)];var o=Jv(t,i,n);return e!==i+s&&(a=Xv(t,e-i-s,o,n)),t.l=r,[o,a]}function VAe(t,e,n,r){var s=t.l+e,a=Jv(t,r,n),i;return s!==t.l&&(i=Xv(t,s-t.l,a,n)),[a,i]}function zAe(t,e,n){var r=t.l+e,s,a=t.read_shift(2),i=Jv(t,a,n);return a==65535?[[],so(t,e-2)]:(e!==a+2&&(s=Xv(t,r-a-2,i,n)),[i,s])}function GAe(t){var e;if(VA(t,t.l+6)!==65535)return[eo(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function qAe(t){if(t==null){var e=ht(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return s0(t);return s0(0)}function X_(t,e,n){var r=t.l+e,s=rA(t);n.biff==2&&++t.l;var a=GAe(t),i=t.read_shift(1);n.biff!=2&&(t.read_shift(1),n.biff>=5&&t.read_shift(4));var o=HAe(t,r-t.l,n);return{cell:s,val:a[0],formula:o,shared:i>>3&1,tt:a[1]}}function KAe(t,e,n,r,s){var a=i0(e,n,s),i=qAe(t.v),o=ht(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=ht(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var h=oi([a,i,o,u]);return h}function mC(t,e,n){var r=t.read_shift(4),s=Jv(t,r,n),a=t.read_shift(4),i=a>0?Xv(t,a,s,n):null;return[s,i]}var $Ae=mC,pC=mC,WAe=mC,YAe=mC,XAe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},qQ={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},JAe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function nR(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,n){return n.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function ZAe(t){var e="of:="+t.replace(sB,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function J_(t){var e=t.split(":"),n=e[0].split(".")[0];return[n,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function ede(t){return t.replace(/\./,"!")}var Tx={},Xm={},Nx=typeof Map<"u";function oB(t,e,n){var r=0,s=t.length;if(n){if(Nx?n.has(e):Object.prototype.hasOwnProperty.call(n,e)){for(var a=Nx?n.get(e):n[e];r<a.length;++r)if(t[a[r]].t===e)return t.Count++,a[r]}}else for(;r<s;++r)if(t[r].t===e)return t.Count++,r;return t[s]={t:e},t.Count++,t.Unique++,n&&(Nx?(n.has(e)||n.set(e,[]),n.get(e).push(s)):(Object.prototype.hasOwnProperty.call(n,e)||(n[e]=[]),n[e].push(s))),s}function gC(t,e){var n={min:t+1,max:t+1},r=-1;return e.MDW&&(Xi=e.MDW),e.width!=null?n.customWidth=1:e.wpx!=null?r=ov(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(n.width=Gw(r),n.customWidth=1):e.width!=null&&(n.width=e.width),e.hidden&&(n.hidden=!0),e.level!=null&&(n.outlineLevel=n.level=e.level),n}function Vh(t,e){if(t){var n=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(n=[1,1,1,1,.5,.5]),t.left==null&&(t.left=n[0]),t.right==null&&(t.right=n[1]),t.top==null&&(t.top=n[2]),t.bottom==null&&(t.bottom=n[3]),t.header==null&&(t.header=n[4]),t.footer==null&&(t.footer=n[5])}}function Xf(t,e,n){var r=n.revssf[e.z!=null?e.z:"General"],s=60,a=t.length;if(r==null&&n.ssf){for(;s<392;++s)if(n.ssf[s]==null){KA(e.z,s),n.ssf[s]=e.z,n.revssf[e.z]=r=s;break}}for(s=0;s!=a;++s)if(t[s].numFmtId===r)return s;return t[a]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function KQ(t,e,n,r,s,a){try{r.cellNF&&(t.z=kn[e])}catch(o){if(r.WTF)throw o}if(!(t.t==="z"&&!r.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=ws(t.v)),(!r||r.cellText!==!1)&&t.t!=="z")try{if(kn[e]==null&&KA(Xse[e]||"General",e),t.t==="e")t.w=t.w||ud[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=ev(t.v);else if(t.t==="d"){var i=qa(t.v);(i|0)===i?t.w=i.toString(10):t.w=ev(i)}else{if(t.v===void 0)return"";t.w=n0(t.v,Xm)}else t.t==="d"?t.w=uc(e,qa(t.v),Xm):t.w=uc(e,t.v,Xm)}catch(o){if(r.WTF)throw o}if(r.cellStyles&&n!=null)try{t.s=a.Fills[n],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=zw(s.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),r.WTF&&(t.s.fgColor.raw_rgb=s.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=zw(s.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),r.WTF&&(t.s.bgColor.raw_rgb=s.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(r.WTF&&a.Fills)throw o}}}function tde(t,e,n){if(t&&t["!ref"]){var r=Br(t["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+t["!ref"])}}function nde(t,e){var n=Br(e);n.s.r<=n.e.r&&n.s.c<=n.e.c&&n.s.r>=0&&n.s.c>=0&&(t["!ref"]=Gn(n))}var rde=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,sde=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,ade=/<(?:\w:)?hyperlink [^>]*>/mg,ide=/"(\w*:\w*)"/,ode=/<(?:\w:)?col\b[^>]*[\/]?>/g,lde=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,cde=/<(?:\w:)?pageMargins[^>]*\/>/g,$Q=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,ude=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Ade=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function dde(t,e,n,r,s,a,i){if(!t)return t;r||(r={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",h=t.match(sde);h?(u=t.slice(0,h.index),d=t.slice(h.index+h[0].length)):u=d=t;var m=u.match($Q);m?lB(m[0],o,s,n):(m=u.match(ude))&&hde(m[0],m[1]||"",o,s,n);var p=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var y=u.slice(p,p+50).match(ide);y&&nde(o,y[1])}var x=u.match(Ade);x&&x[1]&&Tde(x[1],s);var C=[];if(e.cellStyles){var S=u.match(ode);S&&bde(C,S)}h&&kde(h[1],o,e,l,a,i);var k=d.match(lde);k&&(o["!autofilter"]=Ede(k[0]));var I=[],F=d.match(rde);if(F)for(p=0;p!=F.length;++p)I[p]=Br(F[p].slice(F[p].indexOf('"')+1));var U=d.match(ade);U&&vde(o,U,r);var R=d.match(cde);if(R&&(o["!margins"]=yde(Mn(R[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=Gn(l)),e.sheetRows>0&&o["!ref"]){var E=Br(o["!ref"]);e.sheetRows<=+E.e.r&&(E.e.r=e.sheetRows-1,E.e.r>l.e.r&&(E.e.r=l.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>l.e.c&&(E.e.c=l.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Gn(E))}return C.length>0&&(o["!cols"]=C),I.length>0&&(o["!merges"]=I),o}function fde(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',n=0;n!=t.length;++n)e+='<mergeCell ref="'+Gn(t[n])+'"/>';return e+"</mergeCells>"}function lB(t,e,n,r){var s=Mn(t);n.Sheets[r]||(n.Sheets[r]={}),s.codeName&&(n.Sheets[r].CodeName=Nr(us(s.codeName)))}function hde(t,e,n,r,s){lB(t.slice(0,t.indexOf(">")),n,r,s)}function mde(t,e,n,r,s){var a=!1,i={},o=null;if(r.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[n];try{e.Workbook&&(l=e.Workbook.Sheets[n].CodeName||l)}catch{}a=!0,i.codeName=Qu(ts(l))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),o=(o||"")+Ot("outlinePr",null,u)}!a&&!o||(s[s.length]=Ot("sheetPr",o,i))}var pde=["objects","scenarios","selectLockedCells","selectUnlockedCells"],gde=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function xde(t){var e={sheet:1};return pde.forEach(function(n){t[n]!=null&&t[n]&&(e[n]="1")}),gde.forEach(function(n){t[n]!=null&&!t[n]&&(e[n]="0")}),t.password&&(e.password=tB(t.password).toString(16).toUpperCase()),Ot("sheetProtection",null,e)}function vde(t,e,n){for(var r=Array.isArray(t),s=0;s!=e.length;++s){var a=Mn(us(e[s]),!0);if(!a.ref)return;var i=((n||{})["!id"]||[])[a.id];i?(a.Target=i.Target,a.location&&(a.Target+="#"+Nr(a.location))):(a.Target="#"+Nr(a.location),i={Target:a.Target,TargetMode:"Internal"}),a.Rel=i,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=Br(a.ref),l=o.s.r;l<=o.e.r;++l)for(var u=o.s.c;u<=o.e.c;++u){var d=Dn({c:u,r:l});r?(t[l]||(t[l]=[]),t[l][u]||(t[l][u]={t:"z",v:void 0}),t[l][u].l=a):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=a)}}}function yde(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(n){t[n]&&(e[n]=parseFloat(t[n]))}),e}function wde(t){return Vh(t),Ot("pageMargins",null,t)}function bde(t,e){for(var n=!1,r=0;r!=e.length;++r){var s=Mn(e[r],!0);s.hidden&&(s.hidden=vs(s.hidden));var a=parseInt(s.min,10)-1,i=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!n&&s.width&&(n=!0,nB(s.width)),Hf(s);a<=i;)t[a++]=bs(s)}}function Cde(t,e){for(var n=["<cols>"],r,s=0;s!=e.length;++s)(r=e[s])&&(n[n.length]=Ot("col",null,gC(s,r)));return n[n.length]="</cols>",n.join("")}function Ede(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function _de(t,e,n,r){var s=typeof t.ref=="string"?t.ref:Gn(t.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var a=n.Workbook.Names,i=zo(s);i.s.r==i.e.r&&(i.e.r=zo(e["!ref"]).e.r,s=Gn(i));for(var o=0;o<a.length;++o){var l=a[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+s;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+s}),Ot("autoFilter",null,{ref:s})}var Sde=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Tde(t,e){e.Views||(e.Views=[{}]),(t.match(Sde)||[]).forEach(function(n,r){var s=Mn(n);e.Views[r]||(e.Views[r]={}),+s.zoomScale&&(e.Views[r].zoom=+s.zoomScale),vs(s.rightToLeft)&&(e.Views[r].RTL=!0)})}function Nde(t,e,n,r){var s={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),Ot("sheetViews",Ot("sheetView",null,s),{})}function Bde(t,e,n,r){if(t.c&&n["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var s="",a=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":s=t.v?"1":"0";break;case"n":s=""+t.v;break;case"e":s=ud[t.v];break;case"d":r&&r.cellDates?s=ws(t.v,-1).toISOString():(t=bs(t),t.t="n",s=""+(t.v=qa(ws(t.v)))),typeof t.z>"u"&&(t.z=kn[14]);break;default:s=t.v;break}var o=Ei("v",ts(s)),l={r:e},u=Xf(r.cellXfs,t,r);switch(u!==0&&(l.s=u),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=Ei("v",""+oB(r.Strings,t.v,r.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=a&&(t.t=a,t.v=i),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=Ot("f",ts(t.f),d)+(t.v!=null?o:"")}return t.l&&n["!links"].push([e,t.l]),t.D&&(l.cm=1),Ot("c",o,l)}var kde=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,n=/r=["']([^"']*)["']/,r=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,a=tv("v"),i=tv("f");return function(l,u,d,h,m,p){for(var y=0,x="",C=[],S=[],k=0,I=0,F=0,U="",R,E,_=0,B=0,j,D,L=0,Q=0,H=Array.isArray(p.CellXf),te,Y=[],ne=[],V=Array.isArray(u),J=[],K={},ie=!1,O=!!d.sheetStubs,W=l.split(e),Z=0,re=W.length;Z!=re;++Z){x=W[Z].trim();var se=x.length;if(se!==0){var de=0;e:for(y=0;y<se;++y)switch(x[y]){case">":if(x[y-1]!="/"){++y;break e}if(d&&d.cellStyles){if(E=Mn(x.slice(de,y),!0),_=E.r!=null?parseInt(E.r,10):_+1,B=-1,d.sheetRows&&d.sheetRows<_)continue;K={},ie=!1,E.ht&&(ie=!0,K.hpt=parseFloat(E.ht),K.hpx=gp(K.hpt)),E.hidden=="1"&&(ie=!0,K.hidden=!0),E.outlineLevel!=null&&(ie=!0,K.level=+E.outlineLevel),ie&&(J[_-1]=K)}break;case"<":de=y;break}if(de>=y)break;if(E=Mn(x.slice(de,y),!0),_=E.r!=null?parseInt(E.r,10):_+1,B=-1,!(d.sheetRows&&d.sheetRows<_)){h.s.r>_-1&&(h.s.r=_-1),h.e.r<_-1&&(h.e.r=_-1),d&&d.cellStyles&&(K={},ie=!1,E.ht&&(ie=!0,K.hpt=parseFloat(E.ht),K.hpx=gp(K.hpt)),E.hidden=="1"&&(ie=!0,K.hidden=!0),E.outlineLevel!=null&&(ie=!0,K.level=+E.outlineLevel),ie&&(J[_-1]=K)),C=x.slice(y).split(t);for(var pe=0;pe!=C.length&&C[pe].trim().charAt(0)=="<";++pe);for(C=C.slice(pe),y=0;y!=C.length;++y)if(x=C[y].trim(),x.length!==0){if(S=x.match(n),k=y,I=0,F=0,x="<c "+(x.slice(0,1)=="<"?">":"")+x,S!=null&&S.length===2){for(k=0,U=S[1],I=0;I!=U.length&&!((F=U.charCodeAt(I)-64)<1||F>26);++I)k=26*k+F;--k,B=k}else++B;for(I=0;I!=x.length&&x.charCodeAt(I)!==62;++I);if(++I,E=Mn(x.slice(0,I),!0),E.r||(E.r=Dn({r:_-1,c:B})),U=x.slice(I),R={t:""},(S=U.match(a))!=null&&S[1]!==""&&(R.v=Nr(S[1])),d.cellFormula){if((S=U.match(i))!=null&&S[1]!==""){if(R.f=Nr(us(S[1])).replace(/\r\n/g,`
`),d.xlfn||(R.f=JD(R.f)),S[0].indexOf('t="array"')>-1)R.F=(U.match(s)||[])[1],R.F.indexOf(":")>-1&&Y.push([Br(R.F),R.F]);else if(S[0].indexOf('t="shared"')>-1){D=Mn(S[0]);var be=Nr(us(S[1]));d.xlfn||(be=JD(be)),ne[parseInt(D.si,10)]=[D,be,E.r]}}else(S=U.match(/<f[^>]*\/>/))&&(D=Mn(S[0]),ne[D.si]&&(R.f=Sue(ne[D.si][1],ne[D.si][2],E.r)));var Se=Ms(E.r);for(I=0;I<Y.length;++I)Se.r>=Y[I][0].s.r&&Se.r<=Y[I][0].e.r&&Se.c>=Y[I][0].s.c&&Se.c<=Y[I][0].e.c&&(R.F=Y[I][1])}if(E.t==null&&R.v===void 0)if(R.f||R.F)R.v=0,R.t="n";else if(O)R.t="z";else continue;else R.t=E.t||"n";switch(h.s.c>B&&(h.s.c=B),h.e.c<B&&(h.e.c=B),R.t){case"n":if(R.v==""||R.v==null){if(!O)continue;R.t="z"}else R.v=parseFloat(R.v);break;case"s":if(typeof R.v>"u"){if(!O)continue;R.t="z"}else j=Tx[parseInt(R.v,10)],R.v=j.t,R.r=j.r,d.cellHTML&&(R.h=j.h);break;case"str":R.t="s",R.v=R.v!=null?us(R.v):"",d.cellHTML&&(R.h=j4(R.v));break;case"inlineStr":S=U.match(r),R.t="s",S!=null&&(j=eB(S[1]))?(R.v=j.t,d.cellHTML&&(R.h=j.h)):R.v="";break;case"b":R.v=vs(R.v);break;case"d":d.cellDates?R.v=ws(R.v,1):(R.v=qa(ws(R.v,1)),R.t="n");break;case"e":(!d||d.cellText!==!1)&&(R.w=R.v),R.v=Y7[R.v];break}if(L=Q=0,te=null,H&&E.s!==void 0&&(te=p.CellXf[E.s],te!=null&&(te.numFmtId!=null&&(L=te.numFmtId),d.cellStyles&&te.fillId!=null&&(Q=te.fillId))),KQ(R,L,Q,d,m,p),d.cellDates&&H&&R.t=="n"&&Rp(kn[L])&&(R.t="d",R.v=fC(R.v)),E.cm&&d.xlmeta){var me=(d.xlmeta.Cell||[])[+E.cm-1];me&&me.type=="XLDAPR"&&(R.D=!0)}if(V){var ce=Ms(E.r);u[ce.r]||(u[ce.r]=[]),u[ce.r][ce.c]=R}else u[E.r]=R}}}}J.length>0&&(u["!rows"]=J)}}();function Ide(t,e,n,r){var s=[],a=[],i=Br(t["!ref"]),o="",l,u="",d=[],h=0,m=0,p=t["!rows"],y=Array.isArray(t),x={r:u},C,S=-1;for(m=i.s.c;m<=i.e.c;++m)d[m]=Us(m);for(h=i.s.r;h<=i.e.r;++h){for(a=[],u=pa(h),m=i.s.c;m<=i.e.c;++m){l=d[m]+u;var k=y?(t[h]||[])[m]:t[l];k!==void 0&&(o=Bde(k,l,t,e))!=null&&a.push(o)}(a.length>0||p&&p[h])&&(x={r:u},p&&p[h]&&(C=p[h],C.hidden&&(x.hidden=1),S=-1,C.hpx?S=lv(C.hpx):C.hpt&&(S=C.hpt),S>-1&&(x.ht=S,x.customHeight=1),C.level&&(x.outlineLevel=C.level)),s[s.length]=Ot("row",a.join(""),x))}if(p)for(;h<p.length;++h)p&&p[h]&&(x={r:h+1},C=p[h],C.hidden&&(x.hidden=1),S=-1,C.hpx?S=lv(C.hpx):C.hpt&&(S=C.hpt),S>-1&&(x.ht=S,x.customHeight=1),C.level&&(x.outlineLevel=C.level),s[s.length]=Ot("row","",x));return s.join("")}function WQ(t,e,n,r){var s=[ga,Ot("worksheet",null,{xmlns:p0[0],"xmlns:r":za.r})],a=n.SheetNames[t],i=0,o="",l=n.Sheets[a];l==null&&(l={});var u=l["!ref"]||"A1",d=Br(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=Gn(d)}r||(r={}),l["!comments"]=[];var h=[];mde(l,n,t,e,s),s[s.length]=Ot("dimension",null,{ref:u}),s[s.length]=Nde(l,e,t,n),e.sheetFormat&&(s[s.length]=Ot("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(s[s.length]=Cde(l,l["!cols"])),s[i=s.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=Ide(l,e),o.length>0&&(s[s.length]=o)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),l["!protect"]&&(s[s.length]=xde(l["!protect"])),l["!autofilter"]!=null&&(s[s.length]=_de(l["!autofilter"],l,n,t)),l["!merges"]!=null&&l["!merges"].length>0&&(s[s.length]=fde(l["!merges"]));var m=-1,p,y=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(x){x[1].Target&&(p={ref:x[0]},x[1].Target.charAt(0)!="#"&&(y=Zr(r,-1,ts(x[1].Target).replace(/#.*$/,""),cr.HLINK),p["r:id"]="rId"+y),(m=x[1].Target.indexOf("#"))>-1&&(p.location=ts(x[1].Target.slice(m+1))),x[1].Tooltip&&(p.tooltip=ts(x[1].Tooltip)),s[s.length]=Ot("hyperlink",null,p))}),s[s.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(s[s.length]=wde(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(s[s.length]=Ei("ignoredErrors",Ot("ignoredError",null,{numberStoredAsText:1,sqref:u}))),h.length>0&&(y=Zr(r,-1,"../drawings/drawing"+(t+1)+".xml",cr.DRAW),s[s.length]=Ot("drawing",null,{"r:id":"rId"+y}),l["!drawing"]=h),l["!comments"].length>0&&(y=Zr(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",cr.VML),s[s.length]=Ot("legacyDrawing",null,{"r:id":"rId"+y}),l["!legacy"]=y),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function Fde(t,e){var n={},r=t.l+e;n.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var a=t.read_shift(1);return t.l=r,a&7&&(n.level=a&7),a&16&&(n.hidden=!0),a&32&&(n.hpt=s/20),n}function Dde(t,e,n){var r=ht(145),s=(n["!rows"]||[])[t]||{};r.write_shift(4,t),r.write_shift(4,0);var a=320;s.hpx?a=lv(s.hpx)*20:s.hpt&&(a=s.hpt*20),r.write_shift(2,a),r.write_shift(1,0);var i=0;s.level&&(i|=s.level),s.hidden&&(i|=16),(s.hpx||s.hpt)&&(i|=32),r.write_shift(1,i),r.write_shift(1,0);var o=0,l=r.l;r.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var h=-1,m=-1,p=d<<10;p<d+1<<10;++p){u.c=p;var y=Array.isArray(n)?(n[u.r]||[])[u.c]:n[Dn(u)];y&&(h<0&&(h=p),m=p)}h<0||(++o,r.write_shift(4,h),r.write_shift(4,m))}var x=r.l;return r.l=l,r.write_shift(4,o),r.l=x,r.length>r.l?r.slice(0,r.l):r}function Rde(t,e,n,r){var s=Dde(r,n,e);(s.length>17||(e["!rows"]||[])[r])&&Nt(t,0,s)}var Lde=y0,Ude=Mp;function Mde(){}function Pde(t,e){var n={},r=t[t.l];return++t.l,n.above=!(r&64),n.left=!(r&128),t.l+=18,n.name=Qae(t),n}function Ode(t,e,n){n==null&&(n=ht(84+4*t.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),n.write_shift(1,r);for(var s=1;s<3;++s)n.write_shift(1,0);return Qw({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),G7(t,n),n.slice(0,n.l)}function jde(t){var e=Ac(t);return[e]}function Qde(t,e,n){return n==null&&(n=ht(8)),g0(e,n)}function Hde(t){var e=x0(t);return[e]}function Vde(t,e,n){return n==null&&(n=ht(4)),v0(e,n)}function zde(t){var e=Ac(t),n=t.read_shift(1);return[e,n,"b"]}function Gde(t,e,n){return n==null&&(n=ht(9)),g0(e,n),n.write_shift(1,t.v?1:0),n}function qde(t){var e=x0(t),n=t.read_shift(1);return[e,n,"b"]}function Kde(t,e,n){return n==null&&(n=ht(5)),v0(e,n),n.write_shift(1,t.v?1:0),n}function $de(t){var e=Ac(t),n=t.read_shift(1);return[e,n,"e"]}function Wde(t,e,n){return n==null&&(n=ht(9)),g0(e,n),n.write_shift(1,t.v),n}function Yde(t){var e=x0(t),n=t.read_shift(1);return[e,n,"e"]}function Xde(t,e,n){return n==null&&(n=ht(8)),v0(e,n),n.write_shift(1,t.v),n.write_shift(2,0),n.write_shift(1,0),n}function Jde(t){var e=Ac(t),n=t.read_shift(4);return[e,n,"s"]}function Zde(t,e,n){return n==null&&(n=ht(12)),g0(e,n),n.write_shift(4,e.v),n}function efe(t){var e=x0(t),n=t.read_shift(4);return[e,n,"s"]}function tfe(t,e,n){return n==null&&(n=ht(8)),v0(e,n),n.write_shift(4,e.v),n}function nfe(t){var e=Ac(t),n=eo(t);return[e,n,"n"]}function rfe(t,e,n){return n==null&&(n=ht(16)),g0(e,n),s0(t.v,n),n}function YQ(t){var e=x0(t),n=eo(t);return[e,n,"n"]}function sfe(t,e,n){return n==null&&(n=ht(12)),v0(e,n),s0(t.v,n),n}function afe(t){var e=Ac(t),n=W4(t);return[e,n,"n"]}function ife(t,e,n){return n==null&&(n=ht(12)),g0(e,n),q7(t.v,n),n}function ofe(t){var e=x0(t),n=W4(t);return[e,n,"n"]}function lfe(t,e,n){return n==null&&(n=ht(8)),v0(e,n),q7(t.v,n),n}function cfe(t){var e=Ac(t),n=q4(t);return[e,n,"is"]}function ufe(t){var e=Ac(t),n=no(t);return[e,n,"str"]}function Afe(t,e,n){return n==null&&(n=ht(12+4*t.v.length)),g0(e,n),li(t.v,n),n.length>n.l?n.slice(0,n.l):n}function dfe(t){var e=x0(t),n=no(t);return[e,n,"str"]}function ffe(t,e,n){return n==null&&(n=ht(8+4*t.v.length)),v0(e,n),li(t.v,n),n.length>n.l?n.slice(0,n.l):n}function hfe(t,e,n){var r=t.l+e,s=Ac(t);s.r=n["!row"];var a=t.read_shift(1),i=[s,a,"b"];if(n.cellFormula){t.l+=2;var o=pC(t,r-t.l,n);i[3]=$i(o,null,s,n.supbooks,n)}else t.l=r;return i}function mfe(t,e,n){var r=t.l+e,s=Ac(t);s.r=n["!row"];var a=t.read_shift(1),i=[s,a,"e"];if(n.cellFormula){t.l+=2;var o=pC(t,r-t.l,n);i[3]=$i(o,null,s,n.supbooks,n)}else t.l=r;return i}function pfe(t,e,n){var r=t.l+e,s=Ac(t);s.r=n["!row"];var a=eo(t),i=[s,a,"n"];if(n.cellFormula){t.l+=2;var o=pC(t,r-t.l,n);i[3]=$i(o,null,s,n.supbooks,n)}else t.l=r;return i}function gfe(t,e,n){var r=t.l+e,s=Ac(t);s.r=n["!row"];var a=no(t),i=[s,a,"str"];if(n.cellFormula){t.l+=2;var o=pC(t,r-t.l,n);i[3]=$i(o,null,s,n.supbooks,n)}else t.l=r;return i}var xfe=y0,vfe=Mp;function yfe(t,e){return e==null&&(e=ht(4)),e.write_shift(4,t),e}function wfe(t,e){var n=t.l+e,r=y0(t),s=K4(t),a=no(t),i=no(t),o=no(t);t.l=n;var l={rfx:r,relId:s,loc:a,display:o};return i&&(l.Tooltip=i),l}function bfe(t,e){var n=ht(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));Mp({s:Ms(t[0]),e:Ms(t[0])},n),$4("rId"+e,n);var r=t[1].Target.indexOf("#"),s=r==-1?"":t[1].Target.slice(r+1);return li(s||"",n),li(t[1].Tooltip||"",n),li("",n),n.slice(0,n.l)}function Cfe(){}function Efe(t,e,n){var r=t.l+e,s=K7(t),a=t.read_shift(1),i=[s];if(i[2]=a,n.cellFormula){var o=$Ae(t,r-t.l,n);i[1]=o}else t.l=r;return i}function _fe(t,e,n){var r=t.l+e,s=y0(t),a=[s];if(n.cellFormula){var i=YAe(t,r-t.l,n);a[1]=i,t.l=r}else t.l=r;return a}function Sfe(t,e,n){n==null&&(n=ht(18));var r=gC(t,e);n.write_shift(-4,t),n.write_shift(-4,t),n.write_shift(4,(r.width||10)*256),n.write_shift(4,0);var s=0;return e.hidden&&(s|=1),typeof r.width=="number"&&(s|=2),e.level&&(s|=e.level<<8),n.write_shift(2,s),n}var XQ=["left","right","top","bottom","header","footer"];function Tfe(t){var e={};return XQ.forEach(function(n){e[n]=eo(t)}),e}function Nfe(t,e){return e==null&&(e=ht(48)),Vh(t),XQ.forEach(function(n){s0(t[n],e)}),e}function Bfe(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function kfe(t,e,n){n==null&&(n=ht(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}function Ife(t){var e=ht(24);return e.write_shift(4,4),e.write_shift(4,1),Mp(t,e),e}function Ffe(t,e){return e==null&&(e=ht(66)),e.write_shift(2,t.password?tB(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(n){n[1]?e.write_shift(4,t[n[0]]!=null&&!t[n[0]]?1:0):e.write_shift(4,t[n[0]]!=null&&t[n[0]]?0:1)}),e}function Dfe(){}function Rfe(){}function Lfe(t,e,n,r,s,a,i){if(!t)return t;var o=e||{};r||(r={"!id":{}});var l=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},h=!1,m=!1,p,y,x,C,S,k,I,F,U,R=[];o.biff=12,o["!row"]=0;var E=0,_=!1,B=[],j={},D=o.supbooks||s.supbooks||[[]];if(D.sharedf=j,D.arrayf=B,D.SheetNames=s.SheetNames||s.Sheets.map(function(V){return V.name}),!o.supbooks&&(o.supbooks=D,s.Names))for(var L=0;L<s.Names.length;++L)D[0][L+1]=s.Names[L];var Q=[],H=[],te=!1;cv[16]={n:"BrtShortReal",f:YQ};var Y;if(cd(t,function(J,K,ie){if(!m)switch(ie){case 148:u=J;break;case 0:p=J,o.sheetRows&&o.sheetRows<=p.r&&(m=!0),F=pa(C=p.r),o["!row"]=p.r,(J.hidden||J.hpt||J.level!=null)&&(J.hpt&&(J.hpx=gp(J.hpt)),H[J.r]=J);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(y={t:J[2]},J[2]){case"n":y.v=J[1];break;case"s":I=Tx[J[1]],y.v=I.t,y.r=I.r;break;case"b":y.v=!!J[1];break;case"e":y.v=J[1],o.cellText!==!1&&(y.w=ud[y.v]);break;case"str":y.t="s",y.v=J[1];break;case"is":y.t="s",y.v=J[1].t;break}if((x=i.CellXf[J[0].iStyleRef])&&KQ(y,x.numFmtId,null,o,a,i),S=J[0].c==-1?S+1:J[0].c,o.dense?(l[C]||(l[C]=[]),l[C][S]=y):l[Us(S)+F]=y,o.cellFormula){for(_=!1,E=0;E<B.length;++E){var O=B[E];p.r>=O[0].s.r&&p.r<=O[0].e.r&&S>=O[0].s.c&&S<=O[0].e.c&&(y.F=Gn(O[0]),_=!0)}!_&&J.length>3&&(y.f=J[3])}if(d.s.r>p.r&&(d.s.r=p.r),d.s.c>S&&(d.s.c=S),d.e.r<p.r&&(d.e.r=p.r),d.e.c<S&&(d.e.c=S),o.cellDates&&x&&y.t=="n"&&Rp(kn[x.numFmtId])){var W=Fh(y.v);W&&(y.t="d",y.v=new Date(W.y,W.m-1,W.d,W.H,W.M,W.S,W.u))}Y&&(Y.type=="XLDAPR"&&(y.D=!0),Y=void 0);break;case 1:case 12:if(!o.sheetStubs||h)break;y={t:"z",v:void 0},S=J[0].c==-1?S+1:J[0].c,o.dense?(l[C]||(l[C]=[]),l[C][S]=y):l[Us(S)+F]=y,d.s.r>p.r&&(d.s.r=p.r),d.s.c>S&&(d.s.c=S),d.e.r<p.r&&(d.e.r=p.r),d.e.c<S&&(d.e.c=S),Y&&(Y.type=="XLDAPR"&&(y.D=!0),Y=void 0);break;case 176:R.push(J);break;case 49:Y=((o.xlmeta||{}).Cell||[])[J-1];break;case 494:var Z=r["!id"][J.relId];for(Z?(J.Target=Z.Target,J.loc&&(J.Target+="#"+J.loc),J.Rel=Z):J.relId==""&&(J.Target="#"+J.loc),C=J.rfx.s.r;C<=J.rfx.e.r;++C)for(S=J.rfx.s.c;S<=J.rfx.e.c;++S)o.dense?(l[C]||(l[C]=[]),l[C][S]||(l[C][S]={t:"z",v:void 0}),l[C][S].l=J):(k=Dn({c:S,r:C}),l[k]||(l[k]={t:"z",v:void 0}),l[k].l=J);break;case 426:if(!o.cellFormula)break;B.push(J),U=o.dense?l[C][S]:l[Us(S)+F],U.f=$i(J[1],d,{r:p.r,c:S},D,o),U.F=Gn(J[0]);break;case 427:if(!o.cellFormula)break;j[Dn(J[0].s)]=J[1],U=o.dense?l[C][S]:l[Us(S)+F],U.f=$i(J[1],d,{r:p.r,c:S},D,o);break;case 60:if(!o.cellStyles)break;for(;J.e>=J.s;)Q[J.e--]={width:J.w/256,hidden:!!(J.flags&1),level:J.level},te||(te=!0,nB(J.w/256)),Hf(Q[J.e+1]);break;case 161:l["!autofilter"]={ref:Gn(J)};break;case 476:l["!margins"]=J;break;case 147:s.Sheets[n]||(s.Sheets[n]={}),J.name&&(s.Sheets[n].CodeName=J.name),(J.above||J.left)&&(l["!outline"]={above:J.above,left:J.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),J.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:h=!0;break;case 36:h=!1;break;case 37:h=!0;break;case 38:h=!1;break;default:if(!K.T){if(!h||o.WTF)throw new Error("Unexpected record 0x"+ie.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(l["!ref"]=Gn(u||d)),o.sheetRows&&l["!ref"]){var ne=Br(l["!ref"]);o.sheetRows<=+ne.e.r&&(ne.e.r=o.sheetRows-1,ne.e.r>d.e.r&&(ne.e.r=d.e.r),ne.e.r<ne.s.r&&(ne.s.r=ne.e.r),ne.e.c>d.e.c&&(ne.e.c=d.e.c),ne.e.c<ne.s.c&&(ne.s.c=ne.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Gn(ne))}return R.length>0&&(l["!merges"]=R),Q.length>0&&(l["!cols"]=Q),H.length>0&&(l["!rows"]=H),l}function Ufe(t,e,n,r,s,a,i){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=bs(e),e.z=e.z||kn[14],e.v=qa(ws(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r:n,c:r};switch(l.s=Xf(s.cellXfs,e,s),e.l&&a["!links"].push([Dn(l),e.l]),e.c&&a["!comments"].push([Dn(l),e.c]),e.t){case"s":case"str":return s.bookSST?(o=oB(s.Strings,e.v,s.revStrings),l.t="s",l.v=o,i?Nt(t,18,tfe(e,l)):Nt(t,7,Zde(e,l))):(l.t="str",i?Nt(t,17,ffe(e,l)):Nt(t,6,Afe(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?i?Nt(t,13,lfe(e,l)):Nt(t,2,ife(e,l)):i?Nt(t,16,sfe(e,l)):Nt(t,5,rfe(e,l)),!0;case"b":return l.t="b",i?Nt(t,15,Kde(e,l)):Nt(t,4,Gde(e,l)),!0;case"e":return l.t="e",i?Nt(t,14,Xde(e,l)):Nt(t,3,Wde(e,l)),!0}return i?Nt(t,12,Vde(e,l)):Nt(t,1,Qde(e,l)),!0}function Mfe(t,e,n,r){var s=Br(e["!ref"]||"A1"),a,i="",o=[];Nt(t,145);var l=Array.isArray(e),u=s.e.r;e["!rows"]&&(u=Math.max(s.e.r,e["!rows"].length-1));for(var d=s.s.r;d<=u;++d){i=pa(d),Rde(t,e,s,d);var h=!1;if(d<=s.e.r)for(var m=s.s.c;m<=s.e.c;++m){d===s.s.r&&(o[m]=Us(m)),a=o[m]+i;var p=l?(e[d]||[])[m]:e[a];if(!p){h=!1;continue}h=Ufe(t,p,d,m,r,e,h)}}Nt(t,146)}function Pfe(t,e){!e||!e["!merges"]||(Nt(t,177,yfe(e["!merges"].length)),e["!merges"].forEach(function(n){Nt(t,176,vfe(n))}),Nt(t,178))}function Ofe(t,e){!e||!e["!cols"]||(Nt(t,390),e["!cols"].forEach(function(n,r){n&&Nt(t,60,Sfe(r,n))}),Nt(t,391))}function jfe(t,e){!e||!e["!ref"]||(Nt(t,648),Nt(t,649,Ife(Br(e["!ref"]))),Nt(t,650))}function Qfe(t,e,n){e["!links"].forEach(function(r){if(r[1].Target){var s=Zr(n,-1,r[1].Target.replace(/#.*$/,""),cr.HLINK);Nt(t,494,bfe(r,s))}}),delete e["!links"]}function Hfe(t,e,n,r){if(e["!comments"].length>0){var s=Zr(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",cr.VML);Nt(t,551,$4("rId"+s)),e["!legacy"]=s}}function Vfe(t,e,n,r){if(e["!autofilter"]){var s=e["!autofilter"],a=typeof s.ref=="string"?s.ref:Gn(s.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var i=n.Workbook.Names,o=zo(a);o.s.r==o.e.r&&(o.e.r=zo(e["!ref"]).e.r,a=Gn(o));for(var l=0;l<i.length;++l){var u=i[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==r){u.Ref="'"+n.SheetNames[r]+"'!"+a;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+a}),Nt(t,161,Mp(Br(a))),Nt(t,162)}}function zfe(t,e,n){Nt(t,133),Nt(t,137,kfe(e,n)),Nt(t,138),Nt(t,134)}function Gfe(t,e){e["!protect"]&&Nt(t,535,Ffe(e["!protect"]))}function qfe(t,e,n,r){var s=Ho(),a=n.SheetNames[t],i=n.Sheets[a]||{},o=a;try{n&&n.Workbook&&(o=n.Workbook.Sheets[t].CodeName||o)}catch{}var l=Br(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Nt(s,129),(n.vbaraw||i["!outline"])&&Nt(s,147,Ode(o,i["!outline"])),Nt(s,148,Ude(l)),zfe(s,i,n.Workbook),Ofe(s,i),Mfe(s,i,t,e),Gfe(s,i),Vfe(s,i,n,t),Pfe(s,i),Qfe(s,i,r),i["!margins"]&&Nt(s,476,Nfe(i["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&jfe(s,i),Hfe(s,i,t,r),Nt(s,130),s.end()}function Kfe(t){var e=[],n=t.match(/^<c:numCache>/),r;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var i=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(e[+i[1]]=n?+i[2]:i[2])});var s=Nr((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){r=a.replace(/<.*?>/g,"")}),[e,s,r]}function $fe(t,e,n,r,s,a){var i=a||{"!type":"chart"};if(!t)return a;var o=0,l=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(h){var m=Kfe(h);d.s.r=d.s.c=0,d.e.c=o,u=Us(o),m[0].forEach(function(p,y){i[u+pa(y)]={t:"n",v:p,z:m[1]},l=y}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(i["!ref"]=Gn(d)),i}function Wfe(t,e,n,r,s){if(!t)return t;r||(r={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i,o=t.match($Q);return o&&lB(o[0],a,s,n),(i=t.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=i[1]),r["!id"][a["!rel"]]&&(a["!drawel"]=r["!id"][a["!rel"]]),a}function Yfe(t,e){t.l+=10;var n=no(t);return{name:n}}function Xfe(t,e,n,r,s){if(!t)return t;r||(r={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i=!1;return cd(t,function(l,u,d){switch(d){case 550:a["!rel"]=l;break;case 651:s.Sheets[n]||(s.Sheets[n]={}),l.name&&(s.Sheets[n].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),r["!id"][a["!rel"]]&&(a["!drawel"]=r["!id"][a["!rel"]]),a}var cB=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Jfe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Zfe=[],ehe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function rR(t,e){for(var n=0;n!=t.length;++n)for(var r=t[n],s=0;s!=e.length;++s){var a=e[s];if(r[a[0]]==null)r[a[0]]=a[1];else switch(a[2]){case"bool":typeof r[a[0]]=="string"&&(r[a[0]]=vs(r[a[0]]));break;case"int":typeof r[a[0]]=="string"&&(r[a[0]]=parseInt(r[a[0]],10));break}}}function sR(t,e){for(var n=0;n!=e.length;++n){var r=e[n];if(t[r[0]]==null)t[r[0]]=r[1];else switch(r[2]){case"bool":typeof t[r[0]]=="string"&&(t[r[0]]=vs(t[r[0]]));break;case"int":typeof t[r[0]]=="string"&&(t[r[0]]=parseInt(t[r[0]],10));break}}}function JQ(t){sR(t.WBProps,cB),sR(t.CalcPr,ehe),rR(t.WBView,Jfe),rR(t.Sheets,Zfe),Xm.date1904=vs(t.WBProps.date1904)}function the(t){return!t.Workbook||!t.Workbook.WBProps?"false":vs(t.Workbook.WBProps.date1904)?"true":"false"}var nhe="][*?/\\".split("");function ZQ(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var n=!0;return nhe.forEach(function(r){if(t.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),n}function rhe(t,e,n){t.forEach(function(r,s){ZQ(r);for(var a=0;a<s;++a)if(r==t[a])throw new Error("Duplicate Sheet Name: "+r);if(n){var i=e&&e[s]&&e[s].CodeName||r;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function she(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];rhe(t.SheetNames,e,!!t.vbaraw);for(var n=0;n<t.SheetNames.length;++n)tde(t.Sheets[t.SheetNames[n]],t.SheetNames[n],n)}var ahe=/<\w+:workbook/;function ihe(t,e){if(!t)throw new Error("Could not find file");var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},r=!1,s="xmlns",a={},i=0;if(t.replace(oo,function(l,u){var d=Mn(l);switch(nA(d[0])){case"<?xml":break;case"<workbook":l.match(ahe)&&(s="xmlns"+l.match(/<(\w+):/)[1]),n.xmlns=d[s];break;case"</workbook>":break;case"<fileVersion":delete d[0],n.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":cB.forEach(function(h){if(d[h[0]]!=null)switch(h[2]){case"bool":n.WBProps[h[0]]=vs(d[h[0]]);break;case"int":n.WBProps[h[0]]=parseInt(d[h[0]],10);break;default:n.WBProps[h[0]]=d[h[0]]}}),d.codeName&&(n.WBProps.CodeName=us(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],n.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Nr(us(d.name)),delete d[0],n.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":r=!0;break;case"</definedNames>":r=!1;break;case"<definedName":a={},a.Name=us(d.name),d.comment&&(a.Comment=d.comment),d.localSheetId&&(a.Sheet=+d.localSheetId),vs(d.hidden||"0")&&(a.Hidden=!0),i=u+l.length;break;case"</definedName>":a.Ref=Nr(us(t.slice(i,u))),n.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete d[0],n.CalcPr=d;break;case"<calcPr/>":delete d[0],n.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":r=!0;break;case"</AlternateContent>":r=!1;break;case"<revisionPtr":break;default:if(!r&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),p0.indexOf(n.xmlns)===-1)throw new Error("Unknown Namespace: "+n.xmlns);return JQ(n),n}function eH(t){var e=[ga];e[e.length]=Ot("workbook",null,{xmlns:p0[0],"xmlns:r":za.r});var n=t.Workbook&&(t.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(cB.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(r[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(r.codeName=t.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=Ot("workbookPr",null,r);var s=t.Workbook&&t.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(e[e.length]="<bookViews>",a=0;a!=t.SheetNames.length&&!(!s[a]||!s[a].Hidden);++a);a==t.SheetNames.length&&(a=0),e[e.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",a=0;a!=t.SheetNames.length;++a){var i={name:ts(t.SheetNames[a].slice(0,31))};if(i.sheetId=""+(a+1),i["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}e[e.length]=Ot("sheet",null,i)}return e[e.length]="</sheets>",n&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=Ot("definedName",ts(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function ohe(t,e){var n={};return n.Hidden=t.read_shift(4),n.iTabID=t.read_shift(4),n.strRelID=K5(t),n.name=no(t),n}function lhe(t,e){return e||(e=ht(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),$4(t.strRelID,e),li(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function che(t,e){var n={},r=t.read_shift(4);n.defaultThemeVersion=t.read_shift(4);var s=e>8?no(t):"";return s.length>0&&(n.CodeName=s),n.autoCompressPictures=!!(r&65536),n.backupFile=!!(r&64),n.checkCompatibility=!!(r&4096),n.date1904=!!(r&1),n.filterPrivacy=!!(r&8),n.hidePivotFieldList=!!(r&1024),n.promptedSolutions=!!(r&16),n.publishItems=!!(r&2048),n.refreshAllConnections=!!(r&262144),n.saveExternalLinkValues=!!(r&128),n.showBorderUnselectedTables=!!(r&4),n.showInkAnnotation=!!(r&32),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(r&32768),n.updateLinks=["userSet","never","always"][r>>8&3],n}function uhe(t,e){e||(e=ht(72));var n=0;return t&&t.filterPrivacy&&(n|=8),e.write_shift(4,n),e.write_shift(4,0),G7(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function Ahe(t,e){var n={};return t.read_shift(4),n.ArchID=t.read_shift(4),t.l+=e-8,n}function dhe(t,e,n){var r=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),a=Hae(t),i=WAe(t,0,n),o=K4(t);t.l=r;var l={Name:a,Ptg:i};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function fhe(t,e){var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},r=[],s=!1;e||(e={}),e.biff=12;var a=[],i=[[]];return i.SheetNames=[],i.XTI=[],cv[16]={n:"BrtFRTArchID$",f:Ahe},cd(t,function(l,u,d){switch(d){case 156:i.SheetNames.push(l.name),n.Sheets.push(l);break;case 153:n.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=$i(l.Ptg,null,null,i,e),delete e.SID,delete l.Ptg,a.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,l]):i[0]=[d,l],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(l),i.XTI=i.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:r.push(d),s=!0;break;case 36:r.pop(),s=!1;break;case 37:r.push(d),s=!0;break;case 38:r.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||e.WTF&&r[r.length-1]!=37&&r[r.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),JQ(n),n.Names=a,n.supbooks=i,n}function hhe(t,e){Nt(t,143);for(var n=0;n!=e.SheetNames.length;++n){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[n]&&e.Workbook.Sheets[n].Hidden||0,s={Hidden:r,iTabID:n+1,strRelID:"rId"+(n+1),name:e.SheetNames[n]};Nt(t,156,lhe(s))}Nt(t,144)}function mhe(t,e){e||(e=ht(127));for(var n=0;n!=4;++n)e.write_shift(4,0);return li("SheetJS",e),li(Rw.version,e),li(Rw.version,e),li("7262",e),e.length>e.l?e.slice(0,e.l):e}function phe(t,e){e||(e=ht(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var n=120;return e.write_shift(1,n),e.length>e.l?e.slice(0,e.l):e}function ghe(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var n=e.Workbook.Sheets,r=0,s=-1,a=-1;r<n.length;++r)!n[r]||!n[r].Hidden&&s==-1?s=r:n[r].Hidden==1&&a==-1&&(a=r);a>s||(Nt(t,135),Nt(t,158,phe(s)),Nt(t,136))}}function xhe(t,e){var n=Ho();return Nt(n,131),Nt(n,128,mhe()),Nt(n,153,uhe(t.Workbook&&t.Workbook.WBProps||null)),ghe(n,t),hhe(n,t),Nt(n,132),n.end()}function vhe(t,e,n){return e.slice(-4)===".bin"?fhe(t,n):ihe(t,n)}function yhe(t,e,n,r,s,a,i,o){return e.slice(-4)===".bin"?Lfe(t,r,n,s,a,i,o):dde(t,r,n,s,a,i,o)}function whe(t,e,n,r,s,a,i,o){return e.slice(-4)===".bin"?Xfe(t,r,n,s,a):Wfe(t,r,n,s,a)}function bhe(t,e,n,r,s,a,i,o){return e.slice(-4)===".bin"?Eue():_ue()}function Che(t,e,n,r,s,a,i,o){return e.slice(-4)===".bin"?bue():Cue()}function Ehe(t,e,n,r){return e.slice(-4)===".bin"?vce(t,n,r):oce(t,n,r)}function _he(t,e,n){return RQ(t,n)}function She(t,e,n){return e.slice(-4)===".bin"?Sle(t,n):Cle(t,n)}function The(t,e,n){return e.slice(-4)===".bin"?gue(t,n):lue(t,n)}function Nhe(t,e,n){return e.slice(-4)===".bin"?aue(t):rue(t)}function Bhe(t,e,n,r){return n.slice(-4)===".bin"?iue(t,e,n,r):void 0}function khe(t,e,n){return e.slice(-4)===".bin"?eue(t,e,n):nue(t,e,n)}function Ihe(t,e,n){return(e.slice(-4)===".bin"?xhe:eH)(t)}function Fhe(t,e,n,r,s){return(e.slice(-4)===".bin"?qfe:WQ)(t,n,r,s)}function Dhe(t,e,n){return(e.slice(-4)===".bin"?Bce:FQ)(t,n)}function Rhe(t,e,n){return(e.slice(-4)===".bin"?Ble:EQ)(t,n)}function Lhe(t,e,n){return(e.slice(-4)===".bin"?xue:MQ)(t)}function Uhe(t){return(t.slice(-4)===".bin"?tue:LQ)()}var tH=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,nH=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Mc(t,e){var n=t.split(/\s+/),r=[];if(r[0]=n[0],n.length===1)return r;var s=t.match(tH),a,i,o,l;if(s)for(l=0;l!=s.length;++l)a=s[l].match(nH),(i=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(i+1),r[o]=a[2].slice(1,a[2].length-1));return r}function Mhe(t){var e=t.split(/\s+/),n={};if(e.length===1)return n;var r=t.match(tH),s,a,i,o;if(r)for(o=0;o!=r.length;++o)s=r[o].match(nH),(a=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?i="xmlns"+s[1].slice(6):i=s[1].slice(a+1),n[i]=s[2].slice(1,s[2].length-1));return n}var Bx;function Phe(t,e){var n=Bx[t]||Nr(t);return n==="General"?n0(e):uc(n,e)}function Ohe(t,e,n,r){var s=r;switch((n[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=vs(r);break;case"i2":case"int":s=parseInt(r,10);break;case"r4":case"float":s=parseFloat(r);break;case"date":case"dateTime.tz":s=ws(r);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+n[0])}t[Nr(e)]=s}function jhe(t,e,n){if(t.t!=="z"){if(!n||n.cellText!==!1)try{t.t==="e"?t.w=t.w||ud[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=ev(t.v):t.w=n0(t.v):t.w=Phe(e||"General",t.v)}catch(a){if(n.WTF)throw a}try{var r=Bx[e]||e||"General";if(n.cellNF&&(t.z=r),n.cellDates&&t.t=="n"&&Rp(r)){var s=Fh(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(a){if(n.WTF)throw a}}}function Qhe(t,e,n){if(n.cellStyles&&e.Interior){var r=e.Interior;r.Pattern&&(r.patternType=Zle[r.Pattern]||r.Pattern)}t[e.ID]=e}function Hhe(t,e,n,r,s,a,i,o,l,u){var d="General",h=r.StyleID,m={};u=u||{};var p=[],y=0;for(h===void 0&&o&&(h=o.StyleID),h===void 0&&i&&(h=i.StyleID);a[h]!==void 0&&(a[h].nf&&(d=a[h].nf),a[h].Interior&&p.push(a[h].Interior),!!a[h].Parent);)h=a[h].Parent;switch(n.Type){case"Boolean":r.t="b",r.v=vs(t);break;case"String":r.t="s",r.r=wD(Nr(t)),r.v=t.indexOf("<")>-1?Nr(e||t).replace(/<.*?>/g,""):r.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),r.v=(ws(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),r.v!==r.v?r.v=Nr(t):r.v<60&&(r.v=r.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":r.v===void 0&&(r.v=+t),r.t||(r.t="n");break;case"Error":r.t="e",r.v=Y7[t],u.cellText!==!1&&(r.w=t);break;default:t==""&&e==""?r.t="z":(r.t="s",r.v=wD(e||t));break}if(jhe(r,d,u),u.cellFormula!==!1)if(r.Formula){var x=Nr(r.Formula);x.charCodeAt(0)==61&&(x=x.slice(1)),r.f=Ym(x,s),delete r.Formula,r.ArrayRange=="RC"?r.F=Ym("RC:RC",s):r.ArrayRange&&(r.F=Ym(r.ArrayRange,s),l.push([Br(r.F),r.F]))}else for(y=0;y<l.length;++y)s.r>=l[y][0].s.r&&s.r<=l[y][0].e.r&&s.c>=l[y][0].s.c&&s.c<=l[y][0].e.c&&(r.F=l[y][1]);u.cellStyles&&(p.forEach(function(C){!m.patternType&&C.patternType&&(m.patternType=C.patternType)}),r.s=m),r.StyleID!==void 0&&(r.ixfe=r.StyleID)}function Vhe(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function Z_(t,e){var n=e||{};Lp();var r=ex(Q4(t));(n.type=="binary"||n.type=="array"||n.type=="base64")&&(r=us(r));var s=r.slice(0,1024).toLowerCase(),a=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var i=bs(n);return i.type="string",pp.to_workbook(r,i)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(ze){s.indexOf("<"+ze)>=0&&(a=!0)}),a)return N0e(r,n);Bx={"General Number":"General","General Date":kn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":kn[15],"Short Date":kn[14],"Long Time":kn[19],"Medium Time":kn[18],"Short Time":kn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:kn[2],Standard:kn[4],Percent:kn[10],Scientific:kn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],u,d={},h=[],m=n.dense?[]:{},p="",y={},x={},C=Mc('<Data ss:Type="String">'),S=0,k=0,I=0,F={s:{r:2e6,c:2e6},e:{r:0,c:0}},U={},R={},E="",_=0,B=[],j={},D={},L=0,Q=[],H=[],te={},Y=[],ne,V=!1,J=[],K=[],ie={},O=0,W=0,Z={Sheets:[],WBProps:{date1904:!1}},re={};rv.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"");for(var se="";o=rv.exec(r);)switch(o[3]=(se=o[3]).toLowerCase()){case"data":if(se=="data"){if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?Hhe(r.slice(S,o.index),E,C,l[l.length-1][0]=="comment"?te:y,{c:k,r:I},U,Y[k],x,J,n):(E="",C=Mc(o[0]),S=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(H.length>0&&(y.c=H),(!n.sheetRows||n.sheetRows>I)&&y.v!==void 0&&(n.dense?(m[I]||(m[I]=[]),m[I][k]=y):m[Us(k)+pa(I)]=y),y.HRef&&(y.l={Target:Nr(y.HRef)},y.HRefScreenTip&&(y.l.Tooltip=y.HRefScreenTip),delete y.HRef,delete y.HRefScreenTip),(y.MergeAcross||y.MergeDown)&&(O=k+(parseInt(y.MergeAcross,10)|0),W=I+(parseInt(y.MergeDown,10)|0),B.push({s:{c:k,r:I},e:{c:O,r:W}})),!n.sheetStubs)y.MergeAcross?k=O+1:++k;else if(y.MergeAcross||y.MergeDown){for(var de=k;de<=O;++de)for(var pe=I;pe<=W;++pe)(de>k||pe>I)&&(n.dense?(m[pe]||(m[pe]=[]),m[pe][de]={t:"z"}):m[Us(de)+pa(pe)]={t:"z"});k=O+1}else++k;else y=Mhe(o[0]),y.Index&&(k=+y.Index-1),k<F.s.c&&(F.s.c=k),k>F.e.c&&(F.e.c=k),o[0].slice(-2)==="/>"&&++k,H=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(I<F.s.r&&(F.s.r=I),I>F.e.r&&(F.e.r=I),o[0].slice(-2)==="/>"&&(x=Mc(o[0]),x.Index&&(I=+x.Index-1)),k=0,++I):(x=Mc(o[0]),x.Index&&(I=+x.Index-1),ie={},(x.AutoFitHeight=="0"||x.Height)&&(ie.hpx=parseInt(x.Height,10),ie.hpt=lv(ie.hpx),K[I]=ie),x.Hidden=="1"&&(ie.hidden=!0,K[I]=ie));break;case"worksheet":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));h.push(p),F.s.r<=F.e.r&&F.s.c<=F.e.c&&(m["!ref"]=Gn(F),n.sheetRows&&n.sheetRows<=F.e.r&&(m["!fullref"]=m["!ref"],F.e.r=n.sheetRows-1,m["!ref"]=Gn(F))),B.length&&(m["!merges"]=B),Y.length>0&&(m["!cols"]=Y),K.length>0&&(m["!rows"]=K),d[p]=m}else F={s:{r:2e6,c:2e6},e:{r:0,c:0}},I=k=0,l.push([o[3],!1]),u=Mc(o[0]),p=Nr(u.Name),m=n.dense?[]:{},B=[],J=[],K=[],re={name:p,Hidden:0},Z.Sheets.push(re);break;case"table":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),Y=[],V=!1}break;case"style":o[1]==="/"?Qhe(U,R,n):R=Mc(o[0]);break;case"numberformat":R.nf=Nr(Mc(o[0]).Format||"General"),Bx[R.nf]&&(R.nf=Bx[R.nf]);for(var be=0;be!=392&&kn[be]!=R.nf;++be);if(be==392){for(be=57;be!=392;++be)if(kn[be]==null){KA(R.nf,be);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(ne=Mc(o[0]),ne.Hidden&&(ne.hidden=!0,delete ne.Hidden),ne.Width&&(ne.wpx=parseInt(ne.Width,10)),!V&&ne.wpx>10){V=!0,Xi=kQ;for(var Se=0;Se<Y.length;++Se)Y[Se]&&Hf(Y[Se])}V&&Hf(ne),Y[ne.Index-1||Y.length]=ne;for(var me=0;me<+ne.Span;++me)Y[Y.length]=bs(ne);break;case"namedrange":if(o[1]==="/")break;Z.Names||(Z.Names=[]);var ce=Mn(o[0]),Me={Name:ce.Name,Ref:Ym(ce.RefersTo.slice(1),{r:0,c:0})};Z.Sheets.length>0&&(Me.Sheet=Z.Sheets.length-1),Z.Names.push(Me);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?E+=r.slice(_,o.index):_=o.index+o[0].length;break;case"interior":if(!n.cellStyles)break;R.Interior=Mc(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?fie(j,se,r.slice(L,o.index)):L=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));Vhe(te),H.push(te)}else l.push([o[3],!1]),u=Mc(o[0]),te={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Ze=Mc(o[0]);m["!autofilter"]={ref:Ym(Ze.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return cR(r,n);var Fe=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Fe=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Fe=!1}break;case"excelworkbook":switch(o[3]){case"date1904":Z.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Fe=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Fe=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(r.slice(L,o.index)){case"SheetHidden":re.Hidden=1;break;case"SheetVeryHidden":re.Hidden=2;break}else L=o.index+o[0].length;break;case"header":m["!margins"]||Vh(m["!margins"]={},"xlml"),isNaN(+Mn(o[0]).Margin)||(m["!margins"].header=+Mn(o[0]).Margin);break;case"footer":m["!margins"]||Vh(m["!margins"]={},"xlml"),isNaN(+Mn(o[0]).Margin)||(m["!margins"].footer=+Mn(o[0]).Margin);break;case"pagemargins":var Ce=Mn(o[0]);m["!margins"]||Vh(m["!margins"]={},"xlml"),isNaN(+Ce.Top)||(m["!margins"].top=+Ce.Top),isNaN(+Ce.Left)||(m["!margins"].left=+Ce.Left),isNaN(+Ce.Right)||(m["!margins"].right=+Ce.Right),isNaN(+Ce.Bottom)||(m["!margins"].bottom=+Ce.Bottom);break;case"displayrighttoleft":Z.Views||(Z.Views=[]),Z.Views[0]||(Z.Views[0]={}),Z.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Fe=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Fe=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Fe=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Fe=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Fe=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Fe=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Fe=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Fe=!1}break;case"smarttags":break;default:Fe=!1;break}if(Fe||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?Ohe(D,se,Q,r.slice(L,o.index)):(Q=o,L=o.index+o[0].length);break}if(n.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var Re={};return!n.bookSheets&&!n.bookProps&&(Re.Sheets=d),Re.SheetNames=h,Re.Workbook=Z,Re.SSF=bs(kn),Re.Props=j,Re.Custprops=D,Re}function eT(t,e){switch(AB(e=e||{}),e.type||"base64"){case"base64":return Z_(wl(t),e);case"binary":case"buffer":case"file":return Z_(t,e);case"array":return Z_(Wf(t),e)}}function zhe(t,e){var n=[];return t.Props&&n.push(hie(t.Props,e)),t.Custprops&&n.push(mie(t.Props,t.Custprops)),n.join("")}function Ghe(){return""}function qhe(t,e){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,s){var a=[];a.push(Ot("NumberFormat",null,{"ss:Format":ts(kn[r.numFmtId])}));var i={"ss:ID":"s"+(21+s)};n.push(Ot("Style",a.join(""),i))}),Ot("Styles",n.join(""))}function rH(t){return Ot("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+aB(t.Ref,{r:0,c:0})})}function Khe(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,n=[],r=0;r<e.length;++r){var s=e[r];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||n.push(rH(s)))}return Ot("Names",n.join(""))}function $he(t,e,n,r){if(!t||!((r||{}).Workbook||{}).Names)return"";for(var s=r.Workbook.Names,a=[],i=0;i<s.length;++i){var o=s[i];o.Sheet==n&&(o.Name.match(/^_xlfn\./)||a.push(rH(o)))}return a.join("")}function Whe(t,e,n,r){if(!t)return"";var s=[];if(t["!margins"]&&(s.push("<PageSetup>"),t["!margins"].header&&s.push(Ot("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&s.push(Ot("Footer",null,{"x:Margin":t["!margins"].footer})),s.push(Ot("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),s.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)s.push(Ot("Visible",r.Workbook.Sheets[n].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<n&&!(r.Workbook.Sheets[a]&&!r.Workbook.Sheets[a].Hidden);++a);a==n&&s.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),t["!protect"]&&(s.push(Ei("ProtectContents","True")),t["!protect"].objects&&s.push(Ei("ProtectObjects","True")),t["!protect"].scenarios&&s.push(Ei("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?s.push(Ei("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&s.push(Ei("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&s.push("<"+i[1]+"/>")})),s.length==0?"":Ot("WorksheetOptions",s.join(""),{xmlns:fl.x})}function Yhe(t){return t.map(function(e){var n=gae(e.t||""),r=Ot("ss:Data",n,{xmlns:"http://www.w3.org/TR/REC-html40"});return Ot("Comment",r,{"ss:Author":e.a})}).join("")}function Xhe(t,e,n,r,s,a,i){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+ts(aB(t.f,i))),t.F&&t.F.slice(0,e.length)==e){var l=Ms(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=ts(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=ts(t.l.Tooltip))),n["!merges"])for(var u=n["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var h="",m="";switch(t.t){case"z":if(!r.sheetStubs)return"";break;case"n":h="Number",m=String(t.v);break;case"b":h="Boolean",m=t.v?"1":"0";break;case"e":h="Error",m=ud[t.v];break;case"d":h="DateTime",m=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||kn[14]);break;case"s":h="String",m=pae(t.v||"");break}var p=Xf(r.cellXfs,t,r);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=i.c+1;var y=t.v!=null?m:"",x=t.t=="z"?"":'<Data ss:Type="'+h+'">'+y+"</Data>";return(t.c||[]).length>0&&(x+=Yhe(t.c)),Ot("Cell",x,o)}function Jhe(t,e){var n='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=gp(e.hpt)),e.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(n+=' ss:Hidden="1"')),n+">"}function Zhe(t,e,n,r){if(!t["!ref"])return"";var s=Br(t["!ref"]),a=t["!merges"]||[],i=0,o=[];t["!cols"]&&t["!cols"].forEach(function(C,S){Hf(C);var k=!!C.width,I=gC(S,C),F={"ss:Index":S+1};k&&(F["ss:Width"]=iv(I.width)),C.hidden&&(F["ss:Hidden"]="1"),o.push(Ot("Column",null,F))});for(var l=Array.isArray(t),u=s.s.r;u<=s.e.r;++u){for(var d=[Jhe(u,(t["!rows"]||[])[u])],h=s.s.c;h<=s.e.c;++h){var m=!1;for(i=0;i!=a.length;++i)if(!(a[i].s.c>h)&&!(a[i].s.r>u)&&!(a[i].e.c<h)&&!(a[i].e.r<u)){(a[i].s.c!=h||a[i].s.r!=u)&&(m=!0);break}if(!m){var p={r:u,c:h},y=Dn(p),x=l?(t[u]||[])[h]:t[y];d.push(Xhe(x,y,t,e,n,r,p))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function e0e(t,e,n){var r=[],s=n.SheetNames[t],a=n.Sheets[s],i=a?$he(a,e,t,n):"";return i.length>0&&r.push("<Names>"+i+"</Names>"),i=a?Zhe(a,e,t,n):"",i.length>0&&r.push("<Table>"+i+"</Table>"),r.push(Whe(a,e,t,n)),r.join("")}function t0e(t,e){e||(e={}),t.SSF||(t.SSF=bs(kn)),t.SSF&&(Lp(),uC(t.SSF),e.revssf=dC(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Xf(e.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(zhe(t,e)),n.push(Ghe()),n.push(""),n.push("");for(var r=0;r<t.SheetNames.length;++r)n.push(Ot("Worksheet",e0e(r,e,t),{"ss:Name":ts(t.SheetNames[r])}));return n[2]=qhe(t,e),n[3]=Khe(t),ga+Ot("Workbook",n.join(""),{xmlns:fl.ss,"xmlns:o":fl.o,"xmlns:x":fl.x,"xmlns:ss":fl.ss,"xmlns:dt":fl.dt,"xmlns:html":fl.html})}function n0e(t){var e={},n=t.content;if(n.l=28,e.AnsiUserType=n.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=Kae(n),n.length-n.l<=4)return e;var r=n.read_shift(4);if(r==0||r>40||(n.l-=4,e.Reserved1=n.read_shift(0,"lpstr-ansi"),n.length-n.l<=4)||(r=n.read_shift(4),r!==1907505652)||(e.UnicodeClipboardFormat=$ae(n),r=n.read_shift(4),r==0||r>40))return e;n.l-=4,e.Reserved2=n.read_shift(0,"lpwstr")}var r0e=[60,1084,2066,2165,2175];function s0e(t,e,n,r,s){var a=r,i=[],o=n.slice(n.l,n.l+a);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}i.push(o),n.l+=a;for(var l=VA(n,n.l),u=tT[l],d=0;u!=null&&r0e.indexOf(l)>-1;)a=VA(n,n.l+2),d=n.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=n.slice(d,n.l+4+a),i.push(o),n.l+=4+a,u=tT[l=VA(n,n.l)];var h=oi(i);bi(h,0);var m=0;h.lens=[];for(var p=0;p<i.length;++p)h.lens.push(m),m+=i[p].length;if(h.length<r)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+h.length+" < "+r;return e.f(h,h.length,s)}function ku(t,e,n){if(t.t!=="z"&&t.XF){var r=0;try{r=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=kn[r])}catch(a){if(e.WTF)throw a}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||ud[t.v]:r===0||r=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=ev(t.v):t.w=n0(t.v):t.w=uc(r,t.v,{date1904:!!n,dateNF:e&&e.dateNF})}catch(a){if(e.WTF)throw a}if(e.cellDates&&r&&t.t=="n"&&Rp(kn[r]||String(r))){var s=Fh(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function Ny(t,e,n){return{v:t,ixfe:e,t:n}}function a0e(t,e){var n={opts:{}},r={},s=e.dense?[]:{},a={},i={},o=null,l=[],u="",d={},h,m="",p,y,x,C,S={},k=[],I,F,U=[],R=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},_={},B=function(Oe){return Oe<8?jh[Oe]:Oe<64&&R[Oe-8]||jh[Oe]},j=function(Oe,Ie,Xe){var mt=Ie.XF.data;if(!(!mt||!mt.patternType||!Xe||!Xe.cellStyles)){Ie.s={},Ie.s.patternType=mt.patternType;var Yt;(Yt=av(B(mt.icvFore)))&&(Ie.s.fgColor={rgb:Yt}),(Yt=av(B(mt.icvBack)))&&(Ie.s.bgColor={rgb:Yt})}},D=function(Oe,Ie,Xe){if(!(ie>1)&&!(Xe.sheetRows&&Oe.r>=Xe.sheetRows)){if(Xe.cellStyles&&Ie.XF&&Ie.XF.data&&j(Oe,Ie,Xe),delete Ie.ixfe,delete Ie.XF,h=Oe,m=Dn(Oe),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),Oe.r<i.s.r&&(i.s.r=Oe.r),Oe.c<i.s.c&&(i.s.c=Oe.c),Oe.r+1>i.e.r&&(i.e.r=Oe.r+1),Oe.c+1>i.e.c&&(i.e.c=Oe.c+1),Xe.cellFormula&&Ie.f){for(var mt=0;mt<k.length;++mt)if(!(k[mt][0].s.c>Oe.c||k[mt][0].s.r>Oe.r)&&!(k[mt][0].e.c<Oe.c||k[mt][0].e.r<Oe.r)){Ie.F=Gn(k[mt][0]),(k[mt][0].s.c!=Oe.c||k[mt][0].s.r!=Oe.r)&&delete Ie.f,Ie.f&&(Ie.f=""+$i(k[mt][1],i,Oe,J,L));break}}Xe.dense?(s[Oe.r]||(s[Oe.r]=[]),s[Oe.r][Oe.c]=Ie):s[m]=Ie}},L={enc:!1,sbcch:0,snames:[],sharedf:S,arrayf:k,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(L.password=e.password);var Q,H=[],te=[],Y=[],ne=[],V=!1,J=[];J.SheetNames=L.snames,J.sharedf=L.sharedf,J.arrayf=L.arrayf,J.names=[],J.XTI=[];var K=0,ie=0,O=0,W=[],Z=[],re;L.codepage=1200,Hc(1200);for(var se=!1;t.l<t.length-1;){var de=t.l,pe=t.read_shift(2);if(pe===0&&K===10)break;var be=t.l===t.length?0:t.read_shift(2),Se=tT[pe];if(Se&&Se.f){if(e.bookSheets&&K===133&&pe!==133)break;if(K=pe,Se.r===2||Se.r==12){var me=t.read_shift(2);if(be-=2,!L.enc&&me!==pe&&((me&255)<<8|me>>8)!==pe)throw new Error("rt mismatch: "+me+"!="+pe);Se.r==12&&(t.l+=10,be-=10)}var ce={};if(pe===10?ce=Se.f(t,be,L):ce=s0e(pe,Se,t,be,L),ie==0&&[9,521,1033,2057].indexOf(K)===-1)continue;switch(pe){case 34:n.opts.Date1904=E.WBProps.date1904=ce;break;case 134:n.opts.WriteProtect=!0;break;case 47:if(L.enc||(t.l=0),L.enc=ce,!e.password)throw new Error("File is password-protected");if(ce.valid==null)throw new Error("Encryption scheme unsupported");if(!ce.valid)throw new Error("Password is incorrect");break;case 92:L.lastuser=ce;break;case 66:var Me=Number(ce);switch(Me){case 21010:Me=1200;break;case 32768:Me=1e4;break;case 32769:Me=1252;break}Hc(L.codepage=Me),se=!0;break;case 317:L.rrtabid=ce;break;case 25:L.winlocked=ce;break;case 439:n.opts.RefreshAll=ce;break;case 12:n.opts.CalcCount=ce;break;case 16:n.opts.CalcDelta=ce;break;case 17:n.opts.CalcIter=ce;break;case 13:n.opts.CalcMode=ce;break;case 14:n.opts.CalcPrecision=ce;break;case 95:n.opts.CalcSaveRecalc=ce;break;case 15:L.CalcRefMode=ce;break;case 2211:n.opts.FullCalc=ce;break;case 129:ce.fDialog&&(s["!type"]="dialog"),ce.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),ce.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:U.push(ce);break;case 430:J.push([ce]),J[J.length-1].XTI=[];break;case 35:case 547:J[J.length-1].push(ce);break;case 24:case 536:re={Name:ce.Name,Ref:$i(ce.rgce,i,null,J,L)},ce.itab>0&&(re.Sheet=ce.itab-1),J.names.push(re),J[0]||(J[0]=[],J[0].XTI=[]),J[J.length-1].push(ce),ce.Name=="_xlnm._FilterDatabase"&&ce.itab>0&&ce.rgce&&ce.rgce[0]&&ce.rgce[0][0]&&ce.rgce[0][0][0]=="PtgArea3d"&&(Z[ce.itab-1]={ref:Gn(ce.rgce[0][0][1][2])});break;case 22:L.ExternCount=ce;break;case 23:J.length==0&&(J[0]=[],J[0].XTI=[]),J[J.length-1].XTI=J[J.length-1].XTI.concat(ce),J.XTI=J.XTI.concat(ce);break;case 2196:if(L.biff<8)break;re!=null&&(re.Comment=ce[1]);break;case 18:s["!protect"]=ce;break;case 19:ce!==0&&L.WTF&&console.error("Password verifier: "+ce);break;case 133:a[ce.pos]=ce,L.snames.push(ce.name);break;case 10:{if(--ie)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,s["!ref"]=Gn(i),e.sheetRows&&e.sheetRows<=i.e.r){var Ze=i.e.r;i.e.r=e.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=Gn(i),i.e.r=Ze}i.e.r++,i.e.c++}H.length>0&&(s["!merges"]=H),te.length>0&&(s["!objects"]=te),Y.length>0&&(s["!cols"]=Y),ne.length>0&&(s["!rows"]=ne),E.Sheets.push(_)}u===""?d=s:r[u]=s,s=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(L.biff===8&&(L.biff={9:2,521:3,1033:4}[pe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ce.BIFFVer]||8),L.biffguess=ce.BIFFVer==0,ce.BIFFVer==0&&ce.dt==4096&&(L.biff=5,se=!0,Hc(L.codepage=28591)),L.biff==8&&ce.BIFFVer==0&&ce.dt==16&&(L.biff=2),ie++)break;if(s=e.dense?[]:{},L.biff<8&&!se&&(se=!0,Hc(L.codepage=e.codepage||1252)),L.biff<5||ce.BIFFVer==0&&ce.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var Fe={pos:t.l-be,name:u};a[Fe.pos]=Fe,L.snames.push(u)}else u=(a[de]||{name:""}).name;ce.dt==32&&(s["!type"]="chart"),ce.dt==64&&(s["!type"]="macro"),H=[],te=[],L.arrayf=k=[],Y=[],ne=[],V=!1,_={Hidden:(a[de]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(e.dense?(s[ce.r]||[])[ce.c]:s[Dn({c:ce.c,r:ce.r})])&&++ce.c,I={ixfe:ce.ixfe,XF:U[ce.ixfe]||{},v:ce.val,t:"n"},O>0&&(I.z=W[I.ixfe>>8&63]),ku(I,e,n.opts.Date1904),D({c:ce.c,r:ce.r},I,e);break;case 5:case 517:I={ixfe:ce.ixfe,XF:U[ce.ixfe],v:ce.val,t:ce.t},O>0&&(I.z=W[I.ixfe>>8&63]),ku(I,e,n.opts.Date1904),D({c:ce.c,r:ce.r},I,e);break;case 638:I={ixfe:ce.ixfe,XF:U[ce.ixfe],v:ce.rknum,t:"n"},O>0&&(I.z=W[I.ixfe>>8&63]),ku(I,e,n.opts.Date1904),D({c:ce.c,r:ce.r},I,e);break;case 189:for(var Ce=ce.c;Ce<=ce.C;++Ce){var Re=ce.rkrec[Ce-ce.c][0];I={ixfe:Re,XF:U[Re],v:ce.rkrec[Ce-ce.c][1],t:"n"},O>0&&(I.z=W[I.ixfe>>8&63]),ku(I,e,n.opts.Date1904),D({c:Ce,r:ce.r},I,e)}break;case 6:case 518:case 1030:{if(ce.val=="String"){o=ce;break}if(I=Ny(ce.val,ce.cell.ixfe,ce.tt),I.XF=U[I.ixfe],e.cellFormula){var ze=ce.formula;if(ze&&ze[0]&&ze[0][0]&&ze[0][0][0]=="PtgExp"){var Je=ze[0][0][1][0],dt=ze[0][0][1][1],_t=Dn({r:Je,c:dt});S[_t]?I.f=""+$i(ce.formula,i,ce.cell,J,L):I.F=((e.dense?(s[Je]||[])[dt]:s[_t])||{}).F}else I.f=""+$i(ce.formula,i,ce.cell,J,L)}O>0&&(I.z=W[I.ixfe>>8&63]),ku(I,e,n.opts.Date1904),D(ce.cell,I,e),o=ce}break;case 7:case 519:if(o)o.val=ce,I=Ny(ce,o.cell.ixfe,"s"),I.XF=U[I.ixfe],e.cellFormula&&(I.f=""+$i(o.formula,i,o.cell,J,L)),O>0&&(I.z=W[I.ixfe>>8&63]),ku(I,e,n.opts.Date1904),D(o.cell,I,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{k.push(ce);var ft=Dn(ce[0].s);if(p=e.dense?(s[ce[0].s.r]||[])[ce[0].s.c]:s[ft],e.cellFormula&&p){if(!o||!ft||!p)break;p.f=""+$i(ce[1],i,ce[0],J,L),p.F=Gn(ce[0])}}break;case 1212:{if(!e.cellFormula)break;if(m){if(!o)break;S[Dn(o.cell)]=ce[0],p=e.dense?(s[o.cell.r]||[])[o.cell.c]:s[Dn(o.cell)],(p||{}).f=""+$i(ce[0],i,h,J,L)}}break;case 253:I=Ny(l[ce.isst].t,ce.ixfe,"s"),l[ce.isst].h&&(I.h=l[ce.isst].h),I.XF=U[I.ixfe],O>0&&(I.z=W[I.ixfe>>8&63]),ku(I,e,n.opts.Date1904),D({c:ce.c,r:ce.r},I,e);break;case 513:e.sheetStubs&&(I={ixfe:ce.ixfe,XF:U[ce.ixfe],t:"z"},O>0&&(I.z=W[I.ixfe>>8&63]),ku(I,e,n.opts.Date1904),D({c:ce.c,r:ce.r},I,e));break;case 190:if(e.sheetStubs)for(var Rt=ce.c;Rt<=ce.C;++Rt){var Ut=ce.ixfe[Rt-ce.c];I={ixfe:Ut,XF:U[Ut],t:"z"},O>0&&(I.z=W[I.ixfe>>8&63]),ku(I,e,n.opts.Date1904),D({c:Rt,r:ce.r},I,e)}break;case 214:case 516:case 4:I=Ny(ce.val,ce.ixfe,"s"),I.XF=U[I.ixfe],O>0&&(I.z=W[I.ixfe>>8&63]),ku(I,e,n.opts.Date1904),D({c:ce.c,r:ce.r},I,e);break;case 0:case 512:ie===1&&(i=ce);break;case 252:l=ce;break;case 1054:if(L.biff==4){W[O++]=ce[1];for(var Zt=0;Zt<O+163&&kn[Zt]!=ce[1];++Zt);Zt>=163&&KA(ce[1],O+163)}else KA(ce[1],ce[0]);break;case 30:{W[O++]=ce;for(var Mt=0;Mt<O+163&&kn[Mt]!=ce;++Mt);Mt>=163&&KA(ce,O+163)}break;case 229:H=H.concat(ce);break;case 93:te[ce.cmo[0]]=L.lastobj=ce;break;case 438:L.lastobj.TxO=ce;break;case 127:L.lastobj.ImData=ce;break;case 440:for(C=ce[0].s.r;C<=ce[0].e.r;++C)for(x=ce[0].s.c;x<=ce[0].e.c;++x)p=e.dense?(s[C]||[])[x]:s[Dn({c:x,r:C})],p&&(p.l=ce[1]);break;case 2048:for(C=ce[0].s.r;C<=ce[0].e.r;++C)for(x=ce[0].s.c;x<=ce[0].e.c;++x)p=e.dense?(s[C]||[])[x]:s[Dn({c:x,r:C})],p&&p.l&&(p.l.Tooltip=ce[1]);break;case 28:{if(L.biff<=5&&L.biff>=2)break;p=e.dense?(s[ce[0].r]||[])[ce[0].c]:s[Dn(ce[0])];var jt=te[ce[2]];p||(e.dense?(s[ce[0].r]||(s[ce[0].r]=[]),p=s[ce[0].r][ce[0].c]={t:"z"}):p=s[Dn(ce[0])]={t:"z"},i.e.r=Math.max(i.e.r,ce[0].r),i.s.r=Math.min(i.s.r,ce[0].r),i.e.c=Math.max(i.e.c,ce[0].c),i.s.c=Math.min(i.s.c,ce[0].c)),p.c||(p.c=[]),y={a:ce[1],t:jt.TxO.t},p.c.push(y)}break;case 2173:qce(U[ce.ixfe],ce.ext);break;case 125:{if(!L.cellStyles)break;for(;ce.e>=ce.s;)Y[ce.e--]={width:ce.w/256,level:ce.level||0,hidden:!!(ce.flags&1)},V||(V=!0,nB(ce.w/256)),Hf(Y[ce.e+1])}break;case 520:{var Wt={};ce.level!=null&&(ne[ce.r]=Wt,Wt.level=ce.level),ce.hidden&&(ne[ce.r]=Wt,Wt.hidden=!0),ce.hpt&&(ne[ce.r]=Wt,Wt.hpt=ce.hpt,Wt.hpx=gp(ce.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Vh(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[pe]]=ce;break;case 161:s["!margins"]||Vh(s["!margins"]={}),s["!margins"].header=ce.header,s["!margins"].footer=ce.footer;break;case 574:ce.RTL&&(E.Views[0].RTL=!0);break;case 146:R=ce;break;case 2198:Q=ce;break;case 140:F=ce;break;case 442:u?_.CodeName=ce||_.name:E.WBProps.CodeName=ce||"ThisWorkbook";break}}else Se||console.error("Missing Info for XLS Record 0x"+pe.toString(16)),t.l+=be}return n.SheetNames=ta(a).sort(function(Ue,Oe){return Number(Ue)-Number(Oe)}).map(function(Ue){return a[Ue].name}),e.bookSheets||(n.Sheets=r),!n.SheetNames.length&&d["!ref"]?(n.SheetNames.push("Sheet1"),n.Sheets&&(n.Sheets.Sheet1=d)):n.Preamble=d,n.Sheets&&Z.forEach(function(Ue,Oe){n.Sheets[n.SheetNames[Oe]]["!autofilter"]=Ue}),n.Strings=l,n.SSF=bs(kn),L.enc&&(n.Encryption=L.enc),Q&&(n.Themes=Q),n.Metadata={},F!==void 0&&(n.Metadata.Country=F),J.names.length>0&&(E.Names=J.names),n.Workbook=E,n}var kx={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function i0e(t,e,n){var r=xn.find(t,"/!DocumentSummaryInformation");if(r&&r.size>0)try{var s=OD(r,$5,kx.DSI);for(var a in s)e[a]=s[a]}catch(u){if(n.WTF)throw u}var i=xn.find(t,"/!SummaryInformation");if(i&&i.size>0)try{var o=OD(i,W5,kx.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(u){if(n.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(nQ(e.HeadingPairs,e.TitlesOfParts,e,n),delete e.HeadingPairs,delete e.TitlesOfParts)}function o0e(t,e){var n=[],r=[],s=[],a=0,i,o=mD($5,"n"),l=mD(W5,"n");if(t.Props)for(i=ta(t.Props),a=0;a<i.length;++a)(Object.prototype.hasOwnProperty.call(o,i[a])?n:Object.prototype.hasOwnProperty.call(l,i[a])?r:s).push([i[a],t.Props[i[a]]]);if(t.Custprops)for(i=ta(t.Custprops),a=0;a<i.length;++a)Object.prototype.hasOwnProperty.call(t.Props||{},i[a])||(Object.prototype.hasOwnProperty.call(o,i[a])?n:Object.prototype.hasOwnProperty.call(l,i[a])?r:s).push([i[a],t.Custprops[i[a]]]);var u=[];for(a=0;a<s.length;++a)cQ.indexOf(s[a][0])>-1||tQ.indexOf(s[a][0])>-1||s[a][1]!=null&&u.push(s[a]);r.length&&xn.utils.cfb_add(e,"/SummaryInformation",jD(r,kx.SI,l,W5)),(n.length||u.length)&&xn.utils.cfb_add(e,"/DocumentSummaryInformation",jD(n,kx.DSI,o,$5,u.length?u:null,kx.UDI))}function sH(t,e){e||(e={}),AB(e),F4(),e.codepage&&I4(e.codepage);var n,r;if(t.FullPaths){if(xn.find(t,"/encryption"))throw new Error("File is password-protected");n=xn.find(t,"!CompObj"),r=xn.find(t,"/Workbook")||xn.find(t,"/Book")}else{switch(e.type){case"base64":t=ml(wl(t));break;case"binary":t=ml(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}bi(t,0),r={content:t}}var s,a;if(n&&n0e(n),e.bookProps&&!e.bookSheets)s={};else{var i=rr?"buffer":"array";if(r&&r.content)s=a0e(r.content,e);else if((a=xn.find(t,"PerfectOffice_MAIN"))&&a.content)s=Hh.to_workbook(a.content,(e.type=i,e));else if((a=xn.find(t,"NativeContent_MAIN"))&&a.content)s=Hh.to_workbook(a.content,(e.type=i,e));else throw(a=xn.find(t,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&xn.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=yue(t))}var o={};return t.FullPaths&&i0e(t,o,e),s.Props=s.Custprops=o,e.bookFiles&&(s.cfb=t),s}function l0e(t,e){var n=e||{},r=xn.utils.cfb_new({root:"R"}),s="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":s="/Workbook",n.biff=8;break;case"biff5":s="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return xn.utils.cfb_add(r,s,aH(t,n)),n.biff==8&&(t.Props||t.Custprops)&&o0e(t,r),n.biff==8&&t.vbaraw&&wue(r,xn.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),r}var cv={0:{f:Fde},1:{f:jde},2:{f:afe},3:{f:$de},4:{f:zde},5:{f:nfe},6:{f:ufe},7:{f:Jde},8:{f:gfe},9:{f:pfe},10:{f:hfe},11:{f:mfe},12:{f:Hde},13:{f:ofe},14:{f:Yde},15:{f:qde},16:{f:YQ},17:{f:dfe},18:{f:efe},19:{f:q4},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:dhe},40:{},42:{},43:{f:uce},44:{f:lce},45:{f:fce},46:{f:mce},47:{f:hce},48:{},49:{f:Lae},50:{},51:{f:Wce},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:yQ},62:{f:cfe},63:{f:sue},64:{f:Dfe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:so,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Bfe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Pde},148:{f:Lde,p:16},151:{f:Cfe},152:{},153:{f:che},154:{},155:{},156:{f:ohe},157:{},158:{},159:{T:1,f:_le},160:{T:-1},161:{T:1,f:y0},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:xfe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Kce},336:{T:-1},337:{f:Jce,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:K5},357:{},358:{},359:{},360:{T:1},361:{},362:{f:vQ},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Efe},427:{f:_fe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Tfe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Mde},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:wfe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:K5},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:mue},633:{T:1},634:{T:-1},635:{T:1,f:fue},636:{T:-1},637:{f:Oae},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Yfe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Rfe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},tT={6:{f:X_},10:{f:Wd},12:{f:Na},13:{f:Na},14:{f:ua},15:{f:ua},16:{f:eo},17:{f:ua},18:{f:ua},19:{f:Na},20:{f:qD},21:{f:qD},23:{f:vQ},24:{f:$D},25:{f:ua},26:{},27:{},28:{f:Roe},29:{},34:{f:ua},35:{f:KD},38:{f:eo},39:{f:eo},40:{f:eo},41:{f:eo},42:{f:ua},43:{f:ua},47:{f:qle},49:{f:ooe},51:{f:Na},60:{},61:{f:noe},64:{f:ua},65:{f:ioe},66:{f:Na},77:{},80:{},81:{},82:{},85:{f:Na},89:{},90:{},91:{},92:{f:Gie},93:{f:Moe},94:{},95:{f:ua},96:{},97:{},99:{f:ua},125:{f:yQ},128:{f:boe},129:{f:Kie},130:{f:Na},131:{f:ua},132:{f:ua},133:{f:$ie},134:{},140:{f:Goe},141:{f:Na},144:{},146:{f:$oe},151:{},152:{},153:{},154:{},155:{},156:{f:Na},157:{},158:{},160:{f:tle},161:{f:Xoe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:xoe},190:{f:voe},193:{f:Wd},197:{},198:{},199:{},200:{},201:{},202:{f:ua},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Na},220:{},221:{f:ua},222:{},224:{f:woe},225:{f:zie},226:{f:Wd},227:{},229:{f:Loe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Yie},253:{f:coe},255:{f:Jie},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:uQ},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:ua},353:{f:Wd},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Toe},431:{f:ua},432:{},433:{},434:{},437:{},438:{f:joe},439:{f:ua},440:{f:Qoe},441:{},442:{f:Wv},443:{},444:{f:Na},445:{},446:{},448:{f:Wd},449:{f:toe,r:2},450:{f:Wd},512:{f:VD},513:{f:ele},515:{f:_oe},516:{f:Aoe},517:{f:GD},519:{f:nle},520:{f:Zie},523:{},545:{f:WD},549:{f:HD},566:{},574:{f:soe},638:{f:goe},659:{},1048:{},1054:{f:foe},1084:{},1212:{f:Ioe},2048:{f:Voe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:_y},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Wd},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Woe,r:12},2173:{f:Gce,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:ua,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:koe,r:12},2197:{},2198:{f:Oce,r:12},2199:{},2200:{},2201:{},2202:{f:Foe,r:12},2203:{f:Wd},2204:{},2205:{},2206:{},2207:{},2211:{f:eoe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Na},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Joe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Koe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:VD},1:{},2:{f:ole},3:{f:ale},4:{f:sle},5:{f:GD},7:{f:cle},8:{},9:{f:_y},11:{},22:{f:Na},30:{f:moe},31:{},32:{},33:{f:WD},36:{},37:{f:HD},50:{f:ule},62:{},52:{},67:{},68:{f:Na},69:{},86:{},126:{},127:{f:rle},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Ale},223:{},234:{},354:{},421:{},518:{f:X_},521:{f:_y},536:{f:$D},547:{f:KD},561:{},579:{},1030:{f:X_},1033:{f:_y},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Qt(t,e,n,r){var s=e;if(!isNaN(s)){var a=r||(n||[]).length||0,i=t.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&V4(n)&&t.push(n)}}function c0e(t,e,n,r){var s=(n||[]).length||0;if(s<=8224)return Qt(t,e,n,s);var a=e;if(!isNaN(a)){for(var i=n.parts||[],o=0,l=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=t.next(4);for(d.write_shift(2,a),d.write_shift(2,u),t.push(n.slice(l,l+u)),l+=u;l<s;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),t.push(n.slice(l,l+u)),l+=u}}}function Zv(t,e,n){return t||(t=ht(7)),t.write_shift(2,e),t.write_shift(2,n),t.write_shift(2,0),t.write_shift(1,0),t}function u0e(t,e,n,r){var s=ht(9);return Zv(s,t,e),AQ(n,r||"b",s),s}function A0e(t,e,n){var r=ht(8+2*n.length);return Zv(r,t,e),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function d0e(t,e,n,r){if(e.v!=null)switch(e.t){case"d":case"n":var s=e.t=="d"?qa(ws(e.v)):e.v;s==(s|0)&&s>=0&&s<65536?Qt(t,2,lle(n,r,s)):Qt(t,3,ile(n,r,s));return;case"b":case"e":Qt(t,5,u0e(n,r,e.v,e.t));return;case"s":case"str":Qt(t,4,A0e(n,r,(e.v||"").slice(0,255)));return}Qt(t,1,Zv(null,n,r))}function f0e(t,e,n,r){var s=Array.isArray(e),a=Br(e["!ref"]||"A1"),i,o="",l=[];if(a.e.c>255||a.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),i=Gn(a)}for(var u=a.s.r;u<=a.e.r;++u){o=pa(u);for(var d=a.s.c;d<=a.e.c;++d){u===a.s.r&&(l[d]=Us(d)),i=l[d]+o;var h=s?(e[u]||[])[d]:e[i];h&&d0e(t,h,u,d)}}}function h0e(t,e){for(var n=e||{},r=Ho(),s=0,a=0;a<t.SheetNames.length;++a)t.SheetNames[a]==n.sheet&&(s=a);if(s==0&&n.sheet&&t.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return Qt(r,n.biff==4?1033:n.biff==3?521:9,Z4(t,16,n)),f0e(r,t.Sheets[t.SheetNames[s]],s,n),Qt(r,10),r.end()}function m0e(t,e,n){Qt(t,49,loe({sz:12,name:"Arial"},n))}function p0e(t,e,n){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&Qt(t,1054,hoe(s,e[s],n))})}function g0e(t,e){var n=ht(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),Qt(t,2151,n),n=ht(39),n.write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),pQ(Br(e["!ref"]||"A1"),n),n.write_shift(4,4),Qt(t,2152,n)}function x0e(t,e){for(var n=0;n<16;++n)Qt(t,224,zD({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){Qt(t,224,zD(r,0,e))})}function v0e(t,e){for(var n=0;n<e["!links"].length;++n){var r=e["!links"][n];Qt(t,440,Hoe(r)),r[1].Tooltip&&Qt(t,2048,zoe(r))}delete e["!links"]}function y0e(t,e){if(e){var n=0;e.forEach(function(r,s){++n<=256&&r&&Qt(t,125,Yoe(gC(s,r),s))})}}function w0e(t,e,n,r,s){var a=16+Xf(s.cellXfs,e,s);if(e.v==null&&!e.bf){Qt(t,513,i0(n,r,a));return}if(e.bf)Qt(t,6,KAe(e,n,r,s,a));else switch(e.t){case"d":case"n":var i=e.t=="d"?qa(ws(e.v)):e.v;Qt(t,515,Soe(n,r,i,a));break;case"b":case"e":Qt(t,517,Eoe(n,r,e.v,a,s,e.t));break;case"s":case"str":if(s.bookSST){var o=oB(s.Strings,e.v,s.revStrings);Qt(t,253,uoe(n,r,o,a))}else Qt(t,516,doe(n,r,(e.v||"").slice(0,255),a,s));break;default:Qt(t,513,i0(n,r,a))}}function b0e(t,e,n){var r=Ho(),s=n.SheetNames[t],a=n.Sheets[s]||{},i=(n||{}).Workbook||{},o=(i.Sheets||[])[t]||{},l=Array.isArray(a),u=e.biff==8,d,h="",m=[],p=Br(a["!ref"]||"A1"),y=u?65536:16384;if(p.e.c>255||p.e.r>=y){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,y-1)}Qt(r,2057,Z4(n,16,e)),Qt(r,13,Zl(1)),Qt(r,12,Zl(100)),Qt(r,15,mo(!0)),Qt(r,17,mo(!1)),Qt(r,16,s0(.001)),Qt(r,95,mo(!0)),Qt(r,42,mo(!1)),Qt(r,43,mo(!1)),Qt(r,130,Zl(1)),Qt(r,128,Coe()),Qt(r,131,mo(!1)),Qt(r,132,mo(!1)),u&&y0e(r,a["!cols"]),Qt(r,512,poe(p,e)),u&&(a["!links"]=[]);for(var x=p.s.r;x<=p.e.r;++x){h=pa(x);for(var C=p.s.c;C<=p.e.c;++C){x===p.s.r&&(m[C]=Us(C)),d=m[C]+h;var S=l?(a[x]||[])[C]:a[d];S&&(w0e(r,S,x,C,e),u&&S.l&&a["!links"].push([d,S.l]))}}var k=o.CodeName||o.name||s;return u&&Qt(r,574,aoe((i.Views||[])[0])),u&&(a["!merges"]||[]).length&&Qt(r,229,Uoe(a["!merges"])),u&&v0e(r,a),Qt(r,442,dQ(k)),u&&g0e(r,a),Qt(r,10),r.end()}function C0e(t,e,n){var r=Ho(),s=(t||{}).Workbook||{},a=s.Sheets||[],i=s.WBProps||{},o=n.biff==8,l=n.biff==5;if(Qt(r,2057,Z4(t,5,n)),n.bookType=="xla"&&Qt(r,135),Qt(r,225,o?Zl(1200):null),Qt(r,193,Eie(2)),l&&Qt(r,191),l&&Qt(r,192),Qt(r,226),Qt(r,92,qie("SheetJS",n)),Qt(r,66,Zl(o?1200:1252)),o&&Qt(r,353,Zl(0)),o&&Qt(r,448),Qt(r,317,Zoe(t.SheetNames.length)),o&&t.vbaraw&&Qt(r,211),o&&t.vbaraw){var u=i.CodeName||"ThisWorkbook";Qt(r,442,dQ(u))}Qt(r,156,Zl(17)),Qt(r,25,mo(!1)),Qt(r,18,mo(!1)),Qt(r,19,Zl(0)),o&&Qt(r,431,mo(!1)),o&&Qt(r,444,Zl(0)),Qt(r,61,roe()),Qt(r,64,mo(!1)),Qt(r,141,Zl(0)),Qt(r,34,mo(the(t)=="true")),Qt(r,14,mo(!0)),o&&Qt(r,439,mo(!1)),Qt(r,218,Zl(0)),m0e(r,t,n),p0e(r,t.SSF,n),x0e(r,n),o&&Qt(r,352,mo(!1));var d=r.end(),h=Ho();o&&Qt(h,140,qoe()),o&&n.Strings&&c0e(h,252,Xie(n.Strings)),Qt(h,10);var m=h.end(),p=Ho(),y=0,x=0;for(x=0;x<t.SheetNames.length;++x)y+=(o?12:11)+(o?2:1)*t.SheetNames[x].length;var C=d.length+y+m.length;for(x=0;x<t.SheetNames.length;++x){var S=a[x]||{};Qt(p,133,Wie({pos:C,hs:S.Hidden||0,dt:0,name:t.SheetNames[x]},n)),C+=e[x].length}var k=p.end();if(y!=k.length)throw new Error("BS8 "+y+" != "+k.length);var I=[];return d.length&&I.push(d),k.length&&I.push(k),m.length&&I.push(m),oi(I)}function E0e(t,e){var n=e||{},r=[];t&&!t.SSF&&(t.SSF=bs(kn)),t&&t.SSF&&(Lp(),uC(t.SSF),n.revssf=dC(t.SSF),n.revssf[t.SSF[65535]]=0,n.ssf=t.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,dB(n),n.cellXfs=[],Xf(n.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var s=0;s<t.SheetNames.length;++s)r[r.length]=b0e(s,n,t);return r.unshift(C0e(t,r,n)),oi(r)}function aH(t,e){for(var n=0;n<=t.SheetNames.length;++n){var r=t.Sheets[t.SheetNames[n]];if(!(!r||!r["!ref"])){var s=zo(r["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}}var a=e||{};switch(a.biff||2){case 8:case 5:return E0e(t,e);case 4:case 3:case 2:return h0e(t,e)}throw new Error("invalid type "+a.bookType+" for BIFF")}function aR(t,e){var n=e||{},r=n.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var s=t.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=t.match(/<\/table/i),i=s.index,o=a&&a.index||t.length,l=lae(t.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,h=0,m=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},y=[];for(i=0;i<l.length;++i){var x=l[i].trim(),C=x.slice(0,3).toLowerCase();if(C=="<tr"){if(++u,n.sheetRows&&n.sheetRows<=u){--u;break}d=0;continue}if(!(C!="<td"&&C!="<th")){var S=x.split(/<\/t[dh]>/i);for(o=0;o<S.length;++o){var k=S[o].trim();if(k.match(/<t[dh]/i)){for(var I=k,F=0;I.charAt(0)=="<"&&(F=I.indexOf(">"))>-1;)I=I.slice(F+1);for(var U=0;U<y.length;++U){var R=y[U];R.s.c==d&&R.s.r<u&&u<=R.e.r&&(d=R.e.c+1,U=-1)}var E=Mn(k.slice(0,k.indexOf(">")));m=E.colspan?+E.colspan:1,((h=+E.rowspan)>1||m>1)&&y.push({s:{r:u,c:d},e:{r:u+(h||1)-1,c:d+m-1}});var _=E.t||E["data-t"]||"";if(!I.length){d+=m;continue}if(I=B7(I),p.s.r>u&&(p.s.r=u),p.e.r<u&&(p.e.r=u),p.s.c>d&&(p.s.c=d),p.e.c<d&&(p.e.c=d),!I.length){d+=m;continue}var B={t:"s",v:I};n.raw||!I.trim().length||_=="s"||(I==="TRUE"?B={t:"b",v:!0}:I==="FALSE"?B={t:"b",v:!1}:isNaN(zc(I))?isNaN(mp(I).getDate())||(B={t:"d",v:ws(I)},n.cellDates||(B={t:"n",v:qa(B.v)}),B.z=n.dateNF||kn[14]):B={t:"n",v:zc(I)}),n.dense?(r[u]||(r[u]=[]),r[u][d]=B):r[Dn({r:u,c:d})]=B,d+=m}}}}return r["!ref"]=Gn(p),y.length&&(r["!merges"]=y),r}function _0e(t,e,n,r){for(var s=t["!merges"]||[],a=[],i=e.s.c;i<=e.e.c;++i){for(var o=0,l=0,u=0;u<s.length;++u)if(!(s[u].s.r>n||s[u].s.c>i)&&!(s[u].e.r<n||s[u].e.c<i)){if(s[u].s.r<n||s[u].s.c<i){o=-1;break}o=s[u].e.r-s[u].s.r+1,l=s[u].e.c-s[u].s.c+1;break}if(!(o<0)){var d=Dn({r:n,c:i}),h=r.dense?(t[n]||[])[i]:t[d],m=h&&h.v!=null&&(h.h||j4(h.w||(nd(h),h.w)||""))||"",p={};o>1&&(p.rowspan=o),l>1&&(p.colspan=l),r.editable?m='<span contenteditable="true">'+m+"</span>":h&&(p["data-t"]=h&&h.t||"z",h.v!=null&&(p["data-v"]=h.v),h.z!=null&&(p["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+h.l.Target+'">'+m+"</a>")),p.id=(r.id||"sjs")+"-"+d,a.push(Ot("td",m,p))}}var y="<tr>";return y+a.join("")+"</tr>"}var S0e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',T0e="</body></html>";function N0e(t,e){var n=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!n||n.length==0)throw new Error("Invalid HTML: could not find <table>");if(n.length==1)return Yf(aR(n[0],e),e);var r=pB();return n.forEach(function(s,a){gB(r,aR(s,e),"Sheet"+(a+1))}),r}function B0e(t,e,n){var r=[];return r.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function iH(t,e){var n=e||{},r=n.header!=null?n.header:S0e,s=n.footer!=null?n.footer:T0e,a=[r],i=zo(t["!ref"]);n.dense=Array.isArray(t),a.push(B0e(t,i,n));for(var o=i.s.r;o<=i.e.r;++o)a.push(_0e(t,i,o,n));return a.push("</table>"+s),a.join("")}function oH(t,e,n){var r=n||{},s=0,a=0;if(r.origin!=null)if(typeof r.origin=="number")s=r.origin;else{var i=typeof r.origin=="string"?Ms(r.origin):r.origin;s=i.r,a=i.c}var o=e.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:s,c:a}};if(t["!ref"]){var d=zo(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),s==-1&&(u.e.r=s=d.e.r+1)}var h=[],m=0,p=t["!rows"]||(t["!rows"]=[]),y=0,x=0,C=0,S=0,k=0,I=0;for(t["!cols"]||(t["!cols"]=[]);y<o.length&&x<l;++y){var F=o[y];if(iR(F)){if(r.display)continue;p[x]={hidden:!0}}var U=F.children;for(C=S=0;C<U.length;++C){var R=U[C];if(!(r.display&&iR(R))){var E=R.hasAttribute("data-v")?R.getAttribute("data-v"):R.hasAttribute("v")?R.getAttribute("v"):B7(R.innerHTML),_=R.getAttribute("data-z")||R.getAttribute("z");for(m=0;m<h.length;++m){var B=h[m];B.s.c==S+a&&B.s.r<x+s&&x+s<=B.e.r&&(S=B.e.c+1-a,m=-1)}I=+R.getAttribute("colspan")||1,((k=+R.getAttribute("rowspan")||1)>1||I>1)&&h.push({s:{r:x+s,c:S+a},e:{r:x+s+(k||1)-1,c:S+a+(I||1)-1}});var j={t:"s",v:E},D=R.getAttribute("data-t")||R.getAttribute("t")||"";E!=null&&(E.length==0?j.t=D||"z":r.raw||E.trim().length==0||D=="s"||(E==="TRUE"?j={t:"b",v:!0}:E==="FALSE"?j={t:"b",v:!1}:isNaN(zc(E))?isNaN(mp(E).getDate())||(j={t:"d",v:ws(E)},r.cellDates||(j={t:"n",v:qa(j.v)}),j.z=r.dateNF||kn[14]):j={t:"n",v:zc(E)})),j.z===void 0&&_!=null&&(j.z=_);var L="",Q=R.getElementsByTagName("A");if(Q&&Q.length)for(var H=0;H<Q.length&&!(Q[H].hasAttribute("href")&&(L=Q[H].getAttribute("href"),L.charAt(0)!="#"));++H);L&&L.charAt(0)!="#"&&(j.l={Target:L}),r.dense?(t[x+s]||(t[x+s]=[]),t[x+s][S+a]=j):t[Dn({c:S+a,r:x+s})]=j,u.e.c<S+a&&(u.e.c=S+a),S+=I}}++x}return h.length&&(t["!merges"]=(t["!merges"]||[]).concat(h)),u.e.r=Math.max(u.e.r,x-1+s),t["!ref"]=Gn(u),x>=l&&(t["!fullref"]=Gn((u.e.r=o.length-y+x-1+s,u))),t}function lH(t,e){var n=e||{},r=n.dense?[]:{};return oH(r,t,e)}function k0e(t,e){return Yf(lH(t,e),e)}function iR(t){var e="",n=I0e(t);return n&&(e=n(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function I0e(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function F0e(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(r,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),n=Nr(e.replace(/<[^>]*>/g,""));return[n]}var oR={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function cH(t,e){var n=e||{},r=Q4(t),s=[],a,i,o={name:""},l="",u=0,d,h,m={},p=[],y=n.dense?[]:{},x,C,S={value:""},k="",I=0,F=[],U=-1,R=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},_=0,B={},j=[],D={},L=0,Q=0,H=[],te=1,Y=1,ne=[],V={Names:[]},J={},K=["",""],ie=[],O={},W="",Z=0,re=!1,se=!1,de=0;for(rv.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");x=rv.exec(r);)switch(x[3]=x[3].replace(/_.*$/,"")){case"table":case"工作表":x[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?y["!ref"]=Gn(E):y["!ref"]="A1:A1",n.sheetRows>0&&n.sheetRows<=E.e.r&&(y["!fullref"]=y["!ref"],E.e.r=n.sheetRows-1,y["!ref"]=Gn(E)),j.length&&(y["!merges"]=j),H.length&&(y["!rows"]=H),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),p.push(d.name),m[d.name]=y,se=!1):x[0].charAt(x[0].length-2)!=="/"&&(d=Mn(x[0],!1),U=R=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,y=n.dense?[]:{},j=[],H=[],se=!0);break;case"table-row-group":x[1]==="/"?--_:++_;break;case"table-row":case"行":if(x[1]==="/"){U+=te,te=1;break}if(h=Mn(x[0],!1),h.行号?U=h.行号-1:U==-1&&(U=0),te=+h["number-rows-repeated"]||1,te<10)for(de=0;de<te;++de)_>0&&(H[U+de]={level:_});R=-1;break;case"covered-table-cell":x[1]!=="/"&&++R,n.sheetStubs&&(n.dense?(y[U]||(y[U]=[]),y[U][R]={t:"z"}):y[Dn({r:U,c:R})]={t:"z"}),k="",F=[];break;case"table-cell":case"数据":if(x[0].charAt(x[0].length-2)==="/")++R,S=Mn(x[0],!1),Y=parseInt(S["number-columns-repeated"]||"1",10),C={t:"z",v:null},S.formula&&n.cellFormula!=!1&&(C.f=nR(Nr(S.formula))),(S.数据类型||S["value-type"])=="string"&&(C.t="s",C.v=Nr(S["string-value"]||""),n.dense?(y[U]||(y[U]=[]),y[U][R]=C):y[Dn({r:U,c:R})]=C),R+=Y-1;else if(x[1]!=="/"){++R,k="",I=0,F=[],Y=1;var pe=te?U+te-1:U;if(R>E.e.c&&(E.e.c=R),R<E.s.c&&(E.s.c=R),U<E.s.r&&(E.s.r=U),pe>E.e.r&&(E.e.r=pe),S=Mn(x[0],!1),ie=[],O={},C={t:S.数据类型||S["value-type"],v:null},n.cellFormula)if(S.formula&&(S.formula=Nr(S.formula)),S["number-matrix-columns-spanned"]&&S["number-matrix-rows-spanned"]&&(L=parseInt(S["number-matrix-rows-spanned"],10)||0,Q=parseInt(S["number-matrix-columns-spanned"],10)||0,D={s:{r:U,c:R},e:{r:U+L-1,c:R+Q-1}},C.F=Gn(D),ne.push([D,C.F])),S.formula)C.f=nR(S.formula);else for(de=0;de<ne.length;++de)U>=ne[de][0].s.r&&U<=ne[de][0].e.r&&R>=ne[de][0].s.c&&R<=ne[de][0].e.c&&(C.F=ne[de][1]);switch((S["number-columns-spanned"]||S["number-rows-spanned"])&&(L=parseInt(S["number-rows-spanned"],10)||0,Q=parseInt(S["number-columns-spanned"],10)||0,D={s:{r:U,c:R},e:{r:U+L-1,c:R+Q-1}},j.push(D)),S["number-columns-repeated"]&&(Y=parseInt(S["number-columns-repeated"],10)),C.t){case"boolean":C.t="b",C.v=vs(S["boolean-value"]);break;case"float":C.t="n",C.v=parseFloat(S.value);break;case"percentage":C.t="n",C.v=parseFloat(S.value);break;case"currency":C.t="n",C.v=parseFloat(S.value);break;case"date":C.t="d",C.v=ws(S["date-value"]),n.cellDates||(C.t="n",C.v=qa(C.v)),C.z="m/d/yy";break;case"time":C.t="n",C.v=aae(S["time-value"])/86400,n.cellDates&&(C.t="d",C.v=fC(C.v)),C.z="HH:MM:SS";break;case"number":C.t="n",C.v=parseFloat(S.数据数值);break;default:if(C.t==="string"||C.t==="text"||!C.t)C.t="s",S["string-value"]!=null&&(k=Nr(S["string-value"]),F=[]);else throw new Error("Unsupported value type "+C.t)}}else{if(re=!1,C.t==="s"&&(C.v=k||"",F.length&&(C.R=F),re=I==0),J.Target&&(C.l=J),ie.length>0&&(C.c=ie,ie=[]),k&&n.cellText!==!1&&(C.w=k),re&&(C.t="z",delete C.v),(!re||n.sheetStubs)&&!(n.sheetRows&&n.sheetRows<=U))for(var be=0;be<te;++be){if(Y=parseInt(S["number-columns-repeated"]||"1",10),n.dense)for(y[U+be]||(y[U+be]=[]),y[U+be][R]=be==0?C:bs(C);--Y>0;)y[U+be][R+Y]=bs(C);else for(y[Dn({r:U+be,c:R})]=C;--Y>0;)y[Dn({r:U+be,c:R+Y})]=bs(C);E.e.c<=R&&(E.e.c=R)}Y=parseInt(S["number-columns-repeated"]||"1",10),R+=Y-1,Y=0,C={},k="",F=[]}J={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(x[1]==="/"){if((a=s.pop())[0]!==x[3])throw"Bad state: "+a}else x[0].charAt(x[0].length-2)!=="/"&&s.push([x[3],!0]);break;case"annotation":if(x[1]==="/"){if((a=s.pop())[0]!==x[3])throw"Bad state: "+a;O.t=k,F.length&&(O.R=F),O.a=W,ie.push(O)}else x[0].charAt(x[0].length-2)!=="/"&&s.push([x[3],!1]);W="",Z=0,k="",I=0,F=[];break;case"creator":x[1]==="/"?W=r.slice(Z,x.index):Z=x.index+x[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(x[1]==="/"){if((a=s.pop())[0]!==x[3])throw"Bad state: "+a}else x[0].charAt(x[0].length-2)!=="/"&&s.push([x[3],!1]);k="",I=0,F=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(x[1]==="/"){if(B[o.name]=l,(a=s.pop())[0]!==x[3])throw"Bad state: "+a}else x[0].charAt(x[0].length-2)!=="/"&&(l="",o=Mn(x[0],!1),s.push([x[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":i=Mn(x[0],!1),l+=oR[x[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":i=Mn(x[0],!1),l+=oR[x[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(x[0].slice(-2)==="/>")break;if(x[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=r.slice(u,x.index);break}else u=x.index+x[0].length;break;case"named-range":i=Mn(x[0],!1),K=J_(i["cell-range-address"]);var Se={Name:i.name,Ref:K[0]+"!"+K[1]};se&&(Se.Sheet=p.length),V.Names.push(Se);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(x[1]==="/"&&(!S||!S["string-value"])){var me=F0e(r.slice(I,x.index));k=(k.length>0?k+`
`:"")+me[0]}else Mn(x[0],!1),I=x.index+x[0].length;break;case"s":break;case"database-range":if(x[1]==="/")break;try{K=J_(Mn(x[0])["target-range-address"]),m[K[0]]["!autofilter"]={ref:K[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(x[1]!=="/"){if(J=Mn(x[0],!1),!J.href)break;J.Target=Nr(J.href),delete J.href,J.Target.charAt(0)=="#"&&J.Target.indexOf(".")>-1?(K=J_(J.Target.slice(1)),J.Target="#"+K[0]+"!"+K[1]):J.Target.match(/^\.\.[\\\/]/)&&(J.Target=J.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(x[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(n.WTF)throw new Error(x)}}var ce={Sheets:m,SheetNames:p,Workbook:V};return n.bookSheets&&delete ce.Sheets,ce}function lR(t,e){e=e||{},Xl(t,"META-INF/manifest.xml")&&aie(Ta(t,"META-INF/manifest.xml"),e);var n=pl(t,"content.xml");if(!n)throw new Error("Missing content.xml in ODS / UOF file");var r=cH(us(n),e);return Xl(t,"meta.xml")&&(r.Props=Z7(Ta(t,"meta.xml"))),r}function cR(t,e){return cH(t,e)}var D0e=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+nv({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return ga+e}}(),uR=function(){var t=function(a){return ts(a).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,n=`          <table:covered-table-cell/>
`,r=function(a,i,o){var l=[];l.push('      <table:table table:name="'+ts(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,h=zo(a["!ref"]||"A1"),m=a["!merges"]||[],p=0,y=Array.isArray(a);if(a["!cols"])for(d=0;d<=h.e.c;++d)l.push("        <table:table-column"+(a["!cols"][d]?' table:style-name="co'+a["!cols"][d].ods+'"':"")+`></table:table-column>
`);var x="",C=a["!rows"]||[];for(u=0;u<h.s.r;++u)x=C[u]?' table:style-name="ro'+C[u].ods+'"':"",l.push("        <table:table-row"+x+`></table:table-row>
`);for(;u<=h.e.r;++u){for(x=C[u]?' table:style-name="ro'+C[u].ods+'"':"",l.push("        <table:table-row"+x+`>
`),d=0;d<h.s.c;++d)l.push(e);for(;d<=h.e.c;++d){var S=!1,k={},I="";for(p=0;p!=m.length;++p)if(!(m[p].s.c>d)&&!(m[p].s.r>u)&&!(m[p].e.c<d)&&!(m[p].e.r<u)){(m[p].s.c!=d||m[p].s.r!=u)&&(S=!0),k["table:number-columns-spanned"]=m[p].e.c-m[p].s.c+1,k["table:number-rows-spanned"]=m[p].e.r-m[p].s.r+1;break}if(S){l.push(n);continue}var F=Dn({r:u,c:d}),U=y?(a[u]||[])[d]:a[F];if(U&&U.f&&(k["table:formula"]=ts(ZAe(U.f)),U.F&&U.F.slice(0,F.length)==F)){var R=zo(U.F);k["table:number-matrix-columns-spanned"]=R.e.c-R.s.c+1,k["table:number-matrix-rows-spanned"]=R.e.r-R.s.r+1}if(!U){l.push(e);continue}switch(U.t){case"b":I=U.v?"TRUE":"FALSE",k["office:value-type"]="boolean",k["office:boolean-value"]=U.v?"true":"false";break;case"n":I=U.w||String(U.v||0),k["office:value-type"]="float",k["office:value"]=U.v||0;break;case"s":case"str":I=U.v==null?"":U.v,k["office:value-type"]="string";break;case"d":I=U.w||ws(U.v).toISOString(),k["office:value-type"]="date",k["office:date-value"]=ws(U.v).toISOString(),k["table:style-name"]="ce1";break;default:l.push(e);continue}var E=t(I);if(U.l&&U.l.Target){var _=U.l.Target;_=_.charAt(0)=="#"?"#"+ede(_.slice(1)):_,_.charAt(0)!="#"&&!_.match(/^\w+:/)&&(_="../"+_),E=Ot("text:a",E,{"xlink:href":_.replace(/&/g,"&amp;")})}l.push("          "+Ot("table:table-cell",Ot("text:p",E,{}),k)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},s=function(a,i){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var h=u["!cols"][d];if(h.width==null&&h.wpx==null&&h.wch==null)continue;Hf(h),h.ods=o;var m=u["!cols"][d].wpx+"px";a.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+m+`"/>
`),a.push(`  </style:style>
`),++o}}});var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=l;var h=u["!rows"][d].hpx+"px";a.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),a.push(`  </style:style>
`),++l}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(i,o){var l=[ga],u=nv({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=nv({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+d+`>
`),l.push(J7().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),s(l,i),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var h=0;h!=i.SheetNames.length;++h)l.push(r(i.Sheets[i.SheetNames[h]],i,h));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function uH(t,e){if(e.bookType=="fods")return uR(t,e);var n=M4(),r="",s=[],a=[];return r="mimetype",Xn(n,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",Xn(n,r,uR(t,e)),s.push([r,"text/xml"]),a.push([r,"ContentFile"]),r="styles.xml",Xn(n,r,D0e(t,e)),s.push([r,"text/xml"]),a.push([r,"StylesFile"]),r="meta.xml",Xn(n,r,ga+J7()),s.push([r,"text/xml"]),a.push([r,"MetadataFile"]),r="manifest.rdf",Xn(n,r,lie(a)),s.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",Xn(n,r,iie(s)),n}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function o0(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function nT(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):us(Wf(t))}function R0e(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):ml(Qu(t))}function L0e(t,e){e:for(var n=0;n<=t.length-e.length;++n){for(var r=0;r<e.length;++r)if(t[n+r]!=e[r])continue e;return!0}return!1}function zf(t){var e=t.reduce(function(s,a){return s+a.length},0),n=new Uint8Array(e),r=0;return t.forEach(function(s){n.set(s,r),r+=s.length}),n}function AR(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function U0e(t,e){for(var n=(t[e+15]&127)<<7|t[e+14]>>1,r=t[e+14]&1,s=e+13;s>=e;--s)r=r*256+t[s];return(t[e+15]&128?-r:r)*Math.pow(10,n-6176)}function M0e(t,e,n){var r=Math.floor(n==0?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,s=n/Math.pow(10,r-6176);t[e+15]|=r>>7,t[e+14]|=(r&127)<<1;for(var a=0;s>=1;++a,s/=256)t[e+a]=s&255;t[e+15]|=n>=0?0:128}function uv(t,e){var n=e?e[0]:0,r=t[n]&127;e:if(t[n++]>=128&&(r|=(t[n]&127)<<7,t[n++]<128||(r|=(t[n]&127)<<14,t[n++]<128)||(r|=(t[n]&127)<<21,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,28),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,35),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,42),++n,t[n++]<128)))break e;return e&&(e[0]=n),r}function Jr(t){var e=new Uint8Array(7);e[0]=t&127;var n=1;e:if(t>127){if(e[n-1]|=128,e[n]=t>>7&127,++n,t<=16383||(e[n-1]|=128,e[n]=t>>14&127,++n,t<=2097151)||(e[n-1]|=128,e[n]=t>>21&127,++n,t<=268435455)||(e[n-1]|=128,e[n]=t/256>>>21&127,++n,t<=34359738367)||(e[n-1]|=128,e[n]=t/65536>>>21&127,++n,t<=4398046511103))break e;e[n-1]|=128,e[n]=t/16777216>>>21&127,++n}return e.slice(0,n)}function ea(t){var e=0,n=t[e]&127;e:if(t[e++]>=128){if(n|=(t[e]&127)<<7,t[e++]<128||(n|=(t[e]&127)<<14,t[e++]<128)||(n|=(t[e]&127)<<21,t[e++]<128))break e;n|=(t[e]&127)<<28}return n}function Ur(t){for(var e=[],n=[0];n[0]<t.length;){var r=n[0],s=uv(t,n),a=s&7;s=Math.floor(s/8);var i=0,o;if(s==0)break;switch(a){case 0:{for(var l=n[0];t[n[0]++]>=128;);o=t.slice(l,n[0])}break;case 5:i=4,o=t.slice(n[0],n[0]+i),n[0]+=i;break;case 1:i=8,o=t.slice(n[0],n[0]+i),n[0]+=i;break;case 2:i=uv(t,n),o=t.slice(n[0],n[0]+i),n[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(r))}var u={data:o,type:a};e[s]==null?e[s]=[u]:e[s].push(u)}return e}function xi(t){var e=[];return t.forEach(function(n,r){n.forEach(function(s){s.data&&(e.push(Jr(r*8+s.type)),s.type==2&&e.push(Jr(s.data.length)),e.push(s.data))})}),zf(e)}function uB(t,e){return(t==null?void 0:t.map(function(n){return e(n.data)}))||[]}function Wl(t){for(var e,n=[],r=[0];r[0]<t.length;){var s=uv(t,r),a=Ur(t.slice(r[0],r[0]+s));r[0]+=s;var i={id:ea(a[1][0].data),messages:[]};a[2].forEach(function(o){var l=Ur(o.data),u=ea(l[3][0].data);i.messages.push({meta:l,data:t.slice(r[0],r[0]+u)}),r[0]+=u}),(e=a[3])!=null&&e[0]&&(i.merge=ea(a[3][0].data)>>>0>0),n.push(i)}return n}function rm(t){var e=[];return t.forEach(function(n){var r=[];r[1]=[{data:Jr(n.id),type:0}],r[2]=[],n.merge!=null&&(r[3]=[{data:Jr(+!!n.merge),type:0}]);var s=[];n.messages.forEach(function(i){s.push(i.data),i.meta[3]=[{type:0,data:Jr(i.data.length)}],r[2].push({data:xi(i.meta),type:2})});var a=xi(r);e.push(Jr(a.length)),e.push(a),s.forEach(function(i){return e.push(i)})}),zf(e)}function P0e(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var n=[0],r=uv(e,n),s=[];n[0]<e.length;){var a=e[n[0]]&3;if(a==0){var i=e[n[0]++]>>2;if(i<60)++i;else{var o=i-59;i=e[n[0]],o>1&&(i|=e[n[0]+1]<<8),o>2&&(i|=e[n[0]+2]<<16),o>3&&(i|=e[n[0]+3]<<24),i>>>=0,i++,n[0]+=o}s.push(e.slice(n[0],n[0]+i)),n[0]+=i;continue}else{var l=0,u=0;if(a==1?(u=(e[n[0]]>>2&7)+4,l=(e[n[0]++]&224)<<3,l|=e[n[0]++]):(u=(e[n[0]++]>>2)+1,a==2?(l=e[n[0]]|e[n[0]+1]<<8,n[0]+=2):(l=(e[n[0]]|e[n[0]+1]<<8|e[n[0]+2]<<16|e[n[0]+3]<<24)>>>0,n[0]+=4)),s=[zf(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(s.push(s[0].slice(-l)),u-=l;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-l,-l+u))}}var d=zf(s);if(d.length!=r)throw new Error("Unexpected length: ".concat(d.length," != ").concat(r));return d}function Yl(t){for(var e=[],n=0;n<t.length;){var r=t[n++],s=t[n]|t[n+1]<<8|t[n+2]<<16;n+=3,e.push(P0e(r,t.slice(n,n+s))),n+=s}if(n!==t.length)throw new Error("data is not a valid framed stream!");return zf(e)}function sm(t){for(var e=[],n=0;n<t.length;){var r=Math.min(t.length-n,268435455),s=new Uint8Array(4);e.push(s);var a=Jr(r),i=a.length;e.push(a),r<=60?(i++,e.push(new Uint8Array([r-1<<2]))):r<=256?(i+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(i+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(i+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(i+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(t.slice(n,n+r)),i+=r,s[0]=0,s[1]=i&255,s[2]=i>>8&255,s[3]=i>>16&255,n+=r}return zf(e)}function O0e(t,e,n,r){var s=o0(t),a=s.getUint32(4,!0),i=(r>1?12:8)+AR(a&(r>1?3470:398))*4,o=-1,l=-1,u=NaN,d=new Date(2001,0,1);a&512&&(o=s.getUint32(i,!0),i+=4),i+=AR(a&(r>1?12288:4096))*4,a&16&&(l=s.getUint32(i,!0),i+=4),a&32&&(u=s.getFloat64(i,!0),i+=8),a&64&&(d.setTime(d.getTime()+s.getFloat64(i,!0)*1e3),i+=8);var h;switch(t[2]){case 0:break;case 2:h={t:"n",v:u};break;case 3:h={t:"s",v:e[l]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:u>0};break;case 7:h={t:"n",v:u/86400};break;case 8:h={t:"e",v:0};break;case 9:if(o>-1)h={t:"s",v:n[o]};else if(l>-1)h={t:"s",v:e[l]};else if(!isNaN(u))h={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return h}function j0e(t,e,n){var r=o0(t),s=r.getUint32(8,!0),a=12,i=-1,o=-1,l=NaN,u=NaN,d=new Date(2001,0,1);s&1&&(l=U0e(t,a),a+=16),s&2&&(u=r.getFloat64(a,!0),a+=8),s&4&&(d.setTime(d.getTime()+r.getFloat64(a,!0)*1e3),a+=8),s&8&&(o=r.getUint32(a,!0),a+=4),s&16&&(i=r.getUint32(a,!0),a+=4);var h;switch(t[1]){case 0:break;case 2:h={t:"n",v:l};break;case 3:h={t:"s",v:e[o]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:u>0};break;case 7:h={t:"n",v:u/86400};break;case 8:h={t:"e",v:0};break;case 9:if(i>-1)h={t:"s",v:n[i]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)));break;case 10:h={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)))}return h}function eS(t,e){var n=new Uint8Array(32),r=o0(n),s=12,a=0;switch(n[0]=5,t.t){case"n":n[1]=2,M0e(n,s,t.v),a|=1,s+=16;break;case"b":n[1]=6,r.setFloat64(s,t.v?1:0,!0),a|=2,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[1]=3,r.setUint32(s,e.indexOf(t.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(8,a,!0),n.slice(0,s)}function tS(t,e){var n=new Uint8Array(32),r=o0(n),s=12,a=0;switch(n[0]=3,t.t){case"n":n[2]=2,r.setFloat64(s,t.v,!0),a|=32,s+=8;break;case"b":n[2]=6,r.setFloat64(s,t.v?1:0,!0),a|=32,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[2]=3,r.setUint32(s,e.indexOf(t.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(4,a,!0),n.slice(0,s)}function Q0e(t,e,n){switch(t[0]){case 0:case 1:case 2:case 3:return O0e(t,e,n,t[0]);case 5:return j0e(t,e,n);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Ki(t){var e=Ur(t);return uv(e[1][0].data)}function dR(t,e){var n=Ur(e.data),r=ea(n[1][0].data),s=n[3],a=[];return(s||[]).forEach(function(i){var o=Ur(i.data),l=ea(o[1][0].data)>>>0;switch(r){case 1:a[l]=nT(o[3][0].data);break;case 8:{var u=t[Ki(o[9][0].data)][0],d=Ur(u.data),h=t[Ki(d[1][0].data)][0],m=ea(h.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var p=Ur(h.data);a[l]=p[3].map(function(y){return nT(y.data)}).join("")}break}}),a}function H0e(t,e){var n,r,s,a,i,o,l,u,d,h,m,p,y,x,C=Ur(t),S=ea(C[1][0].data)>>>0,k=ea(C[2][0].data)>>>0,I=((r=(n=C[8])==null?void 0:n[0])==null?void 0:r.data)&&ea(C[8][0].data)>0||!1,F,U;if((a=(s=C[7])==null?void 0:s[0])!=null&&a.data&&e!=0)F=(o=(i=C[7])==null?void 0:i[0])==null?void 0:o.data,U=(u=(l=C[6])==null?void 0:l[0])==null?void 0:u.data;else if((h=(d=C[4])==null?void 0:d[0])!=null&&h.data&&e!=1)F=(p=(m=C[4])==null?void 0:m[0])==null?void 0:p.data,U=(x=(y=C[3])==null?void 0:y[0])==null?void 0:x.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var R=I?4:1,E=o0(F),_=[],B=0;B<F.length/2;++B){var j=E.getUint16(B*2,!0);j<65535&&_.push([B,j])}if(_.length!=k)throw"Expected ".concat(k," cells, found ").concat(_.length);var D=[];for(B=0;B<_.length-1;++B)D[_[B][0]]=U.subarray(_[B][1]*R,_[B+1][1]*R);return _.length>=1&&(D[_[_.length-1][0]]=U.subarray(_[_.length-1][1]*R)),{R:S,cells:D}}function V0e(t,e){var n,r=Ur(e.data),s=(n=r==null?void 0:r[7])!=null&&n[0]?ea(r[7][0].data)>>>0>0?1:0:-1,a=uB(r[5],function(i){return H0e(i,s)});return{nrows:ea(r[4][0].data)>>>0,data:a.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(l,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=l}),i},[])}}function z0e(t,e,n){var r,s=Ur(e.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(ea(s[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(a.e.c=(ea(s[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));n["!ref"]=Gn(a);var i=Ur(s[4][0].data),o=dR(t,t[Ki(i[4][0].data)][0]),l=(r=i[17])!=null&&r[0]?dR(t,t[Ki(i[17][0].data)][0]):[],u=Ur(i[3][0].data),d=0;u[1].forEach(function(h){var m=Ur(h.data),p=t[Ki(m[2][0].data)][0],y=ea(p.meta[1][0].data);if(y!=6002)throw new Error("6001 unexpected reference to ".concat(y));var x=V0e(t,p);x.data.forEach(function(C,S){C.forEach(function(k,I){var F=Dn({r:d+S,c:I}),U=Q0e(k,o,l);U&&(n[F]=U)})}),d+=x.nrows})}function G0e(t,e){var n=Ur(e.data),r={"!ref":"A1"},s=t[Ki(n[2][0].data)],a=ea(s[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return z0e(t,s[0],r),r}function q0e(t,e){var n,r=Ur(e.data),s={name:(n=r[1])!=null&&n[0]?nT(r[1][0].data):"",sheets:[]},a=uB(r[2],Ki);return a.forEach(function(i){t[i].forEach(function(o){var l=ea(o.meta[1][0].data);l==6e3&&s.sheets.push(G0e(t,o))})}),s}function K0e(t,e){var n=pB(),r=Ur(e.data),s=uB(r[1],Ki);if(s.forEach(function(a){t[a].forEach(function(i){var o=ea(i.meta[1][0].data);if(o==2){var l=q0e(t,i);l.sheets.forEach(function(u,d){gB(n,u,d==0?l.name:l.name+"_"+d,!0)})}})}),n.SheetNames.length==0)throw new Error("Empty NUMBERS file");return n}function nS(t){var e,n,r,s,a={},i=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var u;try{u=Yl(l.content)}catch(h){return console.log("?? "+l.content.length+" "+(h.message||h))}var d;try{d=Wl(u)}catch(h){return console.log("## "+(h.message||h))}d.forEach(function(h){a[h.id]=h.messages,i.push(h.id)})}}),!i.length)throw new Error("File has no messages");var o=((s=(r=(n=(e=a==null?void 0:a[1])==null?void 0:e[0])==null?void 0:n.meta)==null?void 0:r[1])==null?void 0:s[0].data)&&ea(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||i.forEach(function(l){a[l].forEach(function(u){var d=ea(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return K0e(a,o)}function $0e(t,e,n){var r,s,a,i;if(!((r=t[6])!=null&&r[0])||!((s=t[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(a=t[8])==null?void 0:a[0])==null?void 0:i.data)&&ea(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=o0(t[7][0].data),d=0,h=[],m=o0(t[4][0].data),p=0,y=[],x=0;x<e.length;++x){if(e[x]==null){u.setUint16(x*2,65535,!0),m.setUint16(x*2,65535);continue}u.setUint16(x*2,d,!0),m.setUint16(x*2,p,!0);var C,S;switch(typeof e[x]){case"string":C=eS({t:"s",v:e[x]},n),S=tS({t:"s",v:e[x]},n);break;case"number":C=eS({t:"n",v:e[x]},n),S=tS({t:"n",v:e[x]},n);break;case"boolean":C=eS({t:"b",v:e[x]},n),S=tS({t:"b",v:e[x]},n);break;default:throw new Error("Unsupported value "+e[x])}h.push(C),d+=C.length,y.push(S),p+=S.length,++l}for(t[2][0].data=Jr(l);x<t[7][0].data.length/2;++x)u.setUint16(x*2,65535,!0),m.setUint16(x*2,65535,!0);return t[6][0].data=zf(h),t[3][0].data=zf(y),l}function W0e(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=zo(n["!ref"]);r.s.r=r.s.c=0;var s=!1;r.e.c>9&&(s=!0,r.e.c=9),r.e.r>49&&(s=!0,r.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(Gn(r)));var a=qw(n,{range:r,header:1}),i=["~Sh33tJ5~"];a.forEach(function(W){return W.forEach(function(Z){typeof Z=="string"&&i.push(Z)})});var o={},l=[],u=xn.read(e.numbers,{type:"base64"});u.FileIndex.map(function(W,Z){return[W,u.FullPaths[Z]]}).forEach(function(W){var Z=W[0],re=W[1];if(Z.type==2&&Z.name.match(/\.iwa/)){var se=Z.content,de=Yl(se),pe=Wl(de);pe.forEach(function(be){l.push(be.id),o[be.id]={deps:[],location:re,type:ea(be.messages[0].meta[1][0].data)}})}}),l.sort(function(W,Z){return W-Z});var d=l.filter(function(W){return W>1}).map(function(W){return[W,Jr(W)]});u.FileIndex.map(function(W,Z){return[W,u.FullPaths[Z]]}).forEach(function(W){var Z=W[0];if(W[1],!!Z.name.match(/\.iwa/)){var re=Wl(Yl(Z.content));re.forEach(function(se){se.messages.forEach(function(de){d.forEach(function(pe){se.messages.some(function(be){return ea(be.meta[1][0].data)!=11006&&L0e(be.data,pe[1])})&&o[pe[0]].deps.push(se.id)})})})}});for(var h=xn.find(u,o[1].location),m=Wl(Yl(h.content)),p,y=0;y<m.length;++y){var x=m[y];x.id==1&&(p=x)}var C=Ki(Ur(p.messages[0].data)[1][0].data);for(h=xn.find(u,o[C].location),m=Wl(Yl(h.content)),y=0;y<m.length;++y)x=m[y],x.id==C&&(p=x);for(C=Ki(Ur(p.messages[0].data)[2][0].data),h=xn.find(u,o[C].location),m=Wl(Yl(h.content)),y=0;y<m.length;++y)x=m[y],x.id==C&&(p=x);for(C=Ki(Ur(p.messages[0].data)[2][0].data),h=xn.find(u,o[C].location),m=Wl(Yl(h.content)),y=0;y<m.length;++y)x=m[y],x.id==C&&(p=x);var S=Ur(p.messages[0].data);{S[6][0].data=Jr(r.e.r+1),S[7][0].data=Jr(r.e.c+1);var k=Ki(S[46][0].data),I=xn.find(u,o[k].location),F=Wl(Yl(I.content));{for(var U=0;U<F.length&&F[U].id!=k;++U);if(F[U].id!=k)throw"Bad ColumnRowUIDMapArchive";var R=Ur(F[U].messages[0].data);R[1]=[],R[2]=[],R[3]=[];for(var E=0;E<=r.e.c;++E){var _=[];_[1]=_[2]=[{type:0,data:Jr(E+420690)}],R[1].push({type:2,data:xi(_)}),R[2].push({type:0,data:Jr(E)}),R[3].push({type:0,data:Jr(E)})}R[4]=[],R[5]=[],R[6]=[];for(var B=0;B<=r.e.r;++B)_=[],_[1]=_[2]=[{type:0,data:Jr(B+726270)}],R[4].push({type:2,data:xi(_)}),R[5].push({type:0,data:Jr(B)}),R[6].push({type:0,data:Jr(B)});F[U].messages[0].data=xi(R)}I.content=sm(rm(F)),I.size=I.content.length,delete S[46];var j=Ur(S[4][0].data);{j[7][0].data=Jr(r.e.r+1);var D=Ur(j[1][0].data),L=Ki(D[2][0].data);I=xn.find(u,o[L].location),F=Wl(Yl(I.content));{if(F[0].id!=L)throw"Bad HeaderStorageBucket";var Q=Ur(F[0].messages[0].data);for(B=0;B<a.length;++B){var H=Ur(Q[2][0].data);H[1][0].data=Jr(B),H[4][0].data=Jr(a[B].length),Q[2][B]={type:Q[2][0].type,data:xi(H)}}F[0].messages[0].data=xi(Q)}I.content=sm(rm(F)),I.size=I.content.length;var te=Ki(j[2][0].data);I=xn.find(u,o[te].location),F=Wl(Yl(I.content));{if(F[0].id!=te)throw"Bad HeaderStorageBucket";for(Q=Ur(F[0].messages[0].data),E=0;E<=r.e.c;++E)H=Ur(Q[2][0].data),H[1][0].data=Jr(E),H[4][0].data=Jr(r.e.r+1),Q[2][E]={type:Q[2][0].type,data:xi(H)};F[0].messages[0].data=xi(Q)}I.content=sm(rm(F)),I.size=I.content.length;var Y=Ki(j[4][0].data);(function(){for(var W=xn.find(u,o[Y].location),Z=Wl(Yl(W.content)),re,se=0;se<Z.length;++se){var de=Z[se];de.id==Y&&(re=de)}var pe=Ur(re.messages[0].data);{pe[3]=[];var be=[];i.forEach(function(ce,Me){be[1]=[{type:0,data:Jr(Me)}],be[2]=[{type:0,data:Jr(1)}],be[3]=[{type:2,data:R0e(ce)}],pe[3].push({type:2,data:xi(be)})})}re.messages[0].data=xi(pe);var Se=rm(Z),me=sm(Se);W.content=me,W.size=W.content.length})();var ne=Ur(j[3][0].data);{var V=ne[1][0];delete ne[2];var J=Ur(V.data);{var K=Ki(J[2][0].data);(function(){for(var W=xn.find(u,o[K].location),Z=Wl(Yl(W.content)),re,se=0;se<Z.length;++se){var de=Z[se];de.id==K&&(re=de)}var pe=Ur(re.messages[0].data);{delete pe[6],delete ne[7];var be=new Uint8Array(pe[5][0].data);pe[5]=[];for(var Se=0,me=0;me<=r.e.r;++me){var ce=Ur(be);Se+=$0e(ce,a[me],i),ce[1][0].data=Jr(me),pe[5].push({data:xi(ce),type:2})}pe[1]=[{type:0,data:Jr(r.e.c+1)}],pe[2]=[{type:0,data:Jr(r.e.r+1)}],pe[3]=[{type:0,data:Jr(Se)}],pe[4]=[{type:0,data:Jr(r.e.r+1)}]}re.messages[0].data=xi(pe);var Me=rm(Z),Ze=sm(Me);W.content=Ze,W.size=W.content.length})()}V.data=xi(J)}j[3][0].data=xi(ne)}S[4][0].data=xi(j)}p.messages[0].data=xi(S);var ie=rm(m),O=sm(ie);return h.content=O,h.size=h.content.length,u}function AH(t){return function(n){for(var r=0;r!=t.length;++r){var s=t[r];n[s[0]]===void 0&&(n[s[0]]=s[1]),s[2]==="n"&&(n[s[0]]=Number(n[s[0]]))}}}function AB(t){AH([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function dB(t){AH([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function Y0e(t){return cr.WS.indexOf(t)>-1?"sheet":t==cr.CS?"chart":t==cr.DS?"dialog":t==cr.MS?"macro":t&&t.length?t:"sheet"}function X0e(t,e){if(!t)return 0;try{t=e.map(function(r){return r.id||(r.id=r.strRelID),[r.name,t["!id"][r.id].Target,Y0e(t["!id"][r.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function J0e(t,e,n,r,s,a,i,o,l,u,d,h){try{a[r]=Sx(pl(t,n,!0),e);var m=Ta(t,e),p;switch(o){case"sheet":p=yhe(m,e,s,l,a[r],u,d,h);break;case"chart":if(p=whe(m,e,s,l,a[r],u,d,h),!p||!p["!drawel"])break;var y=nx(p["!drawel"].Target,e),x=sv(y),C=oue(pl(t,y,!0),Sx(pl(t,x,!0),y)),S=nx(C,y),k=sv(S);p=$fe(pl(t,S,!0),S,l,Sx(pl(t,k,!0),S),u,p);break;case"macro":p=bhe(m,e,s,l,a[r],u,d,h);break;case"dialog":p=Che(m,e,s,l,a[r],u,d,h);break;default:throw new Error("Unrecognized sheet type "+o)}i[r]=p;var I=[];a&&a[r]&&ta(a[r]).forEach(function(F){var U="";if(a[r][F].Type==cr.CMNT){U=nx(a[r][F].Target,e);var R=The(Ta(t,U,!0),U,l);if(!R||!R.length)return;XD(p,R,!1)}a[r][F].Type==cr.TCMNT&&(U=nx(a[r][F].Target,e),I=I.concat(cue(Ta(t,U,!0),l)))}),I&&I.length&&XD(p,I,!0,l.people||[])}catch(F){if(l.WTF)throw F}}function ql(t){return t.charAt(0)=="/"?t.slice(1):t}function Z0e(t,e){if(Lp(),e=e||{},AB(e),Xl(t,"META-INF/manifest.xml")||Xl(t,"objectdata.xml"))return lR(t,e);if(Xl(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof nS<"u"){if(t.FileIndex)return nS(t);var n=xn.utils.cfb_new();return xD(t).forEach(function(H){Xn(n,H,uae(t,H))}),nS(n)}throw new Error("Unsupported NUMBERS file")}if(!Xl(t,"[Content_Types].xml"))throw Xl(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Xl(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var r=xD(t),s=rie(pl(t,"[Content_Types].xml")),a=!1,i,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",Ta(t,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!Ta(t,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),a=!0}s.workbooks[0].slice(-3)=="bin"&&(a=!0);var l={},u={};if(!e.bookSheets&&!e.bookProps){if(Tx=[],s.sst)try{Tx=She(Ta(t,ql(s.sst)),s.sst,e)}catch(H){if(e.WTF)throw H}e.cellStyles&&s.themes.length&&(l=_he(pl(t,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],e)),s.style&&(u=Ehe(Ta(t,ql(s.style)),s.style,l,e))}s.links.map(function(H){try{var te=Sx(pl(t,sv(ql(H))),H);return Bhe(Ta(t,ql(H)),te,H,e)}catch{}});var d=vhe(Ta(t,ql(s.workbooks[0])),s.workbooks[0],e),h={},m="";s.coreprops.length&&(m=Ta(t,ql(s.coreprops[0]),!0),m&&(h=Z7(m)),s.extprops.length!==0&&(m=Ta(t,ql(s.extprops[0]),!0),m&&uie(m,h,e)));var p={};(!e.bookSheets||e.bookProps)&&s.custprops.length!==0&&(m=pl(t,ql(s.custprops[0]),!0),m&&(p=die(m,e)));var y={};if((e.bookSheets||e.bookProps)&&(d.Sheets?i=d.Sheets.map(function(te){return te.name}):h.Worksheets&&h.SheetNames.length>0&&(i=h.SheetNames),e.bookProps&&(y.Props=h,y.Custprops=p),e.bookSheets&&typeof i<"u"&&(y.SheetNames=i),e.bookSheets?y.SheetNames:e.bookProps))return y;i={};var x={};e.bookDeps&&s.calcchain&&(x=Nhe(Ta(t,ql(s.calcchain)),s.calcchain));var C=0,S={},k,I;{var F=d.Sheets;h.Worksheets=F.length,h.SheetNames=[];for(var U=0;U!=F.length;++U)h.SheetNames[U]=F[U].name}var R=a?"bin":"xml",E=s.workbooks[0].lastIndexOf("/"),_=(s.workbooks[0].slice(0,E+1)+"_rels/"+s.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");Xl(t,_)||(_="xl/_rels/workbook."+R+".rels");var B=Sx(pl(t,_,!0),_.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=khe(Ta(t,ql(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=Aue(Ta(t,ql(s.people[0])),e)),B&&(B=X0e(B,d.Sheets));var j=Ta(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(C=0;C!=h.Worksheets;++C){var D="sheet";if(B&&B[C]?(k="xl/"+B[C][1].replace(/[\/]?xl\//,""),Xl(t,k)||(k=B[C][1]),Xl(t,k)||(k=_.replace(/_rels\/.*$/,"")+B[C][1]),D=B[C][2]):(k="xl/worksheets/sheet"+(C+1-j)+"."+R,k=k.replace(/sheet0\./,"sheet.")),I=k.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(C!=e.sheets)continue e;break;case"string":if(h.SheetNames[C].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var L=!1,Q=0;Q!=e.sheets.length;++Q)typeof e.sheets[Q]=="number"&&e.sheets[Q]==C&&(L=1),typeof e.sheets[Q]=="string"&&e.sheets[Q].toLowerCase()==h.SheetNames[C].toLowerCase()&&(L=1);if(!L)continue e}}J0e(t,k,I,h.SheetNames[C],C,S,i,D,e,d,l,u)}return y={Directory:s,Workbook:d,Props:h,Custprops:p,Deps:x,Sheets:i,SheetNames:h.SheetNames,Strings:Tx,Styles:u,Themes:l,SSF:bs(kn)},e&&e.bookFiles&&(t.files?(y.keys=r,y.files=t.files):(y.keys=[],y.files={},t.FullPaths.forEach(function(H,te){H=H.replace(/^Root Entry[\/]/,""),y.keys.push(H),y.files[H]=t.FileIndex[te]}))),e&&e.bookVBA&&(s.vba.length>0?y.vbaraw=Ta(t,ql(s.vba[0]),!0):s.defaults&&s.defaults.bin===vue&&(y.vbaraw=Ta(t,"xl/vbaProject.bin",!0))),y}function eme(t,e){var n=e||{},r="Workbook",s=xn.find(t,r);try{if(r="/!DataSpaces/Version",s=xn.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(kle(s.content),r="/!DataSpaces/DataSpaceMap",s=xn.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);var a=Fle(s.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=xn.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);var i=Dle(s.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=xn.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);Lle(s.content)}catch{}if(r="/EncryptionInfo",s=xn.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);var o=Ule(s.content);if(r="/EncryptedPackage",s=xn.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,n.password||"",n);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,n.password||"",n);throw new Error("File is password-protected")}function tme(t,e){return e.bookType=="ods"?uH(t,e):e.bookType=="numbers"?W0e(t,e):e.bookType=="xlsb"?nme(t,e):rme(t,e)}function nme(t,e){Fm=1024,t&&!t.SSF&&(t.SSF=bs(kn)),t&&t.SSF&&(Lp(),uC(t.SSF),e.revssf=dC(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Nx?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n=e.bookType=="xlsb"?"bin":"xml",r=PQ.indexOf(e.bookType)>-1,s=X4();dB(e=e||{});var a=M4(),i="",o=0;if(e.cellXfs=[],Xf(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",Xn(a,i,eQ(t.Props,e)),s.coreprops.push(i),Zr(e.rels,2,i,cr.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,Xn(a,i,rQ(t.Props)),s.extprops.push(i),Zr(e.rels,3,i,cr.EXT_PROPS),t.Custprops!==t.Props&&ta(t.Custprops||{}).length>0&&(i="docProps/custom.xml",Xn(a,i,sQ(t.Custprops)),s.custprops.push(i),Zr(e.rels,4,i,cr.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},h=t.Sheets[t.SheetNames[o-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:i="xl/worksheets/sheet"+o+"."+n,Xn(a,i,Fhe(o-1,i,e,t,d)),s.sheets.push(i),Zr(e.wbrels,-1,"worksheets/sheet"+o+"."+n,cr.WS[0])}if(h){var p=h["!comments"],y=!1,x="";p&&p.length>0&&(x="xl/comments"+o+"."+n,Xn(a,x,Lhe(p,x)),s.comments.push(x),Zr(d,-1,"../comments"+o+"."+n,cr.CMNT),y=!0),h["!legacy"]&&y&&Xn(a,"xl/drawings/vmlDrawing"+o+".vml",UQ(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&Xn(a,sv(i),Wm(d))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+n,Xn(a,i,Rhe(e.Strings,i,e)),s.strs.push(i),Zr(e.wbrels,-1,"sharedStrings."+n,cr.SST)),i="xl/workbook."+n,Xn(a,i,Ihe(t,i)),s.workbooks.push(i),Zr(e.rels,1,i,cr.WB),i="xl/theme/theme1.xml",Xn(a,i,rB(t.Themes,e)),s.themes.push(i),Zr(e.wbrels,-1,"theme/theme1.xml",cr.THEME),i="xl/styles."+n,Xn(a,i,Dhe(t,i,e)),s.styles.push(i),Zr(e.wbrels,-1,"styles."+n,cr.STY),t.vbaraw&&r&&(i="xl/vbaProject.bin",Xn(a,i,t.vbaraw),s.vba.push(i),Zr(e.wbrels,-1,"vbaProject.bin",cr.VBA)),i="xl/metadata."+n,Xn(a,i,Uhe(i)),s.metadata.push(i),Zr(e.wbrels,-1,"metadata."+n,cr.XLMETA),Xn(a,"[Content_Types].xml",X7(s,e)),Xn(a,"_rels/.rels",Wm(e.rels)),Xn(a,"xl/_rels/workbook."+n+".rels",Wm(e.wbrels)),delete e.revssf,delete e.ssf,a}function rme(t,e){Fm=1024,t&&!t.SSF&&(t.SSF=bs(kn)),t&&t.SSF&&(Lp(),uC(t.SSF),e.revssf=dC(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Nx?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n="xml",r=PQ.indexOf(e.bookType)>-1,s=X4();dB(e=e||{});var a=M4(),i="",o=0;if(e.cellXfs=[],Xf(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",Xn(a,i,eQ(t.Props,e)),s.coreprops.push(i),Zr(e.rels,2,i,cr.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,Xn(a,i,rQ(t.Props)),s.extprops.push(i),Zr(e.rels,3,i,cr.EXT_PROPS),t.Custprops!==t.Props&&ta(t.Custprops||{}).length>0&&(i="docProps/custom.xml",Xn(a,i,sQ(t.Custprops)),s.custprops.push(i),Zr(e.rels,4,i,cr.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var h={"!id":{}},m=t.Sheets[t.SheetNames[o-1]],p=(m||{})["!type"]||"sheet";switch(p){case"chart":default:i="xl/worksheets/sheet"+o+"."+n,Xn(a,i,WQ(o-1,e,t,h)),s.sheets.push(i),Zr(e.wbrels,-1,"worksheets/sheet"+o+"."+n,cr.WS[0])}if(m){var y=m["!comments"],x=!1,C="";if(y&&y.length>0){var S=!1;y.forEach(function(k){k[1].forEach(function(I){I.T==!0&&(S=!0)})}),S&&(C="xl/threadedComments/threadedComment"+o+"."+n,Xn(a,C,uue(y,d,e)),s.threadedcomments.push(C),Zr(h,-1,"../threadedComments/threadedComment"+o+"."+n,cr.TCMNT)),C="xl/comments"+o+"."+n,Xn(a,C,MQ(y)),s.comments.push(C),Zr(h,-1,"../comments"+o+"."+n,cr.CMNT),x=!0}m["!legacy"]&&x&&Xn(a,"xl/drawings/vmlDrawing"+o+".vml",UQ(o,m["!comments"])),delete m["!comments"],delete m["!legacy"]}h["!id"].rId1&&Xn(a,sv(i),Wm(h))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+n,Xn(a,i,EQ(e.Strings,e)),s.strs.push(i),Zr(e.wbrels,-1,"sharedStrings."+n,cr.SST)),i="xl/workbook."+n,Xn(a,i,eH(t)),s.workbooks.push(i),Zr(e.rels,1,i,cr.WB),i="xl/theme/theme1.xml",Xn(a,i,rB(t.Themes,e)),s.themes.push(i),Zr(e.wbrels,-1,"theme/theme1.xml",cr.THEME),i="xl/styles."+n,Xn(a,i,FQ(t,e)),s.styles.push(i),Zr(e.wbrels,-1,"styles."+n,cr.STY),t.vbaraw&&r&&(i="xl/vbaProject.bin",Xn(a,i,t.vbaraw),s.vba.push(i),Zr(e.wbrels,-1,"vbaProject.bin",cr.VBA)),i="xl/metadata."+n,Xn(a,i,LQ()),s.metadata.push(i),Zr(e.wbrels,-1,"metadata."+n,cr.XLMETA),d.length>1&&(i="xl/persons/person.xml",Xn(a,i,due(d)),s.people.push(i),Zr(e.wbrels,-1,"persons/person.xml",cr.PEOPLE)),Xn(a,"[Content_Types].xml",X7(s,e)),Xn(a,"_rels/.rels",Wm(e.rels)),Xn(a,"xl/_rels/workbook."+n+".rels",Wm(e.wbrels)),delete e.revssf,delete e.ssf,a}function fB(t,e){var n="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":n=wl(t.slice(0,12));break;case"binary":n=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function sme(t,e){return xn.find(t,"EncryptedPackage")?eme(t,e):sH(t,e)}function ame(t,e){var n,r=t,s=e||{};return s.type||(s.type=rr&&Buffer.isBuffer(t)?"buffer":"base64"),n=S7(r,s),Z0e(n,s)}function dH(t,e){var n=0;e:for(;n<t.length;)switch(t.charCodeAt(n)){case 10:case 13:case 32:++n;break;case 60:return eT(t.slice(n),e);default:break e}return pp.to_workbook(t,e)}function ime(t,e){var n="",r=fB(t,e);switch(e.type){case"base64":n=wl(t);break;case"binary":n=t;break;case"buffer":n=t.toString("binary");break;case"array":n=r0(t);break;default:throw new Error("Unrecognized type "+e.type)}return r[0]==239&&r[1]==187&&r[2]==191&&(n=us(n)),e.type="binary",dH(n,e)}function ome(t,e){var n=t;return e.type=="base64"&&(n=wl(n)),n=Jx.utils.decode(1200,n.slice(2),"str"),e.type="binary",dH(n,e)}function lme(t){return t.match(/[^\x00-\x7F]/)?Qu(t):t}function rS(t,e,n,r){return r?(n.type="string",pp.to_workbook(t,n)):pp.to_workbook(e,n)}function Av(t,e){F4();var n=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return Av(new Uint8Array(t),(n=bs(n),n.type="array",n));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!n.type&&(n.type=typeof Deno<"u"?"buffer":"array");var r=t,s=[0,0,0,0],a=!1;if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),Xm={},n.dateNF&&(Xm.dateNF=n.dateNF),n.type||(n.type=rr&&Buffer.isBuffer(t)?"buffer":"base64"),n.type=="file"&&(n.type=rr?"buffer":"binary",r=nae(t),typeof Uint8Array<"u"&&!rr&&(n.type="array")),n.type=="string"&&(a=!0,n.type="binary",n.codepage=65001,r=lme(t)),n.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return n=bs(n),n.type="array",Av(D4(r),n)}switch((s=fB(r,n))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return sme(xn.read(r,n),n);break;case 9:if(s[1]<=8)return sH(r,n);break;case 60:return eT(r,n);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return fle(r,n);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return bQ.to_workbook(r,n);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?ame(r,n):rS(t,r,n,a);case 239:return s[3]===60?eT(r,n):rS(t,r,n,a);case 255:if(s[1]===254)return ome(r,n);if(s[1]===0&&s[2]===2&&s[3]===0)return Hh.to_workbook(r,n);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Hh.to_workbook(r,n);break;case 3:case 131:case 139:case 140:return Z5.to_workbook(r,n);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return BQ.to_workbook(r,n);break;case 10:case 13:case 32:return ime(r,n);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return dle.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?Z5.to_workbook(r,n):rS(t,r,n,a)}function fH(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return qv(e.file,xn.write(t,{type:rr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return xn.write(t,e)}function cme(t,e){var n=bs(e||{}),r=tme(t,n);return ume(r,n)}function ume(t,e){var n={},r=rr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(n.compression="DEFLATE"),e.password)n.type=r;else switch(e.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var s=t.FullPaths?xn.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!e.compression}):t.generate(n);if(typeof Deno<"u"&&typeof s=="string"){if(e.type=="binary"||e.type=="base64")return s;s=new Uint8Array(cC(s))}return e.password&&typeof encrypt_agile<"u"?fH(encrypt_agile(s,e.password),e):e.type==="file"?qv(e.file,s):e.type=="string"?us(s):s}function Ame(t,e){var n=e||{},r=l0e(t,n);return fH(r,n)}function Ru(t,e,n){n||(n="");var r=n+t;switch(e.type){case"base64":return Zx(Qu(r));case"binary":return Qu(r);case"string":return t;case"file":return qv(e.file,r,"utf8");case"buffer":return rr?ld(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):Ru(r,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function dme(t,e){switch(e.type){case"base64":return Zx(t);case"binary":return t;case"string":return t;case"file":return qv(e.file,t,"binary");case"buffer":return rr?ld(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function By(t,e){switch(e.type){case"string":case"base64":case"binary":for(var n="",r=0;r<t.length;++r)n+=String.fromCharCode(t[r]);return e.type=="base64"?Zx(n):e.type=="string"?us(n):n;case"file":return qv(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function hH(t,e){F4(),she(t);var n=bs(e||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),n.type=="array"){n.type="binary";var r=hH(t,n);return n.type="array",cC(r)}var s=0;if(n.sheet&&(typeof n.sheet=="number"?s=n.sheet:s=t.SheetNames.indexOf(n.sheet),!t.SheetNames[s]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return Ru(t0e(t,n),n);case"slk":case"sylk":return Ru(wQ.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"htm":case"html":return Ru(iH(t.Sheets[t.SheetNames[s]],n),n);case"txt":return dme(mH(t.Sheets[t.SheetNames[s]],n),n);case"csv":return Ru(mB(t.Sheets[t.SheetNames[s]],n),n,"\uFEFF");case"dif":return Ru(bQ.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"dbf":return By(Z5.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"prn":return Ru(pp.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"rtf":return Ru(BQ.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"eth":return Ru(CQ.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"fods":return Ru(uH(t,n),n);case"wk1":return By(Hh.sheet_to_wk1(t.Sheets[t.SheetNames[s]],n),n);case"wk3":return By(Hh.book_to_wk3(t,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),By(aH(t,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),Ame(t,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return cme(t,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function fme(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},n=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();n.match(/^\.[a-z]+$/)&&(t.bookType=n.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function hB(t,e,n){var r={};return r.type="file",r.file=e,fme(r),hH(t,r)}function hme(t,e,n,r,s,a,i,o){var l=pa(n),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),h=!0,m=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:n,enumerable:!1})}catch{m.__rowNum__=n}else m.__rowNum__=n;if(!i||t[n])for(var p=e.s.c;p<=e.e.c;++p){var y=i?t[n][p]:t[r[p]+l];if(y===void 0||y.t===void 0){if(u===void 0)continue;a[p]!=null&&(m[a[p]]=u);continue}var x=y.v;switch(y.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+y.t)}if(a[p]!=null){if(x==null)if(y.t=="e"&&x===null)m[a[p]]=null;else if(u!==void 0)m[a[p]]=u;else if(d&&x===null)m[a[p]]=null;else continue;else m[a[p]]=d&&(y.t!=="n"||y.t==="n"&&o.rawNumbers!==!1)?x:nd(y,x,o);x!=null&&(h=!1)}}return{row:m,isempty:h}}function qw(t,e){if(t==null||t["!ref"]==null)return[];var n={t:"n",v:0},r=0,s=1,a=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?r=1:u.header==="A"?r=2:Array.isArray(u.header)?r=3:u.header==null&&(r=0),typeof d){case"string":l=Br(d);break;case"number":l=Br(t["!ref"]),l.s.r=d;break;default:l=d}r>0&&(s=0);var h=pa(l.s.r),m=[],p=[],y=0,x=0,C=Array.isArray(t),S=l.s.r,k=0,I={};C&&!t[S]&&(t[S]=[]);var F=u.skipHidden&&t["!cols"]||[],U=u.skipHidden&&t["!rows"]||[];for(k=l.s.c;k<=l.e.c;++k)if(!(F[k]||{}).hidden)switch(m[k]=Us(k),n=C?t[S][k]:t[m[k]+h],r){case 1:a[k]=k-l.s.c;break;case 2:a[k]=m[k];break;case 3:a[k]=u.header[k-l.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),o=i=nd(n,null,u),x=I[i]||0,!x)I[i]=1;else{do o=i+"_"+x++;while(I[o]);I[i]=x,I[o]=1}a[k]=o}for(S=l.s.r+s;S<=l.e.r;++S)if(!(U[S]||{}).hidden){var R=hme(t,l,S,m,r,a,C,u);(R.isempty===!1||(r===1?u.blankrows!==!1:u.blankrows))&&(p[y++]=R.row)}return p.length=y,p}var fR=/"/g;function mme(t,e,n,r,s,a,i,o){for(var l=!0,u=[],d="",h=pa(n),m=e.s.c;m<=e.e.c;++m)if(r[m]){var p=o.dense?(t[n]||[])[m]:t[r[m]+h];if(p==null)d="";else if(p.v!=null){l=!1,d=""+(o.rawNumbers&&p.t=="n"?p.v:nd(p,null,o));for(var y=0,x=0;y!==d.length;++y)if((x=d.charCodeAt(y))===s||x===a||x===34||o.forceQuotes){d='"'+d.replace(fR,'""')+'"';break}d=="ID"&&(d='"ID"')}else p.f!=null&&!p.F?(l=!1,d="="+p.f,d.indexOf(",")>=0&&(d='"'+d.replace(fR,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&l?null:u.join(i)}function mB(t,e){var n=[],r=e??{};if(t==null||t["!ref"]==null)return"";var s=Br(t["!ref"]),a=r.FS!==void 0?r.FS:",",i=a.charCodeAt(0),o=r.RS!==void 0?r.RS:`
`,l=o.charCodeAt(0),u=new RegExp((a=="|"?"\\|":a)+"+$"),d="",h=[];r.dense=Array.isArray(t);for(var m=r.skipHidden&&t["!cols"]||[],p=r.skipHidden&&t["!rows"]||[],y=s.s.c;y<=s.e.c;++y)(m[y]||{}).hidden||(h[y]=Us(y));for(var x=0,C=s.s.r;C<=s.e.r;++C)(p[C]||{}).hidden||(d=mme(t,s,C,h,i,l,a,r),d!=null&&(r.strip&&(d=d.replace(u,"")),(d||r.blankrows!==!1)&&n.push((x++?o:"")+d)));return delete r.dense,n.join("")}function mH(t,e){e||(e={}),e.FS="	",e.RS=`
`;var n=mB(t,e);return n}function pme(t){var e="",n,r="";if(t==null||t["!ref"]==null)return[];var s=Br(t["!ref"]),a="",i=[],o,l=[],u=Array.isArray(t);for(o=s.s.c;o<=s.e.c;++o)i[o]=Us(o);for(var d=s.s.r;d<=s.e.r;++d)for(a=pa(d),o=s.s.c;o<=s.e.c;++o)if(e=i[o]+a,n=u?(t[d]||[])[o]:t[e],r="",n!==void 0){if(n.F!=null){if(e=n.F,!n.f)continue;r=n.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(n.f!=null)r=n.f;else{if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)r=""+n.v;else if(n.t=="b")r=n.v?"TRUE":"FALSE";else if(n.w!==void 0)r="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?r="'"+n.v:r=""+n.v}}l[l.length]=e+"="+r}return l}function pH(t,e,n){var r=n||{},s=+!r.skipHeader,a=t||{},i=0,o=0;if(a&&r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var l=typeof r.origin=="string"?Ms(r.origin):r.origin;i=l.r,o=l.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+e.length-1+s}};if(a["!ref"]){var h=Br(a["!ref"]);d.e.c=Math.max(d.e.c,h.e.c),d.e.r=Math.max(d.e.r,h.e.r),i==-1&&(i=h.e.r+1,d.e.r=i+e.length-1+s)}else i==-1&&(i=0,d.e.r=e.length-1+s);var m=r.header||[],p=0;e.forEach(function(x,C){ta(x).forEach(function(S){(p=m.indexOf(S))==-1&&(m[p=m.length]=S);var k=x[S],I="z",F="",U=Dn({c:o+p,r:i+C+s});u=dv(a,U),k&&typeof k=="object"&&!(k instanceof Date)?a[U]=k:(typeof k=="number"?I="n":typeof k=="boolean"?I="b":typeof k=="string"?I="s":k instanceof Date?(I="d",r.cellDates||(I="n",k=qa(k)),F=r.dateNF||kn[14]):k===null&&r.nullError&&(I="e",k=0),u?(u.t=I,u.v=k,delete u.w,delete u.R,F&&(u.z=F)):a[U]=u={t:I,v:k},F&&(u.z=F))})}),d.e.c=Math.max(d.e.c,o+m.length-1);var y=pa(i);if(s)for(p=0;p<m.length;++p)a[Us(p+o)+y]={t:"s",v:m[p]};return a["!ref"]=Gn(d),a}function gme(t,e){return pH(null,t,e)}function dv(t,e,n){if(typeof e=="string"){if(Array.isArray(t)){var r=Ms(e);return t[r.r]||(t[r.r]=[]),t[r.r][r.c]||(t[r.r][r.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?dv(t,Dn(e)):dv(t,Dn({r:e,c:n||0}))}function xme(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var n=t.SheetNames.indexOf(e);if(n>-1)return n;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function pB(){return{SheetNames:[],Sheets:{}}}function gB(t,e,n,r){var s=1;if(!n)for(;s<=65535&&t.SheetNames.indexOf(n="Sheet"+s)!=-1;++s,n=void 0);if(!n||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&t.SheetNames.indexOf(n)>=0){var a=n.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||n;for(++s;s<=65535&&t.SheetNames.indexOf(n=i+s)!=-1;++s);}if(ZQ(n),t.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return t.SheetNames.push(n),t.Sheets[n]=e,n}function vme(t,e,n){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var r=xme(t,e);switch(t.Workbook.Sheets[r]||(t.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}t.Workbook.Sheets[r].Hidden=n}function yme(t,e){return t.z=e,t}function gH(t,e,n){return e?(t.l={Target:e},n&&(t.l.Tooltip=n)):delete t.l,t}function wme(t,e,n){return gH(t,"#"+e,n)}function bme(t,e,n){t.c||(t.c=[]),t.c.push({t:e,a:n||"SheetJS"})}function Cme(t,e,n,r){for(var s=typeof e!="string"?e:Br(e),a=typeof e=="string"?e:Gn(e),i=s.s.r;i<=s.e.r;++i)for(var o=s.s.c;o<=s.e.c;++o){var l=dv(t,i,o);l.t="n",l.F=a,delete l.v,i==s.s.r&&o==s.s.c&&(l.f=n,r&&(l.D=!0))}return t}var sc={encode_col:Us,encode_row:pa,encode_cell:Dn,encode_range:Gn,decode_col:G4,decode_row:z4,split_cell:Rae,decode_cell:Ms,decode_range:zo,format_cell:nd,sheet_add_aoa:z7,sheet_add_json:pH,sheet_add_dom:oH,aoa_to_sheet:Up,json_to_sheet:gme,table_to_sheet:lH,table_to_book:k0e,sheet_to_csv:mB,sheet_to_txt:mH,sheet_to_json:qw,sheet_to_html:iH,sheet_to_formulae:pme,sheet_to_row_object_array:qw,sheet_get_cell:dv,book_new:pB,book_append_sheet:gB,book_set_sheet_visibility:vme,cell_set_number_format:yme,cell_set_hyperlink:gH,cell_set_internal_link:wme,cell_add_comment:bme,sheet_set_array_formula:Cme,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Eme=async()=>{try{const t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let r=0,s=0;const a=[];for(const l of n)try{const u=Lt(er,l),d=await Da(u),h=d.size;r+=h,a.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:h});let m=0;d.docs.forEach(p=>{const y=p.data();y.createdAt&&new Date(y.createdAt)>=e&&m++}),s+=m}catch(u){console.warn(`Error accediendo a colección ${l}:`,u),a.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:0})}const i=[];try{const l=Lt(er,"apiLogs"),u=new Date(t.getTime()-10080*60*1e3),d=an(l,Vr("timestamp",">=",u.toISOString()),sr("timestamp","desc")),h=await Da(d),m={};h.docs.forEach(p=>{const y=p.data(),x=new Date(y.timestamp).toLocaleDateString("es-CL");m[x]=(m[x]||0)+1}),Object.entries(m).sort(([p],[y])=>new Date(p).getTime()-new Date(y).getTime()).forEach(([p,y])=>{i.push({label:p,value:y})})}catch(l){console.warn("Error calculando actividad diaria:",l)}const o=Math.floor(s*2.5);return{documentsCreatedToday:s,readsToday:o,writesToday:s,totalDocuments:r,collectionsActivity:a.sort((l,u)=>u.value-l.value),dailyActivity:i}}catch(t){return console.error("Error al obtener estadísticas de Firestore:",t),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},hR=500,am=({title:t,value:e,description:n,alert:r})=>c.jsxs("div",{className:`p-5 rounded-xl border ${r?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),c.jsx("p",{className:`text-3xl font-bold mt-2 ${r?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:e}),n&&c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:n})]}),sS=({title:t,data:e,colorClass:n})=>{const r=G.useMemo(()=>Math.max(...e.map(s=>s.value),1),[e]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),c.jsx("div",{className:"space-y-4",children:e.length>0?e.map(s=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:s.label}),c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:s.value})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:`${n} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${s.value/r*100}%`}})})]},s.label)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},_me=()=>{const[t,e]=G.useState([]),[n,r]=G.useState(!0),[s,a]=G.useState(null),[i,o]=G.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});G.useEffect(()=>{r(!0);const h=pne(y=>{e(y),r(!1)}),m=async()=>{try{const y=await Eme();o(y)}catch(y){console.error("Error al cargar estadísticas de Firestore:",y)}};m();const p=setInterval(m,300*1e3);return()=>{h(),clearInterval(p)}},[]);const{stats:l,userStats:u,moduleStats:d}=G.useMemo(()=>{const h=new Date,m=new Date(h.getFullYear(),h.getMonth(),h.getDate()).getTime(),p=m-h.getDay()*24*60*60*1e3,y=new Date(h.getFullYear(),h.getMonth(),1).getTime(),x={today:0,week:0,month:0},C={},S={};t.forEach(F=>{const U=new Date(F.timestamp).getTime();U>=m&&x.today++,U>=p&&x.week++,U>=y&&x.month++;const R=F.userEmail||"Desconocido";C[R]||(C[R]={email:R,today:0,month:0,total:0}),C[R].total++,U>=m&&C[R].today++,U>=y&&C[R].month++,S[F.module]=(S[F.module]||0)+1});const k=Object.values(C).sort((F,U)=>U.total-F.total),I=Object.entries(S).map(([F,U])=>({label:F,value:U})).sort((F,U)=>U.value-F.value);return{stats:x,userStats:k,moduleStats:I}},[t]);return c.jsxs("div",{className:"space-y-8",children:[s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas..."}),!n&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsx(am,{title:"Llamadas Hoy",value:n?"--":l.today,description:`Límite recomendado: ${hR}`,alert:l.today>hR}),c.jsx(am,{title:"Llamadas esta Semana",value:n?"--":l.week}),c.jsx(am,{title:"Llamadas este Mes",value:n?"--":l.month})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[c.jsx(sS,{title:"Uso por Módulo",data:d,colorClass:"bg-sky-500"}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!n&&u.length>0?u.map(h=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:h.email}),c.jsx("td",{className:"px-4 py-2 text-center text-sm",children:h.today}),c.jsx("td",{className:"px-4 py-2 text-center text-sm",children:h.month}),c.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:h.total})]},h.email)):c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:n?"Cargando...":"No hay registros."})})})]})})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore (simuladas)."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(am,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),c.jsx(am,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),c.jsx(am,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[c.jsx(sS,{title:"Actividad por Colección",data:i.collectionsActivity,colorClass:"bg-green-500"}),c.jsx(sS,{title:"Actividad Diaria (Últimos 7 días)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sme="type.googleapis.com/google.protobuf.Int64Value",Tme="type.googleapis.com/google.protobuf.UInt64Value";function xH(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Kw(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Kw(e));if(typeof t=="function"||typeof t=="object")return xH(t,e=>Kw(e));throw new Error("Data cannot be encoded in JSON: "+t)}function xp(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case Sme:case Tme:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>xp(e)):typeof t=="function"||typeof t=="object"?xH(t,e=>xp(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xB="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class jo extends eA{constructor(e,n,r){super(`${xB}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,jo.prototype)}}function Nme(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function $w(t,e){let n=Nme(t),r=n,s;try{const a=e&&e.error;if(a){const i=a.status;if(typeof i=="string"){if(!mR[i])return new jo("internal","internal");n=mR[i],r=i}const o=a.message;typeof o=="string"&&(r=o),s=a.details,s!==void 0&&(s=xp(s))}}catch{}return n==="ok"?null:new jo(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bme{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,tc(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="us-central1",kme=/^data: (.*?)(?:\n|$)/;function Ime(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new jo("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Fme{constructor(e,n,r,s,a=rT,i=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new Bme(e,n,r,s),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(a);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=rT}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Dme(t,e,n){const r=A0(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(xN(t.emulatorOrigin),vN("Functions",!0))}function Rme(t,e,n){const r=s=>Ume(t,e,s,{});return r.stream=(s,a)=>Pme(t,e,s,a),r}async function Lme(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function vH(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function Ume(t,e,n,r){const s=t._url(e);return Mme(t,s,n,r)}async function Mme(t,e,n,r){n=Kw(n);const s={data:n},a=await vH(t,r),i=r.timeout||7e4,o=Ime(i),l=await Promise.race([Lme(e,s,a,t.fetchImpl),o.promise,t.cancelAllRequests]);if(o.cancel(),!l)throw new jo("cancelled","Firebase Functions instance was deleted.");const u=$w(l.status,l.json);if(u)throw u;if(!l.json)throw new jo("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new jo("internal","Response is missing data field.");return{data:xp(d)}}function Pme(t,e,n,r){const s=t._url(e);return Ome(t,s,n,r||{})}async function Ome(t,e,n,r){var m;n=Kw(n);const s={data:n},a=await vH(t,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let i;try{i=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:a,signal:r==null?void 0:r.signal})}catch(p){if(p instanceof Error&&p.name==="AbortError"){const x=new jo("cancelled","Request was cancelled.");return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}const y=$w(0,null);return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}let o,l;const u=new Promise((p,y)=>{o=p,l=y});(m=r==null?void 0:r.signal)==null||m.addEventListener("abort",()=>{const p=new jo("cancelled","Request was cancelled.");l(p)});const d=i.body.getReader(),h=jme(d,o,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const p=h.getReader();return{async next(){const{value:y,done:x}=await p.read();return{value:y,done:x}},async return(){return await p.cancel(),{done:!0,value:void 0}}}}},data:u}}function jme(t,e,n,r){const s=(i,o)=>{const l=i.match(kme);if(!l)return;const u=l[1];try{const d=JSON.parse(u);if("result"in d){e(xp(d.result));return}if("message"in d){o.enqueue(xp(d.message));return}if("error"in d){const h=$w(0,d);o.error(h),n(h);return}}catch(d){if(d instanceof jo){o.error(d),n(d);return}}},a=new TextDecoder;return new ReadableStream({start(i){let o="";return l();async function l(){if(r!=null&&r.aborted){const u=new jo("cancelled","Request was cancelled");return i.error(u),n(u),Promise.resolve()}try{const{value:u,done:d}=await t.read();if(d){o.trim()&&s(o.trim(),i),i.close();return}if(r!=null&&r.aborted){const m=new jo("cancelled","Request was cancelled");i.error(m),n(m),await t.cancel();return}o+=a.decode(u,{stream:!0});const h=o.split(`
`);o=h.pop()||"";for(const m of h)m.trim()&&s(m.trim(),i);return l()}catch(u){const d=u instanceof jo?u:$w(0,null);i.error(d),n(d)}}},cancel(){return t.cancel()}})}const pR="@firebase/functions",gR="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qme="auth-internal",Hme="app-check-internal",Vme="messaging-internal";function zme(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),a=n.getProvider(Qme),i=n.getProvider(Vme),o=n.getProvider(Hme);return new Fme(s,a,i,o,r)};Yh(new Ff(xB,e,"PUBLIC").setMultipleInstances(!0)),Hu(pR,gR,t),Hu(pR,gR,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(t=CN(),e=rT){const r=Bb(Bs(t),xB).getImmediate({identifier:e}),s=q8("functions");return s&&Gme(r,...s),r}function Gme(t,e,n){Dme(Bs(t),e,n)}function im(t,e,n){return Rme(Bs(t),e)}zme();const xR=Lt(er,"usuarios");async function yH(){try{console.log("🔍 [DEBUG] Obteniendo usuarios de Firestore..."),console.log("🔍 [DEBUG] Collection ref:",xR);const t=await Da(xR);if(console.log(`📊 [DEBUG] Encontrados ${t.docs.length} documentos en la colección usuarios`),t.empty)return console.log("⚠️  [DEBUG] La colección usuarios está vacía"),[];const e=t.docs.map(n=>{const r=n.data();return console.log("👤 [DEBUG] Usuario encontrado:",{id:n.id,...r}),{id:n.id,...r}});return console.log("✅ [DEBUG] Usuarios procesados correctamente:",e.length),console.log("✅ [DEBUG] Lista completa de usuarios:",e),e}catch(t){throw console.error("❌ [DEBUG] Error al obtener usuarios:",t),console.error("❌ [DEBUG] Error details:",{code:t.code,message:t.message,stack:t.stack}),t}}const vR=Object.values(qt),aS=t=>t?t.trim().toLowerCase().replace(/°/g,"º").replace(/\s+(medio|básico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º").replace(/^(\d)(?![º])/,"$1º").replace(/\s+/g,"").toUpperCase():"",qme=()=>{const[t,e]=G.useState([]),[n,r]=G.useState(!1),[s,a]=G.useState("Usuarios"),[i,o]=G.useState({nombreCompleto:"",email:"",rut:"",profile:qt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[l,u]=G.useState(null),[d,h]=G.useState(""),[m,p]=G.useState(""),[y,x]=G.useState(""),[C,S]=G.useState(null),[k,I]=G.useState(null),[F,U]=G.useState(null),R=G.useCallback(async()=>{r(!0);try{const V=await yH();e(V)}catch(V){console.error("Error al cargar usuarios",V),S("No se pudieron cargar los usuarios.")}finally{r(!1)}},[]);G.useEffect(()=>{R()},[R]);const E=G.useCallback(V=>{const{name:J,value:K}=V.target;o(ie=>({...ie,[J]:K,curso:J==="profile"&&K!==qt.ESTUDIANTE?"":ie.curso,cursos:J==="profile"&&K!==qt.PROFESORADO?[]:ie.cursos,asignaturas:J==="profile"&&K!==qt.PROFESORADO?[]:ie.asignaturas}))},[]),_=G.useCallback((V,J)=>{o(K=>{const ie=K[V]||[],O=ie.includes(J)?ie.filter(W=>W!==J):[...ie,J];return{...K,[V]:O}})},[]),B=G.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:qt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),S(null)},[]),j=G.useCallback(async V=>{V.preventDefault(),S(null);const{nombreCompleto:J,email:K,profile:ie,curso:O,password:W}=i;if(!J.trim()||!K.trim()){S("Nombre Completo y Email son obligatorios.");return}if(ie===qt.ESTUDIANTE&&!O){S('El campo "Curso" es obligatorio para Estudiantes.');return}if(!l&&!(W!=null&&W.trim())){S("La contraseña es obligatoria al crear un nuevo usuario.");return}const Z=Dg();try{if(l){const re=im(Z,"updateUser"),se={...i,password:(W==null?void 0:W.trim())||void 0,curso:ie===qt.ESTUDIANTE?aS(O||""):void 0};await re(se)}else{const re=im(Z,"createUser"),se={...i,curso:ie===qt.ESTUDIANTE?aS(O||""):void 0};await re(se)}await R(),B()}catch(re){console.error("Error al guardar usuario:",re),S(re.message||"Error al guardar el usuario.")}},[i,l,R,B]),D=G.useCallback(V=>{u(V.email),o({nombreCompleto:V.nombreCompleto,email:V.email,rut:V.rut||"",profile:V.profile,password:"",curso:V.curso||"",cursos:V.cursos||[],asignaturas:V.asignaturas||[]}),setTimeout(()=>{const J=document.querySelector("form");J&&J.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),L=G.useCallback(async V=>{if(window.confirm(`¿Está seguro de que desea eliminar al usuario ${V}? Esta acción es irreversible.`))try{const J=Dg();await im(J,"deleteUser")({email:V}),await R()}catch(J){console.error("Error al eliminar usuario:",J),S(J.message||"No se pudo borrar el usuario.")}},[R]),Q=async V=>{var W;const J=(W=V.target.files)==null?void 0:W[0];if(!J)return;I({message:"Procesando archivo...",isError:!1});const K=Dg(),ie=im(K,"createUser"),O=new FileReader;O.onload=async Z=>{var re;try{const se=new Uint8Array((re=Z.target)==null?void 0:re.result),de=Av(se,{type:"array"}),pe=de.Sheets[de.SheetNames[0]],be=sc.sheet_to_json(pe);if(be.length===0){I({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const Se=be.map(Fe=>{const Ce=Fe.Nombre||Fe.nombre,Re=Fe.Correo||Fe.correo||Fe.Email||Fe.email,ze=Fe.Curso||Fe.curso,Je=Fe.RUT||Fe.rut;return!Ce||!Re||!ze?Promise.resolve({email:Re||"Sin email",error:"Datos incompletos"}):ie({nombreCompleto:String(Ce).trim(),email:String(Re).trim(),profile:qt.ESTUDIANTE,curso:aS(String(ze).trim()),rut:Je?String(Je).trim():"",password:"recoleta"}).catch(dt=>({email:Re,error:dt.message}))}),me=await Promise.all(Se),ce=me.filter(Fe=>!Fe.error).length,Me=me.filter(Fe=>Fe.error);let Ze=`Carga completada. ${ce} estudiantes agregados.`;Me.length>0&&(Ze+=` ${Me.length} fallaron.`,console.error("Errores en carga masiva:",Me)),I({message:Ze,isError:Me.length>0}),await R()}catch(se){I({message:`Error: ${se.message}`,isError:!0})}},O.readAsArrayBuffer(J),V.target.value=""},H=async V=>{var W;const J=(W=V.target.files)==null?void 0:W[0];if(!J)return;U({message:"Procesando archivo...",isError:!1});const K=Dg(),ie=im(K,"createUser"),O=new FileReader;O.onload=async Z=>{var re;try{const se=new Uint8Array((re=Z.target)==null?void 0:re.result),de=Av(se,{type:"array"}),pe=de.Sheets[de.SheetNames[0]],be=sc.sheet_to_json(pe);if(be.length===0){U({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const Se=be.map(Fe=>{const Ce=Fe.Nombre||Fe.nombre,Re=Fe.Correo||Fe.correo||Fe.Email||Fe.email,ze=Fe.Perfil||Fe.perfil||Fe.Profile||Fe.profile,Je=Fe.RUT||Fe.rut;return!Ce||!Re||!ze?Promise.resolve({email:Re||"Sin email",error:"Datos incompletos"}):ie({nombreCompleto:String(Ce).trim(),email:String(Re).trim(),profile:ze,rut:Je?String(Je).trim():"",password:"recoleta"}).catch(dt=>({email:Re,error:dt.message}))}),me=await Promise.all(Se),ce=me.filter(Fe=>!Fe.error).length,Me=me.filter(Fe=>Fe.error);let Ze=`Carga completada. ${ce} usuarios agregados.`;Me.length>0&&(Ze+=` ${Me.length} fallaron.`,console.error("Errores en carga masiva:",Me)),U({message:Ze,isError:Me.length>0}),await R()}catch(se){U({message:`Error: ${se.message}`,isError:!0})}},O.readAsArrayBuffer(J),V.target.value=""},te="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",Y=G.useMemo(()=>Array.from(new Set(t.filter(V=>V.profile===qt.ESTUDIANTE&&V.curso).map(V=>V.curso))).sort(),[t]),ne=G.useMemo(()=>t.filter(V=>(d===""||V.nombreCompleto.toLowerCase().includes(d.toLowerCase())||V.email.toLowerCase().includes(d.toLowerCase()))&&(m===""||V.profile===m)&&(y===""||V.curso===y)),[t,d,m,y]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>a("Usuarios"),className:`${s==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),c.jsx("button",{onClick:()=>a("Monitor de Uso"),className:`${s==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),s==="Usuarios"&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),c.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:Q,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),c.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),k&&c.jsx("p",{className:`text-sm mt-2 ${k.isError?"text-red-600":"text-green-600"}`,children:k.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),c.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:H,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),c.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),F&&c.jsx("p",{className:`text-sm mt-2 ${F.isError?"text-red-600":"text-green-600"}`,children:F.message})]})]})]}),c.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:l?"Editando usuario":"Agregar nuevo usuario"}),c.jsxs("form",{onSubmit:j,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),c.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:E,className:te,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),c.jsx("input",{type:"email",name:"email",value:i.email,onChange:E,className:te,required:!0,readOnly:!!l})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),c.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:E,placeholder:l?"Dejar en blanco para no cambiar":"Contraseña temporal",className:te})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),c.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:E,placeholder:"12.345.678-9",className:te})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),c.jsx("select",{name:"profile",value:i.profile,onChange:E,className:te,required:!0,children:vR.map(V=>c.jsx("option",{value:V,children:V},V))})]}),i.profile===qt.ESTUDIANTE&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:i.curso,onChange:E,className:te,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),Js.map(V=>c.jsx("option",{value:V,children:V},V))]})]})]}),i.profile===qt.PROFESORADO&&c.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[c.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[c.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📚"}),"Asignación de Cursos"]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Js.map(V=>{var J;return c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[c.jsx("input",{type:"checkbox",checked:((J=i.cursos)==null?void 0:J.includes(V))||!1,onChange:()=>_("cursos",V),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),c.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:V})]},V)})})]}),i.profile===qt.PROFESORADO&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[c.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[c.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📖"}),"Asignación de Asignaturas"]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:po.map(V=>{var J;return c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[c.jsx("input",{type:"checkbox",checked:((J=i.asignaturas)==null?void 0:J.includes(V))||!1,onChange:()=>_("asignaturas",V),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),c.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:V})]},V)})})]}),C&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:C}),c.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[l&&c.jsx("button",{type:"button",onClick:B,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"button",onClick:async()=>{try{console.log("🔧 Agregando custom claim...");const V=Dg(),K=await im(V,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log("✅ Custom claim agregado:",K),S("✅ Custom claim agregado exitosamente")}catch(V){console.error("❌ Error al agregar custom claim:",V),S(`Error: ${V.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:"🔧 Claim"}),c.jsx("button",{type:"button",onClick:async()=>{var V,J,K,ie,O;try{const{auth:W}=await Bw(async()=>{const{auth:se}=await Promise.resolve().then(()=>aee);return{auth:se}},void 0);console.log("🔍 Usuario actual:",(V=W.currentUser)==null?void 0:V.email);const Z=await((J=W.currentUser)==null?void 0:J.getIdToken(!0));console.log("🔑 Token refreshed:",!!Z);const re=await((K=W.currentUser)==null?void 0:K.getIdTokenResult());console.log("📋 Claims completos:",re==null?void 0:re.claims),console.log("👤 Profile claim:",(ie=re==null?void 0:re.claims)==null?void 0:ie.profile),((O=re==null?void 0:re.claims)==null?void 0:O.profile)==="SUBDIRECCION"?S("✅ Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):S(`❌ Custom claim faltante. Claims: ${JSON.stringify(re==null?void 0:re.claims)}`)}catch(W){console.error("❌ Error verificando token:",W),S(`Error verificando token: ${W.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:"🔍 Token"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[c.jsx("div",{children:c.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:V=>h(V.target.value),className:te})}),c.jsx("div",{children:c.jsxs("select",{value:m,onChange:V=>p(V.target.value),className:te,children:[c.jsx("option",{value:"",children:"Todos los perfiles"}),vR.map(V=>c.jsx("option",{value:V,children:V},V))]})}),c.jsx("div",{children:c.jsxs("select",{value:y,onChange:V=>x(V.target.value),className:te,children:[c.jsx("option",{value:"",children:"Todos los cursos"}),Y.map(V=>c.jsx("option",{value:V,children:V},V))]})})]}),n?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):c.jsxs("div",{className:"overflow-x-auto",children:[c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:ne.map(V=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:V.nombreCompleto}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:V.email}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:c.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${V.profile===qt.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":V.profile===qt.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:V.profile})}),c.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[V.profile===qt.ESTUDIANTE&&c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:V.curso||"Sin curso"}),V.profile===qt.PROFESORADO&&c.jsxs("div",{className:"space-y-1",children:[V.cursos&&V.cursos.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),c.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[V.cursos.slice(0,3).map(J=>c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:J},J)),V.cursos.length>3&&c.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",V.cursos.length-3]})]})]}),V.asignaturas&&V.asignaturas.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),c.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[V.asignaturas.slice(0,2).map(J=>c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:J},J)),V.asignaturas.length>2&&c.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",V.asignaturas.length-2]})]})]}),(!V.cursos||V.cursos.length===0)&&(!V.asignaturas||V.asignaturas.length===0)&&c.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),V.profile!==qt.ESTUDIANTE&&V.profile!==qt.PROFESORADO&&c.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[c.jsx("button",{onClick:()=>D(V),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),c.jsx("button",{onClick:()=>L(V.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},V.email))})]}),ne.length===0&&c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:t.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),s==="Monitor de Uso"&&c.jsx(_me,{})]})},vp="seguimiento_dual_records",Kme=t=>{const e=t.data(),n=r=>r&&typeof r.toDate=="function"?r.toDate().toISOString().split("T")[0]:r;return{id:t.id,...e,fechaDesvinculacion:n(e.fechaDesvinculacion),fecha1raSupervision1erSemestre:n(e.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:n(e.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:n(e.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:n(e.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:n(e.fechaSupervisionExcepcional)}},$me=t=>{const e=an(Lt(It,vp),sr("nombreEstudiante","asc"));return En(e,r=>{const s=r.docs.map(a=>Kme(a));t(s)},r=>{console.error("Error al suscribirse a los registros de seguimiento:",r),t([])})},Ww=t=>{const e={...t};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(r=>{e[r]&&typeof e[r]=="string"&&(e[r]=mn.fromDate(new Date(e[r]+"T00:00:00")))}),e},Wme=async t=>{try{const e=Ww(t);return(await Cs(Lt(It,vp),e)).id}catch(e){throw console.error("Error al crear el registro:",e),new Error("No se pudo crear el registro de seguimiento.")}},yR=async(t,e)=>{try{const n=Cn(It,vp,t),r=Ww(e);await io(n,r,{merge:!0})}catch(n){throw console.error("Error al actualizar el registro:",n),new Error("No se pudo actualizar el registro.")}},Yme=async t=>{try{const e=Cn(It,vp,t);await Ka(e)}catch(e){throw console.error("Error al eliminar el registro:",e),new Error("No se pudo eliminar el registro.")}},Xme=async t=>{const e=x4(It),n=Lt(It,vp);let r=0,s=0;for(const a of t){const i=an(n,Vr("rutEstudiante","==",a.rutEstudiante)),o=await Da(i);if(o.empty){const l=Cn(n);e.set(l,Ww(a)),s++}else{const l=o.docs[0].id,u=Cn(It,vp,l);e.set(u,Ww(a),{merge:!0}),r++}}return await e.commit(),{updated:r,created:s}},Jme={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},Zme=t=>{if(!t||t===""||t==="N/A"||t==="Pendiente")return null;try{if(typeof t=="number"){const e=new Date(1900,0,1),n=new Date(e.getTime()+(t-2)*24*60*60*1e3);return isNaN(n.getTime())?null:n.toISOString().split("T")[0]}if(t instanceof Date)return isNaN(t.getTime())?null:t.toISOString().split("T")[0];if(typeof t=="string"){const e=t.trim();if(e==="")return null;const n=new Date(e);return isNaN(n.getTime())?null:n.toISOString().split("T")[0]}return null}catch(e){return console.warn("Error parsing date:",t,e),null}},epe=t=>{if(typeof t=="boolean")return t;if(typeof t=="string"){const e=t.toLowerCase().trim();return["true","verdadero","sí","si","yes","1","x"].includes(e)}return typeof t=="number"?t===1:!1},tpe=({record:t,onSave:e,onClose:n})=>{const[r,s]=G.useState(t),a="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=l=>{const{name:u,value:d,type:h,checked:m}=l.target;s(p=>({...p,[u]:h==="checkbox"?m:d}))},o=()=>{e(r)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:n,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:t.nombreEstudiante})]})]}),c.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f1s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),c.jsx("input",{id:`f1s1-${t.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:r.fecha1raSupervision1erSemestre||"",onChange:i,className:a})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!r.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f2s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),c.jsx("input",{id:`f2s1-${t.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:r.fecha2daSupervision1erSemestre||"",onChange:i,className:a})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!r.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f1s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),c.jsx("input",{id:`f1s2-${t.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:r.fecha1raSupervision2doSemestre||"",onChange:i,className:a})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!r.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f2s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),c.jsx("input",{id:`f2s2-${t.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:r.fecha2daSupervision2doSemestre||"",onChange:i,className:a})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!r.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`fex-${t.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),c.jsx("input",{id:`fex-${t.id}`,type:"date",name:"fechaSupervisionExcepcional",value:r.fechaSupervisionExcepcional||"",onChange:i,className:a})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!r.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`mg-nombre-${t.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),c.jsx("input",{id:`mg-nombre-${t.id}`,type:"text",name:"nombreMaestroGuia",value:r.nombreMaestroGuia||"",onChange:i,className:a+" mt-1"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`mg-contacto-${t.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),c.jsx("input",{id:`mg-contacto-${t.id}`,type:"text",name:"contactoMaestroGuia",value:r.contactoMaestroGuia||"",onChange:i,className:a+" mt-1"})]})]})]})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),c.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},npe=()=>{const[t,e]=G.useState([]),[n,r]=G.useState(!0),s=G.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:Ph[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:B_[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[a,i]=G.useState(s),[o,l]=G.useState(null),[u,d]=G.useState(""),[h,m]=G.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[p,y]=G.useState(null),[x,C]=G.useState(null),[S,k]=G.useState(!1),[I,F]=G.useState(null);G.useEffect(()=>{r(!0);const V=$me(J=>{e(J),r(!1)});return()=>V()},[]);const U=G.useCallback(V=>{const{name:J,value:K}=V.target;i(ie=>({...ie,[J]:K}))},[]),R=G.useCallback(V=>{const{name:J,value:K}=V.target;m(ie=>({...ie,[J]:K}))},[]),E=G.useCallback(()=>{i(s),l(null),y(null)},[s]),_=async V=>{V.preventDefault(),y(null);const K=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(ie=>{var O;return!((O=a[ie])!=null&&O.trim())});if(K){y(`El campo '${K}' es obligatorio.`);return}try{o?await yR(o,a):await Wme(a),E()}catch(ie){console.error(ie),y("No se pudo guardar el registro.")}},B=G.useCallback(V=>{window.scrollTo({top:0,behavior:"smooth"}),l(V.id),i(V)},[]),j=async V=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await Yme(V)}catch(J){console.error(J),y("No se pudo eliminar el registro.")}},D=V=>{F(V),k(!0)},L=()=>{F(null),k(!1)},Q=async V=>{try{await yR(V.id,V),L()}catch(J){console.error(J),alert("No se pudieron guardar los cambios de supervisión.")}},H=()=>{const V=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],J=sc.aoa_to_sheet([V]),K=sc.book_new();sc.book_append_sheet(K,J,"Plantilla"),hB(K,"Plantilla_Seguimiento_Dual.xlsx")},te=V=>{var ie;const J=(ie=V.target.files)==null?void 0:ie[0];if(!J)return;C({message:"Procesando archivo...",isError:!1});const K=new FileReader;K.onload=async O=>{var W;try{const Z=new Uint8Array((W=O.target)==null?void 0:W.result),re=Av(Z,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),se=re.SheetNames[0],de=re.Sheets[se],pe=sc.sheet_to_json(de,{raw:!1,dateNF:"yyyy-mm-dd"});if(pe.length===0)throw new Error("El archivo está vacío.");const be={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},Se=Object.keys(pe[0]).map(Ze=>Ze.trim().toLowerCase()),ce=["nombre","rut","curso 2025","empresa","estado"].find(Ze=>!Se.includes(Ze));if(ce)throw new Error(`Falta la columna requerida: '${ce}'`);const Me=pe.map((Ze,Fe)=>{try{const Ce={};for(const Re in Ze){const ze=be[Re.trim().toLowerCase()];if(ze){let Je=Ze[Re];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(ze)?(Je=Zme(Je),Je&&(Ce[ze]=Je)):ze.includes("realizada")?Ce[ze]=epe(Je):Je!=null&&Je!==""&&(Ce[ze]=String(Je).trim())}}return!Ce.nombreEstudiante||!Ce.rutEstudiante?(console.warn(`Fila ${Fe+2}: Faltan campos requeridos`),null):Ce}catch(Ce){return console.error(`Error procesando fila ${Fe+2}:`,Ce),null}}).filter(Ze=>Ze!==null);if(console.log("Registros procesados:",Me),Me.length>0){const{updated:Ze,created:Fe}=await Xme(Me);C({message:`Carga exitosa. ${Fe} registros creados, ${Ze} actualizados.`,isError:!1})}else C({message:"No se encontraron registros válidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(Z){console.error("Error completo:",Z),C({message:`Error al procesar el archivo: ${Z.message}. Verifique que las fechas estén en formato correcto.`,isError:!0})}},K.readAsArrayBuffer(J)},Y="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",ne=G.useMemo(()=>t.filter(V=>(u===""||V.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||V.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||V.rutEstudiante.includes(u))&&(h.curso===""||V.curso===h.curso)&&(h.empresa===""||V.nombreEmpresa===h.empresa)&&(h.estado===""||V.estado===h.estado)&&(h.comuna===""||V.comuna===h.comuna)&&(h.profesor===""||V.profesorTutorEmpresa===h.profesor)).sort((V,J)=>V.nombreEstudiante.localeCompare(J.nombreEstudiante)),[t,u,h]);return G.useMemo(()=>{const V=new Set,J=new Set;return t.forEach(K=>{K.nombreEmpresa&&V.add(K.nombreEmpresa),K.comuna&&J.add(K.comuna)}),{empresas:Array.from(V).sort(),comunas:Array.from(J).sort()}},[t]),n?c.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo Gestión Pedagógica LIR",className:"w-12 h-12 object-contain"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Práctica Dual"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:o?"Editando registro existente.":"Registre un nuevo estudiante en práctica."})]})]}),c.jsxs("form",{onSubmit:_,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),c.jsx("input",{type:"text",name:"nombreEstudiante",value:a.nombreEstudiante,onChange:U,className:Y,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),c.jsx("input",{type:"text",name:"rutEstudiante",value:a.rutEstudiante,onChange:U,className:Y,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsx("select",{name:"curso",value:a.curso,onChange:U,className:Y,required:!0,children:Ph.map(V=>c.jsx("option",{value:V,children:V},V))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),c.jsxs("select",{name:"profesorTutorEmpresa",value:a.profesorTutorEmpresa,onChange:U,className:Y,children:[c.jsx("option",{value:"",children:"Seleccione un profesor"}),B5.map(V=>c.jsx("option",{value:V,children:V},V))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),c.jsx("input",{type:"text",name:"nombreEmpresa",value:a.nombreEmpresa,onChange:U,className:Y,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),c.jsx("input",{type:"text",name:"rutEmpresa",value:a.rutEmpresa,onChange:U,className:Y})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),c.jsx("input",{type:"text",name:"direccionEmpresa",value:a.direccionEmpresa,onChange:U,className:Y})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),c.jsx("input",{type:"text",name:"comuna",value:a.comuna,onChange:U,className:Y})]}),c.jsxs("div",{className:"lg:col-span-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),c.jsx("select",{name:"estado",value:a.estado,onChange:U,className:Y,children:B_.map(V=>c.jsx("option",{value:V,children:V},V))})]})]}),a.estado==="Desvinculado"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),c.jsx("input",{type:"date",name:"fechaDesvinculacion",value:a.fechaDesvinculacion||"",onChange:U,className:`${Y} border-red-300`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),c.jsx("input",{type:"text",name:"motivoDesvinculacion",value:a.motivoDesvinculacion||"",onChange:U,className:`${Y} border-red-300`})]})]}),p&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:p}),c.jsxs("div",{className:"flex justify-end items-center gap-4",children:[o&&c.jsx("button",{type:"button",onClick:E,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:o?"Actualizar":"Agregar"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[c.jsx("button",{onClick:H,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),c.jsx("input",{type:"file",onChange:te,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),x&&c.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${x.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x.message})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:V=>d(V.target.value),className:`${Y} md:col-span-2 lg:col-span-1`}),c.jsxs("select",{name:"curso",value:h.curso,onChange:R,className:Y,children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),Ph.map(V=>c.jsx("option",{children:V},V))]}),c.jsxs("select",{name:"estado",value:h.estado,onChange:R,className:Y,children:[c.jsx("option",{value:"",children:"Todos los Estados"}),B_.map(V=>c.jsx("option",{children:V},V))]}),c.jsxs("select",{name:"profesor",value:h.profesor,onChange:R,className:Y,children:[c.jsx("option",{value:"",children:"Todos los Profesores"}),B5.map(V=>c.jsx("option",{children:V},V))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:ne.map(V=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:V.nombreEstudiante}),c.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:V.curso})]}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:V.nombreEmpresa}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:V.profesorTutorEmpresa}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Jme[V.estado]}`,children:V.estado})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[c.jsx("button",{onClick:()=>D(V),className:"text-blue-600 hover:underline",children:"Supervisión"}),c.jsx("button",{onClick:()=>B(V),className:"text-yellow-600 hover:underline",children:"Editar"}),c.jsx("button",{onClick:()=>j(V.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},V.id))})]})})]}),S&&I&&c.jsx(tpe,{record:I,onClose:L,onSave:Q})]})},wH="actividades_remotas",rpe="respuestas_actividades",spe="pruebas_estandarizadas",ape="usuarios",vB=t=>{var n,r,s,a,i,o;const e=t.data();return{id:t.id,...e,fechaCreacion:((r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaCreacion,plazoEntrega:((a=(s=e.plazoEntrega)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.plazoEntrega,fechaCompletado:((o=(i=e.fechaCompletado)==null?void 0:i.toDate)==null?void 0:o.call(i).toISOString())||e.fechaCompletado}},ipe=t=>{const e=an(Lt(It,wH),sr("fechaCreacion","desc"));return En(e,r=>{const s=r.docs.map(a=>vB(a));t(s)},r=>{console.error("Error al suscribirse a las actividades:",r),t([])})},ope=async t=>{try{const e={...t,fechaCreacion:mn.fromDate(new Date),plazoEntrega:mn.fromDate(new Date(t.plazoEntrega+"T00:00:00"))};return(await Cs(Lt(It,wH),e)).id}catch(e){throw console.error("Error al crear la actividad:",e),new Error("No se pudo crear la actividad.")}},lpe=async t=>{try{const e={...t,fechaCreacion:mn.fromDate(new Date),plazoEntrega:mn.fromDate(new Date(t.plazoEntrega+"T00:00:00"))};return(await Cs(Lt(It,spe),e)).id}catch(e){throw console.error("Error al crear la prueba estandarizada:",e),new Error("No se pudo crear la prueba estandarizada.")}},cpe=t=>{const e=an(Lt(It,rpe));return En(e,r=>{const s=r.docs.map(a=>vB(a));t(s)},r=>{console.error("Error al suscribirse a las respuestas:",r),t([])})},upe=t=>{const e=an(Lt(It,ape));return En(e,r=>{const s=r.docs.map(a=>vB(a));t(s)},r=>{console.error("Error al suscribirse a todos los usuarios:",r),t([])})},iS={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3]},ky=["Localizar información","Interpretar y relacionar","Reflexionar","Extraer información explícita","Realizar inferencias","Interpretar el sentido global del texto","Evaluar contenido y forma"],Ape=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result),r.onerror=s=>n(s)}),dpe=()=>{const[t,e]=G.useState([]),[n,r]=G.useState([]),[s,a]=G.useState([]),[i,o]=G.useState([]),[l,u]=G.useState(null),[d,h]=G.useState(null),[m,p]=G.useState(!1),[y,x]=G.useState(!1),[C,S]=G.useState(!1),[k,I]=G.useState(!0),[F,U]=G.useState(null),[R,E]=G.useState(""),[_,B]=G.useState(null),[j,D]=G.useState(null),[L,Q]=G.useState([]),[H,te]=G.useState("actividades"),Y={asignatura:po[0],nivel:km[0],contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},ne={asignatura:po[0],nivel:km[0],contenido:"",objetivosAprendizaje:"",plazoEntrega:new Date().toISOString().split("T")[0],cursosDestino:[],estudiantesDestino:[],duracionMinutos:90},[V,J]=G.useState(Y),[K,ie]=G.useState(ne);G.useEffect(()=>{I(!0);const Ue=ipe(e),Oe=cpe(a),Ie=upe(Xe=>{o(Xe),I(!1)});return()=>{Ue(),Oe(),Ie()}},[]);const O=Ue=>{J(Oe=>({...Oe,[Ue.target.name]:Ue.target.value}))},W=Ue=>{ie(Oe=>({...Oe,[Ue.target.name]:Ue.target.value}))},Z=Ue=>{J(Oe=>({...Oe,recursos:{...Oe.recursos,[Ue.target.name]:Ue.target.value}}))},re=Ue=>{Ue.target.files&&Q(Array.from(Ue.target.files))},se=Ue=>{J(Oe=>{const Ie=Oe.tipos.includes(Ue)?Oe.tipos.filter(mt=>mt!==Ue):[...Oe.tipos,Ue],Xe={...Oe.cantidadPreguntas};return Ie.includes(Ue)?Xe[Ue]||(Xe[Ue]=iS[Ue][0]):delete Xe[Ue],{...Oe,tipos:Ie,cantidadPreguntas:Xe}})},de=(Ue,Oe)=>{J(Ie=>({...Ie,cantidadPreguntas:{...Ie.cantidadPreguntas,[Ue]:Oe}}))},pe=(Ue,Oe=!1)=>{Oe?ie(Ie=>{var mt;const Xe=(mt=Ie.cursosDestino)!=null&&mt.includes(Ue)?Ie.cursosDestino.filter(Yt=>Yt!==Ue):[...Ie.cursosDestino||[],Ue];return{...Ie,cursosDestino:Xe}}):J(Ie=>{var mt;const Xe=(mt=Ie.cursosDestino)!=null&&mt.includes(Ue)?Ie.cursosDestino.filter(Yt=>Yt!==Ue):[...Ie.cursosDestino||[],Ue];return{...Ie,cursosDestino:Xe}})},be=(Ue,Oe=!1)=>{Oe?ie(Ie=>{var mt;const Xe=(mt=Ie.estudiantesDestino)!=null&&mt.includes(Ue)?Ie.estudiantesDestino.filter(Yt=>Yt!==Ue):[...Ie.estudiantesDestino||[],Ue];return{...Ie,estudiantesDestino:Xe}}):J(Ie=>{var mt;const Xe=(mt=Ie.estudiantesDestino)!=null&&mt.includes(Ue)?Ie.estudiantesDestino.filter(Yt=>Yt!==Ue):[...Ie.estudiantesDestino||[],Ue];return{...Ie,estudiantesDestino:Xe}})},Se=()=>{const{tipos:Ue,contenido:Oe,asignatura:Ie,nivel:Xe,cantidadPreguntas:mt}=V;let Yt=`Eres un experto diseñador de actividades pedagógicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${Oe}"
Asignatura: ${Ie}
Nivel: ${Xe}

Genera los siguientes elementos:
- **introduccion**: Una breve introducción motivadora para el estudiante sobre el tema: "${Oe}".
- **actividades**: Un objeto que contiene las actividades. Cada actividad es una propiedad con su nombre como clave:
`;return Ue.forEach(Kt=>{const rn=mt[Kt]||iS[Kt][0];switch(Kt){case"Quiz":Yt+=`- **Quiz**: Un array de ${rn} objetos. Cada objeto debe tener: "pregunta" (string), "opciones" (array de 4 strings) y "respuestaCorrecta" (string).
`;break;case"Comprensión de Lectura":Yt+=`- **Comprensión de Lectura**: Un array de ${rn} objetos. Cada objeto debe tener "texto" (string de 150-200 palabras) y "preguntas" (un array de 4 objetos, cada uno con "pregunta", "opciones" y "respuestaCorrecta").
`;break;case"Términos Pareados":Yt+=`- **Términos Pareados**: Un array de ${rn} objetos. Cada objeto debe tener "concepto" (string) y "definicion" (string).
`;break;case"Desarrollo":Yt+=`- **Desarrollo**: Un array de ${rn} objetos. Cada objeto debe tener una clave "pregunta" (string con la pregunta) y una clave "rubrica" (string con la rúbrica de evaluación).
`;break}}),Yt},me=()=>{const{contenido:Ue,objetivosAprendizaje:Oe,asignatura:Ie,nivel:Xe}=K;return`Eres un experto en evaluación educativa y diseño de pruebas SIMCE. 

IMPORTANTE: Responde ÚNICAMENTE con un objeto JSON válido, sin comentarios, sin texto adicional, sin explicaciones.

INFORMACIÓN DE LA PRUEBA:
- Asignatura: ${Ie}
- Nivel: ${Xe}
- Contenido: ${Ue}
- Objetivos: ${Oe}

RESPONDE SOLO CON ESTE JSON (sin comentarios, sin texto extra):
{
  "titulo": "Título descriptivo de la prueba",
  "instrucciones": "Instrucciones claras para el estudiante",
  "textos": [
    {
      "id": 1,
      "titulo": "Título del texto",
      "contenido": "Texto completo de 200-300 palabras",
      "tipo": "narrativo",
      "palabras": 250
    }
  ],
  "preguntas": [
    {
      "numero": 1,
      "pregunta": "Texto de la pregunta",
      "opciones": ["Opción A completa", "Opción B completa", "Opción C completa", "Opción D completa"],
      "respuestaCorrecta": "A",
      "habilidad": "Localizar información",
      "justificacion": "Explicación breve de por qué es correcta",
      "textoId": 1
    }
  ]
}

REGLAS OBLIGATORIAS:
- ${Ie==="Lenguaje y Comunicación"||Ie==="Lengua y Literatura"?"3-4 textos de lectura de diferentes tipos":"2-3 textos informativos"}
- Exactamente 30 preguntas numeradas del 1 al 30
- Cada pregunta con exactamente 4 opciones completas y específicas
- Respuesta correcta: solo "A", "B", "C" o "D"
- Habilidades: ${ky.join(", ")}
- Para preguntas basadas en textos: incluir "textoId"
- Sin comentarios en el JSON
- Texto tipo debe ser: "narrativo", "informativo", "argumentativo" o "poetico"

JSON válido sin comentarios:`};function ce(Ue,Oe){if(Ue==="Desarrollo"){if(Array.isArray(Oe))return Oe.map(Ie=>{if(typeof Ie=="string"){const Xe=Ie.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return Xe?{pregunta:Xe[1].trim(),rubrica:Xe[2].trim()}:{pregunta:Ie.trim(),rubrica:""}}return Ie&&typeof Ie=="object"?{pregunta:Ie.pregunta||Ie.Pregunta||Ie.texto||"",rubrica:Ie.rubrica||Ie.Rubrica||Ie.rúbrica||Ie.Rúbrica||""}:{pregunta:String(Ie),rubrica:""}});if(typeof Oe=="string")return Oe.split(/\n\n|\n- |\d+\. /).map(Ie=>{const Xe=Ie.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return Xe?{pregunta:Xe[1].trim(),rubrica:Xe[2].trim()}:{pregunta:Ie.trim(),rubrica:""}}).filter(Ie=>Ie.pregunta)}if(Ue==="Términos Pareados"){if(Array.isArray(Oe))return Oe.map((Ie,Xe)=>{if(typeof Ie=="string"){const mt=Ie.match(/^(.+?)[\s:-–]+(.+)$/);return mt?{id:Xe,concepto:mt[1].trim(),definicion:mt[2].trim()}:{id:Xe,concepto:Ie.trim(),definicion:""}}return Ie&&typeof Ie=="object"?{id:Xe,concepto:Ie.concepto||Ie.termino||"",definicion:Ie.definicion||Ie.significado||""}:{id:Xe,concepto:String(Ie),definicion:""}});if(typeof Oe=="object"&&Oe!==null)return Object.entries(Oe).map(([Ie,Xe],mt)=>({id:mt,concepto:Ie,definicion:Xe}));if(typeof Oe=="string")return Oe.split(/\n|;/).map((Ie,Xe)=>{const mt=Ie.match(/^(.+?)[\s:-–]+(.+)$/);return mt?{id:Xe,concepto:mt[1].trim(),definicion:mt[2].trim()}:{id:Xe,concepto:Ie.trim(),definicion:""}}).filter(Ie=>Ie.concepto)}if(Ue==="Comprensión de Lectura"){if(Oe&&typeof Oe=="object"&&Array.isArray(Oe.preguntas))return{texto:Oe.texto||"",preguntas:Oe.preguntas.map(Ie=>({pregunta:Ie.pregunta||Ie.Pregunta||"",opciones:Ie.opciones||Ie.Opciones||[],respuestaCorrecta:Ie.respuestaCorrecta||Ie.respuesta||""}))};if(Array.isArray(Oe)){const Ie=Oe.find(Xe=>Xe&&typeof Xe=="object"&&"texto"in Xe&&"preguntas"in Xe);return Ie?{texto:Ie.texto||"",preguntas:(Ie.preguntas||[]).map(Xe=>({pregunta:Xe.pregunta||Xe.Pregunta||"",opciones:Xe.opciones||Xe.Opciones||[],respuestaCorrecta:Xe.respuestaCorrecta||Xe.respuesta||""}))}:{texto:Oe.map(Xe=>typeof Xe=="string"?Xe:JSON.stringify(Xe)).join(`
`),preguntas:[]}}if(typeof Oe=="string"){const[Ie,Xe]=Oe.split(/Preguntas:|\nPreguntas:/i);let mt=[];return Xe&&(mt=Xe.split(/\n- |\n\d+\. /).filter(Boolean).map(Yt=>{const Kt=Yt.split(/Opciones:|\nOpciones:/i),rn=Kt[0].trim();let qn=[],un="";Kt[1]&&(qn=Kt[1].split(/;|\n|,/).map(jn=>jn.trim()).filter(Boolean));const xr=Yt.match(/Respuesta\s*correcta\s*:?\s*(.*)/i);return xr&&(un=xr[1].trim()),{pregunta:rn,opciones:qn,respuestaCorrecta:un}})),{texto:(Ie==null?void 0:Ie.trim())||Oe,preguntas:mt}}}return Oe}const Me=async Ue=>{var Oe;if(Ue.preventDefault(),!V.contenido.trim()||V.tipos.length===0){U("Contenido y al menos un tipo de actividad son obligatorios.");return}S(!0),U(null);try{const Ie=await Promise.all(L.map(async en=>({nombre:en.name,url:await Ape(en)}))),Xe="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Yt=new Ra(Xe).getGenerativeModel({model:"gemini-1.5-flash-latest"}),Kt=Se();let un=await(await(await Yt.generateContent(Kt)).response).text();console.log("Respuesta cruda de la IA (actividad):",un),un=un.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const xr=un.match(/\{[\s\S]*\}/);if(!xr)throw new Error("No se encontró un objeto JSON válido en la respuesta de la IA");const jn=xr[0];console.log("JSON extraído (actividad):",jn);const Sr=JSON.parse(jn),qr={};for(const en of V.tipos)qr[en]=ce(en,(Oe=Sr.actividades)==null?void 0:Oe[en]);const on={id:"",fechaCreacion:new Date().toISOString(),...V,recursos:{...V.recursos,archivos:Ie},introduccion:Sr.introduccion||"Actividad generada para reforzar el aprendizaje.",generatedContent:qr};B(on)}catch(Ie){console.error("Error al generar actividad con IA",Ie);const Xe=Ie instanceof Error?Ie.message:"Error desconocido";U(`Error al generar la actividad: ${Xe}. Por favor, inténtelo de nuevo.`)}finally{S(!1)}},Ze=async Ue=>{if(Ue.preventDefault(),!K.contenido.trim()||!K.objetivosAprendizaje.trim()){U("Contenido y objetivos de aprendizaje son obligatorios.");return}S(!0),U(null);try{const Oe="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Xe=new Ra(Oe).getGenerativeModel({model:"gemini-1.5-flash-latest"}),mt=me();let rn=await(await(await Xe.generateContent(mt)).response).text();console.log("Respuesta cruda de la IA:",rn),rn=rn.replace(/```json\s*/gi,"").replace(/```\s*$/g,""),rn=rn.replace(/\/\/.*$/gm,""),rn=rn.replace(/\/\*[\s\S]*?\*\//g,""),rn=rn.trim();const qn=rn.match(/\{[\s\S]*\}/);if(!qn)throw new Error("No se encontró un objeto JSON válido en la respuesta de la IA");let un=qn[0];console.log("JSON extraído:",un),un=un.replace(/,(\s*[}\]])/g,"$1"),console.log("JSON limpio:",un);const xr=JSON.parse(un);if(!xr.preguntas||!Array.isArray(xr.preguntas))throw new Error("La respuesta de la IA no contiene un array de preguntas válido");xr.preguntas.length!==30&&console.warn(`Se esperaban 30 preguntas, pero se recibieron ${xr.preguntas.length}`);const jn=(xr.textos||[]).map((on,en)=>{var zn;return{id:on.id||en+1,titulo:on.titulo||`Texto ${en+1}`,contenido:on.contenido||"Contenido del texto no disponible",tipo:["narrativo","informativo","argumentativo","poetico"].includes(on.tipo)?on.tipo:"informativo",palabras:on.palabras||((zn=on.contenido)==null?void 0:zn.split(" ").length)||0}}),Sr=xr.preguntas.slice(0,30).map((on,en)=>({numero:on.numero||en+1,pregunta:on.pregunta||`Pregunta ${en+1}`,opciones:Array.isArray(on.opciones)&&on.opciones.length>=4?on.opciones.slice(0,4):["Opción A","Opción B","Opción C","Opción D"],respuestaCorrecta:["A","B","C","D"].includes(on.respuestaCorrecta)?on.respuestaCorrecta:"A",habilidad:ky.includes(on.habilidad)?on.habilidad:ky[0],justificacion:on.justificacion||"Justificación no disponible",...on.textoId&&typeof on.textoId=="number"?{textoId:on.textoId}:{}}));console.log("Textos procesados:",jn),console.log("Preguntas procesadas:",Sr.slice(0,2));const qr={id:"",fechaCreacion:new Date().toISOString(),...K,titulo:xr.titulo||`Prueba ${K.asignatura} - ${K.nivel}`,instrucciones:xr.instrucciones||"Lee cada pregunta cuidadosamente y selecciona la mejor respuesta.",textos:jn,preguntas:Sr};D(qr)}catch(Oe){console.error("Error al generar prueba con IA",Oe);const Ie=Oe instanceof Error?Oe.message:"Error desconocido";Ie.includes("JSON")?U("Error al procesar la respuesta de la IA. El formato de respuesta no es válido. Inténtalo de nuevo."):U(`Error al generar la prueba estandarizada: ${Ie}. Por favor, inténtelo de nuevo.`)}finally{S(!1)}},Fe=async()=>{if(_)try{await ope(_),J(Y),Q([]),p(!1),B(null)}catch(Ue){console.error("Error al guardar la actividad:",Ue),U("No se pudo guardar la actividad en la base de datos.")}},Ce=async()=>{if(j)try{const Ue={...j,cursosDestino:j.cursosDestino||[],estudiantesDestino:j.estudiantesDestino||[],textos:j.textos||[],preguntas:j.preguntas.map(Oe=>({...Oe,textoId:Oe.textoId||null}))};await lpe(Ue),ie(ne),x(!1),D(null)}catch(Ue){console.error("Error al guardar la prueba:",Ue),U("No se pudo guardar la prueba en la base de datos.")}},Re=G.useMemo(()=>{var Xe,mt;const Ue=l||d;if(!Ue||!i)return[];const Oe=i.filter(Yt=>{var Kt;return Yt.profile===qt.ESTUDIANTE&&((Kt=Ue.cursosDestino)==null?void 0:Kt.includes(Yt.curso||""))}).map(Yt=>Yt.nombreCompleto),Ie=Ue.estudiantesDestino||[];if(!((Xe=Ue.cursosDestino)!=null&&Xe.length)&&!((mt=Ue.estudiantesDestino)!=null&&mt.length)){const Yt=Ue.nivel.charAt(0);return i.filter(Kt=>{var rn;return Kt.profile===qt.ESTUDIANTE&&((rn=Kt.curso)==null?void 0:rn.startsWith(Yt))}).map(Kt=>Kt.nombreCompleto).sort()}return Array.from(new Set([...Oe,...Ie])).sort()},[l,d,i]),ze=G.useMemo(()=>{const Ue=(l==null?void 0:l.id)||(d==null?void 0:d.id);return s.filter(Oe=>Oe.actividadId===Ue)},[s,l,d]),Je=G.useMemo(()=>i.filter(Ue=>Ue.profile===qt.ESTUDIANTE).sort((Ue,Oe)=>Ue.nombreCompleto.localeCompare(Oe.nombreCompleto)),[i]),dt=G.useMemo(()=>R.trim()?Je.filter(Ue=>Ue.nombreCompleto.toLowerCase().includes(R.toLowerCase())):Je,[Je,R]),_t=()=>c.jsxs("div",{className:"flex space-x-1 mb-6",children:[c.jsx("button",{onClick:()=>te("actividades"),className:`px-4 py-2 rounded-lg font-semibold ${H==="actividades"?"bg-amber-500 text-white":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:"Actividades Remotas"}),c.jsx("button",{onClick:()=>te("pruebas"),className:`px-4 py-2 rounded-lg font-semibold ${H==="pruebas"?"bg-amber-500 text-white":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:"Pruebas Estandarizadas"})]}),ft=()=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Prueba Estandarizada SIMCE"}),c.jsx("button",{onClick:()=>x(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"La IA generará una prueba de 30 preguntas con estándar SIMCE, indicando qué habilidad se mide en cada pregunta."}),c.jsxs("form",{onSubmit:Ze,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:K.asignatura,onChange:W,className:"w-full border-slate-300 rounded-md shadow-sm",children:po.map(Ue=>c.jsx("option",{value:Ue,children:Ue},Ue))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:K.nivel,onChange:W,className:"w-full border-slate-300 rounded-md shadow-sm",children:km.map(Ue=>c.jsx("option",{value:Ue,children:Ue},Ue))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"duracionMinutos",className:"block text-sm font-medium text-slate-600 mb-1",children:"Duración (minutos)"}),c.jsx("input",{type:"number",name:"duracionMinutos",value:K.duracionMinutos,onChange:W,min:"30",max:"180",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Fecha límite"}),c.jsx("input",{type:"date",name:"plazoEntrega",value:K.plazoEntrega,onChange:W,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Seleccione cursos o estudiantes. Si no selecciona ninguno, la prueba será visible para todo el nivel."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Cursos"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:Js.map(Ue=>{var Oe;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(Oe=K.cursosDestino)==null?void 0:Oe.includes(Ue),onChange:()=>pe(Ue,!0),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700",children:Ue})]},Ue)})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Estudiantes"}),c.jsx("input",{type:"text",placeholder:"Buscar...",value:R,onChange:Ue=>E(Ue.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:dt.map(Ue=>{var Oe;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(Oe=K.estudiantesDestino)==null?void 0:Oe.includes(Ue.nombreCompleto),onChange:()=>be(Ue.nombreCompleto,!0),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Ue.nombreCompleto,children:Ue.nombreCompleto})]},Ue.id)})})]})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido a evaluar ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenido",value:K.contenido,onChange:W,required:!0,rows:4,placeholder:"Describa los contenidos que se evaluarán en la prueba...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsxs("label",{htmlFor:"objetivosAprendizaje",className:"block text-sm font-medium text-slate-600 mb-1",children:["Objetivos de Aprendizaje ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"objetivosAprendizaje",value:K.objetivosAprendizaje,onChange:W,required:!0,rows:4,placeholder:"Liste los objetivos de aprendizaje que se evaluarán...",className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),F&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:F}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:C,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:C?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Generar y Previsualizar"})})]})]}),Rt=()=>{var Ue,Oe,Ie;return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Prueba Estandarizada"}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa las preguntas generadas. Si todo está correcto, confirma para asignar la prueba."}),c.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[c.jsxs("div",{className:"p-4 bg-blue-50 border-l-4 border-blue-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:j==null?void 0:j.titulo}),c.jsxs("p",{className:"text-slate-700 mb-2",children:[c.jsx("strong",{children:"Duración:"})," ",j==null?void 0:j.duracionMinutos," minutos"]}),c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:j==null?void 0:j.instrucciones})]}),(j==null?void 0:j.textos)&&j.textos.length>0&&c.jsxs("div",{className:"p-4 bg-emerald-50 border-l-4 border-emerald-400 rounded-r-lg",children:[c.jsxs("h3",{className:"font-bold text-emerald-800 mb-4",children:["Textos de Lectura (",j.textos.length,")"]}),c.jsx("div",{className:"space-y-4",children:j.textos.map((Xe,mt)=>c.jsxs("div",{className:"bg-white p-4 rounded-lg border border-emerald-200",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("h4",{className:"font-semibold text-slate-800",children:["Texto ",Xe.id,": ",Xe.titulo]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("span",{className:"text-xs bg-emerald-100 text-emerald-700 px-2 py-1 rounded-full",children:Xe.tipo}),c.jsxs("span",{className:"text-xs bg-slate-100 text-slate-700 px-2 py-1 rounded-full",children:[Xe.palabras," palabras"]})]})]}),c.jsx("div",{className:"text-sm text-slate-700 leading-relaxed whitespace-pre-wrap bg-slate-50 p-3 rounded border",children:Xe.contenido})]},Xe.id))})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[c.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Preguntas (",((Ue=j==null?void 0:j.preguntas)==null?void 0:Ue.length)||0,"/30)"]}),c.jsx("div",{className:"space-y-6",children:(Oe=j==null?void 0:j.preguntas)==null?void 0:Oe.map((Xe,mt)=>{var Yt;return c.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("p",{className:"font-semibold text-slate-800",children:[Xe.numero,". ",Xe.pregunta,Xe.textoId&&c.jsxs("span",{className:"ml-2 text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:["Basada en Texto ",Xe.textoId]})]}),c.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full font-medium",children:Xe.habilidad})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-3 mb-3",children:(Yt=Xe.opciones)==null?void 0:Yt.map((Kt,rn)=>{const qn=String.fromCharCode(65+rn),un=Xe.respuestaCorrecta===qn;return c.jsxs("div",{className:`p-2 rounded border ${un?"bg-green-50 border-green-300 text-green-800":"bg-slate-50 border-slate-200"}`,children:[c.jsxs("strong",{children:[qn,"."]})," ",Kt,un&&c.jsx("span",{className:"ml-2 text-xs",children:"✓"})]},rn)})}),Xe.justificacion&&c.jsxs("p",{className:"text-xs text-slate-600 bg-slate-100 p-2 rounded mt-2",children:[c.jsx("strong",{children:"Justificación:"})," ",Xe.justificacion]}),!1]},mt)})}),c.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[c.jsx("h4",{className:"font-bold text-gray-800 mb-3",children:"Distribución de Habilidades SIMCE"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mb-4",children:ky.map(Xe=>{var Yt;const mt=((Yt=j==null?void 0:j.preguntas)==null?void 0:Yt.filter(Kt=>Kt.habilidad===Xe).length)||0;return c.jsxs("div",{className:"text-sm",children:[c.jsxs("span",{className:"font-medium",children:[Xe,":"]})," ",mt," preguntas"]},Xe)})}),(j==null?void 0:j.textos)&&j.textos.length>0&&c.jsxs("div",{className:"border-t pt-3",children:[c.jsx("h5",{className:"font-semibold text-gray-700 mb-2",children:"Preguntas por Texto:"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[j.textos.map(Xe=>{var Yt;const mt=((Yt=j.preguntas)==null?void 0:Yt.filter(Kt=>Kt.textoId===Xe.id).length)||0;return c.jsxs("div",{className:"text-sm",children:[c.jsxs("span",{className:"font-medium",children:["Texto ",Xe.id,":"]})," ",mt," preguntas"]},Xe.id)}),c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium",children:"Sin texto base:"})," ",((Ie=j.preguntas)==null?void 0:Ie.filter(Xe=>!Xe.textoId).length)||0," preguntas"]})]})]})]}),!1]})]}),c.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>D(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:Ce,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700",children:"Confirmar y Asignar Prueba"})]})]})},Ut=()=>c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Pruebas Estandarizadas"}),c.jsx("button",{onClick:()=>x(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva Prueba"})]}),c.jsx("div",{className:"space-y-4",children:n.length>0?n.map(Ue=>{var Xe,mt,Yt;const Oe=[];(Xe=Ue.cursosDestino)!=null&&Xe.length&&Oe.push(`Cursos: ${Ue.cursosDestino.join(", ")}`),(mt=Ue.estudiantesDestino)!=null&&mt.length&&Oe.push(`Estudiantes: ${Ue.estudiantesDestino.length}`);const Ie=Oe.length?Oe.join(" | "):`Todo ${Ue.nivel}`;return c.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800",children:Ue.titulo||`${Ue.asignatura} - Prueba SIMCE`}),c.jsxs("p",{className:"text-sm text-slate-500",children:[Ue.nivel," | ",Ue.duracionMinutos," min | Destino: ",Ie]}),c.jsxs("p",{className:"text-xs text-slate-400",children:["Creado: ",new Date(Ue.fechaCreacion).toLocaleDateString("es-CL")," | Preguntas: ",((Yt=Ue.preguntas)==null?void 0:Yt.length)||0]})]}),c.jsx("button",{onClick:()=>h(Ue),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},Ue.id)}):c.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay pruebas estandarizadas creadas. Haga clic en "Crear Nueva Prueba" para comenzar.'})})]}),Zt=()=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l?`${l.asignatura} - ${l.tipos.join(", ")}`:`${(d==null?void 0:d.titulo)||"Prueba Estandarizada"}`}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Nivel: ",(l==null?void 0:l.nivel)||(d==null?void 0:d.nivel)," | Plazo: ",(l==null?void 0:l.plazoEntrega)||(d==null?void 0:d.plazoEntrega),d&&` | Duración: ${d.duracionMinutos} min`]})]}),c.jsx("button",{onClick:()=>{u(null),h(null)},className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),c.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Re.map(Ue=>{const Oe=ze.find(Ie=>Ie.estudianteId===Ue);return c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:Ue}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Oe?c.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):c.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Oe?`${Oe.puntaje}/${Oe.puntajeMaximo}`:"-"}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Oe?new Date(Oe.fechaCompletado).toLocaleString("es-CL"):"-"})]},Ue)})})]})})]})]}),Mt=()=>{var Ue,Oe;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),c.jsx("button",{onClick:()=>p(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad interactiva para sus estudiantes."}),c.jsxs("form",{onSubmit:Me,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:V.asignatura,onChange:O,className:"w-full border-slate-300 rounded-md shadow-sm",children:po.map(Ie=>c.jsx("option",{value:Ie,children:Ie},Ie))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:V.nivel,onChange:O,className:"w-full border-slate-300 rounded-md shadow-sm",children:km.map(Ie=>c.jsx("option",{value:Ie,children:Ie},Ie))})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos de Aprendizaje (Opcional)"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones de estudio"}),c.jsx("textarea",{name:"instrucciones",value:(Ue=V.recursos)==null?void 0:Ue.instrucciones,onChange:Z,placeholder:"Ej: Lee el siguiente texto y luego responde...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces (videos, documentos, etc.)"}),c.jsx("textarea",{name:"enlaces",value:(Oe=V.recursos)==null?void 0:Oe.enlaces,onChange:Z,placeholder:"Pega un enlace por línea...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos (PDF, imágenes, etc.)"}),c.jsx("input",{type:"file",multiple:!0,onChange:re,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Seleccione cursos o estudiantes. Si no selecciona ninguno, la actividad será visible para todo el nivel."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Cursos"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:Js.map(Ie=>{var Xe;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(Xe=V.cursosDestino)==null?void 0:Xe.includes(Ie),onChange:()=>pe(Ie),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700",children:Ie})]},Ie)})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Estudiantes"}),c.jsx("input",{type:"text",placeholder:"Buscar...",value:R,onChange:Ie=>E(Ie.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:dt.map(Ie=>{var Xe;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(Xe=V.estudiantesDestino)==null?void 0:Xe.includes(Ie.nombreCompleto),onChange:()=>be(Ie.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Ie.nombreCompleto,children:Ie.nombreCompleto})]},Ie.id)})})]})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),c.jsx("div",{className:"space-y-3",children:Nee.map(Ie=>c.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:V.tipos.includes(Ie),onChange:()=>se(Ie),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:Ie})]}),V.tipos.includes(Ie)&&c.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[c.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),iS[Ie].map(Xe=>c.jsx("button",{type:"button",onClick:()=>de(Ie,Xe),className:`px-3 py-1 rounded-full font-semibold text-xs ${V.cantidadPreguntas[Ie]===Xe?"bg-amber-500 text-white":"bg-slate-200"}`,children:Xe},Xe))]})]},Ie))})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenido",value:V.contenido,onChange:O,required:!0,rows:4,placeholder:"Ingrese los temas, conceptos clave o el texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),c.jsx("input",{type:"date",name:"plazoEntrega",value:V.plazoEntrega,onChange:O,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),F&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:F}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:C,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:C?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Generar y Previsualizar"})})]})]})},jt=()=>{var Ue;return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar la actividad."}),c.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[c.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:_==null?void 0:_.introduccion})]}),(_==null?void 0:_.recursos)&&(_.recursos.instrucciones||_.recursos.enlaces||((Ue=_.recursos.archivos)==null?void 0:Ue.length))&&c.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),c.jsxs("div",{className:"space-y-3",children:[_.recursos.instrucciones&&c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:_.recursos.instrucciones}),_.recursos.enlaces&&c.jsx("div",{children:_.recursos.enlaces.split(`
`).map((Oe,Ie)=>Oe.trim()&&c.jsx("a",{href:Oe,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:Oe},Ie))}),_.recursos.archivos&&_.recursos.archivos.length>0&&c.jsx("ul",{className:"list-disc list-inside",children:_.recursos.archivos.map(Oe=>c.jsx("li",{className:"text-slate-700",children:Oe.nombre},Oe.nombre))})]})]}),_==null?void 0:_.tipos.map(Oe=>{const Ie=_.generatedContent[Oe];return Ie?c.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:Oe}),c.jsxs("div",{className:"space-y-4 text-sm",children:[Oe==="Quiz"&&Array.isArray(Ie)&&Ie.map((Xe,mt)=>c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[mt+1,". ",Xe.pregunta]}),c.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:Xe.opciones.map((Yt,Kt)=>c.jsxs("li",{children:[c.jsxs("strong",{children:[String.fromCharCode(65+Kt),"."]})," ",Yt]},Kt))}),c.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",Xe.respuestaCorrecta]})]},mt)),Oe==="Comprensión de Lectura"&&Ie&&typeof Ie=="object"&&Array.isArray(Ie.preguntas)&&c.jsxs("div",{children:[c.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:Ie.texto}),Ie.preguntas.map((Xe,mt)=>c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[mt+1,". ",Xe.pregunta]}),c.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:Xe.opciones.map((Yt,Kt)=>c.jsxs("li",{children:[c.jsxs("strong",{children:[String.fromCharCode(65+Kt),"."]})," ",Yt]},Kt))}),c.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",Xe.respuestaCorrecta]})]},mt))]}),Oe==="Términos Pareados"&&Array.isArray(Ie)&&c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border border-slate-200",children:[c.jsx("thead",{className:"bg-slate-100",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),c.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definición"})]})}),c.jsx("tbody",{children:Ie.map(Xe=>c.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[c.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:Xe.concepto}),c.jsx("td",{className:"p-2 align-top text-slate-700",children:Xe.definicion})]},Xe.id))})]})}),Oe==="Desarrollo"&&Array.isArray(Ie)&&Ie.map((Xe,mt)=>c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[mt+1,". ",Xe.pregunta]}),c.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[c.jsx("strong",{className:"font-semibold",children:"Rúbrica:"})," ",Xe.rubrica]})]},mt)),(Oe==="Quiz"||Oe==="Términos Pareados"||Oe==="Desarrollo")&&!Array.isArray(Ie)&&c.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:['El contenido generado para "',c.jsx("strong",{children:Oe}),'" no tiene el formato de array esperado. La IA pudo haber devuelto una respuesta en un formato no válido.']}),Oe==="Comprensión de Lectura"&&(!Ie||typeof Ie!="object"||!Array.isArray(Ie.preguntas))&&c.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:['El contenido generado para "',c.jsx("strong",{children:"Comprensión de Lectura"}),'" no tiene el formato de objeto con preguntas esperado.']})]})]},Oe):null})]}),c.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>B(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:Fe,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700",children:"Confirmar y Asignar"})]})]})},Wt=()=>c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),c.jsx("button",{onClick:()=>p(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva"})]}),c.jsx("div",{className:"space-y-4",children:t.length>0?t.map(Ue=>{var Xe,mt;const Oe=[];(Xe=Ue.cursosDestino)!=null&&Xe.length&&Oe.push(`Cursos: ${Ue.cursosDestino.join(", ")}`),(mt=Ue.estudiantesDestino)!=null&&mt.length&&Oe.push(`Estudiantes: ${Ue.estudiantesDestino.length}`);const Ie=Oe.length?Oe.join(" | "):`Todo ${Ue.nivel}`;return c.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[Ue.asignatura," - ",Ue.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",Ie," | Creado: ",new Date(Ue.fechaCreacion).toLocaleDateString("es-CL")]})]}),c.jsx("button",{onClick:()=>u(Ue),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},Ue.id)}):c.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Haga clic en "Crear Nueva" para comenzar.'})})]});return k?c.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):c.jsxs("div",{className:"animate-fade-in",children:[_t(),j?Rt():_?jt():l||d?Zt():H==="pruebas"?y?ft():Ut():m?Mt():Wt()]})},fpe="actividades_remotas",hpe=t=>{var n,r,s,a,i,o;const e=t.data();return{id:t.id,...e,fechaCreacion:((r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaCreacion,plazoEntrega:((a=(s=e.plazoEntrega)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.plazoEntrega,fechaCompletado:((o=(i=e.fechaCompletado)==null?void 0:i.toDate)==null?void 0:o.call(i).toISOString())||e.fechaCompletado}},mpe=(t,e)=>{const n=an(Lt(It,fpe),sr("fechaCreacion","desc"));return En(n,s=>{const i=s.docs.map(o=>hpe(o)).filter(o=>{var l,u,d,h,m;if(!((l=o.cursosDestino)!=null&&l.length)&&!((u=o.estudiantesDestino)!=null&&u.length)){const p=o.nivel.charAt(0);return(d=t.curso)==null?void 0:d.startsWith(p)}return!!((h=o.cursosDestino)!=null&&h.includes(t.curso||"")||(m=o.estudiantesDestino)!=null&&m.includes(t.nombreCompleto))});e(i)},s=>{console.error("Error al suscribirse a las actividades disponibles:",s),e([])})},sT=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),ppe=({actividad:t,onComplete:e,currentUser:n})=>{const[r,s]=G.useState({}),[a,i]=G.useState(!1),[o,l]=G.useState(!1),[u,d]=G.useState(!1),h=`progress-${n.id}-${t.id}`;G.useEffect(()=>{const x=localStorage.getItem(h);x&&s(JSON.parse(x))},[h]);const m=(x,C)=>{s(S=>({...S,[x]:C}))},p=()=>{},y=async()=>{};return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h2",{className:"text-xl font-bold text-sky-800 mb-2",children:"Instrucciones"}),c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:t.introduccion})]}),t.tipos.map(x=>{const C=t.generatedContent[x];if(!C)return null;switch(x){case"Quiz":case"Comprensión de Lectura":{const S=x==="Quiz",k=C,I=S?k:k.preguntas;return c.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:x}),!S&&c.jsx("div",{className:"mb-4 p-3 rounded bg-slate-50 whitespace-pre-wrap",children:k.texto}),c.jsx("div",{className:"space-y-6",children:I.map((F,U)=>c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold",children:`${U+1}. ${F.pregunta}`}),c.jsx("div",{className:"mt-2 space-y-2",children:F.opciones.map((R,E)=>{var _;return c.jsxs("label",{className:"flex items-center gap-3 p-3 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"radio",name:`q-${x}-${U}`,value:R,checked:((_=r[x])==null?void 0:_[U])===R,onChange:()=>m(x,{...r[x],[U]:R}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400"}),c.jsx("span",{children:R})]},E)})})]},U))})]},x)}default:return null}}),c.jsxs("div",{className:"text-right mt-8 flex justify-end gap-4",children:[c.jsx("button",{onClick:p,disabled:a||o||u,className:"bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:o?c.jsxs(c.Fragment,{children:[c.jsx(sT,{})," Guardando..."]}):u?"✓ Guardado":"Guardar Progreso"}),c.jsx("button",{onClick:y,disabled:a||o,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:a?c.jsxs(c.Fragment,{children:[c.jsx(sT,{})," Evaluando..."]}):"Entregar Actividad"})]})]})},gpe=({currentUser:t})=>{const[e,n]=G.useState(!0),[r,s]=G.useState("list"),[a,i]=G.useState([]),[o,l]=G.useState(null),[u,d]=G.useState(null);G.useEffect(()=>{n(!0);const p=mpe(t,y=>{i(y),n(!1)});return()=>p()},[t]);const h=p=>{l(p),s("activity")},m=G.useCallback((p,y)=>{if(!o)return;const x={actividadId:o.id,estudianteId:t.id,fechaCompletado:new Date().toISOString(),...p,retroalimentacionDetallada:y};d(x),s("result")},[o,t.id]);return e?c.jsxs("div",{className:"text-center p-10",children:[c.jsx(sT,{})," Cargando actividades..."]}):r==="activity"&&o?c.jsx(ppe,{actividad:o,onComplete:m,currentUser:t}):r==="result"&&u?c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Resultados de la Actividad"}),c.jsxs("p",{children:["Puntaje: ",u.puntaje," / ",u.puntajeMaximo]}),c.jsx("button",{onClick:()=>s("list"),className:"mt-6 w-full bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700",children:"Volver a la lista"})]}):c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Auto-aprendizaje"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades asignadas por tus profesores."}),c.jsx("div",{className:"space-y-4",children:a.length>0?a.map(p=>c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[p.asignatura," - ",p.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",p.plazoEntrega]})]}),c.jsx("button",{onClick:()=>h(p),className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Comenzar"})]},p.id)):c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"text-6xl mb-4",children:"📚"}),c.jsx("p",{className:"text-slate-500 text-lg",children:"No hay actividades disponibles en este momento."})]})})]})},xC="estudiantes_inclusion",xpe="usuarios",bH=t=>{const e=t.data();return{id:t.id,...e}},vpe=t=>{const e=an(Lt(It,xC));return En(e,r=>{const s=r.docs.map(a=>bH(a));t(s)},r=>{console.error("Error al suscribirse a estudiantes de inclusión:",r),t([])})},ype=t=>{const e=an(Lt(It,xpe));return En(e,r=>{const s=r.docs.map(a=>bH(a));t(s)},r=>{console.error("Error al suscribirse a todos los usuarios:",r),t([])})},wpe=async t=>{try{return(await Cs(Lt(It,xC),t)).id}catch(e){throw console.error("Error al agregar estudiante a inclusión:",e),new Error("No se pudo agregar al estudiante.")}},bpe=async(t,e)=>{try{const{id:n,...r}=e,s=Cn(It,xC,t);await io(s,r)}catch(n){throw console.error("Error al actualizar estudiante de inclusión:",n),new Error("No se pudo actualizar la ficha del estudiante.")}},Cpe=async t=>{try{const e=Cn(It,xC,t);await Ka(e)}catch(e){throw console.error("Error al eliminar estudiante de inclusión:",e),new Error("No se pudo eliminar al estudiante.")}},Epe=({student:t,onClose:e,onSave:n,profesores:r})=>{const[s,a]=G.useState("intervenciones"),[i,o]=G.useState(t);G.useEffect(()=>{o(t)},[t]);const[l,u]=G.useState(null),d={responsable:"",accion:"",observaciones:""},[h,m]=G.useState(d),[p,y]=G.useState({trimestre:"T1",meta:""}),[x,C]=G.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[S,k]=G.useState(null),[I,F]=G.useState(!1),U={motivo:"",acuerdos:"",asistentes:""},[R,E]=G.useState(U),_=()=>{n(i),e()},B=()=>{if(!h.responsable||!h.accion){alert("Responsable y Acción son campos obligatorios.");return}let me;l?me=(i.intervenciones||[]).map(Me=>Me.id===l.id?{...Me,...h}:Me):me=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...i.intervenciones||[]];const ce=me.sort((Me,Ze)=>new Date(Ze.fecha).getTime()-new Date(Me.fecha).getTime());o(Me=>({...Me,intervenciones:ce})),m(d),u(null)},j=me=>{u(me),m({responsable:me.responsable,accion:me.accion,observaciones:me.observaciones})},D=me=>{window.confirm("¿Eliminar esta intervención?")&&o(ce=>({...ce,intervenciones:(ce.intervenciones||[]).filter(Me=>Me.id!==me)}))},L=me=>{const{name:ce,value:Me}=me.target;o(Ze=>({...Ze,[ce]:Me,fechaActualizacionApoyos:new Date().toISOString()}))},Q=()=>{if(!p.meta.trim())return;const me={...p,id:crypto.randomUUID(),cumplida:!1};o(ce=>({...ce,metasProgreso:[...ce.metasProgreso||[],me]})),y({trimestre:"T1",meta:""})},H=me=>{o(ce=>({...ce,metasProgreso:(ce.metasProgreso||[]).map(Me=>Me.id===me?{...Me,cumplida:!Me.cumplida}:Me)}))},te=me=>{o(ce=>({...ce,metasProgreso:(ce.metasProgreso||[]).filter(Me=>Me.id!==me)}))},Y=G.useMemo(()=>{const me=i.metasProgreso||[];if(me.length===0)return{percent:0,color:"bg-slate-300"};const ce=me.filter(Fe=>Fe.cumplida).length,Me=Math.round(ce/me.length*100),Ze=Me<40?"bg-red-500":Me<75?"bg-yellow-500":"bg-green-500";return{percent:Me,color:Ze}},[i.metasProgreso]),ne=G.useMemo(()=>{if(!i.fechaActualizacionApoyos)return!0;const me=new Date(i.fechaActualizacionApoyos),ce=new Date;return ce.setMonth(ce.getMonth()-3),me<ce},[i.fechaActualizacionApoyos]),V=()=>{if(!x.titulo.trim()||!x.fecha)return;const me={...x,id:crypto.randomUUID(),resuelta:!1};o(ce=>({...ce,alertas:[...ce.alertas||[],me].sort((Me,Ze)=>new Date(Me.fecha).getTime()-new Date(Ze.fecha).getTime())})),C({titulo:"",fecha:new Date().toISOString().split("T")[0]})},J=me=>{o(ce=>({...ce,alertas:(ce.alertas||[]).map(Me=>Me.id===me?{...Me,resuelta:!Me.resuelta}:Me)}))},K=me=>{o(ce=>({...ce,alertas:(ce.alertas||[]).filter(Me=>Me.id!==me)}))},ie=me=>{me.target.files&&me.target.files[0]&&k(me.target.files[0])},O=()=>{if(!S)return;F(!0);const me=new FileReader;me.readAsDataURL(S),me.onloadend=()=>{const ce={id:crypto.randomUUID(),nombre:S.name,url:me.result,fechaSubida:new Date().toISOString()};o(Me=>({...Me,archivos:[ce,...Me.archivos||[]]})),k(null),F(!1)},me.onerror=()=>{alert("Error al leer el archivo."),F(!1)}},W=me=>{window.confirm("¿Eliminar este archivo?")&&o(ce=>({...ce,archivos:(ce.archivos||[]).filter(Me=>Me.id!==me)}))},Z=()=>{if(!R.motivo.trim()||!R.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const me={...R,id:crypto.randomUUID(),fecha:new Date().toISOString()};o(ce=>({...ce,reuniones:[me,...ce.reuniones||[]].sort((Me,Ze)=>new Date(Ze.fecha).getTime()-new Date(Me.fecha).getTime())})),E(U)},re=me=>{window.confirm("¿Eliminar este registro de reunión?")&&o(ce=>({...ce,reuniones:(ce.reuniones||[]).filter(Me=>Me.id!==me)}))},se=()=>{var Je,dt,_t;const me=new hn("p","mm","a4"),ce=20,Me=me.internal.pageSize.getWidth(),Ze=me.internal.pageSize.getHeight();let Fe=ce;const Ce=ft=>{ft.setFontSize(10),ft.setTextColor(100),ft.text("Ficha de Seguimiento - Módulo Inclusión",ce,15)};Ce(me),me.setFontSize(18),me.setFont("helvetica","bold"),me.setTextColor(40),me.text(i.nombre,ce,Fe+10),Fe+=15,me.setFontSize(11),me.setFont("helvetica","normal"),me.setTextColor(80),me.text(`Curso: ${i.curso}`,ce,Fe),me.text(`Dificultad: ${i.dificultad}`,ce,Fe+6),Fe+=15;const Re=ft=>{Fe+ft>Ze-ce&&(me.addPage(),Ce(me),Fe=ce)},ze=ft=>{Re(15),me.setFontSize(14),me.setFont("helvetica","bold"),me.text(ft,ce,Fe),Fe+=10};if((Je=i.intervenciones)!=null&&Je.length&&(ze("Historial de Intervenciones"),vl(me,{startY:Fe,head:[["Fecha","Responsable","Acción","Observaciones"]],body:i.intervenciones.map(ft=>[new Date(ft.fecha).toLocaleDateString("es-CL"),ft.responsable,ft.accion,ft.observaciones||""]),theme:"grid",didDrawPage:ft=>Ce(me)}),Fe=me.lastAutoTable.finalY+10),i.adaptacionesCurriculares||i.apoyosRecibidos){Re(30),ze("Seguimiento y Apoyos"),me.setFontSize(11),me.setFont("helvetica","normal");const ft=`Adaptaciones: ${i.adaptacionesCurriculares||"No registradas."}
Apoyos: ${i.apoyosRecibidos||"No registrados."}`,Rt=me.splitTextToSize(ft,Me-ce*2);me.text(Rt,ce,Fe),Fe+=Rt.length*5+10}(dt=i.metasProgreso)!=null&&dt.length&&(Re(30),ze("Metas de Progreso"),vl(me,{startY:Fe,head:[["Trimestre","Meta","Estado"]],body:i.metasProgreso.map(ft=>[ft.trimestre,ft.meta,ft.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:ft=>Ce(me)}),Fe=me.lastAutoTable.finalY+10),(_t=i.reuniones)!=null&&_t.length&&(ze("Reuniones con Apoderados"),vl(me,{startY:Fe,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:i.reuniones.map(ft=>[new Date(ft.fecha).toLocaleDateString("es-CL"),ft.motivo,ft.acuerdos,ft.asistentes]),theme:"grid",didDrawPage:ft=>Ce(me)})),me.save(`Ficha_Inclusion_${i.nombre.replace(/\s/g,"_")}.pdf`)},de=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:l?"Editando Intervención":"Registrar Nueva Intervención"}),c.jsxs("select",{value:h.responsable,onChange:me=>m(ce=>({...ce,responsable:me.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione Responsable..."}),r.map(me=>c.jsx("option",{value:me,children:me},me))]}),c.jsx("textarea",{value:h.accion,onChange:me=>m(ce=>({...ce,accion:me.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:h.observaciones,onChange:me=>m(ce=>({...ce,observaciones:me.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"flex justify-end gap-2",children:[l&&c.jsx("button",{onClick:()=>{u(null),m(d)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md",children:"Cancelar Edición"}),c.jsx("button",{onClick:B,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:l?"Actualizar":"Guardar"})]})]}),c.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(i.intervenciones||[]).map(me=>c.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:me.accion}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:me.observaciones}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(me.fecha).toLocaleString("es-CL")," - ",me.responsable]})]}),c.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[c.jsx("button",{onClick:()=>j(me),className:"text-blue-500",children:"✏️"}),c.jsx("button",{onClick:()=>D(me.id),className:"text-red-500",children:"🗑️"})]})]})},me.id))})]}),pe=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),ne&&c.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl",children:"⚠️"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),c.jsx("textarea",{name:"adaptacionesCurriculares",value:i.adaptacionesCurriculares||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),c.jsx("textarea",{name:"apoyosRecibidos",value:i.apoyosRecibidos||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",Y.percent,"%"]}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:c.jsx("div",{className:`${Y.color} h-4 rounded-full transition-all duration-500`,style:{width:`${Y.percent}%`}})})]}),c.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[c.jsxs("select",{value:p.trimestre,onChange:me=>y(ce=>({...ce,trimestre:me.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"T1",children:"T1"}),c.jsx("option",{value:"T2",children:"T2"}),c.jsx("option",{value:"T3",children:"T3"})]}),c.jsx("input",{value:p.meta,onChange:me=>y(ce=>({...ce,meta:me.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:Q,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm",children:"Agregar"})]}),c.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(i.metasProgreso||[]).map(me=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[c.jsx("input",{type:"checkbox",checked:me.cumplida,onChange:()=>H(me.id),className:"h-5 w-5 rounded text-amber-500"}),c.jsxs("span",{className:`flex-grow text-sm ${me.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[c.jsxs("strong",{children:[me.trimestre,":"]})," ",me.meta]}),c.jsx("button",{onClick:()=>te(me.id),className:"text-red-500 text-sm",children:"🗑️"})]},me.id))})]})]}),be=()=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),c.jsx("input",{type:"text",value:x.titulo,onChange:me=>C(ce=>({...ce,titulo:me.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),c.jsx("input",{type:"date",value:x.fecha,onChange:me=>C(ce=>({...ce,fecha:me.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),c.jsx("button",{onClick:V,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md",children:"Agendar"})]}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.alertas||[]).map(me=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[c.jsx("input",{type:"checkbox",checked:me.resuelta,onChange:()=>J(me.id),className:"h-5 w-5 rounded text-amber-500"}),c.jsxs("span",{className:`flex-grow text-sm ${me.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[me.titulo," (",new Date(me.fecha+"T12:00:00").toLocaleDateString(),")"]}),c.jsx("button",{onClick:()=>K(me.id),className:"text-red-500 text-sm",children:"🗑️"})]},me.id))})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),c.jsx("input",{type:"file",onChange:ie,className:"w-full text-sm"}),c.jsx("button",{onClick:O,disabled:!S||I,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400",children:I?"Subiendo...":"Subir"})]}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.archivos||[]).map(me=>c.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[c.jsx("a",{href:me.url,download:me.nombre,className:"text-sm text-blue-600 hover:underline truncate",children:me.nombre}),c.jsx("button",{onClick:()=>W(me.id),className:"text-red-500 text-sm ml-2",children:"🗑️"})]},me.id))})]})]}),Se=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),c.jsx("input",{value:R.motivo,onChange:me=>E(ce=>({...ce,motivo:me.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:R.acuerdos,onChange:me=>E(ce=>({...ce,acuerdos:me.target.value})),placeholder:"Acuerdos...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{value:R.asistentes,onChange:me=>E(ce=>({...ce,asistentes:me.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("div",{className:"text-right",children:c.jsx("button",{onClick:Z,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:"Guardar Reunión"})})]}),c.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(i.reuniones||[]).map(me=>c.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:me.motivo}),c.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:[c.jsx("strong",{children:"Acuerdos:"})," ",me.acuerdos]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(me.fecha).toLocaleString("es-CL")," - Asistentes: ",me.asistentes]})]}),c.jsx("button",{onClick:()=>re(me.id),className:"text-red-500 flex-shrink-0 ml-4",children:"🗑️"})]})},me.id))})]});return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:me=>me.stopPropagation(),children:[c.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",t.nombre]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.curso," - ",t.dificultad]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:se,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200",children:"Exportar PDF"}),c.jsx("button",{onClick:e,className:"text-2xl text-slate-500 hover:text-slate-800",children:"×"})]})]}),c.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:c.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(me=>c.jsx("button",{onClick:()=>a(me),className:`${s===me?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize`,children:me==="alertas"?"Alertas y Archivos":me==="seguimiento"?"Seguimiento y Metas":me},me))})}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&de(),s==="seguimiento"&&pe(),s==="reuniones"&&Se(),s==="alertas"&&be()]}),c.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[c.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cerrar"}),c.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios y Cerrar"})]})]})})},_pe=({student:t,onClose:e,onConfirm:n})=>{const[r,s]=G.useState(Nw[0]),a=()=>{n(t,r)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",t.nombreCompleto," al PIE"]}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),c.jsx("select",{id:"dificultad",value:r,onChange:i=>s(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Nw.map(i=>c.jsx("option",{value:i,children:i},i))})]}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{type:"button",onClick:a,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Confirmar e Ingresar"})]})]})})},wR=({currentUser:t})=>{const[e,n]=G.useState([]),[r,s]=G.useState([]),[a,i]=G.useState(!0),[o,l]=G.useState(null),[u,d]=G.useState(null),[h,m]=G.useState(""),[p,y]=G.useState(""),[x,C]=G.useState("");G.useEffect(()=>{i(!0);const _=vpe(j=>{n(j),i(!1)}),B=ype(j=>{s(j)});return()=>{_(),B()}},[]);const S=async(_,B)=>{if(e.some(D=>D.nombre===_.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const j={nombre:_.nombreCompleto,curso:_.curso||"",dificultad:B,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await wpe(j)}catch(D){console.error("Error al agregar estudiante:",D),alert("Hubo un error al agregar al estudiante al programa.")}},k=async _=>{try{await bpe(_.id,_)}catch(B){console.error("Error al actualizar la ficha:",B),alert("Hubo un error al guardar los cambios en la ficha.")}},I=async _=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await Cpe(_),(o==null?void 0:o.id)===_&&l(null)}catch(B){console.error("Error al eliminar estudiante:",B),alert("Hubo un error al eliminar al estudiante.")}},F=_=>{if(R.length===0){alert("No hay datos para exportar.");return}const B=R.map(j=>{var D;return{Nombre:j.nombre,Curso:j.curso,Dificultad:j.dificultad,"N° Intervenciones":((D=j.intervenciones)==null?void 0:D.length)||0,"Alertas Pendientes":(j.alertas||[]).filter(L=>!L.resuelta).length}});if(_==="xlsx"){const j=sc.json_to_sheet(B),D=sc.book_new();sc.book_append_sheet(D,j,"Estudiantes_Inclusion"),hB(D,"Estudiantes_Inclusion.xlsx")}else{const j=new hn;j.text("Listado de Estudiantes - Programa de Inclusión",14,15),vl(j,{startY:20,head:[Object.keys(B[0])],body:B.map(Object.values)}),j.save("Estudiantes_Inclusion.pdf")}},U=G.useMemo(()=>r.filter(_=>{var B;return _.profile===qt.ESTUDIANTE&&(((B=t.cursos)==null?void 0:B.includes(_.curso||""))||t.profile===qt.SUBDIRECCION)}).filter(_=>!e.some(B=>B.nombre===_.nombreCompleto)),[r,e,t]),R=G.useMemo(()=>e.filter(_=>_.nombre.toLowerCase().includes(h.toLowerCase())&&(p===""||_.curso===p)&&(x===""||_.dificultad===x)).sort((_,B)=>_.nombre.localeCompare(B.nombre)),[e,h,p,x]),E=G.useMemo(()=>r.filter(_=>_.profile===qt.PROFESORADO).map(_=>_.nombreCompleto).sort(),[r]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),a?c.jsx("div",{className:"text-center py-10",children:"Cargando datos del programa..."}):c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",R.length,")"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>F("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),c.jsx("button",{onClick:()=>F("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por nombre...",value:h,onChange:_=>m(_.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("select",{value:p,onChange:_=>y(_.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),Js.map(_=>c.jsx("option",{children:_},_))]}),c.jsxs("select",{value:x,onChange:_=>C(_.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todas las Dificultades"}),Nw.map(_=>c.jsx("option",{children:_},_))]})]}),c.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:R.map(_=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:_.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[_.curso," - ",_.dificultad]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>l(_),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Ficha"}),c.jsx("button",{onClick:()=>I(_.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full text-lg",children:"🗑️"})]})]},_.id))})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante desde Nómina"}),c.jsx("ul",{className:"space-y-2 max-h-[60vh] overflow-y-auto",children:U.map(_=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-sm text-slate-800 dark:text-slate-200",children:_.nombreCompleto}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:_.curso})]}),c.jsx("button",{onClick:()=>d(_),className:"text-2xl text-green-500 hover:text-green-700",children:"+"})]},_.id))})]})]}),u&&c.jsx(_pe,{student:u,onClose:()=>d(null),onConfirm:(_,B)=>{S(_,B),d(null)}}),o&&c.jsx(Epe,{student:o,onClose:()=>l(null),onSave:k,profesores:E})]})},CH="asistencia_dual",Spe=t=>{var n,r;const e=t.data();return{id:t.id,...e,fechaHora:((r=(n=e.fechaHora)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaHora}},Tpe=(t,e)=>{const n=an(Lt(It,CH),Vr("emailEstudiante","==",t),sr("fechaHora","desc"));return En(n,s=>{const a=s.docs.map(i=>Spe(i));e(a)},s=>{console.error("Error subscribing to personal attendance:",s),e([])})},Npe=async t=>{try{const e={...t,fechaHora:mn.fromDate(new Date(t.fechaHora))};await Cs(Lt(It,CH),e)}catch(e){throw console.error("Error adding attendance record:",e),new Error("Could not save the attendance record.")}},Bpe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),kpe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),Ipe=({currentUser:t})=>{const[e,n]=G.useState(t.curso||""),[r,s]=G.useState([]),[a,i]=G.useState(!1),[o,l]=G.useState(!0),[u,d]=G.useState(null);G.useEffect(()=>{if(!t.email){l(!1);return}l(!0);const m=Tpe(t.email,p=>{s(p),l(!1)});return()=>m()},[t.email]);const h=m=>{if(!e){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),d(null),navigator.geolocation.getCurrentPosition(async p=>{const y={nombreEstudiante:t.nombreCompleto,emailEstudiante:t.email,curso:e,tipo:m,fechaHora:new Date().toISOString(),ubicacion:{latitud:p.coords.latitude,longitud:p.coords.longitude}};try{await Npe(y),d({text:`¡Marca de ${m} registrada con éxito!`,type:"success"})}catch(x){console.error("Error saving record to Firestore:",x),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{i(!1)}},p=>{console.error("Geolocation error:",p);let y="No se pudo obtener la ubicación.";switch(p.code){case p.PERMISSION_DENIED:y="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case p.POSITION_UNAVAILABLE:y="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case p.TIMEOUT:y="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:y=`Ocurrió un error desconocido al obtener la ubicación (código: ${p.code}).`;break}d({text:y,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),c.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),c.jsxs("select",{id:"curso",value:e,onChange:m=>n(m.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"-- Mi curso --"}),Ph.map(m=>c.jsx("option",{value:m,children:m},m))]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[c.jsx("button",{onClick:()=>h("Entrada"),disabled:a||!e,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),c.jsx("button",{onClick:()=>h("Salida"),disabled:a||!e,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),a&&c.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[c.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c.jsx("span",{children:"Obteniendo ubicación..."})]}),u&&c.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o?c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):r.length>0?r.map(m=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(m.fechaHora).toLocaleString("es-CL")}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:c.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${m.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[m.tipo==="Entrada"?c.jsx(Bpe,{}):c.jsx(kpe,{}),m.tipo]})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:m.curso})]},m.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},Fpe=async()=>{try{console.log("🔍 Debugging users collection...");const t=Lt(er,"users"),e=an(t,Ef(10)),n=await Da(e),r={exists:!0,totalDocs:n.size,sampleDocs:[],fieldAnalysis:{}},s=new Set;return n.forEach((a,i)=>{const o=a.data(),l={id:a.id,data:o,fields:Object.keys(o)};r.sampleDocs.push(l),Object.keys(o).forEach(u=>s.add(u))}),r.fieldAnalysis={allFields:Array.from(s),commonFields:Array.from(s).filter(a=>r.sampleDocs.filter(o=>a in o.data).length>r.sampleDocs.length*.5)},console.log("Users collection debug result:",r),r}catch(t){return console.error("Error debugging users collection:",t),{exists:!1,error:t instanceof Error?t.message:"Unknown error"}}},Dpe=async(t,e)=>{var l,u,d;const n=new Date(t,e,1),r=new Date(t,e+1,0,23,59,59,999),s=mn.fromDate(n),a=mn.fromDate(r),i=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],o={};for(const h of i)try{const m=Lt(er,h);try{const p=an(m,Vr("fechaHora",">=",s),Vr("fechaHora","<=",a)),y=await Da(p);o[h]={exists:!0,hasDateField:!0,count:y.size,sampleDoc:((l=y.docs[0])==null?void 0:l.data())||null}}catch{const y=["fecha","timestamp","createdAt"];let x=!1;for(const C of y)try{const S=an(m,Vr(C,">=",s),Vr(C,"<=",a)),k=await Da(S);o[h]={exists:!0,hasDateField:C,count:k.size,sampleDoc:((u=k.docs[0])==null?void 0:u.data())||null},x=!0;break}catch{continue}if(!x){const C=an(m,sr("__name__"),Ef(5)),S=await Da(C);o[h]={exists:!0,hasDateField:!1,count:S.size,sampleDoc:((d=S.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(m){o[h]={exists:!1,error:m instanceof Error?m.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",o),o},Rpe=(t,e,n,r)=>{try{const s=new Date(t,e,1);s.setHours(0,0,0,0);const a=new Date(t,e+1,0);a.setHours(23,59,59,999),console.log(`🔍 Buscando registros entre: ${s.toISOString()} y ${a.toISOString()}`),console.log(`📅 Mes actual: ${t}-${(e+1).toString().padStart(2,"0")}`);const i=mn.fromDate(s),o=mn.fromDate(a),l=[],u=new Map,d=()=>{const m=Array.from(u.values());console.log(`📊 Total registros encontrados: ${m.length}`),m.length>0&&console.log("📅 Registros por día:",m.reduce((p,y)=>{let x;y.fechaHora instanceof Date?x=y.fechaHora:typeof y.fechaHora=="string"?x=new Date(y.fechaHora):x=new Date;const C=x.getDate();return p[C]=(p[C]||0)+1,p},{})),n(m)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(m=>{try{console.log(`🔍 Configurando suscripción para: ${m}`);const p=Lt(er,m),y=an(p,Vr("fechaHora",">=",i),Vr("fechaHora","<=",o),sr("fechaHora","desc")),x=En(y,C=>{console.log(`📋 ${m}: ${C.size} documentos encontrados con filtro`),C.size>0?(console.log(`✅ Registros encontrados en ${m}:`),Array.from(u.keys()).filter(k=>k.startsWith(`${m}_`)).forEach(k=>u.delete(k)),C.docs.forEach((k,I)=>{var F;if(I<5){const U=k.data();let R;(F=U.fechaHora)!=null&&F.toDate?R=U.fechaHora.toDate():typeof U.fechaHora=="string"?R=new Date(U.fechaHora):R=new Date,console.log(`   ${I+1}. ${U.emailEstudiante} - ${R.toLocaleString()} - ${U.tipo}`),console.log(`      📅 Fecha original: ${U.fechaHora} (tipo: ${typeof U.fechaHora})`)}}),C.forEach(k=>{var E;const I=k.data();let F;(E=I.fechaHora)!=null&&E.toDate?F=I.fechaHora.toDate():typeof I.fechaHora=="string"?F=new Date(I.fechaHora):I.fechaHora instanceof Date?F=I.fechaHora:I.fechaHora?F=new Date(I.fechaHora):F=new Date;const U={id:k.id,emailEstudiante:I.emailEstudiante||I.email||"",nombreEstudiante:I.nombreEstudiante||I.nombre||"",curso:I.curso||"",fechaHora:F,tipo:I.tipo,ubicacion:I.ubicacion||null,observaciones:I.observaciones||"",...I},R=`${m}_${k.id}`;u.set(R,U)}),d()):console.log(`⚪ ${m}: vacía, manteniendo datos existentes`)},C=>{console.warn(`⚠️ Error con filtro en ${m}:`,C),console.log(`🔄 Intentando estrategia alternativa en ${m}...`);const S=an(p,Ef(200)),k=En(S,F=>{if(console.log(`📋 ${m} (sin filtro): ${F.size} documentos`),F.size>0){const R=F.docs[0].data();console.log(`📄 Estructura en ${m}:`,Object.keys(R)),console.log("📄 Primer documento:",R)}const U=F.docs.filter(R=>{var B;const E=R.data();if(!E.fechaHora)return!1;let _;return(B=E.fechaHora)!=null&&B.toDate?_=E.fechaHora.toDate():typeof E.fechaHora=="string"?_=new Date(E.fechaHora):E.fechaHora instanceof Date?_=E.fechaHora:_=new Date(E.fechaHora),_>=s&&_<=a});console.log(`📅 ${m}: ${U.length} registros después de filtro manual`),U.length>0&&(Array.from(u.keys()).filter(E=>E.startsWith(`${m}_`)).forEach(E=>u.delete(E)),U.forEach(E=>{var L;const _=E.data();let B;(L=_.fechaHora)!=null&&L.toDate?B=_.fechaHora.toDate():typeof _.fechaHora=="string"?B=new Date(_.fechaHora):_.fechaHora instanceof Date?B=_.fechaHora:B=new Date(_.fechaHora);const j={id:E.id,emailEstudiante:_.emailEstudiante||_.email||"",nombreEstudiante:_.nombreEstudiante||_.nombre||"",curso:_.curso||"",fechaHora:B,tipo:_.tipo,ubicacion:_.ubicacion||null,observaciones:_.observaciones||"",..._},D=`${m}_${E.id}`;u.set(D,j)}),d())}),I=l.findIndex(F=>F===x);I>=0?l[I]=k:l.push(k)});l.push(x)}catch(p){console.warn(`❌ Error configurando ${m}:`,p)}}),()=>{l.forEach(m=>{try{m()}catch(p){console.warn("Error unsubscribing:",p)}})}}catch(s){return console.error("Error setting up subscribeToAsistenciaByMonth:",s),r&&r(new Error(`Error al configurar suscripción: ${s instanceof Error?s.message:"Error desconocido"}`)),()=>{}}},Lpe=(t,e)=>{try{console.log("🔍 Buscando usuarios en múltiples colecciones...");const n=["usuarios","users"],r=[],s=new Map,a=()=>{const o=Array.from(s.values());console.log(`📊 Total usuarios encontrados: ${o.length}`);const l=o.reduce((d,h)=>(d[h.profile]=(d[h.profile]||0)+1,d),{});console.log("👥 Usuarios por perfil:",l);const u=o.filter(d=>d.profile===qt.ESTUDIANTE);console.log(`🎓 Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),t(o)};let i=!1;return n.forEach(o=>{try{const l=Lt(er,o),u=an(l),d=En(u,h=>{h.size>0?(console.log(`✅ Encontrados ${h.size} usuarios en colección: ${o}`),i=!0,Array.from(s.keys()).filter(p=>p.startsWith(`${o}_`)).forEach(p=>s.delete(p)),h.forEach(p=>{var y,x,C,S;try{const k=p.data(),I=k.email||k.userEmail||k.mail||k.correo||"",F=k.nombreCompleto||k.displayName||k.name||k.nombre||k.fullName||"",U=k.curso||k.course||k.class||k.grade||"";let R=k.profile||k.role||k.tipo||k.userType||qt.ESTUDIANTE;if(typeof R=="string"){const B=R.toLowerCase();B.includes("estudiante")||B.includes("student")||B.includes("alumno")?R=qt.ESTUDIANTE:B.includes("coordinador")||B.includes("coordinator")?R=qt.COORDINADOR_TP:B.includes("profesor")||B.includes("teacher")||B.includes("docente")?R=qt.PROFESOR:(B.includes("subdireccion")||B.includes("subdir"))&&(R=qt.COORDINADOR_TP)}const E={id:p.id,email:I,nombreCompleto:F,curso:U,profile:R,activo:k.activo!==!1,fechaCreacion:((x=(y=k.fechaCreacion)==null?void 0:y.toDate)==null?void 0:x.call(y))||new Date(k.fechaCreacion)||new Date,ultimaActividad:((S=(C=k.ultimaActividad)==null?void 0:C.toDate)==null?void 0:S.call(C))||new Date(k.ultimaActividad)||new Date,...k},_=`${o}_${p.id}`;s.set(_,E)}catch(k){console.warn(`Error procesando documento ${p.id} en ${o}:`,k)}}),a()):console.log(`⚪ Colección ${o}: vacía`)},h=>{console.warn(`⚠️ Error en colección ${o}:`,h)});r.push(d)}catch(l){console.warn(`❌ Error configurando ${o}:`,l)}}),setTimeout(()=>{i||(console.error("❌ No se encontraron usuarios en ninguna colección"),e&&e(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{r.forEach(o=>{try{o()}catch(l){console.warn("Error unsubscribing:",l)}})}}catch(n){return console.error("Error setting up multi-collection users subscription:",n),e&&e(new Error(`Error al configurar suscripción multi-colección: ${n instanceof Error?n.message:"Error desconocido"}`)),()=>{}}},Upe=(t,e)=>{try{console.log("Setting up users subscription...");const n=Lt(er,"users"),r=an(n);return En(r,a=>{console.log(`Raw users snapshot size: ${a.size}`);const i=[];a.forEach(d=>{var h,m,p,y;try{const x=d.data();console.log(`Processing user doc ${d.id}:`,x);const C=x.email||x.userEmail||x.mail||"",S=x.nombreCompleto||x.displayName||x.name||x.nombre||"",k=x.curso||x.course||x.class||"";let I=x.profile||x.role||x.tipo||qt.ESTUDIANTE;if(typeof I=="string"){const U=I.toLowerCase();U.includes("estudiante")||U.includes("student")||U.includes("alumno")?I=qt.ESTUDIANTE:U.includes("coordinador")||U.includes("coordinator")?I=qt.COORDINADOR_TP:U.includes("profesor")||U.includes("teacher")||U.includes("docente")?I=qt.PROFESOR:(U.includes("subdireccion")||U.includes("subdir"))&&(I=qt.COORDINADOR_TP)}const F={id:d.id,email:C,nombreCompleto:S,curso:k,profile:I,activo:x.activo!==!1,fechaCreacion:((m=(h=x.fechaCreacion)==null?void 0:h.toDate)==null?void 0:m.call(h))||new Date(x.fechaCreacion)||new Date,ultimaActividad:((y=(p=x.ultimaActividad)==null?void 0:p.toDate)==null?void 0:y.call(p))||new Date(x.ultimaActividad)||new Date,...x};i.push(F)}catch(x){console.warn(`Error processing user document ${d.id}:`,x)}}),i.sort((d,h)=>d.nombreCompleto.localeCompare(h.nombreCompleto)),console.log(`Processed ${i.length} users successfully`);const o=i.reduce((d,h)=>(d[h.profile]=(d[h.profile]||0)+1,d),{});console.log("Users by profile:",o);const l=i.filter(d=>d.profile===qt.ESTUDIANTE);console.log(`Estudiantes: ${l.length}`);const u=l.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),t(i)},a=>{console.error("Error in subscribeToAllUsers:",a),e&&e(new Error(`Error al cargar usuarios: ${a.message}`))})}catch(n){return console.error("Error setting up subscribeToAllUsers:",n),e&&e(new Error(`Error al configurar suscripción de usuarios: ${n instanceof Error?n.message:"Error desconocido"}`)),()=>{}}},Iy=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},Mpe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),Ppe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),Ope=()=>{const[t,e]=G.useState([]),[n,r]=G.useState([]),[s,a]=G.useState(!0),[i,o]=G.useState(null),[l,u]=G.useState(new Date),[d,h]=G.useState("todos"),[m,p]=G.useState("");G.useEffect(()=>{a(!0),o(null);const R=l.getFullYear(),E=l.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Año:",R,"Mes:",E);let _=!1,B=!1;const j=()=>{_&&B&&(console.log("=== CARGA COMPLETA ==="),a(!1))};(async()=>{console.log("🧪 INICIANDO PRUEBA DIRECTA SIMPLE...");try{const L=Lt(er,"asistencia_dual"),Q=an(L,Ef(5)),H=await Da(Q);if(console.log(`✅ asistencia_dual - Documentos encontrados: ${H.size}`),H.size>0)H.docs.forEach((te,Y)=>{const ne=te.data();console.log(`   ${Y+1}. ${te.id.slice(0,8)} - ${ne.emailEstudiante} - ${ne.tipo}`),console.log("      Fecha original:",ne.fechaHora),console.log("      Todos los campos:",Object.keys(ne))});else{console.log("❌ No se encontraron documentos en asistencia_dual");const te=["asistenciaEmpresa","asistencia_empresa"];for(const Y of te)try{const ne=Lt(er,Y),V=an(ne,Ef(3)),J=await Da(V);if(console.log(`📋 ${Y}: ${J.size} documentos`),J.size>0){const K=J.docs[0].data();console.log("   Estructura:",Object.keys(K)),console.log("   Email:",K.emailEstudiante||K.email),console.log("   Fecha:",K.fechaHora||K.fecha)}}catch(ne){console.log(`❌ ${Y}: ${ne instanceof Error?ne.message:"Error"}`)}}}catch(L){console.error("❌ Error en prueba directa:",L),L.code==="permission-denied"?(console.log("🔒 PROBLEMA: Permisos de Firestore denegados"),console.log("💡 Ve a Firebase Console → Firestore → Rules y verifica los permisos")):L.code==="failed-precondition"&&(console.log("📊 PROBLEMA: Faltan índices en Firestore"),console.log("💡 Ve a Firebase Console → Firestore → Indexes"))}})(),Dpe(R,E).then(L=>{console.log("🔍 Debug info for collections:",L),Object.entries(L).forEach(([Q,H])=>{if(H.exists&&H.totalDocs>0){if(console.log(`
📋 COLECCIÓN ${Q.toUpperCase()}:`),console.log(`   📊 Total documentos: ${H.totalDocs}`),console.log(`   📅 Documentos del período: ${H.count}`),console.log(`   🔑 Campo de fecha: ${H.hasDateField}`),H.sampleDoc){console.log("   📄 Documento ejemplo:",H.sampleDoc);const te=H.sampleDoc,Y=te.emailEstudiante||te.email||te.userEmail||te.correo||"NO ENCONTRADO",ne=te.tipo||te.type||te.action||te.tipoRegistro||"NO ENCONTRADO",V=te.fechaHora||te.fecha||te.timestamp||te.createdAt||"NO ENCONTRADO";console.log(`   📧 Email estudiante: ${Y}`),console.log(`   📝 Tipo registro: ${ne}`),console.log(`   📅 Fecha: ${V}`),console.log("   🗂️ Todos los campos:",Object.keys(te))}H.filteredDocs&&H.filteredDocs.length>0&&(console.log("   📋 Registros del período encontrados:",H.filteredDocs.length),H.filteredDocs.forEach((te,Y)=>{Y<3&&console.log(`      ${Y+1}. ID: ${te.id}`,te.data)}))}else H.exists?console.log(`⚪ Colección ${Q}: vacía`):console.log(`❌ Colección ${Q}: no existe`)})}).catch(L=>{console.error("Debug error:",L)}),Fpe().then(L=>{console.log("🔍 Debug info for users:",L),(!L.exists||L.totalDocs===0)&&(console.log('⚠️ Colección "users" vacía o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async H=>{var te;try{const Y=Lt(er,H),ne=an(Y,Ef(5)),V=await Da(ne);V.size>0?(console.log(`✅ Encontrada colección alternativa: ${H} con ${V.size} documentos`),console.log("Documento muestra:",(te=V.docs[0])==null?void 0:te.data())):console.log(`❌ Colección ${H}: vacía`)}catch{console.log(`❌ Colección ${H}: no existe`)}}))}).catch(L=>{console.error("Users debug error:",L)});try{console.log("Configurando suscripción a asistencia...");const L=Rpe(R,E,H=>{if(console.log("✅ Received registros:",H.length),H.length>0){console.log("📋 ANÁLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",H[0]);const te=[...new Set(H.map(ie=>ie.emailEstudiante).filter(Boolean))];console.log("📧 Emails de estudiantes en registros:",te);const Y=[...new Set(H.map(ie=>ie.tipo).filter(Boolean))];console.log("📝 Tipos de registro encontrados:",Y);const ne=H.reduce((ie,O)=>{const W=new Date(O.fechaHora).getDate();return ie[W]||(ie[W]=[]),ie[W].push(O),ie},{});console.log("📅 Registros por día del mes:",Object.keys(ne).map(ie=>({dia:parseInt(ie),cantidad:ne[parseInt(ie)].length})));const V=n.map(ie=>ie.email).filter(Boolean);console.log("👥 Emails de estudiantes cargados:",V);const J=te.filter(ie=>V.includes(ie)),K=te.filter(ie=>!V.includes(ie));console.log("✅ Emails que coinciden:",J),console.log("❌ Emails que NO coinciden:",K)}else console.log("⚠️ No se encontraron registros de asistencia para el período");e(H),_=!0,j()},H=>{console.error("❌ Error fetching asistencia:",H),o("Error al cargar datos de asistencia: "+H.message),_=!0,j()});console.log("Configurando suscripción a usuarios...");const Q=Lpe(H=>{if(console.log("✅ Received users (multi-collection):",H.length),H.length>0){console.log("Sample user:",H[0]);const te=H.filter(Y=>Y.profile===qt.ESTUDIANTE&&Y.curso);console.log("Dual students found:",te.length),te.forEach(Y=>{console.log(`- ${Y.nombreCompleto} (${Y.curso}) - ${Y.email}`)})}r(H),B=!0,j()},H=>{console.error("❌ Error fetching users (multi-collection):",H),console.log("🔄 Intentando con función original de usuarios...");const te=Upe(Y=>{console.log("✅ Received users (fallback):",Y.length),r(Y),B=!0,j()},Y=>{console.error("❌ Error en fallback también:",Y),o("Error al cargar estudiantes: "+H.message),B=!0,j()})});return()=>{console.log("Limpiando suscripciones..."),L&&L(),Q&&Q()}}catch(L){console.error("❌ Error setting up subscriptions:",L),o("Error al inicializar conexiones: "+(L instanceof Error?L.message:"Error desconocido")),a(!1)}},[l]);const{monthDays:y,monthName:x,year:C}=G.useMemo(()=>{const R=l.getFullYear(),E=l.getMonth();return{monthDays:new Date(R,E+1,0).getDate(),monthName:l.toLocaleString("es-CL",{month:"long"}),year:R}},[l]),S=G.useMemo(()=>{let R=n.filter(E=>E.profile===qt.ESTUDIANTE&&E.curso&&Ph.includes(Iy(E.curso)));if(d!=="todos"&&(R=R.filter(E=>Iy(E.curso||"")===d)),m&&(R=R.filter(E=>E.nombreCompleto.toLowerCase().includes(m.toLowerCase()))),t.length>0){const E=[...new Set(t.map(j=>j.emailEstudiante).filter(Boolean))],_=R.map(j=>j.email),B=E.filter(j=>!_.includes(j));if(B.length>0){console.log("📝 Agregando estudiantes faltantes con registros:",B);const D=B.map(L=>{const Q=t.find(H=>H.emailEstudiante===L);return{id:L,email:L,nombreCompleto:(Q==null?void 0:Q.nombreEstudiante)||L.split("@")[0],curso:(Q==null?void 0:Q.curso)||"3ºC",profile:qt.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(L=>{const Q=d==="todos"||Iy(L.curso)===d,H=!m||L.nombreCompleto.toLowerCase().includes(m.toLowerCase());return Q&&H&&Ph.includes(Iy(L.curso))});R=[...R,...D]}}return console.log(`👥 Estudiantes filtrados para mostrar: ${R.length}`),R.forEach(E=>{console.log(`   - ${E.nombreCompleto} (${E.curso}) - ${E.email}`)}),R.sort((E,_)=>E.nombreCompleto.localeCompare(_.nombreCompleto))},[n,d,m,t]),k=G.useMemo(()=>{console.log("🔄 Procesando datos de asistencia para la tabla..."),console.log(`📊 Total registros a procesar: ${t.length}`),console.log(`👥 Estudiantes disponibles: ${S.length}`);const R=new Map;return t.length===0?(console.log("⚠️ No hay registros para procesar aún"),R):(t.forEach((E,_)=>{const B=E.emailEstudiante;if(!B)return;let j;if(E.fechaHora instanceof Date)j=E.fechaHora;else if(E.fechaHora&&typeof E.fechaHora=="object"&&"toDate"in E.fechaHora)j=E.fechaHora.toDate();else if(typeof E.fechaHora=="string")j=new Date(E.fechaHora);else{console.warn("Fecha no válida en registro:",E);return}const D=j.getDate(),L=j.getMonth(),Q=j.getFullYear();_<3&&console.log(`📅 Registro ${_+1}:`,{email:B,tipo:E.tipo,fechaOriginal:E.fechaHora,fechaProcesada:j.toLocaleString(),año:Q,mes:L,día:D}),R.has(B)||R.set(B,new Map);const H=R.get(B);H.has(D)||H.set(D,{});const te=H.get(D);E.tipo==="Entrada"?(!te.entrada||j<new Date(te.entrada.fechaHora))&&(te.entrada=E):E.tipo==="Salida"&&(!te.salida||j>new Date(te.salida.fechaHora))&&(te.salida=E)}),console.log("📋 Datos de asistencia procesados:",{estudiantesConRegistros:R.size,estudiantes:Array.from(R.keys()),registrosPorEstudiante:Array.from(R.entries()).map(([E,_])=>({email:E,dias:Array.from(_.keys()),totalRegistros:Array.from(_.values()).reduce((B,j)=>B+(j.entrada?1:0)+(j.salida?1:0),0)}))}),R)},[t]),I=R=>{u(E=>{const _=new Date(E);return _.setMonth(_.getMonth()+R),_})},F=R=>{R!=null&&R.latitud&&(R!=null&&R.longitud)&&window.open(`https://www.google.com/maps?q=${R.latitud},${R.longitud}`,"_blank")},U=["D","L","M","M","J","V","S"];return i?c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:c.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:i})}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[c.jsx("button",{onClick:()=>I(-1),disabled:s,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:"←"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${x} ${C}`}),c.jsx("button",{onClick:()=>I(1),disabled:s,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:"→"})]}),c.jsxs("select",{value:d,onChange:R=>h(R.target.value),disabled:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"todos",children:"Todos los Cursos"}),Ph.map(R=>c.jsx("option",{value:R,children:R},R))]}),c.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:m,onChange:R=>p(R.target.value),disabled:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s?c.jsxs("div",{className:"text-center text-amber-600 py-10",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),c.jsx("div",{children:"Cargando datos de asistencia..."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:y},(R,E)=>{const B=new Date(C,l.getMonth(),E+1).getDay(),j=B===0||B===6;return c.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${j?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[c.jsx("div",{className:"font-semibold",children:U[B]}),c.jsx("div",{children:E+1})]},E)})]})}),c.jsx("tbody",{children:S.length>0?S.map(R=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[c.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:R.nombreCompleto}),Array.from({length:y},(E,_)=>{var Q;const B=_+1,j=(Q=k.get(R.email))==null?void 0:Q.get(B),D=new Date(C,l.getMonth(),_+1),L=D.getDay()===0||D.getDay()===6;return R.email==="alexis.robles@industrialderecoleta.cl"&&B===2&&console.log("🔍 Verificando día 2 para Alexis:",{email:R.email,day:B,hasDataForStudent:k.has(R.email),studentDayRecords:j,allAttendanceKeys:Array.from(k.keys()),daysForStudent:k.get(R.email)?Array.from(k.get(R.email).keys()):[]}),c.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${L?"bg-slate-100 dark:bg-slate-700/50":""}`,children:c.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(j==null?void 0:j.entrada)&&c.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var H;return F((H=j.entrada)==null?void 0:H.ubicacion)},children:[c.jsx(Mpe,{}),c.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(j.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(j==null?void 0:j.salida)&&c.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var H;return F((H=j.salida)==null?void 0:H.ubicacion)},children:[c.jsx(Ppe,{}),c.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(j.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},B)})]},R.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:y+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},vC="evaluaciones_formativas",yC="calificaciones_formativas",yB="trabajos_grupales_formativos",jpe="usuarios",wB=t=>{var n,r,s,a;const e=t.data();return{id:t.id,...e,fecha:((r=(n=e.fecha)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString().split("T")[0])||e.fecha,fechaPresentacion:((a=(s=e.fechaPresentacion)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.fechaPresentacion}},Qpe=(t,e,n)=>{const r=an(Lt(It,vC),Vr("curso","==",t),Vr("asignatura","==",e),sr("fecha","asc"));return En(r,s=>{n(s.docs.map(a=>wB(a)))},s=>{console.error("Error al suscribirse a evaluaciones:",s),n([])})},Hpe=async(t,e)=>{const n=x4(It),r=Cn(Lt(It,vC));n.set(r,{...t,fecha:mn.fromDate(new Date(t.fecha+"T00:00:00"))});const s=Cn(It,yC,r.id);return n.set(s,e),await n.commit(),r.id},Vpe=async(t,e)=>{const n=Cn(It,vC,t);await io(n,e,{merge:!0})},zpe=async t=>{const e=x4(It);e.delete(Cn(It,vC,t)),e.delete(Cn(It,yC,t)),await e.commit()},Gpe=(t,e)=>{if(t.length===0)return e({}),()=>{};const n=t.map(r=>{const s=Cn(It,yC,r);return En(s,a=>{a.exists()&&e({[r]:a.data()})})});return()=>n.forEach(r=>r())},qpe=async(t,e)=>{const n=Cn(It,yC,t);await io(n,e,{merge:!0})},Kpe=(t,e,n)=>{const r=an(Lt(It,yB),Vr("curso","==",t),Vr("asignatura","==",e),sr("fechaPresentacion","desc"));return En(r,s=>{n(s.docs.map(a=>wB(a)))},s=>{console.error("Error al suscribirse a trabajos grupales:",s),n([])})},$pe=async t=>{const e={...t,fechaPresentacion:mn.fromDate(new Date(t.fechaPresentacion+"T00:00:00"))};await Cs(Lt(It,yB),e)},Wpe=async(t,e)=>{const n=Cn(It,yB,t);await io(n,e,{merge:!0})},Ype=t=>{const e=an(Lt(It,jpe));return En(e,n=>{t(n.docs.map(r=>wB(r)))},n=>{console.error("Error al suscribirse a usuarios:",n),t([])})},EH=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},Dm={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},_H=t=>t.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:t.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:t.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:t.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},Xpe=({cursos:t,onSelect:e})=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),t.length>0?c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:t.map(n=>{const r=_H(n);return c.jsxs("div",{className:"space-y-2 text-center",children:[c.jsxs("button",{onClick:()=>e(n),className:`relative w-full h-48 rounded-md shadow-lg ${r.bg} ${r.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[c.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${r.spine} rounded-l-md`}),c.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${r.text}`,children:[c.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:n.slice(0,2)}),c.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:n.slice(2)})]})]}),c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:n})]},n)})}):c.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),c.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),Jpe=({curso:t,asignaturas:e,onSelect:n,onBack:r})=>{const s=_H(t);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("button",{onClick:r,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),c.jsxs("div",{className:`p-2 rounded-md ${s.bg} ${s.text} font-bold`,children:["Libro de Clases: ",t]})]}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),e.length>0?c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:e.map(a=>c.jsxs("button",{onClick:()=>n(a),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[c.jsx("span",{className:"text-2xl",children:Dm[a]||Dm.Default}),c.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:a})]},a))}):c.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),c.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},Zpe=({curso:t,asignatura:e,allUsers:n,onBack:r})=>{const[s,a]=G.useState([]),[i,o]=G.useState({}),[l,u]=G.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,h]=G.useState(null),[m,p]=G.useState(null),[y,x]=G.useState(!0),C=G.useMemo(()=>n.filter(_=>_.profile===qt.ESTUDIANTE&&EH(_.curso||"")===t).map(_=>_.nombreCompleto).sort((_,B)=>_.localeCompare(B)),[n,t]);G.useEffect(()=>{x(!0);const _=Qpe(t,e,B=>{a(B);const j=B.map(L=>L.id),D=Gpe(j,L=>{o(Q=>({...Q,...L}))});return x(!1),()=>D()});return()=>_()},[t,e]);const S=_=>{const{name:B,value:j}=_.target;d?h(D=>D?{...D,[B]:j}:null):u(D=>({...D,[B]:j}))},k=async _=>{if(_.preventDefault(),p(null),!l.nombreActividad.trim()){p("El nombre de la actividad es obligatorio.");return}const B={asignatura:e,curso:t,...l},j=C.reduce((D,L)=>(D[L]="trabajado",D),{});try{await Hpe(B,j),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(D){console.error(D),p("No se pudo crear la evaluación.")}},I=(_,B)=>{var Q;const j=((Q=i[_])==null?void 0:Q[B])||"trabajado";let D;j==="trabajado"?D="no trabajado":j==="no trabajado"?D="ausente":D="trabajado";const L={...i,[_]:{...i[_]||{},[B]:D}};o(L),qpe(_,{[B]:D}).catch(H=>{console.error("Error updating grade:",H)})},F=_=>h(_),U=async()=>{if(d)try{await Vpe(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),h(null)}catch(_){console.error(_),p("No se pudo guardar la edición.")}},R=async _=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?"))try{await zpe(_)}catch(B){console.error(B),p("No se pudo eliminar la evaluación.")}},E=G.useCallback(_=>{if(s.length===0)return"-";let B=0,j=0;return s.forEach(D=>{var Q;const L=(Q=i[D.id])==null?void 0:Q[_];L==="trabajado"?(B+=7,j++):L==="no trabajado"&&(B+=2,j++)}),j===0?"-":(B/j).toFixed(1)},[i,s]);return y?c.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:r,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),c.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),c.jsxs("form",{onSubmit:k,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),c.jsxs("div",{className:"w-full",children:[c.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),c.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:l.nombreActividad,onChange:S,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"w-full",children:[c.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),c.jsx("input",{id:"fecha",type:"date",name:"fecha",value:l.fecha,onChange:S,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"w-full",children:c.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),m&&c.jsx("p",{className:"text-red-500 text-sm col-span-full",children:m})]}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),s.map(_=>c.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===_.id?c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:S,className:"text-xs p-1 w-full dark:bg-slate-600"}),c.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:S,className:"text-xs p-1 w-full dark:bg-slate-600"}),c.jsx("button",{onClick:U,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"font-semibold",children:_.nombreActividad}),c.jsx("span",{className:"font-normal text-slate-500",children:_.fecha}),c.jsxs("div",{className:"flex gap-2 mt-1",children:[c.jsx("button",{onClick:()=>F(_),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),c.jsx("button",{onClick:()=>R(_.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},_.id)),c.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:C.map(_=>c.jsxs("tr",{children:[c.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:_}),s.map(B=>{var L;const j=(L=i[B.id])==null?void 0:L[_];let D;return j==="trabajado"?D=Dm[e]||Dm.Default:j==="no trabajado"?D="❌":j==="ausente"?D="A":D=Dm[e]||Dm.Default,c.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:c.jsx("button",{onClick:()=>I(B.id,_),className:`text-3xl transition-opacity duration-200 ${j==="trabajado"?"opacity-100":j==="no trabajado"?"opacity-40":j==="ausente"?"opacity-100 text-red-500 font-bold":"opacity-100"}`,children:D})},B.id)}),c.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:E(_)})]},_))})]})})]})},ege=({curso:t,asignatura:e,allUsers:n,onBack:r})=>{const[s,a]=G.useState([]),[i,o]=G.useState(null),[l,u]=G.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,h]=G.useState({}),[m,p]=G.useState(2),y=G.useMemo(()=>n.filter(F=>F.profile===qt.ESTUDIANTE&&EH(F.curso||"")===t).sort((F,U)=>F.nombreCompleto.localeCompare(U.nombreCompleto)),[n,t]);G.useEffect(()=>{const F=Kpe(t,e,a);return()=>F()},[t,e]),G.useEffect(()=>{if(i){const F={};i.grupos.forEach(U=>{U.integrantes.forEach(R=>{F[R.nombre]={groupNumber:String(U.numero),role:R.rol||""}})}),h(F)}else h({})},[i]);const x=async F=>{if(F.preventDefault(),!l.nombre.trim())return;const U={curso:t,asignatura:e,nombreActividad:l.nombre,fechaPresentacion:l.fecha,grupos:[]};try{await $pe(U),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(R){console.error(R),alert("No se pudo crear la actividad grupal.")}},C=async()=>{if(!i)return;const F=new Map;for(const R of y){const E=d[R.nombreCompleto];if(E&&E.groupNumber){const _=parseInt(E.groupNumber,10);isNaN(_)||(F.has(_)||F.set(_,[]),F.get(_).push({nombre:R.nombreCompleto,rol:E.role||""}))}}const U=Array.from(F.entries()).map(([R,E])=>({numero:R,integrantes:E})).sort((R,E)=>R.numero-E.numero);try{await Wpe(i.id,{grupos:U}),alert("Grupos guardados con éxito.")}catch(R){console.error(R),alert("No se pudieron guardar los grupos.")}},S=()=>{if(m<2){alert("Debe haber al menos 2 grupos.");return}const F=[...y].sort(()=>Math.random()-.5),U={};F.forEach((R,E)=>{var _;U[R.nombreCompleto]={groupNumber:String(E%m+1),role:((_=d[R.nombreCompleto])==null?void 0:_.role)||""}}),h(U)},k=(F,U,R)=>{h(E=>({...E,[F]:{...E[F]||{groupNumber:"",role:""},[U]:R}}))},I=G.useMemo(()=>{const F=new Map;return Object.entries(d).forEach(([U,R])=>{R.groupNumber&&(F.has(R.groupNumber)||F.set(R.groupNumber,[]),F.get(R.groupNumber).push({nombre:U,rol:R.role}))}),Array.from(F.entries()).sort((U,R)=>parseInt(U[0])-parseInt(R[0]))},[d]);return i?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),c.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),c.jsx("button",{onClick:C,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-1 space-y-4",children:[c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",value:m,onChange:F=>p(parseInt(F.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),c.jsx("button",{onClick:S,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),c.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),c.jsx("table",{className:"w-full text-sm",children:c.jsx("tbody",{children:y.map(F=>{var U;return c.jsxs("tr",{children:[c.jsx("td",{className:"py-1 pr-2",children:F.nombreCompleto}),c.jsx("td",{className:"py-1",children:c.jsx("input",{type:"number",value:((U=d[F.nombreCompleto])==null?void 0:U.groupNumber)||"",onChange:R=>k(F.nombreCompleto,"groupNumber",R.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},F.id)})})})]})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:I.map(([F,U])=>c.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[c.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",F]}),c.jsx("ul",{className:"space-y-2",children:U.map(R=>c.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"flex-1 truncate",children:R.nombre}),c.jsxs("select",{value:R.rol||"",onChange:E=>k(R.nombre,"role",E.target.value),className:"p-1 border rounded text-xs w-32",children:[c.jsx("option",{value:"",children:"-- Asignar Rol --"}),hj.map(E=>c.jsx("option",{value:E,children:E},E))]})]},R.nombre))})]},F))})]})]})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:r,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),c.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),c.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[c.jsx("input",{value:l.nombre,onChange:F=>u({...l,nombre:F.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),c.jsx("input",{type:"date",value:l.fecha,onChange:F=>u({...l,fecha:F.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),s.map(F=>c.jsxs("button",{onClick:()=>o(F),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[c.jsx("p",{className:"font-bold",children:F.nombreActividad}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",F.fechaPresentacion]})]},F.id))]})]})},tge=({currentUser:t})=>{const[e,n]=G.useState("calificaciones"),[r,s]=G.useState(null),[a,i]=G.useState(null),[o,l]=G.useState([]),[u,d]=G.useState(!0);G.useEffect(()=>{d(!0);const x=Ype(C=>{l(C),d(!1)});return()=>x()},[]);const h=G.useMemo(()=>t.cursos||[],[t.cursos]),m=G.useMemo(()=>t.asignaturas||[],[t.asignaturas]),p=({tab:x,label:C})=>c.jsx("button",{onClick:()=>n(x),className:`${e===x?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:C}),y=()=>{if(u)return c.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!r)return c.jsx(Xpe,{cursos:h,onSelect:s});if(!a)return c.jsx(Jpe,{curso:r,asignaturas:m,onSelect:i,onBack:()=>s(null)});if(e==="calificaciones")return c.jsx(Zpe,{curso:r,asignatura:a,allUsers:o,onBack:()=>i(null)});if(e==="grupos")return c.jsx(ege,{curso:r,asignatura:a,allUsers:o,onBack:()=>i(null)})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx(p,{tab:"calificaciones",label:"Calificaciones"}),c.jsx(p,{tab:"grupos",label:"Trabajos Grupales"})]})}),c.jsx("div",{className:"mt-6",children:y()})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let nge,rge;function sge(){return{geminiUrl:nge,vertexUrl:rge}}function age(t,e,n,r){var s,a;if(!(t!=null&&t.baseUrl)){const i=sge();return e?(s=i.vertexUrl)!==null&&s!==void 0?s:n:(a=i.geminiUrl)!==null&&a!==void 0?a:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class b0{}function dn(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function w(t,e,n){for(let a=0;a<e.length-1;a++){const i=e[a];if(i.endsWith("[]")){const o=i.slice(0,-2);if(!(o in t))if(Array.isArray(n))t[o]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${i}`);if(Array.isArray(t[o])){const l=t[o];if(Array.isArray(n))for(let u=0;u<l.length;u++){const d=l[u];w(d,e.slice(a+1),n[u])}else for(const u of l)w(u,e.slice(a+1),n)}return}else if(i.endsWith("[0]")){const o=i.slice(0,-3);o in t||(t[o]=[{}]);const l=t[o];w(l[0],e.slice(a+1),n);return}(!t[i]||typeof t[i]!="object")&&(t[i]={}),t=t[i]}const r=e[e.length-1],s=t[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else t[r]=n}function v(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const s=r.slice(0,-2);if(s in t){const a=t[s];return Array.isArray(a)?a.map(i=>v(i,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aT(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var bR;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(bR||(bR={}));var CR;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(CR||(CR={}));var mf;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(mf||(mf={}));var ER;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(ER||(ER={}));var _R;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(_R||(_R={}));var SR;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(SR||(SR={}));var TR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(TR||(TR={}));var NR;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(NR||(NR={}));var BR;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(BR||(BR={}));var kR;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(kR||(kR={}));var IR;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(IR||(IR={}));var FR;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(FR||(FR={}));var DR;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(DR||(DR={}));var RR;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(RR||(RR={}));var LR;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(LR||(LR={}));var UR;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(UR||(UR={}));var Yw;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Yw||(Yw={}));var MR;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(MR||(MR={}));var iT;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(iT||(iT={}));var PR;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(PR||(PR={}));var OR;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(OR||(OR={}));var jR;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(jR||(jR={}));var QR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(QR||(QR={}));var HR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(HR||(HR={}));var VR;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(VR||(VR={}));var zR;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(zR||(zR={}));var GR;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(GR||(GR={}));var qR;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(qR||(qR={}));var KR;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(KR||(KR={}));var $R;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})($R||($R={}));var WR;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(WR||(WR={}));var YR;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(YR||(YR={}));var XR;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(XR||(XR={}));var JR;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(JR||(JR={}));var ZR;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(ZR||(ZR={}));var eL;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(eL||(eL={}));var tL;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(tL||(tL={}));var nL;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(nL||(nL={}));var rL;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(rL||(rL={}));var sL;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(sL||(sL={}));var aL;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(aL||(aL={}));var Rm;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Rm||(Rm={}));class oT{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Rg{get text(){var e,n,r,s,a,i,o,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",d=!1;const h=[];for(const m of(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[p,y]of Object.entries(m))p!=="text"&&p!=="thought"&&(y!==null||y!==void 0)&&h.push(p);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,u+=m.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get data(){var e,n,r,s,a,i,o,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const d=[];for(const h of(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[m,p]of Object.entries(h))m!=="inlineData"&&(p!==null||p!==void 0)&&d.push(m);h.inlineData&&typeof h.inlineData.data=="string"&&(u+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,r,s,a,i,o,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,r,s,a,i,o,l,u;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,r,s,a,i,o,l,u;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.output}}class iL{}class oL{}class ige{}class oge{}class lL{}class cL{}class uL{}class lge{}class AL{}class dL{}class fL{}class hL{}class cge{}class uge{}class Age{}class mL{}class dge{get text(){var e,n,r;let s="",a=!1;const i=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(o))l!=="text"&&l!=="thought"&&u!==null&&i.push(l);if(typeof o.text=="string"){if(typeof o.thought=="boolean"&&o.thought)continue;a=!0,s+=o.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,n,r;let s="";const a=[];for(const i of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[o,l]of Object.entries(i))o!=="inlineData"&&l!==null&&a.push(o);i.inlineData&&typeof i.inlineData.data=="string"&&(s+=atob(i.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class Xw{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new Xw;if(r.name=e.name,r.metadata=e.metadata,r.done=e.done,r.error=e.error,n){const s=e.response;if(s){const a=new AL,i=s.videos;a.generatedVideos=i==null?void 0:i.map(o=>({video:{uri:o.gcsUri,videoBytes:o.bytesBase64Encoded?aT(o.bytesBase64Encoded):void 0,mimeType:o.mimeType}})),a.raiMediaFilteredCount=s.raiMediaFilteredCount,a.raiMediaFilteredReasons=s.raiMediaFilteredReasons,r.response=a}}else{const s=e.response;if(s){const a=new AL,i=s.generateVideoResponse,o=i==null?void 0:i.generatedSamples;a.generatedVideos=o==null?void 0:o.map(l=>{const u=l.video;return{video:{uri:u==null?void 0:u.uri,videoBytes:u!=null&&u.encodedVideo?aT(u==null?void 0:u.encodedVideo):void 0,mimeType:l.encoding}}}),a.raiMediaFilteredCount=i==null?void 0:i.raiMediaFilteredCount,a.raiMediaFilteredReasons=i==null?void 0:i.raiMediaFilteredReasons,r.response=a}}return r}}class fge{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ns(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function SH(t,e){const n=ns(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function TH(t){return Array.isArray(t)?t.map(e=>Jw(e)):[Jw(t)]}function Jw(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function NH(t){const e=Jw(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function BH(t){const e=Jw(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function pL(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function kH(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>pL(e)):[pL(t)]}function lT(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function gL(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function xL(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function to(t){if(t==null)throw new Error("ContentUnion is required");return lT(t)?t:{role:"user",parts:kH(t)}}function IH(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=to(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=to(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>to(n)):[to(e)]}function cc(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(gL(t)||xL(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[to(t)]}const e=[],n=[],r=lT(t[0]);for(const s of t){const a=lT(s);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(gL(s)||xL(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||e.push({role:"user",parts:kH(n)}),e}function hge(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(mf).includes(n[0].toUpperCase())?n[0].toUpperCase():mf.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(mf).includes(r.toUpperCase())?r.toUpperCase():mf.TYPE_UNSPECIFIED})}}function Jm(t){const e={},n=["items"],r=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&hge(t.type,e);for(const[i,o]of Object.entries(t))if(o!=null)if(i=="type"){if(o==="null")throw new Error("type: null can not be the only possible type for the field.");if(o instanceof Array)continue;e.type=Object.values(mf).includes(o.toUpperCase())?o.toUpperCase():mf.TYPE_UNSPECIFIED}else if(n.includes(i))e[i]=Jm(o);else if(r.includes(i)){const l=[];for(const u of o){if(u.type=="null"){e.nullable=!0;continue}l.push(Jm(u))}e[i]=l}else if(s.includes(i)){const l={};for(const[u,d]of Object.entries(o))l[u]=Jm(d);e[i]=l}else{if(i==="additionalProperties")continue;e[i]=o}return e}function bB(t){return Jm(t)}function CB(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function EB(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Pp(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Jm(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Jm(e.response));return t}function Op(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function mge(t,e,n,r=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function Ad(t,e){if(typeof e!="string")throw new Error("name must be a string");return mge(t,e,"cachedContents")}function FH(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function C0(t){return aT(t)}function pge(t){return t!=null&&typeof t=="object"&&"name"in t}function gge(t){return t!=null&&typeof t=="object"&&"video"in t}function xge(t){return t!=null&&typeof t=="object"&&"uri"in t}function DH(t){var e;let n;if(pge(t)&&(n=t.name),!(xge(t)&&(n=t.uri,n===void 0))&&!(gge(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function RH(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function LH(t){for(const e of["models","tunedModels","publisherModels"])if(vge(t,e))return t[e];return[]}function vge(t,e){return t!==null&&typeof t=="object"&&e in t}function yge(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function wge(t,e={}){const n=[],r=new Set;for(const s of t){const a=s.name;if(r.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);r.add(a);const i=yge(s,e);i.functionDeclarations&&n.push(...i.functionDeclarations)}return{functionDeclarations:n}}function UH(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function bge(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function jp(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function MH(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cge(t){const e={},n=v(t,["fps"]);n!=null&&w(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&w(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function Ege(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["data"]);n!=null&&w(e,["data"],n);const r=v(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function _ge(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&w(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function Sge(t){const e={},n=v(t,["videoMetadata"]);n!=null&&w(e,["videoMetadata"],Cge(n));const r=v(t,["thought"]);r!=null&&w(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],Ege(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],_ge(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&w(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function PH(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Sge(a))),w(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&w(e,["role"],r),e}function Tge(t){const e={},n=v(t,["anyOf"]);n!=null&&w(e,["anyOf"],n);const r=v(t,["default"]);r!=null&&w(e,["default"],r);const s=v(t,["description"]);s!=null&&w(e,["description"],s);const a=v(t,["enum"]);a!=null&&w(e,["enum"],a);const i=v(t,["example"]);i!=null&&w(e,["example"],i);const o=v(t,["format"]);o!=null&&w(e,["format"],o);const l=v(t,["items"]);l!=null&&w(e,["items"],l);const u=v(t,["maxItems"]);u!=null&&w(e,["maxItems"],u);const d=v(t,["maxLength"]);d!=null&&w(e,["maxLength"],d);const h=v(t,["maxProperties"]);h!=null&&w(e,["maxProperties"],h);const m=v(t,["maximum"]);m!=null&&w(e,["maximum"],m);const p=v(t,["minItems"]);p!=null&&w(e,["minItems"],p);const y=v(t,["minLength"]);y!=null&&w(e,["minLength"],y);const x=v(t,["minProperties"]);x!=null&&w(e,["minProperties"],x);const C=v(t,["minimum"]);C!=null&&w(e,["minimum"],C);const S=v(t,["nullable"]);S!=null&&w(e,["nullable"],S);const k=v(t,["pattern"]);k!=null&&w(e,["pattern"],k);const I=v(t,["properties"]);I!=null&&w(e,["properties"],I);const F=v(t,["propertyOrdering"]);F!=null&&w(e,["propertyOrdering"],F);const U=v(t,["required"]);U!=null&&w(e,["required"],U);const R=v(t,["title"]);R!=null&&w(e,["title"],R);const E=v(t,["type"]);return E!=null&&w(e,["type"],E),e}function Nge(t){const e={};if(v(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=v(t,["category"]);n!=null&&w(e,["category"],n);const r=v(t,["threshold"]);return r!=null&&w(e,["threshold"],r),e}function Bge(t){const e={},n=v(t,["behavior"]);n!=null&&w(e,["behavior"],n);const r=v(t,["description"]);r!=null&&w(e,["description"],r);const s=v(t,["name"]);s!=null&&w(e,["name"],s);const a=v(t,["parameters"]);a!=null&&w(e,["parameters"],a);const i=v(t,["parametersJsonSchema"]);i!=null&&w(e,["parametersJsonSchema"],i);const o=v(t,["response"]);o!=null&&w(e,["response"],o);const l=v(t,["responseJsonSchema"]);return l!=null&&w(e,["responseJsonSchema"],l),e}function kge(t){const e={},n=v(t,["startTime"]);n!=null&&w(e,["startTime"],n);const r=v(t,["endTime"]);return r!=null&&w(e,["endTime"],r),e}function Ige(t){const e={},n=v(t,["timeRangeFilter"]);return n!=null&&w(e,["timeRangeFilter"],kge(n)),e}function Fge(t){const e={},n=v(t,["mode"]);n!=null&&w(e,["mode"],n);const r=v(t,["dynamicThreshold"]);return r!=null&&w(e,["dynamicThreshold"],r),e}function Dge(t){const e={},n=v(t,["dynamicRetrievalConfig"]);return n!=null&&w(e,["dynamicRetrievalConfig"],Fge(n)),e}function Rge(){return{}}function Lge(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Bge(u))),w(e,["functionDeclarations"],l)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=v(t,["googleSearch"]);r!=null&&w(e,["googleSearch"],Ige(r));const s=v(t,["googleSearchRetrieval"]);if(s!=null&&w(e,["googleSearchRetrieval"],Dge(s)),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(v(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");v(t,["urlContext"])!=null&&w(e,["urlContext"],Rge());const i=v(t,["codeExecution"]);i!=null&&w(e,["codeExecution"],i);const o=v(t,["computerUse"]);return o!=null&&w(e,["computerUse"],o),e}function Uge(t){const e={},n=v(t,["mode"]);n!=null&&w(e,["mode"],n);const r=v(t,["allowedFunctionNames"]);return r!=null&&w(e,["allowedFunctionNames"],r),e}function Mge(t){const e={},n=v(t,["latitude"]);n!=null&&w(e,["latitude"],n);const r=v(t,["longitude"]);return r!=null&&w(e,["longitude"],r),e}function Pge(t){const e={},n=v(t,["latLng"]);n!=null&&w(e,["latLng"],Mge(n));const r=v(t,["languageCode"]);return r!=null&&w(e,["languageCode"],r),e}function Oge(t){const e={},n=v(t,["functionCallingConfig"]);n!=null&&w(e,["functionCallingConfig"],Uge(n));const r=v(t,["retrievalConfig"]);return r!=null&&w(e,["retrievalConfig"],Pge(r)),e}function jge(t){const e={},n=v(t,["voiceName"]);return n!=null&&w(e,["voiceName"],n),e}function OH(t){const e={},n=v(t,["prebuiltVoiceConfig"]);return n!=null&&w(e,["prebuiltVoiceConfig"],jge(n)),e}function Qge(t){const e={},n=v(t,["speaker"]);n!=null&&w(e,["speaker"],n);const r=v(t,["voiceConfig"]);return r!=null&&w(e,["voiceConfig"],OH(r)),e}function Hge(t){const e={},n=v(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Qge(s))),w(e,["speakerVoiceConfigs"],r)}return e}function Vge(t){const e={},n=v(t,["voiceConfig"]);n!=null&&w(e,["voiceConfig"],OH(n));const r=v(t,["multiSpeakerVoiceConfig"]);r!=null&&w(e,["multiSpeakerVoiceConfig"],Hge(r));const s=v(t,["languageCode"]);return s!=null&&w(e,["languageCode"],s),e}function zge(t){const e={},n=v(t,["includeThoughts"]);n!=null&&w(e,["includeThoughts"],n);const r=v(t,["thinkingBudget"]);return r!=null&&w(e,["thinkingBudget"],r),e}function Gge(t,e,n){const r={},s=v(e,["systemInstruction"]);n!==void 0&&s!=null&&w(n,["systemInstruction"],PH(to(s)));const a=v(e,["temperature"]);a!=null&&w(r,["temperature"],a);const i=v(e,["topP"]);i!=null&&w(r,["topP"],i);const o=v(e,["topK"]);o!=null&&w(r,["topK"],o);const l=v(e,["candidateCount"]);l!=null&&w(r,["candidateCount"],l);const u=v(e,["maxOutputTokens"]);u!=null&&w(r,["maxOutputTokens"],u);const d=v(e,["stopSequences"]);d!=null&&w(r,["stopSequences"],d);const h=v(e,["responseLogprobs"]);h!=null&&w(r,["responseLogprobs"],h);const m=v(e,["logprobs"]);m!=null&&w(r,["logprobs"],m);const p=v(e,["presencePenalty"]);p!=null&&w(r,["presencePenalty"],p);const y=v(e,["frequencyPenalty"]);y!=null&&w(r,["frequencyPenalty"],y);const x=v(e,["seed"]);x!=null&&w(r,["seed"],x);const C=v(e,["responseMimeType"]);C!=null&&w(r,["responseMimeType"],C);const S=v(e,["responseSchema"]);S!=null&&w(r,["responseSchema"],Tge(bB(S)));const k=v(e,["responseJsonSchema"]);if(k!=null&&w(r,["responseJsonSchema"],k),v(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(v(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=v(e,["safetySettings"]);if(n!==void 0&&I!=null){let D=I;Array.isArray(D)&&(D=D.map(L=>Nge(L))),w(n,["safetySettings"],D)}const F=v(e,["tools"]);if(n!==void 0&&F!=null){let D=Op(F);Array.isArray(D)&&(D=D.map(L=>Lge(Pp(L)))),w(n,["tools"],D)}const U=v(e,["toolConfig"]);if(n!==void 0&&U!=null&&w(n,["toolConfig"],Oge(U)),v(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=v(e,["cachedContent"]);n!==void 0&&R!=null&&w(n,["cachedContent"],Ad(t,R));const E=v(e,["responseModalities"]);E!=null&&w(r,["responseModalities"],E);const _=v(e,["mediaResolution"]);_!=null&&w(r,["mediaResolution"],_);const B=v(e,["speechConfig"]);if(B!=null&&w(r,["speechConfig"],Vge(CB(B))),v(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const j=v(e,["thinkingConfig"]);return j!=null&&w(r,["thinkingConfig"],zge(j)),r}function qge(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["request","model"],ns(t,r));const s=v(e,["contents"]);if(s!=null){let i=cc(s);Array.isArray(i)&&(i=i.map(o=>PH(o))),w(n,["request","contents"],i)}const a=v(e,["config"]);return a!=null&&w(n,["request","generationConfig"],Gge(t,a,n)),n}function Kge(t,e){const n={};if(v(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(v(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(v(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=v(e,["fileName"]);r!=null&&w(n,["fileName"],r);const s=v(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>qge(t,i))),w(n,["requests","requests"],a)}return n}function $ge(t,e){const n={},r=v(t,["displayName"]);if(e!==void 0&&r!=null&&w(e,["batch","displayName"],r),v(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Wge(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["_url","model"],ns(t,r));const s=v(e,["src"]);s!=null&&w(n,["batch","inputConfig"],Kge(t,UH(t,s)));const a=v(e,["config"]);return a!=null&&w(n,["config"],$ge(a,n)),n}function Yge(t,e){const n={},r=v(e,["name"]);r!=null&&w(n,["_url","name"],jp(t,r));const s=v(e,["config"]);return s!=null&&w(n,["config"],s),n}function Xge(t,e){const n={},r=v(e,["name"]);r!=null&&w(n,["_url","name"],jp(t,r));const s=v(e,["config"]);return s!=null&&w(n,["config"],s),n}function Jge(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&w(e,["_query","pageSize"],r);const s=v(t,["pageToken"]);if(e!==void 0&&s!=null&&w(e,["_query","pageToken"],s),v(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Zge(t){const e={},n=v(t,["config"]);return n!=null&&w(e,["config"],Jge(n,e)),e}function exe(t,e){const n={},r=v(e,["name"]);r!=null&&w(n,["_url","name"],jp(t,r));const s=v(e,["config"]);return s!=null&&w(n,["config"],s),n}function txe(t){const e={},n=v(t,["format"]);n!=null&&w(e,["instancesFormat"],n);const r=v(t,["gcsUri"]);r!=null&&w(e,["gcsSource","uris"],r);const s=v(t,["bigqueryUri"]);if(s!=null&&w(e,["bigquerySource","inputUri"],s),v(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(v(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function nxe(t){const e={},n=v(t,["format"]);n!=null&&w(e,["predictionsFormat"],n);const r=v(t,["gcsUri"]);r!=null&&w(e,["gcsDestination","outputUriPrefix"],r);const s=v(t,["bigqueryUri"]);if(s!=null&&w(e,["bigqueryDestination","outputUri"],s),v(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(v(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function rxe(t,e){const n={},r=v(t,["displayName"]);e!==void 0&&r!=null&&w(e,["displayName"],r);const s=v(t,["dest"]);return e!==void 0&&s!=null&&w(e,["outputConfig"],nxe(bge(s))),n}function sxe(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["model"],ns(t,r));const s=v(e,["src"]);s!=null&&w(n,["inputConfig"],txe(UH(t,s)));const a=v(e,["config"]);return a!=null&&w(n,["config"],rxe(a,n)),n}function axe(t,e){const n={},r=v(e,["name"]);r!=null&&w(n,["_url","name"],jp(t,r));const s=v(e,["config"]);return s!=null&&w(n,["config"],s),n}function ixe(t,e){const n={},r=v(e,["name"]);r!=null&&w(n,["_url","name"],jp(t,r));const s=v(e,["config"]);return s!=null&&w(n,["config"],s),n}function oxe(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&w(e,["_query","pageSize"],r);const s=v(t,["pageToken"]);e!==void 0&&s!=null&&w(e,["_query","pageToken"],s);const a=v(t,["filter"]);return e!==void 0&&a!=null&&w(e,["_query","filter"],a),n}function lxe(t){const e={},n=v(t,["config"]);return n!=null&&w(e,["config"],oxe(n,e)),e}function cxe(t,e){const n={},r=v(e,["name"]);r!=null&&w(n,["_url","name"],jp(t,r));const s=v(e,["config"]);return s!=null&&w(n,["config"],s),n}function uxe(t){const e={},n=v(t,["fps"]);n!=null&&w(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&w(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function Axe(t){const e={},n=v(t,["data"]);n!=null&&w(e,["data"],n);const r=v(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function dxe(t){const e={},n=v(t,["fileUri"]);n!=null&&w(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function fxe(t){const e={},n=v(t,["videoMetadata"]);n!=null&&w(e,["videoMetadata"],uxe(n));const r=v(t,["thought"]);r!=null&&w(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],Axe(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],dxe(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&w(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function hxe(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>fxe(a))),w(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&w(e,["role"],r),e}function mxe(t){const e={},n=v(t,["citationSources"]);return n!=null&&w(e,["citations"],n),e}function pxe(t){const e={},n=v(t,["retrievedUrl"]);n!=null&&w(e,["retrievedUrl"],n);const r=v(t,["urlRetrievalStatus"]);return r!=null&&w(e,["urlRetrievalStatus"],r),e}function gxe(t){const e={},n=v(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>pxe(s))),w(e,["urlMetadata"],r)}return e}function xxe(t){const e={},n=v(t,["content"]);n!=null&&w(e,["content"],hxe(n));const r=v(t,["citationMetadata"]);r!=null&&w(e,["citationMetadata"],mxe(r));const s=v(t,["tokenCount"]);s!=null&&w(e,["tokenCount"],s);const a=v(t,["finishReason"]);a!=null&&w(e,["finishReason"],a);const i=v(t,["urlContextMetadata"]);i!=null&&w(e,["urlContextMetadata"],gxe(i));const o=v(t,["avgLogprobs"]);o!=null&&w(e,["avgLogprobs"],o);const l=v(t,["groundingMetadata"]);l!=null&&w(e,["groundingMetadata"],l);const u=v(t,["index"]);u!=null&&w(e,["index"],u);const d=v(t,["logprobsResult"]);d!=null&&w(e,["logprobsResult"],d);const h=v(t,["safetyRatings"]);return h!=null&&w(e,["safetyRatings"],h),e}function vxe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["candidates"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>xxe(l))),w(e,["candidates"],o)}const s=v(t,["modelVersion"]);s!=null&&w(e,["modelVersion"],s);const a=v(t,["promptFeedback"]);a!=null&&w(e,["promptFeedback"],a);const i=v(t,["usageMetadata"]);return i!=null&&w(e,["usageMetadata"],i),e}function jH(t){const e={},n=v(t,["details"]);n!=null&&w(e,["details"],n);const r=v(t,["code"]);r!=null&&w(e,["code"],r);const s=v(t,["message"]);return s!=null&&w(e,["message"],s),e}function yxe(t){const e={},n=v(t,["response"]);n!=null&&w(e,["response"],vxe(n));const r=v(t,["error"]);return r!=null&&w(e,["error"],jH(r)),e}function wxe(t){const e={},n=v(t,["responsesFile"]);n!=null&&w(e,["fileName"],n);const r=v(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>yxe(a))),w(e,["inlinedResponses"],s)}return e}function cT(t){const e={},n=v(t,["name"]);n!=null&&w(e,["name"],n);const r=v(t,["metadata","displayName"]);r!=null&&w(e,["displayName"],r);const s=v(t,["metadata","state"]);s!=null&&w(e,["state"],MH(s));const a=v(t,["metadata","createTime"]);a!=null&&w(e,["createTime"],a);const i=v(t,["metadata","endTime"]);i!=null&&w(e,["endTime"],i);const o=v(t,["metadata","updateTime"]);o!=null&&w(e,["updateTime"],o);const l=v(t,["metadata","model"]);l!=null&&w(e,["model"],l);const u=v(t,["metadata","output"]);return u!=null&&w(e,["dest"],wxe(u)),e}function bxe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&w(e,["nextPageToken"],r);const s=v(t,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>cT(i))),w(e,["batchJobs"],a)}return e}function Cxe(t){const e={},n=v(t,["name"]);n!=null&&w(e,["name"],n);const r=v(t,["done"]);r!=null&&w(e,["done"],r);const s=v(t,["error"]);return s!=null&&w(e,["error"],jH(s)),e}function QH(t){const e={},n=v(t,["details"]);n!=null&&w(e,["details"],n);const r=v(t,["code"]);r!=null&&w(e,["code"],r);const s=v(t,["message"]);return s!=null&&w(e,["message"],s),e}function Exe(t){const e={},n=v(t,["instancesFormat"]);n!=null&&w(e,["format"],n);const r=v(t,["gcsSource","uris"]);r!=null&&w(e,["gcsUri"],r);const s=v(t,["bigquerySource","inputUri"]);return s!=null&&w(e,["bigqueryUri"],s),e}function _xe(t){const e={},n=v(t,["predictionsFormat"]);n!=null&&w(e,["format"],n);const r=v(t,["gcsDestination","outputUriPrefix"]);r!=null&&w(e,["gcsUri"],r);const s=v(t,["bigqueryDestination","outputUri"]);return s!=null&&w(e,["bigqueryUri"],s),e}function uT(t){const e={},n=v(t,["name"]);n!=null&&w(e,["name"],n);const r=v(t,["displayName"]);r!=null&&w(e,["displayName"],r);const s=v(t,["state"]);s!=null&&w(e,["state"],MH(s));const a=v(t,["error"]);a!=null&&w(e,["error"],QH(a));const i=v(t,["createTime"]);i!=null&&w(e,["createTime"],i);const o=v(t,["startTime"]);o!=null&&w(e,["startTime"],o);const l=v(t,["endTime"]);l!=null&&w(e,["endTime"],l);const u=v(t,["updateTime"]);u!=null&&w(e,["updateTime"],u);const d=v(t,["model"]);d!=null&&w(e,["model"],d);const h=v(t,["inputConfig"]);h!=null&&w(e,["src"],Exe(h));const m=v(t,["outputConfig"]);return m!=null&&w(e,["dest"],_xe(m)),e}function Sxe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&w(e,["nextPageToken"],r);const s=v(t,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>uT(i))),w(e,["batchJobs"],a)}return e}function Txe(t){const e={},n=v(t,["name"]);n!=null&&w(e,["name"],n);const r=v(t,["done"]);r!=null&&w(e,["done"],r);const s=v(t,["error"]);return s!=null&&w(e,["error"],QH(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var l0;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(l0||(l0={}));class e1{constructor(e,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,s)}init(e,n,r){var s,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let i={config:{}};!r||Object.keys(r).length===0?i={config:{}}:typeof r=="object"?i=Object.assign({},r):i=r,i.config&&(i.config.pageToken=n.nextPageToken),this.paramsInternal=i,this.pageInternalSize=(a=(s=i.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nxe extends b0{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){const s=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${s}`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new e1(l0.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}async createInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=sxe(this.apiClient,e);return o=dn("batchPredictionJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>uT(d))}else{const u=Wge(this.apiClient,e);return o=dn("{model}:batchGenerateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>cT(d))}}async get(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=axe(this.apiClient,e);return o=dn("batchPredictionJobs/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>uT(d))}else{const u=Yge(this.apiClient,e);return o=dn("batches/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>cT(d))}}async cancel(e){var n,r,s,a;let i="",o={};if(this.apiClient.isVertexAI()){const l=ixe(this.apiClient,e);i=dn("batchPredictionJobs/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=Xge(this.apiClient,e);i=dn("batches/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=lxe(e);return o=dn("batchPredictionJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Sxe(d),m=new mL;return Object.assign(m,h),m})}else{const u=Zge(e);return o=dn("batches",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=bxe(d),m=new mL;return Object.assign(m,h),m})}}async delete(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=cxe(this.apiClient,e);return o=dn("batchPredictionJobs/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>Txe(d))}else{const u=exe(this.apiClient,e);return o=dn("batches/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>Cxe(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bxe(t){const e={},n=v(t,["fps"]);n!=null&&w(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&w(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function kxe(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["data"]);n!=null&&w(e,["data"],n);const r=v(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function Ixe(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&w(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function Fxe(t){const e={},n=v(t,["videoMetadata"]);n!=null&&w(e,["videoMetadata"],Bxe(n));const r=v(t,["thought"]);r!=null&&w(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],kxe(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],Ixe(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&w(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function vL(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Fxe(a))),w(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&w(e,["role"],r),e}function Dxe(t){const e={},n=v(t,["behavior"]);n!=null&&w(e,["behavior"],n);const r=v(t,["description"]);r!=null&&w(e,["description"],r);const s=v(t,["name"]);s!=null&&w(e,["name"],s);const a=v(t,["parameters"]);a!=null&&w(e,["parameters"],a);const i=v(t,["parametersJsonSchema"]);i!=null&&w(e,["parametersJsonSchema"],i);const o=v(t,["response"]);o!=null&&w(e,["response"],o);const l=v(t,["responseJsonSchema"]);return l!=null&&w(e,["responseJsonSchema"],l),e}function Rxe(t){const e={},n=v(t,["startTime"]);n!=null&&w(e,["startTime"],n);const r=v(t,["endTime"]);return r!=null&&w(e,["endTime"],r),e}function Lxe(t){const e={},n=v(t,["timeRangeFilter"]);return n!=null&&w(e,["timeRangeFilter"],Rxe(n)),e}function Uxe(t){const e={},n=v(t,["mode"]);n!=null&&w(e,["mode"],n);const r=v(t,["dynamicThreshold"]);return r!=null&&w(e,["dynamicThreshold"],r),e}function Mxe(t){const e={},n=v(t,["dynamicRetrievalConfig"]);return n!=null&&w(e,["dynamicRetrievalConfig"],Uxe(n)),e}function Pxe(){return{}}function Oxe(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Dxe(u))),w(e,["functionDeclarations"],l)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=v(t,["googleSearch"]);r!=null&&w(e,["googleSearch"],Lxe(r));const s=v(t,["googleSearchRetrieval"]);if(s!=null&&w(e,["googleSearchRetrieval"],Mxe(s)),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(v(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");v(t,["urlContext"])!=null&&w(e,["urlContext"],Pxe());const i=v(t,["codeExecution"]);i!=null&&w(e,["codeExecution"],i);const o=v(t,["computerUse"]);return o!=null&&w(e,["computerUse"],o),e}function jxe(t){const e={},n=v(t,["mode"]);n!=null&&w(e,["mode"],n);const r=v(t,["allowedFunctionNames"]);return r!=null&&w(e,["allowedFunctionNames"],r),e}function Qxe(t){const e={},n=v(t,["latitude"]);n!=null&&w(e,["latitude"],n);const r=v(t,["longitude"]);return r!=null&&w(e,["longitude"],r),e}function Hxe(t){const e={},n=v(t,["latLng"]);n!=null&&w(e,["latLng"],Qxe(n));const r=v(t,["languageCode"]);return r!=null&&w(e,["languageCode"],r),e}function Vxe(t){const e={},n=v(t,["functionCallingConfig"]);n!=null&&w(e,["functionCallingConfig"],jxe(n));const r=v(t,["retrievalConfig"]);return r!=null&&w(e,["retrievalConfig"],Hxe(r)),e}function zxe(t,e){const n={},r=v(t,["ttl"]);e!==void 0&&r!=null&&w(e,["ttl"],r);const s=v(t,["expireTime"]);e!==void 0&&s!=null&&w(e,["expireTime"],s);const a=v(t,["displayName"]);e!==void 0&&a!=null&&w(e,["displayName"],a);const i=v(t,["contents"]);if(e!==void 0&&i!=null){let d=cc(i);Array.isArray(d)&&(d=d.map(h=>vL(h))),w(e,["contents"],d)}const o=v(t,["systemInstruction"]);e!==void 0&&o!=null&&w(e,["systemInstruction"],vL(to(o)));const l=v(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>Oxe(h))),w(e,["tools"],d)}const u=v(t,["toolConfig"]);if(e!==void 0&&u!=null&&w(e,["toolConfig"],Vxe(u)),v(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Gxe(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["model"],SH(t,r));const s=v(e,["config"]);return s!=null&&w(n,["config"],zxe(s,n)),n}function qxe(t,e){const n={},r=v(e,["name"]);r!=null&&w(n,["_url","name"],Ad(t,r));const s=v(e,["config"]);return s!=null&&w(n,["config"],s),n}function Kxe(t,e){const n={},r=v(e,["name"]);r!=null&&w(n,["_url","name"],Ad(t,r));const s=v(e,["config"]);return s!=null&&w(n,["config"],s),n}function $xe(t,e){const n={},r=v(t,["ttl"]);e!==void 0&&r!=null&&w(e,["ttl"],r);const s=v(t,["expireTime"]);return e!==void 0&&s!=null&&w(e,["expireTime"],s),n}function Wxe(t,e){const n={},r=v(e,["name"]);r!=null&&w(n,["_url","name"],Ad(t,r));const s=v(e,["config"]);return s!=null&&w(n,["config"],$xe(s,n)),n}function Yxe(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&w(e,["_query","pageSize"],r);const s=v(t,["pageToken"]);return e!==void 0&&s!=null&&w(e,["_query","pageToken"],s),n}function Xxe(t){const e={},n=v(t,["config"]);return n!=null&&w(e,["config"],Yxe(n,e)),e}function Jxe(t){const e={},n=v(t,["fps"]);n!=null&&w(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&w(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function Zxe(t){const e={},n=v(t,["displayName"]);n!=null&&w(e,["displayName"],n);const r=v(t,["data"]);r!=null&&w(e,["data"],r);const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function eve(t){const e={},n=v(t,["displayName"]);n!=null&&w(e,["displayName"],n);const r=v(t,["fileUri"]);r!=null&&w(e,["fileUri"],r);const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function tve(t){const e={},n=v(t,["videoMetadata"]);n!=null&&w(e,["videoMetadata"],Jxe(n));const r=v(t,["thought"]);r!=null&&w(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],Zxe(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],eve(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&w(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function yL(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>tve(a))),w(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&w(e,["role"],r),e}function nve(t){const e={};if(v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=v(t,["description"]);n!=null&&w(e,["description"],n);const r=v(t,["name"]);r!=null&&w(e,["name"],r);const s=v(t,["parameters"]);s!=null&&w(e,["parameters"],s);const a=v(t,["parametersJsonSchema"]);a!=null&&w(e,["parametersJsonSchema"],a);const i=v(t,["response"]);i!=null&&w(e,["response"],i);const o=v(t,["responseJsonSchema"]);return o!=null&&w(e,["responseJsonSchema"],o),e}function rve(t){const e={},n=v(t,["startTime"]);n!=null&&w(e,["startTime"],n);const r=v(t,["endTime"]);return r!=null&&w(e,["endTime"],r),e}function sve(t){const e={},n=v(t,["timeRangeFilter"]);return n!=null&&w(e,["timeRangeFilter"],rve(n)),e}function ave(t){const e={},n=v(t,["mode"]);n!=null&&w(e,["mode"],n);const r=v(t,["dynamicThreshold"]);return r!=null&&w(e,["dynamicThreshold"],r),e}function ive(t){const e={},n=v(t,["dynamicRetrievalConfig"]);return n!=null&&w(e,["dynamicRetrievalConfig"],ave(n)),e}function ove(){return{}}function lve(t){const e={},n=v(t,["apiKeyString"]);return n!=null&&w(e,["apiKeyString"],n),e}function cve(t){const e={},n=v(t,["apiKeyConfig"]);n!=null&&w(e,["apiKeyConfig"],lve(n));const r=v(t,["authType"]);r!=null&&w(e,["authType"],r);const s=v(t,["googleServiceAccountConfig"]);s!=null&&w(e,["googleServiceAccountConfig"],s);const a=v(t,["httpBasicAuthConfig"]);a!=null&&w(e,["httpBasicAuthConfig"],a);const i=v(t,["oauthConfig"]);i!=null&&w(e,["oauthConfig"],i);const o=v(t,["oidcConfig"]);return o!=null&&w(e,["oidcConfig"],o),e}function uve(t){const e={},n=v(t,["authConfig"]);return n!=null&&w(e,["authConfig"],cve(n)),e}function Ave(){return{}}function dve(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>nve(m))),w(e,["functionDeclarations"],h)}const r=v(t,["retrieval"]);r!=null&&w(e,["retrieval"],r);const s=v(t,["googleSearch"]);s!=null&&w(e,["googleSearch"],sve(s));const a=v(t,["googleSearchRetrieval"]);a!=null&&w(e,["googleSearchRetrieval"],ive(a)),v(t,["enterpriseWebSearch"])!=null&&w(e,["enterpriseWebSearch"],ove());const o=v(t,["googleMaps"]);o!=null&&w(e,["googleMaps"],uve(o)),v(t,["urlContext"])!=null&&w(e,["urlContext"],Ave());const u=v(t,["codeExecution"]);u!=null&&w(e,["codeExecution"],u);const d=v(t,["computerUse"]);return d!=null&&w(e,["computerUse"],d),e}function fve(t){const e={},n=v(t,["mode"]);n!=null&&w(e,["mode"],n);const r=v(t,["allowedFunctionNames"]);return r!=null&&w(e,["allowedFunctionNames"],r),e}function hve(t){const e={},n=v(t,["latitude"]);n!=null&&w(e,["latitude"],n);const r=v(t,["longitude"]);return r!=null&&w(e,["longitude"],r),e}function mve(t){const e={},n=v(t,["latLng"]);n!=null&&w(e,["latLng"],hve(n));const r=v(t,["languageCode"]);return r!=null&&w(e,["languageCode"],r),e}function pve(t){const e={},n=v(t,["functionCallingConfig"]);n!=null&&w(e,["functionCallingConfig"],fve(n));const r=v(t,["retrievalConfig"]);return r!=null&&w(e,["retrievalConfig"],mve(r)),e}function gve(t,e){const n={},r=v(t,["ttl"]);e!==void 0&&r!=null&&w(e,["ttl"],r);const s=v(t,["expireTime"]);e!==void 0&&s!=null&&w(e,["expireTime"],s);const a=v(t,["displayName"]);e!==void 0&&a!=null&&w(e,["displayName"],a);const i=v(t,["contents"]);if(e!==void 0&&i!=null){let h=cc(i);Array.isArray(h)&&(h=h.map(m=>yL(m))),w(e,["contents"],h)}const o=v(t,["systemInstruction"]);e!==void 0&&o!=null&&w(e,["systemInstruction"],yL(to(o)));const l=v(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>dve(m))),w(e,["tools"],h)}const u=v(t,["toolConfig"]);e!==void 0&&u!=null&&w(e,["toolConfig"],pve(u));const d=v(t,["kmsKeyName"]);return e!==void 0&&d!=null&&w(e,["encryption_spec","kmsKeyName"],d),n}function xve(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["model"],SH(t,r));const s=v(e,["config"]);return s!=null&&w(n,["config"],gve(s,n)),n}function vve(t,e){const n={},r=v(e,["name"]);r!=null&&w(n,["_url","name"],Ad(t,r));const s=v(e,["config"]);return s!=null&&w(n,["config"],s),n}function yve(t,e){const n={},r=v(e,["name"]);r!=null&&w(n,["_url","name"],Ad(t,r));const s=v(e,["config"]);return s!=null&&w(n,["config"],s),n}function wve(t,e){const n={},r=v(t,["ttl"]);e!==void 0&&r!=null&&w(e,["ttl"],r);const s=v(t,["expireTime"]);return e!==void 0&&s!=null&&w(e,["expireTime"],s),n}function bve(t,e){const n={},r=v(e,["name"]);r!=null&&w(n,["_url","name"],Ad(t,r));const s=v(e,["config"]);return s!=null&&w(n,["config"],wve(s,n)),n}function Cve(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&w(e,["_query","pageSize"],r);const s=v(t,["pageToken"]);return e!==void 0&&s!=null&&w(e,["_query","pageToken"],s),n}function Eve(t){const e={},n=v(t,["config"]);return n!=null&&w(e,["config"],Cve(n,e)),e}function M2(t){const e={},n=v(t,["name"]);n!=null&&w(e,["name"],n);const r=v(t,["displayName"]);r!=null&&w(e,["displayName"],r);const s=v(t,["model"]);s!=null&&w(e,["model"],s);const a=v(t,["createTime"]);a!=null&&w(e,["createTime"],a);const i=v(t,["updateTime"]);i!=null&&w(e,["updateTime"],i);const o=v(t,["expireTime"]);o!=null&&w(e,["expireTime"],o);const l=v(t,["usageMetadata"]);return l!=null&&w(e,["usageMetadata"],l),e}function _ve(){return{}}function Sve(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&w(e,["nextPageToken"],r);const s=v(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>M2(i))),w(e,["cachedContents"],a)}return e}function P2(t){const e={},n=v(t,["name"]);n!=null&&w(e,["name"],n);const r=v(t,["displayName"]);r!=null&&w(e,["displayName"],r);const s=v(t,["model"]);s!=null&&w(e,["model"],s);const a=v(t,["createTime"]);a!=null&&w(e,["createTime"],a);const i=v(t,["updateTime"]);i!=null&&w(e,["updateTime"],i);const o=v(t,["expireTime"]);o!=null&&w(e,["expireTime"],o);const l=v(t,["usageMetadata"]);return l!=null&&w(e,["usageMetadata"],l),e}function Tve(){return{}}function Nve(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&w(e,["nextPageToken"],r);const s=v(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>P2(i))),w(e,["cachedContents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bve extends b0{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new e1(l0.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=xve(this.apiClient,e);return o=dn("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>P2(d))}else{const u=Gxe(this.apiClient,e);return o=dn("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>M2(d))}}async get(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=vve(this.apiClient,e);return o=dn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>P2(d))}else{const u=qxe(this.apiClient,e);return o=dn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>M2(d))}}async delete(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=yve(this.apiClient,e);return o=dn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(()=>{const d=Tve(),h=new fL;return Object.assign(h,d),h})}else{const u=Kxe(this.apiClient,e);return o=dn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(()=>{const d=_ve(),h=new fL;return Object.assign(h,d),h})}}async update(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=bve(this.apiClient,e);return o=dn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>P2(d))}else{const u=Wxe(this.apiClient,e);return o=dn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>M2(d))}}async listInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Eve(e);return o=dn("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Nve(d),m=new hL;return Object.assign(m,h),m})}else{const u=Xxe(e);return o=dn("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Sve(d),m=new hL;return Object.assign(m,h),m})}}}function wL(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xs(t){return this instanceof xs?(this.v=t,this):new xs(t)}function Zm(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(p){return function(y){return Promise.resolve(y).then(p,h)}}function o(p,y){r[p]&&(s[p]=function(x){return new Promise(function(C,S){a.push([p,x,C,S])>1||l(p,x)})},y&&(s[p]=y(s[p])))}function l(p,y){try{u(r[p](y))}catch(x){m(a[0][3],x)}}function u(p){p.value instanceof xs?Promise.resolve(p.value.v).then(d,h):m(a[0][2],p)}function d(p){l("next",p)}function h(p){l("throw",p)}function m(p,y){p(y),a.shift(),a.length&&l(a[0][0],a[0][1])}}function Ix(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof wL=="function"?wL(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(i){return new Promise(function(o,l){i=t[a](i),s(o,l,i.done,i.value)})}}function s(a,i,o,l){Promise.resolve(l).then(function(u){a({value:u,done:o})},i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kve(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:HH(n)}function HH(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function Ive(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function bL(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const s=[];let a=!0;for(;r<n&&t[r].role==="model";)s.push(t[r]),a&&!HH(t[r])&&(a=!1),r++;a?e.push(...s):e.pop()}return e}class Fve{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Dve(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Dve{constructor(e,n,r,s={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),Ive(a)}async sendMessage(e){var n;await this.sendPromise;const r=to(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,i,o;const l=await s,u=(i=(a=l.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content,d=l.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let m=[];d!=null&&(m=(o=d.slice(h))!==null&&o!==void 0?o:[]);const p=u?[u]:[];this.recordHistory(r,p,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const r=to(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,r)}getHistory(e=!1){const n=e?bL(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,s;return Zm(this,arguments,function*(){var i,o,l,u;const d=[];try{for(var h=!0,m=Ix(e),p;p=yield xs(m.next()),i=p.done,!i;h=!0){u=p.value,h=!1;const y=u;if(kve(y)){const x=(s=(r=y.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content;x!==void 0&&d.push(x)}yield yield xs(y)}}catch(y){o={error:y}}finally{try{!h&&!i&&(l=m.return)&&(yield xs(l.call(m)))}finally{if(o)throw o.error}}this.recordHistory(n,d)})}recordHistory(e,n,r){let s=[];n.length>0&&n.every(a=>a.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...bL(r)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wC extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,wC.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rve(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&w(e,["_query","pageSize"],r);const s=v(t,["pageToken"]);return e!==void 0&&s!=null&&w(e,["_query","pageToken"],s),n}function Lve(t){const e={},n=v(t,["config"]);return n!=null&&w(e,["config"],Rve(n,e)),e}function Uve(t){const e={},n=v(t,["details"]);n!=null&&w(e,["details"],n);const r=v(t,["message"]);r!=null&&w(e,["message"],r);const s=v(t,["code"]);return s!=null&&w(e,["code"],s),e}function Mve(t){const e={},n=v(t,["name"]);n!=null&&w(e,["name"],n);const r=v(t,["displayName"]);r!=null&&w(e,["displayName"],r);const s=v(t,["mimeType"]);s!=null&&w(e,["mimeType"],s);const a=v(t,["sizeBytes"]);a!=null&&w(e,["sizeBytes"],a);const i=v(t,["createTime"]);i!=null&&w(e,["createTime"],i);const o=v(t,["expirationTime"]);o!=null&&w(e,["expirationTime"],o);const l=v(t,["updateTime"]);l!=null&&w(e,["updateTime"],l);const u=v(t,["sha256Hash"]);u!=null&&w(e,["sha256Hash"],u);const d=v(t,["uri"]);d!=null&&w(e,["uri"],d);const h=v(t,["downloadUri"]);h!=null&&w(e,["downloadUri"],h);const m=v(t,["state"]);m!=null&&w(e,["state"],m);const p=v(t,["source"]);p!=null&&w(e,["source"],p);const y=v(t,["videoMetadata"]);y!=null&&w(e,["videoMetadata"],y);const x=v(t,["error"]);return x!=null&&w(e,["error"],Uve(x)),e}function Pve(t){const e={},n=v(t,["file"]);n!=null&&w(e,["file"],Mve(n));const r=v(t,["config"]);return r!=null&&w(e,["config"],r),e}function Ove(t){const e={},n=v(t,["name"]);n!=null&&w(e,["_url","file"],DH(n));const r=v(t,["config"]);return r!=null&&w(e,["config"],r),e}function jve(t){const e={},n=v(t,["name"]);n!=null&&w(e,["_url","file"],DH(n));const r=v(t,["config"]);return r!=null&&w(e,["config"],r),e}function Qve(t){const e={},n=v(t,["details"]);n!=null&&w(e,["details"],n);const r=v(t,["message"]);r!=null&&w(e,["message"],r);const s=v(t,["code"]);return s!=null&&w(e,["code"],s),e}function AT(t){const e={},n=v(t,["name"]);n!=null&&w(e,["name"],n);const r=v(t,["displayName"]);r!=null&&w(e,["displayName"],r);const s=v(t,["mimeType"]);s!=null&&w(e,["mimeType"],s);const a=v(t,["sizeBytes"]);a!=null&&w(e,["sizeBytes"],a);const i=v(t,["createTime"]);i!=null&&w(e,["createTime"],i);const o=v(t,["expirationTime"]);o!=null&&w(e,["expirationTime"],o);const l=v(t,["updateTime"]);l!=null&&w(e,["updateTime"],l);const u=v(t,["sha256Hash"]);u!=null&&w(e,["sha256Hash"],u);const d=v(t,["uri"]);d!=null&&w(e,["uri"],d);const h=v(t,["downloadUri"]);h!=null&&w(e,["downloadUri"],h);const m=v(t,["state"]);m!=null&&w(e,["state"],m);const p=v(t,["source"]);p!=null&&w(e,["source"],p);const y=v(t,["videoMetadata"]);y!=null&&w(e,["videoMetadata"],y);const x=v(t,["error"]);return x!=null&&w(e,["error"],Qve(x)),e}function Hve(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&w(e,["nextPageToken"],r);const s=v(t,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>AT(i))),w(e,["files"],a)}return e}function Vve(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&w(e,["sdkHttpResponse"],n),e}function zve(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gve extends b0{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new e1(l0.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>AT(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Lve(e);return a=dn("files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=Hve(l),d=new cge;return Object.assign(d,u),d})}}async createInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Pve(e);return a=dn("upload/v1beta/files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const u=Vve(l),d=new uge;return Object.assign(d,u),d})}}async get(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Ove(e);return a=dn("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>AT(l))}}async delete(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=jve(e);return a=dn("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(()=>{const l=zve(),u=new Age;return Object.assign(u,l),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qve(t){const e={},n=v(t,["voiceName"]);return n!=null&&w(e,["voiceName"],n),e}function VH(t){const e={},n=v(t,["prebuiltVoiceConfig"]);return n!=null&&w(e,["prebuiltVoiceConfig"],qve(n)),e}function Kve(t){const e={},n=v(t,["speaker"]);n!=null&&w(e,["speaker"],n);const r=v(t,["voiceConfig"]);return r!=null&&w(e,["voiceConfig"],VH(r)),e}function $ve(t){const e={},n=v(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Kve(s))),w(e,["speakerVoiceConfigs"],r)}return e}function Wve(t){const e={},n=v(t,["voiceConfig"]);n!=null&&w(e,["voiceConfig"],VH(n));const r=v(t,["multiSpeakerVoiceConfig"]);r!=null&&w(e,["multiSpeakerVoiceConfig"],$ve(r));const s=v(t,["languageCode"]);return s!=null&&w(e,["languageCode"],s),e}function Yve(t){const e={},n=v(t,["fps"]);n!=null&&w(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&w(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function Xve(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["data"]);n!=null&&w(e,["data"],n);const r=v(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function Jve(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&w(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function Zve(t){const e={},n=v(t,["videoMetadata"]);n!=null&&w(e,["videoMetadata"],Yve(n));const r=v(t,["thought"]);r!=null&&w(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],Xve(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],Jve(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&w(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function e1e(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Zve(a))),w(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&w(e,["role"],r),e}function t1e(t){const e={},n=v(t,["behavior"]);n!=null&&w(e,["behavior"],n);const r=v(t,["description"]);r!=null&&w(e,["description"],r);const s=v(t,["name"]);s!=null&&w(e,["name"],s);const a=v(t,["parameters"]);a!=null&&w(e,["parameters"],a);const i=v(t,["parametersJsonSchema"]);i!=null&&w(e,["parametersJsonSchema"],i);const o=v(t,["response"]);o!=null&&w(e,["response"],o);const l=v(t,["responseJsonSchema"]);return l!=null&&w(e,["responseJsonSchema"],l),e}function n1e(t){const e={},n=v(t,["startTime"]);n!=null&&w(e,["startTime"],n);const r=v(t,["endTime"]);return r!=null&&w(e,["endTime"],r),e}function r1e(t){const e={},n=v(t,["timeRangeFilter"]);return n!=null&&w(e,["timeRangeFilter"],n1e(n)),e}function s1e(t){const e={},n=v(t,["mode"]);n!=null&&w(e,["mode"],n);const r=v(t,["dynamicThreshold"]);return r!=null&&w(e,["dynamicThreshold"],r),e}function a1e(t){const e={},n=v(t,["dynamicRetrievalConfig"]);return n!=null&&w(e,["dynamicRetrievalConfig"],s1e(n)),e}function i1e(){return{}}function o1e(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>t1e(u))),w(e,["functionDeclarations"],l)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=v(t,["googleSearch"]);r!=null&&w(e,["googleSearch"],r1e(r));const s=v(t,["googleSearchRetrieval"]);if(s!=null&&w(e,["googleSearchRetrieval"],a1e(s)),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(v(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");v(t,["urlContext"])!=null&&w(e,["urlContext"],i1e());const i=v(t,["codeExecution"]);i!=null&&w(e,["codeExecution"],i);const o=v(t,["computerUse"]);return o!=null&&w(e,["computerUse"],o),e}function l1e(t){const e={},n=v(t,["handle"]);if(n!=null&&w(e,["handle"],n),v(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function CL(){return{}}function c1e(t){const e={},n=v(t,["disabled"]);n!=null&&w(e,["disabled"],n);const r=v(t,["startOfSpeechSensitivity"]);r!=null&&w(e,["startOfSpeechSensitivity"],r);const s=v(t,["endOfSpeechSensitivity"]);s!=null&&w(e,["endOfSpeechSensitivity"],s);const a=v(t,["prefixPaddingMs"]);a!=null&&w(e,["prefixPaddingMs"],a);const i=v(t,["silenceDurationMs"]);return i!=null&&w(e,["silenceDurationMs"],i),e}function u1e(t){const e={},n=v(t,["automaticActivityDetection"]);n!=null&&w(e,["automaticActivityDetection"],c1e(n));const r=v(t,["activityHandling"]);r!=null&&w(e,["activityHandling"],r);const s=v(t,["turnCoverage"]);return s!=null&&w(e,["turnCoverage"],s),e}function A1e(t){const e={},n=v(t,["targetTokens"]);return n!=null&&w(e,["targetTokens"],n),e}function d1e(t){const e={},n=v(t,["triggerTokens"]);n!=null&&w(e,["triggerTokens"],n);const r=v(t,["slidingWindow"]);return r!=null&&w(e,["slidingWindow"],A1e(r)),e}function f1e(t){const e={},n=v(t,["proactiveAudio"]);return n!=null&&w(e,["proactiveAudio"],n),e}function h1e(t,e){const n={},r=v(t,["generationConfig"]);e!==void 0&&r!=null&&w(e,["setup","generationConfig"],r);const s=v(t,["responseModalities"]);e!==void 0&&s!=null&&w(e,["setup","generationConfig","responseModalities"],s);const a=v(t,["temperature"]);e!==void 0&&a!=null&&w(e,["setup","generationConfig","temperature"],a);const i=v(t,["topP"]);e!==void 0&&i!=null&&w(e,["setup","generationConfig","topP"],i);const o=v(t,["topK"]);e!==void 0&&o!=null&&w(e,["setup","generationConfig","topK"],o);const l=v(t,["maxOutputTokens"]);e!==void 0&&l!=null&&w(e,["setup","generationConfig","maxOutputTokens"],l);const u=v(t,["mediaResolution"]);e!==void 0&&u!=null&&w(e,["setup","generationConfig","mediaResolution"],u);const d=v(t,["seed"]);e!==void 0&&d!=null&&w(e,["setup","generationConfig","seed"],d);const h=v(t,["speechConfig"]);e!==void 0&&h!=null&&w(e,["setup","generationConfig","speechConfig"],Wve(EB(h)));const m=v(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&w(e,["setup","generationConfig","enableAffectiveDialog"],m);const p=v(t,["systemInstruction"]);e!==void 0&&p!=null&&w(e,["setup","systemInstruction"],e1e(to(p)));const y=v(t,["tools"]);if(e!==void 0&&y!=null){let U=Op(y);Array.isArray(U)&&(U=U.map(R=>o1e(Pp(R)))),w(e,["setup","tools"],U)}const x=v(t,["sessionResumption"]);e!==void 0&&x!=null&&w(e,["setup","sessionResumption"],l1e(x));const C=v(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&w(e,["setup","inputAudioTranscription"],CL());const S=v(t,["outputAudioTranscription"]);e!==void 0&&S!=null&&w(e,["setup","outputAudioTranscription"],CL());const k=v(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&w(e,["setup","realtimeInputConfig"],u1e(k));const I=v(t,["contextWindowCompression"]);e!==void 0&&I!=null&&w(e,["setup","contextWindowCompression"],d1e(I));const F=v(t,["proactivity"]);return e!==void 0&&F!=null&&w(e,["setup","proactivity"],f1e(F)),n}function m1e(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["setup","model"],ns(t,r));const s=v(e,["config"]);return s!=null&&w(n,["config"],h1e(s,n)),n}function p1e(){return{}}function g1e(){return{}}function x1e(t){const e={},n=v(t,["media"]);n!=null&&w(e,["mediaChunks"],TH(n));const r=v(t,["audio"]);r!=null&&w(e,["audio"],BH(r));const s=v(t,["audioStreamEnd"]);s!=null&&w(e,["audioStreamEnd"],s);const a=v(t,["video"]);a!=null&&w(e,["video"],NH(a));const i=v(t,["text"]);return i!=null&&w(e,["text"],i),v(t,["activityStart"])!=null&&w(e,["activityStart"],p1e()),v(t,["activityEnd"])!=null&&w(e,["activityEnd"],g1e()),e}function zH(t){const e={},n=v(t,["text"]);n!=null&&w(e,["text"],n);const r=v(t,["weight"]);return r!=null&&w(e,["weight"],r),e}function v1e(t){const e={},n=v(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>zH(s))),w(e,["weightedPrompts"],r)}return e}function GH(t){const e={},n=v(t,["temperature"]);n!=null&&w(e,["temperature"],n);const r=v(t,["topK"]);r!=null&&w(e,["topK"],r);const s=v(t,["seed"]);s!=null&&w(e,["seed"],s);const a=v(t,["guidance"]);a!=null&&w(e,["guidance"],a);const i=v(t,["bpm"]);i!=null&&w(e,["bpm"],i);const o=v(t,["density"]);o!=null&&w(e,["density"],o);const l=v(t,["brightness"]);l!=null&&w(e,["brightness"],l);const u=v(t,["scale"]);u!=null&&w(e,["scale"],u);const d=v(t,["muteBass"]);d!=null&&w(e,["muteBass"],d);const h=v(t,["muteDrums"]);h!=null&&w(e,["muteDrums"],h);const m=v(t,["onlyBassAndDrums"]);return m!=null&&w(e,["onlyBassAndDrums"],m),e}function y1e(t){const e={},n=v(t,["musicGenerationConfig"]);return n!=null&&w(e,["musicGenerationConfig"],GH(n)),e}function qH(t){const e={},n=v(t,["model"]);return n!=null&&w(e,["model"],n),e}function KH(t){const e={},n=v(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>zH(s))),w(e,["weightedPrompts"],r)}return e}function dT(t){const e={},n=v(t,["setup"]);n!=null&&w(e,["setup"],qH(n));const r=v(t,["clientContent"]);r!=null&&w(e,["clientContent"],KH(r));const s=v(t,["musicGenerationConfig"]);s!=null&&w(e,["musicGenerationConfig"],GH(s));const a=v(t,["playbackControl"]);return a!=null&&w(e,["playbackControl"],a),e}function w1e(t){const e={},n=v(t,["voiceName"]);return n!=null&&w(e,["voiceName"],n),e}function b1e(t){const e={},n=v(t,["prebuiltVoiceConfig"]);return n!=null&&w(e,["prebuiltVoiceConfig"],w1e(n)),e}function C1e(t){const e={},n=v(t,["voiceConfig"]);if(n!=null&&w(e,["voiceConfig"],b1e(n)),v(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=v(t,["languageCode"]);return r!=null&&w(e,["languageCode"],r),e}function E1e(t){const e={},n=v(t,["fps"]);n!=null&&w(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&w(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function _1e(t){const e={},n=v(t,["displayName"]);n!=null&&w(e,["displayName"],n);const r=v(t,["data"]);r!=null&&w(e,["data"],r);const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function S1e(t){const e={},n=v(t,["displayName"]);n!=null&&w(e,["displayName"],n);const r=v(t,["fileUri"]);r!=null&&w(e,["fileUri"],r);const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function T1e(t){const e={},n=v(t,["videoMetadata"]);n!=null&&w(e,["videoMetadata"],E1e(n));const r=v(t,["thought"]);r!=null&&w(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],_1e(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],S1e(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&w(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function N1e(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>T1e(a))),w(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&w(e,["role"],r),e}function B1e(t){const e={};if(v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=v(t,["description"]);n!=null&&w(e,["description"],n);const r=v(t,["name"]);r!=null&&w(e,["name"],r);const s=v(t,["parameters"]);s!=null&&w(e,["parameters"],s);const a=v(t,["parametersJsonSchema"]);a!=null&&w(e,["parametersJsonSchema"],a);const i=v(t,["response"]);i!=null&&w(e,["response"],i);const o=v(t,["responseJsonSchema"]);return o!=null&&w(e,["responseJsonSchema"],o),e}function k1e(t){const e={},n=v(t,["startTime"]);n!=null&&w(e,["startTime"],n);const r=v(t,["endTime"]);return r!=null&&w(e,["endTime"],r),e}function I1e(t){const e={},n=v(t,["timeRangeFilter"]);return n!=null&&w(e,["timeRangeFilter"],k1e(n)),e}function F1e(t){const e={},n=v(t,["mode"]);n!=null&&w(e,["mode"],n);const r=v(t,["dynamicThreshold"]);return r!=null&&w(e,["dynamicThreshold"],r),e}function D1e(t){const e={},n=v(t,["dynamicRetrievalConfig"]);return n!=null&&w(e,["dynamicRetrievalConfig"],F1e(n)),e}function R1e(){return{}}function L1e(t){const e={},n=v(t,["apiKeyString"]);return n!=null&&w(e,["apiKeyString"],n),e}function U1e(t){const e={},n=v(t,["apiKeyConfig"]);n!=null&&w(e,["apiKeyConfig"],L1e(n));const r=v(t,["authType"]);r!=null&&w(e,["authType"],r);const s=v(t,["googleServiceAccountConfig"]);s!=null&&w(e,["googleServiceAccountConfig"],s);const a=v(t,["httpBasicAuthConfig"]);a!=null&&w(e,["httpBasicAuthConfig"],a);const i=v(t,["oauthConfig"]);i!=null&&w(e,["oauthConfig"],i);const o=v(t,["oidcConfig"]);return o!=null&&w(e,["oidcConfig"],o),e}function M1e(t){const e={},n=v(t,["authConfig"]);return n!=null&&w(e,["authConfig"],U1e(n)),e}function P1e(){return{}}function O1e(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>B1e(m))),w(e,["functionDeclarations"],h)}const r=v(t,["retrieval"]);r!=null&&w(e,["retrieval"],r);const s=v(t,["googleSearch"]);s!=null&&w(e,["googleSearch"],I1e(s));const a=v(t,["googleSearchRetrieval"]);a!=null&&w(e,["googleSearchRetrieval"],D1e(a)),v(t,["enterpriseWebSearch"])!=null&&w(e,["enterpriseWebSearch"],R1e());const o=v(t,["googleMaps"]);o!=null&&w(e,["googleMaps"],M1e(o)),v(t,["urlContext"])!=null&&w(e,["urlContext"],P1e());const u=v(t,["codeExecution"]);u!=null&&w(e,["codeExecution"],u);const d=v(t,["computerUse"]);return d!=null&&w(e,["computerUse"],d),e}function j1e(t){const e={},n=v(t,["handle"]);n!=null&&w(e,["handle"],n);const r=v(t,["transparent"]);return r!=null&&w(e,["transparent"],r),e}function EL(){return{}}function Q1e(t){const e={},n=v(t,["disabled"]);n!=null&&w(e,["disabled"],n);const r=v(t,["startOfSpeechSensitivity"]);r!=null&&w(e,["startOfSpeechSensitivity"],r);const s=v(t,["endOfSpeechSensitivity"]);s!=null&&w(e,["endOfSpeechSensitivity"],s);const a=v(t,["prefixPaddingMs"]);a!=null&&w(e,["prefixPaddingMs"],a);const i=v(t,["silenceDurationMs"]);return i!=null&&w(e,["silenceDurationMs"],i),e}function H1e(t){const e={},n=v(t,["automaticActivityDetection"]);n!=null&&w(e,["automaticActivityDetection"],Q1e(n));const r=v(t,["activityHandling"]);r!=null&&w(e,["activityHandling"],r);const s=v(t,["turnCoverage"]);return s!=null&&w(e,["turnCoverage"],s),e}function V1e(t){const e={},n=v(t,["targetTokens"]);return n!=null&&w(e,["targetTokens"],n),e}function z1e(t){const e={},n=v(t,["triggerTokens"]);n!=null&&w(e,["triggerTokens"],n);const r=v(t,["slidingWindow"]);return r!=null&&w(e,["slidingWindow"],V1e(r)),e}function G1e(t){const e={},n=v(t,["proactiveAudio"]);return n!=null&&w(e,["proactiveAudio"],n),e}function q1e(t,e){const n={},r=v(t,["generationConfig"]);e!==void 0&&r!=null&&w(e,["setup","generationConfig"],r);const s=v(t,["responseModalities"]);e!==void 0&&s!=null&&w(e,["setup","generationConfig","responseModalities"],s);const a=v(t,["temperature"]);e!==void 0&&a!=null&&w(e,["setup","generationConfig","temperature"],a);const i=v(t,["topP"]);e!==void 0&&i!=null&&w(e,["setup","generationConfig","topP"],i);const o=v(t,["topK"]);e!==void 0&&o!=null&&w(e,["setup","generationConfig","topK"],o);const l=v(t,["maxOutputTokens"]);e!==void 0&&l!=null&&w(e,["setup","generationConfig","maxOutputTokens"],l);const u=v(t,["mediaResolution"]);e!==void 0&&u!=null&&w(e,["setup","generationConfig","mediaResolution"],u);const d=v(t,["seed"]);e!==void 0&&d!=null&&w(e,["setup","generationConfig","seed"],d);const h=v(t,["speechConfig"]);e!==void 0&&h!=null&&w(e,["setup","generationConfig","speechConfig"],C1e(EB(h)));const m=v(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&w(e,["setup","generationConfig","enableAffectiveDialog"],m);const p=v(t,["systemInstruction"]);e!==void 0&&p!=null&&w(e,["setup","systemInstruction"],N1e(to(p)));const y=v(t,["tools"]);if(e!==void 0&&y!=null){let U=Op(y);Array.isArray(U)&&(U=U.map(R=>O1e(Pp(R)))),w(e,["setup","tools"],U)}const x=v(t,["sessionResumption"]);e!==void 0&&x!=null&&w(e,["setup","sessionResumption"],j1e(x));const C=v(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&w(e,["setup","inputAudioTranscription"],EL());const S=v(t,["outputAudioTranscription"]);e!==void 0&&S!=null&&w(e,["setup","outputAudioTranscription"],EL());const k=v(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&w(e,["setup","realtimeInputConfig"],H1e(k));const I=v(t,["contextWindowCompression"]);e!==void 0&&I!=null&&w(e,["setup","contextWindowCompression"],z1e(I));const F=v(t,["proactivity"]);return e!==void 0&&F!=null&&w(e,["setup","proactivity"],G1e(F)),n}function K1e(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["setup","model"],ns(t,r));const s=v(e,["config"]);return s!=null&&w(n,["config"],q1e(s,n)),n}function $1e(){return{}}function W1e(){return{}}function Y1e(t){const e={},n=v(t,["media"]);n!=null&&w(e,["mediaChunks"],TH(n));const r=v(t,["audio"]);r!=null&&w(e,["audio"],BH(r));const s=v(t,["audioStreamEnd"]);s!=null&&w(e,["audioStreamEnd"],s);const a=v(t,["video"]);a!=null&&w(e,["video"],NH(a));const i=v(t,["text"]);return i!=null&&w(e,["text"],i),v(t,["activityStart"])!=null&&w(e,["activityStart"],$1e()),v(t,["activityEnd"])!=null&&w(e,["activityEnd"],W1e()),e}function X1e(){return{}}function J1e(t){const e={},n=v(t,["fps"]);n!=null&&w(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&w(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function Z1e(t){const e={},n=v(t,["data"]);n!=null&&w(e,["data"],n);const r=v(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function eye(t){const e={},n=v(t,["fileUri"]);n!=null&&w(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function tye(t){const e={},n=v(t,["videoMetadata"]);n!=null&&w(e,["videoMetadata"],J1e(n));const r=v(t,["thought"]);r!=null&&w(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],Z1e(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],eye(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&w(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function nye(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>tye(a))),w(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&w(e,["role"],r),e}function _L(t){const e={},n=v(t,["text"]);n!=null&&w(e,["text"],n);const r=v(t,["finished"]);return r!=null&&w(e,["finished"],r),e}function rye(t){const e={},n=v(t,["retrievedUrl"]);n!=null&&w(e,["retrievedUrl"],n);const r=v(t,["urlRetrievalStatus"]);return r!=null&&w(e,["urlRetrievalStatus"],r),e}function sye(t){const e={},n=v(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>rye(s))),w(e,["urlMetadata"],r)}return e}function aye(t){const e={},n=v(t,["modelTurn"]);n!=null&&w(e,["modelTurn"],nye(n));const r=v(t,["turnComplete"]);r!=null&&w(e,["turnComplete"],r);const s=v(t,["interrupted"]);s!=null&&w(e,["interrupted"],s);const a=v(t,["groundingMetadata"]);a!=null&&w(e,["groundingMetadata"],a);const i=v(t,["generationComplete"]);i!=null&&w(e,["generationComplete"],i);const o=v(t,["inputTranscription"]);o!=null&&w(e,["inputTranscription"],_L(o));const l=v(t,["outputTranscription"]);l!=null&&w(e,["outputTranscription"],_L(l));const u=v(t,["urlContextMetadata"]);return u!=null&&w(e,["urlContextMetadata"],sye(u)),e}function iye(t){const e={},n=v(t,["id"]);n!=null&&w(e,["id"],n);const r=v(t,["args"]);r!=null&&w(e,["args"],r);const s=v(t,["name"]);return s!=null&&w(e,["name"],s),e}function oye(t){const e={},n=v(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>iye(s))),w(e,["functionCalls"],r)}return e}function lye(t){const e={},n=v(t,["ids"]);return n!=null&&w(e,["ids"],n),e}function Fy(t){const e={},n=v(t,["modality"]);n!=null&&w(e,["modality"],n);const r=v(t,["tokenCount"]);return r!=null&&w(e,["tokenCount"],r),e}function cye(t){const e={},n=v(t,["promptTokenCount"]);n!=null&&w(e,["promptTokenCount"],n);const r=v(t,["cachedContentTokenCount"]);r!=null&&w(e,["cachedContentTokenCount"],r);const s=v(t,["responseTokenCount"]);s!=null&&w(e,["responseTokenCount"],s);const a=v(t,["toolUsePromptTokenCount"]);a!=null&&w(e,["toolUsePromptTokenCount"],a);const i=v(t,["thoughtsTokenCount"]);i!=null&&w(e,["thoughtsTokenCount"],i);const o=v(t,["totalTokenCount"]);o!=null&&w(e,["totalTokenCount"],o);const l=v(t,["promptTokensDetails"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(p=>Fy(p))),w(e,["promptTokensDetails"],m)}const u=v(t,["cacheTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(p=>Fy(p))),w(e,["cacheTokensDetails"],m)}const d=v(t,["responseTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(p=>Fy(p))),w(e,["responseTokensDetails"],m)}const h=v(t,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(p=>Fy(p))),w(e,["toolUsePromptTokensDetails"],m)}return e}function uye(t){const e={},n=v(t,["timeLeft"]);return n!=null&&w(e,["timeLeft"],n),e}function Aye(t){const e={},n=v(t,["newHandle"]);n!=null&&w(e,["newHandle"],n);const r=v(t,["resumable"]);r!=null&&w(e,["resumable"],r);const s=v(t,["lastConsumedClientMessageIndex"]);return s!=null&&w(e,["lastConsumedClientMessageIndex"],s),e}function dye(t){const e={};v(t,["setupComplete"])!=null&&w(e,["setupComplete"],X1e());const r=v(t,["serverContent"]);r!=null&&w(e,["serverContent"],aye(r));const s=v(t,["toolCall"]);s!=null&&w(e,["toolCall"],oye(s));const a=v(t,["toolCallCancellation"]);a!=null&&w(e,["toolCallCancellation"],lye(a));const i=v(t,["usageMetadata"]);i!=null&&w(e,["usageMetadata"],cye(i));const o=v(t,["goAway"]);o!=null&&w(e,["goAway"],uye(o));const l=v(t,["sessionResumptionUpdate"]);return l!=null&&w(e,["sessionResumptionUpdate"],Aye(l)),e}function fye(){return{}}function hye(t){const e={},n=v(t,["text"]);n!=null&&w(e,["text"],n);const r=v(t,["weight"]);return r!=null&&w(e,["weight"],r),e}function mye(t){const e={},n=v(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>hye(s))),w(e,["weightedPrompts"],r)}return e}function pye(t){const e={},n=v(t,["temperature"]);n!=null&&w(e,["temperature"],n);const r=v(t,["topK"]);r!=null&&w(e,["topK"],r);const s=v(t,["seed"]);s!=null&&w(e,["seed"],s);const a=v(t,["guidance"]);a!=null&&w(e,["guidance"],a);const i=v(t,["bpm"]);i!=null&&w(e,["bpm"],i);const o=v(t,["density"]);o!=null&&w(e,["density"],o);const l=v(t,["brightness"]);l!=null&&w(e,["brightness"],l);const u=v(t,["scale"]);u!=null&&w(e,["scale"],u);const d=v(t,["muteBass"]);d!=null&&w(e,["muteBass"],d);const h=v(t,["muteDrums"]);h!=null&&w(e,["muteDrums"],h);const m=v(t,["onlyBassAndDrums"]);return m!=null&&w(e,["onlyBassAndDrums"],m),e}function gye(t){const e={},n=v(t,["clientContent"]);n!=null&&w(e,["clientContent"],mye(n));const r=v(t,["musicGenerationConfig"]);return r!=null&&w(e,["musicGenerationConfig"],pye(r)),e}function xye(t){const e={},n=v(t,["data"]);n!=null&&w(e,["data"],n);const r=v(t,["mimeType"]);r!=null&&w(e,["mimeType"],r);const s=v(t,["sourceMetadata"]);return s!=null&&w(e,["sourceMetadata"],gye(s)),e}function vye(t){const e={},n=v(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>xye(s))),w(e,["audioChunks"],r)}return e}function yye(t){const e={},n=v(t,["text"]);n!=null&&w(e,["text"],n);const r=v(t,["filteredReason"]);return r!=null&&w(e,["filteredReason"],r),e}function wye(t){const e={};v(t,["setupComplete"])!=null&&w(e,["setupComplete"],fye());const r=v(t,["serverContent"]);r!=null&&w(e,["serverContent"],vye(r));const s=v(t,["filteredPrompt"]);return s!=null&&w(e,["filteredPrompt"],yye(s)),e}function bye(t){const e={},n=v(t,["sessionId"]);return n!=null&&w(e,["sessionId"],n),e}function Cye(t){const e={},n=v(t,["fps"]);n!=null&&w(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&w(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function Eye(t){const e={},n=v(t,["displayName"]);n!=null&&w(e,["displayName"],n);const r=v(t,["data"]);r!=null&&w(e,["data"],r);const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function _ye(t){const e={},n=v(t,["displayName"]);n!=null&&w(e,["displayName"],n);const r=v(t,["fileUri"]);r!=null&&w(e,["fileUri"],r);const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function Sye(t){const e={},n=v(t,["videoMetadata"]);n!=null&&w(e,["videoMetadata"],Cye(n));const r=v(t,["thought"]);r!=null&&w(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],Eye(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],_ye(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&w(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function Tye(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Sye(a))),w(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&w(e,["role"],r),e}function SL(t){const e={},n=v(t,["text"]);n!=null&&w(e,["text"],n);const r=v(t,["finished"]);return r!=null&&w(e,["finished"],r),e}function Nye(t){const e={},n=v(t,["modelTurn"]);n!=null&&w(e,["modelTurn"],Tye(n));const r=v(t,["turnComplete"]);r!=null&&w(e,["turnComplete"],r);const s=v(t,["interrupted"]);s!=null&&w(e,["interrupted"],s);const a=v(t,["groundingMetadata"]);a!=null&&w(e,["groundingMetadata"],a);const i=v(t,["generationComplete"]);i!=null&&w(e,["generationComplete"],i);const o=v(t,["inputTranscription"]);o!=null&&w(e,["inputTranscription"],SL(o));const l=v(t,["outputTranscription"]);return l!=null&&w(e,["outputTranscription"],SL(l)),e}function Bye(t){const e={},n=v(t,["args"]);n!=null&&w(e,["args"],n);const r=v(t,["name"]);return r!=null&&w(e,["name"],r),e}function kye(t){const e={},n=v(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Bye(s))),w(e,["functionCalls"],r)}return e}function Iye(t){const e={},n=v(t,["ids"]);return n!=null&&w(e,["ids"],n),e}function Dy(t){const e={},n=v(t,["modality"]);n!=null&&w(e,["modality"],n);const r=v(t,["tokenCount"]);return r!=null&&w(e,["tokenCount"],r),e}function Fye(t){const e={},n=v(t,["promptTokenCount"]);n!=null&&w(e,["promptTokenCount"],n);const r=v(t,["cachedContentTokenCount"]);r!=null&&w(e,["cachedContentTokenCount"],r);const s=v(t,["candidatesTokenCount"]);s!=null&&w(e,["responseTokenCount"],s);const a=v(t,["toolUsePromptTokenCount"]);a!=null&&w(e,["toolUsePromptTokenCount"],a);const i=v(t,["thoughtsTokenCount"]);i!=null&&w(e,["thoughtsTokenCount"],i);const o=v(t,["totalTokenCount"]);o!=null&&w(e,["totalTokenCount"],o);const l=v(t,["promptTokensDetails"]);if(l!=null){let p=l;Array.isArray(p)&&(p=p.map(y=>Dy(y))),w(e,["promptTokensDetails"],p)}const u=v(t,["cacheTokensDetails"]);if(u!=null){let p=u;Array.isArray(p)&&(p=p.map(y=>Dy(y))),w(e,["cacheTokensDetails"],p)}const d=v(t,["candidatesTokensDetails"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(y=>Dy(y))),w(e,["responseTokensDetails"],p)}const h=v(t,["toolUsePromptTokensDetails"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(y=>Dy(y))),w(e,["toolUsePromptTokensDetails"],p)}const m=v(t,["trafficType"]);return m!=null&&w(e,["trafficType"],m),e}function Dye(t){const e={},n=v(t,["timeLeft"]);return n!=null&&w(e,["timeLeft"],n),e}function Rye(t){const e={},n=v(t,["newHandle"]);n!=null&&w(e,["newHandle"],n);const r=v(t,["resumable"]);r!=null&&w(e,["resumable"],r);const s=v(t,["lastConsumedClientMessageIndex"]);return s!=null&&w(e,["lastConsumedClientMessageIndex"],s),e}function Lye(t){const e={},n=v(t,["setupComplete"]);n!=null&&w(e,["setupComplete"],bye(n));const r=v(t,["serverContent"]);r!=null&&w(e,["serverContent"],Nye(r));const s=v(t,["toolCall"]);s!=null&&w(e,["toolCall"],kye(s));const a=v(t,["toolCallCancellation"]);a!=null&&w(e,["toolCallCancellation"],Iye(a));const i=v(t,["usageMetadata"]);i!=null&&w(e,["usageMetadata"],Fye(i));const o=v(t,["goAway"]);o!=null&&w(e,["goAway"],Dye(o));const l=v(t,["sessionResumptionUpdate"]);return l!=null&&w(e,["sessionResumptionUpdate"],Rye(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uye(t){const e={},n=v(t,["fps"]);n!=null&&w(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&w(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function Mye(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["data"]);n!=null&&w(e,["data"],n);const r=v(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function Pye(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&w(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function Oye(t){const e={},n=v(t,["videoMetadata"]);n!=null&&w(e,["videoMetadata"],Uye(n));const r=v(t,["thought"]);r!=null&&w(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],Mye(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],Pye(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&w(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function bC(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Oye(a))),w(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&w(e,["role"],r),e}function jye(t){const e={},n=v(t,["anyOf"]);n!=null&&w(e,["anyOf"],n);const r=v(t,["default"]);r!=null&&w(e,["default"],r);const s=v(t,["description"]);s!=null&&w(e,["description"],s);const a=v(t,["enum"]);a!=null&&w(e,["enum"],a);const i=v(t,["example"]);i!=null&&w(e,["example"],i);const o=v(t,["format"]);o!=null&&w(e,["format"],o);const l=v(t,["items"]);l!=null&&w(e,["items"],l);const u=v(t,["maxItems"]);u!=null&&w(e,["maxItems"],u);const d=v(t,["maxLength"]);d!=null&&w(e,["maxLength"],d);const h=v(t,["maxProperties"]);h!=null&&w(e,["maxProperties"],h);const m=v(t,["maximum"]);m!=null&&w(e,["maximum"],m);const p=v(t,["minItems"]);p!=null&&w(e,["minItems"],p);const y=v(t,["minLength"]);y!=null&&w(e,["minLength"],y);const x=v(t,["minProperties"]);x!=null&&w(e,["minProperties"],x);const C=v(t,["minimum"]);C!=null&&w(e,["minimum"],C);const S=v(t,["nullable"]);S!=null&&w(e,["nullable"],S);const k=v(t,["pattern"]);k!=null&&w(e,["pattern"],k);const I=v(t,["properties"]);I!=null&&w(e,["properties"],I);const F=v(t,["propertyOrdering"]);F!=null&&w(e,["propertyOrdering"],F);const U=v(t,["required"]);U!=null&&w(e,["required"],U);const R=v(t,["title"]);R!=null&&w(e,["title"],R);const E=v(t,["type"]);return E!=null&&w(e,["type"],E),e}function Qye(t){const e={};if(v(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=v(t,["category"]);n!=null&&w(e,["category"],n);const r=v(t,["threshold"]);return r!=null&&w(e,["threshold"],r),e}function Hye(t){const e={},n=v(t,["behavior"]);n!=null&&w(e,["behavior"],n);const r=v(t,["description"]);r!=null&&w(e,["description"],r);const s=v(t,["name"]);s!=null&&w(e,["name"],s);const a=v(t,["parameters"]);a!=null&&w(e,["parameters"],a);const i=v(t,["parametersJsonSchema"]);i!=null&&w(e,["parametersJsonSchema"],i);const o=v(t,["response"]);o!=null&&w(e,["response"],o);const l=v(t,["responseJsonSchema"]);return l!=null&&w(e,["responseJsonSchema"],l),e}function Vye(t){const e={},n=v(t,["startTime"]);n!=null&&w(e,["startTime"],n);const r=v(t,["endTime"]);return r!=null&&w(e,["endTime"],r),e}function zye(t){const e={},n=v(t,["timeRangeFilter"]);return n!=null&&w(e,["timeRangeFilter"],Vye(n)),e}function Gye(t){const e={},n=v(t,["mode"]);n!=null&&w(e,["mode"],n);const r=v(t,["dynamicThreshold"]);return r!=null&&w(e,["dynamicThreshold"],r),e}function qye(t){const e={},n=v(t,["dynamicRetrievalConfig"]);return n!=null&&w(e,["dynamicRetrievalConfig"],Gye(n)),e}function Kye(){return{}}function $ye(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Hye(u))),w(e,["functionDeclarations"],l)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=v(t,["googleSearch"]);r!=null&&w(e,["googleSearch"],zye(r));const s=v(t,["googleSearchRetrieval"]);if(s!=null&&w(e,["googleSearchRetrieval"],qye(s)),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(v(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");v(t,["urlContext"])!=null&&w(e,["urlContext"],Kye());const i=v(t,["codeExecution"]);i!=null&&w(e,["codeExecution"],i);const o=v(t,["computerUse"]);return o!=null&&w(e,["computerUse"],o),e}function Wye(t){const e={},n=v(t,["mode"]);n!=null&&w(e,["mode"],n);const r=v(t,["allowedFunctionNames"]);return r!=null&&w(e,["allowedFunctionNames"],r),e}function Yye(t){const e={},n=v(t,["latitude"]);n!=null&&w(e,["latitude"],n);const r=v(t,["longitude"]);return r!=null&&w(e,["longitude"],r),e}function Xye(t){const e={},n=v(t,["latLng"]);n!=null&&w(e,["latLng"],Yye(n));const r=v(t,["languageCode"]);return r!=null&&w(e,["languageCode"],r),e}function Jye(t){const e={},n=v(t,["functionCallingConfig"]);n!=null&&w(e,["functionCallingConfig"],Wye(n));const r=v(t,["retrievalConfig"]);return r!=null&&w(e,["retrievalConfig"],Xye(r)),e}function Zye(t){const e={},n=v(t,["voiceName"]);return n!=null&&w(e,["voiceName"],n),e}function $H(t){const e={},n=v(t,["prebuiltVoiceConfig"]);return n!=null&&w(e,["prebuiltVoiceConfig"],Zye(n)),e}function e2e(t){const e={},n=v(t,["speaker"]);n!=null&&w(e,["speaker"],n);const r=v(t,["voiceConfig"]);return r!=null&&w(e,["voiceConfig"],$H(r)),e}function t2e(t){const e={},n=v(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>e2e(s))),w(e,["speakerVoiceConfigs"],r)}return e}function n2e(t){const e={},n=v(t,["voiceConfig"]);n!=null&&w(e,["voiceConfig"],$H(n));const r=v(t,["multiSpeakerVoiceConfig"]);r!=null&&w(e,["multiSpeakerVoiceConfig"],t2e(r));const s=v(t,["languageCode"]);return s!=null&&w(e,["languageCode"],s),e}function r2e(t){const e={},n=v(t,["includeThoughts"]);n!=null&&w(e,["includeThoughts"],n);const r=v(t,["thinkingBudget"]);return r!=null&&w(e,["thinkingBudget"],r),e}function s2e(t,e,n){const r={},s=v(e,["systemInstruction"]);n!==void 0&&s!=null&&w(n,["systemInstruction"],bC(to(s)));const a=v(e,["temperature"]);a!=null&&w(r,["temperature"],a);const i=v(e,["topP"]);i!=null&&w(r,["topP"],i);const o=v(e,["topK"]);o!=null&&w(r,["topK"],o);const l=v(e,["candidateCount"]);l!=null&&w(r,["candidateCount"],l);const u=v(e,["maxOutputTokens"]);u!=null&&w(r,["maxOutputTokens"],u);const d=v(e,["stopSequences"]);d!=null&&w(r,["stopSequences"],d);const h=v(e,["responseLogprobs"]);h!=null&&w(r,["responseLogprobs"],h);const m=v(e,["logprobs"]);m!=null&&w(r,["logprobs"],m);const p=v(e,["presencePenalty"]);p!=null&&w(r,["presencePenalty"],p);const y=v(e,["frequencyPenalty"]);y!=null&&w(r,["frequencyPenalty"],y);const x=v(e,["seed"]);x!=null&&w(r,["seed"],x);const C=v(e,["responseMimeType"]);C!=null&&w(r,["responseMimeType"],C);const S=v(e,["responseSchema"]);S!=null&&w(r,["responseSchema"],jye(bB(S)));const k=v(e,["responseJsonSchema"]);if(k!=null&&w(r,["responseJsonSchema"],k),v(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(v(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=v(e,["safetySettings"]);if(n!==void 0&&I!=null){let D=I;Array.isArray(D)&&(D=D.map(L=>Qye(L))),w(n,["safetySettings"],D)}const F=v(e,["tools"]);if(n!==void 0&&F!=null){let D=Op(F);Array.isArray(D)&&(D=D.map(L=>$ye(Pp(L)))),w(n,["tools"],D)}const U=v(e,["toolConfig"]);if(n!==void 0&&U!=null&&w(n,["toolConfig"],Jye(U)),v(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=v(e,["cachedContent"]);n!==void 0&&R!=null&&w(n,["cachedContent"],Ad(t,R));const E=v(e,["responseModalities"]);E!=null&&w(r,["responseModalities"],E);const _=v(e,["mediaResolution"]);_!=null&&w(r,["mediaResolution"],_);const B=v(e,["speechConfig"]);if(B!=null&&w(r,["speechConfig"],n2e(CB(B))),v(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const j=v(e,["thinkingConfig"]);return j!=null&&w(r,["thinkingConfig"],r2e(j)),r}function TL(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["_url","model"],ns(t,r));const s=v(e,["contents"]);if(s!=null){let i=cc(s);Array.isArray(i)&&(i=i.map(o=>bC(o))),w(n,["contents"],i)}const a=v(e,["config"]);return a!=null&&w(n,["generationConfig"],s2e(t,a,n)),n}function a2e(t,e){const n={},r=v(t,["taskType"]);e!==void 0&&r!=null&&w(e,["requests[]","taskType"],r);const s=v(t,["title"]);e!==void 0&&s!=null&&w(e,["requests[]","title"],s);const a=v(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&w(e,["requests[]","outputDimensionality"],a),v(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(v(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function i2e(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["_url","model"],ns(t,r));const s=v(e,["contents"]);s!=null&&w(n,["requests[]","content"],IH(t,s));const a=v(e,["config"]);a!=null&&w(n,["config"],a2e(a,n));const i=v(e,["model"]);return i!==void 0&&w(n,["requests[]","model"],ns(t,i)),n}function o2e(t,e){const n={};if(v(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(v(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=v(t,["numberOfImages"]);e!==void 0&&r!=null&&w(e,["parameters","sampleCount"],r);const s=v(t,["aspectRatio"]);e!==void 0&&s!=null&&w(e,["parameters","aspectRatio"],s);const a=v(t,["guidanceScale"]);if(e!==void 0&&a!=null&&w(e,["parameters","guidanceScale"],a),v(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=v(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&w(e,["parameters","safetySetting"],i);const o=v(t,["personGeneration"]);e!==void 0&&o!=null&&w(e,["parameters","personGeneration"],o);const l=v(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&w(e,["parameters","includeSafetyAttributes"],l);const u=v(t,["includeRaiReason"]);e!==void 0&&u!=null&&w(e,["parameters","includeRaiReason"],u);const d=v(t,["language"]);e!==void 0&&d!=null&&w(e,["parameters","language"],d);const h=v(t,["outputMimeType"]);e!==void 0&&h!=null&&w(e,["parameters","outputOptions","mimeType"],h);const m=v(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&w(e,["parameters","outputOptions","compressionQuality"],m),v(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(v(t,["imageSize"])!==void 0)throw new Error("imageSize parameter is not supported in Gemini API.");if(v(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function l2e(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["_url","model"],ns(t,r));const s=v(e,["prompt"]);s!=null&&w(n,["instances[0]","prompt"],s);const a=v(e,["config"]);return a!=null&&w(n,["config"],o2e(a,n)),n}function c2e(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["_url","name"],ns(t,r));const s=v(e,["config"]);return s!=null&&w(n,["config"],s),n}function u2e(t,e,n){const r={},s=v(e,["pageSize"]);n!==void 0&&s!=null&&w(n,["_query","pageSize"],s);const a=v(e,["pageToken"]);n!==void 0&&a!=null&&w(n,["_query","pageToken"],a);const i=v(e,["filter"]);n!==void 0&&i!=null&&w(n,["_query","filter"],i);const o=v(e,["queryBase"]);return n!==void 0&&o!=null&&w(n,["_url","models_url"],RH(t,o)),r}function A2e(t,e){const n={},r=v(e,["config"]);return r!=null&&w(n,["config"],u2e(t,r,n)),n}function d2e(t,e){const n={},r=v(t,["displayName"]);e!==void 0&&r!=null&&w(e,["displayName"],r);const s=v(t,["description"]);e!==void 0&&s!=null&&w(e,["description"],s);const a=v(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&w(e,["defaultCheckpointId"],a),n}function f2e(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["_url","name"],ns(t,r));const s=v(e,["config"]);return s!=null&&w(n,["config"],d2e(s,n)),n}function h2e(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["_url","name"],ns(t,r));const s=v(e,["config"]);return s!=null&&w(n,["config"],s),n}function m2e(t){const e={};if(v(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(v(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(v(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function p2e(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["_url","model"],ns(t,r));const s=v(e,["contents"]);if(s!=null){let i=cc(s);Array.isArray(i)&&(i=i.map(o=>bC(o))),w(n,["contents"],i)}const a=v(e,["config"]);return a!=null&&w(n,["config"],m2e(a)),n}function g2e(t){const e={};if(v(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=v(t,["imageBytes"]);n!=null&&w(e,["bytesBase64Encoded"],C0(n));const r=v(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function x2e(t,e){const n={},r=v(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&w(e,["parameters","sampleCount"],r),v(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(v(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=v(t,["durationSeconds"]);if(e!==void 0&&s!=null&&w(e,["parameters","durationSeconds"],s),v(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=v(t,["aspectRatio"]);if(e!==void 0&&a!=null&&w(e,["parameters","aspectRatio"],a),v(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const i=v(t,["personGeneration"]);if(e!==void 0&&i!=null&&w(e,["parameters","personGeneration"],i),v(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const o=v(t,["negativePrompt"]);e!==void 0&&o!=null&&w(e,["parameters","negativePrompt"],o);const l=v(t,["enhancePrompt"]);if(e!==void 0&&l!=null&&w(e,["parameters","enhancePrompt"],l),v(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(v(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(v(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function v2e(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["_url","model"],ns(t,r));const s=v(e,["prompt"]);s!=null&&w(n,["instances[0]","prompt"],s);const a=v(e,["image"]);if(a!=null&&w(n,["instances[0]","image"],g2e(a)),v(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const i=v(e,["config"]);return i!=null&&w(n,["config"],x2e(i,n)),n}function y2e(t){const e={},n=v(t,["fps"]);n!=null&&w(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&w(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function w2e(t){const e={},n=v(t,["displayName"]);n!=null&&w(e,["displayName"],n);const r=v(t,["data"]);r!=null&&w(e,["data"],r);const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function b2e(t){const e={},n=v(t,["displayName"]);n!=null&&w(e,["displayName"],n);const r=v(t,["fileUri"]);r!=null&&w(e,["fileUri"],r);const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function C2e(t){const e={},n=v(t,["videoMetadata"]);n!=null&&w(e,["videoMetadata"],y2e(n));const r=v(t,["thought"]);r!=null&&w(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],w2e(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],b2e(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&w(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function Qp(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>C2e(a))),w(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&w(e,["role"],r),e}function E2e(t){const e={},n=v(t,["anyOf"]);n!=null&&w(e,["anyOf"],n);const r=v(t,["default"]);r!=null&&w(e,["default"],r);const s=v(t,["description"]);s!=null&&w(e,["description"],s);const a=v(t,["enum"]);a!=null&&w(e,["enum"],a);const i=v(t,["example"]);i!=null&&w(e,["example"],i);const o=v(t,["format"]);o!=null&&w(e,["format"],o);const l=v(t,["items"]);l!=null&&w(e,["items"],l);const u=v(t,["maxItems"]);u!=null&&w(e,["maxItems"],u);const d=v(t,["maxLength"]);d!=null&&w(e,["maxLength"],d);const h=v(t,["maxProperties"]);h!=null&&w(e,["maxProperties"],h);const m=v(t,["maximum"]);m!=null&&w(e,["maximum"],m);const p=v(t,["minItems"]);p!=null&&w(e,["minItems"],p);const y=v(t,["minLength"]);y!=null&&w(e,["minLength"],y);const x=v(t,["minProperties"]);x!=null&&w(e,["minProperties"],x);const C=v(t,["minimum"]);C!=null&&w(e,["minimum"],C);const S=v(t,["nullable"]);S!=null&&w(e,["nullable"],S);const k=v(t,["pattern"]);k!=null&&w(e,["pattern"],k);const I=v(t,["properties"]);I!=null&&w(e,["properties"],I);const F=v(t,["propertyOrdering"]);F!=null&&w(e,["propertyOrdering"],F);const U=v(t,["required"]);U!=null&&w(e,["required"],U);const R=v(t,["title"]);R!=null&&w(e,["title"],R);const E=v(t,["type"]);return E!=null&&w(e,["type"],E),e}function _2e(t){const e={},n=v(t,["featureSelectionPreference"]);return n!=null&&w(e,["featureSelectionPreference"],n),e}function S2e(t){const e={},n=v(t,["method"]);n!=null&&w(e,["method"],n);const r=v(t,["category"]);r!=null&&w(e,["category"],r);const s=v(t,["threshold"]);return s!=null&&w(e,["threshold"],s),e}function T2e(t){const e={};if(v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=v(t,["description"]);n!=null&&w(e,["description"],n);const r=v(t,["name"]);r!=null&&w(e,["name"],r);const s=v(t,["parameters"]);s!=null&&w(e,["parameters"],s);const a=v(t,["parametersJsonSchema"]);a!=null&&w(e,["parametersJsonSchema"],a);const i=v(t,["response"]);i!=null&&w(e,["response"],i);const o=v(t,["responseJsonSchema"]);return o!=null&&w(e,["responseJsonSchema"],o),e}function N2e(t){const e={},n=v(t,["startTime"]);n!=null&&w(e,["startTime"],n);const r=v(t,["endTime"]);return r!=null&&w(e,["endTime"],r),e}function B2e(t){const e={},n=v(t,["timeRangeFilter"]);return n!=null&&w(e,["timeRangeFilter"],N2e(n)),e}function k2e(t){const e={},n=v(t,["mode"]);n!=null&&w(e,["mode"],n);const r=v(t,["dynamicThreshold"]);return r!=null&&w(e,["dynamicThreshold"],r),e}function I2e(t){const e={},n=v(t,["dynamicRetrievalConfig"]);return n!=null&&w(e,["dynamicRetrievalConfig"],k2e(n)),e}function F2e(){return{}}function D2e(t){const e={},n=v(t,["apiKeyString"]);return n!=null&&w(e,["apiKeyString"],n),e}function R2e(t){const e={},n=v(t,["apiKeyConfig"]);n!=null&&w(e,["apiKeyConfig"],D2e(n));const r=v(t,["authType"]);r!=null&&w(e,["authType"],r);const s=v(t,["googleServiceAccountConfig"]);s!=null&&w(e,["googleServiceAccountConfig"],s);const a=v(t,["httpBasicAuthConfig"]);a!=null&&w(e,["httpBasicAuthConfig"],a);const i=v(t,["oauthConfig"]);i!=null&&w(e,["oauthConfig"],i);const o=v(t,["oidcConfig"]);return o!=null&&w(e,["oidcConfig"],o),e}function L2e(t){const e={},n=v(t,["authConfig"]);return n!=null&&w(e,["authConfig"],R2e(n)),e}function U2e(){return{}}function WH(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>T2e(m))),w(e,["functionDeclarations"],h)}const r=v(t,["retrieval"]);r!=null&&w(e,["retrieval"],r);const s=v(t,["googleSearch"]);s!=null&&w(e,["googleSearch"],B2e(s));const a=v(t,["googleSearchRetrieval"]);a!=null&&w(e,["googleSearchRetrieval"],I2e(a)),v(t,["enterpriseWebSearch"])!=null&&w(e,["enterpriseWebSearch"],F2e());const o=v(t,["googleMaps"]);o!=null&&w(e,["googleMaps"],L2e(o)),v(t,["urlContext"])!=null&&w(e,["urlContext"],U2e());const u=v(t,["codeExecution"]);u!=null&&w(e,["codeExecution"],u);const d=v(t,["computerUse"]);return d!=null&&w(e,["computerUse"],d),e}function M2e(t){const e={},n=v(t,["mode"]);n!=null&&w(e,["mode"],n);const r=v(t,["allowedFunctionNames"]);return r!=null&&w(e,["allowedFunctionNames"],r),e}function P2e(t){const e={},n=v(t,["latitude"]);n!=null&&w(e,["latitude"],n);const r=v(t,["longitude"]);return r!=null&&w(e,["longitude"],r),e}function O2e(t){const e={},n=v(t,["latLng"]);n!=null&&w(e,["latLng"],P2e(n));const r=v(t,["languageCode"]);return r!=null&&w(e,["languageCode"],r),e}function j2e(t){const e={},n=v(t,["functionCallingConfig"]);n!=null&&w(e,["functionCallingConfig"],M2e(n));const r=v(t,["retrievalConfig"]);return r!=null&&w(e,["retrievalConfig"],O2e(r)),e}function Q2e(t){const e={},n=v(t,["voiceName"]);return n!=null&&w(e,["voiceName"],n),e}function H2e(t){const e={},n=v(t,["prebuiltVoiceConfig"]);return n!=null&&w(e,["prebuiltVoiceConfig"],Q2e(n)),e}function V2e(t){const e={},n=v(t,["voiceConfig"]);if(n!=null&&w(e,["voiceConfig"],H2e(n)),v(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=v(t,["languageCode"]);return r!=null&&w(e,["languageCode"],r),e}function z2e(t){const e={},n=v(t,["includeThoughts"]);n!=null&&w(e,["includeThoughts"],n);const r=v(t,["thinkingBudget"]);return r!=null&&w(e,["thinkingBudget"],r),e}function G2e(t,e,n){const r={},s=v(e,["systemInstruction"]);n!==void 0&&s!=null&&w(n,["systemInstruction"],Qp(to(s)));const a=v(e,["temperature"]);a!=null&&w(r,["temperature"],a);const i=v(e,["topP"]);i!=null&&w(r,["topP"],i);const o=v(e,["topK"]);o!=null&&w(r,["topK"],o);const l=v(e,["candidateCount"]);l!=null&&w(r,["candidateCount"],l);const u=v(e,["maxOutputTokens"]);u!=null&&w(r,["maxOutputTokens"],u);const d=v(e,["stopSequences"]);d!=null&&w(r,["stopSequences"],d);const h=v(e,["responseLogprobs"]);h!=null&&w(r,["responseLogprobs"],h);const m=v(e,["logprobs"]);m!=null&&w(r,["logprobs"],m);const p=v(e,["presencePenalty"]);p!=null&&w(r,["presencePenalty"],p);const y=v(e,["frequencyPenalty"]);y!=null&&w(r,["frequencyPenalty"],y);const x=v(e,["seed"]);x!=null&&w(r,["seed"],x);const C=v(e,["responseMimeType"]);C!=null&&w(r,["responseMimeType"],C);const S=v(e,["responseSchema"]);S!=null&&w(r,["responseSchema"],E2e(bB(S)));const k=v(e,["responseJsonSchema"]);k!=null&&w(r,["responseJsonSchema"],k);const I=v(e,["routingConfig"]);I!=null&&w(r,["routingConfig"],I);const F=v(e,["modelSelectionConfig"]);F!=null&&w(r,["modelConfig"],_2e(F));const U=v(e,["safetySettings"]);if(n!==void 0&&U!=null){let te=U;Array.isArray(te)&&(te=te.map(Y=>S2e(Y))),w(n,["safetySettings"],te)}const R=v(e,["tools"]);if(n!==void 0&&R!=null){let te=Op(R);Array.isArray(te)&&(te=te.map(Y=>WH(Pp(Y)))),w(n,["tools"],te)}const E=v(e,["toolConfig"]);n!==void 0&&E!=null&&w(n,["toolConfig"],j2e(E));const _=v(e,["labels"]);n!==void 0&&_!=null&&w(n,["labels"],_);const B=v(e,["cachedContent"]);n!==void 0&&B!=null&&w(n,["cachedContent"],Ad(t,B));const j=v(e,["responseModalities"]);j!=null&&w(r,["responseModalities"],j);const D=v(e,["mediaResolution"]);D!=null&&w(r,["mediaResolution"],D);const L=v(e,["speechConfig"]);L!=null&&w(r,["speechConfig"],V2e(CB(L)));const Q=v(e,["audioTimestamp"]);Q!=null&&w(r,["audioTimestamp"],Q);const H=v(e,["thinkingConfig"]);return H!=null&&w(r,["thinkingConfig"],z2e(H)),r}function NL(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["_url","model"],ns(t,r));const s=v(e,["contents"]);if(s!=null){let i=cc(s);Array.isArray(i)&&(i=i.map(o=>Qp(o))),w(n,["contents"],i)}const a=v(e,["config"]);return a!=null&&w(n,["generationConfig"],G2e(t,a,n)),n}function q2e(t,e){const n={},r=v(t,["taskType"]);e!==void 0&&r!=null&&w(e,["instances[]","task_type"],r);const s=v(t,["title"]);e!==void 0&&s!=null&&w(e,["instances[]","title"],s);const a=v(t,["outputDimensionality"]);e!==void 0&&a!=null&&w(e,["parameters","outputDimensionality"],a);const i=v(t,["mimeType"]);e!==void 0&&i!=null&&w(e,["instances[]","mimeType"],i);const o=v(t,["autoTruncate"]);return e!==void 0&&o!=null&&w(e,["parameters","autoTruncate"],o),n}function K2e(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["_url","model"],ns(t,r));const s=v(e,["contents"]);s!=null&&w(n,["instances[]","content"],IH(t,s));const a=v(e,["config"]);return a!=null&&w(n,["config"],q2e(a,n)),n}function $2e(t,e){const n={},r=v(t,["outputGcsUri"]);e!==void 0&&r!=null&&w(e,["parameters","storageUri"],r);const s=v(t,["negativePrompt"]);e!==void 0&&s!=null&&w(e,["parameters","negativePrompt"],s);const a=v(t,["numberOfImages"]);e!==void 0&&a!=null&&w(e,["parameters","sampleCount"],a);const i=v(t,["aspectRatio"]);e!==void 0&&i!=null&&w(e,["parameters","aspectRatio"],i);const o=v(t,["guidanceScale"]);e!==void 0&&o!=null&&w(e,["parameters","guidanceScale"],o);const l=v(t,["seed"]);e!==void 0&&l!=null&&w(e,["parameters","seed"],l);const u=v(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&w(e,["parameters","safetySetting"],u);const d=v(t,["personGeneration"]);e!==void 0&&d!=null&&w(e,["parameters","personGeneration"],d);const h=v(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&w(e,["parameters","includeSafetyAttributes"],h);const m=v(t,["includeRaiReason"]);e!==void 0&&m!=null&&w(e,["parameters","includeRaiReason"],m);const p=v(t,["language"]);e!==void 0&&p!=null&&w(e,["parameters","language"],p);const y=v(t,["outputMimeType"]);e!==void 0&&y!=null&&w(e,["parameters","outputOptions","mimeType"],y);const x=v(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&w(e,["parameters","outputOptions","compressionQuality"],x);const C=v(t,["addWatermark"]);e!==void 0&&C!=null&&w(e,["parameters","addWatermark"],C);const S=v(t,["imageSize"]);e!==void 0&&S!=null&&w(e,["parameters","sampleImageSize"],S);const k=v(t,["enhancePrompt"]);return e!==void 0&&k!=null&&w(e,["parameters","enhancePrompt"],k),n}function W2e(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["_url","model"],ns(t,r));const s=v(e,["prompt"]);s!=null&&w(n,["instances[0]","prompt"],s);const a=v(e,["config"]);return a!=null&&w(n,["config"],$2e(a,n)),n}function CC(t){const e={},n=v(t,["gcsUri"]);n!=null&&w(e,["gcsUri"],n);const r=v(t,["imageBytes"]);r!=null&&w(e,["bytesBase64Encoded"],C0(r));const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function Y2e(t){const e={},n=v(t,["maskMode"]);n!=null&&w(e,["maskMode"],n);const r=v(t,["segmentationClasses"]);r!=null&&w(e,["maskClasses"],r);const s=v(t,["maskDilation"]);return s!=null&&w(e,["dilation"],s),e}function X2e(t){const e={},n=v(t,["controlType"]);n!=null&&w(e,["controlType"],n);const r=v(t,["enableControlImageComputation"]);return r!=null&&w(e,["computeControl"],r),e}function J2e(t){const e={},n=v(t,["styleDescription"]);return n!=null&&w(e,["styleDescription"],n),e}function Z2e(t){const e={},n=v(t,["subjectType"]);n!=null&&w(e,["subjectType"],n);const r=v(t,["subjectDescription"]);return r!=null&&w(e,["subjectDescription"],r),e}function ewe(t){const e={},n=v(t,["referenceImage"]);n!=null&&w(e,["referenceImage"],CC(n));const r=v(t,["referenceId"]);r!=null&&w(e,["referenceId"],r);const s=v(t,["referenceType"]);s!=null&&w(e,["referenceType"],s);const a=v(t,["maskImageConfig"]);a!=null&&w(e,["maskImageConfig"],Y2e(a));const i=v(t,["controlImageConfig"]);i!=null&&w(e,["controlImageConfig"],X2e(i));const o=v(t,["styleImageConfig"]);o!=null&&w(e,["styleImageConfig"],J2e(o));const l=v(t,["subjectImageConfig"]);return l!=null&&w(e,["subjectImageConfig"],Z2e(l)),e}function twe(t,e){const n={},r=v(t,["outputGcsUri"]);e!==void 0&&r!=null&&w(e,["parameters","storageUri"],r);const s=v(t,["negativePrompt"]);e!==void 0&&s!=null&&w(e,["parameters","negativePrompt"],s);const a=v(t,["numberOfImages"]);e!==void 0&&a!=null&&w(e,["parameters","sampleCount"],a);const i=v(t,["aspectRatio"]);e!==void 0&&i!=null&&w(e,["parameters","aspectRatio"],i);const o=v(t,["guidanceScale"]);e!==void 0&&o!=null&&w(e,["parameters","guidanceScale"],o);const l=v(t,["seed"]);e!==void 0&&l!=null&&w(e,["parameters","seed"],l);const u=v(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&w(e,["parameters","safetySetting"],u);const d=v(t,["personGeneration"]);e!==void 0&&d!=null&&w(e,["parameters","personGeneration"],d);const h=v(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&w(e,["parameters","includeSafetyAttributes"],h);const m=v(t,["includeRaiReason"]);e!==void 0&&m!=null&&w(e,["parameters","includeRaiReason"],m);const p=v(t,["language"]);e!==void 0&&p!=null&&w(e,["parameters","language"],p);const y=v(t,["outputMimeType"]);e!==void 0&&y!=null&&w(e,["parameters","outputOptions","mimeType"],y);const x=v(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&w(e,["parameters","outputOptions","compressionQuality"],x);const C=v(t,["addWatermark"]);e!==void 0&&C!=null&&w(e,["parameters","addWatermark"],C);const S=v(t,["editMode"]);e!==void 0&&S!=null&&w(e,["parameters","editMode"],S);const k=v(t,["baseSteps"]);return e!==void 0&&k!=null&&w(e,["parameters","editConfig","baseSteps"],k),n}function nwe(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["_url","model"],ns(t,r));const s=v(e,["prompt"]);s!=null&&w(n,["instances[0]","prompt"],s);const a=v(e,["referenceImages"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>ewe(l))),w(n,["instances[0]","referenceImages"],o)}const i=v(e,["config"]);return i!=null&&w(n,["config"],twe(i,n)),n}function rwe(t,e){const n={},r=v(t,["includeRaiReason"]);e!==void 0&&r!=null&&w(e,["parameters","includeRaiReason"],r);const s=v(t,["outputMimeType"]);e!==void 0&&s!=null&&w(e,["parameters","outputOptions","mimeType"],s);const a=v(t,["outputCompressionQuality"]);e!==void 0&&a!=null&&w(e,["parameters","outputOptions","compressionQuality"],a);const i=v(t,["enhanceInputImage"]);e!==void 0&&i!=null&&w(e,["parameters","upscaleConfig","enhanceInputImage"],i);const o=v(t,["imagePreservationFactor"]);e!==void 0&&o!=null&&w(e,["parameters","upscaleConfig","imagePreservationFactor"],o);const l=v(t,["numberOfImages"]);e!==void 0&&l!=null&&w(e,["parameters","sampleCount"],l);const u=v(t,["mode"]);return e!==void 0&&u!=null&&w(e,["parameters","mode"],u),n}function swe(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["_url","model"],ns(t,r));const s=v(e,["image"]);s!=null&&w(n,["instances[0]","image"],CC(s));const a=v(e,["upscaleFactor"]);a!=null&&w(n,["parameters","upscaleConfig","upscaleFactor"],a);const i=v(e,["config"]);return i!=null&&w(n,["config"],rwe(i,n)),n}function awe(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["_url","name"],ns(t,r));const s=v(e,["config"]);return s!=null&&w(n,["config"],s),n}function iwe(t,e,n){const r={},s=v(e,["pageSize"]);n!==void 0&&s!=null&&w(n,["_query","pageSize"],s);const a=v(e,["pageToken"]);n!==void 0&&a!=null&&w(n,["_query","pageToken"],a);const i=v(e,["filter"]);n!==void 0&&i!=null&&w(n,["_query","filter"],i);const o=v(e,["queryBase"]);return n!==void 0&&o!=null&&w(n,["_url","models_url"],RH(t,o)),r}function owe(t,e){const n={},r=v(e,["config"]);return r!=null&&w(n,["config"],iwe(t,r,n)),n}function lwe(t,e){const n={},r=v(t,["displayName"]);e!==void 0&&r!=null&&w(e,["displayName"],r);const s=v(t,["description"]);e!==void 0&&s!=null&&w(e,["description"],s);const a=v(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&w(e,["defaultCheckpointId"],a),n}function cwe(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["_url","model"],ns(t,r));const s=v(e,["config"]);return s!=null&&w(n,["config"],lwe(s,n)),n}function uwe(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["_url","name"],ns(t,r));const s=v(e,["config"]);return s!=null&&w(n,["config"],s),n}function Awe(t,e){const n={},r=v(t,["systemInstruction"]);e!==void 0&&r!=null&&w(e,["systemInstruction"],Qp(to(r)));const s=v(t,["tools"]);if(e!==void 0&&s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>WH(o))),w(e,["tools"],i)}const a=v(t,["generationConfig"]);return e!==void 0&&a!=null&&w(e,["generationConfig"],a),n}function dwe(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["_url","model"],ns(t,r));const s=v(e,["contents"]);if(s!=null){let i=cc(s);Array.isArray(i)&&(i=i.map(o=>Qp(o))),w(n,["contents"],i)}const a=v(e,["config"]);return a!=null&&w(n,["config"],Awe(a,n)),n}function fwe(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["_url","model"],ns(t,r));const s=v(e,["contents"]);if(s!=null){let i=cc(s);Array.isArray(i)&&(i=i.map(o=>Qp(o))),w(n,["contents"],i)}const a=v(e,["config"]);return a!=null&&w(n,["config"],a),n}function hwe(t){const e={},n=v(t,["uri"]);n!=null&&w(e,["gcsUri"],n);const r=v(t,["videoBytes"]);r!=null&&w(e,["bytesBase64Encoded"],C0(r));const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function mwe(t,e){const n={},r=v(t,["numberOfVideos"]);e!==void 0&&r!=null&&w(e,["parameters","sampleCount"],r);const s=v(t,["outputGcsUri"]);e!==void 0&&s!=null&&w(e,["parameters","storageUri"],s);const a=v(t,["fps"]);e!==void 0&&a!=null&&w(e,["parameters","fps"],a);const i=v(t,["durationSeconds"]);e!==void 0&&i!=null&&w(e,["parameters","durationSeconds"],i);const o=v(t,["seed"]);e!==void 0&&o!=null&&w(e,["parameters","seed"],o);const l=v(t,["aspectRatio"]);e!==void 0&&l!=null&&w(e,["parameters","aspectRatio"],l);const u=v(t,["resolution"]);e!==void 0&&u!=null&&w(e,["parameters","resolution"],u);const d=v(t,["personGeneration"]);e!==void 0&&d!=null&&w(e,["parameters","personGeneration"],d);const h=v(t,["pubsubTopic"]);e!==void 0&&h!=null&&w(e,["parameters","pubsubTopic"],h);const m=v(t,["negativePrompt"]);e!==void 0&&m!=null&&w(e,["parameters","negativePrompt"],m);const p=v(t,["enhancePrompt"]);e!==void 0&&p!=null&&w(e,["parameters","enhancePrompt"],p);const y=v(t,["generateAudio"]);e!==void 0&&y!=null&&w(e,["parameters","generateAudio"],y);const x=v(t,["lastFrame"]);e!==void 0&&x!=null&&w(e,["instances[0]","lastFrame"],CC(x));const C=v(t,["compressionQuality"]);return e!==void 0&&C!=null&&w(e,["parameters","compressionQuality"],C),n}function pwe(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["_url","model"],ns(t,r));const s=v(e,["prompt"]);s!=null&&w(n,["instances[0]","prompt"],s);const a=v(e,["image"]);a!=null&&w(n,["instances[0]","image"],CC(a));const i=v(e,["video"]);i!=null&&w(n,["instances[0]","video"],hwe(i));const o=v(e,["config"]);return o!=null&&w(n,["config"],mwe(o,n)),n}function gwe(t){const e={},n=v(t,["fps"]);n!=null&&w(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&w(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function xwe(t){const e={},n=v(t,["data"]);n!=null&&w(e,["data"],n);const r=v(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function vwe(t){const e={},n=v(t,["fileUri"]);n!=null&&w(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function ywe(t){const e={},n=v(t,["videoMetadata"]);n!=null&&w(e,["videoMetadata"],gwe(n));const r=v(t,["thought"]);r!=null&&w(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],xwe(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],vwe(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&w(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function wwe(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>ywe(a))),w(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&w(e,["role"],r),e}function bwe(t){const e={},n=v(t,["citationSources"]);return n!=null&&w(e,["citations"],n),e}function Cwe(t){const e={},n=v(t,["retrievedUrl"]);n!=null&&w(e,["retrievedUrl"],n);const r=v(t,["urlRetrievalStatus"]);return r!=null&&w(e,["urlRetrievalStatus"],r),e}function Ewe(t){const e={},n=v(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Cwe(s))),w(e,["urlMetadata"],r)}return e}function _we(t){const e={},n=v(t,["content"]);n!=null&&w(e,["content"],wwe(n));const r=v(t,["citationMetadata"]);r!=null&&w(e,["citationMetadata"],bwe(r));const s=v(t,["tokenCount"]);s!=null&&w(e,["tokenCount"],s);const a=v(t,["finishReason"]);a!=null&&w(e,["finishReason"],a);const i=v(t,["urlContextMetadata"]);i!=null&&w(e,["urlContextMetadata"],Ewe(i));const o=v(t,["avgLogprobs"]);o!=null&&w(e,["avgLogprobs"],o);const l=v(t,["groundingMetadata"]);l!=null&&w(e,["groundingMetadata"],l);const u=v(t,["index"]);u!=null&&w(e,["index"],u);const d=v(t,["logprobsResult"]);d!=null&&w(e,["logprobsResult"],d);const h=v(t,["safetyRatings"]);return h!=null&&w(e,["safetyRatings"],h),e}function BL(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["candidates"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>_we(l))),w(e,["candidates"],o)}const s=v(t,["modelVersion"]);s!=null&&w(e,["modelVersion"],s);const a=v(t,["promptFeedback"]);a!=null&&w(e,["promptFeedback"],a);const i=v(t,["usageMetadata"]);return i!=null&&w(e,["usageMetadata"],i),e}function Swe(t){const e={},n=v(t,["values"]);return n!=null&&w(e,["values"],n),e}function Twe(){return{}}function Nwe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>Swe(i))),w(e,["embeddings"],a)}return v(t,["metadata"])!=null&&w(e,["metadata"],Twe()),e}function Bwe(t){const e={},n=v(t,["bytesBase64Encoded"]);n!=null&&w(e,["imageBytes"],C0(n));const r=v(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function YH(t){const e={},n=v(t,["safetyAttributes","categories"]);n!=null&&w(e,["categories"],n);const r=v(t,["safetyAttributes","scores"]);r!=null&&w(e,["scores"],r);const s=v(t,["contentType"]);return s!=null&&w(e,["contentType"],s),e}function kwe(t){const e={},n=v(t,["_self"]);n!=null&&w(e,["image"],Bwe(n));const r=v(t,["raiFilteredReason"]);r!=null&&w(e,["raiFilteredReason"],r);const s=v(t,["_self"]);return s!=null&&w(e,["safetyAttributes"],YH(s)),e}function Iwe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>kwe(i))),w(e,["generatedImages"],a)}const s=v(t,["positivePromptSafetyAttributes"]);return s!=null&&w(e,["positivePromptSafetyAttributes"],YH(s)),e}function Fwe(t){const e={},n=v(t,["baseModel"]);n!=null&&w(e,["baseModel"],n);const r=v(t,["createTime"]);r!=null&&w(e,["createTime"],r);const s=v(t,["updateTime"]);return s!=null&&w(e,["updateTime"],s),e}function fT(t){const e={},n=v(t,["name"]);n!=null&&w(e,["name"],n);const r=v(t,["displayName"]);r!=null&&w(e,["displayName"],r);const s=v(t,["description"]);s!=null&&w(e,["description"],s);const a=v(t,["version"]);a!=null&&w(e,["version"],a);const i=v(t,["_self"]);i!=null&&w(e,["tunedModelInfo"],Fwe(i));const o=v(t,["inputTokenLimit"]);o!=null&&w(e,["inputTokenLimit"],o);const l=v(t,["outputTokenLimit"]);l!=null&&w(e,["outputTokenLimit"],l);const u=v(t,["supportedGenerationMethods"]);return u!=null&&w(e,["supportedActions"],u),e}function Dwe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&w(e,["nextPageToken"],r);const s=v(t,["_self"]);if(s!=null){let a=LH(s);Array.isArray(a)&&(a=a.map(i=>fT(i))),w(e,["models"],a)}return e}function Rwe(){return{}}function Lwe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["totalTokens"]);r!=null&&w(e,["totalTokens"],r);const s=v(t,["cachedContentTokenCount"]);return s!=null&&w(e,["cachedContentTokenCount"],s),e}function Uwe(t){const e={},n=v(t,["video","uri"]);n!=null&&w(e,["uri"],n);const r=v(t,["video","encodedVideo"]);r!=null&&w(e,["videoBytes"],C0(r));const s=v(t,["encoding"]);return s!=null&&w(e,["mimeType"],s),e}function Mwe(t){const e={},n=v(t,["_self"]);return n!=null&&w(e,["video"],Uwe(n)),e}function Pwe(t){const e={},n=v(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>Mwe(i))),w(e,["generatedVideos"],a)}const r=v(t,["raiMediaFilteredCount"]);r!=null&&w(e,["raiMediaFilteredCount"],r);const s=v(t,["raiMediaFilteredReasons"]);return s!=null&&w(e,["raiMediaFilteredReasons"],s),e}function Owe(t){const e={},n=v(t,["name"]);n!=null&&w(e,["name"],n);const r=v(t,["metadata"]);r!=null&&w(e,["metadata"],r);const s=v(t,["done"]);s!=null&&w(e,["done"],s);const a=v(t,["error"]);a!=null&&w(e,["error"],a);const i=v(t,["response","generateVideoResponse"]);return i!=null&&w(e,["response"],Pwe(i)),e}function jwe(t){const e={},n=v(t,["fps"]);n!=null&&w(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&w(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function Qwe(t){const e={},n=v(t,["displayName"]);n!=null&&w(e,["displayName"],n);const r=v(t,["data"]);r!=null&&w(e,["data"],r);const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function Hwe(t){const e={},n=v(t,["displayName"]);n!=null&&w(e,["displayName"],n);const r=v(t,["fileUri"]);r!=null&&w(e,["fileUri"],r);const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function Vwe(t){const e={},n=v(t,["videoMetadata"]);n!=null&&w(e,["videoMetadata"],jwe(n));const r=v(t,["thought"]);r!=null&&w(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],Qwe(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],Hwe(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&w(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function zwe(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Vwe(a))),w(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&w(e,["role"],r),e}function Gwe(t){const e={},n=v(t,["citations"]);return n!=null&&w(e,["citations"],n),e}function qwe(t){const e={},n=v(t,["retrievedUrl"]);n!=null&&w(e,["retrievedUrl"],n);const r=v(t,["urlRetrievalStatus"]);return r!=null&&w(e,["urlRetrievalStatus"],r),e}function Kwe(t){const e={},n=v(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>qwe(s))),w(e,["urlMetadata"],r)}return e}function $we(t){const e={},n=v(t,["content"]);n!=null&&w(e,["content"],zwe(n));const r=v(t,["citationMetadata"]);r!=null&&w(e,["citationMetadata"],Gwe(r));const s=v(t,["finishMessage"]);s!=null&&w(e,["finishMessage"],s);const a=v(t,["finishReason"]);a!=null&&w(e,["finishReason"],a);const i=v(t,["urlContextMetadata"]);i!=null&&w(e,["urlContextMetadata"],Kwe(i));const o=v(t,["avgLogprobs"]);o!=null&&w(e,["avgLogprobs"],o);const l=v(t,["groundingMetadata"]);l!=null&&w(e,["groundingMetadata"],l);const u=v(t,["index"]);u!=null&&w(e,["index"],u);const d=v(t,["logprobsResult"]);d!=null&&w(e,["logprobsResult"],d);const h=v(t,["safetyRatings"]);return h!=null&&w(e,["safetyRatings"],h),e}function kL(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>$we(d))),w(e,["candidates"],u)}const s=v(t,["createTime"]);s!=null&&w(e,["createTime"],s);const a=v(t,["responseId"]);a!=null&&w(e,["responseId"],a);const i=v(t,["modelVersion"]);i!=null&&w(e,["modelVersion"],i);const o=v(t,["promptFeedback"]);o!=null&&w(e,["promptFeedback"],o);const l=v(t,["usageMetadata"]);return l!=null&&w(e,["usageMetadata"],l),e}function Wwe(t){const e={},n=v(t,["truncated"]);n!=null&&w(e,["truncated"],n);const r=v(t,["token_count"]);return r!=null&&w(e,["tokenCount"],r),e}function Ywe(t){const e={},n=v(t,["values"]);n!=null&&w(e,["values"],n);const r=v(t,["statistics"]);return r!=null&&w(e,["statistics"],Wwe(r)),e}function Xwe(t){const e={},n=v(t,["billableCharacterCount"]);return n!=null&&w(e,["billableCharacterCount"],n),e}function Jwe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["predictions[]","embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>Ywe(i))),w(e,["embeddings"],a)}const s=v(t,["metadata"]);return s!=null&&w(e,["metadata"],Xwe(s)),e}function Zwe(t){const e={},n=v(t,["gcsUri"]);n!=null&&w(e,["gcsUri"],n);const r=v(t,["bytesBase64Encoded"]);r!=null&&w(e,["imageBytes"],C0(r));const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function XH(t){const e={},n=v(t,["safetyAttributes","categories"]);n!=null&&w(e,["categories"],n);const r=v(t,["safetyAttributes","scores"]);r!=null&&w(e,["scores"],r);const s=v(t,["contentType"]);return s!=null&&w(e,["contentType"],s),e}function _B(t){const e={},n=v(t,["_self"]);n!=null&&w(e,["image"],Zwe(n));const r=v(t,["raiFilteredReason"]);r!=null&&w(e,["raiFilteredReason"],r);const s=v(t,["_self"]);s!=null&&w(e,["safetyAttributes"],XH(s));const a=v(t,["prompt"]);return a!=null&&w(e,["enhancedPrompt"],a),e}function ebe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>_B(i))),w(e,["generatedImages"],a)}const s=v(t,["positivePromptSafetyAttributes"]);return s!=null&&w(e,["positivePromptSafetyAttributes"],XH(s)),e}function tbe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>_B(a))),w(e,["generatedImages"],s)}return e}function nbe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>_B(a))),w(e,["generatedImages"],s)}return e}function rbe(t){const e={},n=v(t,["endpoint"]);n!=null&&w(e,["name"],n);const r=v(t,["deployedModelId"]);return r!=null&&w(e,["deployedModelId"],r),e}function sbe(t){const e={},n=v(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&w(e,["baseModel"],n);const r=v(t,["createTime"]);r!=null&&w(e,["createTime"],r);const s=v(t,["updateTime"]);return s!=null&&w(e,["updateTime"],s),e}function abe(t){const e={},n=v(t,["checkpointId"]);n!=null&&w(e,["checkpointId"],n);const r=v(t,["epoch"]);r!=null&&w(e,["epoch"],r);const s=v(t,["step"]);return s!=null&&w(e,["step"],s),e}function hT(t){const e={},n=v(t,["name"]);n!=null&&w(e,["name"],n);const r=v(t,["displayName"]);r!=null&&w(e,["displayName"],r);const s=v(t,["description"]);s!=null&&w(e,["description"],s);const a=v(t,["versionId"]);a!=null&&w(e,["version"],a);const i=v(t,["deployedModels"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(m=>rbe(m))),w(e,["endpoints"],h)}const o=v(t,["labels"]);o!=null&&w(e,["labels"],o);const l=v(t,["_self"]);l!=null&&w(e,["tunedModelInfo"],sbe(l));const u=v(t,["defaultCheckpointId"]);u!=null&&w(e,["defaultCheckpointId"],u);const d=v(t,["checkpoints"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(m=>abe(m))),w(e,["checkpoints"],h)}return e}function ibe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&w(e,["nextPageToken"],r);const s=v(t,["_self"]);if(s!=null){let a=LH(s);Array.isArray(a)&&(a=a.map(i=>hT(i))),w(e,["models"],a)}return e}function obe(){return{}}function lbe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["totalTokens"]);return r!=null&&w(e,["totalTokens"],r),e}function cbe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["tokensInfo"]);return r!=null&&w(e,["tokensInfo"],r),e}function ube(t){const e={},n=v(t,["gcsUri"]);n!=null&&w(e,["uri"],n);const r=v(t,["bytesBase64Encoded"]);r!=null&&w(e,["videoBytes"],C0(r));const s=v(t,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function Abe(t){const e={},n=v(t,["_self"]);return n!=null&&w(e,["video"],ube(n)),e}function dbe(t){const e={},n=v(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>Abe(i))),w(e,["generatedVideos"],a)}const r=v(t,["raiMediaFilteredCount"]);r!=null&&w(e,["raiMediaFilteredCount"],r);const s=v(t,["raiMediaFilteredReasons"]);return s!=null&&w(e,["raiMediaFilteredReasons"],s),e}function fbe(t){const e={},n=v(t,["name"]);n!=null&&w(e,["name"],n);const r=v(t,["metadata"]);r!=null&&w(e,["metadata"],r);const s=v(t,["done"]);s!=null&&w(e,["done"],s);const a=v(t,["error"]);a!=null&&w(e,["error"],a);const i=v(t,["response"]);return i!=null&&w(e,["response"],dbe(i)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hbe="Content-Type",mbe="X-Server-Timeout",pbe="User-Agent",mT="x-goog-api-client",gbe="1.12.0",xbe=`google-genai-sdk/${gbe}`,vbe="v1beta1",ybe="v1beta",IL=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class wbe{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:vbe,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:ybe,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[i,o]of Object.entries(e.queryParams))s.searchParams.append(i,String(o));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(n))typeof a=="object"?r[s]=Object.assign(Object.assign({},r[s]),a):a!==void 0&&(r[s]=a);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const s=new AbortController,a=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const i=setTimeout(()=>s.abort(),n.timeout);i&&typeof i.unref=="function"&&i.unref()}r&&r.addEventListener("abort",()=>{s.abort()}),e.signal=a}return n&&n.extraBody!==null&&bbe(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await FL(s),new oT(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await FL(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return Zm(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let i="";for(;;){const{done:o,value:l}=yield xs(s.read());if(o){if(i.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=a.decode(l,{stream:!0});try{const h=JSON.parse(u);if("error"in h){const m=JSON.parse(JSON.stringify(h.error)),p=m.status,y=m.code,x=`got status: ${p}. ${JSON.stringify(h)}`;if(y>=400&&y<600)throw new wC({message:x,status:y})}}catch(h){if(h.name==="ApiError")throw h}i+=u;let d=i.match(IL);for(;d;){const h=d[1];try{const m=new Response(h,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield xs(new oT(m)),i=i.slice(d[0].length),d=i.match(IL)}catch(m){throw new Error(`exception parsing stream chunk ${h}. ${m}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=xbe+" "+this.clientOptions.userAgentExtra;return e[pbe]=n,e[mT]=n,e[hbe]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,s]of Object.entries(e.headers))n.append(r,s);e.timeout&&e.timeout>0&&n.append(mbe,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,i=await a.stat(e);s.sizeBytes=String(i.size);const o=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:i.type;if(o===void 0||o==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=o;const l=await this.fetchUploadUrl(s,n);return a.upload(e,l,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let s={};n!=null&&n.httpOptions?s=n.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},i=await this.request({path:dn("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:s});if(!i||!(i!=null&&i.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const o=(r=i==null?void 0:i.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(o===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return o}}async function FL(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new wC({message:s,status:n}):new Error(s)}}function bbe(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(a,i){const o=Object.assign({},a);for(const l in i)if(Object.prototype.hasOwnProperty.call(i,l)){const u=i[l],d=o[l];u&&typeof u=="object"&&!Array.isArray(u)&&d&&typeof d=="object"&&!Array.isArray(d)?o[l]=r(d,u):(d&&u&&typeof d!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof u}. Overwriting.`),o[l]=u)}return o}const s=r(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cbe="mcp_used/unknown";let Ebe=!1;function JH(t){for(const e of t)if(_be(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Ebe}function ZH(t){var e;const n=(e=t[mT])!==null&&e!==void 0?e:"";t[mT]=(n+` ${Cbe}`).trimStart()}function _be(t){return t!==null&&typeof t=="object"&&t instanceof SB}function Sbe(t,e=100){return Zm(this,arguments,function*(){let r,s=0;for(;s<e;){const a=yield xs(t.listTools({cursor:r}));for(const i of a.tools)yield yield xs(i),s++;if(!a.nextCursor)break;r=a.nextCursor}})}class SB{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new SB(e,n)}async initialize(){var e,n,r,s;if(this.mcpTools.length>0)return;const a={},i=[];for(const d of this.mcpClients)try{for(var o=!0,l=(n=void 0,Ix(Sbe(d))),u;u=await l.next(),e=u.done,!e;o=!0){s=u.value,o=!1;const h=s;i.push(h);const m=h.name;if(a[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);a[m]=d}}catch(h){n={error:h}}finally{try{!o&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=i,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),wge(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const i=await s.callTool({name:r.name,arguments:r.args},void 0,a);n.push({functionResponse:{name:r.name,response:i.isError?{error:i}:i}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Tbe(t,e,n){const r=new fge;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data);const a=wye(s);Object.assign(r,a),e(r)}class Nbe{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),i=Ibe(this.apiClient.getDefaultHeaders()),o=this.apiClient.getApiKey(),l=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${o}`;let u=()=>{};const d=new Promise(I=>{u=I}),h=e.callbacks,m=function(){u({})},p=this.apiClient,y={onopen:m,onmessage:I=>{Tbe(p,h.onmessage,I)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(I){},onclose:(r=h==null?void 0:h.onclose)!==null&&r!==void 0?r:function(I){}},x=this.webSocketFactory.create(l,kbe(i),y);x.connect(),await d;const C=ns(this.apiClient,e.model),S=qH({model:C}),k=dT({setup:S});return x.send(JSON.stringify(k)),new Bbe(x,this.apiClient)}}class Bbe{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=v1e(e),r=KH(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=y1e(e),r=dT(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=dT({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Rm.PLAY)}pause(){this.sendPlaybackControl(Rm.PAUSE)}stop(){this.sendPlaybackControl(Rm.STOP)}resetContext(){this.sendPlaybackControl(Rm.RESET_CONTEXT)}close(){this.conn.close()}}function kbe(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Ibe(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fbe="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Dbe(t,e,n){const r=new dge;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const a=JSON.parse(s);if(t.isVertexAI()){const i=Lye(a);Object.assign(r,i)}else{const i=dye(a);Object.assign(r,i)}e(r)}class Rbe{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new Nbe(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,s,a,i,o;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let d;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&JH(e.config.tools)&&ZH(h);const m=Pbe(h);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const B=this.apiClient.getApiKey();let j="BidiGenerateContent",D="key";B!=null&&B.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),j="BidiGenerateContentConstrained",D="access_token"),d=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${j}?${D}=${B}`}let p=()=>{};const y=new Promise(B=>{p=B}),x=e.callbacks,C=function(){var B;(B=x==null?void 0:x.onopen)===null||B===void 0||B.call(x),p({})},S=this.apiClient,k={onopen:C,onmessage:B=>{Dbe(S,x.onmessage,B)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(B){},onclose:(r=x==null?void 0:x.onclose)!==null&&r!==void 0?r:function(B){}},I=this.webSocketFactory.create(d,Mbe(m),k);I.connect(),await y;let F=ns(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&F.startsWith("publishers/")){const B=this.apiClient.getProject(),j=this.apiClient.getLocation();F=`projects/${B}/locations/${j}/`+F}let U={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Yw.AUDIO]}:e.config.responseModalities=[Yw.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const R=(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[],E=[];for(const B of R)if(this.isCallableTool(B)){const j=B;E.push(await j.tool())}else E.push(B);E.length>0&&(e.config.tools=E);const _={model:F,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?U=K1e(this.apiClient,_):U=m1e(this.apiClient,_),delete U.config,I.send(JSON.stringify(U)),new Ube(I,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Lbe={turnComplete:!0};class Ube{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=cc(n.turns),e.isVertexAI()?r=r.map(s=>Qp(s)):r=r.map(s=>bC(s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const a of r){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(Fbe)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},Lbe),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Y1e(e)}:n={realtimeInput:x1e(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Mbe(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Pbe(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DL=10;function RL(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const i of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(ep(i)){s=!0;break}if(!s)return!0;const a=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function ep(t){return"callTool"in t&&typeof t.callTool=="function"}function Obe(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>ep(s)))!==null&&r!==void 0?r:!1}function jbe(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>!ep(s)))!==null&&r!==void 0?r:!1}function LL(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qbe extends b0{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,s,a,i,o;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Obe(n)||RL(n.config))return await this.generateContentInternal(l);if(jbe(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let u,d;const h=cc(l.contents),m=(a=(s=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:DL;let p=0;for(;p<m&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){const y=u.candidates[0].content,x=[];for(const C of(o=(i=n.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(ep(C)){const k=await C.callTool(u.functionCalls);x.push(...k)}p++,d={role:"user",parts:x},l.contents=cc(l.contents),l.contents.push(y),l.contents.push(d),LL(l.config)&&(h.push(y),h.push(d))}return LL(l.config)&&(u.automaticFunctionCallingHistory=h),u},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),RL(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let a;const i=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((s=l==null?void 0:l.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=l==null?void 0:l.safetyAttributes:i.push(l);let o;return a?o={generatedImages:i,positivePromptSafetyAttributes:a,sdkHttpResponse:r.sdkHttpResponse}:o={generatedImages:i,sdkHttpResponse:r.sdkHttpResponse},o}),this.list=async n=>{var r;const i={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((r=i.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new e1(l0.PAGED_ITEM_MODELS,o=>this.listInternal(o),await this.listInternal(i),i)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>await this.generateVideosInternal(n)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,s;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const i=await Promise.all(a.map(async l=>ep(l)?await l.tool():l)),o={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:i})};if(o.config.tools=i,e.config&&e.config.tools&&JH(e.config.tools)){const l=(s=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),ZH(u),o.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return o}async initAfcToolsMap(e){var n,r,s;const a=new Map;for(const i of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(ep(i)){const o=i,l=await o.tool();for(const u of(s=l.functionDeclarations)!==null&&s!==void 0?s:[]){if(!u.name)throw new Error("Function declaration name is required.");if(a.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);a.set(u.name,o)}}return a}async processAfcStream(e){var n,r,s;const a=(s=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:DL;let i=!1,o=0;const l=await this.initAfcToolsMap(e);return function(u,d,h){var m,p;return Zm(this,arguments,function*(){for(var y,x,C,S;o<a;){i&&(o++,i=!1);const U=yield xs(u.processParamsMaybeAddMcpUsage(h)),R=yield xs(u.generateContentStreamInternal(U)),E=[],_=[];try{for(var k=!0,I=(x=void 0,Ix(R)),F;F=yield xs(I.next()),y=F.done,!y;k=!0){S=F.value,k=!1;const B=S;if(yield yield xs(B),B.candidates&&(!((m=B.candidates[0])===null||m===void 0)&&m.content)){_.push(B.candidates[0].content);for(const j of(p=B.candidates[0].content.parts)!==null&&p!==void 0?p:[])if(o<a&&j.functionCall){if(!j.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(j.functionCall.name)){const D=yield xs(d.get(j.functionCall.name).callTool([j.functionCall]));E.push(...D)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${j.functionCall.name}`)}}}}catch(B){x={error:B}}finally{try{!k&&!y&&(C=I.return)&&(yield xs(C.call(I)))}finally{if(x)throw x.error}}if(E.length>0){i=!0;const B=new Rg;B.candidates=[{content:{role:"user",parts:E}}],yield yield xs(B);const j=[];j.push(..._),j.push({role:"user",parts:E});const D=cc(h.contents).concat(j);h.contents=D}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=NL(this.apiClient,e);return o=dn("{model}:generateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=kL(d),m=new Rg;return Object.assign(m,h),m})}else{const u=TL(this.apiClient,e);return o=dn("{model}:generateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=BL(d),m=new Rg;return Object.assign(m,h),m})}}async generateContentStreamInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=NL(this.apiClient,e);return o=dn("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),i.then(function(h){return Zm(this,arguments,function*(){var m,p,y,x;try{for(var C=!0,S=Ix(h),k;k=yield xs(S.next()),m=k.done,!m;C=!0){x=k.value,C=!1;const I=x,F=kL(yield xs(I.json()));F.sdkHttpResponse={headers:I.headers};const U=new Rg;Object.assign(U,F),yield yield xs(U)}}catch(I){p={error:I}}finally{try{!C&&!m&&(y=S.return)&&(yield xs(y.call(S)))}finally{if(p)throw p.error}}})})}else{const u=TL(this.apiClient,e);return o=dn("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),i.then(function(h){return Zm(this,arguments,function*(){var m,p,y,x;try{for(var C=!0,S=Ix(h),k;k=yield xs(S.next()),m=k.done,!m;C=!0){x=k.value,C=!1;const I=x,F=BL(yield xs(I.json()));F.sdkHttpResponse={headers:I.headers};const U=new Rg;Object.assign(U,F),yield yield xs(U)}}catch(I){p={error:I}}finally{try{!C&&!m&&(y=S.return)&&(yield xs(y.call(S)))}finally{if(p)throw p.error}}})})}}async embedContent(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=K2e(this.apiClient,e);return o=dn("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Jwe(d),m=new iL;return Object.assign(m,h),m})}else{const u=i2e(this.apiClient,e);return o=dn("{model}:batchEmbedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Nwe(d),m=new iL;return Object.assign(m,h),m})}}async generateImagesInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=W2e(this.apiClient,e);return o=dn("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=ebe(d),m=new oL;return Object.assign(m,h),m})}else{const u=l2e(this.apiClient,e);return o=dn("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Iwe(d),m=new oL;return Object.assign(m,h),m})}}async editImageInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=nwe(this.apiClient,e);return a=dn("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=tbe(l),d=new ige;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=swe(this.apiClient,e);return a=dn("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=nbe(l),d=new oge;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=awe(this.apiClient,e);return o=dn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>hT(d))}else{const u=c2e(this.apiClient,e);return o=dn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>fT(d))}}async listInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=owe(this.apiClient,e);return o=dn("{models_url}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=ibe(d),m=new lL;return Object.assign(m,h),m})}else{const u=A2e(this.apiClient,e);return o=dn("{models_url}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Dwe(d),m=new lL;return Object.assign(m,h),m})}}async update(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=cwe(this.apiClient,e);return o=dn("{model}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>hT(d))}else{const u=f2e(this.apiClient,e);return o=dn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>fT(d))}}async delete(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=uwe(this.apiClient,e);return o=dn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(()=>{const d=obe(),h=new cL;return Object.assign(h,d),h})}else{const u=h2e(this.apiClient,e);return o=dn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(()=>{const d=Rwe(),h=new cL;return Object.assign(h,d),h})}}async countTokens(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=dwe(this.apiClient,e);return o=dn("{model}:countTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=lbe(d),m=new uL;return Object.assign(m,h),m})}else{const u=p2e(this.apiClient,e);return o=dn("{model}:countTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Lwe(d),m=new uL;return Object.assign(m,h),m})}}async computeTokens(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=fwe(this.apiClient,e);return a=dn("{model}:computeTokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=cbe(l),d=new lge;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=pwe(this.apiClient,e);return o=dn("{model}:predictLongRunning",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>{const h=fbe(d),m=new Xw;return Object.assign(m,h),m})}else{const u=v2e(this.apiClient,e);return o=dn("{model}:predictLongRunning",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>{const h=Owe(d),m=new Xw;return Object.assign(m,h),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hbe(t){const e={},n=v(t,["operationName"]);n!=null&&w(e,["_url","operationName"],n);const r=v(t,["config"]);return r!=null&&w(e,["config"],r),e}function Vbe(t){const e={},n=v(t,["operationName"]);n!=null&&w(e,["_url","operationName"],n);const r=v(t,["config"]);return r!=null&&w(e,["config"],r),e}function zbe(t){const e={},n=v(t,["operationName"]);n!=null&&w(e,["operationName"],n);const r=v(t,["resourceName"]);r!=null&&w(e,["_url","resourceName"],r);const s=v(t,["config"]);return s!=null&&w(e,["config"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gbe extends b0{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Vbe(e);return o=dn("{operationName}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i}else{const u=Hbe(e);return o=dn("{operationName}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i}}async fetchPredictVideosOperationInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=zbe(e);return a=dn("{resourceName}:fetchPredictOperation",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qbe(t){const e={},n=v(t,["voiceName"]);return n!=null&&w(e,["voiceName"],n),e}function e9(t){const e={},n=v(t,["prebuiltVoiceConfig"]);return n!=null&&w(e,["prebuiltVoiceConfig"],qbe(n)),e}function Kbe(t){const e={},n=v(t,["speaker"]);n!=null&&w(e,["speaker"],n);const r=v(t,["voiceConfig"]);return r!=null&&w(e,["voiceConfig"],e9(r)),e}function $be(t){const e={},n=v(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Kbe(s))),w(e,["speakerVoiceConfigs"],r)}return e}function Wbe(t){const e={},n=v(t,["voiceConfig"]);n!=null&&w(e,["voiceConfig"],e9(n));const r=v(t,["multiSpeakerVoiceConfig"]);r!=null&&w(e,["multiSpeakerVoiceConfig"],$be(r));const s=v(t,["languageCode"]);return s!=null&&w(e,["languageCode"],s),e}function Ybe(t){const e={},n=v(t,["fps"]);n!=null&&w(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&w(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&w(e,["startOffset"],s),e}function Xbe(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["data"]);n!=null&&w(e,["data"],n);const r=v(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function Jbe(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&w(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function Zbe(t){const e={},n=v(t,["videoMetadata"]);n!=null&&w(e,["videoMetadata"],Ybe(n));const r=v(t,["thought"]);r!=null&&w(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&w(e,["inlineData"],Xbe(s));const a=v(t,["fileData"]);a!=null&&w(e,["fileData"],Jbe(a));const i=v(t,["thoughtSignature"]);i!=null&&w(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&w(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&w(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&w(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&w(e,["functionResponse"],d);const h=v(t,["text"]);return h!=null&&w(e,["text"],h),e}function eCe(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Zbe(a))),w(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&w(e,["role"],r),e}function tCe(t){const e={},n=v(t,["behavior"]);n!=null&&w(e,["behavior"],n);const r=v(t,["description"]);r!=null&&w(e,["description"],r);const s=v(t,["name"]);s!=null&&w(e,["name"],s);const a=v(t,["parameters"]);a!=null&&w(e,["parameters"],a);const i=v(t,["parametersJsonSchema"]);i!=null&&w(e,["parametersJsonSchema"],i);const o=v(t,["response"]);o!=null&&w(e,["response"],o);const l=v(t,["responseJsonSchema"]);return l!=null&&w(e,["responseJsonSchema"],l),e}function nCe(t){const e={},n=v(t,["startTime"]);n!=null&&w(e,["startTime"],n);const r=v(t,["endTime"]);return r!=null&&w(e,["endTime"],r),e}function rCe(t){const e={},n=v(t,["timeRangeFilter"]);return n!=null&&w(e,["timeRangeFilter"],nCe(n)),e}function sCe(t){const e={},n=v(t,["mode"]);n!=null&&w(e,["mode"],n);const r=v(t,["dynamicThreshold"]);return r!=null&&w(e,["dynamicThreshold"],r),e}function aCe(t){const e={},n=v(t,["dynamicRetrievalConfig"]);return n!=null&&w(e,["dynamicRetrievalConfig"],sCe(n)),e}function iCe(){return{}}function oCe(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>tCe(u))),w(e,["functionDeclarations"],l)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=v(t,["googleSearch"]);r!=null&&w(e,["googleSearch"],rCe(r));const s=v(t,["googleSearchRetrieval"]);if(s!=null&&w(e,["googleSearchRetrieval"],aCe(s)),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(v(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");v(t,["urlContext"])!=null&&w(e,["urlContext"],iCe());const i=v(t,["codeExecution"]);i!=null&&w(e,["codeExecution"],i);const o=v(t,["computerUse"]);return o!=null&&w(e,["computerUse"],o),e}function lCe(t){const e={},n=v(t,["handle"]);if(n!=null&&w(e,["handle"],n),v(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function UL(){return{}}function cCe(t){const e={},n=v(t,["disabled"]);n!=null&&w(e,["disabled"],n);const r=v(t,["startOfSpeechSensitivity"]);r!=null&&w(e,["startOfSpeechSensitivity"],r);const s=v(t,["endOfSpeechSensitivity"]);s!=null&&w(e,["endOfSpeechSensitivity"],s);const a=v(t,["prefixPaddingMs"]);a!=null&&w(e,["prefixPaddingMs"],a);const i=v(t,["silenceDurationMs"]);return i!=null&&w(e,["silenceDurationMs"],i),e}function uCe(t){const e={},n=v(t,["automaticActivityDetection"]);n!=null&&w(e,["automaticActivityDetection"],cCe(n));const r=v(t,["activityHandling"]);r!=null&&w(e,["activityHandling"],r);const s=v(t,["turnCoverage"]);return s!=null&&w(e,["turnCoverage"],s),e}function ACe(t){const e={},n=v(t,["targetTokens"]);return n!=null&&w(e,["targetTokens"],n),e}function dCe(t){const e={},n=v(t,["triggerTokens"]);n!=null&&w(e,["triggerTokens"],n);const r=v(t,["slidingWindow"]);return r!=null&&w(e,["slidingWindow"],ACe(r)),e}function fCe(t){const e={},n=v(t,["proactiveAudio"]);return n!=null&&w(e,["proactiveAudio"],n),e}function hCe(t,e){const n={},r=v(t,["generationConfig"]);e!==void 0&&r!=null&&w(e,["setup","generationConfig"],r);const s=v(t,["responseModalities"]);e!==void 0&&s!=null&&w(e,["setup","generationConfig","responseModalities"],s);const a=v(t,["temperature"]);e!==void 0&&a!=null&&w(e,["setup","generationConfig","temperature"],a);const i=v(t,["topP"]);e!==void 0&&i!=null&&w(e,["setup","generationConfig","topP"],i);const o=v(t,["topK"]);e!==void 0&&o!=null&&w(e,["setup","generationConfig","topK"],o);const l=v(t,["maxOutputTokens"]);e!==void 0&&l!=null&&w(e,["setup","generationConfig","maxOutputTokens"],l);const u=v(t,["mediaResolution"]);e!==void 0&&u!=null&&w(e,["setup","generationConfig","mediaResolution"],u);const d=v(t,["seed"]);e!==void 0&&d!=null&&w(e,["setup","generationConfig","seed"],d);const h=v(t,["speechConfig"]);e!==void 0&&h!=null&&w(e,["setup","generationConfig","speechConfig"],Wbe(EB(h)));const m=v(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&w(e,["setup","generationConfig","enableAffectiveDialog"],m);const p=v(t,["systemInstruction"]);e!==void 0&&p!=null&&w(e,["setup","systemInstruction"],eCe(to(p)));const y=v(t,["tools"]);if(e!==void 0&&y!=null){let U=Op(y);Array.isArray(U)&&(U=U.map(R=>oCe(Pp(R)))),w(e,["setup","tools"],U)}const x=v(t,["sessionResumption"]);e!==void 0&&x!=null&&w(e,["setup","sessionResumption"],lCe(x));const C=v(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&w(e,["setup","inputAudioTranscription"],UL());const S=v(t,["outputAudioTranscription"]);e!==void 0&&S!=null&&w(e,["setup","outputAudioTranscription"],UL());const k=v(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&w(e,["setup","realtimeInputConfig"],uCe(k));const I=v(t,["contextWindowCompression"]);e!==void 0&&I!=null&&w(e,["setup","contextWindowCompression"],dCe(I));const F=v(t,["proactivity"]);return e!==void 0&&F!=null&&w(e,["setup","proactivity"],fCe(F)),n}function mCe(t,e){const n={},r=v(e,["model"]);r!=null&&w(n,["setup","model"],ns(t,r));const s=v(e,["config"]);return s!=null&&w(n,["config"],hCe(s,n)),n}function pCe(t,e,n){const r={},s=v(e,["expireTime"]);n!==void 0&&s!=null&&w(n,["expireTime"],s);const a=v(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&w(n,["newSessionExpireTime"],a);const i=v(e,["uses"]);n!==void 0&&i!=null&&w(n,["uses"],i);const o=v(e,["liveConnectConstraints"]);n!==void 0&&o!=null&&w(n,["bidiGenerateContentSetup"],mCe(t,o));const l=v(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&w(n,["fieldMask"],l),r}function gCe(t,e){const n={},r=v(e,["config"]);return r!=null&&w(n,["config"],pCe(t,r,n)),n}function xCe(t){const e={},n=v(t,["name"]);return n!=null&&w(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vCe(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(a=>`${n}.${a}`);e.push(...s)}else e.push(n)}return e.join(",")}function yCe(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const a=r.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const a=vCe(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const i=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let o=[];s.length>0&&(o=s.map(u=>i.includes(u)?`generationConfig.${u}`:u));const l=[];a&&l.push(a),o.length>0&&l.push(...o),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class wCe extends b0{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const o=gCe(this.apiClient,e);a=dn("auth_tokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query;const l=yCe(o,e.config);return s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>xCe(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bCe(t){const e={},n=v(t,["name"]);n!=null&&w(e,["_url","name"],n);const r=v(t,["config"]);return r!=null&&w(e,["config"],r),e}function CCe(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&w(e,["_query","pageSize"],r);const s=v(t,["pageToken"]);e!==void 0&&s!=null&&w(e,["_query","pageToken"],s);const a=v(t,["filter"]);return e!==void 0&&a!=null&&w(e,["_query","filter"],a),n}function ECe(t){const e={},n=v(t,["config"]);return n!=null&&w(e,["config"],CCe(n,e)),e}function _Ce(t){const e={},n=v(t,["textInput"]);n!=null&&w(e,["textInput"],n);const r=v(t,["output"]);return r!=null&&w(e,["output"],r),e}function SCe(t){const e={};if(v(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(v(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=v(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>_Ce(s))),w(e,["examples","examples"],r)}return e}function TCe(t,e){const n={};if(v(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=v(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&w(e,["displayName"],r),v(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=v(t,["epochCount"]);e!==void 0&&s!=null&&w(e,["tuningTask","hyperparameters","epochCount"],s);const a=v(t,["learningRateMultiplier"]);if(a!=null&&w(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),v(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(v(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const i=v(t,["batchSize"]);e!==void 0&&i!=null&&w(e,["tuningTask","hyperparameters","batchSize"],i);const o=v(t,["learningRate"]);return e!==void 0&&o!=null&&w(e,["tuningTask","hyperparameters","learningRate"],o),n}function NCe(t){const e={},n=v(t,["baseModel"]);n!=null&&w(e,["baseModel"],n);const r=v(t,["trainingDataset"]);r!=null&&w(e,["tuningTask","trainingData"],SCe(r));const s=v(t,["config"]);return s!=null&&w(e,["config"],TCe(s,e)),e}function BCe(t){const e={},n=v(t,["name"]);n!=null&&w(e,["_url","name"],n);const r=v(t,["config"]);return r!=null&&w(e,["config"],r),e}function kCe(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&w(e,["_query","pageSize"],r);const s=v(t,["pageToken"]);e!==void 0&&s!=null&&w(e,["_query","pageToken"],s);const a=v(t,["filter"]);return e!==void 0&&a!=null&&w(e,["_query","filter"],a),n}function ICe(t){const e={},n=v(t,["config"]);return n!=null&&w(e,["config"],kCe(n,e)),e}function FCe(t,e){const n={},r=v(t,["gcsUri"]);e!==void 0&&r!=null&&w(e,["supervisedTuningSpec","trainingDatasetUri"],r);const s=v(t,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&w(e,["supervisedTuningSpec","trainingDatasetUri"],s),v(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function DCe(t,e){const n={},r=v(t,["gcsUri"]);r!=null&&w(n,["validationDatasetUri"],r);const s=v(t,["vertexDatasetResource"]);return e!==void 0&&s!=null&&w(e,["supervisedTuningSpec","trainingDatasetUri"],s),n}function RCe(t,e){const n={},r=v(t,["validationDataset"]);e!==void 0&&r!=null&&w(e,["supervisedTuningSpec"],DCe(r,n));const s=v(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&w(e,["tunedModelDisplayName"],s);const a=v(t,["description"]);e!==void 0&&a!=null&&w(e,["description"],a);const i=v(t,["epochCount"]);e!==void 0&&i!=null&&w(e,["supervisedTuningSpec","hyperParameters","epochCount"],i);const o=v(t,["learningRateMultiplier"]);e!==void 0&&o!=null&&w(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],o);const l=v(t,["exportLastCheckpointOnly"]);e!==void 0&&l!=null&&w(e,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const u=v(t,["adapterSize"]);if(e!==void 0&&u!=null&&w(e,["supervisedTuningSpec","hyperParameters","adapterSize"],u),v(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(v(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function LCe(t){const e={},n=v(t,["baseModel"]);n!=null&&w(e,["baseModel"],n);const r=v(t,["trainingDataset"]);r!=null&&w(e,["supervisedTuningSpec","trainingDatasetUri"],FCe(r,e));const s=v(t,["config"]);return s!=null&&w(e,["config"],RCe(s,e)),e}function UCe(t){const e={},n=v(t,["name"]);n!=null&&w(e,["model"],n);const r=v(t,["name"]);return r!=null&&w(e,["endpoint"],r),e}function t9(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["name"]);r!=null&&w(e,["name"],r);const s=v(t,["state"]);s!=null&&w(e,["state"],FH(s));const a=v(t,["createTime"]);a!=null&&w(e,["createTime"],a);const i=v(t,["tuningTask","startTime"]);i!=null&&w(e,["startTime"],i);const o=v(t,["tuningTask","completeTime"]);o!=null&&w(e,["endTime"],o);const l=v(t,["updateTime"]);l!=null&&w(e,["updateTime"],l);const u=v(t,["description"]);u!=null&&w(e,["description"],u);const d=v(t,["baseModel"]);d!=null&&w(e,["baseModel"],d);const h=v(t,["_self"]);h!=null&&w(e,["tunedModel"],UCe(h));const m=v(t,["distillationSpec"]);m!=null&&w(e,["distillationSpec"],m);const p=v(t,["experiment"]);p!=null&&w(e,["experiment"],p);const y=v(t,["labels"]);y!=null&&w(e,["labels"],y);const x=v(t,["pipelineJob"]);x!=null&&w(e,["pipelineJob"],x);const C=v(t,["satisfiesPzi"]);C!=null&&w(e,["satisfiesPzi"],C);const S=v(t,["satisfiesPzs"]);S!=null&&w(e,["satisfiesPzs"],S);const k=v(t,["serviceAccount"]);k!=null&&w(e,["serviceAccount"],k);const I=v(t,["tunedModelDisplayName"]);return I!=null&&w(e,["tunedModelDisplayName"],I),e}function MCe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&w(e,["nextPageToken"],r);const s=v(t,["tunedModels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>t9(i))),w(e,["tuningJobs"],a)}return e}function PCe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["name"]);r!=null&&w(e,["name"],r);const s=v(t,["metadata"]);s!=null&&w(e,["metadata"],s);const a=v(t,["done"]);a!=null&&w(e,["done"],a);const i=v(t,["error"]);return i!=null&&w(e,["error"],i),e}function OCe(t){const e={},n=v(t,["checkpointId"]);n!=null&&w(e,["checkpointId"],n);const r=v(t,["epoch"]);r!=null&&w(e,["epoch"],r);const s=v(t,["step"]);s!=null&&w(e,["step"],s);const a=v(t,["endpoint"]);return a!=null&&w(e,["endpoint"],a),e}function jCe(t){const e={},n=v(t,["model"]);n!=null&&w(e,["model"],n);const r=v(t,["endpoint"]);r!=null&&w(e,["endpoint"],r);const s=v(t,["checkpoints"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>OCe(i))),w(e,["checkpoints"],a)}return e}function pT(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["name"]);r!=null&&w(e,["name"],r);const s=v(t,["state"]);s!=null&&w(e,["state"],FH(s));const a=v(t,["createTime"]);a!=null&&w(e,["createTime"],a);const i=v(t,["startTime"]);i!=null&&w(e,["startTime"],i);const o=v(t,["endTime"]);o!=null&&w(e,["endTime"],o);const l=v(t,["updateTime"]);l!=null&&w(e,["updateTime"],l);const u=v(t,["error"]);u!=null&&w(e,["error"],u);const d=v(t,["description"]);d!=null&&w(e,["description"],d);const h=v(t,["baseModel"]);h!=null&&w(e,["baseModel"],h);const m=v(t,["tunedModel"]);m!=null&&w(e,["tunedModel"],jCe(m));const p=v(t,["supervisedTuningSpec"]);p!=null&&w(e,["supervisedTuningSpec"],p);const y=v(t,["tuningDataStats"]);y!=null&&w(e,["tuningDataStats"],y);const x=v(t,["encryptionSpec"]);x!=null&&w(e,["encryptionSpec"],x);const C=v(t,["partnerModelTuningSpec"]);C!=null&&w(e,["partnerModelTuningSpec"],C);const S=v(t,["distillationSpec"]);S!=null&&w(e,["distillationSpec"],S);const k=v(t,["experiment"]);k!=null&&w(e,["experiment"],k);const I=v(t,["labels"]);I!=null&&w(e,["labels"],I);const F=v(t,["pipelineJob"]);F!=null&&w(e,["pipelineJob"],F);const U=v(t,["satisfiesPzi"]);U!=null&&w(e,["satisfiesPzi"],U);const R=v(t,["satisfiesPzs"]);R!=null&&w(e,["satisfiesPzs"],R);const E=v(t,["serviceAccount"]);E!=null&&w(e,["serviceAccount"],E);const _=v(t,["tunedModelDisplayName"]);return _!=null&&w(e,["tunedModelDisplayName"],_),e}function QCe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&w(e,["nextPageToken"],r);const s=v(t,["tuningJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>pT(i))),w(e,["tuningJobs"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HCe extends b0{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new e1(l0.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const r=await this.tuneMldevInternal(n);let s="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?s=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(s=r.name.split("/operations/")[0]),{name:s,state:iT.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=BCe(e);return o=dn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>pT(d))}else{const u=bCe(e);return o=dn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>t9(d))}}async listInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=ICe(e);return o=dn("tuningJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=QCe(d),m=new dL;return Object.assign(m,h),m})}else{const u=ECe(e);return o=dn("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=MCe(d),m=new dL;return Object.assign(m,h),m})}}async tuneInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=LCe(e);return a=dn("tuningJobs",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>pT(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=NCe(e);return a=dn("tunedModels",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>PCe(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VCe{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const zCe=1024*1024*8,GCe=3,qCe=1e3,KCe=2,oS="x-goog-upload-status";async function $Ce(t,e,n){var r,s,a;let i=0,o=0,l=new oT(new Response),u="upload";for(i=t.size;o<i;){const h=Math.min(zCe,i-o),m=t.slice(o,o+h);o+h>=i&&(u+=", finalize");let p=0,y=qCe;for(;p<GCe&&(l=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(o),"Content-Length":String(h)}}}),!(!((r=l==null?void 0:l.headers)===null||r===void 0)&&r[oS]));)p++,await YCe(y),y=y*KCe;if(o+=h,((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[oS])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await(l==null?void 0:l.json());if(((a=l==null?void 0:l.headers)===null||a===void 0?void 0:a[oS])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function WCe(t){return{size:t.size,type:t.type}}function YCe(t){return new Promise(e=>setTimeout(e,t))}class XCe{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $Ce(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await WCe(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JCe{create(e,n,r){return new ZCe(e,n,r)}}class ZCe{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ML="x-goog-api-key";class eEe{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(ML)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ML,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tEe="gl-node/";class nEe{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=age(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const s=new eEe(this.apiKey);this.apiClient=new wbe({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:tEe+"web",uploader:new XCe,downloader:new VCe}),this.models=new Qbe(this.apiClient),this.live=new Rbe(this.apiClient,s,new JCe),this.batches=new Nxe(this.apiClient),this.chats=new Fve(this.models,this.apiClient),this.caches=new Bve(this.apiClient),this.files=new Gve(this.apiClient),this.operations=new Gbe(this.apiClient),this.authTokens=new wCe(this.apiClient),this.tunings=new HCe(this.apiClient)}}const t1="acompanamientos",rEe=async()=>{try{const t=an(Lt(er,t1),sr("fecha","desc"));return(await Da(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener acompañamientos:",t),new Error("No se pudieron cargar los registros de acompañamiento")}},sEe=async t=>{try{return{id:(await Cs(Lt(er,t1),{...t,fecha:t.fecha||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear acompañamiento:",e),new Error("No se pudo crear el registro de acompañamiento")}},aEe=async(t,e)=>{try{const n=Cn(er,t1,t);await Qv(n,{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error al actualizar acompañamiento:",n,"ID:",t),new Error("No se pudo actualizar el registro de acompañamiento")}},iEe=async t=>{try{const e=Cn(er,t1,t);await Ka(e)}catch(e){throw console.error("Error al eliminar acompañamiento:",e,"ID:",t),new Error("No se pudo eliminar el registro de acompañamiento")}},oEe=async t=>{try{const e=an(Lt(er,t1),Vr("docente","==",t),sr("fecha","desc"));return(await Da(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener acompañamientos por docente:",e),new Error("No se pudieron cargar los acompañamientos del docente")}},lEe=async()=>{try{const t=Cn(er,"configuracion","rubricaAcompanamiento"),e=await jv(t);return e.exists()?e.data().rubrica:null}catch(t){return console.error("Error al obtener rúbrica personalizada:",t),null}},cEe=()=>{const[t,e]=G.useState([]),[n,r]=G.useState([]),[s,a]=G.useState(!1),[i,o]=G.useState(!1),[l,u]=G.useState(null),[d,h]=G.useState("list"),[m,p]=G.useState(null),[y,x]=G.useState(!1),[C,S]=G.useState(!1),k=vx,I=G.useMemo(()=>({fecha:new Date().toISOString(),docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[F,U]=G.useState(I),R=G.useCallback(async()=>{a(!0);try{const V=await rEe();e(V),u(null)}catch(V){console.error("Error al cargar acompañamientos desde Firestore",V),u("No se pudieron cargar los registros de acompañamiento desde la nube.")}finally{a(!1)}},[]),E=G.useCallback(async()=>{o(!0);try{const J=(await yH()).filter(K=>K.profile===qt.PROFESORADO).map(K=>K.nombreCompleto).sort();r(J)}catch(V){console.error("Error al cargar profesores desde Firestore",V),u("No se pudieron cargar la lista de profesores desde la nube.")}finally{o(!1)}},[]);G.useEffect(()=>{R(),E()},[R,E]);const _=V=>{U(J=>({...J,[V.target.name]:V.target.value}))},B=(V,J)=>{U(K=>({...K,rubricaResultados:{...K.rubricaResultados,[V]:J}}))},j=async()=>{x(!0);const{rubricaResultados:V,observacionesGenerales:J}=F;let K=`Resultados de la Rúbrica:
`;k.forEach(O=>{O.criteria.forEach(W=>{const Z=V[W.name];if(Z&&W.levels[Z-1]){const re=W.levels[Z-1];K+=`- Criterio: "${W.name}" | Nivel: ${Z} (${re})
`}})}),K+=`
Observaciones Generales del Evaluador:
${J||"No se proveyeron observaciones adicionales."}`;const ie=`
            Eres un asesor pedagógico experto. Tu tarea es generar una retroalimentación formal, técnica y constructiva para un docente, basada en una observación de clase.
            La retroalimentación debe ser estructurada y usar un lenguaje pedagógico preciso.

            A continuación, los datos de la observación:
            ${K}

            Genera una retroalimentación que incluya obligatoriamente los siguientes puntos en formato Markdown:
            - ## Fortalezas Observadas: Destaca 2 o 3 puntos positivos clave, conectándolos con los criterios de la rúbrica.
            - ## Áreas de Mejora: Identifica 2 o 3 aspectos donde el docente puede mejorar, explicando el porqué con base en la evidencia.
            - ## Sugerencias y Pasos a Seguir: Ofrece recomendaciones concretas, prácticas y accionables que el docente pueda implementar.
        `;try{t0("Acompañamiento - Consolidar Feedback");const Z=(await new nEe({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:ie})).text.replace(/(\*\*|\*)/g,"");U(re=>({...re,retroalimentacionConsolidada:Z}))}catch(O){console.error("Error al generar retroalimentación con IA",O),alert("No se pudo generar la retroalimentación. Inténtelo de nuevo.")}finally{x(!1)}},D=async()=>{const V=m;if(!V)return;S(!0);const J=t.find(Se=>Se.id===V);if(!J){S(!1);return}const K=new hn({orientation:"p",unit:"mm",format:"a4"}),ie=20,O=K.internal.pageSize.getWidth(),W=K.internal.pageSize.getHeight(),Z=O-ie*2;let re=ie;const se=Se=>{Se.setFont("helvetica","bold"),Se.setFontSize(10),Se.setTextColor(100),Se.text("LICEO INDUSTRIAL DE RECOLETA",O/2,15,{align:"center"})};se(K),K.setFont("helvetica","bold"),K.setFontSize(18),K.setTextColor(40),K.text("Informe de Acompañamiento Docente",O/2,re+10,{align:"center"}),re+=25,vl(K,{startY:re,body:[[{content:"Docente:",styles:{fontStyle:"bold"}},J.docente],[{content:"Fecha:",styles:{fontStyle:"bold"}},new Date(J.fecha).toLocaleDateString("es-CL")],[{content:"Asignatura:",styles:{fontStyle:"bold"}},J.asignatura],[{content:"Curso:",styles:{fontStyle:"bold"}},J.curso]],theme:"plain",styles:{fontSize:11,cellPadding:2,textColor:[50,50,50]},columnStyles:{0:{cellWidth:35}}}),re=K.lastAutoTable.finalY+10;const de=[],pe=["Débil","Incipiente","Satisfactorio","Avanzado"];k.forEach(Se=>{de.push([{content:Se.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40],halign:"left"}}]),Se.criteria.forEach(me=>{const ce=J.rubricaResultados[me.name],Me=ce?pe[ce-1]:"No evaluado";de.push([me.name,Me])})}),vl(K,{startY:re,head:[["Indicador","Nivel de Logro"]],body:de,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},didDrawPage:Se=>{Se.pageNumber>1&&se(K)}}),re=K.lastAutoTable.finalY+15;const be=(Se,me)=>{re>W-ie-10&&(K.addPage(),se(K),re=ie),K.setFont("helvetica",me.style),K.setFontSize(me.size);const ce=K.splitTextToSize(Se,Z),Me=ce.length*(me.size*.352778*1.15);re+Me>W-ie&&(K.addPage(),se(K),re=ie),K.text(ce,ie,re,{align:"left"}),re+=Me+(me.isTitle?5:8)};J.retroalimentacionConsolidada?J.retroalimentacionConsolidada.split(/(?=## )/).forEach(me=>{if(me.trim()){const ce=me.trim().split(`
`),Me=ce[0].replace("## ",""),Ze=ce.slice(1).join(`
`).trim();be(Me,{size:14,style:"bold",isTitle:!0}),be(Ze,{size:11,style:"normal",isTitle:!1})}}):(be("Retroalimentación Consolidada",{size:14,style:"bold",isTitle:!0}),be("No se ha generado retroalimentación.",{size:11,style:"normal",isTitle:!1})),K.save(`Acompanamiento_${J.docente.replace(/\s/g,"_")}_${new Date(J.fecha).toLocaleDateString("es-CL")}.pdf`),S(!1)},L=async V=>{if(V.preventDefault(),!F.docente||!F.curso||!F.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}try{let J=m;if(m)await aEe(m,F);else{const K=await sEe(F);p(K.id),U({...F}),J=K.id}await R(),J&&alert("¡Guardado correctamente!")}catch(J){console.error("Error al guardar acompañamiento:",J),u("Error al guardar el registro en la nube.")}},Q=()=>{U(I),p(null),h("form"),u(null)},H=V=>{U(V),p(V.id),h("form"),u(null)},te=async V=>{if(window.confirm("¿Está seguro de que desea eliminar este registro de acompañamiento?"))try{await iEe(V),await R()}catch(J){console.error("Error al eliminar acompañamiento:",J),u("No se pudo eliminar el registro en la nube.")}},Y=()=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Acompañamiento"}),c.jsx("button",{onClick:Q,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),s&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando registros desde la nube..."}),l&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:l}),!s&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay registros de acompañamiento en la nube."}),c.jsx("div",{className:"space-y-4",children:!s&&t.length>0&&t.map(V=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:V.docente}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[V.curso," - ",V.asignatura]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(V.fecha).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>H(V),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver y Editar"}),c.jsx("button",{onClick:()=>te(V.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},V.id))})]}),ne=()=>c.jsx("div",{className:"animate-fade-in",children:c.jsxs("form",{onSubmit:L,className:"space-y-8",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:m?"Editando Acompañamiento":"Nuevo Acompañamiento Docente"}),c.jsx("button",{type:"button",onClick:()=>h("list"),className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold",children:"← Volver al listado"})]}),l&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:l}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),c.jsxs("select",{name:"docente",value:F.docente,onChange:_,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[c.jsx("option",{value:"",children:i?"Cargando...":"Seleccione"}),n.map(V=>c.jsx("option",{value:V,children:V},V))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:F.curso,onChange:_,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),Js.map(V=>c.jsx("option",{value:V,children:V},V))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignatura",value:F.asignatura,onChange:_,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),po.map(V=>c.jsx("option",{value:V,children:V},V))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),c.jsx("input",{type:"text",name:"bloques",value:F.bloques,onChange:_,placeholder:"Ej: 3-4",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:k.map(V=>c.jsx(gt.Fragment,{children:V.criteria.map((J,K)=>c.jsxs("tr",{children:[K===0&&c.jsx("td",{rowSpan:V.criteria.length,className:"px-3 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600",children:V.domain}),c.jsx("td",{className:"px-3 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:J.name}),J.levels.map((ie,O)=>{const W=O+1,Z=F.rubricaResultados[J.name]===W;return c.jsx("td",{onClick:()=>B(J.name,W),className:`px-3 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${Z?"bg-amber-100 dark:bg-amber-900/30":"hover:bg-amber-50 dark:hover:bg-slate-700"}`,children:ie},W)})]},J.name))},V.domain))})]})}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones Generales"}),c.jsx("textarea",{name:"observacionesGenerales",value:F.observacionesGenerales,onChange:_,rows:5,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("label",{htmlFor:"retroalimentacionConsolidada",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Retroalimentación Consolidada"}),c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("textarea",{name:"retroalimentacionConsolidada",value:F.retroalimentacionConsolidada,onChange:_,rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Haga clic en 'Consolidar' para generar la retroalimentación aquí..."}),c.jsx("button",{type:"button",onClick:j,disabled:y,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:bg-slate-400",children:y?"...":"Consolidar"})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t dark:border-slate-700",children:[c.jsx("button",{type:"button",onClick:D,disabled:!m||C,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400",children:C?"...":"Exportar PDF"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Acompañamiento"})]})]})});return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Acompañamiento Docente"}),c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:d==="list"?Y():ne()})]})},TB="mensajes_internos",uEe="usuarios",n9="mensajes_read_status",r9=t=>{var n,r;const e=t.data();return{id:t.id,...e,fecha:((r=(n=e.fecha)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fecha}},AEe=(t,e)=>{const n=an(Lt(It,TB),Vr("participants","array-contains",t),sr("fecha","desc"));return En(n,s=>{const a=s.docs.map(i=>r9(i));e(a)},s=>{console.error("Error al suscribirse a los mensajes:",s),e([])})},dEe=async t=>{try{const e={...t,participants:[t.de,t.para],fecha:mn.fromDate(new Date)};await Cs(Lt(It,TB),e)}catch(e){throw console.error("Error al enviar el mensaje:",e),new Error("No se pudo enviar el mensaje.")}},fEe=async t=>{try{const e=Cn(It,TB,t);await Ka(e)}catch(e){throw console.error("Error al eliminar el mensaje:",e),new Error("No se pudo eliminar el mensaje.")}},hEe=(t,e)=>{const n=Cn(It,n9,t);return En(n,s=>{s.exists()?e(s.data()):e({announcements:[],messages:[]})},s=>{console.error("Error al suscribirse al estado de lectura:",s),e({announcements:[],messages:[]})})},mEe=async(t,e)=>{try{const n=Cn(It,n9,t);await io(n,{messages:ree(e)},{merge:!0})}catch(n){throw console.error("Error al marcar mensaje como leído:",n),new Error("No se pudo actualizar el estado de lectura.")}},pEe=t=>{const e=an(Lt(It,uEe),sr("nombreCompleto","asc"));return En(e,r=>{const s=r.docs.map(a=>r9(a));t(s)},r=>{console.error("Error al suscribirse a todos los usuarios:",r),t([])})},gEe=({currentUser:t,refreshUnreadCount:e})=>{const[n,r]=G.useState("inbox"),[s,a]=G.useState([]),[i,o]=G.useState([]),[l,u]=G.useState(null),[d,h]=G.useState({announcements:[],messages:[]}),[m,p]=G.useState(!0),y={para:"",asunto:"",cuerpo:""},[x,C]=G.useState(y);G.useEffect(()=>{if(!t.id||!t.email){p(!1);return}p(!0);const E=AEe(t.email,j=>{a(j),p(!1)}),_=pEe(o),B=hEe(t.id,j=>{h(j),e()});return()=>{E(),_(),B()}},[t.id,t.email,e]);const S=E=>{u(E),n==="inbox"&&!d.messages.includes(E.id)&&mEe(t.id,E.id).catch(_=>{console.error("Failed to mark message as read:",_)})},k=async E=>{if(E.preventDefault(),!x.para||!x.asunto.trim()||!x.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const _={de:t.email,para:x.para,asunto:x.asunto,cuerpo:x.cuerpo};try{await dEe(_),C(y),r("sent")}catch(B){console.error("Error sending message:",B),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},I=async E=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await fEe(E),u(null)}catch(_){console.error("Error deleting message:",_),alert("No se pudo eliminar el mensaje.")}},F=E=>{C({para:E.de,asunto:`Re: ${E.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${E.de}
Fecha: ${new Date(E.fecha).toLocaleString("es-CL")}

${E.cuerpo}`}),r("compose")},U=G.useMemo(()=>s.filter(E=>E.para===t.email),[s,t.email]),R=G.useMemo(()=>s.filter(E=>E.de===t.email),[s,t.email]);return m?c.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[c.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[c.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:c.jsx("button",{onClick:()=>{r("compose"),u(null),C(y)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),c.jsxs("nav",{className:"p-2 space-y-1",children:[c.jsx("button",{onClick:()=>{r("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${n==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),c.jsx("button",{onClick:()=>{r("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${n==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),n!=="compose"&&c.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(n==="inbox"?U:R).map(E=>{const _=n==="inbox"&&!d.messages.includes(E.id);return c.jsxs("div",{onClick:()=>S(E),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(l==null?void 0:l.id)===E.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("p",{className:`font-bold truncate ${_?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:n==="inbox"?E.de:`Para: ${E.para}`}),_&&c.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),c.jsx("p",{className:`truncate text-sm ${_?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:E.asunto}),c.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(E.fecha).toLocaleString("es-CL")})]},E.id)})}),c.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:n==="compose"?c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),c.jsxs("form",{onSubmit:k,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),c.jsxs("select",{id:"para",value:x.para,onChange:E=>C({...x,para:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(E=>E.email!==t.email).map(E=>c.jsxs("option",{value:E.email,children:[E.nombreCompleto," (",E.email,")"]},E.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),c.jsx("input",{type:"text",id:"asunto",value:x.asunto,onChange:E=>C({...x,asunto:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),c.jsx("textarea",{id:"cuerpo",value:x.cuerpo,onChange:E=>C({...x,cuerpo:E.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):l?c.jsxs("div",{children:[c.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.asunto}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[c.jsx("strong",{children:"De:"})," ",l.de," ",c.jsx("br",{}),c.jsx("strong",{children:"Para:"})," ",l.para," ",c.jsx("br",{}),c.jsx("strong",{children:"Fecha:"})," ",new Date(l.fecha).toLocaleString("es-CL")]})]}),c.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:l.cuerpo}),c.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[n==="inbox"&&c.jsx("button",{onClick:()=>F(l),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),c.jsx("button",{onClick:()=>I(l.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):c.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:c.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gT=function(t,e){return gT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},gT(t,e)};function Xc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");gT(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var xT=function(){return xT=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},xT.apply(this,arguments)};function fo(t,e,n,r){function s(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function o(d){try{u(r.next(d))}catch(h){i(h)}}function l(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):s(d.value).then(o,l)}u((r=r.apply(t,[])).next())})}function Gi(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(d){return l([u,d])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(a=u[0]&2?s.return:u[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,u[1])).done)return a;switch(s=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],s=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Ry(t,e,n){if(arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||e)}var rd=function(){function t(e,n,r,s){this.left=e,this.top=n,this.width=r,this.height=s}return t.prototype.add=function(e,n,r,s){return new t(this.left+e,this.top+n,this.width+r,this.height+s)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(s){return s.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),EC=function(t,e){return rd.fromClientRect(t,e.getBoundingClientRect())},xEe=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),s=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new rd(0,0,r,s)},_C=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var a=t.charCodeAt(n++);(a&64512)===56320?e.push(((s&1023)<<10)+(a&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},Aa=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,a="";++s<n;){var i=t[s];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(s+1===n||r.length>16384)&&(a+=String.fromCharCode.apply(String,r),r.length=0)}return a},PL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vEe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ly=0;Ly<PL.length;Ly++)vEe[PL.charCodeAt(Ly)]=Ly;var OL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rx=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Uy=0;Uy<OL.length;Uy++)rx[OL.charCodeAt(Uy)]=Uy;var yEe=function(t){var e=t.length*.75,n=t.length,r,s=0,a,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(r=0;r<n;r+=4)a=rx[t.charCodeAt(r)],i=rx[t.charCodeAt(r+1)],o=rx[t.charCodeAt(r+2)],l=rx[t.charCodeAt(r+3)],d[s++]=a<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|l&63;return u},wEe=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},bEe=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},zh=5,NB=11,lS=2,CEe=NB-zh,s9=65536>>zh,EEe=1<<zh,cS=EEe-1,_Ee=1024>>zh,SEe=s9+_Ee,TEe=SEe,NEe=32,BEe=TEe+NEe,kEe=65536>>NB,IEe=1<<CEe,FEe=IEe-1,jL=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},DEe=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},REe=function(t,e){var n=yEe(t),r=Array.isArray(n)?bEe(n):new Uint32Array(n),s=Array.isArray(n)?wEe(n):new Uint16Array(n),a=24,i=jL(s,a/2,r[4]/2),o=r[5]===2?jL(s,(a+r[4])/2):DEe(r,Math.ceil((a+r[4])/4));return new LEe(r[0],r[1],r[2],r[3],i,o)},LEe=function(){function t(e,n,r,s,a,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=a,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>zh],n=(n<<lS)+(e&cS),this.data[n];if(e<=65535)return n=this.index[s9+(e-55296>>zh)],n=(n<<lS)+(e&cS),this.data[n];if(e<this.highStart)return n=BEe-kEe+(e>>NB),n=this.index[n],n+=e>>zh&FEe,n=this.index[n],n=(n<<lS)+(e&cS),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),QL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",UEe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var My=0;My<QL.length;My++)UEe[QL.charCodeAt(My)]=My;var MEe="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",HL=50,PEe=1,a9=2,i9=3,OEe=4,jEe=5,VL=7,o9=8,zL=9,pf=10,vT=11,GL=12,yT=13,QEe=14,sx=15,wT=16,Py=17,Lg=18,HEe=19,qL=20,bT=21,Ug=22,uS=23,om=24,Al=25,ax=26,ix=27,lm=28,VEe=29,Bh=30,zEe=31,Oy=32,jy=33,CT=34,ET=35,_T=36,fv=37,ST=38,O2=39,j2=40,AS=41,l9=42,GEe=43,qEe=[9001,65288],c9="!",hr="×",Qy="÷",TT=REe(MEe),MA=[Bh,_T],NT=[PEe,a9,i9,jEe],u9=[pf,o9],KL=[ix,ax],KEe=NT.concat(u9),$L=[ST,O2,j2,CT,ET],$Ee=[sx,yT],WEe=function(t,e){e===void 0&&(e="strict");var n=[],r=[],s=[];return t.forEach(function(a,i){var o=TT.get(a);if(o>HL?(s.push(!0),o-=HL):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(a)!==-1)return r.push(i),n.push(wT);if(o===OEe||o===vT){if(i===0)return r.push(i),n.push(Bh);var l=n[i-1];return KEe.indexOf(l)===-1?(r.push(r[i-1]),n.push(l)):(r.push(i),n.push(Bh))}if(r.push(i),o===zEe)return n.push(e==="strict"?bT:fv);if(o===l9||o===VEe)return n.push(Bh);if(o===GEe)return a>=131072&&a<=196605||a>=196608&&a<=262141?n.push(fv):n.push(Bh);n.push(o)}),[r,n,s]},dS=function(t,e,n,r){var s=r[n];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var a=n;a<=r.length;){a++;var i=r[a];if(i===e)return!0;if(i!==pf)break}if(s===pf)for(var a=n;a>0;){a--;var o=r[a];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var l=n;l<=r.length;){l++;var i=r[l];if(i===e)return!0;if(i!==pf)break}if(o!==pf)break}return!1},WL=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===pf)n--;else return r}return 0},YEe=function(t,e,n,r,s){if(n[r]===0)return hr;var a=r-1;if(Array.isArray(s)&&s[a]===!0)return hr;var i=a-1,o=a+1,l=e[a],u=i>=0?e[i]:0,d=e[o];if(l===a9&&d===i9)return hr;if(NT.indexOf(l)!==-1)return c9;if(NT.indexOf(d)!==-1||u9.indexOf(d)!==-1)return hr;if(WL(a,e)===o9)return Qy;if(TT.get(t[a])===vT||(l===Oy||l===jy)&&TT.get(t[o])===vT||l===VL||d===VL||l===zL||[pf,yT,sx].indexOf(l)===-1&&d===zL||[Py,Lg,HEe,om,lm].indexOf(d)!==-1||WL(a,e)===Ug||dS(uS,Ug,a,e)||dS([Py,Lg],bT,a,e)||dS(GL,GL,a,e))return hr;if(l===pf)return Qy;if(l===uS||d===uS)return hr;if(d===wT||l===wT)return Qy;if([yT,sx,bT].indexOf(d)!==-1||l===QEe||u===_T&&$Ee.indexOf(l)!==-1||l===lm&&d===_T||d===qL||MA.indexOf(d)!==-1&&l===Al||MA.indexOf(l)!==-1&&d===Al||l===ix&&[fv,Oy,jy].indexOf(d)!==-1||[fv,Oy,jy].indexOf(l)!==-1&&d===ax||MA.indexOf(l)!==-1&&KL.indexOf(d)!==-1||KL.indexOf(l)!==-1&&MA.indexOf(d)!==-1||[ix,ax].indexOf(l)!==-1&&(d===Al||[Ug,sx].indexOf(d)!==-1&&e[o+1]===Al)||[Ug,sx].indexOf(l)!==-1&&d===Al||l===Al&&[Al,lm,om].indexOf(d)!==-1)return hr;if([Al,lm,om,Py,Lg].indexOf(d)!==-1)for(var h=a;h>=0;){var m=e[h];if(m===Al)return hr;if([lm,om].indexOf(m)!==-1)h--;else break}if([ix,ax].indexOf(d)!==-1)for(var h=[Py,Lg].indexOf(l)!==-1?i:a;h>=0;){var m=e[h];if(m===Al)return hr;if([lm,om].indexOf(m)!==-1)h--;else break}if(ST===l&&[ST,O2,CT,ET].indexOf(d)!==-1||[O2,CT].indexOf(l)!==-1&&[O2,j2].indexOf(d)!==-1||[j2,ET].indexOf(l)!==-1&&d===j2||$L.indexOf(l)!==-1&&[qL,ax].indexOf(d)!==-1||$L.indexOf(d)!==-1&&l===ix||MA.indexOf(l)!==-1&&MA.indexOf(d)!==-1||l===om&&MA.indexOf(d)!==-1||MA.concat(Al).indexOf(l)!==-1&&d===Ug&&qEe.indexOf(t[o])===-1||MA.concat(Al).indexOf(d)!==-1&&l===Lg)return hr;if(l===AS&&d===AS){for(var p=n[a],y=1;p>0&&(p--,e[p]===AS);)y++;if(y%2!==0)return hr}return l===Oy&&d===jy?hr:Qy},XEe=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=WEe(t,e.lineBreak),r=n[0],s=n[1],a=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(o){return[Al,Bh,l9].indexOf(o)!==-1?fv:o}));var i=e.wordBreak==="keep-all"?a.map(function(o,l){return o&&t[l]>=19968&&t[l]<=40959}):void 0;return[r,s,i]},JEe=function(){function t(e,n,r,s){this.codePoints=e,this.required=n===c9,this.start=r,this.end=s}return t.prototype.slice=function(){return Aa.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),ZEe=function(t,e){var n=_C(t),r=XEe(n,e),s=r[0],a=r[1],i=r[2],o=n.length,l=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var d=hr;u<o&&(d=YEe(n,a,s,++u,i))===hr;);if(d!==hr||u===o){var h=new JEe(n,d,l,u);return l=u,{value:h,done:!1}}return{done:!0,value:null}}}},e_e=1,t_e=2,n1=4,YL=8,Zw=10,XL=47,Fx=92,n_e=9,r_e=32,Hy=34,Mg=61,s_e=35,a_e=36,i_e=37,Vy=39,zy=40,Pg=41,o_e=95,Po=45,l_e=33,c_e=60,u_e=62,A_e=64,d_e=91,f_e=93,h_e=61,m_e=123,Gy=63,p_e=125,JL=124,g_e=126,x_e=128,ZL=65533,fS=42,Dh=43,v_e=44,y_e=58,w_e=59,hv=46,b_e=0,C_e=8,E_e=11,__e=14,S_e=31,T_e=127,Iu=-1,A9=48,d9=97,f9=101,N_e=102,B_e=117,k_e=122,h9=65,m9=69,p9=70,I_e=85,F_e=90,Wi=function(t){return t>=A9&&t<=57},D_e=function(t){return t>=55296&&t<=57343},cm=function(t){return Wi(t)||t>=h9&&t<=p9||t>=d9&&t<=N_e},R_e=function(t){return t>=d9&&t<=k_e},L_e=function(t){return t>=h9&&t<=F_e},U_e=function(t){return R_e(t)||L_e(t)},M_e=function(t){return t>=x_e},qy=function(t){return t===Zw||t===n_e||t===r_e},eb=function(t){return U_e(t)||M_e(t)||t===o_e},eU=function(t){return eb(t)||Wi(t)||t===Po},P_e=function(t){return t>=b_e&&t<=C_e||t===E_e||t>=__e&&t<=S_e||t===T_e},tf=function(t,e){return t!==Fx?!1:e!==Zw},Ky=function(t,e,n){return t===Po?eb(e)||tf(e,n):eb(t)?!0:!!(t===Fx&&tf(t,e))},hS=function(t,e,n){return t===Dh||t===Po?Wi(e)?!0:e===hv&&Wi(n):Wi(t===hv?e:t)},O_e=function(t){var e=0,n=1;(t[e]===Dh||t[e]===Po)&&(t[e]===Po&&(n=-1),e++);for(var r=[];Wi(t[e]);)r.push(t[e++]);var s=r.length?parseInt(Aa.apply(void 0,r),10):0;t[e]===hv&&e++;for(var a=[];Wi(t[e]);)a.push(t[e++]);var i=a.length,o=i?parseInt(Aa.apply(void 0,a),10):0;(t[e]===m9||t[e]===f9)&&e++;var l=1;(t[e]===Dh||t[e]===Po)&&(t[e]===Po&&(l=-1),e++);for(var u=[];Wi(t[e]);)u.push(t[e++]);var d=u.length?parseInt(Aa.apply(void 0,u),10):0;return n*(s+o*Math.pow(10,-i))*Math.pow(10,l*d)},j_e={type:2},Q_e={type:3},H_e={type:4},V_e={type:13},z_e={type:8},G_e={type:21},q_e={type:9},K_e={type:10},$_e={type:11},W_e={type:12},Y_e={type:14},$y={type:23},X_e={type:1},J_e={type:25},Z_e={type:24},eSe={type:26},tSe={type:27},nSe={type:28},rSe={type:29},sSe={type:31},BT={type:32},g9=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(_C(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==BT;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Hy:return this.consumeStringToken(Hy);case s_e:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),s=this.peekCodePoint(2);if(eU(n)||tf(r,s)){var a=Ky(n,r,s)?t_e:e_e,i=this.consumeName();return{type:5,value:i,flags:a}}break;case a_e:if(this.peekCodePoint(0)===Mg)return this.consumeCodePoint(),V_e;break;case Vy:return this.consumeStringToken(Vy);case zy:return j_e;case Pg:return Q_e;case fS:if(this.peekCodePoint(0)===Mg)return this.consumeCodePoint(),Y_e;break;case Dh:if(hS(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case v_e:return H_e;case Po:var o=e,l=this.peekCodePoint(0),u=this.peekCodePoint(1);if(hS(o,l,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Ky(o,l,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===Po&&u===u_e)return this.consumeCodePoint(),this.consumeCodePoint(),Z_e;break;case hv:if(hS(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case XL:if(this.peekCodePoint(0)===fS)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===fS&&(d=this.consumeCodePoint(),d===XL))return this.consumeToken();if(d===Iu)return this.consumeToken()}break;case y_e:return eSe;case w_e:return tSe;case c_e:if(this.peekCodePoint(0)===l_e&&this.peekCodePoint(1)===Po&&this.peekCodePoint(2)===Po)return this.consumeCodePoint(),this.consumeCodePoint(),J_e;break;case A_e:var h=this.peekCodePoint(0),m=this.peekCodePoint(1),p=this.peekCodePoint(2);if(Ky(h,m,p)){var i=this.consumeName();return{type:7,value:i}}break;case d_e:return nSe;case Fx:if(tf(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case f_e:return rSe;case h_e:if(this.peekCodePoint(0)===Mg)return this.consumeCodePoint(),z_e;break;case m_e:return $_e;case p_e:return W_e;case B_e:case I_e:var y=this.peekCodePoint(0),x=this.peekCodePoint(1);return y===Dh&&(cm(x)||x===Gy)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case JL:if(this.peekCodePoint(0)===Mg)return this.consumeCodePoint(),q_e;if(this.peekCodePoint(0)===JL)return this.consumeCodePoint(),G_e;break;case g_e:if(this.peekCodePoint(0)===Mg)return this.consumeCodePoint(),K_e;break;case Iu:return BT}return qy(e)?(this.consumeWhiteSpace(),sSe):Wi(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):eb(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Aa(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();cm(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===Gy&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var s=parseInt(Aa.apply(void 0,e.map(function(l){return l===Gy?A9:l})),16),a=parseInt(Aa.apply(void 0,e.map(function(l){return l===Gy?p9:l})),16);return{type:30,start:s,end:a}}var i=parseInt(Aa.apply(void 0,e),16);if(this.peekCodePoint(0)===Po&&cm(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var o=[];cm(n)&&o.length<6;)o.push(n),n=this.consumeCodePoint();var a=parseInt(Aa.apply(void 0,o),16);return{type:30,start:i,end:a}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===zy?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===zy?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Iu)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===Vy||n===Hy){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Iu||this.peekCodePoint(0)===Pg)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),$y)}for(;;){var s=this.consumeCodePoint();if(s===Iu||s===Pg)return{type:22,value:Aa.apply(void 0,e)};if(qy(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Iu||this.peekCodePoint(0)===Pg?(this.consumeCodePoint(),{type:22,value:Aa.apply(void 0,e)}):(this.consumeBadUrlRemnants(),$y);if(s===Hy||s===Vy||s===zy||P_e(s))return this.consumeBadUrlRemnants(),$y;if(s===Fx)if(tf(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),$y;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;qy(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Pg||e===Iu)return;tf(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var s=Math.min(n,e);r+=Aa.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var s=this._value[r];if(s===Iu||s===void 0||s===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(s===Zw)return this._value.splice(0,r),X_e;if(s===Fx){var a=this._value[r+1];a!==Iu&&a!==void 0&&(a===Zw?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):tf(s,a)&&(n+=this.consumeStringSlice(r),n+=Aa(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=n1,r=this.peekCodePoint(0);for((r===Dh||r===Po)&&e.push(this.consumeCodePoint());Wi(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(r===hv&&Wi(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=YL;Wi(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),s=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((r===m9||r===f9)&&((s===Dh||s===Po)&&Wi(a)||Wi(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=YL;Wi(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[O_e(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],s=this.peekCodePoint(0),a=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Ky(s,a,i)){var o=this.consumeName();return{type:15,number:n,flags:r,unit:o}}return s===i_e?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(cm(e)){for(var n=Aa(e);cm(this.peekCodePoint(0))&&n.length<6;)n+=Aa(this.consumeCodePoint());qy(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||D_e(r)||r>1114111?ZL:r}return e===Iu?ZL:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(eU(n))e+=Aa(n);else if(tf(n,this.peekCodePoint(0)))e+=Aa(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t}(),x9=function(){function t(e){this._tokens=e}return t.create=function(e){var n=new g9;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||iSe(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?BT:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),r1=function(t){return t.type===15},Hp=function(t){return t.type===17},cs=function(t){return t.type===20},aSe=function(t){return t.type===0},kT=function(t,e){return cs(t)&&t.value===e},v9=function(t){return t.type!==31},yp=function(t){return t.type!==31&&t.type!==4},sA=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},iSe=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Gf=function(t){return t.type===17||t.type===15},Ba=function(t){return t.type===16||Gf(t)},y9=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},_i={type:17,number:0,flags:n1},BB={type:16,number:50,flags:n1},gf={type:16,number:100,flags:n1},ox=function(t,e,n){var r=t[0],s=t[1];return[ps(r,e),ps(typeof s<"u"?s:r,n)]},ps=function(t,e){if(t.type===16)return t.number/100*e;if(r1(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},w9="deg",b9="grad",C9="rad",E9="turn",SC={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case w9:return Math.PI*e.number/180;case b9:return Math.PI/200*e.number;case C9:return e.number;case E9:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},_9=function(t){return t.type===15&&(t.unit===w9||t.unit===b9||t.unit===C9||t.unit===E9)},S9=function(t){var e=t.filter(cs).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[_i,_i];case"to top":case"bottom":return ac(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[_i,gf];case"to right":case"left":return ac(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[gf,gf];case"to bottom":case"top":return ac(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[gf,_i];case"to left":case"right":return ac(270)}return 0},ac=function(t){return Math.PI*t/180},Sf={name:"color",parse:function(t,e){if(e.type===18){var n=oSe[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),s=e.value.substring(1,2),a=e.value.substring(2,3);return xf(parseInt(r+r,16),parseInt(s+s,16),parseInt(a+a,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),s=e.value.substring(1,2),a=e.value.substring(2,3),i=e.value.substring(3,4);return xf(parseInt(r+r,16),parseInt(s+s,16),parseInt(a+a,16),parseInt(i+i,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),s=e.value.substring(2,4),a=e.value.substring(4,6);return xf(parseInt(r,16),parseInt(s,16),parseInt(a,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),s=e.value.substring(2,4),a=e.value.substring(4,6),i=e.value.substring(6,8);return xf(parseInt(r,16),parseInt(s,16),parseInt(a,16),parseInt(i,16)/255)}}if(e.type===20){var o=WA[e.value.toUpperCase()];if(typeof o<"u")return o}return WA.TRANSPARENT}},Tf=function(t){return(255&t)===0},ni=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+r+","+n+","+e/255+")":"rgb("+s+","+r+","+n+")"},xf=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},tU=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},nU=function(t,e){var n=e.filter(yp);if(n.length===3){var r=n.map(tU),s=r[0],a=r[1],i=r[2];return xf(s,a,i,1)}if(n.length===4){var o=n.map(tU),s=o[0],a=o[1],i=o[2],l=o[3];return xf(s,a,i,l)}return 0};function mS(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var rU=function(t,e){var n=e.filter(yp),r=n[0],s=n[1],a=n[2],i=n[3],o=(r.type===17?ac(r.number):SC.parse(t,r))/(Math.PI*2),l=Ba(s)?s.number/100:0,u=Ba(a)?a.number/100:0,d=typeof i<"u"&&Ba(i)?ps(i,1):1;if(l===0)return xf(u*255,u*255,u*255,1);var h=u<=.5?u*(l+1):u+l-u*l,m=u*2-h,p=mS(m,h,o+1/3),y=mS(m,h,o),x=mS(m,h,o-1/3);return xf(p*255,y*255,x*255,d)},oSe={hsl:rU,hsla:rU,rgb:nU,rgba:nU},Dx=function(t,e){return Sf.parse(t,x9.create(e).parseComponentValue())},WA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},lSe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(cs(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},cSe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},TC=function(t,e){var n=Sf.parse(t,e[0]),r=e[1];return r&&Ba(r)?{color:n,stop:r}:{color:n,stop:null}},sU=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=_i),r.stop===null&&(r.stop=gf);for(var s=[],a=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var l=ps(o,e);l>a?s.push(l):s.push(a),a=l}else s.push(null)}for(var u=null,i=0;i<s.length;i++){var d=s[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var h=i-u,m=s[u-1],p=(d-m)/(h+1),y=1;y<=h;y++)s[u+y-1]=p*y;u=null}}return t.map(function(x,C){var S=x.color;return{color:S,stop:Math.max(Math.min(1,s[C]/e),0)}})},uSe=function(t,e,n){var r=e/2,s=n/2,a=ps(t[0],e)-r,i=s-ps(t[1],n);return(Math.atan2(i,a)+Math.PI*2)%(Math.PI*2)},ASe=function(t,e,n){var r=typeof t=="number"?t:uSe(t,e,n),s=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),a=e/2,i=n/2,o=s/2,l=Math.sin(r-Math.PI/2)*o,u=Math.cos(r-Math.PI/2)*o;return[s,a-u,a+u,i-l,i+l]},Pc=function(t,e){return Math.sqrt(t*t+e*e)},aU=function(t,e,n,r,s){var a=[[0,0],[0,e],[t,0],[t,e]];return a.reduce(function(i,o){var l=o[0],u=o[1],d=Pc(n-l,r-u);return(s?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},dSe=function(t,e,n,r,s){var a=0,i=0;switch(t.size){case 0:t.shape===0?a=i=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(a=Math.min(Math.abs(e),Math.abs(e-r)),i=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(t.shape===0)a=i=Math.min(Pc(e,n),Pc(e,n-s),Pc(e-r,n),Pc(e-r,n-s));else if(t.shape===1){var o=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(e),Math.abs(e-r)),l=aU(r,s,e,n,!0),u=l[0],d=l[1];a=Pc(u-e,(d-n)/o),i=o*a}break;case 1:t.shape===0?a=i=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(a=Math.max(Math.abs(e),Math.abs(e-r)),i=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(t.shape===0)a=i=Math.max(Pc(e,n),Pc(e,n-s),Pc(e-r,n),Pc(e-r,n-s));else if(t.shape===1){var o=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(e),Math.abs(e-r)),h=aU(r,s,e,n,!1),u=h[0],d=h[1];a=Pc(u-e,(d-n)/o),i=o*a}break}return Array.isArray(t.size)&&(a=ps(t.size[0],r),i=t.size.length===2?ps(t.size[1],s):a),[a,i]},fSe=function(t,e){var n=ac(180),r=[];return sA(e).forEach(function(s,a){if(a===0){var i=s[0];if(i.type===20&&i.value==="to"){n=S9(s);return}else if(_9(i)){n=SC.parse(t,i);return}}var o=TC(t,s);r.push(o)}),{angle:n,stops:r,type:1}},Wy=function(t,e){var n=ac(180),r=[];return sA(e).forEach(function(s,a){if(a===0){var i=s[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){n=S9(s);return}else if(_9(i)){n=(SC.parse(t,i)+ac(270))%ac(360);return}}var o=TC(t,s);r.push(o)}),{angle:n,stops:r,type:1}},hSe=function(t,e){var n=ac(180),r=[],s=1,a=0,i=3,o=[];return sA(e).forEach(function(l,u){var d=l[0];if(u===0){if(cs(d)&&d.value==="linear"){s=1;return}else if(cs(d)&&d.value==="radial"){s=2;return}}if(d.type===18){if(d.name==="from"){var h=Sf.parse(t,d.values[0]);r.push({stop:_i,color:h})}else if(d.name==="to"){var h=Sf.parse(t,d.values[0]);r.push({stop:gf,color:h})}else if(d.name==="color-stop"){var m=d.values.filter(yp);if(m.length===2){var h=Sf.parse(t,m[1]),p=m[0];Hp(p)&&r.push({stop:{type:16,number:p.number*100,flags:p.flags},color:h})}}}}),s===1?{angle:(n+ac(180))%ac(360),stops:r,type:s}:{size:i,shape:a,stops:r,position:o,type:s}},T9="closest-side",N9="farthest-side",B9="closest-corner",k9="farthest-corner",I9="circle",F9="ellipse",D9="cover",R9="contain",mSe=function(t,e){var n=0,r=3,s=[],a=[];return sA(e).forEach(function(i,o){var l=!0;if(o===0){var u=!1;l=i.reduce(function(h,m){if(u)if(cs(m))switch(m.value){case"center":return a.push(BB),h;case"top":case"left":return a.push(_i),h;case"right":case"bottom":return a.push(gf),h}else(Ba(m)||Gf(m))&&a.push(m);else if(cs(m))switch(m.value){case I9:return n=0,!1;case F9:return n=1,!1;case"at":return u=!0,!1;case T9:return r=0,!1;case D9:case N9:return r=1,!1;case R9:case B9:return r=2,!1;case k9:return r=3,!1}else if(Gf(m)||Ba(m))return Array.isArray(r)||(r=[]),r.push(m),!1;return h},l)}if(l){var d=TC(t,i);s.push(d)}}),{size:r,shape:n,stops:s,position:a,type:2}},Yy=function(t,e){var n=0,r=3,s=[],a=[];return sA(e).forEach(function(i,o){var l=!0;if(o===0?l=i.reduce(function(d,h){if(cs(h))switch(h.value){case"center":return a.push(BB),!1;case"top":case"left":return a.push(_i),!1;case"right":case"bottom":return a.push(gf),!1}else if(Ba(h)||Gf(h))return a.push(h),!1;return d},l):o===1&&(l=i.reduce(function(d,h){if(cs(h))switch(h.value){case I9:return n=0,!1;case F9:return n=1,!1;case R9:case T9:return r=0,!1;case N9:return r=1,!1;case B9:return r=2,!1;case D9:case k9:return r=3,!1}else if(Gf(h)||Ba(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return d},l)),l){var u=TC(t,i);s.push(u)}}),{size:r,shape:n,stops:s,position:a,type:2}},pSe=function(t){return t.type===1},gSe=function(t){return t.type===2},kB={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=L9[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function xSe(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!L9[t.name])}var L9={"linear-gradient":fSe,"-moz-linear-gradient":Wy,"-ms-linear-gradient":Wy,"-o-linear-gradient":Wy,"-webkit-linear-gradient":Wy,"radial-gradient":mSe,"-moz-radial-gradient":Yy,"-ms-radial-gradient":Yy,"-o-radial-gradient":Yy,"-webkit-radial-gradient":Yy,"-webkit-gradient":hSe},vSe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return yp(r)&&xSe(r)}).map(function(r){return kB.parse(t,r)})}},ySe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(cs(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},wSe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return sA(e).map(function(n){return n.filter(Ba)}).map(y9)}},bSe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return sA(e).map(function(n){return n.filter(cs).map(function(r){return r.value}).join(" ")}).map(CSe)}},CSe=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},tp;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(tp||(tp={}));var ESe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return sA(e).map(function(n){return n.filter(_Se)})}},_Se=function(t){return cs(t)||Ba(t)},NC=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},SSe=NC("top"),TSe=NC("right"),NSe=NC("bottom"),BSe=NC("left"),BC=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return y9(n.filter(Ba))}}},kSe=BC("top-left"),ISe=BC("top-right"),FSe=BC("bottom-right"),DSe=BC("bottom-left"),kC=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},RSe=kC("top"),LSe=kC("right"),USe=kC("bottom"),MSe=kC("left"),IC=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return r1(n)?n.number:0}}},PSe=IC("top"),OSe=IC("right"),jSe=IC("bottom"),QSe=IC("left"),HSe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},VSe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},zSe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(cs).reduce(function(n,r){return n|GSe(r.value)},0)}},GSe=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},qSe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},KSe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},tb;(function(t){t.NORMAL="normal",t.STRICT="strict"})(tb||(tb={}));var $Se={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return tb.STRICT;case"normal":default:return tb.NORMAL}}},WSe={name:"line-height",initialValue:"normal",prefix:!1,type:4},iU=function(t,e){return cs(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Ba(t)?ps(t,e):e},YSe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:kB.parse(t,e)}},XSe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},IT={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},FC=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},JSe=FC("top"),ZSe=FC("right"),e5e=FC("bottom"),t5e=FC("left"),n5e={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(cs).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},r5e={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},DC=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},s5e=DC("top"),a5e=DC("right"),i5e=DC("bottom"),o5e=DC("left"),l5e={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},c5e={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},u5e={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&kT(e[0],"none")?[]:sA(e).map(function(n){for(var r={color:WA.TRANSPARENT,offsetX:_i,offsetY:_i,blur:_i},s=0,a=0;a<n.length;a++){var i=n[a];Gf(i)?(s===0?r.offsetX=i:s===1?r.offsetY=i:r.blur=i,s++):r.color=Sf.parse(t,i)}return r})}},A5e={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},d5e={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=m5e[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},f5e=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},h5e=function(t){var e=t.filter(function(l){return l.type===17}).map(function(l){return l.number}),n=e[0],r=e[1];e[2],e[3];var s=e[4],a=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[n,r,s,a,i,o]:null},m5e={matrix:f5e,matrix3d:h5e},oU={type:16,number:50,flags:n1},p5e=[oU,oU],g5e={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(Ba);return n.length!==2?p5e:[n[0],n[1]]}},x5e={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Rx;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Rx||(Rx={}));var v5e={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Rx.BREAK_ALL;case"keep-all":return Rx.KEEP_ALL;case"normal":default:return Rx.NORMAL}}},y5e={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Hp(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},U9={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},w5e={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Hp(e)?e.number:1}},b5e={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},C5e={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(cs).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},E5e={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(s){switch(s.type){case 20:case 0:n.push(s.value);break;case 17:n.push(s.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},_5e={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},S5e={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Hp(e))return e.number;if(cs(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},T5e={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(cs).map(function(n){return n.value})}},N5e={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Va=function(t,e){return(t&e)!==0},B5e={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},k5e={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],s=e.filter(v9),a=0;a<s.length;a++){var i=s[a],o=s[a+1];if(i.type===20){var l=o&&Hp(o)?o.number:1;r.push({counter:i.value,increment:l})}}return r}},I5e={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(v9),s=0;s<r.length;s++){var a=r[s],i=r[s+1];if(cs(a)&&a.value!=="none"){var o=i&&Hp(i)?i.number:0;n.push({counter:a.value,reset:o})}}return n}},F5e={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(r1).map(function(n){return U9.parse(t,n)})}},D5e={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],s=e.filter(aSe);if(s.length%2!==0)return null;for(var a=0;a<s.length;a+=2){var i=s[a].value,o=s[a+1].value;r.push({open:i,close:o})}return r}},lU=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},R5e={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&kT(e[0],"none")?[]:sA(e).map(function(n){for(var r={color:255,offsetX:_i,offsetY:_i,blur:_i,spread:_i,inset:!1},s=0,a=0;a<n.length;a++){var i=n[a];kT(i,"inset")?r.inset=!0:Gf(i)?(s===0?r.offsetX=i:s===1?r.offsetY=i:s===2?r.blur=i:r.spread=i,s++):r.color=Sf.parse(t,i)}return r})}},L5e={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(cs).forEach(function(s){switch(s.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(s){r.indexOf(s)===-1&&r.push(s)}),r}},U5e={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},M5e={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return r1(e)?e.number:0}},P5e=function(){function t(e,n){var r,s;this.animationDuration=nn(e,F5e,n.animationDuration),this.backgroundClip=nn(e,lSe,n.backgroundClip),this.backgroundColor=nn(e,cSe,n.backgroundColor),this.backgroundImage=nn(e,vSe,n.backgroundImage),this.backgroundOrigin=nn(e,ySe,n.backgroundOrigin),this.backgroundPosition=nn(e,wSe,n.backgroundPosition),this.backgroundRepeat=nn(e,bSe,n.backgroundRepeat),this.backgroundSize=nn(e,ESe,n.backgroundSize),this.borderTopColor=nn(e,SSe,n.borderTopColor),this.borderRightColor=nn(e,TSe,n.borderRightColor),this.borderBottomColor=nn(e,NSe,n.borderBottomColor),this.borderLeftColor=nn(e,BSe,n.borderLeftColor),this.borderTopLeftRadius=nn(e,kSe,n.borderTopLeftRadius),this.borderTopRightRadius=nn(e,ISe,n.borderTopRightRadius),this.borderBottomRightRadius=nn(e,FSe,n.borderBottomRightRadius),this.borderBottomLeftRadius=nn(e,DSe,n.borderBottomLeftRadius),this.borderTopStyle=nn(e,RSe,n.borderTopStyle),this.borderRightStyle=nn(e,LSe,n.borderRightStyle),this.borderBottomStyle=nn(e,USe,n.borderBottomStyle),this.borderLeftStyle=nn(e,MSe,n.borderLeftStyle),this.borderTopWidth=nn(e,PSe,n.borderTopWidth),this.borderRightWidth=nn(e,OSe,n.borderRightWidth),this.borderBottomWidth=nn(e,jSe,n.borderBottomWidth),this.borderLeftWidth=nn(e,QSe,n.borderLeftWidth),this.boxShadow=nn(e,R5e,n.boxShadow),this.color=nn(e,HSe,n.color),this.direction=nn(e,VSe,n.direction),this.display=nn(e,zSe,n.display),this.float=nn(e,qSe,n.cssFloat),this.fontFamily=nn(e,E5e,n.fontFamily),this.fontSize=nn(e,_5e,n.fontSize),this.fontStyle=nn(e,N5e,n.fontStyle),this.fontVariant=nn(e,T5e,n.fontVariant),this.fontWeight=nn(e,S5e,n.fontWeight),this.letterSpacing=nn(e,KSe,n.letterSpacing),this.lineBreak=nn(e,$Se,n.lineBreak),this.lineHeight=nn(e,WSe,n.lineHeight),this.listStyleImage=nn(e,YSe,n.listStyleImage),this.listStylePosition=nn(e,XSe,n.listStylePosition),this.listStyleType=nn(e,IT,n.listStyleType),this.marginTop=nn(e,JSe,n.marginTop),this.marginRight=nn(e,ZSe,n.marginRight),this.marginBottom=nn(e,e5e,n.marginBottom),this.marginLeft=nn(e,t5e,n.marginLeft),this.opacity=nn(e,w5e,n.opacity);var a=nn(e,n5e,n.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=nn(e,r5e,n.overflowWrap),this.paddingTop=nn(e,s5e,n.paddingTop),this.paddingRight=nn(e,a5e,n.paddingRight),this.paddingBottom=nn(e,i5e,n.paddingBottom),this.paddingLeft=nn(e,o5e,n.paddingLeft),this.paintOrder=nn(e,L5e,n.paintOrder),this.position=nn(e,c5e,n.position),this.textAlign=nn(e,l5e,n.textAlign),this.textDecorationColor=nn(e,b5e,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=nn(e,C5e,(s=n.textDecorationLine)!==null&&s!==void 0?s:n.textDecoration),this.textShadow=nn(e,u5e,n.textShadow),this.textTransform=nn(e,A5e,n.textTransform),this.transform=nn(e,d5e,n.transform),this.transformOrigin=nn(e,g5e,n.transformOrigin),this.visibility=nn(e,x5e,n.visibility),this.webkitTextStrokeColor=nn(e,U5e,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=nn(e,M5e,n.webkitTextStrokeWidth),this.wordBreak=nn(e,v5e,n.wordBreak),this.zIndex=nn(e,y5e,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Tf(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Va(this.display,4)||Va(this.display,33554432)||Va(this.display,268435456)||Va(this.display,536870912)||Va(this.display,67108864)||Va(this.display,134217728)},t}(),O5e=function(){function t(e,n){this.content=nn(e,B5e,n.content),this.quotes=nn(e,D5e,n.quotes)}return t}(),cU=function(){function t(e,n){this.counterIncrement=nn(e,k5e,n.counterIncrement),this.counterReset=nn(e,I5e,n.counterReset)}return t}(),nn=function(t,e,n){var r=new g9,s=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(s);var a=new x9(r.read());switch(e.type){case 2:var i=a.parseComponentValue();return e.parse(t,cs(i)?i.value:e.initialValue);case 0:return e.parse(t,a.parseComponentValue());case 1:return e.parse(t,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(e.format){case"angle":return SC.parse(t,a.parseComponentValue());case"color":return Sf.parse(t,a.parseComponentValue());case"image":return kB.parse(t,a.parseComponentValue());case"length":var o=a.parseComponentValue();return Gf(o)?o:_i;case"length-percentage":var l=a.parseComponentValue();return Ba(l)?l:_i;case"time":return U9.parse(t,a.parseComponentValue())}break}},j5e="data-html2canvas-debug",Q5e=function(t){var e=t.getAttribute(j5e);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},FT=function(t,e){var n=Q5e(t);return n===1||e===n},aA=function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,FT(n,3))debugger;this.styles=new P5e(e,window.getComputedStyle(n,null)),LT(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=EC(this.context,n),FT(n,4)&&(this.flags|=16)}return t}(),H5e="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",uU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lx=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Xy=0;Xy<uU.length;Xy++)lx[uU.charCodeAt(Xy)]=Xy;var V5e=function(t){var e=t.length*.75,n=t.length,r,s=0,a,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(r=0;r<n;r+=4)a=lx[t.charCodeAt(r)],i=lx[t.charCodeAt(r+1)],o=lx[t.charCodeAt(r+2)],l=lx[t.charCodeAt(r+3)],d[s++]=a<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|l&63;return u},z5e=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},G5e=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Gh=5,IB=11,pS=2,q5e=IB-Gh,M9=65536>>Gh,K5e=1<<Gh,gS=K5e-1,$5e=1024>>Gh,W5e=M9+$5e,Y5e=W5e,X5e=32,J5e=Y5e+X5e,Z5e=65536>>IB,eTe=1<<q5e,tTe=eTe-1,AU=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},nTe=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},rTe=function(t,e){var n=V5e(t),r=Array.isArray(n)?G5e(n):new Uint32Array(n),s=Array.isArray(n)?z5e(n):new Uint16Array(n),a=24,i=AU(s,a/2,r[4]/2),o=r[5]===2?AU(s,(a+r[4])/2):nTe(r,Math.ceil((a+r[4])/4));return new sTe(r[0],r[1],r[2],r[3],i,o)},sTe=function(){function t(e,n,r,s,a,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=a,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Gh],n=(n<<pS)+(e&gS),this.data[n];if(e<=65535)return n=this.index[M9+(e-55296>>Gh)],n=(n<<pS)+(e&gS),this.data[n];if(e<this.highStart)return n=J5e-Z5e+(e>>IB),n=this.index[n],n+=e>>Gh&tTe,n=this.index[n],n=(n<<pS)+(e&gS),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),dU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",aTe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Jy=0;Jy<dU.length;Jy++)aTe[dU.charCodeAt(Jy)]=Jy;var iTe=1,xS=2,vS=3,fU=4,hU=5,oTe=7,mU=8,yS=9,wS=10,pU=11,gU=12,xU=13,vU=14,bS=15,lTe=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var a=t.charCodeAt(n++);(a&64512)===56320?e.push(((s&1023)<<10)+(a&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},cTe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,a="";++s<n;){var i=t[s];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(s+1===n||r.length>16384)&&(a+=String.fromCharCode.apply(String,r),r.length=0)}return a},uTe=rTe(H5e),Jl="×",CS="÷",ATe=function(t){return uTe.get(t)},dTe=function(t,e,n){var r=n-2,s=e[r],a=e[n-1],i=e[n];if(a===xS&&i===vS)return Jl;if(a===xS||a===vS||a===fU||i===xS||i===vS||i===fU)return CS;if(a===mU&&[mU,yS,pU,gU].indexOf(i)!==-1||(a===pU||a===yS)&&(i===yS||i===wS)||(a===gU||a===wS)&&i===wS||i===xU||i===hU||i===oTe||a===iTe)return Jl;if(a===xU&&i===vU){for(;s===hU;)s=e[--r];if(s===vU)return Jl}if(a===bS&&i===bS){for(var o=0;s===bS;)o++,s=e[--r];if(o%2===0)return Jl}return CS},fTe=function(t){var e=lTe(t),n=e.length,r=0,s=0,a=e.map(ATe);return{next:function(){if(r>=n)return{done:!0,value:null};for(var i=Jl;r<n&&(i=dTe(e,a,++r))===Jl;);if(i!==Jl||r===n){var o=cTe.apply(null,e.slice(s,r));return s=r,{value:o,done:!1}}return{done:!0,value:null}}}},hTe=function(t){for(var e=fTe(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},mTe=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var s=n.getBoundingClientRect(),a=Math.round(s.height);if(t.body.removeChild(r),a===e)return!0}}return!1},pTe=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,s=_C(r.data).map(function(l){return Aa(l)}),a=0,i={},o=s.every(function(l,u){n.setStart(r,a),n.setEnd(r,a+l.length);var d=n.getBoundingClientRect();a+=l.length;var h=d.x>i.x||d.y>i.y;return i=d,u===0?!0:h});return t.body.removeChild(e),o},gTe=function(){return typeof new Image().crossOrigin<"u"},xTe=function(){return typeof new XMLHttpRequest().responseType=="string"},vTe=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},yU=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},yTe=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var s=new Image,a=e.toDataURL();s.src=a;var i=DT(n,n,0,0,s);return r.fillStyle="red",r.fillRect(0,0,n,n),wU(i).then(function(o){r.drawImage(o,0,0);var l=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var u=t.createElement("div");return u.style.backgroundImage="url("+a+")",u.style.height=n+"px",yU(l)?wU(DT(n,n,0,0,u)):Promise.reject(!1)}).then(function(o){return r.drawImage(o,0,0),yU(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},DT=function(t,e,n,r,s){var a="http://www.w3.org/2000/svg",i=document.createElementNS(a,"svg"),o=document.createElementNS(a,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",n.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(s),i},wU=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},yi={get SUPPORT_RANGE_BOUNDS(){var t=mTe(document);return Object.defineProperty(yi,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=yi.SUPPORT_RANGE_BOUNDS&&pTe(document);return Object.defineProperty(yi,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=vTe(document);return Object.defineProperty(yi,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?yTe(document):Promise.resolve(!1);return Object.defineProperty(yi,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=gTe();return Object.defineProperty(yi,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=xTe();return Object.defineProperty(yi,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(yi,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(yi,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Lx=function(){function t(e,n){this.text=e,this.bounds=n}return t}(),wTe=function(t,e,n,r){var s=ETe(e,n),a=[],i=0;return s.forEach(function(o){if(n.textDecorationLine.length||o.trim().length>0)if(yi.SUPPORT_RANGE_BOUNDS){var l=bU(r,i,o.length).getClientRects();if(l.length>1){var u=FB(o),d=0;u.forEach(function(m){a.push(new Lx(m,rd.fromDOMRectList(t,bU(r,d+i,m.length).getClientRects()))),d+=m.length})}else a.push(new Lx(o,rd.fromDOMRectList(t,l)))}else{var h=r.splitText(o.length);a.push(new Lx(o,bTe(t,r))),r=h}else yi.SUPPORT_RANGE_BOUNDS||(r=r.splitText(o.length));i+=o.length}),a},bTe=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(r,e);var a=EC(t,r);return r.firstChild&&s.replaceChild(r.firstChild,r),a}}return rd.EMPTY},bU=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(t,e),s.setEnd(t,e+n),s},FB=function(t){if(yi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return hTe(t)},CTe=function(t,e){if(yi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return STe(t,e)},ETe=function(t,e){return e.letterSpacing!==0?FB(t):CTe(t,e)},_Te=[32,160,4961,65792,65793,4153,4241],STe=function(t,e){for(var n=ZEe(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],s,a=function(){if(s.value){var i=s.value.slice(),o=_C(i),l="";o.forEach(function(u){_Te.indexOf(u)===-1?l+=Aa(u):(l.length&&r.push(l),r.push(Aa(u)),l="")}),l.length&&r.push(l)}};!(s=n.next()).done;)a();return r},TTe=function(){function t(e,n,r){this.text=NTe(n.data,r.textTransform),this.textBounds=wTe(e,this.text,r,n)}return t}(),NTe=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(BTe,kTe);case 2:return t.toUpperCase();default:return t}},BTe=/(^|\s|:|-|\(|\))([a-z])/g,kTe=function(t,e,n){return t.length>0?e+n.toUpperCase():t},P9=function(t){Xc(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.src=r.currentSrc||r.src,s.intrinsicWidth=r.naturalWidth,s.intrinsicHeight=r.naturalHeight,s.context.cache.addImage(s.src),s}return e}(aA),O9=function(t){Xc(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r,s.intrinsicWidth=r.width,s.intrinsicHeight=r.height,s}return e}(aA),j9=function(t){Xc(e,t);function e(n,r){var s=t.call(this,n,r)||this,a=new XMLSerializer,i=EC(n,r);return r.setAttribute("width",i.width+"px"),r.setAttribute("height",i.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(r)),s.intrinsicWidth=r.width.baseVal.value,s.intrinsicHeight=r.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(aA),Q9=function(t){Xc(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(aA),RT=function(t){Xc(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.start=r.start,s.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,s}return e}(aA),ITe=[{type:15,flags:0,unit:"px",number:3}],FTe=[{type:16,flags:0,number:50}],DTe=function(t){return t.width>t.height?new rd(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new rd(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},RTe=function(t){var e=t.type===LTe?new Array(t.value.length+1).join("•"):t.value;return e.length===0?t.placeholder||"":e},nb="checkbox",rb="radio",LTe="password",CU=707406591,DB=function(t){Xc(e,t);function e(n,r){var s=t.call(this,n,r)||this;switch(s.type=r.type.toLowerCase(),s.checked=r.checked,s.value=RTe(r),(s.type===nb||s.type===rb)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=DTe(s.bounds)),s.type){case nb:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=ITe;break;case rb:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=FTe;break}return s}return e}(aA),H9=function(t){Xc(e,t);function e(n,r){var s=t.call(this,n,r)||this,a=r.options[r.selectedIndex||0];return s.value=a&&a.text||"",s}return e}(aA),V9=function(t){Xc(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(aA),z9=function(t){Xc(e,t);function e(n,r){var s=t.call(this,n,r)||this;s.src=r.src,s.width=parseInt(r.width,10)||0,s.height=parseInt(r.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){s.tree=q9(n,r.contentWindow.document.documentElement);var a=r.contentWindow.document.documentElement?Dx(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):WA.TRANSPARENT,i=r.contentWindow.document.body?Dx(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):WA.TRANSPARENT;s.backgroundColor=Tf(a)?Tf(i)?s.styles.backgroundColor:i:a}}catch{}return s}return e}(aA),UTe=["OL","UL","MENU"],Q2=function(t,e,n,r){for(var s=e.firstChild,a=void 0;s;s=a)if(a=s.nextSibling,K9(s)&&s.data.trim().length>0)n.textNodes.push(new TTe(t,s,n.styles));else if(Lm(s))if(X9(s)&&s.assignedNodes)s.assignedNodes().forEach(function(o){return Q2(t,o,n,r)});else{var i=G9(t,s);i.styles.isVisible()&&(MTe(s,i,r)?i.flags|=4:PTe(i.styles)&&(i.flags|=2),UTe.indexOf(s.tagName)!==-1&&(i.flags|=8),n.elements.push(i),s.slot,s.shadowRoot?Q2(t,s.shadowRoot,i,r):!sb(s)&&!$9(s)&&!ab(s)&&Q2(t,s,i,r))}},G9=function(t,e){return UT(e)?new P9(t,e):W9(e)?new O9(t,e):$9(e)?new j9(t,e):OTe(e)?new Q9(t,e):jTe(e)?new RT(t,e):QTe(e)?new DB(t,e):ab(e)?new H9(t,e):sb(e)?new V9(t,e):Y9(e)?new z9(t,e):new aA(t,e)},q9=function(t,e){var n=G9(t,e);return n.flags|=4,Q2(t,e,n,n),n},MTe=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||RB(t)&&n.styles.isTransparent()},PTe=function(t){return t.isPositioned()||t.isFloating()},K9=function(t){return t.nodeType===Node.TEXT_NODE},Lm=function(t){return t.nodeType===Node.ELEMENT_NODE},LT=function(t){return Lm(t)&&typeof t.style<"u"&&!H2(t)},H2=function(t){return typeof t.className=="object"},OTe=function(t){return t.tagName==="LI"},jTe=function(t){return t.tagName==="OL"},QTe=function(t){return t.tagName==="INPUT"},HTe=function(t){return t.tagName==="HTML"},$9=function(t){return t.tagName==="svg"},RB=function(t){return t.tagName==="BODY"},W9=function(t){return t.tagName==="CANVAS"},EU=function(t){return t.tagName==="VIDEO"},UT=function(t){return t.tagName==="IMG"},Y9=function(t){return t.tagName==="IFRAME"},_U=function(t){return t.tagName==="STYLE"},VTe=function(t){return t.tagName==="SCRIPT"},sb=function(t){return t.tagName==="TEXTAREA"},ab=function(t){return t.tagName==="SELECT"},X9=function(t){return t.tagName==="SLOT"},SU=function(t){return t.tagName.indexOf("-")>0},zTe=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,s=e.counterReset,a=!0;r!==null&&r.forEach(function(o){var l=n.counters[o.counter];l&&o.increment!==0&&(a=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var i=[];return a&&s.forEach(function(o){var l=n.counters[o.counter];i.push(o.counter),l||(l=n.counters[o.counter]=[]),l.push(o.reset)}),i},t}(),TU={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},NU={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},GTe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},qTe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},um=function(t,e,n,r,s,a){return t<e||t>n?mv(t,s,a.length>0):r.integers.reduce(function(i,o,l){for(;t>=o;)t-=o,i+=r.values[l];return i},"")+a},J9=function(t,e,n,r){var s="";do n||t--,s=r(t)+s,t/=e;while(t*e>=e);return s},ca=function(t,e,n,r,s){var a=n-e+1;return(t<0?"-":"")+(J9(Math.abs(t),a,r,function(i){return Aa(Math.floor(i%a)+e)})+s)},bh=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return J9(Math.abs(t),r,!1,function(s){return e[Math.floor(s%r)]})+n},Tm=1,Jd=2,Zd=4,cx=8,PA=function(t,e,n,r,s,a){if(t<-9999||t>9999)return mv(t,4,s.length>0);var i=Math.abs(t),o=s;if(i===0)return e[0]+o;for(var l=0;i>0&&l<=4;l++){var u=i%10;u===0&&Va(a,Tm)&&o!==""?o=e[u]+o:u>1||u===1&&l===0||u===1&&l===1&&Va(a,Jd)||u===1&&l===1&&Va(a,Zd)&&t>100||u===1&&l>1&&Va(a,cx)?o=e[u]+(l>0?n[l-1]:"")+o:u===1&&l>0&&(o=n[l-1]+o),i=Math.floor(i/10)}return(t<0?r:"")+o},BU="十百千萬",kU="拾佰仟萬",IU="マイナス",ES="마이너스",mv=function(t,e,n){var r=n?". ":"",s=n?"、":"",a=n?", ":"",i=n?" ":"";switch(e){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var o=ca(t,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return bh(t,"〇一二三四五六七八九",s);case 6:return um(t,1,3999,TU,3,r).toLowerCase();case 7:return um(t,1,3999,TU,3,r);case 8:return ca(t,945,969,!1,r);case 9:return ca(t,97,122,!1,r);case 10:return ca(t,65,90,!1,r);case 11:return ca(t,1632,1641,!0,r);case 12:case 49:return um(t,1,9999,NU,3,r);case 35:return um(t,1,9999,NU,3,r).toLowerCase();case 13:return ca(t,2534,2543,!0,r);case 14:case 30:return ca(t,6112,6121,!0,r);case 15:return bh(t,"子丑寅卯辰巳午未申酉戌亥",s);case 16:return bh(t,"甲乙丙丁戊己庚辛壬癸",s);case 17:case 48:return PA(t,"零一二三四五六七八九",BU,"負",s,Jd|Zd|cx);case 47:return PA(t,"零壹貳參肆伍陸柒捌玖",kU,"負",s,Tm|Jd|Zd|cx);case 42:return PA(t,"零一二三四五六七八九",BU,"负",s,Jd|Zd|cx);case 41:return PA(t,"零壹贰叁肆伍陆柒捌玖",kU,"负",s,Tm|Jd|Zd|cx);case 26:return PA(t,"〇一二三四五六七八九","十百千万",IU,s,0);case 25:return PA(t,"零壱弐参四伍六七八九","拾百千万",IU,s,Tm|Jd|Zd);case 31:return PA(t,"영일이삼사오육칠팔구","십백천만",ES,a,Tm|Jd|Zd);case 33:return PA(t,"零一二三四五六七八九","十百千萬",ES,a,0);case 32:return PA(t,"零壹貳參四五六七八九","拾百千",ES,a,Tm|Jd|Zd);case 18:return ca(t,2406,2415,!0,r);case 20:return um(t,1,19999,qTe,3,r);case 21:return ca(t,2790,2799,!0,r);case 22:return ca(t,2662,2671,!0,r);case 22:return um(t,1,10999,GTe,3,r);case 23:return bh(t,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return bh(t,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return ca(t,3302,3311,!0,r);case 28:return bh(t,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",s);case 29:return bh(t,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",s);case 34:return ca(t,3792,3801,!0,r);case 37:return ca(t,6160,6169,!0,r);case 38:return ca(t,4160,4169,!0,r);case 39:return ca(t,2918,2927,!0,r);case 40:return ca(t,1776,1785,!0,r);case 43:return ca(t,3046,3055,!0,r);case 44:return ca(t,3174,3183,!0,r);case 45:return ca(t,3664,3673,!0,r);case 46:return ca(t,3872,3881,!0,r);case 3:default:return ca(t,48,57,!0,r)}},Z9="data-html2canvas-ignore",FU=function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new zTe,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,s=KTe(e,n);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var a=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=s.contentWindow,l=o.document,u=YTe(s).then(function(){return fo(r,void 0,void 0,function(){var d,h;return Gi(this,function(m){switch(m.label){case 0:return this.scrolledElements.forEach(eNe),o&&(o.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==n.top||o.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-n.left,o.scrollY-n.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:m.sent(),m.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,WTe(l)]:[3,4];case 3:m.sent(),m.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(l,h)}).then(function(){return s})]:[2,s]}})})});return l.open(),l.write(JTe(document.doctype)+"<html></html>"),ZTe(this.referenceElement.ownerDocument,a,i),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),u},t.prototype.createElementClone=function(e){if(FT(e,2))debugger;if(W9(e))return this.createCanvasClone(e);if(EU(e))return this.createVideoClone(e);if(_U(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return UT(n)&&(UT(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),SU(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return _S(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(a,i){return i&&typeof i.cssText=="string"?a+i.cssText:a},""),s=e.cloneNode(!1);return s.textContent=r,s}}catch(a){if(this.context.logger.error("Unable to access cssRules property",a),a.name!=="SecurityError")throw a}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var a=e.getContext("2d"),i=s.getContext("2d");if(i)if(!this.options.allowTaint&&a)i.putImageData(a.getImageData(0,0,e.width,e.height),0,0);else{var o=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,n,r){(!Lm(n)||!VTe(n)&&!n.hasAttribute(Z9)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!Lm(n)||!_U(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var s=this,a=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;a;a=a.nextSibling)if(Lm(a)&&X9(a)&&typeof a.assignedNodes=="function"){var i=a.assignedNodes();i.length&&i.forEach(function(o){return s.appendChildNode(n,o,r)})}else this.appendChildNode(n,a,r)},t.prototype.cloneNode=function(e,n){if(K9(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&Lm(e)&&(LT(e)||H2(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var a=r.getComputedStyle(e),i=r.getComputedStyle(e,":before"),o=r.getComputedStyle(e,":after");this.referenceElement===e&&LT(s)&&(this.clonedReferenceElement=s),RB(s)&&rNe(s);var l=this.counters.parse(new cU(this.context,a)),u=this.resolvePseudoContent(e,s,i,Ux.BEFORE);SU(e)&&(n=!0),EU(e)||this.cloneChildNodes(e,s,n),u&&s.insertBefore(u,s.firstChild);var d=this.resolvePseudoContent(e,s,o,Ux.AFTER);return d&&s.appendChild(d),this.counters.pop(l),(a&&(this.options.copyStyles||H2(e))&&!Y9(e)||n)&&_S(a,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(sb(e)||ab(e))&&(sb(s)||ab(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,s){var a=this;if(r){var i=r.content,o=n.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||r.display==="none")){this.counters.parse(new cU(this.context,r));var l=new O5e(this.context,r),u=o.createElement("html2canvaspseudoelement");_S(r,u),l.content.forEach(function(h){if(h.type===0)u.appendChild(o.createTextNode(h.value));else if(h.type===22){var m=o.createElement("img");m.src=h.value,m.style.opacity="1",u.appendChild(m)}else if(h.type===18){if(h.name==="attr"){var p=h.values.filter(cs);p.length&&u.appendChild(o.createTextNode(e.getAttribute(p[0].value)||""))}else if(h.name==="counter"){var y=h.values.filter(yp),x=y[0],C=y[1];if(x&&cs(x)){var S=a.counters.getCounterValue(x.value),k=C&&cs(C)?IT.parse(a.context,C.value):3;u.appendChild(o.createTextNode(mv(S,k,!1)))}}else if(h.name==="counters"){var I=h.values.filter(yp),x=I[0],F=I[1],C=I[2];if(x&&cs(x)){var U=a.counters.getCounterValues(x.value),R=C&&cs(C)?IT.parse(a.context,C.value):3,E=F&&F.type===0?F.value:"",_=U.map(function(D){return mv(D,R,!1)}).join(E);u.appendChild(o.createTextNode(_))}}}else if(h.type===20)switch(h.value){case"open-quote":u.appendChild(o.createTextNode(lU(l.quotes,a.quoteDepth++,!0)));break;case"close-quote":u.appendChild(o.createTextNode(lU(l.quotes,--a.quoteDepth,!1)));break;default:u.appendChild(o.createTextNode(h.value))}}),u.className=MT+" "+PT;var d=s===Ux.BEFORE?" "+MT:" "+PT;return H2(n)?n.className.baseValue+=d:n.className+=d,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Ux;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Ux||(Ux={}));var KTe=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(Z9,"true"),t.body.appendChild(n),n},$Te=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},WTe=function(t){return Promise.all([].slice.call(t.images,0).map($Te))},YTe=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var a=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(a),e(t))},50)}})},XTe=["all","d","content"],_S=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);XTe.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},JTe=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},ZTe=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},eNe=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},tNe=":before",nNe=":after",MT="___html2canvas___pseudoelement_before",PT="___html2canvas___pseudoelement_after",DU=`{
    content: "" !important;
    display: none !important;
}`,rNe=function(t){sNe(t,"."+MT+tNe+DU+`
         .`+PT+nNe+DU)},sNe=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},eV=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),aNe=function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(TS(e)||cNe(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return fo(this,void 0,void 0,function(){var n,r,s,a,i=this;return Gi(this,function(o){switch(o.label){case 0:return n=eV.isSameOrigin(e),r=!SS(e)&&this._options.useCORS===!0&&yi.SUPPORT_CORS_IMAGES&&!n,s=!SS(e)&&!n&&!TS(e)&&typeof this._options.proxy=="string"&&yi.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!SS(e)&&!TS(e)&&!s&&!r?[2]:(a=e,s?[4,this.proxy(a)]:[3,2]);case 1:a=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,u){var d=new Image;d.onload=function(){return l(d)},d.onerror=u,(uNe(a)||r)&&(d.crossOrigin="anonymous"),d.src=a,d.complete===!0&&setTimeout(function(){return l(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(a,i){var o=yi.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")a(l.response);else{var h=new FileReader;h.addEventListener("load",function(){return a(h.result)},!1),h.addEventListener("error",function(m){return i(m)},!1),h.readAsDataURL(l.response)}else i("Failed to proxy resource "+s+" with status code "+l.status)},l.onerror=i;var u=r.indexOf("?")>-1?"&":"?";if(l.open("GET",""+r+u+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),n._options.imageTimeout){var d=n._options.imageTimeout;l.timeout=d,l.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+s)}}l.send()})},t}(),iNe=/^data:image\/svg\+xml/i,oNe=/^data:image\/.*;base64,/i,lNe=/^data:image\/.*/i,cNe=function(t){return yi.SUPPORT_SVG_DRAWING||!ANe(t)},SS=function(t){return lNe.test(t)},uNe=function(t){return oNe.test(t)},TS=function(t){return t.substr(0,4)==="blob"},ANe=function(t){return t.substr(-3).toLowerCase()==="svg"||iNe.test(t)},tn=function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),Am=function(t,e,n){return new tn(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},Zy=function(){function t(e,n,r,s){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=s}return t.prototype.subdivide=function(e,n){var r=Am(this.start,this.startControl,e),s=Am(this.startControl,this.endControl,e),a=Am(this.endControl,this.end,e),i=Am(r,s,e),o=Am(s,a,e),l=Am(i,o,e);return n?new t(this.start,r,i,l):new t(l,o,a,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),ec=function(t){return t.type===1},dNe=function(){function t(e){var n=e.styles,r=e.bounds,s=ox(n.borderTopLeftRadius,r.width,r.height),a=s[0],i=s[1],o=ox(n.borderTopRightRadius,r.width,r.height),l=o[0],u=o[1],d=ox(n.borderBottomRightRadius,r.width,r.height),h=d[0],m=d[1],p=ox(n.borderBottomLeftRadius,r.width,r.height),y=p[0],x=p[1],C=[];C.push((a+l)/r.width),C.push((y+h)/r.width),C.push((i+x)/r.height),C.push((u+m)/r.height);var S=Math.max.apply(Math,C);S>1&&(a/=S,i/=S,l/=S,u/=S,h/=S,m/=S,y/=S,x/=S);var k=r.width-l,I=r.height-m,F=r.width-h,U=r.height-x,R=n.borderTopWidth,E=n.borderRightWidth,_=n.borderBottomWidth,B=n.borderLeftWidth,j=ps(n.paddingTop,e.bounds.width),D=ps(n.paddingRight,e.bounds.width),L=ps(n.paddingBottom,e.bounds.width),Q=ps(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||i>0?Ns(r.left+B/3,r.top+R/3,a-B/3,i-R/3,Qr.TOP_LEFT):new tn(r.left+B/3,r.top+R/3),this.topRightBorderDoubleOuterBox=a>0||i>0?Ns(r.left+k,r.top+R/3,l-E/3,u-R/3,Qr.TOP_RIGHT):new tn(r.left+r.width-E/3,r.top+R/3),this.bottomRightBorderDoubleOuterBox=h>0||m>0?Ns(r.left+F,r.top+I,h-E/3,m-_/3,Qr.BOTTOM_RIGHT):new tn(r.left+r.width-E/3,r.top+r.height-_/3),this.bottomLeftBorderDoubleOuterBox=y>0||x>0?Ns(r.left+B/3,r.top+U,y-B/3,x-_/3,Qr.BOTTOM_LEFT):new tn(r.left+B/3,r.top+r.height-_/3),this.topLeftBorderDoubleInnerBox=a>0||i>0?Ns(r.left+B*2/3,r.top+R*2/3,a-B*2/3,i-R*2/3,Qr.TOP_LEFT):new tn(r.left+B*2/3,r.top+R*2/3),this.topRightBorderDoubleInnerBox=a>0||i>0?Ns(r.left+k,r.top+R*2/3,l-E*2/3,u-R*2/3,Qr.TOP_RIGHT):new tn(r.left+r.width-E*2/3,r.top+R*2/3),this.bottomRightBorderDoubleInnerBox=h>0||m>0?Ns(r.left+F,r.top+I,h-E*2/3,m-_*2/3,Qr.BOTTOM_RIGHT):new tn(r.left+r.width-E*2/3,r.top+r.height-_*2/3),this.bottomLeftBorderDoubleInnerBox=y>0||x>0?Ns(r.left+B*2/3,r.top+U,y-B*2/3,x-_*2/3,Qr.BOTTOM_LEFT):new tn(r.left+B*2/3,r.top+r.height-_*2/3),this.topLeftBorderStroke=a>0||i>0?Ns(r.left+B/2,r.top+R/2,a-B/2,i-R/2,Qr.TOP_LEFT):new tn(r.left+B/2,r.top+R/2),this.topRightBorderStroke=a>0||i>0?Ns(r.left+k,r.top+R/2,l-E/2,u-R/2,Qr.TOP_RIGHT):new tn(r.left+r.width-E/2,r.top+R/2),this.bottomRightBorderStroke=h>0||m>0?Ns(r.left+F,r.top+I,h-E/2,m-_/2,Qr.BOTTOM_RIGHT):new tn(r.left+r.width-E/2,r.top+r.height-_/2),this.bottomLeftBorderStroke=y>0||x>0?Ns(r.left+B/2,r.top+U,y-B/2,x-_/2,Qr.BOTTOM_LEFT):new tn(r.left+B/2,r.top+r.height-_/2),this.topLeftBorderBox=a>0||i>0?Ns(r.left,r.top,a,i,Qr.TOP_LEFT):new tn(r.left,r.top),this.topRightBorderBox=l>0||u>0?Ns(r.left+k,r.top,l,u,Qr.TOP_RIGHT):new tn(r.left+r.width,r.top),this.bottomRightBorderBox=h>0||m>0?Ns(r.left+F,r.top+I,h,m,Qr.BOTTOM_RIGHT):new tn(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=y>0||x>0?Ns(r.left,r.top+U,y,x,Qr.BOTTOM_LEFT):new tn(r.left,r.top+r.height),this.topLeftPaddingBox=a>0||i>0?Ns(r.left+B,r.top+R,Math.max(0,a-B),Math.max(0,i-R),Qr.TOP_LEFT):new tn(r.left+B,r.top+R),this.topRightPaddingBox=l>0||u>0?Ns(r.left+Math.min(k,r.width-E),r.top+R,k>r.width+E?0:Math.max(0,l-E),Math.max(0,u-R),Qr.TOP_RIGHT):new tn(r.left+r.width-E,r.top+R),this.bottomRightPaddingBox=h>0||m>0?Ns(r.left+Math.min(F,r.width-B),r.top+Math.min(I,r.height-_),Math.max(0,h-E),Math.max(0,m-_),Qr.BOTTOM_RIGHT):new tn(r.left+r.width-E,r.top+r.height-_),this.bottomLeftPaddingBox=y>0||x>0?Ns(r.left+B,r.top+Math.min(U,r.height-_),Math.max(0,y-B),Math.max(0,x-_),Qr.BOTTOM_LEFT):new tn(r.left+B,r.top+r.height-_),this.topLeftContentBox=a>0||i>0?Ns(r.left+B+Q,r.top+R+j,Math.max(0,a-(B+Q)),Math.max(0,i-(R+j)),Qr.TOP_LEFT):new tn(r.left+B+Q,r.top+R+j),this.topRightContentBox=l>0||u>0?Ns(r.left+Math.min(k,r.width+B+Q),r.top+R+j,k>r.width+B+Q?0:l-B+Q,u-(R+j),Qr.TOP_RIGHT):new tn(r.left+r.width-(E+D),r.top+R+j),this.bottomRightContentBox=h>0||m>0?Ns(r.left+Math.min(F,r.width-(B+Q)),r.top+Math.min(I,r.height+R+j),Math.max(0,h-(E+D)),m-(_+L),Qr.BOTTOM_RIGHT):new tn(r.left+r.width-(E+D),r.top+r.height-(_+L)),this.bottomLeftContentBox=y>0||x>0?Ns(r.left+B+Q,r.top+U,Math.max(0,y-(B+Q)),x-(_+L),Qr.BOTTOM_LEFT):new tn(r.left+B+Q,r.top+r.height-(_+L))}return t}(),Qr;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Qr||(Qr={}));var Ns=function(t,e,n,r,s){var a=4*((Math.sqrt(2)-1)/3),i=n*a,o=r*a,l=t+n,u=e+r;switch(s){case Qr.TOP_LEFT:return new Zy(new tn(t,u),new tn(t,u-o),new tn(l-i,e),new tn(l,e));case Qr.TOP_RIGHT:return new Zy(new tn(t,e),new tn(t+i,e),new tn(l,u-o),new tn(l,u));case Qr.BOTTOM_RIGHT:return new Zy(new tn(l,e),new tn(l,e+o),new tn(t+i,u),new tn(t,u));case Qr.BOTTOM_LEFT:default:return new Zy(new tn(l,u),new tn(l-i,u),new tn(t,e+o),new tn(t,e))}},ib=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},fNe=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},ob=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},hNe=function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t}(),e2=function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t}(),mNe=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),pNe=function(t){return t.type===0},tV=function(t){return t.type===1},gNe=function(t){return t.type===2},RU=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},xNe=function(t,e,n,r,s){return t.map(function(a,i){switch(i){case 0:return a.add(e,n);case 1:return a.add(e+r,n);case 2:return a.add(e+r,n+s);case 3:return a.add(e,n+s)}return a})},nV=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),rV=function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new dNe(this.container),this.container.styles.opacity<1&&this.effects.push(new mNe(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new hNe(r,s,a))}if(this.container.styles.overflowX!==0){var i=ib(this.curves),o=ob(this.curves);RU(i,o)?this.effects.push(new e2(i,6)):(this.effects.push(new e2(i,2)),this.effects.push(new e2(o,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,s=this.effects.slice(0);r;){var a=r.effects.filter(function(l){return!tV(l)});if(n||r.container.styles.position!==0||!r.parent){if(s.unshift.apply(s,a),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=ib(r.curves),o=ob(r.curves);RU(i,o)||s.unshift(new e2(o,6))}}else s.unshift.apply(s,a);r=r.parent}return s.filter(function(l){return Va(l.target,e)})},t}(),OT=function(t,e,n,r){t.container.elements.forEach(function(s){var a=Va(s.flags,4),i=Va(s.flags,2),o=new rV(s,t);Va(s.styles.display,2048)&&r.push(o);var l=Va(s.flags,8)?[]:r;if(a||i){var u=a||s.styles.isPositioned()?n:e,d=new nV(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var h=s.styles.zIndex.order;if(h<0){var m=0;u.negativeZIndex.some(function(y,x){return h>y.element.container.styles.zIndex.order?(m=x,!1):m>0}),u.negativeZIndex.splice(m,0,d)}else if(h>0){var p=0;u.positiveZIndex.some(function(y,x){return h>=y.element.container.styles.zIndex.order?(p=x+1,!1):p>0}),u.positiveZIndex.splice(p,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);OT(o,d,a?d:n,l)}else s.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),OT(o,e,n,l);Va(s.flags,8)&&sV(s,l)})},sV=function(t,e){for(var n=t instanceof RT?t.start:1,r=t instanceof RT?t.reversed:!1,s=0;s<e.length;s++){var a=e[s];a.container instanceof Q9&&typeof a.container.value=="number"&&a.container.value!==0&&(n=a.container.value),a.listValue=mv(n,a.container.styles.listStyleType,!0),n+=r?-1:1}},vNe=function(t){var e=new rV(t,null),n=new nV(e),r=[];return OT(e,n,n,r),sV(e.container,r),n},LU=function(t,e){switch(e){case 0:return ic(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return ic(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return ic(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return ic(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},yNe=function(t,e){switch(e){case 0:return ic(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return ic(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return ic(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return ic(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},wNe=function(t,e){switch(e){case 0:return ic(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return ic(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return ic(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return ic(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},bNe=function(t,e){switch(e){case 0:return t2(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return t2(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return t2(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return t2(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},t2=function(t,e){var n=[];return ec(t)?n.push(t.subdivide(.5,!1)):n.push(t),ec(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},ic=function(t,e,n,r){var s=[];return ec(t)?s.push(t.subdivide(.5,!1)):s.push(t),ec(n)?s.push(n.subdivide(.5,!0)):s.push(n),ec(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),ec(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},aV=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},lb=function(t){var e=t.styles,n=t.bounds,r=ps(e.paddingLeft,n.width),s=ps(e.paddingRight,n.width),a=ps(e.paddingTop,n.width),i=ps(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,a+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+s),-(e.borderTopWidth+e.borderBottomWidth+a+i))},CNe=function(t,e){return t===0?e.bounds:t===2?lb(e):aV(e)},ENe=function(t,e){return t===0?e.bounds:t===2?lb(e):aV(e)},NS=function(t,e,n){var r=CNe(Nm(t.styles.backgroundOrigin,e),t),s=ENe(Nm(t.styles.backgroundClip,e),t),a=_Ne(Nm(t.styles.backgroundSize,e),n,r),i=a[0],o=a[1],l=ox(Nm(t.styles.backgroundPosition,e),r.width-i,r.height-o),u=SNe(Nm(t.styles.backgroundRepeat,e),l,a,r,s),d=Math.round(r.left+l[0]),h=Math.round(r.top+l[1]);return[u,d,h,i,o]},dm=function(t){return cs(t)&&t.value===tp.AUTO},n2=function(t){return typeof t=="number"},_Ne=function(t,e,n){var r=e[0],s=e[1],a=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(Ba(i)&&o&&Ba(o))return[ps(i,n.width),ps(o,n.height)];var l=n2(a);if(cs(i)&&(i.value===tp.CONTAIN||i.value===tp.COVER)){if(n2(a)){var u=n.width/n.height;return u<a!=(i.value===tp.COVER)?[n.width,n.width/a]:[n.height*a,n.height]}return[n.width,n.height]}var d=n2(r),h=n2(s),m=d||h;if(dm(i)&&(!o||dm(o))){if(d&&h)return[r,s];if(!l&&!m)return[n.width,n.height];if(m&&l){var p=d?r:s*a,y=h?s:r/a;return[p,y]}var x=d?r:n.width,C=h?s:n.height;return[x,C]}if(l){var S=0,k=0;return Ba(i)?S=ps(i,n.width):Ba(o)&&(k=ps(o,n.height)),dm(i)?S=k*a:(!o||dm(o))&&(k=S/a),[S,k]}var I=null,F=null;if(Ba(i)?I=ps(i,n.width):o&&Ba(o)&&(F=ps(o,n.height)),I!==null&&(!o||dm(o))&&(F=d&&h?I/r*s:n.height),F!==null&&dm(i)&&(I=d&&h?F/s*r:n.width),I!==null&&F!==null)return[I,F];throw new Error("Unable to calculate background-size for element")},Nm=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},SNe=function(t,e,n,r,s){var a=e[0],i=e[1],o=n[0],l=n[1];switch(t){case 2:return[new tn(Math.round(r.left),Math.round(r.top+i)),new tn(Math.round(r.left+r.width),Math.round(r.top+i)),new tn(Math.round(r.left+r.width),Math.round(l+r.top+i)),new tn(Math.round(r.left),Math.round(l+r.top+i))];case 3:return[new tn(Math.round(r.left+a),Math.round(r.top)),new tn(Math.round(r.left+a+o),Math.round(r.top)),new tn(Math.round(r.left+a+o),Math.round(r.height+r.top)),new tn(Math.round(r.left+a),Math.round(r.height+r.top))];case 1:return[new tn(Math.round(r.left+a),Math.round(r.top+i)),new tn(Math.round(r.left+a+o),Math.round(r.top+i)),new tn(Math.round(r.left+a+o),Math.round(r.top+i+l)),new tn(Math.round(r.left+a),Math.round(r.top+i+l))];default:return[new tn(Math.round(s.left),Math.round(s.top)),new tn(Math.round(s.left+s.width),Math.round(s.top)),new tn(Math.round(s.left+s.width),Math.round(s.height+s.top)),new tn(Math.round(s.left),Math.round(s.height+s.top))]}},TNe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",UU="Hidden Text",NNe=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),s=this._document.createElement("img"),a=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),s.src=TNe,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=n,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(UU)),r.appendChild(a),r.appendChild(s);var o=s.offsetTop-a.offsetTop+2;r.removeChild(a),r.appendChild(this._document.createTextNode(UU)),r.style.lineHeight="normal",s.style.verticalAlign="super";var l=s.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:o,middle:l}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t}(),iV=function(){function t(e,n){this.context=e,this.options=n}return t}(),BNe=1e4,kNe=function(t){Xc(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s._activeEffects=[],s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),r.canvas||(s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px"),s.fontMetrics=new NNe(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),s}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(s){return r.applyEffect(s)})},e.prototype.applyEffect=function(n){this.ctx.save(),gNe(n)&&(this.ctx.globalAlpha=n.opacity),pNe(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),tV(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return fo(this,void 0,void 0,function(){var r;return Gi(this,function(s){switch(s.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return fo(this,void 0,void 0,function(){return Gi(this,function(r){switch(r.label){case 0:if(Va(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,s){var a=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+s);else{var i=FB(n.text);i.reduce(function(o,l){return a.ctx.fillText(l,o,n.bounds.top+s),o+a.ctx.measureText(l).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),s=LNe(n.fontFamily).join(", "),a=r1(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,a,s].join(" "),s,a]},e.prototype.renderTextNode=function(n,r){return fo(this,void 0,void 0,function(){var s,a,i,o,l,u,d,h,m=this;return Gi(this,function(p){return s=this.createFontStyle(r),a=s[0],i=s[1],o=s[2],this.ctx.font=a,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(i,o),u=l.baseline,d=l.middle,h=r.paintOrder,n.textBounds.forEach(function(y){h.forEach(function(x){switch(x){case 0:m.ctx.fillStyle=ni(r.color),m.renderTextWithLetterSpacing(y,r.letterSpacing,u);var C=r.textShadow;C.length&&y.text.trim().length&&(C.slice(0).reverse().forEach(function(S){m.ctx.shadowColor=ni(S.color),m.ctx.shadowOffsetX=S.offsetX.number*m.options.scale,m.ctx.shadowOffsetY=S.offsetY.number*m.options.scale,m.ctx.shadowBlur=S.blur.number,m.renderTextWithLetterSpacing(y,r.letterSpacing,u)}),m.ctx.shadowColor="",m.ctx.shadowOffsetX=0,m.ctx.shadowOffsetY=0,m.ctx.shadowBlur=0),r.textDecorationLine.length&&(m.ctx.fillStyle=ni(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(S){switch(S){case 1:m.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top+u),y.bounds.width,1);break;case 2:m.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top),y.bounds.width,1);break;case 3:m.ctx.fillRect(y.bounds.left,Math.ceil(y.bounds.top+d),y.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&y.text.trim().length&&(m.ctx.strokeStyle=ni(r.webkitTextStrokeColor),m.ctx.lineWidth=r.webkitTextStrokeWidth,m.ctx.lineJoin=window.chrome?"miter":"round",m.ctx.strokeText(y.text,y.bounds.left,y.bounds.top+u)),m.ctx.strokeStyle="",m.ctx.lineWidth=0,m.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,s){if(s&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var a=lb(n),i=ob(r);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,n.intrinsicWidth,n.intrinsicHeight,a.left,a.top,a.width,a.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return fo(this,void 0,void 0,function(){var r,s,a,i,o,l,k,k,u,d,h,m,F,p,y,U,x,C,S,k,I,F,U;return Gi(this,function(R){switch(R.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,s=n.curves,a=r.styles,i=0,o=r.textNodes,R.label=1;case 1:return i<o.length?(l=o[i],[4,this.renderTextNode(l,a)]):[3,4];case 2:R.sent(),R.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof P9))return[3,8];R.label=5;case 5:return R.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return k=R.sent(),this.renderReplacedElement(r,s,k),[3,8];case 7:return R.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof O9&&this.renderReplacedElement(r,s,r.canvas),!(r instanceof j9))return[3,12];R.label=9;case 9:return R.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return k=R.sent(),this.renderReplacedElement(r,s,k),[3,12];case 11:return R.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof z9&&r.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,u.render(r.tree)]):[3,14];case 13:d=R.sent(),r.width&&r.height&&this.ctx.drawImage(d,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),R.label=14;case 14:if(r instanceof DB&&(h=Math.min(r.bounds.width,r.bounds.height),r.type===nb?r.checked&&(this.ctx.save(),this.path([new tn(r.bounds.left+h*.39363,r.bounds.top+h*.79),new tn(r.bounds.left+h*.16,r.bounds.top+h*.5549),new tn(r.bounds.left+h*.27347,r.bounds.top+h*.44071),new tn(r.bounds.left+h*.39694,r.bounds.top+h*.5649),new tn(r.bounds.left+h*.72983,r.bounds.top+h*.23),new tn(r.bounds.left+h*.84,r.bounds.top+h*.34085),new tn(r.bounds.left+h*.39363,r.bounds.top+h*.79)]),this.ctx.fillStyle=ni(CU),this.ctx.fill(),this.ctx.restore()):r.type===rb&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+h/2,r.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=ni(CU),this.ctx.fill(),this.ctx.restore())),INe(r)&&r.value.length){switch(m=this.createFontStyle(a),F=m[0],p=m[1],y=this.fontMetrics.getMetrics(F,p).baseline,this.ctx.font=F,this.ctx.fillStyle=ni(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=DNe(r.styles.textAlign),U=lb(r),x=0,r.styles.textAlign){case 1:x+=U.width/2;break;case 2:x+=U.width;break}C=U.add(x,0,0,-U.height/2+1),this.ctx.save(),this.path([new tn(U.left,U.top),new tn(U.left+U.width,U.top),new tn(U.left+U.width,U.top+U.height),new tn(U.left,U.top+U.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Lx(r.value,C),a.letterSpacing,y),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Va(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(S=r.styles.listStyleImage,S.type!==0)return[3,18];k=void 0,I=S.url,R.label=15;case 15:return R.trys.push([15,17,,18]),[4,this.context.cache.match(I)];case 16:return k=R.sent(),this.ctx.drawImage(k,r.bounds.left-(k.width+10),r.bounds.top),[3,18];case 17:return R.sent(),this.context.logger.error("Error loading list-style-image "+I),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(F=this.createFontStyle(a)[0],this.ctx.font=F,this.ctx.fillStyle=ni(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",U=new rd(r.bounds.left,r.bounds.top+ps(r.styles.paddingTop,r.bounds.width),r.bounds.width,iU(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Lx(n.listValue,U),a.letterSpacing,iU(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),R.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return fo(this,void 0,void 0,function(){var r,s,S,a,i,S,o,l,S,u,d,S,h,m,S,p,y,S,x,C,S;return Gi(this,function(k){switch(k.label){case 0:if(Va(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:k.sent(),r=0,s=n.negativeZIndex,k.label=2;case 2:return r<s.length?(S=s[r],[4,this.renderStack(S)]):[3,5];case 3:k.sent(),k.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:k.sent(),a=0,i=n.nonInlineLevel,k.label=7;case 7:return a<i.length?(S=i[a],[4,this.renderNode(S)]):[3,10];case 8:k.sent(),k.label=9;case 9:return a++,[3,7];case 10:o=0,l=n.nonPositionedFloats,k.label=11;case 11:return o<l.length?(S=l[o],[4,this.renderStack(S)]):[3,14];case 12:k.sent(),k.label=13;case 13:return o++,[3,11];case 14:u=0,d=n.nonPositionedInlineLevel,k.label=15;case 15:return u<d.length?(S=d[u],[4,this.renderStack(S)]):[3,18];case 16:k.sent(),k.label=17;case 17:return u++,[3,15];case 18:h=0,m=n.inlineLevel,k.label=19;case 19:return h<m.length?(S=m[h],[4,this.renderNode(S)]):[3,22];case 20:k.sent(),k.label=21;case 21:return h++,[3,19];case 22:p=0,y=n.zeroOrAutoZIndexOrTransformedOrOpacity,k.label=23;case 23:return p<y.length?(S=y[p],[4,this.renderStack(S)]):[3,26];case 24:k.sent(),k.label=25;case 25:return p++,[3,23];case 26:x=0,C=n.positiveZIndex,k.label=27;case 27:return x<C.length?(S=C[x],[4,this.renderStack(S)]):[3,30];case 28:k.sent(),k.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(s,a){var i=ec(s)?s.start:s;a===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),ec(s)&&r.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(n,r,s,a){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(s,a),this.ctx.fill(),this.ctx.translate(-s,-a)},e.prototype.resizeImage=function(n,r,s){var a;if(n.width===r&&n.height===s)return n;var i=(a=this.canvas.ownerDocument)!==null&&a!==void 0?a:document,o=i.createElement("canvas");o.width=Math.max(1,r),o.height=Math.max(1,s);var l=o.getContext("2d");return l.drawImage(n,0,0,n.width,n.height,0,0,r,s),o},e.prototype.renderBackgroundImage=function(n){return fo(this,void 0,void 0,function(){var r,s,a,i,o,l;return Gi(this,function(u){switch(u.label){case 0:r=n.styles.backgroundImage.length-1,s=function(d){var h,m,p,j,Y,ne,Q,H,_,y,j,Y,ne,Q,H,x,C,S,k,I,F,U,R,E,_,B,j,D,L,Q,H,te,Y,ne,V,J,K,ie,O,W,Z,re;return Gi(this,function(se){switch(se.label){case 0:if(d.type!==0)return[3,5];h=void 0,m=d.url,se.label=1;case 1:return se.trys.push([1,3,,4]),[4,a.context.cache.match(m)];case 2:return h=se.sent(),[3,4];case 3:return se.sent(),a.context.logger.error("Error loading background-image "+m),[3,4];case 4:return h&&(p=NS(n,r,[h.width,h.height,h.width/h.height]),j=p[0],Y=p[1],ne=p[2],Q=p[3],H=p[4],_=a.ctx.createPattern(a.resizeImage(h,Q,H),"repeat"),a.renderRepeat(j,_,Y,ne)),[3,6];case 5:pSe(d)?(y=NS(n,r,[null,null,null]),j=y[0],Y=y[1],ne=y[2],Q=y[3],H=y[4],x=ASe(d.angle,Q,H),C=x[0],S=x[1],k=x[2],I=x[3],F=x[4],U=document.createElement("canvas"),U.width=Q,U.height=H,R=U.getContext("2d"),E=R.createLinearGradient(S,I,k,F),sU(d.stops,C).forEach(function(de){return E.addColorStop(de.stop,ni(de.color))}),R.fillStyle=E,R.fillRect(0,0,Q,H),Q>0&&H>0&&(_=a.ctx.createPattern(U,"repeat"),a.renderRepeat(j,_,Y,ne))):gSe(d)&&(B=NS(n,r,[null,null,null]),j=B[0],D=B[1],L=B[2],Q=B[3],H=B[4],te=d.position.length===0?[BB]:d.position,Y=ps(te[0],Q),ne=ps(te[te.length-1],H),V=dSe(d,Y,ne,Q,H),J=V[0],K=V[1],J>0&&K>0&&(ie=a.ctx.createRadialGradient(D+Y,L+ne,0,D+Y,L+ne,J),sU(d.stops,J*2).forEach(function(de){return ie.addColorStop(de.stop,ni(de.color))}),a.path(j),a.ctx.fillStyle=ie,J!==K?(O=n.bounds.left+.5*n.bounds.width,W=n.bounds.top+.5*n.bounds.height,Z=K/J,re=1/Z,a.ctx.save(),a.ctx.translate(O,W),a.ctx.transform(1,0,0,Z,0,0),a.ctx.translate(-O,-W),a.ctx.fillRect(D,re*(L-W)+W,Q,H*re),a.ctx.restore()):a.ctx.fill())),se.label=6;case 6:return r--,[2]}})},a=this,i=0,o=n.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<o.length?(l=o[i],[5,s(l)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,s){return fo(this,void 0,void 0,function(){return Gi(this,function(a){return this.path(LU(s,r)),this.ctx.fillStyle=ni(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,s,a){return fo(this,void 0,void 0,function(){var i,o;return Gi(this,function(l){switch(l.label){case 0:return r<3?[4,this.renderSolidBorder(n,s,a)]:[3,2];case 1:return l.sent(),[2];case 2:return i=yNe(a,s),this.path(i),this.ctx.fillStyle=ni(n),this.ctx.fill(),o=wNe(a,s),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return fo(this,void 0,void 0,function(){var r,s,a,i,o,l,u,d,h=this;return Gi(this,function(m){switch(m.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,s=!Tf(r.backgroundColor)||r.backgroundImage.length,a=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=FNe(Nm(r.backgroundClip,0),n.curves),s||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),Tf(r.backgroundColor)||(this.ctx.fillStyle=ni(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:m.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(p){h.ctx.save();var y=ib(n.curves),x=p.inset?0:BNe,C=xNe(y,-x+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(h.path(y),h.ctx.clip(),h.mask(C)):(h.mask(y),h.ctx.clip(),h.path(C)),h.ctx.shadowOffsetX=p.offsetX.number+x,h.ctx.shadowOffsetY=p.offsetY.number,h.ctx.shadowColor=ni(p.color),h.ctx.shadowBlur=p.blur.number,h.ctx.fillStyle=p.inset?ni(p.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),m.label=2;case 2:o=0,l=0,u=a,m.label=3;case 3:return l<u.length?(d=u[l],d.style!==0&&!Tf(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,2)]:[3,11]):[3,13];case 4:return m.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,3)];case 6:return m.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,n.curves)];case 8:return m.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,n.curves)];case 10:m.sent(),m.label=11;case 11:o++,m.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,s,a,i){return fo(this,void 0,void 0,function(){var o,l,u,d,h,m,p,y,x,C,S,k,I,F,U,R,U,R;return Gi(this,function(E){return this.ctx.save(),o=bNe(a,s),l=LU(a,s),i===2&&(this.path(l),this.ctx.clip()),ec(l[0])?(u=l[0].start.x,d=l[0].start.y):(u=l[0].x,d=l[0].y),ec(l[1])?(h=l[1].end.x,m=l[1].end.y):(h=l[1].x,m=l[1].y),s===0||s===2?p=Math.abs(u-h):p=Math.abs(d-m),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(l.slice(0,2)),y=r<3?r*3:r*2,x=r<3?r*2:r,i===3&&(y=r,x=r),C=!0,p<=y*2?C=!1:p<=y*2+x?(S=p/(2*y+x),y*=S,x*=S):(k=Math.floor((p+x)/(y+x)),I=(p-k*y)/(k-1),F=(p-(k+1)*y)/k,x=F<=0||Math.abs(x-I)<Math.abs(x-F)?I:F),C&&(i===3?this.ctx.setLineDash([0,y+x]):this.ctx.setLineDash([y,x])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=ni(n),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(ec(l[0])&&(U=l[3],R=l[0],this.ctx.beginPath(),this.formatPath([new tn(U.end.x,U.end.y),new tn(R.start.x,R.start.y)]),this.ctx.stroke()),ec(l[1])&&(U=l[1],R=l[2],this.ctx.beginPath(),this.formatPath([new tn(U.end.x,U.end.y),new tn(R.start.x,R.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return fo(this,void 0,void 0,function(){var r;return Gi(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ni(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=vNe(n),[4,this.renderStack(r)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(iV),INe=function(t){return t instanceof V9||t instanceof H9?!0:t instanceof DB&&t.type!==rb&&t.type!==nb},FNe=function(t,e){switch(t){case 0:return ib(e);case 2:return fNe(e);case 1:default:return ob(e)}},DNe=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},RNe=["-apple-system","system-ui"],LNe=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return RNe.indexOf(e)===-1}):t},UNe=function(t){Xc(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=r,s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),s}return e.prototype.render=function(n){return fo(this,void 0,void 0,function(){var r,s;return Gi(this,function(a){switch(a.label){case 0:return r=DT(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,MNe(r)];case 1:return s=a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ni(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(iV),MNe=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},PNe=function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Ry([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Ry([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Ry([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Ry([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),ONe=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new PNe({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new aNe(this,e)}return t.instanceCount=1,t}(),cb=function(t,e){return e===void 0&&(e={}),jNe(t,e)};typeof window<"u"&&eV.setContext(window);var jNe=function(t,e){return fo(void 0,void 0,void 0,function(){var n,r,s,a,i,o,l,u,d,h,m,p,y,x,C,S,k,I,F,U,E,R,E,_,B,j,D,L,Q,H,te,Y,ne,V,J,K,ie,O,W,Z;return Gi(this,function(re){switch(re.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return s={allowTaint:(_=e.allowTaint)!==null&&_!==void 0?_:!1,imageTimeout:(B=e.imageTimeout)!==null&&B!==void 0?B:15e3,proxy:e.proxy,useCORS:(j=e.useCORS)!==null&&j!==void 0?j:!1},a=xT({logging:(D=e.logging)!==null&&D!==void 0?D:!0,cache:e.cache},s),i={windowWidth:(L=e.windowWidth)!==null&&L!==void 0?L:r.innerWidth,windowHeight:(Q=e.windowHeight)!==null&&Q!==void 0?Q:r.innerHeight,scrollX:(H=e.scrollX)!==null&&H!==void 0?H:r.pageXOffset,scrollY:(te=e.scrollY)!==null&&te!==void 0?te:r.pageYOffset},o=new rd(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),l=new ONe(a,o),u=(Y=e.foreignObjectRendering)!==null&&Y!==void 0?Y:!1,d={allowTaint:(ne=e.allowTaint)!==null&&ne!==void 0?ne:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new FU(l,t,d),m=h.clonedReferenceElement,m?[4,h.toIFrame(n,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return p=re.sent(),y=RB(m)||HTe(m)?xEe(m.ownerDocument):EC(l,m),x=y.width,C=y.height,S=y.left,k=y.top,I=QNe(l,m,e.backgroundColor),F={canvas:e.canvas,backgroundColor:I,scale:(J=(V=e.scale)!==null&&V!==void 0?V:r.devicePixelRatio)!==null&&J!==void 0?J:1,x:((K=e.x)!==null&&K!==void 0?K:0)+S,y:((ie=e.y)!==null&&ie!==void 0?ie:0)+k,width:(O=e.width)!==null&&O!==void 0?O:Math.ceil(x),height:(W=e.height)!==null&&W!==void 0?W:Math.ceil(C)},u?(l.logger.debug("Document cloned, using foreign object rendering"),E=new UNe(l,F),[4,E.render(m)]):[3,3];case 2:return U=re.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+S+","+k+" with size "+x+"x"+C+" using computed rendering"),l.logger.debug("Starting DOM parsing"),R=q9(l,m),I===R.styles.backgroundColor&&(R.styles.backgroundColor=WA.TRANSPARENT),l.logger.debug("Starting renderer for element at "+F.x+","+F.y+" with size "+F.width+"x"+F.height),E=new kNe(l,F),[4,E.render(R)];case 4:U=re.sent(),re.label=5;case 5:return(!((Z=e.removeContainer)!==null&&Z!==void 0)||Z)&&(FU.destroy(p)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,U]}})})},QNe=function(t,e,n){var r=e.ownerDocument,s=r.documentElement?Dx(t,getComputedStyle(r.documentElement).backgroundColor):WA.TRANSPARENT,a=r.body?Dx(t,getComputedStyle(r.body).backgroundColor):WA.TRANSPARENT,i=typeof n=="string"?Dx(t,n):n===null?WA.TRANSPARENT:4294967295;return e===r.documentElement?Tf(s)?Tf(a)?i:a:s:i};const HNe=Object.freeze(Object.defineProperty({__proto__:null,default:cb},Symbol.toStringTag,{value:"Module"})),RC="proyectos_interdisciplinarios",oV="entregas_interdisciplinarias",VNe="usuarios",LB=t=>{const e=t.data();return{id:t.id,...e}},zNe=t=>{const e=an(Lt(It,RC),sr("nombreProyecto","asc"));return En(e,r=>{const s=r.docs.map(a=>LB(a));t(s)},r=>{console.error("Error al suscribirse a las planificaciones:",r),t([])})},GNe=async t=>{try{return(await Cs(Lt(It,RC),t)).id}catch(e){throw console.error("Error al crear la planificación:",e),new Error("No se pudo crear la planificación.")}},MU=async(t,e)=>{try{const{id:n,...r}=e,s=Cn(It,RC,t);await io(s,r)}catch(n){throw console.error("Error al actualizar la planificación:",n),new Error("No se pudo actualizar la planificación.")}},qNe=async t=>{try{const e=Cn(It,RC,t);await Ka(e)}catch(e){throw console.error("Error al eliminar la planificación:",e),new Error("No se pudo eliminar la planificación.")}},KNe=(t,e)=>{const n=an(Lt(It,oV),Vr("planificacionId","==",t));return En(n,s=>{const a=s.docs.map(i=>LB(i));e(a)},s=>{console.error("Error al suscribirse a las entregas:",s),e([])})},PU=async(t,e)=>{try{const n=Cn(It,oV,t);await io(n,{feedbackProfesor:e,fechaFeedback:mn.fromDate(new Date)},{merge:!0})}catch(n){throw console.error("Error al guardar la retroalimentación:",n),new Error("No se pudo guardar la retroalimentación.")}},$Ne=t=>{const e=an(Lt(It,VNe));return En(e,r=>{const s=r.docs.map(a=>LB(a));t(s)},r=>{console.error("Error al suscribirse a todos los usuarios:",r),t([])})},WNe=({planificaciones:t,onActivityUpdate:e})=>{const[n,r]=G.useState(null),s=G.useMemo(()=>{const l=[];return t.forEach(u=>{(u.actividades||[]).forEach(d=>l.push({...d,planId:u.id,type:"activity"})),(u.fechasClave||[]).forEach(d=>l.push({id:d.id,planId:u.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:u.docentesResponsables,asignaturaPrincipal:"Milestone"}))}),l.sort((u,d)=>new Date(u.fechaInicio).getTime()-new Date(d.fechaInicio).getTime())},[t]),a=G.useCallback(l=>{if(l.type==="keyDate")return{text:"Fecha Clave",color:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${l.fechaInicio}T00:00:00`),h=new Date(`${l.fechaFin}T00:00:00`);return h<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&h>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"}},[]),i=({name:l})=>{const u=(l||"").split(" ").map(p=>p[0]).join("").toUpperCase(),d=p=>{let y=0;for(let x=0;x<p.length;x++)y=p.charCodeAt(x)+((y<<5)-y);return y},h=["bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-300","bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300","bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-300","bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300","bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300","bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"],m=Math.abs(d(l))%h.length;return c.jsx("div",{className:`w-9 h-9 rounded-full ${h[m]} flex items-center justify-center font-bold text-sm ring-2 ring-white dark:ring-slate-800`,children:u.slice(0,2)})},o=({data:l,onClose:u,onSave:d})=>{const[h,m]=G.useState(l.activity),p=x=>{m({...h,[x.target.name]:x.target.value})},y=()=>{d(l.planId,h),u()};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-6 animate-fade-in-up",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Editar Actividad"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Nombre"}),c.jsx("input",{name:"nombre",value:h.nombre,onChange:p,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Responsables"}),c.jsx("input",{name:"responsables",value:h.responsables,onChange:p,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Inicio"}),c.jsx("input",{type:"date",name:"fechaInicio",value:h.fechaInicio,onChange:p,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Fin"}),c.jsx("input",{type:"date",name:"fechaFin",value:h.fechaFin,onChange:p,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[c.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 dark:bg-slate-600 rounded-md font-semibold",children:"Cancelar"}),c.jsx("button",{onClick:y,className:"px-4 py-2 bg-amber-500 text-white rounded-md font-semibold",children:"Guardar"})]})]})})};return s.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cronograma del Proyecto"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades para mostrar. Cree una planificación primero."})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-slate-200",children:"Cronograma del Proyecto"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Tarea"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Inicio"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Fin"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Asignado"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:s.map(l=>{const u=a(l),d=l.type==="activity";return c.jsxs("tr",{className:`${d?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>d&&r({planId:l.planId,activity:l}),children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base font-medium text-slate-900 dark:text-slate-200",children:l.nombre}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${u.color}`,children:u.text})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaInicio}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaFin}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx(i,{name:l.responsables||"N/A"})})]},l.id)})})]})}),n&&c.jsx(o,{data:n,onClose:()=>r(null),onSave:e})]})},YNe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),XNe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 21a6 6 0 006-5.197M15 12a4 4 0 110-8 4 4 0 010 8z"})}),JNe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),c.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5zm0 0v6"})]}),ZNe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),e4e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),t4e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6H8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),n4e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),r4e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),jT=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Yd=({icon:t,label:e,children:n,aiButton:r})=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-slate-400 font-medium",children:[t,c.jsx("span",{children:e})]}),r]}),n]}),s4e=({initialPlan:t,onSave:e,onCancel:n})=>{const[r,s]=G.useState(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[a,i]=G.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""}),[o,l]=G.useState({nombre:"",fecha:""}),[u,d]=G.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[h,m]=G.useState(!1),[p,y]=G.useState(!1),[x,C]=G.useState(!1);G.useEffect(()=>{s(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[t]);const S=async _=>{if(!r.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}_==="objetivos"?m(!0):y(!0);const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";let j="";_==="objetivos"?j=`Basado en la siguiente descripción de un proyecto escolar interdisciplinario, genera 3 a 5 objetivos de aprendizaje claros, medibles y concisos. La respuesta debe ser solo el texto de los objetivos, formateado en una lista con guiones.
            Descripción del Proyecto: "${r.descripcionProyecto}"`:j=`Basado en la siguiente descripción y objetivos de un proyecto escolar interdisciplinario, genera una lista de 5 a 7 indicadores de logro concretos y observables que permitan evaluar el cumplimiento de los objetivos. La respuesta debe ser solo el texto de los indicadores, formateado en una lista con guiones.
            Descripción del Proyecto: "${r.descripcionProyecto}"
            Objetivos (si existen): "${r.objetivos||"Aún no definidos, genéralos a partir de la descripción."}"`;try{const te=(await(await new Ra(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(j)).response).text();s(Y=>({...Y,[_]:te.replace(/(\*\*|\*)/g,"")}))}catch(D){console.error(`Error al generar ${_}`,D),alert(`Hubo un error al generar los ${_}. Inténtelo de nuevo.`)}finally{_==="objetivos"?m(!1):y(!1)}},k=async()=>{if(!r.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}C(!0);const _="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",B=`
            Basado en la descripción de un proyecto escolar, genera una estructura completa. La respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            Descripción del proyecto: "${r.descripcionProyecto}"
            Docentes responsables: "${r.docentesResponsables}"
            Asignaturas involucradas: "${r.asignaturas.join(", ")}"

            El JSON debe tener tres claves: 'actividades', 'fechasClave', y 'tareas'.
            1. 'actividades': Un array de 3 a 5 objetos. Cada objeto debe tener: "nombre" (string), "fechaInicio" (string "YYYY-MM-DD"), "fechaFin" (string "YYYY-MM-DD"), y "responsables" (string, uno de los docentes).
            2. 'fechasClave': Un array de 2 a 3 objetos (hitos importantes). Cada objeto debe tener: "nombre" (string) y "fecha" (string "YYYY-MM-DD").
            3. 'tareas': Un array de 2 a 3 objetos (tareas para estudiantes). Cada objeto debe tener: "instrucciones" (string detallado) y "fechaEntrega" (string "YYYY-MM-DD").
            Las fechas deben ser lógicas y secuenciales. Asume que el proyecto comienza hoy.
        `;try{const te=(await(await new Ra(_).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(B)).response).text().replace(/^```json\s*|```\s*$/g,""),Y=JSON.parse(te);s(ne=>{var V,J,K;return{...ne,actividades:((V=Y.actividades)==null?void 0:V.map(ie=>({...ie,id:crypto.randomUUID()})))||ne.actividades,fechasClave:((J=Y.fechasClave)==null?void 0:J.map(ie=>({...ie,id:crypto.randomUUID()})))||ne.fechasClave,tareas:((K=Y.tareas)==null?void 0:K.map((ie,O)=>({...ie,id:crypto.randomUUID(),numero:O+1})))||ne.tareas}})}catch(j){console.error("Error al generar la estructura del proyecto:",j),alert("No se pudo generar la estructura del proyecto. Intente de nuevo.")}finally{C(!1)}},I=_=>{s(B=>({...B,[_.target.name]:_.target.value}))},F=(_,B)=>{s(j=>{const D=j[_],L=D.includes(B)?D.filter(Q=>Q!==B):[...D,B];return{...j,[_]:L}})},U=()=>{if(!a.nombre||!a.fechaInicio||!a.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}s(_=>({..._,actividades:[..._.actividades||[],{...a,id:crypto.randomUUID()}]})),i({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""})},R=()=>{!o.nombre||!o.fecha||(s(_=>({..._,fechasClave:[..._.fechasClave||[],{...o,id:crypto.randomUUID()}]})),l({nombre:"",fecha:""}))},E=()=>{var B;if(!u.instrucciones||!u.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}const _={id:crypto.randomUUID(),numero:(((B=r.tareas)==null?void 0:B.length)||0)+1,...u};s(j=>({...j,tareas:[...j.tareas||[],_]})),d({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return c.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[c.jsx("div",{className:"text-center mb-12",children:c.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-800 dark:text-slate-200",children:t?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})}),c.jsxs("div",{className:"space-y-6",children:[c.jsx(Yd,{icon:c.jsx(YNe,{}),label:"Nombre del Proyecto",children:c.jsx("input",{name:"nombreProyecto",value:r.nombreProyecto,onChange:I,placeholder:"Ingrese el nombre del proyecto...",className:"w-full mt-1 bg-transparent text-lg font-semibold focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Yd,{icon:c.jsx(XNe,{}),label:"Profesores",children:c.jsx("input",{name:"docentesResponsables",value:r.docentesResponsables,onChange:I,placeholder:"Ingrese nombres separados por comas...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Yd,{icon:c.jsx(JNe,{}),label:"Cursos",children:c.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 mt-2",children:Js.map(_=>c.jsx("button",{type:"button",onClick:()=>F("cursos",_),className:`w-full text-center p-2 rounded-md text-sm transition-colors ${r.cursos.includes(_)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:_},_))})}),c.jsx(Yd,{icon:c.jsx(ZNe,{}),label:"Asignaturas",children:c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 mt-2",children:po.map(_=>c.jsx("button",{type:"button",onClick:()=>F("asignaturas",_),className:`w-full text-left p-2 rounded-md text-sm transition-colors ${r.asignaturas.includes(_)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:_},_))})}),c.jsx(Yd,{icon:c.jsx(e4e,{}),label:"Descripción del Proyecto",children:c.jsx("textarea",{name:"descripcionProyecto",value:r.descripcionProyecto,onChange:I,placeholder:"Detalle aquí la metodología, el producto final esperado y el propósito del proyecto. Esta información es clave para la IA.",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[100px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Yd,{icon:c.jsx(t4e,{}),label:"Objetivos",aiButton:c.jsx("button",{type:"button",onClick:()=>S("objetivos"),disabled:!r.descripcionProyecto.trim()||h,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:c.jsx(jT,{})}),children:h?c.jsx("div",{className:"p-4 text-center",children:"Generando..."}):c.jsx("textarea",{name:"objetivos",value:r.objetivos,onChange:I,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Yd,{icon:c.jsx(n4e,{}),label:"Indicadores de Éxito",aiButton:c.jsx("button",{type:"button",onClick:()=>S("indicadoresLogro"),disabled:!r.descripcionProyecto.trim()||p,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:c.jsx(jT,{})}),children:p?c.jsx("div",{className:"p-4 text-center",children:"Generando..."}):c.jsx("textarea",{name:"indicadoresLogro",value:r.indicadoresLogro,onChange:I,placeholder:"Liste los indicadores de logro o evaluación...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Yd,{icon:c.jsx(r4e,{}),label:"Carta Gantt",children:c.jsxs("div",{className:"space-y-4 mt-2",children:[c.jsx("div",{className:"text-center border-b pb-4 mb-4 dark:border-slate-700",children:c.jsx("button",{type:"button",onClick:k,disabled:x||!r.descripcionProyecto,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:x?"Generando...":"✨ Sugerir Estructura con IA"})}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Actividades"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-end",children:[c.jsx("input",{value:a.nombre,onChange:_=>i({...a,nombre:_.target.value}),placeholder:"Nombre",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),c.jsx("input",{type:"date",value:a.fechaInicio,onChange:_=>i({...a,fechaInicio:_.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"date",value:a.fechaFin,onChange:_=>i({...a,fechaFin:_.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:U,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:r.actividades.map(_=>c.jsx("li",{children:_.nombre},_.id))})]}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Fechas Clave (Hitos)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[c.jsx("input",{value:o.nombre,onChange:_=>l({...o,nombre:_.target.value}),placeholder:"Hito",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 col-span-1"}),c.jsx("input",{type:"date",value:o.fecha,onChange:_=>l({...o,fecha:_.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:R,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:r.fechasClave.map(_=>c.jsxs("li",{children:[_.nombre," (",_.fecha,")"]},_.id))})]}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Tareas para Estudiantes"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-end",children:[c.jsx("input",{value:u.instrucciones,onChange:_=>d({...u,instrucciones:_.target.value}),placeholder:"Instrucciones",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),c.jsx("input",{type:"date",value:u.fechaEntrega,onChange:_=>d({...u,fechaEntrega:_.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{type:"button",onClick:E,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:(r.tareas||[]).map(_=>c.jsxs("li",{children:[_.numero,". ",_.instrucciones]},_.id))})]})]})}),c.jsxs("div",{className:"flex justify-end gap-4 pt-6",children:[c.jsx("button",{onClick:n,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),c.jsx("button",{onClick:()=>e(r),className:"px-8 py-3 bg-slate-800 text-white rounded-lg font-semibold hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:t?"Guardar Cambios":"Guardar Proyecto"})]})]})]})},OU=()=>{const[t,e]=G.useState([]),[n,r]=G.useState(!0),[s,a]=G.useState("list"),[i,o]=G.useState(null),[l,u]=G.useState(null),[d,h]=G.useState(null);G.useEffect(()=>{r(!0);const I=zNe(F=>{e(F),r(!1)});return()=>I()},[]);const m=G.useCallback(async(I,F)=>{const U=t.find(R=>R.id===I);if(U){const R={...U,actividades:(U.actividades||[]).map(E=>E.id===F.id?F:E)};await MU(I,R)}},[t]),p=async I=>{try{"id"in I&&I.id?await MU(I.id,I):await GNe(I),a("list"),o(null)}catch(F){console.error("Error al guardar la planificación:",F),alert("No se pudo guardar la planificación.")}},y=I=>{o(I),a("form")},x=async I=>{if(console.log("ID recibido por handleDelete:",I),!I){console.error("handleDelete fue llamado con un ID inválido:",I),alert("Error: No se puede eliminar un proyecto sin un ID válido.");return}if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await qNe(I)}catch(F){console.error("Error al eliminar la planificación:",F),alert("No se pudo eliminar la planificación.")}},C=()=>{o(null),a("form")},S=async I=>{u(I.id);const F=new hn("p","mm","a4"),U=15,R=F.internal.pageSize.getWidth(),E=F.internal.pageSize.getHeight(),_=R-U*2;let B=U;const j=22,D=14,L=11,Q=()=>{F.setFont("helvetica","normal"),F.setFontSize(9),F.setTextColor(150),F.text("Proyecto Interdisciplinario",U,12),F.text("Liceo Industrial de Recoleta",R-U,12,{align:"right"}),F.setDrawColor(220),F.line(U,15,R-U,15)},H=J=>{B+J>E-U&&(F.addPage(),Q(),B=U+15)},te=(J,K)=>{if(!K||Array.isArray(K)&&K.length===0||typeof K=="string"&&!K.trim())return;const ie=10;F.setFontSize(L);const O=Array.isArray(K)?K.join(", "):String(K),W=F.splitTextToSize(O,_),Z=W.length*(L*.35*1.15);H(ie+Z+12),F.setFont("helvetica","bold"),F.setFontSize(D),F.setTextColor(40),F.text(J,U,B),B+=6,F.setDrawColor(200),F.line(U,B,U+30,B),B+=8,F.setFont("helvetica","normal"),F.setFontSize(L),F.setTextColor(80),F.text(W,U,B),B+=Z+12};Q(),B=U+20,F.setFont("helvetica","bold"),F.setFontSize(j),F.setTextColor(0);const Y=F.splitTextToSize(I.nombreProyecto,_);if(F.text(Y,U,B),B+=Y.length*(j*.4)+10,vl(F,{startY:B,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},I.docentesResponsables],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},I.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},I.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:L,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),B=F.lastAutoTable.finalY+15,te("Descripción del Proyecto",I.descripcionProyecto),te("Objetivos de Aprendizaje",I.objetivos),te("Indicadores de Logro",I.indicadoresLogro),I.tareas&&I.tareas.length>0){const J=I.tareas.map(ie=>[ie.numero.toString(),ie.instrucciones,ie.fechaEntrega]),K=(J.length+1)*10+15;H(K+15),F.setFont("helvetica","bold"),F.setFontSize(D),F.setTextColor(40),F.text("Tareas para Estudiantes",U,B),B+=10,vl(F,{startY:B,head:[["#","Instrucciones","Fecha de Entrega"]],body:J,theme:"striped",headStyles:{fillColor:[52,73,94]}}),B=F.lastAutoTable.finalY+15}const ne=document.getElementById("gantt-container-vertical");if(ne)try{const K=(await cb(ne,{scale:2,backgroundColor:"#ffffff"})).toDataURL("image/png");F.addPage(),Q(),B=U+15,F.setFont("helvetica","bold"),F.setFontSize(D),F.setTextColor(40),F.text("Cronograma del Proyecto",U,B),B+=10;const ie=F.getImageProperties(K),O=_,W=ie.height*O/ie.width;F.addImage(K,"PNG",U,B,O,W)}catch(J){console.error("Error generating timeline image:",J)}const V=F.internal.pages.length-1;for(let J=1;J<=V;J++)F.setPage(J),F.setFont("helvetica","normal"),F.setFontSize(9),F.setTextColor(150),F.text(`Página ${J} de ${V}`,R-U,F.internal.pageSize.getHeight()-10,{align:"right"});F.save(`Proyecto_${I.nombreProyecto.replace(/\s/g,"_")}.pdf`),u(null)},k=({plan:I,onBack:F})=>{var te,Y;const[U,R]=G.useState([]),[E,_]=G.useState([]),[B,j]=G.useState(((te=I.tareas)==null?void 0:te[0])||null),[D,L]=G.useState(null);G.useEffect(()=>{const ne=$Ne(R),V=KNe(I.id,_);return()=>{ne(),V()}},[I.id]);const Q=G.useMemo(()=>U.filter(ne=>ne.profile===qt.ESTUDIANTE&&I.cursos.includes(ne.curso||"")).sort((ne,V)=>ne.nombreCompleto.localeCompare(V.nombreCompleto)),[U,I.cursos]),H=async ne=>{var K;L(ne.id);const V="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",J=`
                Eres un profesor asistente. Genera una retroalimentación constructiva para la entrega de un estudiante.
                - Instrucciones de la tarea: "${B==null?void 0:B.instrucciones}"
                - Comentario del estudiante: "${ne.observacionesEstudiante||"No dejó comentarios."}"
                - Enlace entregado: "${ne.enlaceUrl||"No aplica"}"
                - Archivo entregado: "${((K=ne.archivoAdjunto)==null?void 0:K.nombre)||"No aplica"}"
                
                La retroalimentación debe ser breve (2-3 frases), motivadora, y enfocada en cómo podría mejorar.
            `;try{const re=(await(await new Ra(V).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(J)).response).text().replace(/(\*\*|\*)/g,"");await PU(ne.id,re)}catch(ie){console.error("Error al generar feedback con IA:",ie),alert("No se pudo generar la retroalimentación.")}finally{L(null)}};return B?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800",children:["Entregas de Tareas: ",I.nombreProyecto]}),c.jsx("button",{onClick:F,className:"font-semibold",children:"← Volver a Proyectos"})]}),c.jsx("select",{value:B.id,onChange:ne=>{var V;return j(((V=I.tareas)==null?void 0:V.find(J=>J.id===ne.target.value))||null)},className:"mb-4 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600",children:(Y=I.tareas)==null?void 0:Y.map(ne=>c.jsxs("option",{value:ne.id,children:["Tarea ",ne.numero,": ",ne.instrucciones]},ne.id))}),c.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:Q.map(ne=>{const V=E.find(J=>J.tareaId===B.id&&J.estudianteId===ne.id);return c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[ne.nombreCompleto," - ",V!=null&&V.completada?c.jsx("span",{className:"text-green-600",children:"Entregado"}):c.jsx("span",{className:"text-red-600",children:"Pendiente"})]}),V?c.jsxs("div",{className:"text-sm mt-2 space-y-2",children:[V.observacionesEstudiante&&c.jsxs("p",{children:[c.jsx("strong",{children:"Comentario:"})," ",V.observacionesEstudiante]}),V.enlaceUrl&&c.jsxs("p",{children:[c.jsx("strong",{children:"Enlace:"})," ",c.jsx("a",{href:V.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:V.enlaceUrl})]}),V.archivoAdjunto&&c.jsxs("p",{children:[c.jsx("strong",{children:"Archivo:"})," ",c.jsx("a",{href:V.archivoAdjunto.url,download:V.archivoAdjunto.nombre,className:"text-blue-500 hover:underline",children:V.archivoAdjunto.nombre})]}),c.jsxs("div",{className:"flex items-end gap-2",children:[c.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:V.feedbackProfesor||"",onBlur:J=>PU(V.id,J.target.value),rows:2,className:"w-full mt-2 p-1 border rounded-md dark:bg-slate-700 dark:border-slate-600 flex-grow"},V.id),c.jsx("button",{onClick:()=>H(V),disabled:D===V.id,className:"p-2 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50",title:"Generar Feedback con IA",children:D===V.id?"...":c.jsx(jT,{})})]})]}):c.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"El estudiante aún no ha realizado la entrega."})]},ne.id)})})]}):c.jsx("div",{className:"text-center p-8",children:"Este proyecto no tiene tareas asignadas."})};return n?c.jsx("div",{className:"text-center py-10",children:"Cargando proyectos..."}):d?c.jsx(k,{plan:d,onBack:()=>h(null)}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s==="list"?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Proyectos Interdisciplinarios"}),c.jsx("button",{onClick:C,className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),c.jsx("div",{className:"space-y-4",children:t.map(I=>(console.log("Inspeccionando objeto plan:",I),c.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:I.nombreProyecto}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Cursos: ",(I.cursos||[]).join(", ")]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsx("button",{onClick:()=>h(I),className:"text-green-600 hover:text-green-800 dark:text-green-400 font-semibold text-sm",children:"Ver Entregas"}),c.jsx("button",{onClick:()=>S(I),disabled:l===I.id,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm disabled:opacity-50",children:l===I.id?"Exportando...":"Exportar PDF"}),c.jsx("button",{onClick:()=>y(I),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>x(I.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]})},I.id)))})]}):c.jsx(s4e,{initialPlan:i,onSave:p,onCancel:()=>{a("list"),o(null)}}),t.length>0&&c.jsx("div",{id:"gantt-container-vertical",children:c.jsx(WNe,{planificaciones:t,onActivityUpdate:m})})]})},BS="pañolMaquinas",jU="pañolRegistros",a4e=()=>{const[t,e]=G.useState([]),[n,r]=G.useState([]),s={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[a,i]=G.useState(s),[o,l]=G.useState(null),u={nombre:"",especialidad:"Industrial"},[d,h]=G.useState(u),[m,p]=G.useState(null),[y,x]=G.useState({maquinaId:"",curso:"",profesor:"",fecha:""});G.useEffect(()=>{try{const L=localStorage.getItem(BS);if(L&&JSON.parse(L).length>0)e(JSON.parse(L));else{const H=[{id:crypto.randomUUID(),nombre:"Torno",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Fresadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora MIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora TIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Torno CNC",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Elevador",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Compresor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta de motor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta hidráulica",especialidad:"Automotriz"}];e(H),localStorage.setItem(BS,JSON.stringify(H))}const Q=localStorage.getItem(jU);Q&&r(JSON.parse(Q))}catch(L){console.error("Error al cargar datos de Pañol desde localStorage",L)}},[]);const C=G.useCallback(L=>{e(L),localStorage.setItem(BS,JSON.stringify(L))},[]),S=G.useCallback(L=>{r(L),localStorage.setItem(jU,JSON.stringify(L))},[]),k=L=>{L.preventDefault(),d.nombre.trim()&&(C(m?t.map(Q=>Q.id===m.id?{...m,...d}:Q):[{...d,id:crypto.randomUUID()},...t]),h(u),p(null))},I=G.useCallback(L=>{if(n.some(Q=>Q.maquinaId===L)){alert("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");return}window.confirm("¿Eliminar esta máquina?")&&C(t.filter(Q=>Q.id!==L))},[t,n,C]),F=L=>{L.preventDefault();const Q=o||a;if(!Q.curso||!Q.profesorResponsable.trim()||!Q.maquinaId||Q.totalHoras<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}S(o?n.map(H=>H.id===o.id?o:H):[{...a,id:crypto.randomUUID()},...n]),i(s),l(null)},U=G.useCallback(L=>{window.confirm("¿Eliminar este registro de uso?")&&S(n.filter(Q=>Q.id!==L))},[n,S]),R=G.useMemo(()=>n.filter(L=>(y.maquinaId===""||L.maquinaId===y.maquinaId)&&(y.curso===""||L.curso===y.curso)&&(y.profesor===""||L.profesorResponsable.toLowerCase().includes(y.profesor.toLowerCase()))&&(y.fecha===""||L.fecha===y.fecha)).sort((L,Q)=>new Date(Q.fecha).getTime()-new Date(L.fecha).getTime()),[n,y]),E=G.useMemo(()=>new Map(t.map(L=>[L.id,L])),[t]),_=()=>{const L=R.map(te=>{var Y,ne;return{Fecha:te.fecha,Curso:te.curso,Profesor:te.profesorResponsable,Máquina:((Y=E.get(te.maquinaId))==null?void 0:Y.nombre)||"N/A",Especialidad:((ne=E.get(te.maquinaId))==null?void 0:ne.especialidad)||"N/A","Total Horas":te.totalHoras,Observaciones:te.observaciones}}),Q=sc.json_to_sheet(L),H=sc.book_new();sc.book_append_sheet(H,Q,"RegistrosPañol"),hB(H,"Registros_Pañol.xlsx")},B=()=>{const L=new hn;vl(L,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:R.map(Q=>{var H,te;return[Q.fecha,Q.curso,Q.profesorResponsable,((H=E.get(Q.maquinaId))==null?void 0:H.nombre)||"N/A",((te=E.get(Q.maquinaId))==null?void 0:te.especialidad)||"N/A",Q.totalHoras,Q.observaciones]}),margin:{top:20,right:10,bottom:20,left:10},didDrawPage:Q=>{L.setFontSize(10),L.setFont("helvetica","bold"),L.text("LICEO INDUSTRIAL DE RECOLETA",Q.settings.margin.left,15)}}),L.save("Registros_Pañol.pdf")},j="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",D=()=>{const L=o||a,Q=o?l:i;return c.jsxs("form",{onSubmit:F,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Fecha"}),c.jsx("input",{name:"fecha",type:"date",value:L.fecha,onChange:H=>Q({...L,fecha:H.target.value}),className:j,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Curso"}),c.jsxs("select",{name:"curso",value:L.curso,onChange:H=>Q({...L,curso:H.target.value}),className:j,required:!0,children:[c.jsx("option",{value:"",children:"Curso"}),Js.map(H=>c.jsx("option",{children:H},H))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Profesor"}),c.jsxs("select",{name:"profesorResponsable",value:L.profesorResponsable,onChange:H=>Q({...L,profesorResponsable:H.target.value}),className:j,required:!0,children:[c.jsx("option",{value:"",children:"Profesor Responsable"}),B5.map(H=>c.jsx("option",{value:H,children:H},H))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Máquina"}),c.jsxs("select",{name:"maquinaId",value:L.maquinaId,onChange:H=>Q({...L,maquinaId:H.target.value}),className:j,required:!0,children:[c.jsx("option",{value:"",children:"Máquina"}),t.map(H=>c.jsx("option",{value:H.id,children:H.nombre},H.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Total de Horas"}),c.jsx("input",{name:"totalHoras",type:"number",value:L.totalHoras,onChange:H=>Q({...L,totalHoras:Number(H.target.value)}),className:j,required:!0,min:"0.5",step:"0.5"})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),c.jsx("textarea",{name:"observaciones",value:L.observaciones,onChange:H=>Q({...L,observaciones:H.target.value}),placeholder:"Observaciones...",className:`${j}`,rows:1})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&c.jsx("button",{type:"button",onClick:()=>l(null),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:o?"Actualizar":"Registrar"})]})]})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Pañol: Registro de Uso de Máquinas"}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:o?`Editando Registro #${o.id.substring(0,4)}`:"Nuevo Registro de Uso"}),D()]}),c.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Administrar Máquinas"}),c.jsxs("form",{onSubmit:k,className:"flex gap-2 mb-4",children:[c.jsx("input",{value:d.nombre,onChange:L=>h({...d,nombre:L.target.value}),placeholder:"Nombre máquina",className:j}),c.jsxs("select",{value:d.especialidad,onChange:L=>h({...d,especialidad:L.target.value}),className:j,children:[c.jsx("option",{value:"Industrial",children:"Industrial"}),c.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),c.jsx("button",{type:"submit",className:"bg-slate-200 p-2 rounded-lg font-bold",children:m?"✓":"+"})]}),c.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.map(L=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[c.jsxs("span",{children:[L.nombre," ",c.jsxs("span",{className:"text-xs text-slate-500",children:["(",L.especialidad,")"]})]}),c.jsxs("div",{className:"space-x-2",children:[c.jsx("button",{onClick:()=>{p(L),h(L)},className:"text-blue-500",children:"✏️"}),c.jsx("button",{onClick:()=>I(L.id),className:"text-red-500",children:"🗑️"})]})]},L.id))})]}),c.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Historial de Uso"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:_,className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),c.jsx("button",{onClick:B,className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[c.jsx("input",{type:"date",value:y.fecha,onChange:L=>x({...y,fecha:L.target.value}),className:j}),c.jsxs("select",{value:y.curso,onChange:L=>x({...y,curso:L.target.value}),className:j,children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),Js.map(L=>c.jsx("option",{children:L},L))]}),c.jsxs("select",{value:y.maquinaId,onChange:L=>x({...y,maquinaId:L.target.value}),className:j,children:[c.jsx("option",{value:"",children:"Todas las Máquinas"}),t.map(L=>c.jsx("option",{value:L.id,children:L.nombre},L.id))]}),c.jsx("input",{value:y.profesor,onChange:L=>x({...y,profesor:L.target.value}),placeholder:"Buscar profesor...",className:j})]}),c.jsx("div",{className:"max-h-96 overflow-y-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Máquina"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Profesor"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Total Horas"}),c.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-500 uppercase",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:R.map(L=>{var Q;return c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:L.fecha}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((Q=E.get(L.maquinaId))==null?void 0:Q.nombre)||"N/A"}),c.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[L.profesorResponsable," (",L.curso,")"]}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:L.totalHoras}),c.jsxs("td",{className:"px-3 py-2 text-center",children:[c.jsx("button",{onClick:()=>l(L),className:"text-blue-500",children:"✏️"}),c.jsx("button",{onClick:()=>U(L.id),className:"text-red-500 ml-2",children:"🗑️"})]})]},L.id)})})]})})]})]})]})};function yo(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=yo(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var kS={exports:{}},IS={},FS={exports:{}},DS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QU;function i4e(){if(QU)return DS;QU=1;var t=_v();function e(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,a=t.useLayoutEffect,i=t.useDebugValue;function o(h,m){var p=m(),y=r({inst:{value:p,getSnapshot:m}}),x=y[0].inst,C=y[1];return a(function(){x.value=p,x.getSnapshot=m,l(x)&&C({inst:x})},[h,p,m]),s(function(){return l(x)&&C({inst:x}),h(function(){l(x)&&C({inst:x})})},[h]),i(p),p}function l(h){var m=h.getSnapshot;h=h.value;try{var p=m();return!n(h,p)}catch{return!0}}function u(h,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return DS.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,DS}var HU;function o4e(){return HU||(HU=1,FS.exports=i4e()),FS.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VU;function l4e(){if(VU)return IS;VU=1;var t=_v(),e=o4e();function n(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,a=t.useRef,i=t.useEffect,o=t.useMemo,l=t.useDebugValue;return IS.useSyncExternalStoreWithSelector=function(u,d,h,m,p){var y=a(null);if(y.current===null){var x={hasValue:!1,value:null};y.current=x}else x=y.current;y=o(function(){function S(R){if(!k){if(k=!0,I=R,R=m(R),p!==void 0&&x.hasValue){var E=x.value;if(p(E,R))return F=E}return F=R}if(E=F,r(I,R))return E;var _=m(R);return p!==void 0&&p(E,_)?(I=R,E):(I=R,F=_)}var k=!1,I,F,U=h===void 0?null:h;return[function(){return S(d())},U===null?void 0:function(){return S(U())}]},[d,h,m,p]);var C=s(u,y[0],y[1]);return i(function(){x.hasValue=!0,x.value=C},[C]),l(C),C},IS}var zU;function c4e(){return zU||(zU=1,kS.exports=l4e()),kS.exports}var u4e=c4e();const A4e=Tb(u4e),d4e={},GU=t=>{let e;const n=new Set,r=(d,h)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const p=e;e=h??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(y=>y(e,p))}},s=()=>e,l={setState:r,getState:s,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(d4e?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(r,s,l);return l},f4e=t=>t?GU(t):GU,{useDebugValue:h4e}=gt,{useSyncExternalStoreWithSelector:m4e}=A4e,p4e=t=>t;function lV(t,e=p4e,n){const r=m4e(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return h4e(r),r}const qU=(t,e)=>{const n=f4e(t),r=(s,a=e)=>lV(n,s,a);return Object.assign(r,n),r},g4e=(t,e)=>t?qU(t,e):qU;function ao(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,s]of t)if(!Object.is(s,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var x4e={value:()=>{}};function LC(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new V2(n)}function V2(t){this._=t}function v4e(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}V2.prototype=LC.prototype={constructor:V2,on:function(t,e){var n=this._,r=v4e(t+"",n),s,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((s=(t=r[a]).type)&&(s=y4e(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<i;)if(s=(t=r[a]).type)n[s]=KU(n[s],t.name,e);else if(e==null)for(s in n)n[s]=KU(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new V2(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,a;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,s=a.length;r<s;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,a=r.length;s<a;++s)r[s].value.apply(e,n)}};function y4e(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function KU(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=x4e,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var QT="http://www.w3.org/1999/xhtml";const $U={svg:"http://www.w3.org/2000/svg",xhtml:QT,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function UC(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),$U.hasOwnProperty(e)?{space:$U[e],local:t}:t}function w4e(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===QT&&e.documentElement.namespaceURI===QT?e.createElement(t):e.createElementNS(n,t)}}function b4e(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function cV(t){var e=UC(t);return(e.local?b4e:w4e)(e)}function C4e(){}function UB(t){return t==null?C4e:function(){return this.querySelector(t)}}function E4e(t){typeof t!="function"&&(t=UB(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],i=a.length,o=r[s]=new Array(i),l,u,d=0;d<i;++d)(l=a[d])&&(u=t.call(l,l.__data__,d,a))&&("__data__"in l&&(u.__data__=l.__data__),o[d]=u);return new bl(r,this._parents)}function _4e(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function S4e(){return[]}function uV(t){return t==null?S4e:function(){return this.querySelectorAll(t)}}function T4e(t){return function(){return _4e(t.apply(this,arguments))}}function N4e(t){typeof t=="function"?t=T4e(t):t=uV(t);for(var e=this._groups,n=e.length,r=[],s=[],a=0;a<n;++a)for(var i=e[a],o=i.length,l,u=0;u<o;++u)(l=i[u])&&(r.push(t.call(l,l.__data__,u,i)),s.push(l));return new bl(r,s)}function AV(t){return function(){return this.matches(t)}}function dV(t){return function(e){return e.matches(t)}}var B4e=Array.prototype.find;function k4e(t){return function(){return B4e.call(this.children,t)}}function I4e(){return this.firstElementChild}function F4e(t){return this.select(t==null?I4e:k4e(typeof t=="function"?t:dV(t)))}var D4e=Array.prototype.filter;function R4e(){return Array.from(this.children)}function L4e(t){return function(){return D4e.call(this.children,t)}}function U4e(t){return this.selectAll(t==null?R4e:L4e(typeof t=="function"?t:dV(t)))}function M4e(t){typeof t!="function"&&(t=AV(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],i=a.length,o=r[s]=[],l,u=0;u<i;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&o.push(l);return new bl(r,this._parents)}function fV(t){return new Array(t.length)}function P4e(){return new bl(this._enter||this._groups.map(fV),this._parents)}function ub(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ub.prototype={constructor:ub,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function O4e(t){return function(){return t}}function j4e(t,e,n,r,s,a){for(var i=0,o,l=e.length,u=a.length;i<u;++i)(o=e[i])?(o.__data__=a[i],r[i]=o):n[i]=new ub(t,a[i]);for(;i<l;++i)(o=e[i])&&(s[i]=o)}function Q4e(t,e,n,r,s,a,i){var o,l,u=new Map,d=e.length,h=a.length,m=new Array(d),p;for(o=0;o<d;++o)(l=e[o])&&(m[o]=p=i.call(l,l.__data__,o,e)+"",u.has(p)?s[o]=l:u.set(p,l));for(o=0;o<h;++o)p=i.call(t,a[o],o,a)+"",(l=u.get(p))?(r[o]=l,l.__data__=a[o],u.delete(p)):n[o]=new ub(t,a[o]);for(o=0;o<d;++o)(l=e[o])&&u.get(m[o])===l&&(s[o]=l)}function H4e(t){return t.__data__}function V4e(t,e){if(!arguments.length)return Array.from(this,H4e);var n=e?Q4e:j4e,r=this._parents,s=this._groups;typeof t!="function"&&(t=O4e(t));for(var a=s.length,i=new Array(a),o=new Array(a),l=new Array(a),u=0;u<a;++u){var d=r[u],h=s[u],m=h.length,p=z4e(t.call(d,d&&d.__data__,u,r)),y=p.length,x=o[u]=new Array(y),C=i[u]=new Array(y),S=l[u]=new Array(m);n(d,h,x,C,S,p,e);for(var k=0,I=0,F,U;k<y;++k)if(F=x[k]){for(k>=I&&(I=k+1);!(U=C[I])&&++I<y;);F._next=U||null}}return i=new bl(i,r),i._enter=o,i._exit=l,i}function z4e(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function G4e(){return new bl(this._exit||this._groups.map(fV),this._parents)}function q4e(t,e,n){var r=this.enter(),s=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?a.remove():n(a),r&&s?r.merge(s).order():s}function K4e(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,s=n.length,a=r.length,i=Math.min(s,a),o=new Array(s),l=0;l<i;++l)for(var u=n[l],d=r[l],h=u.length,m=o[l]=new Array(h),p,y=0;y<h;++y)(p=u[y]||d[y])&&(m[y]=p);for(;l<s;++l)o[l]=n[l];return new bl(o,this._parents)}function $4e(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],s=r.length-1,a=r[s],i;--s>=0;)(i=r[s])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function W4e(t){t||(t=Y4e);function e(h,m){return h&&m?t(h.__data__,m.__data__):!h-!m}for(var n=this._groups,r=n.length,s=new Array(r),a=0;a<r;++a){for(var i=n[a],o=i.length,l=s[a]=new Array(o),u,d=0;d<o;++d)(u=i[d])&&(l[d]=u);l.sort(e)}return new bl(s,this._parents).order()}function Y4e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function X4e(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function J4e(){return Array.from(this)}function Z4e(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,a=r.length;s<a;++s){var i=r[s];if(i)return i}return null}function eBe(){let t=0;for(const e of this)++t;return t}function tBe(){return!this.node()}function nBe(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],a=0,i=s.length,o;a<i;++a)(o=s[a])&&t.call(o,o.__data__,a,s);return this}function rBe(t){return function(){this.removeAttribute(t)}}function sBe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function aBe(t,e){return function(){this.setAttribute(t,e)}}function iBe(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function oBe(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function lBe(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function cBe(t,e){var n=UC(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?sBe:rBe:typeof e=="function"?n.local?lBe:oBe:n.local?iBe:aBe)(n,e))}function hV(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function uBe(t){return function(){this.style.removeProperty(t)}}function ABe(t,e,n){return function(){this.style.setProperty(t,e,n)}}function dBe(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function fBe(t,e,n){return arguments.length>1?this.each((e==null?uBe:typeof e=="function"?dBe:ABe)(t,e,n??"")):wp(this.node(),t)}function wp(t,e){return t.style.getPropertyValue(e)||hV(t).getComputedStyle(t,null).getPropertyValue(e)}function hBe(t){return function(){delete this[t]}}function mBe(t,e){return function(){this[t]=e}}function pBe(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function gBe(t,e){return arguments.length>1?this.each((e==null?hBe:typeof e=="function"?pBe:mBe)(t,e)):this.node()[t]}function mV(t){return t.trim().split(/^|\s+/)}function MB(t){return t.classList||new pV(t)}function pV(t){this._node=t,this._names=mV(t.getAttribute("class")||"")}pV.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function gV(t,e){for(var n=MB(t),r=-1,s=e.length;++r<s;)n.add(e[r])}function xV(t,e){for(var n=MB(t),r=-1,s=e.length;++r<s;)n.remove(e[r])}function xBe(t){return function(){gV(this,t)}}function vBe(t){return function(){xV(this,t)}}function yBe(t,e){return function(){(e.apply(this,arguments)?gV:xV)(this,t)}}function wBe(t,e){var n=mV(t+"");if(arguments.length<2){for(var r=MB(this.node()),s=-1,a=n.length;++s<a;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?yBe:e?xBe:vBe)(n,e))}function bBe(){this.textContent=""}function CBe(t){return function(){this.textContent=t}}function EBe(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function _Be(t){return arguments.length?this.each(t==null?bBe:(typeof t=="function"?EBe:CBe)(t)):this.node().textContent}function SBe(){this.innerHTML=""}function TBe(t){return function(){this.innerHTML=t}}function NBe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function BBe(t){return arguments.length?this.each(t==null?SBe:(typeof t=="function"?NBe:TBe)(t)):this.node().innerHTML}function kBe(){this.nextSibling&&this.parentNode.appendChild(this)}function IBe(){return this.each(kBe)}function FBe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function DBe(){return this.each(FBe)}function RBe(t){var e=typeof t=="function"?t:cV(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function LBe(){return null}function UBe(t,e){var n=typeof t=="function"?t:cV(t),r=e==null?LBe:typeof e=="function"?e:UB(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function MBe(){var t=this.parentNode;t&&t.removeChild(this)}function PBe(){return this.each(MBe)}function OBe(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function jBe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function QBe(t){return this.select(t?jBe:OBe)}function HBe(t){return arguments.length?this.property("__data__",t):this.node().__data__}function VBe(t){return function(e){t.call(this,e,this.__data__)}}function zBe(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function GBe(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,s=e.length,a;n<s;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function qBe(t,e,n){return function(){var r=this.__on,s,a=VBe(e);if(r){for(var i=0,o=r.length;i<o;++i)if((s=r[i]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=n),s.value=e;return}}this.addEventListener(t.type,a,n),s={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(s):this.__on=[s]}}function KBe(t,e,n){var r=zBe(t+""),s,a=r.length,i;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,d;l<u;++l)for(s=0,d=o[l];s<a;++s)if((i=r[s]).type===d.type&&i.name===d.name)return d.value}return}for(o=e?qBe:GBe,s=0;s<a;++s)this.each(o(r[s],e,n));return this}function vV(t,e,n){var r=hV(t),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function $Be(t,e){return function(){return vV(this,t,e)}}function WBe(t,e){return function(){return vV(this,t,e.apply(this,arguments))}}function YBe(t,e){return this.each((typeof e=="function"?WBe:$Be)(t,e))}function*XBe(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,a=r.length,i;s<a;++s)(i=r[s])&&(yield i)}var yV=[null];function bl(t,e){this._groups=t,this._parents=e}function s1(){return new bl([[document.documentElement]],yV)}function JBe(){return this}bl.prototype=s1.prototype={constructor:bl,select:E4e,selectAll:N4e,selectChild:F4e,selectChildren:U4e,filter:M4e,data:V4e,enter:P4e,exit:G4e,join:q4e,merge:K4e,selection:JBe,order:$4e,sort:W4e,call:X4e,nodes:J4e,node:Z4e,size:eBe,empty:tBe,each:nBe,attr:cBe,style:fBe,property:gBe,classed:wBe,text:_Be,html:BBe,raise:IBe,lower:DBe,append:RBe,insert:UBe,remove:PBe,clone:QBe,datum:HBe,on:KBe,dispatch:YBe,[Symbol.iterator]:XBe};function rc(t){return typeof t=="string"?new bl([[document.querySelector(t)]],[document.documentElement]):new bl([[t]],yV)}function ZBe(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Uu(t,e){if(t=ZBe(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const eke={passive:!1},pv={capture:!0,passive:!1};function RS(t){t.stopImmediatePropagation()}function np(t){t.preventDefault(),t.stopImmediatePropagation()}function wV(t){var e=t.document.documentElement,n=rc(t).on("dragstart.drag",np,pv);"onselectstart"in e?n.on("selectstart.drag",np,pv):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function bV(t,e){var n=t.document.documentElement,r=rc(t).on("dragstart.drag",null);e&&(r.on("click.drag",np,pv),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const r2=t=>()=>t;function HT(t,{sourceEvent:e,subject:n,target:r,identifier:s,active:a,x:i,y:o,dx:l,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}HT.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function tke(t){return!t.ctrlKey&&!t.button}function nke(){return this.parentNode}function rke(t,e){return e??{x:t.x,y:t.y}}function ske(){return navigator.maxTouchPoints||"ontouchstart"in this}function ake(){var t=tke,e=nke,n=rke,r=ske,s={},a=LC("start","drag","end"),i=0,o,l,u,d,h=0;function m(F){F.on("mousedown.drag",p).filter(r).on("touchstart.drag",C).on("touchmove.drag",S,eke).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(F,U){if(!(d||!t.call(this,F,U))){var R=I(this,e.call(this,F,U),F,U,"mouse");R&&(rc(F.view).on("mousemove.drag",y,pv).on("mouseup.drag",x,pv),wV(F.view),RS(F),u=!1,o=F.clientX,l=F.clientY,R("start",F))}}function y(F){if(np(F),!u){var U=F.clientX-o,R=F.clientY-l;u=U*U+R*R>h}s.mouse("drag",F)}function x(F){rc(F.view).on("mousemove.drag mouseup.drag",null),bV(F.view,u),np(F),s.mouse("end",F)}function C(F,U){if(t.call(this,F,U)){var R=F.changedTouches,E=e.call(this,F,U),_=R.length,B,j;for(B=0;B<_;++B)(j=I(this,E,F,U,R[B].identifier,R[B]))&&(RS(F),j("start",F,R[B]))}}function S(F){var U=F.changedTouches,R=U.length,E,_;for(E=0;E<R;++E)(_=s[U[E].identifier])&&(np(F),_("drag",F,U[E]))}function k(F){var U=F.changedTouches,R=U.length,E,_;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),E=0;E<R;++E)(_=s[U[E].identifier])&&(RS(F),_("end",F,U[E]))}function I(F,U,R,E,_,B){var j=a.copy(),D=Uu(B||R,U),L,Q,H;if((H=n.call(F,new HT("beforestart",{sourceEvent:R,target:m,identifier:_,active:i,x:D[0],y:D[1],dx:0,dy:0,dispatch:j}),E))!=null)return L=H.x-D[0]||0,Q=H.y-D[1]||0,function te(Y,ne,V){var J=D,K;switch(Y){case"start":s[_]=te,K=i++;break;case"end":delete s[_],--i;case"drag":D=Uu(V||ne,U),K=i;break}j.call(Y,F,new HT(Y,{sourceEvent:ne,subject:H,target:m,identifier:_,active:K,x:D[0]+L,y:D[1]+Q,dx:D[0]-J[0],dy:D[1]-J[1],dispatch:j}),E)}}return m.filter=function(F){return arguments.length?(t=typeof F=="function"?F:r2(!!F),m):t},m.container=function(F){return arguments.length?(e=typeof F=="function"?F:r2(F),m):e},m.subject=function(F){return arguments.length?(n=typeof F=="function"?F:r2(F),m):n},m.touchable=function(F){return arguments.length?(r=typeof F=="function"?F:r2(!!F),m):r},m.on=function(){var F=a.on.apply(a,arguments);return F===a?m:F},m.clickDistance=function(F){return arguments.length?(h=(F=+F)*F,m):Math.sqrt(h)},m}function PB(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function CV(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function a1(){}var gv=.7,Ab=1/gv,rp="\\s*([+-]?\\d+)\\s*",xv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ike=/^#([0-9a-f]{3,8})$/,oke=new RegExp(`^rgb\\(${rp},${rp},${rp}\\)$`),lke=new RegExp(`^rgb\\(${Yu},${Yu},${Yu}\\)$`),cke=new RegExp(`^rgba\\(${rp},${rp},${rp},${xv}\\)$`),uke=new RegExp(`^rgba\\(${Yu},${Yu},${Yu},${xv}\\)$`),Ake=new RegExp(`^hsl\\(${xv},${Yu},${Yu}\\)$`),dke=new RegExp(`^hsla\\(${xv},${Yu},${Yu},${xv}\\)$`),WU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};PB(a1,vv,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:YU,formatHex:YU,formatHex8:fke,formatHsl:hke,formatRgb:XU,toString:XU});function YU(){return this.rgb().formatHex()}function fke(){return this.rgb().formatHex8()}function hke(){return EV(this).formatHsl()}function XU(){return this.rgb().formatRgb()}function vv(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ike.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?JU(e):n===3?new Qo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?s2(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?s2(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=oke.exec(t))?new Qo(e[1],e[2],e[3],1):(e=lke.exec(t))?new Qo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=cke.exec(t))?s2(e[1],e[2],e[3],e[4]):(e=uke.exec(t))?s2(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ake.exec(t))?tM(e[1],e[2]/100,e[3]/100,1):(e=dke.exec(t))?tM(e[1],e[2]/100,e[3]/100,e[4]):WU.hasOwnProperty(t)?JU(WU[t]):t==="transparent"?new Qo(NaN,NaN,NaN,0):null}function JU(t){return new Qo(t>>16&255,t>>8&255,t&255,1)}function s2(t,e,n,r){return r<=0&&(t=e=n=NaN),new Qo(t,e,n,r)}function mke(t){return t instanceof a1||(t=vv(t)),t?(t=t.rgb(),new Qo(t.r,t.g,t.b,t.opacity)):new Qo}function VT(t,e,n,r){return arguments.length===1?mke(t):new Qo(t,e,n,r??1)}function Qo(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}PB(Qo,VT,CV(a1,{brighter(t){return t=t==null?Ab:Math.pow(Ab,t),new Qo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?gv:Math.pow(gv,t),new Qo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Qo(qh(this.r),qh(this.g),qh(this.b),db(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ZU,formatHex:ZU,formatHex8:pke,formatRgb:eM,toString:eM}));function ZU(){return`#${Rh(this.r)}${Rh(this.g)}${Rh(this.b)}`}function pke(){return`#${Rh(this.r)}${Rh(this.g)}${Rh(this.b)}${Rh((isNaN(this.opacity)?1:this.opacity)*255)}`}function eM(){const t=db(this.opacity);return`${t===1?"rgb(":"rgba("}${qh(this.r)}, ${qh(this.g)}, ${qh(this.b)}${t===1?")":`, ${t})`}`}function db(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function qh(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Rh(t){return t=qh(t),(t<16?"0":"")+t.toString(16)}function tM(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new jc(t,e,n,r)}function EV(t){if(t instanceof jc)return new jc(t.h,t.s,t.l,t.opacity);if(t instanceof a1||(t=vv(t)),!t)return new jc;if(t instanceof jc)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),a=Math.max(e,n,r),i=NaN,o=a-s,l=(a+s)/2;return o?(e===a?i=(n-r)/o+(n<r)*6:n===a?i=(r-e)/o+2:i=(e-n)/o+4,o/=l<.5?a+s:2-a-s,i*=60):o=l>0&&l<1?0:i,new jc(i,o,l,t.opacity)}function gke(t,e,n,r){return arguments.length===1?EV(t):new jc(t,e,n,r??1)}function jc(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}PB(jc,gke,CV(a1,{brighter(t){return t=t==null?Ab:Math.pow(Ab,t),new jc(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?gv:Math.pow(gv,t),new jc(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new Qo(LS(t>=240?t-240:t+120,s,r),LS(t,s,r),LS(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new jc(nM(this.h),a2(this.s),a2(this.l),db(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=db(this.opacity);return`${t===1?"hsl(":"hsla("}${nM(this.h)}, ${a2(this.s)*100}%, ${a2(this.l)*100}%${t===1?")":`, ${t})`}`}}));function nM(t){return t=(t||0)%360,t<0?t+360:t}function a2(t){return Math.max(0,Math.min(1,t||0))}function LS(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const _V=t=>()=>t;function xke(t,e){return function(n){return t+n*e}}function vke(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function yke(t){return(t=+t)==1?SV:function(e,n){return n-e?vke(e,n,t):_V(isNaN(e)?n:e)}}function SV(t,e){var n=e-t;return n?xke(t,n):_V(isNaN(t)?e:t)}const rM=function t(e){var n=yke(e);function r(s,a){var i=n((s=VT(s)).r,(a=VT(a)).r),o=n(s.g,a.g),l=n(s.b,a.b),u=SV(s.opacity,a.opacity);return function(d){return s.r=i(d),s.g=o(d),s.b=l(d),s.opacity=u(d),s+""}}return r.gamma=t,r}(1);function nf(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var zT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,US=new RegExp(zT.source,"g");function wke(t){return function(){return t}}function bke(t){return function(e){return t(e)+""}}function Cke(t,e){var n=zT.lastIndex=US.lastIndex=0,r,s,a,i=-1,o=[],l=[];for(t=t+"",e=e+"";(r=zT.exec(t))&&(s=US.exec(e));)(a=s.index)>n&&(a=e.slice(n,a),o[i]?o[i]+=a:o[++i]=a),(r=r[0])===(s=s[0])?o[i]?o[i]+=s:o[++i]=s:(o[++i]=null,l.push({i,x:nf(r,s)})),n=US.lastIndex;return n<e.length&&(a=e.slice(n),o[i]?o[i]+=a:o[++i]=a),o.length<2?l[0]?bke(l[0].x):wke(e):(e=l.length,function(u){for(var d=0,h;d<e;++d)o[(h=l[d]).i]=h.x(u);return o.join("")})}var sM=180/Math.PI,GT={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function TV(t,e,n,r,s,a){var i,o,l;return(i=Math.sqrt(t*t+e*e))&&(t/=i,e/=i),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),t*r<e*n&&(t=-t,e=-e,l=-l,i=-i),{translateX:s,translateY:a,rotate:Math.atan2(e,t)*sM,skewX:Math.atan(l)*sM,scaleX:i,scaleY:o}}var i2;function Eke(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?GT:TV(e.a,e.b,e.c,e.d,e.e,e.f)}function _ke(t){return t==null||(i2||(i2=document.createElementNS("http://www.w3.org/2000/svg","g")),i2.setAttribute("transform",t),!(t=i2.transform.baseVal.consolidate()))?GT:(t=t.matrix,TV(t.a,t.b,t.c,t.d,t.e,t.f))}function NV(t,e,n,r){function s(u){return u.length?u.pop()+" ":""}function a(u,d,h,m,p,y){if(u!==h||d!==m){var x=p.push("translate(",null,e,null,n);y.push({i:x-4,x:nf(u,h)},{i:x-2,x:nf(d,m)})}else(h||m)&&p.push("translate("+h+e+m+n)}function i(u,d,h,m){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),m.push({i:h.push(s(h)+"rotate(",null,r)-2,x:nf(u,d)})):d&&h.push(s(h)+"rotate("+d+r)}function o(u,d,h,m){u!==d?m.push({i:h.push(s(h)+"skewX(",null,r)-2,x:nf(u,d)}):d&&h.push(s(h)+"skewX("+d+r)}function l(u,d,h,m,p,y){if(u!==h||d!==m){var x=p.push(s(p)+"scale(",null,",",null,")");y.push({i:x-4,x:nf(u,h)},{i:x-2,x:nf(d,m)})}else(h!==1||m!==1)&&p.push(s(p)+"scale("+h+","+m+")")}return function(u,d){var h=[],m=[];return u=t(u),d=t(d),a(u.translateX,u.translateY,d.translateX,d.translateY,h,m),i(u.rotate,d.rotate,h,m),o(u.skewX,d.skewX,h,m),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,h,m),u=d=null,function(p){for(var y=-1,x=m.length,C;++y<x;)h[(C=m[y]).i]=C.x(p);return h.join("")}}}var Ske=NV(Eke,"px, ","px)","deg)"),Tke=NV(_ke,", ",")",")"),Nke=1e-12;function aM(t){return((t=Math.exp(t))+1/t)/2}function Bke(t){return((t=Math.exp(t))-1/t)/2}function kke(t){return((t=Math.exp(2*t))-1)/(t+1)}const Ike=function t(e,n,r){function s(a,i){var o=a[0],l=a[1],u=a[2],d=i[0],h=i[1],m=i[2],p=d-o,y=h-l,x=p*p+y*y,C,S;if(x<Nke)S=Math.log(m/u)/e,C=function(E){return[o+E*p,l+E*y,u*Math.exp(e*E*S)]};else{var k=Math.sqrt(x),I=(m*m-u*u+r*x)/(2*u*n*k),F=(m*m-u*u-r*x)/(2*m*n*k),U=Math.log(Math.sqrt(I*I+1)-I),R=Math.log(Math.sqrt(F*F+1)-F);S=(R-U)/e,C=function(E){var _=E*S,B=aM(U),j=u/(n*k)*(B*kke(e*_+U)-Bke(U));return[o+j*p,l+j*y,u*B/aM(e*_+U)]}}return C.duration=S*1e3*e/Math.SQRT2,C}return s.rho=function(a){var i=Math.max(.001,+a),o=i*i,l=o*o;return t(i,o,l)},s}(Math.SQRT2,2,4);var bp=0,ux=0,Og=0,BV=1e3,fb,Ax,hb=0,c0=0,MC=0,yv=typeof performance=="object"&&performance.now?performance:Date,kV=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function OB(){return c0||(kV(Fke),c0=yv.now()+MC)}function Fke(){c0=0}function mb(){this._call=this._time=this._next=null}mb.prototype=IV.prototype={constructor:mb,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?OB():+n)+(e==null?0:+e),!this._next&&Ax!==this&&(Ax?Ax._next=this:fb=this,Ax=this),this._call=t,this._time=n,qT()},stop:function(){this._call&&(this._call=null,this._time=1/0,qT())}};function IV(t,e,n){var r=new mb;return r.restart(t,e,n),r}function Dke(){OB(),++bp;for(var t=fb,e;t;)(e=c0-t._time)>=0&&t._call.call(void 0,e),t=t._next;--bp}function iM(){c0=(hb=yv.now())+MC,bp=ux=0;try{Dke()}finally{bp=0,Lke(),c0=0}}function Rke(){var t=yv.now(),e=t-hb;e>BV&&(MC-=e,hb=t)}function Lke(){for(var t,e=fb,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:fb=n);Ax=t,qT(r)}function qT(t){if(!bp){ux&&(ux=clearTimeout(ux));var e=t-c0;e>24?(t<1/0&&(ux=setTimeout(iM,t-yv.now()-MC)),Og&&(Og=clearInterval(Og))):(Og||(hb=yv.now(),Og=setInterval(Rke,BV)),bp=1,kV(iM))}}function oM(t,e,n){var r=new mb;return e=e==null?0:+e,r.restart(s=>{r.stop(),t(s+e)},e,n),r}var Uke=LC("start","end","cancel","interrupt"),Mke=[],FV=0,lM=1,KT=2,z2=3,cM=4,$T=5,G2=6;function PC(t,e,n,r,s,a){var i=t.__transition;if(!i)t.__transition={};else if(n in i)return;Pke(t,n,{name:e,index:r,group:s,on:Uke,tween:Mke,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:FV})}function jB(t,e){var n=Jc(t,e);if(n.state>FV)throw new Error("too late; already scheduled");return n}function iA(t,e){var n=Jc(t,e);if(n.state>z2)throw new Error("too late; already running");return n}function Jc(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Pke(t,e,n){var r=t.__transition,s;r[e]=n,n.timer=IV(a,0,n.time);function a(u){n.state=lM,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var d,h,m,p;if(n.state!==lM)return l();for(d in r)if(p=r[d],p.name===n.name){if(p.state===z2)return oM(i);p.state===cM?(p.state=G2,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[d]):+d<e&&(p.state=G2,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[d])}if(oM(function(){n.state===z2&&(n.state=cM,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=KT,n.on.call("start",t,t.__data__,n.index,n.group),n.state===KT){for(n.state=z2,s=new Array(m=n.tween.length),d=0,h=-1;d<m;++d)(p=n.tween[d].value.call(t,t.__data__,n.index,n.group))&&(s[++h]=p);s.length=h+1}}function o(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=$T,1),h=-1,m=s.length;++h<m;)s[h].call(t,d);n.state===$T&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=G2,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function q2(t,e){var n=t.__transition,r,s,a=!0,i;if(n){e=e==null?null:e+"";for(i in n){if((r=n[i]).name!==e){a=!1;continue}s=r.state>KT&&r.state<$T,r.state=G2,r.timer.stop(),r.on.call(s?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[i]}a&&delete t.__transition}}function Oke(t){return this.each(function(){q2(this,t)})}function jke(t,e){var n,r;return function(){var s=iA(this,t),a=s.tween;if(a!==n){r=n=a;for(var i=0,o=r.length;i<o;++i)if(r[i].name===e){r=r.slice(),r.splice(i,1);break}}s.tween=r}}function Qke(t,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var a=iA(this,t),i=a.tween;if(i!==r){s=(r=i).slice();for(var o={name:e,value:n},l=0,u=s.length;l<u;++l)if(s[l].name===e){s[l]=o;break}l===u&&s.push(o)}a.tween=s}}function Hke(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Jc(this.node(),n).tween,s=0,a=r.length,i;s<a;++s)if((i=r[s]).name===t)return i.value;return null}return this.each((e==null?jke:Qke)(n,t,e))}function QB(t,e,n){var r=t._id;return t.each(function(){var s=iA(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return Jc(s,r).value[e]}}function DV(t,e){var n;return(typeof e=="number"?nf:e instanceof vv?rM:(n=vv(e))?(e=n,rM):Cke)(t,e)}function Vke(t){return function(){this.removeAttribute(t)}}function zke(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Gke(t,e,n){var r,s=n+"",a;return function(){var i=this.getAttribute(t);return i===s?null:i===r?a:a=e(r=i,n)}}function qke(t,e,n){var r,s=n+"",a;return function(){var i=this.getAttributeNS(t.space,t.local);return i===s?null:i===r?a:a=e(r=i,n)}}function Kke(t,e,n){var r,s,a;return function(){var i,o=n(this),l;return o==null?void this.removeAttribute(t):(i=this.getAttribute(t),l=o+"",i===l?null:i===r&&l===s?a:(s=l,a=e(r=i,o)))}}function $ke(t,e,n){var r,s,a;return function(){var i,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(i=this.getAttributeNS(t.space,t.local),l=o+"",i===l?null:i===r&&l===s?a:(s=l,a=e(r=i,o)))}}function Wke(t,e){var n=UC(t),r=n==="transform"?Tke:DV;return this.attrTween(t,typeof e=="function"?(n.local?$ke:Kke)(n,r,QB(this,"attr."+t,e)):e==null?(n.local?zke:Vke)(n):(n.local?qke:Gke)(n,r,e))}function Yke(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Xke(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Jke(t,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Xke(t,a)),n}return s._value=e,s}function Zke(t,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Yke(t,a)),n}return s._value=e,s}function eIe(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=UC(t);return this.tween(n,(r.local?Jke:Zke)(r,e))}function tIe(t,e){return function(){jB(this,t).delay=+e.apply(this,arguments)}}function nIe(t,e){return e=+e,function(){jB(this,t).delay=e}}function rIe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?tIe:nIe)(e,t)):Jc(this.node(),e).delay}function sIe(t,e){return function(){iA(this,t).duration=+e.apply(this,arguments)}}function aIe(t,e){return e=+e,function(){iA(this,t).duration=e}}function iIe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?sIe:aIe)(e,t)):Jc(this.node(),e).duration}function oIe(t,e){if(typeof e!="function")throw new Error;return function(){iA(this,t).ease=e}}function lIe(t){var e=this._id;return arguments.length?this.each(oIe(e,t)):Jc(this.node(),e).ease}function cIe(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;iA(this,t).ease=n}}function uIe(t){if(typeof t!="function")throw new Error;return this.each(cIe(this._id,t))}function AIe(t){typeof t!="function"&&(t=AV(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],i=a.length,o=r[s]=[],l,u=0;u<i;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&o.push(l);return new sd(r,this._parents,this._name,this._id)}function dIe(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,s=n.length,a=Math.min(r,s),i=new Array(r),o=0;o<a;++o)for(var l=e[o],u=n[o],d=l.length,h=i[o]=new Array(d),m,p=0;p<d;++p)(m=l[p]||u[p])&&(h[p]=m);for(;o<r;++o)i[o]=e[o];return new sd(i,this._parents,this._name,this._id)}function fIe(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function hIe(t,e,n){var r,s,a=fIe(e)?jB:iA;return function(){var i=a(this,t),o=i.on;o!==r&&(s=(r=o).copy()).on(e,n),i.on=s}}function mIe(t,e){var n=this._id;return arguments.length<2?Jc(this.node(),n).on.on(t):this.each(hIe(n,t,e))}function pIe(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function gIe(){return this.on("end.remove",pIe(this._id))}function xIe(t){var e=this._name,n=this._id;typeof t!="function"&&(t=UB(t));for(var r=this._groups,s=r.length,a=new Array(s),i=0;i<s;++i)for(var o=r[i],l=o.length,u=a[i]=new Array(l),d,h,m=0;m<l;++m)(d=o[m])&&(h=t.call(d,d.__data__,m,o))&&("__data__"in d&&(h.__data__=d.__data__),u[m]=h,PC(u[m],e,n,m,u,Jc(d,n)));return new sd(a,this._parents,e,n)}function vIe(t){var e=this._name,n=this._id;typeof t!="function"&&(t=uV(t));for(var r=this._groups,s=r.length,a=[],i=[],o=0;o<s;++o)for(var l=r[o],u=l.length,d,h=0;h<u;++h)if(d=l[h]){for(var m=t.call(d,d.__data__,h,l),p,y=Jc(d,n),x=0,C=m.length;x<C;++x)(p=m[x])&&PC(p,e,n,x,m,y);a.push(m),i.push(d)}return new sd(a,i,e,n)}var yIe=s1.prototype.constructor;function wIe(){return new yIe(this._groups,this._parents)}function bIe(t,e){var n,r,s;return function(){var a=wp(this,t),i=(this.style.removeProperty(t),wp(this,t));return a===i?null:a===n&&i===r?s:s=e(n=a,r=i)}}function RV(t){return function(){this.style.removeProperty(t)}}function CIe(t,e,n){var r,s=n+"",a;return function(){var i=wp(this,t);return i===s?null:i===r?a:a=e(r=i,n)}}function EIe(t,e,n){var r,s,a;return function(){var i=wp(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),wp(this,t))),i===l?null:i===r&&l===s?a:(s=l,a=e(r=i,o))}}function _Ie(t,e){var n,r,s,a="style."+e,i="end."+a,o;return function(){var l=iA(this,t),u=l.on,d=l.value[a]==null?o||(o=RV(e)):void 0;(u!==n||s!==d)&&(r=(n=u).copy()).on(i,s=d),l.on=r}}function SIe(t,e,n){var r=(t+="")=="transform"?Ske:DV;return e==null?this.styleTween(t,bIe(t,r)).on("end.style."+t,RV(t)):typeof e=="function"?this.styleTween(t,EIe(t,r,QB(this,"style."+t,e))).each(_Ie(this._id,t)):this.styleTween(t,CIe(t,r,e),n).on("end.style."+t,null)}function TIe(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function NIe(t,e,n){var r,s;function a(){var i=e.apply(this,arguments);return i!==s&&(r=(s=i)&&TIe(t,i,n)),r}return a._value=e,a}function BIe(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,NIe(t,e,n??""))}function kIe(t){return function(){this.textContent=t}}function IIe(t){return function(){var e=t(this);this.textContent=e??""}}function FIe(t){return this.tween("text",typeof t=="function"?IIe(QB(this,"text",t)):kIe(t==null?"":t+""))}function DIe(t){return function(e){this.textContent=t.call(this,e)}}function RIe(t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&DIe(s)),e}return r._value=t,r}function LIe(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,RIe(t))}function UIe(){for(var t=this._name,e=this._id,n=LV(),r=this._groups,s=r.length,a=0;a<s;++a)for(var i=r[a],o=i.length,l,u=0;u<o;++u)if(l=i[u]){var d=Jc(l,e);PC(l,t,n,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new sd(r,this._parents,t,n)}function MIe(){var t,e,n=this,r=n._id,s=n.size();return new Promise(function(a,i){var o={value:i},l={value:function(){--s===0&&a()}};n.each(function(){var u=iA(this,r),d=u.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),u.on=e}),s===0&&a()})}var PIe=0;function sd(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function LV(){return++PIe}var OA=s1.prototype;sd.prototype={constructor:sd,select:xIe,selectAll:vIe,selectChild:OA.selectChild,selectChildren:OA.selectChildren,filter:AIe,merge:dIe,selection:wIe,transition:UIe,call:OA.call,nodes:OA.nodes,node:OA.node,size:OA.size,empty:OA.empty,each:OA.each,on:mIe,attr:Wke,attrTween:eIe,style:SIe,styleTween:BIe,text:FIe,textTween:LIe,remove:gIe,tween:Hke,delay:rIe,duration:iIe,ease:lIe,easeVarying:uIe,end:MIe,[Symbol.iterator]:OA[Symbol.iterator]};function OIe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var jIe={time:null,delay:0,duration:250,ease:OIe};function QIe(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function HIe(t){var e,n;t instanceof sd?(e=t._id,t=t._name):(e=LV(),(n=jIe).time=OB(),t=t==null?null:t+"");for(var r=this._groups,s=r.length,a=0;a<s;++a)for(var i=r[a],o=i.length,l,u=0;u<o;++u)(l=i[u])&&PC(l,t,e,u,i,n||QIe(l,e));return new sd(r,this._parents,t,e)}s1.prototype.interrupt=Oke;s1.prototype.transition=HIe;const o2=t=>()=>t;function VIe(t,{sourceEvent:e,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function zA(t,e,n){this.k=t,this.x=e,this.y=n}zA.prototype={constructor:zA,scale:function(t){return t===1?this:new zA(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new zA(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Nf=new zA(1,0,0);zA.prototype;function MS(t){t.stopImmediatePropagation()}function jg(t){t.preventDefault(),t.stopImmediatePropagation()}function zIe(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function GIe(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function uM(){return this.__zoom||Nf}function qIe(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function KIe(){return navigator.maxTouchPoints||"ontouchstart"in this}function $Ie(t,e,n){var r=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],i=t.invertY(e[1][1])-n[1][1];return t.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function WIe(){var t=zIe,e=GIe,n=$Ie,r=qIe,s=KIe,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],o=250,l=Ike,u=LC("start","zoom","end"),d,h,m,p=500,y=150,x=0,C=10;function S(H){H.property("__zoom",uM).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",j).filter(s).on("touchstart.zoom",D).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",Q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}S.transform=function(H,te,Y,ne){var V=H.selection?H.selection():H;V.property("__zoom",uM),H!==V?U(H,te,Y,ne):V.interrupt().each(function(){R(this,arguments).event(ne).start().zoom(null,typeof te=="function"?te.apply(this,arguments):te).end()})},S.scaleBy=function(H,te,Y,ne){S.scaleTo(H,function(){var V=this.__zoom.k,J=typeof te=="function"?te.apply(this,arguments):te;return V*J},Y,ne)},S.scaleTo=function(H,te,Y,ne){S.transform(H,function(){var V=e.apply(this,arguments),J=this.__zoom,K=Y==null?F(V):typeof Y=="function"?Y.apply(this,arguments):Y,ie=J.invert(K),O=typeof te=="function"?te.apply(this,arguments):te;return n(I(k(J,O),K,ie),V,i)},Y,ne)},S.translateBy=function(H,te,Y,ne){S.transform(H,function(){return n(this.__zoom.translate(typeof te=="function"?te.apply(this,arguments):te,typeof Y=="function"?Y.apply(this,arguments):Y),e.apply(this,arguments),i)},null,ne)},S.translateTo=function(H,te,Y,ne,V){S.transform(H,function(){var J=e.apply(this,arguments),K=this.__zoom,ie=ne==null?F(J):typeof ne=="function"?ne.apply(this,arguments):ne;return n(Nf.translate(ie[0],ie[1]).scale(K.k).translate(typeof te=="function"?-te.apply(this,arguments):-te,typeof Y=="function"?-Y.apply(this,arguments):-Y),J,i)},ne,V)};function k(H,te){return te=Math.max(a[0],Math.min(a[1],te)),te===H.k?H:new zA(te,H.x,H.y)}function I(H,te,Y){var ne=te[0]-Y[0]*H.k,V=te[1]-Y[1]*H.k;return ne===H.x&&V===H.y?H:new zA(H.k,ne,V)}function F(H){return[(+H[0][0]+ +H[1][0])/2,(+H[0][1]+ +H[1][1])/2]}function U(H,te,Y,ne){H.on("start.zoom",function(){R(this,arguments).event(ne).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(ne).end()}).tween("zoom",function(){var V=this,J=arguments,K=R(V,J).event(ne),ie=e.apply(V,J),O=Y==null?F(ie):typeof Y=="function"?Y.apply(V,J):Y,W=Math.max(ie[1][0]-ie[0][0],ie[1][1]-ie[0][1]),Z=V.__zoom,re=typeof te=="function"?te.apply(V,J):te,se=l(Z.invert(O).concat(W/Z.k),re.invert(O).concat(W/re.k));return function(de){if(de===1)de=re;else{var pe=se(de),be=W/pe[2];de=new zA(be,O[0]-pe[0]*be,O[1]-pe[1]*be)}K.zoom(null,de)}})}function R(H,te,Y){return!Y&&H.__zooming||new E(H,te)}function E(H,te){this.that=H,this.args=te,this.active=0,this.sourceEvent=null,this.extent=e.apply(H,te),this.taps=0}E.prototype={event:function(H){return H&&(this.sourceEvent=H),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(H,te){return this.mouse&&H!=="mouse"&&(this.mouse[1]=te.invert(this.mouse[0])),this.touch0&&H!=="touch"&&(this.touch0[1]=te.invert(this.touch0[0])),this.touch1&&H!=="touch"&&(this.touch1[1]=te.invert(this.touch1[0])),this.that.__zoom=te,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(H){var te=rc(this.that).datum();u.call(H,this.that,new VIe(H,{sourceEvent:this.sourceEvent,target:S,transform:this.that.__zoom,dispatch:u}),te)}};function _(H,...te){if(!t.apply(this,arguments))return;var Y=R(this,te).event(H),ne=this.__zoom,V=Math.max(a[0],Math.min(a[1],ne.k*Math.pow(2,r.apply(this,arguments)))),J=Uu(H);if(Y.wheel)(Y.mouse[0][0]!==J[0]||Y.mouse[0][1]!==J[1])&&(Y.mouse[1]=ne.invert(Y.mouse[0]=J)),clearTimeout(Y.wheel);else{if(ne.k===V)return;Y.mouse=[J,ne.invert(J)],q2(this),Y.start()}jg(H),Y.wheel=setTimeout(K,y),Y.zoom("mouse",n(I(k(ne,V),Y.mouse[0],Y.mouse[1]),Y.extent,i));function K(){Y.wheel=null,Y.end()}}function B(H,...te){if(m||!t.apply(this,arguments))return;var Y=H.currentTarget,ne=R(this,te,!0).event(H),V=rc(H.view).on("mousemove.zoom",O,!0).on("mouseup.zoom",W,!0),J=Uu(H,Y),K=H.clientX,ie=H.clientY;wV(H.view),MS(H),ne.mouse=[J,this.__zoom.invert(J)],q2(this),ne.start();function O(Z){if(jg(Z),!ne.moved){var re=Z.clientX-K,se=Z.clientY-ie;ne.moved=re*re+se*se>x}ne.event(Z).zoom("mouse",n(I(ne.that.__zoom,ne.mouse[0]=Uu(Z,Y),ne.mouse[1]),ne.extent,i))}function W(Z){V.on("mousemove.zoom mouseup.zoom",null),bV(Z.view,ne.moved),jg(Z),ne.event(Z).end()}}function j(H,...te){if(t.apply(this,arguments)){var Y=this.__zoom,ne=Uu(H.changedTouches?H.changedTouches[0]:H,this),V=Y.invert(ne),J=Y.k*(H.shiftKey?.5:2),K=n(I(k(Y,J),ne,V),e.apply(this,te),i);jg(H),o>0?rc(this).transition().duration(o).call(U,K,ne,H):rc(this).call(S.transform,K,ne,H)}}function D(H,...te){if(t.apply(this,arguments)){var Y=H.touches,ne=Y.length,V=R(this,te,H.changedTouches.length===ne).event(H),J,K,ie,O;for(MS(H),K=0;K<ne;++K)ie=Y[K],O=Uu(ie,this),O=[O,this.__zoom.invert(O),ie.identifier],V.touch0?!V.touch1&&V.touch0[2]!==O[2]&&(V.touch1=O,V.taps=0):(V.touch0=O,J=!0,V.taps=1+!!d);d&&(d=clearTimeout(d)),J&&(V.taps<2&&(h=O[0],d=setTimeout(function(){d=null},p)),q2(this),V.start())}}function L(H,...te){if(this.__zooming){var Y=R(this,te).event(H),ne=H.changedTouches,V=ne.length,J,K,ie,O;for(jg(H),J=0;J<V;++J)K=ne[J],ie=Uu(K,this),Y.touch0&&Y.touch0[2]===K.identifier?Y.touch0[0]=ie:Y.touch1&&Y.touch1[2]===K.identifier&&(Y.touch1[0]=ie);if(K=Y.that.__zoom,Y.touch1){var W=Y.touch0[0],Z=Y.touch0[1],re=Y.touch1[0],se=Y.touch1[1],de=(de=re[0]-W[0])*de+(de=re[1]-W[1])*de,pe=(pe=se[0]-Z[0])*pe+(pe=se[1]-Z[1])*pe;K=k(K,Math.sqrt(de/pe)),ie=[(W[0]+re[0])/2,(W[1]+re[1])/2],O=[(Z[0]+se[0])/2,(Z[1]+se[1])/2]}else if(Y.touch0)ie=Y.touch0[0],O=Y.touch0[1];else return;Y.zoom("touch",n(I(K,ie,O),Y.extent,i))}}function Q(H,...te){if(this.__zooming){var Y=R(this,te).event(H),ne=H.changedTouches,V=ne.length,J,K;for(MS(H),m&&clearTimeout(m),m=setTimeout(function(){m=null},p),J=0;J<V;++J)K=ne[J],Y.touch0&&Y.touch0[2]===K.identifier?delete Y.touch0:Y.touch1&&Y.touch1[2]===K.identifier&&delete Y.touch1;if(Y.touch1&&!Y.touch0&&(Y.touch0=Y.touch1,delete Y.touch1),Y.touch0)Y.touch0[1]=this.__zoom.invert(Y.touch0[0]);else if(Y.end(),Y.taps===2&&(K=Uu(K,this),Math.hypot(h[0]-K[0],h[1]-K[1])<C)){var ie=rc(this).on("dblclick.zoom");ie&&ie.apply(this,arguments)}}}return S.wheelDelta=function(H){return arguments.length?(r=typeof H=="function"?H:o2(+H),S):r},S.filter=function(H){return arguments.length?(t=typeof H=="function"?H:o2(!!H),S):t},S.touchable=function(H){return arguments.length?(s=typeof H=="function"?H:o2(!!H),S):s},S.extent=function(H){return arguments.length?(e=typeof H=="function"?H:o2([[+H[0][0],+H[0][1]],[+H[1][0],+H[1][1]]]),S):e},S.scaleExtent=function(H){return arguments.length?(a[0]=+H[0],a[1]=+H[1],S):[a[0],a[1]]},S.translateExtent=function(H){return arguments.length?(i[0][0]=+H[0][0],i[1][0]=+H[1][0],i[0][1]=+H[0][1],i[1][1]=+H[1][1],S):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},S.constrain=function(H){return arguments.length?(n=H,S):n},S.duration=function(H){return arguments.length?(o=+H,S):o},S.interpolate=function(H){return arguments.length?(l=H,S):l},S.on=function(){var H=u.on.apply(u,arguments);return H===u?S:H},S.clickDistance=function(H){return arguments.length?(x=(H=+H)*H,S):Math.sqrt(x)},S.tapDistance=function(H){return arguments.length?(C=+H,S):C},S}var YIe=Q8();const OC=G.createContext(null),XIe=OC.Provider,ad={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},UV=ad.error001();function Os(t,e){const n=G.useContext(OC);if(n===null)throw new Error(UV);return lV(n,t,e)}const ci=()=>{const t=G.useContext(OC);if(t===null)throw new Error(UV);return G.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},JIe=t=>t.userSelectionActive?"none":"all";function MV({position:t,children:e,className:n,style:r,...s}){const a=Os(JIe),i=`${t}`.split("-");return gt.createElement("div",{className:yo(["react-flow__panel",n,...i]),style:{...r,pointerEvents:a},...s},e)}function ZIe({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:gt.createElement(MV,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},gt.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const e3e=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:a={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:l,className:u,...d})=>{const h=G.useRef(null),[m,p]=G.useState({x:0,y:0,width:0,height:0}),y=yo(["react-flow__edge-textwrapper",u]);return G.useEffect(()=>{if(h.current){const x=h.current.getBBox();p({x:x.x,y:x.y,width:x.width,height:x.height})}},[n]),typeof n>"u"||!n?null:gt.createElement("g",{transform:`translate(${t-m.width/2} ${e-m.height/2})`,className:y,visibility:m.width?"visible":"hidden",...d},s&&gt.createElement("rect",{width:m.width+2*i[0],x:-i[0],y:-i[1],height:m.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:o,ry:o}),gt.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:h,style:r},n),l)};var t3e=G.memo(e3e);const HB=t=>({width:t.offsetWidth,height:t.offsetHeight}),Cp=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),VB=(t={x:0,y:0},e)=>({x:Cp(t.x,e[0][0],e[1][0]),y:Cp(t.y,e[0][1],e[1][1])}),AM=(t,e,n)=>t<e?Cp(Math.abs(t-e),1,50)/50:t>n?-Cp(Math.abs(t-n),1,50)/50:0,PV=(t,e)=>{const n=AM(t.x,35,e.width-35)*20,r=AM(t.y,35,e.height-35)*20;return[n,r]},OV=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},n3e=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),zB=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),r3e=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),dM=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),WT=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},s3e=t=>oc(t.width)&&oc(t.height)&&oc(t.x)&&oc(t.y),oc=t=>!isNaN(t)&&isFinite(t),Zs=Symbol.for("internals"),jV=["Enter"," ","Escape"],a3e=(t,e)=>{},i3e=t=>"nativeEvent"in t;function YT(t){var s,a;const e=i3e(t)?t.nativeEvent:t,n=((a=(s=e.composedPath)==null?void 0:s.call(e))==null?void 0:a[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const QV=t=>"clientX"in t,Bf=(t,e)=>{var a,i;const n=QV(t),r=n?t.clientX:(a=t.touches)==null?void 0:a[0].clientX,s=n?t.clientY:(i=t.touches)==null?void 0:i[0].clientY;return{x:r-((e==null?void 0:e.left)??0),y:s-((e==null?void 0:e.top)??0)}},pb=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},i1=({id:t,path:e,labelX:n,labelY:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:m,interactionWidth:p=20})=>gt.createElement(gt.Fragment,null,gt.createElement("path",{id:t,style:d,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:m}),p&&gt.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),s&&oc(n)&&oc(r)?gt.createElement(t3e,{x:n,y:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null);i1.displayName="BaseEdge";function Qg(t,e,n){return n===void 0?n:r=>{const s=e().edges.find(a=>a.id===t);s&&n(r,{...s})}}function HV({sourceX:t,sourceY:e,targetX:n,targetY:r}){const s=Math.abs(n-t)/2,a=n<t?n+s:n-s,i=Math.abs(r-e)/2,o=r<e?r+i:r-i;return[a,o,s,i]}function VV({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:s,sourceControlY:a,targetControlX:i,targetControlY:o}){const l=t*.125+s*.375+i*.375+n*.125,u=e*.125+a*.375+o*.375+r*.125,d=Math.abs(l-t),h=Math.abs(u-e);return[l,u,d,h]}var u0;(function(t){t.Strict="strict",t.Loose="loose"})(u0||(u0={}));var Lh;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Lh||(Lh={}));var wv;(function(t){t.Partial="partial",t.Full="full"})(wv||(wv={}));var uf;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(uf||(uf={}));var gb;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(gb||(gb={}));var gn;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(gn||(gn={}));function fM({pos:t,x1:e,y1:n,x2:r,y2:s}){return t===gn.Left||t===gn.Right?[.5*(e+r),n]:[e,.5*(n+s)]}function zV({sourceX:t,sourceY:e,sourcePosition:n=gn.Bottom,targetX:r,targetY:s,targetPosition:a=gn.Top}){const[i,o]=fM({pos:n,x1:t,y1:e,x2:r,y2:s}),[l,u]=fM({pos:a,x1:r,y1:s,x2:t,y2:e}),[d,h,m,p]=VV({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:i,sourceControlY:o,targetControlX:l,targetControlY:u});return[`M${t},${e} C${i},${o} ${l},${u} ${r},${s}`,d,h,m,p]}const GB=G.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=gn.Bottom,targetPosition:a=gn.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:p,markerStart:y,interactionWidth:x})=>{const[C,S,k]=zV({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:a});return gt.createElement(i1,{path:C,labelX:S,labelY:k,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:p,markerStart:y,interactionWidth:x})});GB.displayName="SimpleBezierEdge";const hM={[gn.Left]:{x:-1,y:0},[gn.Right]:{x:1,y:0},[gn.Top]:{x:0,y:-1},[gn.Bottom]:{x:0,y:1}},o3e=({source:t,sourcePosition:e=gn.Bottom,target:n})=>e===gn.Left||e===gn.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},mM=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function l3e({source:t,sourcePosition:e=gn.Bottom,target:n,targetPosition:r=gn.Top,center:s,offset:a}){const i=hM[e],o=hM[r],l={x:t.x+i.x*a,y:t.y+i.y*a},u={x:n.x+o.x*a,y:n.y+o.y*a},d=o3e({source:l,sourcePosition:e,target:u}),h=d.x!==0?"x":"y",m=d[h];let p=[],y,x;const C={x:0,y:0},S={x:0,y:0},[k,I,F,U]=HV({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(i[h]*o[h]===-1){y=s.x??k,x=s.y??I;const E=[{x:y,y:l.y},{x:y,y:u.y}],_=[{x:l.x,y:x},{x:u.x,y:x}];i[h]===m?p=h==="x"?E:_:p=h==="x"?_:E}else{const E=[{x:l.x,y:u.y}],_=[{x:u.x,y:l.y}];if(h==="x"?p=i.x===m?_:E:p=i.y===m?E:_,e===r){const Q=Math.abs(t[h]-n[h]);if(Q<=a){const H=Math.min(a-1,a-Q);i[h]===m?C[h]=(l[h]>t[h]?-1:1)*H:S[h]=(u[h]>n[h]?-1:1)*H}}if(e!==r){const Q=h==="x"?"y":"x",H=i[h]===o[Q],te=l[Q]>u[Q],Y=l[Q]<u[Q];(i[h]===1&&(!H&&te||H&&Y)||i[h]!==1&&(!H&&Y||H&&te))&&(p=h==="x"?E:_)}const B={x:l.x+C.x,y:l.y+C.y},j={x:u.x+S.x,y:u.y+S.y},D=Math.max(Math.abs(B.x-p[0].x),Math.abs(j.x-p[0].x)),L=Math.max(Math.abs(B.y-p[0].y),Math.abs(j.y-p[0].y));D>=L?(y=(B.x+j.x)/2,x=p[0].y):(y=p[0].x,x=(B.y+j.y)/2)}return[[t,{x:l.x+C.x,y:l.y+C.y},...p,{x:u.x+S.x,y:u.y+S.y},n],y,x,F,U]}function c3e(t,e,n,r){const s=Math.min(mM(t,e)/2,mM(e,n)/2,r),{x:a,y:i}=e;if(t.x===a&&a===n.x||t.y===i&&i===n.y)return`L${a} ${i}`;if(t.y===i){const u=t.x<n.x?-1:1,d=t.y<n.y?1:-1;return`L ${a+s*u},${i}Q ${a},${i} ${a},${i+s*d}`}const o=t.x<n.x?1:-1,l=t.y<n.y?-1:1;return`L ${a},${i+s*l}Q ${a},${i} ${a+s*o},${i}`}function XT({sourceX:t,sourceY:e,sourcePosition:n=gn.Bottom,targetX:r,targetY:s,targetPosition:a=gn.Top,borderRadius:i=5,centerX:o,centerY:l,offset:u=20}){const[d,h,m,p,y]=l3e({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:s},targetPosition:a,center:{x:o,y:l},offset:u});return[d.reduce((C,S,k)=>{let I="";return k>0&&k<d.length-1?I=c3e(d[k-1],S,d[k+1],i):I=`${k===0?"M":"L"}${S.x} ${S.y}`,C+=I,C},""),h,m,p,y]}const jC=G.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,sourcePosition:h=gn.Bottom,targetPosition:m=gn.Top,markerEnd:p,markerStart:y,pathOptions:x,interactionWidth:C})=>{const[S,k,I]=XT({sourceX:t,sourceY:e,sourcePosition:h,targetX:n,targetY:r,targetPosition:m,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return gt.createElement(i1,{path:S,labelX:k,labelY:I,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:p,markerStart:y,interactionWidth:C})});jC.displayName="SmoothStepEdge";const qB=G.memo(t=>{var e;return gt.createElement(jC,{...t,pathOptions:G.useMemo(()=>{var n;return{borderRadius:0,offset:(n=t.pathOptions)==null?void 0:n.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});qB.displayName="StepEdge";function u3e({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[s,a,i,o]=HV({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,s,a,i,o]}const KB=G.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:m,interactionWidth:p})=>{const[y,x,C]=u3e({sourceX:t,sourceY:e,targetX:n,targetY:r});return gt.createElement(i1,{path:y,labelX:x,labelY:C,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:m,interactionWidth:p})});KB.displayName="StraightEdge";function l2(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function pM({pos:t,x1:e,y1:n,x2:r,y2:s,c:a}){switch(t){case gn.Left:return[e-l2(e-r,a),n];case gn.Right:return[e+l2(r-e,a),n];case gn.Top:return[e,n-l2(n-s,a)];case gn.Bottom:return[e,n+l2(s-n,a)]}}function GV({sourceX:t,sourceY:e,sourcePosition:n=gn.Bottom,targetX:r,targetY:s,targetPosition:a=gn.Top,curvature:i=.25}){const[o,l]=pM({pos:n,x1:t,y1:e,x2:r,y2:s,c:i}),[u,d]=pM({pos:a,x1:r,y1:s,x2:t,y2:e,c:i}),[h,m,p,y]=VV({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${t},${e} C${o},${l} ${u},${d} ${r},${s}`,h,m,p,y]}const xb=G.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=gn.Bottom,targetPosition:a=gn.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:p,markerStart:y,pathOptions:x,interactionWidth:C})=>{const[S,k,I]=GV({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:a,curvature:x==null?void 0:x.curvature});return gt.createElement(i1,{path:S,labelX:k,labelY:I,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:p,markerStart:y,interactionWidth:C})});xb.displayName="BezierEdge";const $B=G.createContext(null),A3e=$B.Provider;$B.Consumer;const d3e=()=>G.useContext($B),f3e=t=>"id"in t&&"source"in t&&"target"in t,h3e=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,JT=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,m3e=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),p3e=(t,e)=>{if(!t.source||!t.target)return e;let n;return f3e(t)?n={...t}:n={...t,id:h3e(t)},m3e(n,e)?e:e.concat(n)},ZT=({x:t,y:e},[n,r,s],a,[i,o])=>{const l={x:(t-n)/s,y:(e-r)/s};return a?{x:i*Math.round(l.x/i),y:o*Math.round(l.y/o)}:l},qV=({x:t,y:e},[n,r,s])=>({x:t*s+n,y:e*s+r}),sp=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],s={x:t.position.x-n,y:t.position.y-r};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:s}},WB=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,s)=>{const{x:a,y:i}=sp(s,e).positionAbsolute;return n3e(r,zB({x:a,y:i,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return r3e(n)},KV=(t,e,[n,r,s]=[0,0,1],a=!1,i=!1,o=[0,0])=>{const l={x:(e.x-n)/s,y:(e.y-r)/s,width:e.width/s,height:e.height/s},u=[];return t.forEach(d=>{const{width:h,height:m,selectable:p=!0,hidden:y=!1}=d;if(i&&!p||y)return!1;const{positionAbsolute:x}=sp(d,o),C={x:x.x,y:x.y,width:h||0,height:m||0},S=WT(l,C),k=typeof h>"u"||typeof m>"u"||h===null||m===null,I=a&&S>0,F=(h||0)*(m||0);(k||I||S>=F||d.dragging)&&u.push(d)}),u},$V=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},WV=(t,e,n,r,s,a=.1)=>{const i=e/(t.width*(1+a)),o=n/(t.height*(1+a)),l=Math.min(i,o),u=Cp(l,r,s),d=t.x+t.width/2,h=t.y+t.height/2,m=e/2-d*u,p=n/2-h*u;return{x:m,y:p,zoom:u}},_h=(t,e=0)=>t.transition().duration(e);function gM(t,e,n,r){return(e[n]||[]).reduce((s,a)=>{var i,o;return`${t.id}-${a.id}-${n}`!==r&&s.push({id:a.id||null,type:n,nodeId:t.id,x:(((i=t.positionAbsolute)==null?void 0:i.x)??0)+a.x+a.width/2,y:(((o=t.positionAbsolute)==null?void 0:o.y)??0)+a.y+a.height/2}),s},[])}function g3e(t,e,n,r,s,a){const{x:i,y:o}=Bf(t),u=e.elementsFromPoint(i,o).find(y=>y.classList.contains("react-flow__handle"));if(u){const y=u.getAttribute("data-nodeid");if(y){const x=YB(void 0,u),C=u.getAttribute("data-handleid"),S=a({nodeId:y,id:C,type:x});if(S){const k=s.find(I=>I.nodeId===y&&I.type===x&&I.id===C);return{handle:{id:C,type:x,nodeId:y,x:(k==null?void 0:k.x)||n.x,y:(k==null?void 0:k.y)||n.y},validHandleResult:S}}}}let d=[],h=1/0;if(s.forEach(y=>{const x=Math.sqrt((y.x-n.x)**2+(y.y-n.y)**2);if(x<=r){const C=a(y);x<=h&&(x<h?d=[{handle:y,validHandleResult:C}]:x===h&&d.push({handle:y,validHandleResult:C}),h=x)}}),!d.length)return{handle:null,validHandleResult:YV()};if(d.length===1)return d[0];const m=d.some(({validHandleResult:y})=>y.isValid),p=d.some(({handle:y})=>y.type==="target");return d.find(({handle:y,validHandleResult:x})=>p?y.type==="target":m?x.isValid:!0)||d[0]}const x3e={source:null,target:null,sourceHandle:null,targetHandle:null},YV=()=>({handleDomNode:null,isValid:!1,connection:x3e,endHandle:null});function XV(t,e,n,r,s,a,i){const o=s==="target",l=i.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),u={...YV(),handleDomNode:l};if(l){const d=YB(void 0,l),h=l.getAttribute("data-nodeid"),m=l.getAttribute("data-handleid"),p=l.classList.contains("connectable"),y=l.classList.contains("connectableend"),x={source:o?h:n,sourceHandle:o?m:r,target:o?n:h,targetHandle:o?r:m};u.connection=x,p&&y&&(e===u0.Strict?o&&d==="source"||!o&&d==="target":h!==n||m!==r)&&(u.endHandle={nodeId:h,handleId:m,type:d},u.isValid=a(x))}return u}function v3e({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((s,a)=>{if(a[Zs]){const{handleBounds:i}=a[Zs];let o=[],l=[];i&&(o=gM(a,i,"source",`${e}-${n}-${r}`),l=gM(a,i,"target",`${e}-${n}-${r}`)),s.push(...o,...l)}return s},[])}function YB(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function PS(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function y3e(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function JV({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:s,getState:a,setState:i,isValidConnection:o,edgeUpdaterType:l,onReconnectEnd:u}){const d=OV(t.target),{connectionMode:h,domNode:m,autoPanOnConnect:p,connectionRadius:y,onConnectStart:x,panBy:C,getNodes:S,cancelConnection:k}=a();let I=0,F;const{x:U,y:R}=Bf(t),E=d==null?void 0:d.elementFromPoint(U,R),_=YB(l,E),B=m==null?void 0:m.getBoundingClientRect();if(!B||!_)return;let j,D=Bf(t,B),L=!1,Q=null,H=!1,te=null;const Y=v3e({nodes:S(),nodeId:n,handleId:e,handleType:_}),ne=()=>{if(!p)return;const[K,ie]=PV(D,B);C({x:K,y:ie}),I=requestAnimationFrame(ne)};i({connectionPosition:D,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:_,connectionStartHandle:{nodeId:n,handleId:e,type:_},connectionEndHandle:null}),x==null||x(t,{nodeId:n,handleId:e,handleType:_});function V(K){const{transform:ie}=a();D=Bf(K,B);const{handle:O,validHandleResult:W}=g3e(K,d,ZT(D,ie,!1,[1,1]),y,Y,Z=>XV(Z,h,n,e,s?"target":"source",o,d));if(F=O,L||(ne(),L=!0),te=W.handleDomNode,Q=W.connection,H=W.isValid,i({connectionPosition:F&&H?qV({x:F.x,y:F.y},ie):D,connectionStatus:y3e(!!F,H),connectionEndHandle:W.endHandle}),!F&&!H&&!te)return PS(j);Q.source!==Q.target&&te&&(PS(j),j=te,te.classList.add("connecting","react-flow__handle-connecting"),te.classList.toggle("valid",H),te.classList.toggle("react-flow__handle-valid",H))}function J(K){var ie,O;(F||te)&&Q&&H&&(r==null||r(Q)),(O=(ie=a()).onConnectEnd)==null||O.call(ie,K),l&&(u==null||u(K)),PS(j),k(),cancelAnimationFrame(I),L=!1,H=!1,Q=null,te=null,d.removeEventListener("mousemove",V),d.removeEventListener("mouseup",J),d.removeEventListener("touchmove",V),d.removeEventListener("touchend",J)}d.addEventListener("mousemove",V),d.addEventListener("mouseup",J),d.addEventListener("touchmove",V),d.addEventListener("touchend",J)}const xM=()=>!0,w3e=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),b3e=(t,e,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:a,connectionClickStartHandle:i}=r;return{connecting:(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===n||(a==null?void 0:a.nodeId)===t&&(a==null?void 0:a.handleId)===e&&(a==null?void 0:a.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===n}},ZV=G.forwardRef(({type:t="source",position:e=gn.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:a=!0,id:i,onConnect:o,children:l,className:u,onMouseDown:d,onTouchStart:h,...m},p)=>{var B,j;const y=i||null,x=t==="target",C=ci(),S=d3e(),{connectOnClick:k,noPanClassName:I}=Os(w3e,ao),{connecting:F,clickConnecting:U}=Os(b3e(S,y,t),ao);S||(j=(B=C.getState()).onError)==null||j.call(B,"010",ad.error010());const R=D=>{const{defaultEdgeOptions:L,onConnect:Q,hasDefaultEdges:H}=C.getState(),te={...L,...D};if(H){const{edges:Y,setEdges:ne}=C.getState();ne(p3e(te,Y))}Q==null||Q(te),o==null||o(te)},E=D=>{if(!S)return;const L=QV(D);s&&(L&&D.button===0||!L)&&JV({event:D,handleId:y,nodeId:S,onConnect:R,isTarget:x,getState:C.getState,setState:C.setState,isValidConnection:n||C.getState().isValidConnection||xM}),L?d==null||d(D):h==null||h(D)},_=D=>{const{onClickConnectStart:L,onClickConnectEnd:Q,connectionClickStartHandle:H,connectionMode:te,isValidConnection:Y}=C.getState();if(!S||!H&&!s)return;if(!H){L==null||L(D,{nodeId:S,handleId:y,handleType:t}),C.setState({connectionClickStartHandle:{nodeId:S,type:t,handleId:y}});return}const ne=OV(D.target),V=n||Y||xM,{connection:J,isValid:K}=XV({nodeId:S,id:y,type:t},te,H.nodeId,H.handleId||null,H.type,V,ne);K&&R(J),Q==null||Q(D),C.setState({connectionClickStartHandle:null})};return gt.createElement("div",{"data-handleid":y,"data-nodeid":S,"data-handlepos":e,"data-id":`${S}-${y}-${t}`,className:yo(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",I,u,{source:!x,target:x,connectable:r,connectablestart:s,connectableend:a,connecting:U,connectionindicator:r&&(s&&!F||a&&F)}]),onMouseDown:E,onTouchStart:E,onClick:k?_:void 0,ref:p,...m},l)});ZV.displayName="Handle";var Ep=G.memo(ZV);const ez=({data:t,isConnectable:e,targetPosition:n=gn.Top,sourcePosition:r=gn.Bottom})=>gt.createElement(gt.Fragment,null,gt.createElement(Ep,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,gt.createElement(Ep,{type:"source",position:r,isConnectable:e}));ez.displayName="DefaultNode";var eN=G.memo(ez);const tz=({data:t,isConnectable:e,sourcePosition:n=gn.Bottom})=>gt.createElement(gt.Fragment,null,t==null?void 0:t.label,gt.createElement(Ep,{type:"source",position:n,isConnectable:e}));tz.displayName="InputNode";var nz=G.memo(tz);const rz=({data:t,isConnectable:e,targetPosition:n=gn.Top})=>gt.createElement(gt.Fragment,null,gt.createElement(Ep,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label);rz.displayName="OutputNode";var sz=G.memo(rz);const XB=()=>null;XB.displayName="GroupNode";const C3e=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),c2=t=>t.id;function E3e(t,e){return ao(t.selectedNodes.map(c2),e.selectedNodes.map(c2))&&ao(t.selectedEdges.map(c2),e.selectedEdges.map(c2))}const az=G.memo(({onSelectionChange:t})=>{const e=ci(),{selectedNodes:n,selectedEdges:r}=Os(C3e,E3e);return G.useEffect(()=>{const s={nodes:n,edges:r};t==null||t(s),e.getState().onSelectionChange.forEach(a=>a(s))},[n,r,t]),null});az.displayName="SelectionListener";const _3e=t=>!!t.onSelectionChange;function S3e({onSelectionChange:t}){const e=Os(_3e);return t||e?gt.createElement(az,{onSelectionChange:t}):null}const T3e=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function fm(t,e){G.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function lr(t,e,n){G.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const N3e=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:a,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:d,nodesFocusable:h,edgesFocusable:m,edgesUpdatable:p,elevateNodesOnSelect:y,minZoom:x,maxZoom:C,nodeExtent:S,onNodesChange:k,onEdgesChange:I,elementsSelectable:F,connectionMode:U,snapGrid:R,snapToGrid:E,translateExtent:_,connectOnClick:B,defaultEdgeOptions:j,fitView:D,fitViewOptions:L,onNodesDelete:Q,onEdgesDelete:H,onNodeDrag:te,onNodeDragStart:Y,onNodeDragStop:ne,onSelectionDrag:V,onSelectionDragStart:J,onSelectionDragStop:K,noPanClassName:ie,nodeOrigin:O,rfId:W,autoPanOnConnect:Z,autoPanOnNodeDrag:re,onError:se,connectionRadius:de,isValidConnection:pe,nodeDragThreshold:be})=>{const{setNodes:Se,setEdges:me,setDefaultNodesAndEdges:ce,setMinZoom:Me,setMaxZoom:Ze,setTranslateExtent:Fe,setNodeExtent:Ce,reset:Re}=Os(T3e,ao),ze=ci();return G.useEffect(()=>{const Je=r==null?void 0:r.map(dt=>({...dt,...j}));return ce(n,Je),()=>{Re()}},[]),lr("defaultEdgeOptions",j,ze.setState),lr("connectionMode",U,ze.setState),lr("onConnect",s,ze.setState),lr("onConnectStart",a,ze.setState),lr("onConnectEnd",i,ze.setState),lr("onClickConnectStart",o,ze.setState),lr("onClickConnectEnd",l,ze.setState),lr("nodesDraggable",u,ze.setState),lr("nodesConnectable",d,ze.setState),lr("nodesFocusable",h,ze.setState),lr("edgesFocusable",m,ze.setState),lr("edgesUpdatable",p,ze.setState),lr("elementsSelectable",F,ze.setState),lr("elevateNodesOnSelect",y,ze.setState),lr("snapToGrid",E,ze.setState),lr("snapGrid",R,ze.setState),lr("onNodesChange",k,ze.setState),lr("onEdgesChange",I,ze.setState),lr("connectOnClick",B,ze.setState),lr("fitViewOnInit",D,ze.setState),lr("fitViewOnInitOptions",L,ze.setState),lr("onNodesDelete",Q,ze.setState),lr("onEdgesDelete",H,ze.setState),lr("onNodeDrag",te,ze.setState),lr("onNodeDragStart",Y,ze.setState),lr("onNodeDragStop",ne,ze.setState),lr("onSelectionDrag",V,ze.setState),lr("onSelectionDragStart",J,ze.setState),lr("onSelectionDragStop",K,ze.setState),lr("noPanClassName",ie,ze.setState),lr("nodeOrigin",O,ze.setState),lr("rfId",W,ze.setState),lr("autoPanOnConnect",Z,ze.setState),lr("autoPanOnNodeDrag",re,ze.setState),lr("onError",se,ze.setState),lr("connectionRadius",de,ze.setState),lr("isValidConnection",pe,ze.setState),lr("nodeDragThreshold",be,ze.setState),fm(t,Se),fm(e,me),fm(x,Me),fm(C,Ze),fm(_,Fe),fm(S,Ce),null},vM={display:"none"},B3e={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},iz="react-flow__node-desc",oz="react-flow__edge-desc",k3e="react-flow__aria-live",I3e=t=>t.ariaLiveMessage;function F3e({rfId:t}){const e=Os(I3e);return gt.createElement("div",{id:`${k3e}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:B3e},e)}function D3e({rfId:t,disableKeyboardA11y:e}){return gt.createElement(gt.Fragment,null,gt.createElement("div",{id:`${iz}-${t}`,style:vM},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),gt.createElement("div",{id:`${oz}-${t}`,style:vM},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&gt.createElement(F3e,{rfId:t}))}var bv=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=G.useState(!1),s=G.useRef(!1),a=G.useRef(new Set([])),[i,o]=G.useMemo(()=>{if(t!==null){const u=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.split("+")),d=u.reduce((h,m)=>h.concat(...m),[]);return[u,d]}return[[],[]]},[t]);return G.useEffect(()=>{const l=typeof document<"u"?document:null,u=(e==null?void 0:e.target)||l;if(t!==null){const d=p=>{if(s.current=p.ctrlKey||p.metaKey||p.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&YT(p))return!1;const x=wM(p.code,o);a.current.add(p[x]),yM(i,a.current,!1)&&(p.preventDefault(),r(!0))},h=p=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&YT(p))return!1;const x=wM(p.code,o);yM(i,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(p[x]),p.key==="Meta"&&a.current.clear(),s.current=!1},m=()=>{a.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",h),window.addEventListener("blur",m),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",h),window.removeEventListener("blur",m)}}},[t,r]),n};function yM(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(s=>e.has(s)))}function wM(t,e){return e.includes(t)?"code":"key"}function lz(t,e,n,r){var o,l;const s=t.parentNode||t.parentId;if(!s)return n;const a=e.get(s),i=sp(a,r);return lz(a,e,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((o=a[Zs])==null?void 0:o.z)??0)>(n.z??0)?((l=a[Zs])==null?void 0:l.z)??0:n.z??0},r)}function cz(t,e,n){t.forEach(r=>{var a;const s=r.parentNode||r.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||n!=null&&n[r.id]){const{x:i,y:o,z:l}=lz(r,t,{...r.position,z:((a=r[Zs])==null?void 0:a.z)??0},e);r.positionAbsolute={x:i,y:o},r[Zs].z=l,n!=null&&n[r.id]&&(r[Zs].isParent=!0)}})}function OS(t,e,n,r){const s=new Map,a={},i=r?1e3:0;return t.forEach(o=>{var p;const l=(oc(o.zIndex)?o.zIndex:0)+(o.selected?i:0),u=e.get(o.id),d={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},h=o.parentNode||o.parentId;h&&(a[h]=!0);const m=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==o.type;Object.defineProperty(d,Zs,{enumerable:!1,value:{handleBounds:m||(p=u==null?void 0:u[Zs])==null?void 0:p.handleBounds,z:l}}),s.set(o.id,d)}),cz(s,n,a),s}function uz(t,e={}){const{getNodes:n,width:r,height:s,minZoom:a,maxZoom:i,d3Zoom:o,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:h}=t(),m=e.initial&&!u&&d;if(o&&l&&(m||!e.initial)){const y=n().filter(C=>{var k;const S=e.includeHiddenNodes?C.width&&C.height:!C.hidden;return(k=e.nodes)!=null&&k.length?S&&e.nodes.some(I=>I.id===C.id):S}),x=y.every(C=>C.width&&C.height);if(y.length>0&&x){const C=WB(y,h),{x:S,y:k,zoom:I}=WV(C,r,s,e.minZoom??a,e.maxZoom??i,e.padding??.1),F=Nf.translate(S,k).scale(I);return typeof e.duration=="number"&&e.duration>0?o.transform(_h(l,e.duration),F):o.transform(l,F),!0}}return!1}function R3e(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[Zs]:r[Zs],selected:n.selected})}),new Map(e)}function L3e(t,e){return e.map(n=>{const r=t.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function u2({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:s,edges:a,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:l,hasDefaultEdges:u}=n();t!=null&&t.length&&(l&&r({nodeInternals:R3e(t,s)}),i==null||i(t)),e!=null&&e.length&&(u&&r({edges:L3e(e,a)}),o==null||o(e))}const hm=()=>{},U3e={zoomIn:hm,zoomOut:hm,zoomTo:hm,getZoom:()=>1,setViewport:hm,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:hm,fitBounds:hm,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},M3e=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),P3e=()=>{const t=ci(),{d3Zoom:e,d3Selection:n}=Os(M3e,ao);return G.useMemo(()=>n&&e?{zoomIn:s=>e.scaleBy(_h(n,s==null?void 0:s.duration),1.2),zoomOut:s=>e.scaleBy(_h(n,s==null?void 0:s.duration),1/1.2),zoomTo:(s,a)=>e.scaleTo(_h(n,a==null?void 0:a.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,a)=>{const[i,o,l]=t.getState().transform,u=Nf.translate(s.x??i,s.y??o).scale(s.zoom??l);e.transform(_h(n,a==null?void 0:a.duration),u)},getViewport:()=>{const[s,a,i]=t.getState().transform;return{x:s,y:a,zoom:i}},fitView:s=>uz(t.getState,s),setCenter:(s,a,i)=>{const{width:o,height:l,maxZoom:u}=t.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,h=o/2-s*d,m=l/2-a*d,p=Nf.translate(h,m).scale(d);e.transform(_h(n,i==null?void 0:i.duration),p)},fitBounds:(s,a)=>{const{width:i,height:o,minZoom:l,maxZoom:u}=t.getState(),{x:d,y:h,zoom:m}=WV(s,i,o,l,u,(a==null?void 0:a.padding)??.1),p=Nf.translate(d,h).scale(m);e.transform(_h(n,a==null?void 0:a.duration),p)},project:s=>{const{transform:a,snapToGrid:i,snapGrid:o}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),ZT(s,a,i,o)},screenToFlowPosition:s=>{const{transform:a,snapToGrid:i,snapGrid:o,domNode:l}=t.getState();if(!l)return s;const{x:u,y:d}=l.getBoundingClientRect(),h={x:s.x-u,y:s.y-d};return ZT(h,a,i,o)},flowToScreenPosition:s=>{const{transform:a,domNode:i}=t.getState();if(!i)return s;const{x:o,y:l}=i.getBoundingClientRect(),u=qV(s,a);return{x:u.x+o,y:u.y+l}},viewportInitialized:!0}:U3e,[e,n])};function QC(){const t=P3e(),e=ci(),n=G.useCallback(()=>e.getState().getNodes().map(x=>({...x})),[]),r=G.useCallback(x=>e.getState().nodeInternals.get(x),[]),s=G.useCallback(()=>{const{edges:x=[]}=e.getState();return x.map(C=>({...C}))},[]),a=G.useCallback(x=>{const{edges:C=[]}=e.getState();return C.find(S=>S.id===x)},[]),i=G.useCallback(x=>{const{getNodes:C,setNodes:S,hasDefaultNodes:k,onNodesChange:I}=e.getState(),F=C(),U=typeof x=="function"?x(F):x;if(k)S(U);else if(I){const R=U.length===0?F.map(E=>({type:"remove",id:E.id})):U.map(E=>({item:E,type:"reset"}));I(R)}},[]),o=G.useCallback(x=>{const{edges:C=[],setEdges:S,hasDefaultEdges:k,onEdgesChange:I}=e.getState(),F=typeof x=="function"?x(C):x;if(k)S(F);else if(I){const U=F.length===0?C.map(R=>({type:"remove",id:R.id})):F.map(R=>({item:R,type:"reset"}));I(U)}},[]),l=G.useCallback(x=>{const C=Array.isArray(x)?x:[x],{getNodes:S,setNodes:k,hasDefaultNodes:I,onNodesChange:F}=e.getState();if(I){const R=[...S(),...C];k(R)}else if(F){const U=C.map(R=>({item:R,type:"add"}));F(U)}},[]),u=G.useCallback(x=>{const C=Array.isArray(x)?x:[x],{edges:S=[],setEdges:k,hasDefaultEdges:I,onEdgesChange:F}=e.getState();if(I)k([...S,...C]);else if(F){const U=C.map(R=>({item:R,type:"add"}));F(U)}},[]),d=G.useCallback(()=>{const{getNodes:x,edges:C=[],transform:S}=e.getState(),[k,I,F]=S;return{nodes:x().map(U=>({...U})),edges:C.map(U=>({...U})),viewport:{x:k,y:I,zoom:F}}},[]),h=G.useCallback(({nodes:x,edges:C})=>{const{nodeInternals:S,getNodes:k,edges:I,hasDefaultNodes:F,hasDefaultEdges:U,onNodesDelete:R,onEdgesDelete:E,onNodesChange:_,onEdgesChange:B}=e.getState(),j=(x||[]).map(te=>te.id),D=(C||[]).map(te=>te.id),L=k().reduce((te,Y)=>{const ne=Y.parentNode||Y.parentId,V=!j.includes(Y.id)&&ne&&te.find(K=>K.id===ne);return(typeof Y.deletable=="boolean"?Y.deletable:!0)&&(j.includes(Y.id)||V)&&te.push(Y),te},[]),Q=I.filter(te=>typeof te.deletable=="boolean"?te.deletable:!0),H=Q.filter(te=>D.includes(te.id));if(L||H){const te=$V(L,Q),Y=[...H,...te],ne=Y.reduce((V,J)=>(V.includes(J.id)||V.push(J.id),V),[]);if((U||F)&&(U&&e.setState({edges:I.filter(V=>!ne.includes(V.id))}),F&&(L.forEach(V=>{S.delete(V.id)}),e.setState({nodeInternals:new Map(S)}))),ne.length>0&&(E==null||E(Y),B&&B(ne.map(V=>({id:V,type:"remove"})))),L.length>0&&(R==null||R(L),_)){const V=L.map(J=>({id:J.id,type:"remove"}));_(V)}}},[]),m=G.useCallback(x=>{const C=s3e(x),S=C?null:e.getState().nodeInternals.get(x.id);return!C&&!S?[null,null,C]:[C?x:dM(S),S,C]},[]),p=G.useCallback((x,C=!0,S)=>{const[k,I,F]=m(x);return k?(S||e.getState().getNodes()).filter(U=>{if(!F&&(U.id===I.id||!U.positionAbsolute))return!1;const R=dM(U),E=WT(R,k);return C&&E>0||E>=k.width*k.height}):[]},[]),y=G.useCallback((x,C,S=!0)=>{const[k]=m(x);if(!k)return!1;const I=WT(k,C);return S&&I>0||I>=k.width*k.height},[]);return G.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:s,getEdge:a,setNodes:i,setEdges:o,addNodes:l,addEdges:u,toObject:d,deleteElements:h,getIntersectingNodes:p,isNodeIntersecting:y}),[t,n,r,s,a,i,o,l,u,d,h,p,y])}const O3e={actInsideInputWithModifier:!1};var j3e=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=ci(),{deleteElements:r}=QC(),s=bv(t,O3e),a=bv(e);G.useEffect(()=>{if(s){const{edges:i,getNodes:o}=n.getState(),l=o().filter(d=>d.selected),u=i.filter(d=>d.selected);r({nodes:l,edges:u}),n.setState({nodesSelectionActive:!1})}},[s]),G.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])};function Q3e(t){const e=ci();G.useEffect(()=>{let n;const r=()=>{var a,i;if(!t.current)return;const s=HB(t.current);(s.height===0||s.width===0)&&((i=(a=e.getState()).onError)==null||i.call(a,"004",ad.error004())),e.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const JB={position:"absolute",width:"100%",height:"100%",top:0,left:0},H3e=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,A2=t=>({x:t.x,y:t.y,zoom:t.k}),mm=(t,e)=>t.target.closest(`.${e}`),bM=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),CM=t=>{const e=t.ctrlKey&&pb()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},V3e=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),z3e=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:a=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=Lh.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:h=!0,defaultViewport:m,translateExtent:p,minZoom:y,maxZoom:x,zoomActivationKeyCode:C,preventScrolling:S=!0,children:k,noWheelClassName:I,noPanClassName:F})=>{const U=G.useRef(),R=ci(),E=G.useRef(!1),_=G.useRef(!1),B=G.useRef(null),j=G.useRef({x:0,y:0,zoom:0}),{d3Zoom:D,d3Selection:L,d3ZoomHandler:Q,userSelectionActive:H}=Os(V3e,ao),te=bv(C),Y=G.useRef(0),ne=G.useRef(!1),V=G.useRef();return Q3e(B),G.useEffect(()=>{if(B.current){const J=B.current.getBoundingClientRect(),K=WIe().scaleExtent([y,x]).translateExtent(p),ie=rc(B.current).call(K),O=Nf.translate(m.x,m.y).scale(Cp(m.zoom,y,x)),W=[[0,0],[J.width,J.height]],Z=K.constrain()(O,W,p);K.transform(ie,Z),K.wheelDelta(CM),R.setState({d3Zoom:K,d3Selection:ie,d3ZoomHandler:ie.on("wheel.zoom"),transform:[Z.x,Z.y,Z.k],domNode:B.current.closest(".react-flow")})}},[]),G.useEffect(()=>{L&&D&&(i&&!te&&!H?L.on("wheel.zoom",J=>{if(mm(J,I))return!1;J.preventDefault(),J.stopImmediatePropagation();const K=L.property("__zoom").k||1;if(J.ctrlKey&&a){const pe=Uu(J),be=CM(J),Se=K*Math.pow(2,be);D.scaleTo(L,Se,pe,J);return}const ie=J.deltaMode===1?20:1;let O=l===Lh.Vertical?0:J.deltaX*ie,W=l===Lh.Horizontal?0:J.deltaY*ie;!pb()&&J.shiftKey&&l!==Lh.Vertical&&(O=J.deltaY*ie,W=0),D.translateBy(L,-(O/K)*o,-(W/K)*o,{internal:!0});const Z=A2(L.property("__zoom")),{onViewportChangeStart:re,onViewportChange:se,onViewportChangeEnd:de}=R.getState();clearTimeout(V.current),ne.current||(ne.current=!0,e==null||e(J,Z),re==null||re(Z)),ne.current&&(t==null||t(J,Z),se==null||se(Z),V.current=setTimeout(()=>{n==null||n(J,Z),de==null||de(Z),ne.current=!1},150))},{passive:!1}):typeof Q<"u"&&L.on("wheel.zoom",function(J,K){if(!S&&J.type==="wheel"&&!J.ctrlKey||mm(J,I))return null;J.preventDefault(),Q.call(this,J,K)},{passive:!1}))},[H,i,l,L,D,Q,te,a,S,I,e,t,n]),G.useEffect(()=>{D&&D.on("start",J=>{var O,W;if(!J.sourceEvent||J.sourceEvent.internal)return null;Y.current=(O=J.sourceEvent)==null?void 0:O.button;const{onViewportChangeStart:K}=R.getState(),ie=A2(J.transform);E.current=!0,j.current=ie,((W=J.sourceEvent)==null?void 0:W.type)==="mousedown"&&R.setState({paneDragging:!0}),K==null||K(ie),e==null||e(J.sourceEvent,ie)})},[D,e]),G.useEffect(()=>{D&&(H&&!E.current?D.on("zoom",null):H||D.on("zoom",J=>{var ie;const{onViewportChange:K}=R.getState();if(R.setState({transform:[J.transform.x,J.transform.y,J.transform.k]}),_.current=!!(r&&bM(h,Y.current??0)),(t||K)&&!((ie=J.sourceEvent)!=null&&ie.internal)){const O=A2(J.transform);K==null||K(O),t==null||t(J.sourceEvent,O)}}))},[H,D,t,h,r]),G.useEffect(()=>{D&&D.on("end",J=>{if(!J.sourceEvent||J.sourceEvent.internal)return null;const{onViewportChangeEnd:K}=R.getState();if(E.current=!1,R.setState({paneDragging:!1}),r&&bM(h,Y.current??0)&&!_.current&&r(J.sourceEvent),_.current=!1,(n||K)&&H3e(j.current,J.transform)){const ie=A2(J.transform);j.current=ie,clearTimeout(U.current),U.current=setTimeout(()=>{K==null||K(ie),n==null||n(J.sourceEvent,ie)},i?150:0)}})},[D,i,h,n,r]),G.useEffect(()=>{D&&D.filter(J=>{const K=te||s,ie=a&&J.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&J.button===1&&J.type==="mousedown"&&(mm(J,"react-flow__node")||mm(J,"react-flow__edge")))return!0;if(!h&&!K&&!i&&!u&&!a||H||!u&&J.type==="dblclick"||mm(J,I)&&J.type==="wheel"||mm(J,F)&&(J.type!=="wheel"||i&&J.type==="wheel"&&!te)||!a&&J.ctrlKey&&J.type==="wheel"||!K&&!i&&!ie&&J.type==="wheel"||!h&&(J.type==="mousedown"||J.type==="touchstart")||Array.isArray(h)&&!h.includes(J.button)&&J.type==="mousedown")return!1;const O=Array.isArray(h)&&h.includes(J.button)||!J.button||J.button<=1;return(!J.ctrlKey||J.type==="wheel")&&O})},[H,D,s,a,i,u,h,d,te]),gt.createElement("div",{className:"react-flow__renderer",ref:B,style:JB},k)},G3e=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function q3e(){const{userSelectionActive:t,userSelectionRect:e}=Os(G3e,ao);return t&&e?gt.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function EM(t,e){const n=e.parentNode||e.parentId,r=t.find(s=>s.id===n);if(r){const s=e.position.x+e.width-r.width,a=e.position.y+e.height-r.height;if(s>0||a>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),a>0&&(r.style.height+=a),e.position.x<0){const i=Math.abs(e.position.x);r.position.x=r.position.x-i,r.style.width+=i,e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);r.position.y=r.position.y-i,r.style.height+=i,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function Az(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,s)=>{const a=t.filter(o=>o.id===s.id);if(a.length===0)return r.push(s),r;const i={...s};for(const o of a)if(o)switch(o.type){case"select":{i.selected=o.selected;break}case"position":{typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&EM(r,i);break}case"dimensions":{typeof o.dimensions<"u"&&(i.width=o.dimensions.width,i.height=o.dimensions.height),typeof o.updateStyle<"u"&&(i.style={...i.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(i.resizing=o.resizing),i.expandParent&&EM(r,i);break}case"remove":return r}return r.push(i),r},n)}function dz(t,e){return Az(t,e)}function K3e(t,e){return Az(t,e)}const rf=(t,e)=>({id:t,type:"select",selected:e});function Um(t,e){return t.reduce((n,r)=>{const s=e.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(rf(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(rf(r.id,!1))),n},[])}const jS=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},$3e=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),fz=G.memo(({isSelecting:t,selectionMode:e=wv.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:d,children:h})=>{const m=G.useRef(null),p=ci(),y=G.useRef(0),x=G.useRef(0),C=G.useRef(),{userSelectionActive:S,elementsSelectable:k,dragging:I}=Os($3e,ao),F=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),y.current=0,x.current=0},U=Q=>{a==null||a(Q),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},R=Q=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){Q.preventDefault();return}i==null||i(Q)},E=o?Q=>o(Q):void 0,_=Q=>{const{resetSelectedElements:H,domNode:te}=p.getState();if(C.current=te==null?void 0:te.getBoundingClientRect(),!k||!t||Q.button!==0||Q.target!==m.current||!C.current)return;const{x:Y,y:ne}=Bf(Q,C.current);H(),p.setState({userSelectionRect:{width:0,height:0,startX:Y,startY:ne,x:Y,y:ne}}),r==null||r(Q)},B=Q=>{const{userSelectionRect:H,nodeInternals:te,edges:Y,transform:ne,onNodesChange:V,onEdgesChange:J,nodeOrigin:K,getNodes:ie}=p.getState();if(!t||!C.current||!H)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const O=Bf(Q,C.current),W=H.startX??0,Z=H.startY??0,re={...H,x:O.x<W?O.x:W,y:O.y<Z?O.y:Z,width:Math.abs(O.x-W),height:Math.abs(O.y-Z)},se=ie(),de=KV(te,re,ne,e===wv.Partial,!0,K),pe=$V(de,Y).map(Se=>Se.id),be=de.map(Se=>Se.id);if(y.current!==be.length){y.current=be.length;const Se=Um(se,be);Se.length&&(V==null||V(Se))}if(x.current!==pe.length){x.current=pe.length;const Se=Um(Y,pe);Se.length&&(J==null||J(Se))}p.setState({userSelectionRect:re})},j=Q=>{if(Q.button!==0)return;const{userSelectionRect:H}=p.getState();!S&&H&&Q.target===m.current&&(U==null||U(Q)),p.setState({nodesSelectionActive:y.current>0}),F(),s==null||s(Q)},D=Q=>{S&&(p.setState({nodesSelectionActive:y.current>0}),s==null||s(Q)),F()},L=k&&(t||S);return gt.createElement("div",{className:yo(["react-flow__pane",{dragging:I,selection:t}]),onClick:L?void 0:jS(U,m),onContextMenu:jS(R,m),onWheel:jS(E,m),onMouseEnter:L?void 0:l,onMouseDown:L?_:void 0,onMouseMove:L?B:u,onMouseUp:L?j:void 0,onMouseLeave:L?D:d,ref:m,style:JB},h,gt.createElement(q3e,null))});fz.displayName="Pane";function hz(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:hz(r,e):!1}function _M(t,e,n){let r=t;do{if(r!=null&&r.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function W3e(t,e,n,r){return Array.from(t.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!hz(s,t))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>{var a,i;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((a=s.positionAbsolute)==null?void 0:a.x)??0),y:n.y-(((i=s.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}})}function Y3e(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function mz(t,e,n,r,s=[0,0],a){const i=Y3e(t,t.extent||r);let o=i;const l=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(l&&t.width&&t.height){const h=n.get(l),{x:m,y:p}=sp(h,s).positionAbsolute;o=h&&oc(m)&&oc(p)&&oc(h.width)&&oc(h.height)?[[m+t.width*s[0],p+t.height*s[1]],[m+h.width-t.width+t.width*s[0],p+h.height-t.height+t.height*s[1]]]:o}else a==null||a("005",ad.error005()),o=i;else if(t.extent&&l&&t.extent!=="parent"){const h=n.get(l),{x:m,y:p}=sp(h,s).positionAbsolute;o=[[t.extent[0][0]+m,t.extent[0][1]+p],[t.extent[1][0]+m,t.extent[1][1]+p]]}let u={x:0,y:0};if(l){const h=n.get(l);u=sp(h,s).positionAbsolute}const d=o&&o!=="parent"?VB(e,o):e;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function QS({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?r.find(s=>s.id===t):r[0],r]}const SM=(t,e,n,r)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const a=Array.from(s),i=e.getBoundingClientRect(),o={x:i.width*r[0],y:i.height*r[1]};return a.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-i.left-o.x)/n,y:(u.top-i.top-o.y)/n,...HB(l)}})};function Hg(t,e,n){return n===void 0?n:r=>{const s=e().nodeInternals.get(t);s&&n(r,{...s})}}function tN({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:a,multiSelectionActive:i,nodeInternals:o,onError:l}=e.getState(),u=o.get(t);if(!u){l==null||l("012",ad.error012(t));return}e.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&i)&&(a({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=r==null?void 0:r.current)==null?void 0:d.blur()})):s([t])}function X3e(){const t=ci();return G.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:a}=t.getState(),i=n.touches?n.touches[0].clientX:n.clientX,o=n.touches?n.touches[0].clientY:n.clientY,l={x:(i-r[0])/r[2],y:(o-r[1])/r[2]};return{xSnapped:a?s[0]*Math.round(l.x/s[0]):l.x,ySnapped:a?s[1]*Math.round(l.y/s[1]):l.y,...l}},[])}function HS(t){return(e,n,r)=>t==null?void 0:t(e,r)}function pz({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:a,selectNodesOnDrag:i}){const o=ci(),[l,u]=G.useState(!1),d=G.useRef([]),h=G.useRef({x:null,y:null}),m=G.useRef(0),p=G.useRef(null),y=G.useRef({x:0,y:0}),x=G.useRef(null),C=G.useRef(!1),S=G.useRef(!1),k=G.useRef(!1),I=X3e();return G.useEffect(()=>{if(t!=null&&t.current){const F=rc(t.current),U=({x:_,y:B})=>{const{nodeInternals:j,onNodeDrag:D,onSelectionDrag:L,updateNodePositions:Q,nodeExtent:H,snapGrid:te,snapToGrid:Y,nodeOrigin:ne,onError:V}=o.getState();h.current={x:_,y:B};let J=!1,K={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&H){const O=WB(d.current,ne);K=zB(O)}if(d.current=d.current.map(O=>{const W={x:_-O.distance.x,y:B-O.distance.y};Y&&(W.x=te[0]*Math.round(W.x/te[0]),W.y=te[1]*Math.round(W.y/te[1]));const Z=[[H[0][0],H[0][1]],[H[1][0],H[1][1]]];d.current.length>1&&H&&!O.extent&&(Z[0][0]=O.positionAbsolute.x-K.x+H[0][0],Z[1][0]=O.positionAbsolute.x+(O.width??0)-K.x2+H[1][0],Z[0][1]=O.positionAbsolute.y-K.y+H[0][1],Z[1][1]=O.positionAbsolute.y+(O.height??0)-K.y2+H[1][1]);const re=mz(O,W,j,Z,ne,V);return J=J||O.position.x!==re.position.x||O.position.y!==re.position.y,O.position=re.position,O.positionAbsolute=re.positionAbsolute,O}),!J)return;Q(d.current,!0,!0),u(!0);const ie=s?D:HS(L);if(ie&&x.current){const[O,W]=QS({nodeId:s,dragItems:d.current,nodeInternals:j});ie(x.current,O,W)}},R=()=>{if(!p.current)return;const[_,B]=PV(y.current,p.current);if(_!==0||B!==0){const{transform:j,panBy:D}=o.getState();h.current.x=(h.current.x??0)-_/j[2],h.current.y=(h.current.y??0)-B/j[2],D({x:_,y:B})&&U(h.current)}m.current=requestAnimationFrame(R)},E=_=>{var ne;const{nodeInternals:B,multiSelectionActive:j,nodesDraggable:D,unselectNodesAndEdges:L,onNodeDragStart:Q,onSelectionDragStart:H}=o.getState();S.current=!0;const te=s?Q:HS(H);(!i||!a)&&!j&&s&&((ne=B.get(s))!=null&&ne.selected||L()),s&&a&&i&&tN({id:s,store:o,nodeRef:t});const Y=I(_);if(h.current=Y,d.current=W3e(B,D,Y,s),te&&d.current){const[V,J]=QS({nodeId:s,dragItems:d.current,nodeInternals:B});te(_.sourceEvent,V,J)}};if(e)F.on(".drag",null);else{const _=ake().on("start",B=>{const{domNode:j,nodeDragThreshold:D}=o.getState();D===0&&E(B),k.current=!1;const L=I(B);h.current=L,p.current=(j==null?void 0:j.getBoundingClientRect())||null,y.current=Bf(B.sourceEvent,p.current)}).on("drag",B=>{var Q,H;const j=I(B),{autoPanOnNodeDrag:D,nodeDragThreshold:L}=o.getState();if(B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1&&(k.current=!0),!k.current){if(!C.current&&S.current&&D&&(C.current=!0,R()),!S.current){const te=j.xSnapped-(((Q=h==null?void 0:h.current)==null?void 0:Q.x)??0),Y=j.ySnapped-(((H=h==null?void 0:h.current)==null?void 0:H.y)??0);Math.sqrt(te*te+Y*Y)>L&&E(B)}(h.current.x!==j.xSnapped||h.current.y!==j.ySnapped)&&d.current&&S.current&&(x.current=B.sourceEvent,y.current=Bf(B.sourceEvent,p.current),U(j))}}).on("end",B=>{if(!(!S.current||k.current)&&(u(!1),C.current=!1,S.current=!1,cancelAnimationFrame(m.current),d.current)){const{updateNodePositions:j,nodeInternals:D,onNodeDragStop:L,onSelectionDragStop:Q}=o.getState(),H=s?L:HS(Q);if(j(d.current,!1,!1),H){const[te,Y]=QS({nodeId:s,dragItems:d.current,nodeInternals:D});H(B.sourceEvent,te,Y)}}}).filter(B=>{const j=B.target;return!B.button&&(!n||!_M(j,`.${n}`,t))&&(!r||_M(j,r,t))});return F.call(_),()=>{F.on(".drag",null)}}}},[t,e,n,r,a,o,s,i,I]),l}function gz(){const t=ci();return G.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:a,getNodes:i,snapToGrid:o,snapGrid:l,onError:u,nodesDraggable:d}=t.getState(),h=i().filter(k=>k.selected&&(k.draggable||d&&typeof k.draggable>"u")),m=o?l[0]:5,p=o?l[1]:5,y=n.isShiftPressed?4:1,x=n.x*m*y,C=n.y*p*y,S=h.map(k=>{if(k.positionAbsolute){const I={x:k.positionAbsolute.x+x,y:k.positionAbsolute.y+C};o&&(I.x=l[0]*Math.round(I.x/l[0]),I.y=l[1]*Math.round(I.y/l[1]));const{positionAbsolute:F,position:U}=mz(k,I,r,s,void 0,u);k.position=U,k.positionAbsolute=F}return k});a(S,!0,!1)},[])}const ap={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Vg=t=>{const e=({id:n,type:r,data:s,xPos:a,yPos:i,xPosOrigin:o,yPosOrigin:l,selected:u,onClick:d,onMouseEnter:h,onMouseMove:m,onMouseLeave:p,onContextMenu:y,onDoubleClick:x,style:C,className:S,isDraggable:k,isSelectable:I,isConnectable:F,isFocusable:U,selectNodesOnDrag:R,sourcePosition:E,targetPosition:_,hidden:B,resizeObserver:j,dragHandle:D,zIndex:L,isParent:Q,noDragClassName:H,noPanClassName:te,initialized:Y,disableKeyboardA11y:ne,ariaLabel:V,rfId:J,hasHandleBounds:K})=>{const ie=ci(),O=G.useRef(null),W=G.useRef(null),Z=G.useRef(E),re=G.useRef(_),se=G.useRef(r),de=I||k||d||h||m||p,pe=gz(),be=Hg(n,ie.getState,h),Se=Hg(n,ie.getState,m),me=Hg(n,ie.getState,p),ce=Hg(n,ie.getState,y),Me=Hg(n,ie.getState,x),Ze=Re=>{const{nodeDragThreshold:ze}=ie.getState();if(I&&(!R||!k||ze>0)&&tN({id:n,store:ie,nodeRef:O}),d){const Je=ie.getState().nodeInternals.get(n);Je&&d(Re,{...Je})}},Fe=Re=>{if(!YT(Re)&&!ne)if(jV.includes(Re.key)&&I){const ze=Re.key==="Escape";tN({id:n,store:ie,unselect:ze,nodeRef:O})}else k&&u&&Object.prototype.hasOwnProperty.call(ap,Re.key)&&(ie.setState({ariaLiveMessage:`Moved selected node ${Re.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~i}`}),pe({x:ap[Re.key].x,y:ap[Re.key].y,isShiftPressed:Re.shiftKey}))};G.useEffect(()=>()=>{W.current&&(j==null||j.unobserve(W.current),W.current=null)},[]),G.useEffect(()=>{if(O.current&&!B){const Re=O.current;(!Y||!K||W.current!==Re)&&(W.current&&(j==null||j.unobserve(W.current)),j==null||j.observe(Re),W.current=Re)}},[B,Y,K]),G.useEffect(()=>{const Re=se.current!==r,ze=Z.current!==E,Je=re.current!==_;O.current&&(Re||ze||Je)&&(Re&&(se.current=r),ze&&(Z.current=E),Je&&(re.current=_),ie.getState().updateNodeDimensions([{id:n,nodeElement:O.current,forceUpdate:!0}]))},[n,r,E,_]);const Ce=pz({nodeRef:O,disabled:B||!k,noDragClassName:H,handleSelector:D,nodeId:n,isSelectable:I,selectNodesOnDrag:R});return B?null:gt.createElement("div",{className:yo(["react-flow__node",`react-flow__node-${r}`,{[te]:k},S,{selected:u,selectable:I,parent:Q,dragging:Ce}]),ref:O,style:{zIndex:L,transform:`translate(${o}px,${l}px)`,pointerEvents:de?"all":"none",visibility:Y?"visible":"hidden",...C},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:be,onMouseMove:Se,onMouseLeave:me,onContextMenu:ce,onClick:Ze,onDoubleClick:Me,onKeyDown:U?Fe:void 0,tabIndex:U?0:void 0,role:U?"button":void 0,"aria-describedby":ne?void 0:`${iz}-${J}`,"aria-label":V},gt.createElement(A3e,{value:n},gt.createElement(t,{id:n,data:s,type:r,xPos:a,yPos:i,selected:u,isConnectable:F,sourcePosition:E,targetPosition:_,dragging:Ce,dragHandle:D,zIndex:L})))};return e.displayName="NodeWrapper",G.memo(e)};const J3e=t=>{const e=t.getNodes().filter(n=>n.selected);return{...WB(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function Z3e({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=ci(),{width:s,height:a,x:i,y:o,transformString:l,userSelectionActive:u}=Os(J3e,ao),d=gz(),h=G.useRef(null);if(G.useEffect(()=>{var y;n||(y=h.current)==null||y.focus({preventScroll:!0})},[n]),pz({nodeRef:h}),u||!s||!a)return null;const m=t?y=>{const x=r.getState().getNodes().filter(C=>C.selected);t(y,x)}:void 0,p=y=>{Object.prototype.hasOwnProperty.call(ap,y.key)&&d({x:ap[y.key].x,y:ap[y.key].y,isShiftPressed:y.shiftKey})};return gt.createElement("div",{className:yo(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l}},gt.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:s,height:a,top:o,left:i}}))}var eFe=G.memo(Z3e);const tFe=t=>t.nodesSelectionActive,xz=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:i,deleteKeyCode:o,onMove:l,onMoveStart:u,onMoveEnd:d,selectionKeyCode:h,selectionOnDrag:m,selectionMode:p,onSelectionStart:y,onSelectionEnd:x,multiSelectionKeyCode:C,panActivationKeyCode:S,zoomActivationKeyCode:k,elementsSelectable:I,zoomOnScroll:F,zoomOnPinch:U,panOnScroll:R,panOnScrollSpeed:E,panOnScrollMode:_,zoomOnDoubleClick:B,panOnDrag:j,defaultViewport:D,translateExtent:L,minZoom:Q,maxZoom:H,preventScrolling:te,onSelectionContextMenu:Y,noWheelClassName:ne,noPanClassName:V,disableKeyboardA11y:J})=>{const K=Os(tFe),ie=bv(h),O=bv(S),W=O||j,Z=O||R,re=ie||m&&W!==!0;return j3e({deleteKeyCode:o,multiSelectionKeyCode:C}),gt.createElement(z3e,{onMove:l,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:a,elementsSelectable:I,zoomOnScroll:F,zoomOnPinch:U,panOnScroll:Z,panOnScrollSpeed:E,panOnScrollMode:_,zoomOnDoubleClick:B,panOnDrag:!ie&&W,defaultViewport:D,translateExtent:L,minZoom:Q,maxZoom:H,zoomActivationKeyCode:k,preventScrolling:te,noWheelClassName:ne,noPanClassName:V},gt.createElement(fz,{onSelectionStart:y,onSelectionEnd:x,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:W,isSelecting:!!re,selectionMode:p},t,K&&gt.createElement(eFe,{onSelectionContextMenu:Y,noPanClassName:V,disableKeyboardA11y:J})))};xz.displayName="FlowRenderer";var nFe=G.memo(xz);function rFe(t){return Os(G.useCallback(n=>t?KV(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function sFe(t){const e={input:Vg(t.input||nz),default:Vg(t.default||eN),output:Vg(t.output||sz),group:Vg(t.group||XB)},n={},r=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,a)=>(s[a]=Vg(t[a]||eN),s),n);return{...e,...r}}const aFe=({x:t,y:e,width:n,height:r,origin:s})=>!n||!r?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-n*s[0],y:e-r*s[1]},iFe=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),vz=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:a,onError:i}=Os(iFe,ao),o=rFe(t.onlyRenderVisibleElements),l=G.useRef(),u=G.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(h=>{const m=h.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));a(m)});return l.current=d,d},[]);return G.useEffect(()=>()=>{var d;(d=l==null?void 0:l.current)==null||d.disconnect()},[]),gt.createElement("div",{className:"react-flow__nodes",style:JB},o.map(d=>{var U,R,E;let h=d.type||"default";t.nodeTypes[h]||(i==null||i("003",ad.error003(h)),h="default");const m=t.nodeTypes[h]||t.nodeTypes.default,p=!!(d.draggable||e&&typeof d.draggable>"u"),y=!!(d.selectable||s&&typeof d.selectable>"u"),x=!!(d.connectable||n&&typeof d.connectable>"u"),C=!!(d.focusable||r&&typeof d.focusable>"u"),S=t.nodeExtent?VB(d.positionAbsolute,t.nodeExtent):d.positionAbsolute,k=(S==null?void 0:S.x)??0,I=(S==null?void 0:S.y)??0,F=aFe({x:k,y:I,width:d.width??0,height:d.height??0,origin:t.nodeOrigin});return gt.createElement(m,{key:d.id,id:d.id,className:d.className,style:d.style,type:h,data:d.data,sourcePosition:d.sourcePosition||gn.Bottom,targetPosition:d.targetPosition||gn.Top,hidden:d.hidden,xPos:k,yPos:I,xPosOrigin:F.x,yPosOrigin:F.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!d.selected,isDraggable:p,isSelectable:y,isConnectable:x,isFocusable:C,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((U=d[Zs])==null?void 0:U.z)??0,isParent:!!((R=d[Zs])!=null&&R.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!d.width&&!!d.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((E=d[Zs])!=null&&E.handleBounds)})}))};vz.displayName="NodeRenderer";var oFe=G.memo(vz);const lFe=(t,e,n)=>n===gn.Left?t-e:n===gn.Right?t+e:t,cFe=(t,e,n)=>n===gn.Top?t-e:n===gn.Bottom?t+e:t,TM="react-flow__edgeupdater",NM=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:a,onMouseOut:i,type:o})=>gt.createElement("circle",{onMouseDown:s,onMouseEnter:a,onMouseOut:i,className:yo([TM,`${TM}-${o}`]),cx:lFe(e,r,t),cy:cFe(n,r,t),r,stroke:"transparent",fill:"transparent"}),uFe=()=>!0;var pm=t=>{const e=({id:n,className:r,type:s,data:a,onClick:i,onEdgeDoubleClick:o,selected:l,animated:u,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:x,style:C,source:S,target:k,sourceX:I,sourceY:F,targetX:U,targetY:R,sourcePosition:E,targetPosition:_,elementsSelectable:B,hidden:j,sourceHandleId:D,targetHandleId:L,onContextMenu:Q,onMouseEnter:H,onMouseMove:te,onMouseLeave:Y,reconnectRadius:ne,onReconnect:V,onReconnectStart:J,onReconnectEnd:K,markerEnd:ie,markerStart:O,rfId:W,ariaLabel:Z,isFocusable:re,isReconnectable:se,pathOptions:de,interactionWidth:pe,disableKeyboardA11y:be})=>{const Se=G.useRef(null),[me,ce]=G.useState(!1),[Me,Ze]=G.useState(!1),Fe=ci(),Ce=G.useMemo(()=>`url('#${JT(O,W)}')`,[O,W]),Re=G.useMemo(()=>`url('#${JT(ie,W)}')`,[ie,W]);if(j)return null;const ze=Ie=>{var qn;const{edges:Xe,addSelectedEdges:mt,unselectNodesAndEdges:Yt,multiSelectionActive:Kt}=Fe.getState(),rn=Xe.find(un=>un.id===n);rn&&(B&&(Fe.setState({nodesSelectionActive:!1}),rn.selected&&Kt?(Yt({nodes:[],edges:[rn]}),(qn=Se.current)==null||qn.blur()):mt([n])),i&&i(Ie,rn))},Je=Qg(n,Fe.getState,o),dt=Qg(n,Fe.getState,Q),_t=Qg(n,Fe.getState,H),ft=Qg(n,Fe.getState,te),Rt=Qg(n,Fe.getState,Y),Ut=(Ie,Xe)=>{if(Ie.button!==0)return;const{edges:mt,isValidConnection:Yt}=Fe.getState(),Kt=Xe?k:S,rn=(Xe?L:D)||null,qn=Xe?"target":"source",un=Yt||uFe,xr=Xe,jn=mt.find(on=>on.id===n);Ze(!0),J==null||J(Ie,jn,qn);const Sr=on=>{Ze(!1),K==null||K(on,jn,qn)};JV({event:Ie,handleId:rn,nodeId:Kt,onConnect:on=>V==null?void 0:V(jn,on),isTarget:xr,getState:Fe.getState,setState:Fe.setState,isValidConnection:un,edgeUpdaterType:qn,onReconnectEnd:Sr})},Zt=Ie=>Ut(Ie,!0),Mt=Ie=>Ut(Ie,!1),jt=()=>ce(!0),Wt=()=>ce(!1),Ue=!B&&!i,Oe=Ie=>{var Xe;if(!be&&jV.includes(Ie.key)&&B){const{unselectNodesAndEdges:mt,addSelectedEdges:Yt,edges:Kt}=Fe.getState();Ie.key==="Escape"?((Xe=Se.current)==null||Xe.blur(),mt({edges:[Kt.find(qn=>qn.id===n)]})):Yt([n])}};return gt.createElement("g",{className:yo(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:l,animated:u,inactive:Ue,updating:me}]),onClick:ze,onDoubleClick:Je,onContextMenu:dt,onMouseEnter:_t,onMouseMove:ft,onMouseLeave:Rt,onKeyDown:re?Oe:void 0,tabIndex:re?0:void 0,role:re?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":Z===null?void 0:Z||`Edge from ${S} to ${k}`,"aria-describedby":re?`${oz}-${W}`:void 0,ref:Se},!Me&&gt.createElement(t,{id:n,source:S,target:k,selected:l,animated:u,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:x,data:a,style:C,sourceX:I,sourceY:F,targetX:U,targetY:R,sourcePosition:E,targetPosition:_,sourceHandleId:D,targetHandleId:L,markerStart:Ce,markerEnd:Re,pathOptions:de,interactionWidth:pe}),se&&gt.createElement(gt.Fragment,null,(se==="source"||se===!0)&&gt.createElement(NM,{position:E,centerX:I,centerY:F,radius:ne,onMouseDown:Zt,onMouseEnter:jt,onMouseOut:Wt,type:"source"}),(se==="target"||se===!0)&&gt.createElement(NM,{position:_,centerX:U,centerY:R,radius:ne,onMouseDown:Mt,onMouseEnter:jt,onMouseOut:Wt,type:"target"})))};return e.displayName="EdgeWrapper",G.memo(e)};function AFe(t){const e={default:pm(t.default||xb),straight:pm(t.bezier||KB),step:pm(t.step||qB),smoothstep:pm(t.step||jC),simplebezier:pm(t.simplebezier||GB)},n={},r=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,a)=>(s[a]=pm(t[a]||xb),s),n);return{...e,...r}}function BM(t,e,n=null){const r=((n==null?void 0:n.x)||0)+e.x,s=((n==null?void 0:n.y)||0)+e.y,a=(n==null?void 0:n.width)||e.width,i=(n==null?void 0:n.height)||e.height;switch(t){case gn.Top:return{x:r+a/2,y:s};case gn.Right:return{x:r+a,y:s+i/2};case gn.Bottom:return{x:r+a/2,y:s+i};case gn.Left:return{x:r,y:s+i/2}}}function kM(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const dFe=(t,e,n,r,s,a)=>{const i=BM(n,t,e),o=BM(a,r,s);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}};function fFe({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:a,width:i,height:o,transform:l}){const u={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+s),y2:Math.max(t.y+r,e.y+a)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=zB({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:o/l[2]}),h=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),m=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(h*m)>0}function IM(t){var r,s,a,i,o;const e=((r=t==null?void 0:t[Zs])==null?void 0:r.handleBounds)||null,n=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.x)<"u"&&typeof((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.y)<"u";return[{x:((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)||0,y:((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!n]}const hFe=[{level:0,isMaxLevel:!0,edges:[]}];function mFe(t,e,n=!1){let r=-1;const s=t.reduce((i,o)=>{var d,h;const l=oc(o.zIndex);let u=l?o.zIndex:0;if(n){const m=e.get(o.target),p=e.get(o.source),y=o.selected||(m==null?void 0:m.selected)||(p==null?void 0:p.selected),x=Math.max(((d=p==null?void 0:p[Zs])==null?void 0:d.z)||0,((h=m==null?void 0:m[Zs])==null?void 0:h.z)||0,1e3);u=(l?o.zIndex:0)+(y?x:0)}return i[u]?i[u].push(o):i[u]=[o],r=u>r?u:r,i},{}),a=Object.entries(s).map(([i,o])=>{const l=+i;return{edges:o,level:l,isMaxLevel:l===r}});return a.length===0?hFe:a}function pFe(t,e,n){const r=Os(G.useCallback(s=>t?s.edges.filter(a=>{const i=e.get(a.source),o=e.get(a.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&fFe({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:o.width,targetHeight:o.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return mFe(r,e,n)}const gFe=({color:t="none",strokeWidth:e=1})=>gt.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),xFe=({color:t="none",strokeWidth:e=1})=>gt.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),FM={[gb.Arrow]:gFe,[gb.ArrowClosed]:xFe};function vFe(t){const e=ci();return G.useMemo(()=>{var s,a;return Object.prototype.hasOwnProperty.call(FM,t)?FM[t]:((a=(s=e.getState()).onError)==null||a.call(s,"009",ad.error009(t)),null)},[t])}const yFe=({id:t,type:e,color:n,width:r=12.5,height:s=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const l=vFe(e);return l?gt.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:o,refX:"0",refY:"0"},gt.createElement(l,{color:n,strokeWidth:i})):null},wFe=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((s,a)=>([a.markerStart,a.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const o=JT(i,e);r.includes(o)||(s.push({id:o,color:i.color||t,...i}),r.push(o))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))},yz=({defaultColor:t,rfId:e})=>{const n=Os(G.useCallback(wFe({defaultColor:t,rfId:e}),[t,e]),(r,s)=>!(r.length!==s.length||r.some((a,i)=>a.id!==s[i].id)));return gt.createElement("defs",null,n.map(r=>gt.createElement(yFe,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};yz.displayName="MarkerDefinitions";var bFe=G.memo(yz);const CFe=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),wz=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:a,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:h,onReconnect:m,onReconnectStart:p,onReconnectEnd:y,reconnectRadius:x,children:C,disableKeyboardA11y:S})=>{const{edgesFocusable:k,edgesUpdatable:I,elementsSelectable:F,width:U,height:R,connectionMode:E,nodeInternals:_,onError:B}=Os(CFe,ao),j=pFe(e,_,n);return U?gt.createElement(gt.Fragment,null,j.map(({level:D,edges:L,isMaxLevel:Q})=>gt.createElement("svg",{key:D,style:{zIndex:D},width:U,height:R,className:"react-flow__edges react-flow__container"},Q&&gt.createElement(bFe,{defaultColor:t,rfId:r}),gt.createElement("g",null,L.map(H=>{const[te,Y,ne]=IM(_.get(H.source)),[V,J,K]=IM(_.get(H.target));if(!ne||!K)return null;let ie=H.type||"default";s[ie]||(B==null||B("011",ad.error011(ie)),ie="default");const O=s[ie]||s.default,W=E===u0.Strict?J.target:(J.target??[]).concat(J.source??[]),Z=kM(Y.source,H.sourceHandle),re=kM(W,H.targetHandle),se=(Z==null?void 0:Z.position)||gn.Bottom,de=(re==null?void 0:re.position)||gn.Top,pe=!!(H.focusable||k&&typeof H.focusable>"u"),be=H.reconnectable||H.updatable,Se=typeof m<"u"&&(be||I&&typeof be>"u");if(!Z||!re)return B==null||B("008",ad.error008(Z,H)),null;const{sourceX:me,sourceY:ce,targetX:Me,targetY:Ze}=dFe(te,Z,se,V,re,de);return gt.createElement(O,{key:H.id,id:H.id,className:yo([H.className,a]),type:ie,data:H.data,selected:!!H.selected,animated:!!H.animated,hidden:!!H.hidden,label:H.label,labelStyle:H.labelStyle,labelShowBg:H.labelShowBg,labelBgStyle:H.labelBgStyle,labelBgPadding:H.labelBgPadding,labelBgBorderRadius:H.labelBgBorderRadius,style:H.style,source:H.source,target:H.target,sourceHandleId:H.sourceHandle,targetHandleId:H.targetHandle,markerEnd:H.markerEnd,markerStart:H.markerStart,sourceX:me,sourceY:ce,targetX:Me,targetY:Ze,sourcePosition:se,targetPosition:de,elementsSelectable:F,onContextMenu:i,onMouseEnter:o,onMouseMove:l,onMouseLeave:u,onClick:d,onEdgeDoubleClick:h,onReconnect:m,onReconnectStart:p,onReconnectEnd:y,reconnectRadius:x,rfId:r,ariaLabel:H.ariaLabel,isFocusable:pe,isReconnectable:Se,pathOptions:"pathOptions"in H?H.pathOptions:void 0,interactionWidth:H.interactionWidth,disableKeyboardA11y:S})})))),C):null};wz.displayName="EdgeRenderer";var EFe=G.memo(wz);const _Fe=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function SFe({children:t}){const e=Os(_Fe);return gt.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function TFe(t){const e=QC(),n=G.useRef(!1);G.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const NFe={[gn.Left]:gn.Right,[gn.Right]:gn.Left,[gn.Top]:gn.Bottom,[gn.Bottom]:gn.Top},bz=({nodeId:t,handleType:e,style:n,type:r=uf.Bezier,CustomComponent:s,connectionStatus:a})=>{var R,E,_;const{fromNode:i,handleId:o,toX:l,toY:u,connectionMode:d}=Os(G.useCallback(B=>({fromNode:B.nodeInternals.get(t),handleId:B.connectionHandleId,toX:(B.connectionPosition.x-B.transform[0])/B.transform[2],toY:(B.connectionPosition.y-B.transform[1])/B.transform[2],connectionMode:B.connectionMode}),[t]),ao),h=(R=i==null?void 0:i[Zs])==null?void 0:R.handleBounds;let m=h==null?void 0:h[e];if(d===u0.Loose&&(m=m||(h==null?void 0:h[e==="source"?"target":"source"])),!i||!m)return null;const p=o?m.find(B=>B.id===o):m[0],y=p?p.x+p.width/2:(i.width??0)/2,x=p?p.y+p.height/2:i.height??0,C=(((E=i.positionAbsolute)==null?void 0:E.x)??0)+y,S=(((_=i.positionAbsolute)==null?void 0:_.y)??0)+x,k=p==null?void 0:p.position,I=k?NFe[k]:null;if(!k||!I)return null;if(s)return gt.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:i,fromHandle:p,fromX:C,fromY:S,toX:l,toY:u,fromPosition:k,toPosition:I,connectionStatus:a});let F="";const U={sourceX:C,sourceY:S,sourcePosition:k,targetX:l,targetY:u,targetPosition:I};return r===uf.Bezier?[F]=GV(U):r===uf.Step?[F]=XT({...U,borderRadius:0}):r===uf.SmoothStep?[F]=XT(U):r===uf.SimpleBezier?[F]=zV(U):F=`M${C},${S} ${l},${u}`,gt.createElement("path",{d:F,fill:"none",className:"react-flow__connection-path",style:n})};bz.displayName="ConnectionLine";const BFe=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function kFe({containerStyle:t,style:e,type:n,component:r}){const{nodeId:s,handleType:a,nodesConnectable:i,width:o,height:l,connectionStatus:u}=Os(BFe,ao);return!(s&&a&&o&&i)?null:gt.createElement("svg",{style:t,width:o,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},gt.createElement("g",{className:yo(["react-flow__connection",u])},gt.createElement(bz,{nodeId:s,handleType:a,style:e,type:n,CustomComponent:r,connectionStatus:u})))}function DM(t,e){return G.useRef(null),ci(),G.useMemo(()=>e(t),[t])}const Cz=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:a,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:m,onNodeContextMenu:p,onSelectionContextMenu:y,onSelectionStart:x,onSelectionEnd:C,connectionLineType:S,connectionLineStyle:k,connectionLineComponent:I,connectionLineContainerStyle:F,selectionKeyCode:U,selectionOnDrag:R,selectionMode:E,multiSelectionKeyCode:_,panActivationKeyCode:B,zoomActivationKeyCode:j,deleteKeyCode:D,onlyRenderVisibleElements:L,elementsSelectable:Q,selectNodesOnDrag:H,defaultViewport:te,translateExtent:Y,minZoom:ne,maxZoom:V,preventScrolling:J,defaultMarkerColor:K,zoomOnScroll:ie,zoomOnPinch:O,panOnScroll:W,panOnScrollSpeed:Z,panOnScrollMode:re,zoomOnDoubleClick:se,panOnDrag:de,onPaneClick:pe,onPaneMouseEnter:be,onPaneMouseMove:Se,onPaneMouseLeave:me,onPaneScroll:ce,onPaneContextMenu:Me,onEdgeContextMenu:Ze,onEdgeMouseEnter:Fe,onEdgeMouseMove:Ce,onEdgeMouseLeave:Re,onReconnect:ze,onReconnectStart:Je,onReconnectEnd:dt,reconnectRadius:_t,noDragClassName:ft,noWheelClassName:Rt,noPanClassName:Ut,elevateEdgesOnSelect:Zt,disableKeyboardA11y:Mt,nodeOrigin:jt,nodeExtent:Wt,rfId:Ue})=>{const Oe=DM(t,sFe),Ie=DM(e,AFe);return TFe(a),gt.createElement(nFe,{onPaneClick:pe,onPaneMouseEnter:be,onPaneMouseMove:Se,onPaneMouseLeave:me,onPaneContextMenu:Me,onPaneScroll:ce,deleteKeyCode:D,selectionKeyCode:U,selectionOnDrag:R,selectionMode:E,onSelectionStart:x,onSelectionEnd:C,multiSelectionKeyCode:_,panActivationKeyCode:B,zoomActivationKeyCode:j,elementsSelectable:Q,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:ie,zoomOnPinch:O,zoomOnDoubleClick:se,panOnScroll:W,panOnScrollSpeed:Z,panOnScrollMode:re,panOnDrag:de,defaultViewport:te,translateExtent:Y,minZoom:ne,maxZoom:V,onSelectionContextMenu:y,preventScrolling:J,noDragClassName:ft,noWheelClassName:Rt,noPanClassName:Ut,disableKeyboardA11y:Mt},gt.createElement(SFe,null,gt.createElement(EFe,{edgeTypes:Ie,onEdgeClick:o,onEdgeDoubleClick:u,onlyRenderVisibleElements:L,onEdgeContextMenu:Ze,onEdgeMouseEnter:Fe,onEdgeMouseMove:Ce,onEdgeMouseLeave:Re,onReconnect:ze,onReconnectStart:Je,onReconnectEnd:dt,reconnectRadius:_t,defaultMarkerColor:K,noPanClassName:Ut,elevateEdgesOnSelect:!!Zt,disableKeyboardA11y:Mt,rfId:Ue},gt.createElement(kFe,{style:k,type:S,component:I,containerStyle:F})),gt.createElement("div",{className:"react-flow__edgelabel-renderer"}),gt.createElement(oFe,{nodeTypes:Oe,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:m,onNodeContextMenu:p,selectNodesOnDrag:H,onlyRenderVisibleElements:L,noPanClassName:Ut,noDragClassName:ft,disableKeyboardA11y:Mt,nodeOrigin:jt,nodeExtent:Wt,rfId:Ue})))};Cz.displayName="GraphView";var IFe=G.memo(Cz);const nN=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Xd={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:nN,nodeExtent:nN,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:u0.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:a3e,isValidConnection:void 0},FFe=()=>g4e((t,e)=>({...Xd,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:a}=e();t({nodeInternals:OS(n,r,s,a)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",a=typeof r<"u",i=s?OS(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:i,edges:a?r:[],hasDefaultNodes:s,hasDefaultEdges:a})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:a,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:l,nodeOrigin:u}=e(),d=l==null?void 0:l.querySelector(".react-flow__viewport");if(!d)return;const h=window.getComputedStyle(d),{m22:m}=new window.DOMMatrixReadOnly(h.transform),p=n.reduce((x,C)=>{const S=s.get(C.id);if(S!=null&&S.hidden)s.set(S.id,{...S,[Zs]:{...S[Zs],handleBounds:void 0}});else if(S){const k=HB(C.nodeElement);!!(k.width&&k.height&&(S.width!==k.width||S.height!==k.height||C.forceUpdate))&&(s.set(S.id,{...S,[Zs]:{...S[Zs],handleBounds:{source:SM(".source",C.nodeElement,m,u),target:SM(".target",C.nodeElement,m,u)}},...k}),x.push({id:S.id,type:"dimensions",dimensions:k}))}return x},[]);cz(s,u);const y=i||a&&!i&&uz(e,{initial:!0,...o});t({nodeInternals:new Map(s),fitViewOnInitDone:y}),(p==null?void 0:p.length)>0&&(r==null||r(p))},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:a}=e(),i=n.map(o=>{const l={id:o.id,type:"position",dragging:s};return r&&(l.positionAbsolute=o.positionAbsolute,l.position=o.position),l});a(i)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:a,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:l}=e();if(n!=null&&n.length){if(a){const u=dz(n,o()),d=OS(u,s,i,l);t({nodeInternals:d})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:a}=e();let i,o=null;r?i=n.map(l=>rf(l,!0)):(i=Um(a(),n),o=Um(s,[])),u2({changedNodes:i,changedEdges:o,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:a}=e();let i,o=null;r?i=n.map(l=>rf(l,!0)):(i=Um(s,n),o=Um(a(),[])),u2({changedNodes:o,changedEdges:i,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:a}=e(),i=n||a(),o=r||s,l=i.map(d=>(d.selected=!1,rf(d.id,!1))),u=o.map(d=>rf(d.id,!1));u2({changedNodes:l,changedEdges:u,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=e();r==null||r.scaleExtent([n,s]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=e();r==null||r.scaleExtent([s,n]),t({maxZoom:n})},setTranslateExtent:n=>{var r;(r=e().d3Zoom)==null||r.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),a=r().filter(o=>o.selected).map(o=>rf(o.id,!1)),i=n.filter(o=>o.selected).map(o=>rf(o.id,!1));u2({changedNodes:a,changedEdges:i,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(s=>{s.positionAbsolute=VB(s.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:a,d3Zoom:i,d3Selection:o,translateExtent:l}=e();if(!i||!o||!n.x&&!n.y)return!1;const u=Nf.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),d=[[0,0],[s,a]],h=i==null?void 0:i.constrain()(u,d,l);return i.transform(o,h),r[0]!==h.x||r[1]!==h.y||r[2]!==h.k},cancelConnection:()=>t({connectionNodeId:Xd.connectionNodeId,connectionHandleId:Xd.connectionHandleId,connectionHandleType:Xd.connectionHandleType,connectionStatus:Xd.connectionStatus,connectionStartHandle:Xd.connectionStartHandle,connectionEndHandle:Xd.connectionEndHandle}),reset:()=>t({...Xd})}),Object.is),ZB=({children:t})=>{const e=G.useRef(null);return e.current||(e.current=FFe()),gt.createElement(XIe,{value:e.current},t)};ZB.displayName="ReactFlowProvider";const Ez=({children:t})=>G.useContext(OC)?gt.createElement(gt.Fragment,null,t):gt.createElement(ZB,null,t);Ez.displayName="ReactFlowWrapper";const DFe={input:nz,default:eN,output:sz,group:XB},RFe={default:xb,straight:KB,step:qB,smoothstep:jC,simplebezier:GB},LFe=[0,0],UFe=[15,15],MFe={x:0,y:0,zoom:1},PFe={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},_z=G.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:a=DFe,edgeTypes:i=RFe,onNodeClick:o,onEdgeClick:l,onInit:u,onMove:d,onMoveStart:h,onMoveEnd:m,onConnect:p,onConnectStart:y,onConnectEnd:x,onClickConnectStart:C,onClickConnectEnd:S,onNodeMouseEnter:k,onNodeMouseMove:I,onNodeMouseLeave:F,onNodeContextMenu:U,onNodeDoubleClick:R,onNodeDragStart:E,onNodeDrag:_,onNodeDragStop:B,onNodesDelete:j,onEdgesDelete:D,onSelectionChange:L,onSelectionDragStart:Q,onSelectionDrag:H,onSelectionDragStop:te,onSelectionContextMenu:Y,onSelectionStart:ne,onSelectionEnd:V,connectionMode:J=u0.Strict,connectionLineType:K=uf.Bezier,connectionLineStyle:ie,connectionLineComponent:O,connectionLineContainerStyle:W,deleteKeyCode:Z="Backspace",selectionKeyCode:re="Shift",selectionOnDrag:se=!1,selectionMode:de=wv.Full,panActivationKeyCode:pe="Space",multiSelectionKeyCode:be=pb()?"Meta":"Control",zoomActivationKeyCode:Se=pb()?"Meta":"Control",snapToGrid:me=!1,snapGrid:ce=UFe,onlyRenderVisibleElements:Me=!1,selectNodesOnDrag:Ze=!0,nodesDraggable:Fe,nodesConnectable:Ce,nodesFocusable:Re,nodeOrigin:ze=LFe,edgesFocusable:Je,edgesUpdatable:dt,elementsSelectable:_t,defaultViewport:ft=MFe,minZoom:Rt=.5,maxZoom:Ut=2,translateExtent:Zt=nN,preventScrolling:Mt=!0,nodeExtent:jt,defaultMarkerColor:Wt="#b1b1b7",zoomOnScroll:Ue=!0,zoomOnPinch:Oe=!0,panOnScroll:Ie=!1,panOnScrollSpeed:Xe=.5,panOnScrollMode:mt=Lh.Free,zoomOnDoubleClick:Yt=!0,panOnDrag:Kt=!0,onPaneClick:rn,onPaneMouseEnter:qn,onPaneMouseMove:un,onPaneMouseLeave:xr,onPaneScroll:jn,onPaneContextMenu:Sr,children:qr,onEdgeContextMenu:on,onEdgeDoubleClick:en,onEdgeMouseEnter:zn,onEdgeMouseMove:xa,onEdgeMouseLeave:rs,onEdgeUpdate:ks,onEdgeUpdateStart:Ua,onEdgeUpdateEnd:$t,onReconnect:vr,onReconnectStart:ur,onReconnectEnd:Mr,reconnectRadius:Kr=10,edgeUpdaterRadius:ss=10,onNodesChange:fe,onEdgesChange:Be,noDragClassName:Ee="nodrag",noWheelClassName:_e="nowheel",noPanClassName:Te="nopan",fitView:ke=!1,fitViewOptions:Ye,connectOnClick:ot=!0,attributionPosition:qe,proOptions:tt,defaultEdgeOptions:st,elevateNodesOnSelect:Et=!0,elevateEdgesOnSelect:Dt=!1,disableKeyboardA11y:Vt=!1,autoPanOnConnect:Ft=!0,autoPanOnNodeDrag:Pt=!0,connectionRadius:yn=20,isValidConnection:Kn,onError:$n,style:Jn,id:js,nodeDragThreshold:Ti,...Qs},va)=>{const na=js||"1";return gt.createElement("div",{...Qs,style:{...Jn,...PFe},ref:va,className:yo(["react-flow",s]),"data-testid":"rf__wrapper",id:js},gt.createElement(Ez,null,gt.createElement(IFe,{onInit:u,onMove:d,onMoveStart:h,onMoveEnd:m,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:k,onNodeMouseMove:I,onNodeMouseLeave:F,onNodeContextMenu:U,onNodeDoubleClick:R,nodeTypes:a,edgeTypes:i,connectionLineType:K,connectionLineStyle:ie,connectionLineComponent:O,connectionLineContainerStyle:W,selectionKeyCode:re,selectionOnDrag:se,selectionMode:de,deleteKeyCode:Z,multiSelectionKeyCode:be,panActivationKeyCode:pe,zoomActivationKeyCode:Se,onlyRenderVisibleElements:Me,selectNodesOnDrag:Ze,defaultViewport:ft,translateExtent:Zt,minZoom:Rt,maxZoom:Ut,preventScrolling:Mt,zoomOnScroll:Ue,zoomOnPinch:Oe,zoomOnDoubleClick:Yt,panOnScroll:Ie,panOnScrollSpeed:Xe,panOnScrollMode:mt,panOnDrag:Kt,onPaneClick:rn,onPaneMouseEnter:qn,onPaneMouseMove:un,onPaneMouseLeave:xr,onPaneScroll:jn,onPaneContextMenu:Sr,onSelectionContextMenu:Y,onSelectionStart:ne,onSelectionEnd:V,onEdgeContextMenu:on,onEdgeDoubleClick:en,onEdgeMouseEnter:zn,onEdgeMouseMove:xa,onEdgeMouseLeave:rs,onReconnect:vr??ks,onReconnectStart:ur??Ua,onReconnectEnd:Mr??$t,reconnectRadius:Kr??ss,defaultMarkerColor:Wt,noDragClassName:Ee,noWheelClassName:_e,noPanClassName:Te,elevateEdgesOnSelect:Dt,rfId:na,disableKeyboardA11y:Vt,nodeOrigin:ze,nodeExtent:jt}),gt.createElement(N3e,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:y,onConnectEnd:x,onClickConnectStart:C,onClickConnectEnd:S,nodesDraggable:Fe,nodesConnectable:Ce,nodesFocusable:Re,edgesFocusable:Je,edgesUpdatable:dt,elementsSelectable:_t,elevateNodesOnSelect:Et,minZoom:Rt,maxZoom:Ut,nodeExtent:jt,onNodesChange:fe,onEdgesChange:Be,snapToGrid:me,snapGrid:ce,connectionMode:J,translateExtent:Zt,connectOnClick:ot,defaultEdgeOptions:st,fitView:ke,fitViewOptions:Ye,onNodesDelete:j,onEdgesDelete:D,onNodeDragStart:E,onNodeDrag:_,onNodeDragStop:B,onSelectionDrag:H,onSelectionDragStart:Q,onSelectionDragStop:te,noPanClassName:Te,nodeOrigin:ze,rfId:na,autoPanOnConnect:Ft,autoPanOnNodeDrag:Pt,onError:$n,connectionRadius:yn,isValidConnection:Kn,nodeDragThreshold:Ti}),gt.createElement(S3e,{onSelectionChange:L}),qr,gt.createElement(ZIe,{proOptions:tt,position:qe}),gt.createElement(D3e,{rfId:na,disableKeyboardA11y:Vt})))});_z.displayName="ReactFlow";function Sz(t){return e=>{const[n,r]=G.useState(e),s=G.useCallback(a=>r(i=>t(a,i)),[]);return[n,r,s]}}const OFe=Sz(dz),jFe=Sz(K3e);function QFe(){return gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},gt.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function HFe(){return gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},gt.createElement("path",{d:"M0 0h32v4.2H0z"}))}function VFe(){return gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},gt.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function zFe(){return gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},gt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function GFe(){return gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},gt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const dx=({children:t,className:e,...n})=>gt.createElement("button",{type:"button",className:yo(["react-flow__controls-button",e]),...n},t);dx.displayName="ControlButton";const qFe=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),Tz=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:a,onZoomOut:i,onFitView:o,onInteractiveChange:l,className:u,children:d,position:h="bottom-left"})=>{const m=ci(),[p,y]=G.useState(!1),{isInteractive:x,minZoomReached:C,maxZoomReached:S}=Os(qFe,ao),{zoomIn:k,zoomOut:I,fitView:F}=QC();if(G.useEffect(()=>{y(!0)},[]),!p)return null;const U=()=>{k(),a==null||a()},R=()=>{I(),i==null||i()},E=()=>{F(s),o==null||o()},_=()=>{m.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),l==null||l(!x)};return gt.createElement(MV,{className:yo(["react-flow__controls",u]),position:h,style:t,"data-testid":"rf__controls"},e&&gt.createElement(gt.Fragment,null,gt.createElement(dx,{onClick:U,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:S},gt.createElement(QFe,null)),gt.createElement(dx,{onClick:R,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:C},gt.createElement(HFe,null))),n&&gt.createElement(dx,{className:"react-flow__controls-fitview",onClick:E,title:"fit view","aria-label":"fit view"},gt.createElement(VFe,null)),r&&gt.createElement(dx,{className:"react-flow__controls-interactive",onClick:_,title:"toggle interactivity","aria-label":"toggle interactivity"},x?gt.createElement(GFe,null):gt.createElement(zFe,null)),d)};Tz.displayName="Controls";var KFe=G.memo(Tz),qc;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(qc||(qc={}));function $Fe({color:t,dimensions:e,lineWidth:n}){return gt.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function WFe({color:t,radius:e}){return gt.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const YFe={[qc.Dots]:"#91919a",[qc.Lines]:"#eee",[qc.Cross]:"#e2e2e2"},XFe={[qc.Dots]:1,[qc.Lines]:1,[qc.Cross]:6},JFe=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function Nz({id:t,variant:e=qc.Dots,gap:n=20,size:r,lineWidth:s=1,offset:a=2,color:i,style:o,className:l}){const u=G.useRef(null),{transform:d,patternId:h}=Os(JFe,ao),m=i||YFe[e],p=r||XFe[e],y=e===qc.Dots,x=e===qc.Cross,C=Array.isArray(n)?n:[n,n],S=[C[0]*d[2]||1,C[1]*d[2]||1],k=p*d[2],I=x?[k,k]:S,F=y?[k/a,k/a]:[I[0]/a,I[1]/a];return gt.createElement("svg",{className:yo(["react-flow__background",l]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},gt.createElement("pattern",{id:h+t,x:d[0]%S[0],y:d[1]%S[1],width:S[0],height:S[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${F[0]},-${F[1]})`},y?gt.createElement(WFe,{color:m,radius:k/a}):gt.createElement($Fe,{dimensions:I,color:m,lineWidth:s})),gt.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+t})`}))}Nz.displayName="Background";var ZFe=G.memo(Nz);function e6e(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),s=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(s),e&&(r.href=e),s.href=t,s.href}const t6e=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function kf(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}let gm=null;function Bz(t={}){return gm||(t.includeStyleProperties?(gm=t.includeStyleProperties,gm):(gm=kf(window.getComputedStyle(document.documentElement)),gm))}function vb(t,e){const r=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function n6e(t){const e=vb(t,"border-left-width"),n=vb(t,"border-right-width");return t.clientWidth+e+n}function r6e(t){const e=vb(t,"border-top-width"),n=vb(t,"border-bottom-width");return t.clientHeight+e+n}function kz(t,e={}){const n=e.width||n6e(t),r=e.height||r6e(t);return{width:n,height:r}}function s6e(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const ul=16384;function a6e(t){(t.width>ul||t.height>ul)&&(t.width>ul&&t.height>ul?t.width>t.height?(t.height*=ul/t.width,t.width=ul):(t.width*=ul/t.height,t.height=ul):t.width>ul?(t.height*=ul/t.width,t.width=ul):(t.width*=ul/t.height,t.height=ul))}function yb(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function i6e(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function o6e(t,e,n){const r="http://www.w3.org/2000/svg",s=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return s.setAttribute("width",`${e}`),s.setAttribute("height",`${n}`),s.setAttribute("viewBox",`0 0 ${e} ${n}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),s.appendChild(a),a.appendChild(t),i6e(s)}const Vo=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||Vo(n,e)};function l6e(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function c6e(t,e){return Bz(e).map(n=>{const r=t.getPropertyValue(n),s=t.getPropertyPriority(n);return`${n}: ${r}${s?" !important":""};`}).join(" ")}function u6e(t,e,n,r){const s=`.${t}:${e}`,a=n.cssText?l6e(n):c6e(n,r);return document.createTextNode(`${s}{${a}}`)}function RM(t,e,n,r){const s=window.getComputedStyle(t,n),a=s.getPropertyValue("content");if(a===""||a==="none")return;const i=t6e();try{e.className=`${e.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(u6e(i,n,s,r)),e.appendChild(o)}function A6e(t,e,n){RM(t,e,":before",n),RM(t,e,":after",n)}const LM="application/font-woff",UM="image/jpeg",d6e={woff:LM,woff2:LM,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:UM,jpeg:UM,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function f6e(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function ek(t){const e=f6e(t).toLowerCase();return d6e[e]||""}function h6e(t){return t.split(/,/)[1]}function rN(t){return t.search(/^(data:)/)!==-1}function m6e(t,e){return`data:${e};base64,${t}`}async function Iz(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const s=await r.blob();return new Promise((a,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{a(n({res:r,result:o.result}))}catch(l){i(l)}},o.readAsDataURL(s)})}const VS={};function p6e(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function tk(t,e,n){const r=p6e(t,e,n.includeQueryParams);if(VS[r]!=null)return VS[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let s;try{const a=await Iz(t,n.fetchRequestInit,({res:i,result:o})=>(e||(e=i.headers.get("Content-Type")||""),h6e(o)));s=m6e(a,e)}catch(a){s=n.imagePlaceholder||"";let i=`Failed to fetch resource: ${t}`;a&&(i=typeof a=="string"?a:a.message),i&&console.warn(i)}return VS[r]=s,s}async function g6e(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):yb(e)}async function x6e(t,e){if(t.currentSrc){const a=document.createElement("canvas"),i=a.getContext("2d");a.width=t.clientWidth,a.height=t.clientHeight,i==null||i.drawImage(t,0,0,a.width,a.height);const o=a.toDataURL();return yb(o)}const n=t.poster,r=ek(n),s=await tk(n,r,e);return yb(s)}async function v6e(t,e){var n;try{if(!((n=t==null?void 0:t.contentDocument)===null||n===void 0)&&n.body)return await HC(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function y6e(t,e){return Vo(t,HTMLCanvasElement)?g6e(t):Vo(t,HTMLVideoElement)?x6e(t,e):Vo(t,HTMLIFrameElement)?v6e(t,e):t.cloneNode(Fz(t))}const w6e=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",Fz=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function b6e(t,e,n){var r,s;if(Fz(e))return e;let a=[];return w6e(t)&&t.assignedNodes?a=kf(t.assignedNodes()):Vo(t,HTMLIFrameElement)&&(!((r=t.contentDocument)===null||r===void 0)&&r.body)?a=kf(t.contentDocument.body.childNodes):a=kf(((s=t.shadowRoot)!==null&&s!==void 0?s:t).childNodes),a.length===0||Vo(t,HTMLVideoElement)||await a.reduce((i,o)=>i.then(()=>HC(o,n)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function C6e(t,e,n){const r=e.style;if(!r)return;const s=window.getComputedStyle(t);s.cssText?(r.cssText=s.cssText,r.transformOrigin=s.transformOrigin):Bz(n).forEach(a=>{let i=s.getPropertyValue(a);a==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),Vo(t,HTMLIFrameElement)&&a==="display"&&i==="inline"&&(i="block"),a==="d"&&e.getAttribute("d")&&(i=`path(${e.getAttribute("d")})`),r.setProperty(a,i,s.getPropertyPriority(a))})}function E6e(t,e){Vo(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),Vo(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function _6e(t,e){if(Vo(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(s=>t.value===s.getAttribute("value"));r&&r.setAttribute("selected","")}}function S6e(t,e,n){return Vo(e,Element)&&(C6e(t,e,n),A6e(t,e,n),E6e(t,e),_6e(t,e)),e}async function T6e(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let a=0;a<n.length;a++){const o=n[a].getAttribute("xlink:href");if(o){const l=t.querySelector(o),u=document.querySelector(o);!l&&u&&!r[o]&&(r[o]=await HC(u,e,!0))}}const s=Object.values(r);if(s.length){const a="http://www.w3.org/1999/xhtml",i=document.createElementNS(a,"svg");i.setAttribute("xmlns",a),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(a,"defs");i.appendChild(o);for(let l=0;l<s.length;l++)o.appendChild(s[l]);t.appendChild(i)}return t}async function HC(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>y6e(r,e)).then(r=>b6e(t,r,e)).then(r=>S6e(t,r,e)).then(r=>T6e(r,e))}const Dz=/url\((['"]?)([^'"]+?)\1\)/g,N6e=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,B6e=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function k6e(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function I6e(t){const e=[];return t.replace(Dz,(n,r,s)=>(e.push(s),n)),e.filter(n=>!rN(n))}async function F6e(t,e,n,r,s){try{const a=n?e6e(e,n):e,i=ek(e);let o;return s||(o=await tk(a,i,r)),t.replace(k6e(e),`$1${o}$3`)}catch{}return t}function D6e(t,{preferredFontFormat:e}){return e?t.replace(B6e,n=>{for(;;){const[r,,s]=N6e.exec(n)||[];if(!s)return"";if(s===e)return`src: ${r};`}}):t}function Rz(t){return t.search(Dz)!==-1}async function Lz(t,e,n){if(!Rz(t))return t;const r=D6e(t,n);return I6e(r).reduce((a,i)=>a.then(o=>F6e(o,i,e,n)),Promise.resolve(r))}async function xm(t,e,n){var r;const s=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(s){const a=await Lz(s,null,n);return e.style.setProperty(t,a,e.style.getPropertyPriority(t)),!0}return!1}async function R6e(t,e){await xm("background",t,e)||await xm("background-image",t,e),await xm("mask",t,e)||await xm("-webkit-mask",t,e)||await xm("mask-image",t,e)||await xm("-webkit-mask-image",t,e)}async function L6e(t,e){const n=Vo(t,HTMLImageElement);if(!(n&&!rN(t.src))&&!(Vo(t,SVGImageElement)&&!rN(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,s=await tk(r,ek(r),e);await new Promise((a,i)=>{t.onload=a,t.onerror=e.onImageErrorHandler?(...l)=>{try{a(e.onImageErrorHandler(...l))}catch(u){i(u)}}:i;const o=t;o.decode&&(o.decode=a),o.loading==="lazy"&&(o.loading="eager"),n?(t.srcset="",t.src=s):t.href.baseVal=s})}async function U6e(t,e){const r=kf(t.childNodes).map(s=>Uz(s,e));await Promise.all(r).then(()=>t)}async function Uz(t,e){Vo(t,Element)&&(await R6e(t,e),await L6e(t,e),await U6e(t,e))}function M6e(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(s=>{n[s]=r[s]}),t}const MM={};async function PM(t){let e=MM[t];if(e!=null)return e;const r=await(await fetch(t)).text();return e={url:t,cssText:r},MM[t]=e,e}async function OM(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,a=(n.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(r,"$1");return o.startsWith("https://")||(o=new URL(o,t.url).href),Iz(o,e.fetchRequestInit,({result:l})=>(n=n.replace(i,`url(${l})`),[i,l]))});return Promise.all(a).then(()=>n)}function jM(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const s=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=s.exec(r);if(l===null)break;e.push(l[0])}r=r.replace(s,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let l=a.exec(r);if(l===null){if(l=o.exec(r),l===null)break;a.lastIndex=o.lastIndex}else o.lastIndex=a.lastIndex;e.push(l[0])}return e}async function P6e(t,e){const n=[],r=[];return t.forEach(s=>{if("cssRules"in s)try{kf(s.cssRules||[]).forEach((a,i)=>{if(a.type===CSSRule.IMPORT_RULE){let o=i+1;const l=a.href,u=PM(l).then(d=>OM(d,e)).then(d=>jM(d).forEach(h=>{try{s.insertRule(h,h.startsWith("@import")?o+=1:s.cssRules.length)}catch(m){console.error("Error inserting rule from remote css",{rule:h,error:m})}})).catch(d=>{console.error("Error loading remote css",d.toString())});r.push(u)}})}catch(a){const i=t.find(o=>o.href==null)||document.styleSheets[0];s.href!=null&&r.push(PM(s.href).then(o=>OM(o,e)).then(o=>jM(o).forEach(l=>{i.insertRule(l,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",a)}}),Promise.all(r).then(()=>(t.forEach(s=>{if("cssRules"in s)try{kf(s.cssRules||[]).forEach(a=>{n.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${s.href}`,a)}}),n))}function O6e(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>Rz(e.style.getPropertyValue("src")))}async function j6e(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=kf(t.ownerDocument.styleSheets),r=await P6e(n,e);return O6e(r)}function Mz(t){return t.trim().replace(/["']/g,"")}function Q6e(t){const e=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(a=>{e.add(Mz(a))}),Array.from(r.children).forEach(a=>{a instanceof HTMLElement&&n(a)})}return n(t),e}async function H6e(t,e){const n=await j6e(t,e),r=Q6e(t);return(await Promise.all(n.filter(a=>r.has(Mz(a.style.fontFamily))).map(a=>{const i=a.parentStyleSheet?a.parentStyleSheet.href:null;return Lz(a.cssText,i,e)}))).join(`
`)}async function V6e(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await H6e(t,e);if(n){const r=document.createElement("style"),s=document.createTextNode(n);r.appendChild(s),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function z6e(t,e={}){const{width:n,height:r}=kz(t,e),s=await HC(t,e,!0);return await V6e(s,e),await Uz(s,e),M6e(s,e),await o6e(s,n,r)}async function G6e(t,e={}){const{width:n,height:r}=kz(t,e),s=await z6e(t,e),a=await yb(s),i=document.createElement("canvas"),o=i.getContext("2d"),l=e.pixelRatio||s6e(),u=e.canvasWidth||n,d=e.canvasHeight||r;return i.width=u*l,i.height=d*l,e.skipAutoScale||a6e(i),i.style.width=`${u}`,i.style.height=`${d}`,e.backgroundColor&&(o.fillStyle=e.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(a,0,0,i.width,i.height),i}async function VC(t,e={}){return(await G6e(t,e)).toDataURL()}const Pz="recursos_crucigramas",zC="recursos_lineas_de_tiempo",GC="recursos_mapas_mentales",Oz="recursos_sopas_de_letras",qC=t=>{var n,r,s,a;const e=t.data();return{id:t.id,...e,fechaCreacion:((r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaCreacion,createdAt:((a=(s=e.createdAt)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString())||e.createdAt}},q6e=t=>{const e=an(Lt(It,Pz),sr("fechaCreacion","desc"));return En(e,n=>{const r=n.docs.map(s=>qC(s));t(r)},n=>{console.error("Error al suscribirse a los crucigramas:",n),t([])})},K6e=async(t,e)=>{try{const n={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,fechaCreacion:mn.fromDate(new Date)};return(await Cs(Lt(It,Pz),n)).id}catch(n){throw console.error("Error al guardar el crucigrama:",n),new Error("No se pudo guardar el crucigrama.")}},$6e=t=>{const e=an(Lt(It,zC),sr("createdAt","desc"));return En(e,n=>{const r=n.docs.map(s=>qC(s));t(r)},n=>{console.error("Error al suscribirse a las líneas de tiempo:",n),t([])})},W6e=async(t,e)=>{try{const{id:n,...r}=t,s=Cn(It,zC,n);await io(s,{...r,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:mn.fromDate(new Date(r.createdAt||Date.now()))},{merge:!0})}catch(n){throw console.error("Error al guardar la línea de tiempo:",n),new Error("No se pudo guardar la línea de tiempo.")}},Y6e=async(t,e)=>{try{const n={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:mn.fromDate(new Date)};return(await Cs(Lt(It,zC),n)).id}catch(n){throw console.error("Error al crear la línea de tiempo:",n),new Error("No se pudo crear la línea de tiempo.")}},X6e=async t=>{try{const e=Cn(It,zC,t);await Ka(e)}catch(e){throw console.error("Error al eliminar la línea de tiempo:",e),new Error("No se pudo eliminar la línea de tiempo.")}},J6e=t=>{const e=an(Lt(It,GC),sr("createdAt","desc"));return En(e,n=>{const r=n.docs.map(s=>qC(s));t(r)},n=>{console.error("Error al suscribirse a los mapas mentales:",n),t([])})},Z6e=async(t,e)=>{try{const{id:n,...r}=t,s=Cn(It,GC,n);await io(s,{...r,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:mn.fromDate(new Date(r.createdAt||Date.now()))},{merge:!0})}catch(n){throw console.error("Error al guardar el mapa mental:",n),new Error("No se pudo guardar el mapa mental.")}},eDe=async(t,e)=>{try{const n={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:mn.fromDate(new Date)};return(await Cs(Lt(It,GC),n)).id}catch(n){throw console.error("Error al crear el mapa mental:",n),new Error("No se pudo crear el mapa mental.")}},tDe=async t=>{try{const e=Cn(It,GC,t);await Ka(e)}catch(e){throw console.error("Error al eliminar el mapa mental:",e),new Error("No se pudo eliminar el mapa mental.")}},nDe=t=>{const e=an(Lt(It,Oz),sr("createdAt","desc"));return En(e,n=>{const r=n.docs.map(s=>qC(s));t(r)},n=>{console.error("Error al suscribirse a las sopas de letras:",n),t([])})},rDe=async(t,e)=>{try{const n={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:mn.fromDate(new Date)};return(await Cs(Lt(It,Oz),n)).id}catch(n){throw console.error("Error al guardar la sopa de letras:",n),new Error("No se pudo guardar la sopa de letras.")}},sDe=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),aDe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),iDe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),oDe=({data:t})=>{const e={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Práctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},n=e[t.type||"default"]||e.default;return c.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${n} flex items-center gap-3 min-w-[180px]`,children:[c.jsx(Ep,{type:"target",position:gn.Left,className:"w-2 h-2 !bg-slate-400"}),c.jsx("span",{className:"text-xl",children:t.icon||"🧠"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:t.label}),t.type&&c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:t.type})]}),c.jsx(Ep,{type:"source",position:gn.Right,className:"w-2 h-2 !bg-slate-400"})]})},sN=(t,e)=>!t.children||t.children.length===0?e:t.children.reduce((n,r)=>n+sN(r,e),0),aN=(t,e="tree")=>{const n=[],r=[];if(e==="tree"){const i=(o,l,u)=>{n.push({id:o.id,position:{x:l*280,y:u},data:{label:o.label,icon:o.icon,type:o.type},type:"custom"});const d=sN(o,100);let h=u-d/2+100/2;(o.children||[]).forEach(m=>{const p=sN(m,100),y=h+p/2-100/2;r.push({id:`e-${o.id}-${m.id}`,source:o.id,target:m.id,type:"smoothstep",animated:!0}),i(m,l+1,y),h+=p})};i(t,0,0)}else{n.push({id:t.id,position:{x:0,y:0},data:{label:t.label,icon:t.icon,type:t.type},type:"custom"});const i=300,o=500;(t.children||[]).forEach((l,u)=>{const d=u/t.children.length*2*Math.PI;n.push({id:l.id,position:{x:i*Math.cos(d),y:i*Math.sin(d)},data:{label:l.label,icon:l.icon,type:l.type},type:"custom"}),r.push({id:`e-${t.id}-${l.id}`,source:t.id,target:l.id,type:"smoothstep"}),(l.children||[]).forEach((h,m)=>{const p=d+(m-(l.children.length-1)/2)*.25;n.push({id:h.id,position:{x:o*Math.cos(p),y:o*Math.sin(p)},data:{label:h.label,icon:h.icon,type:h.type},type:"custom"}),r.push({id:`e-${l.id}-${h.id}`,source:l.id,target:h.id,type:"smoothstep"})})})}return{nodes:n,edges:r}},jz=({node:t,onUpdate:e,onAddChild:n,onDelete:r,level:s=0})=>{const a=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return c.jsxs("div",{className:`pl-4 ${s>0?"border-l "+i[s-1%i.length]:""}`,children:[c.jsx("div",{className:`p-2 rounded-lg my-1 ${a[s%a.length]}`,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:t.label,onChange:o=>e(t.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),c.jsx("button",{onClick:()=>n(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),s>0&&c.jsx("button",{onClick:()=>r(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),(t.children||[]).map(o=>c.jsx(jz,{node:o,onUpdate:e,onAddChild:n,onDelete:r,level:s+1},o.id))]})},lDe={custom:oDe},cDe=({mapData:t,onBack:e,onSave:n})=>{const[r,s]=G.useState(t.treeData),[a,i]=G.useState("tree"),[o,l]=G.useState(!1),[u,d,h]=OFe([]),[m,p,y]=jFe([]),{fitView:x}=QC();G.useEffect(()=>{const{nodes:U,edges:R}=aN(r,a);d(U),p(R),setTimeout(()=>x({duration:300}),50)},[r,a,d,p,x]);const C=(U,R)=>{const E=JSON.parse(JSON.stringify(r)),_=B=>B.id===U?(B.label=R,!0):(B.children||[]).some(_);_(E),s(E)},S=U=>{const R=JSON.parse(JSON.stringify(r)),E=_=>_.id===U?(_.children||(_.children=[]),_.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(_.children||[]).some(E);E(R),s(R)},k=U=>{const R=JSON.parse(JSON.stringify(r)),E=_=>{const B=(_.children||[]).findIndex(j=>j.id===U);return B!==-1?(_.children.splice(B,1),!0):(_.children||[]).some(E)};E(R),s(R)},I=()=>{l(!0);const{nodes:U,edges:R}=aN(r,a);n({...t,treeData:r,nodes:U,edges:R}),setTimeout(()=>l(!1),1e3)},F=async U=>{const R=document.querySelector(".react-flow");R&&VC(R,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(E=>{{const _=document.createElement("a");_.download=`${t.tema}.png`,_.href=E,_.click()}}).catch(E=>console.error("oops, something went wrong!",E))};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:t.tema}),c.jsx("button",{onClick:e,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:c.jsxs(_z,{nodes:u,edges:m,onNodesChange:h,onEdgesChange:y,fitView:!0,nodeTypes:lDe,children:[c.jsx(KFe,{}),c.jsx(ZFe,{})]})}),c.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),c.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[c.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${a==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[c.jsx(aDe,{})," Vista en árbol"]}),c.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${a==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[c.jsx(iDe,{})," Vista central"]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:c.jsx(jz,{node:r,onUpdate:C,onAddChild:S,onDelete:k})}),c.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>F(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),c.jsx("button",{onClick:I,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},uDe=({onBack:t,currentUser:e})=>{const[n,r]=G.useState("list"),[s,a]=G.useState([]),[i,o]=G.useState(null),[l,u]=G.useState(!1),[d,h]=G.useState(!0),[m,p]=G.useState(""),[y,x]=G.useState(""),[C,S]=G.useState("");G.useEffect(()=>{h(!0);const E=J6e(_=>{a(_),h(!1)});return()=>E()},[]);const k=async E=>{if(E.preventDefault(),!m.trim()){alert("El tema es obligatorio.");return}u(!0);const _="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",B=`
            Basado en el tema central "${m}", y considerando el contenido adicional "${C}", genera una estructura jerárquica para un mapa mental con al menos 3 niveles de profundidad.
            
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            
            La estructura del JSON debe ser un objeto raíz con las siguientes claves:
            - "label": El tema central ("${m}").
            - "icon": Un emoji que represente el tema.
            - "type": La categoría, que para el nodo raíz debe ser "Concepto Clave".
            - "children": Un array de 2 a 4 nodos hijos.

            Cada nodo hijo (y sus descendientes) debe tener esta misma estructura:
            - "label": El texto del subtema.
            - "icon": Un emoji representativo.
            - "type": Una categoría descriptiva (ej: "Concepto Clave", "Ejemplo Práctico", "Dato Interesante", "Pregunta Abierta").
            - "children": Un array de nodos hijos, o un array vacío si es un nodo final.
        `;try{const te=(await(await new Ra(_).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(B)).response).text().replace(/^```json\s*|```\s*$/g,""),Y=JSON.parse(te),ne=W=>({id:crypto.randomUUID(),label:W.label||"Sin etiqueta",icon:W.icon||"🧠",type:W.type||"default",children:(W.children||[]).map(ne)}),V=ne(Y),{nodes:J,edges:K}=aN(V),ie={tema:m,nivel:y,treeData:V,nodes:J,edges:K},O=await eDe(ie,e);o({...ie,id:O,createdAt:new Date().toISOString()}),r("editor")}catch(j){console.error("AI Generation Error:",j),alert("Hubo un error al generar el mapa mental. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{u(!1)}},I=async E=>{try{await Z6e(E,e)}catch(_){console.error("Error saving mind map:",_),alert("No se pudo guardar el mapa mental.")}},F=E=>{o(E),r("editor")},U=async E=>{if(window.confirm("¿Eliminar este mapa mental?"))try{await tDe(E)}catch(_){console.error("Error deleting mind map:",_),alert("No se pudo eliminar el mapa mental.")}},R=()=>{switch(n){case"editor":return i?c.jsx(ZB,{children:c.jsx(cDe,{mapData:i,onBack:()=>r("list"),onSave:I})}):null;case"config":return c.jsxs("div",{className:"max-w-2xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),c.jsx("button",{onClick:()=>r("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),c.jsxs("form",{onSubmit:k,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"tema",value:m,onChange:E=>p(E.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),c.jsx("textarea",{id:"contenido",value:C,onChange:E=>S(E.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsx("div",{className:"flex justify-end pt-4",children:c.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:l?c.jsx(sDe,{}):"Generar Mapa con IA"})})]})]});case"list":default:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),c.jsx("button",{onClick:()=>r("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.length>0?s.map(E=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[c.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:E.tema}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(E.createdAt).toLocaleDateString("es-CL")]}),c.jsxs("div",{className:"mt-4 flex gap-2",children:[c.jsx("button",{onClick:()=>F(E),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>U(E.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},E.id)):c.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return d?c.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("span",{className:"text-4xl",children:"🧠"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),R()]})},ADe=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),dDe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),fDe=({onBack:t,currentUser:e})=>{const[n,r]=G.useState([]),[s,a]=G.useState("Media"),[i,o]=G.useState(10),[l,u]=G.useState(!1),[d,h]=G.useState(Array(10).fill("")),[m,p]=G.useState(""),[y,x]=G.useState(null),[C,S]=G.useState({ai:!1,puzzle:!1,data:!0}),k=G.useRef(null);G.useEffect(()=>{S(D=>({...D,data:!0}));const j=nDe(D=>{r(D),S(L=>({...L,data:!1}))});return()=>j()},[]),G.useEffect(()=>{h(j=>{const D=Array(i).fill("");for(let L=0;L<Math.min(j.length,i);L++)D[L]=j[L];return D})},[i]);const I=(j,D)=>{const L=[...d];L[j]=D,h(L)},F=async()=>{if(m.trim()){S(j=>({...j,ai:!0}));try{const j="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",L=new Ra(j).getGenerativeModel({model:"gemini-1.5-flash-latest"}),Q=`
                Genera una lista de ${i} palabras clave en español, estrictamente relacionadas con el tema "${m}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una sola clave: "palabras".
                El valor de "palabras" debe ser un array de ${i} strings.
                Cada string en el array debe ser una sola palabra, sin espacios ni caracteres especiales.
            `,ne=(await(await L.generateContent(Q)).response).text().replace(/^```json\s*|```\s*$/g,""),V=JSON.parse(ne);if(!V.palabras||!Array.isArray(V.palabras))throw new Error("La respuesta de la IA no contiene el array 'palabras' esperado.");const K=[...V.palabras.map(ie=>ie.toUpperCase().replace(/[^A-ZÑ]/g,"")).slice(0,i)];for(;K.length<i;)K.push("");h(K)}catch(j){console.error("Error generating words with AI:",j),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{S(j=>({...j,ai:!1}))}}},U=(j,D,L,Q,H,te)=>{for(let Y=0;Y<j.length;Y++){const ne=L+Y*H.y,V=Q+Y*H.x;if(ne<0||ne>=te||V<0||V>=te||D[ne][V]&&D[ne][V]!==j[Y])return!1}return!0},R=(j,D,L,Q,H)=>{for(let te=0;te<j.length;te++)D[L+te*H.y][Q+te*H.x]=j[te]},E=async()=>{S(ne=>({...ne,puzzle:!0})),x(null),await new Promise(ne=>setTimeout(ne,100));const j=d.map(ne=>ne.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(j.length===0){alert("Por favor, ingrese al menos una palabra válida."),S(ne=>({...ne,puzzle:!1}));return}const D=Math.max(...j.map(ne=>ne.length));let L=Math.max(D,j.length)+2;s==="Media"&&(L+=3),s==="Difícil"&&(L+=5),L=Math.min(Math.max(L,10),25);const Q=Array(L).fill(null).map(()=>Array(L).fill(null)),H=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];s!=="Fácil"&&H.push({x:1,y:-1}),s==="Difícil"&&H.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const ne of j.sort((V,J)=>J.length-V.length)){let V=!1;for(let J=0;J<100;J++){const K=H[Math.floor(Math.random()*H.length)],ie=Math.floor(Math.random()*L),O=Math.floor(Math.random()*L);if(U(ne,Q,ie,O,K,L)){R(ne,Q,ie,O,K),V=!0;break}}V||console.warn(`No se pudo colocar la palabra: ${ne}`)}const te=Q.map(ne=>ne.map(V=>V||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)])),Y={tema:m||"Personalizado",grid:te.map(ne=>ne.join("")),words:j.sort()};try{const ne=await rDe(Y,e);x({...Y,id:ne,createdAt:new Date().toISOString()})}catch(ne){console.error("Error saving puzzle:",ne),alert("No se pudo guardar la sopa de letras.")}finally{S(ne=>({...ne,puzzle:!1}))}},_=()=>{k.current&&VC(k.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(j=>{const D=document.createElement("a");D.download="sopa-de-letras.png",D.href=j,D.click()}).catch(j=>{console.error("oops, something went wrong!",j),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})},B=()=>{var L;if(!y)return null;const j=((L=y.grid[0])==null?void 0:L.length)||1,D=y.grid.join("").split("");return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{ref:k,className:"p-6 bg-white",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[c.jsx("div",{className:"md:col-span-2",children:c.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${j}, minmax(0, 1fr))`},children:D.map((Q,H)=>c.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:Q},H))})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),c.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:y.words.map(Q=>c.jsx("li",{children:Q},Q))})]})]})}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),c.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return C.data?c.jsx("div",{className:"text-center py-10",children:"Cargando..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"🅰️"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!y&&c.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),c.jsxs("select",{value:s,onChange:j=>a(j.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{children:"Fácil"}),c.jsx("option",{children:"Media"}),c.jsx("option",{children:"Difícil"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(j=>c.jsx("button",{onClick:()=>{o(j),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!l&&i===j?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:j},j)),c.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${l?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),l&&c.jsx("input",{type:"number",value:i,onChange:j=>o(parseInt(j.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"ai-theme",type:"text",value:m,onChange:j=>p(j.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:F,disabled:C.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:C.ai?c.jsx(ADe,{}):c.jsxs(c.Fragment,{children:[c.jsx(dDe,{}),c.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((j,D)=>c.jsx("input",{type:"text",value:j,onChange:L=>I(D,L.target.value),placeholder:`Palabra ${D+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},D))})]}),c.jsx("div",{className:"text-right pt-4",children:c.jsx("button",{onClick:E,disabled:C.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:C.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),y&&B()]})},hDe=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),mDe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),pDe=({timeline:t,onSave:e,onBack:n})=>{const[r,s]=G.useState(t),[a,i]=G.useState(null),o=G.useRef(null),l=(p,y,x)=>{s(C=>({...C,events:C.events.map(S=>S.id===p?{...S,[y]:x}:S)}))},u=()=>{const p={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},y=[...r.events,p].sort((x,C)=>parseInt(x.date)-parseInt(C.date));s(x=>({...x,events:y}))},d=p=>{s(y=>({...y,events:y.events.filter(x=>x.id!==p)}))},h=async p=>{if(!p.description.trim()){alert("Escribe al menos una idea en la descripción para que la IA la complete.");return}i(p.id);const y="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",x=`
            Para una línea de tiempo sobre "${r.tema}", toma la siguiente idea para un hito y mejórala.
            Idea del usuario: "${p.description}"

            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional, con tres claves:
            1. "date": El año o fecha más precisa y relevante para esta idea.
            2. "description": Una descripción concisa (máximo 15 palabras) para la línea de tiempo.
            3. "icon": Un único emoji que represente el hito.
        `;try{const U=(await(await new Ra(y).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(x)).response).text().replace(/^```json\s*|```\s*$/g,""),R=JSON.parse(U);s(E=>({...E,events:E.events.map(_=>_.id===p.id?{..._,date:R.date,description:R.description,icon:R.icon}:_).sort((_,B)=>parseInt(_.date)-parseInt(B.date))}))}catch(C){console.error("Error al generar descripción del hito:",C),alert("No se pudo autocompletar el hito.")}finally{i(null)}},m=()=>{o.current&&VC(o.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(p=>{const y=document.createElement("a");y.download=`linea-tiempo-${r.tema.replace(/\s+/g,"_")}.png`,y.href=p,y.click()}).catch(p=>{console.error("Error al generar la imagen:",p),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:r.tema}),c.jsx("button",{onClick:n,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:c.jsxs("div",{ref:o,className:"relative p-10",children:[c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),c.jsx("div",{className:"relative",children:r.events.sort((p,y)=>parseInt(p.date)-parseInt(y.date)).map((p,y)=>{const x=y%2===0;return c.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[c.jsx("div",{className:"w-1/2",children:x&&c.jsx("div",{className:"text-right pr-8",children:c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[c.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:p.icon}),c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.date}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:p.description})]})})}),c.jsx("div",{className:"z-10 flex-shrink-0",children:c.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),c.jsx("div",{className:"w-1/2",children:!x&&c.jsx("div",{className:"text-left pl-8",children:c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[c.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:p.icon}),c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.date}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:p.description})]})})})]},p.id)})})]})}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:r.events.map(p=>c.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[c.jsx("input",{type:"text",value:p.date,onChange:y=>l(p.id,"date",y.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx("textarea",{value:p.description,onChange:y=>l(p.id,"description",y.target.value),placeholder:"Descripción",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),c.jsx("button",{onClick:()=>h(p),disabled:a===p.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:a===p.id?c.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):c.jsx(mDe,{})})]}),c.jsx("button",{onClick:()=>d(p.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},p.id))}),c.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[c.jsx("button",{onClick:u,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:m,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),c.jsx("button",{onClick:()=>e(r),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},gDe=({onBack:t,currentUser:e})=>{const[n,r]=G.useState("list"),[s,a]=G.useState([]),[i,o]=G.useState(null),[l,u]=G.useState(!1),[d,h]=G.useState(!0),[m,p]=G.useState(""),[y,x]=G.useState(""),[C,S]=G.useState("");G.useEffect(()=>{h(!0);const U=$6e(R=>{a(R),h(!1)});return()=>U()},[]);const k=async U=>{if(U.preventDefault(),!m.trim()){alert("El tema es obligatorio.");return}u(!0);const R="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",E=y&&C?`entre ${y} y ${C}`:y?`a partir de ${y}`:C?`hasta ${C}`:"",_=`
            Genera una línea de tiempo sobre el tema "${m}" ${E}.
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            El objeto debe tener una clave "events", que es un array de 5 a 10 objetos.
            Cada objeto en el array "events" debe tener tres claves:
            1. "date": Un string con la fecha o el año del hito.
            2. "description": Un string con la descripción breve del hito (máximo 15 palabras).
            3. "icon": Un string con un único emoji que represente el hito.
            Ordena los eventos cronológicamente.
        `;try{const H=(await(await new Ra(R).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(_)).response).text().replace(/^```json\s*|```\s*$/g,""),te=JSON.parse(H);if(!te.events||!Array.isArray(te.events))throw new Error("La respuesta de la IA no tiene el formato de eventos esperado.");const Y={tema:m,fechaInicio:y,fechaFin:C,events:te.events.map(V=>({id:crypto.randomUUID(),date:V.date||"Sin fecha",description:V.description||"Sin descripción",icon:V.icon||"🗓️"}))},ne=await Y6e(Y,e);o({...Y,id:ne,createdAt:new Date().toISOString()}),r("editor")}catch(B){console.error("AI Generation Error:",B),alert("Hubo un error al generar la línea de tiempo. Por favor, revisa el formato del tema o inténtalo de nuevo.")}finally{u(!1)}},I=async U=>{try{await W6e(U,e),r("list"),o(null)}catch(R){console.error("Error saving timeline:",R),alert("No se pudo guardar la línea de tiempo.")}},F=async U=>{if(window.confirm("¿Eliminar esta línea de tiempo?"))try{await X6e(U)}catch(R){console.error("Error deleting timeline:",R),alert("No se pudo eliminar la línea de tiempo.")}};return n==="editor"&&i?c.jsx(pDe,{timeline:i,onSave:I,onBack:()=>r("list")}):d?c.jsx("div",{className:"text-center py-10",children:"Cargando líneas de tiempo..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"🕒"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),c.jsxs("form",{onSubmit:k,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"tema",value:m,onChange:U=>p(U.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),c.jsx("input",{type:"text",id:"fechaInicio",value:y,onChange:U=>x(U.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),c.jsx("input",{type:"text",id:"fechaFin",value:C,onChange:U=>S(U.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:l?c.jsx(hDe,{}):"Generar con IA"})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),s.length>0?s.map(U=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:U.tema}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(U.createdAt).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>{o(U),r("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),c.jsx("button",{onClick:()=>F(U.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},U.id)):c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},xDe=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),QM=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),vDe=({onBack:t,currentUser:e})=>{const[n,r]=G.useState([]),[s,a]=G.useState(10),[i,o]=G.useState(!1),[l,u]=G.useState(Array(10).fill("")),[d,h]=G.useState(Array(10).fill("")),[m,p]=G.useState(""),[y,x]=G.useState(null),[C,S]=G.useState(!1),[k,I]=G.useState({ai:!1,puzzle:!1,data:!0}),[F,U]=G.useState(null),R=G.useRef(null);G.useEffect(()=>{I(te=>({...te,data:!0}));const H=q6e(te=>{const Y=te.map(ne=>{const{grid_flat:V,grid_width:J,...K}=ne,ie=[];if(V&&J>0)for(let O=0;O<V.length;O+=J)ie.push(V.slice(O,O+J));return{...K,grid:ie}});r(Y),I(ne=>({...ne,data:!1}))});return()=>H()},[]),G.useEffect(()=>{const H=s;u(te=>Array.from({length:H},(Y,ne)=>te[ne]||"")),h(te=>Array.from({length:H},(Y,ne)=>te[ne]||""))},[s]);const E=(H,te)=>{const Y=[...l];Y[H]=te,u(Y)},_=(H,te)=>{const Y=[...d];Y[H]=te,h(Y)},B=async()=>{if(m.trim()){I(H=>({...H,ai:!0}));try{const H="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Y=new Ra(H).getGenerativeModel({model:"gemini-1.5-flash-latest"}),ne=`
                Genera una lista de ${s} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${m}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una clave "items", que es un array de ${s} objetos.
                Cada objeto en el array "items" debe tener dos claves:
                1. "word": Un string con la palabra (sin espacios y en mayúsculas).
                2. "clue": Un string con la pista para esa palabra.
            `;let ie=(await(await Y.generateContent(ne)).response).text().replace(/^```json\s*|```\s*$/g,"").trim();const O=ie.indexOf("{"),W=ie.lastIndexOf("}");O!==-1&&W!==-1&&(ie=ie.substring(O,W+1)),ie=ie.replace(/},\s*([\r\n\s]*){/g,"}__SPLIT__{"),ie.includes("__SPLIT__")&&(ie=ie.replace(/("items"\s*:\s*\[)([\s\S]*?)(\])/m,(de,pe,be,Se)=>{const me=be.split("__SPLIT__").map(ce=>ce.trim().replace(/,$/,""));return pe+me.join(",")+Se})),ie=ie.replace(/,\s*]/g,"]");let Z;try{Z=JSON.parse(ie)}catch{console.error("Respuesta IA no es JSON válido:",ie),alert("La respuesta de la IA no es un JSON válido. Intenta de nuevo o ajusta el tema."),I(pe=>({...pe,ai:!1}));return}if(!Z.items||!Array.isArray(Z.items))throw new Error("La respuesta de la IA no contiene la lista de 'items' esperada.");const re=Z.items.map(de=>(de.word||"").toUpperCase().replace(/\s/g,"")),se=Z.items.map(de=>de.clue||"");u(Array.from({length:s},(de,pe)=>re[pe]||"")),h(Array.from({length:s},(de,pe)=>se[pe]||""))}catch(H){console.error("Error generating words/clues with AI:",H),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{I(H=>({...H,ai:!1}))}}},j=async H=>{const te=l[H];if(!te||!te.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}U(H);try{const Y="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",V=new Ra(Y).getGenerativeModel({model:"gemini-1.5-flash-latest"}),J=`Para un crucigrama con el tema "${m||"general"}", genera una pista concisa y creativa para la palabra "${te}". La respuesta debe ser un único objeto JSON válido sin texto adicional, con una sola clave: "clue".`,W=(await(await V.generateContent(J)).response).text().replace(/^```json\s*|```\s*$/g,""),Z=JSON.parse(W);Z.clue&&_(H,Z.clue)}catch(Y){console.error("Error generating clue with AI:",Y),alert("No se pudo generar la pista.")}finally{U(null)}},D=G.useCallback(()=>{try{const H=l.map((Re,ze)=>({word:Re.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:d[ze]})).filter(Re=>Re.word.length>0);if(H.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;H.sort((Re,ze)=>ze.word.length-Re.word.length);const te=H[0].word.length,Y=Math.max(te,H.length)*2;let ne=Array.from({length:Y},()=>Array(Y).fill(null));const V=[],J=H.shift(),K=Math.floor(Y/2),ie=Math.floor((Y-J.word.length)/2);for(let Re=0;Re<J.word.length;Re++)ne[K][ie+Re]=J.word[Re];V.push({word:J.word,clue:J.clue,direction:"across",row:K,col:ie});for(const Re of H){let ze={score:-1,row:-1,col:-1,direction:"across"};for(const Je of V)for(let dt=0;dt<Je.word.length;dt++)for(let _t=0;_t<Re.word.length;_t++)if(Je.word[dt]===Re.word[_t]){let ft=0,Rt,Ut,Zt;Je.direction==="across"?(Zt="down",Rt=Je.row-_t,Ut=Je.col+dt):(Zt="across",Rt=Je.row+dt,Ut=Je.col-_t);let Mt=!0;for(let jt=0;jt<Re.word.length;jt++){const Wt=Rt+(Zt==="down"?jt:0),Ue=Ut+(Zt==="across"?jt:0);if(Wt<0||Wt>=Y||Ue<0||Ue>=Y){Mt=!1;break}const Oe=ne[Wt][Ue],Ie=Wt===Je.row+(Je.direction==="down"?dt:0)&&Ue===Je.col+(Je.direction==="across"?dt:0);if(Oe&&!Ie){Mt=!1;break}if(Oe&&Ie&&Oe!==Re.word[_t]){Mt=!1;break}if(!Ie){if(Zt==="across"&&(Wt>0&&ne[Wt-1][Ue]||Wt<Y-1&&ne[Wt+1][Ue])){Mt=!1;break}if(Zt==="down"&&(Ue>0&&ne[Wt][Ue-1]||Ue<Y-1&&ne[Wt][Ue+1])){Mt=!1;break}}Oe&&ft++}Mt&&ft>ze.score&&(ze={score:ft,row:Rt,col:Ut,direction:Zt})}if(ze.score>-1){for(let Je=0;Je<Re.word.length;Je++){const dt=ze.row+(ze.direction==="down"?Je:0),_t=ze.col+(ze.direction==="across"?Je:0);ne[dt][_t]=Re.word[Je]}V.push({word:Re.word,clue:Re.clue,direction:ze.direction,row:ze.row,col:ze.col})}}let O=Y,W=-1,Z=Y,re=-1;V.forEach(Re=>{O=Math.min(O,Re.row),W=Math.max(W,Re.row+(Re.direction==="down"?Re.word.length-1:0)),Z=Math.min(Z,Re.col),re=Math.max(re,Re.col+(Re.direction==="across"?Re.word.length-1:0))}),W===-1&&(O=V[0].row,W=V[0].row,Z=V[0].col,re=V[0].col+V[0].word.length-1);const se=1,de=Math.max(0,O-se),pe=Math.min(Y,W+1+se),be=Math.max(0,Z-se),Se=Math.min(Y,re+1+se),me=ne.slice(de,pe).map(Re=>Re.slice(be,Se)),ce=V.map(Re=>({...Re,row:Re.row-de,col:Re.col-be})).sort((Re,ze)=>Re.row-ze.row||Re.col-ze.col);let Me=1;const Ze=[],Fe=new Map;ce.forEach(Re=>{const ze=`${Re.row},${Re.col}`;Fe.has(ze)||Fe.set(ze,Me++),Ze.push({...Re,number:Fe.get(ze)})});const Ce=me.map(Re=>Re.map(ze=>({char:ze,number:null})));return Ze.forEach(Re=>{const ze=`${Re.row},${Re.col}`;Ce[Re.row]&&Ce[Re.row][Re.col]!==void 0&&(Ce[Re.row][Re.col].number=Fe.get(ze))}),{grid:Ce,clues:{across:Ze.filter(Re=>Re.direction==="across").sort((Re,ze)=>Re.number-ze.number),down:Ze.filter(Re=>Re.direction==="down").sort((Re,ze)=>Re.number-ze.number)}}}catch(H){return console.error("Error generating crossword grid:",H),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[l,d]),L=async()=>{var te;I(Y=>({...Y,puzzle:!0})),x(null),await new Promise(Y=>setTimeout(Y,100));const H=D();if(H){const Y={creadorId:e.id,creadorNombre:e.nombreCompleto,tema:m||"Personalizado",grid:H.grid,clues:H.clues},{grid:ne,...V}=Y,J={...V,grid_flat:ne.flat().map(K=>K.char||""),grid_width:((te=ne[0])==null?void 0:te.length)||0};try{const K=await K6e(J,e);x({...Y,id:K,fechaCreacion:new Date().toISOString()})}catch(K){console.error("Error saving puzzle:",K),alert("No se pudo guardar el crucigrama en la base de datos.")}}I(Y=>({...Y,puzzle:!1}))},Q=()=>{R.current&&(S(!1),setTimeout(()=>{VC(R.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(H=>{const te=document.createElement("a");te.download="crucigrama.png",te.href=H,te.click()}).catch(H=>console.error("Error generating image",H))},100))};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"✏️"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),y?c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{ref:R,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsx("div",{children:c.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${y.grid[0].length}, 2rem)`},children:y.grid.flat().map((H,te)=>c.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:H.char?"white":"black"},children:[H.number&&c.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:H.number}),C&&H.char&&c.jsx("span",{children:H.char})]},te))})}),c.jsxs("div",{className:"text-sm",children:[c.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),c.jsx("ul",{className:"space-y-1",children:y.clues.across.map(H=>c.jsxs("li",{children:[c.jsxs("strong",{children:[H.number,"."]})," ",H.clue]},`${H.word}-${H.clue}`))}),c.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),c.jsx("ul",{className:"space-y-1",children:y.clues.down.map(H=>c.jsxs("li",{children:[c.jsxs("strong",{children:[H.number,"."]})," ",H.clue]},`${H.word}-${H.clue}`))})]})]})}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",checked:C,onChange:()=>S(!C),className:"h-5 w-5 rounded"}),c.jsx("span",{children:"Mostrar Solución"})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),c.jsx("button",{onClick:Q,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):c.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(H=>c.jsx("button",{onClick:()=>{a(H),o(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!i&&s===H?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:H},H)),c.jsx("button",{onClick:()=>o(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${i?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),i&&c.jsx("input",{type:"number",value:s,onChange:H=>a(parseInt(H.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"ai-theme",type:"text",value:m,onChange:H=>p(H.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:B,disabled:k.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:k.ai?c.jsx(xDe,{}):c.jsxs(c.Fragment,{children:[c.jsx(QM,{}),c.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),c.jsx("div",{className:"space-y-3",children:Array.from({length:s}).map((H,te)=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[c.jsx("input",{type:"text",value:l[te],onChange:Y=>E(te,Y.target.value),placeholder:`Palabra ${te+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[c.jsx("textarea",{value:d[te],onChange:Y=>_(te,Y.target.value),placeholder:`Pista ${te+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:()=>j(te),disabled:F===te,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:F===te?c.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):c.jsx(QM,{})})]})]},te))}),c.jsx("div",{className:"text-right pt-4",children:c.jsx("button",{onClick:L,disabled:k.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:k.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},yDe=()=>{const[t,e]=G.useState(null),[n,r]=G.useState(!0);return G.useEffect(()=>{const s=bP(Lee,async a=>{if(a&&a.email)try{const i=await dj(a.email);e(i)}catch(i){console.error("Error al obtener el perfil del usuario:",i),e(null)}else e(null);r(!1)});return()=>s()},[]),{currentUser:t,loading:n}},wDe=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],bDe=({recurso:t,onClick:e})=>c.jsxs("button",{onClick:e,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[c.jsx("div",{className:"text-6xl mb-4",children:t.icon}),c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:t.nombre}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:t.descripcion})]}),CDe=()=>{const[t,e]=G.useState("menu"),{currentUser:n}=yDe(),r=()=>t!=="menu"&&!n?c.jsx("div",{className:"text-center p-8",children:"Cargando información de usuario..."}):t==="mapasMentales"?c.jsx(uDe,{onBack:()=>e("menu"),currentUser:n}):t==="sopaDeLetras"?c.jsx(fDe,{onBack:()=>e("menu"),currentUser:n}):t==="lineasDeTiempo"?c.jsx(gDe,{onBack:()=>e("menu"),currentUser:n}):t==="crucigramas"?c.jsx(vDe,{onBack:()=>e("menu"),currentUser:n}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:wDe.map(s=>c.jsx(bDe,{recurso:s,onClick:()=>e(s.id)},s.id))})]});return c.jsx("div",{className:"animate-fade-in space-y-6",children:r()})},EDe="evaluaciones_formativas",_De="calificaciones_formativas",Qz="trabajos_grupales_formativos",Hz=t=>{var n,r,s,a;const e=t.data();return{id:t.id,...e,fecha:((r=(n=e.fecha)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString().split("T")[0])||e.fecha,fechaPresentacion:((a=(s=e.fechaPresentacion)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.fechaPresentacion}},SDe=(t,e)=>{const n=an(Lt(It,EDe),Vr("curso","==",t));return En(n,r=>{e(r.docs.map(s=>Hz(s)))},r=>{console.error("Error subscribing to student evaluations:",r),e([])})},TDe=t=>{const e=an(Lt(It,_De));return En(e,n=>{const r={};n.forEach(s=>{r[s.id]=s.data()}),t(r)},n=>{console.error("Error subscribing to grades:",n),t({})})},NDe=(t,e)=>{const n=an(Lt(It,Qz),Vr("curso","==",t));return En(n,r=>{e(r.docs.map(s=>Hz(s)))},r=>{console.error("Error subscribing to group projects:",r),e([])})},BDe=async t=>{try{const{id:e,...n}=t,r=Cn(It,Qz,e);await io(r,n)}catch(e){throw console.error("Error updating group project:",e),new Error("Could not update group project.")}},kDe=({currentUser:t})=>{const[e,n]=G.useState([]),[r,s]=G.useState({}),[a,i]=G.useState([]),[o,l]=G.useState(!0),[u,d]=G.useState(null),[h,m]=G.useState(!1),[p,y]=G.useState(null),x=G.useRef(null);G.useEffect(()=>{if(!t.curso){l(!1);return}l(!0);const F=SDe(t.curso,n),U=TDe(s),R=NDe(t.curso,E=>{i(E),l(!1)});return()=>{F(),U(),R()}},[t.curso]);const C=G.useMemo(()=>{if(!t.curso)return[];const U=e.filter(R=>R.curso===t.curso).reduce((R,E)=>((R[E.asignatura]=R[E.asignatura]||[]).push(E),R),{});return Object.entries(U).map(([R,E])=>{let _=0,B=0;const j=E.map(L=>{var te;const Q=(te=r[L.id])==null?void 0:te[t.nombreCompleto];let H="No Trabajado";return Q==="trabajado"?(_+=7,B++,H="Trabajado"):Q==="no trabajado"&&(_+=2,B++,H="No Trabajado"),{id:L.id,nombreActividad:L.nombreActividad,fecha:L.fecha,estado:H}}).filter(L=>{var Q;return(Q=r[L.id])==null?void 0:Q[t.nombreCompleto]}),D=B>0?(_/B).toFixed(1):"N/A";return{asignatura:R,promedio:D,actividades:j.sort((L,Q)=>new Date(Q.fecha).getTime()-new Date(L.fecha).getTime())}}).filter(R=>R.actividades.length>0).sort((R,E)=>R.asignatura.localeCompare(E.asignatura))},[e,r,t]);G.useEffect(()=>{if(C.reduce((B,j)=>B+j.actividades.length,0)===0){d(null);return}const U=C.reduce((B,j)=>{const D=parseFloat(j.promedio);return isNaN(D)?B:B+D},0),R=C.length>0?U/C.length:0,E=hy.find(B=>R>=B.promedioMin&&R<=B.promedioMax)||null,_=hy.filter(B=>R>=B.promedioMin);if(d({puntajeTotal:0,promedio:R,rangoActual:E,insigniasGanadas:_}),x.current!==null){const B=hy.find(j=>x.current>=j.promedioMin&&x.current<=j.promedioMax)||null;E&&(!B||E.nombre!==B.nombre)&&y(E)}x.current=R},[C]);const S=G.useMemo(()=>t.curso?a.filter(F=>F.curso===t.curso).map(F=>{const U=F.grupos.find(R=>R.integrantes.some(E=>E.nombre===t.nombreCompleto));return U?{...F,miGrupo:U}:null}).filter(F=>F!==null).sort((F,U)=>new Date(U.fechaPresentacion).getTime()-new Date(F.fechaPresentacion).getTime()):[],[a,t]),k=async(F,U)=>{const R=a.find(_=>_.id===F);if(!R)return;const E={...R,grupos:R.grupos.map(_=>_.integrantes.some(j=>j.nombre===t.nombreCompleto)?{..._,integrantes:_.integrantes.map(j=>j.nombre===t.nombreCompleto?{...j,rol:U||void 0}:j)}:_)};try{await BDe(E)}catch(_){console.error("Error updating role:",_),alert("No se pudo actualizar el rol.")}},I=F=>{const U=parseFloat(F);return isNaN(U)?"bg-slate-400":U<4?"bg-red-500":U<5.5?"bg-yellow-500":"bg-green-500"};return o?c.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[p&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>y(null),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:F=>F.stopPropagation(),children:[c.jsx("div",{className:"text-8xl animate-bounce",children:p.emoji}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),c.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:p.nombre}),c.jsx("p",{className:"text-slate-600 mt-4",children:p.mensaje}),c.jsx("button",{onClick:()=>y(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),h&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>m(!1),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:F=>F.stopPropagation(),children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),c.jsx("div",{className:"overflow-y-auto space-y-3",children:hy.map(F=>{const U=u==null?void 0:u.insigniasGanadas.some(R=>R.nombre===F.nombre);return c.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${U?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[c.jsx("div",{className:"text-5xl",children:F.emoji}),c.jsxs("div",{children:[c.jsx("h3",{className:`font-bold ${U?"text-amber-700":"text-slate-600"}`,children:F.nombre}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",F.promedioMin," y ",F.promedioMax]})]})]},F.nombre)})})]})}),c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&c.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),c.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),c.jsx("button",{onClick:()=>m(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),c.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),c.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),C.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map(F=>c.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:F.asignatura}),c.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),c.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${I(F.promedio)}`,children:F.promedio})]}),c.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),F.actividades.map(U=>c.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-700",children:U.nombreActividad}),c.jsx("p",{className:"text-xs text-slate-500",children:new Date(U.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),c.jsx("span",{className:`font-semibold ${U.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:U.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},U.id))]})]},F.asignatura))}):c.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[c.jsx("span",{className:"text-5xl",children:"📊"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),c.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),S.length>0&&c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),c.jsx("div",{className:"space-y-4",children:S.map(F=>{const U=F.miGrupo.integrantes.filter(E=>E.nombre!==t.nombreCompleto&&E.rol).map(E=>E.rol),R=hj.filter(E=>!U.includes(E));return c.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[c.jsx("h3",{className:"font-bold text-slate-800",children:F.nombreActividad}),c.jsxs("p",{className:"text-sm text-slate-500",children:[F.asignatura," - Presentación: ",new Date(F.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),c.jsxs("div",{className:"mt-3 pt-3 border-t",children:[c.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",F.miGrupo.numero]}),c.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:F.miGrupo.integrantes.map(E=>c.jsxs("li",{className:"grid grid-cols-2 items-center",children:[c.jsx("span",{className:E.nombre===t.nombreCompleto?"font-bold":"",children:E.nombre}),E.nombre===t.nombreCompleto?c.jsxs("select",{value:E.rol||"",onChange:_=>k(F.id,_.target.value),className:"text-sm p-1 border rounded w-full",children:[c.jsx("option",{value:"",children:"-- Seleccionar rol --"}),E.rol&&!R.includes(E.rol)&&c.jsx("option",{value:E.rol,children:E.rol}),R.map(_=>c.jsx("option",{value:_,children:_},_))]}):c.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:E.rol||"Sin rol"})]},E.nombre))})]})]},F.id)})})]})]})},IDe="proyectos_interdisciplinarios",Vz="entregas_interdisciplinarias",zz=t=>{var n,r,s,a;const e=t.data();return{id:t.id,...e,fechaCreacion:((r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaCreacion,fechaCompletado:((a=(s=e.fechaCompletado)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString())||e.fechaCompletado}},FDe=(t,e)=>{const n=an(Lt(It,IDe),Vr("cursos","array-contains",t));return En(n,r=>{const s=r.docs.map(a=>zz(a));e(s)},r=>{console.error("Error al suscribirse a los proyectos:",r),e([])})},DDe=(t,e)=>{const n=an(Lt(It,Vz),Vr("estudianteId","==",t));return En(n,r=>{const s=r.docs.map(a=>zz(a));e(s)},r=>{console.error("Error al suscribirse a las entregas:",r),e([])})},RDe=async t=>{try{const{id:e,...n}=t,r=Cn(It,Vz,e),s={...n,fechaCompletado:mn.fromDate(new Date(n.fechaCompletado||Date.now()))};await io(r,s,{merge:!0})}catch(e){throw console.error("Error al actualizar la entrega:",e),new Error("No se pudo guardar la entrega.")}},LDe=({currentUser:t})=>{const[e,n]=G.useState([]),[r,s]=G.useState([]),[a,i]=G.useState(null),[o,l]=G.useState(!0);G.useEffect(()=>{if(!t.curso||!t.id){l(!1);return}l(!0);const h=FDe(t.curso,n),m=DDe(t.id,p=>{s(p),l(!1)});return()=>{h(),m()}},[t.curso,t.id]);const u=async h=>{try{await RDe(h)}catch(m){console.error("Failed to update submission:",m),alert("Hubo un error al guardar tu entrega.")}},d=({plan:h,tarea:m})=>{const p=G.useMemo(()=>{const U=r.find(R=>R.planificacionId===h.id&&R.tareaId===m.id);return U||{id:`${h.id}_${m.id}_${t.id}`,planificacionId:h.id,tareaId:m.id,estudianteId:t.id,estudianteNombre:t.nombreCompleto,completada:!1}},[h.id,m.id,r]),[y,x]=G.useState(!1),[C,S]=G.useState({observaciones:p.observacionesEstudiante||"",enlace:p.enlaceUrl||""}),k=U=>{var E;const R=(E=U.target.files)==null?void 0:E[0];R&&(alert(`Simulación: Archivo "${R.name}" listo para subir.`),u({...p,archivoAdjunto:{nombre:R.name,url:`simulated/path/${R.name}`},fechaCompletado:new Date().toISOString()}))},I=()=>{u({...p,observacionesEstudiante:C.observaciones,enlaceUrl:C.enlace,fechaCompletado:new Date().toISOString()})},F=()=>{u({...p,completada:!p.completada,fechaCompletado:new Date().toISOString()})};return c.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("input",{type:"checkbox",checked:p.completada,onChange:F,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("p",{className:`font-semibold ${p.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",m.numero,": ",m.instrucciones]}),c.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",m.fechaEntrega]}),m.recursoUrl&&c.jsx("a",{href:m.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),c.jsx("button",{onClick:()=>x(!y),className:"text-sm font-semibold",children:y?"Ocultar":"Entregar"})]}),y&&c.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[c.jsx("textarea",{value:C.observaciones,onChange:U=>S({...C,observaciones:U.target.value}),onBlur:I,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),c.jsx("input",{type:"url",value:C.enlace,onChange:U=>S({...C,enlace:U.target.value}),onBlur:I,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),c.jsx("input",{type:"file",onChange:k,className:"text-sm"}),p.archivoAdjunto&&c.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",p.archivoAdjunto.nombre]})]}),p.feedbackProfesor&&c.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[c.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),c.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:p.feedbackProfesor})]})]})};return o?c.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),e.length>0?e.map(h=>{const m=h.tareas||[],y=r.filter(C=>C.planificacionId===h.id).filter(C=>C.completada).length,x=m.length>0?y/m.length*100:0;return c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[c.jsxs("button",{onClick:()=>i(a===h.id?null:h.id),className:"w-full text-left",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:h.nombreProyecto}),c.jsxs("div",{className:"mt-2 space-y-1",children:[c.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[c.jsx("span",{children:"Progreso"}),c.jsxs("span",{children:[Math.round(x),"%"]})]}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:c.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${x}%`}})})]})]}),a===h.id&&c.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:m.length>0?m.map(C=>c.jsx(d,{plan:h,tarea:C},C.id)):c.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},h.id)}):c.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[c.jsx("span",{className:"text-5xl",children:"🎉"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),c.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},UDe=({data:t})=>c.jsx("div",{className:"space-y-4",children:t.map((n,r)=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:n.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),c.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[n.value.toFixed(2)," / 4.00"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${n.value/4*100}%`}})})]},n.label+r))}),MDe=({currentUser:t})=>{const[e,n]=G.useState([]),[r,s]=G.useState(!1),[a,i]=G.useState(null),[o,l]=G.useState(null),[u,d]=G.useState(vx),h=G.useCallback(async()=>{s(!0);try{const C=(await oEe(t.nombreCompleto)).sort((S,k)=>new Date(k.fecha).getTime()-new Date(S.fecha).getTime());n(C),i(null)}catch(x){console.error("Error al cargar acompañamientos desde Firestore",x),i("No se pudieron cargar tus acompañamientos desde la nube.")}finally{s(!1)}},[t.nombreCompleto]),m=G.useCallback(async()=>{try{const x=await lEe();x&&d(x)}catch(x){console.error("Error al cargar rúbrica personalizada",x)}},[]);G.useEffect(()=>{h(),m()},[h,m]);const p=G.useMemo(()=>{if(!o)return[];const x={};return u.forEach(C=>{x[C.domain]={total:0,count:0},C.criteria.forEach(S=>{const k=o.rubricaResultados[S.name];k&&(x[C.domain].total+=k,x[C.domain].count++)})}),Object.entries(x).map(([C,S])=>({label:C,value:S.count>0?S.total/S.count:0}))},[o,u]),y=x=>{const C=new hn;C.setFont("helvetica","bold"),C.setFontSize(10),C.setTextColor(100),C.text("LICEO INDUSTRIAL DE RECOLETA",C.internal.pageSize.getWidth()/2,15,{align:"center"}),C.setFont("helvetica","bold"),C.setFontSize(16),C.setTextColor(40),C.text("Informe de Acompañamiento Docente",C.internal.pageSize.getWidth()/2,25,{align:"center"}),C.setFontSize(12),C.setFont("helvetica","normal"),vl(C,{startY:35,body:[["Docente:",x.docente],["Fecha:",new Date(x.fecha).toLocaleDateString("es-CL")],["Asignatura:",x.asignatura],["Curso:",x.curso],["Bloques:",x.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let S=C.lastAutoTable.finalY+15;if(Object.keys(x.rubricaResultados).length>0){const F=[],U=["Débil","Incipiente","Satisfactorio","Avanzado"];u.forEach(R=>{F.push([{content:R.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),R.criteria.forEach(E=>{const _=x.rubricaResultados[E.name],B=_?U[_-1]:"No evaluado";F.push([E.name,B])})}),vl(C,{startY:S,head:[["Indicador","Nivel de Logro"]],body:F,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),S=C.lastAutoTable.finalY+15}const k=(F,U)=>{if(!U)return;S>250&&(C.addPage(),S=20,C.setFont("helvetica","bold"),C.setFontSize(10),C.setTextColor(100),C.text("LICEO INDUSTRIAL DE RECOLETA",C.internal.pageSize.getWidth()/2,15,{align:"center"}),S=25),C.setFont("helvetica","bold"),C.setFontSize(14),C.setTextColor(40),C.text(F,14,S),S+=8,C.setFont("helvetica","normal"),C.setFontSize(11),C.setTextColor(60);const R=C.splitTextToSize(U.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);C.text(R,14,S),S+=R.length*5+10};k("Observaciones Generales",x.observacionesGenerales),k("Retroalimentación Consolidada",x.retroalimentacionConsolidada);const I=C.getNumberOfPages();for(let F=1;F<=I;F++)C.setPage(F),C.setFontSize(8),C.setTextColor(128),C.text(`Página ${F} de ${I}`,C.internal.pageSize.getWidth()/2,C.internal.pageSize.getHeight()-10,{align:"center"});C.save(`Acompanamiento_${t.nombreCompleto.replace(/\s/g,"_")}_${new Date(x.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),c.jsxs("button",{onClick:()=>y(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[c.jsx(fj,{})," Exportar PDF"]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2 space-y-6",children:c.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[c.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),c.jsx("h3",{children:"Observaciones Generales"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx(UDe,{data:p})})]})]})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),r&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),!r&&e.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),c.jsx("div",{className:"space-y-4",children:!r&&e.length>0?e.map(x=>c.jsx("button",{onClick:()=>l(x),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[x.curso," - ",x.asignatura]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(x.fecha).toLocaleDateString("es-CL"),x.bloques&&` | Bloques: ${x.bloques}`]}),Object.keys(x.rubricaResultados).length>0&&c.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(x.rubricaResultados).length," criterios"]})]}),c.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},x.id)):!r&&c.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("span",{className:"text-5xl",children:"👍"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},PDe=t=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const e=Lt(er,"planificaciones"),n=an(e,sr("fechaCreacion","desc"));return En(n,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log("✅ Todas las planificaciones cargadas:",a.length),t(a)},s=>{throw console.error("❌ Error al cargar todas las planificaciones:",s),s})}catch(e){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",e),e}},ODe=(t,e)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",t),!t)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const n=Lt(er,"planificaciones"),r=an(n,Vr("userId","==",t),sr("fechaCreacion","desc"));return En(r,a=>{const i=[];a.forEach(o=>{const l=o.data();i.push({id:o.id,...l})}),console.log("✅ Planificaciones del usuario cargadas:",i.length),e(i)},a=>{throw console.error("❌ Error al cargar planificaciones del usuario:",a),a})}catch(n){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",n),n}};class HM extends Map{constructor(e,n=HDe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(VM(this,e))}has(e){return super.has(VM(this,e))}set(e,n){return super.set(jDe(this,e),n)}delete(e){return super.delete(QDe(this,e))}}function VM({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function jDe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function QDe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function HDe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function VDe(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const zM=Symbol("implicit");function Gz(){var t=new HM,e=[],n=[],r=zM;function s(a){let i=t.get(a);if(i===void 0){if(r!==zM)return r;t.set(a,i=e.push(a)-1)}return n[i%n.length]}return s.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new HM;for(const i of a)t.has(i)||t.set(i,e.push(i)-1);return s},s.range=function(a){return arguments.length?(n=Array.from(a),s):n.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return Gz(e,n).unknown(r)},VDe.apply(s,arguments),s}function zDe(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const GDe=zDe("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var qDe={value:function(){}};function qz(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new K2(n)}function K2(t){this._=t}function KDe(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}K2.prototype=qz.prototype={constructor:K2,on:function(t,e){var n=this._,r=KDe(t+"",n),s,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((s=(t=r[a]).type)&&(s=$De(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<i;)if(s=(t=r[a]).type)n[s]=GM(n[s],t.name,e);else if(e==null)for(s in n)n[s]=GM(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new K2(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,a;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,s=a.length;r<s;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,a=r.length;s<a;++s)r[s].value.apply(e,n)}};function $De(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function GM(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=qDe,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}const WDe=Object.freeze(Object.defineProperty({__proto__:null,dispatch:qz},Symbol.toStringTag,{value:"Module"})),YDe=Pq(WDe);var zS,qM;function XDe(){if(qM)return zS;qM=1;const t=YDe.dispatch,e=Math.PI/180,n={archimedean:x,rectangular:C},r=64,s=2048;zS=function(){var F=[256,256],U=a,R=i,E=l,_=o,B=o,j=u,D=d,L=x,Q=[],H=1/0,te=t("word","end"),Y=null,ne=Math.random,V={},J=k;V.canvas=function(O){return arguments.length?(J=I(O),V):J},V.start=function(){var O=K(J()),W=S((F[0]>>5)*F[1]),Z=null,re=Q.length,se=-1,de=[],pe=Q.map(function(Se,me){return Se.text=U.call(this,Se,me),Se.font=R.call(this,Se,me),Se.style=_.call(this,Se,me),Se.weight=B.call(this,Se,me),Se.rotate=j.call(this,Se,me),Se.size=~~E.call(this,Se,me),Se.padding=D.call(this,Se,me),Se}).sort(function(Se,me){return me.size-Se.size});return Y&&clearInterval(Y),Y=setInterval(be,0),be(),V;function be(){for(var Se=Date.now();Date.now()-Se<H&&++se<re&&Y;){var me=pe[se];me.x=F[0]*(ne()+.5)>>1,me.y=F[1]*(ne()+.5)>>1,h(O,me,pe,se),me.hasText&&ie(W,me,Z)&&(de.push(me),te.call("word",V,me),Z?p(Z,me):Z=[{x:me.x+me.x0,y:me.y+me.y0},{x:me.x+me.x1,y:me.y+me.y1}],me.x-=F[0]>>1,me.y-=F[1]>>1)}se>=re&&(V.stop(),te.call("end",V,de,Z))}},V.stop=function(){Y&&(clearInterval(Y),Y=null);for(const O of Q)delete O.sprite;return V};function K(O){const W=O.getContext("2d",{willReadFrequently:!0});O.width=O.height=1;const Z=Math.sqrt(W.getImageData(0,0,1,1).data.length>>2);return O.width=(r<<5)/Z,O.height=s/Z,W.fillStyle=W.strokeStyle="red",{context:W,ratio:Z}}function ie(O,W,Z){F[0],F[1];for(var re=W.x,se=W.y,de=Math.sqrt(F[0]*F[0]+F[1]*F[1]),pe=L(F),be=ne()<.5?1:-1,Se=-be,me,ce,Me;(me=pe(Se+=be))&&(ce=~~me[0],Me=~~me[1],!(Math.min(Math.abs(ce),Math.abs(Me))>=de));)if(W.x=re+ce,W.y=se+Me,!(W.x+W.x0<0||W.y+W.y0<0||W.x+W.x1>F[0]||W.y+W.y1>F[1])&&(!Z||y(W,Z))&&!m(W,O,F[0])){for(var Ze=W.sprite,Fe=W.width>>5,Ce=F[0]>>5,Re=W.x-(Fe<<4),ze=Re&127,Je=32-ze,dt=W.y1-W.y0,_t=(W.y+W.y0)*Ce+(Re>>5),ft,Rt=0;Rt<dt;Rt++){ft=0;for(var Ut=0;Ut<=Fe;Ut++)O[_t+Ut]|=ft<<Je|(Ut<Fe?(ft=Ze[Rt*Fe+Ut])>>>ze:0);_t+=Ce}return!0}return!1}return V.timeInterval=function(O){return arguments.length?(H=O??1/0,V):H},V.words=function(O){return arguments.length?(Q=O,V):Q},V.size=function(O){return arguments.length?(F=[+O[0],+O[1]],V):F},V.font=function(O){return arguments.length?(R=I(O),V):R},V.fontStyle=function(O){return arguments.length?(_=I(O),V):_},V.fontWeight=function(O){return arguments.length?(B=I(O),V):B},V.rotate=function(O){return arguments.length?(j=I(O),V):j},V.text=function(O){return arguments.length?(U=I(O),V):U},V.spiral=function(O){return arguments.length?(L=n[O]||O,V):L},V.fontSize=function(O){return arguments.length?(E=I(O),V):E},V.padding=function(O){return arguments.length?(D=I(O),V):D},V.random=function(O){return arguments.length?(ne=O,V):ne},V.on=function(){var O=te.on.apply(te,arguments);return O===te?V:O},V};function a(F){return F.text}function i(){return"serif"}function o(){return"normal"}function l(F){return Math.sqrt(F.value)}function u(){return(~~(random()*6)-3)*30}function d(){return 1}function h(F,U,R,E){if(!U.sprite){var _=F.context,B=F.ratio;_.clearRect(0,0,(r<<5)/B,s/B);var j=0,D=0,L=0,Q=R.length;for(--E;++E<Q;){U=R[E],_.save(),_.font=U.style+" "+U.weight+" "+~~((U.size+1)/B)+"px "+U.font;const me=_.measureText(U.text),ce=-Math.floor(me.width/2);let Me=(me.width+1)*B,Ze=U.size<<1;if(U.rotate){var H=Math.sin(U.rotate*e),te=Math.cos(U.rotate*e),Y=Me*te,ne=Me*H,V=Ze*te,J=Ze*H;Me=Math.max(Math.abs(Y+J),Math.abs(Y-J))+31>>5<<5,Ze=~~Math.max(Math.abs(ne+V),Math.abs(ne-V))}else Me=Me+31>>5<<5;if(Ze>L&&(L=Ze),j+Me>=r<<5&&(j=0,D+=L,L=0),D+Ze>=s)break;_.translate((j+(Me>>1))/B,(D+(Ze>>1))/B),U.rotate&&_.rotate(U.rotate*e),_.fillText(U.text,ce,0),U.padding&&(_.lineWidth=2*U.padding,_.strokeText(U.text,ce,0)),_.restore(),U.width=Me,U.height=Ze,U.xoff=j,U.yoff=D,U.x1=Me>>1,U.y1=Ze>>1,U.x0=-U.x1,U.y0=-U.y1,U.hasText=!0,j+=Me}for(var K=_.getImageData(0,0,(r<<5)/B,s/B).data,ie=[];--E>=0;)if(U=R[E],!!U.hasText){for(var O=U.width,W=O>>5,Z=U.y1-U.y0,re=0;re<Z*W;re++)ie[re]=0;if(j=U.xoff,j==null)return;D=U.yoff;for(var se=0,de=-1,pe=0;pe<Z;pe++){for(var re=0;re<O;re++){var be=W*pe+(re>>5),Se=K[(D+pe)*(r<<5)+(j+re)<<2]?1<<31-re%32:0;ie[be]|=Se,se|=Se}se?de=pe:(U.y0++,Z--,pe--,D++)}U.y1=U.y0+de,U.sprite=ie.slice(0,(U.y1-U.y0)*W)}}}function m(F,U,R){R>>=5;for(var E=F.sprite,_=F.width>>5,B=F.x-(_<<4),j=B&127,D=32-j,L=F.y1-F.y0,Q=(F.y+F.y0)*R+(B>>5),H,te=0;te<L;te++){H=0;for(var Y=0;Y<=_;Y++)if((H<<D|(Y<_?(H=E[te*_+Y])>>>j:0))&U[Q+Y])return!0;Q+=R}return!1}function p(F,U){var R=F[0],E=F[1];U.x+U.x0<R.x&&(R.x=U.x+U.x0),U.y+U.y0<R.y&&(R.y=U.y+U.y0),U.x+U.x1>E.x&&(E.x=U.x+U.x1),U.y+U.y1>E.y&&(E.y=U.y+U.y1)}function y(F,U){return F.x+F.x1>U[0].x&&F.x+F.x0<U[1].x&&F.y+F.y1>U[0].y&&F.y+F.y0<U[1].y}function x(F){var U=F[0]/F[1];return function(R){return[U*(R*=.1)*Math.cos(R),R*Math.sin(R)]}}function C(F){var U=4,R=U*F[0]/F[1],E=0,_=0;return function(B){var j=B<0?-1:1;switch(Math.sqrt(1+4*j*B)-j&3){case 0:E+=R;break;case 1:_+=U;break;case 2:E-=R;break;default:_-=U;break}return[E,_]}}function S(F){for(var U=[],R=-1;++R<F;)U[R]=0;return U}function k(){return document.createElement("canvas")}function I(F){return typeof F=="function"?F:function(){return F}}return zS}var JDe=XDe();const ZDe=Tb(JDe),eRe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),tRe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),nRe=()=>c.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),rRe=t=>{const[e,n]=G.useState([]),[r,s]=G.useState(!0),[a,i]=G.useState(null),o=G.useMemo(()=>(t==null?void 0:t.profile)==="SUBDIRECCION",[t]);return G.useEffect(()=>{if(!(t!=null&&t.email)&&!(t!=null&&t.id)){i("Usuario no autenticado"),s(!1);return}try{let l;const u=d=>{n(d),s(!1),i(null)};if(o)l=PDe(u);else{const d=t.email||t.id||"";l=ODe(u,d)}return l}catch(l){i(l instanceof Error?l.message:"Error al conectar con la base de datos"),s(!1)}},[t,o]),{planificaciones:e,loading:r,error:a,canViewAllPlans:o}},sRe=({plan:t,onClose:e})=>c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:n=>n.stopPropagation(),children:[c.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:t.nombreUnidad}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.asignatura," | ",t.nivel," | Autor: ",t.autor||"N/A"]})]}),c.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:c.jsx(tRe,{})})]}),c.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[c.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",t.objetivosAprendizaje]}),c.jsxs("p",{className:"mt-2",children:[c.jsx("strong",{children:"Indicadores de Evaluación:"})," ",t.indicadoresEvaluacion]}),c.jsx("div",{className:"mt-3",children:c.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof t.progreso=="number"?`${t.progreso}%`:"No registrado"]})})]}),c.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",t.detallesLeccion.length,")"]}),c.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:t.detallesLeccion.map((n,r)=>c.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[c.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",r+1,": ",n.actividades]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("span",{children:[c.jsx("strong",{children:"Objetivo:"})," ",n.objetivosAprendizaje]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Contenidos:"})," ",n.contenidosConceptuales]})]})]},r))}),t.reflexionUnidad&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexión Docente"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),t.reflexionUnidad.ordenHabilidades&&t.reflexionUnidad.ordenHabilidades.length>0?c.jsx("ul",{className:"space-y-2",children:t.reflexionUnidad.ordenHabilidades.map((n,r)=>c.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[c.jsxs("span",{className:"font-bold text-amber-500",children:[r+1,"."]})," ",n]},n))}):c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:t.reflexionUnidad.fortalezas||"N/A"})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:t.reflexionUnidad.mejoras||"N/A"})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafíos"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:t.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),KM=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],aRe=["1º Medio","2º Medio","3º Medio","4º Medio"],iRe=({words:t})=>{const e=G.useRef(null);return G.useEffect(()=>{if(!t.length||!e.current)return;const n=rc(e.current);n.selectAll("*").remove();const r=ZDe().size([500,350]).words(t.map(a=>({...a}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(a=>Math.sqrt(a.value)*12).on("end",s);r.start();function s(a){n.attr("width",r.size()[0]).attr("height",r.size()[1]).append("g").attr("transform",`translate(${r.size()[0]/2},${r.size()[1]/2})`).selectAll("text").data(a).enter().append("text").style("font-size",i=>`${i.size}px`).style("font-family","Impact").style("fill",(i,o)=>Gz(GDe)(o.toString())).attr("text-anchor","middle").attr("transform",i=>`translate(${[i.x,i.y]})rotate(${i.rotate})`).text(i=>i.text)}},[t]),c.jsx("svg",{ref:e})},oRe=({planificaciones:t})=>{const[e,n]=G.useState("todos"),[r,s]=G.useState("todos"),a=G.useMemo(()=>["todos",...Array.from(new Set(t.map(d=>d.asignatura)))],[t]),i=G.useMemo(()=>t.filter(d=>(e==="todos"||d.nivel===e)&&(r==="todos"||d.asignatura===r)&&d.reflexionUnidad),[t,e,r]),o=G.useMemo(()=>{const d=KM.reduce((h,m)=>({...h,[m]:0}),{});return i.forEach(h=>{var m,p;return(p=(m=h.reflexionUnidad)==null?void 0:m.ordenHabilidades)==null?void 0:p.forEach((y,x)=>{d[y]!==void 0&&(d[y]+=KM.length-x)})}),Object.entries(d).map(([h,m])=>({text:h,value:m})).sort((h,m)=>m.value-h.value)},[i]),l=G.useMemo(()=>{const d=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),m=(i.map(p=>{var y,x;return`${((y=p.reflexionUnidad)==null?void 0:y.fortalezas)||""} ${((x=p.reflexionUnidad)==null?void 0:x.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((p,y)=>(d.has(y)||(p[y]=(p[y]||0)+1),p),{});return Object.entries(m).map(([p,y])=>({text:p,value:y})).sort((p,y)=>y.value-p.value).slice(0,50)},[i]),u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return c.jsxs("div",{className:"animate-fade-in",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),c.jsxs("select",{value:e,onChange:d=>n(d.target.value),className:u,children:[c.jsx("option",{value:"todos",children:"Todos los Niveles"}),aRe.map(d=>c.jsx("option",{value:d,children:d},d))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{value:r,onChange:d=>s(d.target.value),className:u,children:a.map(d=>c.jsx("option",{value:d,children:d==="todos"?"Todas las Asignaturas":d},d))})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),o.every(d=>d.value===0)?c.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):c.jsx("ul",{className:"space-y-3",children:o.map((d,h)=>c.jsxs("li",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:h+1}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:d.text}),c.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:c.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${d.value/(o[0].value||1)*100}%`}})})]})]},d.text))})]}),c.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),l.length>0?c.jsx(iRe,{words:l}):c.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},lRe=({currentUser:t})=>{const{planificaciones:e,loading:n,error:r,canViewAllPlans:s}=rRe(t),[a,i]=G.useState("seguimiento"),[o,l]=G.useState("1º"),[u,d]=G.useState(null),[h,m]=G.useState(null),p=G.useMemo(()=>{const C={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"};return e.filter(S=>S.nivel===C[o]&&S.tipo==="Unidad")},[e,o]),y=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];if(!(t!=null&&t.id))return c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{children:"Usuario no autenticado."})});if(n)return c.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[c.jsx(nRe,{}),c.jsx("span",{children:"Cargando planificaciones..."})]});if(r)return c.jsx("div",{className:"text-center py-8",children:c.jsxs("p",{className:"text-red-500",children:["Error: ",r]})});const x=()=>c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:c.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:y.map(C=>c.jsx("button",{onClick:()=>l(C.key),className:`${o===C.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:C.label},C.key))})}),p.length===0?c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):c.jsx("div",{className:"space-y-4",children:po.map(C=>{const S=p.filter(I=>I.asignatura===C);if(S.length===0)return null;const k=u===C;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[c.jsxs("button",{onClick:()=>d(k?null:C),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:C}),c.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[S.length," unidad",S.length>1?"es":""]})]}),c.jsx("span",{className:`transform transition-transform ${k?"rotate-180":""}`,children:c.jsx(eRe,{})})]}),k&&c.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:c.jsx("ul",{className:"space-y-3",children:S.map(I=>c.jsx("li",{children:c.jsxs("button",{onClick:()=>m(I),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:I.nombreUnidad}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",I.autor||"N/A"]})]})},I.id))})})]},C)})})]});return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),s&&c.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"👑 Vista administrativa"})]}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:c.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>i("seguimiento"),className:`${a==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),c.jsx("button",{onClick:()=>i("analisis"),className:`${a==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Análisis de Reflexiones"})]})}),a==="seguimiento"&&x(),a==="analisis"&&c.jsx(oRe,{planificaciones:e.filter(C=>C.tipo==="Unidad")})]}),h&&c.jsx(sRe,{plan:h,onClose:()=>m(null)})]})},KC="analisisTaxonomicos",cRe=async()=>{try{const t=an(Lt(er,KC),sr("uploadDate","desc"));return(await Da(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener todos los análisis:",t),new Error("No se pudieron cargar los análisis taxonómicos")}},uRe=async t=>{if(!t)return[];try{const e=an(Lt(er,KC),Vr("userId","==",t),sr("uploadDate","desc"));return(await Da(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener análisis por usuario:",e),new Error("No se pudieron cargar los análisis del usuario")}},ARe=async t=>{try{return{id:(await Cs(Lt(er,KC),t)).id,...t}}catch(e){throw console.error("Error al crear análisis:",e),new Error("No se pudo crear el análisis taxonómico")}},dRe=async t=>{try{const e=Cn(er,KC,t);await Ka(e)}catch(e){throw console.error("Error al eliminar análisis:",e,"ID:",t),new Error("No se pudo eliminar el análisis taxonómico")}},GS=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],$M={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},fRe=()=>c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),WM=({currentUser:t})=>{const[e,n]=G.useState([]),[r,s]=G.useState(!1),[a,i]=G.useState(null),[o,l]=G.useState(null),[u,d]=G.useState(""),[h,m]=G.useState(!1),[p,y]=G.useState(null),[x,C]=G.useState(null),S=G.useCallback(async()=>{if(t!=null&&t.id){s(!0);try{const R=t.profile==="SUBDIRECCION"?await cRe():await uRe(t.id);n(R),i(null)}catch(R){console.error("Error al cargar análisis:",R),i("No se pudieron cargar los análisis.")}finally{s(!1)}}},[t]);G.useEffect(()=>{S()},[S]);const k=async R=>{var _;const E=(_=R.target.files)==null?void 0:_[0];if(E){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(E.type)){i("Por favor, suba un archivo PDF o DOCX válido.");return}y(E),d(E.name),i(null);const j=new FileReader;j.onloadend=()=>{var L;const D=(L=j.result)==null?void 0:L.split(",")[1];if(!D){i("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),C(null);return}C({mimeType:E.type,data:D})},j.onerror=()=>i("Error al leer el archivo."),j.readAsDataURL(E)}},I=async()=>{if(!u.trim()||!x){i("Debe subir un documento y asignarle un nombre para analizar.");return}m(!0),i(null);const R=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser válido.
        `,E={type:"object",properties:{analysisResults:{type:"array",items:{type:"object",properties:{question:{type:"string"},habilidadBloom:{type:"string",enum:GS}},required:["question","habilidadBloom"]}},summary:{type:"object",properties:GS.reduce((_,B)=>({..._,[B]:{type:"number"}}),{})}},required:["analysisResults","summary"]};try{t0("Análisis Taxonómico",t);const _="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",j=new Ra(_).getGenerativeModel({model:"gemini-1.5-flash-latest",generationConfig:{responseMimeType:"application/json",responseSchema:E}}),D={inlineData:{mimeType:x.mimeType,data:x.data}},Q=(await j.generateContent([R,D])).response.text();let H;try{H=JSON.parse(Q)}catch(ne){throw console.error("Error al parsear JSON:",ne),console.error("Respuesta recibida (no es JSON válido):",Q),new Error("La respuesta de la IA no tuvo un formato válido. Intente de nuevo.")}const te={documentName:u,uploadDate:new Date().toISOString(),userId:t.id,analysisResults:H.analysisResults,summary:H.summary},Y=await ARe(te);await S(),l(Y),d(""),y(null),C(null)}catch(_){console.error(_);const B=_ instanceof Error?_.message:"Hubo un error al analizar el documento.";i(B)}finally{m(!1)}},F=async R=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await dRe(R),await S(),(o==null?void 0:o.id)===R&&l(null)}catch{i("No se pudo eliminar el análisis.")}},U=G.useMemo(()=>o?Object.values(o.summary).reduce((R,E)=>R+(E||0),0):0,[o]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonómico de Evaluaciones"}),a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),c.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:c.jsxs("div",{className:"space-y-1 text-center",children:[c.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:c.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[c.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:k,accept:".pdf,.doc,.docx"}),c.jsx("span",{children:"Cargue un archivo"})]}),c.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),c.jsx("p",{className:"text-xs text-slate-500",children:p?p.name:"PDF, DOCX hasta 10MB"})]})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),c.jsx("input",{type:"text",id:"documentName",value:u,onChange:R=>d(R.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("button",{onClick:I,disabled:h||!x,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:h?c.jsx(fRe,{}):"Analizar con IA"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),r?c.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):e.length===0?c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados."}):c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:e.map(R=>c.jsxs("button",{onClick:()=>l(R),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===R.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[c.jsx("p",{className:"font-semibold truncate",children:R.documentName}),c.jsx("p",{className:"text-xs text-slate-500",children:new Date(R.uploadDate).toLocaleString("es-CL")})]},R.id))})]})]}),c.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL")]})]}),c.jsx("button",{onClick:()=>F(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado Taxonómico (",U," preguntas)"]}),c.jsx("div",{className:"space-y-3",children:GS.map(R=>{const E=o.summary[R]||0,_=U>0?E/U*100:0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:R}),c.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[E," (",_.toFixed(0),"%)"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:`${$M[R]} h-4 rounded-full`,style:{width:`${_}%`}})})]},R)})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),c.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((R,E)=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:R.question}),c.jsx("td",{className:"px-4 py-3 text-sm",children:c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${$M[R.habilidadBloom]}`,children:R.habilidadBloom})})]},E))})]})})]})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[c.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📊"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})},Kz="empresas_practicas",hRe="usuarios",nk="rutas_supervision",rk=t=>{const e=t.data();return{id:t.id,...e}},mRe=t=>{const e=an(Lt(It,Kz),sr("nombre","asc"));return En(e,n=>{const r=n.docs.map(s=>rk(s));t(r)},n=>console.error("Error al suscribirse a empresas:",n))},pRe=async t=>{const e=Cn(It,Kz,t);await Ka(e)},gRe=t=>{const e=an(Lt(It,hRe),Vr("profile","==","PROFESORADO"),sr("nombreCompleto","asc"));return En(e,n=>{const r=n.docs.map(s=>rk(s));t(r)},n=>console.error("Error al suscribirse a profesores:",n))},xRe=async t=>(await Cs(Lt(It,nk),{...t,createdAt:nee()})).id,vRe=t=>{const e=an(Lt(It,nk),sr("createdAt","desc"));return En(e,n=>{const r=n.docs.map(s=>rk(s));t(r)},n=>console.error("Error al suscribirse a rutas guardadas:",n))},yRe=async t=>{const e=Cn(It,nk,t);await Ka(e)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Kh=function(){return Kh=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},Kh.apply(this,arguments)};function wRe(t,e,n,r){return new(n||(n=Promise))(function(s,a){function i(u){try{l(r.next(u))}catch(d){a(d)}}function o(u){try{l(r.throw(u))}catch(d){a(d)}}function l(u){var d;u.done?s(u.value):(d=u.value,d instanceof n?d:new n(function(h){h(d)})).then(i,o)}l((r=r.apply(t,[])).next())})}function bRe(t,e){var n,r,s,a,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(l){return function(u){return function(d){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(s=2&d[0]?r.return:d[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,d[1])).done)return s;switch(r=0,s&&(d=[2&d[0],s.value]),d[0]){case 0:case 1:s=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,r=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(s=i.trys,!((s=s.length>0&&s[s.length-1])||d[0]!==6&&d[0]!==2)){i=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){i.label=d[1];break}if(d[0]===6&&i.label<s[1]){i.label=s[1],s=d;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(d);break}s[2]&&i.ops.pop(),i.trys.pop();continue}d=e.call(t,i)}catch(h){d=[6,h],r=0}finally{n=s=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([l,u])}}}function Bn(){return Bn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bn.apply(this,arguments)}function $h(t){return $h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$h(t)}function $z(t){var e=function(n,r){if($h(n)!=="object"||n===null)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var a=s.call(n,r);if($h(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}(t,"string");return $h(e)==="symbol"?e:String(e)}function Mm(t,e,n){return(e=$z(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function pn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YM(Object(n),!0).forEach(function(r){Mm(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$z(r.key),r)}}function iN(t,e){return iN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},iN(t,e)}function wb(t){return wb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wb(t)}function CRe(t,e){if(e&&($h(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}function ERe(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=wb(t);if(e){var s=wb(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return CRe(this,n)}}function oN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wz(t,e){if(t){if(typeof t=="string")return oN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oN(t,e):void 0}}function sk(t){return function(e){if(Array.isArray(e))return oN(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||Wz(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var _Re=function(){function t(n){var r=this;this._insertTag=function(s){var a;a=r.tags.length===0?r.insertionPoint?r.insertionPoint.nextSibling:r.prepend?r.container.firstChild:r.before:r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,a),r.tags.push(s)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(n){n.forEach(this._insertTag)},e.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(a){var i=document.createElement("style");return i.setAttribute("data-emotion",a.key),a.nonce!==void 0&&i.setAttribute("nonce",a.nonce),i.appendChild(document.createTextNode("")),i.setAttribute("data-s",""),i}(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var s=function(a){if(a.sheet)return a.sheet;for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].ownerNode===a)return document.styleSheets[i]}(r);try{s.insertRule(n,s.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(n));this.ctr++},e.flush=function(){this.tags.forEach(function(n){return n.parentNode&&n.parentNode.removeChild(n)}),this.tags=[],this.ctr=0},t}(),Kl="-ms-",JM="-moz-",Pr="-webkit-",ak="decl",Yz="@keyframes",SRe=Math.abs,$C=String.fromCharCode,TRe=Object.assign;function Xz(t){return t.trim()}function Hr(t,e,n){return t.replace(e,n)}function lN(t,e){return t.indexOf(e)}function vi(t,e){return 0|t.charCodeAt(e)}function Cv(t,e,n){return t.slice(e,n)}function Mu(t){return t.length}function ik(t){return t.length}function d2(t,e){return e.push(t),t}var WC=1,_p=1,Jz=0,Go=0,ka=0,Vp="";function YC(t,e,n,r,s,a,i){return{value:t,root:e,parent:n,type:r,props:s,children:a,line:WC,column:_p,length:i,return:""}}function zg(t,e){return TRe(YC("",null,null,"",null,null,0),t,{length:-t.length},e)}function yl(){return ka=Go<Jz?vi(Vp,Go++):0,_p++,ka===10&&(_p=1,WC++),ka}function Xu(){return vi(Vp,Go)}function $2(){return Go}function o1(t,e){return Cv(Vp,t,e)}function Ev(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Zz(t){return WC=_p=1,Jz=Mu(Vp=t),Go=0,[]}function eG(t){return Vp="",t}function W2(t){return Xz(o1(Go-1,cN(t===91?t+2:t===40?t+1:t)))}function NRe(t){for(;(ka=Xu())&&ka<33;)yl();return Ev(t)>2||Ev(ka)>3?"":" "}function BRe(t,e){for(;--e&&yl()&&!(ka<48||ka>102||ka>57&&ka<65||ka>70&&ka<97););return o1(t,$2()+(e<6&&Xu()==32&&yl()==32))}function cN(t){for(;yl();)switch(ka){case t:return Go;case 34:case 39:t!==34&&t!==39&&cN(ka);break;case 40:t===41&&cN(t);break;case 92:yl()}return Go}function kRe(t,e){for(;yl()&&t+ka!==57&&(t+ka!==84||Xu()!==47););return"/*"+o1(e,Go-1)+"*"+$C(t===47?t:yl())}function IRe(t){for(;!Ev(Xu());)yl();return o1(t,Go)}function ZM(t){return eG(Y2("",null,null,null,[""],t=Zz(t),0,[0],t))}function Y2(t,e,n,r,s,a,i,o,l){for(var u=0,d=0,h=i,m=0,p=0,y=0,x=1,C=1,S=1,k=0,I="",F=s,U=a,R=r,E=I;C;)switch(y=k,k=yl()){case 40:if(y!=108&&vi(E,h-1)==58){lN(E+=Hr(W2(k),"&","&\f"),"&\f")!=-1&&(S=-1);break}case 34:case 39:case 91:E+=W2(k);break;case 9:case 10:case 13:case 32:E+=NRe(y);break;case 92:E+=BRe($2()-1,7);continue;case 47:switch(Xu()){case 42:case 47:d2(FRe(kRe(yl(),$2()),e,n),l);break;default:E+="/"}break;case 123*x:o[u++]=Mu(E)*S;case 125*x:case 59:case 0:switch(k){case 0:case 125:C=0;case 59+d:p>0&&Mu(E)-h&&d2(p>32?t8(E+";",r,n,h-1):t8(Hr(E," ","")+";",r,n,h-2),l);break;case 59:E+=";";default:if(d2(R=e8(E,e,n,u,d,s,o,I,F=[],U=[],h),a),k===123)if(d===0)Y2(E,e,R,R,F,a,h,o,U);else switch(m===99&&vi(E,3)===110?100:m){case 100:case 109:case 115:Y2(t,R,R,r&&d2(e8(t,R,R,0,0,s,o,I,s,F=[],h),U),s,U,h,o,r?F:U);break;default:Y2(E,R,R,R,[""],U,0,o,U)}}u=d=p=0,x=S=1,I=E="",h=i;break;case 58:h=1+Mu(E),p=y;default:if(x<1){if(k==123)--x;else if(k==125&&x++==0&&(ka=Go>0?vi(Vp,--Go):0,_p--,ka===10&&(_p=1,WC--),ka==125))continue}switch(E+=$C(k),k*x){case 38:S=d>0?1:(E+="\f",-1);break;case 44:o[u++]=(Mu(E)-1)*S,S=1;break;case 64:Xu()===45&&(E+=W2(yl())),m=Xu(),d=h=Mu(I=E+=IRe($2())),k++;break;case 45:y===45&&Mu(E)==2&&(x=0)}}return a}function e8(t,e,n,r,s,a,i,o,l,u,d){for(var h=s-1,m=s===0?a:[""],p=ik(m),y=0,x=0,C=0;y<r;++y)for(var S=0,k=Cv(t,h+1,h=SRe(x=i[y])),I=t;S<p;++S)(I=Xz(x>0?m[S]+" "+k:Hr(k,/&\f/g,m[S])))&&(l[C++]=I);return YC(t,e,n,s===0?"rule":o,l,u,d)}function FRe(t,e,n){return YC(t,e,n,"comm",$C(ka),Cv(t,2,-2),0)}function t8(t,e,n,r){return YC(t,e,n,ak,Cv(t,0,r),Cv(t,r+1,-1),r)}function Wh(t,e){for(var n="",r=ik(t),s=0;s<r;s++)n+=e(t[s],s,t,e)||"";return n}function n8(t,e,n,r){switch(t.type){case"@import":case ak:return t.return=t.return||t.value;case"comm":return"";case Yz:return t.return=t.value+"{"+Wh(t.children,r)+"}";case"rule":t.value=t.props.join(",")}return Mu(n=Wh(t.children,r))?t.return=t.value+"{"+n+"}":""}function r8(t){var e=ik(t);return function(n,r,s,a){for(var i="",o=0;o<e;o++)i+=t[o](n,r,s,a)||"";return i}}function DRe(t){return function(e){e.root||(e=e.return)&&t(e)}}function tG(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var RRe=function(t,e,n){for(var r=0,s=0;r=s,s=Xu(),r===38&&s===12&&(e[n]=1),!Ev(s);)yl();return o1(t,Go)},LRe=function(t,e){return eG(function(n,r){var s=-1,a=44;do switch(Ev(a)){case 0:a===38&&Xu()===12&&(r[s]=1),n[s]+=RRe(Go-1,r,s);break;case 2:n[s]+=W2(a);break;case 4:if(a===44){n[++s]=Xu()===58?"&\f":"",r[s]=n[s].length;break}default:n[s]+=$C(a)}while(a=yl());return n}(Zz(t),e))},s8=new WeakMap,URe=function(t){if(t.type==="rule"&&t.parent&&!(t.length<1)){for(var e=t.value,n=t.parent,r=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(!(n=n.parent))return;if((t.props.length!==1||e.charCodeAt(0)===58||s8.get(n))&&!r){s8.set(t,!0);for(var s=[],a=LRe(e,s),i=n.props,o=0,l=0;o<a.length;o++)for(var u=0;u<i.length;u++,l++)t.props[l]=s[o]?a[o].replace(/&\f/g,i[u]):i[u]+" "+a[o]}}},MRe=function(t){if(t.type==="decl"){var e=t.value;e.charCodeAt(0)===108&&e.charCodeAt(2)===98&&(t.return="",t.value="")}};function nG(t,e){switch(function(n,r){return 45^vi(n,0)?(((r<<2^vi(n,0))<<2^vi(n,1))<<2^vi(n,2))<<2^vi(n,3):0}(t,e)){case 5103:return Pr+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Pr+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Pr+t+JM+t+Kl+t+t;case 6828:case 4268:return Pr+t+Kl+t+t;case 6165:return Pr+t+Kl+"flex-"+t+t;case 5187:return Pr+t+Hr(t,/(\w+).+(:[^]+)/,Pr+"box-$1$2-ms-flex-$1$2")+t;case 5443:return Pr+t+Kl+"flex-item-"+Hr(t,/flex-|-self/,"")+t;case 4675:return Pr+t+Kl+"flex-line-pack"+Hr(t,/align-content|flex-|-self/,"")+t;case 5548:return Pr+t+Kl+Hr(t,"shrink","negative")+t;case 5292:return Pr+t+Kl+Hr(t,"basis","preferred-size")+t;case 6060:return Pr+"box-"+Hr(t,"-grow","")+Pr+t+Kl+Hr(t,"grow","positive")+t;case 4554:return Pr+Hr(t,/([^-])(transform)/g,"$1"+Pr+"$2")+t;case 6187:return Hr(Hr(Hr(t,/(zoom-|grab)/,Pr+"$1"),/(image-set)/,Pr+"$1"),t,"")+t;case 5495:case 3959:return Hr(t,/(image-set\([^]*)/,Pr+"$1$`$1");case 4968:return Hr(Hr(t,/(.+:)(flex-)?(.*)/,Pr+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+Pr+t+t;case 4095:case 3583:case 4068:case 2532:return Hr(t,/(.+)-inline(.+)/,Pr+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Mu(t)-1-e>6)switch(vi(t,e+1)){case 109:if(vi(t,e+4)!==45)break;case 102:return Hr(t,/(.+:)(.+)-([^]+)/,"$1"+Pr+"$2-$3$1"+JM+(vi(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~lN(t,"stretch")?nG(Hr(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(vi(t,e+1)!==115)break;case 6444:switch(vi(t,Mu(t)-3-(~lN(t,"!important")&&10))){case 107:return Hr(t,":",":"+Pr)+t;case 101:return Hr(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Pr+(vi(t,14)===45?"inline-":"")+"box$3$1"+Pr+"$2$3$1-ms-$2box$3")+t}break;case 5936:switch(vi(t,e+11)){case 114:return Pr+t+Kl+Hr(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Pr+t+Kl+Hr(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Pr+t+Kl+Hr(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Pr+t+Kl+t+t}return t}var a8,f2,X2=typeof document<"u",PRe=X2?void 0:(a8=function(){return tG(function(){var t={};return function(e){return t[e]}})},f2=new WeakMap,function(t){if(f2.has(t))return f2.get(t);var e=a8(t);return f2.set(t,e),e}),ORe=[function(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case ak:t.return=nG(t.value,t.length);break;case Yz:return Wh([zg(t,{value:Hr(t.value,"@","@"+Pr)})],r);case"rule":if(t.length)return function(s,a){return s.map(a).join("")}(t.props,function(s){switch(function(a,i){return(a=i.exec(a))?a[0]:a}(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Wh([zg(t,{props:[Hr(s,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return Wh([zg(t,{props:[Hr(s,/:(plac\w+)/,":"+Pr+"input-$1")]}),zg(t,{props:[Hr(s,/:(plac\w+)/,":-moz-$1")]}),zg(t,{props:[Hr(s,/:(plac\w+)/,"-ms-input-$1")]})],r)}return""})}}],rG=function(t){var e=t.key;if(X2&&e==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(S){S.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(S),S.setAttribute("data-s",""))})}var r=t.stylisPlugins||ORe,s,a,i={},o=[];X2&&(s=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),function(S){for(var k=S.getAttribute("data-emotion").split(" "),I=1;I<k.length;I++)i[k[I]]=!0;o.push(S)}));var l=[URe,MRe];if(X2){var u,d=[n8,DRe(function(S){u.insert(S)})],h=r8(l.concat(r,d));a=function(S,k,I,F){u=I,Wh(ZM(S?S+"{"+k.styles+"}":k.styles),h),F&&(C.inserted[k.name]=!0)}}else{var m=[n8],p=r8(l.concat(r,m)),y=PRe(r)(e),x=function(S,k){var I=k.name;return y[I]===void 0&&(y[I]=Wh(ZM(S?S+"{"+k.styles+"}":k.styles),p)),y[I]};a=function(S,k,I,F){var U=k.name,R=x(S,k);return C.compat===void 0?(F&&(C.inserted[U]=!0),R):F?void(C.inserted[U]=R):R}}var C={key:e,sheet:new _Re({key:e,container:s,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:a};return C.sheet.hydrate(o),C};function Gr(t,e,n){return t(n={path:e,exports:{},require:function(r,s){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(s==null&&n.path)}},n.exports),n.exports}var ui=typeof Symbol=="function"&&Symbol.for,uN=ui?Symbol.for("react.element"):60103,AN=ui?Symbol.for("react.portal"):60106,J2=ui?Symbol.for("react.fragment"):60107,Z2=ui?Symbol.for("react.strict_mode"):60108,ew=ui?Symbol.for("react.profiler"):60114,tw=ui?Symbol.for("react.provider"):60109,nw=ui?Symbol.for("react.context"):60110,dN=ui?Symbol.for("react.async_mode"):60111,bb=ui?Symbol.for("react.concurrent_mode"):60111,rw=ui?Symbol.for("react.forward_ref"):60112,sw=ui?Symbol.for("react.suspense"):60113,jRe=ui?Symbol.for("react.suspense_list"):60120,aw=ui?Symbol.for("react.memo"):60115,iw=ui?Symbol.for("react.lazy"):60116,QRe=ui?Symbol.for("react.block"):60121,HRe=ui?Symbol.for("react.fundamental"):60117,VRe=ui?Symbol.for("react.responder"):60118,zRe=ui?Symbol.for("react.scope"):60119;function dl(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case uN:switch(t=t.type){case dN:case bb:case J2:case ew:case Z2:case sw:return t;default:switch(t=t&&t.$$typeof){case nw:case rw:case iw:case aw:case tw:return t;default:return e}}case AN:return e}}}function i8(t){return dl(t)===bb}var GRe={AsyncMode:dN,ConcurrentMode:bb,ContextConsumer:nw,ContextProvider:tw,Element:uN,ForwardRef:rw,Fragment:J2,Lazy:iw,Memo:aw,Portal:AN,Profiler:ew,StrictMode:Z2,Suspense:sw,isAsyncMode:function(t){return i8(t)||dl(t)===dN},isConcurrentMode:i8,isContextConsumer:function(t){return dl(t)===nw},isContextProvider:function(t){return dl(t)===tw},isElement:function(t){return typeof t=="object"&&t!==null&&t.$$typeof===uN},isForwardRef:function(t){return dl(t)===rw},isFragment:function(t){return dl(t)===J2},isLazy:function(t){return dl(t)===iw},isMemo:function(t){return dl(t)===aw},isPortal:function(t){return dl(t)===AN},isProfiler:function(t){return dl(t)===ew},isStrictMode:function(t){return dl(t)===Z2},isSuspense:function(t){return dl(t)===sw},isValidElementType:function(t){return typeof t=="string"||typeof t=="function"||t===J2||t===bb||t===ew||t===Z2||t===sw||t===jRe||typeof t=="object"&&t!==null&&(t.$$typeof===iw||t.$$typeof===aw||t.$$typeof===tw||t.$$typeof===nw||t.$$typeof===rw||t.$$typeof===HRe||t.$$typeof===VRe||t.$$typeof===zRe||t.$$typeof===QRe)},typeOf:dl};Gr(function(t,e){});var o8=Gr(function(t){t.exports=GRe}),l8={};l8[o8.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l8[o8.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var fN=typeof document<"u";function sG(t,e,n){var r="";return n.split(" ").forEach(function(s){t[s]!==void 0?e.push(t[s]+";"):r+=s+" "}),r}var ok=function(t,e,n){var r=t.key+"-"+e.name;(n===!1||fN===!1&&t.compat!==void 0)&&t.registered[r]===void 0&&(t.registered[r]=e.styles)},lk=function(t,e,n){ok(t,e,n);var r=t.key+"-"+e.name;if(t.inserted[e.name]===void 0){var s="",a=e;do{var i=t.insert(e===a?"."+r:"",a,t.sheet,!0);fN||i===void 0||(s+=i),a=a.next}while(a!==void 0);if(!fN&&s.length!==0)return s}},qRe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},KRe=/[A-Z]|^ms/g,$Re=/_EMO_([^_]+?)_([^]*?)_EMO_/g,aG=function(t){return t.charCodeAt(1)===45},c8=function(t){return t!=null&&typeof t!="boolean"},qS=tG(function(t){return aG(t)?t:t.replace(KRe,"-$&").toLowerCase()}),u8=function(t,e){switch(t){case"animation":case"animationName":if(typeof e=="string")return e.replace($Re,function(n,r,s){return Pu={name:r,styles:s,next:Pu},r})}return qRe[t]===1||aG(t)||typeof e!="number"||e===0?e:e+"px"};function Mx(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":if(n.anim===1)return Pu={name:n.name,styles:n.styles,next:Pu},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)Pu={name:r.name,styles:r.styles,next:Pu},r=r.next;var s=n.styles+";";return s}return function(l,u,d){var h="";if(Array.isArray(d))for(var m=0;m<d.length;m++)h+=Mx(l,u,d[m])+";";else for(var p in d){var y=d[p];if(typeof y!="object")u!=null&&u[y]!==void 0?h+=p+"{"+u[y]+"}":c8(y)&&(h+=qS(p)+":"+u8(p,y)+";");else if(!Array.isArray(y)||typeof y[0]!="string"||u!=null&&u[y[0]]!==void 0){var x=Mx(l,u,y);switch(p){case"animation":case"animationName":h+=qS(p)+":"+x+";";break;default:h+=p+"{"+x+"}"}}else for(var C=0;C<y.length;C++)c8(y[C])&&(h+=qS(p)+":"+u8(p,y[C])+";")}return h}(t,e,n);case"function":if(t!==void 0){var a=Pu,i=n(t);return Pu=a,Mx(t,e,i)}break}if(e==null)return n;var o=e[n];return o!==void 0?o:n}var Pu,A8=/label:\s*([^\s;\n{]+)\s*(;|$)/g,XC=function(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,s="";Pu=void 0;var a=t[0];a==null||a.raw===void 0?(r=!1,s+=Mx(n,e,a)):s+=a[0];for(var i=1;i<t.length;i++)s+=Mx(n,e,t[i]),r&&(s+=a[i]);A8.lastIndex=0;for(var o,l="";(o=A8.exec(s))!==null;)l+="-"+o[1];var u=function(d){for(var h,m=0,p=0,y=d.length;y>=4;++p,y-=4)h=1540483477*(65535&(h=255&d.charCodeAt(p)|(255&d.charCodeAt(++p))<<8|(255&d.charCodeAt(++p))<<16|(255&d.charCodeAt(++p))<<24))+(59797*(h>>>16)<<16),m=1540483477*(65535&(h^=h>>>24))+(59797*(h>>>16)<<16)^1540483477*(65535&m)+(59797*(m>>>16)<<16);switch(y){case 3:m^=(255&d.charCodeAt(p+2))<<16;case 2:m^=(255&d.charCodeAt(p+1))<<8;case 1:m=1540483477*(65535&(m^=255&d.charCodeAt(p)))+(59797*(m>>>16)<<16)}return(((m=1540483477*(65535&(m^=m>>>13))+(59797*(m>>>16)<<16))^m>>>15)>>>0).toString(36)}(s)+l;return{name:u,styles:s,next:Pu}},WRe=typeof document<"u",YRe=function(t){return t()},iG=!!G.useInsertionEffect&&G.useInsertionEffect,oG=WRe&&iG||YRe,d8=iG||G.useLayoutEffect,ip=typeof document<"u",ck={}.hasOwnProperty,Cb=G.createContext(typeof HTMLElement<"u"?rG({key:"css"}):null);Cb.Provider;var JC=function(t){return G.forwardRef(function(e,n){var r=G.useContext(Cb);return t(e,r,n)})};ip||(JC=function(t){return function(e){var n=G.useContext(Cb);return n===null?(n=rG({key:"css"}),G.createElement(Cb.Provider,{value:n},t(e,n))):t(e,n)}});var uk=G.createContext({}),hN="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",XRe=function(t,e){var n={};for(var r in e)ck.call(e,r)&&(n[r]=e[r]);return n[hN]=t,n},JRe=function(t){var e=t.cache,n=t.serialized,r=t.isStringTag;ok(e,n,r);var s=oG(function(){return lk(e,n,r)});if(!ip&&s!==void 0){for(var a,i=n.name,o=n.next;o!==void 0;)i+=" "+o.name,o=o.next;return G.createElement("style",((a={})["data-emotion"]=e.key+" "+i,a.dangerouslySetInnerHTML={__html:s},a.nonce=e.sheet.nonce,a))}return null},ZRe=JC(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var s=t[hN],a=[r],i="";typeof t.className=="string"?i=sG(e.registered,a,t.className):t.className!=null&&(i=t.className+" ");var o=XC(a,void 0,G.useContext(uk));i+=e.key+"-"+o.name;var l={};for(var u in t)!ck.call(t,u)||u==="css"||u===hN||(l[u]=t[u]);return l.ref=n,l.className=i,G.createElement(G.Fragment,null,G.createElement(JRe,{cache:e,serialized:o,isStringTag:typeof s=="string"}),G.createElement(s,l))});Gr(function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(n[a]=s[a])}return n},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(this,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports});var bn=function(t,e){var n=arguments;if(e==null||!ck.call(e,"css"))return G.createElement.apply(void 0,n);var r=n.length,s=new Array(r);s[0]=ZRe,s[1]=XRe(t,e);for(var a=2;a<r;a++)s[a]=n[a];return G.createElement.apply(null,s)};JC(function(t,e){var n=t.styles,r=XC([n],void 0,G.useContext(uk));if(!ip){for(var s,a=r.name,i=r.styles,o=r.next;o!==void 0;)a+=" "+o.name,i+=o.styles,o=o.next;var l=e.compat===!0,u=e.insert("",{name:a,styles:i},e.sheet,l);return l?null:G.createElement("style",((s={})["data-emotion"]=e.key+"-global "+a,s.dangerouslySetInnerHTML={__html:u},s.nonce=e.sheet.nonce,s))}var d=G.useRef();return d8(function(){var h=e.key+"-global",m=new e.sheet.constructor({key:h,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),p=!1,y=document.querySelector('style[data-emotion="'+h+" "+r.name+'"]');return e.sheet.tags.length&&(m.before=e.sheet.tags[0]),y!==null&&(p=!0,y.setAttribute("data-emotion",h),m.hydrate([y])),d.current=[m,p],function(){m.flush()}},[e]),d8(function(){var h=d.current,m=h[0];if(h[1])h[1]=!1;else{if(r.next!==void 0&&lk(e,r.next,!0),m.tags.length){var p=m.tags[m.tags.length-1].nextElementSibling;m.before=p,m.flush()}e.insert("",r,m,!1)}},[e,r.name]),null});function Ak(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return XC(e)}var eLe=function t(e){for(var n=e.length,r=0,s="";r<n;r++){var a=e[r];if(a!=null){var i=void 0;switch(typeof a){case"boolean":break;case"object":if(Array.isArray(a))i=t(a);else for(var o in i="",a)a[o]&&o&&(i&&(i+=" "),i+=o);break;default:i=a}i&&(s&&(s+=" "),s+=i)}}return s};function tLe(t,e,n){var r=[],s=sG(t,r,n);return r.length<2?n:s+e(r)}var nLe=function(t){var e,n=t.cache,r=t.serializedArr,s=oG(function(){for(var a="",i=0;i<r.length;i++){var o=lk(n,r[i],!1);ip||o===void 0||(a+=o)}if(!ip)return a});return ip||s.length===0?null:G.createElement("style",((e={})["data-emotion"]=n.key+" "+r.map(function(a){return a.name}).join(" "),e.dangerouslySetInnerHTML={__html:s},e.nonce=n.sheet.nonce,e))};JC(function(t,e){var n=[],r=function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];var u=XC(o,e.registered);return n.push(u),ok(e,u,!1),e.key+"-"+u.name},s={css:r,cx:function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return tLe(e.registered,r,eLe(o))},theme:G.useContext(uk)},a=t.children(s);return G.createElement(G.Fragment,null,G.createElement(nLe,{cache:e,serializedArr:n}),a)});function ri(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,r){var s=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(s!=null){var a,i,o,l,u=[],d=!0,h=!1;try{if(o=(s=s.call(n)).next,r===0){if(Object(s)!==s)return;d=!1}else for(;!(d=(a=o.call(s)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(m){h=!0,i=m}finally{try{if(!d&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(h)throw i}}return u}}(t,e)||Wz(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ou(t,e){if(t==null)return{};var n,r,s=function(i,o){if(i==null)return{};var l,u,d={},h=Object.keys(i);for(u=0;u<h.length;u++)l=h[u],o.indexOf(l)>=0||(d[l]=i[l]);return d}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function YA(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function lG(t){return YA(t).getComputedStyle(t)}const h2=Math.round;function cG(t){return AG(t)?(t.nodeName||"").toLowerCase():""}let m2;function uG(t){return t instanceof YA(t).HTMLElement}function ow(t){return t instanceof YA(t).Element}function AG(t){return t instanceof YA(t).Node}function f8(t){return typeof ShadowRoot>"u"?!1:t instanceof YA(t).ShadowRoot||t instanceof ShadowRoot}function dG(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=lG(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function rLe(){return/^((?!chrome|android).)*safari/i.test(function(){if(m2)return m2;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(m2=t.brands.map(e=>e.brand+"/"+e.version).join(" "),m2):navigator.userAgent}())}function fG(t){return ow(t)?t:t.contextElement}const hG={x:1,y:1};function h8(t){const e=fG(t);if(!uG(e))return hG;const n=e.getBoundingClientRect(),{width:r,height:s,fallback:a}=function(l){const u=lG(l);let d=parseFloat(u.width),h=parseFloat(u.height);const m=l.offsetWidth,p=l.offsetHeight,y=h2(d)!==m||h2(h)!==p;return y&&(d=m,h=p),{width:d,height:h,fallback:y}}(e);let i=(a?h2(n.width):n.width)/r,o=(a?h2(n.height):n.height)/s;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}function m8(t,e,n,r){var s,a;e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=fG(t);let l=hG;e&&(l=h8(t));const u=o?YA(o):window,d=rLe()&&n;let h=(i.left+(d&&((s=u.visualViewport)==null?void 0:s.offsetLeft)||0))/l.x,m=(i.top+(d&&((a=u.visualViewport)==null?void 0:a.offsetTop)||0))/l.y,p=i.width/l.x,y=i.height/l.y;if(o){const x=YA(o),C=r;let S=x.frameElement;for(;S&&r&&C!==x;){const k=h8(S),I=S.getBoundingClientRect(),F=getComputedStyle(S);I.x+=(S.clientLeft+parseFloat(F.paddingLeft))*k.x,I.y+=(S.clientTop+parseFloat(F.paddingTop))*k.y,h*=k.x,m*=k.y,p*=k.x,y*=k.y,h+=I.x,m+=I.y,S=YA(S).frameElement}}return{width:p,height:y,top:m,right:h+p,bottom:m+y,left:h,x:h,y:m}}function sLe(t){if(cG(t)==="html")return t;const e=t.assignedSlot||t.parentNode||f8(t)&&t.host||function(n){return((AG(n)?n.ownerDocument:n.document)||window.document).documentElement}(t);return f8(e)?e.host:e}function mG(t){const e=sLe(t);return function(n){return["html","body","#document"].includes(cG(n))}(e)?e.ownerDocument.body:uG(e)&&dG(e)?e:mG(e)}function lw(t,e){var n;e===void 0&&(e=[]);const r=mG(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),a=YA(r);return s?e.concat(a,a.visualViewport||[],dG(r)?r:[]):e.concat(r,lw(r))}var mN=typeof document<"u"?G.useLayoutEffect:G.useEffect,aLe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Eb=function(){};function iLe(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function oLe(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];var a=[].concat(r);if(e&&t)for(var i in e)e.hasOwnProperty(i)&&e[i]&&a.push("".concat(iLe(t,i)));return a.filter(function(o){return o}).map(function(o){return String(o).trim()}).join(" ")}var p8=function(t){return e=t,Array.isArray(e)?t.filter(Boolean):$h(t)==="object"&&t!==null?[t]:[];var e},g8=function(t){return t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme,pn({},Ou(t,aLe))},$s=function(t,e,n){var r=t.cx,s=t.getStyles,a=t.getClassNames,i=t.className;return{css:s(e,t),className:r(n??{},a(e,t),i)}};function ZC(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function pG(t){return ZC(t)?window.pageYOffset:t.scrollTop}function _b(t,e){ZC(t)?window.scrollTo(0,e):t.scrollTop=e}function lLe(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e}function p2(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Eb,s=pG(t),a=e-s,i=10,o=0;function l(){var u=lLe(o+=i,s,a,n);_b(t,u),o<n?window.requestAnimationFrame(l):r(t)}l()}function x8(t,e){var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),s=e.offsetHeight/3;r.bottom+s>n.bottom?_b(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+s,t.scrollHeight)):r.top-s<n.top&&_b(t,Math.max(e.offsetTop-s,0))}function v8(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var gG=!1,cLe={get passive(){return gG=!0}},g2=typeof window<"u"?window:{};g2.addEventListener&&g2.removeEventListener&&(g2.addEventListener("p",Eb,cLe),g2.removeEventListener("p",Eb,!1));var uLe=gG;function ALe(t){return t!=null}function x2(t,e,n){return t?e:n}var dLe=["children","innerProps"],fLe=["children","innerProps"];function hLe(t){var e=t.maxHeight,n=t.menuEl,r=t.minHeight,s=t.placement,a=t.shouldScroll,i=t.isFixedPosition,o=t.controlHeight,l=function(te){var Y=getComputedStyle(te),ne=Y.position==="absolute",V=/(auto|scroll)/;if(Y.position==="fixed")return document.documentElement;for(var J=te;J=J.parentElement;)if(Y=getComputedStyle(J),(!ne||Y.position!=="static")&&V.test(Y.overflow+Y.overflowY+Y.overflowX))return J;return document.documentElement}(n),u={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return u;var d,h=l.getBoundingClientRect().height,m=n.getBoundingClientRect(),p=m.bottom,y=m.height,x=m.top,C=n.offsetParent.getBoundingClientRect().top,S=i||ZC(d=l)?window.innerHeight:d.clientHeight,k=pG(l),I=parseInt(getComputedStyle(n).marginBottom,10),F=parseInt(getComputedStyle(n).marginTop,10),U=C-F,R=S-x,E=U+k,_=h-k-x,B=p-S+k+I,j=k+x-F,D=160;switch(s){case"auto":case"bottom":if(R>=y)return{placement:"bottom",maxHeight:e};if(_>=y&&!i)return a&&p2(l,B,D),{placement:"bottom",maxHeight:e};if(!i&&_>=r||i&&R>=r)return a&&p2(l,B,D),{placement:"bottom",maxHeight:i?R-I:_-I};if(s==="auto"||i){var L=e,Q=i?U:E;return Q>=r&&(L=Math.min(Q-I-o,e)),{placement:"top",maxHeight:L}}if(s==="bottom")return a&&_b(l,B),{placement:"bottom",maxHeight:e};break;case"top":if(U>=y)return{placement:"top",maxHeight:e};if(E>=y&&!i)return a&&p2(l,j,D),{placement:"top",maxHeight:e};if(!i&&E>=r||i&&U>=r){var H=e;return(!i&&E>=r||i&&U>=r)&&(H=i?U-F:E-F),a&&p2(l,j,D),{placement:"top",maxHeight:H}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return u}var y8,xG=function(t){return t==="auto"?"bottom":t},vG=G.createContext(null),mLe=function(t){var e=t.children,n=t.minMenuHeight,r=t.maxMenuHeight,s=t.menuPlacement,a=t.menuPosition,i=t.menuShouldScrollIntoView,o=t.theme,l=(G.useContext(vG)||{}).setPortalPlacement,u=G.useRef(null),d=ri(G.useState(r),2),h=d[0],m=d[1],p=ri(G.useState(null),2),y=p[0],x=p[1],C=o.spacing.controlHeight;return mN(function(){var S=u.current;if(S){var k=a==="fixed",I=hLe({maxHeight:r,menuEl:S,minHeight:n,placement:s,shouldScroll:i&&!k,isFixedPosition:k,controlHeight:C});m(I.maxHeight),x(I.placement),l==null||l(I.placement)}},[r,s,a,i,n,l,C]),e({ref:u,placerProps:pn(pn({},t),{},{placement:y||xG(s),maxHeight:h})})},pLe=function(t){var e=t.children,n=t.innerRef,r=t.innerProps;return bn("div",Bn({},$s(t,"menu",{menu:!0}),{ref:n},r),e)},yG=function(t,e){var n=t.theme,r=n.spacing.baseUnit,s=n.colors;return pn({textAlign:"center"},e?{}:{color:s.neutral40,padding:"".concat(2*r,"px ").concat(3*r,"px")})},gLe=yG,xLe=yG,vLe=["size"],yLe=["innerProps","isRtl","size"],KS,$S,wLe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},wG=function(t){var e=t.size,n=Ou(t,vLe);return bn("svg",Bn({height:e,width:e,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:wLe},n))},WS=function(t){return bn(wG,Bn({size:20},t),bn("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},w8=function(t){return bn(wG,Bn({size:20},t),bn("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},bG=function(t,e){var n=t.isFocused,r=t.theme,s=r.spacing.baseUnit,a=r.colors;return pn({label:"indicatorContainer",display:"flex",transition:"color 150ms"},e?{}:{color:n?a.neutral60:a.neutral20,padding:2*s,":hover":{color:n?a.neutral80:a.neutral40}})},bLe=bG,CLe=bG,ELe=function(){var t=Ak.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(y8||(KS=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],$S||($S=KS.slice(0)),y8=Object.freeze(Object.defineProperties(KS,{raw:{value:Object.freeze($S)}})))),YS=function(t){var e=t.delay,n=t.offset;return bn("span",{css:Ak({animation:"".concat(ELe," 1s ease-in-out ").concat(e,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},_Le=function(t){var e=t.children,n=t.isDisabled,r=t.isFocused,s=t.innerRef,a=t.innerProps,i=t.menuIsOpen;return bn("div",Bn({ref:s},$s(t,"control",{control:!0,"control--is-disabled":n,"control--is-focused":r,"control--menu-is-open":i}),a,{"aria-disabled":n||void 0}),e)},SLe=["data"],TLe=function(t){var e=t.children,n=t.cx,r=t.getStyles,s=t.getClassNames,a=t.Heading,i=t.headingProps,o=t.innerProps,l=t.label,u=t.theme,d=t.selectProps;return bn("div",Bn({},$s(t,"group",{group:!0}),o),bn(a,Bn({},i,{selectProps:d,theme:u,getStyles:r,getClassNames:s,cx:n}),l),bn("div",null,e))},NLe=["innerRef","isDisabled","isHidden","inputClassName"],CG={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},BLe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":pn({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},CG)},kLe=function(t){return pn({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},CG)},b8=function(t){var e=t.children,n=t.innerProps;return bn("div",n,e)},ILe=function(t){var e=t.children,n=t.components,r=t.data,s=t.innerProps,a=t.isDisabled,i=t.removeProps,o=t.selectProps,l=n.Container,u=n.Label,d=n.Remove;return bn(l,{data:r,innerProps:pn(pn({},$s(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":a})),s),selectProps:o},bn(u,{data:r,innerProps:pn({},$s(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:o},e),bn(d,{data:r,innerProps:pn(pn({},$s(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(e||"option")},i),selectProps:o}))},FLe={ClearIndicator:function(t){var e=t.children,n=t.innerProps;return bn("div",Bn({},$s(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),e||bn(WS,null))},Control:_Le,DropdownIndicator:function(t){var e=t.children,n=t.innerProps;return bn("div",Bn({},$s(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),e||bn(w8,null))},DownChevron:w8,CrossIcon:WS,Group:TLe,GroupHeading:function(t){var e=g8(t);e.data;var n=Ou(e,SLe);return bn("div",Bn({},$s(t,"groupHeading",{"group-heading":!0}),n))},IndicatorsContainer:function(t){var e=t.children,n=t.innerProps;return bn("div",Bn({},$s(t,"indicatorsContainer",{indicators:!0}),n),e)},IndicatorSeparator:function(t){var e=t.innerProps;return bn("span",Bn({},e,$s(t,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(t){var e=t.cx,n=t.value,r=g8(t),s=r.innerRef,a=r.isDisabled,i=r.isHidden,o=r.inputClassName,l=Ou(r,NLe);return bn("div",Bn({},$s(t,"input",{"input-container":!0}),{"data-value":n||""}),bn("input",Bn({className:e({input:!0},o),ref:s,style:kLe(i),disabled:a},l)))},LoadingIndicator:function(t){var e=t.innerProps,n=t.isRtl,r=t.size,s=r===void 0?4:r,a=Ou(t,yLe);return bn("div",Bn({},$s(pn(pn({},a),{},{innerProps:e,isRtl:n,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),e),bn(YS,{delay:0,offset:n}),bn(YS,{delay:160,offset:!0}),bn(YS,{delay:320,offset:!n}))},Menu:pLe,MenuList:function(t){var e=t.children,n=t.innerProps,r=t.innerRef,s=t.isMulti;return bn("div",Bn({},$s(t,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:r},n),e)},MenuPortal:function(t){var e=t.appendTo,n=t.children,r=t.controlElement,s=t.innerProps,a=t.menuPlacement,i=t.menuPosition,o=G.useRef(null),l=G.useRef(null),u=ri(G.useState(xG(a)),2),d=u[0],h=u[1],m=G.useMemo(function(){return{setPortalPlacement:h}},[]),p=ri(G.useState(null),2),y=p[0],x=p[1],C=G.useCallback(function(){if(r){var F=function(E){var _=E.getBoundingClientRect();return{bottom:_.bottom,height:_.height,left:_.left,right:_.right,top:_.top,width:_.width}}(r),U=i==="fixed"?0:window.pageYOffset,R=F[d]+U;R===(y==null?void 0:y.offset)&&F.left===(y==null?void 0:y.rect.left)&&F.width===(y==null?void 0:y.rect.width)||x({offset:R,rect:F})}},[r,i,d,y==null?void 0:y.offset,y==null?void 0:y.rect.left,y==null?void 0:y.rect.width]);mN(function(){C()},[C]);var S=G.useCallback(function(){typeof l.current=="function"&&(l.current(),l.current=null),r&&o.current&&(l.current=function(F,U,R,E){E===void 0&&(E={});const{ancestorScroll:_=!0,ancestorResize:B=!0,elementResize:j=!0,animationFrame:D=!1}=E,L=_&&!D,Q=L||B?[...ow(F)?lw(F):F.contextElement?lw(F.contextElement):[],...lw(U)]:[];Q.forEach(ne=>{L&&ne.addEventListener("scroll",R,{passive:!0}),B&&ne.addEventListener("resize",R)});let H,te=null;if(j){let ne=!0;te=new ResizeObserver(()=>{ne||R(),ne=!1}),ow(F)&&!D&&te.observe(F),ow(F)||!F.contextElement||D||te.observe(F.contextElement),te.observe(U)}let Y=D?m8(F):null;return D&&function ne(){const V=m8(F);!Y||V.x===Y.x&&V.y===Y.y&&V.width===Y.width&&V.height===Y.height||R(),Y=V,H=requestAnimationFrame(ne)}(),R(),()=>{var ne;Q.forEach(V=>{L&&V.removeEventListener("scroll",R),B&&V.removeEventListener("resize",R)}),(ne=te)==null||ne.disconnect(),te=null,D&&cancelAnimationFrame(H)}}(r,o.current,C,{elementResize:"ResizeObserver"in window}))},[r,C]);mN(function(){S()},[S]);var k=G.useCallback(function(F){o.current=F,S()},[S]);if(!e&&i!=="fixed"||!y)return null;var I=bn("div",Bn({ref:k},$s(pn(pn({},t),{},{offset:y.offset,position:i,rect:y.rect}),"menuPortal",{"menu-portal":!0}),s),n);return bn(vG.Provider,{value:m},e?YIe.createPortal(I,e):I)},LoadingMessage:function(t){var e=t.children,n=e===void 0?"Loading...":e,r=t.innerProps,s=Ou(t,fLe);return bn("div",Bn({},$s(pn(pn({},s),{},{children:n,innerProps:r}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),r),n)},NoOptionsMessage:function(t){var e=t.children,n=e===void 0?"No options":e,r=t.innerProps,s=Ou(t,dLe);return bn("div",Bn({},$s(pn(pn({},s),{},{children:n,innerProps:r}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),r),n)},MultiValue:ILe,MultiValueContainer:b8,MultiValueLabel:b8,MultiValueRemove:function(t){var e=t.children,n=t.innerProps;return bn("div",Bn({role:"button"},n),e||bn(WS,{size:14}))},Option:function(t){var e=t.children,n=t.isDisabled,r=t.isFocused,s=t.isSelected,a=t.innerRef,i=t.innerProps;return bn("div",Bn({},$s(t,"option",{option:!0,"option--is-disabled":n,"option--is-focused":r,"option--is-selected":s}),{ref:a,"aria-disabled":n},i),e)},Placeholder:function(t){var e=t.children,n=t.innerProps;return bn("div",Bn({},$s(t,"placeholder",{placeholder:!0}),n),e)},SelectContainer:function(t){var e=t.children,n=t.innerProps,r=t.isDisabled,s=t.isRtl;return bn("div",Bn({},$s(t,"container",{"--is-disabled":r,"--is-rtl":s}),n),e)},SingleValue:function(t){var e=t.children,n=t.isDisabled,r=t.innerProps;return bn("div",Bn({},$s(t,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),r),e)},ValueContainer:function(t){var e=t.children,n=t.innerProps,r=t.isMulti,s=t.hasValue;return bn("div",Bn({},$s(t,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":s}),n),e)}},C8=Number.isNaN||function(t){return typeof t=="number"&&t!=t};function DLe(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(r=t[n],s=e[n],!(r===s||C8(r)&&C8(s)))return!1;var r,s;return!0}for(var RLe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},E8=function(t){return bn("span",Bn({css:RLe},t))},LLe={guidance:function(t){var e=t.isSearchable,n=t.isMulti,r=t.tabSelectsValue,s=t.context,a=t.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(r?", press Tab to select the option and exit the menu":"",".");case"input":return a?"".concat(t["aria-label"]||"Select"," is focused ").concat(e?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var e=t.action,n=t.label,r=n===void 0?"":n,s=t.labels,a=t.isDisabled;switch(e){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return"option ".concat(r,a?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(t){var e=t.context,n=t.focused,r=t.options,s=t.label,a=s===void 0?"":s,i=t.selectValue,o=t.isDisabled,l=t.isSelected,u=t.isAppleDevice,d=function(p,y){return p&&p.length?"".concat(p.indexOf(y)+1," of ").concat(p.length):""};if(e==="value"&&i)return"value ".concat(a," focused, ").concat(d(i,n),".");if(e==="menu"&&u){var h=o?" disabled":"",m="".concat(l?" selected":"").concat(h);return"".concat(a).concat(m,", ").concat(d(r,n),".")}return""},onFilter:function(t){var e=t.inputValue,n=t.resultsMessage;return"".concat(n).concat(e?" for search term "+e:"",".")}},ULe=function(t){var e=t.ariaSelection,n=t.focusedOption,r=t.focusedValue,s=t.focusableOptions,a=t.isFocused,i=t.selectValue,o=t.selectProps,l=t.id,u=t.isAppleDevice,d=o.ariaLiveMessages,h=o.getOptionLabel,m=o.inputValue,p=o.isMulti,y=o.isOptionDisabled,x=o.isSearchable,C=o.menuIsOpen,S=o.options,k=o.screenReaderStatus,I=o.tabSelectsValue,F=o.isLoading,U=o["aria-label"],R=o["aria-live"],E=G.useMemo(function(){return pn(pn({},LLe),d||{})},[d]),_=G.useMemo(function(){var H,te="";if(e&&E.onChange){var Y=e.option,ne=e.options,V=e.removedValue,J=e.removedValues,K=e.value,ie=V||Y||(H=K,Array.isArray(H)?null:H),O=ie?h(ie):"",W=ne||J||void 0,Z=W?W.map(h):[],re=pn({isDisabled:ie&&y(ie,i),label:O,labels:Z},e);te=E.onChange(re)}return te},[e,E,y,i,h]),B=G.useMemo(function(){var H="",te=n||r,Y=!!(n&&i&&i.includes(n));if(te&&E.onFocus){var ne={focused:te,label:h(te),isDisabled:y(te,i),isSelected:Y,options:s,context:te===n?"menu":"value",selectValue:i,isAppleDevice:u};H=E.onFocus(ne)}return H},[n,r,h,y,E,s,i,u]),j=G.useMemo(function(){var H="";if(C&&S.length&&!F&&E.onFilter){var te=k({count:s.length});H=E.onFilter({inputValue:m,resultsMessage:te})}return H},[s,m,C,E,S,k,F]),D=(e==null?void 0:e.action)==="initial-input-focus",L=G.useMemo(function(){var H="";if(E.guidance){var te=r?"value":C?"menu":"input";H=E.guidance({"aria-label":U,context:te,isDisabled:n&&y(n,i),isMulti:p,isSearchable:x,tabSelectsValue:I,isInitialFocus:D})}return H},[U,n,r,p,y,x,C,E,i,I,D]),Q=bn(G.Fragment,null,bn("span",{id:"aria-selection"},_),bn("span",{id:"aria-focused"},B),bn("span",{id:"aria-results"},j),bn("span",{id:"aria-guidance"},L));return bn(G.Fragment,null,bn(E8,{id:l},D&&Q),bn(E8,{"aria-live":R,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},a&&!D&&Q))},XS=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],MLe=new RegExp("["+XS.map(function(t){return t.letters}).join("")+"]","g"),EG={},JS=0;JS<XS.length;JS++)for(var ZS=XS[JS],e5=0;e5<ZS.letters.length;e5++)EG[ZS.letters[e5]]=ZS.base;var _G=function(t){return t.replace(MLe,function(e){return EG[e]})},PLe=function(t,e){e===void 0&&(e=DLe);var n=null;function r(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];if(n&&n.lastThis===this&&e(s,n.lastArgs))return n.lastResult;var i=t.apply(this,s);return n={lastResult:i,lastArgs:s,lastThis:this},i}return r.clear=function(){n=null},r}(_G),_8=function(t){return t.replace(/^\s+|\s+$/g,"")},OLe=function(t){return"".concat(t.label," ").concat(t.value)},jLe=["innerRef"];function QLe(t){var e=t.innerRef,n=function(r){for(var s=arguments.length,a=new Array(s>1?s-1:0),i=1;i<s;i++)a[i-1]=arguments[i];var o=Object.entries(r).filter(function(l){var u=ri(l,1)[0];return!a.includes(u)});return o.reduce(function(l,u){var d=ri(u,2),h=d[0],m=d[1];return l[h]=m,l},{})}(Ou(t,jLe),"onExited","in","enter","exit","appear");return bn("input",Bn({ref:e},n,{css:Ak({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var S8=["boxSizing","height","overflow","paddingRight","position"],T8={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function N8(t){t.preventDefault()}function B8(t){t.stopPropagation()}function k8(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function I8(){return"ontouchstart"in window||navigator.maxTouchPoints}var F8=!(typeof window>"u"||!window.document||!window.document.createElement),Gg=0,vm={capture:!1,passive:!1},HLe=function(t){var e=t.target;return e.ownerDocument.activeElement&&e.ownerDocument.activeElement.blur()},VLe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function zLe(t){var e=t.children,n=t.lockEnabled,r=t.captureEnabled,s=function(i){var o=i.isEnabled,l=i.onBottomArrive,u=i.onBottomLeave,d=i.onTopArrive,h=i.onTopLeave,m=G.useRef(!1),p=G.useRef(!1),y=G.useRef(0),x=G.useRef(null),C=G.useCallback(function(R,E){if(x.current!==null){var _=x.current,B=_.scrollTop,j=_.scrollHeight,D=_.clientHeight,L=x.current,Q=E>0,H=j-D-B,te=!1;H>E&&m.current&&(u&&u(R),m.current=!1),Q&&p.current&&(h&&h(R),p.current=!1),Q&&E>H?(l&&!m.current&&l(R),L.scrollTop=j,te=!0,m.current=!0):!Q&&-E>B&&(d&&!p.current&&d(R),L.scrollTop=0,te=!0,p.current=!0),te&&function(Y){Y.cancelable&&Y.preventDefault(),Y.stopPropagation()}(R)}},[l,u,d,h]),S=G.useCallback(function(R){C(R,R.deltaY)},[C]),k=G.useCallback(function(R){y.current=R.changedTouches[0].clientY},[]),I=G.useCallback(function(R){var E=y.current-R.changedTouches[0].clientY;C(R,E)},[C]),F=G.useCallback(function(R){if(R){var E=!!uLe&&{passive:!1};R.addEventListener("wheel",S,E),R.addEventListener("touchstart",k,E),R.addEventListener("touchmove",I,E)}},[I,k,S]),U=G.useCallback(function(R){R&&(R.removeEventListener("wheel",S,!1),R.removeEventListener("touchstart",k,!1),R.removeEventListener("touchmove",I,!1))},[I,k,S]);return G.useEffect(function(){if(o){var R=x.current;return F(R),function(){U(R)}}},[o,F,U]),function(R){x.current=R}}({isEnabled:r===void 0||r,onBottomArrive:t.onBottomArrive,onBottomLeave:t.onBottomLeave,onTopArrive:t.onTopArrive,onTopLeave:t.onTopLeave}),a=function(i){var o=i.isEnabled,l=i.accountForScrollbars,u=l===void 0||l,d=G.useRef({}),h=G.useRef(null),m=G.useCallback(function(y){if(F8){var x=document.body,C=x&&x.style;if(u&&S8.forEach(function(F){var U=C&&C[F];d.current[F]=U}),u&&Gg<1){var S=parseInt(d.current.paddingRight,10)||0,k=document.body?document.body.clientWidth:0,I=window.innerWidth-k+S||0;Object.keys(T8).forEach(function(F){var U=T8[F];C&&(C[F]=U)}),C&&(C.paddingRight="".concat(I,"px"))}x&&I8()&&(x.addEventListener("touchmove",N8,vm),y&&(y.addEventListener("touchstart",k8,vm),y.addEventListener("touchmove",B8,vm))),Gg+=1}},[u]),p=G.useCallback(function(y){if(F8){var x=document.body,C=x&&x.style;Gg=Math.max(Gg-1,0),u&&Gg<1&&S8.forEach(function(S){var k=d.current[S];C&&(C[S]=k)}),x&&I8()&&(x.removeEventListener("touchmove",N8,vm),y&&(y.removeEventListener("touchstart",k8,vm),y.removeEventListener("touchmove",B8,vm)))}},[u]);return G.useEffect(function(){if(o){var y=h.current;return m(y),function(){p(y)}}},[o,m,p]),function(y){h.current=y}}({isEnabled:n});return bn(G.Fragment,null,n&&bn("div",{onClick:HLe,css:VLe}),e(function(i){s(i),a(i)}))}var GLe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},qLe=function(t){var e=t.name,n=t.onFocus;return bn("input",{required:!0,name:e,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:GLe,value:"",onChange:function(){}})};function pN(t){var e;return typeof window<"u"&&window.navigator!=null&&t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform)}function SG(){return pN(/^Mac/i)}function KLe(){return pN(/^iPhone/i)||pN(/^iPad/i)||SG()&&navigator.maxTouchPoints>1}var $Le,WLe={clearIndicator:CLe,container:function(t){var e=t.isDisabled;return{label:"container",direction:t.isRtl?"rtl":void 0,pointerEvents:e?"none":void 0,position:"relative"}},control:function(t,e){var n=t.isDisabled,r=t.isFocused,s=t.theme,a=s.colors,i=s.borderRadius;return pn({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:s.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},e?{}:{backgroundColor:n?a.neutral5:a.neutral0,borderColor:n?a.neutral10:r?a.primary:a.neutral20,borderRadius:i,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(a.primary):void 0,"&:hover":{borderColor:r?a.primary:a.neutral30}})},dropdownIndicator:bLe,group:function(t,e){var n=t.theme.spacing;return e?{}:{paddingBottom:2*n.baseUnit,paddingTop:2*n.baseUnit}},groupHeading:function(t,e){var n=t.theme,r=n.colors,s=n.spacing;return pn({label:"group",cursor:"default",display:"block"},e?{}:{color:r.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*s.baseUnit,paddingRight:3*s.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(t,e){var n=t.isDisabled,r=t.theme,s=r.spacing.baseUnit,a=r.colors;return pn({label:"indicatorSeparator",alignSelf:"stretch",width:1},e?{}:{backgroundColor:n?a.neutral10:a.neutral20,marginBottom:2*s,marginTop:2*s})},input:function(t,e){var n=t.isDisabled,r=t.value,s=t.theme,a=s.spacing,i=s.colors;return pn(pn({visibility:n?"hidden":"visible",transform:r?"translateZ(0)":""},BLe),e?{}:{margin:a.baseUnit/2,paddingBottom:a.baseUnit/2,paddingTop:a.baseUnit/2,color:i.neutral80})},loadingIndicator:function(t,e){var n=t.isFocused,r=t.size,s=t.theme,a=s.colors,i=s.spacing.baseUnit;return pn({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"},e?{}:{color:n?a.neutral60:a.neutral20,padding:2*i})},loadingMessage:xLe,menu:function(t,e){var n,r=t.placement,s=t.theme,a=s.borderRadius,i=s.spacing,o=s.colors;return pn((Mm(n={label:"menu"},function(l){return l?{bottom:"top",top:"bottom"}[l]:"bottom"}(r),"100%"),Mm(n,"position","absolute"),Mm(n,"width","100%"),Mm(n,"zIndex",1),n),e?{}:{backgroundColor:o.neutral0,borderRadius:a,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:i.menuGutter,marginTop:i.menuGutter})},menuList:function(t,e){var n=t.maxHeight,r=t.theme.spacing.baseUnit;return pn({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},e?{}:{paddingBottom:r,paddingTop:r})},menuPortal:function(t){var e=t.rect,n=t.offset,r=t.position;return{left:e.left,position:r,top:n,width:e.width,zIndex:1}},multiValue:function(t,e){var n=t.theme,r=n.spacing,s=n.borderRadius,a=n.colors;return pn({label:"multiValue",display:"flex",minWidth:0},e?{}:{backgroundColor:a.neutral10,borderRadius:s/2,margin:r.baseUnit/2})},multiValueLabel:function(t,e){var n=t.theme,r=n.borderRadius,s=n.colors,a=t.cropWithEllipsis;return pn({overflow:"hidden",textOverflow:a||a===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},e?{}:{borderRadius:r/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(t,e){var n=t.theme,r=n.spacing,s=n.borderRadius,a=n.colors,i=t.isFocused;return pn({alignItems:"center",display:"flex"},e?{}:{borderRadius:s/2,backgroundColor:i?a.dangerLight:void 0,paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:a.dangerLight,color:a.danger}})},noOptionsMessage:gLe,option:function(t,e){var n=t.isDisabled,r=t.isFocused,s=t.isSelected,a=t.theme,i=a.spacing,o=a.colors;return pn({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},e?{}:{backgroundColor:s?o.primary:r?o.primary25:"transparent",color:n?o.neutral20:s?o.neutral0:"inherit",padding:"".concat(2*i.baseUnit,"px ").concat(3*i.baseUnit,"px"),":active":{backgroundColor:n?void 0:s?o.primary:o.primary50}})},placeholder:function(t,e){var n=t.theme,r=n.spacing,s=n.colors;return pn({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},e?{}:{color:s.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},singleValue:function(t,e){var n=t.isDisabled,r=t.theme,s=r.spacing,a=r.colors;return pn({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e?{}:{color:n?a.neutral40:a.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},valueContainer:function(t,e){var n=t.theme.spacing,r=t.isMulti,s=t.hasValue,a=t.selectProps.controlShouldRenderValue;return pn({alignItems:"center",display:r&&s&&a?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},e?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(2*n.baseUnit,"px")})}},t5={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},YLe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:v8(),captureMenuScroll:!v8(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(t,e){if(t.data.__isNew__)return!0;var n=pn({ignoreCase:!0,ignoreAccents:!0,stringify:OLe,trim:!0,matchFrom:"any"},$Le),r=n.ignoreCase,s=n.ignoreAccents,a=n.stringify,i=n.trim,o=n.matchFrom,l=i?_8(e):e,u=i?_8(a(t)):a(t);return r&&(l=l.toLowerCase(),u=u.toLowerCase()),s&&(l=PLe(l),u=_G(u)),o==="start"?u.substr(0,l.length)===l:u.indexOf(l)>-1},formatGroupLabel:function(t){return t.label},getOptionLabel:function(t){return t.label},getOptionValue:function(t){return t.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(t){return!!t.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var e=t.count;return"".concat(e," result").concat(e!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function D8(t,e,n,r){return{type:"option",data:e,isDisabled:NG(t,e,n),isSelected:BG(t,e,n),label:TG(t,e),value:Sb(t,e),index:r}}function v2(t,e){return t.options.map(function(n,r){if("options"in n){var s=n.options.map(function(i,o){return D8(t,i,e,o)}).filter(function(i){return U8(t,i)});return s.length>0?{type:"group",data:n,options:s,index:r}:void 0}var a=D8(t,n,e,r);return U8(t,a)?a:void 0}).filter(ALe)}function R8(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,sk(n.options.map(function(r){return r.data}))):e.push(n.data),e},[])}function L8(t,e){return t.reduce(function(n,r){return r.type==="group"?n.push.apply(n,sk(r.options.map(function(s){return{data:s.data,id:"".concat(e,"-").concat(r.index,"-").concat(s.index)}}))):n.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),n},[])}function U8(t,e){var n=t.inputValue,r=n===void 0?"":n,s=e.data,a=e.isSelected,i=e.label,o=e.value;return(!IG(t)||!a)&&kG(t,{label:i,value:o,data:s},r)}var n5=function(t,e){var n;return((n=t.find(function(r){return r.data===e}))===null||n===void 0?void 0:n.id)||null},TG=function(t,e){return t.getOptionLabel(e)},Sb=function(t,e){return t.getOptionValue(e)};function NG(t,e,n){return typeof t.isOptionDisabled=="function"&&t.isOptionDisabled(e,n)}function BG(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var r=Sb(t,e);return n.some(function(s){return Sb(t,s)===r})}function kG(t,e,n){return!t.filterOption||t.filterOption(e,n)}var IG=function(t){var e=t.hideSelectedOptions,n=t.isMulti;return e===void 0?n:e},XLe=1,FG=function(t){(function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),o&&iN(i,o)})(a,G.Component);var e,n,r,s=ERe(a);function a(i){var o;if(function(h,m){if(!(h instanceof m))throw new TypeError("Cannot call a class as a function")}(this,a),(o=s.call(this,i)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},o.blockOptionHover=!1,o.isComposing=!1,o.commonProps=void 0,o.initialTouchX=0,o.initialTouchY=0,o.openAfterFocus=!1,o.scrollToFocusedOptionOnUpdate=!1,o.userIsDragging=void 0,o.isAppleDevice=SG()||KLe(),o.controlRef=null,o.getControlRef=function(h){o.controlRef=h},o.focusedOptionRef=null,o.getFocusedOptionRef=function(h){o.focusedOptionRef=h},o.menuListRef=null,o.getMenuListRef=function(h){o.menuListRef=h},o.inputRef=null,o.getInputRef=function(h){o.inputRef=h},o.focus=o.focusInput,o.blur=o.blurInput,o.onChange=function(h,m){var p=o.props,y=p.onChange,x=p.name;m.name=x,o.ariaOnChange(h,m),y(h,m)},o.setValue=function(h,m,p){var y=o.props,x=y.closeMenuOnSelect,C=y.isMulti,S=y.inputValue;o.onInputChange("",{action:"set-value",prevInputValue:S}),x&&(o.setState({inputIsHiddenAfterUpdate:!C}),o.onMenuClose()),o.setState({clearFocusValueOnUpdate:!0}),o.onChange(h,{action:m,option:p})},o.selectOption=function(h){var m=o.props,p=m.blurInputOnSelect,y=m.isMulti,x=m.name,C=o.state.selectValue,S=y&&o.isOptionSelected(h,C),k=o.isOptionDisabled(h,C);if(S){var I=o.getOptionValue(h);o.setValue(C.filter(function(F){return o.getOptionValue(F)!==I}),"deselect-option",h)}else{if(k)return void o.ariaOnChange(h,{action:"select-option",option:h,name:x});y?o.setValue([].concat(sk(C),[h]),"select-option",h):o.setValue(h,"select-option")}p&&o.blurInput()},o.removeValue=function(h){var m=o.props.isMulti,p=o.state.selectValue,y=o.getOptionValue(h),x=p.filter(function(S){return o.getOptionValue(S)!==y}),C=x2(m,x,x[0]||null);o.onChange(C,{action:"remove-value",removedValue:h}),o.focusInput()},o.clearValue=function(){var h=o.state.selectValue;o.onChange(x2(o.props.isMulti,[],null),{action:"clear",removedValues:h})},o.popValue=function(){var h=o.props.isMulti,m=o.state.selectValue,p=m[m.length-1],y=m.slice(0,m.length-1),x=x2(h,y,y[0]||null);o.onChange(x,{action:"pop-value",removedValue:p})},o.getFocusedOptionId=function(h){return n5(o.state.focusableOptionsWithIds,h)},o.getFocusableOptionsWithIds=function(){return L8(v2(o.props,o.state.selectValue),o.getElementId("option"))},o.getValue=function(){return o.state.selectValue},o.cx=function(){for(var h=arguments.length,m=new Array(h),p=0;p<h;p++)m[p]=arguments[p];return oLe.apply(void 0,[o.props.classNamePrefix].concat(m))},o.getOptionLabel=function(h){return TG(o.props,h)},o.getOptionValue=function(h){return Sb(o.props,h)},o.getStyles=function(h,m){var p=o.props.unstyled,y=WLe[h](m,p);y.boxSizing="border-box";var x=o.props.styles[h];return x?x(y,m):y},o.getClassNames=function(h,m){var p,y;return(p=(y=o.props.classNames)[h])===null||p===void 0?void 0:p.call(y,m)},o.getElementId=function(h){return"".concat(o.state.instancePrefix,"-").concat(h)},o.getComponents=function(){return h=o.props,pn(pn({},FLe),h.components);var h},o.buildCategorizedOptions=function(){return v2(o.props,o.state.selectValue)},o.getCategorizedOptions=function(){return o.props.menuIsOpen?o.buildCategorizedOptions():[]},o.buildFocusableOptions=function(){return R8(o.buildCategorizedOptions())},o.getFocusableOptions=function(){return o.props.menuIsOpen?o.buildFocusableOptions():[]},o.ariaOnChange=function(h,m){o.setState({ariaSelection:pn({value:h},m)})},o.onMenuMouseDown=function(h){h.button===0&&(h.stopPropagation(),h.preventDefault(),o.focusInput())},o.onMenuMouseMove=function(h){o.blockOptionHover=!1},o.onControlMouseDown=function(h){if(!h.defaultPrevented){var m=o.props.openMenuOnClick;o.state.isFocused?o.props.menuIsOpen?h.target.tagName!=="INPUT"&&h.target.tagName!=="TEXTAREA"&&o.onMenuClose():m&&o.openMenu("first"):(m&&(o.openAfterFocus=!0),o.focusInput()),h.target.tagName!=="INPUT"&&h.target.tagName!=="TEXTAREA"&&h.preventDefault()}},o.onDropdownIndicatorMouseDown=function(h){if(!(h&&h.type==="mousedown"&&h.button!==0||o.props.isDisabled)){var m=o.props,p=m.isMulti,y=m.menuIsOpen;o.focusInput(),y?(o.setState({inputIsHiddenAfterUpdate:!p}),o.onMenuClose()):o.openMenu("first"),h.preventDefault()}},o.onClearIndicatorMouseDown=function(h){h&&h.type==="mousedown"&&h.button!==0||(o.clearValue(),h.preventDefault(),o.openAfterFocus=!1,h.type==="touchend"?o.focusInput():setTimeout(function(){return o.focusInput()}))},o.onScroll=function(h){typeof o.props.closeMenuOnScroll=="boolean"?h.target instanceof HTMLElement&&ZC(h.target)&&o.props.onMenuClose():typeof o.props.closeMenuOnScroll=="function"&&o.props.closeMenuOnScroll(h)&&o.props.onMenuClose()},o.onCompositionStart=function(){o.isComposing=!0},o.onCompositionEnd=function(){o.isComposing=!1},o.onTouchStart=function(h){var m=h.touches,p=m&&m.item(0);p&&(o.initialTouchX=p.clientX,o.initialTouchY=p.clientY,o.userIsDragging=!1)},o.onTouchMove=function(h){var m=h.touches,p=m&&m.item(0);if(p){var y=Math.abs(p.clientX-o.initialTouchX),x=Math.abs(p.clientY-o.initialTouchY);o.userIsDragging=y>5||x>5}},o.onTouchEnd=function(h){o.userIsDragging||(o.controlRef&&!o.controlRef.contains(h.target)&&o.menuListRef&&!o.menuListRef.contains(h.target)&&o.blurInput(),o.initialTouchX=0,o.initialTouchY=0)},o.onControlTouchEnd=function(h){o.userIsDragging||o.onControlMouseDown(h)},o.onClearIndicatorTouchEnd=function(h){o.userIsDragging||o.onClearIndicatorMouseDown(h)},o.onDropdownIndicatorTouchEnd=function(h){o.userIsDragging||o.onDropdownIndicatorMouseDown(h)},o.handleInputChange=function(h){var m=o.props.inputValue,p=h.currentTarget.value;o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange(p,{action:"input-change",prevInputValue:m}),o.props.menuIsOpen||o.onMenuOpen()},o.onInputFocus=function(h){o.props.onFocus&&o.props.onFocus(h),o.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(o.openAfterFocus||o.props.openMenuOnFocus)&&o.openMenu("first"),o.openAfterFocus=!1},o.onInputBlur=function(h){var m=o.props.inputValue;o.menuListRef&&o.menuListRef.contains(document.activeElement)?o.inputRef.focus():(o.props.onBlur&&o.props.onBlur(h),o.onInputChange("",{action:"input-blur",prevInputValue:m}),o.onMenuClose(),o.setState({focusedValue:null,isFocused:!1}))},o.onOptionHover=function(h){if(!o.blockOptionHover&&o.state.focusedOption!==h){var m=o.getFocusableOptions().indexOf(h);o.setState({focusedOption:h,focusedOptionId:m>-1?o.getFocusedOptionId(h):null})}},o.shouldHideSelectedOptions=function(){return IG(o.props)},o.onValueInputFocus=function(h){h.preventDefault(),h.stopPropagation(),o.focus()},o.onKeyDown=function(h){var m=o.props,p=m.isMulti,y=m.backspaceRemovesValue,x=m.escapeClearsValue,C=m.inputValue,S=m.isClearable,k=m.isDisabled,I=m.menuIsOpen,F=m.onKeyDown,U=m.tabSelectsValue,R=m.openMenuOnFocus,E=o.state,_=E.focusedOption,B=E.focusedValue,j=E.selectValue;if(!(k||typeof F=="function"&&(F(h),h.defaultPrevented))){switch(o.blockOptionHover=!0,h.key){case"ArrowLeft":if(!p||C)return;o.focusValue("previous");break;case"ArrowRight":if(!p||C)return;o.focusValue("next");break;case"Delete":case"Backspace":if(C)return;if(B)o.removeValue(B);else{if(!y)return;p?o.popValue():S&&o.clearValue()}break;case"Tab":if(o.isComposing||h.shiftKey||!I||!U||!_||R&&o.isOptionSelected(_,j))return;o.selectOption(_);break;case"Enter":if(h.keyCode===229)break;if(I){if(!_||o.isComposing)return;o.selectOption(_);break}return;case"Escape":I?(o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange("",{action:"menu-close",prevInputValue:C}),o.onMenuClose()):S&&x&&o.clearValue();break;case" ":if(C)return;if(!I){o.openMenu("first");break}if(!_)return;o.selectOption(_);break;case"ArrowUp":I?o.focusOption("up"):o.openMenu("last");break;case"ArrowDown":I?o.focusOption("down"):o.openMenu("first");break;case"PageUp":if(!I)return;o.focusOption("pageup");break;case"PageDown":if(!I)return;o.focusOption("pagedown");break;case"Home":if(!I)return;o.focusOption("first");break;case"End":if(!I)return;o.focusOption("last");break;default:return}h.preventDefault()}},o.state.instancePrefix="react-select-"+(o.props.instanceId||++XLe),o.state.selectValue=p8(i.value),i.menuIsOpen&&o.state.selectValue.length){var l=o.getFocusableOptionsWithIds(),u=o.buildFocusableOptions(),d=u.indexOf(o.state.selectValue[0]);o.state.focusableOptionsWithIds=l,o.state.focusedOption=u[d],o.state.focusedOptionId=n5(l,u[d])}return o}return e=a,n=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&x8(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var o=this.props,l=o.isDisabled,u=o.menuIsOpen,d=this.state.isFocused;(d&&!l&&i.isDisabled||d&&u&&!i.menuIsOpen)&&this.focusInput(),d&&l&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):d||l||!i.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(x8(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,o){this.props.onInputChange(i,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var o=this,l=this.state,u=l.selectValue,d=l.isFocused,h=this.buildFocusableOptions(),m=i==="first"?0:h.length-1;if(!this.props.isMulti){var p=h.indexOf(u[0]);p>-1&&(m=p)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:h[m],focusedOptionId:this.getFocusedOptionId(h[m])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(i){var o=this.state,l=o.selectValue,u=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=l.indexOf(u);u||(d=-1);var h=l.length-1,m=-1;if(l.length){switch(i){case"previous":m=d===0?0:d===-1?h:d-1;break;case"next":d>-1&&d<h&&(m=d+1)}this.setState({inputIsHidden:m!==-1,focusedValue:l[m]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,l=this.state.focusedOption,u=this.getFocusableOptions();if(u.length){var d=0,h=u.indexOf(l);l||(h=-1),i==="up"?d=h>0?h-1:u.length-1:i==="down"?d=(h+1)%u.length:i==="pageup"?(d=h-o)<0&&(d=0):i==="pagedown"?(d=h+o)>u.length-1&&(d=u.length-1):i==="last"&&(d=u.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:u[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(u[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(t5):pn(pn({},t5),this.props.theme):t5}},{key:"getCommonProps",value:function(){var i=this.clearValue,o=this.cx,l=this.getStyles,u=this.getClassNames,d=this.getValue,h=this.selectOption,m=this.setValue,p=this.props,y=p.isMulti,x=p.isRtl,C=p.options;return{clearValue:i,cx:o,getStyles:l,getClassNames:u,getValue:d,hasValue:this.hasValue(),isMulti:y,isRtl:x,options:C,selectOption:h,selectProps:p,setValue:m,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,o=i.isClearable,l=i.isMulti;return o===void 0?l:o}},{key:"isOptionDisabled",value:function(i,o){return NG(this.props,i,o)}},{key:"isOptionSelected",value:function(i,o){return BG(this.props,i,o)}},{key:"filterOption",value:function(i,o){return kG(this.props,i,o)}},{key:"formatOptionLabel",value:function(i,o){if(typeof this.props.formatOptionLabel=="function"){var l=this.props.inputValue,u=this.state.selectValue;return this.props.formatOptionLabel(i,{context:o,inputValue:l,selectValue:u})}return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,o=i.isDisabled,l=i.isSearchable,u=i.inputId,d=i.inputValue,h=i.tabIndex,m=i.form,p=i.menuIsOpen,y=i.required,x=this.getComponents().Input,C=this.state,S=C.inputIsHidden,k=C.ariaSelection,I=this.commonProps,F=u||this.getElementId("input"),U=pn(pn(pn({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":y,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!l&&{"aria-readonly":!0}),this.hasValue()?(k==null?void 0:k.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return l?G.createElement(x,Bn({},I,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:F,innerRef:this.getInputRef,isDisabled:o,isHidden:S,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:h,form:m,type:"text",value:d},U)):G.createElement(QLe,Bn({id:F,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Eb,onFocus:this.onInputFocus,disabled:o,tabIndex:h,inputMode:"none",form:m,value:""},U))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,o=this.getComponents(),l=o.MultiValue,u=o.MultiValueContainer,d=o.MultiValueLabel,h=o.MultiValueRemove,m=o.SingleValue,p=o.Placeholder,y=this.commonProps,x=this.props,C=x.controlShouldRenderValue,S=x.isDisabled,k=x.isMulti,I=x.inputValue,F=x.placeholder,U=this.state,R=U.selectValue,E=U.focusedValue,_=U.isFocused;if(!this.hasValue()||!C)return I?null:G.createElement(p,Bn({},y,{key:"placeholder",isDisabled:S,isFocused:_,innerProps:{id:this.getElementId("placeholder")}}),F);if(k)return R.map(function(j,D){var L=j===E,Q="".concat(i.getOptionLabel(j),"-").concat(i.getOptionValue(j));return G.createElement(l,Bn({},y,{components:{Container:u,Label:d,Remove:h},isFocused:L,isDisabled:S,key:Q,index:D,removeProps:{onClick:function(){return i.removeValue(j)},onTouchEnd:function(){return i.removeValue(j)},onMouseDown:function(H){H.preventDefault()}},data:j}),i.formatOptionLabel(j,"value"))});if(I)return null;var B=R[0];return G.createElement(m,Bn({},y,{data:B,isDisabled:S}),this.formatOptionLabel(B,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents().ClearIndicator,o=this.commonProps,l=this.props,u=l.isDisabled,d=l.isLoading,h=this.state.isFocused;if(!this.isClearable()||!i||u||!this.hasValue()||d)return null;var m={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return G.createElement(i,Bn({},o,{innerProps:m,isFocused:h}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents().LoadingIndicator,o=this.commonProps,l=this.props,u=l.isDisabled,d=l.isLoading,h=this.state.isFocused;return i&&d?G.createElement(i,Bn({},o,{innerProps:{"aria-hidden":"true"},isDisabled:u,isFocused:h})):null}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator,l=i.IndicatorSeparator;if(!o||!l)return null;var u=this.commonProps,d=this.props.isDisabled,h=this.state.isFocused;return G.createElement(l,Bn({},u,{isDisabled:d,isFocused:h}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents().DropdownIndicator;if(!i)return null;var o=this.commonProps,l=this.props.isDisabled,u=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return G.createElement(i,Bn({},o,{innerProps:d,isDisabled:l,isFocused:u}))}},{key:"renderMenu",value:function(){var i=this,o=this.getComponents(),l=o.Group,u=o.GroupHeading,d=o.Menu,h=o.MenuList,m=o.MenuPortal,p=o.LoadingMessage,y=o.NoOptionsMessage,x=o.Option,C=this.commonProps,S=this.state.focusedOption,k=this.props,I=k.captureMenuScroll,F=k.inputValue,U=k.isLoading,R=k.loadingMessage,E=k.minMenuHeight,_=k.maxMenuHeight,B=k.menuIsOpen,j=k.menuPlacement,D=k.menuPosition,L=k.menuPortalTarget,Q=k.menuShouldBlockScroll,H=k.menuShouldScrollIntoView,te=k.noOptionsMessage,Y=k.onMenuScrollToTop,ne=k.onMenuScrollToBottom;if(!B)return null;var V,J=function(Z,re){var se=Z.type,de=Z.data,pe=Z.isDisabled,be=Z.isSelected,Se=Z.label,me=Z.value,ce=S===de,Me=pe?void 0:function(){return i.onOptionHover(de)},Ze=pe?void 0:function(){return i.selectOption(de)},Fe="".concat(i.getElementId("option"),"-").concat(re),Ce={id:Fe,onClick:Ze,onMouseMove:Me,onMouseOver:Me,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:be};return G.createElement(x,Bn({},C,{innerProps:Ce,data:de,isDisabled:pe,isSelected:be,key:Fe,label:Se,type:se,value:me,isFocused:ce,innerRef:ce?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(Z.data,"menu"))};if(this.hasOptions())V=this.getCategorizedOptions().map(function(Z){if(Z.type==="group"){var re=Z.data,se=Z.options,de=Z.index,pe="".concat(i.getElementId("group"),"-").concat(de),be="".concat(pe,"-heading");return G.createElement(l,Bn({},C,{key:pe,data:re,options:se,Heading:u,headingProps:{id:be,data:Z.data},label:i.formatGroupLabel(Z.data)}),Z.options.map(function(Se){return J(Se,"".concat(de,"-").concat(Se.index))}))}if(Z.type==="option")return J(Z,"".concat(Z.index))});else if(U){var K=R({inputValue:F});if(K===null)return null;V=G.createElement(p,C,K)}else{var ie=te({inputValue:F});if(ie===null)return null;V=G.createElement(y,C,ie)}var O={minMenuHeight:E,maxMenuHeight:_,menuPlacement:j,menuPosition:D,menuShouldScrollIntoView:H},W=G.createElement(mLe,Bn({},C,O),function(Z){var re=Z.ref,se=Z.placerProps,de=se.placement,pe=se.maxHeight;return G.createElement(d,Bn({},C,O,{innerRef:re,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:U,placement:de}),G.createElement(zLe,{captureEnabled:I,onTopArrive:Y,onBottomArrive:ne,lockEnabled:Q},function(be){return G.createElement(h,Bn({},C,{innerRef:function(Se){i.getMenuListRef(Se),be(Se)},innerProps:{role:"listbox","aria-multiselectable":C.isMulti,id:i.getElementId("listbox")},isLoading:U,maxHeight:pe,focusedOption:S}),V)}))});return L||D==="fixed"?G.createElement(m,Bn({},C,{appendTo:L,controlElement:this.controlRef,menuPlacement:j,menuPosition:D}),W):W}},{key:"renderFormField",value:function(){var i=this,o=this.props,l=o.delimiter,u=o.isDisabled,d=o.isMulti,h=o.name,m=o.required,p=this.state.selectValue;if(m&&!this.hasValue()&&!u)return G.createElement(qLe,{name:h,onFocus:this.onValueInputFocus});if(h&&!u){if(d){if(l){var y=p.map(function(S){return i.getOptionValue(S)}).join(l);return G.createElement("input",{name:h,type:"hidden",value:y})}var x=p.length>0?p.map(function(S,k){return G.createElement("input",{key:"i-".concat(k),name:h,type:"hidden",value:i.getOptionValue(S)})}):G.createElement("input",{name:h,type:"hidden",value:""});return G.createElement("div",null,x)}var C=p[0]?this.getOptionValue(p[0]):"";return G.createElement("input",{name:h,type:"hidden",value:C})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,o=this.state,l=o.ariaSelection,u=o.focusedOption,d=o.focusedValue,h=o.isFocused,m=o.selectValue,p=this.getFocusableOptions();return G.createElement(ULe,Bn({},i,{id:this.getElementId("live-region"),ariaSelection:l,focusedOption:u,focusedValue:d,isFocused:h,selectValue:m,focusableOptions:p,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),o=i.Control,l=i.IndicatorsContainer,u=i.SelectContainer,d=i.ValueContainer,h=this.props,m=h.className,p=h.id,y=h.isDisabled,x=h.menuIsOpen,C=this.state.isFocused,S=this.commonProps=this.getCommonProps();return G.createElement(u,Bn({},S,{className:m,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:y,isFocused:C}),this.renderLiveRegion(),G.createElement(o,Bn({},S,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:y,isFocused:C,menuIsOpen:x}),G.createElement(d,Bn({},S,{isDisabled:y}),this.renderPlaceholderOrValue(),this.renderInput()),G.createElement(l,Bn({},S,{isDisabled:y}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],r=[{key:"getDerivedStateFromProps",value:function(i,o){var l=o.prevProps,u=o.clearFocusValueOnUpdate,d=o.inputIsHiddenAfterUpdate,h=o.ariaSelection,m=o.isFocused,p=o.prevWasFocused,y=o.instancePrefix,x=i.options,C=i.value,S=i.menuIsOpen,k=i.inputValue,I=i.isMulti,F=p8(C),U={};if(l&&(C!==l.value||x!==l.options||S!==l.menuIsOpen||k!==l.inputValue)){var R=S?function(Q,H){return R8(v2(Q,H))}(i,F):[],E=S?L8(v2(i,F),"".concat(y,"-option")):[],_=u?function(Q,H){var te=Q.focusedValue,Y=Q.selectValue.indexOf(te);if(Y>-1){if(H.indexOf(te)>-1)return te;if(Y<H.length)return H[Y]}return null}(o,F):null,B=function(Q,H){var te=Q.focusedOption;return te&&H.indexOf(te)>-1?te:H[0]}(o,R);U={selectValue:F,focusedOption:B,focusedOptionId:n5(E,B),focusableOptionsWithIds:E,focusedValue:_,clearFocusValueOnUpdate:!1}}var j=d!=null&&i!==l?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},D=h,L=m&&p;return m&&!L&&(D={value:x2(I,F,F[0]||null),options:F,action:"initial-input-focus"},L=!p),(h==null?void 0:h.action)==="initial-input-focus"&&(D=null),pn(pn(pn({},U),j),{},{prevProps:i,ariaSelection:D,prevWasFocused:L})}}],n&&XM(e.prototype,n),r&&XM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}();FG.defaultProps=YLe;var JLe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],ZLe=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],dk=Gr(function(t){function e(n){return t.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}),eUe=Gr(function(t){var e=dk.default;t.exports=function(n,r){if(e(n)!=="object"||n===null)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var a=s.call(n,r||"default");if(e(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)},t.exports.__esModule=!0,t.exports.default=t.exports}),DG=Gr(function(t){var e=dk.default;t.exports=function(n){var r=eUe(n,"string");return e(r)==="symbol"?r:String(r)},t.exports.__esModule=!0,t.exports.default=t.exports}),tUe=Gr(function(t){t.exports=function(e,n,r){return(n=DG(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e},t.exports.__esModule=!0,t.exports.default=t.exports});Gr(function(t){function e(n,r){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),s.push.apply(s,a)}return s}t.exports=function(n){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?e(Object(s),!0).forEach(function(a){tUe(n,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):e(Object(s)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(s,a))})}return n},t.exports.__esModule=!0,t.exports.default=t.exports}),Gr(function(t){t.exports=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports}),Gr(function(t){function e(n,r){for(var s=0;s<r.length;s++){var a=r[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,DG(a.key),a)}}t.exports=function(n,r,s){return r&&e(n.prototype,r),s&&e(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n},t.exports.__esModule=!0,t.exports.default=t.exports});var nUe=Gr(function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports});Gr(function(t){t.exports=function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&nUe(e,n)},t.exports.__esModule=!0,t.exports.default=t.exports});var M8=Gr(function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}),rUe=Gr(function(t){t.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},t.exports.__esModule=!0,t.exports.default=t.exports}),sUe=Gr(function(t){t.exports=function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.__esModule=!0,t.exports.default=t.exports}),aUe=Gr(function(t){var e=dk.default;t.exports=function(n,r){if(r&&(e(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sUe(n)},t.exports.__esModule=!0,t.exports.default=t.exports});Gr(function(t){t.exports=function(e){var n=rUe();return function(){var r,s=M8(e);if(n){var a=M8(this).constructor;r=Reflect.construct(s,arguments,a)}else r=s.apply(this,arguments);return aUe(this,r)}},t.exports.__esModule=!0,t.exports.default=t.exports});var gN=Gr(function(t){t.exports=function(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s},t.exports.__esModule=!0,t.exports.default=t.exports}),iUe=Gr(function(t){t.exports=function(e){if(Array.isArray(e))return gN(e)},t.exports.__esModule=!0,t.exports.default=t.exports}),oUe=Gr(function(t){t.exports=function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)},t.exports.__esModule=!0,t.exports.default=t.exports}),RG=Gr(function(t){t.exports=function(e,n){if(e){if(typeof e=="string")return gN(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gN(e,n):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports}),lUe=Gr(function(t){t.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports});Gr(function(t){t.exports=function(e){return iUe(e)||oUe(e)||RG(e)||lUe()},t.exports.__esModule=!0,t.exports.default=t.exports});var cUe=Gr(function(t){t.exports=function(e){if(Array.isArray(e))return e},t.exports.__esModule=!0,t.exports.default=t.exports}),uUe=Gr(function(t){t.exports=function(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,n===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(s=i.call(r)).done)&&(l.push(s.value),l.length!==n);u=!0);}catch(h){d=!0,a=h}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}},t.exports.__esModule=!0,t.exports.default=t.exports}),AUe=Gr(function(t){t.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports});Gr(function(t){t.exports=function(e,n){return cUe(e)||uUe(e,n)||RG(e,n)||AUe()},t.exports.__esModule=!0,t.exports.default=t.exports});var dUe=Gr(function(t){t.exports=function(e,n){if(e==null)return{};var r,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)>=0||(a[r]=e[r]);return a},t.exports.__esModule=!0,t.exports.default=t.exports});Gr(function(t){t.exports=function(e,n){if(e==null)return{};var r,s,a=dUe(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a},t.exports.__esModule=!0,t.exports.default=t.exports}),Gr(function(t){t.exports=function(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))},t.exports.__esModule=!0,t.exports.default=t.exports});var fUe=G.forwardRef(function(t,e){var n=function(s){var a=s.defaultOptions,i=a!==void 0&&a,o=s.cacheOptions,l=o!==void 0&&o,u=s.loadOptions;s.options;var d=s.isLoading,h=d!==void 0&&d,m=s.onInputChange,p=s.filterOption,y=p===void 0?null:p,x=Ou(s,ZLe),C=x.inputValue,S=G.useRef(void 0),k=G.useRef(!1),I=ri(G.useState(Array.isArray(i)?i:void 0),2),F=I[0],U=I[1],R=ri(G.useState(C!==void 0?C:""),2),E=R[0],_=R[1],B=ri(G.useState(i===!0),2),j=B[0],D=B[1],L=ri(G.useState(void 0),2),Q=L[0],H=L[1],te=ri(G.useState([]),2),Y=te[0],ne=te[1],V=ri(G.useState(!1),2),J=V[0],K=V[1],ie=ri(G.useState({}),2),O=ie[0],W=ie[1],Z=ri(G.useState(void 0),2),re=Z[0],se=Z[1],de=ri(G.useState(void 0),2),pe=de[0],be=de[1];l!==pe&&(W({}),be(l)),i!==re&&(U(Array.isArray(i)?i:void 0),se(i)),G.useEffect(function(){return k.current=!0,function(){k.current=!1}},[]);var Se=G.useCallback(function(Me,Ze){if(!u)return Ze();var Fe=u(Me,Ze);Fe&&typeof Fe.then=="function"&&Fe.then(Ze,function(){return Ze()})},[u]);G.useEffect(function(){i===!0&&Se(E,function(Me){k.current&&(U(Me||[]),D(!!S.current))})},[]);var me=G.useCallback(function(Me,Ze){var Fe=function(Re,ze,Je){if(Je){var dt=Je(Re,ze);if(typeof dt=="string")return dt}return Re}(Me,Ze,m);if(!Fe)return S.current=void 0,_(""),H(""),ne([]),D(!1),void K(!1);if(l&&O[Fe])_(Fe),H(Fe),ne(O[Fe]),D(!1),K(!1);else{var Ce=S.current={};_(Fe),D(!0),K(!Q),Se(Fe,function(Re){k&&Ce===S.current&&(S.current=void 0,D(!1),H(Fe),ne(Re||[]),K(!1),W(Re?pn(pn({},O),{},Mm({},Fe,Re)):O))})}},[l,Se,Q,O,m]),ce=J?[]:E&&Q?Y:F||[];return pn(pn({},x),{},{options:ce,isLoading:j||h,onInputChange:me,filterOption:y})}(t),r=function(s){var a=s.defaultInputValue,i=a===void 0?"":a,o=s.defaultMenuIsOpen,l=o!==void 0&&o,u=s.defaultValue,d=u===void 0?null:u,h=s.inputValue,m=s.menuIsOpen,p=s.onChange,y=s.onInputChange,x=s.onMenuClose,C=s.onMenuOpen,S=s.value,k=Ou(s,JLe),I=ri(G.useState(h!==void 0?h:i),2),F=I[0],U=I[1],R=ri(G.useState(m!==void 0?m:l),2),E=R[0],_=R[1],B=ri(G.useState(S!==void 0?S:d),2),j=B[0],D=B[1],L=G.useCallback(function(J,K){typeof p=="function"&&p(J,K),D(J)},[p]),Q=G.useCallback(function(J,K){var ie;typeof y=="function"&&(ie=y(J,K)),U(ie!==void 0?ie:J)},[y]),H=G.useCallback(function(){typeof C=="function"&&C(),_(!0)},[C]),te=G.useCallback(function(){typeof x=="function"&&x(),_(!1)},[x]),Y=h!==void 0?h:F,ne=m!==void 0?m:E,V=S!==void 0?S:j;return pn(pn({},k),{},{inputValue:Y,menuIsOpen:ne,onChange:L,onInputChange:Q,onMenuClose:te,onMenuOpen:H,value:V})}(n);return G.createElement(FG,Bn({ref:e},r))}),hUe=fUe,mUe=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,a;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(s=r;s--!=0;)if(!t(e[s],n[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(a=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(s=r;s--!=0;)if(!Object.prototype.hasOwnProperty.call(n,a[s]))return!1;for(s=r;s--!=0;){var i=a[s];if(!t(e[i],n[i]))return!1}return!0}return e!=e&&n!=n},Pm;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(Pm||(Pm={}));class kh{constructor({apiKey:e,authReferrerPolicy:n,channel:r,client:s,id:a="__googleMapsScriptId",language:i,libraries:o=[],mapIds:l,nonce:u,region:d,retries:h=3,url:m="https://maps.googleapis.com/maps/api/js",version:p}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=n,this.channel=r,this.client=s,this.id=a||"__googleMapsScriptId",this.language=i,this.libraries=o,this.mapIds=l,this.nonce=u,this.region=d,this.retries=h,this.url=m,this.version=p,kh.instance){if(!mUe(this.options,kh.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(kh.instance.options)}`);return kh.instance}kh.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Pm.FAILURE:this.done?Pm.SUCCESS:this.loading?Pm.LOADING:Pm.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+=`?callback=${this.CALLBACK}`,this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,n)=>{this.loadCallback(r=>{r?n(r.error):e(window.google)})})}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const e=this.createUrl(),n=document.createElement("script");n.id=this.id,n.type="text/javascript",n.src=e,n.onerror=this.loadErrorCallback.bind(this),n.defer=!0,n.async=!0,this.nonce&&(n.nonce=this.nonce),document.head.appendChild(n)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const n=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${n} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},n)}else this.onerrorEvent=e,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var pUe=function(t,e,n){var r,s=t.bounds,a=t.location,i=function(l,u){var d={};for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&u.indexOf(h)<0&&(d[h]=l[h]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function"){var m=0;for(h=Object.getOwnPropertySymbols(l);m<h.length;m++)u.indexOf(h[m])<0&&Object.prototype.propertyIsEnumerable.call(l,h[m])&&(d[h[m]]=l[h[m]])}return d}(t,["bounds","location"]),o=Kh({input:e},i);return n&&(o.sessionToken=n),s&&(o.bounds=new((r=google.maps.LatLngBounds).bind.apply(r,function(){for(var l=0,u=0,d=arguments.length;u<d;u++)l+=arguments[u].length;var h=Array(l),m=0;for(u=0;u<d;u++)for(var p=arguments[u],y=0,x=p.length;y<x;y++,m++)h[m]=p[y];return h}([void 0],s)))),a&&(o.location=new google.maps.LatLng(a)),o},gUe=function(t){var e=t.autocompletionRequest,n=t.debounce,r=t.minLengthAutocomplete,s=t.placesService,a=t.sessionToken,i=t.withSessionToken,o=function(l,u,d){d===void 0&&(d={});var h=d.maxWait,m=G.useRef(null),p=G.useRef([]),y=d.leading,x=d.trailing===void 0||d.trailing,C=G.useRef(!1),S=G.useRef(null),k=G.useRef(!1),I=G.useRef(l);I.current=l;var F=G.useCallback(function(){clearTimeout(S.current),clearTimeout(m.current),m.current=null,p.current=[],S.current=null,C.current=!1},[]);G.useEffect(function(){return k.current=!1,function(){k.current=!0}},[]);var U=G.useCallback(function(){for(var E=[],_=0;_<arguments.length;_++)E[_]=arguments[_];p.current=E,clearTimeout(S.current),C.current&&(C.current=!1),S.current||!y||C.current||(I.current.apply(I,E),C.current=!0),S.current=setTimeout(function(){var B=!0;y&&C.current&&(B=!1),F(),!k.current&&x&&B&&I.current.apply(I,E)},u),h&&!m.current&&x&&(m.current=setTimeout(function(){var B=p.current;F(),k.current||I.current.apply(null,B)},h))},[h,u,F,y,x]),R=G.useCallback(function(){S.current&&(I.current.apply(null,p.current),F())},[F]);return[U,F,R]}(function(l,u){if(!s)return u([]);if(l.length<r)return u([]);var d=Kh({},e);s.getPlacePredictions(pUe(d,l,i&&a),function(h){u((h||[]).map(function(m){return{label:m.description,value:m}}))})},n)[0];return o},P8=G.forwardRef(function(t,e){var n,r,s,a,i,o,l,u,d=function(x){var C=x.apiKey,S=x.apiOptions,k=x.onLoadFailed,I=G.useState(void 0),F=I[0],U=I[1],R=G.useState(void 0),E=R[0],_=R[1],B=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");U(new window.google.maps.places.AutocompleteService),_(new google.maps.places.AutocompleteSessionToken)};return G.useEffect(function(){C?wRe(void 0,void 0,void 0,function(){var j;return bRe(this,function(D){switch(D.label){case 0:if(!C)return[2];D.label=1;case 1:return D.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new kh(Kh({apiKey:C},Kh({libraries:["places"]},S))).load()];case 2:D.sent(),D.label=3;case 3:return B(),[3,5];case 4:return j=D.sent(),typeof k=="function"&&k(j),[3,5];case 5:return[2]}})}):B()},[]),{placesService:F,sessionToken:E,setSessionToken:_}}({apiKey:(n=t.apiKey)!==null&&n!==void 0?n:"",apiOptions:(r=t.apiOptions)!==null&&r!==void 0?r:{},onLoadFailed:(s=t.onLoadFailed)!==null&&s!==void 0?s:console.error}),h=d.placesService,m=d.sessionToken,p=d.setSessionToken,y=gUe({autocompletionRequest:(a=t.autocompletionRequest)!==null&&a!==void 0?a:{},debounce:(i=t.debounce)!==null&&i!==void 0?i:300,minLengthAutocomplete:(o=t.minLengthAutocomplete)!==null&&o!==void 0?o:0,placesService:h,sessionToken:m,withSessionToken:(l=t.withSessionToken)!==null&&l!==void 0&&l});return G.useImperativeHandle(e,function(){return{getSessionToken:function(){return m},refreshSessionToken:function(){p(new google.maps.places.AutocompleteSessionToken)}}},[m]),gt.createElement(hUe,Kh({},(u=t.selectProps)!==null&&u!==void 0?u:{},{loadOptions:y,getOptionValue:function(x){return x.value.place_id}}))});const xUe=t=>{const[e,n]=G.useState(!1),[r,s]=G.useState(null);return G.useEffect(()=>{const a="google-maps-script";if(document.getElementById(a)||window.google){n(!0);return}const i=document.createElement("script");i.id=a,i.src=`https://maps.googleapis.com/maps/api/js?key=${t}&libraries=places,directions&loading=async`,i.async=!0,i.defer=!0,i.onload=()=>n(!0),i.onerror=()=>s(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(i)},[t]),{isLoaded:e,error:r}},vUe=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de práctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisión y mentoría"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicación interna"}],yUe=["Mecánica Industrial","Mecánica Automotriz"],wUe=()=>({nombre:"",rut:"",direccion:"",contacto:"",email:"",area:"",cupos:1,coordenadas:null,calificaciones:vUe.map(t=>({...t,score:null})),estudiantesAsignados:[],docenteSupervisor:void 0}),O8=({empresas:t,isLoaded:e,route:n})=>{const r=G.useRef(null),s=G.useRef(null),a=G.useRef([]),i=G.useRef(null),o=t.filter(l=>{var u,d;return((u=l.coordenadas)==null?void 0:u.lat)&&((d=l.coordenadas)==null?void 0:d.lng)});return G.useEffect(()=>{!e||!r.current||!window.google||(s.current||(s.current=new window.google.maps.Map(r.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11})),i.current||(i.current=new window.google.maps.DirectionsRenderer),a.current.forEach(l=>l.setMap(null)),a.current=[],i.current.setMap(null),n?(i.current.setMap(s.current),i.current.setDirections(n)):o.forEach(l=>{const u=new window.google.maps.Marker({position:{lat:l.coordenadas.lat,lng:l.coordenadas.lng},map:s.current,title:l.nombre}),d=new window.google.maps.InfoWindow({content:`<div style="font-weight: bold;">${l.nombre}</div><div>${l.direccion}</div>`});u.addListener("click",()=>{d.open(s.current,u)}),a.current.push(u)}))},[o,e,n]),c.jsxs("div",{className:"relative",id:"map-container-for-pdf",children:[c.jsx("div",{ref:r,className:"h-[600px] w-full rounded-lg border"}),!n&&o.length===0&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:c.jsx("div",{className:"text-center p-6",children:c.jsx("p",{className:"text-gray-600 text-lg",children:"📍 No hay empresas geo-localizadas"})})})]})},bUe=({route:t,travelMode:e})=>{const s=e==="TRANSIT"?45:30,a=t.routes[0].legs.reduce((h,m)=>{var p;return h+(((p=m.duration)==null?void 0:p.value)||0)},0),o=(t.routes[0].legs.length>1?t.routes[0].legs.length-1:0)*s*60,l=a+o,u=t.routes[0].legs.reduce((h,m)=>{var p;return h+(((p=m.distance)==null?void 0:p.value)||0)},0),d=e==="DRIVING"?u/1e3/12*1300:0;return c.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-slate-50",id:"route-details-for-pdf",children:[c.jsx("h3",{className:"text-xl font-bold mb-3",children:"Detalles de la Ruta"}),c.jsx("div",{className:"space-y-4",children:t.routes[0].legs.map((h,m)=>{var p,y,x;return c.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("h4",{className:"font-bold text-lg",children:["Tramo ",m+1,": ",h.start_address.split(",")[0]," → ",h.end_address.split(",")[0]]}),c.jsxs("div",{className:"text-sm text-gray-600",children:[(p=h.duration)==null?void 0:p.text," • ",(y=h.distance)==null?void 0:y.text]})]}),e==="TRANSIT"&&c.jsx("div",{className:"space-y-3",children:(x=h.steps)==null?void 0:x.map((C,S)=>C.transit&&c.jsxs("div",{className:"flex items-start gap-2 text-sm py-1",children:[c.jsx("span",{className:"text-lg",children:"🚌"}),c.jsx("span",{dangerouslySetInnerHTML:{__html:C.instructions}})]},S))})]},m)})}),c.jsxs("div",{className:"mt-4 pt-4 border-t font-bold text-right",children:[c.jsxs("p",{children:["Tiempo de viaje: ",Math.round(a/60)," min"]}),c.jsxs("p",{children:["Tiempo en paradas: ",Math.round(o/60)," min"]}),c.jsxs("p",{className:"text-lg",children:["Duración Total Estimada: ",Math.round(l/60)," min"]}),c.jsxs("p",{children:["Distancia Total: ",(u/1e3).toFixed(1)," km"]}),e==="DRIVING"&&c.jsxs("p",{className:"text-green-600",children:["Costo Bencina Aprox: $",d.toLocaleString("es-CL",{maximumFractionDigits:0})]})]})]})},j8=async t=>window.google?new Promise(e=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:t,fields:["geometry"]},(r,s)=>{var a;s===window.google.maps.places.PlacesServiceStatus.OK&&((a=r==null?void 0:r.geometry)!=null&&a.location)?e({lat:r.geometry.location.lat(),lng:r.geometry.location.lng()}):e(null)})}):null,CUe=()=>{const[t,e]=G.useState([]),[n,r]=G.useState([]),[s,a]=G.useState("list"),[i,o]=G.useState(null),[l,u]=G.useState(!0),[d,h]=G.useState(null),[m,p]=G.useState(null),[y,x]=G.useState(null),[C,S]=G.useState([]),[k,I]=G.useState(null),[F,U]=G.useState(!1),[R,E]=G.useState("DRIVING"),[_,B]=G.useState(""),[j,D]=G.useState([]),L="AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4",{isLoaded:Q}=xUe(L);G.useEffect(()=>{u(!0);const se=mRe(e),de=gRe(r),pe=vRe(D);return u(!1),()=>{se(),de(),pe()}},[]);const H=async se=>{window.confirm("¿Está seguro de eliminar esta empresa?")&&await pRe(se)},te=(se,de)=>{o(pe=>pe?{...pe,[se]:de}:null)},Y=async se=>{var de;if(h(se),(de=se==null?void 0:se.value)!=null&&de.place_id&&Q){const pe=await j8(se.value.place_id);te("direccion",se.label||""),te("coordenadas",pe)}else te("direccion",(se==null?void 0:se.label)||"")},ne=se=>{o(JSON.parse(JSON.stringify(se))),se.direccion&&h({label:se.direccion,value:{description:se.direccion}}),a("form")},V=async se=>{var de;if(p(se),(de=se==null?void 0:se.value)!=null&&de.place_id&&Q){const pe=await j8(se.value.place_id);x(pe)}},J=se=>{S(de=>de.some(pe=>pe.id===se.id)?de.filter(pe=>pe.id!==se.id):[...de,se])},K=()=>{if(!y||C.length===0||!Q)return;U(!0);const se=new window.google.maps.DirectionsService,de=C.filter(pe=>pe.coordenadas).map(pe=>({location:pe.coordenadas,stopover:!0}));se.route({origin:y,destination:y,waypoints:de,optimizeWaypoints:!0,travelMode:window.google.maps.TravelMode[R]},(pe,be)=>{U(!1),be===window.google.maps.DirectionsStatus.OK&&pe?I(pe):alert("No se pudo calcular la ruta: "+be)})},ie=()=>{I(null),p(null),x(null),S([]),B("")},O=async()=>{if(!_||!m||!y||C.length===0){alert("Por favor, asigna un nombre a la ruta y asegúrate de tener un punto de partida y empresas seleccionadas.");return}const se={nombre:_,startPoint:{label:m.label,coords:y},empresas:C.map(de=>({id:de.id,nombre:de.nombre,coordenadas:de.coordenadas})),travelMode:R};try{await xRe(se),alert("Ruta guardada con éxito."),a("saved-routes")}catch{alert("Error al guardar la ruta.")}},W=async()=>{const se=document.getElementById("map-container-for-pdf"),de=document.getElementById("route-details-for-pdf");if(!se||!de)return;const pe=new hn("p","mm","a4"),be=pe.internal.pageSize.getWidth();pe.text(`Ruta de Supervisión: ${_||"Sin nombre"}`,10,15),pe.setFontSize(10),pe.text(`Fecha: ${new Date().toLocaleDateString("es-CL")}`,10,22);const me=(await cb(se,{useCORS:!0})).toDataURL("image/png");pe.addImage(me,"PNG",10,30,be-20,100);const Me=(await cb(de)).toDataURL("image/png"),Ze=pe.getImageProperties(Me),Fe=Ze.height*(be-20)/Ze.width;pe.addImage(Me,"PNG",10,135,be-20,Fe),pe.save(`ruta-${_||"supervision"}.pdf`)},Z=se=>{p({label:se.startPoint.label,value:null}),x(se.startPoint.coords),S(se.empresas),E(se.travelMode),B(se.nombre),a("route")},re=async se=>{window.confirm("¿Estás seguro de que quieres eliminar esta ruta guardada?")&&(await yRe(se),alert("Ruta eliminada."))};return l?c.jsx("div",{className:"text-center p-8",children:"Cargando..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Gestión de Empresas"}),c.jsxs("div",{className:"flex items-center gap-4",children:[s!=="list"&&c.jsx("button",{onClick:()=>{a("list"),h(null),o(null),ie()},className:"font-semibold hover:text-blue-600",children:"← Volver al listado"}),s==="list"&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>a("saved-routes"),title:"Rutas Guardadas",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Rutas Guardadas"}),c.jsx("button",{onClick:()=>a("route"),title:"Ruta de Supervisión",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ruta de Supervisión"}),c.jsx("button",{onClick:()=>a("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:"🗺️"}),c.jsx("button",{onClick:()=>{o(wUe()),a("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),s==="saved-routes"&&c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Rutas de Supervisión Guardadas"}),c.jsx("div",{className:"space-y-3",children:j.length===0?c.jsx("p",{className:"text-gray-500",children:"No tienes rutas guardadas."}):j.map(se=>c.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold",children:se.nombre}),c.jsxs("p",{className:"text-sm text-slate-500",children:[se.empresas.length," paradas"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>Z(se),className:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm",children:"Cargar"}),c.jsx("button",{onClick:()=>re(se.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm",children:"Eliminar"})]})]},se.id))})]}),s==="route"&&c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Planificador de Ruta de Supervisión"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1. Ingresa un nombre para la ruta"}),c.jsx("input",{type:"text",value:_,onChange:se=>B(se.target.value),placeholder:"Ej: Supervisión Zona Norte",className:"input-style w-full"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2. Ingresa el punto de partida"}),c.jsx(P8,{apiKey:L,selectProps:{value:m,onChange:V,placeholder:"Buscar dirección de partida..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Elige el modo de transporte"}),c.jsxs("div",{className:"flex gap-4 rounded-lg bg-slate-100 p-1",children:[c.jsx("button",{onClick:()=>E("DRIVING"),className:`w-full py-2 rounded-md transition ${R==="DRIVING"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Automóvil"}),c.jsx("button",{onClick:()=>E("TRANSIT"),className:`w-full py-2 rounded-md transition ${R==="TRANSIT"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Transporte Público"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"4. Selecciona las empresas a visitar"}),c.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2 space-y-2",children:t.filter(se=>se.coordenadas).map(se=>c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:`route-${se.id}`,checked:C.some(de=>de.id===se.id),onChange:()=>J(se),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),c.jsx("label",{htmlFor:`route-${se.id}`,className:"ml-3 text-sm text-gray-700",children:se.nombre})]},se.id))})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("button",{onClick:K,disabled:!y||C.length===0||F,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:F?"Calculando...":"Visualizar Ruta"}),c.jsx("button",{onClick:O,disabled:!_||!y||C.length===0,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Guardar Ruta"}),c.jsx("button",{onClick:W,disabled:!k,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Exportar PDF"}),c.jsx("button",{onClick:ie,className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors",children:"Limpiar"})]})]}),c.jsx("div",{children:c.jsx(O8,{empresas:C,isLoaded:Q,route:k})})]}),k&&c.jsx(bUe,{route:k,travelMode:R})]}),s==="map"&&c.jsx(O8,{empresas:t,isLoaded:Q}),s==="list"&&c.jsx("div",{className:"space-y-3",children:t.length===0?c.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas."}):t.map(se=>{var de;return c.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg",children:se.nombre}),c.jsxs("p",{className:"text-sm text-slate-500",children:[se.rut," | ",se.direccion]}),c.jsxs("p",{className:"text-sm text-slate-600",children:["Área: ",se.area||"No especificada"," | Cupos: ",se.cupos," | Supervisor: ",((de=se.docenteSupervisor)==null?void 0:de.nombreCompleto)||"Ninguno"]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>ne(se),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),c.jsx("button",{onClick:()=>H(se.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},se.id)})}),s==="form"&&i&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("h2",{className:"text-2xl font-bold",children:"id"in i?"Editando Empresa":"Nueva Empresa"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsx("input",{value:i.nombre,onChange:se=>te("nombre",se.target.value),placeholder:"Nombre Empresa",className:"input-style",required:!0}),c.jsx("input",{value:i.rut,onChange:se=>te("rut",se.target.value),placeholder:"RUT Empresa",className:"input-style",required:!0}),c.jsx("div",{className:"md:col-span-2",children:Q?c.jsxs("div",{children:[c.jsx(P8,{apiKey:L,selectProps:{value:d,onChange:Y,placeholder:"Buscar dirección en Chile...",className:"w-full"},autocompletionRequest:{componentRestrictions:{country:["cl"]}}}),i.coordenadas&&c.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["✓ Coordenadas: ",i.coordenadas.lat.toFixed(4),", ",i.coordenadas.lng.toFixed(4)]})]}):c.jsx("input",{disabled:!0,className:"input-style w-full opacity-50",placeholder:"Cargando Google Places..."})}),c.jsx("input",{value:i.contacto,onChange:se=>te("contacto",se.target.value),placeholder:"Contacto",className:"input-style"}),c.jsx("input",{type:"email",value:i.email||"",onChange:se=>te("email",se.target.value),placeholder:"Correo electrónico (opcional)",className:"input-style"}),c.jsx("input",{type:"number",value:i.cupos,onChange:se=>te("cupos",parseInt(se.target.value)||1),placeholder:"Número de cupos",className:"input-style",min:"1"}),c.jsxs("select",{value:i.area||"",onChange:se=>te("area",se.target.value),className:"input-style w-full",children:[c.jsx("option",{value:"",disabled:!0,children:"Seleccione un área"}),yUe.map(se=>c.jsx("option",{value:se,children:se},se))]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Docente Supervisor"}),c.jsxs("select",{value:i.docenteSupervisor?JSON.stringify(i.docenteSupervisor):"",onChange:se=>{const de=se.target.value;te("docenteSupervisor",de?JSON.parse(de):void 0)},className:"input-style w-full",children:[c.jsx("option",{value:"",children:"Sin supervisor asignado"}),n.map(se=>c.jsx("option",{value:JSON.stringify({id:se.id,nombre:se.nombreCompleto}),children:se.nombreCompleto},se.id))]})]})]})]})]})},EUe=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},_Ue=({currentUser:t,onLogout:e,onUserUpdate:n,onChangeProfile:r,canChangeProfile:s,unreadMessagesCount:a,refreshUnreadCount:i})=>{const o=t.profile,l=G.useMemo(()=>{const S=_ee[o];return o!==qt.ESTUDIANTE?S:S.filter(k=>{if(k.name==="Asistencia a Empresa"){const I=EUe(t.curso||"");return I.startsWith("3º")||I.startsWith("4º")}return!0})},[o,t.curso]),[u,d]=G.useState(null),[h,m]=G.useState(!1);G.useEffect(()=>{l&&l.length>0?d(l[0]):d(null)},[o,l]);const p=G.useCallback(S=>{d(S),window.innerWidth<768&&m(!1)},[]),y=G.useCallback(S=>{const k=l.find(I=>I.name===S);k&&p(k)},[l,p]),x=()=>c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-center h-16 border-b border-slate-700 px-4 flex-shrink-0",children:[c.jsx(cee,{}),c.jsx("span",{className:"ml-3 text-white font-bold text-xl whitespace-nowrap",children:"Gestión LIR"})]}),c.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto sidebar-scroll",children:l.map(S=>c.jsxs("button",{onClick:()=>p(S),className:`w-full flex items-center py-3 px-4 rounded-lg transition-colors duration-200 text-left ${(u==null?void 0:u.name)===S.name?"bg-slate-900 text-amber-400 font-semibold":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[S.icon,c.jsx("span",{className:"ml-4",children:S.name})]},S.name))})]}),C=()=>{if(!u)return c.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex items-center justify-center",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xl",children:"Seleccione un módulo del menú para comenzar."})});if(u.name==="Calendario Académico")return c.jsx(cne,{profile:o});if(u.name==="Muro de Anuncios")return c.jsx(hne,{currentUser:t});if(u.name==="Mensajería Interna")return c.jsx(gEe,{currentUser:t,refreshUnreadCount:i});if(u.name==="Generador de Actas")return c.jsx(bne,{});if(o===qt.SUBDIRECCION){if(u.name==="Dashboard")return c.jsx(ete,{currentUser:t});if(u.name==="Administración")return c.jsx(qme,{});if(u.name==="Seguimiento Curricular")return c.jsx(lRe,{currentUser:t});if(u.name==="Acompañamiento docente")return c.jsx(cEe,{currentUser:t});if(u.name==="Análisis Taxonómico")return c.jsx(WM,{currentUser:t});if(u.name==="Interdisciplinario")return c.jsx(OU,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return c.jsx(Wee,{currentUser:t});if(u.name==="Crear horarios")return c.jsx(Mte,{});if(u.name==="Seguimiento de acciones pedagógicas")return c.jsx(Hte,{});if(u.name==="Inclusión")return c.jsx(wR,{currentUser:t})}if(o===qt.PROFESORADO){if(u.name==="Planificación")return c.jsx(tne,{currentUser:t});if(u.name==="Mis Acompañamientos")return c.jsx(MDe,{currentUser:t});if(u.name==="Recursos de Aprendizaje")return c.jsx(CDe,{});if(u.name==="Análisis Taxonómico")return c.jsx(WM,{currentUser:t});if(u.name==="Interdisciplinario")return c.jsx(OU,{});if(u.name==="Inclusión")return c.jsx(wR,{currentUser:t});if(u.name==="Actividades Remotas")return c.jsx(dpe,{});if(u.name==="Evaluación de Aprendizajes")return c.jsx(Cse,{});if(u.name==="Evaluaciones Formativas")return c.jsx(tge,{currentUser:t})}if(o===qt.COORDINACION_TP){if(u.name==="Seguimiento Dual")return c.jsx(npe,{});if(u.name==="Asistencia Dual")return c.jsx(Ope,{});if(u.name==="Pañol")return c.jsx(a4e,{});if(u.name==="Gestión de Empresas")return c.jsx(CUe,{})}if(o===qt.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return c.jsx(gpe,{currentUser:t});if(u.name==="Evaluación Formativa")return c.jsx(kDe,{currentUser:t});if(u.name==="Tareas Interdisciplinarias")return c.jsx(LDe,{currentUser:t});if(u.name==="Asistencia a Empresa")return c.jsx(Ipe,{currentUser:t})}return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),c.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:c.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",c.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return c.jsxs("div",{className:"h-screen flex flex-col bg-slate-100",children:[c.jsx(Dee,{currentUser:t,onLogout:e,onNavigate:y,onUserUpdate:n,onChangeProfile:r,canChangeProfile:s,toggleSidebar:()=>m(!h),unreadMessagesCount:a,refreshUnreadCount:i}),c.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[h&&c.jsx("div",{onClick:()=>m(!1),className:"fixed inset-0 bg-black opacity-50 z-20 md:hidden"}),c.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 w-72 bg-slate-800 text-white flex flex-col transform md:translate-x-0 ${h?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:c.jsx(x,{})}),c.jsx("main",{className:"flex-1 overflow-y-auto",children:c.jsx("div",{className:"p-6 md:p-8",children:C()})})]})]})},SUe=({onSelectProfile:t,isAdminView:e=!1})=>c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(v4,{})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:e?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:Eee.map(n=>c.jsxs("button",{onClick:()=>t(n.id),className:"group bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md hover:shadow-xl hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-amber-400 focus:ring-opacity-50 transition-all duration-300 ease-in-out flex flex-col items-center justify-center text-center",children:[c.jsx("div",{className:"text-slate-700 dark:text-slate-300 group-hover:text-amber-400 transition-colors duration-300",children:n.icon}),c.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-800 dark:text-slate-200",children:n.label})]},n.id))}),c.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),TUe=()=>{const[t,e]=G.useState(null),[n,r]=G.useState(null),[s,a]=G.useState(!0),[i,o]=G.useState(null),[l,u]=G.useState(!1),[d,h]=G.useState(null);G.useEffect(()=>{const k=bP(Vv,async I=>{if(e(I),I)try{const F=await dj(I.email);F?(r(F),F.profile===qt.SUBDIRECCION&&u(!0)):(o("Usuario no encontrado en la base de datos. Contacte al administrador."),await E_())}catch{o("Error al conectar con la base de datos."),await E_()}else r(null),h(null),u(!1),o(null);a(!1)});return()=>k()},[]);const m=async(k,I)=>{if(o(null),!k.trim()||!I.trim()){o("Por favor ingrese email y contraseña");return}try{await iee(k.trim(),I)}catch(F){switch(F.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":o("Credenciales inválidas. Verifique su email y contraseña.");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente más tarde.");break;case"auth/network-request-failed":o("Error de conexión. Verifique su internet.");break;default:o("Ocurrió un error al intentar iniciar sesión.")}}},p=async k=>{try{await oee(k)}catch(I){console.error("Error al enviar email de recuperación:",I)}},y=k=>{h(k),u(!1)},x=()=>{u(!0),h(null)},C=async()=>{try{await E_()}catch(k){console.error("Error al cerrar sesión:",k)}};if(s)return c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(v4,{})}),c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."})]})});if(!t||!n)return c.jsx(Bee,{onLoginAttempt:m,onForgotPasswordRequest:p,error:i});if(l&&n.profile===qt.SUBDIRECCION)return c.jsx(SUe,{onSelectProfile:y,isAdminView:!0});const S=d||n.profile;return c.jsx(_Ue,{currentUser:{...n,profile:S},onLogout:C,onChangeProfile:n.profile===qt.SUBDIRECCION?x:void 0,canChangeProfile:n.profile===qt.SUBDIRECCION})},LG=document.getElementById("root");if(!LG)throw new Error("Could not find root element to mount to");const NUe=$q.createRoot(LG);NUe.render(c.jsx(gt.StrictMode,{children:c.jsx(TUe,{})}));export{es as _,BUe as c,Tb as g};
